var HI=Object.defineProperty;var GI=(o,t,a)=>t in o?HI(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var Js=(o,t,a)=>GI(o,typeof t!="symbol"?t+"":t,a);function WI(o,t){for(var a=0;a<t.length;a++){const c=t[a];if(typeof c!="string"&&!Array.isArray(c)){for(const g in c)if(g!=="default"&&!(g in o)){const N=Object.getOwnPropertyDescriptor(c,g);N&&Object.defineProperty(o,g,N.get?N:{enumerable:!0,get:()=>c[g]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))c(g);new MutationObserver(g=>{for(const N of g)if(N.type==="childList")for(const b of N.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function a(g){const N={};return g.integrity&&(N.integrity=g.integrity),g.referrerPolicy&&(N.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?N.credentials="include":g.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function c(g){if(g.ep)return;g.ep=!0;const N=a(g);fetch(g.href,N)}})();var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lj(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ZI(o){if(o.__esModule)return o;var t=o.default;if(typeof t=="function"){var a=function c(){return this instanceof c?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(c){var g=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(a,c,g.get?g:{enumerable:!0,get:function(){return o[c]}})}),a}var cj={exports:{}},mC={},uj={exports:{}},Kx={exports:{}};Kx.exports;(function(o,t){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var a="18.3.1",c=Symbol.for("react.element"),g=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),Se=Symbol.iterator,Pe="@@iterator";function De(K){if(K===null||typeof K!="object")return null;var _e=Se&&K[Se]||K[Pe];return typeof _e=="function"?_e:null}var Ce={current:null},ze={transition:null},Re={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},Ze={current:null},tt={},ut=null;function Rt(K){ut=K}tt.setExtraStackFrame=function(K){ut=K},tt.getCurrentStack=null,tt.getStackAddendum=function(){var K="";ut&&(K+=ut);var _e=tt.getCurrentStack;return _e&&(K+=_e()||""),K};var zt=!1,fn=!1,lt=!1,ct=!1,ht=!1,$t={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ze,ReactCurrentOwner:Ze};$t.ReactDebugCurrentFrame=tt,$t.ReactCurrentActQueue=Re;function An(K){{for(var _e=arguments.length,Xe=new Array(_e>1?_e-1:0),rt=1;rt<_e;rt++)Xe[rt-1]=arguments[rt];pn("warn",K,Xe)}}function Ct(K){{for(var _e=arguments.length,Xe=new Array(_e>1?_e-1:0),rt=1;rt<_e;rt++)Xe[rt-1]=arguments[rt];pn("error",K,Xe)}}function pn(K,_e,Xe){{var rt=$t.ReactDebugCurrentFrame,jt=rt.getStackAddendum();jt!==""&&(_e+="%s",Xe=Xe.concat([jt]));var xn=Xe.map(function(Yt){return String(Yt)});xn.unshift("Warning: "+_e),Function.prototype.apply.call(console[K],console,xn)}}var Sn={};function Wt(K,_e){{var Xe=K.constructor,rt=Xe&&(Xe.displayName||Xe.name)||"ReactClass",jt=rt+"."+_e;if(Sn[jt])return;Ct("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",_e,rt),Sn[jt]=!0}}var Yn={isMounted:function(K){return!1},enqueueForceUpdate:function(K,_e,Xe){Wt(K,"forceUpdate")},enqueueReplaceState:function(K,_e,Xe,rt){Wt(K,"replaceState")},enqueueSetState:function(K,_e,Xe,rt){Wt(K,"setState")}},Vn=Object.assign,Nt={};Object.freeze(Nt);function Be(K,_e,Xe){this.props=K,this.context=_e,this.refs=Nt,this.updater=Xe||Yn}Be.prototype.isReactComponent={},Be.prototype.setState=function(K,_e){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,_e,"setState")},Be.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};{var Mt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},yn=function(K,_e){Object.defineProperty(Be.prototype,K,{get:function(){An("%s(...) is deprecated in plain JavaScript React classes. %s",_e[0],_e[1])}})};for(var Dn in Mt)Mt.hasOwnProperty(Dn)&&yn(Dn,Mt[Dn])}function qt(){}qt.prototype=Be.prototype;function Ft(K,_e,Xe){this.props=K,this.context=_e,this.refs=Nt,this.updater=Xe||Yn}var Pn=Ft.prototype=new qt;Pn.constructor=Ft,Vn(Pn,Be.prototype),Pn.isPureReactComponent=!0;function vr(){var K={current:null};return Object.seal(K),K}var cn=Array.isArray;function tr(K){return cn(K)}function $r(K){{var _e=typeof Symbol=="function"&&Symbol.toStringTag,Xe=_e&&K[Symbol.toStringTag]||K.constructor.name||"Object";return Xe}}function Sr(K){try{return ur(K),!1}catch{return!0}}function ur(K){return""+K}function hi(K){if(Sr(K))return Ct("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",$r(K)),ur(K)}function Lr(K,_e,Xe){var rt=K.displayName;if(rt)return rt;var jt=_e.displayName||_e.name||"";return jt!==""?Xe+"("+jt+")":Xe}function ii(K){return K.displayName||"Context"}function We(K){if(K==null)return null;if(typeof K.tag=="number"&&Ct("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof K=="function")return K.displayName||K.name||null;if(typeof K=="string")return K;switch(K){case N:return"Fragment";case g:return"Portal";case d:return"Profiler";case b:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList"}if(typeof K=="object")switch(K.$$typeof){case k:var _e=K;return ii(_e)+".Consumer";case A:var Xe=K;return ii(Xe._context)+".Provider";case O:return Lr(K,K.render,"ForwardRef");case ie:var rt=K.displayName||null;return rt!==null?rt:We(K.type)||"Memo";case pe:{var jt=K,xn=jt._payload,Yt=jt._init;try{return We(Yt(xn))}catch{return null}}}return null}var mr=Object.prototype.hasOwnProperty,rr={key:!0,ref:!0,__self:!0,__source:!0},Ln,kn,yr;yr={};function si(K){if(mr.call(K,"ref")){var _e=Object.getOwnPropertyDescriptor(K,"ref").get;if(_e&&_e.isReactWarning)return!1}return K.ref!==void 0}function qr(K){if(mr.call(K,"key")){var _e=Object.getOwnPropertyDescriptor(K,"key").get;if(_e&&_e.isReactWarning)return!1}return K.key!==void 0}function fs(K,_e){var Xe=function(){Ln||(Ln=!0,Ct("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Xe.isReactWarning=!0,Object.defineProperty(K,"key",{get:Xe,configurable:!0})}function Bi(K,_e){var Xe=function(){kn||(kn=!0,Ct("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Xe.isReactWarning=!0,Object.defineProperty(K,"ref",{get:Xe,configurable:!0})}function Tt(K){if(typeof K.ref=="string"&&Ze.current&&K.__self&&Ze.current.stateNode!==K.__self){var _e=We(Ze.current.type);yr[_e]||(Ct('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_e,K.ref),yr[_e]=!0)}}var rn=function(K,_e,Xe,rt,jt,xn,Yt){var Mn={$$typeof:c,type:K,key:_e,ref:Xe,props:Yt,_owner:xn};return Mn._store={},Object.defineProperty(Mn._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Mn,"_self",{configurable:!1,enumerable:!1,writable:!1,value:rt}),Object.defineProperty(Mn,"_source",{configurable:!1,enumerable:!1,writable:!1,value:jt}),Object.freeze&&(Object.freeze(Mn.props),Object.freeze(Mn)),Mn};function nt(K,_e,Xe){var rt,jt={},xn=null,Yt=null,Mn=null,lr=null;if(_e!=null){si(_e)&&(Yt=_e.ref,Tt(_e)),qr(_e)&&(hi(_e.key),xn=""+_e.key),Mn=_e.__self===void 0?null:_e.__self,lr=_e.__source===void 0?null:_e.__source;for(rt in _e)mr.call(_e,rt)&&!rr.hasOwnProperty(rt)&&(jt[rt]=_e[rt])}var Ar=arguments.length-2;if(Ar===1)jt.children=Xe;else if(Ar>1){for(var Xr=Array(Ar),Jr=0;Jr<Ar;Jr++)Xr[Jr]=arguments[Jr+2];Object.freeze&&Object.freeze(Xr),jt.children=Xr}if(K&&K.defaultProps){var nr=K.defaultProps;for(rt in nr)jt[rt]===void 0&&(jt[rt]=nr[rt])}if(xn||Yt){var Qr=typeof K=="function"?K.displayName||K.name||"Unknown":K;xn&&fs(jt,Qr),Yt&&Bi(jt,Qr)}return rn(K,xn,Yt,Mn,lr,Ze.current,jt)}function zn(K,_e){var Xe=rn(K.type,_e,K.ref,K._self,K._source,K._owner,K.props);return Xe}function Cn(K,_e,Xe){if(K==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var rt,jt=Vn({},K.props),xn=K.key,Yt=K.ref,Mn=K._self,lr=K._source,Ar=K._owner;if(_e!=null){si(_e)&&(Yt=_e.ref,Ar=Ze.current),qr(_e)&&(hi(_e.key),xn=""+_e.key);var Xr;K.type&&K.type.defaultProps&&(Xr=K.type.defaultProps);for(rt in _e)mr.call(_e,rt)&&!rr.hasOwnProperty(rt)&&(_e[rt]===void 0&&Xr!==void 0?jt[rt]=Xr[rt]:jt[rt]=_e[rt])}var Jr=arguments.length-2;if(Jr===1)jt.children=Xe;else if(Jr>1){for(var nr=Array(Jr),Qr=0;Qr<Jr;Qr++)nr[Qr]=arguments[Qr+2];jt.children=nr}return rn(K.type,xn,Yt,Mn,lr,Ar,jt)}function br(K){return typeof K=="object"&&K!==null&&K.$$typeof===c}var dr=".",gt=":";function Kt(K){var _e=/[=:]/g,Xe={"=":"=0",":":"=2"},rt=K.replace(_e,function(jt){return Xe[jt]});return"$"+rt}var Bt=!1,On=/\/+/g;function Kr(K){return K.replace(On,"$&/")}function un(K,_e){return typeof K=="object"&&K!==null&&K.key!=null?(hi(K.key),Kt(""+K.key)):_e.toString(36)}function ai(K,_e,Xe,rt,jt){var xn=typeof K;(xn==="undefined"||xn==="boolean")&&(K=null);var Yt=!1;if(K===null)Yt=!0;else switch(xn){case"string":case"number":Yt=!0;break;case"object":switch(K.$$typeof){case c:case g:Yt=!0}}if(Yt){var Mn=K,lr=jt(Mn),Ar=rt===""?dr+un(Mn,0):rt;if(tr(lr)){var Xr="";Ar!=null&&(Xr=Kr(Ar)+"/"),ai(lr,_e,Xr,"",function(cd){return cd})}else lr!=null&&(br(lr)&&(lr.key&&(!Mn||Mn.key!==lr.key)&&hi(lr.key),lr=zn(lr,Xe+(lr.key&&(!Mn||Mn.key!==lr.key)?Kr(""+lr.key)+"/":"")+Ar)),_e.push(lr));return 1}var Jr,nr,Qr=0,vi=rt===""?dr:rt+gt;if(tr(K))for(var xo=0;xo<K.length;xo++)Jr=K[xo],nr=vi+un(Jr,xo),Qr+=ai(Jr,_e,Xe,nr,jt);else{var Pl=De(K);if(typeof Pl=="function"){var Hs=K;Pl===Hs.entries&&(Bt||An("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Bt=!0);for(var xc=Pl.call(Hs),_c,lu=0;!(_c=xc.next()).done;)Jr=_c.value,nr=vi+un(Jr,lu++),Qr+=ai(Jr,_e,Xe,nr,jt)}else if(xn==="object"){var no=String(K);throw new Error("Objects are not valid as a React child (found: "+(no==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":no)+"). If you meant to render a collection of children, use an array instead.")}}return Qr}function fe(K,_e,Xe){if(K==null)return K;var rt=[],jt=0;return ai(K,rt,"","",function(xn){return _e.call(Xe,xn,jt++)}),rt}function L(K){var _e=0;return fe(K,function(){_e++}),_e}function G(K,_e,Xe){fe(K,function(){_e.apply(this,arguments)},Xe)}function J(K){return fe(K,function(_e){return _e})||[]}function se(K){if(!br(K))throw new Error("React.Children.only expected to receive a single React element child.");return K}function he(K){var _e={$$typeof:k,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};_e.Provider={$$typeof:A,_context:_e};var Xe=!1,rt=!1,jt=!1;{var xn={$$typeof:k,_context:_e};Object.defineProperties(xn,{Provider:{get:function(){return rt||(rt=!0,Ct("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),_e.Provider},set:function(Yt){_e.Provider=Yt}},_currentValue:{get:function(){return _e._currentValue},set:function(Yt){_e._currentValue=Yt}},_currentValue2:{get:function(){return _e._currentValue2},set:function(Yt){_e._currentValue2=Yt}},_threadCount:{get:function(){return _e._threadCount},set:function(Yt){_e._threadCount=Yt}},Consumer:{get:function(){return Xe||(Xe=!0,Ct("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),_e.Consumer}},displayName:{get:function(){return _e.displayName},set:function(Yt){jt||(An("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Yt),jt=!0)}}}),_e.Consumer=xn}return _e._currentRenderer=null,_e._currentRenderer2=null,_e}var we=-1,xe=0,ge=1,Te=2;function Qe(K){if(K._status===we){var _e=K._result,Xe=_e();if(Xe.then(function(xn){if(K._status===xe||K._status===we){var Yt=K;Yt._status=ge,Yt._result=xn}},function(xn){if(K._status===xe||K._status===we){var Yt=K;Yt._status=Te,Yt._result=xn}}),K._status===we){var rt=K;rt._status=xe,rt._result=Xe}}if(K._status===ge){var jt=K._result;return jt===void 0&&Ct(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,jt),"default"in jt||Ct(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,jt),jt.default}else throw K._result}function ne(K){var _e={_status:we,_result:K},Xe={$$typeof:pe,_payload:_e,_init:Qe};{var rt,jt;Object.defineProperties(Xe,{defaultProps:{configurable:!0,get:function(){return rt},set:function(xn){Ct("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),rt=xn,Object.defineProperty(Xe,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return jt},set:function(xn){Ct("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),jt=xn,Object.defineProperty(Xe,"propTypes",{enumerable:!0})}}})}return Xe}function Ne(K){K!=null&&K.$$typeof===ie?Ct("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof K!="function"?Ct("forwardRef requires a render function but was given %s.",K===null?"null":typeof K):K.length!==0&&K.length!==2&&Ct("forwardRef render functions accept exactly two parameters: props and ref. %s",K.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),K!=null&&(K.defaultProps!=null||K.propTypes!=null)&&Ct("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var _e={$$typeof:O,render:K};{var Xe;Object.defineProperty(_e,"displayName",{enumerable:!1,configurable:!0,get:function(){return Xe},set:function(rt){Xe=rt,!K.name&&!K.displayName&&(K.displayName=rt)}})}return _e}var te;te=Symbol.for("react.module.reference");function Ae(K){return!!(typeof K=="string"||typeof K=="function"||K===N||K===d||ht||K===b||K===B||K===W||ct||K===Oe||zt||fn||lt||typeof K=="object"&&K!==null&&(K.$$typeof===pe||K.$$typeof===ie||K.$$typeof===A||K.$$typeof===k||K.$$typeof===O||K.$$typeof===te||K.getModuleId!==void 0))}function Fe(K,_e){Ae(K)||Ct("memo: The first argument must be a component. Instead received: %s",K===null?"null":typeof K);var Xe={$$typeof:ie,type:K,compare:_e===void 0?null:_e};{var rt;Object.defineProperty(Xe,"displayName",{enumerable:!1,configurable:!0,get:function(){return rt},set:function(jt){rt=jt,!K.name&&!K.displayName&&(K.displayName=jt)}})}return Xe}function Ke(){var K=Ce.current;return K===null&&Ct(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),K}function dt(K){var _e=Ke();if(K._context!==void 0){var Xe=K._context;Xe.Consumer===K?Ct("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Xe.Provider===K&&Ct("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return _e.useContext(K)}function pt(K){var _e=Ke();return _e.useState(K)}function Ot(K,_e,Xe){var rt=Ke();return rt.useReducer(K,_e,Xe)}function _t(K){var _e=Ke();return _e.useRef(K)}function Ut(K,_e){var Xe=Ke();return Xe.useEffect(K,_e)}function wn(K,_e){var Xe=Ke();return Xe.useInsertionEffect(K,_e)}function gn(K,_e){var Xe=Ke();return Xe.useLayoutEffect(K,_e)}function Un(K,_e){var Xe=Ke();return Xe.useCallback(K,_e)}function Hn(K,_e){var Xe=Ke();return Xe.useMemo(K,_e)}function Yr(K,_e,Xe){var rt=Ke();return rt.useImperativeHandle(K,_e,Xe)}function Hr(K,_e){{var Xe=Ke();return Xe.useDebugValue(K,_e)}}function Tn(){var K=Ke();return K.useTransition()}function Us(K){var _e=Ke();return _e.useDeferredValue(K)}function pc(){var K=Ke();return K.useId()}function xr(K,_e,Xe){var rt=Ke();return rt.useSyncExternalStore(K,_e,Xe)}var Qa=0,Fo,Li,ss,su,ms,Ii,xl;function Ia(){}Ia.__reactDisabledLog=!0;function Br(){{if(Qa===0){Fo=console.log,Li=console.info,ss=console.warn,su=console.error,ms=console.group,Ii=console.groupCollapsed,xl=console.groupEnd;var K={configurable:!0,enumerable:!0,value:Ia,writable:!0};Object.defineProperties(console,{info:K,log:K,warn:K,error:K,group:K,groupCollapsed:K,groupEnd:K})}Qa++}}function Gn(){{if(Qa--,Qa===0){var K={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Vn({},K,{value:Fo}),info:Vn({},K,{value:Li}),warn:Vn({},K,{value:ss}),error:Vn({},K,{value:su}),group:Vn({},K,{value:ms}),groupCollapsed:Vn({},K,{value:Ii}),groupEnd:Vn({},K,{value:xl})})}Qa<0&&Ct("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Qs=$t.ReactCurrentDispatcher,jr;function vo(K,_e,Xe){{if(jr===void 0)try{throw Error()}catch(jt){var rt=jt.stack.trim().match(/\n( *(at )?)/);jr=rt&&rt[1]||""}return`
`+jr+K}}var Ji=!1,Uo;{var pa=typeof WeakMap=="function"?WeakMap:Map;Uo=new pa}function au(K,_e){if(!K||Ji)return"";{var Xe=Uo.get(K);if(Xe!==void 0)return Xe}var rt;Ji=!0;var jt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var xn;xn=Qs.current,Qs.current=null,Br();try{if(_e){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(vi){rt=vi}Reflect.construct(K,[],Yt)}else{try{Yt.call()}catch(vi){rt=vi}K.call(Yt.prototype)}}else{try{throw Error()}catch(vi){rt=vi}K()}}catch(vi){if(vi&&rt&&typeof vi.stack=="string"){for(var Mn=vi.stack.split(`
`),lr=rt.stack.split(`
`),Ar=Mn.length-1,Xr=lr.length-1;Ar>=1&&Xr>=0&&Mn[Ar]!==lr[Xr];)Xr--;for(;Ar>=1&&Xr>=0;Ar--,Xr--)if(Mn[Ar]!==lr[Xr]){if(Ar!==1||Xr!==1)do if(Ar--,Xr--,Xr<0||Mn[Ar]!==lr[Xr]){var Jr=`
`+Mn[Ar].replace(" at new "," at ");return K.displayName&&Jr.includes("<anonymous>")&&(Jr=Jr.replace("<anonymous>",K.displayName)),typeof K=="function"&&Uo.set(K,Jr),Jr}while(Ar>=1&&Xr>=0);break}}}finally{Ji=!1,Qs.current=xn,Gn(),Error.prepareStackTrace=jt}var nr=K?K.displayName||K.name:"",Qr=nr?vo(nr):"";return typeof K=="function"&&Uo.set(K,Qr),Qr}function _l(K,_e,Xe){return au(K,!1)}function gc(K){var _e=K.prototype;return!!(_e&&_e.isReactComponent)}function eo(K,_e,Xe){if(K==null)return"";if(typeof K=="function")return au(K,gc(K));if(typeof K=="string")return vo(K);switch(K){case B:return vo("Suspense");case W:return vo("SuspenseList")}if(typeof K=="object")switch(K.$$typeof){case O:return _l(K.render);case ie:return eo(K.type,_e,Xe);case pe:{var rt=K,jt=rt._payload,xn=rt._init;try{return eo(xn(jt),_e,Xe)}catch{}}}return""}var Va={},wl=$t.ReactDebugCurrentFrame;function or(K){if(K){var _e=K._owner,Xe=eo(K.type,K._source,_e?_e.type:null);wl.setExtraStackFrame(Xe)}else wl.setExtraStackFrame(null)}function od(K,_e,Xe,rt,jt){{var xn=Function.call.bind(mr);for(var Yt in K)if(xn(K,Yt)){var Mn=void 0;try{if(typeof K[Yt]!="function"){var lr=Error((rt||"React class")+": "+Xe+" type `"+Yt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof K[Yt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw lr.name="Invariant Violation",lr}Mn=K[Yt](_e,Yt,rt,Xe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ar){Mn=Ar}Mn&&!(Mn instanceof Error)&&(or(jt),Ct("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",rt||"React class",Xe,Yt,typeof Mn),or(null)),Mn instanceof Error&&!(Mn.message in Va)&&(Va[Mn.message]=!0,or(jt),Ct("Failed %s type: %s",Xe,Mn.message),or(null))}}}function yo(K){if(K){var _e=K._owner,Xe=eo(K.type,K._source,_e?_e.type:null);Rt(Xe)}else Rt(null)}var jn;jn=!1;function Cl(){if(Ze.current){var K=We(Ze.current.type);if(K)return`

Check the render method of \``+K+"`."}return""}function ps(K){if(K!==void 0){var _e=K.fileName.replace(/^.*[\\\/]/,""),Xe=K.lineNumber;return`

Check your code at `+_e+":"+Xe+"."}return""}function Nl(K){return K!=null?ps(K.__source):""}var bo={};function ld(K){var _e=Cl();if(!_e){var Xe=typeof K=="string"?K:K.displayName||K.name;Xe&&(_e=`

Check the top-level render call using <`+Xe+">.")}return _e}function Pi(K,_e){if(!(!K._store||K._store.validated||K.key!=null)){K._store.validated=!0;var Xe=ld(_e);if(!bo[Xe]){bo[Xe]=!0;var rt="";K&&K._owner&&K._owner!==Ze.current&&(rt=" It was passed a child from "+We(K._owner.type)+"."),yo(K),Ct('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Xe,rt),yo(null)}}}function oi(K,_e){if(typeof K=="object"){if(tr(K))for(var Xe=0;Xe<K.length;Xe++){var rt=K[Xe];br(rt)&&Pi(rt,_e)}else if(br(K))K._store&&(K._store.validated=!0);else if(K){var jt=De(K);if(typeof jt=="function"&&jt!==K.entries)for(var xn=jt.call(K),Yt;!(Yt=xn.next()).done;)br(Yt.value)&&Pi(Yt.value,_e)}}}function ou(K){{var _e=K.type;if(_e==null||typeof _e=="string")return;var Xe;if(typeof _e=="function")Xe=_e.propTypes;else if(typeof _e=="object"&&(_e.$$typeof===O||_e.$$typeof===ie))Xe=_e.propTypes;else return;if(Xe){var rt=We(_e);od(Xe,K.props,"prop",rt,K)}else if(_e.PropTypes!==void 0&&!jn){jn=!0;var jt=We(_e);Ct("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",jt||"Unknown")}typeof _e.getDefaultProps=="function"&&!_e.getDefaultProps.isReactClassApproved&&Ct("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function $s(K){{for(var _e=Object.keys(K.props),Xe=0;Xe<_e.length;Xe++){var rt=_e[Xe];if(rt!=="children"&&rt!=="key"){yo(K),Ct("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",rt),yo(null);break}}K.ref!==null&&(yo(K),Ct("Invalid attribute `ref` supplied to `React.Fragment`."),yo(null))}}function as(K,_e,Xe){var rt=Ae(K);if(!rt){var jt="";(K===void 0||typeof K=="object"&&K!==null&&Object.keys(K).length===0)&&(jt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var xn=Nl(_e);xn?jt+=xn:jt+=Cl();var Yt;K===null?Yt="null":tr(K)?Yt="array":K!==void 0&&K.$$typeof===c?(Yt="<"+(We(K.type)||"Unknown")+" />",jt=" Did you accidentally export a JSX literal instead of a component?"):Yt=typeof K,Ct("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Yt,jt)}var Mn=nt.apply(this,arguments);if(Mn==null)return Mn;if(rt)for(var lr=2;lr<arguments.length;lr++)oi(arguments[lr],K);return K===N?$s(Mn):ou(Mn),Mn}var os=!1;function vc(K){var _e=as.bind(null,K);return _e.type=K,os||(os=!0,An("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(_e,"type",{enumerable:!1,get:function(){return An("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:K}),K}}),_e}function gs(K,_e,Xe){for(var rt=Cn.apply(this,arguments),jt=2;jt<arguments.length;jt++)oi(arguments[jt],rt.type);return ou(rt),rt}function Sl(K,_e){var Xe=ze.transition;ze.transition={};var rt=ze.transition;ze.transition._updatedFibers=new Set;try{K()}finally{if(ze.transition=Xe,Xe===null&&rt._updatedFibers){var jt=rt._updatedFibers.size;jt>10&&An("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),rt._updatedFibers.clear()}}}var $o=!1,to=null;function yc(K){if(to===null)try{var _e=("require"+Math.random()).slice(0,7),Xe=o&&o[_e];to=Xe.call(o,"timers").setImmediate}catch{to=function(jt){$o===!1&&($o=!0,typeof MessageChannel>"u"&&Ct("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var xn=new MessageChannel;xn.port1.onmessage=jt,xn.port2.postMessage(void 0)}}return to(K)}var ea=0,qs=!1;function Wn(K){{var _e=ea;ea++,Re.current===null&&(Re.current=[]);var Xe=Re.isBatchingLegacy,rt;try{if(Re.isBatchingLegacy=!0,rt=K(),!Xe&&Re.didScheduleLegacyUpdate){var jt=Re.current;jt!==null&&(Re.didScheduleLegacyUpdate=!1,qo(jt))}}catch(nr){throw ga(_e),nr}finally{Re.isBatchingLegacy=Xe}if(rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var xn=rt,Yt=!1,Mn={then:function(nr,Qr){Yt=!0,xn.then(function(vi){ga(_e),ea===0?Qi(vi,nr,Qr):nr(vi)},function(vi){ga(_e),Qr(vi)})}};return!qs&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Yt||(qs=!0,Ct("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Mn}else{var lr=rt;if(ga(_e),ea===0){var Ar=Re.current;Ar!==null&&(qo(Ar),Re.current=null);var Xr={then:function(nr,Qr){Re.current===null?(Re.current=[],Qi(lr,nr,Qr)):nr(lr)}};return Xr}else{var Jr={then:function(nr,Qr){nr(lr)}};return Jr}}}}function ga(K){K!==ea-1&&Ct("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),ea=K}function Qi(K,_e,Xe){{var rt=Re.current;if(rt!==null)try{qo(rt),yc(function(){rt.length===0?(Re.current=null,_e(K)):Qi(K,_e,Xe)})}catch(jt){Xe(jt)}else _e(K)}}var es=!1;function qo(K){if(!es){es=!0;var _e=0;try{for(;_e<K.length;_e++){var Xe=K[_e];do Xe=Xe(!0);while(Xe!==null)}K.length=0}catch(rt){throw K=K.slice(_e+1),rt}finally{es=!1}}}var El=as,Dl=gs,Tl=vc,bc={map:fe,forEach:G,count:L,toArray:J,only:se};t.Children=bc,t.Component=Be,t.Fragment=N,t.Profiler=d,t.PureComponent=Ft,t.StrictMode=b,t.Suspense=B,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$t,t.act=Wn,t.cloneElement=Dl,t.createContext=he,t.createElement=El,t.createFactory=Tl,t.createRef=vr,t.forwardRef=Ne,t.isValidElement=br,t.lazy=ne,t.memo=Fe,t.startTransition=Sl,t.unstable_act=Wn,t.useCallback=Un,t.useContext=dt,t.useDebugValue=Hr,t.useDeferredValue=Us,t.useEffect=Ut,t.useId=pc,t.useImperativeHandle=Yr,t.useInsertionEffect=wn,t.useLayoutEffect=gn,t.useMemo=Hn,t.useReducer=Ot,t.useRef=_t,t.useState=pt,t.useSyncExternalStore=xr,t.useTransition=Tn,t.version=a,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Kx,Kx.exports);var KI=Kx.exports;uj.exports=KI;var oe=uj.exports;const sN=lj(oe),YI=WI({__proto__:null,default:sN},[oe]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=oe,t=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),d=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),pe=Symbol.iterator,Oe="@@iterator";function Se(ne){if(ne===null||typeof ne!="object")return null;var Ne=pe&&ne[pe]||ne[Oe];return typeof Ne=="function"?Ne:null}var Pe=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function De(ne){{for(var Ne=arguments.length,te=new Array(Ne>1?Ne-1:0),Ae=1;Ae<Ne;Ae++)te[Ae-1]=arguments[Ae];Ce("error",ne,te)}}function Ce(ne,Ne,te){{var Ae=Pe.ReactDebugCurrentFrame,Fe=Ae.getStackAddendum();Fe!==""&&(Ne+="%s",te=te.concat([Fe]));var Ke=te.map(function(dt){return String(dt)});Ke.unshift("Warning: "+Ne),Function.prototype.apply.call(console[ne],console,Ke)}}var ze=!1,Re=!1,Ze=!1,tt=!1,ut=!1,Rt;Rt=Symbol.for("react.module.reference");function zt(ne){return!!(typeof ne=="string"||typeof ne=="function"||ne===c||ne===N||ut||ne===g||ne===k||ne===O||tt||ne===ie||ze||Re||Ze||typeof ne=="object"&&ne!==null&&(ne.$$typeof===W||ne.$$typeof===B||ne.$$typeof===b||ne.$$typeof===d||ne.$$typeof===A||ne.$$typeof===Rt||ne.getModuleId!==void 0))}function fn(ne,Ne,te){var Ae=ne.displayName;if(Ae)return Ae;var Fe=Ne.displayName||Ne.name||"";return Fe!==""?te+"("+Fe+")":te}function lt(ne){return ne.displayName||"Context"}function ct(ne){if(ne==null)return null;if(typeof ne.tag=="number"&&De("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof ne=="function")return ne.displayName||ne.name||null;if(typeof ne=="string")return ne;switch(ne){case c:return"Fragment";case a:return"Portal";case N:return"Profiler";case g:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList"}if(typeof ne=="object")switch(ne.$$typeof){case d:var Ne=ne;return lt(Ne)+".Consumer";case b:var te=ne;return lt(te._context)+".Provider";case A:return fn(ne,ne.render,"ForwardRef");case B:var Ae=ne.displayName||null;return Ae!==null?Ae:ct(ne.type)||"Memo";case W:{var Fe=ne,Ke=Fe._payload,dt=Fe._init;try{return ct(dt(Ke))}catch{return null}}}return null}var ht=Object.assign,$t=0,An,Ct,pn,Sn,Wt,Yn,Vn;function Nt(){}Nt.__reactDisabledLog=!0;function Be(){{if($t===0){An=console.log,Ct=console.info,pn=console.warn,Sn=console.error,Wt=console.group,Yn=console.groupCollapsed,Vn=console.groupEnd;var ne={configurable:!0,enumerable:!0,value:Nt,writable:!0};Object.defineProperties(console,{info:ne,log:ne,warn:ne,error:ne,group:ne,groupCollapsed:ne,groupEnd:ne})}$t++}}function Mt(){{if($t--,$t===0){var ne={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ht({},ne,{value:An}),info:ht({},ne,{value:Ct}),warn:ht({},ne,{value:pn}),error:ht({},ne,{value:Sn}),group:ht({},ne,{value:Wt}),groupCollapsed:ht({},ne,{value:Yn}),groupEnd:ht({},ne,{value:Vn})})}$t<0&&De("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var yn=Pe.ReactCurrentDispatcher,Dn;function qt(ne,Ne,te){{if(Dn===void 0)try{throw Error()}catch(Fe){var Ae=Fe.stack.trim().match(/\n( *(at )?)/);Dn=Ae&&Ae[1]||""}return`
`+Dn+ne}}var Ft=!1,Pn;{var vr=typeof WeakMap=="function"?WeakMap:Map;Pn=new vr}function cn(ne,Ne){if(!ne||Ft)return"";{var te=Pn.get(ne);if(te!==void 0)return te}var Ae;Ft=!0;var Fe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ke;Ke=yn.current,yn.current=null,Be();try{if(Ne){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Hn){Ae=Hn}Reflect.construct(ne,[],dt)}else{try{dt.call()}catch(Hn){Ae=Hn}ne.call(dt.prototype)}}else{try{throw Error()}catch(Hn){Ae=Hn}ne()}}catch(Hn){if(Hn&&Ae&&typeof Hn.stack=="string"){for(var pt=Hn.stack.split(`
`),Ot=Ae.stack.split(`
`),_t=pt.length-1,Ut=Ot.length-1;_t>=1&&Ut>=0&&pt[_t]!==Ot[Ut];)Ut--;for(;_t>=1&&Ut>=0;_t--,Ut--)if(pt[_t]!==Ot[Ut]){if(_t!==1||Ut!==1)do if(_t--,Ut--,Ut<0||pt[_t]!==Ot[Ut]){var wn=`
`+pt[_t].replace(" at new "," at ");return ne.displayName&&wn.includes("<anonymous>")&&(wn=wn.replace("<anonymous>",ne.displayName)),typeof ne=="function"&&Pn.set(ne,wn),wn}while(_t>=1&&Ut>=0);break}}}finally{Ft=!1,yn.current=Ke,Mt(),Error.prepareStackTrace=Fe}var gn=ne?ne.displayName||ne.name:"",Un=gn?qt(gn):"";return typeof ne=="function"&&Pn.set(ne,Un),Un}function tr(ne,Ne,te){return cn(ne,!1)}function $r(ne){var Ne=ne.prototype;return!!(Ne&&Ne.isReactComponent)}function Sr(ne,Ne,te){if(ne==null)return"";if(typeof ne=="function")return cn(ne,$r(ne));if(typeof ne=="string")return qt(ne);switch(ne){case k:return qt("Suspense");case O:return qt("SuspenseList")}if(typeof ne=="object")switch(ne.$$typeof){case A:return tr(ne.render);case B:return Sr(ne.type,Ne,te);case W:{var Ae=ne,Fe=Ae._payload,Ke=Ae._init;try{return Sr(Ke(Fe),Ne,te)}catch{}}}return""}var ur=Object.prototype.hasOwnProperty,hi={},Lr=Pe.ReactDebugCurrentFrame;function ii(ne){if(ne){var Ne=ne._owner,te=Sr(ne.type,ne._source,Ne?Ne.type:null);Lr.setExtraStackFrame(te)}else Lr.setExtraStackFrame(null)}function We(ne,Ne,te,Ae,Fe){{var Ke=Function.call.bind(ur);for(var dt in ne)if(Ke(ne,dt)){var pt=void 0;try{if(typeof ne[dt]!="function"){var Ot=Error((Ae||"React class")+": "+te+" type `"+dt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ne[dt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ot.name="Invariant Violation",Ot}pt=ne[dt](Ne,dt,Ae,te,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(_t){pt=_t}pt&&!(pt instanceof Error)&&(ii(Fe),De("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ae||"React class",te,dt,typeof pt),ii(null)),pt instanceof Error&&!(pt.message in hi)&&(hi[pt.message]=!0,ii(Fe),De("Failed %s type: %s",te,pt.message),ii(null))}}}var mr=Array.isArray;function rr(ne){return mr(ne)}function Ln(ne){{var Ne=typeof Symbol=="function"&&Symbol.toStringTag,te=Ne&&ne[Symbol.toStringTag]||ne.constructor.name||"Object";return te}}function kn(ne){try{return yr(ne),!1}catch{return!0}}function yr(ne){return""+ne}function si(ne){if(kn(ne))return De("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ln(ne)),yr(ne)}var qr=Pe.ReactCurrentOwner,fs={key:!0,ref:!0,__self:!0,__source:!0},Bi,Tt,rn;rn={};function nt(ne){if(ur.call(ne,"ref")){var Ne=Object.getOwnPropertyDescriptor(ne,"ref").get;if(Ne&&Ne.isReactWarning)return!1}return ne.ref!==void 0}function zn(ne){if(ur.call(ne,"key")){var Ne=Object.getOwnPropertyDescriptor(ne,"key").get;if(Ne&&Ne.isReactWarning)return!1}return ne.key!==void 0}function Cn(ne,Ne){if(typeof ne.ref=="string"&&qr.current&&Ne&&qr.current.stateNode!==Ne){var te=ct(qr.current.type);rn[te]||(De('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ct(qr.current.type),ne.ref),rn[te]=!0)}}function br(ne,Ne){{var te=function(){Bi||(Bi=!0,De("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ne))};te.isReactWarning=!0,Object.defineProperty(ne,"key",{get:te,configurable:!0})}}function dr(ne,Ne){{var te=function(){Tt||(Tt=!0,De("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ne))};te.isReactWarning=!0,Object.defineProperty(ne,"ref",{get:te,configurable:!0})}}var gt=function(ne,Ne,te,Ae,Fe,Ke,dt){var pt={$$typeof:t,type:ne,key:Ne,ref:te,props:dt,_owner:Ke};return pt._store={},Object.defineProperty(pt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(pt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ae}),Object.defineProperty(pt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Fe}),Object.freeze&&(Object.freeze(pt.props),Object.freeze(pt)),pt};function Kt(ne,Ne,te,Ae,Fe){{var Ke,dt={},pt=null,Ot=null;te!==void 0&&(si(te),pt=""+te),zn(Ne)&&(si(Ne.key),pt=""+Ne.key),nt(Ne)&&(Ot=Ne.ref,Cn(Ne,Fe));for(Ke in Ne)ur.call(Ne,Ke)&&!fs.hasOwnProperty(Ke)&&(dt[Ke]=Ne[Ke]);if(ne&&ne.defaultProps){var _t=ne.defaultProps;for(Ke in _t)dt[Ke]===void 0&&(dt[Ke]=_t[Ke])}if(pt||Ot){var Ut=typeof ne=="function"?ne.displayName||ne.name||"Unknown":ne;pt&&br(dt,Ut),Ot&&dr(dt,Ut)}return gt(ne,pt,Ot,Fe,Ae,qr.current,dt)}}var Bt=Pe.ReactCurrentOwner,On=Pe.ReactDebugCurrentFrame;function Kr(ne){if(ne){var Ne=ne._owner,te=Sr(ne.type,ne._source,Ne?Ne.type:null);On.setExtraStackFrame(te)}else On.setExtraStackFrame(null)}var un;un=!1;function ai(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function fe(){{if(Bt.current){var ne=ct(Bt.current.type);if(ne)return`

Check the render method of \``+ne+"`."}return""}}function L(ne){{if(ne!==void 0){var Ne=ne.fileName.replace(/^.*[\\\/]/,""),te=ne.lineNumber;return`

Check your code at `+Ne+":"+te+"."}return""}}var G={};function J(ne){{var Ne=fe();if(!Ne){var te=typeof ne=="string"?ne:ne.displayName||ne.name;te&&(Ne=`

Check the top-level render call using <`+te+">.")}return Ne}}function se(ne,Ne){{if(!ne._store||ne._store.validated||ne.key!=null)return;ne._store.validated=!0;var te=J(Ne);if(G[te])return;G[te]=!0;var Ae="";ne&&ne._owner&&ne._owner!==Bt.current&&(Ae=" It was passed a child from "+ct(ne._owner.type)+"."),Kr(ne),De('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',te,Ae),Kr(null)}}function he(ne,Ne){{if(typeof ne!="object")return;if(rr(ne))for(var te=0;te<ne.length;te++){var Ae=ne[te];ai(Ae)&&se(Ae,Ne)}else if(ai(ne))ne._store&&(ne._store.validated=!0);else if(ne){var Fe=Se(ne);if(typeof Fe=="function"&&Fe!==ne.entries)for(var Ke=Fe.call(ne),dt;!(dt=Ke.next()).done;)ai(dt.value)&&se(dt.value,Ne)}}}function we(ne){{var Ne=ne.type;if(Ne==null||typeof Ne=="string")return;var te;if(typeof Ne=="function")te=Ne.propTypes;else if(typeof Ne=="object"&&(Ne.$$typeof===A||Ne.$$typeof===B))te=Ne.propTypes;else return;if(te){var Ae=ct(Ne);We(te,ne.props,"prop",Ae,ne)}else if(Ne.PropTypes!==void 0&&!un){un=!0;var Fe=ct(Ne);De("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Fe||"Unknown")}typeof Ne.getDefaultProps=="function"&&!Ne.getDefaultProps.isReactClassApproved&&De("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function xe(ne){{for(var Ne=Object.keys(ne.props),te=0;te<Ne.length;te++){var Ae=Ne[te];if(Ae!=="children"&&Ae!=="key"){Kr(ne),De("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ae),Kr(null);break}}ne.ref!==null&&(Kr(ne),De("Invalid attribute `ref` supplied to `React.Fragment`."),Kr(null))}}var ge={};function Te(ne,Ne,te,Ae,Fe,Ke){{var dt=zt(ne);if(!dt){var pt="";(ne===void 0||typeof ne=="object"&&ne!==null&&Object.keys(ne).length===0)&&(pt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ot=L(Fe);Ot?pt+=Ot:pt+=fe();var _t;ne===null?_t="null":rr(ne)?_t="array":ne!==void 0&&ne.$$typeof===t?(_t="<"+(ct(ne.type)||"Unknown")+" />",pt=" Did you accidentally export a JSX literal instead of a component?"):_t=typeof ne,De("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",_t,pt)}var Ut=Kt(ne,Ne,te,Fe,Ke);if(Ut==null)return Ut;if(dt){var wn=Ne.children;if(wn!==void 0)if(Ae)if(rr(wn)){for(var gn=0;gn<wn.length;gn++)he(wn[gn],ne);Object.freeze&&Object.freeze(wn)}else De("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else he(wn,ne)}if(ur.call(Ne,"key")){var Un=ct(ne),Hn=Object.keys(Ne).filter(function(Tn){return Tn!=="key"}),Yr=Hn.length>0?"{key: someKey, "+Hn.join(": ..., ")+": ...}":"{key: someKey}";if(!ge[Un+Yr]){var Hr=Hn.length>0?"{"+Hn.join(": ..., ")+": ...}":"{}";De(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Yr,Un,Hr,Un),ge[Un+Yr]=!0}}return ne===c?xe(Ut):we(Ut),Ut}}var Qe=Te;mC.Fragment=c,mC.jsxDEV=Qe})();cj.exports=mC;var S=cj.exports,pC={},dj={exports:{}},zo={},hj={exports:{}},fj={};(function(o){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=!1,a=5;function c(Tt,rn){var nt=Tt.length;Tt.push(rn),b(Tt,rn,nt)}function g(Tt){return Tt.length===0?null:Tt[0]}function N(Tt){if(Tt.length===0)return null;var rn=Tt[0],nt=Tt.pop();return nt!==rn&&(Tt[0]=nt,d(Tt,nt,0)),rn}function b(Tt,rn,nt){for(var zn=nt;zn>0;){var Cn=zn-1>>>1,br=Tt[Cn];if(A(br,rn)>0)Tt[Cn]=rn,Tt[zn]=br,zn=Cn;else return}}function d(Tt,rn,nt){for(var zn=nt,Cn=Tt.length,br=Cn>>>1;zn<br;){var dr=(zn+1)*2-1,gt=Tt[dr],Kt=dr+1,Bt=Tt[Kt];if(A(gt,rn)<0)Kt<Cn&&A(Bt,gt)<0?(Tt[zn]=Bt,Tt[Kt]=rn,zn=Kt):(Tt[zn]=gt,Tt[dr]=rn,zn=dr);else if(Kt<Cn&&A(Bt,rn)<0)Tt[zn]=Bt,Tt[Kt]=rn,zn=Kt;else return}}function A(Tt,rn){var nt=Tt.sortIndex-rn.sortIndex;return nt!==0?nt:Tt.id-rn.id}var k=1,O=2,B=3,W=4,ie=5;function pe(Tt,rn){}var Oe=typeof performance=="object"&&typeof performance.now=="function";if(Oe){var Se=performance;o.unstable_now=function(){return Se.now()}}else{var Pe=Date,De=Pe.now();o.unstable_now=function(){return Pe.now()-De}}var Ce=1073741823,ze=-1,Re=250,Ze=5e3,tt=1e4,ut=Ce,Rt=[],zt=[],fn=1,lt=null,ct=B,ht=!1,$t=!1,An=!1,Ct=typeof setTimeout=="function"?setTimeout:null,pn=typeof clearTimeout=="function"?clearTimeout:null,Sn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Wt(Tt){for(var rn=g(zt);rn!==null;){if(rn.callback===null)N(zt);else if(rn.startTime<=Tt)N(zt),rn.sortIndex=rn.expirationTime,c(Rt,rn);else return;rn=g(zt)}}function Yn(Tt){if(An=!1,Wt(Tt),!$t)if(g(Rt)!==null)$t=!0,yr(Vn);else{var rn=g(zt);rn!==null&&si(Yn,rn.startTime-Tt)}}function Vn(Tt,rn){$t=!1,An&&(An=!1,qr()),ht=!0;var nt=ct;try{var zn;if(!t)return Nt(Tt,rn)}finally{lt=null,ct=nt,ht=!1}}function Nt(Tt,rn){var nt=rn;for(Wt(nt),lt=g(Rt);lt!==null&&!(lt.expirationTime>nt&&(!Tt||Lr()));){var zn=lt.callback;if(typeof zn=="function"){lt.callback=null,ct=lt.priorityLevel;var Cn=lt.expirationTime<=nt,br=zn(Cn);nt=o.unstable_now(),typeof br=="function"?lt.callback=br:lt===g(Rt)&&N(Rt),Wt(nt)}else N(Rt);lt=g(Rt)}if(lt!==null)return!0;var dr=g(zt);return dr!==null&&si(Yn,dr.startTime-nt),!1}function Be(Tt,rn){switch(Tt){case k:case O:case B:case W:case ie:break;default:Tt=B}var nt=ct;ct=Tt;try{return rn()}finally{ct=nt}}function Mt(Tt){var rn;switch(ct){case k:case O:case B:rn=B;break;default:rn=ct;break}var nt=ct;ct=rn;try{return Tt()}finally{ct=nt}}function yn(Tt){var rn=ct;return function(){var nt=ct;ct=rn;try{return Tt.apply(this,arguments)}finally{ct=nt}}}function Dn(Tt,rn,nt){var zn=o.unstable_now(),Cn;if(typeof nt=="object"&&nt!==null){var br=nt.delay;typeof br=="number"&&br>0?Cn=zn+br:Cn=zn}else Cn=zn;var dr;switch(Tt){case k:dr=ze;break;case O:dr=Re;break;case ie:dr=ut;break;case W:dr=tt;break;case B:default:dr=Ze;break}var gt=Cn+dr,Kt={id:fn++,callback:rn,priorityLevel:Tt,startTime:Cn,expirationTime:gt,sortIndex:-1};return Cn>zn?(Kt.sortIndex=Cn,c(zt,Kt),g(Rt)===null&&Kt===g(zt)&&(An?qr():An=!0,si(Yn,Cn-zn))):(Kt.sortIndex=gt,c(Rt,Kt),!$t&&!ht&&($t=!0,yr(Vn))),Kt}function qt(){}function Ft(){!$t&&!ht&&($t=!0,yr(Vn))}function Pn(){return g(Rt)}function vr(Tt){Tt.callback=null}function cn(){return ct}var tr=!1,$r=null,Sr=-1,ur=a,hi=-1;function Lr(){var Tt=o.unstable_now()-hi;return!(Tt<ur)}function ii(){}function We(Tt){if(Tt<0||Tt>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Tt>0?ur=Math.floor(1e3/Tt):ur=a}var mr=function(){if($r!==null){var Tt=o.unstable_now();hi=Tt;var rn=!0,nt=!0;try{nt=$r(rn,Tt)}finally{nt?rr():(tr=!1,$r=null)}}else tr=!1},rr;if(typeof Sn=="function")rr=function(){Sn(mr)};else if(typeof MessageChannel<"u"){var Ln=new MessageChannel,kn=Ln.port2;Ln.port1.onmessage=mr,rr=function(){kn.postMessage(null)}}else rr=function(){Ct(mr,0)};function yr(Tt){$r=Tt,tr||(tr=!0,rr())}function si(Tt,rn){Sr=Ct(function(){Tt(o.unstable_now())},rn)}function qr(){pn(Sr),Sr=-1}var fs=ii,Bi=null;o.unstable_IdlePriority=ie,o.unstable_ImmediatePriority=k,o.unstable_LowPriority=W,o.unstable_NormalPriority=B,o.unstable_Profiling=Bi,o.unstable_UserBlockingPriority=O,o.unstable_cancelCallback=vr,o.unstable_continueExecution=Ft,o.unstable_forceFrameRate=We,o.unstable_getCurrentPriorityLevel=cn,o.unstable_getFirstCallbackNode=Pn,o.unstable_next=Mt,o.unstable_pauseExecution=qt,o.unstable_requestPaint=fs,o.unstable_runWithPriority=Be,o.unstable_scheduleCallback=Dn,o.unstable_shouldYield=Lr,o.unstable_wrapCallback=yn,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(fj);hj.exports=fj;var XI=hj.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var o=oe,t=XI,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=!1;function g(e){c=e}function N(e){if(!c){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];d("warn",e,h)}}function b(e){if(!c){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];d("error",e,h)}}function d(e,i,h){{var p=a.ReactDebugCurrentFrame,w=p.getStackAddendum();w!==""&&(i+="%s",h=h.concat([w]));var D=h.map(function(I){return String(I)});D.unshift("Warning: "+i),Function.prototype.apply.call(console[e],console,D)}}var A=0,k=1,O=2,B=3,W=4,ie=5,pe=6,Oe=7,Se=8,Pe=9,De=10,Ce=11,ze=12,Re=13,Ze=14,tt=15,ut=16,Rt=17,zt=18,fn=19,lt=21,ct=22,ht=23,$t=24,An=25,Ct=!0,pn=!1,Sn=!1,Wt=!1,Yn=!1,Vn=!0,Nt=!0,Be=!0,Mt=!0,yn=new Set,Dn={},qt={};function Ft(e,i){Pn(e,i),Pn(e+"Capture",i)}function Pn(e,i){Dn[e]&&b("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),Dn[e]=i;{var h=e.toLowerCase();qt[h]=e,e==="onDoubleClick"&&(qt.ondblclick=e)}for(var p=0;p<i.length;p++)yn.add(i[p])}var vr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cn=Object.prototype.hasOwnProperty;function tr(e){{var i=typeof Symbol=="function"&&Symbol.toStringTag,h=i&&e[Symbol.toStringTag]||e.constructor.name||"Object";return h}}function $r(e){try{return Sr(e),!1}catch{return!0}}function Sr(e){return""+e}function ur(e,i){if($r(e))return b("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",i,tr(e)),Sr(e)}function hi(e){if($r(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",tr(e)),Sr(e)}function Lr(e,i){if($r(e))return b("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",i,tr(e)),Sr(e)}function ii(e,i){if($r(e))return b("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",i,tr(e)),Sr(e)}function We(e){if($r(e))return b("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",tr(e)),Sr(e)}function mr(e){if($r(e))return b("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",tr(e)),Sr(e)}var rr=0,Ln=1,kn=2,yr=3,si=4,qr=5,fs=6,Bi=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Tt=Bi+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",rn=new RegExp("^["+Bi+"]["+Tt+"]*$"),nt={},zn={};function Cn(e){return cn.call(zn,e)?!0:cn.call(nt,e)?!1:rn.test(e)?(zn[e]=!0,!0):(nt[e]=!0,b("Invalid attribute name: `%s`",e),!1)}function br(e,i,h){return i!==null?i.type===rr:h?!1:e.length>2&&(e[0]==="o"||e[0]==="O")&&(e[1]==="n"||e[1]==="N")}function dr(e,i,h,p){if(h!==null&&h.type===rr)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":{if(p)return!1;if(h!==null)return!h.acceptsBooleans;var w=e.toLowerCase().slice(0,5);return w!=="data-"&&w!=="aria-"}default:return!1}}function gt(e,i,h,p){if(i===null||typeof i>"u"||dr(e,i,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case yr:return!i;case si:return i===!1;case qr:return isNaN(i);case fs:return isNaN(i)||i<1}return!1}function Kt(e){return On.hasOwnProperty(e)?On[e]:null}function Bt(e,i,h,p,w,D,I){this.acceptsBooleans=i===kn||i===yr||i===si,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=e,this.type=i,this.sanitizeURL=D,this.removeEmptyString=I}var On={},Kr=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Kr.forEach(function(e){On[e]=new Bt(e,rr,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0],h=e[1];On[i]=new Bt(i,Ln,!1,h,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){On[e]=new Bt(e,kn,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){On[e]=new Bt(e,kn,!1,e,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){On[e]=new Bt(e,yr,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){On[e]=new Bt(e,yr,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){On[e]=new Bt(e,si,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){On[e]=new Bt(e,fs,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){On[e]=new Bt(e,qr,!1,e.toLowerCase(),null,!1,!1)});var un=/[\-\:]([a-z])/g,ai=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var i=e.replace(un,ai);On[i]=new Bt(i,Ln,!1,e,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var i=e.replace(un,ai);On[i]=new Bt(i,Ln,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(un,ai);On[i]=new Bt(i,Ln,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){On[e]=new Bt(e,Ln,!1,e.toLowerCase(),null,!1,!1)});var fe="xlinkHref";On[fe]=new Bt("xlinkHref",Ln,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){On[e]=new Bt(e,Ln,!1,e.toLowerCase(),null,!0,!0)});var L=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,G=!1;function J(e){!G&&L.test(e)&&(G=!0,b("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function se(e,i,h,p){if(p.mustUseProperty){var w=p.propertyName;return e[w]}else{ur(h,i),p.sanitizeURL&&J(""+h);var D=p.attributeName,I=null;if(p.type===si){if(e.hasAttribute(D)){var $=e.getAttribute(D);return $===""?!0:gt(i,h,p,!1)?$:$===""+h?h:$}}else if(e.hasAttribute(D)){if(gt(i,h,p,!1))return e.getAttribute(D);if(p.type===yr)return h;I=e.getAttribute(D)}return gt(i,h,p,!1)?I===null?h:I:I===""+h?h:I}}function he(e,i,h,p){{if(!Cn(i))return;if(!e.hasAttribute(i))return h===void 0?void 0:null;var w=e.getAttribute(i);return ur(h,i),w===""+h?h:w}}function we(e,i,h,p){var w=Kt(i);if(!br(i,w,p)){if(gt(i,h,w,p)&&(h=null),p||w===null){if(Cn(i)){var D=i;h===null?e.removeAttribute(D):(ur(h,i),e.setAttribute(D,""+h))}return}var I=w.mustUseProperty;if(I){var $=w.propertyName;if(h===null){var Z=w.type;e[$]=Z===yr?!1:""}else e[$]=h;return}var re=w.attributeName,de=w.attributeNamespace;if(h===null)e.removeAttribute(re);else{var Ie=w.type,Le;Ie===yr||Ie===si&&h===!0?Le="":(ur(h,re),Le=""+h,w.sanitizeURL&&J(Le.toString())),de?e.setAttributeNS(de,re,Le):e.setAttribute(re,Le)}}}var xe=Symbol.for("react.element"),ge=Symbol.for("react.portal"),Te=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),te=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),pt=Symbol.for("react.lazy"),Ot=Symbol.for("react.scope"),_t=Symbol.for("react.debug_trace_mode"),Ut=Symbol.for("react.offscreen"),wn=Symbol.for("react.legacy_hidden"),gn=Symbol.for("react.cache"),Un=Symbol.for("react.tracing_marker"),Hn=Symbol.iterator,Yr="@@iterator";function Hr(e){if(e===null||typeof e!="object")return null;var i=Hn&&e[Hn]||e[Yr];return typeof i=="function"?i:null}var Tn=Object.assign,Us=0,pc,xr,Qa,Fo,Li,ss,su;function ms(){}ms.__reactDisabledLog=!0;function Ii(){{if(Us===0){pc=console.log,xr=console.info,Qa=console.warn,Fo=console.error,Li=console.group,ss=console.groupCollapsed,su=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ms,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}Us++}}function xl(){{if(Us--,Us===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Tn({},e,{value:pc}),info:Tn({},e,{value:xr}),warn:Tn({},e,{value:Qa}),error:Tn({},e,{value:Fo}),group:Tn({},e,{value:Li}),groupCollapsed:Tn({},e,{value:ss}),groupEnd:Tn({},e,{value:su})})}Us<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ia=a.ReactCurrentDispatcher,Br;function Gn(e,i,h){{if(Br===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Br=p&&p[1]||""}return`
`+Br+e}}var Qs=!1,jr;{var vo=typeof WeakMap=="function"?WeakMap:Map;jr=new vo}function Ji(e,i){if(!e||Qs)return"";{var h=jr.get(e);if(h!==void 0)return h}var p;Qs=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=Ia.current,Ia.current=null,Ii();try{if(i){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(et){p=et}Reflect.construct(e,[],I)}else{try{I.call()}catch(et){p=et}e.call(I.prototype)}}else{try{throw Error()}catch(et){p=et}e()}}catch(et){if(et&&p&&typeof et.stack=="string"){for(var $=et.stack.split(`
`),Z=p.stack.split(`
`),re=$.length-1,de=Z.length-1;re>=1&&de>=0&&$[re]!==Z[de];)de--;for(;re>=1&&de>=0;re--,de--)if($[re]!==Z[de]){if(re!==1||de!==1)do if(re--,de--,de<0||$[re]!==Z[de]){var Ie=`
`+$[re].replace(" at new "," at ");return e.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",e.displayName)),typeof e=="function"&&jr.set(e,Ie),Ie}while(re>=1&&de>=0);break}}}finally{Qs=!1,Ia.current=D,xl(),Error.prepareStackTrace=w}var Le=e?e.displayName||e.name:"",Je=Le?Gn(Le):"";return typeof e=="function"&&jr.set(e,Je),Je}function Uo(e,i,h){return Ji(e,!0)}function pa(e,i,h){return Ji(e,!1)}function au(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function _l(e,i,h){if(e==null)return"";if(typeof e=="function")return Ji(e,au(e));if(typeof e=="string")return Gn(e);switch(e){case Fe:return Gn("Suspense");case Ke:return Gn("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case Ae:return pa(e.render);case dt:return _l(e.type,i,h);case pt:{var p=e,w=p._payload,D=p._init;try{return _l(D(w),i,h)}catch{}}}return""}function gc(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case ie:return Gn(e.type);case ut:return Gn("Lazy");case Re:return Gn("Suspense");case fn:return Gn("SuspenseList");case A:case O:case tt:return pa(e.type);case Ce:return pa(e.type.render);case k:return Uo(e.type);default:return""}}function eo(e){try{var i="",h=e;do i+=gc(h),h=h.return;while(h);return i}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Va(e,i,h){var p=e.displayName;if(p)return p;var w=i.displayName||i.name||"";return w!==""?h+"("+w+")":h}function wl(e){return e.displayName||"Context"}function or(e){if(e==null)return null;if(typeof e.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Te:return"Fragment";case ge:return"Portal";case ne:return"Profiler";case Qe:return"StrictMode";case Fe:return"Suspense";case Ke:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case te:var i=e;return wl(i)+".Consumer";case Ne:var h=e;return wl(h._context)+".Provider";case Ae:return Va(e,e.render,"ForwardRef");case dt:var p=e.displayName||null;return p!==null?p:or(e.type)||"Memo";case pt:{var w=e,D=w._payload,I=w._init;try{return or(I(D))}catch{return null}}}return null}function od(e,i,h){var p=i.displayName||i.name||"";return e.displayName||(p!==""?h+"("+p+")":h)}function yo(e){return e.displayName||"Context"}function jn(e){var i=e.tag,h=e.type;switch(i){case $t:return"Cache";case Pe:var p=h;return yo(p)+".Consumer";case De:var w=h;return yo(w._context)+".Provider";case zt:return"DehydratedFragment";case Ce:return od(h,h.render,"ForwardRef");case Oe:return"Fragment";case ie:return h;case W:return"Portal";case B:return"Root";case pe:return"Text";case ut:return or(h);case Se:return h===Qe?"StrictMode":"Mode";case ct:return"Offscreen";case ze:return"Profiler";case lt:return"Scope";case Re:return"Suspense";case fn:return"SuspenseList";case An:return"TracingMarker";case k:case A:case Rt:case O:case Ze:case tt:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;break}return null}var Cl=a.ReactDebugCurrentFrame,ps=null,Nl=!1;function bo(){{if(ps===null)return null;var e=ps._debugOwner;if(e!==null&&typeof e<"u")return jn(e)}return null}function ld(){return ps===null?"":eo(ps)}function Pi(){Cl.getCurrentStack=null,ps=null,Nl=!1}function oi(e){Cl.getCurrentStack=e===null?null:ld,ps=e,Nl=!1}function ou(){return ps}function $s(e){Nl=e}function as(e){return""+e}function os(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return mr(e),e;default:return""}}var vc={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function gs(e,i){vc[i.type]||i.onChange||i.onInput||i.readOnly||i.disabled||i.value==null||b("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),i.onChange||i.readOnly||i.disabled||i.checked==null||b("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Sl(e){var i=e.type,h=e.nodeName;return h&&h.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $o(e){return e._valueTracker}function to(e){e._valueTracker=null}function yc(e){var i="";return e&&(Sl(e)?i=e.checked?"true":"false":i=e.value),i}function ea(e){var i=Sl(e)?"checked":"value",h=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);mr(e[i]);var p=""+e[i];if(!(e.hasOwnProperty(i)||typeof h>"u"||typeof h.get!="function"||typeof h.set!="function")){var w=h.get,D=h.set;Object.defineProperty(e,i,{configurable:!0,get:function(){return w.call(this)},set:function($){mr($),p=""+$,D.call(this,$)}}),Object.defineProperty(e,i,{enumerable:h.enumerable});var I={getValue:function(){return p},setValue:function($){mr($),p=""+$},stopTracking:function(){to(e),delete e[i]}};return I}}function qs(e){$o(e)||(e._valueTracker=ea(e))}function Wn(e){if(!e)return!1;var i=$o(e);if(!i)return!0;var h=i.getValue(),p=yc(e);return p!==h?(i.setValue(p),!0):!1}function ga(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qi=!1,es=!1,qo=!1,El=!1;function Dl(e){var i=e.type==="checkbox"||e.type==="radio";return i?e.checked!=null:e.value!=null}function Tl(e,i){var h=e,p=i.checked,w=Tn({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??h._wrapperState.initialChecked});return w}function bc(e,i){gs("input",i),i.checked!==void 0&&i.defaultChecked!==void 0&&!es&&(b("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",bo()||"A component",i.type),es=!0),i.value!==void 0&&i.defaultValue!==void 0&&!Qi&&(b("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",bo()||"A component",i.type),Qi=!0);var h=e,p=i.defaultValue==null?"":i.defaultValue;h._wrapperState={initialChecked:i.checked!=null?i.checked:i.defaultChecked,initialValue:os(i.value!=null?i.value:p),controlled:Dl(i)}}function K(e,i){var h=e,p=i.checked;p!=null&&we(h,"checked",p,!1)}function _e(e,i){var h=e;{var p=Dl(i);!h._wrapperState.controlled&&p&&!El&&(b("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),El=!0),h._wrapperState.controlled&&!p&&!qo&&(b("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),qo=!0)}K(e,i);var w=os(i.value),D=i.type;if(w!=null)D==="number"?(w===0&&h.value===""||h.value!=w)&&(h.value=as(w)):h.value!==as(w)&&(h.value=as(w));else if(D==="submit"||D==="reset"){h.removeAttribute("value");return}i.hasOwnProperty("value")?xn(h,i.type,w):i.hasOwnProperty("defaultValue")&&xn(h,i.type,os(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(h.defaultChecked=!!i.defaultChecked)}function Xe(e,i,h){var p=e;if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var w=i.type,D=w==="submit"||w==="reset";if(D&&(i.value===void 0||i.value===null))return;var I=as(p._wrapperState.initialValue);h||I!==p.value&&(p.value=I),p.defaultValue=I}var $=p.name;$!==""&&(p.name=""),p.defaultChecked=!p.defaultChecked,p.defaultChecked=!!p._wrapperState.initialChecked,$!==""&&(p.name=$)}function rt(e,i){var h=e;_e(h,i),jt(h,i)}function jt(e,i){var h=i.name;if(i.type==="radio"&&h!=null){for(var p=e;p.parentNode;)p=p.parentNode;ur(h,"name");for(var w=p.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),D=0;D<w.length;D++){var I=w[D];if(!(I===e||I.form!==e.form)){var $=ub(I);if(!$)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Wn(I),_e(I,$)}}}}function xn(e,i,h){(i!=="number"||ga(e.ownerDocument)!==e)&&(h==null?e.defaultValue=as(e._wrapperState.initialValue):e.defaultValue!==as(h)&&(e.defaultValue=as(h)))}var Yt=!1,Mn=!1,lr=!1;function Ar(e,i){i.value==null&&(typeof i.children=="object"&&i.children!==null?o.Children.forEach(i.children,function(h){h!=null&&(typeof h=="string"||typeof h=="number"||Mn||(Mn=!0,b("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):i.dangerouslySetInnerHTML!=null&&(lr||(lr=!0,b("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),i.selected!=null&&!Yt&&(b("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Yt=!0)}function Xr(e,i){i.value!=null&&e.setAttribute("value",as(os(i.value)))}var Jr=Array.isArray;function nr(e){return Jr(e)}var Qr;Qr=!1;function vi(){var e=bo();return e?`

Check the render method of \``+e+"`.":""}var xo=["value","defaultValue"];function Pl(e){{gs("select",e);for(var i=0;i<xo.length;i++){var h=xo[i];if(e[h]!=null){var p=nr(e[h]);e.multiple&&!p?b("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",h,vi()):!e.multiple&&p&&b("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",h,vi())}}}}function Hs(e,i,h,p){var w=e.options;if(i){for(var D=h,I={},$=0;$<D.length;$++)I["$"+D[$]]=!0;for(var Z=0;Z<w.length;Z++){var re=I.hasOwnProperty("$"+w[Z].value);w[Z].selected!==re&&(w[Z].selected=re),re&&p&&(w[Z].defaultSelected=!0)}}else{for(var de=as(os(h)),Ie=null,Le=0;Le<w.length;Le++){if(w[Le].value===de){w[Le].selected=!0,p&&(w[Le].defaultSelected=!0);return}Ie===null&&!w[Le].disabled&&(Ie=w[Le])}Ie!==null&&(Ie.selected=!0)}}function xc(e,i){return Tn({},i,{value:void 0})}function _c(e,i){var h=e;Pl(i),h._wrapperState={wasMultiple:!!i.multiple},i.value!==void 0&&i.defaultValue!==void 0&&!Qr&&(b("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Qr=!0)}function lu(e,i){var h=e;h.multiple=!!i.multiple;var p=i.value;p!=null?Hs(h,!!i.multiple,p,!1):i.defaultValue!=null&&Hs(h,!!i.multiple,i.defaultValue,!0)}function no(e,i){var h=e,p=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Hs(h,!!i.multiple,w,!1):p!==!!i.multiple&&(i.defaultValue!=null?Hs(h,!!i.multiple,i.defaultValue,!0):Hs(h,!!i.multiple,i.multiple?[]:"",!1))}function cd(e,i){var h=e,p=i.value;p!=null&&Hs(h,!!i.multiple,p,!1)}var _o=!1;function Ho(e,i){var h=e;if(i.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var p=Tn({},i,{value:void 0,defaultValue:void 0,children:as(h._wrapperState.initialValue)});return p}function _h(e,i){var h=e;gs("textarea",i),i.value!==void 0&&i.defaultValue!==void 0&&!_o&&(b("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",bo()||"A component"),_o=!0);var p=i.value;if(p==null){var w=i.children,D=i.defaultValue;if(w!=null){b("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(nr(w)){if(w.length>1)throw new Error("<textarea> can only have at most one child.");w=w[0]}D=w}}D==null&&(D=""),p=D}h._wrapperState={initialValue:os(p)}}function ud(e,i){var h=e,p=os(i.value),w=os(i.defaultValue);if(p!=null){var D=as(p);D!==h.value&&(h.value=D),i.defaultValue==null&&h.defaultValue!==D&&(h.defaultValue=D)}w!=null&&(h.defaultValue=as(w))}function pr(e,i){var h=e,p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function fi(e,i){ud(e,i)}var wo="http://www.w3.org/1999/xhtml",ir="http://www.w3.org/1998/Math/MathML",Co="http://www.w3.org/2000/svg";function ei(e){switch(e){case"svg":return Co;case"math":return ir;default:return wo}}function Gr(e,i){return e==null||e===wo?ei(i):e===Co&&i==="foreignObject"?wo:e}var cu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,h,p,w){MSApp.execUnsafeLocalFunction(function(){return e(i,h,p,w)})}:e},uu,dd=cu(function(e,i){if(e.namespaceURI===Co&&!("innerHTML"in e)){uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+i.valueOf().toString()+"</svg>";for(var h=uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;h.firstChild;)e.appendChild(h.firstChild);return}e.innerHTML=i}),ls=1,va=3,xi=8,ya=9,du=11,Go=function(e,i){if(i){var h=e.firstChild;if(h&&h===e.lastChild&&h.nodeType===va){h.nodeValue=i;return}}e.textContent=i},hu={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Dp(e,i){return e+i.charAt(0).toUpperCase()+i.substring(1)}var wh=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){wh.forEach(function(i){No[Dp(i,e)]=No[e]})});function Ch(e,i,h){var p=i==null||typeof i=="boolean"||i==="";return p?"":!h&&typeof i=="number"&&i!==0&&!(No.hasOwnProperty(e)&&No[e])?i+"px":(ii(i,e),(""+i).trim())}var kf=/([A-Z])/g,hd=/^ms-/;function Nh(e){return e.replace(kf,"-$1").toLowerCase().replace(hd,"-ms-")}var Sh=function(){};{var Mf=/^(?:webkit|moz|o)[A-Z]/,fu=/^-ms-/,fd=/-(.)/g,mu=/;\s*$/,jl={},li={},Wo=!1,Es=!1,wc=function(e){return e.replace(fd,function(i,h){return h.toUpperCase()})},pu=function(e){jl.hasOwnProperty(e)&&jl[e]||(jl[e]=!0,b("Unsupported style property %s. Did you mean %s?",e,wc(e.replace(fu,"ms-"))))},md=function(e){jl.hasOwnProperty(e)&&jl[e]||(jl[e]=!0,b("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},Al=function(e,i){li.hasOwnProperty(i)&&li[i]||(li[i]=!0,b(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,e,i.replace(mu,"")))},gu=function(e,i){Wo||(Wo=!0,b("`NaN` is an invalid value for the `%s` css style property.",e))},Cc=function(e,i){Es||(Es=!0,b("`Infinity` is an invalid value for the `%s` css style property.",e))};Sh=function(e,i){e.indexOf("-")>-1?pu(e):Mf.test(e)?md(e):mu.test(i)&&Al(e,i),typeof i=="number"&&(isNaN(i)?gu(e,i):isFinite(i)||Cc(e,i))}}var Rf=Sh;function Lf(e){{var i="",h="";for(var p in e)if(e.hasOwnProperty(p)){var w=e[p];if(w!=null){var D=p.indexOf("--")===0;i+=h+(D?p:Nh(p))+":",i+=Ch(p,w,D),h=";"}}return i||null}}function Eh(e,i){var h=e.style;for(var p in i)if(i.hasOwnProperty(p)){var w=p.indexOf("--")===0;w||Rf(p,i[p]);var D=Ch(p,i[p],w);p==="float"&&(p="cssFloat"),w?h.setProperty(p,D):h[p]=D}}function If(e){return e==null||typeof e=="boolean"||e===""}function Dh(e){var i={};for(var h in e)for(var p=hu[h]||[h],w=0;w<p.length;w++)i[p[w]]=h;return i}function ro(e,i){{if(!i)return;var h=Dh(e),p=Dh(i),w={};for(var D in h){var I=h[D],$=p[D];if($&&I!==$){var Z=I+","+$;if(w[Z])continue;w[Z]=!0,b("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",If(e[I])?"Removing":"Updating",I,$)}}}}var vu={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ta=Tn({menuitem:!0},vu),yu="__html";function pd(e,i){if(i){if(ta[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw new Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof i.dangerouslySetInnerHTML!="object"||!(yu in i.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!i.suppressContentEditableWarning&&i.contentEditable&&i.children!=null&&b("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),i.style!=null&&typeof i.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Zo(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},So={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},kl={},ba=new RegExp("^(aria)-["+Tt+"]*$"),Eo=new RegExp("^(aria)[A-Z]["+Tt+"]*$");function gd(e,i){{if(cn.call(kl,i)&&kl[i])return!0;if(Eo.test(i)){var h="aria-"+i.slice(4).toLowerCase(),p=So.hasOwnProperty(h)?h:null;if(p==null)return b("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",i),kl[i]=!0,!0;if(i!==p)return b("Invalid ARIA attribute `%s`. Did you mean `%s`?",i,p),kl[i]=!0,!0}if(ba.test(i)){var w=i.toLowerCase(),D=So.hasOwnProperty(w)?w:null;if(D==null)return kl[i]=!0,!1;if(i!==D)return b("Unknown ARIA attribute `%s`. Did you mean `%s`?",i,D),kl[i]=!0,!0}}return!0}function Do(e,i){{var h=[];for(var p in i){var w=gd(e,p);w||h.push(p)}var D=h.map(function(I){return"`"+I+"`"}).join(", ");h.length===1?b("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e):h.length>1&&b("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e)}}function To(e,i){Zo(e,i)||Do(e,i)}var Vf=!1;function Th(e,i){{if(e!=="input"&&e!=="textarea"&&e!=="select")return;i!=null&&i.value===null&&!Vf&&(Vf=!0,e==="select"&&i.multiple?b("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):b("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}}var Ph=function(){};{var ts={},Ml=/^on./,Po=/^on[^A-Z]/,Gt=new RegExp("^(aria)-["+Tt+"]*$"),vd=new RegExp("^(aria)[A-Z]["+Tt+"]*$");Ph=function(e,i,h,p){if(cn.call(ts,i)&&ts[i])return!0;var w=i.toLowerCase();if(w==="onfocusin"||w==="onfocusout")return b("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ts[i]=!0,!0;if(p!=null){var D=p.registrationNameDependencies,I=p.possibleRegistrationNames;if(D.hasOwnProperty(i))return!0;var $=I.hasOwnProperty(w)?I[w]:null;if($!=null)return b("Invalid event handler property `%s`. Did you mean `%s`?",i,$),ts[i]=!0,!0;if(Ml.test(i))return b("Unknown event handler property `%s`. It will be ignored.",i),ts[i]=!0,!0}else if(Ml.test(i))return Po.test(i)&&b("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",i),ts[i]=!0,!0;if(Gt.test(i)||vd.test(i))return!0;if(w==="innerhtml")return b("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ts[i]=!0,!0;if(w==="aria")return b("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ts[i]=!0,!0;if(w==="is"&&h!==null&&h!==void 0&&typeof h!="string")return b("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof h),ts[i]=!0,!0;if(typeof h=="number"&&isNaN(h))return b("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",i),ts[i]=!0,!0;var Z=Kt(i),re=Z!==null&&Z.type===rr;if(bu.hasOwnProperty(w)){var de=bu[w];if(de!==i)return b("Invalid DOM property `%s`. Did you mean `%s`?",i,de),ts[i]=!0,!0}else if(!re&&i!==w)return b("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",i,w),ts[i]=!0,!0;return typeof h=="boolean"&&dr(i,h,Z,!1)?(h?b('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',h,i,i,h,i):b('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',h,i,i,h,i,i,i),ts[i]=!0,!0):re?!0:dr(i,h,Z,!1)?(ts[i]=!0,!1):((h==="false"||h==="true")&&Z!==null&&Z.type===yr&&(b("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",h,i,h==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',i,h),ts[i]=!0),!0)}}var Ko=function(e,i,h){{var p=[];for(var w in i){var D=Ph(e,w,i[w],h);D||p.push(w)}var I=p.map(function($){return"`"+$+"`"}).join(", ");p.length===1?b("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,e):p.length>1&&b("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,e)}};function Nc(e,i,h){Zo(e,i)||Ko(e,i,h)}var jh=1,Lt=2,Rl=4,Ah=jh|Lt|Rl,xu=null;function kh(e){xu!==null&&b("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),xu=e}function Of(){xu===null&&b("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),xu=null}function zf(e){return e===xu}function yd(e){var i=e.target||e.srcElement||window;return i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===va?i.parentNode:i}var Mh=null,Yo=null,Xo=null;function bd(e){var i=Zd(e);if(i){if(typeof Mh!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var h=i.stateNode;if(h){var p=ub(h);Mh(i.stateNode,i.type,p)}}}function Rh(e){Mh=e}function Ds(e){Yo?Xo?Xo.push(e):Xo=[e]:Yo=e}function Jo(){return Yo!==null||Xo!==null}function Sc(){if(Yo){var e=Yo,i=Xo;if(Yo=null,Xo=null,bd(e),i)for(var h=0;h<i.length;h++)bd(i[h])}}var xd=function(e,i){return e(i)},Ec=function(){},_u=!1;function Bf(){var e=Jo();e&&(Ec(),Sc())}function Gs(e,i,h){if(_u)return e(i,h);_u=!0;try{return xd(e,i,h)}finally{_u=!1,Bf()}}function ti(e,i,h){xd=e,Ec=h}function _d(e){return e==="button"||e==="input"||e==="select"||e==="textarea"}function Lh(e,i,h){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(h.disabled&&_d(i));default:return!1}}function Dc(e,i){var h=e.stateNode;if(h===null)return null;var p=ub(h);if(p===null)return null;var w=p[i];if(Lh(i,e.type,p))return null;if(w&&typeof w!="function")throw new Error("Expected `"+i+"` listener to be a function, instead got a value of `"+typeof w+"` type.");return w}var wd=!1;if(vr)try{var Tc={};Object.defineProperty(Tc,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{wd=!1}function Ff(e,i,h,p,w,D,I,$,Z){var re=Array.prototype.slice.call(arguments,3);try{i.apply(h,re)}catch(de){this.onError(de)}}var vs=Ff;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var Pc=document.createElement("react");vs=function(i,h,p,w,D,I,$,Z,re){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var de=document.createEvent("Event"),Ie=!1,Le=!0,Je=window.event,et=Object.getOwnPropertyDescriptor(window,"event");function at(){Pc.removeEventListener(ot,Nn,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=Je)}var Zt=Array.prototype.slice.call(arguments,3);function Nn(){Ie=!0,at(),h.apply(p,Zt),Le=!1}var vn,wr=!1,fr=!1;function He(Ge){if(vn=Ge.error,wr=!0,vn===null&&Ge.colno===0&&Ge.lineno===0&&(fr=!0),Ge.defaultPrevented&&vn!=null&&typeof vn=="object")try{vn._suppressLogging=!0}catch{}}var ot="react-"+(i||"invokeguardedcallback");if(window.addEventListener("error",He),Pc.addEventListener(ot,Nn,!1),de.initEvent(ot,!1,!1),Pc.dispatchEvent(de),et&&Object.defineProperty(window,"event",et),Ie&&Le&&(wr?fr&&(vn=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):vn=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(vn)),window.removeEventListener("error",He),!Ie)return at(),Ff.apply(this,arguments)}}var an=vs,dn=!1,Qo=null,jc=!1,wu=null,ji={onError:function(e){dn=!0,Qo=e}};function Cu(e,i,h,p,w,D,I,$,Z){dn=!1,Qo=null,an.apply(ji,arguments)}function xa(e,i,h,p,w,D,I,$,Z){if(Cu.apply(this,arguments),dn){var re=ci();jc||(jc=!0,wu=re)}}function Uf(){if(jc){var e=wu;throw jc=!1,wu=null,e}}function Ll(){return dn}function ci(){if(dn){var e=Qo;return dn=!1,Qo=null,e}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Ir(e){return e._reactInternals}function Ac(e){return e._reactInternals!==void 0}function Nu(e,i){e._reactInternals=i}var bn=0,_a=1,_i=2,hr=4,wa=16,Il=32,Cd=64,on=128,x=256,r=512,u=1024,m=2048,y=4096,_=8192,P=16384,j=32767,R=32768,z=65536,U=131072,q=1048576,X=2097152,le=4194304,ce=8388608,me=16777216,ae=33554432,je=hr|u|0,Ue=_i|hr|wa|Il|r|y|_,ye=hr|Cd|r|_,ke=m|wa,$e=le|ce|X,Ye=a.ReactCurrentOwner;function it(e){var i=e,h=e;if(e.alternate)for(;i.return;)i=i.return;else{var p=i;do i=p,(i.flags&(_i|y))!==bn&&(h=i.return),p=i.return;while(p)}return i.tag===B?h:null}function yt(e){if(e.tag===Re){var i=e.memoizedState;if(i===null){var h=e.alternate;h!==null&&(i=h.memoizedState)}if(i!==null)return i.dehydrated}return null}function ft(e){return e.tag===B?e.stateNode.containerInfo:null}function wt(e){return it(e)===e}function Qt(e){{var i=Ye.current;if(i!==null&&i.tag===k){var h=i,p=h.stateNode;p._warnedAboutRefsInRender||b("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",jn(h)||"A component"),p._warnedAboutRefsInRender=!0}}var w=Ir(e);return w?it(w)===w:!1}function Xn(e){if(it(e)!==e)throw new Error("Unable to find node on an unmounted component.")}function At(e){var i=e.alternate;if(!i){var h=it(e);if(h===null)throw new Error("Unable to find node on an unmounted component.");return h!==e?null:e}for(var p=e,w=i;;){var D=p.return;if(D===null)break;var I=D.alternate;if(I===null){var $=D.return;if($!==null){p=w=$;continue}break}if(D.child===I.child){for(var Z=D.child;Z;){if(Z===p)return Xn(D),e;if(Z===w)return Xn(D),i;Z=Z.sibling}throw new Error("Unable to find node on an unmounted component.")}if(p.return!==w.return)p=D,w=I;else{for(var re=!1,de=D.child;de;){if(de===p){re=!0,p=D,w=I;break}if(de===w){re=!0,w=D,p=I;break}de=de.sibling}if(!re){for(de=I.child;de;){if(de===p){re=!0,p=I,w=D;break}if(de===w){re=!0,w=I,p=D;break}de=de.sibling}if(!re)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(p.alternate!==w)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(p.tag!==B)throw new Error("Unable to find node on an unmounted component.");return p.stateNode.current===p?e:i}function mn(e){var i=At(e);return i!==null?en(i):null}function en(e){if(e.tag===ie||e.tag===pe)return e;for(var i=e.child;i!==null;){var h=en(i);if(h!==null)return h;i=i.sibling}return null}function kr(e){var i=At(e);return i!==null?Zn(i):null}function Zn(e){if(e.tag===ie||e.tag===pe)return e;for(var i=e.child;i!==null;){if(i.tag!==W){var h=Zn(i);if(h!==null)return h}i=i.sibling}return null}var In=t.unstable_scheduleCallback,Jn=t.unstable_cancelCallback,wi=t.unstable_shouldYield,Wr=t.unstable_requestPaint,gr=t.unstable_now,Fi=t.unstable_getCurrentPriorityLevel,mi=t.unstable_ImmediatePriority,Ts=t.unstable_UserBlockingPriority,Nr=t.unstable_NormalPriority,io=t.unstable_LowPriority,Ca=t.unstable_IdlePriority,el=t.unstable_yieldValue,Vl=t.unstable_setDisableYieldValue,Oa=null,Er=null,Pt=null,pi=!1,cs=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Ci(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled)return!0;if(!i.supportsFiber)return b("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Nt&&(e=Tn({},e,{getLaneLabelMap:qf,injectProfilingHooks:$f})),Oa=i.inject(e),Er=i}catch(h){b("React instrumentation encountered an error: %s.",h)}return!!i.checkDCE}function Ui(e,i){if(Er&&typeof Er.onScheduleFiberRoot=="function")try{Er.onScheduleFiberRoot(Oa,e,i)}catch(h){pi||(pi=!0,b("React instrumentation encountered an error: %s",h))}}function Ws(e,i){if(Er&&typeof Er.onCommitFiberRoot=="function")try{var h=(e.current.flags&on)===on;if(Be){var p;switch(i){case Ba:p=mi;break;case $l:p=Ts;break;case ql:p=Nr;break;case jd:p=Ca;break;default:p=Nr;break}Er.onCommitFiberRoot(Oa,e,p,h)}}catch(w){pi||(pi=!0,b("React instrumentation encountered an error: %s",w))}}function Ni(e){if(Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Oa,e)}catch(i){pi||(pi=!0,b("React instrumentation encountered an error: %s",i))}}function Ol(e){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Oa,e)}catch(i){pi||(pi=!0,b("React instrumentation encountered an error: %s",i))}}function Ai(e){if(typeof el=="function"&&(Vl(e),g(e)),Er&&typeof Er.setStrictMode=="function")try{Er.setStrictMode(Oa,e)}catch(i){pi||(pi=!0,b("React instrumentation encountered an error: %s",i))}}function $f(e){Pt=e}function qf(){{for(var e=new Map,i=1,h=0;h<Zf;h++){var p=$p(i);e.set(i,p),i*=2}return e}}function Tp(e){Pt!==null&&typeof Pt.markCommitStarted=="function"&&Pt.markCommitStarted(e)}function Nd(){Pt!==null&&typeof Pt.markCommitStopped=="function"&&Pt.markCommitStopped()}function Zs(e){Pt!==null&&typeof Pt.markComponentRenderStarted=="function"&&Pt.markComponentRenderStarted(e)}function Na(){Pt!==null&&typeof Pt.markComponentRenderStopped=="function"&&Pt.markComponentRenderStopped()}function so(e){Pt!==null&&typeof Pt.markComponentPassiveEffectMountStarted=="function"&&Pt.markComponentPassiveEffectMountStarted(e)}function Sa(){Pt!==null&&typeof Pt.markComponentPassiveEffectMountStopped=="function"&&Pt.markComponentPassiveEffectMountStopped()}function ao(e){Pt!==null&&typeof Pt.markComponentPassiveEffectUnmountStarted=="function"&&Pt.markComponentPassiveEffectUnmountStarted(e)}function Ih(){Pt!==null&&typeof Pt.markComponentPassiveEffectUnmountStopped=="function"&&Pt.markComponentPassiveEffectUnmountStopped()}function jo(e){Pt!==null&&typeof Pt.markComponentLayoutEffectMountStarted=="function"&&Pt.markComponentLayoutEffectMountStarted(e)}function y0(){Pt!==null&&typeof Pt.markComponentLayoutEffectMountStopped=="function"&&Pt.markComponentLayoutEffectMountStopped()}function Pp(e){Pt!==null&&typeof Pt.markComponentLayoutEffectUnmountStarted=="function"&&Pt.markComponentLayoutEffectUnmountStarted(e)}function ki(){Pt!==null&&typeof Pt.markComponentLayoutEffectUnmountStopped=="function"&&Pt.markComponentLayoutEffectUnmountStopped()}function jp(e,i,h){Pt!==null&&typeof Pt.markComponentErrored=="function"&&Pt.markComponentErrored(e,i,h)}function ly(e,i,h){Pt!==null&&typeof Pt.markComponentSuspended=="function"&&Pt.markComponentSuspended(e,i,h)}function Su(e){Pt!==null&&typeof Pt.markLayoutEffectsStarted=="function"&&Pt.markLayoutEffectsStarted(e)}function Eu(){Pt!==null&&typeof Pt.markLayoutEffectsStopped=="function"&&Pt.markLayoutEffectsStopped()}function Hf(e){Pt!==null&&typeof Pt.markPassiveEffectsStarted=="function"&&Pt.markPassiveEffectsStarted(e)}function Ap(){Pt!==null&&typeof Pt.markPassiveEffectsStopped=="function"&&Pt.markPassiveEffectsStopped()}function kp(e){Pt!==null&&typeof Pt.markRenderStarted=="function"&&Pt.markRenderStarted(e)}function b0(){Pt!==null&&typeof Pt.markRenderYielded=="function"&&Pt.markRenderYielded()}function Mp(){Pt!==null&&typeof Pt.markRenderStopped=="function"&&Pt.markRenderStopped()}function x0(e){Pt!==null&&typeof Pt.markRenderScheduled=="function"&&Pt.markRenderScheduled(e)}function Rp(e,i){Pt!==null&&typeof Pt.markForceUpdateScheduled=="function"&&Pt.markForceUpdateScheduled(e,i)}function Lp(e,i){Pt!==null&&typeof Pt.markStateUpdateScheduled=="function"&&Pt.markStateUpdateScheduled(e,i)}var _n=0,cr=1,Vr=2,ui=8,tl=16,Sd=Math.clz32?Math.clz32:cy,Gf=Math.log,Wf=Math.LN2;function cy(e){var i=e>>>0;return i===0?32:31-(Gf(i)/Wf|0)|0}var Zf=31,bt=0,Dr=0,En=1,kc=2,nl=4,Ao=8,rl=16,Mc=32,Ed=4194240,Dd=64,Kf=128,Yf=256,Ip=512,Vh=1024,Xf=2048,Oh=4096,Du=8192,na=16384,Jf=32768,Vp=65536,Qf=131072,Op=262144,zp=524288,Bp=1048576,Fp=2097152,Td=130023424,zl=4194304,em=8388608,Bl=16777216,Tu=33554432,Up=67108864,uy=zl,zh=134217728,dy=268435455,Bh=268435456,Pu=536870912,za=1073741824;function $p(e){{if(e&En)return"Sync";if(e&kc)return"InputContinuousHydration";if(e&nl)return"InputContinuous";if(e&Ao)return"DefaultHydration";if(e&rl)return"Default";if(e&Mc)return"TransitionHydration";if(e&Ed)return"Transition";if(e&Td)return"Retry";if(e&zh)return"SelectiveHydration";if(e&Bh)return"IdleHydration";if(e&Pu)return"Idle";if(e&za)return"Offscreen"}}var gi=-1,Fl=Dd,tm=zl;function di(e){switch(ku(e)){case En:return En;case kc:return kc;case nl:return nl;case Ao:return Ao;case rl:return rl;case Mc:return Mc;case Dd:case Kf:case Yf:case Ip:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:return e&Ed;case zl:case em:case Bl:case Tu:case Up:return e&Td;case zh:return zh;case Bh:return Bh;case Pu:return Pu;case za:return za;default:return b("Should have found matching lanes. This is a bug in React."),e}}function ju(e,i){var h=e.pendingLanes;if(h===bt)return bt;var p=bt,w=e.suspendedLanes,D=e.pingedLanes,I=h&dy;if(I!==bt){var $=I&~w;if($!==bt)p=di($);else{var Z=I&D;Z!==bt&&(p=di(Z))}}else{var re=h&~w;re!==bt?p=di(re):D!==bt&&(p=di(D))}if(p===bt)return bt;if(i!==bt&&i!==p&&(i&w)===bt){var de=ku(p),Ie=ku(i);if(de>=Ie||de===rl&&(Ie&Ed)!==bt)return i}(p&nl)!==bt&&(p|=h&rl);var Le=e.entangledLanes;if(Le!==bt)for(var Je=e.entanglements,et=p&Le;et>0;){var at=Ul(et),Zt=1<<at;p|=Je[at],et&=~Zt}return p}function hy(e,i){for(var h=e.eventTimes,p=gi;i>0;){var w=Ul(i),D=1<<w,I=h[w];I>p&&(p=I),i&=~D}return p}function nm(e,i){switch(e){case En:case kc:case nl:return i+250;case Ao:case rl:case Mc:case Dd:case Kf:case Yf:case Ip:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:return i+5e3;case zl:case em:case Bl:case Tu:case Up:return gi;case zh:case Bh:case Pu:case za:return gi;default:return b("Should have found matching lanes. This is a bug in React."),gi}}function rm(e,i){for(var h=e.pendingLanes,p=e.suspendedLanes,w=e.pingedLanes,D=e.expirationTimes,I=h;I>0;){var $=Ul(I),Z=1<<$,re=D[$];re===gi?((Z&p)===bt||(Z&w)!==bt)&&(D[$]=nm(Z,i)):re<=i&&(e.expiredLanes|=Z),I&=~Z}}function Fh(e){return di(e.pendingLanes)}function im(e){var i=e.pendingLanes&~za;return i!==bt?i:i&za?za:bt}function fy(e){return(e&En)!==bt}function Au(e){return(e&dy)!==bt}function sm(e){return(e&Td)===e}function qp(e){var i=En|nl|rl;return(e&i)===bt}function my(e){return(e&Ed)===e}function am(e,i){var h=kc|nl|Ao|rl;return(i&h)!==bt}function py(e,i){return(i&e.expiredLanes)!==bt}function Pd(e){return(e&Ed)!==bt}function gy(){var e=Fl;return Fl<<=1,(Fl&Ed)===bt&&(Fl=Dd),e}function Hp(){var e=tm;return tm<<=1,(tm&Td)===bt&&(tm=zl),e}function ku(e){return e&-e}function Mu(e){return ku(e)}function Ul(e){return 31-Sd(e)}function Uh(e){return Ul(e)}function Ea(e,i){return(e&i)!==bt}function Ru(e,i){return(e&i)===i}function Qn(e,i){return e|i}function om(e,i){return e&~i}function vy(e,i){return e&i}function tS(e){return e}function _0(e,i){return e!==Dr&&e<i?e:i}function il(e){for(var i=[],h=0;h<Zf;h++)i.push(e);return i}function $h(e,i,h){e.pendingLanes|=i,i!==Pu&&(e.suspendedLanes=bt,e.pingedLanes=bt);var p=e.eventTimes,w=Uh(i);p[w]=h}function yy(e,i){e.suspendedLanes|=i,e.pingedLanes&=~i;for(var h=e.expirationTimes,p=i;p>0;){var w=Ul(p),D=1<<w;h[w]=gi,p&=~D}}function Lu(e,i,h){e.pingedLanes|=e.suspendedLanes&i}function w0(e,i){var h=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=bt,e.pingedLanes=bt,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i;for(var p=e.entanglements,w=e.eventTimes,D=e.expirationTimes,I=h;I>0;){var $=Ul(I),Z=1<<$;p[$]=bt,w[$]=gi,D[$]=gi,I&=~Z}}function Gp(e,i){for(var h=e.entangledLanes|=i,p=e.entanglements,w=h;w;){var D=Ul(w),I=1<<D;I&i|p[D]&i&&(p[D]|=i),w&=~I}}function C0(e,i){var h=ku(i),p;switch(h){case nl:p=kc;break;case rl:p=Ao;break;case Dd:case Kf:case Yf:case Ip:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:case zl:case em:case Bl:case Tu:case Up:p=Mc;break;case Pu:p=Bh;break;default:p=Dr;break}return(p&(e.suspendedLanes|i))!==Dr?Dr:p}function Wp(e,i,h){if(cs)for(var p=e.pendingUpdatersLaneMap;h>0;){var w=Uh(h),D=1<<w,I=p[w];I.add(i),h&=~D}}function Zp(e,i){if(cs)for(var h=e.pendingUpdatersLaneMap,p=e.memoizedUpdaters;i>0;){var w=Uh(i),D=1<<w,I=h[w];I.size>0&&(I.forEach(function($){var Z=$.alternate;(Z===null||!p.has(Z))&&p.add($)}),I.clear()),i&=~D}}function by(e,i){return null}var Ba=En,$l=nl,ql=rl,jd=Pu,Hl=Dr;function Fa(){return Hl}function ys(e){Hl=e}function N0(e,i){var h=Hl;try{return Hl=e,i()}finally{Hl=h}}function xy(e,i){return e!==0&&e<i?e:i}function S0(e,i){return e>i?e:i}function Kp(e,i){return e!==0&&e<i}function Ad(e){var i=ku(e);return Kp(Ba,i)?Kp($l,i)?Au(i)?ql:jd:$l:Ba}function qh(e){var i=e.current.memoizedState;return i.isDehydrated}var _y;function E0(e){_y=e}function D0(e){_y(e)}var Yp;function T0(e){Yp=e}var wy;function Cy(e){wy=e}var lm;function Ny(e){lm=e}var Xp;function Sy(e){Xp=e}var Jp=!1,Iu=[],Rc=null,Gl=null,Lc=null,Hh=new Map,Gh=new Map,Wl=[],P0=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function j0(e){return P0.indexOf(e)>-1}function Wh(e,i,h,p,w){return{blockedOn:e,domEventName:i,eventSystemFlags:h,nativeEvent:w,targetContainers:[p]}}function Vi(e,i){switch(e){case"focusin":case"focusout":Rc=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":{var h=i.pointerId;Hh.delete(h);break}case"gotpointercapture":case"lostpointercapture":{var p=i.pointerId;Gh.delete(p);break}}}function kd(e,i,h,p,w,D){if(e===null||e.nativeEvent!==D){var I=Wh(i,h,p,w,D);if(i!==null){var $=Zd(i);$!==null&&Yp($)}return I}e.eventSystemFlags|=p;var Z=e.targetContainers;return w!==null&&Z.indexOf(w)===-1&&Z.push(w),e}function Ey(e,i,h,p,w){switch(i){case"focusin":{var D=w;return Rc=kd(Rc,e,i,h,p,D),!0}case"dragenter":{var I=w;return Gl=kd(Gl,e,i,h,p,I),!0}case"mouseover":{var $=w;return Lc=kd(Lc,e,i,h,p,$),!0}case"pointerover":{var Z=w,re=Z.pointerId;return Hh.set(re,kd(Hh.get(re)||null,e,i,h,p,Z)),!0}case"gotpointercapture":{var de=w,Ie=de.pointerId;return Gh.set(Ie,kd(Gh.get(Ie)||null,e,i,h,p,de)),!0}}return!1}function Qp(e){var i=nf(e.target);if(i!==null){var h=it(i);if(h!==null){var p=h.tag;if(p===Re){var w=yt(h);if(w!==null){e.blockedOn=w,Xp(e.priority,function(){wy(h)});return}}else if(p===B){var D=h.stateNode;if(qh(D)){e.blockedOn=ft(h);return}}}}e.blockedOn=null}function Or(e){for(var i=lm(),h={blockedOn:null,target:e,priority:i},p=0;p<Wl.length&&Kp(i,Wl[p].priority);p++);Wl.splice(p,0,h),p===0&&Qp(h)}function Md(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;i.length>0;){var h=i[0],p=Rd(e.domEventName,e.eventSystemFlags,h,e.nativeEvent);if(p===null){var w=e.nativeEvent,D=new w.constructor(w.type,w);kh(D),w.target.dispatchEvent(D),Of()}else{var I=Zd(p);return I!==null&&Yp(I),e.blockedOn=p,!1}i.shift()}return!0}function eg(e,i,h){Md(e)&&h.delete(i)}function Dy(){Jp=!1,Rc!==null&&Md(Rc)&&(Rc=null),Gl!==null&&Md(Gl)&&(Gl=null),Lc!==null&&Md(Lc)&&(Lc=null),Hh.forEach(eg),Gh.forEach(eg)}function Ua(e,i){e.blockedOn===i&&(e.blockedOn=null,Jp||(Jp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Dy)))}function sl(e){if(Iu.length>0){Ua(Iu[0],e);for(var i=1;i<Iu.length;i++){var h=Iu[i];h.blockedOn===e&&(h.blockedOn=null)}}Rc!==null&&Ua(Rc,e),Gl!==null&&Ua(Gl,e),Lc!==null&&Ua(Lc,e);var p=function($){return Ua($,e)};Hh.forEach(p),Gh.forEach(p);for(var w=0;w<Wl.length;w++){var D=Wl[w];D.blockedOn===e&&(D.blockedOn=null)}for(;Wl.length>0;){var I=Wl[0];if(I.blockedOn!==null)break;Qp(I),I.blockedOn===null&&Wl.shift()}}var Vu=a.ReactCurrentBatchConfig,tg=!0;function Ty(e){tg=!!e}function A0(){return tg}function k0(e,i,h){var p=Ou(i),w;switch(p){case Ba:w=M0;break;case $l:w=R0;break;case ql:default:w=ng;break}return w.bind(null,i,h,e)}function M0(e,i,h,p){var w=Fa(),D=Vu.transition;Vu.transition=null;try{ys(Ba),ng(e,i,h,p)}finally{ys(w),Vu.transition=D}}function R0(e,i,h,p){var w=Fa(),D=Vu.transition;Vu.transition=null;try{ys($l),ng(e,i,h,p)}finally{ys(w),Vu.transition=D}}function ng(e,i,h,p){tg&&L0(e,i,h,p)}function L0(e,i,h,p){var w=Rd(e,i,h,p);if(w===null){Fr(e,i,p,cm,h),Vi(e,p);return}if(Ey(w,e,i,h,p)){p.stopPropagation();return}if(Vi(e,p),i&Rl&&j0(e)){for(;w!==null;){var D=Zd(w);D!==null&&D0(D);var I=Rd(e,i,h,p);if(I===null&&Fr(e,i,p,cm,h),I===w)break;w=I}w!==null&&p.stopPropagation();return}Fr(e,i,p,null,h)}var cm=null;function Rd(e,i,h,p){cm=null;var w=yd(p),D=nf(w);if(D!==null){var I=it(D);if(I===null)D=null;else{var $=I.tag;if($===Re){var Z=yt(I);if(Z!==null)return Z;D=null}else if($===B){var re=I.stateNode;if(qh(re))return ft(I);D=null}else I!==D&&(D=null)}}return cm=D,null}function Ou(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Ba;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return $l;case"message":{var i=Fi();switch(i){case mi:return Ba;case Ts:return $l;case Nr:case io:return ql;case Ca:return jd;default:return ql}}default:return ql}}function Py(e,i,h){return e.addEventListener(i,h,!1),h}function rg(e,i,h){return e.addEventListener(i,h,!0),h}function ig(e,i,h,p){return e.addEventListener(i,h,{capture:!0,passive:p}),h}function I0(e,i,h,p){return e.addEventListener(i,h,{passive:p}),h}var Zh=null,sg=null,Ld=null;function jy(e){return Zh=e,sg=ag(),!0}function ra(){Zh=null,sg=null,Ld=null}function um(){if(Ld)return Ld;var e,i=sg,h=i.length,p,w=ag(),D=w.length;for(e=0;e<h&&i[e]===w[e];e++);var I=h-e;for(p=1;p<=I&&i[h-p]===w[D-p];p++);var $=p>1?1-p:void 0;return Ld=w.slice(e,$),Ld}function ag(){return"value"in Zh?Zh.value:Zh.textContent}function ko(e){var i,h=e.keyCode;return"charCode"in e?(i=e.charCode,i===0&&h===13&&(i=13)):i=h,i===10&&(i=13),i>=32||i===13?i:0}function Ic(){return!0}function Id(){return!1}function bs(e){function i(h,p,w,D,I){this._reactName=h,this._targetInst=w,this.type=p,this.nativeEvent=D,this.target=I,this.currentTarget=null;for(var $ in e)if(e.hasOwnProperty($)){var Z=e[$];Z?this[$]=Z(D):this[$]=D[$]}var re=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;return re?this.isDefaultPrevented=Ic:this.isDefaultPrevented=Id,this.isPropagationStopped=Id,this}return Tn(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ic)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ic)},persist:function(){},isPersistent:Ic}),i}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=bs(Zl),Kh=Tn({},Zl,{view:0,detail:0}),Ay=bs(Kh),dm,og,Od;function ky(e){e!==Od&&(Od&&e.type==="mousemove"?(dm=e.screenX-Od.screenX,og=e.screenY-Od.screenY):(dm=0,og=0),Od=e)}var zd=Tn({},Kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(ky(e),dm)},movementY:function(e){return"movementY"in e?e.movementY:og}}),hm=bs(zd),V0=Tn({},zd,{dataTransfer:0}),O0=bs(V0),My=Tn({},Kh,{relatedTarget:0}),zu=bs(My),al=Tn({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=bs(al),Ry=Tn({},Zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lg=bs(Ry),z0=Tn({},Zl,{data:0}),Ly=bs(z0),fm=Ly,cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function ug(e){if(e.key){var i=cg[e.key]||e.key;if(i!=="Unidentified")return i}if(e.type==="keypress"){var h=ko(e);return h===13?"Enter":String.fromCharCode(h)}return e.type==="keydown"||e.type==="keyup"?B0[e.keyCode]||"Unidentified":""}var dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(e){var i=this,h=i.nativeEvent;if(h.getModifierState)return h.getModifierState(e);var p=dg[e];return p?!!h[p]:!1}function mm(e){return Bd}var Iy=Tn({},Kh,{key:ug,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(e){return e.type==="keypress"?ko(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ko(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hg=bs(Iy),Vy=Tn({},zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=bs(Vy),Oy=Tn({},Kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),F0=bs(Oy),U0=Tn({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),zy=bs(U0),$0=Tn({},zd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=bs($0),H0=[9,13,27,32],By=229,Xh=vr&&"CompositionEvent"in window,oo=null;vr&&"documentMode"in document&&(oo=document.documentMode);var Fy=vr&&"TextEvent"in window&&!oo,fg=vr&&(!Xh||oo&&oo>8&&oo<=11),mg=32,pg=String.fromCharCode(mg);function Uy(){Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),Ft("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),Ft("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var gg=!1;function vg(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function pm(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function $y(e,i){return e==="keydown"&&i.keyCode===By}function gm(e,i){switch(e){case"keyup":return H0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==By;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yg(e){var i=e.detail;return typeof i=="object"&&"data"in i?i.data:null}function Da(e){return e.locale==="ko"}var ol=!1;function qy(e,i,h,p,w){var D,I;if(Xh?D=pm(i):ol?gm(i,p)&&(D="onCompositionEnd"):$y(i,p)&&(D="onCompositionStart"),!D)return null;fg&&!Da(p)&&(!ol&&D==="onCompositionStart"?ol=jy(w):D==="onCompositionEnd"&&ol&&(I=um()));var $=Ps(h,D);if($.length>0){var Z=new Ly(D,i,null,p,w);if(e.push({event:Z,listeners:$}),I)Z.data=I;else{var re=yg(p);re!==null&&(Z.data=re)}}}function Hy(e,i){switch(e){case"compositionend":return yg(i);case"keypress":var h=i.which;return h!==mg?null:(gg=!0,pg);case"textInput":var p=i.data;return p===pg&&gg?null:p;default:return null}}function Gy(e,i){if(ol){if(e==="compositionend"||!Xh&&gm(e,i)){var h=um();return ra(),ol=!1,h}return null}switch(e){case"paste":return null;case"keypress":if(!vg(i)){if(i.char&&i.char.length>1)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fg&&!Da(i)?null:i.data;default:return null}}function Wy(e,i,h,p,w){var D;if(Fy?D=Hy(i,p):D=Gy(i,p),!D)return null;var I=Ps(h,"onBeforeInput");if(I.length>0){var $=new fm("onBeforeInput","beforeinput",null,p,w);e.push({event:$,listeners:I}),$.data=D}}function Zy(e,i,h,p,w,D,I){qy(e,i,h,p,w),Wy(e,i,h,p,w)}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ky[e.type]:i==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Xy(e){if(!vr)return!1;var i="on"+e,h=i in document;if(!h){var p=document.createElement("div");p.setAttribute(i,"return;"),h=typeof p[i]=="function"}return h}function Oc(){Ft("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function bg(e,i,h,p){Ds(p);var w=Ps(i,"onChange");if(w.length>0){var D=new Vd("onChange","change",null,h,p);e.push({event:D,listeners:w})}}var Fd=null,Ud=null;function Jy(e){var i=e.nodeName&&e.nodeName.toLowerCase();return i==="select"||i==="input"&&e.type==="file"}function G0(e){var i=[];bg(i,Ud,e,yd(e)),Gs(W0,i)}function W0(e){kt(e,0)}function Jh(e){var i=Tm(e);if(Wn(i))return e}function $d(e,i){if(e==="change")return i}var xg=!1;vr&&(xg=Xy("input")&&(!document.documentMode||document.documentMode>9));function vm(e,i){Fd=e,Ud=i,Fd.attachEvent("onpropertychange",Qh)}function _g(){Fd&&(Fd.detachEvent("onpropertychange",Qh),Fd=null,Ud=null)}function Qh(e){e.propertyName==="value"&&Jh(Ud)&&G0(e)}function ym(e,i,h){e==="focusin"?(_g(),vm(i,h)):e==="focusout"&&_g()}function bm(e,i){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jh(Ud)}function Z0(e){var i=e.nodeName;return i&&i.toLowerCase()==="input"&&(e.type==="checkbox"||e.type==="radio")}function K0(e,i){if(e==="click")return Jh(i)}function Y0(e,i){if(e==="input"||e==="change")return Jh(i)}function X0(e){var i=e._wrapperState;!i||!i.controlled||e.type!=="number"||xn(e,"number",e.value)}function qd(e,i,h,p,w,D,I){var $=h?Tm(h):window,Z,re;if(Jy($)?Z=$d:Yy($)?xg?Z=Y0:(Z=bm,re=ym):Z0($)&&(Z=K0),Z){var de=Z(i,h);if(de){bg(e,de,p,w);return}}re&&re(i,$,h),i==="focusout"&&X0($)}function xs(){Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"])}function zc(e,i,h,p,w,D,I){var $=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout";if($&&!zf(p)){var re=p.relatedTarget||p.fromElement;if(re&&(nf(re)||zg(re)))return}if(!(!Z&&!$)){var de;if(w.window===w)de=w;else{var Ie=w.ownerDocument;Ie?de=Ie.defaultView||Ie.parentWindow:de=window}var Le,Je;if(Z){var et=p.relatedTarget||p.toElement;if(Le=h,Je=et?nf(et):null,Je!==null){var at=it(Je);(Je!==at||Je.tag!==ie&&Je.tag!==pe)&&(Je=null)}}else Le=null,Je=h;if(Le!==Je){var Zt=hm,Nn="onMouseLeave",vn="onMouseEnter",wr="mouse";(i==="pointerout"||i==="pointerover")&&(Zt=Yh,Nn="onPointerLeave",vn="onPointerEnter",wr="pointer");var fr=Le==null?de:Tm(Le),He=Je==null?de:Tm(Je),ot=new Zt(Nn,wr+"leave",Le,p,w);ot.target=fr,ot.relatedTarget=He;var Ge=null,St=nf(w);if(St===h){var sn=new Zt(vn,wr+"enter",Je,p,w);sn.target=He,sn.relatedTarget=fr,Ge=sn}_s(e,ot,Ge,Le,Je)}}}function wg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ta=typeof Object.is=="function"?Object.is:wg;function Hd(e,i){if(Ta(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var h=Object.keys(e),p=Object.keys(i);if(h.length!==p.length)return!1;for(var w=0;w<h.length;w++){var D=h[w];if(!cn.call(i,D)||!Ta(e[D],i[D]))return!1}return!0}function xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J0(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Cg(e,i){for(var h=xm(e),p=0,w=0;h;){if(h.nodeType===va){if(w=p+h.textContent.length,p<=i&&w>=i)return{node:h,offset:i-p};p=w}h=xm(J0(h))}}function Qy(e){var i=e.ownerDocument,h=i&&i.defaultView||window,p=h.getSelection&&h.getSelection();if(!p||p.rangeCount===0)return null;var w=p.anchorNode,D=p.anchorOffset,I=p.focusNode,$=p.focusOffset;try{w.nodeType,I.nodeType}catch{return null}return Q0(e,w,D,I,$)}function Q0(e,i,h,p,w){var D=0,I=-1,$=-1,Z=0,re=0,de=e,Ie=null;e:for(;;){for(var Le=null;de===i&&(h===0||de.nodeType===va)&&(I=D+h),de===p&&(w===0||de.nodeType===va)&&($=D+w),de.nodeType===va&&(D+=de.nodeValue.length),(Le=de.firstChild)!==null;)Ie=de,de=Le;for(;;){if(de===e)break e;if(Ie===i&&++Z===h&&(I=D),Ie===p&&++re===w&&($=D),(Le=de.nextSibling)!==null)break;de=Ie,Ie=de.parentNode}de=Le}return I===-1||$===-1?null:{start:I,end:$}}function eb(e,i){var h=e.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var w=p.getSelection(),D=e.textContent.length,I=Math.min(i.start,D),$=i.end===void 0?I:Math.min(i.end,D);if(!w.extend&&I>$){var Z=$;$=I,I=Z}var re=Cg(e,I),de=Cg(e,$);if(re&&de){if(w.rangeCount===1&&w.anchorNode===re.node&&w.anchorOffset===re.offset&&w.focusNode===de.node&&w.focusOffset===de.offset)return;var Ie=h.createRange();Ie.setStart(re.node,re.offset),w.removeAllRanges(),I>$?(w.addRange(Ie),w.extend(de.node,de.offset)):(Ie.setEnd(de.node,de.offset),w.addRange(Ie))}}}function _m(e){return e&&e.nodeType===va}function wm(e,i){return!e||!i?!1:e===i?!0:_m(e)?!1:_m(i)?wm(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1}function tb(e){return e&&e.ownerDocument&&wm(e.ownerDocument.documentElement,e)}function ef(e){try{return typeof e.contentWindow.location.href=="string"}catch{return!1}}function Cm(){for(var e=window,i=ga();i instanceof e.HTMLIFrameElement;){if(ef(i))e=i.contentWindow;else return i;i=ga(e.document)}return i}function Nm(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Ng(){var e=Cm();return{focusedElem:e,selectionRange:Nm(e)?tf(e):null}}function Sm(e){var i=Cm(),h=e.focusedElem,p=e.selectionRange;if(i!==h&&tb(h)){p!==null&&Nm(h)&&Sg(h,p);for(var w=[],D=h;D=D.parentNode;)D.nodeType===ls&&w.push({element:D,left:D.scrollLeft,top:D.scrollTop});typeof h.focus=="function"&&h.focus();for(var I=0;I<w.length;I++){var $=w[I];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}}function tf(e){var i;return"selectionStart"in e?i={start:e.selectionStart,end:e.selectionEnd}:i=Qy(e),i||{start:0,end:0}}function Sg(e,i){var h=i.start,p=i.end;p===void 0&&(p=h),"selectionStart"in e?(e.selectionStart=h,e.selectionEnd=Math.min(p,e.value.length)):eb(e,i)}var Eg=vr&&"documentMode"in document&&document.documentMode<=11;function Dg(){Ft("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Gd=null,s=null,n=null,l=!1;function f(e){if("selectionStart"in e&&Nm(e))return{start:e.selectionStart,end:e.selectionEnd};var i=e.ownerDocument&&e.ownerDocument.defaultView||window,h=i.getSelection();return{anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}}function v(e){return e.window===e?e.document:e.nodeType===ya?e:e.ownerDocument}function C(e,i,h){var p=v(h);if(!(l||Gd==null||Gd!==ga(p))){var w=f(Gd);if(!n||!Hd(n,w)){n=w;var D=Ps(s,"onSelect");if(D.length>0){var I=new Vd("onSelect","select",null,i,h);e.push({event:I,listeners:D}),I.target=Gd}}}}function E(e,i,h,p,w,D,I){var $=h?Tm(h):window;switch(i){case"focusin":(Yy($)||$.contentEditable==="true")&&(Gd=$,s=h,n=null);break;case"focusout":Gd=null,s=null,n=null;break;case"mousedown":l=!0;break;case"contextmenu":case"mouseup":case"dragend":l=!1,C(e,p,w);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":C(e,p,w)}}function T(e,i){var h={};return h[e.toLowerCase()]=i.toLowerCase(),h["Webkit"+e]="webkit"+i,h["Moz"+e]="moz"+i,h}var M={animationend:T("Animation","AnimationEnd"),animationiteration:T("Animation","AnimationIteration"),animationstart:T("Animation","AnimationStart"),transitionend:T("Transition","TransitionEnd")},V={},F={};vr&&(F=document.createElement("div").style,"AnimationEvent"in window||(delete M.animationend.animation,delete M.animationiteration.animation,delete M.animationstart.animation),"TransitionEvent"in window||delete M.transitionend.transition);function H(e){if(V[e])return V[e];if(!M[e])return e;var i=M[e];for(var h in i)if(i.hasOwnProperty(h)&&h in F)return V[e]=i[h];return e}var Y=H("animationend"),Q=H("animationiteration"),ee=H("animationstart"),ue=H("transitionend"),ve=new Map,be=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Me(e,i){ve.set(e,i),Ft(i,[e])}function Ee(){for(var e=0;e<be.length;e++){var i=be[e],h=i.toLowerCase(),p=i[0].toUpperCase()+i.slice(1);Me(h,"on"+p)}Me(Y,"onAnimationEnd"),Me(Q,"onAnimationIteration"),Me(ee,"onAnimationStart"),Me("dblclick","onDoubleClick"),Me("focusin","onFocus"),Me("focusout","onBlur"),Me(ue,"onTransitionEnd")}function Ve(e,i,h,p,w,D,I){var $=ve.get(i);if($!==void 0){var Z=Vd,re=i;switch(i){case"keypress":if(ko(p)===0)return;case"keydown":case"keyup":Z=hg;break;case"focusin":re="focus",Z=zu;break;case"focusout":re="blur",Z=zu;break;case"beforeblur":case"afterblur":Z=zu;break;case"click":if(p.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=F0;break;case Y:case Q:case ee:Z=Vc;break;case ue:Z=zy;break;case"scroll":Z=Ay;break;case"wheel":Z=q0;break;case"copy":case"cut":case"paste":Z=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Yh;break}var de=(D&Rl)!==0;{var Ie=!de&&i==="scroll",Le=$i(h,$,p.type,de,Ie);if(Le.length>0){var Je=new Z($,re,null,p,w);e.push({event:Je,listeners:Le})}}}}Ee(),xs(),Oc(),Dg(),Uy();function qe(e,i,h,p,w,D,I){Ve(e,i,h,p,w,D);var $=(D&Ah)===0;$&&(zc(e,i,h,p,w),qd(e,i,h,p,w),E(e,i,h,p,w),Zy(e,i,h,p,w))}var st=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],It=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(st));function Xt(e,i,h){var p=e.type||"unknown-event";e.currentTarget=h,xa(p,i,void 0,e),e.currentTarget=null}function Vt(e,i,h){var p;if(h)for(var w=i.length-1;w>=0;w--){var D=i[w],I=D.instance,$=D.currentTarget,Z=D.listener;if(I!==p&&e.isPropagationStopped())return;Xt(e,Z,$),p=I}else for(var re=0;re<i.length;re++){var de=i[re],Ie=de.instance,Le=de.currentTarget,Je=de.listener;if(Ie!==p&&e.isPropagationStopped())return;Xt(e,Je,Le),p=Ie}}function kt(e,i){for(var h=(i&Rl)!==0,p=0;p<e.length;p++){var w=e[p],D=w.event,I=w.listeners;Vt(D,I,h)}Uf()}function Et(e,i,h,p,w){var D=yd(h),I=[];qe(I,e,p,h,D,i),kt(I,i)}function xt(e,i){It.has(e)||b('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var h=!1,p=Y2(i),w=Ks(e);p.has(w)||(tn(i,e,Lt,h),p.add(w))}function Dt(e,i,h){It.has(e)&&!i&&b('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var p=0;i&&(p|=Rl),tn(h,e,p,i)}var vt="_reactListening"+Math.random().toString(36).slice(2);function ln(e){if(!e[vt]){e[vt]=!0,yn.forEach(function(h){h!=="selectionchange"&&(It.has(h)||Dt(h,!1,e),Dt(h,!0,e))});var i=e.nodeType===ya?e:e.ownerDocument;i!==null&&(i[vt]||(i[vt]=!0,Dt("selectionchange",!1,i)))}}function tn(e,i,h,p,w){var D=k0(e,i,h),I=void 0;wd&&(i==="touchstart"||i==="touchmove"||i==="wheel")&&(I=!0),e=e,p?I!==void 0?ig(e,i,D,I):rg(e,i,D):I!==void 0?I0(e,i,D,I):Py(e,i,D)}function $n(e,i){return e===i||e.nodeType===xi&&e.parentNode===i}function Fr(e,i,h,p,w){var D=p;if(!(i&jh)&&!(i&Lt)){var I=w;if(p!==null){var $=p;e:for(;;){if($===null)return;var Z=$.tag;if(Z===B||Z===W){var re=$.stateNode.containerInfo;if($n(re,I))break;if(Z===W)for(var de=$.return;de!==null;){var Ie=de.tag;if(Ie===B||Ie===W){var Le=de.stateNode.containerInfo;if($n(Le,I))return}de=de.return}for(;re!==null;){var Je=nf(re);if(Je===null)return;var et=Je.tag;if(et===ie||et===pe){$=D=Je;continue e}re=re.parentNode}}$=$.return}}}Gs(function(){return Et(e,i,h,D)})}function zr(e,i,h){return{instance:e,listener:i,currentTarget:h}}function $i(e,i,h,p,w,D){for(var I=i!==null?i+"Capture":null,$=p?I:i,Z=[],re=e,de=null;re!==null;){var Ie=re,Le=Ie.stateNode,Je=Ie.tag;if(Je===ie&&Le!==null&&(de=Le,$!==null)){var et=Dc(re,$);et!=null&&Z.push(zr(re,et,de))}if(w)break;re=re.return}return Z}function Ps(e,i){for(var h=i+"Capture",p=[],w=e;w!==null;){var D=w,I=D.stateNode,$=D.tag;if($===ie&&I!==null){var Z=I,re=Dc(w,h);re!=null&&p.unshift(zr(w,re,Z));var de=Dc(w,i);de!=null&&p.push(zr(w,de,Z))}w=w.return}return p}function qi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==ie);return e||null}function Oi(e,i){for(var h=e,p=i,w=0,D=h;D;D=qi(D))w++;for(var I=0,$=p;$;$=qi($))I++;for(;w-I>0;)h=qi(h),w--;for(;I-w>0;)p=qi(p),I--;for(var Z=w;Z--;){if(h===p||p!==null&&h===p.alternate)return h;h=qi(h),p=qi(p)}return null}function ns(e,i,h,p,w){for(var D=i._reactName,I=[],$=h;$!==null&&$!==p;){var Z=$,re=Z.alternate,de=Z.stateNode,Ie=Z.tag;if(re!==null&&re===p)break;if(Ie===ie&&de!==null){var Le=de;if(w){var Je=Dc($,D);Je!=null&&I.unshift(zr($,Je,Le))}else if(!w){var et=Dc($,D);et!=null&&I.push(zr($,et,Le))}}$=$.return}I.length!==0&&e.push({event:i,listeners:I})}function _s(e,i,h,p,w){var D=p&&w?Oi(p,w):null;p!==null&&ns(e,i,p,D,!1),w!==null&&h!==null&&ns(e,h,w,D,!0)}function Ks(e,i){return e+"__bubble"}var Zr=!1,yi="dangerouslySetInnerHTML",Si="suppressContentEditableWarning",Ei="suppressHydrationWarning",js="autoFocus",Mi="children",Hi="style",ws="__html",Ri,Kn,Gi,us,Di,$a,lo;Ri={dialog:!0,webview:!0},Kn=function(e,i){To(e,i),Th(e,i),Nc(e,i,{registrationNameDependencies:Dn,possibleRegistrationNames:qt})},$a=vr&&!document.documentMode,Gi=function(e,i,h){if(!Zr){var p=ia(h),w=ia(i);w!==p&&(Zr=!0,b("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(w),JSON.stringify(p)))}},us=function(e){if(!Zr){Zr=!0;var i=[];e.forEach(function(h){i.push(h)}),b("Extra attributes from the server: %s",i)}},Di=function(e,i){i===!1?b("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):b("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof i)},lo=function(e,i){var h=e.namespaceURI===wo?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return h.innerHTML=i,h.innerHTML};var Mo=/\r\n?/g,Kl=/\u0000|\uFFFD/g;function ia(e){We(e);var i=typeof e=="string"?e:""+e;return i.replace(Mo,`
`).replace(Kl,"")}function Ys(e,i,h,p){var w=ia(i),D=ia(e);if(D!==w&&(p&&(Zr||(Zr=!0,b('Text content did not match. Server: "%s" Client: "%s"',D,w))),h&&Ct))throw new Error("Text content does not match server-rendered HTML.")}function Xs(e){return e.nodeType===ya?e:e.ownerDocument}function Yl(){}function Bc(e){e.onclick=Yl}function nb(e,i,h,p,w){for(var D in p)if(p.hasOwnProperty(D)){var I=p[D];if(D===Hi)I&&Object.freeze(I),Eh(i,I);else if(D===yi){var $=I?I[ws]:void 0;$!=null&&dd(i,$)}else if(D===Mi)if(typeof I=="string"){var Z=e!=="textarea"||I!=="";Z&&Go(i,I)}else typeof I=="number"&&Go(i,""+I);else D===Si||D===Ei||D===js||(Dn.hasOwnProperty(D)?I!=null&&(typeof I!="function"&&Di(D,I),D==="onScroll"&&xt("scroll",i)):I!=null&&we(i,D,I,w))}}function Tg(e,i,h,p){for(var w=0;w<i.length;w+=2){var D=i[w],I=i[w+1];D===Hi?Eh(e,I):D===yi?dd(e,I):D===Mi?Go(e,I):we(e,D,I,p)}}function Pg(e,i,h,p){var w,D=Xs(h),I,$=p;if($===wo&&($=ei(e)),$===wo){if(w=Zo(e,i),!w&&e!==e.toLowerCase()&&b("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),e==="script"){var Z=D.createElement("div");Z.innerHTML="<script><\/script>";var re=Z.firstChild;I=Z.removeChild(re)}else if(typeof i.is=="string")I=D.createElement(e,{is:i.is});else if(I=D.createElement(e),e==="select"){var de=I;i.multiple?de.multiple=!0:i.size&&(de.size=i.size)}}else I=D.createElementNS($,e);return $===wo&&!w&&Object.prototype.toString.call(I)==="[object HTMLUnknownElement]"&&!cn.call(Ri,e)&&(Ri[e]=!0,b("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e)),I}function Xl(e,i){return Xs(i).createTextNode(e)}function rb(e,i,h,p){var w=Zo(i,h);Kn(i,h);var D;switch(i){case"dialog":xt("cancel",e),xt("close",e),D=h;break;case"iframe":case"object":case"embed":xt("load",e),D=h;break;case"video":case"audio":for(var I=0;I<st.length;I++)xt(st[I],e);D=h;break;case"source":xt("error",e),D=h;break;case"img":case"image":case"link":xt("error",e),xt("load",e),D=h;break;case"details":xt("toggle",e),D=h;break;case"input":bc(e,h),D=Tl(e,h),xt("invalid",e);break;case"option":Ar(e,h),D=h;break;case"select":_c(e,h),D=xc(e,h),xt("invalid",e);break;case"textarea":_h(e,h),D=Ho(e,h),xt("invalid",e);break;default:D=h}switch(pd(i,D),nb(i,e,p,D,w),i){case"input":qs(e),Xe(e,h,!1);break;case"textarea":qs(e),pr(e);break;case"option":Xr(e,h);break;case"select":lu(e,h);break;default:typeof D.onClick=="function"&&Bc(e);break}}function ib(e,i,h,p,w){Kn(i,p);var D=null,I,$;switch(i){case"input":I=Tl(e,h),$=Tl(e,p),D=[];break;case"select":I=xc(e,h),$=xc(e,p),D=[];break;case"textarea":I=Ho(e,h),$=Ho(e,p),D=[];break;default:I=h,$=p,typeof I.onClick!="function"&&typeof $.onClick=="function"&&Bc(e);break}pd(i,$);var Z,re,de=null;for(Z in I)if(!($.hasOwnProperty(Z)||!I.hasOwnProperty(Z)||I[Z]==null))if(Z===Hi){var Ie=I[Z];for(re in Ie)Ie.hasOwnProperty(re)&&(de||(de={}),de[re]="")}else Z===yi||Z===Mi||Z===Si||Z===Ei||Z===js||(Dn.hasOwnProperty(Z)?D||(D=[]):(D=D||[]).push(Z,null));for(Z in $){var Le=$[Z],Je=I!=null?I[Z]:void 0;if(!(!$.hasOwnProperty(Z)||Le===Je||Le==null&&Je==null))if(Z===Hi)if(Le&&Object.freeze(Le),Je){for(re in Je)Je.hasOwnProperty(re)&&(!Le||!Le.hasOwnProperty(re))&&(de||(de={}),de[re]="");for(re in Le)Le.hasOwnProperty(re)&&Je[re]!==Le[re]&&(de||(de={}),de[re]=Le[re])}else de||(D||(D=[]),D.push(Z,de)),de=Le;else if(Z===yi){var et=Le?Le[ws]:void 0,at=Je?Je[ws]:void 0;et!=null&&at!==et&&(D=D||[]).push(Z,et)}else Z===Mi?(typeof Le=="string"||typeof Le=="number")&&(D=D||[]).push(Z,""+Le):Z===Si||Z===Ei||(Dn.hasOwnProperty(Z)?(Le!=null&&(typeof Le!="function"&&Di(Z,Le),Z==="onScroll"&&xt("scroll",e)),!D&&Je!==Le&&(D=[])):(D=D||[]).push(Z,Le))}return de&&(ro(de,$[Hi]),(D=D||[]).push(Hi,de)),D}function e_(e,i,h,p,w){h==="input"&&w.type==="radio"&&w.name!=null&&K(e,w);var D=Zo(h,p),I=Zo(h,w);switch(Tg(e,i,D,I),h){case"input":_e(e,w);break;case"textarea":ud(e,w);break;case"select":no(e,w);break}}function t_(e){{var i=e.toLowerCase();return bu.hasOwnProperty(i)&&bu[i]||null}}function n_(e,i,h,p,w,D,I){var $,Z;switch($=Zo(i,h),Kn(i,h),i){case"dialog":xt("cancel",e),xt("close",e);break;case"iframe":case"object":case"embed":xt("load",e);break;case"video":case"audio":for(var re=0;re<st.length;re++)xt(st[re],e);break;case"source":xt("error",e);break;case"img":case"image":case"link":xt("error",e),xt("load",e);break;case"details":xt("toggle",e);break;case"input":bc(e,h),xt("invalid",e);break;case"option":Ar(e,h);break;case"select":_c(e,h),xt("invalid",e);break;case"textarea":_h(e,h),xt("invalid",e);break}pd(i,h);{Z=new Set;for(var de=e.attributes,Ie=0;Ie<de.length;Ie++){var Le=de[Ie].name.toLowerCase();switch(Le){case"value":break;case"checked":break;case"selected":break;default:Z.add(de[Ie].name)}}}var Je=null;for(var et in h)if(h.hasOwnProperty(et)){var at=h[et];if(et===Mi)typeof at=="string"?e.textContent!==at&&(h[Ei]!==!0&&Ys(e.textContent,at,D,I),Je=[Mi,at]):typeof at=="number"&&e.textContent!==""+at&&(h[Ei]!==!0&&Ys(e.textContent,at,D,I),Je=[Mi,""+at]);else if(Dn.hasOwnProperty(et))at!=null&&(typeof at!="function"&&Di(et,at),et==="onScroll"&&xt("scroll",e));else if(I&&typeof $=="boolean"){var Zt=void 0,Nn=Kt(et);if(h[Ei]!==!0){if(!(et===Si||et===Ei||et==="value"||et==="checked"||et==="selected")){if(et===yi){var vn=e.innerHTML,wr=at?at[ws]:void 0;if(wr!=null){var fr=lo(e,wr);fr!==vn&&Gi(et,vn,fr)}}else if(et===Hi){if(Z.delete(et),$a){var He=Lf(at);Zt=e.getAttribute("style"),He!==Zt&&Gi(et,Zt,He)}}else if($&&!Yn)Z.delete(et.toLowerCase()),Zt=he(e,et,at),at!==Zt&&Gi(et,Zt,at);else if(!br(et,Nn,$)&&!gt(et,at,Nn,$)){var ot=!1;if(Nn!==null)Z.delete(Nn.attributeName),Zt=se(e,et,at,Nn);else{var Ge=p;if(Ge===wo&&(Ge=ei(i)),Ge===wo)Z.delete(et.toLowerCase());else{var St=t_(et);St!==null&&St!==et&&(ot=!0,Z.delete(St)),Z.delete(et)}Zt=he(e,et,at)}var sn=Yn;!sn&&at!==Zt&&!ot&&Gi(et,Zt,at)}}}}}switch(I&&Z.size>0&&h[Ei]!==!0&&us(Z),i){case"input":qs(e),Xe(e,h,!0);break;case"textarea":qs(e),pr(e);break;case"select":case"option":break;default:typeof h.onClick=="function"&&Bc(e);break}return Je}function r_(e,i,h){var p=e.nodeValue!==i;return p}function jg(e,i){{if(Zr)return;Zr=!0,b("Did not expect server HTML to contain a <%s> in <%s>.",i.nodeName.toLowerCase(),e.nodeName.toLowerCase())}}function Ag(e,i){{if(Zr)return;Zr=!0,b('Did not expect server HTML to contain the text node "%s" in <%s>.',i.nodeValue,e.nodeName.toLowerCase())}}function kg(e,i,h){{if(Zr)return;Zr=!0,b("Expected server HTML to contain a matching <%s> in <%s>.",i,e.nodeName.toLowerCase())}}function Mg(e,i){{if(i===""||Zr)return;Zr=!0,b('Expected server HTML to contain a matching text node for "%s" in <%s>.',i,e.nodeName.toLowerCase())}}function Ro(e,i,h){switch(i){case"input":rt(e,h);return;case"textarea":fi(e,h);return;case"select":cd(e,h);return}}var Fc=function(){},Wd=function(){};{var i_=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],sb=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],s_=sb.concat(["button"]),As=["dd","dt","li","option","optgroup","p","rp","rt"],Pa={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Wd=function(e,i){var h=Tn({},e||Pa),p={tag:i};return sb.indexOf(i)!==-1&&(h.aTagInScope=null,h.buttonTagInScope=null,h.nobrTagInScope=null),s_.indexOf(i)!==-1&&(h.pTagInButtonScope=null),i_.indexOf(i)!==-1&&i!=="address"&&i!=="div"&&i!=="p"&&(h.listItemTagAutoclosing=null,h.dlItemTagAutoclosing=null),h.current=p,i==="form"&&(h.formTag=p),i==="a"&&(h.aTagInScope=p),i==="button"&&(h.buttonTagInScope=p),i==="nobr"&&(h.nobrTagInScope=p),i==="p"&&(h.pTagInButtonScope=p),i==="li"&&(h.listItemTagAutoclosing=p),(i==="dd"||i==="dt")&&(h.dlItemTagAutoclosing=p),h};var Bu=function(e,i){switch(i){case"select":return e==="option"||e==="optgroup"||e==="#text";case"optgroup":return e==="option"||e==="#text";case"option":return e==="#text";case"tr":return e==="th"||e==="td"||e==="style"||e==="script"||e==="template";case"tbody":case"thead":case"tfoot":return e==="tr"||e==="style"||e==="script"||e==="template";case"colgroup":return e==="col"||e==="template";case"table":return e==="caption"||e==="colgroup"||e==="tbody"||e==="tfoot"||e==="thead"||e==="style"||e==="script"||e==="template";case"head":return e==="base"||e==="basefont"||e==="bgsound"||e==="link"||e==="meta"||e==="title"||e==="noscript"||e==="noframes"||e==="style"||e==="script"||e==="template";case"html":return e==="head"||e==="body"||e==="frameset";case"frameset":return e==="frame";case"#document":return e==="html"}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i!=="h1"&&i!=="h2"&&i!=="h3"&&i!=="h4"&&i!=="h5"&&i!=="h6";case"rp":case"rt":return As.indexOf(i)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return i==null}return!0},Lo=function(e,i){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i.pTagInButtonScope;case"form":return i.formTag||i.pTagInButtonScope;case"li":return i.listItemTagAutoclosing;case"dd":case"dt":return i.dlItemTagAutoclosing;case"button":return i.buttonTagInScope;case"a":return i.aTagInScope;case"nobr":return i.nobrTagInScope}return null},Uc={};Fc=function(e,i,h){h=h||Pa;var p=h.current,w=p&&p.tag;i!=null&&(e!=null&&b("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var D=Bu(e,w)?null:p,I=D?null:Lo(e,h),$=D||I;if($){var Z=$.tag,re=!!D+"|"+e+"|"+Z;if(!Uc[re]){Uc[re]=!0;var de=e,Ie="";if(e==="#text"?/\S/.test(i)?de="Text nodes":(de="Whitespace text nodes",Ie=" Make sure you don't have any extra whitespace between tags on each line of your source code."):de="<"+e+">",D){var Le="";Z==="table"&&e==="tr"&&(Le+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),b("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",de,Z,Ie,Le)}else b("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",de,Z)}}}}var qa="suppressHydrationWarning",ab="$",ob="/$",Rg="$?",Lg="$!",qk="style",a_=null,o_=null;function Hk(e){var i,h,p=e.nodeType;switch(p){case ya:case du:{i=p===ya?"#document":"#fragment";var w=e.documentElement;h=w?w.namespaceURI:Gr(null,"");break}default:{var D=p===xi?e.parentNode:e,I=D.namespaceURI||null;i=D.tagName,h=Gr(I,i);break}}{var $=i.toLowerCase(),Z=Wd(null,$);return{namespace:h,ancestorInfo:Z}}}function Gk(e,i,h){{var p=e,w=Gr(p.namespace,i),D=Wd(p.ancestorInfo,i);return{namespace:w,ancestorInfo:D}}}function kU(e){return e}function Wk(e){a_=A0(),o_=Ng();var i=null;return Ty(!1),i}function Zk(e){Sm(o_),Ty(a_),a_=null,o_=null}function Kk(e,i,h,p,w){var D;{var I=p;if(Fc(e,null,I.ancestorInfo),typeof i.children=="string"||typeof i.children=="number"){var $=""+i.children,Z=Wd(I.ancestorInfo,e);Fc(null,$,Z)}D=I.namespace}var re=Pg(e,i,h,D);return Og(w,re),p_(re,i),re}function Yk(e,i){e.appendChild(i)}function Xk(e,i,h,p,w){switch(rb(e,i,h,p),i){case"button":case"input":case"select":case"textarea":return!!h.autoFocus;case"img":return!0;default:return!1}}function Jk(e,i,h,p,w,D){{var I=D;if(typeof p.children!=typeof h.children&&(typeof p.children=="string"||typeof p.children=="number")){var $=""+p.children,Z=Wd(I.ancestorInfo,i);Fc(null,$,Z)}}return ib(e,i,h,p)}function l_(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}function Qk(e,i,h,p){{var w=h;Fc(null,e,w.ancestorInfo)}var D=Xl(e,i);return Og(p,D),D}function e2(){var e=window.event;return e===void 0?ql:Ou(e.type)}var c_=typeof setTimeout=="function"?setTimeout:void 0,t2=typeof clearTimeout=="function"?clearTimeout:void 0,u_=-1,nS=typeof Promise=="function"?Promise:void 0,n2=typeof queueMicrotask=="function"?queueMicrotask:typeof nS<"u"?function(e){return nS.resolve(null).then(e).catch(r2)}:c_;function r2(e){setTimeout(function(){throw e})}function i2(e,i,h,p){switch(i){case"button":case"input":case"select":case"textarea":h.autoFocus&&e.focus();return;case"img":{h.src&&(e.src=h.src);return}}}function s2(e,i,h,p,w,D){e_(e,i,h,p,w),p_(e,w)}function rS(e){Go(e,"")}function a2(e,i,h){e.nodeValue=h}function o2(e,i){e.appendChild(i)}function l2(e,i){var h;e.nodeType===xi?(h=e.parentNode,h.insertBefore(i,e)):(h=e,h.appendChild(i));var p=e._reactRootContainer;p==null&&h.onclick===null&&Bc(h)}function c2(e,i,h){e.insertBefore(i,h)}function u2(e,i,h){e.nodeType===xi?e.parentNode.insertBefore(i,h):e.insertBefore(i,h)}function d2(e,i){e.removeChild(i)}function h2(e,i){e.nodeType===xi?e.parentNode.removeChild(i):e.removeChild(i)}function d_(e,i){var h=i,p=0;do{var w=h.nextSibling;if(e.removeChild(h),w&&w.nodeType===xi){var D=w.data;if(D===ob)if(p===0){e.removeChild(w),sl(i);return}else p--;else(D===ab||D===Rg||D===Lg)&&p++}h=w}while(h);sl(i)}function f2(e,i){e.nodeType===xi?d_(e.parentNode,i):e.nodeType===ls&&d_(e,i),sl(e)}function m2(e){e=e;var i=e.style;typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"}function p2(e){e.nodeValue=""}function g2(e,i){e=e;var h=i[qk],p=h!=null&&h.hasOwnProperty("display")?h.display:null;e.style.display=Ch("display",p)}function v2(e,i){e.nodeValue=i}function y2(e){e.nodeType===ls?e.textContent="":e.nodeType===ya&&e.documentElement&&e.removeChild(e.documentElement)}function b2(e,i,h){return e.nodeType!==ls||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e}function x2(e,i){return i===""||e.nodeType!==va?null:e}function _2(e){return e.nodeType!==xi?null:e}function iS(e){return e.data===Rg}function h_(e){return e.data===Lg}function w2(e){var i=e.nextSibling&&e.nextSibling.dataset,h,p,w;return i&&(h=i.dgst,p=i.msg,w=i.stck),{message:p,digest:h,stack:w}}function C2(e,i){e._reactRetry=i}function lb(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===ls||i===va)break;if(i===xi){var h=e.data;if(h===ab||h===Lg||h===Rg)break;if(h===ob)return null}}return e}function Ig(e){return lb(e.nextSibling)}function N2(e){return lb(e.firstChild)}function S2(e){return lb(e.firstChild)}function E2(e){return lb(e.nextSibling)}function D2(e,i,h,p,w,D,I){Og(D,e),p_(e,h);var $;{var Z=w;$=Z.namespace}var re=(D.mode&cr)!==_n;return n_(e,i,h,$,p,re,I)}function T2(e,i,h,p){return Og(h,e),h.mode&cr,r_(e,i)}function P2(e,i){Og(i,e)}function j2(e){for(var i=e.nextSibling,h=0;i;){if(i.nodeType===xi){var p=i.data;if(p===ob){if(h===0)return Ig(i);h--}else(p===ab||p===Lg||p===Rg)&&h++}i=i.nextSibling}return null}function sS(e){for(var i=e.previousSibling,h=0;i;){if(i.nodeType===xi){var p=i.data;if(p===ab||p===Lg||p===Rg){if(h===0)return i;h--}else p===ob&&h++}i=i.previousSibling}return null}function A2(e){sl(e)}function k2(e){sl(e)}function M2(e){return e!=="head"&&e!=="body"}function R2(e,i,h,p){var w=!0;Ys(i.nodeValue,h,p,w)}function L2(e,i,h,p,w,D){if(i[qa]!==!0){var I=!0;Ys(p.nodeValue,w,D,I)}}function I2(e,i){i.nodeType===ls?jg(e,i):i.nodeType===xi||Ag(e,i)}function V2(e,i){{var h=e.parentNode;h!==null&&(i.nodeType===ls?jg(h,i):i.nodeType===xi||Ag(h,i))}}function O2(e,i,h,p,w){(w||i[qa]!==!0)&&(p.nodeType===ls?jg(h,p):p.nodeType===xi||Ag(h,p))}function z2(e,i,h){kg(e,i)}function B2(e,i){Mg(e,i)}function F2(e,i,h){{var p=e.parentNode;p!==null&&kg(p,i)}}function U2(e,i){{var h=e.parentNode;h!==null&&Mg(h,i)}}function $2(e,i,h,p,w,D){(D||i[qa]!==!0)&&kg(h,p)}function q2(e,i,h,p,w){(w||i[qa]!==!0)&&Mg(h,p)}function H2(e){b("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",e.nodeName.toLowerCase())}function G2(e){ln(e)}var Em=Math.random().toString(36).slice(2),Dm="__reactFiber$"+Em,f_="__reactProps$"+Em,Vg="__reactContainer$"+Em,m_="__reactEvents$"+Em,W2="__reactListeners$"+Em,Z2="__reactHandles$"+Em;function K2(e){delete e[Dm],delete e[f_],delete e[m_],delete e[W2],delete e[Z2]}function Og(e,i){i[Dm]=e}function cb(e,i){i[Vg]=e}function aS(e){e[Vg]=null}function zg(e){return!!e[Vg]}function nf(e){var i=e[Dm];if(i)return i;for(var h=e.parentNode;h;){if(i=h[Vg]||h[Dm],i){var p=i.alternate;if(i.child!==null||p!==null&&p.child!==null)for(var w=sS(e);w!==null;){var D=w[Dm];if(D)return D;w=sS(w)}return i}e=h,h=e.parentNode}return null}function Zd(e){var i=e[Dm]||e[Vg];return i&&(i.tag===ie||i.tag===pe||i.tag===Re||i.tag===B)?i:null}function Tm(e){if(e.tag===ie||e.tag===pe)return e.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function ub(e){return e[f_]||null}function p_(e,i){e[f_]=i}function Y2(e){var i=e[m_];return i===void 0&&(i=e[m_]=new Set),i}var oS={},lS=a.ReactDebugCurrentFrame;function db(e){if(e){var i=e._owner,h=_l(e.type,e._source,i?i.type:null);lS.setExtraStackFrame(h)}else lS.setExtraStackFrame(null)}function Jl(e,i,h,p,w){{var D=Function.call.bind(cn);for(var I in e)if(D(e,I)){var $=void 0;try{if(typeof e[I]!="function"){var Z=Error((p||"React class")+": "+h+" type `"+I+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[I]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Z.name="Invariant Violation",Z}$=e[I](i,I,p,h,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(re){$=re}$&&!($ instanceof Error)&&(db(w),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",p||"React class",h,I,typeof $),db(null)),$ instanceof Error&&!($.message in oS)&&(oS[$.message]=!0,db(w),b("Failed %s type: %s",h,$.message),db(null))}}}var g_=[],hb;hb=[];var Fu=-1;function Kd(e){return{current:e}}function ja(e,i){if(Fu<0){b("Unexpected pop.");return}i!==hb[Fu]&&b("Unexpected Fiber popped."),e.current=g_[Fu],g_[Fu]=null,hb[Fu]=null,Fu--}function Aa(e,i,h){Fu++,g_[Fu]=e.current,hb[Fu]=h,e.current=i}var v_;v_={};var Io={};Object.freeze(Io);var Uu=Kd(Io),$c=Kd(!1),y_=Io;function Pm(e,i,h){return h&&qc(i)?y_:Uu.current}function cS(e,i,h){{var p=e.stateNode;p.__reactInternalMemoizedUnmaskedChildContext=i,p.__reactInternalMemoizedMaskedChildContext=h}}function jm(e,i){{var h=e.type,p=h.contextTypes;if(!p)return Io;var w=e.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===i)return w.__reactInternalMemoizedMaskedChildContext;var D={};for(var I in p)D[I]=i[I];{var $=jn(e)||"Unknown";Jl(p,D,"context",$)}return w&&cS(e,i,D),D}}function fb(){return $c.current}function qc(e){{var i=e.childContextTypes;return i!=null}}function mb(e){ja($c,e),ja(Uu,e)}function b_(e){ja($c,e),ja(Uu,e)}function uS(e,i,h){{if(Uu.current!==Io)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Aa(Uu,i,e),Aa($c,h,e)}}function dS(e,i,h){{var p=e.stateNode,w=i.childContextTypes;if(typeof p.getChildContext!="function"){{var D=jn(e)||"Unknown";v_[D]||(v_[D]=!0,b("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D))}return h}var I=p.getChildContext();for(var $ in I)if(!($ in w))throw new Error((jn(e)||"Unknown")+'.getChildContext(): key "'+$+'" is not defined in childContextTypes.');{var Z=jn(e)||"Unknown";Jl(w,I,"child context",Z)}return Tn({},h,I)}}function pb(e){{var i=e.stateNode,h=i&&i.__reactInternalMemoizedMergedChildContext||Io;return y_=Uu.current,Aa(Uu,h,e),Aa($c,$c.current,e),!0}}function hS(e,i,h){{var p=e.stateNode;if(!p)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(h){var w=dS(e,i,y_);p.__reactInternalMemoizedMergedChildContext=w,ja($c,e),ja(Uu,e),Aa(Uu,w,e),Aa($c,h,e)}else ja($c,e),Aa($c,h,e)}}function X2(e){{if(!wt(e)||e.tag!==k)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var i=e;do{switch(i.tag){case B:return i.stateNode.context;case k:{var h=i.type;if(qc(h))return i.stateNode.__reactInternalMemoizedMergedChildContext;break}}i=i.return}while(i!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Yd=0,gb=1,$u=null,x_=!1,__=!1;function fS(e){$u===null?$u=[e]:$u.push(e)}function J2(e){x_=!0,fS(e)}function mS(){x_&&Xd()}function Xd(){if(!__&&$u!==null){__=!0;var e=0,i=Fa();try{var h=!0,p=$u;for(ys(Ba);e<p.length;e++){var w=p[e];do w=w(h);while(w!==null)}$u=null,x_=!1}catch(D){throw $u!==null&&($u=$u.slice(e+1)),In(mi,Xd),D}finally{ys(i),__=!1}}return null}var Am=[],km=0,vb=null,yb=0,ll=[],cl=0,rf=null,qu=1,Hu="";function Q2(e){return af(),(e.flags&q)!==bn}function eM(e){return af(),yb}function tM(){var e=Hu,i=qu,h=i&~nM(i);return h.toString(32)+e}function sf(e,i){af(),Am[km++]=yb,Am[km++]=vb,vb=e,yb=i}function pS(e,i,h){af(),ll[cl++]=qu,ll[cl++]=Hu,ll[cl++]=rf,rf=e;var p=qu,w=Hu,D=bb(p)-1,I=p&~(1<<D),$=h+1,Z=bb(i)+D;if(Z>30){var re=D-D%5,de=(1<<re)-1,Ie=(I&de).toString(32),Le=I>>re,Je=D-re,et=bb(i)+Je,at=$<<Je,Zt=at|Le,Nn=Ie+w;qu=1<<et|Zt,Hu=Nn}else{var vn=$<<D,wr=vn|I,fr=w;qu=1<<Z|wr,Hu=fr}}function w_(e){af();var i=e.return;if(i!==null){var h=1,p=0;sf(e,h),pS(e,h,p)}}function bb(e){return 32-Sd(e)}function nM(e){return 1<<bb(e)-1}function C_(e){for(;e===vb;)vb=Am[--km],Am[km]=null,yb=Am[--km],Am[km]=null;for(;e===rf;)rf=ll[--cl],ll[cl]=null,Hu=ll[--cl],ll[cl]=null,qu=ll[--cl],ll[cl]=null}function rM(){return af(),rf!==null?{id:qu,overflow:Hu}:null}function iM(e,i){af(),ll[cl++]=qu,ll[cl++]=Hu,ll[cl++]=rf,qu=i.id,Hu=i.overflow,rf=e}function af(){aa()||b("Expected to be hydrating. This is a bug in React. Please file an issue.")}var sa=null,ul=null,Ql=!1,of=!1,Jd=null;function sM(){Ql&&b("We should not be hydrating here. This is a bug in React. Please file a bug.")}function gS(){of=!0}function aM(){return of}function oM(e){var i=e.stateNode.containerInfo;return ul=S2(i),sa=e,Ql=!0,Jd=null,of=!1,!0}function lM(e,i,h){return ul=E2(i),sa=e,Ql=!0,Jd=null,of=!1,h!==null&&iM(e,h),!0}function vS(e,i){switch(e.tag){case B:{I2(e.stateNode.containerInfo,i);break}case ie:{var h=(e.mode&cr)!==_n;O2(e.type,e.memoizedProps,e.stateNode,i,h);break}case Re:{var p=e.memoizedState;p.dehydrated!==null&&V2(p.dehydrated,i);break}}}function yS(e,i){vS(e,i);var h=hI();h.stateNode=i,h.return=e;var p=e.deletions;p===null?(e.deletions=[h],e.flags|=wa):p.push(h)}function N_(e,i){{if(of)return;switch(e.tag){case B:{var h=e.stateNode.containerInfo;switch(i.tag){case ie:var p=i.type;i.pendingProps,z2(h,p);break;case pe:var w=i.pendingProps;B2(h,w);break}break}case ie:{var D=e.type,I=e.memoizedProps,$=e.stateNode;switch(i.tag){case ie:{var Z=i.type,re=i.pendingProps,de=(e.mode&cr)!==_n;$2(D,I,$,Z,re,de);break}case pe:{var Ie=i.pendingProps,Le=(e.mode&cr)!==_n;q2(D,I,$,Ie,Le);break}}break}case Re:{var Je=e.memoizedState,et=Je.dehydrated;if(et!==null)switch(i.tag){case ie:var at=i.type;i.pendingProps,F2(et,at);break;case pe:var Zt=i.pendingProps;U2(et,Zt);break}break}default:return}}}function bS(e,i){i.flags=i.flags&~y|_i,N_(e,i)}function xS(e,i){switch(e.tag){case ie:{var h=e.type;e.pendingProps;var p=b2(i,h);return p!==null?(e.stateNode=p,sa=e,ul=N2(p),!0):!1}case pe:{var w=e.pendingProps,D=x2(i,w);return D!==null?(e.stateNode=D,sa=e,ul=null,!0):!1}case Re:{var I=_2(i);if(I!==null){var $={dehydrated:I,treeContext:rM(),retryLane:za};e.memoizedState=$;var Z=fI(I);return Z.return=e,e.child=Z,sa=e,ul=null,!0}return!1}default:return!1}}function S_(e){return(e.mode&cr)!==_n&&(e.flags&on)===bn}function E_(e){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function D_(e){if(Ql){var i=ul;if(!i){S_(e)&&(N_(sa,e),E_()),bS(sa,e),Ql=!1,sa=e;return}var h=i;if(!xS(e,i)){S_(e)&&(N_(sa,e),E_()),i=Ig(h);var p=sa;if(!i||!xS(e,i)){bS(sa,e),Ql=!1,sa=e;return}yS(p,h)}}}function cM(e,i,h){var p=e.stateNode,w=!of,D=D2(p,e.type,e.memoizedProps,i,h,e,w);return e.updateQueue=D,D!==null}function uM(e){var i=e.stateNode,h=e.memoizedProps,p=T2(i,h,e);if(p){var w=sa;if(w!==null)switch(w.tag){case B:{var D=w.stateNode.containerInfo,I=(w.mode&cr)!==_n;R2(D,i,h,I);break}case ie:{var $=w.type,Z=w.memoizedProps,re=w.stateNode,de=(w.mode&cr)!==_n;L2($,Z,re,i,h,de);break}}}return p}function dM(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");P2(h,e)}function hM(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return j2(h)}function _S(e){for(var i=e.return;i!==null&&i.tag!==ie&&i.tag!==B&&i.tag!==Re;)i=i.return;sa=i}function xb(e){if(e!==sa)return!1;if(!Ql)return _S(e),Ql=!0,!1;if(e.tag!==B&&(e.tag!==ie||M2(e.type)&&!l_(e.type,e.memoizedProps))){var i=ul;if(i)if(S_(e))wS(e),E_();else for(;i;)yS(e,i),i=Ig(i)}return _S(e),e.tag===Re?ul=hM(e):ul=sa?Ig(e.stateNode):null,!0}function fM(){return Ql&&ul!==null}function wS(e){for(var i=ul;i;)vS(e,i),i=Ig(i)}function Mm(){sa=null,ul=null,Ql=!1,of=!1}function CS(){Jd!==null&&(gD(Jd),Jd=null)}function aa(){return Ql}function T_(e){Jd===null?Jd=[e]:Jd.push(e)}var mM=a.ReactCurrentBatchConfig,pM=null;function gM(){return mM.transition}var ec={recordUnsafeLifecycleWarnings:function(e,i){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,i){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var vM=function(e){for(var i=null,h=e;h!==null;)h.mode&ui&&(i=h),h=h.return;return i},lf=function(e){var i=[];return e.forEach(function(h){i.push(h)}),i.sort().join(", ")},Bg=[],Fg=[],Ug=[],$g=[],qg=[],Hg=[],cf=new Set;ec.recordUnsafeLifecycleWarnings=function(e,i){cf.has(e.type)||(typeof i.componentWillMount=="function"&&i.componentWillMount.__suppressDeprecationWarning!==!0&&Bg.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillMount=="function"&&Fg.push(e),typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Ug.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillReceiveProps=="function"&&$g.push(e),typeof i.componentWillUpdate=="function"&&i.componentWillUpdate.__suppressDeprecationWarning!==!0&&qg.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillUpdate=="function"&&Hg.push(e))},ec.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Bg.length>0&&(Bg.forEach(function(Le){e.add(jn(Le)||"Component"),cf.add(Le.type)}),Bg=[]);var i=new Set;Fg.length>0&&(Fg.forEach(function(Le){i.add(jn(Le)||"Component"),cf.add(Le.type)}),Fg=[]);var h=new Set;Ug.length>0&&(Ug.forEach(function(Le){h.add(jn(Le)||"Component"),cf.add(Le.type)}),Ug=[]);var p=new Set;$g.length>0&&($g.forEach(function(Le){p.add(jn(Le)||"Component"),cf.add(Le.type)}),$g=[]);var w=new Set;qg.length>0&&(qg.forEach(function(Le){w.add(jn(Le)||"Component"),cf.add(Le.type)}),qg=[]);var D=new Set;if(Hg.length>0&&(Hg.forEach(function(Le){D.add(jn(Le)||"Component"),cf.add(Le.type)}),Hg=[]),i.size>0){var I=lf(i);b(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,I)}if(p.size>0){var $=lf(p);b(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,$)}if(D.size>0){var Z=lf(D);b(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,Z)}if(e.size>0){var re=lf(e);N(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,re)}if(h.size>0){var de=lf(h);N(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,de)}if(w.size>0){var Ie=lf(w);N(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Ie)}};var _b=new Map,NS=new Set;ec.recordLegacyContextWarning=function(e,i){var h=vM(e);if(h===null){b("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!NS.has(e.type)){var p=_b.get(h);(e.type.contextTypes!=null||e.type.childContextTypes!=null||i!==null&&typeof i.getChildContext=="function")&&(p===void 0&&(p=[],_b.set(h,p)),p.push(e))}},ec.flushLegacyContextWarning=function(){_b.forEach(function(e,i){if(e.length!==0){var h=e[0],p=new Set;e.forEach(function(D){p.add(jn(D)||"Component"),NS.add(D.type)});var w=lf(p);try{oi(h),b(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)}finally{Pi()}}})},ec.discardPendingWarnings=function(){Bg=[],Fg=[],Ug=[],$g=[],qg=[],Hg=[],_b=new Map}}var P_,j_,A_,k_,M_,SS=function(e,i){};P_=!1,j_=!1,A_={},k_={},M_={},SS=function(e,i){if(!(e===null||typeof e!="object")&&!(!e._store||e._store.validated||e.key!=null)){if(typeof e._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var h=jn(i)||"Component";k_[h]||(k_[h]=!0,b('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function yM(e){return e.prototype&&e.prototype.isReactComponent}function Gg(e,i,h){var p=h.ref;if(p!==null&&typeof p!="function"&&typeof p!="object"){if((e.mode&ui||Vn)&&!(h._owner&&h._self&&h._owner.stateNode!==h._self)&&!(h._owner&&h._owner.tag!==k)&&!(typeof h.type=="function"&&!yM(h.type))&&h._owner){var w=jn(e)||"Component";A_[w]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w,p),A_[w]=!0)}if(h._owner){var D=h._owner,I;if(D){var $=D;if($.tag!==k)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");I=$.stateNode}if(!I)throw new Error("Missing owner for string ref "+p+". This error is likely caused by a bug in React. Please file an issue.");var Z=I;Lr(p,"ref");var re=""+p;if(i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===re)return i.ref;var de=function(Ie){var Le=Z.refs;Ie===null?delete Le[re]:Le[re]=Ie};return de._stringRef=re,de}else{if(typeof p!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!h._owner)throw new Error("Element ref was specified as a string ("+p+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return p}function wb(e,i){var h=Object.prototype.toString.call(i);throw new Error("Objects are not valid as a React child (found: "+(h==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":h)+"). If you meant to render a collection of children, use an array instead.")}function Cb(e){{var i=jn(e)||"Component";if(M_[i])return;M_[i]=!0,b("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function ES(e){var i=e._payload,h=e._init;return h(i)}function DS(e){function i(He,ot){if(e){var Ge=He.deletions;Ge===null?(He.deletions=[ot],He.flags|=wa):Ge.push(ot)}}function h(He,ot){if(!e)return null;for(var Ge=ot;Ge!==null;)i(He,Ge),Ge=Ge.sibling;return null}function p(He,ot){for(var Ge=new Map,St=ot;St!==null;)St.key!==null?Ge.set(St.key,St):Ge.set(St.index,St),St=St.sibling;return Ge}function w(He,ot){var Ge=yf(He,ot);return Ge.index=0,Ge.sibling=null,Ge}function D(He,ot,Ge){if(He.index=Ge,!e)return He.flags|=q,ot;var St=He.alternate;if(St!==null){var sn=St.index;return sn<ot?(He.flags|=_i,ot):sn}else return He.flags|=_i,ot}function I(He){return e&&He.alternate===null&&(He.flags|=_i),He}function $(He,ot,Ge,St){if(ot===null||ot.tag!==pe){var sn=T1(Ge,He.mode,St);return sn.return=He,sn}else{var Jt=w(ot,Ge);return Jt.return=He,Jt}}function Z(He,ot,Ge,St){var sn=Ge.type;if(sn===Te)return de(He,ot,Ge.props.children,St,Ge.key);if(ot!==null&&(ot.elementType===sn||kD(ot,Ge)||typeof sn=="object"&&sn!==null&&sn.$$typeof===pt&&ES(sn)===ot.type)){var Jt=w(ot,Ge.props);return Jt.ref=Gg(He,ot,Ge),Jt.return=He,Jt._debugSource=Ge._source,Jt._debugOwner=Ge._owner,Jt}var Rn=D1(Ge,He.mode,St);return Rn.ref=Gg(He,ot,Ge),Rn.return=He,Rn}function re(He,ot,Ge,St){if(ot===null||ot.tag!==W||ot.stateNode.containerInfo!==Ge.containerInfo||ot.stateNode.implementation!==Ge.implementation){var sn=P1(Ge,He.mode,St);return sn.return=He,sn}else{var Jt=w(ot,Ge.children||[]);return Jt.return=He,Jt}}function de(He,ot,Ge,St,sn){if(ot===null||ot.tag!==Oe){var Jt=ch(Ge,He.mode,St,sn);return Jt.return=He,Jt}else{var Rn=w(ot,Ge);return Rn.return=He,Rn}}function Ie(He,ot,Ge){if(typeof ot=="string"&&ot!==""||typeof ot=="number"){var St=T1(""+ot,He.mode,Ge);return St.return=He,St}if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case xe:{var sn=D1(ot,He.mode,Ge);return sn.ref=Gg(He,null,ot),sn.return=He,sn}case ge:{var Jt=P1(ot,He.mode,Ge);return Jt.return=He,Jt}case pt:{var Rn=ot._payload,qn=ot._init;return Ie(He,qn(Rn),Ge)}}if(nr(ot)||Hr(ot)){var ri=ch(ot,He.mode,Ge,null);return ri.return=He,ri}wb(He,ot)}return typeof ot=="function"&&Cb(He),null}function Le(He,ot,Ge,St){var sn=ot!==null?ot.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return sn!==null?null:$(He,ot,""+Ge,St);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case xe:return Ge.key===sn?Z(He,ot,Ge,St):null;case ge:return Ge.key===sn?re(He,ot,Ge,St):null;case pt:{var Jt=Ge._payload,Rn=Ge._init;return Le(He,ot,Rn(Jt),St)}}if(nr(Ge)||Hr(Ge))return sn!==null?null:de(He,ot,Ge,St,null);wb(He,Ge)}return typeof Ge=="function"&&Cb(He),null}function Je(He,ot,Ge,St,sn){if(typeof St=="string"&&St!==""||typeof St=="number"){var Jt=He.get(Ge)||null;return $(ot,Jt,""+St,sn)}if(typeof St=="object"&&St!==null){switch(St.$$typeof){case xe:{var Rn=He.get(St.key===null?Ge:St.key)||null;return Z(ot,Rn,St,sn)}case ge:{var qn=He.get(St.key===null?Ge:St.key)||null;return re(ot,qn,St,sn)}case pt:var ri=St._payload,Mr=St._init;return Je(He,ot,Ge,Mr(ri),sn)}if(nr(St)||Hr(St)){var ds=He.get(Ge)||null;return de(ot,ds,St,sn,null)}wb(ot,St)}return typeof St=="function"&&Cb(ot),null}function et(He,ot,Ge){{if(typeof He!="object"||He===null)return ot;switch(He.$$typeof){case xe:case ge:SS(He,Ge);var St=He.key;if(typeof St!="string")break;if(ot===null){ot=new Set,ot.add(St);break}if(!ot.has(St)){ot.add(St);break}b("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",St);break;case pt:var sn=He._payload,Jt=He._init;et(Jt(sn),ot,Ge);break}}return ot}function at(He,ot,Ge,St){for(var sn=null,Jt=0;Jt<Ge.length;Jt++){var Rn=Ge[Jt];sn=et(Rn,sn,He)}for(var qn=null,ri=null,Mr=ot,ds=0,Rr=0,rs=null;Mr!==null&&Rr<Ge.length;Rr++){Mr.index>Rr?(rs=Mr,Mr=null):rs=Mr.sibling;var Ma=Le(He,Mr,Ge[Rr],St);if(Ma===null){Mr===null&&(Mr=rs);break}e&&Mr&&Ma.alternate===null&&i(He,Mr),ds=D(Ma,ds,Rr),ri===null?qn=Ma:ri.sibling=Ma,ri=Ma,Mr=rs}if(Rr===Ge.length){if(h(He,Mr),aa()){var fa=Rr;sf(He,fa)}return qn}if(Mr===null){for(;Rr<Ge.length;Rr++){var Oo=Ie(He,Ge[Rr],St);Oo!==null&&(ds=D(Oo,ds,Rr),ri===null?qn=Oo:ri.sibling=Oo,ri=Oo)}if(aa()){var Za=Rr;sf(He,Za)}return qn}for(var Ka=p(He,Mr);Rr<Ge.length;Rr++){var Ra=Je(Ka,He,Rr,Ge[Rr],St);Ra!==null&&(e&&Ra.alternate!==null&&Ka.delete(Ra.key===null?Rr:Ra.key),ds=D(Ra,ds,Rr),ri===null?qn=Ra:ri.sibling=Ra,ri=Ra)}if(e&&Ka.forEach(function(Jm){return i(He,Jm)}),aa()){var Ju=Rr;sf(He,Ju)}return qn}function Zt(He,ot,Ge,St){var sn=Hr(Ge);if(typeof sn!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&Ge[Symbol.toStringTag]==="Generator"&&(j_||b("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),j_=!0),Ge.entries===sn&&(P_||b("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),P_=!0);var Jt=sn.call(Ge);if(Jt)for(var Rn=null,qn=Jt.next();!qn.done;qn=Jt.next()){var ri=qn.value;Rn=et(ri,Rn,He)}}var Mr=sn.call(Ge);if(Mr==null)throw new Error("An iterable object provided no iterator.");for(var ds=null,Rr=null,rs=ot,Ma=0,fa=0,Oo=null,Za=Mr.next();rs!==null&&!Za.done;fa++,Za=Mr.next()){rs.index>fa?(Oo=rs,rs=null):Oo=rs.sibling;var Ka=Le(He,rs,Za.value,St);if(Ka===null){rs===null&&(rs=Oo);break}e&&rs&&Ka.alternate===null&&i(He,rs),Ma=D(Ka,Ma,fa),Rr===null?ds=Ka:Rr.sibling=Ka,Rr=Ka,rs=Oo}if(Za.done){if(h(He,rs),aa()){var Ra=fa;sf(He,Ra)}return ds}if(rs===null){for(;!Za.done;fa++,Za=Mr.next()){var Ju=Ie(He,Za.value,St);Ju!==null&&(Ma=D(Ju,Ma,fa),Rr===null?ds=Ju:Rr.sibling=Ju,Rr=Ju)}if(aa()){var Jm=fa;sf(He,Jm)}return ds}for(var Nv=p(He,rs);!Za.done;fa++,Za=Mr.next()){var Jc=Je(Nv,He,fa,Za.value,St);Jc!==null&&(e&&Jc.alternate!==null&&Nv.delete(Jc.key===null?fa:Jc.key),Ma=D(Jc,Ma,fa),Rr===null?ds=Jc:Rr.sibling=Jc,Rr=Jc)}if(e&&Nv.forEach(function(qI){return i(He,qI)}),aa()){var $I=fa;sf(He,$I)}return ds}function Nn(He,ot,Ge,St){if(ot!==null&&ot.tag===pe){h(He,ot.sibling);var sn=w(ot,Ge);return sn.return=He,sn}h(He,ot);var Jt=T1(Ge,He.mode,St);return Jt.return=He,Jt}function vn(He,ot,Ge,St){for(var sn=Ge.key,Jt=ot;Jt!==null;){if(Jt.key===sn){var Rn=Ge.type;if(Rn===Te){if(Jt.tag===Oe){h(He,Jt.sibling);var qn=w(Jt,Ge.props.children);return qn.return=He,qn._debugSource=Ge._source,qn._debugOwner=Ge._owner,qn}}else if(Jt.elementType===Rn||kD(Jt,Ge)||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===pt&&ES(Rn)===Jt.type){h(He,Jt.sibling);var ri=w(Jt,Ge.props);return ri.ref=Gg(He,Jt,Ge),ri.return=He,ri._debugSource=Ge._source,ri._debugOwner=Ge._owner,ri}h(He,Jt);break}else i(He,Jt);Jt=Jt.sibling}if(Ge.type===Te){var Mr=ch(Ge.props.children,He.mode,St,Ge.key);return Mr.return=He,Mr}else{var ds=D1(Ge,He.mode,St);return ds.ref=Gg(He,ot,Ge),ds.return=He,ds}}function wr(He,ot,Ge,St){for(var sn=Ge.key,Jt=ot;Jt!==null;){if(Jt.key===sn)if(Jt.tag===W&&Jt.stateNode.containerInfo===Ge.containerInfo&&Jt.stateNode.implementation===Ge.implementation){h(He,Jt.sibling);var Rn=w(Jt,Ge.children||[]);return Rn.return=He,Rn}else{h(He,Jt);break}else i(He,Jt);Jt=Jt.sibling}var qn=P1(Ge,He.mode,St);return qn.return=He,qn}function fr(He,ot,Ge,St){var sn=typeof Ge=="object"&&Ge!==null&&Ge.type===Te&&Ge.key===null;if(sn&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case xe:return I(vn(He,ot,Ge,St));case ge:return I(wr(He,ot,Ge,St));case pt:var Jt=Ge._payload,Rn=Ge._init;return fr(He,ot,Rn(Jt),St)}if(nr(Ge))return at(He,ot,Ge,St);if(Hr(Ge))return Zt(He,ot,Ge,St);wb(He,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?I(Nn(He,ot,""+Ge,St)):(typeof Ge=="function"&&Cb(He),h(He,ot))}return fr}var Rm=DS(!0),TS=DS(!1);function bM(e,i){if(e!==null&&i.child!==e.child)throw new Error("Resuming work not yet implemented.");if(i.child!==null){var h=i.child,p=yf(h,h.pendingProps);for(i.child=p,p.return=i;h.sibling!==null;)h=h.sibling,p=p.sibling=yf(h,h.pendingProps),p.return=i;p.sibling=null}}function xM(e,i){for(var h=e.child;h!==null;)oI(h,i),h=h.sibling}var R_=Kd(null),L_;L_={};var Nb=null,Lm=null,I_=null,Sb=!1;function Eb(){Nb=null,Lm=null,I_=null,Sb=!1}function PS(){Sb=!0}function jS(){Sb=!1}function AS(e,i,h){Aa(R_,i._currentValue,e),i._currentValue=h,i._currentRenderer!==void 0&&i._currentRenderer!==null&&i._currentRenderer!==L_&&b("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),i._currentRenderer=L_}function V_(e,i){var h=R_.current;ja(R_,i),e._currentValue=h}function O_(e,i,h){for(var p=e;p!==null;){var w=p.alternate;if(Ru(p.childLanes,i)?w!==null&&!Ru(w.childLanes,i)&&(w.childLanes=Qn(w.childLanes,i)):(p.childLanes=Qn(p.childLanes,i),w!==null&&(w.childLanes=Qn(w.childLanes,i))),p===h)break;p=p.return}p!==h&&b("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function _M(e,i,h){wM(e,i,h)}function wM(e,i,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var w=void 0,D=p.dependencies;if(D!==null){w=p.child;for(var I=D.firstContext;I!==null;){if(I.context===i){if(p.tag===k){var $=Mu(h),Z=Gu(gi,$);Z.tag=Tb;var re=p.updateQueue;if(re!==null){var de=re.shared,Ie=de.pending;Ie===null?Z.next=Z:(Z.next=Ie.next,Ie.next=Z),de.pending=Z}}p.lanes=Qn(p.lanes,h);var Le=p.alternate;Le!==null&&(Le.lanes=Qn(Le.lanes,h)),O_(p.return,h,e),D.lanes=Qn(D.lanes,h);break}I=I.next}}else if(p.tag===De)w=p.type===e.type?null:p.child;else if(p.tag===zt){var Je=p.return;if(Je===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");Je.lanes=Qn(Je.lanes,h);var et=Je.alternate;et!==null&&(et.lanes=Qn(et.lanes,h)),O_(Je,h,e),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===e){w=null;break}var at=w.sibling;if(at!==null){at.return=w.return,w=at;break}w=w.return}p=w}}function Im(e,i){Nb=e,Lm=null,I_=null;var h=e.dependencies;if(h!==null){var p=h.firstContext;p!==null&&(Ea(h.lanes,i)&&ov(),h.firstContext=null)}}function Cs(e){Sb&&b("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var i=e._currentValue;if(I_!==e){var h={context:e,memoizedValue:i,next:null};if(Lm===null){if(Nb===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Lm=h,Nb.dependencies={lanes:bt,firstContext:h}}else Lm=Lm.next=h}return i}var uf=null;function z_(e){uf===null?uf=[e]:uf.push(e)}function CM(){if(uf!==null){for(var e=0;e<uf.length;e++){var i=uf[e],h=i.interleaved;if(h!==null){i.interleaved=null;var p=h.next,w=i.pending;if(w!==null){var D=w.next;w.next=p,h.next=D}i.pending=h}}uf=null}}function kS(e,i,h,p){var w=i.interleaved;return w===null?(h.next=h,z_(i)):(h.next=w.next,w.next=h),i.interleaved=h,Db(e,p)}function NM(e,i,h,p){var w=i.interleaved;w===null?(h.next=h,z_(i)):(h.next=w.next,w.next=h),i.interleaved=h}function SM(e,i,h,p){var w=i.interleaved;return w===null?(h.next=h,z_(i)):(h.next=w.next,w.next=h),i.interleaved=h,Db(e,p)}function co(e,i){return Db(e,i)}var EM=Db;function Db(e,i){e.lanes=Qn(e.lanes,i);var h=e.alternate;h!==null&&(h.lanes=Qn(h.lanes,i)),h===null&&(e.flags&(_i|y))!==bn&&TD(e);for(var p=e,w=e.return;w!==null;)w.childLanes=Qn(w.childLanes,i),h=w.alternate,h!==null?h.childLanes=Qn(h.childLanes,i):(w.flags&(_i|y))!==bn&&TD(e),p=w,w=w.return;if(p.tag===B){var D=p.stateNode;return D}else return null}var MS=0,RS=1,Tb=2,B_=3,Pb=!1,F_,jb;F_=!1,jb=null;function U_(e){var i={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:bt},effects:null};e.updateQueue=i}function LS(e,i){var h=i.updateQueue,p=e.updateQueue;if(h===p){var w={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects};i.updateQueue=w}}function Gu(e,i){var h={eventTime:e,lane:i,tag:MS,payload:null,callback:null,next:null};return h}function Qd(e,i,h){var p=e.updateQueue;if(p===null)return null;var w=p.shared;if(jb===w&&!F_&&(b("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),F_=!0),NL()){var D=w.pending;return D===null?i.next=i:(i.next=D.next,D.next=i),w.pending=i,EM(e,h)}else return SM(e,w,i,h)}function Ab(e,i,h){var p=i.updateQueue;if(p!==null){var w=p.shared;if(Pd(h)){var D=w.lanes;D=vy(D,e.pendingLanes);var I=Qn(D,h);w.lanes=I,Gp(e,I)}}}function $_(e,i){var h=e.updateQueue,p=e.alternate;if(p!==null){var w=p.updateQueue;if(h===w){var D=null,I=null,$=h.firstBaseUpdate;if($!==null){var Z=$;do{var re={eventTime:Z.eventTime,lane:Z.lane,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null};I===null?D=I=re:(I.next=re,I=re),Z=Z.next}while(Z!==null);I===null?D=I=i:(I.next=i,I=i)}else D=I=i;h={baseState:w.baseState,firstBaseUpdate:D,lastBaseUpdate:I,shared:w.shared,effects:w.effects},e.updateQueue=h;return}}var de=h.lastBaseUpdate;de===null?h.firstBaseUpdate=i:de.next=i,h.lastBaseUpdate=i}function DM(e,i,h,p,w,D){switch(h.tag){case RS:{var I=h.payload;if(typeof I=="function"){PS();var $=I.call(D,p,w);{if(e.mode&ui){Ai(!0);try{I.call(D,p,w)}finally{Ai(!1)}}jS()}return $}return I}case B_:e.flags=e.flags&~z|on;case MS:{var Z=h.payload,re;if(typeof Z=="function"){PS(),re=Z.call(D,p,w);{if(e.mode&ui){Ai(!0);try{Z.call(D,p,w)}finally{Ai(!1)}}jS()}}else re=Z;return re==null?p:Tn({},p,re)}case Tb:return Pb=!0,p}return p}function kb(e,i,h,p){var w=e.updateQueue;Pb=!1,jb=w.shared;var D=w.firstBaseUpdate,I=w.lastBaseUpdate,$=w.shared.pending;if($!==null){w.shared.pending=null;var Z=$,re=Z.next;Z.next=null,I===null?D=re:I.next=re,I=Z;var de=e.alternate;if(de!==null){var Ie=de.updateQueue,Le=Ie.lastBaseUpdate;Le!==I&&(Le===null?Ie.firstBaseUpdate=re:Le.next=re,Ie.lastBaseUpdate=Z)}}if(D!==null){var Je=w.baseState,et=bt,at=null,Zt=null,Nn=null,vn=D;do{var wr=vn.lane,fr=vn.eventTime;if(Ru(p,wr)){if(Nn!==null){var ot={eventTime:fr,lane:Dr,tag:vn.tag,payload:vn.payload,callback:vn.callback,next:null};Nn=Nn.next=ot}Je=DM(e,w,vn,Je,i,h);var Ge=vn.callback;if(Ge!==null&&vn.lane!==Dr){e.flags|=Cd;var St=w.effects;St===null?w.effects=[vn]:St.push(vn)}}else{var He={eventTime:fr,lane:wr,tag:vn.tag,payload:vn.payload,callback:vn.callback,next:null};Nn===null?(Zt=Nn=He,at=Je):Nn=Nn.next=He,et=Qn(et,wr)}if(vn=vn.next,vn===null){if($=w.shared.pending,$===null)break;var sn=$,Jt=sn.next;sn.next=null,vn=Jt,w.lastBaseUpdate=sn,w.shared.pending=null}}while(!0);Nn===null&&(at=Je),w.baseState=at,w.firstBaseUpdate=Zt,w.lastBaseUpdate=Nn;var Rn=w.shared.interleaved;if(Rn!==null){var qn=Rn;do et=Qn(et,qn.lane),qn=qn.next;while(qn!==Rn)}else D===null&&(w.shared.lanes=bt);bv(et),e.lanes=et,e.memoizedState=Je}jb=null}function TM(e,i){if(typeof e!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+e));e.call(i)}function IS(){Pb=!1}function Mb(){return Pb}function VS(e,i,h){var p=i.effects;if(i.effects=null,p!==null)for(var w=0;w<p.length;w++){var D=p[w],I=D.callback;I!==null&&(D.callback=null,TM(I,h))}}var Wg={},eh=Kd(Wg),Zg=Kd(Wg),Rb=Kd(Wg);function Lb(e){if(e===Wg)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function OS(){var e=Lb(Rb.current);return e}function q_(e,i){Aa(Rb,i,e),Aa(Zg,e,e),Aa(eh,Wg,e);var h=Hk(i);ja(eh,e),Aa(eh,h,e)}function Vm(e){ja(eh,e),ja(Zg,e),ja(Rb,e)}function H_(){var e=Lb(eh.current);return e}function zS(e){Lb(Rb.current);var i=Lb(eh.current),h=Gk(i,e.type);i!==h&&(Aa(Zg,e,e),Aa(eh,h,e))}function G_(e){Zg.current===e&&(ja(eh,e),ja(Zg,e))}var PM=0,BS=1,FS=1,Kg=2,tc=Kd(PM);function W_(e,i){return(e&i)!==0}function Om(e){return e&BS}function Z_(e,i){return e&BS|i}function jM(e,i){return e|i}function th(e,i){Aa(tc,i,e)}function zm(e){ja(tc,e)}function AM(e,i){var h=e.memoizedState;return h!==null?h.dehydrated!==null:(e.memoizedProps,!0)}function Ib(e){for(var i=e;i!==null;){if(i.tag===Re){var h=i.memoizedState;if(h!==null){var p=h.dehydrated;if(p===null||iS(p)||h_(p))return i}}else if(i.tag===fn&&i.memoizedProps.revealOrder!==void 0){var w=(i.flags&on)!==bn;if(w)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)return null;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var uo=0,ks=1,Hc=2,Ms=4,oa=8,K_=[];function Y_(){for(var e=0;e<K_.length;e++){var i=K_[e];i._workInProgressVersionPrimary=null}K_.length=0}function kM(e,i){var h=i._getVersion,p=h(i._source);e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,p]:e.mutableSourceEagerHydrationData.push(i,p)}var nn=a.ReactCurrentDispatcher,Yg=a.ReactCurrentBatchConfig,X_,Bm;X_=new Set;var df=bt,ni=null,Rs=null,Ls=null,Vb=!1,Xg=!1,Jg=0,MM=0,RM=25,mt=null,dl=null,nh=-1,J_=!1;function Ur(){{var e=mt;dl===null?dl=[e]:dl.push(e)}}function Ht(){{var e=mt;dl!==null&&(nh++,dl[nh]!==e&&LM(e))}}function Fm(e){e!=null&&!nr(e)&&b("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",mt,typeof e)}function LM(e){{var i=jn(ni);if(!X_.has(i)&&(X_.add(i),dl!==null)){for(var h="",p=30,w=0;w<=nh;w++){for(var D=dl[w],I=w===nh?e:D,$=w+1+". "+D;$.length<p;)$+=" ";$+=I+`
`,h+=$}b(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,i,h)}}}function ka(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function Q_(e,i){if(J_)return!1;if(i===null)return b("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",mt),!1;e.length!==i.length&&b(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,mt,"["+i.join(", ")+"]","["+e.join(", ")+"]");for(var h=0;h<i.length&&h<e.length;h++)if(!Ta(e[h],i[h]))return!1;return!0}function Um(e,i,h,p,w,D){df=D,ni=i,dl=e!==null?e._debugHookTypes:null,nh=-1,J_=e!==null&&e.type!==i.type,i.memoizedState=null,i.updateQueue=null,i.lanes=bt,e!==null&&e.memoizedState!==null?nn.current=cE:dl!==null?nn.current=lE:nn.current=oE;var I=h(p,w);if(Xg){var $=0;do{if(Xg=!1,Jg=0,$>=RM)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");$+=1,J_=!1,Rs=null,Ls=null,i.updateQueue=null,nh=-1,nn.current=uE,I=h(p,w)}while(Xg)}nn.current=Yb,i._debugHookTypes=dl;var Z=Rs!==null&&Rs.next!==null;if(df=bt,ni=null,Rs=null,Ls=null,mt=null,dl=null,nh=-1,e!==null&&(e.flags&$e)!==(i.flags&$e)&&(e.mode&cr)!==_n&&b("Internal React error: Expected static flag was missing. Please notify the React team."),Vb=!1,Z)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return I}function $m(){var e=Jg!==0;return Jg=0,e}function US(e,i,h){i.updateQueue=e.updateQueue,(i.mode&tl)!==_n?i.flags&=-50333701:i.flags&=-2053,e.lanes=om(e.lanes,h)}function $S(){if(nn.current=Yb,Vb){for(var e=ni.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Vb=!1}df=bt,ni=null,Rs=null,Ls=null,dl=null,nh=-1,mt=null,nE=!1,Xg=!1,Jg=0}function Gc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?ni.memoizedState=Ls=e:Ls=Ls.next=e,Ls}function hl(){var e;if(Rs===null){var i=ni.alternate;i!==null?e=i.memoizedState:e=null}else e=Rs.next;var h;if(Ls===null?h=ni.memoizedState:h=Ls.next,h!==null)Ls=h,h=Ls.next,Rs=e;else{if(e===null)throw new Error("Rendered more hooks than during the previous render.");Rs=e;var p={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null};Ls===null?ni.memoizedState=Ls=p:Ls=Ls.next=p}return Ls}function qS(){return{lastEffect:null,stores:null}}function ew(e,i){return typeof i=="function"?i(e):i}function tw(e,i,h){var p=Gc(),w;h!==void 0?w=h(i):w=i,p.memoizedState=p.baseState=w;var D={pending:null,interleaved:null,lanes:bt,dispatch:null,lastRenderedReducer:e,lastRenderedState:w};p.queue=D;var I=D.dispatch=zM.bind(null,ni,D);return[p.memoizedState,I]}function nw(e,i,h){var p=hl(),w=p.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=e;var D=Rs,I=D.baseQueue,$=w.pending;if($!==null){if(I!==null){var Z=I.next,re=$.next;I.next=re,$.next=Z}D.baseQueue!==I&&b("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),D.baseQueue=I=$,w.pending=null}if(I!==null){var de=I.next,Ie=D.baseState,Le=null,Je=null,et=null,at=de;do{var Zt=at.lane;if(Ru(df,Zt)){if(et!==null){var vn={lane:Dr,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};et=et.next=vn}if(at.hasEagerState)Ie=at.eagerState;else{var wr=at.action;Ie=e(Ie,wr)}}else{var Nn={lane:Zt,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};et===null?(Je=et=Nn,Le=Ie):et=et.next=Nn,ni.lanes=Qn(ni.lanes,Zt),bv(Zt)}at=at.next}while(at!==null&&at!==de);et===null?Le=Ie:et.next=Je,Ta(Ie,p.memoizedState)||ov(),p.memoizedState=Ie,p.baseState=Le,p.baseQueue=et,w.lastRenderedState=Ie}var fr=w.interleaved;if(fr!==null){var He=fr;do{var ot=He.lane;ni.lanes=Qn(ni.lanes,ot),bv(ot),He=He.next}while(He!==fr)}else I===null&&(w.lanes=bt);var Ge=w.dispatch;return[p.memoizedState,Ge]}function rw(e,i,h){var p=hl(),w=p.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=e;var D=w.dispatch,I=w.pending,$=p.memoizedState;if(I!==null){w.pending=null;var Z=I.next,re=Z;do{var de=re.action;$=e($,de),re=re.next}while(re!==Z);Ta($,p.memoizedState)||ov(),p.memoizedState=$,p.baseQueue===null&&(p.baseState=$),w.lastRenderedState=$}return[$,D]}function MU(e,i,h){}function RU(e,i,h){}function iw(e,i,h){var p=ni,w=Gc(),D,I=aa();if(I){if(h===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");D=h(),Bm||D!==h()&&(b("The result of getServerSnapshot should be cached to avoid an infinite loop"),Bm=!0)}else{if(D=i(),!Bm){var $=i();Ta(D,$)||(b("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var Z=px();if(Z===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");am(Z,df)||HS(p,i,D)}w.memoizedState=D;var re={value:D,getSnapshot:i};return w.queue=re,Ub(WS.bind(null,p,re,e),[e]),p.flags|=m,Qg(ks|oa,GS.bind(null,p,re,D,i),void 0,null),D}function Ob(e,i,h){var p=ni,w=hl(),D=i();if(!Bm){var I=i();Ta(D,I)||(b("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var $=w.memoizedState,Z=!Ta($,D);Z&&(w.memoizedState=D,ov());var re=w.queue;if(tv(WS.bind(null,p,re,e),[e]),re.getSnapshot!==i||Z||Ls!==null&&Ls.memoizedState.tag&ks){p.flags|=m,Qg(ks|oa,GS.bind(null,p,re,D,i),void 0,null);var de=px();if(de===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");am(de,df)||HS(p,i,D)}return D}function HS(e,i,h){e.flags|=P;var p={getSnapshot:i,value:h},w=ni.updateQueue;if(w===null)w=qS(),ni.updateQueue=w,w.stores=[p];else{var D=w.stores;D===null?w.stores=[p]:D.push(p)}}function GS(e,i,h,p){i.value=h,i.getSnapshot=p,ZS(i)&&KS(e)}function WS(e,i,h){var p=function(){ZS(i)&&KS(e)};return h(p)}function ZS(e){var i=e.getSnapshot,h=e.value;try{var p=i();return!Ta(h,p)}catch{return!0}}function KS(e){var i=co(e,En);i!==null&&zs(i,e,En,gi)}function zb(e){var i=Gc();typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e;var h={pending:null,interleaved:null,lanes:bt,dispatch:null,lastRenderedReducer:ew,lastRenderedState:e};i.queue=h;var p=h.dispatch=BM.bind(null,ni,h);return[i.memoizedState,p]}function sw(e){return nw(ew)}function aw(e){return rw(ew)}function Qg(e,i,h,p){var w={tag:e,create:i,destroy:h,deps:p,next:null},D=ni.updateQueue;if(D===null)D=qS(),ni.updateQueue=D,D.lastEffect=w.next=w;else{var I=D.lastEffect;if(I===null)D.lastEffect=w.next=w;else{var $=I.next;I.next=w,w.next=$,D.lastEffect=w}}return w}function ow(e){var i=Gc();{var h={current:e};return i.memoizedState=h,h}}function Bb(e){var i=hl();return i.memoizedState}function ev(e,i,h,p){var w=Gc(),D=p===void 0?null:p;ni.flags|=e,w.memoizedState=Qg(ks|i,h,void 0,D)}function Fb(e,i,h,p){var w=hl(),D=p===void 0?null:p,I=void 0;if(Rs!==null){var $=Rs.memoizedState;if(I=$.destroy,D!==null){var Z=$.deps;if(Q_(D,Z)){w.memoizedState=Qg(i,h,I,D);return}}}ni.flags|=e,w.memoizedState=Qg(ks|i,h,I,D)}function Ub(e,i){return(ni.mode&tl)!==_n?ev(ae|m|ce,oa,e,i):ev(m|ce,oa,e,i)}function tv(e,i){return Fb(m,oa,e,i)}function lw(e,i){return ev(hr,Hc,e,i)}function $b(e,i){return Fb(hr,Hc,e,i)}function cw(e,i){var h=hr;return h|=le,(ni.mode&tl)!==_n&&(h|=me),ev(h,Ms,e,i)}function qb(e,i){return Fb(hr,Ms,e,i)}function YS(e,i){if(typeof i=="function"){var h=i,p=e();return h(p),function(){h(null)}}else if(i!=null){var w=i;w.hasOwnProperty("current")||b("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(w).join(", ")+"}");var D=e();return w.current=D,function(){w.current=null}}}function uw(e,i,h){typeof i!="function"&&b("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null,w=hr;return w|=le,(ni.mode&tl)!==_n&&(w|=me),ev(w,Ms,YS.bind(null,i,e),p)}function Hb(e,i,h){typeof i!="function"&&b("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null;return Fb(hr,Ms,YS.bind(null,i,e),p)}function IM(e,i){}var Gb=IM;function dw(e,i){var h=Gc(),p=i===void 0?null:i;return h.memoizedState=[e,p],e}function Wb(e,i){var h=hl(),p=i===void 0?null:i,w=h.memoizedState;if(w!==null&&p!==null){var D=w[1];if(Q_(p,D))return w[0]}return h.memoizedState=[e,p],e}function hw(e,i){var h=Gc(),p=i===void 0?null:i,w=e();return h.memoizedState=[w,p],w}function Zb(e,i){var h=hl(),p=i===void 0?null:i,w=h.memoizedState;if(w!==null&&p!==null){var D=w[1];if(Q_(p,D))return w[0]}var I=e();return h.memoizedState=[I,p],I}function fw(e){var i=Gc();return i.memoizedState=e,e}function XS(e){var i=hl(),h=Rs,p=h.memoizedState;return QS(i,p,e)}function JS(e){var i=hl();if(Rs===null)return i.memoizedState=e,e;var h=Rs.memoizedState;return QS(i,h,e)}function QS(e,i,h){var p=!qp(df);if(p){if(!Ta(h,i)){var w=gy();ni.lanes=Qn(ni.lanes,w),bv(w),e.baseState=!0}return i}else return e.baseState&&(e.baseState=!1,ov()),e.memoizedState=h,h}function VM(e,i,h){var p=Fa();ys(xy(p,$l)),e(!0);var w=Yg.transition;Yg.transition={};var D=Yg.transition;Yg.transition._updatedFibers=new Set;try{e(!1),i()}finally{if(ys(p),Yg.transition=w,w===null&&D._updatedFibers){var I=D._updatedFibers.size;I>10&&N("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),D._updatedFibers.clear()}}}function mw(){var e=zb(!1),i=e[0],h=e[1],p=VM.bind(null,h),w=Gc();return w.memoizedState=p,[i,p]}function eE(){var e=sw(),i=e[0],h=hl(),p=h.memoizedState;return[i,p]}function tE(){var e=aw(),i=e[0],h=hl(),p=h.memoizedState;return[i,p]}var nE=!1;function OM(){return nE}function pw(){var e=Gc(),i=px(),h=i.identifierPrefix,p;if(aa()){var w=tM();p=":"+h+"R"+w;var D=Jg++;D>0&&(p+="H"+D.toString(32)),p+=":"}else{var I=MM++;p=":"+h+"r"+I.toString(32)+":"}return e.memoizedState=p,p}function Kb(){var e=hl(),i=e.memoizedState;return i}function zM(e,i,h){typeof arguments[3]=="function"&&b("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=oh(e),w={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(rE(e))iE(i,w);else{var D=kS(e,i,w,p);if(D!==null){var I=Wa();zs(D,e,p,I),sE(D,i,p)}}aE(e,p)}function BM(e,i,h){typeof arguments[3]=="function"&&b("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=oh(e),w={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(rE(e))iE(i,w);else{var D=e.alternate;if(e.lanes===bt&&(D===null||D.lanes===bt)){var I=i.lastRenderedReducer;if(I!==null){var $;$=nn.current,nn.current=nc;try{var Z=i.lastRenderedState,re=I(Z,h);if(w.hasEagerState=!0,w.eagerState=re,Ta(re,Z)){NM(e,i,w,p);return}}catch{}finally{nn.current=$}}}var de=kS(e,i,w,p);if(de!==null){var Ie=Wa();zs(de,e,p,Ie),sE(de,i,p)}}aE(e,p)}function rE(e){var i=e.alternate;return e===ni||i!==null&&i===ni}function iE(e,i){Xg=Vb=!0;var h=e.pending;h===null?i.next=i:(i.next=h.next,h.next=i),e.pending=i}function sE(e,i,h){if(Pd(h)){var p=i.lanes;p=vy(p,e.pendingLanes);var w=Qn(p,h);i.lanes=w,Gp(e,w)}}function aE(e,i,h){Lp(e,i)}var Yb={readContext:Cs,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:pn},oE=null,lE=null,cE=null,uE=null,Wc=null,nc=null,Xb=null;{var gw=function(){b("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},Bn=function(){b("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};oE={readContext:function(e){return Cs(e)},useCallback:function(e,i){return mt="useCallback",Ur(),Fm(i),dw(e,i)},useContext:function(e){return mt="useContext",Ur(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Ur(),Fm(i),Ub(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Ur(),Fm(h),uw(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Ur(),Fm(i),lw(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Ur(),Fm(i),cw(e,i)},useMemo:function(e,i){mt="useMemo",Ur(),Fm(i);var h=nn.current;nn.current=Wc;try{return hw(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Ur();var p=nn.current;nn.current=Wc;try{return tw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Ur(),ow(e)},useState:function(e){mt="useState",Ur();var i=nn.current;nn.current=Wc;try{return zb(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Ur(),void 0},useDeferredValue:function(e){return mt="useDeferredValue",Ur(),fw(e)},useTransition:function(){return mt="useTransition",Ur(),mw()},useMutableSource:function(e,i,h){return mt="useMutableSource",Ur(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Ur(),iw(e,i,h)},useId:function(){return mt="useId",Ur(),pw()},unstable_isNewReconciler:pn},lE={readContext:function(e){return Cs(e)},useCallback:function(e,i){return mt="useCallback",Ht(),dw(e,i)},useContext:function(e){return mt="useContext",Ht(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Ht(),Ub(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Ht(),uw(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Ht(),lw(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Ht(),cw(e,i)},useMemo:function(e,i){mt="useMemo",Ht();var h=nn.current;nn.current=Wc;try{return hw(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Ht();var p=nn.current;nn.current=Wc;try{return tw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Ht(),ow(e)},useState:function(e){mt="useState",Ht();var i=nn.current;nn.current=Wc;try{return zb(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Ht(),void 0},useDeferredValue:function(e){return mt="useDeferredValue",Ht(),fw(e)},useTransition:function(){return mt="useTransition",Ht(),mw()},useMutableSource:function(e,i,h){return mt="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Ht(),iw(e,i,h)},useId:function(){return mt="useId",Ht(),pw()},unstable_isNewReconciler:pn},cE={readContext:function(e){return Cs(e)},useCallback:function(e,i){return mt="useCallback",Ht(),Wb(e,i)},useContext:function(e){return mt="useContext",Ht(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Ht(),Hb(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Ht(),$b(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Ht(),qb(e,i)},useMemo:function(e,i){mt="useMemo",Ht();var h=nn.current;nn.current=nc;try{return Zb(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Ht();var p=nn.current;nn.current=nc;try{return nw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Ht(),Bb()},useState:function(e){mt="useState",Ht();var i=nn.current;nn.current=nc;try{return sw(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Ht(),Gb()},useDeferredValue:function(e){return mt="useDeferredValue",Ht(),XS(e)},useTransition:function(){return mt="useTransition",Ht(),eE()},useMutableSource:function(e,i,h){return mt="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Ht(),Ob(e,i)},useId:function(){return mt="useId",Ht(),Kb()},unstable_isNewReconciler:pn},uE={readContext:function(e){return Cs(e)},useCallback:function(e,i){return mt="useCallback",Ht(),Wb(e,i)},useContext:function(e){return mt="useContext",Ht(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Ht(),Hb(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Ht(),$b(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Ht(),qb(e,i)},useMemo:function(e,i){mt="useMemo",Ht();var h=nn.current;nn.current=Xb;try{return Zb(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Ht();var p=nn.current;nn.current=Xb;try{return rw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Ht(),Bb()},useState:function(e){mt="useState",Ht();var i=nn.current;nn.current=Xb;try{return aw(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Ht(),Gb()},useDeferredValue:function(e){return mt="useDeferredValue",Ht(),JS(e)},useTransition:function(){return mt="useTransition",Ht(),tE()},useMutableSource:function(e,i,h){return mt="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Ht(),Ob(e,i)},useId:function(){return mt="useId",Ht(),Kb()},unstable_isNewReconciler:pn},Wc={readContext:function(e){return gw(),Cs(e)},useCallback:function(e,i){return mt="useCallback",Bn(),Ur(),dw(e,i)},useContext:function(e){return mt="useContext",Bn(),Ur(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Bn(),Ur(),Ub(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Bn(),Ur(),uw(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Bn(),Ur(),lw(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Bn(),Ur(),cw(e,i)},useMemo:function(e,i){mt="useMemo",Bn(),Ur();var h=nn.current;nn.current=Wc;try{return hw(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Bn(),Ur();var p=nn.current;nn.current=Wc;try{return tw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Bn(),Ur(),ow(e)},useState:function(e){mt="useState",Bn(),Ur();var i=nn.current;nn.current=Wc;try{return zb(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Bn(),Ur(),void 0},useDeferredValue:function(e){return mt="useDeferredValue",Bn(),Ur(),fw(e)},useTransition:function(){return mt="useTransition",Bn(),Ur(),mw()},useMutableSource:function(e,i,h){return mt="useMutableSource",Bn(),Ur(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Bn(),Ur(),iw(e,i,h)},useId:function(){return mt="useId",Bn(),Ur(),pw()},unstable_isNewReconciler:pn},nc={readContext:function(e){return gw(),Cs(e)},useCallback:function(e,i){return mt="useCallback",Bn(),Ht(),Wb(e,i)},useContext:function(e){return mt="useContext",Bn(),Ht(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Bn(),Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Bn(),Ht(),Hb(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Bn(),Ht(),$b(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Bn(),Ht(),qb(e,i)},useMemo:function(e,i){mt="useMemo",Bn(),Ht();var h=nn.current;nn.current=nc;try{return Zb(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Bn(),Ht();var p=nn.current;nn.current=nc;try{return nw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Bn(),Ht(),Bb()},useState:function(e){mt="useState",Bn(),Ht();var i=nn.current;nn.current=nc;try{return sw(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Bn(),Ht(),Gb()},useDeferredValue:function(e){return mt="useDeferredValue",Bn(),Ht(),XS(e)},useTransition:function(){return mt="useTransition",Bn(),Ht(),eE()},useMutableSource:function(e,i,h){return mt="useMutableSource",Bn(),Ht(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Bn(),Ht(),Ob(e,i)},useId:function(){return mt="useId",Bn(),Ht(),Kb()},unstable_isNewReconciler:pn},Xb={readContext:function(e){return gw(),Cs(e)},useCallback:function(e,i){return mt="useCallback",Bn(),Ht(),Wb(e,i)},useContext:function(e){return mt="useContext",Bn(),Ht(),Cs(e)},useEffect:function(e,i){return mt="useEffect",Bn(),Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return mt="useImperativeHandle",Bn(),Ht(),Hb(e,i,h)},useInsertionEffect:function(e,i){return mt="useInsertionEffect",Bn(),Ht(),$b(e,i)},useLayoutEffect:function(e,i){return mt="useLayoutEffect",Bn(),Ht(),qb(e,i)},useMemo:function(e,i){mt="useMemo",Bn(),Ht();var h=nn.current;nn.current=nc;try{return Zb(e,i)}finally{nn.current=h}},useReducer:function(e,i,h){mt="useReducer",Bn(),Ht();var p=nn.current;nn.current=nc;try{return rw(e,i,h)}finally{nn.current=p}},useRef:function(e){return mt="useRef",Bn(),Ht(),Bb()},useState:function(e){mt="useState",Bn(),Ht();var i=nn.current;nn.current=nc;try{return aw(e)}finally{nn.current=i}},useDebugValue:function(e,i){return mt="useDebugValue",Bn(),Ht(),Gb()},useDeferredValue:function(e){return mt="useDeferredValue",Bn(),Ht(),JS(e)},useTransition:function(){return mt="useTransition",Bn(),Ht(),tE()},useMutableSource:function(e,i,h){return mt="useMutableSource",Bn(),Ht(),void 0},useSyncExternalStore:function(e,i,h){return mt="useSyncExternalStore",Bn(),Ht(),Ob(e,i)},useId:function(){return mt="useId",Bn(),Ht(),Kb()},unstable_isNewReconciler:pn}}var rh=t.unstable_now,dE=0,Jb=-1,nv=-1,Qb=-1,vw=!1,ex=!1;function hE(){return vw}function FM(){ex=!0}function UM(){vw=!1,ex=!1}function $M(){vw=ex,ex=!1}function fE(){return dE}function mE(){dE=rh()}function yw(e){nv=rh(),e.actualStartTime<0&&(e.actualStartTime=rh())}function pE(e){nv=-1}function tx(e,i){if(nv>=0){var h=rh()-nv;e.actualDuration+=h,i&&(e.selfBaseDuration=h),nv=-1}}function Zc(e){if(Jb>=0){var i=rh()-Jb;Jb=-1;for(var h=e.return;h!==null;){switch(h.tag){case B:var p=h.stateNode;p.effectDuration+=i;return;case ze:var w=h.stateNode;w.effectDuration+=i;return}h=h.return}}}function bw(e){if(Qb>=0){var i=rh()-Qb;Qb=-1;for(var h=e.return;h!==null;){switch(h.tag){case B:var p=h.stateNode;p!==null&&(p.passiveEffectDuration+=i);return;case ze:var w=h.stateNode;w!==null&&(w.passiveEffectDuration+=i);return}h=h.return}}}function Kc(){Jb=rh()}function xw(){Qb=rh()}function _w(e){for(var i=e.child;i;)e.actualDuration+=i.actualDuration,i=i.sibling}function rc(e,i){if(e&&e.defaultProps){var h=Tn({},i),p=e.defaultProps;for(var w in p)h[w]===void 0&&(h[w]=p[w]);return h}return i}var ww={},Cw,Nw,Sw,Ew,Dw,gE,nx,Tw,Pw,jw,rv;{Cw=new Set,Nw=new Set,Sw=new Set,Ew=new Set,Tw=new Set,Dw=new Set,Pw=new Set,jw=new Set,rv=new Set;var vE=new Set;nx=function(e,i){if(!(e===null||typeof e=="function")){var h=i+"_"+e;vE.has(h)||(vE.add(h),b("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e))}},gE=function(e,i){if(i===void 0){var h=or(e)||"Component";Dw.has(h)||(Dw.add(h),b("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",h))}},Object.defineProperty(ww,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(ww)}function Aw(e,i,h,p){var w=e.memoizedState,D=h(p,w);{if(e.mode&ui){Ai(!0);try{D=h(p,w)}finally{Ai(!1)}}gE(i,D)}var I=D==null?w:Tn({},w,D);if(e.memoizedState=I,e.lanes===bt){var $=e.updateQueue;$.baseState=I}}var kw={isMounted:Qt,enqueueSetState:function(e,i,h){var p=Ir(e),w=Wa(),D=oh(p),I=Gu(w,D);I.payload=i,h!=null&&(nx(h,"setState"),I.callback=h);var $=Qd(p,I,D);$!==null&&(zs($,p,D,w),Ab($,p,D)),Lp(p,D)},enqueueReplaceState:function(e,i,h){var p=Ir(e),w=Wa(),D=oh(p),I=Gu(w,D);I.tag=RS,I.payload=i,h!=null&&(nx(h,"replaceState"),I.callback=h);var $=Qd(p,I,D);$!==null&&(zs($,p,D,w),Ab($,p,D)),Lp(p,D)},enqueueForceUpdate:function(e,i){var h=Ir(e),p=Wa(),w=oh(h),D=Gu(p,w);D.tag=Tb,i!=null&&(nx(i,"forceUpdate"),D.callback=i);var I=Qd(h,D,w);I!==null&&(zs(I,h,w,p),Ab(I,h,w)),Rp(h,w)}};function yE(e,i,h,p,w,D,I){var $=e.stateNode;if(typeof $.shouldComponentUpdate=="function"){var Z=$.shouldComponentUpdate(p,D,I);{if(e.mode&ui){Ai(!0);try{Z=$.shouldComponentUpdate(p,D,I)}finally{Ai(!1)}}Z===void 0&&b("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",or(i)||"Component")}return Z}return i.prototype&&i.prototype.isPureReactComponent?!Hd(h,p)||!Hd(w,D):!0}function qM(e,i,h){var p=e.stateNode;{var w=or(i)||"Component",D=p.render;D||(i.prototype&&typeof i.prototype.render=="function"?b("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",w):b("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",w)),p.getInitialState&&!p.getInitialState.isReactClassApproved&&!p.state&&b("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",w),p.getDefaultProps&&!p.getDefaultProps.isReactClassApproved&&b("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",w),p.propTypes&&b("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",w),p.contextType&&b("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",w),i.childContextTypes&&!rv.has(i)&&(e.mode&ui)===_n&&(rv.add(i),b(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),i.contextTypes&&!rv.has(i)&&(e.mode&ui)===_n&&(rv.add(i),b(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),p.contextTypes&&b("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",w),i.contextType&&i.contextTypes&&!Pw.has(i)&&(Pw.add(i),b("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",w)),typeof p.componentShouldUpdate=="function"&&b("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",w),i.prototype&&i.prototype.isPureReactComponent&&typeof p.shouldComponentUpdate<"u"&&b("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",or(i)||"A pure component"),typeof p.componentDidUnmount=="function"&&b("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",w),typeof p.componentDidReceiveProps=="function"&&b("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",w),typeof p.componentWillRecieveProps=="function"&&b("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",w),typeof p.UNSAFE_componentWillRecieveProps=="function"&&b("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",w);var I=p.props!==h;p.props!==void 0&&I&&b("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",w,w),p.defaultProps&&b("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",w,w),typeof p.getSnapshotBeforeUpdate=="function"&&typeof p.componentDidUpdate!="function"&&!Sw.has(i)&&(Sw.add(i),b("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",or(i))),typeof p.getDerivedStateFromProps=="function"&&b("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof p.getDerivedStateFromError=="function"&&b("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof i.getSnapshotBeforeUpdate=="function"&&b("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",w);var $=p.state;$&&(typeof $!="object"||nr($))&&b("%s.state: must be set to an object or null",w),typeof p.getChildContext=="function"&&typeof i.childContextTypes!="object"&&b("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",w)}}function bE(e,i){i.updater=kw,e.stateNode=i,Nu(i,e),i._reactInternalInstance=ww}function xE(e,i,h){var p=!1,w=Io,D=Io,I=i.contextType;if("contextType"in i){var $=I===null||I!==void 0&&I.$$typeof===te&&I._context===void 0;if(!$&&!jw.has(i)){jw.add(i);var Z="";I===void 0?Z=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof I!="object"?Z=" However, it is set to a "+typeof I+".":I.$$typeof===Ne?Z=" Did you accidentally pass the Context.Provider instead?":I._context!==void 0?Z=" Did you accidentally pass the Context.Consumer instead?":Z=" However, it is set to an object with keys {"+Object.keys(I).join(", ")+"}.",b("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",or(i)||"Component",Z)}}if(typeof I=="object"&&I!==null)D=Cs(I);else{w=Pm(e,i,!0);var re=i.contextTypes;p=re!=null,D=p?jm(e,w):Io}var de=new i(h,D);if(e.mode&ui){Ai(!0);try{de=new i(h,D)}finally{Ai(!1)}}var Ie=e.memoizedState=de.state!==null&&de.state!==void 0?de.state:null;bE(e,de);{if(typeof i.getDerivedStateFromProps=="function"&&Ie===null){var Le=or(i)||"Component";Nw.has(Le)||(Nw.add(Le),b("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Le,de.state===null?"null":"undefined",Le))}if(typeof i.getDerivedStateFromProps=="function"||typeof de.getSnapshotBeforeUpdate=="function"){var Je=null,et=null,at=null;if(typeof de.componentWillMount=="function"&&de.componentWillMount.__suppressDeprecationWarning!==!0?Je="componentWillMount":typeof de.UNSAFE_componentWillMount=="function"&&(Je="UNSAFE_componentWillMount"),typeof de.componentWillReceiveProps=="function"&&de.componentWillReceiveProps.__suppressDeprecationWarning!==!0?et="componentWillReceiveProps":typeof de.UNSAFE_componentWillReceiveProps=="function"&&(et="UNSAFE_componentWillReceiveProps"),typeof de.componentWillUpdate=="function"&&de.componentWillUpdate.__suppressDeprecationWarning!==!0?at="componentWillUpdate":typeof de.UNSAFE_componentWillUpdate=="function"&&(at="UNSAFE_componentWillUpdate"),Je!==null||et!==null||at!==null){var Zt=or(i)||"Component",Nn=typeof i.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Ew.has(Zt)||(Ew.add(Zt),b(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Zt,Nn,Je!==null?`
  `+Je:"",et!==null?`
  `+et:"",at!==null?`
  `+at:""))}}}return p&&cS(e,w,D),de}function HM(e,i){var h=i.state;typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),h!==i.state&&(b("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",jn(e)||"Component"),kw.enqueueReplaceState(i,i.state,null))}function _E(e,i,h,p){var w=i.state;if(typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(h,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(h,p),i.state!==w){{var D=jn(e)||"Component";Cw.has(D)||(Cw.add(D),b("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D))}kw.enqueueReplaceState(i,i.state,null)}}function Mw(e,i,h,p){qM(e,i,h);var w=e.stateNode;w.props=h,w.state=e.memoizedState,w.refs={},U_(e);var D=i.contextType;if(typeof D=="object"&&D!==null)w.context=Cs(D);else{var I=Pm(e,i,!0);w.context=jm(e,I)}{if(w.state===h){var $=or(i)||"Component";Tw.has($)||(Tw.add($),b("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",$))}e.mode&ui&&ec.recordLegacyContextWarning(e,w),ec.recordUnsafeLifecycleWarnings(e,w)}w.state=e.memoizedState;var Z=i.getDerivedStateFromProps;if(typeof Z=="function"&&(Aw(e,i,Z,h),w.state=e.memoizedState),typeof i.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(HM(e,w),kb(e,h,w,p),w.state=e.memoizedState),typeof w.componentDidMount=="function"){var re=hr;re|=le,(e.mode&tl)!==_n&&(re|=me),e.flags|=re}}function GM(e,i,h,p){var w=e.stateNode,D=e.memoizedProps;w.props=D;var I=w.context,$=i.contextType,Z=Io;if(typeof $=="object"&&$!==null)Z=Cs($);else{var re=Pm(e,i,!0);Z=jm(e,re)}var de=i.getDerivedStateFromProps,Ie=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function";!Ie&&(typeof w.UNSAFE_componentWillReceiveProps=="function"||typeof w.componentWillReceiveProps=="function")&&(D!==h||I!==Z)&&_E(e,w,h,Z),IS();var Le=e.memoizedState,Je=w.state=Le;if(kb(e,h,w,p),Je=e.memoizedState,D===h&&Le===Je&&!fb()&&!Mb()){if(typeof w.componentDidMount=="function"){var et=hr;et|=le,(e.mode&tl)!==_n&&(et|=me),e.flags|=et}return!1}typeof de=="function"&&(Aw(e,i,de,h),Je=e.memoizedState);var at=Mb()||yE(e,i,D,h,Le,Je,Z);if(at){if(!Ie&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"){var Zt=hr;Zt|=le,(e.mode&tl)!==_n&&(Zt|=me),e.flags|=Zt}}else{if(typeof w.componentDidMount=="function"){var Nn=hr;Nn|=le,(e.mode&tl)!==_n&&(Nn|=me),e.flags|=Nn}e.memoizedProps=h,e.memoizedState=Je}return w.props=h,w.state=Je,w.context=Z,at}function WM(e,i,h,p,w){var D=i.stateNode;LS(e,i);var I=i.memoizedProps,$=i.type===i.elementType?I:rc(i.type,I);D.props=$;var Z=i.pendingProps,re=D.context,de=h.contextType,Ie=Io;if(typeof de=="object"&&de!==null)Ie=Cs(de);else{var Le=Pm(i,h,!0);Ie=jm(i,Le)}var Je=h.getDerivedStateFromProps,et=typeof Je=="function"||typeof D.getSnapshotBeforeUpdate=="function";!et&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&(I!==Z||re!==Ie)&&_E(i,D,p,Ie),IS();var at=i.memoizedState,Zt=D.state=at;if(kb(i,p,D,w),Zt=i.memoizedState,I===Z&&at===Zt&&!fb()&&!Mb()&&!Sn)return typeof D.componentDidUpdate=="function"&&(I!==e.memoizedProps||at!==e.memoizedState)&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(I!==e.memoizedProps||at!==e.memoizedState)&&(i.flags|=u),!1;typeof Je=="function"&&(Aw(i,h,Je,p),Zt=i.memoizedState);var Nn=Mb()||yE(i,h,$,p,at,Zt,Ie)||Sn;return Nn?(!et&&(typeof D.UNSAFE_componentWillUpdate=="function"||typeof D.componentWillUpdate=="function")&&(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,Zt,Ie),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,Zt,Ie)),typeof D.componentDidUpdate=="function"&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=u)):(typeof D.componentDidUpdate=="function"&&(I!==e.memoizedProps||at!==e.memoizedState)&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(I!==e.memoizedProps||at!==e.memoizedState)&&(i.flags|=u),i.memoizedProps=p,i.memoizedState=Zt),D.props=p,D.state=Zt,D.context=Ie,Nn}function hf(e,i){return{value:e,source:i,stack:eo(i),digest:null}}function Rw(e,i,h){return{value:e,source:null,stack:h??null,digest:i??null}}function ZM(e,i){return!0}function Lw(e,i){try{var h=ZM(e,i);if(h===!1)return;var p=i.value,w=i.source,D=i.stack,I=D!==null?D:"";if(p!=null&&p._suppressLogging){if(e.tag===k)return;console.error(p)}var $=w?jn(w):null,Z=$?"The above error occurred in the <"+$+"> component:":"The above error occurred in one of your React components:",re;if(e.tag===B)re=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var de=jn(e)||"Anonymous";re="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+de+".")}var Ie=Z+`
`+I+`

`+(""+re);console.error(Ie)}catch(Le){setTimeout(function(){throw Le})}}var KM=typeof WeakMap=="function"?WeakMap:Map;function wE(e,i,h){var p=Gu(gi,h);p.tag=B_,p.payload={element:null};var w=i.value;return p.callback=function(){FL(w),Lw(e,i)},p}function Iw(e,i,h){var p=Gu(gi,h);p.tag=B_;var w=e.type.getDerivedStateFromError;if(typeof w=="function"){var D=i.value;p.payload=function(){return w(D)},p.callback=function(){MD(e),Lw(e,i)}}var I=e.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(p.callback=function(){MD(e),Lw(e,i),typeof w!="function"&&zL(this);var Z=i.value,re=i.stack;this.componentDidCatch(Z,{componentStack:re!==null?re:""}),typeof w!="function"&&(Ea(e.lanes,En)||b("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",jn(e)||"Unknown"))}),p}function CE(e,i,h){var p=e.pingCache,w;if(p===null?(p=e.pingCache=new KM,w=new Set,p.set(i,w)):(w=p.get(i),w===void 0&&(w=new Set,p.set(i,w))),!w.has(h)){w.add(h);var D=UL.bind(null,e,i,h);cs&&xv(e,h),i.then(D,D)}}function YM(e,i,h,p){var w=e.updateQueue;if(w===null){var D=new Set;D.add(h),e.updateQueue=D}else w.add(h)}function XM(e,i){var h=e.tag;if((e.mode&cr)===_n&&(h===A||h===Ce||h===tt)){var p=e.alternate;p?(e.updateQueue=p.updateQueue,e.memoizedState=p.memoizedState,e.lanes=p.lanes):(e.updateQueue=null,e.memoizedState=null)}}function NE(e){var i=e;do{if(i.tag===Re&&AM(i))return i;i=i.return}while(i!==null);return null}function SE(e,i,h,p,w){if((e.mode&cr)===_n){if(e===i)e.flags|=z;else{if(e.flags|=on,h.flags|=U,h.flags&=-52805,h.tag===k){var D=h.alternate;if(D===null)h.tag=Rt;else{var I=Gu(gi,En);I.tag=Tb,Qd(h,I,En)}}h.lanes=Qn(h.lanes,En)}return e}return e.flags|=z,e.lanes=w,e}function JM(e,i,h,p,w){if(h.flags|=R,cs&&xv(e,w),p!==null&&typeof p=="object"&&typeof p.then=="function"){var D=p;XM(h),aa()&&h.mode&cr&&gS();var I=NE(i);if(I!==null){I.flags&=~x,SE(I,i,h,e,w),I.mode&cr&&CE(e,D,w),YM(I,e,D);return}else{if(!fy(w)){CE(e,D,w),p1();return}var $=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");p=$}}else if(aa()&&h.mode&cr){gS();var Z=NE(i);if(Z!==null){(Z.flags&z)===bn&&(Z.flags|=x),SE(Z,i,h,e,w),T_(hf(p,h));return}}p=hf(p,h),AL(p);var re=i;do{switch(re.tag){case B:{var de=p;re.flags|=z;var Ie=Mu(w);re.lanes=Qn(re.lanes,Ie);var Le=wE(re,de,Ie);$_(re,Le);return}case k:var Je=p,et=re.type,at=re.stateNode;if((re.flags&on)===bn&&(typeof et.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&!ND(at))){re.flags|=z;var Zt=Mu(w);re.lanes=Qn(re.lanes,Zt);var Nn=Iw(re,Je,Zt);$_(re,Nn);return}break}re=re.return}while(re!==null)}function QM(){return null}var iv=a.ReactCurrentOwner,ic=!1,Vw,sv,Ow,zw,Bw,ff,Fw,rx,av;Vw={},sv={},Ow={},zw={},Bw={},ff=!1,Fw={},rx={},av={};function Ha(e,i,h,p){e===null?i.child=TS(i,null,h,p):i.child=Rm(i,e.child,h,p)}function eR(e,i,h,p){i.child=Rm(i,e.child,null,p),i.child=Rm(i,null,h,p)}function EE(e,i,h,p,w){if(i.type!==i.elementType){var D=h.propTypes;D&&Jl(D,p,"prop",or(h))}var I=h.render,$=i.ref,Z,re;Im(i,w),Zs(i);{if(iv.current=i,$s(!0),Z=Um(e,i,I,p,$,w),re=$m(),i.mode&ui){Ai(!0);try{Z=Um(e,i,I,p,$,w),re=$m()}finally{Ai(!1)}}$s(!1)}return Na(),e!==null&&!ic?(US(e,i,w),Wu(e,i,w)):(aa()&&re&&w_(i),i.flags|=_a,Ha(e,i,Z,w),i.child)}function DE(e,i,h,p,w){if(e===null){var D=h.type;if(sI(D)&&h.compare===null&&h.defaultProps===void 0){var I=D;return I=Xm(D),i.tag=tt,i.type=I,qw(i,D),TE(e,i,I,p,w)}{var $=D.propTypes;if($&&Jl($,p,"prop",or(D)),h.defaultProps!==void 0){var Z=or(D)||"Unknown";av[Z]||(b("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",Z),av[Z]=!0)}}var re=E1(h.type,null,p,i,i.mode,w);return re.ref=i.ref,re.return=i,i.child=re,re}{var de=h.type,Ie=de.propTypes;Ie&&Jl(Ie,p,"prop",or(de))}var Le=e.child,Je=Yw(e,w);if(!Je){var et=Le.memoizedProps,at=h.compare;if(at=at!==null?at:Hd,at(et,p)&&e.ref===i.ref)return Wu(e,i,w)}i.flags|=_a;var Zt=yf(Le,p);return Zt.ref=i.ref,Zt.return=i,i.child=Zt,Zt}function TE(e,i,h,p,w){if(i.type!==i.elementType){var D=i.elementType;if(D.$$typeof===pt){var I=D,$=I._payload,Z=I._init;try{D=Z($)}catch{D=null}var re=D&&D.propTypes;re&&Jl(re,p,"prop",or(D))}}if(e!==null){var de=e.memoizedProps;if(Hd(de,p)&&e.ref===i.ref&&i.type===e.type)if(ic=!1,i.pendingProps=p=de,Yw(e,w))(e.flags&U)!==bn&&(ic=!0);else return i.lanes=e.lanes,Wu(e,i,w)}return Uw(e,i,h,p,w)}function PE(e,i,h){var p=i.pendingProps,w=p.children,D=e!==null?e.memoizedState:null;if(p.mode==="hidden"||Wt)if((i.mode&cr)===_n){var I={baseLanes:bt,cachePool:null,transitions:null};i.memoizedState=I,gx(i,h)}else if(Ea(h,za)){var Ie={baseLanes:bt,cachePool:null,transitions:null};i.memoizedState=Ie;var Le=D!==null?D.baseLanes:h;gx(i,Le)}else{var $=null,Z;if(D!==null){var re=D.baseLanes;Z=Qn(re,h)}else Z=h;i.lanes=i.childLanes=za;var de={baseLanes:Z,cachePool:$,transitions:null};return i.memoizedState=de,i.updateQueue=null,gx(i,Z),null}else{var Je;D!==null?(Je=Qn(D.baseLanes,h),i.memoizedState=null):Je=h,gx(i,Je)}return Ha(e,i,w,h),i.child}function tR(e,i,h){var p=i.pendingProps;return Ha(e,i,p,h),i.child}function nR(e,i,h){var p=i.pendingProps.children;return Ha(e,i,p,h),i.child}function rR(e,i,h){{i.flags|=hr;{var p=i.stateNode;p.effectDuration=0,p.passiveEffectDuration=0}}var w=i.pendingProps,D=w.children;return Ha(e,i,D,h),i.child}function jE(e,i){var h=i.ref;(e===null&&h!==null||e!==null&&e.ref!==h)&&(i.flags|=r,i.flags|=X)}function Uw(e,i,h,p,w){if(i.type!==i.elementType){var D=h.propTypes;D&&Jl(D,p,"prop",or(h))}var I;{var $=Pm(i,h,!0);I=jm(i,$)}var Z,re;Im(i,w),Zs(i);{if(iv.current=i,$s(!0),Z=Um(e,i,h,p,I,w),re=$m(),i.mode&ui){Ai(!0);try{Z=Um(e,i,h,p,I,w),re=$m()}finally{Ai(!1)}}$s(!1)}return Na(),e!==null&&!ic?(US(e,i,w),Wu(e,i,w)):(aa()&&re&&w_(i),i.flags|=_a,Ha(e,i,Z,w),i.child)}function AE(e,i,h,p,w){{switch(xI(i)){case!1:{var D=i.stateNode,I=i.type,$=new I(i.memoizedProps,D.context),Z=$.state;D.updater.enqueueSetState(D,Z,null);break}case!0:{i.flags|=on,i.flags|=z;var re=new Error("Simulated error coming from DevTools"),de=Mu(w);i.lanes=Qn(i.lanes,de);var Ie=Iw(i,hf(re,i),de);$_(i,Ie);break}}if(i.type!==i.elementType){var Le=h.propTypes;Le&&Jl(Le,p,"prop",or(h))}}var Je;qc(h)?(Je=!0,pb(i)):Je=!1,Im(i,w);var et=i.stateNode,at;et===null?(sx(e,i),xE(i,h,p),Mw(i,h,p,w),at=!0):e===null?at=GM(i,h,p,w):at=WM(e,i,h,p,w);var Zt=$w(e,i,h,at,Je,w);{var Nn=i.stateNode;at&&Nn.props!==p&&(ff||b("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",jn(i)||"a component"),ff=!0)}return Zt}function $w(e,i,h,p,w,D){jE(e,i);var I=(i.flags&on)!==bn;if(!p&&!I)return w&&hS(i,h,!1),Wu(e,i,D);var $=i.stateNode;iv.current=i;var Z;if(I&&typeof h.getDerivedStateFromError!="function")Z=null,pE();else{Zs(i);{if($s(!0),Z=$.render(),i.mode&ui){Ai(!0);try{$.render()}finally{Ai(!1)}}$s(!1)}Na()}return i.flags|=_a,e!==null&&I?eR(e,i,Z,D):Ha(e,i,Z,D),i.memoizedState=$.state,w&&hS(i,h,!0),i.child}function kE(e){var i=e.stateNode;i.pendingContext?uS(e,i.pendingContext,i.pendingContext!==i.context):i.context&&uS(e,i.context,!1),q_(e,i.containerInfo)}function iR(e,i,h){if(kE(i),e===null)throw new Error("Should have a current fiber. This is a bug in React.");var p=i.pendingProps,w=i.memoizedState,D=w.element;LS(e,i),kb(i,p,null,h);var I=i.memoizedState;i.stateNode;var $=I.element;if(w.isDehydrated){var Z={element:$,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},re=i.updateQueue;if(re.baseState=Z,i.memoizedState=Z,i.flags&x){var de=hf(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),i);return ME(e,i,$,h,de)}else if($!==D){var Ie=hf(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),i);return ME(e,i,$,h,Ie)}else{oM(i);var Le=TS(i,null,$,h);i.child=Le;for(var Je=Le;Je;)Je.flags=Je.flags&~_i|y,Je=Je.sibling}}else{if(Mm(),$===D)return Wu(e,i,h);Ha(e,i,$,h)}return i.child}function ME(e,i,h,p,w){return Mm(),T_(w),i.flags|=x,Ha(e,i,h,p),i.child}function sR(e,i,h){zS(i),e===null&&D_(i);var p=i.type,w=i.pendingProps,D=e!==null?e.memoizedProps:null,I=w.children,$=l_(p,w);return $?I=null:D!==null&&l_(p,D)&&(i.flags|=Il),jE(e,i),Ha(e,i,I,h),i.child}function aR(e,i){return e===null&&D_(i),null}function oR(e,i,h,p){sx(e,i);var w=i.pendingProps,D=h,I=D._payload,$=D._init,Z=$(I);i.type=Z;var re=i.tag=aI(Z),de=rc(Z,w),Ie;switch(re){case A:return qw(i,Z),i.type=Z=Xm(Z),Ie=Uw(null,i,Z,de,p),Ie;case k:return i.type=Z=x1(Z),Ie=AE(null,i,Z,de,p),Ie;case Ce:return i.type=Z=_1(Z),Ie=EE(null,i,Z,de,p),Ie;case Ze:{if(i.type!==i.elementType){var Le=Z.propTypes;Le&&Jl(Le,de,"prop",or(Z))}return Ie=DE(null,i,Z,rc(Z.type,de),p),Ie}}var Je="";throw Z!==null&&typeof Z=="object"&&Z.$$typeof===pt&&(Je=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+Z+". "+("Lazy element type must resolve to a class or function."+Je))}function lR(e,i,h,p,w){sx(e,i),i.tag=k;var D;return qc(h)?(D=!0,pb(i)):D=!1,Im(i,w),xE(i,h,p),Mw(i,h,p,w),$w(null,i,h,!0,D,w)}function cR(e,i,h,p){sx(e,i);var w=i.pendingProps,D;{var I=Pm(i,h,!1);D=jm(i,I)}Im(i,p);var $,Z;Zs(i);{if(h.prototype&&typeof h.prototype.render=="function"){var re=or(h)||"Unknown";Vw[re]||(b("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",re,re),Vw[re]=!0)}i.mode&ui&&ec.recordLegacyContextWarning(i,null),$s(!0),iv.current=i,$=Um(null,i,h,w,D,p),Z=$m(),$s(!1)}if(Na(),i.flags|=_a,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){var de=or(h)||"Unknown";sv[de]||(b("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",de,de,de),sv[de]=!0)}if(typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){{var Ie=or(h)||"Unknown";sv[Ie]||(b("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Ie,Ie,Ie),sv[Ie]=!0)}i.tag=k,i.memoizedState=null,i.updateQueue=null;var Le=!1;return qc(h)?(Le=!0,pb(i)):Le=!1,i.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,U_(i),bE(i,$),Mw(i,h,w,p),$w(null,i,h,!0,Le,p)}else{if(i.tag=A,i.mode&ui){Ai(!0);try{$=Um(null,i,h,w,D,p),Z=$m()}finally{Ai(!1)}}return aa()&&Z&&w_(i),Ha(null,i,$,p),qw(i,h),i.child}}function qw(e,i){{if(i&&i.childContextTypes&&b("%s(...): childContextTypes cannot be defined on a function component.",i.displayName||i.name||"Component"),e.ref!==null){var h="",p=bo();p&&(h+=`

Check the render method of \``+p+"`.");var w=p||"",D=e._debugSource;D&&(w=D.fileName+":"+D.lineNumber),Bw[w]||(Bw[w]=!0,b("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",h))}if(i.defaultProps!==void 0){var I=or(i)||"Unknown";av[I]||(b("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",I),av[I]=!0)}if(typeof i.getDerivedStateFromProps=="function"){var $=or(i)||"Unknown";zw[$]||(b("%s: Function components do not support getDerivedStateFromProps.",$),zw[$]=!0)}if(typeof i.contextType=="object"&&i.contextType!==null){var Z=or(i)||"Unknown";Ow[Z]||(b("%s: Function components do not support contextType.",Z),Ow[Z]=!0)}}}var Hw={dehydrated:null,treeContext:null,retryLane:Dr};function Gw(e){return{baseLanes:e,cachePool:QM(),transitions:null}}function uR(e,i){var h=null;return{baseLanes:Qn(e.baseLanes,i),cachePool:h,transitions:e.transitions}}function dR(e,i,h,p){if(i!==null){var w=i.memoizedState;if(w===null)return!1}return W_(e,Kg)}function hR(e,i){return om(e.childLanes,i)}function RE(e,i,h){var p=i.pendingProps;_I(i)&&(i.flags|=on);var w=tc.current,D=!1,I=(i.flags&on)!==bn;if(I||dR(w,e)?(D=!0,i.flags&=~on):(e===null||e.memoizedState!==null)&&(w=jM(w,FS)),w=Om(w),th(i,w),e===null){D_(i);var $=i.memoizedState;if($!==null){var Z=$.dehydrated;if(Z!==null)return vR(i,Z)}var re=p.children,de=p.fallback;if(D){var Ie=fR(i,re,de,h),Le=i.child;return Le.memoizedState=Gw(h),i.memoizedState=Hw,Ie}else return Ww(i,re)}else{var Je=e.memoizedState;if(Je!==null){var et=Je.dehydrated;if(et!==null)return yR(e,i,I,p,et,Je,h)}if(D){var at=p.fallback,Zt=p.children,Nn=pR(e,i,Zt,at,h),vn=i.child,wr=e.child.memoizedState;return vn.memoizedState=wr===null?Gw(h):uR(wr,h),vn.childLanes=hR(e,h),i.memoizedState=Hw,Nn}else{var fr=p.children,He=mR(e,i,fr,h);return i.memoizedState=null,He}}}function Ww(e,i,h){var p=e.mode,w={mode:"visible",children:i},D=Zw(w,p);return D.return=e,e.child=D,D}function fR(e,i,h,p){var w=e.mode,D=e.child,I={mode:"hidden",children:i},$,Z;return(w&cr)===_n&&D!==null?($=D,$.childLanes=bt,$.pendingProps=I,e.mode&Vr&&($.actualDuration=0,$.actualStartTime=-1,$.selfBaseDuration=0,$.treeBaseDuration=0),Z=ch(h,w,p,null)):($=Zw(I,w),Z=ch(h,w,p,null)),$.return=e,Z.return=e,$.sibling=Z,e.child=$,Z}function Zw(e,i,h){return LD(e,i,bt,null)}function LE(e,i){return yf(e,i)}function mR(e,i,h,p){var w=e.child,D=w.sibling,I=LE(w,{mode:"visible",children:h});if((i.mode&cr)===_n&&(I.lanes=p),I.return=i,I.sibling=null,D!==null){var $=i.deletions;$===null?(i.deletions=[D],i.flags|=wa):$.push(D)}return i.child=I,I}function pR(e,i,h,p,w){var D=i.mode,I=e.child,$=I.sibling,Z={mode:"hidden",children:h},re;if((D&cr)===_n&&i.child!==I){var de=i.child;re=de,re.childLanes=bt,re.pendingProps=Z,i.mode&Vr&&(re.actualDuration=0,re.actualStartTime=-1,re.selfBaseDuration=I.selfBaseDuration,re.treeBaseDuration=I.treeBaseDuration),i.deletions=null}else re=LE(I,Z),re.subtreeFlags=I.subtreeFlags&$e;var Ie;return $!==null?Ie=yf($,p):(Ie=ch(p,D,w,null),Ie.flags|=_i),Ie.return=i,re.return=i,re.sibling=Ie,i.child=re,Ie}function ix(e,i,h,p){p!==null&&T_(p),Rm(i,e.child,null,h);var w=i.pendingProps,D=w.children,I=Ww(i,D);return I.flags|=_i,i.memoizedState=null,I}function gR(e,i,h,p,w){var D=i.mode,I={mode:"visible",children:h},$=Zw(I,D),Z=ch(p,D,w,null);return Z.flags|=_i,$.return=i,Z.return=i,$.sibling=Z,i.child=$,(i.mode&cr)!==_n&&Rm(i,e.child,null,w),Z}function vR(e,i,h){return(e.mode&cr)===_n?(b("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),e.lanes=En):h_(i)?e.lanes=Ao:e.lanes=za,null}function yR(e,i,h,p,w,D,I){if(h)if(i.flags&x){i.flags&=~x;var He=Rw(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return ix(e,i,I,He)}else{if(i.memoizedState!==null)return i.child=e.child,i.flags|=on,null;var ot=p.children,Ge=p.fallback,St=gR(e,i,ot,Ge,I),sn=i.child;return sn.memoizedState=Gw(I),i.memoizedState=Hw,St}else{if(sM(),(i.mode&cr)===_n)return ix(e,i,I,null);if(h_(w)){var $,Z,re;{var de=w2(w);$=de.digest,Z=de.message,re=de.stack}var Ie;Z?Ie=new Error(Z):Ie=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Le=Rw(Ie,$,re);return ix(e,i,I,Le)}var Je=Ea(I,e.childLanes);if(ic||Je){var et=px();if(et!==null){var at=C0(et,I);if(at!==Dr&&at!==D.retryLane){D.retryLane=at;var Zt=gi;co(e,at),zs(et,e,at,Zt)}}p1();var Nn=Rw(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return ix(e,i,I,Nn)}else if(iS(w)){i.flags|=on,i.child=e.child;var vn=$L.bind(null,e);return C2(w,vn),null}else{lM(i,w,D.treeContext);var wr=p.children,fr=Ww(i,wr);return fr.flags|=y,fr}}}function IE(e,i,h){e.lanes=Qn(e.lanes,i);var p=e.alternate;p!==null&&(p.lanes=Qn(p.lanes,i)),O_(e.return,i,h)}function bR(e,i,h){for(var p=i;p!==null;){if(p.tag===Re){var w=p.memoizedState;w!==null&&IE(p,h,e)}else if(p.tag===fn)IE(p,h,e);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function xR(e){for(var i=e,h=null;i!==null;){var p=i.alternate;p!==null&&Ib(p)===null&&(h=i),i=i.sibling}return h}function _R(e){if(e!==void 0&&e!=="forwards"&&e!=="backwards"&&e!=="together"&&!Fw[e])if(Fw[e]=!0,typeof e=="string")switch(e.toLowerCase()){case"together":case"forwards":case"backwards":{b('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break}case"forward":case"backward":{b('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break}default:b('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e);break}else b('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}function wR(e,i){e!==void 0&&!rx[e]&&(e!=="collapsed"&&e!=="hidden"?(rx[e]=!0,b('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):i!=="forwards"&&i!=="backwards"&&(rx[e]=!0,b('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}function VE(e,i){{var h=nr(e),p=!h&&typeof Hr(e)=="function";if(h||p){var w=h?"array":"iterable";return b("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",w,i,w),!1}}return!0}function CR(e,i){if((i==="forwards"||i==="backwards")&&e!==void 0&&e!==null&&e!==!1)if(nr(e)){for(var h=0;h<e.length;h++)if(!VE(e[h],h))return}else{var p=Hr(e);if(typeof p=="function"){var w=p.call(e);if(w)for(var D=w.next(),I=0;!D.done;D=w.next()){if(!VE(D.value,I))return;I++}}else b('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',i)}}function Kw(e,i,h,p,w){var D=e.memoizedState;D===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:w}:(D.isBackwards=i,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=h,D.tailMode=w)}function OE(e,i,h){var p=i.pendingProps,w=p.revealOrder,D=p.tail,I=p.children;_R(w),wR(D,w),CR(I,w),Ha(e,i,I,h);var $=tc.current,Z=W_($,Kg);if(Z)$=Z_($,Kg),i.flags|=on;else{var re=e!==null&&(e.flags&on)!==bn;re&&bR(i,i.child,h),$=Om($)}if(th(i,$),(i.mode&cr)===_n)i.memoizedState=null;else switch(w){case"forwards":{var de=xR(i.child),Ie;de===null?(Ie=i.child,i.child=null):(Ie=de.sibling,de.sibling=null),Kw(i,!1,Ie,de,D);break}case"backwards":{var Le=null,Je=i.child;for(i.child=null;Je!==null;){var et=Je.alternate;if(et!==null&&Ib(et)===null){i.child=Je;break}var at=Je.sibling;Je.sibling=Le,Le=Je,Je=at}Kw(i,!0,Le,null,D);break}case"together":{Kw(i,!1,null,null,void 0);break}default:i.memoizedState=null}return i.child}function NR(e,i,h){q_(i,i.stateNode.containerInfo);var p=i.pendingProps;return e===null?i.child=Rm(i,null,p,h):Ha(e,i,p,h),i.child}var zE=!1;function SR(e,i,h){var p=i.type,w=p._context,D=i.pendingProps,I=i.memoizedProps,$=D.value;{"value"in D||zE||(zE=!0,b("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var Z=i.type.propTypes;Z&&Jl(Z,D,"prop","Context.Provider")}if(AS(i,w,$),I!==null){var re=I.value;if(Ta(re,$)){if(I.children===D.children&&!fb())return Wu(e,i,h)}else _M(i,w,h)}var de=D.children;return Ha(e,i,de,h),i.child}var BE=!1;function ER(e,i,h){var p=i.type;p._context===void 0?p!==p.Consumer&&(BE||(BE=!0,b("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):p=p._context;var w=i.pendingProps,D=w.children;typeof D!="function"&&b("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Im(i,h);var I=Cs(p);Zs(i);var $;return iv.current=i,$s(!0),$=D(I),$s(!1),Na(),i.flags|=_a,Ha(e,i,$,h),i.child}function ov(){ic=!0}function sx(e,i){(i.mode&cr)===_n&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=_i)}function Wu(e,i,h){return e!==null&&(i.dependencies=e.dependencies),pE(),bv(i.lanes),Ea(h,i.childLanes)?(bM(e,i),i.child):null}function DR(e,i,h){{var p=i.return;if(p===null)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,i.alternate=null,h.index=i.index,h.sibling=i.sibling,h.return=i.return,h.ref=i.ref,i===p.child)p.child=h;else{var w=p.child;if(w===null)throw new Error("Expected parent to have a child.");for(;w.sibling!==i;)if(w=w.sibling,w===null)throw new Error("Expected to find the previous sibling.");w.sibling=h}var D=p.deletions;return D===null?(p.deletions=[e],p.flags|=wa):D.push(e),h.flags|=_i,h}}function Yw(e,i){var h=e.lanes;return!!Ea(h,i)}function TR(e,i,h){switch(i.tag){case B:kE(i),i.stateNode,Mm();break;case ie:zS(i);break;case k:{var p=i.type;qc(p)&&pb(i);break}case W:q_(i,i.stateNode.containerInfo);break;case De:{var w=i.memoizedProps.value,D=i.type._context;AS(i,D,w);break}case ze:{var I=Ea(h,i.childLanes);I&&(i.flags|=hr);{var $=i.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}}break;case Re:{var Z=i.memoizedState;if(Z!==null){if(Z.dehydrated!==null)return th(i,Om(tc.current)),i.flags|=on,null;var re=i.child,de=re.childLanes;if(Ea(h,de))return RE(e,i,h);th(i,Om(tc.current));var Ie=Wu(e,i,h);return Ie!==null?Ie.sibling:null}else th(i,Om(tc.current));break}case fn:{var Le=(e.flags&on)!==bn,Je=Ea(h,i.childLanes);if(Le){if(Je)return OE(e,i,h);i.flags|=on}var et=i.memoizedState;if(et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),th(i,tc.current),Je)break;return null}case ct:case ht:return i.lanes=bt,PE(e,i,h)}return Wu(e,i,h)}function FE(e,i,h){if(i._debugNeedsRemount&&e!==null)return DR(e,i,E1(i.type,i.key,i.pendingProps,i._debugOwner||null,i.mode,i.lanes));if(e!==null){var p=e.memoizedProps,w=i.pendingProps;if(p!==w||fb()||i.type!==e.type)ic=!0;else{var D=Yw(e,h);if(!D&&(i.flags&on)===bn)return ic=!1,TR(e,i,h);(e.flags&U)!==bn?ic=!0:ic=!1}}else if(ic=!1,aa()&&Q2(i)){var I=i.index,$=eM();pS(i,$,I)}switch(i.lanes=bt,i.tag){case O:return cR(e,i,i.type,h);case ut:{var Z=i.elementType;return oR(e,i,Z,h)}case A:{var re=i.type,de=i.pendingProps,Ie=i.elementType===re?de:rc(re,de);return Uw(e,i,re,Ie,h)}case k:{var Le=i.type,Je=i.pendingProps,et=i.elementType===Le?Je:rc(Le,Je);return AE(e,i,Le,et,h)}case B:return iR(e,i,h);case ie:return sR(e,i,h);case pe:return aR(e,i);case Re:return RE(e,i,h);case W:return NR(e,i,h);case Ce:{var at=i.type,Zt=i.pendingProps,Nn=i.elementType===at?Zt:rc(at,Zt);return EE(e,i,at,Nn,h)}case Oe:return tR(e,i,h);case Se:return nR(e,i,h);case ze:return rR(e,i,h);case De:return SR(e,i,h);case Pe:return ER(e,i,h);case Ze:{var vn=i.type,wr=i.pendingProps,fr=rc(vn,wr);if(i.type!==i.elementType){var He=vn.propTypes;He&&Jl(He,fr,"prop",or(vn))}return fr=rc(vn.type,fr),DE(e,i,vn,fr,h)}case tt:return TE(e,i,i.type,i.pendingProps,h);case Rt:{var ot=i.type,Ge=i.pendingProps,St=i.elementType===ot?Ge:rc(ot,Ge);return lR(e,i,ot,St,h)}case fn:return OE(e,i,h);case lt:break;case ct:return PE(e,i,h)}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function qm(e){e.flags|=hr}function UE(e){e.flags|=r,e.flags|=X}var $E,Xw,qE,HE;$E=function(e,i,h,p){for(var w=i.child;w!==null;){if(w.tag===ie||w.tag===pe)Yk(e,w.stateNode);else if(w.tag!==W){if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===i)return;for(;w.sibling===null;){if(w.return===null||w.return===i)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Xw=function(e,i){},qE=function(e,i,h,p,w){var D=e.memoizedProps;if(D!==p){var I=i.stateNode,$=H_(),Z=Jk(I,h,D,p,w,$);i.updateQueue=Z,Z&&qm(i)}},HE=function(e,i,h,p){h!==p&&qm(i)};function lv(e,i){if(!aa())switch(e.tailMode){case"hidden":{for(var h=e.tail,p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?e.tail=null:p.sibling=null;break}case"collapsed":{for(var w=e.tail,D=null;w!==null;)w.alternate!==null&&(D=w),w=w.sibling;D===null?!i&&e.tail!==null?e.tail.sibling=null:e.tail=null:D.sibling=null;break}}}function la(e){var i=e.alternate!==null&&e.alternate.child===e.child,h=bt,p=bn;if(i){if((e.mode&Vr)!==_n){for(var Z=e.selfBaseDuration,re=e.child;re!==null;)h=Qn(h,Qn(re.lanes,re.childLanes)),p|=re.subtreeFlags&$e,p|=re.flags&$e,Z+=re.treeBaseDuration,re=re.sibling;e.treeBaseDuration=Z}else for(var de=e.child;de!==null;)h=Qn(h,Qn(de.lanes,de.childLanes)),p|=de.subtreeFlags&$e,p|=de.flags&$e,de.return=e,de=de.sibling;e.subtreeFlags|=p}else{if((e.mode&Vr)!==_n){for(var w=e.actualDuration,D=e.selfBaseDuration,I=e.child;I!==null;)h=Qn(h,Qn(I.lanes,I.childLanes)),p|=I.subtreeFlags,p|=I.flags,w+=I.actualDuration,D+=I.treeBaseDuration,I=I.sibling;e.actualDuration=w,e.treeBaseDuration=D}else for(var $=e.child;$!==null;)h=Qn(h,Qn($.lanes,$.childLanes)),p|=$.subtreeFlags,p|=$.flags,$.return=e,$=$.sibling;e.subtreeFlags|=p}return e.childLanes=h,i}function PR(e,i,h){if(fM()&&(i.mode&cr)!==_n&&(i.flags&on)===bn)return wS(i),Mm(),i.flags|=x|R|z,!1;var p=xb(i);if(h!==null&&h.dehydrated!==null)if(e===null){if(!p)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(dM(i),la(i),(i.mode&Vr)!==_n){var w=h!==null;if(w){var D=i.child;D!==null&&(i.treeBaseDuration-=D.treeBaseDuration)}}return!1}else{if(Mm(),(i.flags&on)===bn&&(i.memoizedState=null),i.flags|=hr,la(i),(i.mode&Vr)!==_n){var I=h!==null;if(I){var $=i.child;$!==null&&(i.treeBaseDuration-=$.treeBaseDuration)}}return!1}else return CS(),!0}function GE(e,i,h){var p=i.pendingProps;switch(C_(i),i.tag){case O:case ut:case tt:case A:case Ce:case Oe:case Se:case ze:case Pe:case Ze:return la(i),null;case k:{var w=i.type;return qc(w)&&mb(i),la(i),null}case B:{var D=i.stateNode;if(Vm(i),b_(i),Y_(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),e===null||e.child===null){var I=xb(i);if(I)qm(i);else if(e!==null){var $=e.memoizedState;(!$.isDehydrated||(i.flags&x)!==bn)&&(i.flags|=u,CS())}}return Xw(e,i),la(i),null}case ie:{G_(i);var Z=OS(),re=i.type;if(e!==null&&i.stateNode!=null)qE(e,i,re,p,Z),e.ref!==i.ref&&UE(i);else{if(!p){if(i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return la(i),null}var de=H_(),Ie=xb(i);if(Ie)cM(i,Z,de)&&qm(i);else{var Le=Kk(re,p,Z,de,i);$E(Le,i,!1,!1),i.stateNode=Le,Xk(Le,re,p,Z)&&qm(i)}i.ref!==null&&UE(i)}return la(i),null}case pe:{var Je=p;if(e&&i.stateNode!=null){var et=e.memoizedProps;HE(e,i,et,Je)}else{if(typeof Je!="string"&&i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var at=OS(),Zt=H_(),Nn=xb(i);Nn?uM(i)&&qm(i):i.stateNode=Qk(Je,at,Zt,i)}return la(i),null}case Re:{zm(i);var vn=i.memoizedState;if(e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){var wr=PR(e,i,vn);if(!wr)return i.flags&z?i:null}if((i.flags&on)!==bn)return i.lanes=h,(i.mode&Vr)!==_n&&_w(i),i;var fr=vn!==null,He=e!==null&&e.memoizedState!==null;if(fr!==He&&fr){var ot=i.child;if(ot.flags|=_,(i.mode&cr)!==_n){var Ge=e===null&&(i.memoizedProps.unstable_avoidThisFallback!==!0||!0);Ge||W_(tc.current,FS)?jL():p1()}}var St=i.updateQueue;if(St!==null&&(i.flags|=hr),la(i),(i.mode&Vr)!==_n&&fr){var sn=i.child;sn!==null&&(i.treeBaseDuration-=sn.treeBaseDuration)}return null}case W:return Vm(i),Xw(e,i),e===null&&G2(i.stateNode.containerInfo),la(i),null;case De:var Jt=i.type._context;return V_(Jt,i),la(i),null;case Rt:{var Rn=i.type;return qc(Rn)&&mb(i),la(i),null}case fn:{zm(i);var qn=i.memoizedState;if(qn===null)return la(i),null;var ri=(i.flags&on)!==bn,Mr=qn.rendering;if(Mr===null)if(ri)lv(qn,!1);else{var ds=kL()&&(e===null||(e.flags&on)===bn);if(!ds)for(var Rr=i.child;Rr!==null;){var rs=Ib(Rr);if(rs!==null){ri=!0,i.flags|=on,lv(qn,!1);var Ma=rs.updateQueue;return Ma!==null&&(i.updateQueue=Ma,i.flags|=hr),i.subtreeFlags=bn,xM(i,h),th(i,Z_(tc.current,Kg)),i.child}Rr=Rr.sibling}qn.tail!==null&&gr()>fD()&&(i.flags|=on,ri=!0,lv(qn,!1),i.lanes=uy)}else{if(!ri){var fa=Ib(Mr);if(fa!==null){i.flags|=on,ri=!0;var Oo=fa.updateQueue;if(Oo!==null&&(i.updateQueue=Oo,i.flags|=hr),lv(qn,!0),qn.tail===null&&qn.tailMode==="hidden"&&!Mr.alternate&&!aa())return la(i),null}else gr()*2-qn.renderingStartTime>fD()&&h!==za&&(i.flags|=on,ri=!0,lv(qn,!1),i.lanes=uy)}if(qn.isBackwards)Mr.sibling=i.child,i.child=Mr;else{var Za=qn.last;Za!==null?Za.sibling=Mr:i.child=Mr,qn.last=Mr}}if(qn.tail!==null){var Ka=qn.tail;qn.rendering=Ka,qn.tail=Ka.sibling,qn.renderingStartTime=gr(),Ka.sibling=null;var Ra=tc.current;return ri?Ra=Z_(Ra,Kg):Ra=Om(Ra),th(i,Ra),Ka}return la(i),null}case lt:break;case ct:case ht:{m1(i);var Ju=i.memoizedState,Jm=Ju!==null;if(e!==null){var Nv=e.memoizedState,Jc=Nv!==null;Jc!==Jm&&!Wt&&(i.flags|=_)}return!Jm||(i.mode&cr)===_n?la(i):Ea(Xc,za)&&(la(i),i.subtreeFlags&(_i|hr)&&(i.flags|=_)),null}case $t:return null;case An:return null}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function jR(e,i,h){switch(C_(i),i.tag){case k:{var p=i.type;qc(p)&&mb(i);var w=i.flags;return w&z?(i.flags=w&~z|on,(i.mode&Vr)!==_n&&_w(i),i):null}case B:{i.stateNode,Vm(i),b_(i),Y_();var D=i.flags;return(D&z)!==bn&&(D&on)===bn?(i.flags=D&~z|on,i):null}case ie:return G_(i),null;case Re:{zm(i);var I=i.memoizedState;if(I!==null&&I.dehydrated!==null){if(i.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Mm()}var $=i.flags;return $&z?(i.flags=$&~z|on,(i.mode&Vr)!==_n&&_w(i),i):null}case fn:return zm(i),null;case W:return Vm(i),null;case De:var Z=i.type._context;return V_(Z,i),null;case ct:case ht:return m1(i),null;case $t:return null;default:return null}}function WE(e,i,h){switch(C_(i),i.tag){case k:{var p=i.type.childContextTypes;p!=null&&mb(i);break}case B:{i.stateNode,Vm(i),b_(i),Y_();break}case ie:{G_(i);break}case W:Vm(i);break;case Re:zm(i);break;case fn:zm(i);break;case De:var w=i.type._context;V_(w,i);break;case ct:case ht:m1(i);break}}var ZE=null;ZE=new Set;var ax=!1,ca=!1,AR=typeof WeakSet=="function"?WeakSet:Set,hn=null,Hm=null,Gm=null;function kR(e){Cu(null,function(){throw e}),ci()}var MR=function(e,i){if(i.props=e.memoizedProps,i.state=e.memoizedState,e.mode&Vr)try{Kc(),i.componentWillUnmount()}finally{Zc(e)}else i.componentWillUnmount()};function KE(e,i){try{ih(Ms,e)}catch(h){bi(e,i,h)}}function Jw(e,i,h){try{MR(e,h)}catch(p){bi(e,i,p)}}function RR(e,i,h){try{h.componentDidMount()}catch(p){bi(e,i,p)}}function YE(e,i){try{JE(e)}catch(h){bi(e,i,h)}}function Wm(e,i){var h=e.ref;if(h!==null)if(typeof h=="function"){var p;try{if(Be&&Mt&&e.mode&Vr)try{Kc(),p=h(null)}finally{Zc(e)}else p=h(null)}catch(w){bi(e,i,w)}typeof p=="function"&&b("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",jn(e))}else h.current=null}function ox(e,i,h){try{h()}catch(p){bi(e,i,p)}}var XE=!1;function LR(e,i){Wk(e.containerInfo),hn=i,IR();var h=XE;return XE=!1,h}function IR(){for(;hn!==null;){var e=hn,i=e.child;(e.subtreeFlags&je)!==bn&&i!==null?(i.return=e,hn=i):VR()}}function VR(){for(;hn!==null;){var e=hn;oi(e);try{OR(e)}catch(h){bi(e,e.return,h)}Pi();var i=e.sibling;if(i!==null){i.return=e.return,hn=i;return}hn=e.return}}function OR(e){var i=e.alternate,h=e.flags;if((h&u)!==bn){switch(oi(e),e.tag){case A:case Ce:case tt:break;case k:{if(i!==null){var p=i.memoizedProps,w=i.memoizedState,D=e.stateNode;e.type===e.elementType&&!ff&&(D.props!==e.memoizedProps&&b("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(e)||"instance"),D.state!==e.memoizedState&&b("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(e)||"instance"));var I=D.getSnapshotBeforeUpdate(e.elementType===e.type?p:rc(e.type,p),w);{var $=ZE;I===void 0&&!$.has(e.type)&&($.add(e.type),b("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",jn(e)))}D.__reactInternalSnapshotBeforeUpdate=I}break}case B:{{var Z=e.stateNode;y2(Z.containerInfo)}break}case ie:case pe:case W:case Rt:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Pi()}}function sc(e,i,h){var p=i.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var D=w.next,I=D;do{if((I.tag&e)===e){var $=I.destroy;I.destroy=void 0,$!==void 0&&((e&oa)!==uo?ao(i):(e&Ms)!==uo&&Pp(i),(e&Hc)!==uo&&_v(!0),ox(i,h,$),(e&Hc)!==uo&&_v(!1),(e&oa)!==uo?Ih():(e&Ms)!==uo&&ki())}I=I.next}while(I!==D)}}function ih(e,i){var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var w=p.next,D=w;do{if((D.tag&e)===e){(e&oa)!==uo?so(i):(e&Ms)!==uo&&jo(i);var I=D.create;(e&Hc)!==uo&&_v(!0),D.destroy=I(),(e&Hc)!==uo&&_v(!1),(e&oa)!==uo?Sa():(e&Ms)!==uo&&y0();{var $=D.destroy;if($!==void 0&&typeof $!="function"){var Z=void 0;(D.tag&Ms)!==bn?Z="useLayoutEffect":(D.tag&Hc)!==bn?Z="useInsertionEffect":Z="useEffect";var re=void 0;$===null?re=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof $.then=="function"?re=`

It looks like you wrote `+Z+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+Z+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:re=" You returned: "+$,b("%s must not return anything besides a function, which is used for clean-up.%s",Z,re)}}}D=D.next}while(D!==w)}}function zR(e,i){if((i.flags&hr)!==bn)switch(i.tag){case ze:{var h=i.stateNode.passiveEffectDuration,p=i.memoizedProps,w=p.id,D=p.onPostCommit,I=fE(),$=i.alternate===null?"mount":"update";hE()&&($="nested-update"),typeof D=="function"&&D(w,$,h,I);var Z=i.return;e:for(;Z!==null;){switch(Z.tag){case B:var re=Z.stateNode;re.passiveEffectDuration+=h;break e;case ze:var de=Z.stateNode;de.passiveEffectDuration+=h;break e}Z=Z.return}break}}}function BR(e,i,h,p){if((h.flags&ye)!==bn)switch(h.tag){case A:case Ce:case tt:{if(!ca)if(h.mode&Vr)try{Kc(),ih(Ms|ks,h)}finally{Zc(h)}else ih(Ms|ks,h);break}case k:{var w=h.stateNode;if(h.flags&hr&&!ca)if(i===null)if(h.type===h.elementType&&!ff&&(w.props!==h.memoizedProps&&b("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),w.state!==h.memoizedState&&b("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),h.mode&Vr)try{Kc(),w.componentDidMount()}finally{Zc(h)}else w.componentDidMount();else{var D=h.elementType===h.type?i.memoizedProps:rc(h.type,i.memoizedProps),I=i.memoizedState;if(h.type===h.elementType&&!ff&&(w.props!==h.memoizedProps&&b("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),w.state!==h.memoizedState&&b("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),h.mode&Vr)try{Kc(),w.componentDidUpdate(D,I,w.__reactInternalSnapshotBeforeUpdate)}finally{Zc(h)}else w.componentDidUpdate(D,I,w.__reactInternalSnapshotBeforeUpdate)}var $=h.updateQueue;$!==null&&(h.type===h.elementType&&!ff&&(w.props!==h.memoizedProps&&b("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),w.state!==h.memoizedState&&b("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),VS(h,$,w));break}case B:{var Z=h.updateQueue;if(Z!==null){var re=null;if(h.child!==null)switch(h.child.tag){case ie:re=h.child.stateNode;break;case k:re=h.child.stateNode;break}VS(h,Z,re)}break}case ie:{var de=h.stateNode;if(i===null&&h.flags&hr){var Ie=h.type,Le=h.memoizedProps;i2(de,Ie,Le)}break}case pe:break;case W:break;case ze:{{var Je=h.memoizedProps,et=Je.onCommit,at=Je.onRender,Zt=h.stateNode.effectDuration,Nn=fE(),vn=i===null?"mount":"update";hE()&&(vn="nested-update"),typeof at=="function"&&at(h.memoizedProps.id,vn,h.actualDuration,h.treeBaseDuration,h.actualStartTime,Nn);{typeof et=="function"&&et(h.memoizedProps.id,vn,Zt,Nn),VL(h);var wr=h.return;e:for(;wr!==null;){switch(wr.tag){case B:var fr=wr.stateNode;fr.effectDuration+=Zt;break e;case ze:var He=wr.stateNode;He.effectDuration+=Zt;break e}wr=wr.return}}}break}case Re:{ZR(e,h);break}case fn:case Rt:case lt:case ct:case ht:case An:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ca||h.flags&r&&JE(h)}function FR(e){switch(e.tag){case A:case Ce:case tt:{if(e.mode&Vr)try{Kc(),KE(e,e.return)}finally{Zc(e)}else KE(e,e.return);break}case k:{var i=e.stateNode;typeof i.componentDidMount=="function"&&RR(e,e.return,i),YE(e,e.return);break}case ie:{YE(e,e.return);break}}}function UR(e,i){for(var h=null,p=e;;){if(p.tag===ie){if(h===null){h=p;try{var w=p.stateNode;i?m2(w):g2(p.stateNode,p.memoizedProps)}catch(I){bi(e,e.return,I)}}}else if(p.tag===pe){if(h===null)try{var D=p.stateNode;i?p2(D):v2(D,p.memoizedProps)}catch(I){bi(e,e.return,I)}}else if(!((p.tag===ct||p.tag===ht)&&p.memoizedState!==null&&p!==e)){if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}function JE(e){var i=e.ref;if(i!==null){var h=e.stateNode,p;switch(e.tag){case ie:p=h;break;default:p=h}if(typeof i=="function"){var w;if(e.mode&Vr)try{Kc(),w=i(p)}finally{Zc(e)}else w=i(p);typeof w=="function"&&b("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",jn(e))}else i.hasOwnProperty("current")||b("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",jn(e)),i.current=p}}function $R(e){var i=e.alternate;i!==null&&(i.return=null),e.return=null}function QE(e){var i=e.alternate;i!==null&&(e.alternate=null,QE(i));{if(e.child=null,e.deletions=null,e.sibling=null,e.tag===ie){var h=e.stateNode;h!==null&&K2(h)}e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}}function qR(e){for(var i=e.return;i!==null;){if(eD(i))return i;i=i.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function eD(e){return e.tag===ie||e.tag===B||e.tag===W}function tD(e){var i=e;e:for(;;){for(;i.sibling===null;){if(i.return===null||eD(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==ie&&i.tag!==pe&&i.tag!==zt;){if(i.flags&_i||i.child===null||i.tag===W)continue e;i.child.return=i,i=i.child}if(!(i.flags&_i))return i.stateNode}}function HR(e){var i=qR(e);switch(i.tag){case ie:{var h=i.stateNode;i.flags&Il&&(rS(h),i.flags&=~Il);var p=tD(e);e1(e,p,h);break}case B:case W:{var w=i.stateNode.containerInfo,D=tD(e);Qw(e,D,w);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function Qw(e,i,h){var p=e.tag,w=p===ie||p===pe;if(w){var D=e.stateNode;i?u2(h,D,i):l2(h,D)}else if(p!==W){var I=e.child;if(I!==null){Qw(I,i,h);for(var $=I.sibling;$!==null;)Qw($,i,h),$=$.sibling}}}function e1(e,i,h){var p=e.tag,w=p===ie||p===pe;if(w){var D=e.stateNode;i?c2(h,D,i):o2(h,D)}else if(p!==W){var I=e.child;if(I!==null){e1(I,i,h);for(var $=I.sibling;$!==null;)e1($,i,h),$=$.sibling}}}var ua=null,ac=!1;function GR(e,i,h){{var p=i;e:for(;p!==null;){switch(p.tag){case ie:{ua=p.stateNode,ac=!1;break e}case B:{ua=p.stateNode.containerInfo,ac=!0;break e}case W:{ua=p.stateNode.containerInfo,ac=!0;break e}}p=p.return}if(ua===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");nD(e,i,h),ua=null,ac=!1}$R(h)}function sh(e,i,h){for(var p=h.child;p!==null;)nD(e,i,p),p=p.sibling}function nD(e,i,h){switch(Ol(h),h.tag){case ie:ca||Wm(h,i);case pe:{{var p=ua,w=ac;ua=null,sh(e,i,h),ua=p,ac=w,ua!==null&&(ac?h2(ua,h.stateNode):d2(ua,h.stateNode))}return}case zt:{ua!==null&&(ac?f2(ua,h.stateNode):d_(ua,h.stateNode));return}case W:{{var D=ua,I=ac;ua=h.stateNode.containerInfo,ac=!0,sh(e,i,h),ua=D,ac=I}return}case A:case Ce:case Ze:case tt:{if(!ca){var $=h.updateQueue;if($!==null){var Z=$.lastEffect;if(Z!==null){var re=Z.next,de=re;do{var Ie=de,Le=Ie.destroy,Je=Ie.tag;Le!==void 0&&((Je&Hc)!==uo?ox(h,i,Le):(Je&Ms)!==uo&&(Pp(h),h.mode&Vr?(Kc(),ox(h,i,Le),Zc(h)):ox(h,i,Le),ki())),de=de.next}while(de!==re)}}}sh(e,i,h);return}case k:{if(!ca){Wm(h,i);var et=h.stateNode;typeof et.componentWillUnmount=="function"&&Jw(h,i,et)}sh(e,i,h);return}case lt:{sh(e,i,h);return}case ct:{if(h.mode&cr){var at=ca;ca=at||h.memoizedState!==null,sh(e,i,h),ca=at}else sh(e,i,h);break}default:{sh(e,i,h);return}}}function WR(e){e.memoizedState}function ZR(e,i){var h=i.memoizedState;if(h===null){var p=i.alternate;if(p!==null){var w=p.memoizedState;if(w!==null){var D=w.dehydrated;D!==null&&k2(D)}}}}function rD(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var h=e.stateNode;h===null&&(h=e.stateNode=new AR),i.forEach(function(p){var w=qL.bind(null,e,p);if(!h.has(p)){if(h.add(p),cs)if(Hm!==null&&Gm!==null)xv(Gm,Hm);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");p.then(w,w)}})}}function KR(e,i,h){Hm=h,Gm=e,oi(i),iD(i,e),oi(i),Hm=null,Gm=null}function oc(e,i,h){var p=i.deletions;if(p!==null)for(var w=0;w<p.length;w++){var D=p[w];try{GR(e,i,D)}catch(Z){bi(D,i,Z)}}var I=ou();if(i.subtreeFlags&Ue)for(var $=i.child;$!==null;)oi($),iD($,e),$=$.sibling;oi(I)}function iD(e,i,h){var p=e.alternate,w=e.flags;switch(e.tag){case A:case Ce:case Ze:case tt:{if(oc(i,e),Yc(e),w&hr){try{sc(Hc|ks,e,e.return),ih(Hc|ks,e)}catch(Rn){bi(e,e.return,Rn)}if(e.mode&Vr){try{Kc(),sc(Ms|ks,e,e.return)}catch(Rn){bi(e,e.return,Rn)}Zc(e)}else try{sc(Ms|ks,e,e.return)}catch(Rn){bi(e,e.return,Rn)}}return}case k:{oc(i,e),Yc(e),w&r&&p!==null&&Wm(p,p.return);return}case ie:{oc(i,e),Yc(e),w&r&&p!==null&&Wm(p,p.return);{if(e.flags&Il){var D=e.stateNode;try{rS(D)}catch(Rn){bi(e,e.return,Rn)}}if(w&hr){var I=e.stateNode;if(I!=null){var $=e.memoizedProps,Z=p!==null?p.memoizedProps:$,re=e.type,de=e.updateQueue;if(e.updateQueue=null,de!==null)try{s2(I,de,re,Z,$,e)}catch(Rn){bi(e,e.return,Rn)}}}}return}case pe:{if(oc(i,e),Yc(e),w&hr){if(e.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var Ie=e.stateNode,Le=e.memoizedProps,Je=p!==null?p.memoizedProps:Le;try{a2(Ie,Je,Le)}catch(Rn){bi(e,e.return,Rn)}}return}case B:{if(oc(i,e),Yc(e),w&hr&&p!==null){var et=p.memoizedState;if(et.isDehydrated)try{A2(i.containerInfo)}catch(Rn){bi(e,e.return,Rn)}}return}case W:{oc(i,e),Yc(e);return}case Re:{oc(i,e),Yc(e);var at=e.child;if(at.flags&_){var Zt=at.stateNode,Nn=at.memoizedState,vn=Nn!==null;if(Zt.isHidden=vn,vn){var wr=at.alternate!==null&&at.alternate.memoizedState!==null;wr||PL()}}if(w&hr){try{WR(e)}catch(Rn){bi(e,e.return,Rn)}rD(e)}return}case ct:{var fr=p!==null&&p.memoizedState!==null;if(e.mode&cr){var He=ca;ca=He||fr,oc(i,e),ca=He}else oc(i,e);if(Yc(e),w&_){var ot=e.stateNode,Ge=e.memoizedState,St=Ge!==null,sn=e;if(ot.isHidden=St,St&&!fr&&(sn.mode&cr)!==_n){hn=sn;for(var Jt=sn.child;Jt!==null;)hn=Jt,XR(Jt),Jt=Jt.sibling}UR(sn,St)}return}case fn:{oc(i,e),Yc(e),w&hr&&rD(e);return}case lt:return;default:{oc(i,e),Yc(e);return}}}function Yc(e){var i=e.flags;if(i&_i){try{HR(e)}catch(h){bi(e,e.return,h)}e.flags&=~_i}i&y&&(e.flags&=~y)}function YR(e,i,h){Hm=h,Gm=i,hn=e,sD(e,i,h),Hm=null,Gm=null}function sD(e,i,h){for(var p=(e.mode&cr)!==_n;hn!==null;){var w=hn,D=w.child;if(w.tag===ct&&p){var I=w.memoizedState!==null,$=I||ax;if($){t1(e,i,h);continue}else{var Z=w.alternate,re=Z!==null&&Z.memoizedState!==null,de=re||ca,Ie=ax,Le=ca;ax=$,ca=de,ca&&!Le&&(hn=w,JR(w));for(var Je=D;Je!==null;)hn=Je,sD(Je,i,h),Je=Je.sibling;hn=w,ax=Ie,ca=Le,t1(e,i,h);continue}}(w.subtreeFlags&ye)!==bn&&D!==null?(D.return=w,hn=D):t1(e,i,h)}}function t1(e,i,h){for(;hn!==null;){var p=hn;if((p.flags&ye)!==bn){var w=p.alternate;oi(p);try{BR(i,w,p,h)}catch(I){bi(p,p.return,I)}Pi()}if(p===e){hn=null;return}var D=p.sibling;if(D!==null){D.return=p.return,hn=D;return}hn=p.return}}function XR(e){for(;hn!==null;){var i=hn,h=i.child;switch(i.tag){case A:case Ce:case Ze:case tt:{if(i.mode&Vr)try{Kc(),sc(Ms,i,i.return)}finally{Zc(i)}else sc(Ms,i,i.return);break}case k:{Wm(i,i.return);var p=i.stateNode;typeof p.componentWillUnmount=="function"&&Jw(i,i.return,p);break}case ie:{Wm(i,i.return);break}case ct:{var w=i.memoizedState!==null;if(w){aD(e);continue}break}}h!==null?(h.return=i,hn=h):aD(e)}}function aD(e){for(;hn!==null;){var i=hn;if(i===e){hn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,hn=h;return}hn=i.return}}function JR(e){for(;hn!==null;){var i=hn,h=i.child;if(i.tag===ct){var p=i.memoizedState!==null;if(p){oD(e);continue}}h!==null?(h.return=i,hn=h):oD(e)}}function oD(e){for(;hn!==null;){var i=hn;oi(i);try{FR(i)}catch(p){bi(i,i.return,p)}if(Pi(),i===e){hn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,hn=h;return}hn=i.return}}function QR(e,i,h,p){hn=i,eL(i,e,h,p)}function eL(e,i,h,p){for(;hn!==null;){var w=hn,D=w.child;(w.subtreeFlags&ke)!==bn&&D!==null?(D.return=w,hn=D):tL(e,i,h,p)}}function tL(e,i,h,p){for(;hn!==null;){var w=hn;if((w.flags&m)!==bn){oi(w);try{nL(i,w,h,p)}catch(I){bi(w,w.return,I)}Pi()}if(w===e){hn=null;return}var D=w.sibling;if(D!==null){D.return=w.return,hn=D;return}hn=w.return}}function nL(e,i,h,p){switch(i.tag){case A:case Ce:case tt:{if(i.mode&Vr){xw();try{ih(oa|ks,i)}finally{bw(i)}}else ih(oa|ks,i);break}}}function rL(e){hn=e,iL()}function iL(){for(;hn!==null;){var e=hn,i=e.child;if((hn.flags&wa)!==bn){var h=e.deletions;if(h!==null){for(var p=0;p<h.length;p++){var w=h[p];hn=w,oL(w,e)}{var D=e.alternate;if(D!==null){var I=D.child;if(I!==null){D.child=null;do{var $=I.sibling;I.sibling=null,I=$}while(I!==null)}}}hn=e}}(e.subtreeFlags&ke)!==bn&&i!==null?(i.return=e,hn=i):sL()}}function sL(){for(;hn!==null;){var e=hn;(e.flags&m)!==bn&&(oi(e),aL(e),Pi());var i=e.sibling;if(i!==null){i.return=e.return,hn=i;return}hn=e.return}}function aL(e){switch(e.tag){case A:case Ce:case tt:{e.mode&Vr?(xw(),sc(oa|ks,e,e.return),bw(e)):sc(oa|ks,e,e.return);break}}}function oL(e,i){for(;hn!==null;){var h=hn;oi(h),cL(h,i),Pi();var p=h.child;p!==null?(p.return=h,hn=p):lL(e)}}function lL(e){for(;hn!==null;){var i=hn,h=i.sibling,p=i.return;if(QE(i),i===e){hn=null;return}if(h!==null){h.return=p,hn=h;return}hn=p}}function cL(e,i){switch(e.tag){case A:case Ce:case tt:{e.mode&Vr?(xw(),sc(oa,e,i),bw(e)):sc(oa,e,i);break}}}function uL(e){switch(e.tag){case A:case Ce:case tt:{try{ih(Ms|ks,e)}catch(h){bi(e,e.return,h)}break}case k:{var i=e.stateNode;try{i.componentDidMount()}catch(h){bi(e,e.return,h)}break}}}function dL(e){switch(e.tag){case A:case Ce:case tt:{try{ih(oa|ks,e)}catch(i){bi(e,e.return,i)}break}}}function hL(e){switch(e.tag){case A:case Ce:case tt:{try{sc(Ms|ks,e,e.return)}catch(h){bi(e,e.return,h)}break}case k:{var i=e.stateNode;typeof i.componentWillUnmount=="function"&&Jw(e,e.return,i);break}}}function fL(e){switch(e.tag){case A:case Ce:case tt:try{sc(oa|ks,e,e.return)}catch(i){bi(e,e.return,i)}}}if(typeof Symbol=="function"&&Symbol.for){var cv=Symbol.for;cv("selector.component"),cv("selector.has_pseudo_class"),cv("selector.role"),cv("selector.test_id"),cv("selector.text")}var mL=[];function pL(){mL.forEach(function(e){return e()})}var gL=a.ReactCurrentActQueue;function vL(e){{var i=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,h=typeof jest<"u";return h&&i!==!1}}function lD(){{var e=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!e&&gL.current!==null&&b("The current testing environment is not configured to support act(...)"),e}}var yL=Math.ceil,n1=a.ReactCurrentDispatcher,r1=a.ReactCurrentOwner,da=a.ReactCurrentBatchConfig,lc=a.ReactCurrentActQueue,Is=0,cD=1,ha=2,fl=4,Zu=0,uv=1,mf=2,lx=3,dv=4,uD=5,i1=6,_r=Is,Ga=null,Wi=null,Vs=bt,Xc=bt,s1=Kd(bt),Os=Zu,hv=null,cx=bt,fv=bt,ux=bt,mv=null,ho=null,a1=0,dD=500,hD=1/0,bL=500,Ku=null;function pv(){hD=gr()+bL}function fD(){return hD}var dx=!1,o1=null,Zm=null,pf=!1,ah=null,gv=bt,l1=[],c1=null,xL=50,vv=0,u1=null,d1=!1,hx=!1,_L=50,Km=0,fx=null,yv=gi,mx=bt,mD=!1;function px(){return Ga}function Wa(){return(_r&(ha|fl))!==Is?gr():(yv!==gi||(yv=gr()),yv)}function oh(e){var i=e.mode;if((i&cr)===_n)return En;if((_r&ha)!==Is&&Vs!==bt)return Mu(Vs);var h=gM()!==pM;if(h){if(da.transition!==null){var p=da.transition;p._updatedFibers||(p._updatedFibers=new Set),p._updatedFibers.add(e)}return mx===Dr&&(mx=gy()),mx}var w=Fa();if(w!==Dr)return w;var D=e2();return D}function wL(e){var i=e.mode;return(i&cr)===_n?En:Hp()}function zs(e,i,h,p){GL(),mD&&b("useInsertionEffect must not schedule updates."),d1&&(hx=!0),$h(e,h,p),(_r&ha)!==bt&&e===Ga?KL(i):(cs&&Wp(e,i,h),YL(i),e===Ga&&((_r&ha)===Is&&(fv=Qn(fv,h)),Os===dv&&lh(e,Vs)),fo(e,p),h===En&&_r===Is&&(i.mode&cr)===_n&&!lc.isBatchingLegacy&&(pv(),mS()))}function CL(e,i,h){var p=e.current;p.lanes=i,$h(e,i,h),fo(e,h)}function NL(e){return(_r&ha)!==Is}function fo(e,i){var h=e.callbackNode;rm(e,i);var p=ju(e,e===Ga?Vs:bt);if(p===bt){h!==null&&jD(h),e.callbackNode=null,e.callbackPriority=Dr;return}var w=ku(p),D=e.callbackPriority;if(D===w&&!(lc.current!==null&&h!==y1)){h==null&&D!==En&&b("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}h!=null&&jD(h);var I;if(w===En)e.tag===Yd?(lc.isBatchingLegacy!==null&&(lc.didScheduleLegacyUpdate=!0),J2(vD.bind(null,e))):fS(vD.bind(null,e)),lc.current!==null?lc.current.push(Xd):n2(function(){(_r&(ha|fl))===Is&&Xd()}),I=null;else{var $;switch(Ad(p)){case Ba:$=mi;break;case $l:$=Ts;break;case ql:$=Nr;break;case jd:$=Ca;break;default:$=Nr;break}I=b1($,pD.bind(null,e))}e.callbackPriority=w,e.callbackNode=I}function pD(e,i){if(UM(),yv=gi,mx=bt,(_r&(ha|fl))!==Is)throw new Error("Should not already be working.");var h=e.callbackNode,p=Xu();if(p&&e.callbackNode!==h)return null;var w=ju(e,e===Ga?Vs:bt);if(w===bt)return null;var D=!am(e,w)&&!py(e,w)&&!i,I=D?RL(e,w):vx(e,w);if(I!==Zu){if(I===mf){var $=im(e);$!==bt&&(w=$,I=h1(e,$))}if(I===uv){var Z=hv;throw gf(e,bt),lh(e,w),fo(e,gr()),Z}if(I===i1)lh(e,w);else{var re=!am(e,w),de=e.current.alternate;if(re&&!EL(de)){if(I=vx(e,w),I===mf){var Ie=im(e);Ie!==bt&&(w=Ie,I=h1(e,Ie))}if(I===uv){var Le=hv;throw gf(e,bt),lh(e,w),fo(e,gr()),Le}}e.finishedWork=de,e.finishedLanes=w,SL(e,I,w)}}return fo(e,gr()),e.callbackNode===h?pD.bind(null,e):null}function h1(e,i){var h=mv;if(qh(e)){var p=gf(e,i);p.flags|=x,H2(e.containerInfo)}var w=vx(e,i);if(w!==mf){var D=ho;ho=h,D!==null&&gD(D)}return w}function gD(e){ho===null?ho=e:ho.push.apply(ho,e)}function SL(e,i,h){switch(i){case Zu:case uv:throw new Error("Root did not complete. This is a bug in React.");case mf:{vf(e,ho,Ku);break}case lx:{if(lh(e,h),sm(h)&&!AD()){var p=a1+dD-gr();if(p>10){var w=ju(e,bt);if(w!==bt)break;var D=e.suspendedLanes;if(!Ru(D,h)){Wa(),Lu(e,D);break}e.timeoutHandle=c_(vf.bind(null,e,ho,Ku),p);break}}vf(e,ho,Ku);break}case dv:{if(lh(e,h),my(h))break;if(!AD()){var I=hy(e,h),$=I,Z=gr()-$,re=HL(Z)-Z;if(re>10){e.timeoutHandle=c_(vf.bind(null,e,ho,Ku),re);break}}vf(e,ho,Ku);break}case uD:{vf(e,ho,Ku);break}default:throw new Error("Unknown root exit status.")}}function EL(e){for(var i=e;;){if(i.flags&P){var h=i.updateQueue;if(h!==null){var p=h.stores;if(p!==null)for(var w=0;w<p.length;w++){var D=p[w],I=D.getSnapshot,$=D.value;try{if(!Ta(I(),$))return!1}catch{return!1}}}}var Z=i.child;if(i.subtreeFlags&P&&Z!==null){Z.return=i,i=Z;continue}if(i===e)return!0;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}return!0}function lh(e,i){i=om(i,ux),i=om(i,fv),yy(e,i)}function vD(e){if($M(),(_r&(ha|fl))!==Is)throw new Error("Should not already be working.");Xu();var i=ju(e,bt);if(!Ea(i,En))return fo(e,gr()),null;var h=vx(e,i);if(e.tag!==Yd&&h===mf){var p=im(e);p!==bt&&(i=p,h=h1(e,p))}if(h===uv){var w=hv;throw gf(e,bt),lh(e,i),fo(e,gr()),w}if(h===i1)throw new Error("Root did not complete. This is a bug in React.");var D=e.current.alternate;return e.finishedWork=D,e.finishedLanes=i,vf(e,ho,Ku),fo(e,gr()),null}function DL(e,i){i!==bt&&(Gp(e,Qn(i,En)),fo(e,gr()),(_r&(ha|fl))===Is&&(pv(),Xd()))}function f1(e,i){var h=_r;_r|=cD;try{return e(i)}finally{_r=h,_r===Is&&!lc.isBatchingLegacy&&(pv(),mS())}}function TL(e,i,h,p,w){var D=Fa(),I=da.transition;try{return da.transition=null,ys(Ba),e(i,h,p,w)}finally{ys(D),da.transition=I,_r===Is&&pv()}}function Yu(e){ah!==null&&ah.tag===Yd&&(_r&(ha|fl))===Is&&Xu();var i=_r;_r|=cD;var h=da.transition,p=Fa();try{return da.transition=null,ys(Ba),e?e():void 0}finally{ys(p),da.transition=h,_r=i,(_r&(ha|fl))===Is&&Xd()}}function yD(){return(_r&(ha|fl))!==Is}function gx(e,i){Aa(s1,Xc,e),Xc=Qn(Xc,i)}function m1(e){Xc=s1.current,ja(s1,e)}function gf(e,i){e.finishedWork=null,e.finishedLanes=bt;var h=e.timeoutHandle;if(h!==u_&&(e.timeoutHandle=u_,t2(h)),Wi!==null)for(var p=Wi.return;p!==null;){var w=p.alternate;WE(w,p),p=p.return}Ga=e;var D=yf(e.current,null);return Wi=D,Vs=Xc=i,Os=Zu,hv=null,cx=bt,fv=bt,ux=bt,mv=null,ho=null,CM(),ec.discardPendingWarnings(),D}function bD(e,i){do{var h=Wi;try{if(Eb(),$S(),Pi(),r1.current=null,h===null||h.return===null){Os=uv,hv=i,Wi=null;return}if(Be&&h.mode&Vr&&tx(h,!0),Nt)if(Na(),i!==null&&typeof i=="object"&&typeof i.then=="function"){var p=i;ly(h,p,Vs)}else jp(h,i,Vs);JM(e,h.return,h,i,Vs),CD(h)}catch(w){i=w,Wi===h&&h!==null?(h=h.return,Wi=h):h=Wi;continue}return}while(!0)}function xD(){var e=n1.current;return n1.current=Yb,e===null?Yb:e}function _D(e){n1.current=e}function PL(){a1=gr()}function bv(e){cx=Qn(e,cx)}function jL(){Os===Zu&&(Os=lx)}function p1(){(Os===Zu||Os===lx||Os===mf)&&(Os=dv),Ga!==null&&(Au(cx)||Au(fv))&&lh(Ga,Vs)}function AL(e){Os!==dv&&(Os=mf),mv===null?mv=[e]:mv.push(e)}function kL(){return Os===Zu}function vx(e,i){var h=_r;_r|=ha;var p=xD();if(Ga!==e||Vs!==i){if(cs){var w=e.memoizedUpdaters;w.size>0&&(xv(e,Vs),w.clear()),Zp(e,i)}Ku=by(),gf(e,i)}kp(i);do try{ML();break}catch(D){bD(e,D)}while(!0);if(Eb(),_r=h,_D(p),Wi!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Mp(),Ga=null,Vs=bt,Os}function ML(){for(;Wi!==null;)wD(Wi)}function RL(e,i){var h=_r;_r|=ha;var p=xD();if(Ga!==e||Vs!==i){if(cs){var w=e.memoizedUpdaters;w.size>0&&(xv(e,Vs),w.clear()),Zp(e,i)}Ku=by(),pv(),gf(e,i)}kp(i);do try{LL();break}catch(D){bD(e,D)}while(!0);return Eb(),_D(p),_r=h,Wi!==null?(b0(),Zu):(Mp(),Ga=null,Vs=bt,Os)}function LL(){for(;Wi!==null&&!wi();)wD(Wi)}function wD(e){var i=e.alternate;oi(e);var h;(e.mode&Vr)!==_n?(yw(e),h=g1(i,e,Xc),tx(e,!0)):h=g1(i,e,Xc),Pi(),e.memoizedProps=e.pendingProps,h===null?CD(e):Wi=h,r1.current=null}function CD(e){var i=e;do{var h=i.alternate,p=i.return;if((i.flags&R)===bn){oi(i);var w=void 0;if((i.mode&Vr)===_n?w=GE(h,i,Xc):(yw(i),w=GE(h,i,Xc),tx(i,!1)),Pi(),w!==null){Wi=w;return}}else{var D=jR(h,i);if(D!==null){D.flags&=j,Wi=D;return}if((i.mode&Vr)!==_n){tx(i,!1);for(var I=i.actualDuration,$=i.child;$!==null;)I+=$.actualDuration,$=$.sibling;i.actualDuration=I}if(p!==null)p.flags|=R,p.subtreeFlags=bn,p.deletions=null;else{Os=i1,Wi=null;return}}var Z=i.sibling;if(Z!==null){Wi=Z;return}i=p,Wi=i}while(i!==null);Os===Zu&&(Os=uD)}function vf(e,i,h){var p=Fa(),w=da.transition;try{da.transition=null,ys(Ba),IL(e,i,h,p)}finally{da.transition=w,ys(p)}return null}function IL(e,i,h,p){do Xu();while(ah!==null);if(WL(),(_r&(ha|fl))!==Is)throw new Error("Should not already be working.");var w=e.finishedWork,D=e.finishedLanes;if(Tp(D),w===null)return Nd(),null;if(D===bt&&b("root.finishedLanes should not be empty during a commit. This is a bug in React."),e.finishedWork=null,e.finishedLanes=bt,w===e.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackPriority=Dr;var I=Qn(w.lanes,w.childLanes);w0(e,I),e===Ga&&(Ga=null,Wi=null,Vs=bt),((w.subtreeFlags&ke)!==bn||(w.flags&ke)!==bn)&&(pf||(pf=!0,c1=h,b1(Nr,function(){return Xu(),null})));var $=(w.subtreeFlags&(je|Ue|ye|ke))!==bn,Z=(w.flags&(je|Ue|ye|ke))!==bn;if($||Z){var re=da.transition;da.transition=null;var de=Fa();ys(Ba);var Ie=_r;_r|=fl,r1.current=null,LR(e,w),mE(),KR(e,w,D),Zk(e.containerInfo),e.current=w,Su(D),YR(w,e,D),Eu(),Wr(),_r=Ie,ys(de),da.transition=re}else e.current=w,mE();var Le=pf;if(pf?(pf=!1,ah=e,gv=D):(Km=0,fx=null),I=e.pendingLanes,I===bt&&(Zm=null),Le||DD(e.current,!1),Ws(w.stateNode,p),cs&&e.memoizedUpdaters.clear(),pL(),fo(e,gr()),i!==null)for(var Je=e.onRecoverableError,et=0;et<i.length;et++){var at=i[et],Zt=at.stack,Nn=at.digest;Je(at.value,{componentStack:Zt,digest:Nn})}if(dx){dx=!1;var vn=o1;throw o1=null,vn}return Ea(gv,En)&&e.tag!==Yd&&Xu(),I=e.pendingLanes,Ea(I,En)?(FM(),e===u1?vv++:(vv=0,u1=e)):vv=0,Xd(),Nd(),null}function Xu(){if(ah!==null){var e=Ad(gv),i=S0(ql,e),h=da.transition,p=Fa();try{return da.transition=null,ys(i),OL()}finally{ys(p),da.transition=h}}return!1}function VL(e){l1.push(e),pf||(pf=!0,b1(Nr,function(){return Xu(),null}))}function OL(){if(ah===null)return!1;var e=c1;c1=null;var i=ah,h=gv;if(ah=null,gv=bt,(_r&(ha|fl))!==Is)throw new Error("Cannot flush passive effects while already rendering.");d1=!0,hx=!1,Hf(h);var p=_r;_r|=fl,rL(i.current),QR(i,i.current,h,e);{var w=l1;l1=[];for(var D=0;D<w.length;D++){var I=w[D];zR(i,I)}}Ap(),DD(i.current,!0),_r=p,Xd(),hx?i===fx?Km++:(Km=0,fx=i):Km=0,d1=!1,hx=!1,Ni(i);{var $=i.current.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}return!0}function ND(e){return Zm!==null&&Zm.has(e)}function zL(e){Zm===null?Zm=new Set([e]):Zm.add(e)}function BL(e){dx||(dx=!0,o1=e)}var FL=BL;function SD(e,i,h){var p=hf(h,i),w=wE(e,p,En),D=Qd(e,w,En),I=Wa();D!==null&&($h(D,En,I),fo(D,I))}function bi(e,i,h){if(kR(h),_v(!1),e.tag===B){SD(e,e,h);return}var p=null;for(p=i;p!==null;){if(p.tag===B){SD(p,e,h);return}else if(p.tag===k){var w=p.type,D=p.stateNode;if(typeof w.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&!ND(D)){var I=hf(h,e),$=Iw(p,I,En),Z=Qd(p,$,En),re=Wa();Z!==null&&($h(Z,En,re),fo(Z,re));return}}p=p.return}b(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,h)}function UL(e,i,h){var p=e.pingCache;p!==null&&p.delete(i);var w=Wa();Lu(e,h),XL(e),Ga===e&&Ru(Vs,h)&&(Os===dv||Os===lx&&sm(Vs)&&gr()-a1<dD?gf(e,bt):ux=Qn(ux,h)),fo(e,w)}function ED(e,i){i===Dr&&(i=wL(e));var h=Wa(),p=co(e,i);p!==null&&($h(p,i,h),fo(p,h))}function $L(e){var i=e.memoizedState,h=Dr;i!==null&&(h=i.retryLane),ED(e,h)}function qL(e,i){var h=Dr,p;switch(e.tag){case Re:p=e.stateNode;var w=e.memoizedState;w!==null&&(h=w.retryLane);break;case fn:p=e.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}p!==null&&p.delete(i),ED(e,h)}function HL(e){return e<120?120:e<480?480:e<1080?1080:e<1920?1920:e<3e3?3e3:e<4320?4320:yL(e/1960)*1960}function GL(){if(vv>xL)throw vv=0,u1=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Km>_L&&(Km=0,fx=null,b("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function WL(){ec.flushLegacyContextWarning(),ec.flushPendingUnsafeLifecycleWarnings()}function DD(e,i){oi(e),yx(e,me,hL),i&&yx(e,ae,fL),yx(e,me,uL),i&&yx(e,ae,dL),Pi()}function yx(e,i,h){for(var p=e,w=null;p!==null;){var D=p.subtreeFlags&i;p!==w&&p.child!==null&&D!==bn?p=p.child:((p.flags&i)!==bn&&h(p),p.sibling!==null?p=p.sibling:p=w=p.return)}}var bx=null;function TD(e){{if((_r&ha)!==Is||!(e.mode&cr))return;var i=e.tag;if(i!==O&&i!==B&&i!==k&&i!==A&&i!==Ce&&i!==Ze&&i!==tt)return;var h=jn(e)||"ReactComponent";if(bx!==null){if(bx.has(h))return;bx.add(h)}else bx=new Set([h]);var p=ps;try{oi(e),b("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{p?oi(e):Pi()}}}var g1;{var ZL=null;g1=function(e,i,h){var p=ID(ZL,i);try{return FE(e,i,h)}catch(D){if(aM()||D!==null&&typeof D=="object"&&typeof D.then=="function")throw D;if(Eb(),$S(),WE(e,i),ID(i,p),i.mode&Vr&&yw(i),Cu(null,FE,null,e,i,h),Ll()){var w=ci();typeof w=="object"&&w!==null&&w._suppressLogging&&typeof D=="object"&&D!==null&&!D._suppressLogging&&(D._suppressLogging=!0)}throw D}}}var PD=!1,v1;v1=new Set;function KL(e){if(Nl&&!OM())switch(e.tag){case A:case Ce:case tt:{var i=Wi&&jn(Wi)||"Unknown",h=i;if(!v1.has(h)){v1.add(h);var p=jn(e)||"Unknown";b("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",p,i,i)}break}case k:{PD||(b("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),PD=!0);break}}}function xv(e,i){if(cs){var h=e.memoizedUpdaters;h.forEach(function(p){Wp(e,p,i)})}}var y1={};function b1(e,i){{var h=lc.current;return h!==null?(h.push(i),y1):In(e,i)}}function jD(e){if(e!==y1)return Jn(e)}function AD(){return lc.current!==null}function YL(e){{if(e.mode&cr){if(!lD())return}else if(!vL()||_r!==Is||e.tag!==A&&e.tag!==Ce&&e.tag!==tt)return;if(lc.current===null){var i=ps;try{oi(e),b(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,jn(e))}finally{i?oi(e):Pi()}}}}function XL(e){e.tag!==Yd&&lD()&&lc.current===null&&b(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function _v(e){mD=e}var ml=null,Ym=null,JL=function(e){ml=e};function Xm(e){{if(ml===null)return e;var i=ml(e);return i===void 0?e:i.current}}function x1(e){return Xm(e)}function _1(e){{if(ml===null)return e;var i=ml(e);if(i===void 0){if(e!=null&&typeof e.render=="function"){var h=Xm(e.render);if(e.render!==h){var p={$$typeof:Ae,render:h};return e.displayName!==void 0&&(p.displayName=e.displayName),p}}return e}return i.current}}function kD(e,i){{if(ml===null)return!1;var h=e.elementType,p=i.type,w=!1,D=typeof p=="object"&&p!==null?p.$$typeof:null;switch(e.tag){case k:{typeof p=="function"&&(w=!0);break}case A:{(typeof p=="function"||D===pt)&&(w=!0);break}case Ce:{(D===Ae||D===pt)&&(w=!0);break}case Ze:case tt:{(D===dt||D===pt)&&(w=!0);break}default:return!1}if(w){var I=ml(h);if(I!==void 0&&I===ml(p))return!0}return!1}}function MD(e){{if(ml===null||typeof WeakSet!="function")return;Ym===null&&(Ym=new WeakSet),Ym.add(e)}}var QL=function(e,i){{if(ml===null)return;var h=i.staleFamilies,p=i.updatedFamilies;Xu(),Yu(function(){w1(e.current,p,h)})}},eI=function(e,i){{if(e.context!==Io)return;Xu(),Yu(function(){wv(i,e,null,null)})}};function w1(e,i,h){{var p=e.alternate,w=e.child,D=e.sibling,I=e.tag,$=e.type,Z=null;switch(I){case A:case tt:case k:Z=$;break;case Ce:Z=$.render;break}if(ml===null)throw new Error("Expected resolveFamily to be set during hot reload.");var re=!1,de=!1;if(Z!==null){var Ie=ml(Z);Ie!==void 0&&(h.has(Ie)?de=!0:i.has(Ie)&&(I===k?de=!0:re=!0))}if(Ym!==null&&(Ym.has(e)||p!==null&&Ym.has(p))&&(de=!0),de&&(e._debugNeedsRemount=!0),de||re){var Le=co(e,En);Le!==null&&zs(Le,e,En,gi)}w!==null&&!de&&w1(w,i,h),D!==null&&w1(D,i,h)}}var tI=function(e,i){{var h=new Set,p=new Set(i.map(function(w){return w.current}));return C1(e.current,p,h),h}};function C1(e,i,h){{var p=e.child,w=e.sibling,D=e.tag,I=e.type,$=null;switch(D){case A:case tt:case k:$=I;break;case Ce:$=I.render;break}var Z=!1;$!==null&&i.has($)&&(Z=!0),Z?nI(e,h):p!==null&&C1(p,i,h),w!==null&&C1(w,i,h)}}function nI(e,i){{var h=rI(e,i);if(h)return;for(var p=e;;){switch(p.tag){case ie:i.add(p.stateNode);return;case W:i.add(p.stateNode.containerInfo);return;case B:i.add(p.stateNode.containerInfo);return}if(p.return===null)throw new Error("Expected to reach root first.");p=p.return}}}function rI(e,i){for(var h=e,p=!1;;){if(h.tag===ie)p=!0,i.add(h.stateNode);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)return p;for(;h.sibling===null;){if(h.return===null||h.return===e)return p;h=h.return}h.sibling.return=h.return,h=h.sibling}return!1}var N1;{N1=!1;try{var RD=Object.preventExtensions({})}catch{N1=!0}}function iI(e,i,h,p){this.tag=e,this.key=h,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=i,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=p,this.flags=bn,this.subtreeFlags=bn,this.deletions=null,this.lanes=bt,this.childLanes=bt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!N1&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var Vo=function(e,i,h,p){return new iI(e,i,h,p)};function S1(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function sI(e){return typeof e=="function"&&!S1(e)&&e.defaultProps===void 0}function aI(e){if(typeof e=="function")return S1(e)?k:A;if(e!=null){var i=e.$$typeof;if(i===Ae)return Ce;if(i===dt)return Ze}return O}function yf(e,i){var h=e.alternate;h===null?(h=Vo(e.tag,i,e.key,e.mode),h.elementType=e.elementType,h.type=e.type,h.stateNode=e.stateNode,h._debugSource=e._debugSource,h._debugOwner=e._debugOwner,h._debugHookTypes=e._debugHookTypes,h.alternate=e,e.alternate=h):(h.pendingProps=i,h.type=e.type,h.flags=bn,h.subtreeFlags=bn,h.deletions=null,h.actualDuration=0,h.actualStartTime=-1),h.flags=e.flags&$e,h.childLanes=e.childLanes,h.lanes=e.lanes,h.child=e.child,h.memoizedProps=e.memoizedProps,h.memoizedState=e.memoizedState,h.updateQueue=e.updateQueue;var p=e.dependencies;switch(h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},h.sibling=e.sibling,h.index=e.index,h.ref=e.ref,h.selfBaseDuration=e.selfBaseDuration,h.treeBaseDuration=e.treeBaseDuration,h._debugNeedsRemount=e._debugNeedsRemount,h.tag){case O:case A:case tt:h.type=Xm(e.type);break;case k:h.type=x1(e.type);break;case Ce:h.type=_1(e.type);break}return h}function oI(e,i){e.flags&=$e|_i;var h=e.alternate;if(h===null)e.childLanes=bt,e.lanes=i,e.child=null,e.subtreeFlags=bn,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=h.childLanes,e.lanes=h.lanes,e.child=h.child,e.subtreeFlags=bn,e.deletions=null,e.memoizedProps=h.memoizedProps,e.memoizedState=h.memoizedState,e.updateQueue=h.updateQueue,e.type=h.type;var p=h.dependencies;e.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},e.selfBaseDuration=h.selfBaseDuration,e.treeBaseDuration=h.treeBaseDuration}return e}function lI(e,i,h){var p;return e===gb?(p=cr,i===!0&&(p|=ui,p|=tl)):p=_n,cs&&(p|=Vr),Vo(B,null,null,p)}function E1(e,i,h,p,w,D){var I=O,$=e;if(typeof e=="function")S1(e)?(I=k,$=x1($)):$=Xm($);else if(typeof e=="string")I=ie;else e:switch(e){case Te:return ch(h.children,w,D,i);case Qe:I=Se,w|=ui,(w&cr)!==_n&&(w|=tl);break;case ne:return cI(h,w,D,i);case Fe:return uI(h,w,D,i);case Ke:return dI(h,w,D,i);case Ut:return LD(h,w,D,i);case wn:case Ot:case gn:case Un:case _t:default:{if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ne:I=De;break e;case te:I=Pe;break e;case Ae:I=Ce,$=_1($);break e;case dt:I=Ze;break e;case pt:I=ut,$=null;break e}var Z="";{(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(Z+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var re=p?jn(p):null;re&&(Z+=`

Check the render method of \``+re+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(e==null?e:typeof e)+"."+Z))}}var de=Vo(I,h,i,w);return de.elementType=e,de.type=$,de.lanes=D,de._debugOwner=p,de}function D1(e,i,h){var p=null;p=e._owner;var w=e.type,D=e.key,I=e.props,$=E1(w,D,I,p,i,h);return $._debugSource=e._source,$._debugOwner=e._owner,$}function ch(e,i,h,p){var w=Vo(Oe,e,p,i);return w.lanes=h,w}function cI(e,i,h,p){typeof e.id!="string"&&b('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id);var w=Vo(ze,e,p,i|Vr);return w.elementType=ne,w.lanes=h,w.stateNode={effectDuration:0,passiveEffectDuration:0},w}function uI(e,i,h,p){var w=Vo(Re,e,p,i);return w.elementType=Fe,w.lanes=h,w}function dI(e,i,h,p){var w=Vo(fn,e,p,i);return w.elementType=Ke,w.lanes=h,w}function LD(e,i,h,p){var w=Vo(ct,e,p,i);w.elementType=Ut,w.lanes=h;var D={isHidden:!1};return w.stateNode=D,w}function T1(e,i,h){var p=Vo(pe,e,null,i);return p.lanes=h,p}function hI(){var e=Vo(ie,null,null,_n);return e.elementType="DELETED",e}function fI(e){var i=Vo(zt,null,null,_n);return i.stateNode=e,i}function P1(e,i,h){var p=e.children!==null?e.children:[],w=Vo(W,p,e.key,i);return w.lanes=h,w.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},w}function ID(e,i){return e===null&&(e=Vo(O,null,null,_n)),e.tag=i.tag,e.key=i.key,e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.return=i.return,e.child=i.child,e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e.pendingProps=i.pendingProps,e.memoizedProps=i.memoizedProps,e.updateQueue=i.updateQueue,e.memoizedState=i.memoizedState,e.dependencies=i.dependencies,e.mode=i.mode,e.flags=i.flags,e.subtreeFlags=i.subtreeFlags,e.deletions=i.deletions,e.lanes=i.lanes,e.childLanes=i.childLanes,e.alternate=i.alternate,e.actualDuration=i.actualDuration,e.actualStartTime=i.actualStartTime,e.selfBaseDuration=i.selfBaseDuration,e.treeBaseDuration=i.treeBaseDuration,e._debugSource=i._debugSource,e._debugOwner=i._debugOwner,e._debugNeedsRemount=i._debugNeedsRemount,e._debugHookTypes=i._debugHookTypes,e}function mI(e,i,h,p,w){this.tag=i,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=u_,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Dr,this.eventTimes=il(bt),this.expirationTimes=il(gi),this.pendingLanes=bt,this.suspendedLanes=bt,this.pingedLanes=bt,this.expiredLanes=bt,this.mutableReadLanes=bt,this.finishedLanes=bt,this.entangledLanes=bt,this.entanglements=il(bt),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var D=this.pendingUpdatersLaneMap=[],I=0;I<Zf;I++)D.push(new Set)}switch(i){case gb:this._debugRootType=h?"hydrateRoot()":"createRoot()";break;case Yd:this._debugRootType=h?"hydrate()":"render()";break}}function VD(e,i,h,p,w,D,I,$,Z,re){var de=new mI(e,i,h,$,Z),Ie=lI(i,D);de.current=Ie,Ie.stateNode=de;{var Le={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null};Ie.memoizedState=Le}return U_(Ie),de}var j1="18.3.1";function pI(e,i,h){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return hi(p),{$$typeof:ge,key:p==null?null:""+p,children:e,containerInfo:i,implementation:h}}var A1,k1;A1=!1,k1={};function OD(e){if(!e)return Io;var i=Ir(e),h=X2(i);if(i.tag===k){var p=i.type;if(qc(p))return dS(i,p,h)}return h}function gI(e,i){{var h=Ir(e);if(h===void 0){if(typeof e.render=="function")throw new Error("Unable to find node on an unmounted component.");var p=Object.keys(e).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+p)}var w=mn(h);if(w===null)return null;if(w.mode&ui){var D=jn(h)||"Component";if(!k1[D]){k1[D]=!0;var I=ps;try{oi(w),h.mode&ui?b("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D):b("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D)}finally{I?oi(I):Pi()}}}return w.stateNode}}function zD(e,i,h,p,w,D,I,$){var Z=!1,re=null;return VD(e,i,Z,re,h,p,w,D,I)}function BD(e,i,h,p,w,D,I,$,Z,re){var de=!0,Ie=VD(h,p,de,e,w,D,I,$,Z);Ie.context=OD(null);var Le=Ie.current,Je=Wa(),et=oh(Le),at=Gu(Je,et);return at.callback=i??null,Qd(Le,at,et),CL(Ie,et,Je),Ie}function wv(e,i,h,p){Ui(i,e);var w=i.current,D=Wa(),I=oh(w);x0(I);var $=OD(h);i.context===null?i.context=$:i.pendingContext=$,Nl&&ps!==null&&!A1&&(A1=!0,b(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,jn(ps)||"Unknown"));var Z=Gu(D,I);Z.payload={element:e},p=p===void 0?null:p,p!==null&&(typeof p!="function"&&b("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",p),Z.callback=p);var re=Qd(w,Z,I);return re!==null&&(zs(re,w,I,D),Ab(re,w,I)),I}function xx(e){var i=e.current;if(!i.child)return null;switch(i.child.tag){case ie:return i.child.stateNode;default:return i.child.stateNode}}function vI(e){switch(e.tag){case B:{var i=e.stateNode;if(qh(i)){var h=Fh(i);DL(i,h)}break}case Re:{Yu(function(){var w=co(e,En);if(w!==null){var D=Wa();zs(w,e,En,D)}});var p=En;M1(e,p);break}}}function FD(e,i){var h=e.memoizedState;h!==null&&h.dehydrated!==null&&(h.retryLane=_0(h.retryLane,i))}function M1(e,i){FD(e,i);var h=e.alternate;h&&FD(h,i)}function yI(e){if(e.tag===Re){var i=zh,h=co(e,i);if(h!==null){var p=Wa();zs(h,e,i,p)}M1(e,i)}}function bI(e){if(e.tag===Re){var i=oh(e),h=co(e,i);if(h!==null){var p=Wa();zs(h,e,i,p)}M1(e,i)}}function UD(e){var i=kr(e);return i===null?null:i.stateNode}var $D=function(e){return null};function xI(e){return $D(e)}var qD=function(e){return!1};function _I(e){return qD(e)}var HD=null,GD=null,WD=null,ZD=null,KD=null,YD=null,XD=null,JD=null,QD=null;{var eT=function(e,i,h){var p=i[h],w=nr(e)?e.slice():Tn({},e);return h+1===i.length?(nr(w)?w.splice(p,1):delete w[p],w):(w[p]=eT(e[p],i,h+1),w)},tT=function(e,i){return eT(e,i,0)},nT=function(e,i,h,p){var w=i[p],D=nr(e)?e.slice():Tn({},e);if(p+1===i.length){var I=h[p];D[I]=D[w],nr(D)?D.splice(w,1):delete D[w]}else D[w]=nT(e[w],i,h,p+1);return D},rT=function(e,i,h){if(i.length!==h.length){N("copyWithRename() expects paths of the same length");return}else for(var p=0;p<h.length-1;p++)if(i[p]!==h[p]){N("copyWithRename() expects paths to be the same except for the deepest key");return}return nT(e,i,h,0)},iT=function(e,i,h,p){if(h>=i.length)return p;var w=i[h],D=nr(e)?e.slice():Tn({},e);return D[w]=iT(e[w],i,h+1,p),D},sT=function(e,i,h){return iT(e,i,0,h)},R1=function(e,i){for(var h=e.memoizedState;h!==null&&i>0;)h=h.next,i--;return h};HD=function(e,i,h,p){var w=R1(e,i);if(w!==null){var D=sT(w.memoizedState,h,p);w.memoizedState=D,w.baseState=D,e.memoizedProps=Tn({},e.memoizedProps);var I=co(e,En);I!==null&&zs(I,e,En,gi)}},GD=function(e,i,h){var p=R1(e,i);if(p!==null){var w=tT(p.memoizedState,h);p.memoizedState=w,p.baseState=w,e.memoizedProps=Tn({},e.memoizedProps);var D=co(e,En);D!==null&&zs(D,e,En,gi)}},WD=function(e,i,h,p){var w=R1(e,i);if(w!==null){var D=rT(w.memoizedState,h,p);w.memoizedState=D,w.baseState=D,e.memoizedProps=Tn({},e.memoizedProps);var I=co(e,En);I!==null&&zs(I,e,En,gi)}},ZD=function(e,i,h){e.pendingProps=sT(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=co(e,En);p!==null&&zs(p,e,En,gi)},KD=function(e,i){e.pendingProps=tT(e.memoizedProps,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var h=co(e,En);h!==null&&zs(h,e,En,gi)},YD=function(e,i,h){e.pendingProps=rT(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=co(e,En);p!==null&&zs(p,e,En,gi)},XD=function(e){var i=co(e,En);i!==null&&zs(i,e,En,gi)},JD=function(e){$D=e},QD=function(e){qD=e}}function wI(e){var i=mn(e);return i===null?null:i.stateNode}function CI(e){return null}function NI(){return ps}function SI(e){var i=e.findFiberByHostInstance,h=a.ReactCurrentDispatcher;return Ci({bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:HD,overrideHookStateDeletePath:GD,overrideHookStateRenamePath:WD,overrideProps:ZD,overridePropsDeletePath:KD,overridePropsRenamePath:YD,setErrorHandler:JD,setSuspenseHandler:QD,scheduleUpdate:XD,currentDispatcherRef:h,findHostInstanceByFiber:wI,findFiberByHostInstance:i||CI,findHostInstancesForRefresh:tI,scheduleRefresh:QL,scheduleRoot:eI,setRefreshHandler:JL,getCurrentFiber:NI,reconcilerVersion:j1})}var aT=typeof reportError=="function"?reportError:function(e){console.error(e)};function L1(e){this._internalRoot=e}_x.prototype.render=L1.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?b("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):wx(arguments[1])?b("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&b("You passed a second argument to root.render(...) but it only accepts one argument.");var h=i.containerInfo;if(h.nodeType!==xi){var p=UD(i.current);p&&p.parentNode!==h&&b("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}wv(e,i,null,null)},_x.prototype.unmount=L1.prototype.unmount=function(){typeof arguments[0]=="function"&&b("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;yD()&&b("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Yu(function(){wv(null,e,null,null)}),aS(i)}};function EI(e,i){if(!wx(e))throw new Error("createRoot(...): Target container is not a DOM element.");oT(e);var h=!1,p=!1,w="",D=aT;i!=null&&(i.hydrate?N("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof i=="object"&&i!==null&&i.$$typeof===xe&&b(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(w=i.identifierPrefix),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.transitionCallbacks!==void 0&&i.transitionCallbacks);var I=zD(e,gb,null,h,p,w,D);cb(I.current,e);var $=e.nodeType===xi?e.parentNode:e;return ln($),new L1(I)}function _x(e){this._internalRoot=e}function DI(e){e&&Or(e)}_x.prototype.unstable_scheduleHydration=DI;function TI(e,i,h){if(!wx(e))throw new Error("hydrateRoot(...): Target container is not a DOM element.");oT(e),i===void 0&&b("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var p=h??null,w=h!=null&&h.hydratedSources||null,D=!1,I=!1,$="",Z=aT;h!=null&&(h.unstable_strictMode===!0&&(D=!0),h.identifierPrefix!==void 0&&($=h.identifierPrefix),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError));var re=BD(i,null,e,gb,p,D,I,$,Z);if(cb(re.current,e),ln(e),w)for(var de=0;de<w.length;de++){var Ie=w[de];kM(re,Ie)}return new _x(re)}function wx(e){return!!(e&&(e.nodeType===ls||e.nodeType===ya||e.nodeType===du))}function Cv(e){return!!(e&&(e.nodeType===ls||e.nodeType===ya||e.nodeType===du||e.nodeType===xi&&e.nodeValue===" react-mount-point-unstable "))}function oT(e){e.nodeType===ls&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&b("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),zg(e)&&(e._reactRootContainer?b("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):b("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var PI=a.ReactCurrentOwner,lT;lT=function(e){if(e._reactRootContainer&&e.nodeType!==xi){var i=UD(e._reactRootContainer.current);i&&i.parentNode!==e&&b("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var h=!!e._reactRootContainer,p=I1(e),w=!!(p&&Zd(p));w&&!h&&b("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===ls&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&b("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function I1(e){return e?e.nodeType===ya?e.documentElement:e.firstChild:null}function cT(){}function jI(e,i,h,p,w){if(w){if(typeof p=="function"){var D=p;p=function(){var Le=xx(I);D.call(Le)}}var I=BD(i,p,e,Yd,null,!1,!1,"",cT);e._reactRootContainer=I,cb(I.current,e);var $=e.nodeType===xi?e.parentNode:e;return ln($),Yu(),I}else{for(var Z;Z=e.lastChild;)e.removeChild(Z);if(typeof p=="function"){var re=p;p=function(){var Le=xx(de);re.call(Le)}}var de=zD(e,Yd,null,!1,!1,"",cT);e._reactRootContainer=de,cb(de.current,e);var Ie=e.nodeType===xi?e.parentNode:e;return ln(Ie),Yu(function(){wv(i,de,h,p)}),de}}function AI(e,i){e!==null&&typeof e!="function"&&b("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e)}function Cx(e,i,h,p,w){lT(h),AI(w===void 0?null:w,"render");var D=h._reactRootContainer,I;if(!D)I=jI(h,i,e,w,p);else{if(I=D,typeof w=="function"){var $=w;w=function(){var Z=xx(I);$.call(Z)}}wv(i,I,e,w)}return xx(I)}var uT=!1;function kI(e){{uT||(uT=!0,b("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var i=PI.current;if(i!==null&&i.stateNode!==null){var h=i.stateNode._warnedAboutRefsInRender;h||b("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",or(i.type)||"A component"),i.stateNode._warnedAboutRefsInRender=!0}}return e==null?null:e.nodeType===ls?e:gI(e,"findDOMNode")}function MI(e,i,h){if(b("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(i))throw new Error("Target container is not a DOM element.");{var p=zg(i)&&i._reactRootContainer===void 0;p&&b("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return Cx(null,e,i,!0,h)}function RI(e,i,h){if(b("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(i))throw new Error("Target container is not a DOM element.");{var p=zg(i)&&i._reactRootContainer===void 0;p&&b("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return Cx(null,e,i,!1,h)}function LI(e,i,h,p){if(b("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(h))throw new Error("Target container is not a DOM element.");if(e==null||!Ac(e))throw new Error("parentComponent must be a valid React Component");return Cx(e,i,h,!1,p)}var dT=!1;function II(e){if(dT||(dT=!0,b("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!Cv(e))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var i=zg(e)&&e._reactRootContainer===void 0;i&&b("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(e._reactRootContainer){{var h=I1(e),p=h&&!Zd(h);p&&b("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Yu(function(){Cx(null,null,e,!1,function(){e._reactRootContainer=null,aS(e)})}),!0}else{{var w=I1(e),D=!!(w&&Zd(w)),I=e.nodeType===ls&&Cv(e.parentNode)&&!!e.parentNode._reactRootContainer;D&&b("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",I?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}E0(vI),T0(yI),Cy(bI),Ny(Fa),Sy(N0),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&b("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Rh(Ro),ti(f1,TL,Yu);function VI(e,i){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!wx(i))throw new Error("Target container is not a DOM element.");return pI(e,i,null,h)}function OI(e,i,h,p){return LI(e,i,h,p)}var V1={usingClientEntryPoint:!1,Events:[Zd,Tm,ub,Ds,Sc,f1]};function zI(e,i){return V1.usingClientEntryPoint||b('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),EI(e,i)}function BI(e,i,h){return V1.usingClientEntryPoint||b('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),TI(e,i,h)}function FI(e){return yD()&&b("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Yu(e)}var UI=SI({findFiberByHostInstance:nf,bundleType:1,version:j1,rendererPackageName:"react-dom"});if(!UI&&vr&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var hT=window.location.protocol;/^(https?|file):$/.test(hT)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(hT==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V1,zo.createPortal=VI,zo.createRoot=zI,zo.findDOMNode=kI,zo.flushSync=FI,zo.hydrate=MI,zo.hydrateRoot=BI,zo.render=RI,zo.unmountComponentAtNode=II,zo.unstable_batchedUpdates=f1,zo.unstable_renderSubtreeIntoContainer=OI,zo.version=j1,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();dj.exports=zo;var JI=dj.exports,O1=JI;{var Nx=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;pC.createRoot=function(o,t){Nx.usingClientEntryPoint=!0;try{return O1.createRoot(o,t)}finally{Nx.usingClientEntryPoint=!1}},pC.hydrateRoot=function(o,t,a){Nx.usingClientEntryPoint=!0;try{return O1.hydrateRoot(o,t,a)}finally{Nx.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bv(){return Bv=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},Bv.apply(this,arguments)}var mh;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(mh||(mh={}));const fT="popstate";function QI(o){o===void 0&&(o={});function t(c,g){let{pathname:N,search:b,hash:d}=c.location;return gC("",{pathname:N,search:b,hash:d},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function a(c,g){return typeof g=="string"?g:Fv(g)}return tV(t,a,null,o)}function Xi(o,t){if(o===!1||o===null||typeof o>"u")throw new Error(t)}function ru(o,t){if(!o){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function eV(){return Math.random().toString(36).substr(2,8)}function mT(o,t){return{usr:o.state,key:o.key,idx:t}}function gC(o,t,a,c){return a===void 0&&(a=null),Bv({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof t=="string"?bp(t):t,{state:a,key:t&&t.key||c||eV()})}function Fv(o){let{pathname:t="/",search:a="",hash:c=""}=o;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),c&&c!=="#"&&(t+=c.charAt(0)==="#"?c:"#"+c),t}function bp(o){let t={};if(o){let a=o.indexOf("#");a>=0&&(t.hash=o.substr(a),o=o.substr(0,a));let c=o.indexOf("?");c>=0&&(t.search=o.substr(c),o=o.substr(0,c)),o&&(t.pathname=o)}return t}function tV(o,t,a,c){c===void 0&&(c={});let{window:g=document.defaultView,v5Compat:N=!1}=c,b=g.history,d=mh.Pop,A=null,k=O();k==null&&(k=0,b.replaceState(Bv({},b.state,{idx:k}),""));function O(){return(b.state||{idx:null}).idx}function B(){d=mh.Pop;let Se=O(),Pe=Se==null?null:Se-k;k=Se,A&&A({action:d,location:Oe.location,delta:Pe})}function W(Se,Pe){d=mh.Push;let De=gC(Oe.location,Se,Pe);k=O()+1;let Ce=mT(De,k),ze=Oe.createHref(De);try{b.pushState(Ce,"",ze)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;g.location.assign(ze)}N&&A&&A({action:d,location:Oe.location,delta:1})}function ie(Se,Pe){d=mh.Replace;let De=gC(Oe.location,Se,Pe);k=O();let Ce=mT(De,k),ze=Oe.createHref(De);b.replaceState(Ce,"",ze),N&&A&&A({action:d,location:Oe.location,delta:0})}function pe(Se){let Pe=g.location.origin!=="null"?g.location.origin:g.location.href,De=typeof Se=="string"?Se:Fv(Se);return De=De.replace(/ $/,"%20"),Xi(Pe,"No window.location.(origin|href) available to create URL for href: "+De),new URL(De,Pe)}let Oe={get action(){return d},get location(){return o(g,b)},listen(Se){if(A)throw new Error("A history only accepts one active listener");return g.addEventListener(fT,B),A=Se,()=>{g.removeEventListener(fT,B),A=null}},createHref(Se){return t(g,Se)},createURL:pe,encodeLocation(Se){let Pe=pe(Se);return{pathname:Pe.pathname,search:Pe.search,hash:Pe.hash}},push:W,replace:ie,go(Se){return b.go(Se)}};return Oe}var pT;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(pT||(pT={}));function nV(o,t,a){return a===void 0&&(a="/"),rV(o,t,a)}function rV(o,t,a,c){let g=typeof t=="string"?bp(t):t,N=gh(g.pathname||"/",a);if(N==null)return null;let b=mj(o);iV(b);let d=null;for(let A=0;d==null&&A<b.length;++A){let k=pV(N);d=fV(b[A],k)}return d}function mj(o,t,a,c){t===void 0&&(t=[]),a===void 0&&(a=[]),c===void 0&&(c="");let g=(N,b,d)=>{let A={relativePath:d===void 0?N.path||"":d,caseSensitive:N.caseSensitive===!0,childrenIndex:b,route:N};A.relativePath.startsWith("/")&&(Xi(A.relativePath.startsWith(c),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(c.length));let k=td([c,A.relativePath]),O=a.concat(A);N.children&&N.children.length>0&&(Xi(N.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+k+'".')),mj(N.children,t,O,k)),!(N.path==null&&!N.index)&&t.push({path:k,score:dV(k,N.index),routesMeta:O})};return o.forEach((N,b)=>{var d;if(N.path===""||!((d=N.path)!=null&&d.includes("?")))g(N,b);else for(let A of pj(N.path))g(N,b,A)}),t}function pj(o){let t=o.split("/");if(t.length===0)return[];let[a,...c]=t,g=a.endsWith("?"),N=a.replace(/\?$/,"");if(c.length===0)return g?[N,""]:[N];let b=pj(c.join("/")),d=[];return d.push(...b.map(A=>A===""?N:[N,A].join("/"))),g&&d.push(...b),d.map(A=>o.startsWith("/")&&A===""?"/":A)}function iV(o){o.sort((t,a)=>t.score!==a.score?a.score-t.score:hV(t.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}const sV=/^:[\w-]+$/,aV=3,oV=2,lV=1,cV=10,uV=-2,gT=o=>o==="*";function dV(o,t){let a=o.split("/"),c=a.length;return a.some(gT)&&(c+=uV),t&&(c+=oV),a.filter(g=>!gT(g)).reduce((g,N)=>g+(sV.test(N)?aV:N===""?lV:cV),c)}function hV(o,t){return o.length===t.length&&o.slice(0,-1).every((c,g)=>c===t[g])?o[o.length-1]-t[t.length-1]:0}function fV(o,t,a){let{routesMeta:c}=o,g={},N="/",b=[];for(let d=0;d<c.length;++d){let A=c[d],k=d===c.length-1,O=N==="/"?t:t.slice(N.length)||"/",B=vC({path:A.relativePath,caseSensitive:A.caseSensitive,end:k},O),W=A.route;if(!B)return null;Object.assign(g,B.params),b.push({params:g,pathname:td([N,B.pathname]),pathnameBase:bV(td([N,B.pathnameBase])),route:W}),B.pathnameBase!=="/"&&(N=td([N,B.pathnameBase]))}return b}function vC(o,t){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[a,c]=mV(o.path,o.caseSensitive,o.end),g=t.match(a);if(!g)return null;let N=g[0],b=N.replace(/(.)\/+$/,"$1"),d=g.slice(1);return{params:c.reduce((k,O,B)=>{let{paramName:W,isOptional:ie}=O;if(W==="*"){let Oe=d[B]||"";b=N.slice(0,N.length-Oe.length).replace(/(.)\/+$/,"$1")}const pe=d[B];return ie&&!pe?k[W]=void 0:k[W]=(pe||"").replace(/%2F/g,"/"),k},{}),pathname:N,pathnameBase:b,pattern:o}}function mV(o,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),ru(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let c=[],g="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,d,A)=>(c.push({paramName:d,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(c.push({paramName:"*"}),g+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?g+="\\/*$":o!==""&&o!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,t?void 0:"i"),c]}function pV(o){try{return o.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ru(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),o}}function gh(o,t){if(t==="/")return o;if(!o.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,c=o.charAt(a);return c&&c!=="/"?null:o.slice(a)||"/"}function gV(o,t){t===void 0&&(t="/");let{pathname:a,search:c="",hash:g=""}=typeof o=="string"?bp(o):o;return{pathname:a?a.startsWith("/")?a:vV(a,t):t,search:xV(c),hash:_V(g)}}function vV(o,t){let a=t.replace(/\/+$/,"").split("/");return o.split("/").forEach(g=>{g===".."?a.length>1&&a.pop():g!=="."&&a.push(g)}),a.length>1?a.join("/"):"/"}function z1(o,t,a,c){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yV(o){return o.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function gj(o,t){let a=yV(o);return t?a.map((c,g)=>g===a.length-1?c.pathname:c.pathnameBase):a.map(c=>c.pathnameBase)}function vj(o,t,a,c){c===void 0&&(c=!1);let g;typeof o=="string"?g=bp(o):(g=Bv({},o),Xi(!g.pathname||!g.pathname.includes("?"),z1("?","pathname","search",g)),Xi(!g.pathname||!g.pathname.includes("#"),z1("#","pathname","hash",g)),Xi(!g.search||!g.search.includes("#"),z1("#","search","hash",g)));let N=o===""||g.pathname==="",b=N?"/":g.pathname,d;if(b==null)d=a;else{let B=t.length-1;if(!c&&b.startsWith("..")){let W=b.split("/");for(;W[0]==="..";)W.shift(),B-=1;g.pathname=W.join("/")}d=B>=0?t[B]:"/"}let A=gV(g,d),k=b&&b!=="/"&&b.endsWith("/"),O=(N||b===".")&&a.endsWith("/");return!A.pathname.endsWith("/")&&(k||O)&&(A.pathname+="/"),A}const td=o=>o.join("/").replace(/\/\/+/g,"/"),bV=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),xV=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,_V=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function wV(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const yj=["post","put","patch","delete"];new Set(yj);const CV=["get",...yj];new Set(CV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uv(){return Uv=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},Uv.apply(this,arguments)}const Xv=oe.createContext(null);Xv.displayName="DataRouter";const aN=oe.createContext(null);aN.displayName="DataRouterState";const NV=oe.createContext(null);NV.displayName="Await";const mc=oe.createContext(null);mc.displayName="Navigation";const Jv=oe.createContext(null);Jv.displayName="Location";const ad=oe.createContext({outlet:null,matches:[],isDataRoute:!1});ad.displayName="Route";const oN=oe.createContext(null);oN.displayName="RouteError";function SV(o,t){let{relative:a}=t===void 0?{}:t;Qv()||Xi(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:g}=oe.useContext(mc),{hash:N,pathname:b,search:d}=ey(o,{relative:a}),A=b;return c!=="/"&&(A=b==="/"?c:td([c,b])),g.createHref({pathname:A,search:d,hash:N})}function Qv(){return oe.useContext(Jv)!=null}function jf(){return Qv()||Xi(!1,"useLocation() may be used only in the context of a <Router> component."),oe.useContext(Jv).location}const bj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xj(o){oe.useContext(mc).static||oe.useLayoutEffect(o)}function i0(){let{isDataRoute:o}=oe.useContext(ad);return o?zV():EV()}function EV(){Qv()||Xi(!1,"useNavigate() may be used only in the context of a <Router> component.");let o=oe.useContext(Xv),{basename:t,future:a,navigator:c}=oe.useContext(mc),{matches:g}=oe.useContext(ad),{pathname:N}=jf(),b=JSON.stringify(gj(g,a.v7_relativeSplatPath)),d=oe.useRef(!1);return xj(()=>{d.current=!0}),oe.useCallback(function(k,O){if(O===void 0&&(O={}),ru(d.current,bj),!d.current)return;if(typeof k=="number"){c.go(k);return}let B=vj(k,JSON.parse(b),N,O.relative==="path");o==null&&t!=="/"&&(B.pathname=B.pathname==="/"?t:td([t,B.pathname])),(O.replace?c.replace:c.push)(B,O.state,O)},[t,c,b,N,o])}function ey(o,t){let{relative:a}=t===void 0?{}:t,{future:c}=oe.useContext(mc),{matches:g}=oe.useContext(ad),{pathname:N}=jf(),b=JSON.stringify(gj(g,c.v7_relativeSplatPath));return oe.useMemo(()=>vj(o,JSON.parse(b),N,a==="path"),[o,b,N,a])}function DV(o,t){return TV(o,t)}function TV(o,t,a,c){Qv()||Xi(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=oe.useContext(mc),{matches:N}=oe.useContext(ad),b=N[N.length-1],d=b?b.params:{},A=b?b.pathname:"/",k=b?b.pathnameBase:"/",O=b&&b.route;{let De=O&&O.path||"";wj(A,!O||De.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+A+'" (under <Route path="'+De+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+De+'"> to <Route ')+('path="'+(De==="/"?"*":De+"/*")+'">.'))}let B=jf(),W;if(t){var ie;let De=typeof t=="string"?bp(t):t;k==="/"||(ie=De.pathname)!=null&&ie.startsWith(k)||Xi(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+k+'" ')+('but pathname "'+De.pathname+'" was given in the `location` prop.')),W=De}else W=B;let pe=W.pathname||"/",Oe=pe;if(k!=="/"){let De=k.replace(/^\//,"").split("/");Oe="/"+pe.replace(/^\//,"").split("/").slice(De.length).join("/")}let Se=nV(o,{pathname:Oe});ru(O||Se!=null,'No routes matched location "'+W.pathname+W.search+W.hash+'" '),ru(Se==null||Se[Se.length-1].route.element!==void 0||Se[Se.length-1].route.Component!==void 0||Se[Se.length-1].route.lazy!==void 0,'Matched leaf route at location "'+W.pathname+W.search+W.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let Pe=MV(Se&&Se.map(De=>Object.assign({},De,{params:Object.assign({},d,De.params),pathname:td([k,g.encodeLocation?g.encodeLocation(De.pathname).pathname:De.pathname]),pathnameBase:De.pathnameBase==="/"?k:td([k,g.encodeLocation?g.encodeLocation(De.pathnameBase).pathname:De.pathnameBase])})),N,a,c);return t&&Pe?oe.createElement(Jv.Provider,{value:{location:Uv({pathname:"/",search:"",hash:"",state:null,key:"default"},W),navigationType:mh.Pop}},Pe):Pe}function PV(){let o=OV(),t=wV(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),a=o instanceof Error?o.stack:null,c="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:c},N={padding:"2px 4px",backgroundColor:c},b=null;return console.error("Error handled by React Router default ErrorBoundary:",o),b=oe.createElement(oe.Fragment,null,oe.createElement("p",null,"💿 Hey developer 👋"),oe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",oe.createElement("code",{style:N},"ErrorBoundary")," or"," ",oe.createElement("code",{style:N},"errorElement")," prop on your route.")),oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},t),a?oe.createElement("pre",{style:g},a):null,b)}const jV=oe.createElement(PV,null);class AV extends oe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?oe.createElement(ad.Provider,{value:this.props.routeContext},oe.createElement(oN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kV(o){let{routeContext:t,match:a,children:c}=o,g=oe.useContext(Xv);return g&&g.static&&g.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=a.route.id),oe.createElement(ad.Provider,{value:t},c)}function MV(o,t,a,c){var g;if(t===void 0&&(t=[]),a===void 0&&(a=null),c===void 0&&(c=null),o==null){var N;if(!a)return null;if(a.errors)o=a.matches;else if((N=c)!=null&&N.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)o=a.matches;else return null}let b=o,d=(g=a)==null?void 0:g.errors;if(d!=null){let O=b.findIndex(B=>B.route.id&&(d==null?void 0:d[B.route.id])!==void 0);O>=0||Xi(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(d).join(",")),b=b.slice(0,Math.min(b.length,O+1))}let A=!1,k=-1;if(a&&c&&c.v7_partialHydration)for(let O=0;O<b.length;O++){let B=b[O];if((B.route.HydrateFallback||B.route.hydrateFallbackElement)&&(k=O),B.route.id){let{loaderData:W,errors:ie}=a,pe=B.route.loader&&W[B.route.id]===void 0&&(!ie||ie[B.route.id]===void 0);if(B.route.lazy||pe){A=!0,k>=0?b=b.slice(0,k+1):b=[b[0]];break}}}return b.reduceRight((O,B,W)=>{let ie,pe=!1,Oe=null,Se=null;a&&(ie=d&&B.route.id?d[B.route.id]:void 0,Oe=B.route.errorElement||jV,A&&(k<0&&W===0?(wj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),pe=!0,Se=null):k===W&&(pe=!0,Se=B.route.hydrateFallbackElement||null)));let Pe=t.concat(b.slice(0,W+1)),De=()=>{let Ce;return ie?Ce=Oe:pe?Ce=Se:B.route.Component?Ce=oe.createElement(B.route.Component,null):B.route.element?Ce=B.route.element:Ce=O,oe.createElement(kV,{match:B,routeContext:{outlet:O,matches:Pe,isDataRoute:a!=null},children:Ce})};return a&&(B.route.ErrorBoundary||B.route.errorElement||W===0)?oe.createElement(AV,{location:a.location,revalidation:a.revalidation,component:Oe,error:ie,children:De(),routeContext:{outlet:null,matches:Pe,isDataRoute:!0}}):De()},null)}var _j=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(_j||{}),$v=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}($v||{});function lN(o){return o+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function RV(o){let t=oe.useContext(Xv);return t||Xi(!1,lN(o)),t}function LV(o){let t=oe.useContext(aN);return t||Xi(!1,lN(o)),t}function IV(o){let t=oe.useContext(ad);return t||Xi(!1,lN(o)),t}function cN(o){let t=IV(o),a=t.matches[t.matches.length-1];return a.route.id||Xi(!1,o+' can only be used on routes that contain a unique "id"'),a.route.id}function VV(){return cN($v.UseRouteId)}function OV(){var o;let t=oe.useContext(oN),a=LV($v.UseRouteError),c=cN($v.UseRouteError);return t!==void 0?t:(o=a.errors)==null?void 0:o[c]}function zV(){let{router:o}=RV(_j.UseNavigateStable),t=cN($v.UseNavigateStable),a=oe.useRef(!1);return xj(()=>{a.current=!0}),oe.useCallback(function(g,N){N===void 0&&(N={}),ru(a.current,bj),a.current&&(typeof g=="number"?o.navigate(g):o.navigate(g,Uv({fromRouteId:t},N)))},[o,t])}const vT={};function wj(o,t,a){!t&&!vT[o]&&(vT[o]=!0,ru(!1,a))}const yT={};function BV(o,t){yT[t]||(yT[t]=!0,console.warn(t))}const bT=(o,t,a)=>BV(o,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+o+"` future flag to opt-in early. ")+("For more information, see "+a+"."));function FV(o,t){(o==null?void 0:o.v7_startTransition)===void 0&&bT("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(o==null?void 0:o.v7_relativeSplatPath)===void 0&&bT("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function gl(o){Xi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UV(o){let{basename:t="/",children:a=null,location:c,navigationType:g=mh.Pop,navigator:N,static:b=!1,future:d}=o;Qv()&&Xi(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=t.replace(/^\/*/,"/"),k=oe.useMemo(()=>({basename:A,navigator:N,static:b,future:Uv({v7_relativeSplatPath:!1},d)}),[A,d,N,b]);typeof c=="string"&&(c=bp(c));let{pathname:O="/",search:B="",hash:W="",state:ie=null,key:pe="default"}=c,Oe=oe.useMemo(()=>{let Se=gh(O,A);return Se==null?null:{location:{pathname:Se,search:B,hash:W,state:ie,key:pe},navigationType:g}},[A,O,B,W,ie,pe,g]);return ru(Oe!=null,'<Router basename="'+A+'"> is not able to match the URL '+('"'+O+B+W+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),Oe==null?null:oe.createElement(mc.Provider,{value:k},oe.createElement(Jv.Provider,{children:a,value:Oe}))}function $V(o){let{children:t,location:a}=o;return DV(yC(t),a)}new Promise(()=>{});function yC(o,t){t===void 0&&(t=[]);let a=[];return oe.Children.forEach(o,(c,g)=>{if(!oe.isValidElement(c))return;let N=[...t,g];if(c.type===oe.Fragment){a.push.apply(a,yC(c.props.children,N));return}c.type!==gl&&Xi(!1,"["+(typeof c.type=="string"?c.type:c.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!c.props.index||!c.props.children||Xi(!1,"An index route cannot have child routes.");let b={id:c.props.id||N.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(b.children=yC(c.props.children,N)),a.push(b)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},pp.apply(this,arguments)}function uN(o,t){if(o==null)return{};var a={},c=Object.keys(o),g,N;for(N=0;N<c.length;N++)g=c[N],!(t.indexOf(g)>=0)&&(a[g]=o[g]);return a}const Vx="get",Ox="application/x-www-form-urlencoded";function s0(o){return o!=null&&typeof o.tagName=="string"}function qV(o){return s0(o)&&o.tagName.toLowerCase()==="button"}function HV(o){return s0(o)&&o.tagName.toLowerCase()==="form"}function GV(o){return s0(o)&&o.tagName.toLowerCase()==="input"}function WV(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function ZV(o,t){return o.button===0&&(!t||t==="_self")&&!WV(o)}let Sx=null;function KV(){if(Sx===null)try{new FormData(document.createElement("form"),0),Sx=!1}catch{Sx=!0}return Sx}const YV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B1(o){return o!=null&&!YV.has(o)?(ru(!1,'"'+o+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+Ox+'"')),null):o}function XV(o,t){let a,c,g,N,b;if(HV(o)){let d=o.getAttribute("action");c=d?gh(d,t):null,a=o.getAttribute("method")||Vx,g=B1(o.getAttribute("enctype"))||Ox,N=new FormData(o)}else if(qV(o)||GV(o)&&(o.type==="submit"||o.type==="image")){let d=o.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=o.getAttribute("formaction")||d.getAttribute("action");if(c=A?gh(A,t):null,a=o.getAttribute("formmethod")||d.getAttribute("method")||Vx,g=B1(o.getAttribute("formenctype"))||B1(d.getAttribute("enctype"))||Ox,N=new FormData(d,o),!KV()){let{name:k,type:O,value:B}=o;if(O==="image"){let W=k?k+".":"";N.append(W+"x","0"),N.append(W+"y","0")}else k&&N.append(k,B)}}else{if(s0(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Vx,c=null,g=Ox,b=o}return N&&g==="text/plain"&&(b=N,N=void 0),{action:c,method:a.toLowerCase(),encType:g,formData:N,body:b}}const JV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],e3=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],t3="6";try{window.__reactRouterVersion=t3}catch{}const Cj=oe.createContext({isTransitioning:!1});Cj.displayName="ViewTransition";const n3=oe.createContext(new Map);n3.displayName="Fetchers";const r3="startTransition",xT=YI[r3];function i3(o){let{basename:t,children:a,future:c,window:g}=o,N=oe.useRef();N.current==null&&(N.current=QI({window:g,v5Compat:!0}));let b=N.current,[d,A]=oe.useState({action:b.action,location:b.location}),{v7_startTransition:k}=c||{},O=oe.useCallback(B=>{k&&xT?xT(()=>A(B)):A(B)},[A,k]);return oe.useLayoutEffect(()=>b.listen(O),[b,O]),oe.useEffect(()=>FV(c),[c]),oe.createElement(UV,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:b,future:c})}const s3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nf=oe.forwardRef(function(t,a){let{onClick:c,relative:g,reloadDocument:N,replace:b,state:d,target:A,to:k,preventScrollReset:O,viewTransition:B}=t,W=uN(t,JV),{basename:ie}=oe.useContext(mc),pe,Oe=!1;if(typeof k=="string"&&a3.test(k)&&(pe=k,s3))try{let Ce=new URL(window.location.href),ze=k.startsWith("//")?new URL(Ce.protocol+k):new URL(k),Re=gh(ze.pathname,ie);ze.origin===Ce.origin&&Re!=null?k=Re+ze.search+ze.hash:Oe=!0}catch{ru(!1,'<Link to="'+k+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let Se=SV(k,{relative:g}),Pe=u3(k,{replace:b,state:d,target:A,preventScrollReset:O,relative:g,viewTransition:B});function De(Ce){c&&c(Ce),Ce.defaultPrevented||Pe(Ce)}return oe.createElement("a",pp({},W,{href:pe||Se,onClick:Oe||N?c:De,ref:a,target:A}))});Nf.displayName="Link";const o3=oe.forwardRef(function(t,a){let{"aria-current":c="page",caseSensitive:g=!1,className:N="",end:b=!1,style:d,to:A,viewTransition:k,children:O}=t,B=uN(t,QV),W=ey(A,{relative:B.relative}),ie=jf(),pe=oe.useContext(aN),{navigator:Oe,basename:Se}=oe.useContext(mc),Pe=pe!=null&&g3(W)&&k===!0,De=Oe.encodeLocation?Oe.encodeLocation(W).pathname:W.pathname,Ce=ie.pathname,ze=pe&&pe.navigation&&pe.navigation.location?pe.navigation.location.pathname:null;g||(Ce=Ce.toLowerCase(),ze=ze?ze.toLowerCase():null,De=De.toLowerCase()),ze&&Se&&(ze=gh(ze,Se)||ze);const Re=De!=="/"&&De.endsWith("/")?De.length-1:De.length;let Ze=Ce===De||!b&&Ce.startsWith(De)&&Ce.charAt(Re)==="/",tt=ze!=null&&(ze===De||!b&&ze.startsWith(De)&&ze.charAt(De.length)==="/"),ut={isActive:Ze,isPending:tt,isTransitioning:Pe},Rt=Ze?c:void 0,zt;typeof N=="function"?zt=N(ut):zt=[N,Ze?"active":null,tt?"pending":null,Pe?"transitioning":null].filter(Boolean).join(" ");let fn=typeof d=="function"?d(ut):d;return oe.createElement(Nf,pp({},B,{"aria-current":Rt,className:zt,ref:a,style:fn,to:A,viewTransition:k}),typeof O=="function"?O(ut):O)});o3.displayName="NavLink";const l3=oe.forwardRef((o,t)=>{let{fetcherKey:a,navigate:c,reloadDocument:g,replace:N,state:b,method:d=Vx,action:A,onSubmit:k,relative:O,preventScrollReset:B,viewTransition:W}=o,ie=uN(o,e3),pe=m3(),Oe=p3(A,{relative:O}),Se=d.toLowerCase()==="get"?"get":"post",Pe=De=>{if(k&&k(De),De.defaultPrevented)return;De.preventDefault();let Ce=De.nativeEvent.submitter,ze=(Ce==null?void 0:Ce.getAttribute("formmethod"))||d;pe(Ce||De.currentTarget,{fetcherKey:a,method:ze,navigate:c,replace:N,state:b,relative:O,preventScrollReset:B,viewTransition:W})};return oe.createElement("form",pp({ref:t,method:Se,action:Oe,onSubmit:g?k:Pe},ie))});l3.displayName="Form";var Yx;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Yx||(Yx={}));var _T;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(_T||(_T={}));function c3(o){return o+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function Nj(o){let t=oe.useContext(Xv);return t||Xi(!1,c3(o)),t}function u3(o,t){let{target:a,replace:c,state:g,preventScrollReset:N,relative:b,viewTransition:d}=t===void 0?{}:t,A=i0(),k=jf(),O=ey(o,{relative:b});return oe.useCallback(B=>{if(ZV(B,a)){B.preventDefault();let W=c!==void 0?c:Fv(k)===Fv(O);A(o,{replace:W,state:g,preventScrollReset:N,relative:b,viewTransition:d})}},[k,A,O,c,g,a,o,N,b,d])}function d3(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let h3=0,f3=()=>"__"+String(++h3)+"__";function m3(){let{router:o}=Nj(Yx.UseSubmit),{basename:t}=oe.useContext(mc),a=VV();return oe.useCallback(function(c,g){g===void 0&&(g={}),d3();let{action:N,method:b,encType:d,formData:A,body:k}=XV(c,t);if(g.navigate===!1){let O=g.fetcherKey||f3();o.fetch(O,a,g.action||N,{preventScrollReset:g.preventScrollReset,formData:A,body:k,formMethod:g.method||b,formEncType:g.encType||d,flushSync:g.flushSync})}else o.navigate(g.action||N,{preventScrollReset:g.preventScrollReset,formData:A,body:k,formMethod:g.method||b,formEncType:g.encType||d,replace:g.replace,state:g.state,fromRouteId:a,flushSync:g.flushSync,viewTransition:g.viewTransition})},[o,t,a])}function p3(o,t){let{relative:a}=t===void 0?{}:t,{basename:c}=oe.useContext(mc),g=oe.useContext(ad);g||Xi(!1,"useFormAction must be used inside a RouteContext");let[N]=g.matches.slice(-1),b=pp({},ey(o||".",{relative:a})),d=jf();if(o==null){b.search=d.search;let A=new URLSearchParams(b.search),k=A.getAll("index");if(k.some(B=>B==="")){A.delete("index"),k.filter(W=>W).forEach(W=>A.append("index",W));let B=A.toString();b.search=B?"?"+B:""}}return(!o||o===".")&&N.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(b.pathname=b.pathname==="/"?c:td([c,b.pathname])),Fv(b)}function g3(o,t){t===void 0&&(t={});let a=oe.useContext(Cj);a==null&&Xi(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Nj(Yx.useViewTransitionState),g=ey(o,{relative:t.relative});if(!a.isTransitioning)return!1;let N=gh(a.currentLocation.pathname,c)||a.currentLocation.pathname,b=gh(a.nextLocation.pathname,c)||a.nextLocation.pathname;return vC(g.pathname,b)!=null||vC(g.pathname,N)!=null}const v3="modulepreload",y3=function(o){return"/"+o},wT={},ty=function(t,a,c){let g=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),d=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));g=Promise.allSettled(a.map(A=>{if(A=y3(A),A in wT)return;wT[A]=!0;const k=A.endsWith(".css"),O=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${O}`))return;const B=document.createElement("link");if(B.rel=k?"stylesheet":v3,k||(B.as="script"),B.crossOrigin="",B.href=A,d&&B.setAttribute("nonce",d),document.head.appendChild(B),k)return new Promise((W,ie)=>{B.addEventListener("load",W),B.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${A}`)))})}))}function N(b){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=b,window.dispatchEvent(d),!d.defaultPrevented)throw b}return g.then(b=>{for(const d of b||[])d.status==="rejected"&&N(d.reason);return t().catch(N)})},b3=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ty(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)};class dN extends Error{constructor(t,a="FunctionsError",c){super(t),this.name=a,this.context=c}}class x3 extends dN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class CT extends dN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class NT extends dN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bC;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(bC||(bC={}));var _3=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};class w3{constructor(t,{headers:a={},customFetch:c,region:g=bC.Any}={}){this.url=t,this.headers=a,this.region=g,this.fetch=b3(c)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var c;return _3(this,void 0,void 0,function*(){try{const{headers:g,method:N,body:b}=a;let d={},{region:A}=a;A||(A=this.region);const k=new URL(`${this.url}/${t}`);A&&A!=="any"&&(d["x-region"]=A,k.searchParams.set("forceFunctionRegion",A));let O;b&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)&&(typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",O=b):typeof b=="string"?(d["Content-Type"]="text/plain",O=b):typeof FormData<"u"&&b instanceof FormData?O=b:(d["Content-Type"]="application/json",O=JSON.stringify(b)));const B=yield this.fetch(k.toString(),{method:N||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),g),body:O}).catch(Oe=>{throw new x3(Oe)}),W=B.headers.get("x-relay-error");if(W&&W==="true")throw new CT(B);if(!B.ok)throw new NT(B);let ie=((c=B.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),pe;return ie==="application/json"?pe=yield B.json():ie==="application/octet-stream"?pe=yield B.blob():ie==="text/event-stream"?pe=B:ie==="multipart/form-data"?pe=yield B.formData():pe=yield B.text(),{data:pe,error:null,response:B}}catch(g){return{data:null,error:g,response:g instanceof NT||g instanceof CT?g.context:void 0}}})}}var po={},hN={},a0={},ny={},o0={},l0={},C3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gp=C3();const N3=gp.fetch,Sj=gp.fetch.bind(gp),Ej=gp.Headers,S3=gp.Request,E3=gp.Response,xp=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ej,Request:S3,Response:E3,default:Sj,fetch:N3},Symbol.toStringTag,{value:"Module"})),D3=ZI(xp);var c0={};Object.defineProperty(c0,"__esModule",{value:!0});let T3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};c0.default=T3;var Dj=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l0,"__esModule",{value:!0});const P3=Dj(D3),j3=Dj(c0);let A3=class{constructor(t){var a,c;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(a=t.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=t.signal,this.isMaybeSingle=(c=t.isMaybeSingle)!==null&&c!==void 0?c:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=P3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=new Headers(this.headers),this.headers.set(t,a),this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let g=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async N=>{var b,d,A,k;let O=null,B=null,W=null,ie=N.status,pe=N.statusText;if(N.ok){if(this.method!=="HEAD"){const De=await N.text();De===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?B=De:B=JSON.parse(De))}const Se=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),Pe=(A=N.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");Se&&Pe&&Pe.length>1&&(W=parseInt(Pe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(O={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,W=null,ie=406,pe="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const Se=await N.text();try{O=JSON.parse(Se),Array.isArray(O)&&N.status===404&&(B=[],O=null,ie=200,pe="OK")}catch{N.status===404&&Se===""?(ie=204,pe="No Content"):O={message:Se}}if(O&&this.isMaybeSingle&&(!((k=O==null?void 0:O.details)===null||k===void 0)&&k.includes("0 rows"))&&(O=null,ie=200,pe="OK"),O&&this.shouldThrowOnError)throw new j3.default(O)}return{error:O,data:B,count:W,status:ie,statusText:pe}});return this.shouldThrowOnError||(g=g.catch(N=>{var b,d,A;return{error:{message:`${(b=N==null?void 0:N.name)!==null&&b!==void 0?b:"FetchError"}: ${N==null?void 0:N.message}`,details:`${(d=N==null?void 0:N.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(A=N==null?void 0:N.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),g.then(t,a)}returns(){return this}overrideTypes(){return this}};l0.default=A3;var k3=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(o0,"__esModule",{value:!0});const M3=k3(l0);let R3=class extends M3.default{select(t){let a=!1;const c=(t??"*").split("").map(g=>/\s/.test(g)&&!a?"":(g==='"'&&(a=!a),g)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:a=!0,nullsFirst:c,foreignTable:g,referencedTable:N=g}={}){const b=N?`${N}.order`:"order",d=this.url.searchParams.get(b);return this.url.searchParams.set(b,`${d?`${d},`:""}${t}.${a?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:c=a}={}){const g=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(g,`${t}`),this}range(t,a,{foreignTable:c,referencedTable:g=c}={}){const N=typeof g>"u"?"offset":`${g}.offset`,b=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(N,`${t}`),this.url.searchParams.set(b,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:a=!1,settings:c=!1,buffers:g=!1,wal:N=!1,format:b="text"}={}){var d;const A=[t?"analyze":null,a?"verbose":null,c?"settings":null,g?"buffers":null,N?"wal":null].filter(Boolean).join("|"),k=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${b}; for="${k}"; options=${A};`),b==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};o0.default=R3;var L3=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ny,"__esModule",{value:!0});const I3=L3(o0);let V3=class extends I3.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const c=Array.from(new Set(a)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(t,`in.(${c})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:c,type:g}={}){let N="";g==="plain"?N="pl":g==="phrase"?N="ph":g==="websearch"&&(N="w");const b=c===void 0?"":`(${c})`;return this.url.searchParams.append(t,`${N}fts${b}.${a}`),this}match(t){return Object.entries(t).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(t,a,c){return this.url.searchParams.append(t,`not.${a}.${c}`),this}or(t,{foreignTable:a,referencedTable:c=a}={}){const g=c?`${c}.or`:"or";return this.url.searchParams.append(g,`(${t})`),this}filter(t,a,c){return this.url.searchParams.append(t,`${a}.${c}`),this}};ny.default=V3;var O3=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(a0,"__esModule",{value:!0});const Sv=O3(ny);let z3=class{constructor(t,{headers:a={},schema:c,fetch:g}){this.url=t,this.headers=new Headers(a),this.schema=c,this.fetch=g}select(t,{head:a=!1,count:c}={}){const g=a?"HEAD":"GET";let N=!1;const b=(t??"*").split("").map(d=>/\s/.test(d)&&!N?"":(d==='"'&&(N=!N),d)).join("");return this.url.searchParams.set("select",b),c&&this.headers.append("Prefer",`count=${c}`),new Sv.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:a,defaultToNull:c=!0}={}){var g;const N="POST";if(a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const b=t.reduce((d,A)=>d.concat(Object.keys(A)),[]);if(b.length>0){const d=[...new Set(b)].map(A=>`"${A}"`);this.url.searchParams.set("columns",d.join(","))}}return new Sv.default({method:N,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(t,{onConflict:a,ignoreDuplicates:c=!1,count:g,defaultToNull:N=!0}={}){var b;const d="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),g&&this.headers.append("Prefer",`count=${g}`),N||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const A=t.reduce((k,O)=>k.concat(Object.keys(O)),[]);if(A.length>0){const k=[...new Set(A)].map(O=>`"${O}"`);this.url.searchParams.set("columns",k.join(","))}}return new Sv.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}update(t,{count:a}={}){var c;const g="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new Sv.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:t}={}){var a;const c="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Sv.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};a0.default=z3;var Tj=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(hN,"__esModule",{value:!0});const B3=Tj(a0),F3=Tj(ny);let U3=class Pj{constructor(t,{headers:a={},schema:c,fetch:g}={}){this.url=t,this.headers=new Headers(a),this.schemaName=c,this.fetch=g}from(t){const a=new URL(`${this.url}/${t}`);return new B3.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Pj(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:c=!1,get:g=!1,count:N}={}){var b;let d;const A=new URL(`${this.url}/rpc/${t}`);let k;c||g?(d=c?"HEAD":"GET",Object.entries(a).filter(([B,W])=>W!==void 0).map(([B,W])=>[B,Array.isArray(W)?`{${W.join(",")}}`:`${W}`]).forEach(([B,W])=>{A.searchParams.append(B,W)})):(d="POST",k=a);const O=new Headers(this.headers);return N&&O.set("Prefer",`count=${N}`),new F3.default({method:d,url:A,headers:O,schema:this.schemaName,body:k,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};hN.default=U3;var _p=Bo&&Bo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(po,"__esModule",{value:!0});po.PostgrestError=po.PostgrestBuilder=po.PostgrestTransformBuilder=po.PostgrestFilterBuilder=po.PostgrestQueryBuilder=po.PostgrestClient=void 0;const jj=_p(hN);po.PostgrestClient=jj.default;const Aj=_p(a0);po.PostgrestQueryBuilder=Aj.default;const kj=_p(ny);po.PostgrestFilterBuilder=kj.default;const Mj=_p(o0);po.PostgrestTransformBuilder=Mj.default;const Rj=_p(l0);po.PostgrestBuilder=Rj.default;const Lj=_p(c0);po.PostgrestError=Lj.default;var $3=po.default={PostgrestClient:jj.default,PostgrestQueryBuilder:Aj.default,PostgrestFilterBuilder:kj.default,PostgrestTransformBuilder:Mj.default,PostgrestBuilder:Rj.default,PostgrestError:Lj.default};const{PostgrestClient:q3,PostgrestQueryBuilder:FU,PostgrestFilterBuilder:UU,PostgrestTransformBuilder:$U,PostgrestBuilder:qU,PostgrestError:HU}=$3;class H3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const a=parseInt(process.versions.node.split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const c=this.getWebSocketConstructor();return new c(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const G3="2.15.1",W3=`realtime-js/${G3}`,Z3="1.0.0",xC=1e4,K3=1e3,Y3=100;var kv;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(kv||(kv={}));var Bs;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Bs||(Bs={}));var dc;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(dc||(dc={}));var _C;(function(o){o.websocket="websocket"})(_C||(_C={}));var Sf;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Sf||(Sf={}));class X3{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),c=new TextDecoder;return this._decodeBroadcast(t,a,c)}_decodeBroadcast(t,a,c){const g=a.getUint8(1),N=a.getUint8(2);let b=this.HEADER_LENGTH+2;const d=c.decode(t.slice(b,b+g));b=b+g;const A=c.decode(t.slice(b,b+N));b=b+N;const k=JSON.parse(c.decode(t.slice(b,t.byteLength)));return{ref:null,topic:d,event:A,payload:k}}}class Ij{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ti;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ti||(Ti={}));const ST=(o,t,a={})=>{var c;const g=(c=a.skipTypes)!==null&&c!==void 0?c:[];return Object.keys(t).reduce((N,b)=>(N[b]=J3(b,o,t,g),N),{})},J3=(o,t,a,c)=>{const g=t.find(d=>d.name===o),N=g==null?void 0:g.type,b=a[o];return N&&!c.includes(N)?Vj(N,b):wC(b)},Vj=(o,t)=>{if(o.charAt(0)==="_"){const a=o.slice(1,o.length);return nO(t,a)}switch(o){case Ti.bool:return Q3(t);case Ti.float4:case Ti.float8:case Ti.int2:case Ti.int4:case Ti.int8:case Ti.numeric:case Ti.oid:return eO(t);case Ti.json:case Ti.jsonb:return tO(t);case Ti.timestamp:return rO(t);case Ti.abstime:case Ti.date:case Ti.daterange:case Ti.int4range:case Ti.int8range:case Ti.money:case Ti.reltime:case Ti.text:case Ti.time:case Ti.timestamptz:case Ti.timetz:case Ti.tsrange:case Ti.tstzrange:return wC(t);default:return wC(t)}},wC=o=>o,Q3=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},eO=o=>{if(typeof o=="string"){const t=parseFloat(o);if(!Number.isNaN(t))return t}return o},tO=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(t){return console.log(`JSON parse error: ${t}`),o}return o},nO=(o,t)=>{if(typeof o!="string")return o;const a=o.length-1,c=o[a];if(o[0]==="{"&&c==="}"){let N;const b=o.slice(1,a);try{N=JSON.parse("["+b+"]")}catch{N=b?b.split(","):[]}return N.map(d=>Vj(t,d))}return o},rO=o=>typeof o=="string"?o.replace(" ","T"):o,Oj=o=>{let t=o;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F1{constructor(t,a,c={},g=xC){this.channel=t,this.event=a,this.payload=c,this.timeout=g,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var c;return this._hasReceived(t)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(c=>c.status===t).forEach(c=>c.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ET;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(ET||(ET={}));class Mv{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},g=>{const{onJoin:N,onLeave:b,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mv.syncState(this.state,g,N,b),this.pendingDiffs.forEach(A=>{this.state=Mv.syncDiff(this.state,A,N,b)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},g=>{const{onJoin:N,onLeave:b,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(g):(this.state=Mv.syncDiff(this.state,g,N,b),d())}),this.onJoin((g,N,b)=>{this.channel._trigger("presence",{event:"join",key:g,currentPresences:N,newPresences:b})}),this.onLeave((g,N,b)=>{this.channel._trigger("presence",{event:"leave",key:g,currentPresences:N,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,c,g){const N=this.cloneDeep(t),b=this.transformState(a),d={},A={};return this.map(N,(k,O)=>{b[k]||(A[k]=O)}),this.map(b,(k,O)=>{const B=N[k];if(B){const W=O.map(Se=>Se.presence_ref),ie=B.map(Se=>Se.presence_ref),pe=O.filter(Se=>ie.indexOf(Se.presence_ref)<0),Oe=B.filter(Se=>W.indexOf(Se.presence_ref)<0);pe.length>0&&(d[k]=pe),Oe.length>0&&(A[k]=Oe)}else d[k]=O}),this.syncDiff(N,{joins:d,leaves:A},c,g)}static syncDiff(t,a,c,g){const{joins:N,leaves:b}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),g||(g=()=>{}),this.map(N,(d,A)=>{var k;const O=(k=t[d])!==null&&k!==void 0?k:[];if(t[d]=this.cloneDeep(A),O.length>0){const B=t[d].map(ie=>ie.presence_ref),W=O.filter(ie=>B.indexOf(ie.presence_ref)<0);t[d].unshift(...W)}c(d,O,A)}),this.map(b,(d,A)=>{let k=t[d];if(!k)return;const O=A.map(B=>B.presence_ref);k=k.filter(B=>O.indexOf(B.presence_ref)<0),t[d]=k,g(d,k,A),k.length===0&&delete t[d]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(c=>a(c,t[c]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,c)=>{const g=t[c];return"metas"in g?a[c]=g.metas.map(N=>(N.presence_ref=N.phx_ref,delete N.phx_ref,delete N.phx_ref_prev,N)):a[c]=g,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var DT;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(DT||(DT={}));var Rv;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Rv||(Rv={}));var ed;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ed||(ed={}));class fN{constructor(t,a={config:{}},c){this.topic=t,this.params=a,this.socket=c,this.bindings={},this.state=Bs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new F1(this,dc.join,this.params,this.timeout),this.rejoinTimer=new Ij(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bs.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Bs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dc.reply,{},(g,N)=>{this._trigger(this._replyEventName(N),g)}),this.presence=new Mv(this),this.broadcastEndpointURL=Oj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var c,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Bs.closed){const{config:{broadcast:N,presence:b,private:d}}=this.params,A=(g=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(W=>W.filter))!==null&&g!==void 0?g:[],k=!!this.bindings[Rv.PRESENCE]&&this.bindings[Rv.PRESENCE].length>0,O={},B={broadcast:N,presence:Object.assign(Object.assign({},b),{enabled:k}),postgres_changes:A,private:d};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(W=>t==null?void 0:t(ed.CHANNEL_ERROR,W)),this._onClose(()=>t==null?void 0:t(ed.CLOSED)),this.updateJoinPayload(Object.assign({config:B},O)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:W})=>{var ie;if(this.socket.setAuth(),W===void 0){t==null||t(ed.SUBSCRIBED);return}else{const pe=this.bindings.postgres_changes,Oe=(ie=pe==null?void 0:pe.length)!==null&&ie!==void 0?ie:0,Se=[];for(let Pe=0;Pe<Oe;Pe++){const De=pe[Pe],{filter:{event:Ce,schema:ze,table:Re,filter:Ze}}=De,tt=W&&W[Pe];if(tt&&tt.event===Ce&&tt.schema===ze&&tt.table===Re&&tt.filter===Ze)Se.push(Object.assign(Object.assign({},De),{id:tt.id}));else{this.unsubscribe(),this.state=Bs.errored,t==null||t(ed.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Se,t&&t(ed.SUBSCRIBED);return}}).receive("error",W=>{this.state=Bs.errored,t==null||t(ed.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(W).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ed.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,c){return this.state===Bs.joined&&t===Rv.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,c)}async send(t,a={}){var c,g;if(!this._canPush()&&t.type==="broadcast"){const{event:N,payload:b}=t,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:N,payload:b,private:this.private}]})};try{const k=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((g=k.body)===null||g===void 0?void 0:g.cancel()),k.ok?"ok":"error"}catch(k){return k.name==="AbortError"?"timed out":"error"}}else return new Promise(N=>{var b,d,A;const k=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((A=(d=(b=this.params)===null||b===void 0?void 0:b.config)===null||d===void 0?void 0:d.broadcast)===null||A===void 0)&&A.ack)&&N("ok"),k.receive("ok",()=>N("ok")),k.receive("error",()=>N("error")),k.receive("timeout",()=>N("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bs.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dc.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(g=>{c=new F1(this,dc.leave,{},t),c.receive("ok",()=>{a(),g("ok")}).receive("timeout",()=>{a(),g("timed out")}).receive("error",()=>{g("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c==null||c.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bs.closed,this.bindings={}}async _fetchWithTimeout(t,a,c){const g=new AbortController,N=setTimeout(()=>g.abort(),c),b=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:g.signal}));return clearTimeout(N),b}_push(t,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let g=new F1(this,t,a,c);return this._canPush()?g.send():this._addToPushBuffer(g),g}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Y3){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,c){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,c){var g,N;const b=t.toLocaleLowerCase(),{close:d,error:A,leave:k,join:O}=dc;if(c&&[d,A,k,O].indexOf(b)>=0&&c!==this._joinRef())return;let W=this._onMessage(b,a,c);if(a&&!W)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(g=this.bindings.postgres_changes)===null||g===void 0||g.filter(ie=>{var pe,Oe,Se;return((pe=ie.filter)===null||pe===void 0?void 0:pe.event)==="*"||((Se=(Oe=ie.filter)===null||Oe===void 0?void 0:Oe.event)===null||Se===void 0?void 0:Se.toLocaleLowerCase())===b}).map(ie=>ie.callback(W,c)):(N=this.bindings[b])===null||N===void 0||N.filter(ie=>{var pe,Oe,Se,Pe,De,Ce;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in ie){const ze=ie.id,Re=(pe=ie.filter)===null||pe===void 0?void 0:pe.event;return ze&&((Oe=a.ids)===null||Oe===void 0?void 0:Oe.includes(ze))&&(Re==="*"||(Re==null?void 0:Re.toLocaleLowerCase())===((Se=a.data)===null||Se===void 0?void 0:Se.type.toLocaleLowerCase()))}else{const ze=(De=(Pe=ie==null?void 0:ie.filter)===null||Pe===void 0?void 0:Pe.event)===null||De===void 0?void 0:De.toLocaleLowerCase();return ze==="*"||ze===((Ce=a==null?void 0:a.event)===null||Ce===void 0?void 0:Ce.toLocaleLowerCase())}else return ie.type.toLocaleLowerCase()===b}).map(ie=>{if(typeof W=="object"&&"ids"in W){const pe=W.data,{schema:Oe,table:Se,commit_timestamp:Pe,type:De,errors:Ce}=pe;W=Object.assign(Object.assign({},{schema:Oe,table:Se,commit_timestamp:Pe,eventType:De,new:{},old:{},errors:Ce}),this._getPayloadRecords(pe))}ie.callback(W,c)})}_isClosed(){return this.state===Bs.closed}_isJoined(){return this.state===Bs.joined}_isJoining(){return this.state===Bs.joining}_isLeaving(){return this.state===Bs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,c){const g=t.toLocaleLowerCase(),N={type:g,filter:a,callback:c};return this.bindings[g]?this.bindings[g].push(N):this.bindings[g]=[N],this}_off(t,a){const c=t.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(g=>{var N;return!(((N=g.type)===null||N===void 0?void 0:N.toLocaleLowerCase())===c&&fN.isEqual(g.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const c in t)if(t[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(dc.close,{},t)}_onError(t){this._on(dc.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=ST(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=ST(t.columns,t.old_record)),a}}const TT=()=>{},Ex={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iO=[1e3,2e3,5e3,1e4],sO=1e4,aO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oO{constructor(t,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xC,this.transport=null,this.heartbeatIntervalMs=Ex.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=TT,this.ref=0,this.reconnectTimer=null,this.logger=TT,this.conn=null,this.sendBuffer=[],this.serializer=new X3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=g=>{let N;return g?N=g:typeof fetch>"u"?N=(...b)=>ty(async()=>{const{default:d}=await Promise.resolve().then(()=>xp);return{default:d}},void 0).then(({default:d})=>d(...b)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):N=fetch,(...b)=>N(...b)},!(!((c=a==null?void 0:a.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${_C.websocket}`,this.httpEndpoint=Oj(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=H3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Z3}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},t?this.conn.close(t,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,c){this.logger(t,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case kv.connecting:return Sf.Connecting;case kv.open:return Sf.Open;case kv.closing:return Sf.Closing;default:return Sf.Closed}}isConnected(){return this.connectionState()===Sf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const c=`realtime:${t}`,g=this.getChannels().find(N=>N.topic===c);if(g)return g;{const N=new fN(`realtime:${t}`,a,this);return this.channels.push(N),N}}push(t){const{topic:a,event:c,payload:g,ref:N}=t,b=()=>{this.encode(t,d=>{var A;(A=this.conn)===null||A===void 0||A.send(d)})};this.log("push",`${a} ${c} (${N})`,g),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(K3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Ex.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(c=>c.topic===t&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{a.topic==="phoenix"&&a.event==="phx_reply"&&this.heartbeatCallback(a.payload.status==="ok"?"ok":"error"),a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:g,payload:N,ref:b}=a,d=b?`(${b})`:"",A=N.status||"";this.log("receive",`${A} ${c} ${g} ${d}`.trim(),N),this.channels.filter(k=>k._isMember(c)).forEach(k=>k._trigger(g,N,b)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(dc.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const c=t.match(/\?/)?"&":"?",g=new URLSearchParams(a);return`${t}${c}${g}`}_workerObjectUrl(t){let a;if(t)a=t;else{const c=new Blob([aO],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const g={access_token:a,version:W3};a&&c.updateJoinPayload(g),c.joinedOnce&&c._isJoined()&&c._push(dc.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(c=>{try{c(a)}catch(g){this.log("error",`error in ${t} callback`,g)}})}catch(c){this.log("error",`error triggering ${t} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new Ij(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ex.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,c,g,N,b,d,A,k;if(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(c=t==null?void 0:t.timeout)!==null&&c!==void 0?c:xC,this.heartbeatIntervalMs=(g=t==null?void 0:t.heartbeatIntervalMs)!==null&&g!==void 0?g:Ex.HEARTBEAT_INTERVAL,this.worker=(N=t==null?void 0:t.worker)!==null&&N!==void 0?N:!1,this.accessToken=(b=t==null?void 0:t.accessToken)!==null&&b!==void 0?b:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:O=>iO[O-1]||sO,this.encode=(A=t==null?void 0:t.encode)!==null&&A!==void 0?A:(O,B)=>B(JSON.stringify(O)),this.decode=(k=t==null?void 0:t.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class mN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Fs(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class lO extends mN{constructor(t,a,c){super(t),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class CC extends mN{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var cO=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};const zj=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ty(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)},uO=()=>cO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ty(()=>Promise.resolve().then(()=>xp),void 0)).Response:Response}),NC=o=>{if(Array.isArray(o))return o.map(a=>NC(a));if(typeof o=="function"||o!==Object(o))return o;const t={};return Object.entries(o).forEach(([a,c])=>{const g=a.replace(/([-_][a-z])/gi,N=>N.toUpperCase().replace(/[-_]/g,""));t[g]=NC(c)}),t},dO=o=>{if(typeof o!="object"||o===null)return!1;const t=Object.getPrototypeOf(o);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Af=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};const U1=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),hO=(o,t,a)=>Af(void 0,void 0,void 0,function*(){const c=yield uO();o instanceof c&&!(a!=null&&a.noResolveJson)?o.json().then(g=>{const N=o.status||500,b=(g==null?void 0:g.statusCode)||N+"";t(new lO(U1(g),N,b))}).catch(g=>{t(new CC(U1(g),g))}):t(new CC(U1(o),o))}),fO=(o,t,a,c)=>{const g={method:o,headers:(t==null?void 0:t.headers)||{}};return o==="GET"||!c?g:(dO(c)?(g.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),g.body=JSON.stringify(c)):g.body=c,t!=null&&t.duplex&&(g.duplex=t.duplex),Object.assign(Object.assign({},g),a))};function ry(o,t,a,c,g,N){return Af(this,void 0,void 0,function*(){return new Promise((b,d)=>{o(a,fO(t,c,g,N)).then(A=>{if(!A.ok)throw A;return c!=null&&c.noResolveJson?A:A.json()}).then(A=>b(A)).catch(A=>hO(A,d,c))})})}function Xx(o,t,a,c){return Af(this,void 0,void 0,function*(){return ry(o,"GET",t,a,c)})}function Qc(o,t,a,c,g){return Af(this,void 0,void 0,function*(){return ry(o,"POST",t,c,g,a)})}function SC(o,t,a,c,g){return Af(this,void 0,void 0,function*(){return ry(o,"PUT",t,c,g,a)})}function mO(o,t,a,c){return Af(this,void 0,void 0,function*(){return ry(o,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function Bj(o,t,a,c,g){return Af(this,void 0,void 0,function*(){return ry(o,"DELETE",t,c,g,a)})}var Ya=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};const pO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},PT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gO{constructor(t,a={},c,g){this.url=t,this.headers=a,this.bucketId=c,this.fetch=zj(g)}uploadOrUpdate(t,a,c,g){return Ya(this,void 0,void 0,function*(){try{let N;const b=Object.assign(Object.assign({},PT),g);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(b.upsert)});const A=b.metadata;typeof Blob<"u"&&c instanceof Blob?(N=new FormData,N.append("cacheControl",b.cacheControl),A&&N.append("metadata",this.encodeMetadata(A)),N.append("",c)):typeof FormData<"u"&&c instanceof FormData?(N=c,N.append("cacheControl",b.cacheControl),A&&N.append("metadata",this.encodeMetadata(A))):(N=c,d["cache-control"]=`max-age=${b.cacheControl}`,d["content-type"]=b.contentType,A&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),g!=null&&g.headers&&(d=Object.assign(Object.assign({},d),g.headers));const k=this._removeEmptyFolders(a),O=this._getFinalPath(k),B=yield(t=="PUT"?SC:Qc)(this.fetch,`${this.url}/object/${O}`,N,Object.assign({headers:d},b!=null&&b.duplex?{duplex:b.duplex}:{}));return{data:{path:k,id:B.Id,fullPath:B.Key},error:null}}catch(N){if(Fs(N))return{data:null,error:N};throw N}})}upload(t,a,c){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,c)})}uploadToSignedUrl(t,a,c,g){return Ya(this,void 0,void 0,function*(){const N=this._removeEmptyFolders(t),b=this._getFinalPath(N),d=new URL(this.url+`/object/upload/sign/${b}`);d.searchParams.set("token",a);try{let A;const k=Object.assign({upsert:PT.upsert},g),O=Object.assign(Object.assign({},this.headers),{"x-upsert":String(k.upsert)});typeof Blob<"u"&&c instanceof Blob?(A=new FormData,A.append("cacheControl",k.cacheControl),A.append("",c)):typeof FormData<"u"&&c instanceof FormData?(A=c,A.append("cacheControl",k.cacheControl)):(A=c,O["cache-control"]=`max-age=${k.cacheControl}`,O["content-type"]=k.contentType);const B=yield SC(this.fetch,d.toString(),A,{headers:O});return{data:{path:N,fullPath:B.Key},error:null}}catch(A){if(Fs(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(t,a){return Ya(this,void 0,void 0,function*(){try{let c=this._getFinalPath(t);const g=Object.assign({},this.headers);a!=null&&a.upsert&&(g["x-upsert"]="true");const N=yield Qc(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:g}),b=new URL(this.url+N.url),d=b.searchParams.get("token");if(!d)throw new mN("No token returned by API");return{data:{signedUrl:b.toString(),path:t,token:d},error:null}}catch(c){if(Fs(c))return{data:null,error:c};throw c}})}update(t,a,c){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,c)})}move(t,a,c){return Ya(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(g){if(Fs(g))return{data:null,error:g};throw g}})}copy(t,a,c){return Ya(this,void 0,void 0,function*(){try{return{data:{path:(yield Qc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(g){if(Fs(g))return{data:null,error:g};throw g}})}createSignedUrl(t,a,c){return Ya(this,void 0,void 0,function*(){try{let g=this._getFinalPath(t),N=yield Qc(this.fetch,`${this.url}/object/sign/${g}`,Object.assign({expiresIn:a},c!=null&&c.transform?{transform:c.transform}:{}),{headers:this.headers});const b=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return N={signedUrl:encodeURI(`${this.url}${N.signedURL}${b}`)},{data:N,error:null}}catch(g){if(Fs(g))return{data:null,error:g};throw g}})}createSignedUrls(t,a,c){return Ya(this,void 0,void 0,function*(){try{const g=yield Qc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),N=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return{data:g.map(b=>Object.assign(Object.assign({},b),{signedUrl:b.signedURL?encodeURI(`${this.url}${b.signedURL}${N}`):null})),error:null}}catch(g){if(Fs(g))return{data:null,error:g};throw g}})}download(t,a){return Ya(this,void 0,void 0,function*(){const g=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",N=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),b=N?`?${N}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield Xx(this.fetch,`${this.url}/${g}/${d}${b}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(Fs(d))return{data:null,error:d};throw d}})}info(t){return Ya(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const c=yield Xx(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:NC(c),error:null}}catch(c){if(Fs(c))return{data:null,error:c};throw c}})}exists(t){return Ya(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield mO(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(Fs(c)&&c instanceof CC){const g=c.originalError;if([400,404].includes(g==null?void 0:g.status))return{data:!1,error:c}}throw c}})}getPublicUrl(t,a){const c=this._getFinalPath(t),g=[],N=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";N!==""&&g.push(N);const d=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});A!==""&&g.push(A);let k=g.join("&");return k!==""&&(k=`?${k}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${c}${k}`)}}}remove(t){return Ya(this,void 0,void 0,function*(){try{return{data:yield Bj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}list(t,a,c){return Ya(this,void 0,void 0,function*(){try{const g=Object.assign(Object.assign(Object.assign({},pO),a),{prefix:t||""});return{data:yield Qc(this.fetch,`${this.url}/object/list/${this.bucketId}`,g,{headers:this.headers},c),error:null}}catch(g){if(Fs(g))return{data:null,error:g};throw g}})}listV2(t,a){return Ya(this,void 0,void 0,function*(){try{const c=Object.assign({},t);return{data:yield Qc(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(Fs(c))return{data:null,error:c};throw c}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const vO="2.11.0",yO={"X-Client-Info":`storage-js/${vO}`};var Qm=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};class bO{constructor(t,a={},c,g){const N=new URL(t);g!=null&&g.useNewHostname&&/supabase\.(co|in|red)$/.test(N.hostname)&&!N.hostname.includes("storage.supabase.")&&(N.hostname=N.hostname.replace("supabase.","storage.supabase.")),this.url=N.href,this.headers=Object.assign(Object.assign({},yO),a),this.fetch=zj(c)}listBuckets(){return Qm(this,void 0,void 0,function*(){try{return{data:yield Xx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Fs(t))return{data:null,error:t};throw t}})}getBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield Xx(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return Qm(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Fs(c))return{data:null,error:c};throw c}})}updateBucket(t,a){return Qm(this,void 0,void 0,function*(){try{return{data:yield SC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Fs(c))return{data:null,error:c};throw c}})}emptyBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield Bj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}}class xO extends bO{constructor(t,a={},c,g){super(t,a,c,g)}from(t){return new gO(this.url,this.headers,t,this.fetch)}}const _O="2.56.0";let Pv="";typeof Deno<"u"?Pv="deno":typeof document<"u"?Pv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pv="react-native":Pv="node";const wO={"X-Client-Info":`supabase-js-${Pv}/${_O}`},CO={headers:wO},NO={schema:"public"},SO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EO={};var DO=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};const TO=o=>{let t;return o?t=o:typeof fetch>"u"?t=Sj:t=fetch,(...a)=>t(...a)},PO=()=>typeof Headers>"u"?Ej:Headers,jO=(o,t,a)=>{const c=TO(a),g=PO();return(N,b)=>DO(void 0,void 0,void 0,function*(){var d;const A=(d=yield t())!==null&&d!==void 0?d:o;let k=new g(b==null?void 0:b.headers);return k.has("apikey")||k.set("apikey",o),k.has("Authorization")||k.set("Authorization",`Bearer ${A}`),c(N,Object.assign(Object.assign({},b),{headers:k}))})};var AO=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};function kO(o){return o.endsWith("/")?o:o+"/"}function MO(o,t){var a,c;const{db:g,auth:N,realtime:b,global:d}=o,{db:A,auth:k,realtime:O,global:B}=t,W={db:Object.assign(Object.assign({},A),g),auth:Object.assign(Object.assign({},k),N),realtime:Object.assign(Object.assign({},O),b),storage:{},global:Object.assign(Object.assign(Object.assign({},B),d),{headers:Object.assign(Object.assign({},(a=B==null?void 0:B.headers)!==null&&a!==void 0?a:{}),(c=d==null?void 0:d.headers)!==null&&c!==void 0?c:{})}),accessToken:()=>AO(this,void 0,void 0,function*(){return""})};return o.accessToken?W.accessToken=o.accessToken:delete W.accessToken,W}const Fj="2.71.1",ip=30*1e3,EC=3,$1=EC*ip,RO="http://localhost:9999",LO="supabase.auth.token",IO={"X-Client-Info":`gotrue-js/${Fj}`},DC="X-Supabase-Api-Version",Uj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OO=10*60*1e3;class pN extends Error{constructor(t,a,c){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function sr(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class zO extends pN{constructor(t,a,c){super(t,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function BO(o){return sr(o)&&o.name==="AuthApiError"}class $j extends pN{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class bh extends pN{constructor(t,a,c,g){super(t,c,g),this.name=a,this.status=c}}class dh extends bh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FO(o){return sr(o)&&o.name==="AuthSessionMissingError"}class Dx extends bh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tx extends bh{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Px extends bh{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function UO(o){return sr(o)&&o.name==="AuthImplicitGrantRedirectError"}class jT extends bh{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TC extends bh{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function q1(o){return sr(o)&&o.name==="AuthRetryableFetchError"}class AT extends bh{constructor(t,a,c){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class PC extends bh{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kT=` 	
\r=`.split(""),$O=(()=>{const o=new Array(128);for(let t=0;t<o.length;t+=1)o[t]=-1;for(let t=0;t<kT.length;t+=1)o[kT[t].charCodeAt(0)]=-2;for(let t=0;t<Jx.length;t+=1)o[Jx[t].charCodeAt(0)]=t;return o})();function MT(o,t,a){if(o!==null)for(t.queue=t.queue<<8|o,t.queuedBits+=8;t.queuedBits>=6;){const c=t.queue>>t.queuedBits-6&63;a(Jx[c]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const c=t.queue>>t.queuedBits-6&63;a(Jx[c]),t.queuedBits-=6}}function qj(o,t,a){const c=$O[o];if(c>-1)for(t.queue=t.queue<<6|c,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function RT(o){const t=[],a=b=>{t.push(String.fromCodePoint(b))},c={utf8seq:0,codepoint:0},g={queue:0,queuedBits:0},N=b=>{GO(b,c,a)};for(let b=0;b<o.length;b+=1)qj(o.charCodeAt(b),g,N);return t.join("")}function qO(o,t){if(o<=127){t(o);return}else if(o<=2047){t(192|o>>6),t(128|o&63);return}else if(o<=65535){t(224|o>>12),t(128|o>>6&63),t(128|o&63);return}else if(o<=1114111){t(240|o>>18),t(128|o>>12&63),t(128|o>>6&63),t(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function HO(o,t){for(let a=0;a<o.length;a+=1){let c=o.charCodeAt(a);if(c>55295&&c<=56319){const g=(c-55296)*1024&65535;c=(o.charCodeAt(a+1)-56320&65535|g)+65536,a+=1}qO(c,t)}}function GO(o,t,a){if(t.utf8seq===0){if(o<=127){a(o);return}for(let c=1;c<6;c+=1)if(!(o>>7-c&1)){t.utf8seq=c;break}if(t.utf8seq===2)t.codepoint=o&31;else if(t.utf8seq===3)t.codepoint=o&15;else if(t.utf8seq===4)t.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|o&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function WO(o){const t=[],a={queue:0,queuedBits:0},c=g=>{t.push(g)};for(let g=0;g<o.length;g+=1)qj(o.charCodeAt(g),a,c);return new Uint8Array(t)}function ZO(o){const t=[];return HO(o,a=>t.push(a)),new Uint8Array(t)}function KO(o){const t=[],a={queue:0,queuedBits:0},c=g=>{t.push(g)};return o.forEach(g=>MT(g,a,c)),MT(null,a,c),t.join("")}function YO(o){return Math.round(Date.now()/1e3)+o}function XO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const t=Math.random()*16|0;return(o=="x"?t:t&3|8).toString(16)})}const cc=()=>typeof window<"u"&&typeof document<"u",bf={tested:!1,writable:!1},Hj=()=>{if(!cc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bf.tested)return bf.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),bf.tested=!0,bf.writable=!0}catch{bf.tested=!0,bf.writable=!1}return bf.writable};function JO(o){const t={},a=new URL(o);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((g,N)=>{t[N]=g})}catch{}return a.searchParams.forEach((c,g)=>{t[g]=c}),t}const Gj=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ty(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)},QO=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",sp=async(o,t,a)=>{await o.setItem(t,JSON.stringify(a))},xf=async(o,t)=>{const a=await o.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},uh=async(o,t)=>{await o.removeItem(t)};class u0{constructor(){this.promise=new u0.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}u0.promiseConstructor=Promise;function H1(o){const t=o.split(".");if(t.length!==3)throw new PC("Invalid JWT structure");for(let c=0;c<t.length;c++)if(!VO.test(t[c]))throw new PC("JWT not in base64url format");return{header:JSON.parse(RT(t[0])),payload:JSON.parse(RT(t[1])),signature:WO(t[2]),raw:{header:t[0],payload:t[1]}}}async function e5(o){return await new Promise(t=>{setTimeout(()=>t(null),o)})}function t5(o,t){return new Promise((c,g)=>{(async()=>{for(let N=0;N<1/0;N++)try{const b=await o(N);if(!t(N,null,b)){c(b);return}}catch(b){if(!t(N,b)){g(b);return}}})()})}function n5(o){return("0"+o.toString(16)).substr(-2)}function r5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let g="";for(let N=0;N<56;N++)g+=a.charAt(Math.floor(Math.random()*c));return g}return crypto.getRandomValues(t),Array.from(t,n5).join("")}async function i5(o){const a=new TextEncoder().encode(o),c=await crypto.subtle.digest("SHA-256",a),g=new Uint8Array(c);return Array.from(g).map(N=>String.fromCharCode(N)).join("")}async function s5(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const a=await i5(o);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ep(o,t,a=!1){const c=r5();let g=c;a&&(g+="/PASSWORD_RECOVERY"),await sp(o,`${t}-code-verifier`,g);const N=await s5(c);return[N,c===N?"plain":"s256"]}const a5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function o5(o){const t=o.headers.get(DC);if(!t||!t.match(a5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function l5(o){if(!o)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(o<=t)throw new Error("JWT has expired")}function c5(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const u5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tp(o){if(!u5.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function G1(){const o={};return new Proxy(o,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LT(o){return JSON.parse(JSON.stringify(o))}var d5=function(o,t){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(o);g<c.length;g++)t.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(o,c[g])&&(a[c[g]]=o[c[g]]);return a};const wf=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),h5=[502,503,504];async function IT(o){var t;if(!QO(o))throw new TC(wf(o),0);if(h5.includes(o.status))throw new TC(wf(o),o.status);let a;try{a=await o.json()}catch(N){throw new $j(wf(N),N)}let c;const g=o5(o);if(g&&g.getTime()>=Uj["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new AT(wf(a),o.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(c==="session_not_found")throw new dh}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((N,b)=>N&&typeof b=="string",!0))throw new AT(wf(a),o.status,a.weak_password.reasons);throw new zO(wf(a),o.status||500,c)}const f5=(o,t,a,c)=>{const g={method:o,headers:(t==null?void 0:t.headers)||{}};return o==="GET"?g:(g.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),g.body=JSON.stringify(c),Object.assign(Object.assign({},g),a))};async function Cr(o,t,a,c){var g;const N=Object.assign({},c==null?void 0:c.headers);N[DC]||(N[DC]=Uj["2024-01-01"].name),c!=null&&c.jwt&&(N.Authorization=`Bearer ${c.jwt}`);const b=(g=c==null?void 0:c.query)!==null&&g!==void 0?g:{};c!=null&&c.redirectTo&&(b.redirect_to=c.redirectTo);const d=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",A=await m5(o,t,a+d,{headers:N,noResolveJson:c==null?void 0:c.noResolveJson},{},c==null?void 0:c.body);return c!=null&&c.xform?c==null?void 0:c.xform(A):{data:Object.assign({},A),error:null}}async function m5(o,t,a,c,g,N){const b=f5(t,c,g,N);let d;try{d=await o(a,Object.assign({},b))}catch(A){throw console.error(A),new TC(wf(A),0)}if(d.ok||await IT(d),c!=null&&c.noResolveJson)return d;try{return await d.json()}catch(A){await IT(A)}}function Qu(o){var t;let a=null;y5(o)&&(a=Object.assign({},o),o.expires_at||(a.expires_at=YO(o.expires_in)));const c=(t=o.user)!==null&&t!==void 0?t:o;return{data:{session:a,user:c},error:null}}function VT(o){const t=Qu(o);return!t.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(t.data.weak_password=o.weak_password),t}function fh(o){var t;return{data:{user:(t=o.user)!==null&&t!==void 0?t:o},error:null}}function p5(o){return{data:o,error:null}}function g5(o){const{action_link:t,email_otp:a,hashed_token:c,redirect_to:g,verification_type:N}=o,b=d5(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:a,hashed_token:c,redirect_to:g,verification_type:N},A=Object.assign({},b);return{data:{properties:d,user:A},error:null}}function v5(o){return o}function y5(o){return o.access_token&&o.refresh_token&&o.expires_in}const W1=["global","local","others"];var b5=function(o,t){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(o);g<c.length;g++)t.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(o,c[g])&&(a[c[g]]=o[c[g]]);return a};class x5{constructor({url:t="",headers:a={},fetch:c}){this.url=t,this.headers=a,this.fetch=Gj(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=W1[0]){if(W1.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${W1.join(", ")}`);try{return await Cr(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(c){if(sr(c))return{data:null,error:c};throw c}}async inviteUserByEmail(t,a={}){try{return await Cr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:fh})}catch(c){if(sr(c))return{data:{user:null},error:c};throw c}}async generateLink(t){try{const{options:a}=t,c=b5(t,["options"]),g=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(g.new_email=c==null?void 0:c.newEmail,delete g.newEmail),await Cr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:g,headers:this.headers,xform:g5,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(sr(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await Cr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fh})}catch(a){if(sr(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,c,g,N,b,d,A;try{const k={nextPage:null,lastPage:0,total:0},O=await Cr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(N=(g=t==null?void 0:t.perPage)===null||g===void 0?void 0:g.toString())!==null&&N!==void 0?N:""},xform:v5});if(O.error)throw O.error;const B=await O.json(),W=(b=O.headers.get("x-total-count"))!==null&&b!==void 0?b:0,ie=(A=(d=O.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&A!==void 0?A:[];return ie.length>0&&(ie.forEach(pe=>{const Oe=parseInt(pe.split(";")[0].split("=")[1].substring(0,1)),Se=JSON.parse(pe.split(";")[1].split("=")[1]);k[`${Se}Page`]=Oe}),k.total=parseInt(W)),{data:Object.assign(Object.assign({},B),k),error:null}}catch(k){if(sr(k))return{data:{users:[]},error:k};throw k}}async getUserById(t){tp(t);try{return await Cr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fh})}catch(a){if(sr(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){tp(t);try{return await Cr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:fh})}catch(c){if(sr(c))return{data:{user:null},error:c};throw c}}async deleteUser(t,a=!1){tp(t);try{return await Cr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:fh})}catch(c){if(sr(c))return{data:{user:null},error:c};throw c}}async _listFactors(t){tp(t.userId);try{const{data:a,error:c}=await Cr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:g=>({data:{factors:g},error:null})});return{data:a,error:c}}catch(a){if(sr(a))return{data:null,error:a};throw a}}async _deleteFactor(t){tp(t.userId),tp(t.id);try{return{data:await Cr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}}}function OT(o={}){return{getItem:t=>o[t]||null,setItem:(t,a)=>{o[t]=a},removeItem:t=>{delete o[t]}}}function _5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const np={debug:!!(globalThis&&Hj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class w5 extends Wj{}async function C5(o,t,a){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,t);const c=new globalThis.AbortController;return t>0&&setTimeout(()=>{c.abort(),np.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async g=>{if(g){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,g.name);try{return await a()}finally{np.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,g.name)}}else{if(t===0)throw np.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new w5(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(np.debug)try{const N=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(N,null,"  "))}catch(N){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",N)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}_5();const N5={url:RO,storageKey:LO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zT(o,t,a){return await a()}const rp={};class qv{constructor(t){var a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qv.nextInstanceID,qv.nextInstanceID+=1,this.instanceID>0&&cc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const g=Object.assign(Object.assign({},N5),t);if(this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.persistSession=g.persistSession,this.storageKey=g.storageKey,this.autoRefreshToken=g.autoRefreshToken,this.admin=new x5({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=Gj(g.fetch),this.lock=g.lock||zT,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,g.lock?this.lock=g.lock:cc()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=C5:this.lock=zT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:Hj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=OT(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=OT(this.memoryStorage)),cc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(N){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",N)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async N=>{this._debug("received broadcast notification from other tab or client",N),await this._notifyAllSubscribers(N.data.event,N.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=rp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=rp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=JO(window.location.href);let c="none";if(this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce"),cc()&&this.detectSessionInUrl&&c!=="none"){const{data:g,error:N}=await this._getSessionFromURL(a,c);if(N){if(this._debug("#_initialize()","error detecting session from URL",N),UO(N)){const A=(t=N.details)===null||t===void 0?void 0:t.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:N}}return await this._removeSession(),{error:N}}const{session:b,redirectType:d}=g;return this._debug("#_initialize()","detected session in URL",b,"redirect type",d),await this._saveSession(b),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return sr(a)?{error:a}:{error:new $j("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,c,g;try{const N=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(g=t==null?void 0:t.options)===null||g===void 0?void 0:g.captchaToken}},xform:Qu}),{data:b,error:d}=N;if(d||!b)return{data:{user:null,session:null},error:d};const A=b.session,k=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(N){if(sr(N))return{data:{user:null,session:null},error:N};throw N}}async signUp(t){var a,c,g;try{let N;if("email"in t){const{email:O,password:B,options:W}=t;let ie=null,pe=null;this.flowType==="pkce"&&([ie,pe]=await ep(this.storage,this.storageKey)),N=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:W==null?void 0:W.emailRedirectTo,body:{email:O,password:B,data:(a=W==null?void 0:W.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken},code_challenge:ie,code_challenge_method:pe},xform:Qu})}else if("phone"in t){const{phone:O,password:B,options:W}=t;N=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:O,password:B,data:(c=W==null?void 0:W.data)!==null&&c!==void 0?c:{},channel:(g=W==null?void 0:W.channel)!==null&&g!==void 0?g:"sms",gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken}},xform:Qu})}else throw new Tx("You must provide either an email or phone number and a password");const{data:b,error:d}=N;if(d||!b)return{data:{user:null,session:null},error:d};const A=b.session,k=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(N){if(sr(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithPassword(t){try{let a;if("email"in t){const{email:N,password:b,options:d}=t;a=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:N,password:b,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:VT})}else if("phone"in t){const{phone:N,password:b,options:d}=t;a=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:N,password:b,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:VT})}else throw new Tx("You must provide either an email or phone number and a password");const{data:c,error:g}=a;return g?{data:{user:null,session:null},error:g}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Dx}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:g})}catch(a){if(sr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,c,g,N;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(g=t.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:(N=t.options)===null||N===void 0?void 0:N.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,c,g,N,b,d,A,k,O,B,W,ie;let pe,Oe;if("message"in t)pe=t.message,Oe=t.signature;else{const{chain:Se,wallet:Pe,statement:De,options:Ce}=t;let ze;if(cc())if(typeof Pe=="object")ze=Pe;else{const Ze=window;if("solana"in Ze&&typeof Ze.solana=="object"&&("signIn"in Ze.solana&&typeof Ze.solana.signIn=="function"||"signMessage"in Ze.solana&&typeof Ze.solana.signMessage=="function"))ze=Ze.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Pe!="object"||!(Ce!=null&&Ce.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ze=Pe}const Re=new URL((a=Ce==null?void 0:Ce.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in ze&&ze.signIn){const Ze=await ze.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Ce==null?void 0:Ce.signInWithSolana),{version:"1",domain:Re.host,uri:Re.href}),De?{statement:De}:null));let tt;if(Array.isArray(Ze)&&Ze[0]&&typeof Ze[0]=="object")tt=Ze[0];else if(Ze&&typeof Ze=="object"&&"signedMessage"in Ze&&"signature"in Ze)tt=Ze;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in tt&&"signature"in tt&&(typeof tt.signedMessage=="string"||tt.signedMessage instanceof Uint8Array)&&tt.signature instanceof Uint8Array)pe=typeof tt.signedMessage=="string"?tt.signedMessage:new TextDecoder().decode(tt.signedMessage),Oe=tt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ze)||typeof ze.signMessage!="function"||!("publicKey"in ze)||typeof ze!="object"||!ze.publicKey||!("toBase58"in ze.publicKey)||typeof ze.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");pe=[`${Re.host} wants you to sign in with your Solana account:`,ze.publicKey.toBase58(),...De?["",De,""]:[""],"Version: 1",`URI: ${Re.href}`,`Issued At: ${(g=(c=Ce==null?void 0:Ce.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&g!==void 0?g:new Date().toISOString()}`,...!((N=Ce==null?void 0:Ce.signInWithSolana)===null||N===void 0)&&N.notBefore?[`Not Before: ${Ce.signInWithSolana.notBefore}`]:[],...!((b=Ce==null?void 0:Ce.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${Ce.signInWithSolana.expirationTime}`]:[],...!((d=Ce==null?void 0:Ce.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${Ce.signInWithSolana.chainId}`]:[],...!((A=Ce==null?void 0:Ce.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${Ce.signInWithSolana.nonce}`]:[],...!((k=Ce==null?void 0:Ce.signInWithSolana)===null||k===void 0)&&k.requestId?[`Request ID: ${Ce.signInWithSolana.requestId}`]:[],...!((B=(O=Ce==null?void 0:Ce.signInWithSolana)===null||O===void 0?void 0:O.resources)===null||B===void 0)&&B.length?["Resources",...Ce.signInWithSolana.resources.map(tt=>`- ${tt}`)]:[]].join(`
`);const Ze=await ze.signMessage(new TextEncoder().encode(pe),"utf8");if(!Ze||!(Ze instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");Oe=Ze}}try{const{data:Se,error:Pe}=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:pe,signature:KO(Oe)},!((W=t.options)===null||W===void 0)&&W.captchaToken?{gotrue_meta_security:{captcha_token:(ie=t.options)===null||ie===void 0?void 0:ie.captchaToken}}:null),xform:Qu});if(Pe)throw Pe;return!Se||!Se.session||!Se.user?{data:{user:null,session:null},error:new Dx}:(Se.session&&(await this._saveSession(Se.session),await this._notifyAllSubscribers("SIGNED_IN",Se.session)),{data:Object.assign({},Se),error:Pe})}catch(Se){if(sr(Se))return{data:{user:null,session:null},error:Se};throw Se}}async _exchangeCodeForSession(t){const a=await xf(this.storage,`${this.storageKey}-code-verifier`),[c,g]=(a??"").split("/");try{const{data:N,error:b}=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:c},xform:Qu});if(await uh(this.storage,`${this.storageKey}-code-verifier`),b)throw b;return!N||!N.session||!N.user?{data:{user:null,session:null,redirectType:null},error:new Dx}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign(Object.assign({},N),{redirectType:g??null}),error:b})}catch(N){if(sr(N))return{data:{user:null,session:null,redirectType:null},error:N};throw N}}async signInWithIdToken(t){try{const{options:a,provider:c,token:g,access_token:N,nonce:b}=t,d=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:g,access_token:N,nonce:b,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qu}),{data:A,error:k}=d;return k?{data:{user:null,session:null},error:k}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new Dx}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:k})}catch(a){if(sr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,c,g,N,b;try{if("email"in t){const{email:d,options:A}=t;let k=null,O=null;this.flowType==="pkce"&&([k,O]=await ep(this.storage,this.storageKey));const{error:B}=await Cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},create_user:(c=A==null?void 0:A.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:k,code_challenge_method:O},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:B}}if("phone"in t){const{phone:d,options:A}=t,{data:k,error:O}=await Cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(g=A==null?void 0:A.data)!==null&&g!==void 0?g:{},create_user:(N=A==null?void 0:A.shouldCreateUser)!==null&&N!==void 0?N:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(b=A==null?void 0:A.channel)!==null&&b!==void 0?b:"sms"}});return{data:{user:null,session:null,messageId:k==null?void 0:k.message_id},error:O}}throw new Tx("You must provide either an email or phone number.")}catch(d){if(sr(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var a,c;try{let g,N;"options"in t&&(g=(a=t.options)===null||a===void 0?void 0:a.redirectTo,N=(c=t.options)===null||c===void 0?void 0:c.captchaToken);const{data:b,error:d}=await Cr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:N}}),redirectTo:g,xform:Qu});if(d)throw d;if(!b)throw new Error("An error occurred on token verification.");const A=b.session,k=b.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(g){if(sr(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSSO(t){var a,c,g;try{let N=null,b=null;return this.flowType==="pkce"&&([N,b]=await ep(this.storage,this.storageKey)),await Cr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(c=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((g=t==null?void 0:t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:N,code_challenge_method:b}),headers:this.headers,xform:p5})}catch(N){if(sr(N))return{data:null,error:N};throw N}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:c}=t;if(c)throw c;if(!a)throw new dh;const{error:g}=await Cr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:g}})}catch(t){if(sr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:c,type:g,options:N}=t,{error:b}=await Cr(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:g,gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},redirectTo:N==null?void 0:N.emailRedirectTo});return{data:{user:null,session:null},error:b}}else if("phone"in t){const{phone:c,type:g,options:N}=t,{data:b,error:d}=await Cr(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:g,gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:d}}throw new Tx("You must provide either an email or phone number and a type")}catch(a){if(sr(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),g=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await g}catch{}})()),g}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const g=[...this.pendingInLock];await Promise.all(g),this.pendingInLock.splice(0,g.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await xf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const c=t.expires_at?t.expires_at*1e3-Date.now()<$1:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",t.expires_at),!c){if(this.userStorage){const b=await xf(this.userStorage,this.storageKey+"-user");b!=null&&b.user?t.user=b.user:t.user=G1()}if(this.storage.isServer&&t.user){let b=this.suppressGetSessionWarning;t=new Proxy(t,{get:(A,k,O)=>(!b&&k==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,k,O))})}return{data:{session:t},error:null}}const{session:g,error:N}=await this._callRefreshToken(t.refresh_token);return N?{data:{session:null},error:N}:{data:{session:g},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fh}):await this._useSession(async a=>{var c,g,N;const{data:b,error:d}=a;if(d)throw d;return!(!((c=b.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dh}:await Cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(N=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&N!==void 0?N:void 0,xform:fh})})}catch(a){if(sr(a))return FO(a)&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async c=>{const{data:g,error:N}=c;if(N)throw N;if(!g.session)throw new dh;const b=g.session;let d=null,A=null;this.flowType==="pkce"&&t.email!=null&&([d,A]=await ep(this.storage,this.storageKey));const{data:k,error:O}=await Cr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:A}),jwt:b.access_token,xform:fh});if(O)throw O;return b.user=k.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),{data:{user:b.user},error:null}})}catch(c){if(sr(c))return{data:{user:null},error:c};throw c}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new dh;const a=Date.now()/1e3;let c=a,g=!0,N=null;const{payload:b}=H1(t.access_token);if(b.exp&&(c=b.exp,g=c<=a),g){const{session:d,error:A}=await this._callRefreshToken(t.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!d)return{data:{user:null,session:null},error:null};N=d}else{const{data:d,error:A}=await this._getUser(t.access_token);if(A)throw A;N={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(N),await this._notifyAllSubscribers("SIGNED_IN",N)}return{data:{user:N.user,session:N},error:null}}catch(a){if(sr(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var c;if(!t){const{data:b,error:d}=a;if(d)throw d;t=(c=b.session)!==null&&c!==void 0?c:void 0}if(!(t!=null&&t.refresh_token))throw new dh;const{session:g,error:N}=await this._callRefreshToken(t.refresh_token);return N?{data:{user:null,session:null},error:N}:g?{data:{user:g.user,session:g},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(sr(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!cc())throw new Px("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Px(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new jT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Px("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jT("No code detected.");const{data:De,error:Ce}=await this._exchangeCodeForSession(t.code);if(Ce)throw Ce;const ze=new URL(window.location.href);return ze.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ze.toString()),{data:{session:De.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:g,access_token:N,refresh_token:b,expires_in:d,expires_at:A,token_type:k}=t;if(!N||!d||!b||!k)throw new Px("No session defined in URL");const O=Math.round(Date.now()/1e3),B=parseInt(d);let W=O+B;A&&(W=parseInt(A));const ie=W-O;ie*1e3<=ip&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${ie}s, should have been closer to ${B}s`);const pe=W-B;O-pe>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",pe,W,O):O-pe<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",pe,W,O);const{data:Oe,error:Se}=await this._getUser(N);if(Se)throw Se;const Pe={provider_token:c,provider_refresh_token:g,access_token:N,expires_in:B,expires_at:W,refresh_token:b,token_type:k,user:Oe.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Pe,redirectType:t.type},error:null}}catch(c){if(sr(c))return{data:{session:null,redirectType:null},error:c};throw c}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await xf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:g,error:N}=a;if(N)return{error:N};const b=(c=g.session)===null||c===void 0?void 0:c.access_token;if(b){const{error:d}=await this.admin.signOut(b,t);if(d&&!(BO(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=XO(),c={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(t){return await this._useSession(async a=>{var c,g;try{const{data:{session:N},error:b}=a;if(b)throw b;await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",N)),this._debug("INITIAL_SESSION","callback id",t,"session",N)}catch(N){await((g=this.stateChangeEmitters.get(t))===null||g===void 0?void 0:g.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",N),console.error(N)}})}async resetPasswordForEmail(t,a={}){let c=null,g=null;this.flowType==="pkce"&&([c,g]=await ep(this.storage,this.storageKey,!0));try{return await Cr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:c,code_challenge_method:g,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(N){if(sr(N))return{data:null,error:N};throw N}}async getUserIdentities(){var t;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:c,error:g}=await this._useSession(async N=>{var b,d,A,k,O;const{data:B,error:W}=N;if(W)throw W;const ie=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(b=t.options)===null||b===void 0?void 0:b.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(A=t.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Cr(this.fetch,"GET",ie,{headers:this.headers,jwt:(O=(k=B.session)===null||k===void 0?void 0:k.access_token)!==null&&O!==void 0?O:void 0})});if(g)throw g;return cc()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c==null?void 0:c.url),{data:{provider:t.provider,url:c==null?void 0:c.url},error:null}}catch(c){if(sr(c))return{data:{provider:t.provider,url:null},error:c};throw c}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var c,g;const{data:N,error:b}=a;if(b)throw b;return await Cr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(g=(c=N.session)===null||c===void 0?void 0:c.access_token)!==null&&g!==void 0?g:void 0})})}catch(a){if(sr(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await t5(async g=>(g>0&&await e5(200*Math.pow(2,g-1)),this._debug(a,"refreshing attempt",g),await Cr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qu})),(g,N)=>{const b=200*Math.pow(2,g);return N&&q1(N)&&Date.now()+b-c<ip})}catch(c){if(this._debug(a,"error",c),sr(c))return{data:{session:null,user:null},error:c};throw c}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",c),cc()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:t,url:c},error:null}}async _recoverAndRefresh(){var t,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const g=await xf(this.storage,this.storageKey);if(g&&this.userStorage){let b=await xf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:g.user},await sp(this.userStorage,this.storageKey+"-user",b)),g.user=(t=b==null?void 0:b.user)!==null&&t!==void 0?t:G1()}else if(g&&!g.user&&!g.user){const b=await xf(this.storage,this.storageKey+"-user");b&&(b!=null&&b.user)?(g.user=b.user,await uh(this.storage,this.storageKey+"-user"),await sp(this.storage,this.storageKey,g)):g.user=G1()}if(this._debug(c,"session from storage",g),!this._isValidSession(g)){this._debug(c,"session is not valid"),g!==null&&await this._removeSession();return}const N=((a=g.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<$1;if(this._debug(c,`session has${N?"":" not"} expired with margin of ${$1}s`),N){if(this.autoRefreshToken&&g.refresh_token){const{error:b}=await this._callRefreshToken(g.refresh_token);b&&(console.error(b),q1(b)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(g.user&&g.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:d}=await this._getUser(g.access_token);!d&&(b!=null&&b.user)?(g.user=b.user,await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(c,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",g)}catch(g){this._debug(c,"error",g),console.error(g);return}finally{this._debug(c,"end")}}async _callRefreshToken(t){var a,c;if(!t)throw new dh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const g=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(g,"begin");try{this.refreshingDeferred=new u0;const{data:N,error:b}=await this._refreshAccessToken(t);if(b)throw b;if(!N.session)throw new dh;await this._saveSession(N.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",N.session);const d={session:N.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(N){if(this._debug(g,"error",N),sr(N)){const b={session:null,error:N};return q1(N)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(b),b}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(N),N}finally{this.refreshingDeferred=null,this._debug(g,"end")}}async _notifyAllSubscribers(t,a,c=!0){const g=`#_notifyAllSubscribers(${t})`;this._debug(g,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:t,session:a});const N=[],b=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,a)}catch(A){N.push(A)}});if(await Promise.all(b),N.length>0){for(let d=0;d<N.length;d+=1)console.error(N[d]);throw N[0]}}finally{this._debug(g,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await sp(this.userStorage,this.storageKey+"-user",{user:a.user});const g=Object.assign({},a);delete g.user;const N=LT(g);await sp(this.storage,this.storageKey,N)}else{const g=LT(a);await sp(this.storage,this.storageKey,g)}}async _removeSession(){this._debug("#_removeSession()"),await uh(this.storage,this.storageKey),await uh(this.storage,this.storageKey+"-code-verifier"),await uh(this.storage,this.storageKey+"-user"),this.userStorage&&await uh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&cc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ip);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const g=Math.floor((c.expires_at*1e3-t)/ip);this._debug("#_autoRefreshTokenTick()",`access token expires in ${g} ticks, a tick lasts ${ip}ms, refresh threshold is ${EC} ticks`),g<=EC&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Wj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,c){const g=[`provider=${encodeURIComponent(a)}`];if(c!=null&&c.redirectTo&&g.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c!=null&&c.scopes&&g.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[N,b]=await ep(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(N)}`,code_challenge_method:`${encodeURIComponent(b)}`});g.push(d.toString())}if(c!=null&&c.queryParams){const N=new URLSearchParams(c.queryParams);g.push(N.toString())}return c!=null&&c.skipBrowserRedirect&&g.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${t}?${g.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var c;const{data:g,error:N}=a;return N?{data:null,error:N}:await Cr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(sr(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var c,g;const{data:N,error:b}=a;if(b)return{data:null,error:b};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:A,error:k}=await Cr(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(c=N==null?void 0:N.session)===null||c===void 0?void 0:c.access_token});return k?{data:null,error:k}:(t.factorType==="totp"&&(!((g=A==null?void 0:A.totp)===null||g===void 0)&&g.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(a){if(sr(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:g,error:N}=a;if(N)return{data:null,error:N};const{data:b,error:d}=await Cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),{data:b,error:d})})}catch(a){if(sr(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:g,error:N}=a;return N?{data:null,error:N}:await Cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(sr(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:c}=await this._challenge({factorId:t.factorId});return c?{data:null,error:c}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const c=(t==null?void 0:t.factors)||[],g=c.filter(b=>b.factor_type==="totp"&&b.status==="verified"),N=c.filter(b=>b.factor_type==="phone"&&b.status==="verified");return{data:{all:c,totp:g,phone:N},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,c;const{data:{session:g},error:N}=t;if(N)return{data:null,error:N};if(!g)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:b}=H1(g.access_token);let d=null;b.aal&&(d=b.aal);let A=d;((c=(a=g.user.factors)===null||a===void 0?void 0:a.filter(B=>B.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(A="aal2");const O=b.amr||[];return{data:{currentLevel:d,nextLevel:A,currentAuthenticationMethods:O},error:null}}))}async fetchJwk(t,a={keys:[]}){let c=a.keys.find(d=>d.kid===t);if(c)return c;const g=Date.now();if(c=this.jwks.keys.find(d=>d.kid===t),c&&this.jwks_cached_at+OO>g)return c;const{data:N,error:b}=await Cr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!N.keys||N.keys.length===0||(this.jwks=N,this.jwks_cached_at=g,c=N.keys.find(d=>d.kid===t),!c)?null:c}async getClaims(t,a={}){try{let c=t;if(!c){const{data:ie,error:pe}=await this.getSession();if(pe||!ie.session)return{data:null,error:pe};c=ie.session.access_token}const{header:g,payload:N,signature:b,raw:{header:d,payload:A}}=H1(c);a!=null&&a.allowExpired||l5(N.exp);const k=!g.alg||g.alg.startsWith("HS")||!g.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(g.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!k){const{error:ie}=await this.getUser(c);if(ie)throw ie;return{data:{claims:N,header:g,signature:b},error:null}}const O=c5(g.alg),B=await crypto.subtle.importKey("jwk",k,O,!0,["verify"]);if(!await crypto.subtle.verify(O,B,b,ZO(`${d}.${A}`)))throw new PC("Invalid JWT signature");return{data:{claims:N,header:g,signature:b},error:null}}catch(c){if(sr(c))return{data:null,error:c};throw c}}}qv.nextInstanceID=0;const S5=qv;class E5 extends S5{constructor(t){super(t)}}var D5=function(o,t,a,c){function g(N){return N instanceof a?N:new a(function(b){b(N)})}return new(a||(a=Promise))(function(N,b){function d(O){try{k(c.next(O))}catch(B){b(B)}}function A(O){try{k(c.throw(O))}catch(B){b(B)}}function k(O){O.done?N(O.value):g(O.value).then(d,A)}k((c=c.apply(o,t||[])).next())})};class T5{constructor(t,a,c){var g,N,b;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const d=kO(t),A=new URL(d);this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const k=`sb-${A.hostname.split(".")[0]}-auth-token`,O={db:NO,realtime:EO,auth:Object.assign(Object.assign({},SO),{storageKey:k}),global:CO},B=MO(c??{},O);this.storageKey=(g=B.auth.storageKey)!==null&&g!==void 0?g:"",this.headers=(N=B.global.headers)!==null&&N!==void 0?N:{},B.accessToken?(this.accessToken=B.accessToken,this.auth=new Proxy({},{get:(W,ie)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(ie)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((b=B.auth)!==null&&b!==void 0?b:{},this.headers,B.global.fetch),this.fetch=jO(a,this._getAccessToken.bind(this),B.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},B.realtime)),this.rest=new q3(new URL("rest/v1",A).href,{headers:this.headers,schema:B.db.schema,fetch:this.fetch}),this.storage=new xO(this.storageUrl.href,this.headers,this.fetch,c==null?void 0:c.storage),B.accessToken||this._listenForAuthEvents()}get functions(){return new w3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},c={}){return this.rest.rpc(t,a,c)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return D5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:c}=yield this.auth.getSession();return(a=(t=c.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:c,storage:g,storageKey:N,flowType:b,lock:d,debug:A},k,O){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E5({url:this.authUrl.href,headers:Object.assign(Object.assign({},B),k),storageKey:N,autoRefreshToken:t,persistSession:a,detectSessionInUrl:c,storage:g,flowType:b,lock:d,debug:A,fetch:O,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new oO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c==null?void 0:c.access_token)})}_handleTokenChanged(t,a,c){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==c?this.changedAccessToken=c:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BT=(o,t,a)=>new T5(o,t,a);function P5(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const t=o.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}P5()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j5=()=>(console.log("🔧 Using environment variable API URL:","http://localhost:3000"),"http://localhost:3000"),A5=()=>(console.log("🔧 Using environment variable WebSocket URL:","ws://localhost:3000"),"ws://localhost:3000"),eu={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:j5(),websocketUrl:A5()}},isDevelopment:!0,isProduction:!1};console.log("🔧 Environment Configuration:",{supabaseUrl:eu.supabase.url?"✅ Set":"❌ Missing",supabaseKey:eu.supabase.anonKey?"✅ Set":"❌ Missing",apiUrl:eu.api.url,websocketUrl:eu.api.websocketUrl,currentHost:window.location.hostname,currentProtocol:window.location.protocol,envVar:"http://localhost:3000"});const k5=()=>{const{url:o,anonKey:t}=eu.supabase;if(console.log("🔧 Validating Supabase configuration:",{url:o?"✅ Set":"❌ Missing",anonKey:t?"✅ Set":"❌ Missing",envVars:{VITE_SUPABASE_URL:"✅ Set",VITE_SUPABASE_ANON_KEY:"✅ Set"}}),!o||o==="your_supabase_project_url"||o==="")throw console.error("❌ Supabase URL validation failed:",{url:o,envVar:"https://gthwmwfwvhyriygpcdlr.supabase.co"}),new Error("Invalid Supabase URL. Please check your environment variables.");if(!t||t==="your_supabase_anon_key_here"||t==="")throw console.error("❌ Supabase anon key validation failed:",{anonKey:t?"SET":"MISSING",envVar:"SET"}),new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(o)}catch(a){throw console.error("❌ Supabase URL format validation failed:",{url:o,error:a}),new Error(`Invalid Supabase URL format: ${o}`)}return console.log("✅ Supabase configuration validated successfully"),{url:o,anonKey:t}},M5=()=>{try{const o=k5(),t=BT(o.url,o.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Supabase client created successfully"),t}catch(o){console.error("❌ Failed to create Supabase client:",o);{console.log("🔄 Creating fallback Supabase client for development...");const t=BT("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Fallback Supabase client created"),t}}},Zi=M5();class R5{constructor(){Js(this,"currentUser",null);Js(this,"currentSession",null);Js(this,"currentProfile",null);Js(this,"authStateChangeListener",null);Js(this,"_isInitialized",!1);this.initializeAuth()}async initializeAuth(){try{const{data:{session:t},error:a}=await Zi.auth.getSession();if(a){console.error("❌ Error getting session:",a),this._isInitialized=!0;return}t&&(console.log("🔑 Setting initial session for user:",t.user.email),this.currentSession=t,this.currentUser=t.user,console.log("🔑 Session access token:",t.access_token?"Exists":"Missing"),await this.loadUserProfile(t.user.id));const{data:{subscription:c}}=Zi.auth.onAuthStateChange(async(g,N)=>{var b;console.log("🔄 Auth state changed:",g,(b=N==null?void 0:N.user)==null?void 0:b.email),this.currentSession=N,this.currentUser=(N==null?void 0:N.user)||null,N&&console.log("🔑 Auth state change - Session access token:",N.access_token?"Exists":"Missing"),N!=null&&N.user?await this.loadUserProfile(N.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()});return this._isInitialized=!0,console.log("✅ Auth service initialized"),()=>c.unsubscribe()}catch(t){console.error("❌ Error initializing auth:",t),this._isInitialized=!0}}async loadUserProfile(t){var a,c,g,N,b,d,A,k,O,B,W,ie,pe;try{const Oe=(c=(a=this.currentUser)==null?void 0:a.user_metadata)==null?void 0:c.roles;if(Oe&&Array.isArray(Oe)&&Oe.length>1){const Ze=window.location.pathname;let tt="admin";Ze.includes("/driver")?tt="driver":Ze.includes("/admin")?tt="admin":tt=["siddharthmali.211@gmail.com"].includes(((N=(g=this.currentUser)==null?void 0:g.email)==null?void 0:N.toLowerCase())||"")?"admin":"driver";const{data:ut,error:Rt}=await Zi.from("profiles").select("*").eq("id",t).single();if(Rt){console.error("❌ Error loading user profile:",Rt),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}this.currentProfile={id:ut.id,email:((b=this.currentUser)==null?void 0:b.email)||"",role:tt,full_name:ut.full_name,first_name:((d=ut.full_name)==null?void 0:d.split(" ")[0])||"",last_name:((A=ut.full_name)==null?void 0:A.split(" ").slice(1).join(" "))||"",created_at:ut.created_at,updated_at:ut.updated_at};return}const{data:Pe,error:De}=await Zi.from("profiles").select("*").eq("id",t).single();if(De){console.error("❌ Error loading user profile:",De),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}const ze=["siddharthmali.211@gmail.com"].includes(((O=(k=this.currentUser)==null?void 0:k.email)==null?void 0:O.toLowerCase())||""),Re=ze?"admin":Pe.role;console.log(`🔍 User ${(B=this.currentUser)==null?void 0:B.email} - Database role: ${Pe.role}, Admin check: ${ze}, Final role: ${Re}`),this.currentProfile={id:Pe.id,email:((W=this.currentUser)==null?void 0:W.email)||"",role:Re,full_name:Pe.full_name,first_name:((ie=Pe.full_name)==null?void 0:ie.split(" ")[0])||"",last_name:((pe=Pe.full_name)==null?void 0:pe.split(" ").slice(1).join(" "))||"",created_at:Pe.created_at,updated_at:Pe.updated_at}}catch(Oe){console.error("❌ Error in loadUserProfile:",Oe),this.setTemporaryProfileWithRoleCheck(t,this.currentUser)}}setTemporaryProfileWithRoleCheck(t,a){var b,d,A,k,O,B,W,ie;console.log("🔄 Setting temporary profile with role check for user login");const N=["siddharthmali.211@gmail.com"].includes(((b=a.email)==null?void 0:b.toLowerCase())||"")?"admin":"student";console.log(`🔍 User ${a.email} assigned role: ${N}`),this.currentProfile={id:t,email:a.email||"",role:N,full_name:((d=a.user_metadata)==null?void 0:d.full_name)||((A=a.email)==null?void 0:A.split("@")[0])||"User",first_name:((O=(k=a.user_metadata)==null?void 0:k.full_name)==null?void 0:O.split(" ")[0])||((B=a.email)==null?void 0:B.split("@")[0])||"User",last_name:((ie=(W=a.user_metadata)==null?void 0:W.full_name)==null?void 0:ie.split(" ").slice(1).join(" "))||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}async signIn(t,a){var c,g;try{console.log("🔐 Starting sign in process for:",t);const{data:N,error:b}=await Zi.auth.signInWithPassword({email:t,password:a});if(b)return console.error("❌ Sign in error:",b),{success:!1,error:b.message};if(console.log("✅ Supabase authentication successful"),N.user&&N.session){console.log("👤 User data received:",N.user.email),this.currentUser=N.user,this.currentSession=N.session,console.log("📋 Loading user profile...");try{const d=this.loadUserProfile(N.user.id),A=new Promise((k,O)=>{setTimeout(()=>O(new Error("Profile loading timeout")),1e4)});await Promise.race([d,A]),console.log("✅ Profile loaded:",(c=this.currentProfile)==null?void 0:c.role)}catch(d){console.warn("⚠️ Profile loading failed, using temporary profile:",d);try{console.log("🔄 Retrying profile loading..."),await this.loadUserProfile(N.user.id),console.log("✅ Profile loaded on retry:",(g=this.currentProfile)==null?void 0:g.role)}catch{console.warn("⚠️ Profile retry also failed, using temporary profile"),this.setTemporaryProfileWithRoleCheck(N.user.id,N.user)}}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return console.error("❌ No user or session data received"),{success:!1,error:"Authentication failed"}}catch(N){return console.error("❌ Sign in error:",N),N instanceof Error&&N.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:{success:!1,error:"Network error during sign in"}}}async signUp(t,a,c){try{const{data:g,error:N}=await Zi.auth.signUp({email:t,password:a,options:{data:{full_name:c.full_name,role:c.role||"student"}}});if(N)return console.error("❌ Sign up error:",N),{success:!1,error:N.message};if(g.user){const{error:b}=await Zi.from("profiles").insert({id:g.user.id,full_name:c.full_name||"Unknown User",role:c.role||"student"});return b?(console.error("❌ Error creating profile:",b),{success:!1,error:"Profile creation failed"}):{success:!0}}return{success:!1,error:"Registration failed"}}catch(g){return console.error("❌ Sign up error:",g),{success:!1,error:"Network error during sign up"}}}async signOut(){try{console.log("🔐 Starting sign out process...");const{error:t}=await Zi.auth.signOut();return t?(console.error("❌ Sign out error:",t),{success:!1,error:t.message}):(console.log("✅ Sign out successful"),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(t){return console.error("❌ Sign out error:",t),{success:!1,error:"Network error during sign out"}}}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(t){var a;return((a=this.currentProfile)==null?void 0:a.role)===t}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var a,c,g;let t=((a=this.currentSession)==null?void 0:a.access_token)||null;if(!t)try{const N=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const b of N){const d=localStorage.getItem(b);if(d){const A=JSON.parse(d);if(t=((c=A==null?void 0:A.currentSession)==null?void 0:c.access_token)||(A==null?void 0:A.access_token)||((g=A==null?void 0:A.session)==null?void 0:g.access_token)||null,t){console.log(`🔑 Retrieved token from localStorage fallback (${b})`);break}}}}catch(N){console.warn("⚠️ Error reading token from localStorage:",N)}return console.log("🔑 getAccessToken called:",t?"Token exists":"No token","Session:",!!this.currentSession),t}async refreshSession(){try{if(!this.currentSession)return console.log("🔄 No current session to refresh"),{success:!1,error:"No session to refresh"};const{data:t,error:a}=await Zi.auth.refreshSession();return a?a.message.includes("Auth session missing")?(console.log("🔄 No session to refresh (expected for unauthenticated users)"),{success:!1,error:"No session to refresh"}):(console.error("❌ Session refresh error:",a),{success:!1,error:a.message}):t.session?(this.currentSession=t.session,this.currentUser=t.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(t){return console.error("❌ Session refresh error:",t),{success:!1,error:"Network error during session refresh"}}}async updateProfile(t){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:a}=await Zi.from("profiles").update(t).eq("id",this.currentUser.id);return a?(console.error("❌ Profile update error:",a),{success:!1,error:a.message}):(await this.loadUserProfile(this.currentUser.id),{success:!0})}catch(a){return console.error("❌ Profile update error:",a),{success:!1,error:"Network error during profile update"}}}onAuthStateChange(t){this.authStateChangeListener=t}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}async forceFreshLogin(){try{console.log("🔄 Forcing fresh login...");const t=[];for(let a=0;a<localStorage.length;a++){const c=localStorage.key(a);c&&(c.includes("supabase")||c.includes("auth")||c.includes("sb-"))&&t.push(c)}return t.forEach(a=>{localStorage.removeItem(a),console.log(`🗑️ Removed localStorage key: ${a}`)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,console.log("✅ Fresh login state prepared"),{success:!0}}catch(t){return console.error("❌ Error forcing fresh login:",t),{success:!1,error:"Failed to force fresh login"}}}async recoverSession(){var t,a,c,g;try{console.log("🔄 Attempting to recover session from localStorage...");const N=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let b=null,d=null;for(const W of N){const ie=localStorage.getItem(W);if(ie){b=ie,d=W,console.log(`📝 Found session in localStorage key: ${W}`);break}}if(!b)return console.log("📝 No stored session found in any localStorage key"),{success:!1,error:"No stored session"};let A;try{A=JSON.parse(b)}catch(W){return console.log("❌ Failed to parse stored session:",W),{success:!1,error:"Invalid session format"}}const k=((t=A==null?void 0:A.currentSession)==null?void 0:t.access_token)||(A==null?void 0:A.access_token)||((a=A==null?void 0:A.session)==null?void 0:a.access_token);if(!k)return console.log("🔑 No access token found in stored session structure:",A),{success:!1,error:"No access token in stored session"};console.log("🔑 Found access token, validating...");const{data:{user:O},error:B}=await Zi.auth.getUser(k);return B||!O?(console.log("❌ Stored token is invalid:",B==null?void 0:B.message),d&&localStorage.removeItem(d),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:k,refresh_token:((c=A==null?void 0:A.currentSession)==null?void 0:c.refresh_token)||(A==null?void 0:A.refresh_token),expires_in:((g=A==null?void 0:A.currentSession)==null?void 0:g.expires_in)||(A==null?void 0:A.expires_in),token_type:"bearer",user:O},this.currentUser=O,await this.loadUserProfile(O.id),console.log("✅ Session recovered successfully for user:",O.email),{success:!0})}catch(N){return console.error("❌ Error recovering session:",N),{success:!1,error:"Failed to recover session"}}}}const Pr=new R5,L5=eu.api.url;class I5{constructor(t){Js(this,"baseUrl");this.baseUrl=t}async backendRequest(t,a){const c=`${this.baseUrl}${t}`,g={"Content-Type":"application/json"};try{const b=Pr.getAccessToken();b&&(g.Authorization=`Bearer ${b}`)}catch{console.log("🔓 Public access - no authentication token available")}a!=null&&a.headers&&Object.assign(g,a.headers);const N=await fetch(c,{headers:g,...a});if(!N.ok)throw new Error(`API request failed: ${N.status} ${N.statusText}`);return N.json()}async getHealth(){return this.backendRequest("/health")}async getAllBuses(){try{const t=await this.backendRequest("/buses");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getAllBuses:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusInfo(t){try{const a=await this.backendRequest(`/buses/${t}`);return a.success&&a.data?{success:!0,data:a.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus info from backend:",a.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(a){return console.error("❌ Error in getBusInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutes(){try{const t=await this.backendRequest("/routes");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getRoutes:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getRouteInfo(t){try{const{data:a,error:c}=await Zi.from("routes").select("*").eq("id",t).single();return c?(console.error("❌ Error fetching route info:",c),{success:!1,data:null,timestamp:new Date().toISOString()}):{success:!0,data:a,timestamp:new Date().toISOString()}}catch(a){return console.error("❌ Error in getRouteInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getAllDrivers(){try{const{data:t,error:a}=await Zi.from("users").select("*").eq("role","driver").order("created_at",{ascending:!1});return a?(console.error("❌ Error fetching drivers:",a),{success:!1,data:[],timestamp:new Date().toISOString()}):{success:!0,data:t||[],timestamp:new Date().toISOString()}}catch(t){return console.error("❌ Error in getAllDrivers:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getDriverInfo(t){try{const{data:a,error:c}=await Zi.from("users").select("*").eq("id",t).eq("role","driver").single();return c?(console.error("❌ Error fetching driver info:",c),{success:!1,data:null,timestamp:new Date().toISOString()}):{success:!0,data:a,timestamp:new Date().toISOString()}}catch(a){return console.error("❌ Error in getDriverInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getLiveLocations(){try{const{data:t,error:a}=await Zi.from("live_locations").select(`
          *,
          bus:buses!live_locations_bus_id_fkey (
            id,
            bus_number,
            capacity,
            bus_image_url
          ),
          driver:users!live_locations_driver_id_fkey (
            id,
            first_name,
            last_name,
            email,
            phone
          )
        `).order("updated_at",{ascending:!1});return a?(console.error("❌ Error fetching live locations:",a),{success:!1,data:[],timestamp:new Date().toISOString()}):{success:!0,data:t||[],timestamp:new Date().toISOString()}}catch(t){return console.error("❌ Error in getLiveLocations:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async updateLiveLocation(t,a,c){try{const{data:g,error:N}=await Zi.from("live_locations").upsert({bus_id:t,driver_id:a,latitude:c.latitude,longitude:c.longitude,updated_at:new Date().toISOString()}).select().single();return N?(console.error("❌ Error updating live location:",N),{success:!1,data:null,timestamp:new Date().toISOString()}):{success:!0,data:g,timestamp:new Date().toISOString()}}catch(g){return console.error("❌ Error in updateLiveLocation:",g),{success:!1,data:null,timestamp:new Date().toISOString()}}}}const jC=new I5(L5),iu=Object.create(null);iu.open="0";iu.close="1";iu.ping="2";iu.pong="3";iu.message="4";iu.upgrade="5";iu.noop="6";const zx=Object.create(null);Object.keys(iu).forEach(o=>{zx[iu[o]]=o});const AC={type:"error",data:"parser error"},Zj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kj=typeof ArrayBuffer=="function",Yj=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,gN=({type:o,data:t},a,c)=>Zj&&t instanceof Blob?a?c(t):FT(t,c):Kj&&(t instanceof ArrayBuffer||Yj(t))?a?c(t):FT(new Blob([t]),c):c(iu[o]+(t||"")),FT=(o,t)=>{const a=new FileReader;return a.onload=function(){const c=a.result.split(",")[1];t("b"+(c||""))},a.readAsDataURL(o)};function UT(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}let Z1;function V5(o,t){if(Zj&&o.data instanceof Blob)return o.data.arrayBuffer().then(UT).then(t);if(Kj&&(o.data instanceof ArrayBuffer||Yj(o.data)))return t(UT(o.data));gN(o,!1,a=>{Z1||(Z1=new TextEncoder),t(Z1.encode(a))})}const $T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<$T.length;o++)jv[$T.charCodeAt(o)]=o;const O5=o=>{let t=o.length*.75,a=o.length,c,g=0,N,b,d,A;o[o.length-1]==="="&&(t--,o[o.length-2]==="="&&t--);const k=new ArrayBuffer(t),O=new Uint8Array(k);for(c=0;c<a;c+=4)N=jv[o.charCodeAt(c)],b=jv[o.charCodeAt(c+1)],d=jv[o.charCodeAt(c+2)],A=jv[o.charCodeAt(c+3)],O[g++]=N<<2|b>>4,O[g++]=(b&15)<<4|d>>2,O[g++]=(d&3)<<6|A&63;return k},z5=typeof ArrayBuffer=="function",vN=(o,t)=>{if(typeof o!="string")return{type:"message",data:Xj(o,t)};const a=o.charAt(0);return a==="b"?{type:"message",data:B5(o.substring(1),t)}:zx[a]?o.length>1?{type:zx[a],data:o.substring(1)}:{type:zx[a]}:AC},B5=(o,t)=>{if(z5){const a=O5(o);return Xj(a,t)}else return{base64:!0,data:o}},Xj=(o,t)=>{switch(t){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}},Jj="",F5=(o,t)=>{const a=o.length,c=new Array(a);let g=0;o.forEach((N,b)=>{gN(N,!1,d=>{c[b]=d,++g===a&&t(c.join(Jj))})})},U5=(o,t)=>{const a=o.split(Jj),c=[];for(let g=0;g<a.length;g++){const N=vN(a[g],t);if(c.push(N),N.type==="error")break}return c};function $5(){return new TransformStream({transform(o,t){V5(o,a=>{const c=a.length;let g;if(c<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,c);else if(c<65536){g=new Uint8Array(3);const N=new DataView(g.buffer);N.setUint8(0,126),N.setUint16(1,c)}else{g=new Uint8Array(9);const N=new DataView(g.buffer);N.setUint8(0,127),N.setBigUint64(1,BigInt(c))}o.data&&typeof o.data!="string"&&(g[0]|=128),t.enqueue(g),t.enqueue(a)})}})}let K1;function jx(o){return o.reduce((t,a)=>t+a.length,0)}function Ax(o,t){if(o[0].length===t)return o.shift();const a=new Uint8Array(t);let c=0;for(let g=0;g<t;g++)a[g]=o[0][c++],c===o[0].length&&(o.shift(),c=0);return o.length&&c<o[0].length&&(o[0]=o[0].slice(c)),a}function q5(o,t){K1||(K1=new TextDecoder);const a=[];let c=0,g=-1,N=!1;return new TransformStream({transform(b,d){for(a.push(b);;){if(c===0){if(jx(a)<1)break;const A=Ax(a,1);N=(A[0]&128)===128,g=A[0]&127,g<126?c=3:g===126?c=1:c=2}else if(c===1){if(jx(a)<2)break;const A=Ax(a,2);g=new DataView(A.buffer,A.byteOffset,A.length).getUint16(0),c=3}else if(c===2){if(jx(a)<8)break;const A=Ax(a,8),k=new DataView(A.buffer,A.byteOffset,A.length),O=k.getUint32(0);if(O>Math.pow(2,21)-1){d.enqueue(AC);break}g=O*Math.pow(2,32)+k.getUint32(4),c=3}else{if(jx(a)<g)break;const A=Ax(a,g);d.enqueue(vN(N?A:K1.decode(A),t)),c=0}if(g===0||g>o){d.enqueue(AC);break}}}})}const Qj=4;function Ss(o){if(o)return H5(o)}function H5(o){for(var t in Ss.prototype)o[t]=Ss.prototype[t];return o}Ss.prototype.on=Ss.prototype.addEventListener=function(o,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(t),this};Ss.prototype.once=function(o,t){function a(){this.off(o,a),t.apply(this,arguments)}return a.fn=t,this.on(o,a),this};Ss.prototype.off=Ss.prototype.removeListener=Ss.prototype.removeAllListeners=Ss.prototype.removeEventListener=function(o,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+o];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var c,g=0;g<a.length;g++)if(c=a[g],c===t||c.fn===t){a.splice(g,1);break}return a.length===0&&delete this._callbacks["$"+o],this};Ss.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+o],c=1;c<arguments.length;c++)t[c-1]=arguments[c];if(a){a=a.slice(0);for(var c=0,g=a.length;c<g;++c)a[c].apply(this,t)}return this};Ss.prototype.emitReserved=Ss.prototype.emit;Ss.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};Ss.prototype.hasListeners=function(o){return!!this.listeners(o).length};const d0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0),yl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),G5="arraybuffer";function eA(o,...t){return t.reduce((a,c)=>(o.hasOwnProperty(c)&&(a[c]=o[c]),a),{})}const W5=yl.setTimeout,Z5=yl.clearTimeout;function h0(o,t){t.useNativeTimers?(o.setTimeoutFn=W5.bind(yl),o.clearTimeoutFn=Z5.bind(yl)):(o.setTimeoutFn=yl.setTimeout.bind(yl),o.clearTimeoutFn=yl.clearTimeout.bind(yl))}const K5=1.33;function Y5(o){return typeof o=="string"?X5(o):Math.ceil((o.byteLength||o.size)*K5)}function X5(o){let t=0,a=0;for(let c=0,g=o.length;c<g;c++)t=o.charCodeAt(c),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(c++,a+=4);return a}function tA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function J5(o){let t="";for(let a in o)o.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(o[a]));return t}function Q5(o){let t={},a=o.split("&");for(let c=0,g=a.length;c<g;c++){let N=a[c].split("=");t[decodeURIComponent(N[0])]=decodeURIComponent(N[1])}return t}class ez extends Error{constructor(t,a,c){super(t),this.description=a,this.context=c,this.type="TransportError"}}class yN extends Ss{constructor(t){super(),this.writable=!1,h0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,c){return super.emitReserved("error",new ez(t,a,c)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=vN(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=J5(t);return a.length?"?"+a:""}}class tz extends yN{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let c=0;this._polling&&(c++,this.once("pollComplete",function(){--c||a()})),this.writable||(c++,this.once("drain",function(){--c||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=c=>{if(this.readyState==="opening"&&c.type==="open"&&this.onOpen(),c.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(c)};U5(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,F5(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=tA()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let nA=!1;try{nA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const nz=nA;function rz(){}class iz extends tz{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let c=location.port;c||(c=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||c!==t.port}}doWrite(t,a){const c=this.request({method:"POST",data:t});c.on("success",a),c.on("error",(g,N)=>{this.onError("xhr post error",g,N)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,c)=>{this.onError("xhr poll error",a,c)}),this.pollXhr=t}}let hp=class Bx extends Ss{constructor(t,a,c){super(),this.createRequest=t,h0(this,c),this._opts=c,this._method=c.method||"GET",this._uri=a,this._data=c.data!==void 0?c.data:null,this._create()}_create(){var t;const a=eA(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const c=this._xhr=this.createRequest(a);try{c.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(let g in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(g)&&c.setRequestHeader(g,this._opts.extraHeaders[g])}}catch{}if(this._method==="POST")try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{c.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(c),"withCredentials"in c&&(c.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(c.timeout=this._opts.requestTimeout),c.onreadystatechange=()=>{var g;c.readyState===3&&((g=this._opts.cookieJar)===null||g===void 0||g.parseCookies(c.getResponseHeader("set-cookie"))),c.readyState===4&&(c.status===200||c.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof c.status=="number"?c.status:0)},0))},c.send(this._data)}catch(g){this.setTimeoutFn(()=>{this._onError(g)},0);return}typeof document<"u"&&(this._index=Bx.requestsCount++,Bx.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=rz,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Bx.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};hp.requestsCount=0;hp.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",qT);else if(typeof addEventListener=="function"){const o="onpagehide"in yl?"pagehide":"unload";addEventListener(o,qT,!1)}}function qT(){for(let o in hp.requests)hp.requests.hasOwnProperty(o)&&hp.requests[o].abort()}const sz=function(){const o=rA({xdomain:!1});return o&&o.responseType!==null}();class az extends iz{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=sz&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new hp(rA,this.uri(),t)}}function rA(o){const t=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||nz))return new XMLHttpRequest}catch{}if(!t)try{return new yl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const iA=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oz extends yN{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,c=iA?{}:eA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,c)}catch(g){return this.emitReserved("error",g)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const c=t[a],g=a===t.length-1;gN(c,this.supportsBinary,N=>{try{this.doWrite(c,N)}catch{}g&&d0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=tA()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const Y1=yl.WebSocket||yl.MozWebSocket;class lz extends oz{createSocket(t,a,c){return iA?new Y1(t,a,c):a?new Y1(t,a):new Y1(t)}doWrite(t,a){this.ws.send(a)}}class cz extends yN{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=q5(Number.MAX_SAFE_INTEGER,this.socket.binaryType),c=t.readable.pipeThrough(a).getReader(),g=$5();g.readable.pipeTo(t.writable),this._writer=g.writable.getWriter();const N=()=>{c.read().then(({done:d,value:A})=>{d||(this.onPacket(A),N())}).catch(d=>{})};N();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const c=t[a],g=a===t.length-1;this._writer.write(c).then(()=>{g&&d0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const uz={websocket:lz,webtransport:cz,polling:az},dz=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function kC(o){if(o.length>8e3)throw"URI too long";const t=o,a=o.indexOf("["),c=o.indexOf("]");a!=-1&&c!=-1&&(o=o.substring(0,a)+o.substring(a,c).replace(/:/g,";")+o.substring(c,o.length));let g=dz.exec(o||""),N={},b=14;for(;b--;)N[hz[b]]=g[b]||"";return a!=-1&&c!=-1&&(N.source=t,N.host=N.host.substring(1,N.host.length-1).replace(/;/g,":"),N.authority=N.authority.replace("[","").replace("]","").replace(/;/g,":"),N.ipv6uri=!0),N.pathNames=fz(N,N.path),N.queryKey=mz(N,N.query),N}function fz(o,t){const a=/\/{2,9}/g,c=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&c.splice(0,1),t.slice(-1)=="/"&&c.splice(c.length-1,1),c}function mz(o,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(c,g,N){g&&(a[g]=N)}),a}const MC=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fx=[];MC&&addEventListener("offline",()=>{Fx.forEach(o=>o())},!1);class ph extends Ss{constructor(t,a){if(super(),this.binaryType=G5,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const c=kC(t);a.hostname=c.host,a.secure=c.protocol==="https"||c.protocol==="wss",a.port=c.port,c.query&&(a.query=c.query)}else a.host&&(a.hostname=kC(a.host).host);h0(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(c=>{const g=c.prototype.name;this.transports.push(g),this._transportsByName[g]=c}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Q5(this.opts.query)),MC&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=Qj,a.transport=t,this.id&&(a.sid=this.id);const c=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](c)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ph.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",ph.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let c=0;c<this.writeBuffer.length;c++){const g=this.writeBuffer[c].data;if(g&&(a+=Y5(g)),c>0&&a>this._maxPayload)return this.writeBuffer.slice(0,c);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,d0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,c){return this._sendPacket("message",t,a,c),this}send(t,a,c){return this._sendPacket("message",t,a,c),this}_sendPacket(t,a,c,g){if(typeof a=="function"&&(g=a,a=void 0),typeof c=="function"&&(g=c,c=null),this.readyState==="closing"||this.readyState==="closed")return;c=c||{},c.compress=c.compress!==!1;const N={type:t,data:a,options:c};this.emitReserved("packetCreate",N),this.writeBuffer.push(N),g&&this.once("flush",g),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},c=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():t()}):this.upgrading?c():t()),this}_onError(t){if(ph.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),MC&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const c=Fx.indexOf(this._offlineEventListener);c!==-1&&Fx.splice(c,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}ph.protocol=Qj;class pz extends ph{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),c=!1;ph.priorWebsocketSuccess=!1;const g=()=>{c||(a.send([{type:"ping",data:"probe"}]),a.once("packet",B=>{if(!c)if(B.type==="pong"&&B.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;ph.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{c||this.readyState!=="closed"&&(O(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const W=new Error("probe error");W.transport=a.name,this.emitReserved("upgradeError",W)}}))};function N(){c||(c=!0,O(),a.close(),a=null)}const b=B=>{const W=new Error("probe error: "+B);W.transport=a.name,N(),this.emitReserved("upgradeError",W)};function d(){b("transport closed")}function A(){b("socket closed")}function k(B){a&&B.name!==a.name&&N()}const O=()=>{a.removeListener("open",g),a.removeListener("error",b),a.removeListener("close",d),this.off("close",A),this.off("upgrading",k)};a.once("open",g),a.once("error",b),a.once("close",d),this.once("close",A),this.once("upgrading",k),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{c||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let c=0;c<t.length;c++)~this.transports.indexOf(t[c])&&a.push(t[c]);return a}}let gz=class extends pz{constructor(t,a={}){const c=typeof t=="object"?t:a;(!c.transports||c.transports&&typeof c.transports[0]=="string")&&(c.transports=(c.transports||["polling","websocket","webtransport"]).map(g=>uz[g]).filter(g=>!!g)),super(t,c)}};function vz(o,t="",a){let c=o;a=a||typeof location<"u"&&location,o==null&&(o=a.protocol+"//"+a.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=a.protocol+o:o=a.host+o),/^(https?|wss?):\/\//.test(o)||(typeof a<"u"?o=a.protocol+"//"+o:o="https://"+o),c=kC(o)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/";const N=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host;return c.id=c.protocol+"://"+N+":"+c.port+t,c.href=c.protocol+"://"+N+(a&&a.port===c.port?"":":"+c.port),c}const yz=typeof ArrayBuffer=="function",bz=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,sA=Object.prototype.toString,xz=typeof Blob=="function"||typeof Blob<"u"&&sA.call(Blob)==="[object BlobConstructor]",_z=typeof File=="function"||typeof File<"u"&&sA.call(File)==="[object FileConstructor]";function bN(o){return yz&&(o instanceof ArrayBuffer||bz(o))||xz&&o instanceof Blob||_z&&o instanceof File}function Ux(o,t){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let a=0,c=o.length;a<c;a++)if(Ux(o[a]))return!0;return!1}if(bN(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return Ux(o.toJSON(),!0);for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&Ux(o[a]))return!0;return!1}function wz(o){const t=[],a=o.data,c=o;return c.data=RC(a,t),c.attachments=t.length,{packet:c,buffers:t}}function RC(o,t){if(!o)return o;if(bN(o)){const a={_placeholder:!0,num:t.length};return t.push(o),a}else if(Array.isArray(o)){const a=new Array(o.length);for(let c=0;c<o.length;c++)a[c]=RC(o[c],t);return a}else if(typeof o=="object"&&!(o instanceof Date)){const a={};for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=RC(o[c],t));return a}return o}function Cz(o,t){return o.data=LC(o.data,t),delete o.attachments,o}function LC(o,t){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<t.length)return t[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let a=0;a<o.length;a++)o[a]=LC(o[a],t);else if(typeof o=="object")for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(o[a]=LC(o[a],t));return o}const Nz=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Sz=5;var Tr;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(Tr||(Tr={}));class Ez{constructor(t){this.replacer=t}encode(t){return(t.type===Tr.EVENT||t.type===Tr.ACK)&&Ux(t)?this.encodeAsBinary({type:t.type===Tr.EVENT?Tr.BINARY_EVENT:Tr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===Tr.BINARY_EVENT||t.type===Tr.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=wz(t),c=this.encodeAsString(a.packet),g=a.buffers;return g.unshift(c),g}}function HT(o){return Object.prototype.toString.call(o)==="[object Object]"}class xN extends Ss{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const c=a.type===Tr.BINARY_EVENT;c||a.type===Tr.BINARY_ACK?(a.type=c?Tr.EVENT:Tr.ACK,this.reconstructor=new Dz(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(bN(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const c={type:Number(t.charAt(0))};if(Tr[c.type]===void 0)throw new Error("unknown packet type "+c.type);if(c.type===Tr.BINARY_EVENT||c.type===Tr.BINARY_ACK){const N=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const b=t.substring(N,a);if(b!=Number(b)||t.charAt(a)!=="-")throw new Error("Illegal attachments");c.attachments=Number(b)}if(t.charAt(a+1)==="/"){const N=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););c.nsp=t.substring(N,a)}else c.nsp="/";const g=t.charAt(a+1);if(g!==""&&Number(g)==g){const N=a+1;for(;++a;){const b=t.charAt(a);if(b==null||Number(b)!=b){--a;break}if(a===t.length)break}c.id=Number(t.substring(N,a+1))}if(t.charAt(++a)){const N=this.tryParse(t.substr(a));if(xN.isPayloadValid(c.type,N))c.data=N;else throw new Error("invalid payload")}return c}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case Tr.CONNECT:return HT(a);case Tr.DISCONNECT:return a===void 0;case Tr.CONNECT_ERROR:return typeof a=="string"||HT(a);case Tr.EVENT:case Tr.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Nz.indexOf(a[0])===-1);case Tr.ACK:case Tr.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Dz{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=Cz(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Tz=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xN,Encoder:Ez,get PacketType(){return Tr},protocol:Sz},Symbol.toStringTag,{value:"Module"}));function hc(o,t,a){return o.on(t,a),function(){o.off(t,a)}}const Pz=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class aA extends Ss{constructor(t,a,c){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,c&&c.auth&&(this.auth=c.auth),this._opts=Object.assign({},c),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[hc(t,"open",this.onopen.bind(this)),hc(t,"packet",this.onpacket.bind(this)),hc(t,"error",this.onerror.bind(this)),hc(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var c,g,N;if(Pz.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const b={type:Tr.EVENT,data:a};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const O=this.ids++,B=a.pop();this._registerAckCallback(O,B),b.id=O}const d=(g=(c=this.io.engine)===null||c===void 0?void 0:c.transport)===null||g===void 0?void 0:g.writable,A=this.connected&&!(!((N=this.io.engine)===null||N===void 0)&&N._hasPingExpired());return this.flags.volatile&&!d||(A?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(t,a){var c;const g=(c=this.flags.timeout)!==null&&c!==void 0?c:this._opts.ackTimeout;if(g===void 0){this.acks[t]=a;return}const N=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);a.call(this,new Error("operation has timed out"))},g),b=(...d)=>{this.io.clearTimeoutFn(N),a.apply(this,d)};b.withError=!0,this.acks[t]=b}emitWithAck(t,...a){return new Promise((c,g)=>{const N=(b,d)=>b?g(b):c(d);N.withError=!0,a.push(N),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const c={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((g,...N)=>c!==this._queue[0]?void 0:(g!==null?c.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(g)):(this._queue.shift(),a&&a(null,...N)),c.pending=!1,this._drainQueue())),this._queue.push(c),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Tr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(c=>String(c.id)===t)){const c=this.acks[t];delete this.acks[t],c.withError&&c.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Tr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tr.EVENT:case Tr.BINARY_EVENT:this.onevent(t);break;case Tr.ACK:case Tr.BINARY_ACK:this.onack(t);break;case Tr.DISCONNECT:this.ondisconnect();break;case Tr.CONNECT_ERROR:this.destroy();const c=new Error(t.data.message);c.data=t.data.data,this.emitReserved("connect_error",c);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const c of a)c.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let c=!1;return function(...g){c||(c=!0,a.packet({type:Tr.ACK,id:t,data:g}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let c=0;c<a.length;c++)if(t===a[c])return a.splice(c,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let c=0;c<a.length;c++)if(t===a[c])return a.splice(c,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const c of a)c.apply(this,t.data)}}}function wp(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}wp.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*o);o=Math.floor(t*10)&1?o+a:o-a}return Math.min(o,this.max)|0};wp.prototype.reset=function(){this.attempts=0};wp.prototype.setMin=function(o){this.ms=o};wp.prototype.setMax=function(o){this.max=o};wp.prototype.setJitter=function(o){this.jitter=o};class IC extends Ss{constructor(t,a){var c;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,h0(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((c=a.randomizationFactor)!==null&&c!==void 0?c:.5),this.backoff=new wp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const g=a.parser||Tz;this.encoder=new g.Encoder,this.decoder=new g.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new gz(this.uri,this.opts);const a=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;const g=hc(a,"open",function(){c.onopen(),t&&t()}),N=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},b=hc(a,"error",N);if(this._timeout!==!1){const d=this._timeout,A=this.setTimeoutFn(()=>{g(),N(new Error("timeout")),a.close()},d);this.opts.autoUnref&&A.unref(),this.subs.push(()=>{this.clearTimeoutFn(A)})}return this.subs.push(g),this.subs.push(b),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(hc(t,"ping",this.onping.bind(this)),hc(t,"data",this.ondata.bind(this)),hc(t,"error",this.onerror.bind(this)),hc(t,"close",this.onclose.bind(this)),hc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){d0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let c=this.nsps[t];return c?this._autoConnect&&!c.active&&c.connect():(c=new aA(this,t,a),this.nsps[t]=c),c}_destroy(t){const a=Object.keys(this.nsps);for(const c of a)if(this.nsps[c].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let c=0;c<a.length;c++)this.engine.write(a[c],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var c;this.cleanup(),(c=this.engine)===null||c===void 0||c.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const c=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(g=>{g?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",g)):t.onreconnect()}))},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ev={};function $x(o,t){typeof o=="object"&&(t=o,o=void 0),t=t||{};const a=vz(o,t.path||"/socket.io"),c=a.source,g=a.id,N=a.path,b=Ev[g]&&N in Ev[g].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||b;let A;return d?A=new IC(c,t):(Ev[g]||(Ev[g]=new IC(c,t)),A=Ev[g]),a.query&&!t.query&&(t.query=a.queryKey),A.socket(a.path,t)}Object.assign($x,{Manager:IC,Socket:aA,io:$x,connect:$x});class jz{constructor(){Js(this,"socket",null);Js(this,"_isConnected",!1);Js(this,"reconnectAttempts",0);Js(this,"maxReconnectAttempts",10);Js(this,"reconnectDelay",1e3);Js(this,"reconnectTimer",null);Js(this,"heartbeatTimer",null);Js(this,"isReconnecting",!1)}connect(t=eu.api.websocketUrl){return new Promise((a,c)=>{if(this.isReconnecting){console.log("🔄 Already attempting to reconnect...");return}this.isReconnecting=!0,setTimeout(()=>{try{this.socket=$x(t,{transports:["websocket","polling"],timeout:3e4,reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:this.reconnectDelay,reconnectionDelayMax:5e3,forceNew:!0,upgrade:!0,rememberUpgrade:!0,autoConnect:!0}),this.socket.on("connect",()=>{var g;console.log("✅ WebSocket connected"),this._isConnected=!0,this.isReconnecting=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.startHeartbeat(),(g=this.socket)==null||g.emit("student:connect"),a()}),this.socket.on("disconnect",g=>{console.log("❌ WebSocket disconnected:",g),this._isConnected=!1,this.stopHeartbeat(),(g==="io server disconnect"||g==="transport close")&&this.handleReconnection()}),this.socket.on("connect_error",g=>{console.error("❌ WebSocket connection error:",g),this.isReconnecting=!1,this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts?c(new Error("Failed to connect to WebSocket server")):this.handleReconnection()}),this.socket.on("error",g=>{console.error("❌ WebSocket error:",g)}),this.socket.on("reconnect",g=>{var N;console.log(`🔄 WebSocket reconnected after ${g} attempts`),this._isConnected=!0,this.isReconnecting=!1,this.reconnectAttempts=0,(N=this.socket)==null||N.emit("student:connect")}),this.socket.on("reconnect_error",g=>{console.error("❌ WebSocket reconnection error:",g)}),this.socket.on("reconnect_failed",()=>{console.error("❌ WebSocket reconnection failed"),this.isReconnecting=!1,c(new Error("Failed to reconnect to WebSocket server"))})}catch(g){console.error("❌ Failed to create WebSocket connection:",g),this.isReconnecting=!1,c(g)}},500)})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this._isConnected=!1),this.stopHeartbeat(),this.isReconnecting=!1}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{this.socket&&this._isConnected&&(this.socket.emit("ping"),console.log("💓 Heartbeat sent"))},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}handleReconnection(){if(this.isReconnecting)return;this.isReconnecting=!0,console.log("🔄 Attempting to reconnect..."),this.reconnectTimer&&clearTimeout(this.reconnectTimer);const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),1e4);this.reconnectTimer=setTimeout(()=>{this.connect().catch(a=>{console.error("❌ Reconnection failed:",a),this.isReconnecting=!1})},t)}onBusLocationUpdate(t){var a;console.log("🎧 Setting up bus:locationUpdate listener"),(a=this.socket)==null||a.on("bus:locationUpdate",c=>{console.log("📡 Received bus:locationUpdate event:",c),t(c)})}onDriverConnected(t){var a;(a=this.socket)==null||a.on("driver:connected",t)}onDriverDisconnected(t){var a;(a=this.socket)==null||a.on("driver:disconnected",t)}onStudentConnected(t){var a;(a=this.socket)==null||a.on("student:connected",t)}onBusArriving(t){var a;(a=this.socket)==null||a.on("bus:arriving",t)}isConnected(){return this._isConnected}getConnectionStatus(){return this._isConnected}authenticateAsDriver(t){this.socket&&this.isConnected()?(this.socket.emit("driver:authenticate",{token:t}),this.socket.once("driver:authenticated",a=>{console.log("✅ Driver: Authentication successful:",a)}),this.socket.once("error",a=>{console.error("❌ Driver: Authentication failed:",a)})):console.error("❌ Driver: Cannot authenticate - socket not connected")}off(t){var a;(a=this.socket)==null||a.off(t)}}const ar=new jz;var oA={exports:{}};(function(o,t){(function(a,c){o.exports=c()})(Bo,function(){var a,c,g;function N(d,A){if(!a)a=A;else if(!c)c=A;else{var k="var sharedChunk = {}; ("+a+")(sharedChunk); ("+c+")(sharedChunk);",O={};a(O),g=A(O),typeof window<"u"&&(g.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}N(["exports"],function(d){function A(s,n,l,f){return new(l||(l=Promise))(function(v,C){function E(V){try{M(f.next(V))}catch(F){C(F)}}function T(V){try{M(f.throw(V))}catch(F){C(F)}}function M(V){var F;V.done?v(V.value):(F=V.value,F instanceof l?F:new l(function(H){H(F)})).then(E,T)}M((f=f.apply(s,n||[])).next())})}function k(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var O=B;function B(s,n){this.x=s,this.y=n}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,l=s.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),l=Math.sin(s),f=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=f,this},_rotateAround:function(s,n){var l=Math.cos(s),f=Math.sin(s),v=n.y+f*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(s){return s instanceof B?s:Array.isArray(s)?new B(s[0],s[1]):s};var W=k(O),ie=pe;function pe(s,n,l,f){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=l,this.p2y=f}pe.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,f=0;f<8;f++){var v=this.sampleCurveX(l)-s;if(Math.abs(v)<n)return l;var C=this.sampleCurveDerivativeX(l);if(Math.abs(C)<1e-6)break;l-=v/C}var E=0,T=1;for(l=s,f=0;f<20&&(v=this.sampleCurveX(l),!(Math.abs(v-s)<n));f++)s>v?E=l:T=l,l=.5*(T-E)+E;return l},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var Oe=k(ie);let Se,Pe;function De(){return Se==null&&(Se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Se}function Ce(){if(Pe==null&&(Pe=!1,De())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<5*5;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const l=n.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){Pe=!0;break}}}return Pe||!1}function ze(s,n,l,f){const v=new Oe(s,n,l,f);return function(C){return v.solve(C)}}const Re=ze(.25,.1,.25,1);function Ze(s,n,l){return Math.min(l,Math.max(n,s))}function tt(s,n,l){const f=l-n,v=((s-n)%f+f)%f+n;return v===n?l:v}function ut(s,...n){for(const l of n)for(const f in l)s[f]=l[f];return s}let Rt=1;function zt(s,n,l){const f={};for(const v in s)f[v]=n.call(l||this,s[v],v,s);return f}function fn(s,n,l){const f={};for(const v in s)n.call(l||this,s[v],v,s)&&(f[v]=s[v]);return f}function lt(s){return Array.isArray(s)?s.map(lt):typeof s=="object"&&s?zt(s,lt):s}const ct={};function ht(s){ct[s]||(typeof console<"u"&&console.warn(s),ct[s]=!0)}function $t(s,n,l){return(l.y-s.y)*(n.x-s.x)>(n.y-s.y)*(l.x-s.x)}function An(s){let n=0;for(let l,f,v=0,C=s.length,E=C-1;v<C;E=v++)l=s[v],f=s[E],n+=(f.x-l.x)*(l.y+f.y);return n}function Ct(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let pn=null;function Sn(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Yn(s,n,l,f,v){return A(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(s,{timestamp:0});try{const E=C==null?void 0:C.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const T=E.startsWith("BGR"),M=new Uint8ClampedArray(f*v*4);if(yield C.copyTo(M,function(V,F,H,Y,Q){const ee=4*Math.max(-F,0),ue=(Math.max(0,H)-H)*Y*4+ee,ve=4*Y,be=Math.max(0,F),Me=Math.max(0,H);return{rect:{x:be,y:Me,width:Math.min(V.width,F+Y)-be,height:Math.min(V.height,H+Q)-Me},layout:[{offset:ue,stride:ve}]}}(s,n,l,f,v)),T)for(let V=0;V<M.length;V+=4){const F=M[V];M[V]=M[V+2],M[V+2]=F}return M}finally{C.close()}})}let Vn,Nt,Be,Mt;const yn={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,l.drawImage(s,0,0,s.width,s.height),l},resolveURL:s=>(Be||(Be=document.createElement("a")),Be.href=s,Be.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Mt==null&&(Mt=matchMedia("(prefers-reduced-motion: reduce)")),Mt.matches)}},Dn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class qt extends Error{constructor(n,l,f,v){super(`AJAXError: ${l} (${n}): ${f}`),this.status=n,this.statusText=l,this.url=f,this.body=v}}const Ft=Ct()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Pn=s=>Dn.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function vr(s,n){const l=new AbortController,f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:Ft(),signal:l.signal});let v=!1,C=!1;return s.type==="json"&&f.headers.set("Accept","application/json"),C||fetch(f).then(E=>E.ok?(T=>{(s.type==="arrayBuffer"||s.type==="image"?T.arrayBuffer():s.type==="json"?T.json():T.text()).then(M=>{C||(v=!0,n(null,M,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(M=>{C||n(new Error(M.message))})})(E):E.blob().then(T=>n(new qt(E.status,E.statusText,s.url,T)))).catch(E=>{E.code!==20&&n(new Error(E.message))}),{cancel:()=>{C=!0,v||l.abort()}}}const cn=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!Ct())return(Pn(s.url)||vr)(s,n)}if(!(/^file:/.test(l=s.url)||/^file:/.test(Ft())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return vr(s,n);if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var l;return function(f,v){const C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(C.responseType="arraybuffer");for(const E in f.headers)C.setRequestHeader(E,f.headers[E]);return f.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{v(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let E=C.response;if(f.type==="json")try{E=JSON.parse(C.response)}catch(T){return v(T)}v(null,E,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const E=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});v(new qt(C.status,C.statusText,f.url,E))}},C.send(f.body),{cancel:()=>C.abort()}}(s,n)},tr=function(s,n){return cn(ut(s,{type:"arrayBuffer"}),n)};function $r(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function Sr(s,n,l){l[s]&&l[s].indexOf(n)!==-1||(l[s]=l[s]||[],l[s].push(n))}function ur(s,n,l){if(l&&l[s]){const f=l[s].indexOf(n);f!==-1&&l[s].splice(f,1)}}class hi{constructor(n,l={}){ut(this,l),this.type=n}}class Lr extends hi{constructor(n,l={}){super("error",ut({error:n},l))}}class ii{on(n,l){return this._listeners=this._listeners||{},Sr(n,l,this._listeners),this}off(n,l){return ur(n,l,this._listeners),ur(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Sr(n,l,this._oneTimeListeners),this):new Promise(f=>this.once(n,f))}fire(n,l){typeof n=="string"&&(n=new hi(n,l||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of v)T.call(this,n);const C=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of C)ur(f,T,this._oneTimeListeners),T.call(this,n);const E=this._eventedParent;E&&(ut(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(n))}else n instanceof Lr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rr(s,n){const l={};for(const f in s)f!=="ref"&&(l[f]=s[f]);return mr.forEach(f=>{f in n&&(l[f]=n[f])}),l}function Ln(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let l=0;l<s.length;l++)if(!Ln(s[l],n[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const l in s)if(!Ln(s[l],n[l]))return!1;return!0}return s===n}const kn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yr(s,n,l){l.push({command:kn.addSource,args:[s,n[s]]})}function si(s,n,l){n.push({command:kn.removeSource,args:[s]}),l[s]=!0}function qr(s,n,l,f){si(s,l,f),yr(s,n,l)}function fs(s,n,l){let f;for(f in s[l])if(Object.prototype.hasOwnProperty.call(s[l],f)&&f!=="data"&&!Ln(s[l][f],n[l][f]))return!1;for(f in n[l])if(Object.prototype.hasOwnProperty.call(n[l],f)&&f!=="data"&&!Ln(s[l][f],n[l][f]))return!1;return!0}function Bi(s,n,l,f,v,C){let E;for(E in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,E)&&(Ln(s[E],n[E])||l.push({command:C,args:[f,E,n[E],v]}));for(E in n)Object.prototype.hasOwnProperty.call(n,E)&&!Object.prototype.hasOwnProperty.call(s,E)&&(Ln(s[E],n[E])||l.push({command:C,args:[f,E,n[E],v]}))}function Tt(s){return s.id}function rn(s,n){return s[n.id]=n,s}class nt{constructor(n,l,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function zn(s,...n){for(const l of n)for(const f in l)s[f]=l[f];return s}class Cn extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class br{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[f,v]of l)this.bindings[f]=v}concat(n){return new br(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const dr={kind:"null"},gt={kind:"number"},Kt={kind:"string"},Bt={kind:"boolean"},On={kind:"color"},Kr={kind:"object"},un={kind:"value"},ai={kind:"collator"},fe={kind:"formatted"},L={kind:"padding"},G={kind:"resolvedImage"},J={kind:"variableAnchorOffsetCollection"};function se(s,n){return{kind:"array",itemType:s,N:n}}function he(s){if(s.kind==="array"){const n=he(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const we=[dr,gt,Kt,Bt,On,fe,Kr,se(un),L,G,J];function xe(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!xe(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const l of we)if(!xe(l,n))return null}}return`Expected ${he(s)} but found ${he(n)} instead.`}function ge(s,n){return n.some(l=>l.kind===s.kind)}function Te(s,n){return n.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function Qe(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const ne=.96422,Ne=.82521,te=4/29,Ae=6/29,Fe=3*Ae*Ae,Ke=Ae*Ae*Ae,dt=Math.PI/180,pt=180/Math.PI;function Ot(s){return(s%=360)<0&&(s+=360),s}function _t([s,n,l,f]){let v,C;const E=wn((.2225045*(s=Ut(s))+.7168786*(n=Ut(n))+.0606169*(l=Ut(l)))/1);s===n&&n===l?v=C=E:(v=wn((.4360747*s+.3850649*n+.1430804*l)/ne),C=wn((.0139322*s+.0971045*n+.7141733*l)/Ne));const T=116*E-16;return[T<0?0:T,500*(v-E),200*(E-C),f]}function Ut(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function wn(s){return s>Ke?Math.pow(s,1/3):s/Fe+te}function gn([s,n,l,f]){let v=(s+16)/116,C=isNaN(n)?v:v+n/500,E=isNaN(l)?v:v-l/200;return v=1*Hn(v),C=ne*Hn(C),E=Ne*Hn(E),[Un(3.1338561*C-1.6168667*v-.4906146*E),Un(-.9787684*C+1.9161415*v+.033454*E),Un(.0719453*C-.2289914*v+1.4052427*E),f]}function Un(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Hn(s){return s>Ae?s*s*s:Fe*(s-te)}function Yr(s){return parseInt(s.padEnd(2,s),16)/255}function Hr(s,n){return Tn(n?s/100:s,0,1)}function Tn(s,n,l){return Math.min(Math.max(n,s),l)}function Us(s){return!s.some(Number.isNaN)}const pc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class xr{constructor(n,l,f,v=1,C=!0){this.r=n,this.g=l,this.b=f,this.a=v,C||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,l,f,v]))}static parse(n){if(n instanceof xr)return n;if(typeof n!="string")return;const l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=pc[f];if(v){const[E,T,M]=v;return[E/255,T/255,M/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const E=f.length<6?1:2;let T=1;return[Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+E)||"ff")]}if(f.startsWith("rgb")){const E=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[T,M,V,F,H,Y,Q,ee,ue,ve,be,Me]=E,Ee=[F||" ",Q||" ",ve].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){const Ve=[V,Y,ue].join(""),qe=Ve==="%%%"?100:Ve===""?255:0;if(qe){const st=[Tn(+M/qe,0,1),Tn(+H/qe,0,1),Tn(+ee/qe,0,1),be?Hr(+be,Me):1];if(Us(st))return st}}return}}const C=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[E,T,M,V,F,H,Y,Q,ee]=C,ue=[M||" ",F||" ",Y].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const ve=[+T,Tn(+V,0,100),Tn(+H,0,100),Q?Hr(+Q,ee):1];if(Us(ve))return function([be,Me,Ee,Ve]){function qe(st){const It=(st+be/30)%12,Xt=Me*Math.min(Ee,1-Ee);return Ee-Xt*Math.max(-1,Math.min(It-3,9-It,1))}return be=Ot(be),Me/=100,Ee/=100,[qe(0),qe(8),qe(4),Ve]}(ve)}}}(n);return l?new xr(...l,!1):void 0}get rgb(){const{r:n,g:l,b:f,a:v}=this,C=v||1/0;return this.overwriteGetter("rgb",[n/C,l/C,f/C,v])}get hcl(){return this.overwriteGetter("hcl",function(n){const[l,f,v,C]=_t(n),E=Math.sqrt(f*f+v*v);return[Math.round(1e4*E)?Ot(Math.atan2(v,f)*pt):NaN,E,l,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",_t(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){const[n,l,f,v]=this.rgb;return`rgba(${[n,l,f].map(C=>Math.round(255*C)).join(",")},${v})`}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class Qa{constructor(n,l,f){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fo{constructor(n,l,f,v,C){this.text=n,this.image=l,this.scale=f,this.fontStack=v,this.textColor=C}}class Li{constructor(n){this.sections=n}static fromString(n){return new Li([new Fo(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Li?n:Li.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ss{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ss)return n;if(typeof n=="number")return new ss([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ss(n)}}toString(){return JSON.stringify(this.values)}}const su=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ms{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ms)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){const f=n[l],v=n[l+1];if(typeof f!="string"||!su.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new ms(n)}}toString(){return JSON.stringify(this.values)}}class Ii{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ii({name:n,available:!1}):null}}function xl(s,n,l,f){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,n,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,n,l,f]:[s,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ia(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof xr||s instanceof Qa||s instanceof Li||s instanceof ss||s instanceof ms||s instanceof Ii)return!0;if(Array.isArray(s)){for(const n of s)if(!Ia(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Ia(s[n]))return!1;return!0}return!1}function Br(s){if(s===null)return dr;if(typeof s=="string")return Kt;if(typeof s=="boolean")return Bt;if(typeof s=="number")return gt;if(s instanceof xr)return On;if(s instanceof Qa)return ai;if(s instanceof Li)return fe;if(s instanceof ss)return L;if(s instanceof ms)return J;if(s instanceof Ii)return G;if(Array.isArray(s)){const n=s.length;let l;for(const f of s){const v=Br(f);if(l){if(l===v)continue;l=un;break}l=v}return se(l||un,n)}return Kr}function Gn(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof xr||s instanceof Li||s instanceof ss||s instanceof ms||s instanceof Ii?s.toString():JSON.stringify(s)}class Qs{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ia(n[1]))return l.error("invalid value");const f=n[1];let v=Br(f);const C=l.expectedType;return v.kind!=="array"||v.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(v=C),new Qs(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class jr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const vo={string:Kt,number:gt,boolean:Bt,object:Kr};class Ji{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let f,v=1;const C=n[0];if(C==="array"){let T,M;if(n.length>2){const V=n[1];if(typeof V!="string"||!(V in vo)||V==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);T=vo[V],v++}else T=un;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);M=n[2],v++}f=se(T,M)}else{if(!vo[C])throw new Error(`Types doesn't contain name = ${C}`);f=vo[C]}const E=[];for(;v<n.length;v++){const T=l.parse(n[v],v,un);if(!T)return null;E.push(T)}return new Ji(f,E)}evaluate(n){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(n);if(!xe(this.type,Br(f)))return f;if(l===this.args.length-1)throw new jr(`Expected value to be of type ${he(this.type)}, but found ${he(Br(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Uo={"to-boolean":Bt,"to-color":On,"to-number":gt,"to-string":Kt};class pa{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const f=n[0];if(!Uo[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return l.error("Expected one argument.");const v=Uo[f],C=[];for(let E=1;E<n.length;E++){const T=l.parse(n[E],E,un);if(!T)return null;C.push(T)}return new pa(v,C)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,f;for(const v of this.args){if(l=v.evaluate(n),f=null,l instanceof xr)return l;if(typeof l=="string"){const C=n.parseColor(l);if(C)return C}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:xl(l[0],l[1],l[2],l[3]),!f))return new xr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new jr(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(n);const v=ss.parse(l);if(v)return v}throw new jr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(n);const v=ms.parse(l);if(v)return v}throw new jr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(n),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new jr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Li.fromString(Gn(this.args[0].evaluate(n)));case"resolvedImage":return Ii.fromString(Gn(this.args[0].evaluate(n)));default:return Gn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const au=["Unknown","Point","LineString","Polygon"];class _l{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=xr.parse(n)),l}}class gc{constructor(n,l,f=[],v,C=new br,E=[]){this.registry=n,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=C,this.errors=E,this.expectedType=v,this._isConstant=l}parse(n,l,f,v,C={}){return l?this.concat(l,f,v)._parse(n,C):this._parse(n,C)}_parse(n,l){function f(v,C,E){return E==="assert"?new Ji(C,[v]):E==="coerce"?new pa(C,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[v];if(C){let E=C.parse(n,this);if(!E)return null;if(this.expectedType){const T=this.expectedType,M=E.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(T.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||M.kind!=="value"&&M.kind!=="array"){if(this.checkSubtype(T,M))return null}else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"assert")}if(!(E instanceof Qs)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const T=new _l;try{E=new Qs(E.type,E.evaluate(T))}catch(M){return this.error(M.message),null}}return E}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,f){const v=typeof n=="number"?this.path.concat(n):this.path,C=f?this.scope.concat(f):this.scope;return new gc(this.registry,this._isConstant,v,l||null,C,this.errors)}error(n,...l){const f=`${this.key}${l.map(v=>`[${v}]`).join("")}`;this.errors.push(new Cn(f,n))}checkSubtype(n,l){const f=xe(n,l);return f&&this.error(f),f}}class eo{constructor(n,l,f){this.type=ai,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const v=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Bt);if(!v)return null;const C=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Bt);if(!C)return null;let E=null;return f.locale&&(E=l.parse(f.locale,1,Kt),!E)?null:new eo(v,C,E)}evaluate(n){return new Qa(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Va=8192;function wl(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function or(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function od(s,n){const l=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(l*v*Va),Math.round(f*v*Va)]}function yo(s,n,l){const f=s[0]-n[0],v=s[1]-n[1],C=s[0]-l[0],E=s[1]-l[1];return f*E-C*v==0&&f*C<=0&&v*E<=0}function jn(s,n){let l=!1;for(let E=0,T=n.length;E<T;E++){const M=n[E];for(let V=0,F=M.length;V<F-1;V++){if(yo(s,M[V],M[V+1]))return!1;(v=M[V])[1]>(f=s)[1]!=(C=M[V+1])[1]>f[1]&&f[0]<(C[0]-v[0])*(f[1]-v[1])/(C[1]-v[1])+v[0]&&(l=!l)}}var f,v,C;return l}function Cl(s,n){for(let l=0;l<n.length;l++)if(jn(s,n[l]))return!0;return!1}function ps(s,n,l,f){const v=f[0]-l[0],C=f[1]-l[1],E=(s[0]-l[0])*C-v*(s[1]-l[1]),T=(n[0]-l[0])*C-v*(n[1]-l[1]);return E>0&&T<0||E<0&&T>0}function Nl(s,n,l){for(const V of l)for(let F=0;F<V.length-1;++F)if((T=[(E=V[F+1])[0]-(C=V[F])[0],E[1]-C[1]])[0]*(M=[(v=n)[0]-(f=s)[0],v[1]-f[1]])[1]-T[1]*M[0]!=0&&ps(f,v,C,E)&&ps(C,E,f,v))return!0;var f,v,C,E,T,M;return!1}function bo(s,n){for(let l=0;l<s.length;++l)if(!jn(s[l],n))return!1;for(let l=0;l<s.length-1;++l)if(Nl(s[l],s[l+1],n))return!1;return!0}function ld(s,n){for(let l=0;l<n.length;l++)if(bo(s,n[l]))return!0;return!1}function Pi(s,n,l){const f=[];for(let v=0;v<s.length;v++){const C=[];for(let E=0;E<s[v].length;E++){const T=od(s[v][E],l);wl(n,T),C.push(T)}f.push(C)}return f}function oi(s,n,l){const f=[];for(let v=0;v<s.length;v++){const C=Pi(s[v],n,l);f.push(C)}return f}function ou(s,n,l,f){if(s[0]<l[0]||s[0]>l[2]){const v=.5*f;let C=s[0]-l[0]>v?-f:l[0]-s[0]>v?f:0;C===0&&(C=s[0]-l[2]>v?-f:l[2]-s[0]>v?f:0),s[0]+=C}wl(n,s)}function $s(s,n,l,f){const v=Math.pow(2,f.z)*Va,C=[f.x*Va,f.y*Va],E=[];for(const T of s)for(const M of T){const V=[M.x+C[0],M.y+C[1]];ou(V,n,l,v),E.push(V)}return E}function as(s,n,l,f){const v=Math.pow(2,f.z)*Va,C=[f.x*Va,f.y*Va],E=[];for(const M of s){const V=[];for(const F of M){const H=[F.x+C[0],F.y+C[1]];wl(n,H),V.push(H)}E.push(V)}if(n[2]-n[0]<=v/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of E)for(const V of M)ou(V,n,l,v)}var T;return E}class os{constructor(n,l){this.type=Bt,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ia(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let v=0;v<f.features.length;++v){const C=f.features[v].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new os(f,f.features[v].geometry)}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new os(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new os(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,f){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if(f.type==="Polygon"){const T=Pi(f.coordinates,C,E),M=$s(l.geometry(),v,C,E);if(!or(v,C))return!1;for(const V of M)if(!jn(V,T))return!1}if(f.type==="MultiPolygon"){const T=oi(f.coordinates,C,E),M=$s(l.geometry(),v,C,E);if(!or(v,C))return!1;for(const V of M)if(!Cl(V,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,f){const v=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if(f.type==="Polygon"){const T=Pi(f.coordinates,C,E),M=as(l.geometry(),v,C,E);if(!or(v,C))return!1;for(const V of M)if(!bo(V,T))return!1}if(f.type==="MultiPolygon"){const T=oi(f.coordinates,C,E),M=as(l.geometry(),v,C,E);if(!or(v,C))return!1;for(const V of M)if(!ld(V,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class vc{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=n[1];return l.scope.has(f)?new vc(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class gs{constructor(n,l,f,v){this.name=n,this.type=l,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){const f=n[0],v=gs.definitions[f];if(!v)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(v)?v[0]:v.type,E=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,T=E.filter(([V])=>!Array.isArray(V)||V.length===n.length-1);let M=null;for(const[V,F]of T){M=new gc(l.registry,Sl,l.path,null,l.scope);const H=[];let Y=!1;for(let Q=1;Q<n.length;Q++){const ee=n[Q],ue=Array.isArray(V)?V[Q-1]:V.type,ve=M.parse(ee,1+H.length,ue);if(!ve){Y=!0;break}H.push(ve)}if(!Y)if(Array.isArray(V)&&V.length!==H.length)M.error(`Expected ${V.length} arguments, but found ${H.length} instead.`);else{for(let Q=0;Q<H.length;Q++){const ee=Array.isArray(V)?V[Q]:V.type,ue=H[Q];M.concat(Q+1).checkSubtype(ee,ue.type)}if(M.errors.length===0)return new gs(f,C,F,H)}}if(T.length===1)l.errors.push(...M.errors);else{const V=(T.length?T:E).map(([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(he).join(", ")})`:`(${he(Y.type)}...)`;var Y}).join(" | "),F=[];for(let H=1;H<n.length;H++){const Y=l.parse(n[H],1+F.length);if(!Y)return null;F.push(he(Y.type))}l.error(`Expected arguments of type ${V}, but found (${F.join(", ")}) instead.`)}return null}static register(n,l){gs.definitions=l;for(const f in l)n[f]=gs}}function Sl(s){if(s instanceof vc)return Sl(s.boundExpression);if(s instanceof gs&&s.name==="error"||s instanceof eo||s instanceof os)return!1;const n=s instanceof pa||s instanceof Ji;let l=!0;return s.eachChild(f=>{l=n?l&&Sl(f):l&&f instanceof Qs}),!!l&&$o(s)&&yc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function $o(s){if(s instanceof gs&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof os)return!1;let n=!0;return s.eachChild(l=>{n&&!$o(l)&&(n=!1)}),n}function to(s){if(s instanceof gs&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(l=>{n&&!to(l)&&(n=!1)}),n}function yc(s,n){if(s instanceof gs&&n.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(f=>{l&&!yc(f,n)&&(l=!1)}),l}function ea(s,n){const l=s.length-1;let f,v,C=0,E=l,T=0;for(;C<=E;)if(T=Math.floor((C+E)/2),f=s[T],v=s[T+1],f<=n){if(T===l||n<v)return T;C=T+1}else{if(!(f>n))throw new jr("Input is not a number.");E=T-1}return 0}class qs{constructor(n,l,f){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[v,C]of f)this.labels.push(v),this.outputs.push(C)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(n[1],1,gt);if(!f)return null;const v=[];let C=null;l.expectedType&&l.expectedType.kind!=="value"&&(C=l.expectedType);for(let E=1;E<n.length;E+=2){const T=E===1?-1/0:n[E],M=n[E+1],V=E,F=E+1;if(typeof T!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=T)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const H=l.parse(M,F,C);if(!H)return null;C=C||H.type,v.push([T,H])}return new qs(C,f,v)}evaluate(n){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=l[0])return f[0].evaluate(n);const C=l.length;return v>=l[C-1]?f[C-1].evaluate(n):f[ea(l,v)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Wn(s,n,l){return s+l*(n-s)}function ga(s,n,l){return s.map((f,v)=>Wn(f,n[v],l))}const Qi={number:Wn,color:function(s,n,l,f="rgb"){switch(f){case"rgb":{const[v,C,E,T]=ga(s.rgb,n.rgb,l);return new xr(v,C,E,T,!1)}case"hcl":{const[v,C,E,T]=s.hcl,[M,V,F,H]=n.hcl;let Y,Q;if(isNaN(v)||isNaN(M))isNaN(v)?isNaN(M)?Y=NaN:(Y=M,E!==1&&E!==0||(Q=V)):(Y=v,F!==1&&F!==0||(Q=C));else{let Me=M-v;M>v&&Me>180?Me-=360:M<v&&v-M>180&&(Me+=360),Y=v+l*Me}const[ee,ue,ve,be]=function([Me,Ee,Ve,qe]){return Me=isNaN(Me)?0:Me*dt,gn([Ve,Math.cos(Me)*Ee,Math.sin(Me)*Ee,qe])}([Y,Q??Wn(C,V,l),Wn(E,F,l),Wn(T,H,l)]);return new xr(ee,ue,ve,be,!1)}case"lab":{const[v,C,E,T]=gn(ga(s.lab,n.lab,l));return new xr(v,C,E,T,!1)}}},array:ga,padding:function(s,n,l){return new ss(ga(s.values,n.values,l))},variableAnchorOffsetCollection:function(s,n,l){const f=s.values,v=n.values;if(f.length!==v.length)throw new jr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const C=[];for(let E=0;E<f.length;E+=2){if(f[E]!==v[E])throw new jr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${f[E]}, to[${E}]: ${v[E]}`);C.push(f[E]);const[T,M]=f[E+1],[V,F]=v[E+1];C.push([Wn(T,V,l),Wn(M,F,l)])}return new ms(C)}};class es{constructor(n,l,f,v,C){this.type=n,this.operator=l,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[E,T]of C)this.labels.push(E),this.outputs.push(T)}static interpolationFactor(n,l,f,v){let C=0;if(n.name==="exponential")C=qo(l,n.base,f,v);else if(n.name==="linear")C=qo(l,1,f,v);else if(n.name==="cubic-bezier"){const E=n.controlPoints;C=new Oe(E[0],E[1],E[2],E[3]).solve(qo(l,1,f,v))}return C}static parse(n,l){let[f,v,C,...E]=n;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some(F=>typeof F!="number"||F<0||F>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(C=l.parse(C,2,gt),!C)return null;const T=[];let M=null;f==="interpolate-hcl"||f==="interpolate-lab"?M=On:l.expectedType&&l.expectedType.kind!=="value"&&(M=l.expectedType);for(let V=0;V<E.length;V+=2){const F=E[V],H=E[V+1],Y=V+3,Q=V+4;if(typeof F!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=F)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ee=l.parse(H,Q,M);if(!ee)return null;M=M||ee.type,T.push([F,ee])}return Qe(M,gt)||Qe(M,On)||Qe(M,L)||Qe(M,J)||Qe(M,se(gt))?new es(M,f,v,C,T):l.error(`Type ${he(M)} is not interpolatable.`)}evaluate(n){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=l[0])return f[0].evaluate(n);const C=l.length;if(v>=l[C-1])return f[C-1].evaluate(n);const E=ea(l,v),T=es.interpolationFactor(this.interpolation,v,l[E],l[E+1]),M=f[E].evaluate(n),V=f[E+1].evaluate(n);switch(this.operator){case"interpolate":return Qi[this.type.kind](M,V,T);case"interpolate-hcl":return Qi.color(M,V,T,"hcl");case"interpolate-lab":return Qi.color(M,V,T,"lab")}}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function qo(s,n,l,f){const v=f-l,C=s-l;return v===0?0:n===1?C/v:(Math.pow(n,C)-1)/(Math.pow(n,v)-1)}class El{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let f=null;const v=l.expectedType;v&&v.kind!=="value"&&(f=v);const C=[];for(const T of n.slice(1)){const M=l.parse(T,1+C.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,C.push(M)}if(!f)throw new Error("No output type");const E=v&&C.some(T=>xe(v,T.type));return new El(E?un:f,C)}evaluate(n){let l,f=null,v=0;for(const C of this.args)if(v++,f=C.evaluate(n),f&&f instanceof Ii&&!f.available&&(l||(l=f.name),f=null,v===this.args.length&&(f=l)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Dl{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let C=1;C<n.length-1;C+=2){const E=n[C];if(typeof E!="string")return l.error(`Expected string, but found ${typeof E} instead.`,C);if(/[^a-zA-Z0-9_]/.test(E))return l.error("Variable names must contain only alphanumeric characters or '_'.",C);const T=l.parse(n[C+1],C+1);if(!T)return null;f.push([E,T])}const v=l.parse(n[n.length-1],n.length-1,l.expectedType,f);return v?new Dl(f,v):null}outputDefined(){return this.result.outputDefined()}}class Tl{constructor(n,l,f){this.type=n,this.index=l,this.input=f}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,gt),v=l.parse(n[2],2,se(l.expectedType||un));return f&&v?new Tl(v.type.itemType,f,v):null}evaluate(n){const l=this.index.evaluate(n),f=this.input.evaluate(n);if(l<0)throw new jr(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new jr(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new jr(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class bc{constructor(n,l){this.type=Bt,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,un),v=l.parse(n[2],2,un);return f&&v?ge(f.type,[Bt,Kt,gt,dr,un])?new bc(f,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(f.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Te(l,["boolean","string","number","null"]))throw new jr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Br(l))} instead.`);if(!Te(f,["string","array"]))throw new jr(`Expected second argument to be of type array or string, but found ${he(Br(f))} instead.`);return f.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class K{constructor(n,l,f){this.type=gt,this.needle=n,this.haystack=l,this.fromIndex=f}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,un),v=l.parse(n[2],2,un);if(!f||!v)return null;if(!ge(f.type,[Bt,Kt,gt,dr,un]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(f.type)} instead`);if(n.length===4){const C=l.parse(n[3],3,gt);return C?new K(f,v,C):null}return new K(f,v)}evaluate(n){const l=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Te(l,["boolean","string","number","null"]))throw new jr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Br(l))} instead.`);if(!Te(f,["string","array"]))throw new jr(`Expected second argument to be of type array or string, but found ${he(Br(f))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(n);return f.indexOf(l,v)}return f.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class _e{constructor(n,l,f,v,C,E){this.inputType=n,this.type=l,this.input=f,this.cases=v,this.outputs=C,this.otherwise=E}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let f,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const C={},E=[];for(let V=2;V<n.length-1;V+=2){let F=n[V];const H=n[V+1];Array.isArray(F)||(F=[F]);const Y=l.concat(V);if(F.length===0)return Y.error("Expected at least one branch label.");for(const ee of F){if(typeof ee!="number"&&typeof ee!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Y.error("Numeric branch labels must be integer values.");if(f){if(Y.checkSubtype(f,Br(ee)))return null}else f=Br(ee);if(C[String(ee)]!==void 0)return Y.error("Branch labels must be unique.");C[String(ee)]=E.length}const Q=l.parse(H,V,v);if(!Q)return null;v=v||Q.type,E.push(Q)}const T=l.parse(n[1],1,un);if(!T)return null;const M=l.parse(n[n.length-1],n.length-1,v);return M?T.type.kind!=="value"&&l.concat(1).checkSubtype(f,T.type)?null:new _e(f,v,T,C,E,M):null}evaluate(n){const l=this.input.evaluate(n);return(Br(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Xe{constructor(n,l,f){this.type=n,this.branches=l,this.otherwise=f}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const v=[];for(let E=1;E<n.length-1;E+=2){const T=l.parse(n[E],E,Bt);if(!T)return null;const M=l.parse(n[E+1],E+1,f);if(!M)return null;v.push([T,M]),f=f||M.type}const C=l.parse(n[n.length-1],n.length-1,f);if(!C)return null;if(!f)throw new Error("Can't infer output type");return new Xe(f,v,C)}evaluate(n){for(const[l,f]of this.branches)if(l.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,f]of this.branches)n(l),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class rt{constructor(n,l,f,v){this.type=n,this.input=l,this.beginIndex=f,this.endIndex=v}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,un),v=l.parse(n[2],2,gt);if(!f||!v)return null;if(!ge(f.type,[se(un),Kt,un]))return l.error(`Expected first argument to be of type array or string, but found ${he(f.type)} instead`);if(n.length===4){const C=l.parse(n[3],3,gt);return C?new rt(f.type,f,v,C):null}return new rt(f.type,f,v)}evaluate(n){const l=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!Te(l,["string","array"]))throw new jr(`Expected first argument to be of type array or string, but found ${he(Br(l))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(n);return l.slice(f,v)}return l.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function jt(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function xn(s,n,l,f){return f.compare(n,l)===0}function Yt(s,n,l){const f=s!=="=="&&s!=="!=";return class lA{constructor(C,E,T){this.type=Bt,this.lhs=C,this.rhs=E,this.collator=T,this.hasUntypedArgument=C.type.kind==="value"||E.type.kind==="value"}static parse(C,E){if(C.length!==3&&C.length!==4)return E.error("Expected two or three arguments.");const T=C[0];let M=E.parse(C[1],1,un);if(!M)return null;if(!jt(T,M.type))return E.concat(1).error(`"${T}" comparisons are not supported for type '${he(M.type)}'.`);let V=E.parse(C[2],2,un);if(!V)return null;if(!jt(T,V.type))return E.concat(2).error(`"${T}" comparisons are not supported for type '${he(V.type)}'.`);if(M.type.kind!==V.type.kind&&M.type.kind!=="value"&&V.type.kind!=="value")return E.error(`Cannot compare types '${he(M.type)}' and '${he(V.type)}'.`);f&&(M.type.kind==="value"&&V.type.kind!=="value"?M=new Ji(V.type,[M]):M.type.kind!=="value"&&V.type.kind==="value"&&(V=new Ji(M.type,[V])));let F=null;if(C.length===4){if(M.type.kind!=="string"&&V.type.kind!=="string"&&M.type.kind!=="value"&&V.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(F=E.parse(C[3],3,ai),!F)return null}return new lA(M,V,F)}evaluate(C){const E=this.lhs.evaluate(C),T=this.rhs.evaluate(C);if(f&&this.hasUntypedArgument){const M=Br(E),V=Br(T);if(M.kind!==V.kind||M.kind!=="string"&&M.kind!=="number")throw new jr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${M.kind}, ${V.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=Br(E),V=Br(T);if(M.kind!=="string"||V.kind!=="string")return n(C,E,T)}return this.collator?l(C,E,T,this.collator.evaluate(C)):n(C,E,T)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const Mn=Yt("==",function(s,n,l){return n===l},xn),lr=Yt("!=",function(s,n,l){return n!==l},function(s,n,l,f){return!xn(0,n,l,f)}),Ar=Yt("<",function(s,n,l){return n<l},function(s,n,l,f){return f.compare(n,l)<0}),Xr=Yt(">",function(s,n,l){return n>l},function(s,n,l,f){return f.compare(n,l)>0}),Jr=Yt("<=",function(s,n,l){return n<=l},function(s,n,l,f){return f.compare(n,l)<=0}),nr=Yt(">=",function(s,n,l){return n>=l},function(s,n,l,f){return f.compare(n,l)>=0});class Qr{constructor(n,l,f,v,C){this.type=Kt,this.number=n,this.locale=l,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=C}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const f=l.parse(n[1],1,gt);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let C=null;if(v.locale&&(C=l.parse(v.locale,1,Kt),!C))return null;let E=null;if(v.currency&&(E=l.parse(v.currency,1,Kt),!E))return null;let T=null;if(v["min-fraction-digits"]&&(T=l.parse(v["min-fraction-digits"],1,gt),!T))return null;let M=null;return v["max-fraction-digits"]&&(M=l.parse(v["max-fraction-digits"],1,gt),!M)?null:new Qr(f,C,E,T,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class vi{constructor(n){this.type=fe,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const v=[];let C=!1;for(let E=1;E<=n.length-1;++E){const T=n[E];if(C&&typeof T=="object"&&!Array.isArray(T)){C=!1;let M=null;if(T["font-scale"]&&(M=l.parse(T["font-scale"],1,gt),!M))return null;let V=null;if(T["text-font"]&&(V=l.parse(T["text-font"],1,se(Kt)),!V))return null;let F=null;if(T["text-color"]&&(F=l.parse(T["text-color"],1,On),!F))return null;const H=v[v.length-1];H.scale=M,H.font=V,H.textColor=F}else{const M=l.parse(n[E],1,un);if(!M)return null;const V=M.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,v.push({content:M,scale:null,font:null,textColor:null})}}return new vi(v)}evaluate(n){return new Li(this.sections.map(l=>{const f=l.content.evaluate(n);return Br(f)===G?new Fo("",f,null,null,null):new Fo(Gn(f),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class xo{constructor(n){this.type=G,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const f=l.parse(n[1],1,Kt);return f?new xo(f):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),f=Ii.fromString(l);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(l)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class Pl{constructor(n){this.type=gt,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=l.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${he(f.type)} instead.`):new Pl(f):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new jr(`Expected value to be of type string or array, but found ${he(Br(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Hs={"==":Mn,"!=":lr,">":Xr,"<":Ar,">=":nr,"<=":Jr,array:Ji,at:Tl,boolean:Ji,case:Xe,coalesce:El,collator:eo,format:vi,image:xo,in:bc,"index-of":K,interpolate:es,"interpolate-hcl":es,"interpolate-lab":es,length:Pl,let:Dl,literal:Qs,match:_e,number:Ji,"number-format":Qr,object:Ji,slice:rt,step:qs,string:Ji,"to-boolean":pa,"to-color":pa,"to-number":pa,"to-string":pa,var:vc,within:os};function xc(s,[n,l,f,v]){n=n.evaluate(s),l=l.evaluate(s),f=f.evaluate(s);const C=v?v.evaluate(s):1,E=xl(n,l,f,C);if(E)throw new jr(E);return new xr(n/255,l/255,f/255,C,!1)}function _c(s,n){return s in n}function lu(s,n){const l=n[s];return l===void 0?null:l}function no(s){return{type:s}}function cd(s){return{result:"success",value:s}}function _o(s){return{result:"error",value:s}}function Ho(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function _h(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ud(s){return!!s.expression&&s.expression.interpolated}function pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function fi(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function wo(s){return s}function ir(s,n){const l=n.type==="color",f=s.stops&&typeof s.stops[0][0]=="object",v=f||!(f||s.property!==void 0),C=s.type||(ud(n)?"exponential":"interval");if(l||n.type==="padding"){const F=l?xr.parse:ss.parse;(s=zn({},s)).stops&&(s.stops=s.stops.map(H=>[H[0],F(H[1])])),s.default=F(s.default?s.default:n.default)}if(s.colorSpace&&(E=s.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var E;let T,M,V;if(C==="exponential")T=cu;else if(C==="interval")T=Gr;else if(C==="categorical"){T=ei,M=Object.create(null);for(const F of s.stops)M[F[0]]=F[1];V=typeof s.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);T=uu}if(f){const F={},H=[];for(let ee=0;ee<s.stops.length;ee++){const ue=s.stops[ee],ve=ue[0].zoom;F[ve]===void 0&&(F[ve]={zoom:ve,type:s.type,property:s.property,default:s.default,stops:[]},H.push(ve)),F[ve].stops.push([ue[0].value,ue[1]])}const Y=[];for(const ee of H)Y.push([F[ee].zoom,ir(F[ee],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:es.interpolationFactor.bind(void 0,Q),zoomStops:Y.map(ee=>ee[0]),evaluate:({zoom:ee},ue)=>cu({stops:Y,base:s.base},n,ee).evaluate(ee,ue)}}if(v){const F=C==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:es.interpolationFactor.bind(void 0,F),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(s,n,H,M,V)}}return{kind:"source",evaluate(F,H){const Y=H&&H.properties?H.properties[s.property]:void 0;return Y===void 0?Co(s.default,n.default):T(s,n,Y,M,V)}}}function Co(s,n,l){return s!==void 0?s:n!==void 0?n:l!==void 0?l:void 0}function ei(s,n,l,f,v){return Co(typeof l===v?f[l]:void 0,s.default,n.default)}function Gr(s,n,l){if(pr(l)!=="number")return Co(s.default,n.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const v=ea(s.stops.map(C=>C[0]),l);return s.stops[v][1]}function cu(s,n,l){const f=s.base!==void 0?s.base:1;if(pr(l)!=="number")return Co(s.default,n.default);const v=s.stops.length;if(v===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[v-1][0])return s.stops[v-1][1];const C=ea(s.stops.map(F=>F[0]),l),E=function(F,H,Y,Q){const ee=Q-Y,ue=F-Y;return ee===0?0:H===1?ue/ee:(Math.pow(H,ue)-1)/(Math.pow(H,ee)-1)}(l,f,s.stops[C][0],s.stops[C+1][0]),T=s.stops[C][1],M=s.stops[C+1][1],V=Qi[n.type]||wo;return typeof T.evaluate=="function"?{evaluate(...F){const H=T.evaluate.apply(void 0,F),Y=M.evaluate.apply(void 0,F);if(H!==void 0&&Y!==void 0)return V(H,Y,E,s.colorSpace)}}:V(T,M,E,s.colorSpace)}function uu(s,n,l){switch(n.type){case"color":l=xr.parse(l);break;case"formatted":l=Li.fromString(l.toString());break;case"resolvedImage":l=Ii.fromString(l.toString());break;case"padding":l=ss.parse(l);break;default:pr(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return Co(l,s.default,n.default)}gs.register(Hs,{error:[{kind:"error"},[Kt],(s,[n])=>{throw new jr(n.evaluate(s))}],typeof:[Kt,[un],(s,[n])=>he(Br(n.evaluate(s)))],"to-rgba":[se(gt,4),[On],(s,[n])=>{const[l,f,v,C]=n.evaluate(s).rgb;return[255*l,255*f,255*v,C]}],rgb:[On,[gt,gt,gt],xc],rgba:[On,[gt,gt,gt,gt],xc],has:{type:Bt,overloads:[[[Kt],(s,[n])=>_c(n.evaluate(s),s.properties())],[[Kt,Kr],(s,[n,l])=>_c(n.evaluate(s),l.evaluate(s))]]},get:{type:un,overloads:[[[Kt],(s,[n])=>lu(n.evaluate(s),s.properties())],[[Kt,Kr],(s,[n,l])=>lu(n.evaluate(s),l.evaluate(s))]]},"feature-state":[un,[Kt],(s,[n])=>lu(n.evaluate(s),s.featureState||{})],properties:[Kr,[],s=>s.properties()],"geometry-type":[Kt,[],s=>s.geometryType()],id:[un,[],s=>s.id()],zoom:[gt,[],s=>s.globals.zoom],"heatmap-density":[gt,[],s=>s.globals.heatmapDensity||0],"line-progress":[gt,[],s=>s.globals.lineProgress||0],accumulated:[un,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[gt,no(gt),(s,n)=>{let l=0;for(const f of n)l+=f.evaluate(s);return l}],"*":[gt,no(gt),(s,n)=>{let l=1;for(const f of n)l*=f.evaluate(s);return l}],"-":{type:gt,overloads:[[[gt,gt],(s,[n,l])=>n.evaluate(s)-l.evaluate(s)],[[gt],(s,[n])=>-n.evaluate(s)]]},"/":[gt,[gt,gt],(s,[n,l])=>n.evaluate(s)/l.evaluate(s)],"%":[gt,[gt,gt],(s,[n,l])=>n.evaluate(s)%l.evaluate(s)],ln2:[gt,[],()=>Math.LN2],pi:[gt,[],()=>Math.PI],e:[gt,[],()=>Math.E],"^":[gt,[gt,gt],(s,[n,l])=>Math.pow(n.evaluate(s),l.evaluate(s))],sqrt:[gt,[gt],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))],log2:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[gt,[gt],(s,[n])=>Math.sin(n.evaluate(s))],cos:[gt,[gt],(s,[n])=>Math.cos(n.evaluate(s))],tan:[gt,[gt],(s,[n])=>Math.tan(n.evaluate(s))],asin:[gt,[gt],(s,[n])=>Math.asin(n.evaluate(s))],acos:[gt,[gt],(s,[n])=>Math.acos(n.evaluate(s))],atan:[gt,[gt],(s,[n])=>Math.atan(n.evaluate(s))],min:[gt,no(gt),(s,n)=>Math.min(...n.map(l=>l.evaluate(s)))],max:[gt,no(gt),(s,n)=>Math.max(...n.map(l=>l.evaluate(s)))],abs:[gt,[gt],(s,[n])=>Math.abs(n.evaluate(s))],round:[gt,[gt],(s,[n])=>{const l=n.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[gt,[gt],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[gt,[gt],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[Bt,[Kt,un],(s,[n,l])=>s.properties()[n.value]===l.value],"filter-id-==":[Bt,[un],(s,[n])=>s.id()===n.value],"filter-type-==":[Bt,[Kt],(s,[n])=>s.geometryType()===n.value],"filter-<":[Bt,[Kt,un],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f<v}],"filter-id-<":[Bt,[un],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l<f}],"filter->":[Bt,[Kt,un],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f>v}],"filter-id->":[Bt,[un],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l>f}],"filter-<=":[Bt,[Kt,un],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[Bt,[un],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l<=f}],"filter->=":[Bt,[Kt,un],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[Bt,[un],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l>=f}],"filter-has":[Bt,[un],(s,[n])=>n.value in s.properties()],"filter-has-id":[Bt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Bt,[se(Kt)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[Bt,[se(un)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[Bt,[Kt,se(un)],(s,[n,l])=>l.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[Bt,[Kt,se(un)],(s,[n,l])=>function(f,v,C,E){for(;C<=E;){const T=C+E>>1;if(v[T]===f)return!0;v[T]>f?E=T-1:C=T+1}return!1}(s.properties()[n.value],l.value,0,l.value.length-1)],all:{type:Bt,overloads:[[[Bt,Bt],(s,[n,l])=>n.evaluate(s)&&l.evaluate(s)],[no(Bt),(s,n)=>{for(const l of n)if(!l.evaluate(s))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],(s,[n,l])=>n.evaluate(s)||l.evaluate(s)],[no(Bt),(s,n)=>{for(const l of n)if(l.evaluate(s))return!0;return!1}]]},"!":[Bt,[Bt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[Bt,[Kt],(s,[n])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(n.evaluate(s))}],upcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Kt,no(un),(s,n)=>n.map(l=>Gn(l.evaluate(s))).join("")],"resolved-locale":[Kt,[ai],(s,[n])=>n.evaluate(s).resolvedLocale()]});class dd{constructor(n,l){var f;this.expression=n,this._warningHistory={},this._evaluator=new _l,this._defaultValue=l?(f=l).type==="color"&&fi(f.default)?new xr(0,0,0,0):f.type==="color"?xr.parse(f.default)||null:f.type==="padding"?ss.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?ms.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,f,v,C,E){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(n,l,f,v,C,E){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=E||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new jr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function ls(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Hs}function va(s,n){const l=new gc(Hs,Sl,[],n?function(v){const C={color:On,string:Kt,number:gt,enum:Kt,boolean:Bt,formatted:fe,padding:L,resolvedImage:G,variableAnchorOffsetCollection:J};return v.type==="array"?se(C[v.value]||un,v.length):C[v.type]}(n):void 0),f=l.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?cd(new dd(f,n)):_o(l.errors)}class xi{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!to(l.expression)}evaluateWithoutErrorHandling(n,l,f,v,C,E){return this._styleExpression.evaluateWithoutErrorHandling(n,l,f,v,C,E)}evaluate(n,l,f,v,C,E){return this._styleExpression.evaluate(n,l,f,v,C,E)}}class ya{constructor(n,l,f,v){this.kind=n,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!to(l.expression),this.interpolationType=v}evaluateWithoutErrorHandling(n,l,f,v,C,E){return this._styleExpression.evaluateWithoutErrorHandling(n,l,f,v,C,E)}evaluate(n,l,f,v,C,E){return this._styleExpression.evaluate(n,l,f,v,C,E)}interpolationFactor(n,l,f){return this.interpolationType?es.interpolationFactor(this.interpolationType,n,l,f):0}}function du(s,n){const l=va(s,n);if(l.result==="error")return l;const f=l.value.expression,v=$o(f);if(!v&&!Ho(n))return _o([new Cn("","data expressions not supported")]);const C=yc(f,["zoom"]);if(!C&&!_h(n))return _o([new Cn("","zoom expressions not supported")]);const E=hu(f);return E||C?E instanceof Cn?_o([E]):E instanceof es&&!ud(n)?_o([new Cn("",'"interpolate" expressions cannot be used with this property')]):cd(E?new ya(v?"camera":"composite",l.value,E.labels,E instanceof es?E.interpolation:void 0):new xi(v?"constant":"source",l.value)):_o([new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Go{constructor(n,l){this._parameters=n,this._specification=l,zn(this,ir(this._parameters,this._specification))}static deserialize(n){return new Go(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function hu(s){let n=null;if(s instanceof Dl)n=hu(s.result);else if(s instanceof El){for(const l of s.args)if(n=hu(l),n)break}else(s instanceof qs||s instanceof es)&&s.input instanceof gs&&s.input.name==="zoom"&&(n=s);return n instanceof Cn||s.eachChild(l=>{const f=hu(l);f instanceof Cn?n=f:!n&&f?n=new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function No(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!No(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Dp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wh(s){if(s==null)return{filter:()=>!0,needGeometry:!1};No(s)||(s=hd(s));const n=va(s,Dp);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,v)=>n.value.evaluate(l,f,{},v),needGeometry:kf(s)}}function Ch(s,n){return s<n?-1:s>n?1:0}function kf(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(kf(s[n]))return!0;return!1}function hd(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Nh(s[1],s[2],"=="):n==="!="?fu(Nh(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Nh(s[1],s[2],n):n==="any"?(l=s.slice(1),["any"].concat(l.map(hd))):n==="all"?["all"].concat(s.slice(1).map(hd)):n==="none"?["all"].concat(s.slice(1).map(hd).map(fu)):n==="in"?Sh(s[1],s.slice(2)):n==="!in"?fu(Sh(s[1],s.slice(2))):n==="has"?Mf(s[1]):n==="!has"?fu(Mf(s[1])):n!=="within"||s;var l}function Nh(s,n,l){switch(s){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,s,n]}}function Sh(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",s,["literal",n.sort(Ch)]]:["filter-in-small",s,["literal",n]]}}function Mf(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function fu(s){return["!",s]}function fd(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let v="[";for(const C of s)v+=`${fd(C)},`;return`${v}]`}const l=Object.keys(s).sort();let f="{";for(let v=0;v<l.length;v++)f+=`${JSON.stringify(l[v])}:${fd(s[l[v]])},`;return`${f}}`}function mu(s){let n="";for(const l of mr)n+=`/${fd(s[l])}`;return n}function jl(s){const n=s.value;return n?[new nt(s.key,n,"constants have been deprecated as of v8")]:[]}function li(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Wo(s){if(Array.isArray(s))return s.map(Wo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const l in s)n[l]=Wo(s[l]);return n}return li(s)}function Es(s){const n=s.key,l=s.value,f=s.valueSpec||{},v=s.objectElementValidators||{},C=s.style,E=s.styleSpec,T=s.validateSpec;let M=[];const V=pr(l);if(V!=="object")return[new nt(n,l,`object expected, ${V} found`)];for(const F in l){const H=F.split(".")[0],Y=f[H]||f["*"];let Q;if(v[H])Q=v[H];else if(f[H])Q=T;else if(v["*"])Q=v["*"];else{if(!f["*"]){M.push(new nt(n,l[F],`unknown property "${F}"`));continue}Q=T}M=M.concat(Q({key:(n&&`${n}.`)+F,value:l[F],valueSpec:Y,style:C,styleSpec:E,object:l,objectKey:F,validateSpec:T},l))}for(const F in f)v[F]||f[F].required&&f[F].default===void 0&&l[F]===void 0&&M.push(new nt(n,l,`missing required property "${F}"`));return M}function wc(s){const n=s.value,l=s.valueSpec,f=s.style,v=s.styleSpec,C=s.key,E=s.arrayElementValidator||s.validateSpec;if(pr(n)!=="array")return[new nt(C,n,`array expected, ${pr(n)} found`)];if(l.length&&n.length!==l.length)return[new nt(C,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new nt(C,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let T={type:l.value,values:l.values};v.$version<7&&(T.function=l.function),pr(l.value)==="object"&&(T=l.value);let M=[];for(let V=0;V<n.length;V++)M=M.concat(E({array:n,arrayIndex:V,value:n[V],valueSpec:T,validateSpec:s.validateSpec,style:f,styleSpec:v,key:`${C}[${V}]`}));return M}function pu(s){const n=s.key,l=s.value,f=s.valueSpec;let v=pr(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new nt(n,l,`number expected, ${v} found`)]:"minimum"in f&&l<f.minimum?[new nt(n,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new nt(n,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function md(s){const n=s.valueSpec,l=li(s.value.type);let f,v,C,E={};const T=l!=="categorical"&&s.value.property===void 0,M=!T,V=pr(s.value.stops)==="array"&&pr(s.value.stops[0])==="array"&&pr(s.value.stops[0][0])==="object",F=Es({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Q){if(l==="identity")return[new nt(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const ue=Q.value;return ee=ee.concat(wc({key:Q.key,value:ue,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:H})),pr(ue)==="array"&&ue.length===0&&ee.push(new nt(Q.key,ue,"array must have at least one stop")),ee},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return l==="identity"&&T&&F.push(new nt(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||F.push(new nt(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!ud(s.valueSpec)&&F.push(new nt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(M&&!Ho(s.valueSpec)?F.push(new nt(s.key,s.value,"property functions not supported")):T&&!_h(s.valueSpec)&&F.push(new nt(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!V||s.value.property!==void 0||F.push(new nt(s.key,s.value,'"property" property is required')),F;function H(Q){let ee=[];const ue=Q.value,ve=Q.key;if(pr(ue)!=="array")return[new nt(ve,ue,`array expected, ${pr(ue)} found`)];if(ue.length!==2)return[new nt(ve,ue,`array length 2 expected, length ${ue.length} found`)];if(V){if(pr(ue[0])!=="object")return[new nt(ve,ue,`object expected, ${pr(ue[0])} found`)];if(ue[0].zoom===void 0)return[new nt(ve,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new nt(ve,ue,"object stop key must have value")];if(C&&C>li(ue[0].zoom))return[new nt(ve,ue[0].zoom,"stop zoom values must appear in ascending order")];li(ue[0].zoom)!==C&&(C=li(ue[0].zoom),v=void 0,E={}),ee=ee.concat(Es({key:`${ve}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:pu,value:Y}}))}else ee=ee.concat(Y({key:`${ve}[0]`,value:ue[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},ue));return ls(Wo(ue[1]))?ee.concat([new nt(`${ve}[1]`,ue[1],"expressions are not allowed in function stops.")]):ee.concat(Q.validateSpec({key:`${ve}[1]`,value:ue[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,ee){const ue=pr(Q.value),ve=li(Q.value),be=Q.value!==null?Q.value:ee;if(f){if(ue!==f)return[new nt(Q.key,be,`${ue} stop domain type must match previous stop domain type ${f}`)]}else f=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new nt(Q.key,be,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&l!=="categorical"){let Me=`number expected, ${ue} found`;return Ho(n)&&l===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(Q.key,be,Me)]}return l!=="categorical"||ue!=="number"||isFinite(ve)&&Math.floor(ve)===ve?l!=="categorical"&&ue==="number"&&v!==void 0&&ve<v?[new nt(Q.key,be,"stop domain values must appear in ascending order")]:(v=ve,l==="categorical"&&ve in E?[new nt(Q.key,be,"stop domain values must be unique")]:(E[ve]=!0,[])):[new nt(Q.key,be,`integer expected, found ${ve}`)]}}function Al(s){const n=(s.expressionContext==="property"?du:va)(Wo(s.value),s.valueSpec);if(n.result==="error")return n.value.map(f=>new nt(`${s.key}${f.key}`,s.value,f.message));const l=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new nt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!to(l))return[new nt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!to(l))return[new nt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!yc(l,["zoom","feature-state"]))return[new nt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!$o(l))return[new nt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gu(s){const n=s.key,l=s.value,f=s.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(li(l))===-1&&v.push(new nt(n,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(li(l))===-1&&v.push(new nt(n,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function Cc(s){return No(Wo(s.value))?Al(zn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rf(s)}function Rf(s){const n=s.value,l=s.key;if(pr(n)!=="array")return[new nt(l,n,`array expected, ${pr(n)} found`)];const f=s.styleSpec;let v,C=[];if(n.length<1)return[new nt(l,n,"filter array must have at least 1 element")];switch(C=C.concat(gu({key:`${l}[0]`,value:n[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),li(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&li(n[1])==="$type"&&C.push(new nt(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&C.push(new nt(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=pr(n[1]),v!=="string"&&C.push(new nt(`${l}[1]`,n[1],`string expected, ${v} found`)));for(let E=2;E<n.length;E++)v=pr(n[E]),li(n[1])==="$type"?C=C.concat(gu({key:`${l}[${E}]`,value:n[E],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&C.push(new nt(`${l}[${E}]`,n[E],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let E=1;E<n.length;E++)C=C.concat(Rf({key:`${l}[${E}]`,value:n[E],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":v=pr(n[1]),n.length!==2?C.push(new nt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&C.push(new nt(`${l}[1]`,n[1],`string expected, ${v} found`));break;case"within":v=pr(n[1]),n.length!==2?C.push(new nt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="object"&&C.push(new nt(`${l}[1]`,n[1],`object expected, ${v} found`))}return C}function Lf(s,n){const l=s.key,f=s.validateSpec,v=s.style,C=s.styleSpec,E=s.value,T=s.objectKey,M=C[`${n}_${s.layerType}`];if(!M)return[];const V=T.match(/^(.*)-transition$/);if(n==="paint"&&V&&M[V[1]]&&M[V[1]].transition)return f({key:l,value:E,valueSpec:C.transition,style:v,styleSpec:C});const F=s.valueSpec||M[T];if(!F)return[new nt(l,E,`unknown property "${T}"`)];let H;if(pr(E)==="string"&&Ho(F)&&!F.tokens&&(H=/^{([^}]+)}$/.exec(E)))return[new nt(l,E,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const Y=[];return s.layerType==="symbol"&&(T==="text-field"&&v&&!v.glyphs&&Y.push(new nt(l,E,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&fi(Wo(E))&&li(E.type)==="identity"&&Y.push(new nt(l,E,'"text-font" does not support identity functions'))),Y.concat(f({key:s.key,value:E,valueSpec:F,style:v,styleSpec:C,expressionContext:"property",propertyType:n,propertyKey:T}))}function Eh(s){return Lf(s,"paint")}function If(s){return Lf(s,"layout")}function Dh(s){let n=[];const l=s.value,f=s.key,v=s.style,C=s.styleSpec;l.type||l.ref||n.push(new nt(f,l,'either "type" or "ref" is required'));let E=li(l.type);const T=li(l.ref);if(l.id){const M=li(l.id);for(let V=0;V<s.arrayIndex;V++){const F=v.layers[V];li(F.id)===M&&n.push(new nt(f,l.id,`duplicate layer id "${l.id}", previously used at line ${F.id.__line__}`))}}if("ref"in l){let M;["type","source","source-layer","filter","layout"].forEach(V=>{V in l&&n.push(new nt(f,l[V],`"${V}" is prohibited for ref layers`))}),v.layers.forEach(V=>{li(V.id)===T&&(M=V)}),M?M.ref?n.push(new nt(f,l.ref,"ref cannot reference another ref layer")):E=li(M.type):n.push(new nt(f,l.ref,`ref layer "${T}" not found`))}else if(E!=="background")if(l.source){const M=v.sources&&v.sources[l.source],V=M&&li(M.type);M?V==="vector"&&E==="raster"?n.push(new nt(f,l.source,`layer "${l.id}" requires a raster source`)):V!=="raster-dem"&&E==="hillshade"?n.push(new nt(f,l.source,`layer "${l.id}" requires a raster-dem source`)):V==="raster"&&E!=="raster"?n.push(new nt(f,l.source,`layer "${l.id}" requires a vector source`)):V!=="vector"||l["source-layer"]?V==="raster-dem"&&E!=="hillshade"?n.push(new nt(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!l.paint||!l.paint["line-gradient"]||V==="geojson"&&M.lineMetrics||n.push(new nt(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new nt(f,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new nt(f,l.source,`source "${l.source}" not found`))}else n.push(new nt(f,l,'missing required property "source"'));return n=n.concat(Es({key:f,value:l,valueSpec:C.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:l.type,valueSpec:C.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:Cc,layout:M=>Es({layer:l,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>If(zn({layerType:E},V))}}),paint:M=>Es({layer:l,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>Eh(zn({layerType:E},V))}})}})),n}function ro(s){const n=s.value,l=s.key,f=pr(n);return f!=="string"?[new nt(l,n,`string expected, ${f} found`)]:[]}const vu={promoteId:function({key:s,value:n}){if(pr(n)==="string")return ro({key:s,value:n});{const l=[];for(const f in n)l.push(...ro({key:`${s}.${f}`,value:n[f]}));return l}}};function ta(s){const n=s.value,l=s.key,f=s.styleSpec,v=s.style,C=s.validateSpec;if(!n.type)return[new nt(l,n,'"type" is required')];const E=li(n.type);let T;switch(E){case"vector":case"raster":return T=Es({key:l,value:n,valueSpec:f[`source_${E.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:vu,validateSpec:C}),T;case"raster-dem":return T=function(M){var V;const F=(V=M.sourceName)!==null&&V!==void 0?V:"",H=M.value,Y=M.styleSpec,Q=Y.source_raster_dem,ee=M.style;let ue=[];const ve=pr(H);if(H===void 0)return ue;if(ve!=="object")return ue.push(new nt("source_raster_dem",H,`object expected, ${ve} found`)),ue;const be=li(H.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],Ee=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const Ve in H)!be&&Me.includes(Ve)?ue.push(new nt(Ve,H[Ve],`In "${F}": "${Ve}" is only valid when "encoding" is set to "custom". ${Ee} encoding found`)):Q[Ve]?ue=ue.concat(M.validateSpec({key:Ve,value:H[Ve],valueSpec:Q[Ve],validateSpec:M.validateSpec,style:ee,styleSpec:Y})):ue.push(new nt(Ve,H[Ve],`unknown property "${Ve}"`));return ue}({sourceName:l,value:n,style:s.style,styleSpec:f,validateSpec:C}),T;case"geojson":if(T=Es({key:l,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:C,objectElementValidators:vu}),n.cluster)for(const M in n.clusterProperties){const[V,F]=n.clusterProperties[M],H=typeof V=="string"?[V,["accumulated"],["get",M]]:V;T.push(...Al({key:`${l}.${M}.map`,value:F,expressionContext:"cluster-map"})),T.push(...Al({key:`${l}.${M}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return T;case"video":return Es({key:l,value:n,valueSpec:f.source_video,style:v,validateSpec:C,styleSpec:f});case"image":return Es({key:l,value:n,valueSpec:f.source_image,style:v,validateSpec:C,styleSpec:f});case"canvas":return[new nt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gu({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function yu(s){const n=s.value,l=s.styleSpec,f=l.light,v=s.style;let C=[];const E=pr(n);if(n===void 0)return C;if(E!=="object")return C=C.concat([new nt("light",n,`object expected, ${E} found`)]),C;for(const T in n){const M=T.match(/^(.*)-transition$/);C=C.concat(M&&f[M[1]]&&f[M[1]].transition?s.validateSpec({key:T,value:n[T],valueSpec:l.transition,validateSpec:s.validateSpec,style:v,styleSpec:l}):f[T]?s.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:s.validateSpec,style:v,styleSpec:l}):[new nt(T,n[T],`unknown property "${T}"`)])}return C}function pd(s){const n=s.value,l=s.styleSpec,f=l.terrain,v=s.style;let C=[];const E=pr(n);if(n===void 0)return C;if(E!=="object")return C=C.concat([new nt("terrain",n,`object expected, ${E} found`)]),C;for(const T in n)C=C.concat(f[T]?s.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:s.validateSpec,style:v,styleSpec:l}):[new nt(T,n[T],`unknown property "${T}"`)]);return C}function Zo(s){let n=[];const l=s.value,f=s.key;if(Array.isArray(l)){const v=[],C=[];for(const E in l)l[E].id&&v.includes(l[E].id)&&n.push(new nt(f,l,`all the sprites' ids must be unique, but ${l[E].id} is duplicated`)),v.push(l[E].id),l[E].url&&C.includes(l[E].url)&&n.push(new nt(f,l,`all the sprites' URLs must be unique, but ${l[E].url} is duplicated`)),C.push(l[E].url),n=n.concat(Es({key:`${f}[${E}]`,value:l[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return ro({key:f,value:l})}const bu={"*":()=>[],array:wc,boolean:function(s){const n=s.value,l=s.key,f=pr(n);return f!=="boolean"?[new nt(l,n,`boolean expected, ${f} found`)]:[]},number:pu,color:function(s){const n=s.key,l=s.value,f=pr(l);return f!=="string"?[new nt(n,l,`color expected, ${f} found`)]:xr.parse(String(l))?[]:[new nt(n,l,`color expected, "${l}" found`)]},constants:jl,enum:gu,filter:Cc,function:md,layer:Dh,object:Es,source:ta,light:yu,terrain:pd,string:ro,formatted:function(s){return ro(s).length===0?[]:Al(s)},resolvedImage:function(s){return ro(s).length===0?[]:Al(s)},padding:function(s){const n=s.key,l=s.value;if(pr(l)==="array"){if(l.length<1||l.length>4)return[new nt(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let v=[];for(let C=0;C<l.length;C++)v=v.concat(s.validateSpec({key:`${n}[${C}]`,value:l[C],validateSpec:s.validateSpec,valueSpec:f}));return v}return pu({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,l=s.value,f=pr(l),v=s.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new nt(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let E=0;E<l.length;E+=2)C=C.concat(gu({key:`${n}[${E}]`,value:l[E],valueSpec:v.layout_symbol["text-anchor"]})),C=C.concat(wc({key:`${n}[${E+1}]`,value:l[E+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:v}));return C},sprite:Zo};function So(s){const n=s.value,l=s.valueSpec,f=s.styleSpec;return s.validateSpec=So,l.expression&&fi(li(n))?md(s):l.expression&&ls(Wo(n))?Al(s):l.type&&bu[l.type]?bu[l.type](s):Es(zn({},s,{valueSpec:l.type?f[l.type]:l}))}function kl(s){const n=s.value,l=s.key,f=ro(s);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new nt(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new nt(l,n,'"glyphs" url must include a "{range}" token'))),f}function ba(s,n=We){let l=[];return l=l.concat(So({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:So,objectElementValidators:{glyphs:kl,"*":()=>[]}})),s.constants&&(l=l.concat(jl({key:"constants",value:s.constants}))),gd(l)}function Eo(s){return function(n){return s({...n,validateSpec:So})}}function gd(s){return[].concat(s).sort((n,l)=>n.line-l.line)}function Do(s){return function(...n){return gd(s.apply(this,n))}}ba.source=Do(Eo(ta)),ba.sprite=Do(Eo(Zo)),ba.glyphs=Do(Eo(kl)),ba.light=Do(Eo(yu)),ba.terrain=Do(Eo(pd)),ba.layer=Do(Eo(Dh)),ba.filter=Do(Eo(Cc)),ba.paintProperty=Do(Eo(Eh)),ba.layoutProperty=Do(Eo(If));const To=ba,Vf=To.light,Th=To.paintProperty,Ph=To.layoutProperty;function ts(s,n){let l=!1;if(n&&n.length)for(const f of n)s.fire(new Lr(new Error(f.message))),l=!0;return l}class Ml{constructor(n,l,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const E=new Int32Array(this.arrayBuffer);n=E[0],this.d=(l=E[1])+2*(f=E[2]);for(let M=0;M<this.d*this.d;M++){const V=E[3+M],F=E[3+M+1];v.push(V===F?null:E.subarray(V,F))}const T=E[3+v.length+1];this.keys=E.subarray(E[3+v.length],T),this.bboxes=E.subarray(T),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let E=0;E<this.d*this.d;E++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=f,this.scale=l/n,this.uid=0;const C=f/l*n;this.min=-C,this.max=n+C}insert(n,l,f,v,C){this._forEachCell(l,f,v,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,f,v,C,E){this.cells[C].push(E)}query(n,l,f,v,C){const E=this.min,T=this.max;if(n<=E&&l<=E&&T<=f&&T<=v&&!C)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,l,f,v,this._queryCell,M,{},C),M}}_queryCell(n,l,f,v,C,E,T,M){const V=this.cells[C];if(V!==null){const F=this.keys,H=this.bboxes;for(let Y=0;Y<V.length;Y++){const Q=V[Y];if(T[Q]===void 0){const ee=4*Q;(M?M(H[ee+0],H[ee+1],H[ee+2],H[ee+3]):n<=H[ee+2]&&l<=H[ee+3]&&f>=H[ee+0]&&v>=H[ee+1])?(T[Q]=!0,E.push(F[Q])):T[Q]=!1}}}}_forEachCell(n,l,f,v,C,E,T,M){const V=this._convertToCellCoord(n),F=this._convertToCellCoord(l),H=this._convertToCellCoord(f),Y=this._convertToCellCoord(v);for(let Q=V;Q<=H;Q++)for(let ee=F;ee<=Y;ee++){const ue=this.d*ee+Q;if((!M||M(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&C.call(this,n,l,f,v,ue,E,T,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,l=3+this.cells.length+1+1;let f=0;for(let E=0;E<this.cells.length;E++)f+=this.cells[E].length;const v=new Int32Array(l+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let C=l;for(let E=0;E<n.length;E++){const T=n[E];v[3+E]=C,v.set(T,C),C+=T.length}return v[3+n.length]=C,v.set(this.keys,C),C+=this.keys.length,v[3+n.length+1]=C,v.set(this.bboxes,C),C+=this.bboxes.length,v.buffer}static serialize(n,l){const f=n.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(n){return new Ml(n.buffer)}}const Po={};function Gt(s,n,l={}){if(Po[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),Po[s]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}Gt("Object",Object),Gt("TransferableGridIndex",Ml),Gt("Color",xr),Gt("Error",Error),Gt("AJAXError",qt),Gt("ResolvedImage",Ii),Gt("StylePropertyFunction",Go),Gt("StyleExpression",dd,{omit:["_evaluator"]}),Gt("ZoomDependentExpression",ya),Gt("ZoomConstantExpression",xi),Gt("CompoundExpression",gs,{omit:["_evaluate"]});for(const s in Hs)Hs[s]._classRegistryKey||Gt(`Expression_${s}`,Hs[s]);function vd(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Ko(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(vd(s)||Sn(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return n&&n.push(l.buffer),l}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const f of s)l.push(Ko(f,n));return l}if(typeof s=="object"){const l=s.constructor,f=l._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Po[f])throw new Error(`${f} is not registered.`);const v=l.serialize?l.serialize(s,n):{};if(l.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in s){if(!s.hasOwnProperty(C)||Po[f].omit.indexOf(C)>=0)continue;const E=s[C];v[C]=Po[f].shallow.indexOf(C)>=0?E:Ko(E,n)}s instanceof Error&&(v.message=s.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(v.$name=f),v}throw new Error("can't serialize object of type "+typeof s)}function Nc(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||vd(s)||Sn(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(Nc);if(typeof s=="object"){const n=s.$name||"Object";if(!Po[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:l}=Po[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(s);const f=Object.create(l.prototype);for(const v of Object.keys(s)){if(v==="$name")continue;const C=s[v];f[v]=Po[n].shallow.indexOf(v)>=0?C:Nc(C)}return f}throw new Error("can't deserialize object of type "+typeof s)}class jh{constructor(){this.first=!0}update(n,l){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const Lt={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Rl(s){for(const n of s)if(kh(n.charCodeAt(0)))return!0;return!1}function Ah(s){for(const n of s)if(!xu(n.charCodeAt(0)))return!1;return!0}function xu(s){return!(Lt.Arabic(s)||Lt["Arabic Supplement"](s)||Lt["Arabic Extended-A"](s)||Lt["Arabic Presentation Forms-A"](s)||Lt["Arabic Presentation Forms-B"](s))}function kh(s){return!(s!==746&&s!==747&&(s<4352||!(Lt["Bopomofo Extended"](s)||Lt.Bopomofo(s)||Lt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Lt["CJK Compatibility Ideographs"](s)||Lt["CJK Compatibility"](s)||Lt["CJK Radicals Supplement"](s)||Lt["CJK Strokes"](s)||!(!Lt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Lt["CJK Unified Ideographs Extension A"](s)||Lt["CJK Unified Ideographs"](s)||Lt["Enclosed CJK Letters and Months"](s)||Lt["Hangul Compatibility Jamo"](s)||Lt["Hangul Jamo Extended-A"](s)||Lt["Hangul Jamo Extended-B"](s)||Lt["Hangul Jamo"](s)||Lt["Hangul Syllables"](s)||Lt.Hiragana(s)||Lt["Ideographic Description Characters"](s)||Lt.Kanbun(s)||Lt["Kangxi Radicals"](s)||Lt["Katakana Phonetic Extensions"](s)||Lt.Katakana(s)&&s!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Lt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](s)||Lt["Unified Canadian Aboriginal Syllabics Extended"](s)||Lt["Vertical Forms"](s)||Lt["Yijing Hexagram Symbols"](s)||Lt["Yi Syllables"](s)||Lt["Yi Radicals"](s))))}function Of(s){return!(kh(s)||function(n){return!!(Lt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Lt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Lt["Letterlike Symbols"](n)||Lt["Number Forms"](n)||Lt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Lt["Control Pictures"](n)&&n!==9251||Lt["Optical Character Recognition"](n)||Lt["Enclosed Alphanumerics"](n)||Lt["Geometric Shapes"](n)||Lt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Lt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Lt["CJK Symbols and Punctuation"](n)||Lt.Katakana(n)||Lt["Private Use Area"](n)||Lt["CJK Compatibility Forms"](n)||Lt["Small Form Variants"](n)||Lt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function zf(s){return s>=1424&&s<=2303||Lt["Arabic Presentation Forms-A"](s)||Lt["Arabic Presentation Forms-B"](s)}function yd(s,n){return!(!n&&zf(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Lt.Khmer(s))}function Mh(s){for(const n of s)if(zf(n.charCodeAt(0)))return!0;return!1}const Yo="deferred",Xo="loading",bd="loaded";let Rh=null,Ds="unavailable",Jo=null;const Sc=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Ds="error"),Rh&&Rh(s)};function xd(){Ec.fire(new hi("pluginStateChange",{pluginStatus:Ds,pluginURL:Jo}))}const Ec=new ii,_u=function(){return Ds},Bf=function(){if(Ds!==Yo||!Jo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ds=Xo,xd(),Jo&&tr({url:Jo},s=>{s?Sc(s):(Ds=bd,xd())})},Gs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ds===bd||Gs.applyArabicShaping!=null,isLoading:()=>Ds===Xo,setState(s){if(!Ct())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ds=s.pluginStatus,Jo=s.pluginURL},isParsed(){if(!Ct())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Gs.applyArabicShaping!=null&&Gs.processBidirectionalText!=null&&Gs.processStyledBidirectionalText!=null},getPluginURL(){if(!Ct())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Jo}};class ti{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})}isSupportedScript(n){return function(l,f){for(const v of l)if(!yd(v.charCodeAt(0),f))return!1;return!0}(n,Gs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class _d{constructor(n,l){this.property=n,this.value=l,this.expression=function(f,v){if(fi(f))return new Go(f,v);if(ls(f)){const C=du(f,v);if(C.result==="error")throw new Error(C.value.map(E=>`${E.key}: ${E.message}`).join(", "));return C.value}{let C=f;return v.type==="color"&&typeof f=="string"?C=xr.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(C=ms.parse(f)):C=ss.parse(f),{kind:"constant",evaluate:()=>C}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,f){return this.property.possiblyEvaluate(this,n,l,f)}}class Lh{constructor(n){this.property=n,this.value=new _d(n,void 0)}transitioned(n,l){return new wd(this.property,this.value,l,ut({},n.transition,this.transition),n.now)}untransitioned(){return new wd(this.property,this.value,null,{},0)}}class Dc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return lt(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Lh(this._values[n].property)),this._values[n].value=new _d(this._values[n].property,l===null?void 0:lt(l))}getTransition(n){return lt(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Lh(this._values[n].property)),this._values[n].transition=lt(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(n[l]=f);const v=this.getTransition(l);v!==void 0&&(n[`${l}-transition`]=v)}return n}transitioned(n,l){const f=new Tc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,l._values[v]);return f}untransitioned(){const n=new Tc(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class wd{constructor(n,l,f,v,C){this.property=n,this.value=l,this.begin=C+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,l,f){const v=n.now||0,C=this.value.possiblyEvaluate(n,l,f),E=this.prior;if(E){if(v>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(v<this.begin)return E.possiblyEvaluate(n,l,f);{const T=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(n,l,f),C,function(M){if(M<=0)return 0;if(M>=1)return 1;const V=M*M,F=V*M;return 4*(M<.5?F:3*(M-V)+F-.75)}(T))}}return C}}class Tc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,f){const v=new Pc(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(n,l,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Ff{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return lt(this._values[n].value)}setValue(n,l){this._values[n]=new _d(this._values[n].property,l===null?void 0:lt(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(n[l]=f)}return n}possiblyEvaluate(n,l,f){const v=new Pc(this._properties);for(const C of Object.keys(this._values))v._values[C]=this._values[C].possiblyEvaluate(n,l,f);return v}}class vs{constructor(n,l,f){this.property=n,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,f,v){return this.property.evaluate(this.value,this.parameters,n,l,f,v)}}class Pc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class an{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,f){const v=Qi[this.specification.type];return v?v(n,l,f):n}}class dn{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,f,v){return new vs(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},f,v)}:n.expression,l)}interpolate(n,l,f){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new vs(this,{kind:"constant",value:void 0},n.parameters);const v=Qi[this.specification.type];if(v){const C=v(n.value.value,l.value.value,f);return new vs(this,{kind:"constant",value:C},n.parameters)}return n}evaluate(n,l,f,v,C,E){return n.kind==="constant"?n.value:n.evaluate(l,f,v,C,E)}}class Qo extends dn{possiblyEvaluate(n,l,f,v){if(n.value===void 0)return new vs(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const C=n.expression.evaluate(l,null,{},f,v),E=n.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,T=this._calculate(E,E,E,l);return new vs(this,{kind:"constant",value:T},l)}if(n.expression.kind==="camera"){const C=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new vs(this,{kind:"constant",value:C},l)}return new vs(this,n.expression,l)}evaluate(n,l,f,v,C,E){if(n.kind==="source"){const T=n.evaluate(l,f,v,C,E);return this._calculate(T,T,T,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},f,v),n.evaluate({zoom:Math.floor(l.zoom)},f,v),n.evaluate({zoom:Math.floor(l.zoom)+1},f,v),l):n.value}_calculate(n,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:f,to:l}}interpolate(n){return n}}class jc{constructor(n){this.specification=n}possiblyEvaluate(n,l,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const C=n.expression.evaluate(l,null,{},f,v);return this._calculate(C,C,C,l)}return this._calculate(n.expression.evaluate(new ti(Math.floor(l.zoom-1),l)),n.expression.evaluate(new ti(Math.floor(l.zoom),l)),n.expression.evaluate(new ti(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:f,to:l}}interpolate(n){return n}}class wu{constructor(n){this.specification=n}possiblyEvaluate(n,l,f,v){return!!n.expression.evaluate(l,null,{},f,v)}interpolate(){return!1}}class ji{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in n){const f=n[l];f.specification.overridable&&this.overridableProperties.push(l);const v=this.defaultPropertyValues[l]=new _d(f,void 0),C=this.defaultTransitionablePropertyValues[l]=new Lh(f);this.defaultTransitioningPropertyValues[l]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}Gt("DataDrivenProperty",dn),Gt("DataConstantProperty",an),Gt("CrossFadedDataDrivenProperty",Qo),Gt("CrossFadedProperty",jc),Gt("ColorRampProperty",wu);const Cu="-transition";class xa extends ii{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new Ff(l.layout)),l.paint)){this._transitionablePaint=new Dc(l.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pc(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,f={}){l!=null&&this._validate(Ph,`layers.${this.id}.layout.${n}`,n,l,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(Cu)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,f={}){if(l!=null&&this._validate(Th,`layers.${this.id}.paint.${n}`,n,l,f))return!1;if(n.endsWith(Cu))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{const v=this._transitionablePaint._values[n],C=v.property.specification["property-type"]==="cross-faded-data-driven",E=v.value.isDataDriven(),T=v.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||E||C||this._handleOverridablePaintPropertyUpdate(n,T,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),fn(n,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(n,l,f,v,C={}){return(!C||C.validate!==!1)&&ts(this,n.call(To,{key:l,layerType:this.type,objectKey:f,value:v,styleSpec:We,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof vs&&Ho(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Uf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ll{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ir(s,n=1){let l=0,f=0;return{members:s.map(v=>{const C=Uf[v.type].BYTES_PER_ELEMENT,E=l=Ac(l,Math.max(n,C)),T=v.components||1;return f=Math.max(f,C),l+=C*T,{name:v.name,type:v.type,components:T,offset:E}}),size:Ac(l,Math.max(f,n)),alignment:n}}function Ac(s,n){return Math.ceil(s/n)*n}class Nu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.int16[v+0]=l,this.int16[v+1]=f,n}}Nu.prototype.bytesPerElement=4,Gt("StructArrayLayout2i4",Nu);class bn extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const C=3*n;return this.int16[C+0]=l,this.int16[C+1]=f,this.int16[C+2]=v,n}}bn.prototype.bytesPerElement=6,Gt("StructArrayLayout3i6",bn);class _a extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const C=this.length;return this.resize(C+1),this.emplace(C,n,l,f,v)}emplace(n,l,f,v,C){const E=4*n;return this.int16[E+0]=l,this.int16[E+1]=f,this.int16[E+2]=v,this.int16[E+3]=C,n}}_a.prototype.bytesPerElement=8,Gt("StructArrayLayout4i8",_a);class _i extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,C,E)}emplace(n,l,f,v,C,E,T){const M=6*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=C,this.int16[M+4]=E,this.int16[M+5]=T,n}}_i.prototype.bytesPerElement=12,Gt("StructArrayLayout2i4i12",_i);class hr extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,C,E)}emplace(n,l,f,v,C,E,T){const M=4*n,V=8*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.uint8[V+4]=v,this.uint8[V+5]=C,this.uint8[V+6]=E,this.uint8[V+7]=T,n}}hr.prototype.bytesPerElement=8,Gt("StructArrayLayout2i4ub8",hr);class wa extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.float32[v+0]=l,this.float32[v+1]=f,n}}wa.prototype.bytesPerElement=8,Gt("StructArrayLayout2f8",wa);class Il extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E,T,M,V,F){const H=this.length;return this.resize(H+1),this.emplace(H,n,l,f,v,C,E,T,M,V,F)}emplace(n,l,f,v,C,E,T,M,V,F,H){const Y=10*n;return this.uint16[Y+0]=l,this.uint16[Y+1]=f,this.uint16[Y+2]=v,this.uint16[Y+3]=C,this.uint16[Y+4]=E,this.uint16[Y+5]=T,this.uint16[Y+6]=M,this.uint16[Y+7]=V,this.uint16[Y+8]=F,this.uint16[Y+9]=H,n}}Il.prototype.bytesPerElement=20,Gt("StructArrayLayout10ui20",Il);class Cd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E,T,M,V,F,H,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,l,f,v,C,E,T,M,V,F,H,Y)}emplace(n,l,f,v,C,E,T,M,V,F,H,Y,Q){const ee=12*n;return this.int16[ee+0]=l,this.int16[ee+1]=f,this.int16[ee+2]=v,this.int16[ee+3]=C,this.uint16[ee+4]=E,this.uint16[ee+5]=T,this.uint16[ee+6]=M,this.uint16[ee+7]=V,this.int16[ee+8]=F,this.int16[ee+9]=H,this.int16[ee+10]=Y,this.int16[ee+11]=Q,n}}Cd.prototype.bytesPerElement=24,Gt("StructArrayLayout4i4ui4i24",Cd);class on extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const C=3*n;return this.float32[C+0]=l,this.float32[C+1]=f,this.float32[C+2]=v,n}}on.prototype.bytesPerElement=12,Gt("StructArrayLayout3f12",on);class x extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}x.prototype.bytesPerElement=4,Gt("StructArrayLayout1ul4",x);class r extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E,T,M,V){const F=this.length;return this.resize(F+1),this.emplace(F,n,l,f,v,C,E,T,M,V)}emplace(n,l,f,v,C,E,T,M,V,F){const H=10*n,Y=5*n;return this.int16[H+0]=l,this.int16[H+1]=f,this.int16[H+2]=v,this.int16[H+3]=C,this.int16[H+4]=E,this.int16[H+5]=T,this.uint32[Y+3]=M,this.uint16[H+8]=V,this.uint16[H+9]=F,n}}r.prototype.bytesPerElement=20,Gt("StructArrayLayout6i1ul2ui20",r);class u extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,C,E)}emplace(n,l,f,v,C,E,T){const M=6*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=C,this.int16[M+4]=E,this.int16[M+5]=T,n}}u.prototype.bytesPerElement=12,Gt("StructArrayLayout2i2i2i12",u);class m extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C){const E=this.length;return this.resize(E+1),this.emplace(E,n,l,f,v,C)}emplace(n,l,f,v,C,E){const T=4*n,M=8*n;return this.float32[T+0]=l,this.float32[T+1]=f,this.float32[T+2]=v,this.int16[M+6]=C,this.int16[M+7]=E,n}}m.prototype.bytesPerElement=16,Gt("StructArrayLayout2f1f2i16",m);class y extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const C=this.length;return this.resize(C+1),this.emplace(C,n,l,f,v)}emplace(n,l,f,v,C){const E=12*n,T=3*n;return this.uint8[E+0]=l,this.uint8[E+1]=f,this.float32[T+1]=v,this.float32[T+2]=C,n}}y.prototype.bytesPerElement=12,Gt("StructArrayLayout2ub2f12",y);class _ extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const C=3*n;return this.uint16[C+0]=l,this.uint16[C+1]=f,this.uint16[C+2]=v,n}}_.prototype.bytesPerElement=6,Gt("StructArrayLayout3ui6",_);class P extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be){const Me=this.length;return this.resize(Me+1),this.emplace(Me,n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be)}emplace(n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be,Me){const Ee=24*n,Ve=12*n,qe=48*n;return this.int16[Ee+0]=l,this.int16[Ee+1]=f,this.uint16[Ee+2]=v,this.uint16[Ee+3]=C,this.uint32[Ve+2]=E,this.uint32[Ve+3]=T,this.uint32[Ve+4]=M,this.uint16[Ee+10]=V,this.uint16[Ee+11]=F,this.uint16[Ee+12]=H,this.float32[Ve+7]=Y,this.float32[Ve+8]=Q,this.uint8[qe+36]=ee,this.uint8[qe+37]=ue,this.uint8[qe+38]=ve,this.uint32[Ve+10]=be,this.int16[Ee+22]=Me,n}}P.prototype.bytesPerElement=48,Gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",P);class j extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be,Me,Ee,Ve,qe,st,It,Xt,Vt,kt,Et,xt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be,Me,Ee,Ve,qe,st,It,Xt,Vt,kt,Et,xt)}emplace(n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue,ve,be,Me,Ee,Ve,qe,st,It,Xt,Vt,kt,Et,xt,Dt){const vt=32*n,ln=16*n;return this.int16[vt+0]=l,this.int16[vt+1]=f,this.int16[vt+2]=v,this.int16[vt+3]=C,this.int16[vt+4]=E,this.int16[vt+5]=T,this.int16[vt+6]=M,this.int16[vt+7]=V,this.uint16[vt+8]=F,this.uint16[vt+9]=H,this.uint16[vt+10]=Y,this.uint16[vt+11]=Q,this.uint16[vt+12]=ee,this.uint16[vt+13]=ue,this.uint16[vt+14]=ve,this.uint16[vt+15]=be,this.uint16[vt+16]=Me,this.uint16[vt+17]=Ee,this.uint16[vt+18]=Ve,this.uint16[vt+19]=qe,this.uint16[vt+20]=st,this.uint16[vt+21]=It,this.uint16[vt+22]=Xt,this.uint32[ln+12]=Vt,this.float32[ln+13]=kt,this.float32[ln+14]=Et,this.uint16[vt+30]=xt,this.uint16[vt+31]=Dt,n}}j.prototype.bytesPerElement=64,Gt("StructArrayLayout8i15ui1ul2f2ui64",j);class R extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}R.prototype.bytesPerElement=4,Gt("StructArrayLayout1f4",R);class z extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const C=3*n;return this.uint16[6*n+0]=l,this.float32[C+1]=f,this.float32[C+2]=v,n}}z.prototype.bytesPerElement=12,Gt("StructArrayLayout1ui2f12",z);class U extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const C=4*n;return this.uint32[2*n+0]=l,this.uint16[C+2]=f,this.uint16[C+3]=v,n}}U.prototype.bytesPerElement=8,Gt("StructArrayLayout1ul2ui8",U);class q extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.uint16[v+0]=l,this.uint16[v+1]=f,n}}q.prototype.bytesPerElement=4,Gt("StructArrayLayout2ui4",q);class X extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}X.prototype.bytesPerElement=2,Gt("StructArrayLayout1ui2",X);class le extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const C=this.length;return this.resize(C+1),this.emplace(C,n,l,f,v)}emplace(n,l,f,v,C){const E=4*n;return this.float32[E+0]=l,this.float32[E+1]=f,this.float32[E+2]=v,this.float32[E+3]=C,n}}le.prototype.bytesPerElement=16,Gt("StructArrayLayout4f16",le);class ce extends Ll{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new W(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class me extends r{get(n){return new ce(this,n)}}Gt("CollisionBoxArray",me);class ae extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class je extends P{get(n){return new ae(this,n)}}Gt("PlacedSymbolArray",je);class Ue extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ue.prototype.size=64;class ye extends j{get(n){return new Ue(this,n)}}Gt("SymbolInstanceArray",ye);class ke extends R{getoffsetX(n){return this.float32[1*n+0]}}Gt("GlyphOffsetArray",ke);class $e extends bn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Gt("SymbolLineVertexArray",$e);class Ye extends Ll{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ye.prototype.size=12;class it extends z{get(n){return new Ye(this,n)}}Gt("TextAnchorOffsetArray",it);class yt extends Ll{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}yt.prototype.size=8;class ft extends U{get(n){return new yt(this,n)}}Gt("FeatureIndexArray",ft);class wt extends Nu{}class Qt extends Nu{}class Xn extends Nu{}class At extends _i{}class mn extends hr{}class en extends wa{}class kr extends Il{}class Zn extends Cd{}class In extends on{}class Jn extends x{}class wi extends u{}class Wr extends y{}class gr extends _{}class Fi extends q{}const mi=Ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ts}=mi;class Nr{constructor(n=[]){this.segments=n}prepareSegment(n,l,f,v){let C=this.segments[this.segments.length-1];return n>Nr.MAX_VERTEX_ARRAY_LENGTH&&ht(`Max vertices per segment is ${Nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!C||C.vertexLength+n>Nr.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==v)&&(C={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},v!==void 0&&(C.sortKey=v),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,f,v){return new Nr([{vertexOffset:n,primitiveOffset:l,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function io(s,n){return 256*(s=Ze(Math.floor(s),0,255))+Ze(Math.floor(n),0,255)}Nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt("SegmentVector",Nr);const Ca=Ir([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var el={exports:{}},Vl={exports:{}};Vl.exports=function(s,n){var l,f,v,C,E,T,M,V;for(f=s.length-(l=3&s.length),v=n,E=3432918353,T=461845907,V=0;V<f;)M=255&s.charCodeAt(V)|(255&s.charCodeAt(++V))<<8|(255&s.charCodeAt(++V))<<16|(255&s.charCodeAt(++V))<<24,++V,v=27492+(65535&(C=5*(65535&(v=(v^=M=(65535&(M=(M=(65535&M)*E+(((M>>>16)*E&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(M=0,l){case 3:M^=(255&s.charCodeAt(V+2))<<16;case 2:M^=(255&s.charCodeAt(V+1))<<8;case 1:v^=M=(65535&(M=(M=(65535&(M^=255&s.charCodeAt(V)))*E+(((M>>>16)*E&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295}return v^=s.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var Oa=Vl.exports,Er={exports:{}};Er.exports=function(s,n){for(var l,f=s.length,v=n^f,C=0;f>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(l>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:v^=(255&s.charCodeAt(C+2))<<16;case 2:v^=(255&s.charCodeAt(C+1))<<8;case 1:v=1540483477*(65535&(v^=255&s.charCodeAt(C)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var Pt=Oa,pi=Er.exports;el.exports=Pt,el.exports.murmur3=Pt,el.exports.murmur2=pi;var cs=k(el.exports);class Ci{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,f,v){this.ids.push(Ui(n)),this.positions.push(l,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ui(n);let f=0,v=this.ids.length-1;for(;f<v;){const E=f+v>>1;this.ids[E]>=l?v=E:f=E+1}const C=[];for(;this.ids[f]===l;)C.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return C}static serialize(n,l){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return Ws(f,v,0,f.length-1),l&&l.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const l=new Ci;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Ui(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:cs(String(s))}function Ws(s,n,l,f){for(;l<f;){const v=s[l+f>>1];let C=l-1,E=f+1;for(;;){do C++;while(s[C]<v);do E--;while(s[E]>v);if(C>=E)break;Ni(s,C,E),Ni(n,3*C,3*E),Ni(n,3*C+1,3*E+1),Ni(n,3*C+2,3*E+2)}E-l<f-E?(Ws(s,n,l,E),l=E+1):(Ws(s,n,E+1,f),f=E)}}function Ni(s,n,l){const f=s[n];s[n]=s[l],s[l]=f}Gt("FeaturePositionMap",Ci);class Ol{constructor(n,l){this.gl=n.gl,this.location=l}}class Ai extends Ol{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class $f extends Ol{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class qf extends Ol{constructor(n,l){super(n,l),this.current=xr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Tp=new Float32Array(16);function Nd(s){return[io(255*s.r,255*s.g),io(255*s.b,255*s.a)]}class Zs{constructor(n,l,f){this.value=n,this.uniformNames=l.map(v=>`u_${v}`),this.type=f}setUniform(n,l,f){n.set(f.constantOr(this.value))}getBinding(n,l,f){return this.type==="color"?new qf(n,l):new Ai(n,l)}}class Na{constructor(n,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,f,v){const C=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&n.set(C)}getBinding(n,l,f){return f.substr(0,9)==="u_pattern"?new $f(n,l):new Ai(n,l)}}class so{constructor(n,l,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,l,f,v,C){const E=this.paintVertexArray.length,T=this.expression.evaluate(new ti(0),l,{},v,[],C);this.paintVertexArray.resize(n),this._setPaintValue(E,n,T)}updatePaintArray(n,l,f,v){const C=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(n,l,C)}_setPaintValue(n,l,f){if(this.type==="color"){const v=Nd(f);for(let C=n;C<l;C++)this.paintVertexArray.emplace(C,v[0],v[1])}else{for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Sa{constructor(n,l,f,v,C,E){this.expression=n,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(n,l,f,v,C){const E=this.expression.evaluate(new ti(this.zoom),l,{},v,[],C),T=this.expression.evaluate(new ti(this.zoom+1),l,{},v,[],C),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,E,T)}updatePaintArray(n,l,f,v){const C=this.expression.evaluate({zoom:this.zoom},f,v),E=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(n,l,C,E)}_setPaintValue(n,l,f,v){if(this.type==="color"){const C=Nd(f),E=Nd(v);for(let T=n;T<l;T++)this.paintVertexArray.emplace(T,C[0],C[1],E[0],E[1])}else{for(let C=n;C<l;C++)this.paintVertexArray.emplace(C,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=Ze(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,l,f){return new Ai(n,l)}}class ao{constructor(n,l,f,v,C,E){this.expression=n,this.type=l,this.useIntegerZoom=f,this.zoom=v,this.layerId=E,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(n,l,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(n,l,f,v,C){this._setPaintValues(n,l,f.patterns&&f.patterns[this.layerId],C)}_setPaintValues(n,l,f,v){if(!v||!f)return;const{min:C,mid:E,max:T}=f,M=v[C],V=v[E],F=v[T];if(M&&V&&F)for(let H=n;H<l;H++)this.zoomInPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],V.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],V.pixelRatio,F.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ca.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ca.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ih{constructor(n,l,f){this.binders={},this._buffers=[];const v=[];for(const C in n.paint._values){if(!f(C))continue;const E=n.paint.get(C);if(!(E instanceof vs&&Ho(E.property.specification)))continue;const T=y0(C,n.type),M=E.value,V=E.property.specification.type,F=E.property.useIntegerZoom,H=E.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(M.kind==="constant")this.binders[C]=Y?new Na(M.value,T):new Zs(M.value,T,V),v.push(`/u_${C}`);else if(M.kind==="source"||Y){const Q=Pp(C,V,"source");this.binders[C]=Y?new ao(M,V,F,l,Q,n.id):new so(M,T,V,Q),v.push(`/a_${C}`)}else{const Q=Pp(C,V,"composite");this.binders[C]=new Sa(M,T,V,F,l,Q),v.push(`/z_${C}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof so||l instanceof Sa?l.maxValue:0}populatePaintArrays(n,l,f,v,C){for(const E in this.binders){const T=this.binders[E];(T instanceof so||T instanceof Sa||T instanceof ao)&&T.populatePaintArray(n,l,f,v,C)}}setConstantPatternPositions(n,l){for(const f in this.binders){const v=this.binders[f];v instanceof Na&&v.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,f,v,C){let E=!1;for(const T in n){const M=l.getPositions(T);for(const V of M){const F=f.feature(V.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof so||Y instanceof Sa||Y instanceof ao)&&Y.expression.isStateDependent===!0){const Q=v.paint.get(H);Y.expression=Q.value,Y.updatePaintArray(V.start,V.end,F,n[T],C),E=!0}}}}return E}defines(){const n=[];for(const l in this.binders){const f=this.binders[l];(f instanceof Zs||f instanceof Na)&&n.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof so||f instanceof Sa)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof ao)for(let v=0;v<Ca.members.length;v++)n.push(Ca.members[v].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Zs||f instanceof Na||f instanceof Sa)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const f=[];for(const v in this.binders){const C=this.binders[v];if(C instanceof Zs||C instanceof Na||C instanceof Sa){for(const E of C.uniformNames)if(l[E]){const T=C.getBinding(n,l[E],E);f.push({name:E,property:v,binding:T})}}}return f}setUniforms(n,l,f,v){for(const{name:C,property:E,binding:T}of l)this.binders[E].setUniform(T,v,f.get(E),C)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(n&&f instanceof ao){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof so||f instanceof Sa)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const l in this.binders){const f=this.binders[l];(f instanceof so||f instanceof Sa||f instanceof ao)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof so||l instanceof Sa||l instanceof ao)&&l.destroy()}}}class jo{constructor(n,l,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Ih(v,l,f);this.needsUpload=!1,this._featureMap=new Ci,this._bufferOffset=0}populatePaintArrays(n,l,f,v,C,E){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,l,v,C,E);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,f,v){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(n,this._featureMap,l,C,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function y0(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function Pp(s,n,l){const f={color:{source:wa,composite:le},number:{source:R,composite:wa}},v=function(C){return{"line-pattern":{source:kr,composite:kr},"fill-pattern":{source:kr,composite:kr},"fill-extrusion-pattern":{source:kr,composite:kr}}[C]}(s);return v&&v[l]||f[n][l]}Gt("ConstantBinder",Zs),Gt("CrossFadedConstantBinder",Na),Gt("SourceExpressionBinder",so),Gt("CrossFadedCompositeBinder",ao),Gt("CompositeExpressionBinder",Sa),Gt("ProgramConfiguration",Ih,{omit:["_buffers"]}),Gt("ProgramConfigurationSet",jo);const ki=8192,jp=Math.pow(2,14)-1,ly=-jp-1;function Su(s){const n=ki/s.extent,l=s.loadGeometry();for(let f=0;f<l.length;f++){const v=l[f];for(let C=0;C<v.length;C++){const E=v[C],T=Math.round(E.x*n),M=Math.round(E.y*n);E.x=Ze(T,ly,jp),E.y=Ze(M,ly,jp),(T<E.x||T>E.x+1||M<E.y||M>E.y+1)&&ht("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Eu(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Su(s):[]}}function Hf(s,n,l,f,v){s.emplaceBack(2*n+(f+1)/2,2*l+(v+1)/2)}class Ap{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Qt,this.indexArray=new gr,this.segments=new Nr,this.programConfigurations=new jo(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){const v=this.layers[0],C=[];let E=null,T=!1;v.type==="circle"&&(E=v.layout.get("circle-sort-key"),T=!E.isConstant());for(const{feature:M,id:V,index:F,sourceLayerIndex:H}of n){const Y=this.layers[0]._featureFilter.needGeometry,Q=Eu(M,Y);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Q,f))continue;const ee=T?E.evaluate(Q,{},f):void 0,ue={id:V,properties:M.properties,type:M.type,sourceLayerIndex:H,index:F,geometry:Y?Q.geometry:Su(M),patterns:{},sortKey:ee};C.push(ue)}T&&C.sort((M,V)=>M.sortKey-V.sortKey);for(const M of C){const{geometry:V,index:F,sourceLayerIndex:H}=M,Y=n[F].feature;this.addFeature(M,V,F,f),l.featureIndex.insert(Y,V,F,H,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,f,v){for(const C of l)for(const E of C){const T=E.x,M=E.y;if(T<0||T>=ki||M<0||M>=ki)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),F=V.vertexLength;Hf(this.layoutVertexArray,T,M,-1,-1),Hf(this.layoutVertexArray,T,M,1,-1),Hf(this.layoutVertexArray,T,M,1,1),Hf(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},v)}}function kp(s,n){for(let l=0;l<s.length;l++)if(ui(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(ui(s,n[l]))return!0;return!!Rp(s,n)}function b0(s,n,l){return!!ui(s,n)||!!_n(n,s,l)}function Mp(s,n){if(s.length===1)return Vr(n,s[0]);for(let l=0;l<n.length;l++){const f=n[l];for(let v=0;v<f.length;v++)if(ui(s,f[v]))return!0}for(let l=0;l<s.length;l++)if(Vr(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(Rp(s,n[l]))return!0;return!1}function x0(s,n,l){if(s.length>1){if(Rp(s,n))return!0;for(let f=0;f<n.length;f++)if(_n(n[f],s,l))return!0}for(let f=0;f<s.length;f++)if(_n(s[f],n,l))return!0;return!1}function Rp(s,n){if(s.length===0||n.length===0)return!1;for(let l=0;l<s.length-1;l++){const f=s[l],v=s[l+1];for(let C=0;C<n.length-1;C++)if(Lp(f,v,n[C],n[C+1]))return!0}return!1}function Lp(s,n,l,f){return $t(s,l,f)!==$t(n,l,f)&&$t(s,n,l)!==$t(s,n,f)}function _n(s,n,l){const f=l*l;if(n.length===1)return s.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(cr(s,n[v-1],n[v])<f)return!0;return!1}function cr(s,n,l){const f=n.distSqr(l);if(f===0)return s.distSqr(n);const v=((s.x-n.x)*(l.x-n.x)+(s.y-n.y)*(l.y-n.y))/f;return s.distSqr(v<0?n:v>1?l:l.sub(n)._mult(v)._add(n))}function Vr(s,n){let l,f,v,C=!1;for(let E=0;E<s.length;E++){l=s[E];for(let T=0,M=l.length-1;T<l.length;M=T++)f=l[T],v=l[M],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(C=!C)}return C}function ui(s,n){let l=!1;for(let f=0,v=s.length-1;f<s.length;v=f++){const C=s[f],E=s[v];C.y>n.y!=E.y>n.y&&n.x<(E.x-C.x)*(n.y-C.y)/(E.y-C.y)+C.x&&(l=!l)}return l}function tl(s,n,l){const f=l[0],v=l[2];if(s.x<f.x&&n.x<f.x||s.x>v.x&&n.x>v.x||s.y<f.y&&n.y<f.y||s.y>v.y&&n.y>v.y)return!1;const C=$t(s,n,l[0]);return C!==$t(s,n,l[1])||C!==$t(s,n,l[2])||C!==$t(s,n,l[3])}function Sd(s,n,l){const f=n.paint.get(s).value;return f.kind==="constant"?f.value:l.programConfigurations.get(n.id).getMaxValue(s)}function Gf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wf(s,n,l,f,v){if(!n[0]&&!n[1])return s;const C=W.convert(n)._mult(v);l==="viewport"&&C._rotate(-f);const E=[];for(let T=0;T<s.length;T++)E.push(s[T].sub(C));return E}let cy,Zf;Gt("CircleBucket",Ap,{omit:["layers"]});var bt={get paint(){return Zf=Zf||new ji({"circle-radius":new dn(We.paint_circle["circle-radius"]),"circle-color":new dn(We.paint_circle["circle-color"]),"circle-blur":new dn(We.paint_circle["circle-blur"]),"circle-opacity":new dn(We.paint_circle["circle-opacity"]),"circle-translate":new an(We.paint_circle["circle-translate"]),"circle-translate-anchor":new an(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new an(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new an(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dn(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dn(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dn(We.paint_circle["circle-stroke-opacity"])})},get layout(){return cy=cy||new ji({"circle-sort-key":new dn(We.layout_circle["circle-sort-key"])})}},Dr=1e-6,En=typeof Float32Array<"u"?Float32Array:Array;function kc(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function nl(s,n,l){var f=n[0],v=n[1],C=n[2],E=n[3],T=n[4],M=n[5],V=n[6],F=n[7],H=n[8],Y=n[9],Q=n[10],ee=n[11],ue=n[12],ve=n[13],be=n[14],Me=n[15],Ee=l[0],Ve=l[1],qe=l[2],st=l[3];return s[0]=Ee*f+Ve*T+qe*H+st*ue,s[1]=Ee*v+Ve*M+qe*Y+st*ve,s[2]=Ee*C+Ve*V+qe*Q+st*be,s[3]=Ee*E+Ve*F+qe*ee+st*Me,s[4]=(Ee=l[4])*f+(Ve=l[5])*T+(qe=l[6])*H+(st=l[7])*ue,s[5]=Ee*v+Ve*M+qe*Y+st*ve,s[6]=Ee*C+Ve*V+qe*Q+st*be,s[7]=Ee*E+Ve*F+qe*ee+st*Me,s[8]=(Ee=l[8])*f+(Ve=l[9])*T+(qe=l[10])*H+(st=l[11])*ue,s[9]=Ee*v+Ve*M+qe*Y+st*ve,s[10]=Ee*C+Ve*V+qe*Q+st*be,s[11]=Ee*E+Ve*F+qe*ee+st*Me,s[12]=(Ee=l[12])*f+(Ve=l[13])*T+(qe=l[14])*H+(st=l[15])*ue,s[13]=Ee*v+Ve*M+qe*Y+st*ve,s[14]=Ee*C+Ve*V+qe*Q+st*be,s[15]=Ee*E+Ve*F+qe*ee+st*Me,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var Ao,rl=nl;function Mc(s,n,l){var f=n[0],v=n[1],C=n[2],E=n[3];return s[0]=l[0]*f+l[4]*v+l[8]*C+l[12]*E,s[1]=l[1]*f+l[5]*v+l[9]*C+l[13]*E,s[2]=l[2]*f+l[6]*v+l[10]*C+l[14]*E,s[3]=l[3]*f+l[7]*v+l[11]*C+l[15]*E,s}Ao=new En(4),En!=Float32Array&&(Ao[0]=0,Ao[1]=0,Ao[2]=0,Ao[3]=0);class Ed extends xa{constructor(n){super(n,bt)}createBucket(n){return new Ap(n)}queryRadius(n){const l=n;return Sd("circle-radius",this,l)+Sd("circle-stroke-width",this,l)+Gf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,f,v,C,E,T,M){const V=Wf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),F=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),H=this.paint.get("circle-pitch-alignment")==="map",Y=H?V:function(ee,ue){return ee.map(ve=>Dd(ve,ue))}(V,M),Q=H?F*T:F;for(const ee of v)for(const ue of ee){const ve=H?ue:Dd(ue,M);let be=Q;const Me=Mc([],[ue.x,ue.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Me[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=E.cameraToCenterDistance/Me[3]),b0(Y,ve,be))return!0}return!1}}function Dd(s,n){const l=Mc([],[s.x,s.y,0,1],n);return new W(l[0]/l[3],l[1]/l[3])}class Kf extends Ap{}let Yf;Gt("HeatmapBucket",Kf,{omit:["layers"]});var Ip={get paint(){return Yf=Yf||new ji({"heatmap-radius":new dn(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dn(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new an(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wu(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new an(We.paint_heatmap["heatmap-opacity"])})}};function Vh(s,{width:n,height:l},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*l*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*l*f}`)}else v=new Uint8Array(n*l*f);return s.width=n,s.height=l,s.data=v,s}function Xf(s,{width:n,height:l},f){if(n===s.width&&l===s.height)return;const v=Vh({},{width:n,height:l},f);Oh(s,v,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,l)},f),s.width=n,s.height=l,s.data=v.data}function Oh(s,n,l,f,v,C){if(v.width===0||v.height===0)return n;if(v.width>s.width||v.height>s.height||l.x>s.width-v.width||l.y>s.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const E=s.data,T=n.data;if(E===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<v.height;M++){const V=((l.y+M)*s.width+l.x)*C,F=((f.y+M)*n.width+f.x)*C;for(let H=0;H<v.width*C;H++)T[F+H]=E[V+H]}return n}class Du{constructor(n,l){Vh(this,n,1,l)}resize(n){Xf(this,n,1)}clone(){return new Du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,f,v,C){Oh(n,l,f,v,C,1)}}class na{constructor(n,l){Vh(this,n,4,l)}resize(n){Xf(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,f,v,C){Oh(n,l,f,v,C,4)}}function Jf(s){const n={},l=s.resolution||256,f=s.clips?s.clips.length:1,v=s.image||new na({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const C=(E,T,M)=>{n[s.evaluationKey]=M;const V=s.expression.evaluate(n);v.data[E+T+0]=Math.floor(255*V.r/V.a),v.data[E+T+1]=Math.floor(255*V.g/V.a),v.data[E+T+2]=Math.floor(255*V.b/V.a),v.data[E+T+3]=Math.floor(255*V.a)};if(s.clips)for(let E=0,T=0;E<f;++E,T+=4*l)for(let M=0,V=0;M<l;M++,V+=4){const F=M/(l-1),{start:H,end:Y}=s.clips[E];C(T,V,H*(1-F)+Y*F)}else for(let E=0,T=0;E<l;E++,T+=4)C(0,T,E/(l-1));return v}Gt("AlphaImage",Du),Gt("RGBAImage",na);class Vp extends xa{createBucket(n){return new Kf(n)}constructor(n){super(n,Ip),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Jf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qf;var Op={get paint(){return Qf=Qf||new ji({"hillshade-illumination-direction":new an(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new an(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new an(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new an(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new an(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new an(We.paint_hillshade["hillshade-accent-color"])})}};class zp extends xa{constructor(n){super(n,Op)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Bp=Ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fp}=Bp;var Td={exports:{}};function zl(s,n,l){l=l||2;var f,v,C,E,T,M,V,F=n&&n.length,H=F?n[0]*l:s.length,Y=em(s,0,H,l,!0),Q=[];if(!Y||Y.next===Y.prev)return Q;if(F&&(Y=function(ue,ve,be,Me){var Ee,Ve,qe,st=[];for(Ee=0,Ve=ve.length;Ee<Ve;Ee++)(qe=em(ue,ve[Ee]*Me,Ee<Ve-1?ve[Ee+1]*Me:ue.length,Me,!1))===qe.next&&(qe.steiner=!0),st.push(gi(qe));for(st.sort(Bh),Ee=0;Ee<st.length;Ee++)be=Pu(st[Ee],be);return be}(s,n,Y,l)),s.length>80*l){f=C=s[0],v=E=s[1];for(var ee=l;ee<H;ee+=l)(T=s[ee])<f&&(f=T),(M=s[ee+1])<v&&(v=M),T>C&&(C=T),M>E&&(E=M);V=(V=Math.max(C-f,E-v))!==0?32767/V:0}return Tu(Y,Q,l,f,v,V,0),Q}function em(s,n,l,f,v){var C,E;if(v===qp(s,n,l,f)>0)for(C=n;C<l;C+=f)E=fy(C,s[C],s[C+1],E);else for(C=l-f;C>=n;C-=f)E=fy(C,s[C],s[C+1],E);return E&&ju(E,E.next)&&(Au(E),E=E.next),E}function Bl(s,n){if(!s)return s;n||(n=s);var l,f=s;do if(l=!1,f.steiner||!ju(f,f.next)&&di(f.prev,f,f.next)!==0)f=f.next;else{if(Au(f),(f=n=f.prev)===f.next)break;l=!0}while(l||f!==n);return n}function Tu(s,n,l,f,v,C,E){if(s){!E&&C&&function(F,H,Y,Q){var ee=F;do ee.z===0&&(ee.z=$p(ee.x,ee.y,H,Y,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==F);ee.prevZ.nextZ=null,ee.prevZ=null,function(ue){var ve,be,Me,Ee,Ve,qe,st,It,Xt=1;do{for(be=ue,ue=null,Ve=null,qe=0;be;){for(qe++,Me=be,st=0,ve=0;ve<Xt&&(st++,Me=Me.nextZ);ve++);for(It=Xt;st>0||It>0&&Me;)st!==0&&(It===0||!Me||be.z<=Me.z)?(Ee=be,be=be.nextZ,st--):(Ee=Me,Me=Me.nextZ,It--),Ve?Ve.nextZ=Ee:ue=Ee,Ee.prevZ=Ve,Ve=Ee;be=Me}Ve.nextZ=null,Xt*=2}while(qe>1)}(ee)}(s,f,v,C);for(var T,M,V=s;s.prev!==s.next;)if(T=s.prev,M=s.next,C?uy(s,f,v,C):Up(s))n.push(T.i/l|0),n.push(s.i/l|0),n.push(M.i/l|0),Au(s),s=M.next,V=M.next;else if((s=M)===V){E?E===1?Tu(s=zh(Bl(s),n,l),n,l,f,v,C,2):E===2&&dy(s,n,l,f,v,C):Tu(Bl(s),n,l,f,v,C,1);break}}}function Up(s){var n=s.prev,l=s,f=s.next;if(di(n,l,f)>=0)return!1;for(var v=n.x,C=l.x,E=f.x,T=n.y,M=l.y,V=f.y,F=v<C?v<E?v:E:C<E?C:E,H=T<M?T<V?T:V:M<V?M:V,Y=v>C?v>E?v:E:C>E?C:E,Q=T>M?T>V?T:V:M>V?M:V,ee=f.next;ee!==n;){if(ee.x>=F&&ee.x<=Y&&ee.y>=H&&ee.y<=Q&&Fl(v,T,C,M,E,V,ee.x,ee.y)&&di(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function uy(s,n,l,f){var v=s.prev,C=s,E=s.next;if(di(v,C,E)>=0)return!1;for(var T=v.x,M=C.x,V=E.x,F=v.y,H=C.y,Y=E.y,Q=T<M?T<V?T:V:M<V?M:V,ee=F<H?F<Y?F:Y:H<Y?H:Y,ue=T>M?T>V?T:V:M>V?M:V,ve=F>H?F>Y?F:Y:H>Y?H:Y,be=$p(Q,ee,n,l,f),Me=$p(ue,ve,n,l,f),Ee=s.prevZ,Ve=s.nextZ;Ee&&Ee.z>=be&&Ve&&Ve.z<=Me;){if(Ee.x>=Q&&Ee.x<=ue&&Ee.y>=ee&&Ee.y<=ve&&Ee!==v&&Ee!==E&&Fl(T,F,M,H,V,Y,Ee.x,Ee.y)&&di(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,Ve.x>=Q&&Ve.x<=ue&&Ve.y>=ee&&Ve.y<=ve&&Ve!==v&&Ve!==E&&Fl(T,F,M,H,V,Y,Ve.x,Ve.y)&&di(Ve.prev,Ve,Ve.next)>=0))return!1;Ve=Ve.nextZ}for(;Ee&&Ee.z>=be;){if(Ee.x>=Q&&Ee.x<=ue&&Ee.y>=ee&&Ee.y<=ve&&Ee!==v&&Ee!==E&&Fl(T,F,M,H,V,Y,Ee.x,Ee.y)&&di(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;Ve&&Ve.z<=Me;){if(Ve.x>=Q&&Ve.x<=ue&&Ve.y>=ee&&Ve.y<=ve&&Ve!==v&&Ve!==E&&Fl(T,F,M,H,V,Y,Ve.x,Ve.y)&&di(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.nextZ}return!0}function zh(s,n,l){var f=s;do{var v=f.prev,C=f.next.next;!ju(v,C)&&hy(v,f,f.next,C)&&Fh(v,C)&&Fh(C,v)&&(n.push(v.i/l|0),n.push(f.i/l|0),n.push(C.i/l|0),Au(f),Au(f.next),f=s=C),f=f.next}while(f!==s);return Bl(f)}function dy(s,n,l,f,v,C){var E=s;do{for(var T=E.next.next;T!==E.prev;){if(E.i!==T.i&&tm(E,T)){var M=im(E,T);return E=Bl(E,E.next),M=Bl(M,M.next),Tu(E,n,l,f,v,C,0),void Tu(M,n,l,f,v,C,0)}T=T.next}E=E.next}while(E!==s)}function Bh(s,n){return s.x-n.x}function Pu(s,n){var l=function(v,C){var E,T=C,M=v.x,V=v.y,F=-1/0;do{if(V<=T.y&&V>=T.next.y&&T.next.y!==T.y){var H=T.x+(V-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=M&&H>F&&(F=H,E=T.x<T.next.x?T:T.next,H===M))return E}T=T.next}while(T!==C);if(!E)return null;var Y,Q=E,ee=E.x,ue=E.y,ve=1/0;T=E;do M>=T.x&&T.x>=ee&&M!==T.x&&Fl(V<ue?M:F,V,ee,ue,V<ue?F:M,V,T.x,T.y)&&(Y=Math.abs(V-T.y)/(M-T.x),Fh(T,v)&&(Y<ve||Y===ve&&(T.x>E.x||T.x===E.x&&za(E,T)))&&(E=T,ve=Y)),T=T.next;while(T!==Q);return E}(s,n);if(!l)return n;var f=im(l,s);return Bl(f,f.next),Bl(l,l.next)}function za(s,n){return di(s.prev,s,n.prev)<0&&di(n.next,s,s.next)<0}function $p(s,n,l,f,v){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*v|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function gi(s){var n=s,l=s;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==s);return l}function Fl(s,n,l,f,v,C,E,T){return(v-E)*(n-T)>=(s-E)*(C-T)&&(s-E)*(f-T)>=(l-E)*(n-T)&&(l-E)*(C-T)>=(v-E)*(f-T)}function tm(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(l,f){var v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==f.i&&v.next.i!==f.i&&hy(v,v.next,l,f))return!0;v=v.next}while(v!==l);return!1}(s,n)&&(Fh(s,n)&&Fh(n,s)&&function(l,f){var v=l,C=!1,E=(l.x+f.x)/2,T=(l.y+f.y)/2;do v.y>T!=v.next.y>T&&v.next.y!==v.y&&E<(v.next.x-v.x)*(T-v.y)/(v.next.y-v.y)+v.x&&(C=!C),v=v.next;while(v!==l);return C}(s,n)&&(di(s.prev,s,n.prev)||di(s,n.prev,n))||ju(s,n)&&di(s.prev,s,s.next)>0&&di(n.prev,n,n.next)>0)}function di(s,n,l){return(n.y-s.y)*(l.x-n.x)-(n.x-s.x)*(l.y-n.y)}function ju(s,n){return s.x===n.x&&s.y===n.y}function hy(s,n,l,f){var v=rm(di(s,n,l)),C=rm(di(s,n,f)),E=rm(di(l,f,s)),T=rm(di(l,f,n));return v!==C&&E!==T||!(v!==0||!nm(s,l,n))||!(C!==0||!nm(s,f,n))||!(E!==0||!nm(l,s,f))||!(T!==0||!nm(l,n,f))}function nm(s,n,l){return n.x<=Math.max(s.x,l.x)&&n.x>=Math.min(s.x,l.x)&&n.y<=Math.max(s.y,l.y)&&n.y>=Math.min(s.y,l.y)}function rm(s){return s>0?1:s<0?-1:0}function Fh(s,n){return di(s.prev,s,s.next)<0?di(s,n,s.next)>=0&&di(s,s.prev,n)>=0:di(s,n,s.prev)<0||di(s,s.next,n)<0}function im(s,n){var l=new sm(s.i,s.x,s.y),f=new sm(n.i,n.x,n.y),v=s.next,C=n.prev;return s.next=n,n.prev=s,l.next=v,v.prev=l,f.next=l,l.prev=f,C.next=f,f.prev=C,f}function fy(s,n,l,f){var v=new sm(s,n,l);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Au(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function sm(s,n,l){this.i=s,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qp(s,n,l,f){for(var v=0,C=n,E=l-f;C<l;C+=f)v+=(s[E]-s[C])*(s[C+1]+s[E+1]),E=C;return v}Td.exports=zl,Td.exports.default=zl,zl.deviation=function(s,n,l,f){var v=n&&n.length,C=Math.abs(qp(s,0,v?n[0]*l:s.length,l));if(v)for(var E=0,T=n.length;E<T;E++)C-=Math.abs(qp(s,n[E]*l,E<T-1?n[E+1]*l:s.length,l));var M=0;for(E=0;E<f.length;E+=3){var V=f[E]*l,F=f[E+1]*l,H=f[E+2]*l;M+=Math.abs((s[V]-s[H])*(s[F+1]-s[V+1])-(s[V]-s[F])*(s[H+1]-s[V+1]))}return C===0&&M===0?0:Math.abs((M-C)/C)},zl.flatten=function(s){for(var n=s[0][0].length,l={vertices:[],holes:[],dimensions:n},f=0,v=0;v<s.length;v++){for(var C=0;C<s[v].length;C++)for(var E=0;E<n;E++)l.vertices.push(s[v][C][E]);v>0&&l.holes.push(f+=s[v-1].length)}return l};var my=k(Td.exports);function am(s,n,l,f,v){py(s,n,l,f||s.length-1,v||gy)}function py(s,n,l,f,v){for(;f>l;){if(f-l>600){var C=f-l+1,E=n-l+1,T=Math.log(C),M=.5*Math.exp(2*T/3),V=.5*Math.sqrt(T*M*(C-M)/C)*(E-C/2<0?-1:1);py(s,n,Math.max(l,Math.floor(n-E*M/C+V)),Math.min(f,Math.floor(n+(C-E)*M/C+V)),v)}var F=s[n],H=l,Y=f;for(Pd(s,l,n),v(s[f],F)>0&&Pd(s,l,f);H<Y;){for(Pd(s,H,Y),H++,Y--;v(s[H],F)<0;)H++;for(;v(s[Y],F)>0;)Y--}v(s[l],F)===0?Pd(s,l,Y):Pd(s,++Y,f),Y<=n&&(l=Y+1),n<=Y&&(f=Y-1)}}function Pd(s,n,l){var f=s[n];s[n]=s[l],s[l]=f}function gy(s,n){return s<n?-1:s>n?1:0}function Hp(s,n){const l=s.length;if(l<=1)return[s];const f=[];let v,C;for(let E=0;E<l;E++){const T=An(s[E]);T!==0&&(s[E].area=Math.abs(T),C===void 0&&(C=T<0),C===T<0?(v&&f.push(v),v=[s[E]]):v.push(s[E]))}if(v&&f.push(v),n>1)for(let E=0;E<f.length;E++)f[E].length<=n||(am(f[E],n,1,f[E].length-1,ku),f[E]=f[E].slice(0,n));return f}function ku(s,n){return n.area-s.area}function Mu(s,n,l){const f=l.patternDependencies;let v=!1;for(const C of n){const E=C.paint.get(`${s}-pattern`);E.isConstant()||(v=!0);const T=E.constantOr(null);T&&(v=!0,f[T.to]=!0,f[T.from]=!0)}return v}function Ul(s,n,l,f,v){const C=v.patternDependencies;for(const E of n){const T=E.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:f-1},l,{},v.availableImages),V=T.evaluate({zoom:f},l,{},v.availableImages),F=T.evaluate({zoom:f+1},l,{},v.availableImages);M=M&&M.name?M.name:M,V=V&&V.name?V.name:V,F=F&&F.name?F.name:F,C[M]=!0,C[V]=!0,C[F]=!0,l.patterns[E.id]={min:M,mid:V,max:F}}}return l}class Uh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xn,this.indexArray=new gr,this.indexArray2=new Fi,this.programConfigurations=new jo(n.layers,n.zoom),this.segments=new Nr,this.segments2=new Nr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.hasPattern=Mu("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),C=!v.isConstant(),E=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of n){const H=this.layers[0]._featureFilter.needGeometry,Y=Eu(T,H);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Y,f))continue;const Q=C?v.evaluate(Y,{},f,l.availableImages):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:Su(T),patterns:{},sortKey:Q};E.push(ee)}C&&E.sort((T,M)=>T.sortKey-M.sortKey);for(const T of E){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=Ul("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});l.featureIndex.insert(n[V].feature,M,V,F,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}addFeatures(n,l,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Fp),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,f,v,C){for(const E of Hp(l,500)){let T=0;for(const Q of E)T+=Q.length;const M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),V=M.vertexLength,F=[],H=[];for(const Q of E){if(Q.length===0)continue;Q!==E[0]&&H.push(F.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ue=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ue+Q.length-1,ue),F.push(Q[0].x),F.push(Q[0].y);for(let ve=1;ve<Q.length;ve++)this.layoutVertexArray.emplaceBack(Q[ve].x,Q[ve].y),this.indexArray2.emplaceBack(ue+ve-1,ue+ve),F.push(Q[ve].x),F.push(Q[ve].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const Y=my(F,H);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(V+Y[Q],V+Y[Q+1],V+Y[Q+2]);M.vertexLength+=T,M.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,v)}}let Ea,Ru;Gt("FillBucket",Uh,{omit:["layers","patternFeatures"]});var Qn={get paint(){return Ru=Ru||new ji({"fill-antialias":new an(We.paint_fill["fill-antialias"]),"fill-opacity":new dn(We.paint_fill["fill-opacity"]),"fill-color":new dn(We.paint_fill["fill-color"]),"fill-outline-color":new dn(We.paint_fill["fill-outline-color"]),"fill-translate":new an(We.paint_fill["fill-translate"]),"fill-translate-anchor":new an(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qo(We.paint_fill["fill-pattern"])})},get layout(){return Ea=Ea||new ji({"fill-sort-key":new dn(We.layout_fill["fill-sort-key"])})}};class om extends xa{constructor(n){super(n,Qn)}recalculate(n,l){super.recalculate(n,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Uh(n)}queryRadius(){return Gf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,f,v,C,E,T){return Mp(Wf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),v)}isTileClipped(){return!0}}const vy=Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tS=Ir([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_0}=vy;var il={},$h=O,yy=Lu;function Lu(s,n,l,f,v){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=f,this._values=v,s.readFields(w0,this,n)}function w0(s,n,l){s==1?n.id=l.readVarint():s==2?function(f,v){for(var C=f.readVarint()+f.pos;f.pos<C;){var E=v._keys[f.readVarint()],T=v._values[f.readVarint()];v.properties[E]=T}}(l,n):s==3?n.type=l.readVarint():s==4&&(n._geometry=l.pos)}function Gp(s){for(var n,l,f=0,v=0,C=s.length,E=C-1;v<C;E=v++)f+=((l=s[E]).x-(n=s[v]).x)*(n.y+l.y);return f}Lu.types=["Unknown","Point","LineString","Polygon"],Lu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,l=s.readVarint()+s.pos,f=1,v=0,C=0,E=0,T=[];s.pos<l;){if(v<=0){var M=s.readVarint();f=7&M,v=M>>3}if(v--,f===1||f===2)C+=s.readSVarint(),E+=s.readSVarint(),f===1&&(n&&T.push(n),n=[]),n.push(new $h(C,E));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&T.push(n),T},Lu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,l=1,f=0,v=0,C=0,E=1/0,T=-1/0,M=1/0,V=-1/0;s.pos<n;){if(f<=0){var F=s.readVarint();l=7&F,f=F>>3}if(f--,l===1||l===2)(v+=s.readSVarint())<E&&(E=v),v>T&&(T=v),(C+=s.readSVarint())<M&&(M=C),C>V&&(V=C);else if(l!==7)throw new Error("unknown command "+l)}return[E,M,T,V]},Lu.prototype.toGeoJSON=function(s,n,l){var f,v,C=this.extent*Math.pow(2,l),E=this.extent*s,T=this.extent*n,M=this.loadGeometry(),V=Lu.types[this.type];function F(Q){for(var ee=0;ee<Q.length;ee++){var ue=Q[ee];Q[ee]=[360*(ue.x+E)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+T)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(f=0;f<M.length;f++)H[f]=M[f][0];F(M=H);break;case 2:for(f=0;f<M.length;f++)F(M[f]);break;case 3:for(M=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var ue,ve,be=[],Me=0;Me<ee;Me++){var Ee=Gp(Q[Me]);Ee!==0&&(ve===void 0&&(ve=Ee<0),ve===Ee<0?(ue&&be.push(ue),ue=[Q[Me]]):ue.push(Q[Me]))}return ue&&be.push(ue),be}(M),f=0;f<M.length;f++)for(v=0;v<M[f].length;v++)F(M[f][v])}M.length===1?M=M[0]:V="Multi"+V;var Y={type:"Feature",geometry:{type:V,coordinates:M},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var C0=yy,Wp=Zp;function Zp(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(by,this,n),this.length=this._features.length}function by(s,n,l){s===15?n.version=l.readVarint():s===1?n.name=l.readString():s===5?n.extent=l.readVarint():s===2?n._features.push(l.pos):s===3?n._keys.push(l.readString()):s===4&&n._values.push(function(f){for(var v=null,C=f.readVarint()+f.pos;f.pos<C;){var E=f.readVarint()>>3;v=E===1?f.readString():E===2?f.readFloat():E===3?f.readDouble():E===4?f.readVarint64():E===5?f.readVarint():E===6?f.readSVarint():E===7?f.readBoolean():null}return v}(l))}Zp.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new C0(this._pbf,n,this.extent,this._keys,this._values)};var Ba=Wp;function $l(s,n,l){if(s===3){var f=new Ba(l,l.readVarint()+l.pos);f.length&&(n[f.name]=f)}}il.VectorTile=function(s,n){this.layers=s.readFields($l,{},n)},il.VectorTileFeature=yy,il.VectorTileLayer=Wp;const ql=il.VectorTileFeature.types,jd=Math.pow(2,13);function Hl(s,n,l,f,v,C,E,T){s.emplaceBack(n,l,2*Math.floor(f*jd)+E,v*jd*2,C*jd*2,Math.round(T))}class Fa{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new At,this.centroidVertexArray=new wt,this.indexArray=new gr,this.programConfigurations=new jo(n.layers,n.zoom),this.segments=new Nr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.features=[],this.hasPattern=Mu("fill-extrusion",this.layers,l);for(const{feature:v,id:C,index:E,sourceLayerIndex:T}of n){const M=this.layers[0]._featureFilter.needGeometry,V=Eu(v,M);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),V,f))continue;const F={id:C,sourceLayerIndex:T,index:E,geometry:M?V.geometry:Su(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Ul("fill-extrusion",this.layers,F,this.zoom,l)):this.addFeature(F,F.geometry,E,f,{}),l.featureIndex.insert(v,F.geometry,E,T,this.index,!0)}}addFeatures(n,l,f){for(const v of this.features){const{geometry:C}=v;this.addFeature(v,C,v.index,l,f)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_0),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,tS.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,f,v,C){const E={x:0,y:0,vertexCount:0};for(const T of Hp(l,500)){let M=0;for(const ee of T)M+=ee.length;let V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of T){if(ee.length===0||N0(ee))continue;let ue=0;for(let ve=0;ve<ee.length;ve++){const be=ee[ve];if(ve>=1){const Me=ee[ve-1];if(!ys(be,Me)){V.vertexLength+4>Nr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ee=be.sub(Me)._perp()._unit(),Ve=Me.dist(be);ue+Ve>32768&&(ue=0),Hl(this.layoutVertexArray,be.x,be.y,Ee.x,Ee.y,0,0,ue),Hl(this.layoutVertexArray,be.x,be.y,Ee.x,Ee.y,0,1,ue),E.x+=2*be.x,E.y+=2*be.y,E.vertexCount+=2,ue+=Ve,Hl(this.layoutVertexArray,Me.x,Me.y,Ee.x,Ee.y,0,0,ue),Hl(this.layoutVertexArray,Me.x,Me.y,Ee.x,Ee.y,0,1,ue),E.x+=2*Me.x,E.y+=2*Me.y,E.vertexCount+=2;const qe=V.vertexLength;this.indexArray.emplaceBack(qe,qe+2,qe+1),this.indexArray.emplaceBack(qe+1,qe+2,qe+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+M>Nr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),ql[n.type]!=="Polygon")continue;const F=[],H=[],Y=V.vertexLength;for(const ee of T)if(ee.length!==0){ee!==T[0]&&H.push(F.length/2);for(let ue=0;ue<ee.length;ue++){const ve=ee[ue];Hl(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),E.x+=ve.x,E.y+=ve.y,E.vertexCount+=1,F.push(ve.x),F.push(ve.y)}}const Q=my(F,H);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(Y+Q[ee],Y+Q[ee+2],Y+Q[ee+1]);V.primitiveLength+=Q.length/3,V.vertexLength+=M}for(let T=0;T<E.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(E.x/E.vertexCount),Math.floor(E.y/E.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,v)}}function ys(s,n){return s.x===n.x&&(s.x<0||s.x>ki)||s.y===n.y&&(s.y<0||s.y>ki)}function N0(s){return s.every(n=>n.x<0)||s.every(n=>n.x>ki)||s.every(n=>n.y<0)||s.every(n=>n.y>ki)}let xy;Gt("FillExtrusionBucket",Fa,{omit:["layers","features"]});var S0={get paint(){return xy=xy||new ji({"fill-extrusion-opacity":new an(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dn(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new an(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new an(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qo(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dn(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dn(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new an(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kp extends xa{constructor(n){super(n,S0)}createBucket(n){return new Fa(n)}queryRadius(){return Gf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,f,v,C,E,T,M){const V=Wf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),F=this.paint.get("fill-extrusion-height").evaluate(l,f),H=this.paint.get("fill-extrusion-base").evaluate(l,f),Y=function(ee,ue,ve,be){const Me=[];for(const Ee of ee){const Ve=[Ee.x,Ee.y,0,1];Mc(Ve,Ve,ue),Me.push(new W(Ve[0]/Ve[3],Ve[1]/Ve[3]))}return Me}(V,M),Q=function(ee,ue,ve,be){const Me=[],Ee=[],Ve=be[8]*ue,qe=be[9]*ue,st=be[10]*ue,It=be[11]*ue,Xt=be[8]*ve,Vt=be[9]*ve,kt=be[10]*ve,Et=be[11]*ve;for(const xt of ee){const Dt=[],vt=[];for(const ln of xt){const tn=ln.x,$n=ln.y,Fr=be[0]*tn+be[4]*$n+be[12],zr=be[1]*tn+be[5]*$n+be[13],$i=be[2]*tn+be[6]*$n+be[14],Ps=be[3]*tn+be[7]*$n+be[15],qi=$i+st,Oi=Ps+It,ns=Fr+Xt,_s=zr+Vt,Ks=$i+kt,Zr=Ps+Et,yi=new W((Fr+Ve)/Oi,(zr+qe)/Oi);yi.z=qi/Oi,Dt.push(yi);const Si=new W(ns/Zr,_s/Zr);Si.z=Ks/Zr,vt.push(Si)}Me.push(Dt),Ee.push(vt)}return[Me,Ee]}(v,H,F,M);return function(ee,ue,ve){let be=1/0;Mp(ve,ue)&&(be=qh(ve,ue[0]));for(let Me=0;Me<ue.length;Me++){const Ee=ue[Me],Ve=ee[Me];for(let qe=0;qe<Ee.length-1;qe++){const st=Ee[qe],It=[st,Ee[qe+1],Ve[qe+1],Ve[qe],st];kp(ve,It)&&(be=Math.min(be,qh(ve,It)))}}return be!==1/0&&be}(Q[0],Q[1],Y)}}function Ad(s,n){return s.x*n.x+s.y*n.y}function qh(s,n){if(s.length===1){let l=0;const f=n[l++];let v;for(;!v||f.equals(v);)if(v=n[l++],!v)return 1/0;for(;l<n.length;l++){const C=n[l],E=s[0],T=v.sub(f),M=C.sub(f),V=E.sub(f),F=Ad(T,T),H=Ad(T,M),Y=Ad(M,M),Q=Ad(V,T),ee=Ad(V,M),ue=F*Y-H*H,ve=(Y*Q-H*ee)/ue,be=(F*ee-H*Q)/ue,Me=f.z*(1-ve-be)+v.z*ve+C.z*be;if(isFinite(Me))return Me}return 1/0}{let l=1/0;for(const f of n)l=Math.min(l,f.z);return l}}const _y=Ir([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:E0}=_y,D0=Ir([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yp}=D0,T0=il.VectorTileFeature.types,wy=Math.cos(Math.PI/180*37.5),Cy=Math.pow(2,14)/.5;class lm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new mn,this.layoutVertexArray2=new en,this.indexArray=new gr,this.programConfigurations=new jo(n.layers,n.zoom),this.segments=new Nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.hasPattern=Mu("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),C=!v.isConstant(),E=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of n){const H=this.layers[0]._featureFilter.needGeometry,Y=Eu(T,H);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Y,f))continue;const Q=C?v.evaluate(Y,{},f):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:Su(T),patterns:{},sortKey:Q};E.push(ee)}C&&E.sort((T,M)=>T.sortKey-M.sortKey);for(const T of E){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=Ul("line",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});l.featureIndex.insert(n[V].feature,M,V,F,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}addFeatures(n,l,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Yp)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,E0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,f,v,C){const E=this.layers[0].layout,T=E.get("line-join").evaluate(n,{}),M=E.get("line-cap"),V=E.get("line-miter-limit"),F=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const H of l)this.addLine(H,n,T,M,V,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,v)}addLine(n,l,f,v,C,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<n.length-1;be++)this.totalDistance+=n[be].dist(n[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=T0[l.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let V=0;for(;V<M-1&&n[V].equals(n[V+1]);)V++;if(M<(T?3:2))return;f==="bevel"&&(C=1.05);const F=this.overscaling<=16?15*ki/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let Y,Q,ee,ue,ve;this.e1=this.e2=-1,T&&(Y=n[M-2],ve=n[V].sub(Y)._unit()._perp());for(let be=V;be<M;be++){if(ee=be===M-1?T?n[V+1]:void 0:n[be+1],ee&&n[be].equals(ee))continue;ve&&(ue=ve),Y&&(Q=Y),Y=n[be],ve=ee?ee.sub(Y)._unit()._perp():ue,ue=ue||ve;let Me=ue.add(ve);Me.x===0&&Me.y===0||Me._unit();const Ee=ue.x*ve.x+ue.y*ve.y,Ve=Me.x*ve.x+Me.y*ve.y,qe=Ve!==0?1/Ve:1/0,st=2*Math.sqrt(2-2*Ve),It=Ve<wy&&Q&&ee,Xt=ue.x*ve.y-ue.y*ve.x>0;if(It&&be>V){const Et=Y.dist(Q);if(Et>2*F){const xt=Y.sub(Y.sub(Q)._mult(F/Et)._round());this.updateDistance(Q,xt),this.addCurrentVertex(xt,ue,0,0,H),Q=xt}}const Vt=Q&&ee;let kt=Vt?f:T?"butt":v;if(Vt&&kt==="round"&&(qe<E?kt="miter":qe<=2&&(kt="fakeround")),kt==="miter"&&qe>C&&(kt="bevel"),kt==="bevel"&&(qe>2&&(kt="flipbevel"),qe<C&&(kt="miter")),Q&&this.updateDistance(Q,Y),kt==="miter")Me._mult(qe),this.addCurrentVertex(Y,Me,0,0,H);else if(kt==="flipbevel"){if(qe>100)Me=ve.mult(-1);else{const Et=qe*ue.add(ve).mag()/ue.sub(ve).mag();Me._perp()._mult(Et*(Xt?-1:1))}this.addCurrentVertex(Y,Me,0,0,H),this.addCurrentVertex(Y,Me.mult(-1),0,0,H)}else if(kt==="bevel"||kt==="fakeround"){const Et=-Math.sqrt(qe*qe-1),xt=Xt?Et:0,Dt=Xt?0:Et;if(Q&&this.addCurrentVertex(Y,ue,xt,Dt,H),kt==="fakeround"){const vt=Math.round(180*st/Math.PI/20);for(let ln=1;ln<vt;ln++){let tn=ln/vt;if(tn!==.5){const Fr=tn-.5;tn+=tn*Fr*(tn-1)*((1.0904+Ee*(Ee*(3.55645-1.43519*Ee)-3.2452))*Fr*Fr+(.848013+Ee*(.215638*Ee-1.06021)))}const $n=ve.sub(ue)._mult(tn)._add(ue)._unit()._mult(Xt?-1:1);this.addHalfVertex(Y,$n.x,$n.y,!1,Xt,0,H)}}ee&&this.addCurrentVertex(Y,ve,-xt,-Dt,H)}else if(kt==="butt")this.addCurrentVertex(Y,Me,0,0,H);else if(kt==="square"){const Et=Q?1:-1;this.addCurrentVertex(Y,Me,Et,Et,H)}else kt==="round"&&(Q&&(this.addCurrentVertex(Y,ue,0,0,H),this.addCurrentVertex(Y,ue,1,1,H,!0)),ee&&(this.addCurrentVertex(Y,ve,-1,-1,H,!0),this.addCurrentVertex(Y,ve,0,0,H)));if(It&&be<M-1){const Et=Y.dist(ee);if(Et>2*F){const xt=Y.add(ee.sub(Y)._mult(F/Et)._round());this.updateDistance(Y,xt),this.addCurrentVertex(xt,ve,0,0,H),Y=xt}}}}addCurrentVertex(n,l,f,v,C,E=!1){const T=l.y*v-l.x,M=-l.y-l.x*v;this.addHalfVertex(n,l.x+l.y*f,l.y-l.x*f,E,!1,f,C),this.addHalfVertex(n,T,M,E,!0,-v,C),this.distance>Cy/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,f,v,C,E))}addHalfVertex({x:n,y:l},f,v,C,E,T,M){const V=.5*(this.lineClips?this.scaledDistance*(Cy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(C?1:0),(l<<1)+(E?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(T===0?0:T<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),M.primitiveLength++),E?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let Ny,Xp;Gt("LineBucket",lm,{omit:["layers","patternFeatures"]});var Sy={get paint(){return Xp=Xp||new ji({"line-opacity":new dn(We.paint_line["line-opacity"]),"line-color":new dn(We.paint_line["line-color"]),"line-translate":new an(We.paint_line["line-translate"]),"line-translate-anchor":new an(We.paint_line["line-translate-anchor"]),"line-width":new dn(We.paint_line["line-width"]),"line-gap-width":new dn(We.paint_line["line-gap-width"]),"line-offset":new dn(We.paint_line["line-offset"]),"line-blur":new dn(We.paint_line["line-blur"]),"line-dasharray":new jc(We.paint_line["line-dasharray"]),"line-pattern":new Qo(We.paint_line["line-pattern"]),"line-gradient":new wu(We.paint_line["line-gradient"])})},get layout(){return Ny=Ny||new ji({"line-cap":new an(We.layout_line["line-cap"]),"line-join":new dn(We.layout_line["line-join"]),"line-miter-limit":new an(We.layout_line["line-miter-limit"]),"line-round-limit":new an(We.layout_line["line-round-limit"]),"line-sort-key":new dn(We.layout_line["line-sort-key"])})}};class Jp extends dn{possiblyEvaluate(n,l){return l=new ti(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,f,v){return l=ut({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,f,v)}}let Iu;class Rc extends xa{constructor(n){super(n,Sy),this.gradientVersion=0,Iu||(Iu=new Jp(Sy.paint.properties["line-width"].specification),Iu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Iu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new lm(n)}queryRadius(n){const l=n,f=Gl(Sd("line-width",this,l),Sd("line-gap-width",this,l)),v=Sd("line-offset",this,l);return f/2+Math.abs(v)+Gf(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,f,v,C,E,T){const M=Wf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),V=T/2*Gl(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),F=this.paint.get("line-offset").evaluate(l,f);return F&&(v=function(H,Y){const Q=[];for(let ee=0;ee<H.length;ee++){const ue=H[ee],ve=[];for(let be=0;be<ue.length;be++){const Me=ue[be-1],Ee=ue[be],Ve=ue[be+1],qe=be===0?new W(0,0):Ee.sub(Me)._unit()._perp(),st=be===ue.length-1?new W(0,0):Ve.sub(Ee)._unit()._perp(),It=qe._add(st)._unit(),Xt=It.x*st.x+It.y*st.y;Xt!==0&&It._mult(1/Xt),ve.push(It._mult(Y)._add(Ee))}Q.push(ve)}return Q}(v,F*T)),function(H,Y,Q){for(let ee=0;ee<Y.length;ee++){const ue=Y[ee];if(H.length>=3){for(let ve=0;ve<ue.length;ve++)if(ui(H,ue[ve]))return!0}if(x0(H,ue,Q))return!0}return!1}(M,v,V)}isTileClipped(){return!0}}function Gl(s,n){return n>0?n+2*s:s}const Lc=Ir([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hh=Ir([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ir([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Gh=Ir([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ir([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Wl=Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),P0=Ir([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function j0(s,n,l){return s.sections.forEach(f=>{f.text=function(v,C,E){const T=C.layout.get("text-transform").evaluate(E,{});return T==="uppercase"?v=v.toLocaleUpperCase():T==="lowercase"&&(v=v.toLocaleLowerCase()),Gs.applyArabicShaping&&(v=Gs.applyArabicShaping(v)),v}(f.text,n,l)}),s}Ir([{name:"triangle",components:3,type:"Uint16"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ir([{type:"Float32",name:"offsetX"}]),Ir([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ir([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Vi=24,kd=Or,Ey=function(s,n,l,f,v){var C,E,T=8*v-f-1,M=(1<<T)-1,V=M>>1,F=-7,H=v-1,Y=-1,Q=s[n+H];for(H+=Y,C=Q&(1<<-F)-1,Q>>=-F,F+=T;F>0;C=256*C+s[n+H],H+=Y,F-=8);for(E=C&(1<<-F)-1,C>>=-F,F+=f;F>0;E=256*E+s[n+H],H+=Y,F-=8);if(C===0)C=1-V;else{if(C===M)return E?NaN:1/0*(Q?-1:1);E+=Math.pow(2,f),C-=V}return(Q?-1:1)*E*Math.pow(2,C-f)},Qp=function(s,n,l,f,v,C){var E,T,M,V=8*C-v-1,F=(1<<V)-1,H=F>>1,Y=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,ee=1,ue=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,E=F):(E=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-E))<1&&(E--,M*=2),(n+=E+H>=1?Y/M:Y*Math.pow(2,1-H))*M>=2&&(E++,M/=2),E+H>=F?(T=0,E=F):E+H>=1?(T=(n*M-1)*Math.pow(2,v),E+=H):(T=n*Math.pow(2,H-1)*Math.pow(2,v),E=0));v>=8;s[l+Q]=255&T,Q+=ee,T/=256,v-=8);for(E=E<<v|T,V+=v;V>0;s[l+Q]=255&E,Q+=ee,E/=256,V-=8);s[l+Q-ee]|=128*ue};function Or(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Or.Varint=0,Or.Fixed64=1,Or.Bytes=2,Or.Fixed32=5;var Md=4294967296,eg=1/Md,Dy=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ua(s){return s.type===Or.Bytes?s.readVarint()+s.pos:s.pos+1}function sl(s,n,l){return l?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function Vu(s,n,l){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(f);for(var v=l.pos-1;v>=s;v--)l.buf[v+f]=l.buf[v]}function tg(s,n){for(var l=0;l<s.length;l++)n.writeVarint(s[l])}function Ty(s,n){for(var l=0;l<s.length;l++)n.writeSVarint(s[l])}function A0(s,n){for(var l=0;l<s.length;l++)n.writeFloat(s[l])}function k0(s,n){for(var l=0;l<s.length;l++)n.writeDouble(s[l])}function M0(s,n){for(var l=0;l<s.length;l++)n.writeBoolean(s[l])}function R0(s,n){for(var l=0;l<s.length;l++)n.writeFixed32(s[l])}function ng(s,n){for(var l=0;l<s.length;l++)n.writeSFixed32(s[l])}function L0(s,n){for(var l=0;l<s.length;l++)n.writeFixed64(s[l])}function cm(s,n){for(var l=0;l<s.length;l++)n.writeSFixed64(s[l])}function Rd(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function Ou(s,n,l){s[l]=n,s[l+1]=n>>>8,s[l+2]=n>>>16,s[l+3]=n>>>24}function Py(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}Or.prototype={destroy:function(){this.buf=null},readFields:function(s,n,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),v=f>>3,C=this.pos;this.type=7&f,s(v,n,this),this.pos===C&&this.skip(f)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=Rd(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Py(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Rd(this.buf,this.pos)+Rd(this.buf,this.pos+4)*Md;return this.pos+=8,s},readSFixed64:function(){var s=Rd(this.buf,this.pos)+Py(this.buf,this.pos+4)*Md;return this.pos+=8,s},readFloat:function(){var s=Ey(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Ey(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,l,f=this.buf;return n=127&(l=f[this.pos++]),l<128?n:(n|=(127&(l=f[this.pos++]))<<7,l<128?n:(n|=(127&(l=f[this.pos++]))<<14,l<128?n:(n|=(127&(l=f[this.pos++]))<<21,l<128?n:function(v,C,E){var T,M,V=E.buf;if(T=(112&(M=V[E.pos++]))>>4,M<128||(T|=(127&(M=V[E.pos++]))<<3,M<128)||(T|=(127&(M=V[E.pos++]))<<10,M<128)||(T|=(127&(M=V[E.pos++]))<<17,M<128)||(T|=(127&(M=V[E.pos++]))<<24,M<128)||(T|=(1&(M=V[E.pos++]))<<31,M<128))return sl(v,T,C);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=f[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&Dy?function(l,f,v){return Dy.decode(l.subarray(f,v))}(this.buf,n,s):function(l,f,v){for(var C="",E=f;E<v;){var T,M,V,F=l[E],H=null,Y=F>239?4:F>223?3:F>191?2:1;if(E+Y>v)break;Y===1?F<128&&(H=F):Y===2?(192&(T=l[E+1]))==128&&(H=(31&F)<<6|63&T)<=127&&(H=null):Y===3?(M=l[E+2],(192&(T=l[E+1]))==128&&(192&M)==128&&((H=(15&F)<<12|(63&T)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(M=l[E+2],V=l[E+3],(192&(T=l[E+1]))==128&&(192&M)==128&&(192&V)==128&&((H=(15&F)<<18|(63&T)<<12|(63&M)<<6|63&V)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,C+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),C+=String.fromCharCode(H),E+=Y}return C}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==Or.Bytes)return s.push(this.readVarint(n));var l=Ua(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==Or.Bytes)return s.push(this.readSVarint());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Or.Bytes)return s.push(this.readBoolean());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Or.Bytes)return s.push(this.readFloat());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Or.Bytes)return s.push(this.readDouble());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Or.Bytes)return s.push(this.readFixed32());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Or.Bytes)return s.push(this.readSFixed32());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Or.Bytes)return s.push(this.readFixed64());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Or.Bytes)return s.push(this.readSFixed64());var n=Ua(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===Or.Varint)for(;this.buf[this.pos++]>127;);else if(n===Or.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Or.Fixed32)this.pos+=4;else{if(n!==Or.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Ou(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Ou(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Ou(this.buf,-1&s,this.pos),Ou(this.buf,Math.floor(s*eg),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Ou(this.buf,-1&s,this.pos),Ou(this.buf,Math.floor(s*eg),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,l){var f,v;if(n>=0?(f=n%4294967296|0,v=n/4294967296|0):(v=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,v=v+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(C,E,T){T.buf[T.pos++]=127&C|128,C>>>=7,T.buf[T.pos++]=127&C|128,C>>>=7,T.buf[T.pos++]=127&C|128,C>>>=7,T.buf[T.pos++]=127&C|128,T.buf[T.pos]=127&(C>>>=7)}(f,0,l),function(C,E){var T=(7&C)<<4;E.buf[E.pos++]|=T|((C>>>=3)?128:0),C&&(E.buf[E.pos++]=127&C|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=127&C|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=127&C|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=127&C|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=127&C)))))}(v,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(f,v,C){for(var E,T,M=0;M<v.length;M++){if((E=v.charCodeAt(M))>55295&&E<57344){if(!T){E>56319||M+1===v.length?(f[C++]=239,f[C++]=191,f[C++]=189):T=E;continue}if(E<56320){f[C++]=239,f[C++]=191,f[C++]=189,T=E;continue}E=T-55296<<10|E-56320|65536,T=null}else T&&(f[C++]=239,f[C++]=191,f[C++]=189,T=null);E<128?f[C++]=E:(E<2048?f[C++]=E>>6|192:(E<65536?f[C++]=E>>12|224:(f[C++]=E>>18|240,f[C++]=E>>12&63|128),f[C++]=E>>6&63|128),f[C++]=63&E|128)}return C}(this.buf,s,this.pos);var l=this.pos-n;l>=128&&Vu(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),Qp(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Qp(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,n){this.pos++;var l=this.pos;s(n,this);var f=this.pos-l;f>=128&&Vu(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(s,n,l){this.writeTag(s,Or.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,tg,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,Ty,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,M0,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,A0,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,k0,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,R0,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,ng,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,L0,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,cm,n)},writeBytesField:function(s,n){this.writeTag(s,Or.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,Or.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,Or.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,Or.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,Or.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,Or.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,Or.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,Or.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,Or.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,Or.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var rg=k(kd);const ig=3;function I0(s,n,l){s===1&&l.readMessage(Zh,n)}function Zh(s,n,l){if(s===3){const{id:f,bitmap:v,width:C,height:E,left:T,top:M,advance:V}=l.readMessage(sg,{});n.push({id:f,bitmap:new Du({width:C+2*ig,height:E+2*ig},v),metrics:{width:C,height:E,left:T,top:M,advance:V}})}}function sg(s,n,l){s===1?n.id=l.readVarint():s===2?n.bitmap=l.readBytes():s===3?n.width=l.readVarint():s===4?n.height=l.readVarint():s===5?n.left=l.readSVarint():s===6?n.top=l.readSVarint():s===7&&(n.advance=l.readVarint())}const Ld=ig;function jy(s){let n=0,l=0;for(const E of s)n+=E.w*E.h,l=Math.max(l,E.w);s.sort((E,T)=>T.h-E.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let v=0,C=0;for(const E of s)for(let T=f.length-1;T>=0;T--){const M=f[T];if(!(E.w>M.w||E.h>M.h)){if(E.x=M.x,E.y=M.y,C=Math.max(C,E.y+E.h),v=Math.max(v,E.x+E.w),E.w===M.w&&E.h===M.h){const V=f.pop();T<f.length&&(f[T]=V)}else E.h===M.h?(M.x+=E.w,M.w-=E.w):E.w===M.w?(M.y+=E.h,M.h-=E.h):(f.push({x:M.x+E.w,y:M.y,w:M.w-E.w,h:E.h}),M.y+=E.h,M.h-=E.h);break}}return{w:v,h:C,fill:n/(v*C)||0}}const ra=1;class um{constructor(n,{pixelRatio:l,version:f,stretchX:v,stretchY:C,content:E}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=v,this.stretchY=C,this.content=E,this.version=f}get tl(){return[this.paddedRect.x+ra,this.paddedRect.y+ra]}get br(){return[this.paddedRect.x+this.paddedRect.w-ra,this.paddedRect.y+this.paddedRect.h-ra]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ra)/this.pixelRatio,(this.paddedRect.h-2*ra)/this.pixelRatio]}}class ag{constructor(n,l){const f={},v={};this.haveRenderCallbacks=[];const C=[];this.addImages(n,f,C),this.addImages(l,v,C);const{w:E,h:T}=jy(C),M=new na({width:E||1,height:T||1});for(const V in n){const F=n[V],H=f[V].paddedRect;na.copy(F.data,M,{x:0,y:0},{x:H.x+ra,y:H.y+ra},F.data)}for(const V in l){const F=l[V],H=v[V].paddedRect,Y=H.x+ra,Q=H.y+ra,ee=F.data.width,ue=F.data.height;na.copy(F.data,M,{x:0,y:0},{x:Y,y:Q},F.data),na.copy(F.data,M,{x:0,y:ue-1},{x:Y,y:Q-1},{width:ee,height:1}),na.copy(F.data,M,{x:0,y:0},{x:Y,y:Q+ue},{width:ee,height:1}),na.copy(F.data,M,{x:ee-1,y:0},{x:Y-1,y:Q},{width:1,height:ue}),na.copy(F.data,M,{x:0,y:0},{x:Y+ee,y:Q},{width:1,height:ue})}this.image=M,this.iconPositions=f,this.patternPositions=v}addImages(n,l,f){for(const v in n){const C=n[v],E={x:0,y:0,w:C.data.width+2*ra,h:C.data.height+2*ra};f.push(E),l[v]=new um(E,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),l)}patchUpdatedImage(n,l,f){if(!n||!l||n.version===l.version)return;n.version=l.version;const[v,C]=n.tl;f.update(l.data,void 0,{x:v,y:C})}}var ko;Gt("ImagePosition",um),Gt("ImageAtlas",ag),d.ai=void 0,(ko=d.ai||(d.ai={}))[ko.none=0]="none",ko[ko.horizontal=1]="horizontal",ko[ko.vertical=2]="vertical",ko[ko.horizontalOnly=3]="horizontalOnly";const Ic=-17;class Id{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const f=new Id;return f.scale=n||1,f.fontStack=l,f}static forImage(n){const l=new Id;return l.imageName=n,l}}class bs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const f=new bs;for(let v=0;v<n.sections.length;v++){const C=n.sections[v];C.image?f.addImageSection(C):f.addTextSection(C,l)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,C=n.charCodeAt(f-1)||null;l+=v&&Of(v)&&!Wh[n[f+1]]||C&&Of(C)&&!Wh[n[f-1]]||!Wh[n[f]]?n[f]:Wh[n[f]]}return l}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Vd[this.text.charCodeAt(f)];f++)n++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Vd[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const f=new bs;return f.text=this.text.substring(n,l),f.sectionIndex=this.sectionIndex.slice(n,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(Id.forText(n.scale,n.fontStack||l));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void ht("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Id.forImage(l)),this.sectionIndex.push(this.sections.length-1)):ht("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zl(s,n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee,ue){const ve=bs.fromFeature(s,v);let be;H===d.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Me,processStyledBidirectionalText:Ee}=Gs;if(Me&&ve.sections.length===1){be=[];const st=Me(ve.toString(),zd(ve,V,C,n,f,Q,ee));for(const It of st){const Xt=new bs;Xt.text=It,Xt.sections=ve.sections;for(let Vt=0;Vt<It.length;Vt++)Xt.sectionIndex.push(0);be.push(Xt)}}else if(Ee){be=[];const st=Ee(ve.text,ve.sectionIndex,zd(ve,V,C,n,f,Q,ee));for(const It of st){const Xt=new bs;Xt.text=It[0],Xt.sectionIndex=It[1],Xt.sections=ve.sections,be.push(Xt)}}else be=function(st,It){const Xt=[],Vt=st.text;let kt=0;for(const Et of It)Xt.push(st.substring(kt,Et)),kt=Et;return kt<Vt.length&&Xt.push(st.substring(kt,Vt.length)),Xt}(ve,zd(ve,V,C,n,f,Q,ee));const Ve=[],qe={positionedLines:Ve,text:ve.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(st,It,Xt,Vt,kt,Et,xt,Dt,vt,ln,tn,$n){let Fr=0,zr=Ic,$i=0,Ps=0;const qi=Dt==="right"?1:Dt==="left"?0:.5;let Oi=0;for(const yi of kt){yi.trim();const Si=yi.getMaxScale(),Ei=(Si-1)*Vi,js={positionedGlyphs:[],lineOffset:0};st.positionedLines[Oi]=js;const Mi=js.positionedGlyphs;let Hi=0;if(!yi.length()){zr+=Et,++Oi;continue}for(let Ri=0;Ri<yi.length();Ri++){const Kn=yi.getSection(Ri),Gi=yi.getSectionIndex(Ri),us=yi.getCharCode(Ri);let Di=0,$a=null,lo=null,Mo=null,Kl=Vi;const ia=!(vt===d.ai.horizontal||!tn&&!kh(us)||tn&&(Vd[us]||(ns=us,Lt.Arabic(ns)||Lt["Arabic Supplement"](ns)||Lt["Arabic Extended-A"](ns)||Lt["Arabic Presentation Forms-A"](ns)||Lt["Arabic Presentation Forms-B"](ns))));if(Kn.imageName){const Ys=Vt[Kn.imageName];if(!Ys)continue;Mo=Kn.imageName,st.iconsInText=st.iconsInText||!0,lo=Ys.paddedRect;const Xs=Ys.displaySize;Kn.scale=Kn.scale*Vi/$n,$a={width:Xs[0],height:Xs[1],left:ra,top:-Ld,advance:ia?Xs[1]:Xs[0]},Di=Ei+(Vi-Xs[1]*Kn.scale),Kl=$a.advance;const Yl=ia?Xs[0]*Kn.scale-Vi*Si:Xs[1]*Kn.scale-Vi*Si;Yl>0&&Yl>Hi&&(Hi=Yl)}else{const Ys=Xt[Kn.fontStack],Xs=Ys&&Ys[us];if(Xs&&Xs.rect)lo=Xs.rect,$a=Xs.metrics;else{const Yl=It[Kn.fontStack],Bc=Yl&&Yl[us];if(!Bc)continue;$a=Bc.metrics}Di=(Si-Kn.scale)*Vi}ia?(st.verticalizable=!0,Mi.push({glyph:us,imageName:Mo,x:Fr,y:zr+Di,vertical:ia,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:Gi,metrics:$a,rect:lo}),Fr+=Kl*Kn.scale+ln):(Mi.push({glyph:us,imageName:Mo,x:Fr,y:zr+Di,vertical:ia,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:Gi,metrics:$a,rect:lo}),Fr+=$a.advance*Kn.scale+ln)}Mi.length!==0&&($i=Math.max(Fr-ln,$i),V0(Mi,0,Mi.length-1,qi,Hi)),Fr=0;const ws=Et*Si+Hi;js.lineOffset=Math.max(Hi,Ei),zr+=ws,Ps=Math.max(ws,Ps),++Oi}var ns;const _s=zr-Ic,{horizontalAlign:Ks,verticalAlign:Zr}=hm(xt);(function(yi,Si,Ei,js,Mi,Hi,ws,Ri,Kn){const Gi=(Si-Ei)*Mi;let us=0;us=Hi!==ws?-Ri*js-Ic:(-js*Kn+.5)*ws;for(const Di of yi)for(const $a of Di.positionedGlyphs)$a.x+=Gi,$a.y+=us})(st.positionedLines,qi,Ks,Zr,$i,Ps,Et,_s,kt.length),st.top+=-Zr*_s,st.bottom=st.top+_s,st.left+=-Ks*$i,st.right=st.left+$i}(qe,n,l,f,be,E,T,M,H,V,Y,ue),!function(st){for(const It of st)if(It.positionedGlyphs.length!==0)return!1;return!0}(Ve)&&qe}const Vd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ay(s,n,l,f,v,C){if(n.imageName){const E=f[n.imageName];return E?E.displaySize[0]*n.scale*Vi/C+v:0}{const E=l[n.fontStack],T=E&&E[s];return T?T.metrics.advance*n.scale+v:0}}function dm(s,n,l,f){const v=Math.pow(s-n,2);return f?s<n?v/2:2*v:v+Math.abs(l)*l}function og(s,n,l){let f=0;return s===10&&(f-=1e4),l&&(f+=150),s!==40&&s!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Od(s,n,l,f,v,C){let E=null,T=dm(n,l,v,C);for(const M of f){const V=dm(n-M.x,l,v,C)+M.badness;V<=T&&(E=M,T=V)}return{index:s,x:n,priorBreak:E,badness:T}}function ky(s){return s?ky(s.priorBreak).concat(s.index):[]}function zd(s,n,l,f,v,C,E){if(C!=="point")return[];if(!s)return[];const T=[],M=function(Y,Q,ee,ue,ve,be){let Me=0;for(let Ee=0;Ee<Y.length();Ee++){const Ve=Y.getSection(Ee);Me+=Ay(Y.getCharCode(Ee),Ve,ue,ve,Q,be)}return Me/Math.max(1,Math.ceil(Me/ee))}(s,n,l,f,v,E),V=s.text.indexOf("​")>=0;let F=0;for(let Y=0;Y<s.length();Y++){const Q=s.getSection(Y),ee=s.getCharCode(Y);if(Vd[ee]||(F+=Ay(ee,Q,f,v,n,E)),Y<s.length()-1){const ue=!((H=ee)<11904||!(Lt["Bopomofo Extended"](H)||Lt.Bopomofo(H)||Lt["CJK Compatibility Forms"](H)||Lt["CJK Compatibility Ideographs"](H)||Lt["CJK Compatibility"](H)||Lt["CJK Radicals Supplement"](H)||Lt["CJK Strokes"](H)||Lt["CJK Symbols and Punctuation"](H)||Lt["CJK Unified Ideographs Extension A"](H)||Lt["CJK Unified Ideographs"](H)||Lt["Enclosed CJK Letters and Months"](H)||Lt["Halfwidth and Fullwidth Forms"](H)||Lt.Hiragana(H)||Lt["Ideographic Description Characters"](H)||Lt["Kangxi Radicals"](H)||Lt["Katakana Phonetic Extensions"](H)||Lt.Katakana(H)||Lt["Vertical Forms"](H)||Lt["Yi Radicals"](H)||Lt["Yi Syllables"](H)));(Kh[ee]||ue||Q.imageName)&&T.push(Od(Y+1,F,M,T,og(ee,s.getCharCode(Y+1),ue&&V),!1))}}var H;return ky(Od(s.length(),F,M,T,0,!0))}function hm(s){let n=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function V0(s,n,l,f,v){if(!f&&!v)return;const C=s[l],E=(s[l].x+C.metrics.advance*C.scale)*f;for(let T=n;T<=l;T++)s[T].x-=E,s[T].y+=v}function O0(s,n,l){const{horizontalAlign:f,verticalAlign:v}=hm(l),C=n[0]-s.displaySize[0]*f,E=n[1]-s.displaySize[1]*v;return{image:s,top:E,bottom:E+s.displaySize[1],left:C,right:C+s.displaySize[0]}}function My(s,n,l,f,v,C){const E=s.image;let T;if(E.content){const ve=E.content,be=E.pixelRatio||1;T=[ve[0]/be,ve[1]/be,E.displaySize[0]-ve[2]/be,E.displaySize[1]-ve[3]/be]}const M=n.left*C,V=n.right*C;let F,H,Y,Q;l==="width"||l==="both"?(Q=v[0]+M-f[3],H=v[0]+V+f[1]):(Q=v[0]+(M+V-E.displaySize[0])/2,H=Q+E.displaySize[0]);const ee=n.top*C,ue=n.bottom*C;return l==="height"||l==="both"?(F=v[1]+ee-f[0],Y=v[1]+ue+f[2]):(F=v[1]+(ee+ue-E.displaySize[1])/2,Y=F+E.displaySize[1]),{image:E,top:F,right:H,bottom:Y,left:Q,collisionPadding:T}}const zu=255,al=128,Vc=zu*al;function Ry(s,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ti(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=l;let C=0;for(;C<f.length&&f[C]<=s;)C++;C=Math.max(0,C-1);let E=C;for(;E<f.length&&f[E]<s+1;)E++;E=Math.min(f.length-1,E);const T=f[C],M=f[E];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:v}:{kind:"camera",minZoom:T,maxZoom:M,minSize:l.evaluate(new ti(T)),maxSize:l.evaluate(new ti(M)),interpolationType:v}}}function lg(s,n,l){let f="never";const v=s.get(n);return v?f=v:s.get(l)&&(f="always"),f}const z0=il.VectorTileFeature.types,Ly=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fm(s,n,l,f,v,C,E,T,M,V,F,H,Y){const Q=T?Math.min(Vc,Math.round(T[0])):0,ee=T?Math.min(Vc,Math.round(T[1])):0;s.emplaceBack(n,l,Math.round(32*f),Math.round(32*v),C,E,(Q<<1)+(M?1:0),ee,16*V,16*F,256*H,256*Y)}function cg(s,n,l){s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l)}function B0(s){for(const n of s.sections)if(Mh(n.text))return!0;return!1}class ug{constructor(n){this.layoutVertexArray=new Zn,this.indexArray=new gr,this.programConfigurations=n,this.segments=new Nr,this.dynamicLayoutVertexArray=new In,this.opacityVertexArray=new Jn,this.hasVisibleVertices=!1,this.placedSymbolArray=new je}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Lc.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Hh.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Ly,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gt("SymbolBuffers",ug);class dg{constructor(n,l,f){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Nr,this.collisionVertexArray=new Wr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Gh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Gt("CollisionBuffers",dg);class Bd{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(E=>E.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=kc([]),this.placementViewportMatrix=kc([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ry(this.zoom,l["text-size"]),this.iconSizeData=Ry(this.zoom,l["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),C=f.get("symbol-z-order");this.canOverlap=lg(f,"text-overlap","text-allow-overlap")!=="never"||lg(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(E=>d.ai[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=n.sourceID}createArrays(){this.text=new ug(new jo(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new ug(new jo(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ke,this.lineVertexArray=new $e,this.symbolInstances=new ye,this.textAnchorOffsets=new it}calculateGlyphDependencies(n,l,f,v,C){for(let E=0;E<n.length;E++)if(l[n.charCodeAt(E)]=!0,(f||v)&&C){const T=Wh[n.charAt(E)];T&&(l[T.charCodeAt(0)]=!0)}}populate(n,l,f){const v=this.layers[0],C=v.layout,E=C.get("text-font"),T=C.get("text-field"),M=C.get("icon-image"),V=(T.value.kind!=="constant"||T.value.value instanceof Li&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),F=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,H=C.get("symbol-sort-key");if(this.features=[],!V&&!F)return;const Y=l.iconDependencies,Q=l.glyphDependencies,ee=l.availableImages,ue=new ti(this.zoom);for(const{feature:ve,id:be,index:Me,sourceLayerIndex:Ee}of n){const Ve=v._featureFilter.needGeometry,qe=Eu(ve,Ve);if(!v._featureFilter.filter(ue,qe,f))continue;let st,It;if(Ve||(qe.geometry=Su(ve)),V){const Vt=v.getValueAndResolveTokens("text-field",qe,f,ee),kt=Li.factory(Vt);B0(kt)&&(this.hasRTLText=!0),(!this.hasRTLText||_u()==="unavailable"||this.hasRTLText&&Gs.isParsed())&&(st=j0(kt,v,qe))}if(F){const Vt=v.getValueAndResolveTokens("icon-image",qe,f,ee);It=Vt instanceof Ii?Vt:Ii.fromString(Vt)}if(!st&&!It)continue;const Xt=this.sortFeaturesByKey?H.evaluate(qe,{},f):void 0;if(this.features.push({id:be,text:st,icon:It,index:Me,sourceLayerIndex:Ee,geometry:qe.geometry,properties:ve.properties,type:z0[ve.type],sortKey:Xt}),It&&(Y[It.name]=!0),st){const Vt=E.evaluate(qe,{},f).join(","),kt=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ai.vertical)>=0;for(const Et of st.sections)if(Et.image)Y[Et.image.name]=!0;else{const xt=Rl(st.toString()),Dt=Et.fontStack||Vt,vt=Q[Dt]=Q[Dt]||{};this.calculateGlyphDependencies(Et.text,vt,kt,this.allowVerticalPlacement,xt)}}}C.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},Me={},Ee=[];let Ve=0;function qe(Vt){Ee.push(ve[Vt]),Ve++}function st(Vt,kt,Et){const xt=Me[Vt];return delete Me[Vt],Me[kt]=xt,Ee[xt].geometry[0].pop(),Ee[xt].geometry[0]=Ee[xt].geometry[0].concat(Et[0]),xt}function It(Vt,kt,Et){const xt=be[kt];return delete be[kt],be[Vt]=xt,Ee[xt].geometry[0].shift(),Ee[xt].geometry[0]=Et[0].concat(Ee[xt].geometry[0]),xt}function Xt(Vt,kt,Et){const xt=Et?kt[0][kt[0].length-1]:kt[0][0];return`${Vt}:${xt.x}:${xt.y}`}for(let Vt=0;Vt<ve.length;Vt++){const kt=ve[Vt],Et=kt.geometry,xt=kt.text?kt.text.toString():null;if(!xt){qe(Vt);continue}const Dt=Xt(xt,Et),vt=Xt(xt,Et,!0);if(Dt in Me&&vt in be&&Me[Dt]!==be[vt]){const ln=It(Dt,vt,Et),tn=st(Dt,vt,Ee[ln].geometry);delete be[Dt],delete Me[vt],Me[Xt(xt,Ee[tn].geometry,!0)]=tn,Ee[ln].geometry=null}else Dt in Me?st(Dt,vt,Et):vt in be?It(Dt,vt,Et):(qe(Vt),be[Dt]=Ve-1,Me[vt]=Ve-1)}return Ee.filter(Vt=>Vt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(n,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(l[n.segment+1]),C=n.dist(l[n.segment]);const E={};for(let T=n.segment+1;T<l.length;T++)E[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:v},T<l.length-1&&(v+=l[T+1].dist(l[T]));for(let T=n.segment||0;T>=0;T--)E[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:C},T>0&&(C+=l[T-1].dist(l[T]));for(let T=0;T<l.length;T++){const M=E[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,l,f,v,C,E,T,M,V,F,H,Y){const Q=n.indexArray,ee=n.layoutVertexArray,ue=n.segments.prepareSegment(4*l.length,ee,Q,this.canOverlap?E.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ue.vertexLength,Me=this.allowVerticalPlacement&&T===d.ai.vertical?Math.PI/2:0,Ee=E.text&&E.text.sections;for(let Ve=0;Ve<l.length;Ve++){const{tl:qe,tr:st,bl:It,br:Xt,tex:Vt,pixelOffsetTL:kt,pixelOffsetBR:Et,minFontScaleX:xt,minFontScaleY:Dt,glyphOffset:vt,isSDF:ln,sectionIndex:tn}=l[Ve],$n=ue.vertexLength,Fr=vt[1];fm(ee,M.x,M.y,qe.x,Fr+qe.y,Vt.x,Vt.y,f,ln,kt.x,kt.y,xt,Dt),fm(ee,M.x,M.y,st.x,Fr+st.y,Vt.x+Vt.w,Vt.y,f,ln,Et.x,kt.y,xt,Dt),fm(ee,M.x,M.y,It.x,Fr+It.y,Vt.x,Vt.y+Vt.h,f,ln,kt.x,Et.y,xt,Dt),fm(ee,M.x,M.y,Xt.x,Fr+Xt.y,Vt.x+Vt.w,Vt.y+Vt.h,f,ln,Et.x,Et.y,xt,Dt),cg(n.dynamicLayoutVertexArray,M,Me),Q.emplaceBack($n,$n+1,$n+2),Q.emplaceBack($n+1,$n+2,$n+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vt[0]),Ve!==l.length-1&&tn===l[Ve+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,E,E.index,{},Y,Ee&&Ee[tn])}n.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,be,V,F,M.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],T,0,!1,0,H)}_addCollisionDebugVertex(n,l,f,v,C,E){return l.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,C,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(n,l,f,v,C,E,T){const M=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),V=M.vertexLength,F=C.layoutVertexArray,H=C.collisionVertexArray,Y=T.anchorX,Q=T.anchorY;this._addCollisionDebugVertex(F,H,E,Y,Q,new W(n,l)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(f,l)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(f,v)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(n,v)),M.vertexLength+=4;const ee=C.indexArray;ee.emplaceBack(V,V+1),ee.emplaceBack(V+1,V+2),ee.emplaceBack(V+2,V+3),ee.emplaceBack(V+3,V),M.primitiveLength+=4}addDebugCollisionBoxes(n,l,f,v){for(let C=n;C<l;C++){const E=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,v?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dg(wi,Wl.members,Fi),this.iconCollisionBox=new dg(wi,Wl.members,Fi);for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,f,v,C,E,T,M,V){const F={};for(let H=l;H<f;H++){const Y=n.get(H);F.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.textFeatureIndex=Y.featureIndex;break}for(let H=v;H<C;H++){const Y=n.get(H);F.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=E;H<T;H++){const Y=n.get(H);F.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.iconFeatureIndex=Y.featureIndex;break}for(let H=M;H<V;H++){const Y=n.get(H);F.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalIconFeatureIndex=Y.featureIndex;break}return F}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const f=n.placedSymbolArray.get(l),v=f.vertexStartIndex+4*f.numGlyphs;for(let C=f.vertexStartIndex;C<v;C+=4)n.indexArray.emplaceBack(C,C+1,C+2),n.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),f=Math.cos(n),v=[],C=[],E=[];for(let T=0;T<this.symbolInstances.length;++T){E.push(T);const M=this.symbolInstances.get(T);v.push(0|Math.round(l*M.anchorX+f*M.anchorY)),C.push(M.featureIndex)}return E.sort((T,M)=>v[T]-v[M]||C[M]-C[T]),E}addToSortKeyRanges(n,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,C,E)=>{v>=0&&E.indexOf(v)===C&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mm,Iy;Gt("SymbolBucket",Bd,{omit:["layers","collisionBoxArray","features","compareText"]}),Bd.MAX_GLYPHS=65535,Bd.addDynamicAttributes=cg;var hg={get paint(){return Iy=Iy||new ji({"icon-opacity":new dn(We.paint_symbol["icon-opacity"]),"icon-color":new dn(We.paint_symbol["icon-color"]),"icon-halo-color":new dn(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new dn(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dn(We.paint_symbol["icon-halo-blur"]),"icon-translate":new an(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new an(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new dn(We.paint_symbol["text-opacity"]),"text-color":new dn(We.paint_symbol["text-color"],{runtimeType:On,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new dn(We.paint_symbol["text-halo-color"]),"text-halo-width":new dn(We.paint_symbol["text-halo-width"]),"text-halo-blur":new dn(We.paint_symbol["text-halo-blur"]),"text-translate":new an(We.paint_symbol["text-translate"]),"text-translate-anchor":new an(We.paint_symbol["text-translate-anchor"])})},get layout(){return mm=mm||new ji({"symbol-placement":new an(We.layout_symbol["symbol-placement"]),"symbol-spacing":new an(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new an(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dn(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new an(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new an(We.layout_symbol["icon-allow-overlap"]),"icon-overlap":new an(We.layout_symbol["icon-overlap"]),"icon-ignore-placement":new an(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new an(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new an(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new dn(We.layout_symbol["icon-size"]),"icon-text-fit":new an(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new an(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new dn(We.layout_symbol["icon-image"]),"icon-rotate":new dn(We.layout_symbol["icon-rotate"]),"icon-padding":new dn(We.layout_symbol["icon-padding"]),"icon-keep-upright":new an(We.layout_symbol["icon-keep-upright"]),"icon-offset":new dn(We.layout_symbol["icon-offset"]),"icon-anchor":new dn(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new an(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new an(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new an(We.layout_symbol["text-rotation-alignment"]),"text-field":new dn(We.layout_symbol["text-field"]),"text-font":new dn(We.layout_symbol["text-font"]),"text-size":new dn(We.layout_symbol["text-size"]),"text-max-width":new dn(We.layout_symbol["text-max-width"]),"text-line-height":new an(We.layout_symbol["text-line-height"]),"text-letter-spacing":new dn(We.layout_symbol["text-letter-spacing"]),"text-justify":new dn(We.layout_symbol["text-justify"]),"text-radial-offset":new dn(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new an(We.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new dn(We.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new dn(We.layout_symbol["text-anchor"]),"text-max-angle":new an(We.layout_symbol["text-max-angle"]),"text-writing-mode":new an(We.layout_symbol["text-writing-mode"]),"text-rotate":new dn(We.layout_symbol["text-rotate"]),"text-padding":new an(We.layout_symbol["text-padding"]),"text-keep-upright":new an(We.layout_symbol["text-keep-upright"]),"text-transform":new dn(We.layout_symbol["text-transform"]),"text-offset":new dn(We.layout_symbol["text-offset"]),"text-allow-overlap":new an(We.layout_symbol["text-allow-overlap"]),"text-overlap":new an(We.layout_symbol["text-overlap"]),"text-ignore-placement":new an(We.layout_symbol["text-ignore-placement"]),"text-optional":new an(We.layout_symbol["text-optional"])})}};class Vy{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:dr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gt("FormatSectionOverride",Vy,{omit:["defaultValue"]});class Yh extends xa{constructor(n){super(n,hg)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const C of f)v.indexOf(C)<0&&v.push(C);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,f,v){const C=this.layout.get(n).evaluate(l,{},f,v),E=this._unevaluatedLayout._values[n];return E.isDataDriven()||ls(E.value)||!C?C:function(T,M){return M.replace(/{([^{}]+)}/g,(V,F)=>T&&F in T?String(T[F]):"")}(l.properties,C)}createBucket(n){return new Bd(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of hg.paint.overridableProperties){if(!Yh.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),f=new Vy(l),v=new dd(f,l.property.specification);let C=null;C=l.value.kind==="constant"||l.value.kind==="source"?new xi("source",v):new ya("composite",v,l.value.zoomStops),this.paint._values[n]=new vs(l.property,C,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&Yh.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const f=n.get("text-field"),v=hg.paint.properties[l];let C=!1;const E=T=>{for(const M of T)if(v.overrides&&v.overrides.hasOverride(M))return void(C=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Li)E(f.value.value.sections);else if(f.value.kind==="source"){const T=V=>{C||(V instanceof Qs&&Br(V.value)===fe?E(V.value.sections):V instanceof vi?E(V.sections):V.eachChild(T))},M=f.value;M._styleExpression&&T(M._styleExpression.expression)}return C}}let Oy;var F0={get paint(){return Oy=Oy||new ji({"background-color":new an(We.paint_background["background-color"]),"background-pattern":new jc(We.paint_background["background-pattern"]),"background-opacity":new an(We.paint_background["background-opacity"])})}};class U0 extends xa{constructor(n){super(n,F0)}}let zy;var $0={get paint(){return zy=zy||new ji({"raster-opacity":new an(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new an(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new an(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new an(We.paint_raster["raster-brightness-max"]),"raster-saturation":new an(We.paint_raster["raster-saturation"]),"raster-contrast":new an(We.paint_raster["raster-contrast"]),"raster-resampling":new an(We.paint_raster["raster-resampling"]),"raster-fade-duration":new an(We.paint_raster["raster-fade-duration"])})}};class q0 extends xa{constructor(n){super(n,$0)}}class H0 extends xa{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class By{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Xh=63710088e-1;class oo{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new oo(tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,f=this.lat*l,v=n.lat*l,C=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*l);return Xh*Math.acos(Math.min(C,1))}static convert(n){if(n instanceof oo)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new oo(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new oo(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Fy=2*Math.PI*Xh;function fg(s){return Fy*Math.cos(s*Math.PI/180)}function mg(s){return(180+s)/360}function pg(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Uy(s,n){return s/fg(n)}function gg(s){return 360*s-180}function vg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class pm{constructor(n,l,f=0){this.x=+n,this.y=+l,this.z=+f}static fromLngLat(n,l=0){const f=oo.convert(n);return new pm(mg(f.lng),pg(f.lat),Uy(l,f.lat))}toLngLat(){return new oo(gg(this.x),vg(this.y))}toAltitude(){return this.z*fg(vg(this.y))}meterInMercatorCoordinateUnits(){return 1/Fy*(n=vg(this.y),1/Math.cos(n*Math.PI/180));var n}}function $y(s,n,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[s*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class gm{constructor(n,l,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||l<0||l>=Math.pow(2,n))throw new Error(`x=${l}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=f,this.key=ol(0,n,n,l,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,f){const v=(E=this.y,T=this.z,M=$y(256*(C=this.x),256*(E=Math.pow(2,T)-E-1),T),V=$y(256*(C+1),256*(E+1),T),M[0]+","+M[1]+","+V[0]+","+V[1]);var C,E,T,M,V;const F=function(H,Y,Q){let ee,ue="";for(let ve=H;ve>0;ve--)ee=1<<ve-1,ue+=(Y&ee?1:0)+(Q&ee?2:0);return ue}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){const l=Math.pow(2,this.z);return new W((n.x*l-this.x)*ki,(n.y*l-this.y)*ki)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yg{constructor(n,l){this.wrap=n,this.canonical=l,this.key=ol(n,l.z,l.z,l.x,l.y)}}class Da{constructor(n,l,f,v,C){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=l,this.canonical=new gm(f,+v,+C),this.key=ol(l,n,f,v,C)}clone(){return new Da(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-n;return n>this.canonical.z?new Da(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Da(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?ol(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):ol(this.wrap*+l,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Da(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Da(l,this.wrap,l,f,v),new Da(l,this.wrap,l,f+1,v),new Da(l,this.wrap,l,f,v+1),new Da(l,this.wrap,l,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Da(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Da(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new pm(n.x-this.wrap,n.y))}}function ol(s,n,l,f,v){(s*=2)<0&&(s=-1*s-1);const C=1<<l;return(C*C*s+C*v+f).toString(36)+l.toString(36)+n.toString(36)}Gt("CanonicalTileID",gm),Gt("OverscaledTileID",Da,{omit:["posMatrix"]});class qy{constructor(n,l,f,v=1,C=1,E=1,T=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void ht(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const M=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=C,this.blueFactor=E,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<M;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(M,V)]=this.data[this._idx(M-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,M)]=this.data[this._idx(V,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<M;V++)for(let F=0;F<M;F++){const H=this.get(V,F);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(n,l){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,l);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,f){return n*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,C=l*this.dim+this.dim,E=f*this.dim,T=f*this.dim+this.dim;switch(l){case-1:v=C-1;break;case 1:C=v+1}switch(f){case-1:E=T-1;break;case 1:T=E+1}const M=-l*this.dim,V=-f*this.dim;for(let F=E;F<T;F++)for(let H=v;H<C;H++)this.data[this._idx(H,F)]=n.data[this._idx(H+M,F+V)]}}Gt("DEMData",qy);class Hy{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const f=n[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Gy{constructor(n,l,f,v,C){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=f,n._y=v,this.properties=n.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class Wy{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ml(ki,16,0),this.grid3D=new Ml(ki,16,0),this.featureIndexArray=new ft,this.promoteId=l}insert(n,l,f,v,C,E){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,C);const M=E?this.grid3D:this.grid;for(let V=0;V<l.length;V++){const F=l[V],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<F.length;Y++){const Q=F[Y];H[0]=Math.min(H[0],Q.x),H[1]=Math.min(H[1],Q.y),H[2]=Math.max(H[2],Q.x),H[3]=Math.max(H[3],Q.y)}H[0]<ki&&H[1]<ki&&H[2]>=0&&H[3]>=0&&M.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new rg(this.rawTileData)).layers,this.sourceLayerCoder=new Hy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,f,v){this.loadVTLayers();const C=n.params||{},E=ki/n.tileSize/n.scale,T=wh(C.filter),M=n.queryGeometry,V=n.queryPadding*E,F=Ky(M),H=this.grid.query(F.minX-V,F.minY-V,F.maxX+V,F.maxY+V),Y=Ky(n.cameraQueryGeometry),Q=this.grid3D.query(Y.minX-V,Y.minY-V,Y.maxX+V,Y.maxY+V,(ve,be,Me,Ee)=>function(Ve,qe,st,It,Xt){for(const kt of Ve)if(qe<=kt.x&&st<=kt.y&&It>=kt.x&&Xt>=kt.y)return!0;const Vt=[new W(qe,st),new W(qe,Xt),new W(It,Xt),new W(It,st)];if(Ve.length>2){for(const kt of Vt)if(ui(Ve,kt))return!0}for(let kt=0;kt<Ve.length-1;kt++)if(tl(Ve[kt],Ve[kt+1],Vt))return!0;return!1}(n.cameraQueryGeometry,ve-V,be-V,Me+V,Ee+V));for(const ve of Q)H.push(ve);H.sort(Yy);const ee={};let ue;for(let ve=0;ve<H.length;ve++){const be=H[ve];if(be===ue)continue;ue=be;const Me=this.featureIndexArray.get(be);let Ee=null;this.loadMatchingFeature(ee,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,T,C.layers,C.availableImages,l,f,v,(Ve,qe,st)=>(Ee||(Ee=Su(Ve)),qe.queryIntersectsFeature(M,Ve,st,Ee,this.z,n.transform,E,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,l,f,v,C,E,T,M,V,F,H){const Y=this.bucketLayerIDs[l];if(E&&!function(ve,be){for(let Me=0;Me<ve.length;Me++)if(be.indexOf(ve[Me])>=0)return!0;return!1}(E,Y))return;const Q=this.sourceLayerCoder.decode(f),ee=this.vtLayers[Q].feature(v);if(C.needGeometry){const ve=Eu(ee,!0);if(!C.filter(new ti(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!C.filter(new ti(this.tileID.overscaledZ),ee))return;const ue=this.getId(ee,Q);for(let ve=0;ve<Y.length;ve++){const be=Y[ve];if(E&&E.indexOf(be)<0)continue;const Me=M[be];if(!Me)continue;let Ee={};ue&&F&&(Ee=F.getState(Me.sourceLayer||"_geojsonTileLayer",ue));const Ve=ut({},V[be]);Ve.paint=Zy(Ve.paint,Me.paint,ee,Ee,T),Ve.layout=Zy(Ve.layout,Me.layout,ee,Ee,T);const qe=!H||H(ee,Me,Ee);if(!qe)continue;const st=new Gy(ee,this.z,this.x,this.y,ue);st.layer=Ve;let It=n[be];It===void 0&&(It=n[be]=[]),It.push({featureIndex:v,feature:st,intersectionZ:qe})}}lookupSymbolFeatures(n,l,f,v,C,E,T,M){const V={};this.loadVTLayers();const F=wh(C);for(const H of n)this.loadMatchingFeature(V,f,v,H,F,E,T,M,l);return V}hasLayer(n){for(const l of this.bucketLayerIDs)for(const f of l)if(n===f)return!0;return!1}getId(n,l){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function Zy(s,n,l,f,v){return zt(s,(C,E)=>{const T=n instanceof Pc?n.get(E):null;return T&&T.evaluate?T.evaluate(l,f,v):T})}function Ky(s){let n=1/0,l=1/0,f=-1/0,v=-1/0;for(const C of s)n=Math.min(n,C.x),l=Math.min(l,C.y),f=Math.max(f,C.x),v=Math.max(v,C.y);return{minX:n,minY:l,maxX:f,maxY:v}}function Yy(s,n){return n-s}function Xy(s,n,l,f,v){const C=[];for(let E=0;E<s.length;E++){const T=s[E];let M;for(let V=0;V<T.length-1;V++){let F=T[V],H=T[V+1];F.x<n&&H.x<n||(F.x<n?F=new W(n,F.y+(n-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x<n&&(H=new W(n,F.y+(n-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y<l&&H.y<l||(F.y<l?F=new W(F.x+(l-F.y)/(H.y-F.y)*(H.x-F.x),l)._round():H.y<l&&(H=new W(F.x+(l-F.y)/(H.y-F.y)*(H.x-F.x),l)._round()),F.x>=f&&H.x>=f||(F.x>=f?F=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x>=f&&(H=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y>=v&&H.y>=v||(F.y>=v?F=new W(F.x+(v-F.y)/(H.y-F.y)*(H.x-F.x),v)._round():H.y>=v&&(H=new W(F.x+(v-F.y)/(H.y-F.y)*(H.x-F.x),v)._round()),M&&F.equals(M[M.length-1])||(M=[F],C.push(M)),M.push(H)))))}}return C}Gt("FeatureIndex",Wy,{omit:["rawTileData","sourceLayerCoder"]});class Oc extends W{constructor(n,l,f,v){super(n,l),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Oc(this.x,this.y,this.angle,this.segment)}}function bg(s,n,l,f,v){if(n.segment===void 0||l===0)return!0;let C=n,E=n.segment+1,T=0;for(;T>-l/2;){if(E--,E<0)return!1;T-=s[E].dist(C),C=s[E]}T+=s[E].dist(s[E+1]),E++;const M=[];let V=0;for(;T<l/2;){const F=s[E],H=s[E+1];if(!H)return!1;let Y=s[E-1].angleTo(F)-F.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:Y}),V+=Y;T-M[0].distance>f;)V-=M.shift().angleDelta;if(V>v)return!1;E++,T+=F.dist(H)}return!0}function Fd(s){let n=0;for(let l=0;l<s.length-1;l++)n+=s[l].dist(s[l+1]);return n}function Ud(s,n,l){return s?.6*n*l:0}function Jy(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function G0(s,n,l,f,v,C){const E=Ud(l,v,C),T=Jy(l,f)*C;let M=0;const V=Fd(s)/2;for(let F=0;F<s.length-1;F++){const H=s[F],Y=s[F+1],Q=H.dist(Y);if(M+Q>V){const ee=(V-M)/Q,ue=Qi.number(H.x,Y.x,ee),ve=Qi.number(H.y,Y.y,ee),be=new Oc(ue,ve,Y.angleTo(H),F);return be._round(),!E||bg(s,be,T,E,n)?be:void 0}M+=Q}}function W0(s,n,l,f,v,C,E,T,M){const V=Ud(f,C,E),F=Jy(f,v),H=F*E,Y=s[0].x===0||s[0].x===M||s[0].y===0||s[0].y===M;return n-H<n/4&&(n=H+n/4),Jh(s,Y?n/2*T%n:(F/2+2*C)*E*T%n,n,V,l,H,Y,!1,M)}function Jh(s,n,l,f,v,C,E,T,M){const V=C/2,F=Fd(s);let H=0,Y=n-l,Q=[];for(let ee=0;ee<s.length-1;ee++){const ue=s[ee],ve=s[ee+1],be=ue.dist(ve),Me=ve.angleTo(ue);for(;Y+l<H+be;){Y+=l;const Ee=(Y-H)/be,Ve=Qi.number(ue.x,ve.x,Ee),qe=Qi.number(ue.y,ve.y,Ee);if(Ve>=0&&Ve<M&&qe>=0&&qe<M&&Y-V>=0&&Y+V<=F){const st=new Oc(Ve,qe,Me,ee);st._round(),f&&!bg(s,st,C,f,v)||Q.push(st)}}H+=be}return T||Q.length||E||(Q=Jh(s,H/2,l,f,v,C,E,!0,M)),Q}Gt("Anchor",Oc);const $d=ra;function xg(s,n,l,f){const v=[],C=s.image,E=C.pixelRatio,T=C.paddedRect.w-2*$d,M=C.paddedRect.h-2*$d,V=s.right-s.left,F=s.bottom-s.top,H=C.stretchX||[[0,T]],Y=C.stretchY||[[0,M]],Q=(Et,xt)=>Et+xt[1]-xt[0],ee=H.reduce(Q,0),ue=Y.reduce(Q,0),ve=T-ee,be=M-ue;let Me=0,Ee=ee,Ve=0,qe=ue,st=0,It=ve,Xt=0,Vt=be;if(C.content&&f){const Et=C.content;Me=vm(H,0,Et[0]),Ve=vm(Y,0,Et[1]),Ee=vm(H,Et[0],Et[2]),qe=vm(Y,Et[1],Et[3]),st=Et[0]-Me,Xt=Et[1]-Ve,It=Et[2]-Et[0]-Ee,Vt=Et[3]-Et[1]-qe}const kt=(Et,xt,Dt,vt)=>{const ln=Qh(Et.stretch-Me,Ee,V,s.left),tn=ym(Et.fixed-st,It,Et.stretch,ee),$n=Qh(xt.stretch-Ve,qe,F,s.top),Fr=ym(xt.fixed-Xt,Vt,xt.stretch,ue),zr=Qh(Dt.stretch-Me,Ee,V,s.left),$i=ym(Dt.fixed-st,It,Dt.stretch,ee),Ps=Qh(vt.stretch-Ve,qe,F,s.top),qi=ym(vt.fixed-Xt,Vt,vt.stretch,ue),Oi=new W(ln,$n),ns=new W(zr,$n),_s=new W(zr,Ps),Ks=new W(ln,Ps),Zr=new W(tn/E,Fr/E),yi=new W($i/E,qi/E),Si=n*Math.PI/180;if(Si){const Mi=Math.sin(Si),Hi=Math.cos(Si),ws=[Hi,-Mi,Mi,Hi];Oi._matMult(ws),ns._matMult(ws),Ks._matMult(ws),_s._matMult(ws)}const Ei=Et.stretch+Et.fixed,js=xt.stretch+xt.fixed;return{tl:Oi,tr:ns,bl:Ks,br:_s,tex:{x:C.paddedRect.x+$d+Ei,y:C.paddedRect.y+$d+js,w:Dt.stretch+Dt.fixed-Ei,h:vt.stretch+vt.fixed-js},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:yi,minFontScaleX:It/E/V,minFontScaleY:Vt/E/F,isSDF:l}};if(f&&(C.stretchX||C.stretchY)){const Et=_g(H,ve,ee),xt=_g(Y,be,ue);for(let Dt=0;Dt<Et.length-1;Dt++){const vt=Et[Dt],ln=Et[Dt+1];for(let tn=0;tn<xt.length-1;tn++)v.push(kt(vt,xt[tn],ln,xt[tn+1]))}}else v.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return v}function vm(s,n,l){let f=0;for(const v of s)f+=Math.max(n,Math.min(l,v[1]))-Math.max(n,Math.min(l,v[0]));return f}function _g(s,n,l){const f=[{fixed:-$d,stretch:0}];for(const[v,C]of s){const E=f[f.length-1];f.push({fixed:v-E.stretch,stretch:E.stretch}),f.push({fixed:v-E.stretch,stretch:E.stretch+(C-v)})}return f.push({fixed:n+$d,stretch:l}),f}function Qh(s,n,l,f){return s/n*l+f}function ym(s,n,l,f){return s-n*l/f}class bm{constructor(n,l,f,v,C,E,T,M,V,F){if(this.boxStartIndex=n.length,V){let H=E.top,Y=E.bottom;const Q=E.collisionPadding;Q&&(H-=Q[1],Y+=Q[3]);let ee=Y-H;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let H=E.top*T-M[0],Y=E.bottom*T+M[2],Q=E.left*T-M[3],ee=E.right*T+M[1];const ue=E.collisionPadding;if(ue&&(Q-=ue[0]*T,H-=ue[1]*T,ee+=ue[2]*T,Y+=ue[3]*T),F){const ve=new W(Q,H),be=new W(ee,H),Me=new W(Q,Y),Ee=new W(ee,Y),Ve=F*Math.PI/180;ve._rotate(Ve),be._rotate(Ve),Me._rotate(Ve),Ee._rotate(Ve),Q=Math.min(ve.x,be.x,Me.x,Ee.x),ee=Math.max(ve.x,be.x,Me.x,Ee.x),H=Math.min(ve.y,be.y,Me.y,Ee.y),Y=Math.max(ve.y,be.y,Me.y,Ee.y)}n.emplaceBack(l.x,l.y,Q,H,ee,Y,f,v,C)}this.boxEndIndex=n.length}}class Z0{constructor(n=[],l=K0){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:f}=this,v=l[n];for(;n>0;){const C=n-1>>1,E=l[C];if(f(v,E)>=0)break;l[n]=E,n=C}l[n]=v}_down(n){const{data:l,compare:f}=this,v=this.length>>1,C=l[n];for(;n<v;){let E=1+(n<<1),T=l[E];const M=E+1;if(M<this.length&&f(l[M],T)<0&&(E=M,T=l[M]),f(T,C)>=0)break;l[n]=T,n=E}l[n]=C}}function K0(s,n){return s<n?-1:s>n?1:0}function Y0(s,n=1,l=!1){let f=1/0,v=1/0,C=-1/0,E=-1/0;const T=s[0];for(let Q=0;Q<T.length;Q++){const ee=T[Q];(!Q||ee.x<f)&&(f=ee.x),(!Q||ee.y<v)&&(v=ee.y),(!Q||ee.x>C)&&(C=ee.x),(!Q||ee.y>E)&&(E=ee.y)}const M=Math.min(C-f,E-v);let V=M/2;const F=new Z0([],X0);if(M===0)return new W(f,v);for(let Q=f;Q<C;Q+=M)for(let ee=v;ee<E;ee+=M)F.push(new qd(Q+V,ee+V,V,s));let H=function(Q){let ee=0,ue=0,ve=0;const be=Q[0];for(let Me=0,Ee=be.length,Ve=Ee-1;Me<Ee;Ve=Me++){const qe=be[Me],st=be[Ve],It=qe.x*st.y-st.x*qe.y;ue+=(qe.x+st.x)*It,ve+=(qe.y+st.y)*It,ee+=3*It}return new qd(ue/ee,ve/ee,0,Q)}(s),Y=F.length;for(;F.length;){const Q=F.pop();(Q.d>H.d||!H.d)&&(H=Q,l&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Y)),Q.max-H.d<=n||(V=Q.h/2,F.push(new qd(Q.p.x-V,Q.p.y-V,V,s)),F.push(new qd(Q.p.x+V,Q.p.y-V,V,s)),F.push(new qd(Q.p.x-V,Q.p.y+V,V,s)),F.push(new qd(Q.p.x+V,Q.p.y+V,V,s)),Y+=4)}return l&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function X0(s,n){return n.max-s.max}function qd(s,n,l,f){this.p=new W(s,n),this.h=l,this.d=function(v,C){let E=!1,T=1/0;for(let M=0;M<C.length;M++){const V=C[M];for(let F=0,H=V.length,Y=H-1;F<H;Y=F++){const Q=V[F],ee=V[Y];Q.y>v.y!=ee.y>v.y&&v.x<(ee.x-Q.x)*(v.y-Q.y)/(ee.y-Q.y)+Q.x&&(E=!E),T=Math.min(T,cr(v,Q,ee))}}return(E?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var xs;d.aq=void 0,(xs=d.aq||(d.aq={}))[xs.center=1]="center",xs[xs.left=2]="left",xs[xs.right=3]="right",xs[xs.top=4]="top",xs[xs.bottom=5]="bottom",xs[xs["top-left"]=6]="top-left",xs[xs["top-right"]=7]="top-right",xs[xs["bottom-left"]=8]="bottom-left",xs[xs["bottom-right"]=9]="bottom-right";const zc=7,wg=Number.POSITIVE_INFINITY;function Ta(s,n){return n[1]!==wg?function(l,f,v){let C=0,E=0;switch(f=Math.abs(f),v=Math.abs(v),l){case"top-right":case"top-left":case"top":E=v-zc;break;case"bottom-right":case"bottom-left":case"bottom":E=-v+zc}switch(l){case"top-right":case"bottom-right":case"right":C=-f;break;case"top-left":case"bottom-left":case"left":C=f}return[C,E]}(s,n[0],n[1]):function(l,f){let v=0,C=0;f<0&&(f=0);const E=f/Math.SQRT2;switch(l){case"top-right":case"top-left":C=E-zc;break;case"bottom-right":case"bottom-left":C=-E+zc;break;case"bottom":C=-f+zc;break;case"top":C=f-zc}switch(l){case"top-right":case"bottom-right":v=-E;break;case"top-left":case"bottom-left":v=E;break;case"left":v=f;break;case"right":v=-f}return[v,C]}(s,n[0])}function Hd(s,n,l){var f;const v=s.layout,C=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},l);if(C){const T=C.values,M=[];for(let V=0;V<T.length;V+=2){const F=M[V]=T[V],H=T[V+1].map(Y=>Y*Vi);F.startsWith("top")?H[1]-=zc:F.startsWith("bottom")&&(H[1]+=zc),M[V+1]=H}return new ms(M)}const E=v.get("text-variable-anchor");if(E){let T;T=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},l)*Vi,wg]:v.get("text-offset").evaluate(n,{},l).map(V=>V*Vi);const M=[];for(const V of E)M.push(V,Ta(V,T));return new ms(M)}return null}function xm(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function J0(s,n,l,f,v,C,E,T,M,V,F){let H=C.textMaxSize.evaluate(n,{});H===void 0&&(H=E);const Y=s.layers[0].layout,Q=Y.get("icon-offset").evaluate(n,{},F),ee=Qy(l.horizontal),ue=E/24,ve=s.tilePixelRatio*ue,be=s.tilePixelRatio*H/24,Me=s.tilePixelRatio*T,Ee=s.tilePixelRatio*Y.get("symbol-spacing"),Ve=Y.get("text-padding")*s.tilePixelRatio,qe=function(vt,ln,tn,$n=1){const Fr=vt.get("icon-padding").evaluate(ln,{},tn),zr=Fr&&Fr.values;return[zr[0]*$n,zr[1]*$n,zr[2]*$n,zr[3]*$n]}(Y,n,F,s.tilePixelRatio),st=Y.get("text-max-angle")/180*Math.PI,It=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Xt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Vt=Y.get("symbol-placement"),kt=Ee/2,Et=Y.get("icon-text-fit");let xt;f&&Et!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(xt=My(f,l.vertical,Et,Y.get("icon-text-fit-padding"),Q,ue)),ee&&(f=My(f,ee,Et,Y.get("icon-text-fit-padding"),Q,ue)));const Dt=(vt,ln)=>{ln.x<0||ln.x>=ki||ln.y<0||ln.y>=ki||function(tn,$n,Fr,zr,$i,Ps,qi,Oi,ns,_s,Ks,Zr,yi,Si,Ei,js,Mi,Hi,ws,Ri,Kn,Gi,us,Di,$a){const lo=tn.addToLineVertexArray($n,Fr);let Mo,Kl,ia,Ys,Xs=0,Yl=0,Bc=0,nb=0,Tg=-1,Pg=-1;const Xl={};let rb=cs("");if(tn.allowVerticalPlacement&&zr.vertical){const As=Oi.layout.get("text-rotate").evaluate(Kn,{},Di)+90;ia=new bm(ns,$n,_s,Ks,Zr,zr.vertical,yi,Si,Ei,As),qi&&(Ys=new bm(ns,$n,_s,Ks,Zr,qi,Mi,Hi,Ei,As))}if($i){const As=Oi.layout.get("icon-rotate").evaluate(Kn,{}),Pa=Oi.layout.get("icon-text-fit")!=="none",Bu=xg($i,As,us,Pa),Lo=qi?xg(qi,As,us,Pa):void 0;Kl=new bm(ns,$n,_s,Ks,Zr,$i,Mi,Hi,!1,As),Xs=4*Bu.length;const Uc=tn.iconSizeData;let qa=null;Uc.kind==="source"?(qa=[al*Oi.layout.get("icon-size").evaluate(Kn,{})],qa[0]>Vc&&ht(`${tn.layerIds[0]}: Value for "icon-size" is >= ${zu}. Reduce your "icon-size".`)):Uc.kind==="composite"&&(qa=[al*Gi.compositeIconSizes[0].evaluate(Kn,{},Di),al*Gi.compositeIconSizes[1].evaluate(Kn,{},Di)],(qa[0]>Vc||qa[1]>Vc)&&ht(`${tn.layerIds[0]}: Value for "icon-size" is >= ${zu}. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,Bu,qa,Ri,ws,Kn,d.ai.none,$n,lo.lineStartIndex,lo.lineLength,-1,Di),Tg=tn.icon.placedSymbolArray.length-1,Lo&&(Yl=4*Lo.length,tn.addSymbols(tn.icon,Lo,qa,Ri,ws,Kn,d.ai.vertical,$n,lo.lineStartIndex,lo.lineLength,-1,Di),Pg=tn.icon.placedSymbolArray.length-1)}const ib=Object.keys(zr.horizontal);for(const As of ib){const Pa=zr.horizontal[As];if(!Mo){rb=cs(Pa.text);const Lo=Oi.layout.get("text-rotate").evaluate(Kn,{},Di);Mo=new bm(ns,$n,_s,Ks,Zr,Pa,yi,Si,Ei,Lo)}const Bu=Pa.positionedLines.length===1;if(Bc+=Cg(tn,$n,Pa,Ps,Oi,Ei,Kn,js,lo,zr.vertical?d.ai.horizontal:d.ai.horizontalOnly,Bu?ib:[As],Xl,Tg,Gi,Di),Bu)break}zr.vertical&&(nb+=Cg(tn,$n,zr.vertical,Ps,Oi,Ei,Kn,js,lo,d.ai.vertical,["vertical"],Xl,Pg,Gi,Di));const e_=Mo?Mo.boxStartIndex:tn.collisionBoxArray.length,t_=Mo?Mo.boxEndIndex:tn.collisionBoxArray.length,n_=ia?ia.boxStartIndex:tn.collisionBoxArray.length,r_=ia?ia.boxEndIndex:tn.collisionBoxArray.length,jg=Kl?Kl.boxStartIndex:tn.collisionBoxArray.length,Ag=Kl?Kl.boxEndIndex:tn.collisionBoxArray.length,kg=Ys?Ys.boxStartIndex:tn.collisionBoxArray.length,Mg=Ys?Ys.boxEndIndex:tn.collisionBoxArray.length;let Ro=-1;const Fc=(As,Pa)=>As&&As.circleDiameter?Math.max(As.circleDiameter,Pa):Pa;Ro=Fc(Mo,Ro),Ro=Fc(ia,Ro),Ro=Fc(Kl,Ro),Ro=Fc(Ys,Ro);const Wd=Ro>-1?1:0;Wd&&(Ro*=$a/Vi),tn.glyphOffsetArray.length>=Bd.MAX_GLYPHS&&ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,Kn.sortKey);const i_=Hd(Oi,Kn,Di),[sb,s_]=function(As,Pa){const Bu=As.length,Lo=Pa==null?void 0:Pa.values;if((Lo==null?void 0:Lo.length)>0)for(let Uc=0;Uc<Lo.length;Uc+=2){const qa=Lo[Uc+1];As.emplaceBack(d.aq[Lo[Uc]],qa[0],qa[1])}return[Bu,As.length]}(tn.textAnchorOffsets,i_);tn.symbolInstances.emplaceBack($n.x,$n.y,Xl.right>=0?Xl.right:-1,Xl.center>=0?Xl.center:-1,Xl.left>=0?Xl.left:-1,Xl.vertical||-1,Tg,Pg,rb,e_,t_,n_,r_,jg,Ag,kg,Mg,_s,Bc,nb,Xs,Yl,Wd,0,yi,Ro,sb,s_)}(s,ln,vt,l,f,v,xt,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ve,[Ve,Ve,Ve,Ve],It,M,Me,qe,Xt,Q,n,C,V,F,E)};if(Vt==="line")for(const vt of Xy(n.geometry,0,0,ki,ki)){const ln=W0(vt,Ee,st,l.vertical||ee,f,24,be,s.overscaling,ki);for(const tn of ln)ee&&Q0(s,ee.text,kt,tn)||Dt(vt,tn)}else if(Vt==="line-center"){for(const vt of n.geometry)if(vt.length>1){const ln=G0(vt,st,l.vertical||ee,f,24,be);ln&&Dt(vt,ln)}}else if(n.type==="Polygon")for(const vt of Hp(n.geometry,0)){const ln=Y0(vt,16);Dt(vt[0],new Oc(ln.x,ln.y,0))}else if(n.type==="LineString")for(const vt of n.geometry)Dt(vt,new Oc(vt[0].x,vt[0].y,0));else if(n.type==="Point")for(const vt of n.geometry)for(const ln of vt)Dt([ln],new Oc(ln.x,ln.y,0))}function Cg(s,n,l,f,v,C,E,T,M,V,F,H,Y,Q,ee){const ue=function(Me,Ee,Ve,qe,st,It,Xt,Vt){const kt=qe.layout.get("text-rotate").evaluate(It,{})*Math.PI/180,Et=[];for(const xt of Ee.positionedLines)for(const Dt of xt.positionedGlyphs){if(!Dt.rect)continue;const vt=Dt.rect||{};let ln=Ld+1,tn=!0,$n=1,Fr=0;const zr=(st||Vt)&&Dt.vertical,$i=Dt.metrics.advance*Dt.scale/2;if(Vt&&Ee.verticalizable&&(Fr=xt.lineOffset/2-(Dt.imageName?-(Vi-Dt.metrics.width*Dt.scale)/2:(Dt.scale-1)*Vi)),Dt.imageName){const Ri=Xt[Dt.imageName];tn=Ri.sdf,$n=Ri.pixelRatio,ln=ra/$n}const Ps=st?[Dt.x+$i,Dt.y]:[0,0];let qi=st?[0,0]:[Dt.x+$i+Ve[0],Dt.y+Ve[1]-Fr],Oi=[0,0];zr&&(Oi=qi,qi=[0,0]);const ns=Dt.metrics.isDoubleResolution?2:1,_s=(Dt.metrics.left-ln)*Dt.scale-$i+qi[0],Ks=(-Dt.metrics.top-ln)*Dt.scale+qi[1],Zr=_s+vt.w/ns*Dt.scale/$n,yi=Ks+vt.h/ns*Dt.scale/$n,Si=new W(_s,Ks),Ei=new W(Zr,Ks),js=new W(_s,yi),Mi=new W(Zr,yi);if(zr){const Ri=new W(-$i,$i-Ic),Kn=-Math.PI/2,Gi=Vi/2-$i,us=new W(5-Ic-Gi,-(Dt.imageName?Gi:0)),Di=new W(...Oi);Si._rotateAround(Kn,Ri)._add(us)._add(Di),Ei._rotateAround(Kn,Ri)._add(us)._add(Di),js._rotateAround(Kn,Ri)._add(us)._add(Di),Mi._rotateAround(Kn,Ri)._add(us)._add(Di)}if(kt){const Ri=Math.sin(kt),Kn=Math.cos(kt),Gi=[Kn,-Ri,Ri,Kn];Si._matMult(Gi),Ei._matMult(Gi),js._matMult(Gi),Mi._matMult(Gi)}const Hi=new W(0,0),ws=new W(0,0);Et.push({tl:Si,tr:Ei,bl:js,br:Mi,tex:vt,writingMode:Ee.writingMode,glyphOffset:Ps,sectionIndex:Dt.sectionIndex,isSDF:tn,pixelOffsetTL:Hi,pixelOffsetBR:ws,minFontScaleX:0,minFontScaleY:0})}return Et}(0,l,T,v,C,E,f,s.allowVerticalPlacement),ve=s.textSizeData;let be=null;ve.kind==="source"?(be=[al*v.layout.get("text-size").evaluate(E,{})],be[0]>Vc&&ht(`${s.layerIds[0]}: Value for "text-size" is >= ${zu}. Reduce your "text-size".`)):ve.kind==="composite"&&(be=[al*Q.compositeTextSizes[0].evaluate(E,{},ee),al*Q.compositeTextSizes[1].evaluate(E,{},ee)],(be[0]>Vc||be[1]>Vc)&&ht(`${s.layerIds[0]}: Value for "text-size" is >= ${zu}. Reduce your "text-size".`)),s.addSymbols(s.text,ue,be,T,C,E,V,n,M.lineStartIndex,M.lineLength,Y,ee);for(const Me of F)H[Me]=s.text.placedSymbolArray.length-1;return 4*ue.length}function Qy(s){for(const n in s)return s[n];return null}function Q0(s,n,l,f){const v=s.compareText;if(n in v){const C=v[n];for(let E=C.length-1;E>=0;E--)if(f.dist(C[E])<l)return!0}else v[n]=[];return v[n].push(f),!1}const eb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _m{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const C=eb[15&f];if(!C)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new _m(T,E,C,n)}constructor(n,l=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const C=eb.indexOf(this.ArrayType),E=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+M,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+E+T+M),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+M,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=l,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:E,nodeSize:T}=this,M=[0,C.length-1,0],V=[];for(;M.length;){const F=M.pop()||0,H=M.pop()||0,Y=M.pop()||0;if(H-Y<=T){for(let ve=Y;ve<=H;ve++){const be=E[2*ve],Me=E[2*ve+1];be>=n&&be<=f&&Me>=l&&Me<=v&&V.push(C[ve])}continue}const Q=Y+H>>1,ee=E[2*Q],ue=E[2*Q+1];ee>=n&&ee<=f&&ue>=l&&ue<=v&&V.push(C[Q]),(F===0?n<=ee:l<=ue)&&(M.push(Y),M.push(Q-1),M.push(1-F)),(F===0?f>=ee:v>=ue)&&(M.push(Q+1),M.push(H),M.push(1-F))}return V}within(n,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:C,nodeSize:E}=this,T=[0,v.length-1,0],M=[],V=f*f;for(;T.length;){const F=T.pop()||0,H=T.pop()||0,Y=T.pop()||0;if(H-Y<=E){for(let ve=Y;ve<=H;ve++)Nm(C[2*ve],C[2*ve+1],n,l)<=V&&M.push(v[ve]);continue}const Q=Y+H>>1,ee=C[2*Q],ue=C[2*Q+1];Nm(ee,ue,n,l)<=V&&M.push(v[Q]),(F===0?n-f<=ee:l-f<=ue)&&(T.push(Y),T.push(Q-1),T.push(1-F)),(F===0?n+f>=ee:l+f>=ue)&&(T.push(Q+1),T.push(H),T.push(1-F))}return M}}function wm(s,n,l,f,v,C){if(v-f<=l)return;const E=f+v>>1;tb(s,n,E,f,v,C),wm(s,n,l,f,E-1,1-C),wm(s,n,l,E+1,v,1-C)}function tb(s,n,l,f,v,C){for(;v>f;){if(v-f>600){const V=v-f+1,F=l-f+1,H=Math.log(V),Y=.5*Math.exp(2*H/3),Q=.5*Math.sqrt(H*Y*(V-Y)/V)*(F-V/2<0?-1:1);tb(s,n,l,Math.max(f,Math.floor(l-F*Y/V+Q)),Math.min(v,Math.floor(l+(V-F)*Y/V+Q)),C)}const E=n[2*l+C];let T=f,M=v;for(ef(s,n,f,l),n[2*v+C]>E&&ef(s,n,f,v);T<M;){for(ef(s,n,T,M),T++,M--;n[2*T+C]<E;)T++;for(;n[2*M+C]>E;)M--}n[2*f+C]===E?ef(s,n,f,M):(M++,ef(s,n,M,v)),M<=l&&(f=M+1),l<=M&&(v=M-1)}}function ef(s,n,l,f){Cm(s,l,f),Cm(n,2*l,2*f),Cm(n,2*l+1,2*f+1)}function Cm(s,n,l){const f=s[n];s[n]=s[l],s[l]=f}function Nm(s,n,l,f){const v=s-l,C=n-f;return v*v+C*C}var Ng;d.bh=void 0,(Ng=d.bh||(d.bh={})).create="create",Ng.load="load",Ng.fullLoad="fullLoad";let Sm=null,tf=[];const Sg=1e3/60,Eg="loadTime",Dg="fullLoadTime",Gd={mark(s){performance.mark(s)},frame(s){const n=s;Sm!=null&&tf.push(n-Sm),Sm=n},clearMetrics(){Sm=null,tf=[],performance.clearMeasures(Eg),performance.clearMeasures(Dg);for(const s in d.bh)performance.clearMarks(d.bh[s])},getPerformanceMetrics(){performance.measure(Eg,d.bh.create,d.bh.load),performance.measure(Dg,d.bh.create,d.bh.fullLoad);const s=performance.getEntriesByName(Eg)[0].duration,n=performance.getEntriesByName(Dg)[0].duration,l=tf.length,f=1/(tf.reduce((C,E)=>C+E,0)/l/1e3),v=tf.filter(C=>C>Sg).reduce((C,E)=>C+(E-Sg)/Sg,0);return{loadTime:s,fullLoadTime:n,fps:f,percentDroppedFrames:v/(l+v)*100,totalFrames:l}}};d.$=function(s,n,l){var f,v,C,E,T,M,V,F,H,Y,Q,ee,ue=l[0],ve=l[1],be=l[2];return n===s?(s[12]=n[0]*ue+n[4]*ve+n[8]*be+n[12],s[13]=n[1]*ue+n[5]*ve+n[9]*be+n[13],s[14]=n[2]*ue+n[6]*ve+n[10]*be+n[14],s[15]=n[3]*ue+n[7]*ve+n[11]*be+n[15]):(v=n[1],C=n[2],E=n[3],T=n[4],M=n[5],V=n[6],F=n[7],H=n[8],Y=n[9],Q=n[10],ee=n[11],s[0]=f=n[0],s[1]=v,s[2]=C,s[3]=E,s[4]=T,s[5]=M,s[6]=V,s[7]=F,s[8]=H,s[9]=Y,s[10]=Q,s[11]=ee,s[12]=f*ue+T*ve+H*be+n[12],s[13]=v*ue+M*ve+Y*be+n[13],s[14]=C*ue+V*ve+Q*be+n[14],s[15]=E*ue+F*ve+ee*be+n[15]),s},d.A=En,d.B=Qi,d.C=class{constructor(s,n,l){this.receive=f=>{const v=f.data,C=v.id;if(C&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[C];const E=this.cancelCallbacks[C];delete this.cancelCallbacks[C],E&&E()}else Ct()||v.mustQueue?(this.tasks[C]=v,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,v)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),v=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(f,v)},this.target=s,this.parent=n,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new By(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ct()?s:window}send(s,n,l,f,v=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[C]=l);const E=[],T={id:C,type:s,hasCallback:!!l,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:Ko(n,E)};return this.target.postMessage(T,{transfer:E}),{cancel:()=>{l&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(n.error?l(Nc(n.error)):l(null,Nc(n.data)))}else{let l=!1;const f=[],v=n.hasCallback?(T,M)=>{l=!0,delete this.cancelCallbacks[s];const V={id:s,type:"<response>",sourceMapId:this.mapId,error:T?Ko(T):null,data:Ko(M,f)};this.target.postMessage(V,{transfer:f})}:T=>{l=!0};let C=null;const E=Nc(n.data);if(this.parent[n.type])C=this.parent[n.type](n.sourceMapId,E,v);else if("getWorkerSource"in this.parent){const T=n.type.split(".");C=this.parent.getWorkerSource(n.sourceMapId,T[0],E.source)[T[1]](E,v)}else v(new Error(`Could not find function ${n.type}`));!l&&C&&C.cancel&&(this.cancelCallbacks[s]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},d.D=an,d.E=ii,d.F=function(s,n){const l={};for(let f=0;f<n.length;f++){const v=n[f];v in s&&(l[v]=s[v])}return l},d.G=mg,d.H=pg,d.I=um,d.J=De,d.K=Ce,d.L=oo,d.M=Yn,d.N=ki,d.O=Da,d.P=W,d.Q=Ir,d.R=na,d.S=Nr,d.T=Dc,d.U=pm,d.V=class extends _a{},d.W=gm,d.X=function(s,n){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let f=0;f<s.length;f++){const v=window.document.createElement("source");$r(s[f])||(l.crossOrigin="Anonymous"),v.src=s[f],l.appendChild(v)}return{cancel:()=>{}}},d.Y=nt,d.Z=function(){var s=new En(16);return En!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},d._=A,d.a=Sn,d.a$=class extends X{},d.a0=function(s,n,l){var f=l[0],v=l[1],C=l[2];return s[0]=n[0]*f,s[1]=n[1]*f,s[2]=n[2]*f,s[3]=n[3]*f,s[4]=n[4]*v,s[5]=n[5]*v,s[6]=n[6]*v,s[7]=n[7]*v,s[8]=n[8]*C,s[9]=n[9]*C,s[10]=n[10]*C,s[11]=n[11]*C,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},d.a1=nl,d.a2=function(){return Rt++},d.a3=me,d.a4=Bd,d.a5=function(){Gs.isLoading()||Gs.isLoaded()||_u()!=="deferred"||Bf()},d.a6=wh,d.a7=Eu,d.a8=ti,d.a9=Gy,d.aA=Sc,d.aB=function(s){s=s.slice();const n=Object.create(null);for(let l=0;l<s.length;l++)n[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=rr(s[l],n[s[l].ref]));return s},d.aC=function(s){if(s.type==="custom")return new H0(s);switch(s.type){case"background":return new U0(s);case"circle":return new Ed(s);case"fill":return new om(s);case"fill-extrusion":return new Kp(s);case"heatmap":return new Vp(s);case"hillshade":return new zp(s);case"line":return new Rc(s);case"raster":return new q0(s);case"symbol":return new Yh(s)}},d.aD=lt,d.aE=function(s,n){if(!s)return[{command:kn.setStyle,args:[n]}];let l=[];try{if(!Ln(s.version,n.version))return[{command:kn.setStyle,args:[n]}];Ln(s.center,n.center)||l.push({command:kn.setCenter,args:[n.center]}),Ln(s.zoom,n.zoom)||l.push({command:kn.setZoom,args:[n.zoom]}),Ln(s.bearing,n.bearing)||l.push({command:kn.setBearing,args:[n.bearing]}),Ln(s.pitch,n.pitch)||l.push({command:kn.setPitch,args:[n.pitch]}),Ln(s.sprite,n.sprite)||l.push({command:kn.setSprite,args:[n.sprite]}),Ln(s.glyphs,n.glyphs)||l.push({command:kn.setGlyphs,args:[n.glyphs]}),Ln(s.transition,n.transition)||l.push({command:kn.setTransition,args:[n.transition]}),Ln(s.light,n.light)||l.push({command:kn.setLight,args:[n.light]});const f={},v=[];(function(E,T,M,V){let F;for(F in T=T||{},E=E||{})Object.prototype.hasOwnProperty.call(E,F)&&(Object.prototype.hasOwnProperty.call(T,F)||si(F,M,V));for(F in T)Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(E,F)?Ln(E[F],T[F])||(E[F].type==="geojson"&&T[F].type==="geojson"&&fs(E,T,F)?M.push({command:kn.setGeoJSONSourceData,args:[F,T[F].data]}):qr(F,T,M,V)):yr(F,T,M))})(s.sources,n.sources,v,f);const C=[];s.layers&&s.layers.forEach(E=>{f[E.source]?l.push({command:kn.removeLayer,args:[E.id]}):C.push(E)}),l=l.concat(v),function(E,T,M){T=T||[];const V=(E=E||[]).map(Tt),F=T.map(Tt),H=E.reduce(rn,{}),Y=T.reduce(rn,{}),Q=V.slice(),ee=Object.create(null);let ue,ve,be,Me,Ee,Ve,qe;for(ue=0,ve=0;ue<V.length;ue++)be=V[ue],Object.prototype.hasOwnProperty.call(Y,be)?ve++:(M.push({command:kn.removeLayer,args:[be]}),Q.splice(Q.indexOf(be,ve),1));for(ue=0,ve=0;ue<F.length;ue++)be=F[F.length-1-ue],Q[Q.length-1-ue]!==be&&(Object.prototype.hasOwnProperty.call(H,be)?(M.push({command:kn.removeLayer,args:[be]}),Q.splice(Q.lastIndexOf(be,Q.length-ve),1)):ve++,Ve=Q[Q.length-ue],M.push({command:kn.addLayer,args:[Y[be],Ve]}),Q.splice(Q.length-ue,0,be),ee[be]=!0);for(ue=0;ue<F.length;ue++)if(be=F[ue],Me=H[be],Ee=Y[be],!ee[be]&&!Ln(Me,Ee))if(Ln(Me.source,Ee.source)&&Ln(Me["source-layer"],Ee["source-layer"])&&Ln(Me.type,Ee.type)){for(qe in Bi(Me.layout,Ee.layout,M,be,null,kn.setLayoutProperty),Bi(Me.paint,Ee.paint,M,be,null,kn.setPaintProperty),Ln(Me.filter,Ee.filter)||M.push({command:kn.setFilter,args:[be,Ee.filter]}),Ln(Me.minzoom,Ee.minzoom)&&Ln(Me.maxzoom,Ee.maxzoom)||M.push({command:kn.setLayerZoomRange,args:[be,Ee.minzoom,Ee.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?Bi(Me[qe],Ee[qe],M,be,qe.slice(6),kn.setPaintProperty):Ln(Me[qe],Ee[qe])||M.push({command:kn.setLayerProperty,args:[be,qe,Ee[qe]]}));for(qe in Ee)Object.prototype.hasOwnProperty.call(Ee,qe)&&!Object.prototype.hasOwnProperty.call(Me,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?Bi(Me[qe],Ee[qe],M,be,qe.slice(6),kn.setPaintProperty):Ln(Me[qe],Ee[qe])||M.push({command:kn.setLayerProperty,args:[be,qe,Ee[qe]]}))}else M.push({command:kn.removeLayer,args:[be]}),Ve=Q[Q.lastIndexOf(be)+1],M.push({command:kn.addLayer,args:[Ee,Ve]})}(C,n.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:kn.setStyle,args:[n]}]}return l},d.aF=function(s){const n=[],l=s.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},d.aG=function s(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let f=0;f<n.length;f++)if(!s(n[f],l[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(const f in n)if(!s(n[f],l[f]))return!1;return!0}return n===l},d.aH=zt,d.aI=fn,d.aJ=Ec,d.aK=function(s){return s({pluginStatus:Ds,pluginURL:Jo}),Ec.on("pluginStateChange",s),s},d.aL=class extends Ol{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},d.aM=Ai,d.aN=class extends Ol{constructor(s,n){super(s,n),this.current=Tp}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},d.aO=$f,d.aP=class extends Ol{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},d.aQ=class extends Ol{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},d.aR=qf,d.aS=function(s,n,l,f,v,C,E){var T=1/(n-l),M=1/(f-v),V=1/(C-E);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*M,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*V,s[11]=0,s[12]=(n+l)*T,s[13]=(v+f)*M,s[14]=(E+C)*V,s[15]=1,s},d.aT=xr,d.aU=rl,d.aV=class extends m{},d.aW=P0,d.aX=class extends _{},d.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},d.aZ=Jf,d.a_=wt,d.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,v,C)=>{const E=v||C;return n[f]=!E||E.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},d.ab=function(s,n){const l=[];for(const f in s)f in n||l.push(f);return l},d.ac=function(s){if(pn==null){const n=s.navigator?s.navigator.userAgent:null;pn=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return pn},d.ad=Ze,d.ae=function(s,n,l){var f=Math.sin(l),v=Math.cos(l),C=n[0],E=n[1],T=n[2],M=n[3],V=n[4],F=n[5],H=n[6],Y=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=C*v+V*f,s[1]=E*v+F*f,s[2]=T*v+H*f,s[3]=M*v+Y*f,s[4]=V*v-C*f,s[5]=F*v-E*f,s[6]=H*v-T*f,s[7]=Y*v-M*f,s},d.af=function(s){var n=new En(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},d.ag=Mc,d.ah=function(s,n){let l=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:v,minZoom:C,maxZoom:E}=s,T=v?Ze(es.interpolationFactor(v,n,C,E),0,1):0;s.kind==="camera"?f=Qi.number(s.minSize,s.maxSize,T):l=T}return{uSizeT:l,uSize:f}},d.aj=function(s,{uSize:n,uSizeT:l},{lowerSize:f,upperSize:v}){return s.kind==="source"?f/al:s.kind==="composite"?Qi.number(f/al,v/al,l):n},d.ak=cg,d.al=function(s,n,l,f){const v=n.y-s.y,C=n.x-s.x,E=f.y-l.y,T=f.x-l.x,M=E*C-T*v;if(M===0)return null;const V=(T*(s.y-l.y)-E*(s.x-l.x))/M;return new W(s.x+V*C,s.y+V*v)},d.am=Xy,d.an=kp,d.ao=kc,d.ap=Vi,d.ar=lg,d.as=function(s,n){var l=n[0],f=n[1],v=n[2],C=n[3],E=n[4],T=n[5],M=n[6],V=n[7],F=n[8],H=n[9],Y=n[10],Q=n[11],ee=n[12],ue=n[13],ve=n[14],be=n[15],Me=l*T-f*E,Ee=l*M-v*E,Ve=l*V-C*E,qe=f*M-v*T,st=f*V-C*T,It=v*V-C*M,Xt=F*ue-H*ee,Vt=F*ve-Y*ee,kt=F*be-Q*ee,Et=H*ve-Y*ue,xt=H*be-Q*ue,Dt=Y*be-Q*ve,vt=Me*Dt-Ee*xt+Ve*Et+qe*kt-st*Vt+It*Xt;return vt?(s[0]=(T*Dt-M*xt+V*Et)*(vt=1/vt),s[1]=(v*xt-f*Dt-C*Et)*vt,s[2]=(ue*It-ve*st+be*qe)*vt,s[3]=(Y*st-H*It-Q*qe)*vt,s[4]=(M*kt-E*Dt-V*Vt)*vt,s[5]=(l*Dt-v*kt+C*Vt)*vt,s[6]=(ve*Ve-ee*It-be*Ee)*vt,s[7]=(F*It-Y*Ve+Q*Ee)*vt,s[8]=(E*xt-T*kt+V*Xt)*vt,s[9]=(f*kt-l*xt-C*Xt)*vt,s[10]=(ee*st-ue*Ve+be*Me)*vt,s[11]=(H*Ve-F*st-Q*Me)*vt,s[12]=(T*Vt-E*Et-M*Xt)*vt,s[13]=(l*Et-f*Vt+v*Xt)*vt,s[14]=(ue*Ee-ee*qe-ve*Me)*vt,s[15]=(F*qe-H*Ee+Y*Me)*vt,s):null},d.at=xm,d.au=hm,d.av=_m,d.aw=function(){const s={},n=We.$version;for(const l in We.$root){const f=We.$root[l];if(f.required){let v=null;v=l==="version"?n:f.type==="array"?[]:{},v!=null&&(s[l]=v)}}return s},d.ax=kn,d.ay=jh,d.az=Ft,d.b=function(s,n){const l=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(l).then(f=>{n(null,f)}).catch(f=>{n(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},d.b0=gr,d.b1=function(s,n){var l=s[0],f=s[1],v=s[2],C=s[3],E=s[4],T=s[5],M=s[6],V=s[7],F=s[8],H=s[9],Y=s[10],Q=s[11],ee=s[12],ue=s[13],ve=s[14],be=s[15],Me=n[0],Ee=n[1],Ve=n[2],qe=n[3],st=n[4],It=n[5],Xt=n[6],Vt=n[7],kt=n[8],Et=n[9],xt=n[10],Dt=n[11],vt=n[12],ln=n[13],tn=n[14],$n=n[15];return Math.abs(l-Me)<=Dr*Math.max(1,Math.abs(l),Math.abs(Me))&&Math.abs(f-Ee)<=Dr*Math.max(1,Math.abs(f),Math.abs(Ee))&&Math.abs(v-Ve)<=Dr*Math.max(1,Math.abs(v),Math.abs(Ve))&&Math.abs(C-qe)<=Dr*Math.max(1,Math.abs(C),Math.abs(qe))&&Math.abs(E-st)<=Dr*Math.max(1,Math.abs(E),Math.abs(st))&&Math.abs(T-It)<=Dr*Math.max(1,Math.abs(T),Math.abs(It))&&Math.abs(M-Xt)<=Dr*Math.max(1,Math.abs(M),Math.abs(Xt))&&Math.abs(V-Vt)<=Dr*Math.max(1,Math.abs(V),Math.abs(Vt))&&Math.abs(F-kt)<=Dr*Math.max(1,Math.abs(F),Math.abs(kt))&&Math.abs(H-Et)<=Dr*Math.max(1,Math.abs(H),Math.abs(Et))&&Math.abs(Y-xt)<=Dr*Math.max(1,Math.abs(Y),Math.abs(xt))&&Math.abs(Q-Dt)<=Dr*Math.max(1,Math.abs(Q),Math.abs(Dt))&&Math.abs(ee-vt)<=Dr*Math.max(1,Math.abs(ee),Math.abs(vt))&&Math.abs(ue-ln)<=Dr*Math.max(1,Math.abs(ue),Math.abs(ln))&&Math.abs(ve-tn)<=Dr*Math.max(1,Math.abs(ve),Math.abs(tn))&&Math.abs(be-$n)<=Dr*Math.max(1,Math.abs(be),Math.abs($n))},d.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},d.b3=function(s,n,l){return s[0]=n[0]*l[0],s[1]=n[1]*l[1],s[2]=n[2]*l[2],s[3]=n[3]*l[3],s},d.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},d.b5=tt,d.b6=yg,d.b7=Uy,d.b8=function(s,n,l,f,v){var C,E=1/Math.tan(n/2);return s[0]=E/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,v!=null&&v!==1/0?(s[10]=(v+f)*(C=1/(f-v)),s[14]=2*v*f*C):(s[10]=-1,s[14]=-2*f),s},d.b9=function(s,n,l){var f=Math.sin(l),v=Math.cos(l),C=n[4],E=n[5],T=n[6],M=n[7],V=n[8],F=n[9],H=n[10],Y=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=C*v+V*f,s[5]=E*v+F*f,s[6]=T*v+H*f,s[7]=M*v+Y*f,s[8]=V*v-C*f,s[9]=F*v-E*f,s[10]=H*v-T*f,s[11]=Y*v-M*f,s},d.bA=O,d.bB=kd,d.bC=va,d.bD=Gs,d.ba=ze,d.bb=Re,d.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},d.bd=class extends bn{},d.be=Xh,d.bf=gg,d.bg=Gd,d.bi=qt,d.bj=function(s,n,l=!1){if(Ds===Yo||Ds===Xo||Ds===bd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Jo=yn.resolveURL(s),Ds=Yo,Rh=n,xd(),l||Bf()},d.bk=_u,d.bl=function(s,n){const l={};for(let v=0;v<s.length;v++){const C=n&&n[s[v].id]||mu(s[v]);n&&(n[s[v].id]=C);let E=l[C];E||(E=l[C]=[]),E.push(s[v])}const f=[];for(const v in l)f.push(l[v]);return f},d.bm=Gt,d.bn=Hy,d.bo=Wy,d.bp=ag,d.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=ki/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],l=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new ti(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new ti(V),s.canonical),f["text-size"].possiblyEvaluate(new ti(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new ti(V),s.canonical),f["icon-size"].possiblyEvaluate(new ti(F),s.canonical)]}const C=l.get("text-line-height")*Vi,E=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",T=l.get("text-keep-upright"),M=l.get("text-size");for(const V of s.bucket.features){const F=l.get("text-font").evaluate(V,{},s.canonical).join(","),H=M.evaluate(V,{},s.canonical),Y=v.layoutTextSize.evaluate(V,{},s.canonical),Q=v.layoutIconSize.evaluate(V,{},s.canonical),ee={horizontal:{},vertical:void 0},ue=V.text;let ve,be=[0,0];if(ue){const Ve=ue.toString(),qe=l.get("text-letter-spacing").evaluate(V,{},s.canonical)*Vi,st=Ah(Ve)?qe:0,It=l.get("text-anchor").evaluate(V,{},s.canonical),Xt=Hd(n,V,s.canonical);if(!Xt){const Dt=l.get("text-radial-offset").evaluate(V,{},s.canonical);be=Dt?Ta(It,[Dt*Vi,wg]):l.get("text-offset").evaluate(V,{},s.canonical).map(vt=>vt*Vi)}let Vt=E?"center":l.get("text-justify").evaluate(V,{},s.canonical);const kt=l.get("symbol-placement"),Et=kt==="point"?l.get("text-max-width").evaluate(V,{},s.canonical)*Vi:0,xt=()=>{s.bucket.allowVerticalPlacement&&Rl(Ve)&&(ee.vertical=Zl(ue,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,C,It,"left",st,be,d.ai.vertical,!0,kt,Y,H))};if(!E&&Xt){const Dt=new Set;if(Vt==="auto")for(let ln=0;ln<Xt.values.length;ln+=2)Dt.add(xm(Xt.values[ln]));else Dt.add(Vt);let vt=!1;for(const ln of Dt)if(!ee.horizontal[ln])if(vt)ee.horizontal[ln]=ee.horizontal[0];else{const tn=Zl(ue,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,C,"center",ln,st,be,d.ai.horizontal,!1,kt,Y,H);tn&&(ee.horizontal[ln]=tn,vt=tn.positionedLines.length===1)}xt()}else{Vt==="auto"&&(Vt=xm(It));const Dt=Zl(ue,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,C,It,Vt,st,be,d.ai.horizontal,!1,kt,Y,H);Dt&&(ee.horizontal[Vt]=Dt),xt(),Rl(Ve)&&E&&T&&(ee.vertical=Zl(ue,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,C,It,Vt,st,be,d.ai.vertical,!1,kt,Y,H))}}let Me=!1;if(V.icon&&V.icon.name){const Ve=s.imageMap[V.icon.name];Ve&&(ve=O0(s.imagePositions[V.icon.name],l.get("icon-offset").evaluate(V,{},s.canonical),l.get("icon-anchor").evaluate(V,{},s.canonical)),Me=!!Ve.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Me:s.bucket.sdfIcons!==Me&&ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ve.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Ee=Qy(ee.horizontal)||ee.vertical;s.bucket.iconsInText=!!Ee&&Ee.iconsInText,(Ee||ve)&&J0(s.bucket,V,ee,ve,s.imageMap,v,Y,Q,be,Me,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},d.br=lm,d.bs=Uh,d.bt=Fa,d.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},d.bv=rg,d.bw=il,d.bx=function(s,n,l,f,v){return A(this,void 0,void 0,function*(){if(Ce())try{return yield Yn(s,n,l,f,v)}catch{}return function(C,E,T,M,V){const F=C.width,H=C.height;Vn&&Nt||(Vn=new OffscreenCanvas(F,H),Nt=Vn.getContext("2d",{willReadFrequently:!0})),Vn.width=F,Vn.height=H,Nt.drawImage(C,0,0,F,H);const Y=Nt.getImageData(E,T,M,V);return Nt.clearRect(0,0,F,H),Y.data}(s,n,l,f,v)})},d.by=qy,d.bz=k,d.c=Dn,d.d=function(s,n){const l=new Image;l.onload=()=>{n(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=Wt})},l.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});l.src=s.byteLength?URL.createObjectURL(f):Wt},d.e=ut,d.f=function(s,n){return cn(ut(s,{type:"json"}),n)},d.g=Pn,d.h=yn,d.i=Ct,d.j=Lr,d.k=hi,d.l=tr,d.m=cn,d.n=function(s){return new rg(s).readFields(I0,[])},d.o=function(s,n,l){if(!s.length)return l(null,[]);let f=s.length;const v=new Array(s.length);let C=null;s.forEach((E,T)=>{n(E,(M,V)=>{M&&(C=M),v[T]=V,--f==0&&l(C,v)})})},d.p=jy,d.q=Du,d.r=ji,d.s=$r,d.t=Vf,d.u=Lt,d.v=We,d.w=ht,d.x=ts,d.y=To,d.z=function([s,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(l),y:s*Math.sin(n)*Math.sin(l),z:s*Math.cos(l)}}}),N(["./shared"],function(d){class A{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,G){for(const se of L){this._layerConfigs[se.id]=se;const he=this._layers[se.id]=d.aC(se);he._featureFilter=d.a6(he.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of G)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const J=d.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of J){const he=se.map(ne=>this._layers[ne.id]),we=he[0];if(we.visibility==="none")continue;const xe=we.source||"";let ge=this.familiesBySource[xe];ge||(ge=this.familiesBySource[xe]={});const Te=we.sourceLayer||"_geojsonTileLayer";let Qe=ge[Te];Qe||(Qe=ge[Te]=[]),Qe.push(he)}}}class k{constructor(L){const G={},J=[];for(const xe in L){const ge=L[xe],Te=G[xe]={};for(const Qe in ge){const ne=ge[+Qe];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const Ne={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};J.push(Ne),Te[Qe]={rect:Ne,metrics:ne.metrics}}}const{w:se,h:he}=d.p(J),we=new d.q({width:se||1,height:he||1});for(const xe in L){const ge=L[xe];for(const Te in ge){const Qe=ge[+Te];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const ne=G[xe][Te].rect;d.q.copy(Qe.bitmap,we,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Qe.bitmap)}}this.image=we,this.positions=G}}d.bm("GlyphAtlas",k);class O{constructor(L){this.tileID=new d.O(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(L,G,J,se,he){this.status="parsing",this.data=L,this.collisionBoxArray=new d.a3;const we=new d.bn(Object.keys(L.layers).sort()),xe=new d.bo(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const ge={},Te={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Qe=G.familiesBySource[this.source];for(const _t in Qe){const Ut=L.layers[_t];if(!Ut)continue;Ut.version===1&&d.w(`Vector tile source "${this.source}" layer "${_t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=we.encode(_t),gn=[];for(let Un=0;Un<Ut.length;Un++){const Hn=Ut.feature(Un),Yr=xe.getId(Hn,_t);gn.push({feature:Hn,id:Yr,index:Un,sourceLayerIndex:wn})}for(const Un of Qe[_t]){const Hn=Un[0];Hn.source!==this.source&&d.w(`layer.source = ${Hn.source} does not equal this.source = ${this.source}`),Hn.minzoom&&this.zoom<Math.floor(Hn.minzoom)||Hn.maxzoom&&this.zoom>=Hn.maxzoom||Hn.visibility!=="none"&&(B(Un,this.zoom,J),(ge[Hn.id]=Hn.createBucket({index:xe.bucketLayerIDs.length,layers:Un,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source})).populate(gn,Te,this.tileID.canonical),xe.bucketLayerIDs.push(Un.map(Yr=>Yr.id)))}}let ne,Ne,te,Ae;const Fe=d.aH(Te.glyphDependencies,_t=>Object.keys(_t).map(Number));this.inFlightDependencies.forEach(_t=>_t==null?void 0:_t.cancel()),this.inFlightDependencies=[];const Ke=++this.dependencySentinel;Object.keys(Fe).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:Fe,source:this.source,tileID:this.tileID,type:"glyphs"},(_t,Ut)=>{Ke===this.dependencySentinel&&(ne||(ne=_t,Ne=Ut,Ot.call(this)))})):Ne={};const dt=Object.keys(Te.iconDependencies);dt.length?this.inFlightDependencies.push(se.send("getImages",{icons:dt,source:this.source,tileID:this.tileID,type:"icons"},(_t,Ut)=>{Ke===this.dependencySentinel&&(ne||(ne=_t,te=Ut,Ot.call(this)))})):te={};const pt=Object.keys(Te.patternDependencies);function Ot(){if(ne)return he(ne);if(Ne&&te&&Ae){const _t=new k(Ne),Ut=new d.bp(te,Ae);for(const wn in ge){const gn=ge[wn];gn instanceof d.a4?(B(gn.layers,this.zoom,J),d.bq({bucket:gn,glyphMap:Ne,glyphPositions:_t.positions,imageMap:te,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):gn.hasPattern&&(gn instanceof d.br||gn instanceof d.bs||gn instanceof d.bt)&&(B(gn.layers,this.zoom,J),gn.addFeatures(Te,this.tileID.canonical,Ut.patternPositions))}this.status="done",he(null,{buckets:Object.values(ge).filter(wn=>!wn.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_t.image,imageAtlas:Ut,glyphMap:this.returnDependencies?Ne:null,iconMap:this.returnDependencies?te:null,glyphPositions:this.returnDependencies?_t.positions:null})}}pt.length?this.inFlightDependencies.push(se.send("getImages",{icons:pt,source:this.source,tileID:this.tileID,type:"patterns"},(_t,Ut)=>{Ke===this.dependencySentinel&&(ne||(ne=_t,Ae=Ut,Ot.call(this)))})):Ae={},Ot.call(this)}}function B(fe,L,G){const J=new d.a8(L);for(const se of fe)se.recalculate(J,G)}function W(fe,L){const G=d.l(fe.request,(J,se,he,we)=>{if(J)L(J);else if(se)try{const xe=new d.bw.VectorTile(new d.bv(se));L(null,{vectorTile:xe,rawData:se,cacheControl:he,expires:we})}catch(xe){const ge=new Uint8Array(se);let Te=`Unable to parse the tile at ${fe.request.url}, `;Te+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${xe.messge}`,L(new Error(Te))}});return()=>{G.cancel(),L()}}class ie{constructor(L,G,J,se){this.actor=L,this.layerIndex=G,this.availableImages=J,this.loadVectorData=se||W,this.fetching={},this.loading={},this.loaded={}}loadTile(L,G){const J=L.uid;this.loading||(this.loading={});const se=!!(L&&L.request&&L.request.collectResourceTiming)&&new d.bu(L.request),he=this.loading[J]=new O(L);he.abort=this.loadVectorData(L,(we,xe)=>{if(delete this.loading[J],we||!xe)return he.status="done",this.loaded[J]=he,G(we);const ge=xe.rawData,Te={};xe.expires&&(Te.expires=xe.expires),xe.cacheControl&&(Te.cacheControl=xe.cacheControl);const Qe={};if(se){const ne=se.finish();ne&&(Qe.resourceTiming=JSON.parse(JSON.stringify(ne)))}he.vectorTile=xe.vectorTile,he.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,Ne)=>{if(delete this.fetching[J],ne||!Ne)return G(ne);G(null,d.e({rawTileData:ge.slice(0)},Ne,Te,Qe))}),this.loaded=this.loaded||{},this.loaded[J]=he,this.fetching[J]={rawTileData:ge,cacheControl:Te,resourceTiming:Qe}})}reloadTile(L,G){const J=this.loaded,se=L.uid;if(J&&J[se]){const he=J[se];he.showCollisionBoxes=L.showCollisionBoxes,he.status==="parsing"?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(we,xe)=>{if(we||!xe)return G(we,xe);let ge;if(this.fetching[se]){const{rawTileData:Te,cacheControl:Qe,resourceTiming:ne}=this.fetching[se];delete this.fetching[se],ge=d.e({rawTileData:Te.slice(0)},xe,Qe,ne)}else ge=xe;G(null,ge)}):he.status==="done"&&(he.vectorTile?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(L,G){const J=this.loading,se=L.uid;J&&J[se]&&J[se].abort&&(J[se].abort(),delete J[se]),G()}removeTile(L,G){const J=this.loaded,se=L.uid;J&&J[se]&&delete J[se],G()}}class pe{constructor(){this.loaded={}}loadTile(L,G){return d._(this,void 0,void 0,function*(){const{uid:J,encoding:se,rawImageData:he,redFactor:we,greenFactor:xe,blueFactor:ge,baseShift:Te}=L,Qe=he.width+2,ne=he.height+2,Ne=d.a(he)?new d.R({width:Qe,height:ne},yield d.bx(he,-1,-1,Qe,ne)):he,te=new d.by(J,Ne,se,we,xe,ge,Te);this.loaded=this.loaded||{},this.loaded[J]=te,G(null,te)})}removeTile(L){const G=this.loaded,J=L.uid;G&&G[J]&&delete G[J]}}function Oe(fe,L){if(fe.length!==0){Se(fe[0],L);for(var G=1;G<fe.length;G++)Se(fe[G],!L)}}function Se(fe,L){for(var G=0,J=0,se=0,he=fe.length,we=he-1;se<he;we=se++){var xe=(fe[se][0]-fe[we][0])*(fe[we][1]+fe[se][1]),ge=G+xe;J+=Math.abs(G)>=Math.abs(xe)?G-ge+xe:xe-ge+G,G=ge}G+J>=0!=!!L&&fe.reverse()}var Pe=d.bz(function fe(L,G){var J,se=L&&L.type;if(se==="FeatureCollection")for(J=0;J<L.features.length;J++)fe(L.features[J],G);else if(se==="GeometryCollection")for(J=0;J<L.geometries.length;J++)fe(L.geometries[J],G);else if(se==="Feature")fe(L.geometry,G);else if(se==="Polygon")Oe(L.coordinates,G);else if(se==="MultiPolygon")for(J=0;J<L.coordinates.length;J++)Oe(L.coordinates[J],G);return L});const De=d.bw.VectorTileFeature.prototype.toGeoJSON;var Ce={exports:{}},ze=d.bA,Re=d.bw.VectorTileFeature,Ze=tt;function tt(fe,L){this.options=L||{},this.features=fe,this.length=fe.length}function ut(fe,L){this.id=typeof fe.id=="number"?fe.id:void 0,this.type=fe.type,this.rawGeometry=fe.type===1?[fe.geometry]:fe.geometry,this.properties=fe.tags,this.extent=L||4096}tt.prototype.feature=function(fe){return new ut(this.features[fe],this.options.extent)},ut.prototype.loadGeometry=function(){var fe=this.rawGeometry;this.geometry=[];for(var L=0;L<fe.length;L++){for(var G=fe[L],J=[],se=0;se<G.length;se++)J.push(new ze(G[se][0],G[se][1]));this.geometry.push(J)}return this.geometry},ut.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fe=this.geometry,L=1/0,G=-1/0,J=1/0,se=-1/0,he=0;he<fe.length;he++)for(var we=fe[he],xe=0;xe<we.length;xe++){var ge=we[xe];L=Math.min(L,ge.x),G=Math.max(G,ge.x),J=Math.min(J,ge.y),se=Math.max(se,ge.y)}return[L,J,G,se]},ut.prototype.toGeoJSON=Re.prototype.toGeoJSON;var Rt=d.bB,zt=Ze;function fn(fe){var L=new Rt;return function(G,J){for(var se in G.layers)J.writeMessage(3,lt,G.layers[se])}(fe,L),L.finish()}function lt(fe,L){var G;L.writeVarintField(15,fe.version||1),L.writeStringField(1,fe.name||""),L.writeVarintField(5,fe.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<fe.length;G++)J.feature=fe.feature(G),L.writeMessage(2,ct,J);var se=J.keys;for(G=0;G<se.length;G++)L.writeStringField(3,se[G]);var he=J.values;for(G=0;G<he.length;G++)L.writeMessage(4,pn,he[G])}function ct(fe,L){var G=fe.feature;G.id!==void 0&&L.writeVarintField(1,G.id),L.writeMessage(2,ht,fe),L.writeVarintField(3,G.type),L.writeMessage(4,Ct,G)}function ht(fe,L){var G=fe.feature,J=fe.keys,se=fe.values,he=fe.keycache,we=fe.valuecache;for(var xe in G.properties){var ge=G.properties[xe],Te=he[xe];if(ge!==null){Te===void 0&&(J.push(xe),he[xe]=Te=J.length-1),L.writeVarint(Te);var Qe=typeof ge;Qe!=="string"&&Qe!=="boolean"&&Qe!=="number"&&(ge=JSON.stringify(ge));var ne=Qe+":"+ge,Ne=we[ne];Ne===void 0&&(se.push(ge),we[ne]=Ne=se.length-1),L.writeVarint(Ne)}}}function $t(fe,L){return(L<<3)+(7&fe)}function An(fe){return fe<<1^fe>>31}function Ct(fe,L){for(var G=fe.loadGeometry(),J=fe.type,se=0,he=0,we=G.length,xe=0;xe<we;xe++){var ge=G[xe],Te=1;J===1&&(Te=ge.length),L.writeVarint($t(1,Te));for(var Qe=J===3?ge.length-1:ge.length,ne=0;ne<Qe;ne++){ne===1&&J!==1&&L.writeVarint($t(2,Qe-1));var Ne=ge[ne].x-se,te=ge[ne].y-he;L.writeVarint(An(Ne)),L.writeVarint(An(te)),se+=Ne,he+=te}J===3&&L.writeVarint($t(7,1))}}function pn(fe,L){var G=typeof fe;G==="string"?L.writeStringField(1,fe):G==="boolean"?L.writeBooleanField(7,fe):G==="number"&&(fe%1!=0?L.writeDoubleField(3,fe):fe<0?L.writeSVarintField(6,fe):L.writeVarintField(5,fe))}Ce.exports=fn,Ce.exports.fromVectorTileJs=fn,Ce.exports.fromGeojsonVt=function(fe,L){L=L||{};var G={};for(var J in fe)G[J]=new zt(fe[J].features,L),G[J].name=J,G[J].version=L.version,G[J].extent=L.extent;return fn({layers:G})},Ce.exports.GeoJSONWrapper=zt;var Sn=d.bz(Ce.exports);const Wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fe=>fe},Yn=Math.fround||(Vn=new Float32Array(1),fe=>(Vn[0]=+fe,Vn[0]));var Vn;const Nt=3,Be=5,Mt=6;class yn{constructor(L){this.options=Object.assign(Object.create(Wt),L),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(L){const{log:G,minZoom:J,maxZoom:se}=this.options;G&&console.time("total time");const he=`prepare ${L.length} points`;G&&console.time(he),this.points=L;const we=[];for(let ge=0;ge<L.length;ge++){const Te=L[ge];if(!Te.geometry)continue;const[Qe,ne]=Te.geometry.coordinates,Ne=Yn(Ft(Qe)),te=Yn(Pn(ne));we.push(Ne,te,1/0,ge,-1,1),this.options.reduce&&we.push(0)}let xe=this.trees[se+1]=this._createTree(we);G&&console.timeEnd(he);for(let ge=se;ge>=J;ge--){const Te=+Date.now();xe=this.trees[ge]=this._createTree(this._cluster(xe,ge)),G&&console.log("z%d: %d clusters in %dms",ge,xe.numItems,+Date.now()-Te)}return G&&console.timeEnd("total time"),this}getClusters(L,G){let J=((L[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,L[1]));let he=L[2]===180?180:((L[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)J=-180,he=180;else if(J>he){const ne=this.getClusters([J,se,180,we],G),Ne=this.getClusters([-180,se,he,we],G);return ne.concat(Ne)}const xe=this.trees[this._limitZoom(G)],ge=xe.range(Ft(J),Pn(we),Ft(he),Pn(se)),Te=xe.data,Qe=[];for(const ne of ge){const Ne=this.stride*ne;Qe.push(Te[Ne+Be]>1?Dn(Te,Ne,this.clusterProps):this.points[Te[Ne+Nt]])}return Qe}getChildren(L){const G=this._getOriginId(L),J=this._getOriginZoom(L),se="No cluster with the specified id.",he=this.trees[J];if(!he)throw new Error(se);const we=he.data;if(G*this.stride>=we.length)throw new Error(se);const xe=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ge=he.within(we[G*this.stride],we[G*this.stride+1],xe),Te=[];for(const Qe of ge){const ne=Qe*this.stride;we[ne+4]===L&&Te.push(we[ne+Be]>1?Dn(we,ne,this.clusterProps):this.points[we[ne+Nt]])}if(Te.length===0)throw new Error(se);return Te}getLeaves(L,G,J){const se=[];return this._appendLeaves(se,L,G=G||10,J=J||0,0),se}getTile(L,G,J){const se=this.trees[this._limitZoom(L)],he=Math.pow(2,L),{extent:we,radius:xe}=this.options,ge=xe/we,Te=(J-ge)/he,Qe=(J+1+ge)/he,ne={features:[]};return this._addTileFeatures(se.range((G-ge)/he,Te,(G+1+ge)/he,Qe),se.data,G,J,he,ne),G===0&&this._addTileFeatures(se.range(1-ge/he,Te,1,Qe),se.data,he,J,he,ne),G===he-1&&this._addTileFeatures(se.range(0,Te,ge/he,Qe),se.data,-1,J,he,ne),ne.features.length?ne:null}getClusterExpansionZoom(L){let G=this._getOriginZoom(L)-1;for(;G<=this.options.maxZoom;){const J=this.getChildren(L);if(G++,J.length!==1)break;L=J[0].properties.cluster_id}return G}_appendLeaves(L,G,J,se,he){const we=this.getChildren(G);for(const xe of we){const ge=xe.properties;if(ge&&ge.cluster?he+ge.point_count<=se?he+=ge.point_count:he=this._appendLeaves(L,ge.cluster_id,J,se,he):he<se?he++:L.push(xe),L.length===J)break}return he}_createTree(L){const G=new d.av(L.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<L.length;J+=this.stride)G.add(L[J],L[J+1]);return G.finish(),G.data=L,G}_addTileFeatures(L,G,J,se,he,we){for(const xe of L){const ge=xe*this.stride,Te=G[ge+Be]>1;let Qe,ne,Ne;if(Te)Qe=qt(G,ge,this.clusterProps),ne=G[ge],Ne=G[ge+1];else{const Fe=this.points[G[ge+Nt]];Qe=Fe.properties;const[Ke,dt]=Fe.geometry.coordinates;ne=Ft(Ke),Ne=Pn(dt)}const te={type:1,geometry:[[Math.round(this.options.extent*(ne*he-J)),Math.round(this.options.extent*(Ne*he-se))]],tags:Qe};let Ae;Ae=Te||this.options.generateId?G[ge+Nt]:this.points[G[ge+Nt]].id,Ae!==void 0&&(te.id=Ae),we.features.push(te)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,G){const{radius:J,extent:se,reduce:he,minPoints:we}=this.options,xe=J/(se*Math.pow(2,G)),ge=L.data,Te=[],Qe=this.stride;for(let ne=0;ne<ge.length;ne+=Qe){if(ge[ne+2]<=G)continue;ge[ne+2]=G;const Ne=ge[ne],te=ge[ne+1],Ae=L.within(ge[ne],ge[ne+1],xe),Fe=ge[ne+Be];let Ke=Fe;for(const dt of Ae){const pt=dt*Qe;ge[pt+2]>G&&(Ke+=ge[pt+Be])}if(Ke>Fe&&Ke>=we){let dt,pt=Ne*Fe,Ot=te*Fe,_t=-1;const Ut=((ne/Qe|0)<<5)+(G+1)+this.points.length;for(const wn of Ae){const gn=wn*Qe;if(ge[gn+2]<=G)continue;ge[gn+2]=G;const Un=ge[gn+Be];pt+=ge[gn]*Un,Ot+=ge[gn+1]*Un,ge[gn+4]=Ut,he&&(dt||(dt=this._map(ge,ne,!0),_t=this.clusterProps.length,this.clusterProps.push(dt)),he(dt,this._map(ge,gn)))}ge[ne+4]=Ut,Te.push(pt/Ke,Ot/Ke,1/0,Ut,-1,Ke),he&&Te.push(_t)}else{for(let dt=0;dt<Qe;dt++)Te.push(ge[ne+dt]);if(Ke>1)for(const dt of Ae){const pt=dt*Qe;if(!(ge[pt+2]<=G)){ge[pt+2]=G;for(let Ot=0;Ot<Qe;Ot++)Te.push(ge[pt+Ot])}}}}return Te}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,G,J){if(L[G+Be]>1){const we=this.clusterProps[L[G+Mt]];return J?Object.assign({},we):we}const se=this.points[L[G+Nt]].properties,he=this.options.map(se);return J&&he===se?Object.assign({},he):he}}function Dn(fe,L,G){return{type:"Feature",id:fe[L+Nt],properties:qt(fe,L,G),geometry:{type:"Point",coordinates:[(J=fe[L],360*(J-.5)),vr(fe[L+1])]}};var J}function qt(fe,L,G){const J=fe[L+Be],se=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,he=fe[L+Mt],we=he===-1?{}:Object.assign({},G[he]);return Object.assign(we,{cluster:!0,cluster_id:fe[L+Nt],point_count:J,point_count_abbreviated:se})}function Ft(fe){return fe/360+.5}function Pn(fe){const L=Math.sin(fe*Math.PI/180),G=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return G<0?0:G>1?1:G}function vr(fe){const L=(180-360*fe)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function cn(fe,L,G,J){for(var se,he=J,we=G-L>>1,xe=G-L,ge=fe[L],Te=fe[L+1],Qe=fe[G],ne=fe[G+1],Ne=L+3;Ne<G;Ne+=3){var te=tr(fe[Ne],fe[Ne+1],ge,Te,Qe,ne);if(te>he)se=Ne,he=te;else if(te===he){var Ae=Math.abs(Ne-we);Ae<xe&&(se=Ne,xe=Ae)}}he>J&&(se-L>3&&cn(fe,L,se,J),fe[se+2]=he,G-se>3&&cn(fe,se,G,J))}function tr(fe,L,G,J,se,he){var we=se-G,xe=he-J;if(we!==0||xe!==0){var ge=((fe-G)*we+(L-J)*xe)/(we*we+xe*xe);ge>1?(G=se,J=he):ge>0&&(G+=we*ge,J+=xe*ge)}return(we=fe-G)*we+(xe=L-J)*xe}function $r(fe,L,G,J){var se={id:fe===void 0?null:fe,type:L,geometry:G,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(he){var we=he.geometry,xe=he.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Sr(he,we);else if(xe==="Polygon"||xe==="MultiLineString")for(var ge=0;ge<we.length;ge++)Sr(he,we[ge]);else if(xe==="MultiPolygon")for(ge=0;ge<we.length;ge++)for(var Te=0;Te<we[ge].length;Te++)Sr(he,we[ge][Te])}(se),se}function Sr(fe,L){for(var G=0;G<L.length;G+=3)fe.minX=Math.min(fe.minX,L[G]),fe.minY=Math.min(fe.minY,L[G+1]),fe.maxX=Math.max(fe.maxX,L[G]),fe.maxY=Math.max(fe.maxY,L[G+1])}function ur(fe,L,G,J){if(L.geometry){var se=L.geometry.coordinates,he=L.geometry.type,we=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),xe=[],ge=L.id;if(G.promoteId?ge=L.properties[G.promoteId]:G.generateId&&(ge=J||0),he==="Point")hi(se,xe);else if(he==="MultiPoint")for(var Te=0;Te<se.length;Te++)hi(se[Te],xe);else if(he==="LineString")Lr(se,xe,we,!1);else if(he==="MultiLineString"){if(G.lineMetrics){for(Te=0;Te<se.length;Te++)Lr(se[Te],xe=[],we,!1),fe.push($r(ge,"LineString",xe,L.properties));return}ii(se,xe,we,!1)}else if(he==="Polygon")ii(se,xe,we,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(Te=0;Te<L.geometry.geometries.length;Te++)ur(fe,{id:ge,geometry:L.geometry.geometries[Te],properties:L.properties},G,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Te=0;Te<se.length;Te++){var Qe=[];ii(se[Te],Qe,we,!0),xe.push(Qe)}}fe.push($r(ge,he,xe,L.properties))}}function hi(fe,L){L.push(We(fe[0])),L.push(mr(fe[1])),L.push(0)}function Lr(fe,L,G,J){for(var se,he,we=0,xe=0;xe<fe.length;xe++){var ge=We(fe[xe][0]),Te=mr(fe[xe][1]);L.push(ge),L.push(Te),L.push(0),xe>0&&(we+=J?(se*Te-ge*he)/2:Math.sqrt(Math.pow(ge-se,2)+Math.pow(Te-he,2))),se=ge,he=Te}var Qe=L.length-3;L[2]=1,cn(L,0,Qe,G),L[Qe+2]=1,L.size=Math.abs(we),L.start=0,L.end=L.size}function ii(fe,L,G,J){for(var se=0;se<fe.length;se++){var he=[];Lr(fe[se],he,G,J),L.push(he)}}function We(fe){return fe/360+.5}function mr(fe){var L=Math.sin(fe*Math.PI/180),G=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return G<0?0:G>1?1:G}function rr(fe,L,G,J,se,he,we,xe){if(J/=L,he>=(G/=L)&&we<J)return fe;if(we<G||he>=J)return null;for(var ge=[],Te=0;Te<fe.length;Te++){var Qe=fe[Te],ne=Qe.geometry,Ne=Qe.type,te=se===0?Qe.minX:Qe.minY,Ae=se===0?Qe.maxX:Qe.maxY;if(te>=G&&Ae<J)ge.push(Qe);else if(!(Ae<G||te>=J)){var Fe=[];if(Ne==="Point"||Ne==="MultiPoint")Ln(ne,Fe,G,J,se);else if(Ne==="LineString")kn(ne,Fe,G,J,se,!1,xe.lineMetrics);else if(Ne==="MultiLineString")si(ne,Fe,G,J,se,!1);else if(Ne==="Polygon")si(ne,Fe,G,J,se,!0);else if(Ne==="MultiPolygon")for(var Ke=0;Ke<ne.length;Ke++){var dt=[];si(ne[Ke],dt,G,J,se,!0),dt.length&&Fe.push(dt)}if(Fe.length){if(xe.lineMetrics&&Ne==="LineString"){for(Ke=0;Ke<Fe.length;Ke++)ge.push($r(Qe.id,Ne,Fe[Ke],Qe.tags));continue}Ne!=="LineString"&&Ne!=="MultiLineString"||(Fe.length===1?(Ne="LineString",Fe=Fe[0]):Ne="MultiLineString"),Ne!=="Point"&&Ne!=="MultiPoint"||(Ne=Fe.length===3?"Point":"MultiPoint"),ge.push($r(Qe.id,Ne,Fe,Qe.tags))}}}return ge.length?ge:null}function Ln(fe,L,G,J,se){for(var he=0;he<fe.length;he+=3){var we=fe[he+se];we>=G&&we<=J&&(L.push(fe[he]),L.push(fe[he+1]),L.push(fe[he+2]))}}function kn(fe,L,G,J,se,he,we){for(var xe,ge,Te=yr(fe),Qe=se===0?fs:Bi,ne=fe.start,Ne=0;Ne<fe.length-3;Ne+=3){var te=fe[Ne],Ae=fe[Ne+1],Fe=fe[Ne+2],Ke=fe[Ne+3],dt=fe[Ne+4],pt=se===0?te:Ae,Ot=se===0?Ke:dt,_t=!1;we&&(xe=Math.sqrt(Math.pow(te-Ke,2)+Math.pow(Ae-dt,2))),pt<G?Ot>G&&(ge=Qe(Te,te,Ae,Ke,dt,G),we&&(Te.start=ne+xe*ge)):pt>J?Ot<J&&(ge=Qe(Te,te,Ae,Ke,dt,J),we&&(Te.start=ne+xe*ge)):qr(Te,te,Ae,Fe),Ot<G&&pt>=G&&(ge=Qe(Te,te,Ae,Ke,dt,G),_t=!0),Ot>J&&pt<=J&&(ge=Qe(Te,te,Ae,Ke,dt,J),_t=!0),!he&&_t&&(we&&(Te.end=ne+xe*ge),L.push(Te),Te=yr(fe)),we&&(ne+=xe)}var Ut=fe.length-3;te=fe[Ut],Ae=fe[Ut+1],Fe=fe[Ut+2],(pt=se===0?te:Ae)>=G&&pt<=J&&qr(Te,te,Ae,Fe),Ut=Te.length-3,he&&Ut>=3&&(Te[Ut]!==Te[0]||Te[Ut+1]!==Te[1])&&qr(Te,Te[0],Te[1],Te[2]),Te.length&&L.push(Te)}function yr(fe){var L=[];return L.size=fe.size,L.start=fe.start,L.end=fe.end,L}function si(fe,L,G,J,se,he){for(var we=0;we<fe.length;we++)kn(fe[we],L,G,J,se,he,!1)}function qr(fe,L,G,J){fe.push(L),fe.push(G),fe.push(J)}function fs(fe,L,G,J,se,he){var we=(he-L)/(J-L);return fe.push(he),fe.push(G+(se-G)*we),fe.push(1),we}function Bi(fe,L,G,J,se,he){var we=(he-G)/(se-G);return fe.push(L+(J-L)*we),fe.push(he),fe.push(1),we}function Tt(fe,L){for(var G=[],J=0;J<fe.length;J++){var se,he=fe[J],we=he.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")se=rn(he.geometry,L);else if(we==="MultiLineString"||we==="Polygon"){se=[];for(var xe=0;xe<he.geometry.length;xe++)se.push(rn(he.geometry[xe],L))}else if(we==="MultiPolygon")for(se=[],xe=0;xe<he.geometry.length;xe++){for(var ge=[],Te=0;Te<he.geometry[xe].length;Te++)ge.push(rn(he.geometry[xe][Te],L));se.push(ge)}G.push($r(he.id,we,se,he.tags))}return G}function rn(fe,L){var G=[];G.size=fe.size,fe.start!==void 0&&(G.start=fe.start,G.end=fe.end);for(var J=0;J<fe.length;J+=3)G.push(fe[J]+L,fe[J+1],fe[J+2]);return G}function nt(fe,L){if(fe.transformed)return fe;var G,J,se,he=1<<fe.z,we=fe.x,xe=fe.y;for(G=0;G<fe.features.length;G++){var ge=fe.features[G],Te=ge.geometry,Qe=ge.type;if(ge.geometry=[],Qe===1)for(J=0;J<Te.length;J+=2)ge.geometry.push(zn(Te[J],Te[J+1],L,he,we,xe));else for(J=0;J<Te.length;J++){var ne=[];for(se=0;se<Te[J].length;se+=2)ne.push(zn(Te[J][se],Te[J][se+1],L,he,we,xe));ge.geometry.push(ne)}}return fe.transformed=!0,fe}function zn(fe,L,G,J,se,he){return[Math.round(G*(fe*J-se)),Math.round(G*(L*J-he))]}function Cn(fe,L,G,J,se){for(var he=L===se.maxZoom?0:se.tolerance/((1<<L)*se.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:J,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<fe.length;xe++){we.numFeatures++,br(we,fe[xe],he,se);var ge=fe[xe].minX,Te=fe[xe].minY,Qe=fe[xe].maxX,ne=fe[xe].maxY;ge<we.minX&&(we.minX=ge),Te<we.minY&&(we.minY=Te),Qe>we.maxX&&(we.maxX=Qe),ne>we.maxY&&(we.maxY=ne)}return we}function br(fe,L,G,J){var se=L.geometry,he=L.type,we=[];if(he==="Point"||he==="MultiPoint")for(var xe=0;xe<se.length;xe+=3)we.push(se[xe]),we.push(se[xe+1]),fe.numPoints++,fe.numSimplified++;else if(he==="LineString")dr(we,se,fe,G,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(xe=0;xe<se.length;xe++)dr(we,se[xe],fe,G,he==="Polygon",xe===0);else if(he==="MultiPolygon")for(var ge=0;ge<se.length;ge++){var Te=se[ge];for(xe=0;xe<Te.length;xe++)dr(we,Te[xe],fe,G,!0,xe===0)}if(we.length){var Qe=L.tags||null;if(he==="LineString"&&J.lineMetrics){for(var ne in Qe={},L.tags)Qe[ne]=L.tags[ne];Qe.mapbox_clip_start=se.start/se.size,Qe.mapbox_clip_end=se.end/se.size}var Ne={geometry:we,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Qe};L.id!==null&&(Ne.id=L.id),fe.features.push(Ne)}}function dr(fe,L,G,J,se,he){var we=J*J;if(J>0&&L.size<(se?we:J))G.numPoints+=L.length/3;else{for(var xe=[],ge=0;ge<L.length;ge+=3)(J===0||L[ge+2]>we)&&(G.numSimplified++,xe.push(L[ge]),xe.push(L[ge+1])),G.numPoints++;se&&function(Te,Qe){for(var ne=0,Ne=0,te=Te.length,Ae=te-2;Ne<te;Ae=Ne,Ne+=2)ne+=(Te[Ne]-Te[Ae])*(Te[Ne+1]+Te[Ae+1]);if(ne>0===Qe)for(Ne=0,te=Te.length;Ne<te/2;Ne+=2){var Fe=Te[Ne],Ke=Te[Ne+1];Te[Ne]=Te[te-2-Ne],Te[Ne+1]=Te[te-1-Ne],Te[te-2-Ne]=Fe,Te[te-1-Ne]=Ke}}(xe,he),fe.push(xe)}}function gt(fe,L){var G=(L=this.options=function(se,he){for(var we in he)se[we]=he[we];return se}(Object.create(this.options),L)).debug;if(G&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var J=function(se,he){var we=[];if(se.type==="FeatureCollection")for(var xe=0;xe<se.features.length;xe++)ur(we,se.features[xe],he,xe);else ur(we,se.type==="Feature"?se:{geometry:se},he);return we}(fe,L);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(se,he){var we=he.buffer/he.extent,xe=se,ge=rr(se,1,-1-we,we,0,-1,2,he),Te=rr(se,1,1-we,2+we,0,-1,2,he);return(ge||Te)&&(xe=rr(se,1,-we,1+we,0,-1,2,he)||[],ge&&(xe=Tt(ge,1).concat(xe)),Te&&(xe=xe.concat(Tt(Te,-1)))),xe}(J,L),J.length&&this.splitTile(J,0,0,0),G&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kt(fe,L,G){return 32*((1<<fe)*G+L)+fe}function Bt(fe,L){return L?fe.properties[L]:fe.id}function On(fe,L){if(fe==null)return!0;if(fe.type==="Feature")return Bt(fe,L)!=null;if(fe.type==="FeatureCollection"){const G=new Set;for(const J of fe.features){const se=Bt(J,L);if(se==null||G.has(se))return!1;G.add(se)}return!0}return!1}function Kr(fe,L){const G=new Map;if(fe!=null)if(fe.type==="Feature")G.set(Bt(fe,L),fe);else for(const J of fe.features)G.set(Bt(J,L),J);return G}gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(fe,L,G,J,se,he,we){for(var xe=[fe,L,G,J],ge=this.options,Te=ge.debug;xe.length;){J=xe.pop(),G=xe.pop(),L=xe.pop(),fe=xe.pop();var Qe=1<<L,ne=Kt(L,G,J),Ne=this.tiles[ne];if(!Ne&&(Te>1&&console.time("creation"),Ne=this.tiles[ne]=Cn(fe,L,G,J,ge),this.tileCoords.push({z:L,x:G,y:J}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,G,J,Ne.numFeatures,Ne.numPoints,Ne.numSimplified),console.timeEnd("creation"));var te="z"+L;this.stats[te]=(this.stats[te]||0)+1,this.total++}if(Ne.source=fe,se){if(L===ge.maxZoom||L===se)continue;var Ae=1<<se-L;if(G!==Math.floor(he/Ae)||J!==Math.floor(we/Ae))continue}else if(L===ge.indexMaxZoom||Ne.numPoints<=ge.indexMaxPoints)continue;if(Ne.source=null,fe.length!==0){Te>1&&console.time("clipping");var Fe,Ke,dt,pt,Ot,_t,Ut=.5*ge.buffer/ge.extent,wn=.5-Ut,gn=.5+Ut,Un=1+Ut;Fe=Ke=dt=pt=null,Ot=rr(fe,Qe,G-Ut,G+gn,0,Ne.minX,Ne.maxX,ge),_t=rr(fe,Qe,G+wn,G+Un,0,Ne.minX,Ne.maxX,ge),fe=null,Ot&&(Fe=rr(Ot,Qe,J-Ut,J+gn,1,Ne.minY,Ne.maxY,ge),Ke=rr(Ot,Qe,J+wn,J+Un,1,Ne.minY,Ne.maxY,ge),Ot=null),_t&&(dt=rr(_t,Qe,J-Ut,J+gn,1,Ne.minY,Ne.maxY,ge),pt=rr(_t,Qe,J+wn,J+Un,1,Ne.minY,Ne.maxY,ge),_t=null),Te>1&&console.timeEnd("clipping"),xe.push(Fe||[],L+1,2*G,2*J),xe.push(Ke||[],L+1,2*G,2*J+1),xe.push(dt||[],L+1,2*G+1,2*J),xe.push(pt||[],L+1,2*G+1,2*J+1)}}},gt.prototype.getTile=function(fe,L,G){var J=this.options,se=J.extent,he=J.debug;if(fe<0||fe>24)return null;var we=1<<fe,xe=Kt(fe,L=(L%we+we)%we,G);if(this.tiles[xe])return nt(this.tiles[xe],se);he>1&&console.log("drilling down to z%d-%d-%d",fe,L,G);for(var ge,Te=fe,Qe=L,ne=G;!ge&&Te>0;)Te--,Qe=Math.floor(Qe/2),ne=Math.floor(ne/2),ge=this.tiles[Kt(Te,Qe,ne)];return ge&&ge.source?(he>1&&console.log("found parent tile z%d-%d-%d",Te,Qe,ne),he>1&&console.time("drilling down"),this.splitTile(ge.source,Te,Qe,ne,fe,L,G),he>1&&console.timeEnd("drilling down"),this.tiles[xe]?nt(this.tiles[xe],se):null):null};class un extends ie{constructor(L,G,J,se){super(L,G,J),this._dataUpdateable=new Map,this.loadGeoJSON=(he,we)=>{const{promoteId:xe}=he;if(he.request)return d.f(he.request,(ge,Te,Qe,ne)=>{this._dataUpdateable=On(Te,xe)?Kr(Te,xe):void 0,we(ge,Te,Qe,ne)});if(typeof he.data=="string")try{const ge=JSON.parse(he.data);this._dataUpdateable=On(ge,xe)?Kr(ge,xe):void 0,we(null,ge)}catch{we(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`))}else he.dataDiff?this._dataUpdateable?(function(ge,Te,Qe){var ne,Ne,te,Ae;if(Te.removeAll&&ge.clear(),Te.remove)for(const Fe of Te.remove)ge.delete(Fe);if(Te.add)for(const Fe of Te.add){const Ke=Bt(Fe,Qe);Ke!=null&&ge.set(Ke,Fe)}if(Te.update)for(const Fe of Te.update){let Ke=ge.get(Fe.id);if(Ke==null)continue;const dt=!Fe.removeAllProperties&&(((ne=Fe.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((Ne=Fe.addOrUpdateProperties)===null||Ne===void 0?void 0:Ne.length)>0);if((Fe.newGeometry||Fe.removeAllProperties||dt)&&(Ke=Object.assign({},Ke),ge.set(Fe.id,Ke),dt&&(Ke.properties=Object.assign({},Ke.properties))),Fe.newGeometry&&(Ke.geometry=Fe.newGeometry),Fe.removeAllProperties)Ke.properties={};else if(((te=Fe.removeProperties)===null||te===void 0?void 0:te.length)>0)for(const pt of Fe.removeProperties)Object.prototype.hasOwnProperty.call(Ke.properties,pt)&&delete Ke.properties[pt];if(((Ae=Fe.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(const{key:pt,value:Ot}of Fe.addOrUpdateProperties)Ke.properties[pt]=Ot}}(this._dataUpdateable,he.dataDiff,xe),we(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):we(new Error(`Cannot update existing geojson data in ${he.source}`)):we(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile(L,G){const J=L.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const se=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!se)return G(null,null);const he=new class{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.N,this.length=xe.length,this._features=xe}feature(xe){return new class{constructor(ge){this._feature=ge,this.extent=d.N,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))}loadGeometry(){if(this._feature.type===1){const ge=[];for(const Te of this._feature.geometry)ge.push([new d.P(Te[0],Te[1])]);return ge}{const ge=[];for(const Te of this._feature.geometry){const Qe=[];for(const ne of Te)Qe.push(new d.P(ne[0],ne[1]));ge.push(Qe)}return ge}}toGeoJSON(ge,Te,Qe){return De.call(this,ge,Te,Qe)}}(this._features[xe])}}(se.features);let we=Sn(he);we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),G(null,{vectorTile:he,rawData:we.buffer})}loadData(L,G){var J;(J=this._pendingRequest)===null||J===void 0||J.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(L&&L.request&&L.request.collectResourceTiming)&&new d.bu(L.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(L,(he,we)=>{if(delete this._pendingCallback,delete this._pendingRequest,he||!we)return G(he);if(typeof we!="object")return G(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{Pe(we,!0);try{if(L.filter){const ge=d.bC(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));we={type:"FeatureCollection",features:we.features.filter(Qe=>ge.value.evaluate({zoom:0},Qe))}}this._geoJSONIndex=L.cluster?new yn(function({superclusterOptions:ge,clusterProperties:Te}){if(!Te||!ge)return ge;const Qe={},ne={},Ne={accumulated:null,zoom:0},te={properties:null},Ae=Object.keys(Te);for(const Fe of Ae){const[Ke,dt]=Te[Fe],pt=d.bC(dt),Ot=d.bC(typeof Ke=="string"?[Ke,["accumulated"],["get",Fe]]:Ke);Qe[Fe]=pt.value,ne[Fe]=Ot.value}return ge.map=Fe=>{te.properties=Fe;const Ke={};for(const dt of Ae)Ke[dt]=Qe[dt].evaluate(Ne,te);return Ke},ge.reduce=(Fe,Ke)=>{te.properties=Ke;for(const dt of Ae)Ne.accumulated=Fe[dt],Fe[dt]=ne[dt].evaluate(Ne,te)},ge}(L)).load(we.features):function(ge,Te){return new gt(ge,Te)}(we,L.geojsonVtOptions)}catch(ge){return G(ge)}this.loaded={};const xe={};if(se){const ge=se.finish();ge&&(xe.resourceTiming={},xe.resourceTiming[L.source]=JSON.parse(JSON.stringify(ge)))}G(null,xe)}})}reloadTile(L,G){const J=this.loaded;return J&&J[L.uid]?super.reloadTile(L,G):this.loadTile(L,G)}removeSource(L,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(L,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(J){G(J)}}getClusterChildren(L,G){try{G(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(J){G(J)}}getClusterLeaves(L,G){try{G(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(J){G(J)}}}class ai{constructor(L){this.self=L,this.actor=new d.C(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ie,geojson:un},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,J)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=J},this.self.registerRTLTextPlugin=G=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.applyArabicShaping=G.applyArabicShaping,d.bD.processBidirectionalText=G.processBidirectionalText,d.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(L,G){this.referrer=G}setImages(L,G,J){this.availableImages[L]=G;for(const se in this.workerSources[L]){const he=this.workerSources[L][se];for(const we in he)he[we].availableImages=G}J()}setLayers(L,G,J){this.getLayerIndex(L).replace(G),J()}updateLayers(L,G,J){this.getLayerIndex(L).update(G.layers,G.removedIds),J()}loadTile(L,G,J){this.getWorkerSource(L,G.type,G.source).loadTile(G,J)}loadDEMTile(L,G,J){this.getDEMWorkerSource(L,G.source).loadTile(G,J)}reloadTile(L,G,J){this.getWorkerSource(L,G.type,G.source).reloadTile(G,J)}abortTile(L,G,J){this.getWorkerSource(L,G.type,G.source).abortTile(G,J)}removeTile(L,G,J){this.getWorkerSource(L,G.type,G.source).removeTile(G,J)}removeDEMTile(L,G){this.getDEMWorkerSource(L,G.source).removeTile(G)}removeSource(L,G,J){if(!this.workerSources[L]||!this.workerSources[L][G.type]||!this.workerSources[L][G.type][G.source])return;const se=this.workerSources[L][G.type][G.source];delete this.workerSources[L][G.type][G.source],se.removeSource!==void 0?se.removeSource(G,J):J()}loadWorkerSource(L,G,J){try{this.self.importScripts(G.url),J()}catch(se){J(se.toString())}}syncRTLPluginState(L,G,J){try{d.bD.setState(G);const se=d.bD.getPluginURL();if(d.bD.isLoaded()&&!d.bD.isParsed()&&se!=null){this.self.importScripts(se);const he=d.bD.isParsed();J(he?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),he)}}catch(se){J(se.toString())}}getAvailableImages(L){let G=this.availableImages[L];return G||(G=[]),G}getLayerIndex(L){let G=this.layerIndexes[L];return G||(G=this.layerIndexes[L]=new A),G}getWorkerSource(L,G,J){return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][G]||(this.workerSources[L][G]={}),this.workerSources[L][G][J]||(this.workerSources[L][G][J]=new this.workerSourceTypes[G]({send:(se,he,we)=>{this.actor.send(se,he,we,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][G][J]}getDEMWorkerSource(L,G){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][G]||(this.demWorkerSources[L][G]=new pe),this.demWorkerSources[L][G]}}return d.i()&&(self.worker=new ai(self)),ai}),N(["./shared"],function(d){var A="3.6.2";class k{static testProp(r){if(!k.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in k.docStyle)return r[u];return r[0]}static create(r,u,m){const y=window.document.createElement(r);return u!==void 0&&(y.className=u),m&&m.appendChild(y),y}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(r,u){r.style[k.transformProp]=u}static addEventListener(r,u,m,y={}){r.addEventListener(u,m,"passive"in y?y:y.capture)}static removeEventListener(r,u,m,y={}){r.removeEventListener(u,m,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static mousePos(r,u){const m=r.getBoundingClientRect();return new d.P(u.clientX-m.left-r.clientLeft,u.clientY-m.top-r.clientTop)}static touchPos(r,u){const m=r.getBoundingClientRect(),y=[];for(let _=0;_<u.length;_++)y.push(new d.P(u[_].clientX-m.left-r.clientLeft,u[_].clientY-m.top-r.clientTop));return y}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(x){!ie&&W&&(pe?Oe(x):B=x)}};let B,W,ie=!1,pe=!1;function Oe(x){const r=x.createTexture();x.bindTexture(x.TEXTURE_2D,r);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,W),x.isContextLost())return;O.supported=!0}catch{}x.deleteTexture(r),ie=!0}var Se,Pe;typeof document<"u"&&(W=document.createElement("img"),W.onload=function(){B&&Oe(B),B=null,pe=!0},W.onerror=function(){ie=!0,B=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(x){let r,u,m,y;x.resetRequestQueue=()=>{r=[],u=0,m=0,y={}},x.addThrottleControl=z=>{const U=m++;return y[U]=z,U},x.removeThrottleControl=z=>{delete y[z],j()},x.getImage=(z,U,q=!0)=>{O.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*");const X={requestParameters:z,supportImageRefresh:q,callback:U,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),u--),j())}};return r.push(X),j(),X};const _=z=>{const{requestParameters:U,supportImageRefresh:q,callback:X}=z;return d.e(U,{type:"image"}),(q!==!1||d.i()||d.g(U.url)||U.headers&&!Object.keys(U.headers).reduce((le,ce)=>le&&ce==="accept",!0)?d.m:R)(U,(le,ce,me,ae)=>{P(z,X,le,ce,me,ae)})},P=(z,U,q,X,le,ce)=>{q?U(q):X instanceof HTMLImageElement||d.a(X)?U(null,X):X&&((me,ae)=>{typeof createImageBitmap=="function"?d.b(me,ae):d.d(me,ae)})(X,(me,ae)=>{me!=null?U(me):ae!=null&&U(null,ae,{cacheControl:le,expires:ce})}),z.cancelled||(z.completed=!0,u--,j())},j=()=>{const z=(()=>{const U=Object.keys(y);let q=!1;if(U.length>0){for(const X of U)if(q=y[X](),q)break}return q})()?d.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=u;U<z&&r.length>0;U++){const q=r.shift();if(q.cancelled){U--;continue}const X=_(q);u++,q.innerRequest=X}},R=(z,U)=>{const q=new Image,X=z.url;let le=!1;const ce=z.credentials;return ce&&ce==="include"?q.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!d.s(X))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{U(null,q),q.onerror=q.onload=null},q.onerror=()=>{le||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=X,{cancel:()=>{le=!0,q.src=""}}}}(Se||(Se={})),Se.resetRequestQueue(),function(x){x.Glyphs="Glyphs",x.Image="Image",x.Source="Source",x.SpriteImage="SpriteImage",x.SpriteJSON="SpriteJSON",x.Style="Style",x.Tile="Tile",x.Unknown="Unknown"}(Pe||(Pe={}));class De{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,m){const y=function(_){const P=_.match(Ce);if(!P)throw new Error(`Unable to parse URL "${_}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(r);return y.path+=`${u}${m}`,function(_){const P=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${P}`}(y)}setTransformRequest(r){this._transformRequestFn=r}}const Ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(x){var r=new d.A(3);return r[0]=x[0],r[1]=x[1],r[2]=x[2],r}var Re,Ze=function(x,r,u){return x[0]=r[0]-u[0],x[1]=r[1]-u[1],x[2]=r[2]-u[2],x};Re=new d.A(3),d.A!=Float32Array&&(Re[0]=0,Re[1]=0,Re[2]=0);var tt=function(x){var r=x[0],u=x[1];return r*r+u*u};function ut(x){const r=[];if(typeof x=="string")r.push({id:"default",url:x});else if(x&&x.length>0){const u=[];for(const{id:m,url:y}of x){const _=`${m}${y}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:m,url:y}))}}return r}function Rt(x,r,u,m,y){if(m)return void x(m);if(y!==Object.values(r).length||y!==Object.values(u).length)return;const _={};for(const P in r){_[P]={};const j=d.h.getImageCanvasContext(u[P]),R=r[P];for(const z in R){const{width:U,height:q,x:X,y:le,sdf:ce,pixelRatio:me,stretchX:ae,stretchY:je,content:Ue}=R[z];_[P][z]={data:null,pixelRatio:me,sdf:ce,stretchX:ae,stretchY:je,content:Ue,spriteData:{width:U,height:q,x:X,y:le,context:j}}}}x(null,_)}(function(){var x=new d.A(2);d.A!=Float32Array&&(x[0]=0,x[1]=0)})();class zt{constructor(r,u,m,y){this.context=r,this.format=m,this.texture=r.gl.createTexture(),this.update(u,y)}update(r,u,m){const{width:y,height:_}=r,P=!(this.size&&this.size[0]===y&&this.size[1]===_||m),{context:j}=this,{gl:R}=j;if(this.useMipmap=!!(u&&u.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[y,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||d.a(r)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,y,_,0,this.format,R.UNSIGNED_BYTE,r.data);else{const{x:z,y:U}=m||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||d.a(r)?R.texSubImage2D(R.TEXTURE_2D,0,z,U,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,z,U,y,_,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(r,u,m){const{context:y}=this,{gl:_}=y;_.bindTexture(_.TEXTURE_2D,this.texture),m!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,m||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function fn(x){const{userImage:r}=x;return!!(r&&r.render&&r.render())&&(x.data.replace(new Uint8Array(r.data.buffer)),!0)}class lt extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:m}of this.requestors)this._notify(u,m);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const m=u.spriteData;u.data=new d.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let m=!0;const y=u.data||u.spriteData;return this._validateStretch(u.stretchX,y&&y.width)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,y&&y.height)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new d.j(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,u){if(!r)return!0;let m=0;for(const y of r){if(y[0]<m||y[1]<y[0]||u<y[1])return!1;m=y[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const m=u.spriteData,y=m&&m.width||u.data.width,_=m&&m.height||u.data.height;return!(r[0]<0||y<r[0]||r[1]<0||_<r[1]||r[2]<0||y<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,m=!0){const y=this.getImage(r);if(m&&(y.data.width!==u.data.width||y.data.height!==u.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=y.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let m=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(m=!1);this.isLoaded()||m?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const m={};for(const y of r){let _=this.getImage(y);_||(this.fire(new d.k("styleimagemissing",{id:y})),_=this.getImage(y)),_?m[y]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:d.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,m)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],m=this.getImage(r);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const y={w:m.data.width+2,h:m.data.height+2,x:0,y:0},_=new d.I(y,m);this.patterns[r]={bin:y,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new zt(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:m}=d.p(r),y=this.atlasImage;y.resize({width:u||1,height:m||1});for(const _ in this.patterns){const{bin:P}=this.patterns[_],j=P.x+1,R=P.y+1,z=this.getImage(_).data,U=z.width,q=z.height;d.R.copy(z,y,{x:0,y:0},{x:j,y:R},{width:U,height:q}),d.R.copy(z,y,{x:0,y:q-1},{x:j,y:R-1},{width:U,height:1}),d.R.copy(z,y,{x:0,y:0},{x:j,y:R+q},{width:U,height:1}),d.R.copy(z,y,{x:U-1,y:0},{x:j-1,y:R},{width:1,height:q}),d.R.copy(z,y,{x:0,y:0},{x:j+U,y:R},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.getImage(u);m||d.w(`Image with ID: "${u}" was not found`),fn(m)&&this.updateImage(u,m)}}}const ct=1e20;function ht(x,r,u,m,y,_,P,j,R){for(let z=r;z<r+m;z++)$t(x,u*_+z,_,y,P,j,R);for(let z=u;z<u+y;z++)$t(x,z*_+r,1,m,P,j,R)}function $t(x,r,u,m,y,_,P){_[0]=0,P[0]=-ct,P[1]=ct,y[0]=x[r];for(let j=1,R=0,z=0;j<m;j++){y[j]=x[r+j*u];const U=j*j;do{const q=_[R];z=(y[j]-y[q]+U-q*q)/(j-q)/2}while(z<=P[R]&&--R>-1);R++,_[R]=j,P[R]=z,P[R+1]=ct}for(let j=0,R=0;j<m;j++){for(;P[R+1]<j;)R++;const z=_[R],U=j-z;x[r+j*u]=y[z]+U*U}}class An{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const m=[];for(const y in r)for(const _ of r[y])m.push({stack:y,id:_});d.o(m,({stack:y,id:_},P)=>{let j=this.entries[y];j||(j=this.entries[y]={glyphs:{},requests:{},ranges:{}});let R=j.glyphs[_];if(R!==void 0)return void P(null,{stack:y,id:_,glyph:R});if(R=this._tinySDF(j,y,_),R)return j.glyphs[_]=R,void P(null,{stack:y,id:_,glyph:R});const z=Math.floor(_/256);if(256*z>65535)return void P(new Error("glyphs > 65535 not supported"));if(j.ranges[z])return void P(null,{stack:y,id:_,glyph:R});if(!this.url)return void P(new Error("glyphsUrl is not set"));let U=j.requests[z];U||(U=j.requests[z]=[],An.loadGlyphRange(y,z,this.url,this.requestManager,(q,X)=>{if(X){for(const le in X)this._doesCharSupportLocalGlyph(+le)||(j.glyphs[+le]=X[+le]);j.ranges[z]=!0}for(const le of U)le(q,X);delete j.requests[z]})),U.push((q,X)=>{q?P(q):X&&P(null,{stack:y,id:_,glyph:X[_]||null})})},(y,_)=>{if(y)u(y);else if(_){const P={};for(const{stack:j,id:R,glyph:z}of _)(P[j]||(P[j]={}))[R]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};u(null,P)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(d.u["CJK Unified Ideographs"](r)||d.u["Hangul Syllables"](r)||d.u.Hiragana(r)||d.u.Katakana(r))}_tinySDF(r,u,m){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(m))return;let _=r.tinySDF;if(!_){let j="400";/bold/i.test(u)?j="900":/medium/i.test(u)?j="500":/light/i.test(u)&&(j="200"),_=r.tinySDF=new An.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:j})}const P=_.draw(String.fromCharCode(m));return{id:m,bitmap:new d.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}An.loadGlyphRange=function(x,r,u,m,y){const _=256*r,P=_+255,j=m.transformRequest(u.replace("{fontstack}",x).replace("{range}",`${_}-${P}`),Pe.Glyphs);d.l(j,(R,z)=>{if(R)y(R);else if(z){const U={};for(const q of d.n(z))U[q.id]=q;y(null,U)}})},An.TinySDF=class{constructor({fontSize:x=24,buffer:r=3,radius:u=8,cutoff:m=.25,fontFamily:y="sans-serif",fontWeight:_="normal",fontStyle:P="normal"}={}){this.buffer=r,this.cutoff=m,this.radius=u;const j=this.size=x+4*r,R=this._createCanvas(j),z=this.ctx=R.getContext("2d",{willReadFrequently:!0});z.font=`${P} ${_} ${x}px ${y}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(x){const r=document.createElement("canvas");return r.width=r.height=x,r}draw(x){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:y,actualBoundingBoxRight:_}=this.ctx.measureText(x),P=Math.ceil(u),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-y))),R=Math.min(this.size-this.buffer,P+Math.ceil(m)),z=j+2*this.buffer,U=R+2*this.buffer,q=Math.max(z*U,0),X=new Uint8ClampedArray(q),le={data:X,width:z,height:U,glyphWidth:j,glyphHeight:R,glyphTop:P,glyphLeft:0,glyphAdvance:r};if(j===0||R===0)return le;const{ctx:ce,buffer:me,gridInner:ae,gridOuter:je}=this;ce.clearRect(me,me,j,R),ce.fillText(x,me,me+P);const Ue=ce.getImageData(me,me,j,R);je.fill(ct,0,q),ae.fill(0,0,q);for(let ye=0;ye<R;ye++)for(let ke=0;ke<j;ke++){const $e=Ue.data[4*(ye*j+ke)+3]/255;if($e===0)continue;const Ye=(ye+me)*z+ke+me;if($e===1)je[Ye]=0,ae[Ye]=ct;else{const it=.5-$e;je[Ye]=it>0?it*it:0,ae[Ye]=it<0?it*it:0}}ht(je,0,0,z,U,z,this.f,this.v,this.z),ht(ae,me,me,j,R,z,this.f,this.v,this.z);for(let ye=0;ye<q;ye++){const ke=Math.sqrt(je[ye])-Math.sqrt(ae[ye]);X[ye]=Math.round(255-255*(ke/this.radius+this.cutoff))}return le}};class Ct{constructor(){this.specification=d.v.light.position}possiblyEvaluate(r,u){return d.z(r.expression.evaluate(u))}interpolate(r,u,m){return{x:d.B.number(r.x,u.x,m),y:d.B.number(r.y,u.y,m),z:d.B.number(r.z,u.z,m)}}}let pn;class Sn extends d.E{constructor(r){super(),pn=pn||new d.r({anchor:new d.D(d.v.light.anchor),position:new Ct,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(pn),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(d.t,r,u))for(const m in r){const y=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),y):this._transitionable.setValue(m,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,m){return(!m||m.validate!==!1)&&d.x(this,r.call(d.y,d.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}}class Wt{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const m=r.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,u)),this.dashEntry[m]}getDashRanges(r,u,m){const y=[];let _=r.length%2==1?-r[r.length-1]*m:0,P=r[0]*m,j=!0;y.push({left:_,right:P,isDash:j,zeroLength:r[0]===0});let R=r[0];for(let z=1;z<r.length;z++){j=!j;const U=r[z];_=R*m,R+=U,P=R*m,y.push({left:_,right:P,isDash:j,zeroLength:U===0})}return y}addRoundDash(r,u,m){const y=u/2;for(let _=-m;_<=m;_++){const P=this.width*(this.nextRow+m+_);let j=0,R=r[j];for(let z=0;z<this.width;z++){z/R.right>1&&(R=r[++j]);const U=Math.abs(z-R.left),q=Math.abs(z-R.right),X=Math.min(U,q);let le;const ce=_/m*(y+1);if(R.isDash){const me=y-Math.abs(ce);le=Math.sqrt(X*X+me*me)}else le=y-Math.sqrt(X*X+ce*ce);this.data[P+z]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(r){for(let j=r.length-1;j>=0;--j){const R=r[j],z=r[j+1];R.zeroLength?r.splice(j,1):z&&z.isDash===R.isDash&&(z.left=R.left,r.splice(j,1))}const u=r[0],m=r[r.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const y=this.width*this.nextRow;let _=0,P=r[_];for(let j=0;j<this.width;j++){j/P.right>1&&(P=r[++_]);const R=Math.abs(j-P.left),z=Math.abs(j-P.right),U=Math.min(R,z);this.data[y+j]=Math.max(0,Math.min(255,(P.isDash?U:-U)+128))}}addDash(r,u){const m=u?7:0,y=2*m+1;if(this.nextRow+y>this.height)return d.w("LineAtlas out of space"),null;let _=0;for(let j=0;j<r.length;j++)_+=r[j];if(_!==0){const j=this.width/_,R=this.getDashRanges(r,this.width,j);u?this.addRoundDash(R,j,m):this.addRegularDash(R)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:_};return this.nextRow+=y,this.dirty=!0,P}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Yn{constructor(r,u,m){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=m;const y=this.workerPool.acquire(m);for(let _=0;_<y.length;_++){const P=new d.C(y[_],u,m);P.name=`Worker ${_}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,m){d.o(this.actors,(y,_)=>{y.send(r,u,_)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Vn(x,r,u){const m=function(y,_){if(y)return u(y);if(_){const P=d.F(d.e(_,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(P.vectorLayers=_.vector_layers,P.vectorLayerIds=P.vectorLayers.map(j=>j.id)),u(null,P)}};return x.url?d.f(r.transformRequest(x.url,Pe.Source),m):d.h.frame(()=>m(null,x))}class Nt{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof d.L?new d.L(r.lng,r.lat):d.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof d.L?new d.L(r.lng,r.lat):d.L.convert(r),this}extend(r){const u=this._sw,m=this._ne;let y,_;if(r instanceof d.L)y=r,_=r;else{if(!(r instanceof Nt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Nt.convert(r)):this.extend(d.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(d.L.convert(r)):this;if(y=r._sw,_=r._ne,!y||!_)return this}return u||m?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),m.lng=Math.max(_.lng,m.lng),m.lat=Math.max(_.lat,m.lat)):(this._sw=new d.L(y.lng,y.lat),this._ne=new d.L(_.lng,_.lat)),this}getCenter(){return new d.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.L(this.getWest(),this.getNorth())}getSouthEast(){return new d.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:m}=d.L.convert(r);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&y}static convert(r){return r instanceof Nt?r:r&&new Nt(r)}static fromLngLat(r,u=0){const m=360*u/40075017,y=m/Math.cos(Math.PI/180*r.lat);return new Nt(new d.L(r.lng-y,r.lat-m),new d.L(r.lng+y,r.lat+m))}}class Be{constructor(r,u,m){this.bounds=Nt.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),m=Math.floor(d.G(this.bounds.getWest())*u),y=Math.floor(d.H(this.bounds.getNorth())*u),_=Math.ceil(d.G(this.bounds.getEast())*u),P=Math.ceil(d.H(this.bounds.getSouth())*u);return r.x>=m&&r.x<_&&r.y>=y&&r.y<P}}class Mt extends d.E{constructor(r,u,m,y){if(super(),this.load=()=>{this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Vn(this._options,this.map._requestManager,(_,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new d.j(_)):P&&(d.e(this,P),P.bounds&&(this.tileBounds=new Be(P.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>d.e({},this._options),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.F(u,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(m,Pe.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(P,j){return delete r.request,r.aborted?u(null):P&&P.status!==404?u(P):(j&&j.resourceTiming&&(r.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&r.setExpiryData(j),r.loadVectorData(j,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",y,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",y,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class yn extends d.E{constructor(r,u,m,y){super(),this.id=r,this.dispatcher=m,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},u),d.e(this,d.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Vn(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new d.j(r)):u&&(d.e(this,u),u.bounds&&(this.tileBounds=new Be(u.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return d.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=Se.getImage(this.map._requestManager.transformRequest(m,Pe.Tile),(y,_,P)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(y)r.state="errored",u(y);else if(_){this.map._refreshExpiredTiles&&P&&r.setExpiryData(P);const j=this.map.painter.context,R=j.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new zt(j,_,R.RGBA,{useMipmap:!0}),r.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class Dn extends yn{constructor(r,u,m,y){super(r,u,m,y),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r,u){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(m,Pe.Tile);function _(P,j){P&&(r.state="errored",u(P)),j&&(r.dem=j,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=Se.getImage(y,(P,j,R)=>d._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(P)r.state="errored",u(P);else if(j){this.map._refreshExpiredTiles&&r.setExpiryData(R);const z=d.a(j)&&d.J()?j:yield function(q){return d._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&d.K()){const X=q.width+2,le=q.height+2;try{return new d.R({width:X,height:le},yield d.M(q,-1,-1,X,le))}catch{}}return d.h.getImageData(q,1)})}(j),U={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",U,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const u=r.canonical,m=Math.pow(2,u.z),y=(u.x-1+m)%m,_=u.x===0?r.wrap-1:r.wrap,P=(u.x+1+m)%m,j=u.x+1===m?r.wrap+1:r.wrap,R={};return R[new d.O(r.overscaledZ,_,u.z,y,u.y).key]={backfilled:!1},R[new d.O(r.overscaledZ,j,u.z,P,u.y).key]={backfilled:!1},u.y>0&&(R[new d.O(r.overscaledZ,_,u.z,y,u.y-1).key]={backfilled:!1},R[new d.O(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new d.O(r.overscaledZ,j,u.z,P,u.y-1).key]={backfilled:!1}),u.y+1<m&&(R[new d.O(r.overscaledZ,_,u.z,y,u.y+1).key]={backfilled:!1},R[new d.O(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new d.O(r.overscaledZ,j,u.z,P,u.y+1).key]={backfilled:!1}),R}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class qt extends d.E{constructor(r,u,m,y){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>d.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(y),this._data=u.data,this._options=d.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=d.N/this.tileSize;this.workerOptions=d.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:d.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:d.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:m},y),this}_updateWorkerData(r){const u=d.e({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(d.h.resolveURL(this._data),Pe.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(m,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let _=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(_=y.resourceTiming[this.id].slice(0)),m)return void this.fire(new d.j(m));const P={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&d.e(P,{resourceTiming:_}),this.fire(new d.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const m=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const y={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(m,y,(_,P)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(P,this.map.painter,m==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Ft=d.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pn extends d.E{constructor(r,u,m,y){super(),this.load=(_,P)=>{this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Se.getImage(this.map._requestManager.transformRequest(this.url,Pe.Image),(j,R)=>{this._request=null,this._loaded=!0,j?this.fire(new d.j(j)):R&&(this.image=R,_&&(this.coordinates=_),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,P=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Ft.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new zt(_,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(d.U.fromLngLat);this.tileID=function(y){let _=1/0,P=1/0,j=-1/0,R=-1/0;for(const X of y)_=Math.min(_,X.x),P=Math.min(P,X.y),j=Math.max(j,X.x),R=Math.max(R,X.y);const z=Math.max(j-_,R-P),U=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),q=Math.pow(2,U);return new d.W(U,Math.floor((_+j)/2*q),Math.floor((P+R)/2*q))}(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new d.V,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,d.N,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,d.N),this._boundsArray.emplaceBack(m[2].x,m[2].y,d.N,d.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class vr extends Pn{constructor(r,u,m,y){super(r,u,m,y),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const P of _.urls)this.urls.push(this.map._requestManager.transformRequest(P,Pe.Source).url);d.X(this.urls,(P,j)=>{this._loaded=!0,P?this.fire(new d.j(P)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,P=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Ft.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new zt(_,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new d.j(new d.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class cn extends Pn{constructor(r,u,m,y){super(r,u,m,y),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,j=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,Ft.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new zt(P,this.canvas,j.RGBA,{premultiply:!0});let R=!1;for(const z in this.tiles){const U=this.tiles[z];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,R=!0)}R&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(P=>typeof P!="number"))||this.fire(new d.j(new d.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.Y(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new d.j(new d.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const tr={},$r=x=>{switch(x){case"geojson":return qt;case"image":return Pn;case"raster":return yn;case"raster-dem":return Dn;case"vector":return Mt;case"video":return vr;case"canvas":return cn}return tr[x]};function Sr(x,r){const u=d.Z();return d.$(u,u,[1,1,0]),d.a0(u,u,[.5*x.width,.5*x.height,1]),d.a1(u,u,x.calculatePosMatrix(r.toUnwrapped()))}function ur(x,r,u,m,y,_){const P=function(q,X,le){if(q)for(const ce of q){const me=X[ce];if(me&&me.source===le&&me.type==="fill-extrusion")return!0}else for(const ce in X){const me=X[ce];if(me.source===le&&me.type==="fill-extrusion")return!0}return!1}(y&&y.layers,r,x.id),j=_.maxPitchScaleFactor(),R=x.tilesIn(m,j,P);R.sort(hi);const z=[];for(const q of R)z.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,u,x._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,y,_,j,Sr(x.transform,q.tileID))});const U=function(q){const X={},le={};for(const ce of q){const me=ce.queryResults,ae=ce.wrappedTileID,je=le[ae]=le[ae]||{};for(const Ue in me){const ye=me[Ue],ke=je[Ue]=je[Ue]||{},$e=X[Ue]=X[Ue]||[];for(const Ye of ye)ke[Ye.featureIndex]||(ke[Ye.featureIndex]=!0,$e.push(Ye))}}return X}(z);for(const q in U)U[q].forEach(X=>{const le=X.feature,ce=x.getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=ce});return U}function hi(x,r){const u=x.tileID,m=r.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}class Lr{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=d.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,_){const P={};if(!_)return P;for(const j of y){const R=j.layerIds.map(z=>_.getLayer(z)).filter(Boolean);if(R.length!==0){j.layers=R,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(z=>R.filter(U=>U.id===z)[0]));for(const z of R)P[z.id]=j}}return P}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const _=this.buckets[y];if(_ instanceof d.a4){if(this.hasSymbolBuckets=!0,!m)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const _=this.buckets[y];if(_ instanceof d.a4&&_.hasRTLText){this.hasRTLText=!0,d.a5();break}}this.queryPadding=0;for(const y in this.buckets){const _=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new d.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const y=this.buckets[m];y.uploadPending()&&y.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new zt(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new zt(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,m,y,_,P,j,R,z,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:_,scale:P,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:j,queryPadding:this.queryPadding*z},r,u,m):{}}querySourceFeatures(r,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const y=m.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",P=y._geojsonTileLayer||y[_];if(!P)return;const j=d.a6(u&&u.filter),{z:R,x:z,y:U}=this.tileID.canonical,q={z:R,x:z,y:U};for(let X=0;X<P.length;X++){const le=P.feature(X);if(j.needGeometry){const ae=d.a7(le,!0);if(!j.filter(new d.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!j.filter(new d.a8(this.tileID.overscaledZ),le))continue;const ce=m.getId(le,_),me=new d.a9(le,R,z,U,ce);me.tile=q,r.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const m=d.aa(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let y=!1;if(this.expirationTime>m)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const _=this.expirationTime-u;_?this.expirationTime=m+Math.max(_,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const _=this.buckets[y],P=_.layers[0].sourceLayer||"_geojsonTileLayer",j=m[P],R=r[P];if(!j||!R||Object.keys(R).length===0)continue;_.update(R,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=u&&u.style&&u.style.getLayer(y);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<d.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=d.h.now()+r}setDependencies(r,u){const m={};for(const y of u)m[y]=!0;this.dependencies[r]=m}hasDependency(r,u){for(const m of r){const y=this.dependencies[m];if(y){for(const _ of u)if(y[_])return!0}}return!1}}class ii{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,m){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const _={value:u,timeout:void 0};if(m!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},m)),this.data[y].push(_),this.order.push(y),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const m=r.wrapped().key,y=u===void 0?0:this.data[m].indexOf(u),_=this.data[m][y];return this.data[m].splice(y,1),_.timeout&&clearTimeout(_.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(_.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const m in this.data)for(const y of this.data[m])r(y.value)||u.push(y);for(const m of u)this.remove(m.value.tileID,m)}}class We{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,m){const y=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},d.e(this.stateChanges[r][y],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==y&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const _ in this.state[r][y])m[_]||(this.deletedStates[r][y][_]=null)}else for(const _ in m)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][_]===null&&delete this.deletedStates[r][y][_]}removeFeatureState(r,u,m){if(this.deletedStates[r]===null)return;const y=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&u!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][m]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(m in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][m]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,u){const m=String(u),y=d.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const P in _)delete y[P]}return y}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const m={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const _={};for(const P in this.stateChanges[y])this.state[y][P]||(this.state[y][P]={}),d.e(this.state[y][P],this.stateChanges[y][P]),_[P]=this.state[y][P];m[y]=_}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const _={};if(this.deletedStates[y]===null)for(const P in this.state[y])_[P]={},this.state[y][P]={};else for(const P in this.deletedStates[y]){if(this.deletedStates[y][P]===null)this.state[y][P]={};else for(const j of Object.keys(this.deletedStates[y][P]))delete this.state[y][P][j];_[P]=this.state[y][P]}m[y]=m[y]||{},d.e(m[y],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const y in r)r[y].setFeatureState(m,u)}}class mr extends d.E{constructor(r,u,m){super(),this.id=r,this.dispatcher=m,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,_,P,j)=>{const R=new($r(_.type))(y,_,P,j);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(r,u,m,this),this._tiles={},this._cache=new ii(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new We,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new d.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(rr).map(r=>r.key)}getRenderableIds(r){const u=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&u.push(this._tiles[m]);return r?u.sort((m,y)=>{const _=m.tileID,P=y.tileID,j=new d.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),R=new d.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-P.overscaledZ||R.y-j.y||R.x-j.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(rr).map(m=>m.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,r,u)))}_tileLoaded(r,u,m,y){if(y)return r.state="errored",void(y.status!==404?this._source.fire(new d.j(y,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=d.h.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const _=u[y];if(r.neighboringTiles&&r.neighboringTiles[_]){const P=this.getTileByID(_);m(r,P),m(P,r)}}function m(y,_){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let P=_.tileID.canonical.x-y.tileID.canonical.x;const j=_.tileID.canonical.y-y.tileID.canonical.y,R=Math.pow(2,y.tileID.canonical.z),z=_.tileID.key;P===0&&j===0||Math.abs(j)>1||(Math.abs(P)>1&&(Math.abs(P+R)===1?P+=R:Math.abs(P-R)===1&&(P-=R)),_.dem&&y.dem&&(y.dem.backfillBorder(_.dem,P,j),y.neighboringTiles&&y.neighboringTiles[z]&&(y.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,m,y){for(const _ in this._tiles){let P=this._tiles[_];if(y[_]||!P.hasData()||P.tileID.overscaledZ<=u||P.tileID.overscaledZ>m)continue;let j=P.tileID;for(;P&&P.tileID.overscaledZ>u+1;){const z=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[z.key],P&&P.hasData()&&(j=z)}let R=j;for(;R.overscaledZ>u;)if(R=R.scaledTo(R.overscaledZ-1),r[R.key]){y[j.key]=j;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=r.overscaledZ-1;m>=u;m--){const y=r.scaledTo(m),_=this._getLoadedTile(y);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(u*m*(this._maxTileCacheZoomLevels===null?d.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const m={};for(const y in this._tiles){const _=this._tiles[y];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),m[_.tileID.key]=_}this._tiles=m;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new d.O(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(m=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter(U=>this._source.hasTile(U)))):m=[];const y=r.coveringZoomLevel(this._source),_=Math.max(y-mr.maxOverzooming,this._source.minzoom),P=Math.max(y+mr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const q of m)if(q.canonical.z>this._source.minzoom){const X=q.scaledTo(q.canonical.z-1);U[X.key]=X;const le=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));U[le.key]=le}m=m.concat(Object.values(U))}const j=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(m,y);if(Ln(this._source.type)){const U={},q={},X=Object.keys(R),le=d.h.now();for(const ce of X){const me=R[ce],ae=this._tiles[ce];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=le)continue;const je=this.findLoadedParent(me,_);je&&(this._addTile(je.tileID),U[je.tileID.key]=je.tileID),q[ce]=me}this._retainLoadedChildren(q,y,P,R);for(const ce in U)R[ce]||(this._coveredTiles[ce]=!0,R[ce]=U[ce]);if(u){const ce={},me={};for(const ae of m)this._tiles[ae.key].hasData()?ce[ae.key]=ae:me[ae.key]=ae;for(const ae in me){const je=me[ae].children(this._source.maxzoom);this._tiles[je[0].key]&&this._tiles[je[1].key]&&this._tiles[je[2].key]&&this._tiles[je[3].key]&&(ce[je[0].key]=R[je[0].key]=je[0],ce[je[1].key]=R[je[1].key]=je[1],ce[je[2].key]=R[je[2].key]=je[2],ce[je[3].key]=R[je[3].key]=je[3],delete me[ae])}for(const ae in me){const je=this.findLoadedParent(me[ae],this._source.minzoom);if(je){ce[je.tileID.key]=R[je.tileID.key]=je.tileID;for(const Ue in ce)ce[Ue].isChildOf(je.tileID)&&delete ce[Ue]}}for(const ae in this._tiles)ce[ae]||(this._coveredTiles[ae]=!0)}}for(const U in R)this._tiles[U].clearFadeHold();const z=d.ab(this._tiles,R);for(const U of z){const q=this._tiles[U];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const m={},y={},_=Math.max(u-mr.maxOverzooming,this._source.minzoom),P=Math.max(u+mr.maxUnderzooming,this._source.minzoom),j={};for(const R of r){const z=this._addTile(R);m[R.key]=R,z.hasData()||u<this._source.maxzoom&&(j[R.key]=R)}this._retainLoadedChildren(j,u,P,m);for(const R of r){let z=this._tiles[R.key];if(z.hasData())continue;if(u+1>this._source.maxzoom){const q=R.children(this._source.maxzoom)[0],X=this.getTile(q);if(X&&X.hasData()){m[q.key]=q;continue}}else{const q=R.children(this._source.maxzoom);if(m[q[0].key]&&m[q[1].key]&&m[q[2].key]&&m[q[3].key])continue}let U=z.wasRequested();for(let q=R.overscaledZ-1;q>=_;--q){const X=R.scaledTo(q);if(y[X.key])break;if(y[X.key]=!0,z=this.getTile(X),!z&&U&&(z=this._addTile(X)),z){const le=z.hasData();if((U||le)&&(m[X.key]=X),U=z.wasRequested(),le)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let m,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){m=this._loadedParentTiles[y.key];break}u.push(y.key);const _=y.scaledTo(y.overscaledZ-1);if(m=this._getLoadedTile(_),m)break;y=_}for(const _ of u)this._loadedParentTiles[_]=m}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const m=u;return u||(u=new Lr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,m||this._source.fire(new d.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=u.getExpiryTimeout();m&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},m))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,m){const y=[],_=this.transform;if(!_)return y;const P=m?_.getCameraQueryGeometry(r):r,j=r.map(ce=>_.pointCoordinate(ce,this.terrain)),R=P.map(ce=>_.pointCoordinate(ce,this.terrain)),z=this.getIds();let U=1/0,q=1/0,X=-1/0,le=-1/0;for(const ce of R)U=Math.min(U,ce.x),q=Math.min(q,ce.y),X=Math.max(X,ce.x),le=Math.max(le,ce.y);for(let ce=0;ce<z.length;ce++){const me=this._tiles[z[ce]];if(me.holdingForFade())continue;const ae=me.tileID,je=Math.pow(2,_.zoom-me.tileID.overscaledZ),Ue=u*me.queryPadding*d.N/me.tileSize/je,ye=[ae.getTilePoint(new d.U(U,q)),ae.getTilePoint(new d.U(X,le))];if(ye[0].x-Ue<d.N&&ye[0].y-Ue<d.N&&ye[1].x+Ue>=0&&ye[1].y+Ue>=0){const ke=j.map(Ye=>ae.getTilePoint(Ye)),$e=R.map(Ye=>ae.getTilePoint(Ye));y.push({tile:me,tileID:ae,queryGeometry:ke,cameraQueryGeometry:$e,scale:je})}}return y}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(m=>this._tiles[m].tileID);for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ln(this._source.type)){const r=d.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,m){this._state.updateState(r=r||"_geojsonTileLayer",u,m)}removeFeatureState(r,u,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,m)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,m){const y=this._tiles[r];y&&y.setDependencies(u,m)}reloadTilesForDependencies(r,u){for(const m in this._tiles)this._tiles[m].hasDependency(r,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(r,u))}}function rr(x,r){const u=Math.abs(2*x.wrap)-+(x.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return x.overscaledZ-r.overscaledZ||m-u||r.canonical.y-x.canonical.y||r.canonical.x-x.canonical.x}function Ln(x){return x==="raster"||x==="image"||x==="video"}mr.maxOverzooming=10,mr.maxUnderzooming=3;const kn="mapboxgl_preloaded_worker_pool";class yr{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<yr.workerCount;)this.workers.push(new Worker(d.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kn]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(d.h.hardwareConcurrency/2);let qr;function fs(){return qr||(qr=new yr),qr}yr.workerCount=d.ac(globalThis)?Math.max(Math.min(si,3),1):1;class Bi{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=d.ad(r,0,1);let u=1,m=this._distances[u];const y=r*this.paddedLength+this.padding;for(;m<y&&u<this._distances.length;)m=this._distances[++u];const _=u-1,P=this._distances[_],j=m-P,R=j>0?(y-P)/j:0;return this.points[_].mult(1-R).add(this.points[u].mult(R))}}function Tt(x,r){let u=!0;return x==="always"||x!=="never"&&r!=="never"||(u=!1),u}class rn{constructor(r,u,m){const y=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(u/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)y.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,m,y,_){this._forEachCell(u,m,y,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(_)}insertCircle(r,u,m,y){this._forEachCell(u-y,m-y,u+y,m+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(m),this.circles.push(y)}_insertBoxCell(r,u,m,y,_,P){this.boxCells[_].push(P)}_insertCircleCell(r,u,m,y,_,P){this.circleCells[_].push(P)}_query(r,u,m,y,_,P,j){if(m<0||r>this.width||y<0||u>this.height)return[];const R=[];if(r<=0&&u<=0&&this.width<=m&&this.height<=y){if(_)return[{key:null,x1:r,y1:u,x2:m,y2:y}];for(let z=0;z<this.boxKeys.length;z++)R.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const U=this.circles[3*z],q=this.circles[3*z+1],X=this.circles[3*z+2];R.push({key:this.circleKeys[z],x1:U-X,y1:q-X,x2:U+X,y2:q+X})}}else this._forEachCell(r,u,m,y,this._queryCell,R,{hitTest:_,overlapMode:P,seenUids:{box:{},circle:{}}},j);return R}query(r,u,m,y){return this._query(r,u,m,y,!1,null)}hitTest(r,u,m,y,_,P){return this._query(r,u,m,y,!0,_,P).length>0}hitTestCircle(r,u,m,y,_){const P=r-m,j=r+m,R=u-m,z=u+m;if(j<0||P>this.width||z<0||R>this.height)return!1;const U=[];return this._forEachCell(P,R,j,z,this._queryCellCircle,U,{hitTest:!0,overlapMode:y,circle:{x:r,y:u,radius:m},seenUids:{box:{},circle:{}}},_),U.length>0}_queryCell(r,u,m,y,_,P,j,R){const{seenUids:z,hitTest:U,overlapMode:q}=j,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const me of X)if(!z.box[me]){z.box[me]=!0;const ae=4*me,je=this.boxKeys[me];if(r<=ce[ae+2]&&u<=ce[ae+3]&&m>=ce[ae+0]&&y>=ce[ae+1]&&(!R||R(je))&&(!U||!Tt(q,je.overlapMode))&&(P.push({key:je,x1:ce[ae],y1:ce[ae+1],x2:ce[ae+2],y2:ce[ae+3]}),U))return!0}}const le=this.circleCells[_];if(le!==null){const ce=this.circles;for(const me of le)if(!z.circle[me]){z.circle[me]=!0;const ae=3*me,je=this.circleKeys[me];if(this._circleAndRectCollide(ce[ae],ce[ae+1],ce[ae+2],r,u,m,y)&&(!R||R(je))&&(!U||!Tt(q,je.overlapMode))){const Ue=ce[ae],ye=ce[ae+1],ke=ce[ae+2];if(P.push({key:je,x1:Ue-ke,y1:ye-ke,x2:Ue+ke,y2:ye+ke}),U)return!0}}}return!1}_queryCellCircle(r,u,m,y,_,P,j,R){const{circle:z,seenUids:U,overlapMode:q}=j,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const me of X)if(!U.box[me]){U.box[me]=!0;const ae=4*me,je=this.boxKeys[me];if(this._circleAndRectCollide(z.x,z.y,z.radius,ce[ae+0],ce[ae+1],ce[ae+2],ce[ae+3])&&(!R||R(je))&&!Tt(q,je.overlapMode))return P.push(!0),!0}}const le=this.circleCells[_];if(le!==null){const ce=this.circles;for(const me of le)if(!U.circle[me]){U.circle[me]=!0;const ae=3*me,je=this.circleKeys[me];if(this._circlesCollide(ce[ae],ce[ae+1],ce[ae+2],z.x,z.y,z.radius)&&(!R||R(je))&&!Tt(q,je.overlapMode))return P.push(!0),!0}}}_forEachCell(r,u,m,y,_,P,j,R){const z=this._convertToXCellCoord(r),U=this._convertToYCellCoord(u),q=this._convertToXCellCoord(m),X=this._convertToYCellCoord(y);for(let le=z;le<=q;le++)for(let ce=U;ce<=X;ce++)if(_.call(this,r,u,m,y,this.xCellCount*ce+le,P,j,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,m,y,_,P){const j=y-r,R=_-u,z=m+P;return z*z>j*j+R*R}_circleAndRectCollide(r,u,m,y,_,P,j){const R=(P-y)/2,z=Math.abs(r-(y+R));if(z>R+m)return!1;const U=(j-_)/2,q=Math.abs(u-(_+U));if(q>U+m)return!1;if(z<=R||q<=U)return!0;const X=z-R,le=q-U;return X*X+le*le<=m*m}}function nt(x,r,u,m,y){const _=d.Z();return r?(d.a0(_,_,[1/y,1/y,1]),u||d.ae(_,_,m.angle)):d.a1(_,m.labelPlaneMatrix,x),_}function zn(x,r,u,m,y){if(r){const _=d.af(x);return d.a0(_,_,[y,y,1]),u||d.ae(_,_,-m.angle),_}return m.glCoordMatrix}function Cn(x,r,u){let m;u?(m=[x.x,x.y,u(x.x,x.y),1],d.ag(m,m,r)):(m=[x.x,x.y,0,1],se(m,m,r));const y=m[3];return{point:new d.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y}}function br(x,r){return .5+x/r*.5}function dr(x,r){const u=x[0]/x[3],m=x[1]/x[3];return u>=-r[0]&&u<=r[0]&&m>=-r[1]&&m<=r[1]}function gt(x,r,u,m,y,_,P,j,R,z){const U=m?x.textSizeData:x.iconSizeData,q=d.ah(U,u.transform.zoom),X=[256/u.width*2+1,256/u.height*2+1],le=m?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;le.clear();const ce=x.lineVertexArray,me=m?x.text.placedSymbolArray:x.icon.placedSymbolArray,ae=u.transform.width/u.transform.height;let je=!1;for(let Ue=0;Ue<me.length;Ue++){const ye=me.get(Ue);if(ye.hidden||ye.writingMode===d.ai.vertical&&!je){J(ye.numGlyphs,le);continue}let ke;if(je=!1,z?(ke=[ye.anchorX,ye.anchorY,z(ye.anchorX,ye.anchorY),1],d.ag(ke,ke,r)):(ke=[ye.anchorX,ye.anchorY,0,1],se(ke,ke,r)),!dr(ke,X)){J(ye.numGlyphs,le);continue}const $e=br(u.transform.cameraToCenterDistance,ke[3]),Ye=d.aj(U,q,ye),it=P?Ye/$e:Ye*$e,yt=new d.P(ye.anchorX,ye.anchorY),ft=Cn(yt,y,z).point,wt={projections:{},offsets:{}},Qt=On(ye,it,!1,j,r,y,_,x.glyphOffsetArray,ce,le,ft,yt,wt,ae,R,z);je=Qt.useVertical,(Qt.notEnoughRoom||je||Qt.needsFlipping&&On(ye,it,!0,j,r,y,_,x.glyphOffsetArray,ce,le,ft,yt,wt,ae,R,z).notEnoughRoom)&&J(ye.numGlyphs,le)}m?x.text.dynamicLayoutVertexBuffer.updateData(le):x.icon.dynamicLayoutVertexBuffer.updateData(le)}function Kt(x,r,u,m,y,_,P,j,R,z,U,q,X){const le=j.glyphStartIndex+j.numGlyphs,ce=j.lineStartIndex,me=j.lineStartIndex+j.lineLength,ae=r.getoffsetX(j.glyphStartIndex),je=r.getoffsetX(le-1),Ue=L(x*ae,u,m,y,_,P,j.segment,ce,me,R,z,U,q,X);if(!Ue)return null;const ye=L(x*je,u,m,y,_,P,j.segment,ce,me,R,z,U,q,X);return ye?{first:Ue,last:ye}:null}function Bt(x,r,u,m){return x===d.ai.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*m?{useVertical:!0}:(x===d.ai.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function On(x,r,u,m,y,_,P,j,R,z,U,q,X,le,ce,me){const ae=r/24,je=x.lineOffsetX*ae,Ue=x.lineOffsetY*ae;let ye;if(x.numGlyphs>1){const ke=x.glyphStartIndex+x.numGlyphs,$e=x.lineStartIndex,Ye=x.lineStartIndex+x.lineLength,it=Kt(ae,j,je,Ue,u,U,q,x,R,_,X,ce,me);if(!it)return{notEnoughRoom:!0};const yt=Cn(it.first.point,P,me).point,ft=Cn(it.last.point,P,me).point;if(m&&!u){const wt=Bt(x.writingMode,yt,ft,le);if(wt)return wt}ye=[it.first];for(let wt=x.glyphStartIndex+1;wt<ke-1;wt++)ye.push(L(ae*j.getoffsetX(wt),je,Ue,u,U,q,x.segment,$e,Ye,R,_,X,ce,me));ye.push(it.last)}else{if(m&&!u){const $e=Cn(q,y,me).point,Ye=x.lineStartIndex+x.segment+1,it=new d.P(R.getx(Ye),R.gety(Ye)),yt=Cn(it,y,me),ft=yt.signedDistanceFromCamera>0?yt.point:Kr(q,it,$e,1,y,me),wt=Bt(x.writingMode,$e,ft,le);if(wt)return wt}const ke=L(ae*j.getoffsetX(x.glyphStartIndex),je,Ue,u,U,q,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,R,_,X,ce,me);if(!ke)return{notEnoughRoom:!0};ye=[ke]}for(const ke of ye)d.ak(z,ke.point,ke.angle);return{}}function Kr(x,r,u,m,y,_){const P=Cn(x.add(x.sub(r)._unit()),y,_).point,j=u.sub(P);return u.add(j._mult(m/j.mag()))}function un(x,r){const{projectionCache:u,lineVertexArray:m,labelPlaneMatrix:y,tileAnchorPoint:_,distanceFromAnchor:P,getElevation:j,previousVertex:R,direction:z,absOffsetX:U}=r;if(u.projections[x])return u.projections[x];const q=new d.P(m.getx(x),m.gety(x)),X=Cn(q,y,j);if(X.signedDistanceFromCamera>0)return u.projections[x]=X.point,X.point;const le=x-z;return Kr(P===0?_:new d.P(m.getx(le),m.gety(le)),q,R,U-P+1,y,j)}function ai(x,r,u){return x._unit()._perp()._mult(r*u)}function fe(x,r,u,m,y,_,P,j){const{projectionCache:R,direction:z}=j;if(R.offsets[x])return R.offsets[x];const U=u.add(r);if(x+z<m||x+z>=y)return R.offsets[x]=U,U;const q=un(x+z,j),X=ai(q.sub(u),P,z),le=u.add(X),ce=q.add(X);return R.offsets[x]=d.al(_,U,le,ce)||U,R.offsets[x]}function L(x,r,u,m,y,_,P,j,R,z,U,q,X,le){const ce=m?x-r:x+r;let me=ce>0?1:-1,ae=0;m&&(me*=-1,ae=Math.PI),me<0&&(ae+=Math.PI);let je,Ue,ye=me>0?j+P:j+P+1,ke=y,$e=y,Ye=0,it=0;const yt=Math.abs(ce),ft=[];let wt;for(;Ye+it<=yt;){if(ye+=me,ye<j||ye>=R)return null;Ye+=it,$e=ke,Ue=je;const At={projectionCache:q,lineVertexArray:z,labelPlaneMatrix:U,tileAnchorPoint:_,distanceFromAnchor:Ye,getElevation:le,previousVertex:$e,direction:me,absOffsetX:yt};if(ke=un(ye,At),u===0)ft.push($e),wt=ke.sub($e);else{let mn;const en=ke.sub($e);mn=en.mag()===0?ai(un(ye+me,At).sub(ke),u,me):ai(en,u,me),Ue||(Ue=$e.add(mn)),je=fe(ye,mn,ke,j,R,Ue,u,At),ft.push(Ue),wt=je.sub(Ue)}it=wt.mag()}const Qt=wt._mult((yt-Ye)/it)._add(Ue||$e),Xn=ae+Math.atan2(ke.y-$e.y,ke.x-$e.x);return ft.push(Qt),{point:Qt,angle:X?Xn:0,path:ft}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function J(x,r){for(let u=0;u<x;u++){const m=r.length;r.resize(m+4),r.float32.set(G,3*m)}}function se(x,r,u){const m=r[0],y=r[1];return x[0]=u[0]*m+u[4]*y+u[12],x[1]=u[1]*m+u[5]*y+u[13],x[3]=u[3]*m+u[7]*y+u[15],x}const he=100;class we{constructor(r,u=new rn(r.width+200,r.height+200,25),m=new rn(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=m,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+he,this.screenBottomBoundary=r.height+he,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,m,y,_,P){const j=this.projectAndGetPerspectiveRatio(y,r.anchorPointX,r.anchorPointY,P),R=m*j.perspectiveRatio,z=r.x1*R+j.point.x,U=r.y1*R+j.point.y,q=r.x2*R+j.point.x,X=r.y2*R+j.point.y;return!this.isInsideGrid(z,U,q,X)||u!=="always"&&this.grid.hitTest(z,U,q,X,u,_)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,U,q,X],offscreen:this.isOffscreen(z,U,q,X)}}placeCollisionCircles(r,u,m,y,_,P,j,R,z,U,q,X,le,ce){const me=[],ae=new d.P(u.anchorX,u.anchorY),je=Cn(ae,P,ce),Ue=br(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),ye=(U?_/Ue:_*Ue)/d.ap,ke=Cn(ae,j,ce).point,$e=Kt(ye,y,u.lineOffsetX*ye,u.lineOffsetY*ye,!1,ke,ae,u,m,j,{projections:{},offsets:{}},!1,ce);let Ye=!1,it=!1,yt=!0;if($e){const ft=.5*X*Ue+le,wt=new d.P(-100,-100),Qt=new d.P(this.screenRightBoundary,this.screenBottomBoundary),Xn=new Bi,At=$e.first,mn=$e.last;let en=[];for(let In=At.path.length-1;In>=1;In--)en.push(At.path[In]);for(let In=1;In<mn.path.length;In++)en.push(mn.path[In]);const kr=2.5*ft;if(R){const In=en.map(Jn=>Cn(Jn,R,ce));en=In.some(Jn=>Jn.signedDistanceFromCamera<=0)?[]:In.map(Jn=>Jn.point)}let Zn=[];if(en.length>0){const In=en[0].clone(),Jn=en[0].clone();for(let wi=1;wi<en.length;wi++)In.x=Math.min(In.x,en[wi].x),In.y=Math.min(In.y,en[wi].y),Jn.x=Math.max(Jn.x,en[wi].x),Jn.y=Math.max(Jn.y,en[wi].y);Zn=In.x>=wt.x&&Jn.x<=Qt.x&&In.y>=wt.y&&Jn.y<=Qt.y?[en]:Jn.x<wt.x||In.x>Qt.x||Jn.y<wt.y||In.y>Qt.y?[]:d.am([en],wt.x,wt.y,Qt.x,Qt.y)}for(const In of Zn){Xn.reset(In,.25*ft);let Jn=0;Jn=Xn.length<=.5*ft?1:Math.ceil(Xn.paddedLength/kr)+1;for(let wi=0;wi<Jn;wi++){const Wr=wi/Math.max(Jn-1,1),gr=Xn.lerp(Wr),Fi=gr.x+he,mi=gr.y+he;me.push(Fi,mi,ft,0);const Ts=Fi-ft,Nr=mi-ft,io=Fi+ft,Ca=mi+ft;if(yt=yt&&this.isOffscreen(Ts,Nr,io,Ca),it=it||this.isInsideGrid(Ts,Nr,io,Ca),r!=="always"&&this.grid.hitTestCircle(Fi,mi,ft,r,q)&&(Ye=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ye}}}}return{circles:!z&&Ye||!it||Ue<this.perspectiveRatioCutoff?[]:me,offscreen:yt,collisionDetected:Ye}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,y=1/0,_=-1/0,P=-1/0;for(const U of r){const q=new d.P(U.x+he,U.y+he);m=Math.min(m,q.x),y=Math.min(y,q.y),_=Math.max(_,q.x),P=Math.max(P,q.y),u.push(q)}const j=this.grid.query(m,y,_,P).concat(this.ignoredGrid.query(m,y,_,P)),R={},z={};for(const U of j){const q=U.key;if(R[q.bucketInstanceId]===void 0&&(R[q.bucketInstanceId]={}),R[q.bucketInstanceId][q.featureIndex])continue;const X=[new d.P(U.x1,U.y1),new d.P(U.x2,U.y1),new d.P(U.x2,U.y2),new d.P(U.x1,U.y2)];d.an(u,X)&&(R[q.bucketInstanceId][q.featureIndex]=!0,z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]=[]),z[q.bucketInstanceId].push(q.featureIndex))}return z}insertCollisionBox(r,u,m,y,_,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:_,collisionGroupID:P,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,m,y,_,P){const j=m?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:_,collisionGroupID:P,overlapMode:u};for(let z=0;z<r.length;z+=4)j.insertCircle(R,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,u,m,y){let _;return y?(_=[u,m,y(u,m),1],d.ag(_,_,r)):(_=[u,m,0,1],se(_,_,r)),{point:new d.P((_[0]/_[3]+1)/2*this.transform.width+he,(-_[1]/_[3]+1)/2*this.transform.height+he),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,m,y){return m<he||r>=this.screenRightBoundary||y<he||u>this.screenBottomBoundary}isInsideGrid(r,u,m,y){return m>=0&&r<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=d.ao([]);return d.$(r,r,[-100,-100,0]),r}}function xe(x,r,u){return r*(d.N/(x.tileSize*Math.pow(2,u-x.tileID.overscaledZ)))}class ge{constructor(r,u,m,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):y&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Te{constructor(r,u,m,y,_){this.text=new ge(r?r.text:null,u,m,_),this.icon=new ge(r?r.icon:null,u,y,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qe{constructor(r,u,m){this.text=r,this.icon=u,this.skipFade=m}}class ne{constructor(){this.invProjMatrix=d.Z(),this.viewportMatrix=d.Z(),this.circles=[]}}class Ne{constructor(r,u,m,y,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=y,this.tileID=_}}class te{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[r]}}function Ae(x,r,u,m,y){const{horizontalAlign:_,verticalAlign:P}=d.au(x);return new d.P(-(_-.5)*r+m[0]*y,-(P-.5)*u+m[1]*y)}function Fe(x,r,u,m,y,_){const{x1:P,x2:j,y1:R,y2:z,anchorPointX:U,anchorPointY:q}=x,X=new d.P(r,u);return m&&X._rotate(y?_:-_),{x1:P+X.x,y1:R+X.y,x2:j+X.x,y2:z+X.y,anchorPointX:U,anchorPointY:q}}class Ke{constructor(r,u,m,y,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new we(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new te(y),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,m,y){const _=m.getBucket(u),P=m.latestFeatureIndex;if(!_||!P||u.id!==_.layerIds[0])return;const j=m.collisionBoxArray,R=_.layers[0].layout,z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/d.N,q=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),X=R.get("text-pitch-alignment")==="map",le=R.get("text-rotation-alignment")==="map",ce=xe(m,1,this.transform.zoom),me=nt(q,X,le,this.transform,ce);let ae=null;if(X){const Ue=zn(q,X,le,this.transform,ce);ae=d.a1([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[_.bucketInstanceId]=new Ne(_.bucketInstanceId,P,_.sourceLayerIndex,_.index,m.tileID);const je={bucket:_,layout:R,posMatrix:q,textLabelPlaneMatrix:me,labelToScreenMatrix:ae,scale:z,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:d.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(y)for(const Ue of _.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:ke,symbolInstanceEnd:$e}=Ue;r.push({sortKey:ye,symbolInstanceStart:ke,symbolInstanceEnd:$e,parameters:je})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:je})}attemptAnchorPlacement(r,u,m,y,_,P,j,R,z,U,q,X,le,ce,me,ae){const je=d.aq[r.textAnchor],Ue=[r.textOffset0,r.textOffset1],ye=Ae(je,m,y,Ue,_),ke=this.collisionIndex.placeCollisionBox(Fe(u,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,ae);if((!me||this.collisionIndex.placeCollisionBox(Fe(me,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,ae).box.length!==0)&&ke.box.length>0){let $e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&($e=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ue,width:m,height:y,anchor:je,textBoxScale:_,prevAnchor:$e},this.markUsedJustification(le,je,X,ce),le.allowVerticalPlacement&&(this.markUsedOrientation(le,ce,X),this.placedOrientations[X.crossTileID]=ce),{shift:ye,placedGlyphBoxes:ke}}}placeLayerBucketPart(r,u,m){const{bucket:y,layout:_,posMatrix:P,textLabelPlaneMatrix:j,labelToScreenMatrix:R,textPixelRatio:z,holdingForFade:U,collisionBoxArray:q,partiallyEvaluatedTextSize:X,collisionGroup:le}=r.parameters,ce=_.get("text-optional"),me=_.get("icon-optional"),ae=d.ar(_,"text-overlap","text-allow-overlap"),je=ae==="always",Ue=d.ar(_,"icon-overlap","icon-allow-overlap"),ye=Ue==="always",ke=_.get("text-rotation-alignment")==="map",$e=_.get("text-pitch-alignment")==="map",Ye=_.get("icon-text-fit")!=="none",it=_.get("symbol-z-order")==="viewport-y",yt=je&&(ye||!y.hasIconData()||me),ft=ye&&(je||!y.hasTextData()||ce);!y.collisionArrays&&q&&y.deserializeCollisionBoxes(q);const wt=this.retainedQueryData[y.bucketInstanceId].tileID,Qt=this.terrain?(At,mn)=>this.terrain.getElevation(wt,At,mn):null,Xn=(At,mn)=>{var en,kr;if(u[At.crossTileID])return;if(U)return void(this.placements[At.crossTileID]=new Qe(!1,!1,!1));let Zn=!1,In=!1,Jn=!0,wi=null,Wr={box:null,offscreen:null},gr={box:null},Fi=null,mi=null,Ts=null,Nr=0,io=0,Ca=0;mn.textFeatureIndex?Nr=mn.textFeatureIndex:At.useRuntimeCollisionCircles&&(Nr=At.featureIndex),mn.verticalTextFeatureIndex&&(io=mn.verticalTextFeatureIndex);const el=mn.textBox;if(el){const Er=Ci=>{let Ui=d.ai.horizontal;if(y.allowVerticalPlacement&&!Ci&&this.prevPlacement){const Ws=this.prevPlacement.placedOrientations[At.crossTileID];Ws&&(this.placedOrientations[At.crossTileID]=Ws,Ui=Ws,this.markUsedOrientation(y,Ui,At))}return Ui},Pt=(Ci,Ui)=>{if(y.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&mn.verticalTextBox){for(const Ws of y.writingModes)if(Ws===d.ai.vertical?(Wr=Ui(),gr=Wr):Wr=Ci(),Wr&&Wr.box&&Wr.box.length)break}else Wr=Ci()},pi=At.textAnchorOffsetStartIndex,cs=At.textAnchorOffsetEndIndex;if(cs===pi){const Ci=(Ui,Ws)=>{const Ni=this.collisionIndex.placeCollisionBox(Ui,ae,z,P,le.predicate,Qt);return Ni&&Ni.box&&Ni.box.length&&(this.markUsedOrientation(y,Ws,At),this.placedOrientations[At.crossTileID]=Ws),Ni};Pt(()=>Ci(el,d.ai.horizontal),()=>{const Ui=mn.verticalTextBox;return y.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&Ui?Ci(Ui,d.ai.vertical):{box:null,offscreen:null}}),Er(Wr&&Wr.box&&Wr.box.length)}else{let Ci=d.aq[(kr=(en=this.prevPlacement)===null||en===void 0?void 0:en.variableOffsets[At.crossTileID])===null||kr===void 0?void 0:kr.anchor];const Ui=(Ni,Ol,Ai)=>{const $f=Ni.x2-Ni.x1,qf=Ni.y2-Ni.y1,Tp=At.textBoxScale,Nd=Ye&&Ue==="never"?Ol:null;let Zs={box:[],offscreen:!1},Na=ae==="never"?1:2,so="never";Ci&&Na++;for(let Sa=0;Sa<Na;Sa++){for(let ao=pi;ao<cs;ao++){const Ih=y.textAnchorOffsets.get(ao);if(Ci&&Ih.textAnchor!==Ci)continue;const jo=this.attemptAnchorPlacement(Ih,Ni,$f,qf,Tp,ke,$e,z,P,le,so,At,y,Ai,Nd,Qt);if(jo&&(Zs=jo.placedGlyphBoxes,Zs&&Zs.box&&Zs.box.length))return Zn=!0,wi=jo.shift,Zs}Ci?Ci=null:so=ae}return Zs};Pt(()=>Ui(el,mn.iconBox,d.ai.horizontal),()=>{const Ni=mn.verticalTextBox;return y.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&At.numVerticalGlyphVertices>0&&Ni?Ui(Ni,mn.verticalIconBox,d.ai.vertical):{box:null,offscreen:null}}),Wr&&(Zn=Wr.box,Jn=Wr.offscreen);const Ws=Er(Wr&&Wr.box);if(!Zn&&this.prevPlacement){const Ni=this.prevPlacement.variableOffsets[At.crossTileID];Ni&&(this.variableOffsets[At.crossTileID]=Ni,this.markUsedJustification(y,Ni.anchor,At,Ws))}}}if(Fi=Wr,Zn=Fi&&Fi.box&&Fi.box.length>0,Jn=Fi&&Fi.offscreen,At.useRuntimeCollisionCircles){const Er=y.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex),Pt=d.aj(y.textSizeData,X,Er),pi=_.get("text-padding");mi=this.collisionIndex.placeCollisionCircles(ae,Er,y.lineVertexArray,y.glyphOffsetArray,Pt,P,j,R,m,$e,le.predicate,At.collisionCircleDiameter,pi,Qt),mi.circles.length&&mi.collisionDetected&&!m&&d.w("Collisions detected, but collision boxes are not shown"),Zn=je||mi.circles.length>0&&!mi.collisionDetected,Jn=Jn&&mi.offscreen}if(mn.iconFeatureIndex&&(Ca=mn.iconFeatureIndex),mn.iconBox){const Er=Pt=>{const pi=Ye&&wi?Fe(Pt,wi.x,wi.y,ke,$e,this.transform.angle):Pt;return this.collisionIndex.placeCollisionBox(pi,Ue,z,P,le.predicate,Qt)};gr&&gr.box&&gr.box.length&&mn.verticalIconBox?(Ts=Er(mn.verticalIconBox),In=Ts.box.length>0):(Ts=Er(mn.iconBox),In=Ts.box.length>0),Jn=Jn&&Ts.offscreen}const Vl=ce||At.numHorizontalGlyphVertices===0&&At.numVerticalGlyphVertices===0,Oa=me||At.numIconVertices===0;if(Vl||Oa?Oa?Vl||(In=In&&Zn):Zn=In&&Zn:In=Zn=In&&Zn,Zn&&Fi&&Fi.box&&this.collisionIndex.insertCollisionBox(Fi.box,ae,_.get("text-ignore-placement"),y.bucketInstanceId,gr&&gr.box&&io?io:Nr,le.ID),In&&Ts&&this.collisionIndex.insertCollisionBox(Ts.box,Ue,_.get("icon-ignore-placement"),y.bucketInstanceId,Ca,le.ID),mi&&(Zn&&this.collisionIndex.insertCollisionCircles(mi.circles,ae,_.get("text-ignore-placement"),y.bucketInstanceId,Nr,le.ID),m)){const Er=y.bucketInstanceId;let Pt=this.collisionCircleArrays[Er];Pt===void 0&&(Pt=this.collisionCircleArrays[Er]=new ne);for(let pi=0;pi<mi.circles.length;pi+=4)Pt.circles.push(mi.circles[pi+0]),Pt.circles.push(mi.circles[pi+1]),Pt.circles.push(mi.circles[pi+2]),Pt.circles.push(mi.collisionDetected?1:0)}if(At.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[At.crossTileID]=new Qe(Zn||yt,In||ft,Jn||y.justReloaded),u[At.crossTileID]=!0};if(it){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const At=y.getSortedSymbolIndexes(this.transform.angle);for(let mn=At.length-1;mn>=0;--mn){const en=At[mn];Xn(y.symbolInstances.get(en),y.collisionArrays[en])}}else for(let At=r.symbolInstanceStart;At<r.symbolInstanceEnd;At++)Xn(y.symbolInstances.get(At),y.collisionArrays[At]);if(m&&y.bucketInstanceId in this.collisionCircleArrays){const At=this.collisionCircleArrays[y.bucketInstanceId];d.as(At.invProjMatrix,P),At.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(r,u,m,y){let _;_=y===d.ai.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[d.at(u)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const j of P)j>=0&&(r.text.placedSymbolArray.get(j).crossTileID=_>=0&&j!==_?0:m.crossTileID)}markUsedOrientation(r,u,m){const y=u===d.ai.horizontal||u===d.ai.horizontalOnly?u:0,_=u===d.ai.vertical?u:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const j of P)r.text.placedSymbolArray.get(j).placedOrientation=y;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},P=u?u.variableOffsets:{},j=u?u.placedOrientations:{};for(const R in this.placements){const z=this.placements[R],U=_[R];U?(this.opacities[R]=new Te(U,y,z.text,z.icon),m=m||z.text!==U.text.placed||z.icon!==U.icon.placed):(this.opacities[R]=new Te(null,y,z.text,z.icon,z.skipFade),m=m||z.text||z.icon)}for(const R in _){const z=_[R];if(!this.opacities[R]){const U=new Te(z,y,!1,!1);U.isHidden()||(this.opacities[R]=U,m=m||z.text.placed||z.icon.placed)}}for(const R in P)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=P[R]);for(const R in j)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=j[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const m={};for(const y of u){const _=y.getBucket(r);_&&y.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,m,y.collisionBoxArray)}}updateBucketOpacities(r,u,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],_=y.layout,P=new Te(null,0,!1,!1,!0),j=_.get("text-allow-overlap"),R=_.get("icon-allow-overlap"),z=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=_.get("text-rotation-alignment")==="map",q=_.get("text-pitch-alignment")==="map",X=_.get("icon-text-fit")!=="none",le=new Te(null,0,j&&(R||!r.hasIconData()||_.get("icon-optional")),R&&(j||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ce=(me,ae,je)=>{for(let Ue=0;Ue<ae/4;Ue++)me.opacityVertexArray.emplaceBack(je);me.hasVisibleVertices=me.hasVisibleVertices||je!==Yr};for(let me=0;me<r.symbolInstances.length;me++){const ae=r.symbolInstances.get(me),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Ue,crossTileID:ye}=ae;let ke=this.opacities[ye];u[ye]?ke=P:ke||(ke=le,this.opacities[ye]=ke),u[ye]=!0;const $e=ae.numIconVertices>0,Ye=this.placedOrientations[ae.crossTileID],it=Ye===d.ai.vertical,yt=Ye===d.ai.horizontal||Ye===d.ai.horizontalOnly;if(je>0||Ue>0){const ft=Hn(ke.text);ce(r.text,je,it?Yr:ft),ce(r.text,Ue,yt?Yr:ft);const wt=ke.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(At=>{At>=0&&(r.text.placedSymbolArray.get(At).hidden=wt||it?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=wt||yt?1:0);const Qt=this.variableOffsets[ae.crossTileID];Qt&&this.markUsedJustification(r,Qt.anchor,ae,Ye);const Xn=this.placedOrientations[ae.crossTileID];Xn&&(this.markUsedJustification(r,"left",ae,Xn),this.markUsedOrientation(r,Xn,ae))}if($e){const ft=Hn(ke.icon),wt=!(X&&ae.verticalPlacedIconSymbolIndex&&it);ae.placedIconSymbolIndex>=0&&(ce(r.icon,ae.numIconVertices,wt?ft:Yr),r.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=ke.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(ce(r.icon,ae.numVerticalIconVertices,wt?Yr:ft),r.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const ft=r.collisionArrays[me];if(ft){let wt=new d.P(0,0);if(ft.textBox||ft.verticalTextBox){let Xn=!0;if(z){const At=this.variableOffsets[ye];At?(wt=Ae(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale),U&&wt._rotate(q?this.transform.angle:-this.transform.angle)):Xn=!1}ft.textBox&&dt(r.textCollisionBox.collisionVertexArray,ke.text.placed,!Xn||it,wt.x,wt.y),ft.verticalTextBox&&dt(r.textCollisionBox.collisionVertexArray,ke.text.placed,!Xn||yt,wt.x,wt.y)}const Qt=!!(!yt&&ft.verticalIconBox);ft.iconBox&&dt(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,Qt,X?wt.x:0,X?wt.y:0),ft.verticalIconBox&&dt(r.iconCollisionBox.collisionVertexArray,ke.icon.placed,!Qt,X?wt.x:0,X?wt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=me.invProjMatrix,r.placementViewportMatrix=me.viewportMatrix,r.collisionCircleArray=me.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function dt(x,r,u,m,y){x.emplaceBack(r?1:0,u?1:0,m||0,y||0),x.emplaceBack(r?1:0,u?1:0,m||0,y||0),x.emplaceBack(r?1:0,u?1:0,m||0,y||0),x.emplaceBack(r?1:0,u?1:0,m||0,y||0)}const pt=Math.pow(2,25),Ot=Math.pow(2,24),_t=Math.pow(2,17),Ut=Math.pow(2,16),wn=Math.pow(2,9),gn=Math.pow(2,8),Un=Math.pow(2,1);function Hn(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const r=x.placed?1:0,u=Math.floor(127*x.opacity);return u*pt+r*Ot+u*_t+r*Ut+u*wn+r*gn+u*Un+r}const Yr=0;class Hr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,m,y,_){const P=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(P,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((j,R)=>j.sortKey-R.sortKey));this._currentPartIndex<P.length;)if(u.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,_())return!0;return!1}}class Tn{constructor(r,u,m,y,_,P,j,R){this.placement=new Ke(r,u,P,j,R),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,m){const y=d.h.now(),_=()=>!this._forceFullPlacement&&d.h.now()-y>2;for(;this._currentPlacementIndex>=0;){const P=u[r[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=j)&&(!P.maxzoom||P.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Hr(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Us=512/d.N/2;class pc{constructor(r,u,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const y=new Map;for(let _=0;_<u.length;_++){const P=u.get(_),j=P.key,R=y.get(j);R?R.push(P):y.set(j,[P])}for(const[_,P]of y){const j={positions:P.map(R=>({x:Math.floor(R.anchorX*Us),y:Math.floor(R.anchorY*Us)})),crossTileIDs:P.map(R=>R.crossTileID)};if(j.positions.length>128){const R=new d.av(j.positions.length,16,Uint16Array);for(const{x:z,y:U}of j.positions)R.add(z,U);R.finish(),delete j.positions,j.index=R}this._symbolsByKey[_]=j}}getScaledCoordinates(r,u){const{x:m,y,z:_}=this.tileID.canonical,{x:P,y:j,z:R}=u.canonical,z=Us/Math.pow(2,R-_),U=(j*d.N+r.anchorY)*z,q=y*d.N*Us;return{x:Math.floor((P*d.N+r.anchorX)*z-m*d.N*Us),y:Math.floor(U-q)}}findMatches(r,u,m){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const P=r.get(_);if(P.crossTileID)continue;const j=this._symbolsByKey[P.key];if(!j)continue;const R=this.getScaledCoordinates(P,u);if(j.index){const z=j.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(const U of z){const q=j.crossTileIDs[U];if(!m[q]){m[q]=!0,P.crossTileID=q;break}}}else if(j.positions)for(let z=0;z<j.positions.length;z++){const U=j.positions[z],q=j.crossTileIDs[z];if(Math.abs(U.x-R.x)<=y&&Math.abs(U.y-R.y)<=y&&!m[q]){m[q]=!0,P.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class xr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const m in this.indexes){const y=this.indexes[m],_={};for(const P in y){const j=y[P];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+u),_[j.tileID.key]=j}this.indexes[m]=_}this.lng=r}addBucket(r,u,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const P=this.indexes[_];if(Number(_)>r.overscaledZ)for(const j in P){const R=P[j];R.tileID.isChildOf(r)&&R.findMatches(u.symbolInstances,r,y)}else{const j=P[r.scaledTo(Number(_)).key];j&&j.findMatches(u.symbolInstances,r,y)}}for(let _=0;_<u.symbolInstances.length;_++){const P=u.symbolInstances.get(_);P.crossTileID||(P.crossTileID=m.generate(),y[P.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new pc(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const m of u.getCrossTileIDsLists())for(const y of m)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let u=!1;for(const m in this.indexes){const y=this.indexes[m];for(const _ in y)r[y[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,y[_]),delete y[_],u=!0)}return u}}class Fo{constructor(){this.layerIndexes={},this.crossTileIDs=new xr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,m){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Qa);let _=!1;const P={};y.handleWrapJump(m);for(const j of u){const R=j.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(j.tileID,R,this.crossTileIDs)&&(_=!0),P[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(P)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}const Li=(x,r)=>d.x(x,r&&r.filter(u=>u.identifier!=="source.canvas")),ss=d.F(d.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),su=d.F(d.ax,["setCenter","setZoom","setBearing","setPitch"]),ms=d.aw();class Ii extends d.E{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Yn(fs(),this,r._getMapId()),this.imageManager=new lt,this.imageManager.setEventedParent(this),this.glyphManager=new An(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Wt(256,512),this.crossTileSymbolIndex=new Fo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",d.az());const m=this;this._rtlTextPluginCallback=Ii.registerForPluginStateChange(y=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(_,P)=>{if(d.aA(_),P&&P.every(j=>j))for(const j in m.sourceCaches){const R=m.sourceCaches[j].getSource().type;R!=="vector"&&R!=="geojson"||m.sourceCaches[j].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const _=this.sourceCaches[y.sourceId];if(!_)return;const P=_.getSource();if(P&&P.vectorLayerIds)for(const j in this._layers){const R=this._layers[j];R.source===P.id&&this._validateLayer(R)}})}loadURL(r,u={},m){this.fire(new d.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const y=this.map._requestManager.transformRequest(r,Pe.Style);this._request=d.f(y,(_,P)=>{this._request=null,_?this.fire(new d.j(_)):P&&this._load(P,u,m)})}loadJSON(r,u={},m){this.fire(new d.k("dataloading",{dataType:"style"})),this._request=d.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,m)})}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(ms,{validate:!1})}_load(r,u,m){var y;const _=u.transformStyle?u.transformStyle(m,r):r;if(!u.validate||!Li(this,d.y(_))){this._loaded=!0,this.stylesheet=_;for(const P in _.sources)this.addSource(P,_.sources[P],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Sn(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const r=d.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const m=d.aC(u);m.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=m}}_loadSprite(r,u=!1,m=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(y,_,P,j){const R=ut(y),z=R.length,U=P>1?"@2x":"",q={},X={},le={};for(const{id:ce,url:me}of R){const ae=_.transformRequest(_.normalizeSpriteURL(me,U,".json"),Pe.SpriteJSON),je=`${ce}_${ae.url}`;q[je]=d.f(ae,(ke,$e)=>{delete q[je],X[ce]=$e,Rt(j,X,le,ke,z)});const Ue=_.transformRequest(_.normalizeSpriteURL(me,U,".png"),Pe.SpriteImage),ye=`${ce}_${Ue.url}`;q[ye]=Se.getImage(Ue,(ke,$e)=>{delete q[ye],le[ce]=$e,Rt(j,X,le,ke,z)})}return{cancel(){for(const ce of Object.values(q))ce.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(y,_)=>{if(this._spriteRequest=null,y)this.fire(new d.j(y));else if(_)for(const P in _){this._spritesImagesIds[P]=[];const j=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(R=>!(R in _)):[];for(const R of j)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in _[P]){const z=P==="default"?R:`${P}:${R}`;this._spritesImagesIds[P].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,_[P][R],!1):this.imageManager.addImage(z,_[P][R]),u&&(this._changedImages[z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),m&&m(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const m=r.sourceLayer;if(!m)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(m)===-1)&&this.fire(new d.j(new Error(`Source layer "${m}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const m=[];for(const y of r)u[y]&&m.push(u[y]);return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const m of u){const y=this._layers[m];y.type!=="custom"&&(r[m]=y.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(y.length||_.length)&&this._updateWorkerLayers(y,_);for(const P in this._updatedSources){const j=this._updatedSources[P];if(j==="reload")this._reloadSource(P);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const m={};for(const y in this.sourceCaches){const _=this.sourceCaches[y];m[y]=_.used,_.used=!1}for(const y of this._order){const _=this._layers[y];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const y in m){const _=this.sourceCaches[y];m[y]!==_.used&&_.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const m=this.serialize();if(r=u.transformStyle?u.transformStyle(m,r):r,Li(this,d.y(r)))return!1;(r=d.aD(r)).layers=d.aB(r.layers);const y=d.aE(m,r).filter(P=>!(P.command in su));if(y.length===0)return!1;const _=y.filter(P=>!(P.command in ss));if(_.length>0)throw new Error(`Unimplemented: ${_.map(P=>P.command).join(", ")}.`);for(const P of y)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,u){if(this.getImage(r))return this.fire(new d.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new d.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(d.y.source,`sources.${r}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[r]=new mr(r,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new d.j(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,m={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new d.j(new Error(`Layer "${y}" already exists on this map.`)));let _;if(r.type==="custom"){if(Li(this,d.aF(r)))return;_=d.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=d.aD(r),r=d.e(r,{source:y})),this._validate(d.y.layer,`layers.${y}`,r,{arrayIndex:-1},m))return;_=d.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:y}})}const P=u?this._order.indexOf(u):this._order.length;if(u&&P===-1)this.fire(new d.j(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(P,0,y),this._layerOrderChanged=!0,this._layers[y]=_,this._removedLayers[y]&&_.source&&_.type!=="custom"){const j=this._removedLayers[y];delete this._removedLayers[y],j.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new d.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const m=this._order.indexOf(r);this._order.splice(m,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new d.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,m){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===u&&y.maxzoom===m||(u!=null&&(y.minzoom=u),m!=null&&(y.maxzoom=m),this._updateLayer(y)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,m={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!d.aG(y.filter,u))return u==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(d.y.filter,`layers.${y.id}.filter`,u,null,m)||(y.filter=d.aD(u),this._updateLayer(y)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return d.aD(this.getLayer(r).filter)}setLayoutProperty(r,u,m,y={}){this._checkLoaded();const _=this.getLayer(r);_?d.aG(_.getLayoutProperty(u),m)||(_.setLayoutProperty(u,m,y),this._updateLayer(_)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const m=this.getLayer(r);if(m)return m.getLayoutProperty(u);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,m,y={}){this._checkLoaded();const _=this.getLayer(r);_?d.aG(_.getPaintProperty(u),m)||(_.setPaintProperty(u,m,y)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new d.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const m=r.source,y=r.sourceLayer,_=this.sourceCaches[m];if(_===void 0)return void this.fire(new d.j(new Error(`The source '${m}' does not exist in the map's style.`)));const P=_.getSource().type;P==="geojson"&&y?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||y?(r.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(y,r.id,u)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const m=r.source,y=this.sourceCaches[m];if(y===void 0)return void this.fire(new d.j(new Error(`The source '${m}' does not exist in the map's style.`)));const _=y.getSource().type,P=_==="vector"?r.sourceLayer:void 0;_!=="vector"||P?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(P,r.id,u):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,m=r.sourceLayer,y=this.sourceCaches[u];if(y!==void 0)return y.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(m,r.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=d.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),m=this.map.getTerrain()||void 0,y=this.stylesheet;return d.aI({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:r,layers:u,terrain:m},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=P=>this._layers[P].type==="fill-extrusion",m={},y=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(u(j)){m[j]=P;for(const R of r){const z=R[j];if(z)for(const U of z)y.push(U)}}}y.sort((P,j)=>j.intersectionZ-P.intersectionZ);const _=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(u(j))for(let R=y.length-1;R>=0;R--){const z=y[R].feature;if(m[z.layer.id]<P)break;_.push(z),y.pop()}else for(const R of r){const z=R[j];if(z)for(const U of z)_.push(U.feature)}}return _}queryRenderedFeatures(r,u,m){u&&u.filter&&this._validate(d.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const j of u.layers){const R=this._layers[j];if(!R)return this.fire(new d.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[R.source]=!0}}const _=[];u.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const j in this.sourceCaches)u.layers&&!y[j]||_.push(ur(this.sourceCaches[j],this._layers,P,r,u,m));return this.placement&&_.push(function(j,R,z,U,q,X,le){const ce={},me=X.queryRenderedSymbols(U),ae=[];for(const je of Object.keys(me).map(Number))ae.push(le[je]);ae.sort(hi);for(const je of ae){const Ue=je.featureIndex.lookupSymbolFeatures(me[je.bucketInstanceId],R,je.bucketIndex,je.sourceLayerIndex,q.filter,q.layers,q.availableImages,j);for(const ye in Ue){const ke=ce[ye]=ce[ye]||[],$e=Ue[ye];$e.sort((Ye,it)=>{const yt=je.featureSortOrder;if(yt){const ft=yt.indexOf(Ye.featureIndex);return yt.indexOf(it.featureIndex)-ft}return it.featureIndex-Ye.featureIndex});for(const Ye of $e)ke.push(Ye)}}for(const je in ce)ce[je].forEach(Ue=>{const ye=Ue.feature,ke=z[j[je].source].getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=ke});return ce}(this._layers,P,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(d.y.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[r];return m?function(y,_){const P=y.getRenderableIds().map(z=>y.getTileByID(z)),j=[],R={};for(let z=0;z<P.length;z++){const U=P[z],q=U.tileID.canonical.key;R[q]||(R[q]=!0,U.querySourceFeatures(j,_))}return j}(m,u):[]}addSourceType(r,u,m){return $r(r)?m(new Error(`A source type called "${r}" already exists.`)):(((y,_)=>{tr[y]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const m=this.light.getLight();let y=!1;for(const P in r)if(!d.aG(r[P],m[P])){y=!0;break}if(!y)return;const _={now:d.h.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,m,y,_={}){return(!_||_.validate!==!1)&&Li(this,r.call(d.y,d.e({key:u,style:this.serialize(),value:m,styleSpec:d.v},y)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),d.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const m=this.sourceCaches[u];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,m,y,_=!1){let P=!1,j=!1;const R={};for(const z of this._order){const U=this._layers[z];if(U.type!=="symbol")continue;if(!R[U.source]){const X=this.sourceCaches[U.source];R[U.source]=X.getRenderableIds(!0).map(le=>X.getTileByID(le)).sort((le,ce)=>ce.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(ce.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(U,R[U.source],r.center.lng);P=P||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(d.h.now(),r.zoom))&&(this.pauseablePlacement=new Tn(r,this.map.terrain,this._order,_,u,m,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(d.h.now()),j=!0),P&&this.pauseablePlacement.placement.setStale()),j||P)for(const z of this._order){const U=this._layers[z];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(d.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,m){this.glyphManager.getGlyphs(u.stacks,m);const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,m){return d.m(u,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(d.y.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,m={},y){this._checkLoaded();const _=[{id:r,url:u}],P=[...ut(this.stylesheet.sprite),..._];this._validate(d.y.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(_,!0,y))}removeSprite(r){this._checkLoaded();const u=ut(this.stylesheet.sprite);if(u.find(m=>m.id===r)){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;u.splice(u.findIndex(m=>m.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ut(this.stylesheet.sprite)}setSprite(r,u={},m){this._checkLoaded(),r&&this._validate(d.y.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}Ii.registerForPluginStateChange=d.aK;var xl=d.Q([{name:"a_pos",type:"Int16",components:2}]),Ia="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Br={prelude:Gn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Gn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Gn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Gn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Gn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ia),terrainDepth:Gn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ia),terrainCoords:Gn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ia)};function Gn(x,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/attribute ([\w]+) ([\w]+)/g),y=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=_?_.concat(y):y,j={};return{fragmentSource:x=x.replace(u,(R,z,U,q,X)=>(j[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = u_${X};
#endif
`)),vertexSource:r=r.replace(u,(R,z,U,q,X)=>{const le=q==="float"?"vec2":"vec4",ce=X.match(/color/)?"color":le;return j[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${le} a_${X};
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${le} a_${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Qs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,m,y,_,P,j,R,z){this.context=r;let U=this.boundPaintVertexBuffers.length!==y.length;for(let q=0;!U&&q<y.length;q++)this.boundPaintVertexBuffers[q]!==y[q]&&(U=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==_||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==z?this.freshBind(u,m,y,_,P,j,R,z):(r.bindVertexArray.set(this.vao),j&&j.bind(),_&&_.dynamicDraw&&_.bind(),R&&R.bind(),z&&z.bind())}freshBind(r,u,m,y,_,P,j,R){const z=r.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=y,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=R,u.enableAttributes(q,r);for(const X of m)X.enableAttributes(q,r);P&&P.enableAttributes(q,r),j&&j.enableAttributes(q,r),R&&R.enableAttributes(q,r),u.bind(),u.setVertexAttribPointers(q,r,_);for(const X of m)X.bind(),X.setVertexAttribPointers(q,r,_);P&&(P.bind(),P.setVertexAttribPointers(q,r,_)),y&&y.bind(),j&&(j.bind(),j.setVertexAttribPointers(q,r,_)),R&&(R.bind(),R.setVertexAttribPointers(q,r,_)),U.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function jr(x){const r=[];for(let u=0;u<x.length;u++){if(x[u]===null)continue;const m=x[u].split(" ");r.push(m.pop())}return r}class vo{constructor(r,u,m,y,_,P){const j=r.gl;this.program=j.createProgram();const R=jr(u.staticAttributes),z=m?m.getBinderAttributes():[],U=R.concat(z),q=Br.prelude.staticUniforms?jr(Br.prelude.staticUniforms):[],X=u.staticUniforms?jr(u.staticUniforms):[],le=m?m.getBinderUniforms():[],ce=q.concat(X).concat(le),me=[];for(const Ye of ce)me.indexOf(Ye)<0&&me.push(Ye);const ae=m?m.defines():[];_&&ae.push("#define OVERDRAW_INSPECTOR;"),P&&ae.push("#define TERRAIN3D;");const je=ae.concat(Br.prelude.fragmentSource,u.fragmentSource).join(`
`),Ue=ae.concat(Br.prelude.vertexSource,u.vertexSource).join(`
`),ye=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ye,je),j.compileShader(ye),!j.getShaderParameter(ye,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(ye)}`);j.attachShader(this.program,ye);const ke=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ke,Ue),j.compileShader(ke),!j.getShaderParameter(ke,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(ke)}`);j.attachShader(this.program,ke),this.attributes={};const $e={};this.numAttributes=U.length;for(let Ye=0;Ye<this.numAttributes;Ye++)U[Ye]&&(j.bindAttribLocation(this.program,Ye,U[Ye]),this.attributes[U[Ye]]=Ye);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(ke),j.deleteShader(ye);for(let Ye=0;Ye<me.length;Ye++){const it=me[Ye];if(it&&!$e[it]){const yt=j.getUniformLocation(this.program,it);yt&&($e[it]=yt)}}this.fixedUniforms=y(r,$e),this.terrainUniforms=((Ye,it)=>({u_depth:new d.aL(Ye,it.u_depth),u_terrain:new d.aL(Ye,it.u_terrain),u_terrain_dim:new d.aM(Ye,it.u_terrain_dim),u_terrain_matrix:new d.aN(Ye,it.u_terrain_matrix),u_terrain_unpack:new d.aO(Ye,it.u_terrain_unpack),u_terrain_exaggeration:new d.aM(Ye,it.u_terrain_exaggeration)}))(r,$e),this.binderUniforms=m?m.getUniforms(r,$e):[]}draw(r,u,m,y,_,P,j,R,z,U,q,X,le,ce,me,ae,je,Ue){const ye=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(y),r.setColorMode(_),r.setCullFace(P),R){r.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,R.texture);for(const $e in this.terrainUniforms)this.terrainUniforms[$e].set(R[$e])}for(const $e in this.fixedUniforms)this.fixedUniforms[$e].set(j[$e]);me&&me.setUniforms(r,this.binderUniforms,le,{zoom:ce});let ke=0;switch(u){case ye.LINES:ke=2;break;case ye.TRIANGLES:ke=3;break;case ye.LINE_STRIP:ke=1}for(const $e of X.get()){const Ye=$e.vaos||($e.vaos={});(Ye[z]||(Ye[z]=new Qs)).bind(r,this,U,me?me.getPaintVertexBuffers():[],q,$e.vertexOffset,ae,je,Ue),ye.drawElements(u,$e.primitiveLength*ke,ye.UNSIGNED_SHORT,$e.primitiveOffset*ke*2)}}}function Ji(x,r,u){const m=1/xe(u,1,r.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/y,P=_*(u.tileID.canonical.x+u.tileID.wrap*y),j=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[P>>16,j>>16],u_pixel_coord_lower:[65535&P,65535&j]}}const Uo=(x,r,u,m)=>{const y=r.style.light,_=y.properties.get("position"),P=[_.x,_.y,_.z],j=function(){var z=new d.A(9);return d.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();y.properties.get("anchor")==="viewport"&&function(z,U){var q=Math.sin(U),X=Math.cos(U);z[0]=X,z[1]=q,z[2]=0,z[3]=-q,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(j,-r.transform.angle),function(z,U,q){var X=U[0],le=U[1],ce=U[2];z[0]=X*q[0]+le*q[3]+ce*q[6],z[1]=X*q[1]+le*q[4]+ce*q[7],z[2]=X*q[2]+le*q[5]+ce*q[8]}(P,P,j);const R=y.properties.get("color");return{u_matrix:x,u_lightpos:P,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+u,u_opacity:m}},pa=(x,r,u,m,y,_,P)=>d.e(Uo(x,r,u,m),Ji(_,r,P),{u_height_factor:-Math.pow(2,y.overscaledZ)/P.tileSize/8}),au=x=>({u_matrix:x}),_l=(x,r,u,m)=>d.e(au(x),Ji(u,r,m)),gc=(x,r)=>({u_matrix:x,u_world:r}),eo=(x,r,u,m,y)=>d.e(_l(x,r,u,m),{u_world:y}),Va=(x,r,u,m)=>{const y=x.transform;let _,P;if(m.paint.get("circle-pitch-alignment")==="map"){const j=xe(u,1,y.zoom);_=!0,P=[j,j]}else _=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(r.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:P}},wl=(x,r,u)=>{const m=xe(u,1,r.zoom),y=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[r.pixelsToGLUnits[0]/(m*y),r.pixelsToGLUnits[1]/(m*y)],u_overscale_factor:_}},or=(x,r,u=1)=>({u_matrix:x,u_color:r,u_overlay:0,u_overlay_scale:u}),od=x=>({u_matrix:x}),yo=(x,r,u,m)=>({u_matrix:x,u_extrude_scale:xe(r,1,u),u_intensity:m});function jn(x,r){const u=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new d.U(0,m/u).toLngLat().lat,new d.U(0,(m+1)/u).toLngLat().lat]}const Cl=(x,r,u,m)=>{const y=x.transform;return{u_matrix:Pi(x,r,u,m),u_ratio:1/xe(r,1,y.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ps=(x,r,u,m,y)=>d.e(Cl(x,r,u,y),{u_image:0,u_image_height:m}),Nl=(x,r,u,m,y)=>{const _=x.transform,P=ld(r,_);return{u_matrix:Pi(x,r,u,y),u_texsize:r.imageAtlasTexture.size,u_ratio:1/xe(r,1,_.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},bo=(x,r,u,m,y,_)=>{const P=x.lineAtlas,j=ld(r,x.transform),R=u.layout.get("line-cap")==="round",z=P.getDash(m.from,R),U=P.getDash(m.to,R),q=z.width*y.fromScale,X=U.width*y.toScale;return d.e(Cl(x,r,u,_),{u_patternscale_a:[j/q,-z.height/2],u_patternscale_b:[j/X,-U.height/2],u_sdfgamma:P.width/(256*Math.min(q,X)*x.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:U.y,u_mix:y.t})};function ld(x,r){return 1/xe(x,1,r.tileZoom)}function Pi(x,r,u,m){return x.translatePosMatrix(m?m.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const oi=(x,r,u,m,y)=>{return{u_matrix:x,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(_=y.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:ou(y.paint.get("raster-hue-rotate"))};var _,P};function ou(x){x*=Math.PI/180;const r=Math.sin(x),u=Math.cos(x);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const $s=(x,r,u,m,y,_,P,j,R,z)=>{const U=y.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:U.width/U.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:P,u_coord_matrix:j,u_is_text:+R,u_pitch_with_map:+m,u_texsize:z,u_texture:0}},as=(x,r,u,m,y,_,P,j,R,z,U)=>{const q=y.transform;return d.e($s(x,r,u,m,y,_,P,j,R,z),{u_gamma_scale:m?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:1})},os=(x,r,u,m,y,_,P,j,R,z)=>d.e(as(x,r,u,m,y,_,P,j,!0,R),{u_texsize_icon:z,u_texture_icon:1}),vc=(x,r,u)=>({u_matrix:x,u_opacity:r,u_color:u}),gs=(x,r,u,m,y,_)=>d.e(function(P,j,R,z){const U=R.imageManager.getPattern(P.from.toString()),q=R.imageManager.getPattern(P.to.toString()),{width:X,height:le}=R.imageManager.getPixelSize(),ce=Math.pow(2,z.tileID.overscaledZ),me=z.tileSize*Math.pow(2,R.transform.tileZoom)/ce,ae=me*(z.tileID.canonical.x+z.tileID.wrap*ce),je=me*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[X,le],u_mix:j.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/xe(z,1,R.transform.tileZoom),u_pixel_coord_upper:[ae>>16,je>>16],u_pixel_coord_lower:[65535&ae,65535&je]}}(m,_,u,y),{u_matrix:x,u_opacity:r}),Sl={fillExtrusion:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_lightpos:new d.aP(x,r.u_lightpos),u_lightintensity:new d.aM(x,r.u_lightintensity),u_lightcolor:new d.aP(x,r.u_lightcolor),u_vertical_gradient:new d.aM(x,r.u_vertical_gradient),u_opacity:new d.aM(x,r.u_opacity)}),fillExtrusionPattern:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_lightpos:new d.aP(x,r.u_lightpos),u_lightintensity:new d.aM(x,r.u_lightintensity),u_lightcolor:new d.aP(x,r.u_lightcolor),u_vertical_gradient:new d.aM(x,r.u_vertical_gradient),u_height_factor:new d.aM(x,r.u_height_factor),u_image:new d.aL(x,r.u_image),u_texsize:new d.aQ(x,r.u_texsize),u_pixel_coord_upper:new d.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(x,r.u_pixel_coord_lower),u_scale:new d.aP(x,r.u_scale),u_fade:new d.aM(x,r.u_fade),u_opacity:new d.aM(x,r.u_opacity)}),fill:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix)}),fillPattern:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_image:new d.aL(x,r.u_image),u_texsize:new d.aQ(x,r.u_texsize),u_pixel_coord_upper:new d.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(x,r.u_pixel_coord_lower),u_scale:new d.aP(x,r.u_scale),u_fade:new d.aM(x,r.u_fade)}),fillOutline:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_world:new d.aQ(x,r.u_world)}),fillOutlinePattern:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_world:new d.aQ(x,r.u_world),u_image:new d.aL(x,r.u_image),u_texsize:new d.aQ(x,r.u_texsize),u_pixel_coord_upper:new d.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(x,r.u_pixel_coord_lower),u_scale:new d.aP(x,r.u_scale),u_fade:new d.aM(x,r.u_fade)}),circle:(x,r)=>({u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_scale_with_map:new d.aL(x,r.u_scale_with_map),u_pitch_with_map:new d.aL(x,r.u_pitch_with_map),u_extrude_scale:new d.aQ(x,r.u_extrude_scale),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_matrix:new d.aN(x,r.u_matrix)}),collisionBox:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_pixels_to_tile_units:new d.aM(x,r.u_pixels_to_tile_units),u_extrude_scale:new d.aQ(x,r.u_extrude_scale),u_overscale_factor:new d.aM(x,r.u_overscale_factor)}),collisionCircle:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_inv_matrix:new d.aN(x,r.u_inv_matrix),u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_viewport_size:new d.aQ(x,r.u_viewport_size)}),debug:(x,r)=>({u_color:new d.aR(x,r.u_color),u_matrix:new d.aN(x,r.u_matrix),u_overlay:new d.aL(x,r.u_overlay),u_overlay_scale:new d.aM(x,r.u_overlay_scale)}),clippingMask:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix)}),heatmap:(x,r)=>({u_extrude_scale:new d.aM(x,r.u_extrude_scale),u_intensity:new d.aM(x,r.u_intensity),u_matrix:new d.aN(x,r.u_matrix)}),heatmapTexture:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_world:new d.aQ(x,r.u_world),u_image:new d.aL(x,r.u_image),u_color_ramp:new d.aL(x,r.u_color_ramp),u_opacity:new d.aM(x,r.u_opacity)}),hillshade:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_image:new d.aL(x,r.u_image),u_latrange:new d.aQ(x,r.u_latrange),u_light:new d.aQ(x,r.u_light),u_shadow:new d.aR(x,r.u_shadow),u_highlight:new d.aR(x,r.u_highlight),u_accent:new d.aR(x,r.u_accent)}),hillshadePrepare:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_image:new d.aL(x,r.u_image),u_dimension:new d.aQ(x,r.u_dimension),u_zoom:new d.aM(x,r.u_zoom),u_unpack:new d.aO(x,r.u_unpack)}),line:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_ratio:new d.aM(x,r.u_ratio),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(x,r.u_units_to_pixels)}),lineGradient:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_ratio:new d.aM(x,r.u_ratio),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(x,r.u_units_to_pixels),u_image:new d.aL(x,r.u_image),u_image_height:new d.aM(x,r.u_image_height)}),linePattern:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_texsize:new d.aQ(x,r.u_texsize),u_ratio:new d.aM(x,r.u_ratio),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_image:new d.aL(x,r.u_image),u_units_to_pixels:new d.aQ(x,r.u_units_to_pixels),u_scale:new d.aP(x,r.u_scale),u_fade:new d.aM(x,r.u_fade)}),lineSDF:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_ratio:new d.aM(x,r.u_ratio),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(x,r.u_units_to_pixels),u_patternscale_a:new d.aQ(x,r.u_patternscale_a),u_patternscale_b:new d.aQ(x,r.u_patternscale_b),u_sdfgamma:new d.aM(x,r.u_sdfgamma),u_image:new d.aL(x,r.u_image),u_tex_y_a:new d.aM(x,r.u_tex_y_a),u_tex_y_b:new d.aM(x,r.u_tex_y_b),u_mix:new d.aM(x,r.u_mix)}),raster:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_tl_parent:new d.aQ(x,r.u_tl_parent),u_scale_parent:new d.aM(x,r.u_scale_parent),u_buffer_scale:new d.aM(x,r.u_buffer_scale),u_fade_t:new d.aM(x,r.u_fade_t),u_opacity:new d.aM(x,r.u_opacity),u_image0:new d.aL(x,r.u_image0),u_image1:new d.aL(x,r.u_image1),u_brightness_low:new d.aM(x,r.u_brightness_low),u_brightness_high:new d.aM(x,r.u_brightness_high),u_saturation_factor:new d.aM(x,r.u_saturation_factor),u_contrast_factor:new d.aM(x,r.u_contrast_factor),u_spin_weights:new d.aP(x,r.u_spin_weights)}),symbolIcon:(x,r)=>({u_is_size_zoom_constant:new d.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(x,r.u_is_size_feature_constant),u_size_t:new d.aM(x,r.u_size_t),u_size:new d.aM(x,r.u_size),u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_pitch:new d.aM(x,r.u_pitch),u_rotate_symbol:new d.aL(x,r.u_rotate_symbol),u_aspect_ratio:new d.aM(x,r.u_aspect_ratio),u_fade_change:new d.aM(x,r.u_fade_change),u_matrix:new d.aN(x,r.u_matrix),u_label_plane_matrix:new d.aN(x,r.u_label_plane_matrix),u_coord_matrix:new d.aN(x,r.u_coord_matrix),u_is_text:new d.aL(x,r.u_is_text),u_pitch_with_map:new d.aL(x,r.u_pitch_with_map),u_texsize:new d.aQ(x,r.u_texsize),u_texture:new d.aL(x,r.u_texture)}),symbolSDF:(x,r)=>({u_is_size_zoom_constant:new d.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(x,r.u_is_size_feature_constant),u_size_t:new d.aM(x,r.u_size_t),u_size:new d.aM(x,r.u_size),u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_pitch:new d.aM(x,r.u_pitch),u_rotate_symbol:new d.aL(x,r.u_rotate_symbol),u_aspect_ratio:new d.aM(x,r.u_aspect_ratio),u_fade_change:new d.aM(x,r.u_fade_change),u_matrix:new d.aN(x,r.u_matrix),u_label_plane_matrix:new d.aN(x,r.u_label_plane_matrix),u_coord_matrix:new d.aN(x,r.u_coord_matrix),u_is_text:new d.aL(x,r.u_is_text),u_pitch_with_map:new d.aL(x,r.u_pitch_with_map),u_texsize:new d.aQ(x,r.u_texsize),u_texture:new d.aL(x,r.u_texture),u_gamma_scale:new d.aM(x,r.u_gamma_scale),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_is_halo:new d.aL(x,r.u_is_halo)}),symbolTextAndIcon:(x,r)=>({u_is_size_zoom_constant:new d.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(x,r.u_is_size_feature_constant),u_size_t:new d.aM(x,r.u_size_t),u_size:new d.aM(x,r.u_size),u_camera_to_center_distance:new d.aM(x,r.u_camera_to_center_distance),u_pitch:new d.aM(x,r.u_pitch),u_rotate_symbol:new d.aL(x,r.u_rotate_symbol),u_aspect_ratio:new d.aM(x,r.u_aspect_ratio),u_fade_change:new d.aM(x,r.u_fade_change),u_matrix:new d.aN(x,r.u_matrix),u_label_plane_matrix:new d.aN(x,r.u_label_plane_matrix),u_coord_matrix:new d.aN(x,r.u_coord_matrix),u_is_text:new d.aL(x,r.u_is_text),u_pitch_with_map:new d.aL(x,r.u_pitch_with_map),u_texsize:new d.aQ(x,r.u_texsize),u_texsize_icon:new d.aQ(x,r.u_texsize_icon),u_texture:new d.aL(x,r.u_texture),u_texture_icon:new d.aL(x,r.u_texture_icon),u_gamma_scale:new d.aM(x,r.u_gamma_scale),u_device_pixel_ratio:new d.aM(x,r.u_device_pixel_ratio),u_is_halo:new d.aL(x,r.u_is_halo)}),background:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_opacity:new d.aM(x,r.u_opacity),u_color:new d.aR(x,r.u_color)}),backgroundPattern:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_opacity:new d.aM(x,r.u_opacity),u_image:new d.aL(x,r.u_image),u_pattern_tl_a:new d.aQ(x,r.u_pattern_tl_a),u_pattern_br_a:new d.aQ(x,r.u_pattern_br_a),u_pattern_tl_b:new d.aQ(x,r.u_pattern_tl_b),u_pattern_br_b:new d.aQ(x,r.u_pattern_br_b),u_texsize:new d.aQ(x,r.u_texsize),u_mix:new d.aM(x,r.u_mix),u_pattern_size_a:new d.aQ(x,r.u_pattern_size_a),u_pattern_size_b:new d.aQ(x,r.u_pattern_size_b),u_scale_a:new d.aM(x,r.u_scale_a),u_scale_b:new d.aM(x,r.u_scale_b),u_pixel_coord_upper:new d.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(x,r.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aM(x,r.u_tile_units_to_pixels)}),terrain:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_texture:new d.aL(x,r.u_texture),u_ele_delta:new d.aM(x,r.u_ele_delta)}),terrainDepth:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_ele_delta:new d.aM(x,r.u_ele_delta)}),terrainCoords:(x,r)=>({u_matrix:new d.aN(x,r.u_matrix),u_texture:new d.aL(x,r.u_texture),u_terrain_coords_id:new d.aM(x,r.u_terrain_coords_id),u_ele_delta:new d.aM(x,r.u_ele_delta)})};class $o{constructor(r,u,m){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const to={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yc{constructor(r,u,m,y){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let m=0;m<this.attributes.length;m++){const y=u.attributes[this.attributes[m].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,u,m){for(let y=0;y<this.attributes.length;y++){const _=this.attributes[y],P=u.attributes[_.name];P!==void 0&&r.vertexAttribPointer(P,_.components,r[to[_.type]],!1,this.itemSize,_.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ea=new WeakMap;function qs(x){var r;if(ea.has(x))return ea.get(x);{const u=(r=x.getParameter(x.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ea.set(x,u),u}}class Wn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ga extends Wn{getDefault(){return d.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Qi extends Wn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class es extends Wn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class qo extends Wn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class El extends Wn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Dl extends Wn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Tl extends Wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class bc extends Wn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class K extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class _e extends Wn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Xe extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class rt extends Wn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class jt extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class xn extends Wn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Yt extends Wn{getDefault(){return d.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Mn extends Wn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class lr extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Ar extends Wn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Xr extends Wn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Jr extends Wn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class nr extends Wn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Qr extends Wn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class vi extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xo extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pl extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Hs extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class xc extends Wn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class _c extends Wn{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const m=this.gl;qs(m)?m.bindVertexArray(r):(u=m.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class lu extends Wn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class no extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class cd extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class _o extends Wn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Ho extends _o{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class _h extends _o{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ud extends _o{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class pr{constructor(r,u,m,y,_){this.context=r,this.width=u,this.height=m;const P=r.gl,j=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Ho(r,j),y)this.depthAttachment=_?new ud(r,j):new _h(r,j);else if(_)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class fi{constructor(r,u,m){this.blendFunction=r,this.blendColor=u,this.mask=m}}fi.Replace=[1,0],fi.disabled=new fi(fi.Replace,d.aT.transparent,[!1,!1,!1,!1]),fi.unblended=new fi(fi.Replace,d.aT.transparent,[!0,!0,!0,!0]),fi.alphaBlended=new fi([1,771],d.aT.transparent,[!0,!0,!0,!0]);class wo{constructor(r){var u,m;if(this.gl=r,this.clearColor=new ga(this),this.clearDepth=new Qi(this),this.clearStencil=new es(this),this.colorMask=new qo(this),this.depthMask=new El(this),this.stencilMask=new Dl(this),this.stencilFunc=new Tl(this),this.stencilOp=new bc(this),this.stencilTest=new K(this),this.depthRange=new _e(this),this.depthTest=new Xe(this),this.depthFunc=new rt(this),this.blend=new jt(this),this.blendFunc=new xn(this),this.blendColor=new Yt(this),this.blendEquation=new Mn(this),this.cullFace=new lr(this),this.cullFaceSide=new Ar(this),this.frontFace=new Xr(this),this.program=new Jr(this),this.activeTexture=new nr(this),this.viewport=new Qr(this),this.bindFramebuffer=new vi(this),this.bindRenderbuffer=new xo(this),this.bindTexture=new Pl(this),this.bindVertexBuffer=new Hs(this),this.bindElementBuffer=new xc(this),this.bindVertexArray=new _c(this),this.pixelStoreUnpack=new lu(this),this.pixelStoreUnpackPremultiplyAlpha=new no(this),this.pixelStoreUnpackFlipY=new cd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),qs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:y==null?void 0:y.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new $o(this,r,u)}createVertexBuffer(r,u,m){return new yc(this,r,u,m)}createRenderbuffer(r,u,m){const y=this.gl,_=y.createRenderbuffer();return this.bindRenderbuffer.set(_),y.renderbufferStorage(y.RENDERBUFFER,r,u,m),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,m,y){return new pr(this,r,u,m,y)}clear({color:r,depth:u,stencil:m}){const y=this.gl;let _=0;r&&(_|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m!==void 0&&(_|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),y.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){d.aG(r.blendFunction,fi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return qs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return qs(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class ir{constructor(r,u,m){this.func=r,this.mask=u,this.range=m}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const Co=7680;class ei{constructor(r,u,m,y,_,P){this.test=r,this.ref=u,this.mask=m,this.fail=y,this.depthFail=_,this.pass=P}}ei.disabled=new ei({func:519,mask:0},0,0,Co,Co,Co);class Gr{constructor(r,u,m){this.enable=r,this.mode=u,this.frontFace=m}}let cu;function uu(x,r,u,m,y,_,P){const j=x.context,R=j.gl,z=x.useProgram("collisionBox"),U=[];let q=0,X=0;for(let ye=0;ye<m.length;ye++){const ke=m[ye],$e=r.getTile(ke),Ye=$e.getBucket(u);if(!Ye)continue;let it=ke.posMatrix;y[0]===0&&y[1]===0||(it=x.translatePosMatrix(ke.posMatrix,$e,y,_));const yt=P?Ye.textCollisionBox:Ye.iconCollisionBox,ft=Ye.collisionCircleArray;if(ft.length>0){const wt=d.Z(),Qt=it;d.aU(wt,Ye.placementInvProjMatrix,x.transform.glCoordMatrix),d.aU(wt,wt,Ye.placementViewportMatrix),U.push({circleArray:ft,circleOffset:X,transform:Qt,invTransform:wt,coord:ke}),q+=ft.length/4,X=q}yt&&z.draw(j,R.LINES,ir.disabled,ei.disabled,x.colorModeForRenderPass(),Gr.disabled,wl(it,x.transform,$e),x.style.map.terrain&&x.style.map.terrain.getTerrainData(ke),u.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,null,x.transform.zoom,null,null,yt.collisionVertexBuffer)}if(!P||!U.length)return;const le=x.useProgram("collisionCircle"),ce=new d.aV;ce.resize(4*q),ce._trim();let me=0;for(const ye of U)for(let ke=0;ke<ye.circleArray.length/4;ke++){const $e=4*ke,Ye=ye.circleArray[$e+0],it=ye.circleArray[$e+1],yt=ye.circleArray[$e+2],ft=ye.circleArray[$e+3];ce.emplace(me++,Ye,it,yt,ft,0),ce.emplace(me++,Ye,it,yt,ft,1),ce.emplace(me++,Ye,it,yt,ft,2),ce.emplace(me++,Ye,it,yt,ft,3)}(!cu||cu.length<2*q)&&(cu=function(ye){const ke=2*ye,$e=new d.aX;$e.resize(ke),$e._trim();for(let Ye=0;Ye<ke;Ye++){const it=6*Ye;$e.uint16[it+0]=4*Ye+0,$e.uint16[it+1]=4*Ye+1,$e.uint16[it+2]=4*Ye+2,$e.uint16[it+3]=4*Ye+2,$e.uint16[it+4]=4*Ye+3,$e.uint16[it+5]=4*Ye+0}return $e}(q));const ae=j.createIndexBuffer(cu,!0),je=j.createVertexBuffer(ce,d.aW.members,!0);for(const ye of U){const ke={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(Ue=x.transform).cameraToCenterDistance,u_viewport_size:[Ue.width,Ue.height]};le.draw(j,R.TRIANGLES,ir.disabled,ei.disabled,x.colorModeForRenderPass(),Gr.disabled,ke,x.style.map.terrain&&x.style.map.terrain.getTerrainData(ye.coord),u.id,je,ae,d.S.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,x.transform.zoom,null,null,null)}var Ue;je.destroy(),ae.destroy()}Gr.disabled=new Gr(!1,1029,2305),Gr.backCCW=new Gr(!0,1029,2305);const dd=d.ao(new Float32Array(16));function ls(x,r,u,m,y,_){const{horizontalAlign:P,verticalAlign:j}=d.au(x);return new d.P((-(P-.5)*r/y+m[0])*_,(-(j-.5)*u/y+m[1])*_)}function va(x,r,u,m,y,_,P,j,R,z,U){const q=x.text.placedSymbolArray,X=x.text.dynamicLayoutVertexArray,le=x.icon.dynamicLayoutVertexArray,ce={};X.clear();for(let me=0;me<q.length;me++){const ae=q.get(me),je=ae.hidden||!ae.crossTileID||x.allowVerticalPlacement&&!ae.placedOrientation?null:m[ae.crossTileID];if(je){const Ue=new d.P(ae.anchorX,ae.anchorY),ye=Cn(Ue,u?P:_,U),ke=br(y.cameraToCenterDistance,ye.signedDistanceFromCamera);let $e=d.aj(x.textSizeData,R,ae)*ke/d.ap;u&&($e*=x.tilePixelRatio/j);const{width:Ye,height:it,anchor:yt,textOffset:ft,textBoxScale:wt}=je,Qt=ls(yt,Ye,it,ft,wt,$e),Xn=u?Cn(Ue.add(Qt),_,U).point:ye.point.add(r?Qt.rotate(-y.angle):Qt),At=x.allowVerticalPlacement&&ae.placedOrientation===d.ai.vertical?Math.PI/2:0;for(let mn=0;mn<ae.numGlyphs;mn++)d.ak(X,Xn,At);z&&ae.associatedIconIndex>=0&&(ce[ae.associatedIconIndex]={shiftedAnchor:Xn,angle:At})}else J(ae.numGlyphs,X)}if(z){le.clear();const me=x.icon.placedSymbolArray;for(let ae=0;ae<me.length;ae++){const je=me.get(ae);if(je.hidden)J(je.numGlyphs,le);else{const Ue=ce[ae];if(Ue)for(let ye=0;ye<je.numGlyphs;ye++)d.ak(le,Ue.shiftedAnchor,Ue.angle);else J(je.numGlyphs,le)}}x.icon.dynamicLayoutVertexBuffer.updateData(le)}x.text.dynamicLayoutVertexBuffer.updateData(X)}function xi(x,r,u){return u.iconsInText&&r?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function ya(x,r,u,m,y,_,P,j,R,z,U,q){const X=x.context,le=X.gl,ce=x.transform,me=j==="map",ae=R==="map",je=j!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ue=me&&!ae&&!je,ye=!u.layout.get("symbol-sort-key").isConstant();let ke=!1;const $e=x.depthModeForSublayer(0,ir.ReadOnly),Ye=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[];for(const yt of m){const ft=r.getTile(yt),wt=ft.getBucket(u);if(!wt)continue;const Qt=y?wt.text:wt.icon;if(!Qt||!Qt.segments.get().length||!Qt.hasVisibleVertices)continue;const Xn=Qt.programConfigurations.get(u.id),At=y||wt.sdfIcons,mn=y?wt.textSizeData:wt.iconSizeData,en=ae||ce.pitch!==0,kr=x.useProgram(xi(At,y,wt),Xn),Zn=d.ah(mn,ce.zoom),In=x.style.map.terrain&&x.style.map.terrain.getTerrainData(yt);let Jn,wi,Wr,gr,Fi=[0,0],mi=null;if(y)wi=ft.glyphAtlasTexture,Wr=le.LINEAR,Jn=ft.glyphAtlasTexture.size,wt.iconsInText&&(Fi=ft.imageAtlasTexture.size,mi=ft.imageAtlasTexture,gr=en||x.options.rotating||x.options.zooming||mn.kind==="composite"||mn.kind==="camera"?le.LINEAR:le.NEAREST);else{const Ci=u.layout.get("icon-size").constantOr(0)!==1||wt.iconsNeedLinear;wi=ft.imageAtlasTexture,Wr=At||x.options.rotating||x.options.zooming||Ci||en?le.LINEAR:le.NEAREST,Jn=ft.imageAtlasTexture.size}const Ts=xe(ft,1,x.transform.zoom),Nr=nt(yt.posMatrix,ae,me,x.transform,Ts),io=zn(yt.posMatrix,ae,me,x.transform,Ts),Ca=Ye&&wt.hasTextData(),el=u.layout.get("icon-text-fit")!=="none"&&Ca&&wt.hasIconData();if(je){const Ci=x.style.map.terrain?(Ws,Ni)=>x.style.map.terrain.getElevation(yt,Ws,Ni):null,Ui=u.layout.get("text-rotation-alignment")==="map";gt(wt,yt.posMatrix,x,y,Nr,io,ae,z,Ui,Ci)}const Vl=x.translatePosMatrix(yt.posMatrix,ft,_,P),Oa=je||y&&Ye||el?dd:Nr,Er=x.translatePosMatrix(io,ft,_,P,!0),Pt=At&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let pi;pi=At?wt.iconsInText?os(mn.kind,Zn,Ue,ae,x,Vl,Oa,Er,Jn,Fi):as(mn.kind,Zn,Ue,ae,x,Vl,Oa,Er,y,Jn):$s(mn.kind,Zn,Ue,ae,x,Vl,Oa,Er,y,Jn);const cs={program:kr,buffers:Qt,uniformValues:pi,atlasTexture:wi,atlasTextureIcon:mi,atlasInterpolation:Wr,atlasInterpolationIcon:gr,isSDF:At,hasHalo:Pt};if(ye&&wt.canOverlap){ke=!0;const Ci=Qt.segments.get();for(const Ui of Ci)it.push({segments:new d.S([Ui]),sortKey:Ui.sortKey,state:cs,terrainData:In})}else it.push({segments:Qt.segments,sortKey:0,state:cs,terrainData:In})}ke&&it.sort((yt,ft)=>yt.sortKey-ft.sortKey);for(const yt of it){const ft=yt.state;if(X.activeTexture.set(le.TEXTURE0),ft.atlasTexture.bind(ft.atlasInterpolation,le.CLAMP_TO_EDGE),ft.atlasTextureIcon&&(X.activeTexture.set(le.TEXTURE1),ft.atlasTextureIcon&&ft.atlasTextureIcon.bind(ft.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),ft.isSDF){const wt=ft.uniformValues;ft.hasHalo&&(wt.u_is_halo=1,du(ft.buffers,yt.segments,u,x,ft.program,$e,U,q,wt,yt.terrainData)),wt.u_is_halo=0}du(ft.buffers,yt.segments,u,x,ft.program,$e,U,q,ft.uniformValues,yt.terrainData)}}function du(x,r,u,m,y,_,P,j,R,z){const U=m.context;y.draw(U,U.gl.TRIANGLES,_,P,j,Gr.disabled,R,z,u.id,x.layoutVertexBuffer,x.indexBuffer,r,u.paint,m.transform.zoom,x.programConfigurations.get(u.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Go(x,r,u,m,y){if(!u||!m||!m.imageAtlas)return;const _=m.imageAtlas.patternPositions;let P=_[u.to.toString()],j=_[u.from.toString()];if(!P&&j&&(P=j),!j&&P&&(j=P),!P||!j){const R=y.getPaintProperty(r);P=_[R],j=_[R]}P&&j&&x.setConstantPatternPositions(P,j)}function hu(x,r,u,m,y,_,P){const j=x.context.gl,R="fill-pattern",z=u.paint.get(R),U=z&&z.constantOr(1),q=u.getCrossfadeParameters();let X,le,ce,me,ae;P?(le=U&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=j.LINES):(le=U?"fillPattern":"fill",X=j.TRIANGLES);const je=z.constantOr(null);for(const Ue of m){const ye=r.getTile(Ue);if(U&&!ye.patternsLoaded())continue;const ke=ye.getBucket(u);if(!ke)continue;const $e=ke.programConfigurations.get(u.id),Ye=x.useProgram(le,$e),it=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ue);U&&(x.context.activeTexture.set(j.TEXTURE0),ye.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),$e.updatePaintBuffers(q)),Go($e,R,je,ye,u);const yt=it?Ue:null,ft=x.translatePosMatrix(yt?yt.posMatrix:Ue.posMatrix,ye,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(P){me=ke.indexBuffer2,ae=ke.segments2;const wt=[j.drawingBufferWidth,j.drawingBufferHeight];ce=le==="fillOutlinePattern"&&U?eo(ft,x,q,ye,wt):gc(ft,wt)}else me=ke.indexBuffer,ae=ke.segments,ce=U?_l(ft,x,q,ye):au(ft);Ye.draw(x.context,X,y,x.stencilModeForClipping(Ue),_,Gr.disabled,ce,it,u.id,ke.layoutVertexBuffer,me,ae,u.paint,x.transform.zoom,$e)}}function No(x,r,u,m,y,_,P){const j=x.context,R=j.gl,z="fill-extrusion-pattern",U=u.paint.get(z),q=U.constantOr(1),X=u.getCrossfadeParameters(),le=u.paint.get("fill-extrusion-opacity"),ce=U.constantOr(null);for(const me of m){const ae=r.getTile(me),je=ae.getBucket(u);if(!je)continue;const Ue=x.style.map.terrain&&x.style.map.terrain.getTerrainData(me),ye=je.programConfigurations.get(u.id),ke=x.useProgram(q?"fillExtrusionPattern":"fillExtrusion",ye);q&&(x.context.activeTexture.set(R.TEXTURE0),ae.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ye.updatePaintBuffers(X)),Go(ye,z,ce,ae,u);const $e=x.translatePosMatrix(me.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ye=u.paint.get("fill-extrusion-vertical-gradient"),it=q?pa($e,x,Ye,le,me,X,ae):Uo($e,x,Ye,le);ke.draw(j,j.gl.TRIANGLES,y,_,P,Gr.backCCW,it,Ue,u.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,u.paint,x.transform.zoom,ye,x.style.map.terrain&&je.centroidVertexBuffer)}}function Dp(x,r,u,m,y,_,P){const j=x.context,R=j.gl,z=u.fbo;if(!z)return;const U=x.useProgram("hillshade"),q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(r);j.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,z.colorAttachment.get()),U.draw(j,R.TRIANGLES,y,_,P,Gr.disabled,((X,le,ce,me)=>{const ae=ce.paint.get("hillshade-shadow-color"),je=ce.paint.get("hillshade-highlight-color"),Ue=ce.paint.get("hillshade-accent-color");let ye=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=X.transform.angle);const ke=!X.options.moving;return{u_matrix:me?me.posMatrix:X.transform.calculatePosMatrix(le.tileID.toUnwrapped(),ke),u_image:0,u_latrange:jn(0,le.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),ye],u_shadow:ae,u_highlight:je,u_accent:Ue}})(x,u,m,q?r:null),q,m.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}function wh(x,r,u,m,y,_){const P=x.context,j=P.gl,R=r.dem;if(R&&R.data){const z=R.dim,U=R.stride,q=R.getPixels();if(P.activeTexture.set(j.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||x.getTileTexture(U),r.demTexture){const le=r.demTexture;le.update(q,{premultiply:!1}),le.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else r.demTexture=new zt(P,q,j.RGBA,{premultiply:!1}),r.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);P.activeTexture.set(j.TEXTURE0);let X=r.fbo;if(!X){const le=new zt(P,{width:z,height:z,data:null},j.RGBA);le.bind(j.LINEAR,j.CLAMP_TO_EDGE),X=r.fbo=P.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(le.texture)}P.bindFramebuffer.set(X.framebuffer),P.viewport.set([0,0,z,z]),x.useProgram("hillshadePrepare").draw(P,j.TRIANGLES,m,y,_,Gr.disabled,((le,ce)=>{const me=ce.stride,ae=d.Z();return d.aS(ae,0,d.N,-d.N,0,0,1),d.$(ae,ae,[0,-d.N,0]),{u_matrix:ae,u_image:1,u_dimension:[me,me],u_zoom:le.overscaledZ,u_unpack:ce.getUnpackVector()}})(r.tileID,R),null,u.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ch(x,r,u,m,y,_){const P=m.paint.get("raster-fade-duration");if(!_&&P>0){const j=d.h.now(),R=(j-x.timeAdded)/P,z=r?(j-r.timeAdded)/P:-1,U=u.getSource(),q=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),X=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(x.tileID.overscaledZ-q),le=X&&x.refreshedUponExpiration?1:d.ad(X?R:1-z,0,1);return x.refreshedUponExpiration&&R>=1&&(x.refreshedUponExpiration=!1),r?{opacity:1,mix:1-le}:{opacity:le,mix:0}}return{opacity:1,mix:0}}const kf=new d.aT(1,0,0,1),hd=new d.aT(0,1,0,1),Nh=new d.aT(0,0,1,1),Sh=new d.aT(1,0,1,1),Mf=new d.aT(0,1,1,1);function fu(x,r,u,m){mu(x,0,r+u/2,x.transform.width,u,m)}function fd(x,r,u,m){mu(x,r-u/2,0,u,x.transform.height,m)}function mu(x,r,u,m,y,_){const P=x.context,j=P.gl;j.enable(j.SCISSOR_TEST),j.scissor(r*x.pixelRatio,u*x.pixelRatio,m*x.pixelRatio,y*x.pixelRatio),P.clear({color:_}),j.disable(j.SCISSOR_TEST)}function jl(x,r,u){const m=x.context,y=m.gl,_=u.posMatrix,P=x.useProgram("debug"),j=ir.disabled,R=ei.disabled,z=x.colorModeForRenderPass(),U="$debug",q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(u);m.activeTexture.set(y.TEXTURE0);const X=r.getTileByID(u.key).latestRawTileData,le=Math.floor((X&&X.byteLength||0)/1024),ce=r.getTile(u).tileSize,me=512/Math.min(ce,512)*(u.overscaledZ/x.transform.zoom)*.5;let ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ae+=` => ${u.overscaledZ}`),function(je,Ue){je.initDebugOverlayCanvas();const ye=je.debugOverlayCanvas,ke=je.context.gl,$e=je.debugOverlayCanvas.getContext("2d");$e.clearRect(0,0,ye.width,ye.height),$e.shadowColor="white",$e.shadowBlur=2,$e.lineWidth=1.5,$e.strokeStyle="white",$e.textBaseline="top",$e.font="bold 36px Open Sans, sans-serif",$e.fillText(Ue,5,5),$e.strokeText(Ue,5,5),je.debugOverlayTexture.update(ye),je.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(x,`${ae} ${le}kB`),P.draw(m,y.TRIANGLES,j,R,fi.alphaBlended,Gr.disabled,or(_,d.aT.transparent,me),null,U,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),P.draw(m,y.LINE_STRIP,j,R,z,Gr.disabled,or(_,d.aT.red),q,U,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function li(x,r,u){const m=x.context,y=m.gl,_=x.colorModeForRenderPass(),P=new ir(y.LEQUAL,ir.ReadWrite,x.depthRangeFor3D),j=x.useProgram("terrain"),R=r.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,x.width,x.height]);for(const z of u){const U=x.renderToTexture.getTexture(z),q=r.getTerrainData(z.tileID);m.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,U.texture);const X={u_matrix:x.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(x.transform.zoom)};j.draw(m,y.TRIANGLES,P,ei.disabled,_,Gr.backCCW,X,q,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class Wo{constructor(r,u){this.context=new wo(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.Z(),renderTime:0},this.setup(),this.numSublayers=mr.maxUnderzooming+mr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fo}resize(r,u,m){if(this.width=Math.floor(r*m),this.height=Math.floor(u*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,u=new d.a_;u.emplaceBack(0,0),u.emplaceBack(d.N,0),u.emplaceBack(0,d.N),u.emplaceBack(d.N,d.N),this.tileExtentBuffer=r.createVertexBuffer(u,xl.members),this.tileExtentSegments=d.S.simpleSegment(0,0,4,2);const m=new d.a_;m.emplaceBack(0,0),m.emplaceBack(d.N,0),m.emplaceBack(0,d.N),m.emplaceBack(d.N,d.N),this.debugBuffer=r.createVertexBuffer(m,xl.members),this.debugSegments=d.S.simpleSegment(0,0,4,5);const y=new d.V;y.emplaceBack(0,0,0,0),y.emplaceBack(d.N,0,d.N,0),y.emplaceBack(0,d.N,0,d.N),y.emplaceBack(d.N,d.N,d.N,d.N),this.rasterBoundsBuffer=r.createVertexBuffer(y,Ft.members),this.rasterBoundsSegments=d.S.simpleSegment(0,0,4,2);const _=new d.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,xl.members),this.viewportSegments=d.S.simpleSegment(0,0,4,2);const P=new d.a$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(P);const j=new d.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(j);const R=this.context.gl;this.stencilClearMode=new ei({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=d.Z();d.aS(m,0,this.width,this.height,0,0,1),d.a0(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,ir.disabled,this.stencilClearMode,fi.disabled,Gr.disabled,od(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const m=this.context,y=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(fi.disabled),m.setDepthMode(ir.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of u){const j=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);_.draw(m,y.TRIANGLES,ir.disabled,new ei({func:y.ALWAYS,mask:0},j,255,y.KEEP,y.KEEP,y.REPLACE),fi.disabled,Gr.disabled,od(P.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new ei({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new ei({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,m=r.sort((P,j)=>j.overscaledZ-P.overscaledZ),y=m[m.length-1].overscaledZ,_=m[0].overscaledZ-y+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const P={};for(let j=0;j<_;j++)P[j+y]=new ei({func:u.GEQUAL,mask:255},j+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[P,m]}return[{[y]:ei.disabled},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new fi([r.CONSTANT_COLOR,r.ONE],new d.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fi.unblended:fi.alphaBlended}depthModeForSublayer(r,u,m){if(!this.opaquePassEnabledForLayer())return ir.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new ir(m||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(d.h.now()),this.imageManager.beginFrame();const m=this.style._order,y=this.style.sourceCaches,_={},P={},j={};for(const R in y){const z=y[R];z.used&&z.prepare(this.context),_[R]=z.getVisibleCoordinates(),P[R]=_[R].slice().reverse(),j[R]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<m.length;R++)if(this.style._layers[m[R]].is3D()){this.opaquePassCutoff=R;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const R=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!d.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||R.length)&&(d.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,U){const q=z.context,X=q.gl,le=fi.unblended,ce=new ir(X.LEQUAL,ir.ReadWrite,[0,1]),me=U.getTerrainMesh(),ae=U.sourceCache.getRenderableTiles(),je=z.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:d.aT.transparent,depth:1});for(const Ue of ae){const ye=U.getTerrainData(Ue.tileID),ke={u_matrix:z.transform.calculatePosMatrix(Ue.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};je.draw(q,X.TRIANGLES,ce,ei.disabled,le,Gr.backCCW,ke,ye,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain),function(z,U){const q=z.context,X=q.gl,le=fi.unblended,ce=new ir(X.LEQUAL,ir.ReadWrite,[0,1]),me=U.getTerrainMesh(),ae=U.getCoordsTexture(),je=U.sourceCache.getRenderableTiles(),Ue=z.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:d.aT.transparent,depth:1}),U.coordsIndex=[];for(const ye of je){const ke=U.getTerrainData(ye.tileID);q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ae.texture);const $e={u_matrix:z.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};Ue.draw(q,X.TRIANGLES,ce,ei.disabled,le,Gr.backCCW,$e,ke,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),U.coordsIndex.push(ye.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const R of m){const z=this.style._layers[R];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const U=P[z.source];(z.type==="custom"||U.length)&&this.renderLayer(this,y[z.source],z,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?d.aT.black:d.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[m[this.currentLayer]],z=y[R.source],U=_[R.source];this._renderTileClippingMasks(R,U),this.renderLayer(this,z,R,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const R=this.style._layers[m[this.currentLayer]],z=y[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const U=(R.type==="symbol"?j:P)[R.source];this._renderTileClippingMasks(R,_[R.source]),this.renderLayer(this,z,R,U)}if(this.options.showTileBoundaries){const R=function(z,U){let q=null;const X=Object.values(z._layers).flatMap(ae=>ae.source&&!ae.isHidden(U)?[z.sourceCaches[ae.source]]:[]),le=X.filter(ae=>ae.getSource().type==="vector"),ce=X.filter(ae=>ae.getSource().type!=="vector"),me=ae=>{(!q||q.getSource().maxzoom<ae.getSource().maxzoom)&&(q=ae)};return le.forEach(ae=>me(ae)),q||ce.forEach(ae=>me(ae)),q}(this.style,this.transform.zoom);R&&function(z,U,q){for(let X=0;X<q.length;X++)jl(z,U,q[X])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const z=R.transform.padding;fu(R,R.transform.height-(z.top||0),3,kf),fu(R,z.bottom||0,3,hd),fd(R,z.left||0,3,Nh),fd(R,R.transform.width-(z.right||0),3,Sh);const U=R.transform.centerPoint;(function(q,X,le,ce){mu(q,X-1,le-10,2,20,ce),mu(q,X-10,le-1,20,2,ce)})(R,U.x,R.transform.height-U.y,Mf)}(this),this.context.setDefault()}renderLayer(r,u,m,y){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(y||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(_,P,j,R,z){if(_.renderPass!=="translucent")return;const U=ei.disabled,q=_.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,le,ce,me,ae,je,Ue){const ye=le.transform,ke=ae==="map",$e=je==="map";for(const Ye of X){const it=me.getTile(Ye),yt=it.getBucket(ce);if(!yt||!yt.text||!yt.text.segments.get().length)continue;const ft=d.ah(yt.textSizeData,ye.zoom),wt=xe(it,1,le.transform.zoom),Qt=nt(Ye.posMatrix,$e,ke,le.transform,wt),Xn=ce.layout.get("icon-text-fit")!=="none"&&yt.hasIconData();if(ft){const At=Math.pow(2,ye.zoom-it.tileID.overscaledZ);va(yt,ke,$e,Ue,ye,Qt,Ye.posMatrix,At,ft,Xn,le.style.map.terrain?(mn,en)=>le.style.map.terrain.getElevation(Ye,mn,en):null)}}}(R,_,j,P,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),z),j.paint.get("icon-opacity").constantOr(1)!==0&&ya(_,P,j,R,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),U,q),j.paint.get("text-opacity").constantOr(1)!==0&&ya(_,P,j,R,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),U,q),P.map.showCollisionBoxes&&(uu(_,P,j,R,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),uu(_,P,j,R,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(r,u,m,y,this.style.placement.variableOffsets);break;case"circle":(function(_,P,j,R){if(_.renderPass!=="translucent")return;const z=j.paint.get("circle-opacity"),U=j.paint.get("circle-stroke-width"),q=j.paint.get("circle-stroke-opacity"),X=!j.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(U.constantOr(1)===0||q.constantOr(1)===0))return;const le=_.context,ce=le.gl,me=_.depthModeForSublayer(0,ir.ReadOnly),ae=ei.disabled,je=_.colorModeForRenderPass(),Ue=[];for(let ye=0;ye<R.length;ye++){const ke=R[ye],$e=P.getTile(ke),Ye=$e.getBucket(j);if(!Ye)continue;const it=Ye.programConfigurations.get(j.id),yt=_.useProgram("circle",it),ft=Ye.layoutVertexBuffer,wt=Ye.indexBuffer,Qt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ke),Xn={programConfiguration:it,program:yt,layoutVertexBuffer:ft,indexBuffer:wt,uniformValues:Va(_,ke,$e,j),terrainData:Qt};if(X){const At=Ye.segments.get();for(const mn of At)Ue.push({segments:new d.S([mn]),sortKey:mn.sortKey,state:Xn})}else Ue.push({segments:Ye.segments,sortKey:0,state:Xn})}X&&Ue.sort((ye,ke)=>ye.sortKey-ke.sortKey);for(const ye of Ue){const{programConfiguration:ke,program:$e,layoutVertexBuffer:Ye,indexBuffer:it,uniformValues:yt,terrainData:ft}=ye.state;$e.draw(le,ce.TRIANGLES,me,ae,je,Gr.disabled,yt,ft,j.id,Ye,it,ye.segments,j.paint,_.transform.zoom,ke)}})(r,u,m,y);break;case"heatmap":(function(_,P,j,R){if(j.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const z=_.context,U=z.gl,q=ei.disabled,X=new fi([U.ONE,U.ONE],d.aT.transparent,[!0,!0,!0,!0]);(function(le,ce,me){const ae=le.gl;le.activeTexture.set(ae.TEXTURE1),le.viewport.set([0,0,ce.width/4,ce.height/4]);let je=me.heatmapFbo;if(je)ae.bindTexture(ae.TEXTURE_2D,je.colorAttachment.get()),le.bindFramebuffer.set(je.framebuffer);else{const Ue=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Ue),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),je=me.heatmapFbo=le.createFramebuffer(ce.width/4,ce.height/4,!1,!1),function(ye,ke,$e,Ye){var it,yt;const ft=ye.gl,wt=(it=ye.HALF_FLOAT)!==null&&it!==void 0?it:ft.UNSIGNED_BYTE,Qt=(yt=ye.RGBA16F)!==null&&yt!==void 0?yt:ft.RGBA;ft.texImage2D(ft.TEXTURE_2D,0,Qt,ke.width/4,ke.height/4,0,ft.RGBA,wt,null),Ye.colorAttachment.set($e)}(le,ce,Ue,je)}})(z,_,j),z.clear({color:d.aT.transparent});for(let le=0;le<R.length;le++){const ce=R[le];if(P.hasRenderableParent(ce))continue;const me=P.getTile(ce),ae=me.getBucket(j);if(!ae)continue;const je=ae.programConfigurations.get(j.id),Ue=_.useProgram("heatmap",je),{zoom:ye}=_.transform;Ue.draw(z,U.TRIANGLES,ir.disabled,q,X,Gr.disabled,yo(ce.posMatrix,me,ye,j.paint.get("heatmap-intensity")),null,j.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,j.paint,_.transform.zoom,je)}z.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(z,U){const q=z.context,X=q.gl,le=U.heatmapFbo;if(!le)return;q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,le.colorAttachment.get()),q.activeTexture.set(X.TEXTURE1);let ce=U.colorRampTexture;ce||(ce=U.colorRampTexture=new zt(q,U.colorRamp,X.RGBA)),ce.bind(X.LINEAR,X.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(q,X.TRIANGLES,ir.disabled,ei.disabled,z.colorModeForRenderPass(),Gr.disabled,((me,ae,je,Ue)=>{const ye=d.Z();d.aS(ye,0,me.width,me.height,0,0,1);const ke=me.context.gl;return{u_matrix:ye,u_world:[ke.drawingBufferWidth,ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(z,U),null,U.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,U.paint,z.transform.zoom)}(_,j))})(r,u,m,y);break;case"line":(function(_,P,j,R){if(_.renderPass!=="translucent")return;const z=j.paint.get("line-opacity"),U=j.paint.get("line-width");if(z.constantOr(1)===0||U.constantOr(1)===0)return;const q=_.depthModeForSublayer(0,ir.ReadOnly),X=_.colorModeForRenderPass(),le=j.paint.get("line-dasharray"),ce=j.paint.get("line-pattern"),me=ce.constantOr(1),ae=j.paint.get("line-gradient"),je=j.getCrossfadeParameters(),Ue=me?"linePattern":le?"lineSDF":ae?"lineGradient":"line",ye=_.context,ke=ye.gl;let $e=!0;for(const Ye of R){const it=P.getTile(Ye);if(me&&!it.patternsLoaded())continue;const yt=it.getBucket(j);if(!yt)continue;const ft=yt.programConfigurations.get(j.id),wt=_.context.program.get(),Qt=_.useProgram(Ue,ft),Xn=$e||Qt.program!==wt,At=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),mn=ce.constantOr(null);if(mn&&it.imageAtlas){const Zn=it.imageAtlas,In=Zn.patternPositions[mn.to.toString()],Jn=Zn.patternPositions[mn.from.toString()];In&&Jn&&ft.setConstantPatternPositions(In,Jn)}const en=At?Ye:null,kr=me?Nl(_,it,j,je,en):le?bo(_,it,j,le,je,en):ae?ps(_,it,j,yt.lineClipsArray.length,en):Cl(_,it,j,en);if(me)ye.activeTexture.set(ke.TEXTURE0),it.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),ft.updatePaintBuffers(je);else if(le&&(Xn||_.lineAtlas.dirty))ye.activeTexture.set(ke.TEXTURE0),_.lineAtlas.bind(ye);else if(ae){const Zn=yt.gradients[j.id];let In=Zn.texture;if(j.gradientVersion!==Zn.version){let Jn=256;if(j.stepInterpolant){const wi=P.getSource().maxzoom,Wr=Ye.canonical.z===wi?Math.ceil(1<<_.transform.maxZoom-Ye.canonical.z):1;Jn=d.ad(d.aY(yt.maxLineLength/d.N*1024*Wr),256,ye.maxTextureSize)}Zn.gradient=d.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Jn,image:Zn.gradient||void 0,clips:yt.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new zt(ye,Zn.gradient,ke.RGBA),Zn.version=j.gradientVersion,In=Zn.texture}ye.activeTexture.set(ke.TEXTURE0),In.bind(j.stepInterpolant?ke.NEAREST:ke.LINEAR,ke.CLAMP_TO_EDGE)}Qt.draw(ye,ke.TRIANGLES,q,_.stencilModeForClipping(Ye),X,Gr.disabled,kr,At,j.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,j.paint,_.transform.zoom,ft,yt.layoutVertexBuffer2),$e=!1}})(r,u,m,y);break;case"fill":(function(_,P,j,R){const z=j.paint.get("fill-color"),U=j.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const q=_.colorModeForRenderPass(),X=j.paint.get("fill-pattern"),le=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(d.aT.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===le){const ce=_.depthModeForSublayer(1,_.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly);hu(_,P,j,R,ce,q,!1)}if(_.renderPass==="translucent"&&j.paint.get("fill-antialias")){const ce=_.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly);hu(_,P,j,R,ce,q,!0)}})(r,u,m,y);break;case"fill-extrusion":(function(_,P,j,R){const z=j.paint.get("fill-extrusion-opacity");if(z!==0&&_.renderPass==="translucent"){const U=new ir(_.context.gl.LEQUAL,ir.ReadWrite,_.depthRangeFor3D);if(z!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))No(_,P,j,R,U,ei.disabled,fi.disabled),No(_,P,j,R,U,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const q=_.colorModeForRenderPass();No(_,P,j,R,U,ei.disabled,q)}}})(r,u,m,y);break;case"hillshade":(function(_,P,j,R){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const z=_.context,U=_.depthModeForSublayer(0,ir.ReadOnly),q=_.colorModeForRenderPass(),[X,le]=_.renderPass==="translucent"?_.stencilConfigForOverlap(R):[{},R];for(const ce of le){const me=P.getTile(ce);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&_.renderPass==="offscreen"?wh(_,me,j,U,ei.disabled,q):_.renderPass==="translucent"&&Dp(_,ce,me,j,U,X[ce.overscaledZ],q)}z.viewport.set([0,0,_.width,_.height])})(r,u,m,y);break;case"raster":(function(_,P,j,R){if(_.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!R.length)return;const z=_.context,U=z.gl,q=P.getSource(),X=_.useProgram("raster"),le=_.colorModeForRenderPass(),[ce,me]=q instanceof Pn?[{},R]:_.stencilConfigForOverlap(R),ae=me[me.length-1].overscaledZ,je=!_.options.moving;for(const Ue of me){const ye=_.depthModeForSublayer(Ue.overscaledZ-ae,j.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,U.LESS),ke=P.getTile(Ue);ke.registerFadeDuration(j.paint.get("raster-fade-duration"));const $e=P.findLoadedParent(Ue,0),Ye=Ch(ke,$e,P,j,_.transform,_.style.map.terrain);let it,yt;const ft=j.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;z.activeTexture.set(U.TEXTURE0),ke.texture.bind(ft,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(U.TEXTURE1),$e?($e.texture.bind(ft,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),it=Math.pow(2,$e.tileID.overscaledZ-ke.tileID.overscaledZ),yt=[ke.tileID.canonical.x*it%1,ke.tileID.canonical.y*it%1]):ke.texture.bind(ft,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue),Qt=wt?Ue:null,Xn=Qt?Qt.posMatrix:_.transform.calculatePosMatrix(Ue.toUnwrapped(),je),At=oi(Xn,yt||[0,0],it||1,Ye,j);q instanceof Pn?X.draw(z,U.TRIANGLES,ye,ei.disabled,le,Gr.disabled,At,wt,j.id,q.boundsBuffer,_.quadTriangleIndexBuffer,q.boundsSegments):X.draw(z,U.TRIANGLES,ye,ce[Ue.overscaledZ],le,Gr.disabled,At,wt,j.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,m,y);break;case"background":(function(_,P,j,R){const z=j.paint.get("background-color"),U=j.paint.get("background-opacity");if(U===0)return;const q=_.context,X=q.gl,le=_.transform,ce=le.tileSize,me=j.paint.get("background-pattern");if(_.isPatternMissing(me))return;const ae=!me&&z.a===1&&U===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const je=ei.disabled,Ue=_.depthModeForSublayer(0,ae==="opaque"?ir.ReadWrite:ir.ReadOnly),ye=_.colorModeForRenderPass(),ke=_.useProgram(me?"backgroundPattern":"background"),$e=R||le.coveringTiles({tileSize:ce,terrain:_.style.map.terrain});me&&(q.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const Ye=j.getCrossfadeParameters();for(const it of $e){const yt=R?it.posMatrix:_.transform.calculatePosMatrix(it.toUnwrapped()),ft=me?gs(yt,U,_,me,{tileID:it,tileSize:ce},Ye):vc(yt,U,z),wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(it);ke.draw(q,X.TRIANGLES,Ue,je,ye,Gr.disabled,ft,wt,j.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,m,y);break;case"custom":(function(_,P,j){const R=_.context,z=j.implementation;if(_.renderPass==="offscreen"){const U=z.prerender;U&&(_.setCustomLayerDefaults(),R.setColorMode(_.colorModeForRenderPass()),U.call(z,R.gl,_.transform.customLayerMatrix()),R.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),R.setColorMode(_.colorModeForRenderPass()),R.setStencilMode(ei.disabled);const U=z.renderingMode==="3d"?new ir(_.context.gl.LEQUAL,ir.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,ir.ReadOnly);R.setDepthMode(U),z.render(R.gl,_.transform.customLayerMatrix()),R.setDirty(),_.setBaseState(),R.bindFramebuffer.set(null)}})(r,0,m)}}translatePosMatrix(r,u,m,y,_){if(!m[0]&&!m[1])return r;const P=_?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(P){const z=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*z,m[0]*z+m[1]*U]}const j=[_?m[0]:xe(u,m[0],this.transform.zoom),_?m[1]:xe(u,m[1],this.transform.zoom),0],R=new Float32Array(16);return d.$(R,r,j),R}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!u||!m}useProgram(r,u){this.cache=this.cache||{};const m=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new vo(this.context,Br[r],u,Sl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new zt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class Es{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,m){const y=Math.pow(2,m),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const R=1/(j=d.ag([],j,r))[3]/u*y;return d.b3(j,j,[R,R,1/j[3],R])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const R=function(X,le){var ce=le[0],me=le[1],ae=le[2],je=ce*ce+me*me+ae*ae;return je>0&&(je=1/Math.sqrt(je)),X[0]=le[0]*je,X[1]=le[1]*je,X[2]=le[2]*je,X}([],function(X,le,ce){var me=le[0],ae=le[1],je=le[2],Ue=ce[0],ye=ce[1],ke=ce[2];return X[0]=ae*ke-je*ye,X[1]=je*Ue-me*ke,X[2]=me*ye-ae*Ue,X}([],Ze([],_[j[0]],_[j[1]]),Ze([],_[j[2]],_[j[1]]))),z=-((U=R)[0]*(q=_[j[1]])[0]+U[1]*q[1]+U[2]*q[2]);var U,q;return R.concat(z)});return new Es(_,P)}}class wc{constructor(r,u){this.min=r,this.max=u,this.center=function(m,y,_){return m[0]=.5*y[0],m[1]=.5*y[1],m[2]=.5*y[2],m}([],function(m,y,_){return m[0]=y[0]+_[0],m[1]=y[1]+_[1],m[2]=y[2]+_[2],m}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],m=ze(this.min),y=ze(this.max);for(let _=0;_<u.length;_++)m[_]=u[_]?this.min[_]:this.center[_],y[_]=u[_]?this.center[_]:this.max[_];return y[2]=this.max[2],new wc(m,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let y=0;y<r.planes.length;y++){const _=r.planes[y];let P=0;for(let j=0;j<u.length;j++)d.b4(_,u[j])>=0&&P++;if(P===0)return 0;P!==u.length&&(m=!1)}if(m)return 2;for(let y=0;y<3;y++){let _=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let j=0;j<r.points.length;j++){const R=r.points[j][y]-this.min[y];_=Math.min(_,R),P=Math.max(P,R)}if(P<0||_>this.max[y]-this.min[y])return 0}return 1}}class pu{constructor(r=0,u=0,m=0,y=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=m,this.right=y}interpolate(r,u,m){return u.top!=null&&r.top!=null&&(this.top=d.B.number(r.top,u.top,m)),u.bottom!=null&&r.bottom!=null&&(this.bottom=d.B.number(r.bottom,u.bottom,m)),u.left!=null&&r.left!=null&&(this.left=d.B.number(r.left,u.left,m)),u.right!=null&&r.right!=null&&(this.right=d.B.number(r.right,u.right,m)),this}getCenter(r,u){const m=d.ad((this.left+r-this.right)/2,0,r),y=d.ad((this.top+u-this.bottom)/2,0,u);return new d.P(m,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new pu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class md{constructor(r,u,m,y,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pu,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new md(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-d.b5(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var m=new d.A(4);return d.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,y,_){var P=y[0],j=y[1],R=y[2],z=y[3],U=Math.sin(_),q=Math.cos(_);m[0]=P*q+R*U,m[1]=j*q+z*U,m[2]=P*-U+R*q,m[3]=j*-U+z*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=d.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,m){this._unmodified=!1,this._edgeInsets.interpolate(r,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new d.b6(0,r)];if(this._renderWorldCopies){const m=this.pointCoordinate(new d.P(0,0)),y=this.pointCoordinate(new d.P(this.width,0)),_=this.pointCoordinate(new d.P(this.width,this.height)),P=this.pointCoordinate(new d.P(0,this.height)),j=Math.floor(Math.min(m.x,y.x,_.x,P.x)),R=Math.floor(Math.max(m.x,y.x,_.x,P.x)),z=1;for(let U=j-z;U<=R+z;U++)U!==0&&u.push(new d.b6(U,r))}return u}coveringTiles(r){var u,m;let y=this.coveringZoomLevel(r);const _=y;if(r.minzoom!==void 0&&y<r.minzoom)return[];r.maxzoom!==void 0&&y>r.maxzoom&&(y=r.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),j=d.U.fromLngLat(this.center),R=Math.pow(2,y),z=[R*P.x,R*P.y,0],U=[R*j.x,R*j.y,0],q=Es.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let X=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=y);const le=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ce=ye=>({aabb:new wc([ye*R,0,0],[(ye+1)*R,R,0]),zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),me=[],ae=[],je=y,Ue=r.reparseOverscaled?_:y;if(this._renderWorldCopies)for(let ye=1;ye<=3;ye++)me.push(ce(-ye)),me.push(ce(ye));for(me.push(ce(0));me.length>0;){const ye=me.pop(),ke=ye.x,$e=ye.y;let Ye=ye.fullyVisible;if(!Ye){const Qt=ye.aabb.intersects(q);if(Qt===0)continue;Ye=Qt===2}const it=r.terrain?z:U,yt=ye.aabb.distanceX(it),ft=ye.aabb.distanceY(it),wt=Math.max(Math.abs(yt),Math.abs(ft));if(ye.zoom===je||wt>le+(1<<je-ye.zoom)-2&&ye.zoom>=X){const Qt=je-ye.zoom,Xn=z[0]-.5-(ke<<Qt),At=z[1]-.5-($e<<Qt);ae.push({tileID:new d.O(ye.zoom===je?Ue:ye.zoom,ye.wrap,ye.zoom,ke,$e),distanceSq:tt([U[0]-.5-ke,U[1]-.5-$e]),tileDistanceToCamera:Math.sqrt(Xn*Xn+At*At)})}else for(let Qt=0;Qt<4;Qt++){const Xn=(ke<<1)+Qt%2,At=($e<<1)+(Qt>>1),mn=ye.zoom+1;let en=ye.aabb.quadrant(Qt);if(r.terrain){const kr=new d.O(mn,ye.wrap,mn,Xn,At),Zn=r.terrain.getMinMaxElevation(kr),In=(u=Zn.minElevation)!==null&&u!==void 0?u:this.elevation,Jn=(m=Zn.maxElevation)!==null&&m!==void 0?m:this.elevation;en=new wc([en.min[0],en.min[1],In],[en.max[0],en.max[1],Jn])}me.push({aabb:en,zoom:mn,x:Xn,y:At,wrap:ye.wrap,fullyVisible:Ye})}}return ae.sort((ye,ke)=>ye.distanceSq-ke.distanceSq).map(ye=>ye.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=d.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new d.P(d.G(r.lng)*this.worldSize,d.H(u)*this.worldSize)}unproject(r){return new d.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),m=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-m))return;const y=this.getCameraPosition(),_=d.U.fromLngLat(y.lngLat,y.altitude),P=d.U.fromLngLat(u,m),j=_.x-P.x,R=_.y-P.y,z=_.z-P.z,U=Math.sqrt(j*j+R*R+z*z),q=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=m,this._center=u,this.zoom=q}setLocationAtPoint(r,u){const m=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),P=new d.U(_.x-(m.x-y.x),_.y-(m.y-y.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return d.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const X=u.pointCoordinate(r);if(X!=null)return X}const m=[r.x,r.y,0,1],y=[r.x,r.y,1,1];d.ag(m,m,this.pixelMatrixInverse),d.ag(y,y,this.pixelMatrixInverse);const _=m[3],P=y[3],j=m[1]/_,R=y[1]/P,z=m[2]/_,U=y[2]/P,q=z===U?0:(0-z)/(U-z);return new d.U(d.B.number(m[0]/_,y[0]/P,q)/this.worldSize,d.B.number(j,R,q)/this.worldSize)}coordinatePoint(r,u=0,m=this.pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,u,1];return d.ag(y,y,m),new d.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Nt().extend(this.pointLocation(new d.P(0,r))).extend(this.pointLocation(new d.P(this.width,r))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Nt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const m=r.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[m])return y[m];const _=r.canonical,P=this.worldSize/this.zoomScale(_.z),j=_.x+Math.pow(2,_.z)*r.wrap,R=d.ao(new Float64Array(16));return d.$(R,R,[j*P,_.y*P,0]),d.a0(R,R,[P/d.N,P/d.N,1]),d.a1(R,u?this.alignedProjMatrix:this.projMatrix,R),y[m]=new Float32Array(R),y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,m,y,_=-90,P=90,j=-180,R=180;const z=this.size,U=this._unmodified;if(this.latRange){const le=this.latRange;_=d.H(le[1])*this.worldSize,P=d.H(le[0])*this.worldSize,r=P-_<z.y?z.y/(P-_):0}if(this.lngRange){const le=this.lngRange;j=d.b5(d.G(le[0])*this.worldSize,0,this.worldSize),R=d.b5(d.G(le[1])*this.worldSize,0,this.worldSize),R<j&&(R+=this.worldSize),u=R-j<z.x?z.x/(R-j):0}const q=this.point,X=Math.max(u||0,r||0);if(X)return this.center=this.unproject(new d.P(u?(R+j)/2:q.x,r?(P+_)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const le=q.y,ce=z.y/2;le-ce<_&&(y=_+ce),le+ce>P&&(y=P-ce)}if(this.lngRange){const le=(j+R)/2,ce=d.b5(q.x,le-this.worldSize/2,le+this.worldSize/2),me=z.x/2;ce-me<j&&(m=j+me),ce+me>R&&(m=R-me)}m===void 0&&y===void 0||(this.center=this.unproject(new d.P(m!==void 0?m:q.x,y!==void 0?y:q.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b7(1,this.center.lat)*this.worldSize;let y=d.ao(new Float64Array(16));d.a0(y,y,[this.width/2,-this.height/2,1]),d.$(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=d.ao(new Float64Array(16)),d.a0(y,y,[1,-1,1]),d.$(y,y,[-1,-1,0]),d.a0(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),j=_-P*this._pixelPerMeter/Math.cos(this._pitch),R=P<0?j:_,z=Math.PI/2+this._pitch,U=this._fov*(.5+r.y/this.height),q=Math.sin(U)*R/Math.sin(d.ad(Math.PI-z-U,.01,Math.PI-.01)),X=this.getHorizon(),le=2*Math.atan(X/this.cameraToCenterDistance)*(.5+r.y/(2*X)),ce=Math.sin(le)*R/Math.sin(d.ad(Math.PI-z-le,.01,Math.PI-.01)),me=Math.min(q,ce),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*me+R),je=this.height/50;y=new Float64Array(16),d.b8(y,this._fov,this.width/this.height,je,ae),y[8]=2*-r.x/this.width,y[9]=2*r.y/this.height,d.a0(y,y,[1,-1,1]),d.$(y,y,[0,0,-this.cameraToCenterDistance]),d.b9(y,y,this._pitch),d.ae(y,y,this.angle),d.$(y,y,[-u,-m,0]),this.mercatorMatrix=d.a0([],y,[this.worldSize,this.worldSize,this.worldSize]),d.a0(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.a1(new Float64Array(16),this.labelPlaneMatrix,y),d.$(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=d.as([],y),this.pixelMatrix3D=d.a1(new Float64Array(16),this.labelPlaneMatrix,y);const Ue=this.width%2/2,ye=this.height%2/2,ke=Math.cos(this.angle),$e=Math.sin(this.angle),Ye=u-Math.round(u)+ke*Ue+$e*ye,it=m-Math.round(m)+ke*ye+$e*Ue,yt=new Float64Array(y);if(d.$(yt,yt,[Ye>.5?Ye-1:Ye,it>.5?it-1:it,0]),this.alignedProjMatrix=yt,y=d.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new d.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return d.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let m=u.x,y=u.y,_=u.x,P=u.y;for(const j of r)m=Math.min(m,j.x),y=Math.min(y,j.y),_=Math.max(_,j.x),P=Math.max(P,j.y);return[new d.P(m,y),new d.P(_,y),new d.P(_,P),new d.P(m,P),new d.P(m,y)]}}}function Al(x,r){let u,m=!1,y=null,_=null;const P=()=>{y=null,m&&(x.apply(_,u),y=setTimeout(P,r),m=!1)};return(...j)=>(m=!0,_=this,u=j,y||P(),y)}class gu{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(m=y)}),(m&&m[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(m=>isNaN(m))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:m,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Al(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,y=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,y),P=Math.round(u.lng*_)/_,j=Math.round(u.lat*_)/_,R=this._map.getBearing(),z=this._map.getPitch();let U="";if(U+=r?`/${P}/${j}/${m}`:`${m}/${j}/${P}`,(R||z)&&(U+="/"+Math.round(10*R)/10),z&&(U+=`/${Math.round(z)}`),this._hashName){const q=this._hashName;let X=!1;const le=window.location.hash.slice(1).split("&").map(ce=>{const me=ce.split("=")[0];return me===q?(X=!0,`${me}=${U}`):ce}).filter(ce=>ce);return X||le.push(`${q}=${U}`),`#${le.join("&")}`}return`#${U}`}}const Cc={linearity:.3,easing:d.ba(0,0,.3,1)},Rf=d.e({deceleration:2500,maxSpeed:1400},Cc),Lf=d.e({deceleration:20,maxSpeed:1400},Cc),Eh=d.e({deceleration:1e3,maxSpeed:360},Cc),If=d.e({deceleration:1e3,maxSpeed:90},Cc);class Dh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:d.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=d.h.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const _=vu(u.pan.mag(),m,d.e({},Rf,r||{}));y.offset=u.pan.mult(_.amount/u.pan.mag()),y.center=this._map.transform.center,ro(y,_)}if(u.zoom){const _=vu(u.zoom,m,Lf);y.zoom=this._map.transform.zoom+_.amount,ro(y,_)}if(u.bearing){const _=vu(u.bearing,m,Eh);y.bearing=this._map.transform.bearing+d.ad(_.amount,-179,179),ro(y,_)}if(u.pitch){const _=vu(u.pitch,m,If);y.pitch=this._map.transform.pitch+_.amount,ro(y,_)}if(y.zoom||y.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;y.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),d.e(y,{noMoveStart:!0})}}function ro(x,r){(!x.duration||x.duration<r.duration)&&(x.duration=r.duration,x.easing=r.easing)}function vu(x,r,u){const{maxSpeed:m,linearity:y,deceleration:_}=u,P=d.ad(x*y/(r/1e3),-m,m),j=Math.abs(P)/(_*y);return{easing:u.easing,duration:1e3*j,amount:P*(j/2)}}class ta extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,m,y={}){const _=k.mousePos(u.getCanvasContainer(),m),P=u.unproject(_);super(r,d.e({point:_,lngLat:P,originalEvent:m},y)),this._defaultPrevented=!1,this.target=u}}class yu extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,m){const y=r==="touchend"?m.changedTouches:m.touches,_=k.touchPos(u.getCanvasContainer(),y),P=_.map(R=>u.unproject(R)),j=_.reduce((R,z,U,q)=>R.add(z.div(q.length)),new d.P(0,0));super(r,{points:_,point:j,lngLats:P,lngLat:u.unproject(j),originalEvent:m}),this._defaultPrevented=!1}}class pd extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class Zo{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new pd(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new ta(r.type,this._map,r))}mouseup(r){this._map.fire(new ta(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ta(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ta(r.type,this._map,r))}mouseover(r){this._map.fire(new ta(r.type,this._map,r))}mouseout(r){this._map.fire(new ta(r.type,this._map,r))}touchstart(r){return this._firePreventable(new yu(r.type,this._map,r))}touchmove(r){this._map.fire(new yu(r.type,this._map,r))}touchend(r){this._map.fire(new yu(r.type,this._map,r))}touchcancel(r){this._map.fire(new yu(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ta(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ta("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ta(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class So{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(d.P.convert(r),this._map.terrain)}}class kl{constructor(r,u){this._map=r,this._tr=new So(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(k.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=m,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(y.x,m.x),P=Math.max(y.x,m.x),j=Math.min(y.y,m.y),R=Math.max(y.y,m.y);k.setTransform(this._box,`translate(${_}px,${j}px)`),this._box.style.width=P-_+"px",this._box.style.height=R-j+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const m=this._startPos,y=u;if(this.reset(),k.suppressClick(),m.x!==y.x||m.y!==y.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(m,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new d.k(r,{originalEvent:u}))}}function ba(x,r){if(x.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${r.length}`);const u={};for(let m=0;m<x.length;m++)u[x[m].identifier]=r[m];return u}class Eo{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=function(y){const _=new d.P(0,0);for(const P of y)_._add(P);return _.div(y.length)}(u),this.touches=ba(m,u)))}touchmove(r,u,m){if(this.aborted||!this.centroid)return;const y=ba(m,u);for(const _ in this.touches){const P=y[_];(!P||P.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class gd{constructor(r){this.singleTap=new Eo(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,m){this.singleTap.touchstart(r,u,m)}touchmove(r,u,m){this.singleTap.touchmove(r,u,m)}touchend(r,u,m){const y=this.singleTap.touchend(r,u,m);if(y){const _=r.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(y)<30;if(_&&P||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Do{constructor(r){this._tr=new So(r),this._zoomIn=new gd({numTouches:1,numTaps:2}),this._zoomOut=new gd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,m){this._zoomIn.touchstart(r,u,m),this._zoomOut.touchstart(r,u,m)}touchmove(r,u,m){this._zoomIn.touchmove(r,u,m),this._zoomOut.touchmove(r,u,m)}touchend(r,u,m){const y=this._zoomIn.touchend(r,u,m),_=this._zoomOut.touchend(r,u,m),P=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(y)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class To{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=u.length?u[0]:u;return!this._moved&&y.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(m,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&k.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vf={0:1,2:2};class Th{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=k.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,m){const y=Vf[m];return u.buttons===void 0||(u.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return k.mouseButton(r)===this._eventButton}}class Ph{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const ts=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=function(r){r.preventDefault()}},Ml=({enable:x,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const m=new Th({checkCorrectEvent:y=>k.mouseButton(y)===0&&y.ctrlKey||k.mouseButton(y)===2});return new To({clickTolerance:r,move:(y,_)=>({bearingDelta:(_.x-y.x)*u}),moveStateManager:m,enable:x,assignEvents:ts})},Po=({enable:x,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const m=new Th({checkCorrectEvent:y=>k.mouseButton(y)===0&&y.ctrlKey||k.mouseButton(y)===2});return new To({clickTolerance:r,move:(y,_)=>({pitchDelta:(_.y-y.y)*u}),moveStateManager:m,enable:x,assignEvents:ts})};class Gt{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,m){return this._calculateTransform(r,u,m)}touchmove(r,u,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,m)}touchend(r,u,m){this._calculateTransform(r,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,m){m.length>0&&(this._active=!0);const y=ba(m,u),_=new d.P(0,0),P=new d.P(0,0);let j=0;for(const z in y){const U=y[z],q=this._touches[z];q&&(_._add(U),P._add(U.sub(q)),j++,y[z]=U)}if(this._touches=y,j<this._minTouches||!P.mag())return;const R=P.div(j);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(j),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,m){if(!this._firstTwoTouches)return;r.preventDefault();const[y,_]=this._firstTwoTouches,P=Ko(m,u,y),j=Ko(m,u,_);if(!P||!j)return;const R=this._aroundCenter?null:P.add(j).div(2);return this._move([P,j],R,r)}touchend(r,u,m){if(!this._firstTwoTouches)return;const[y,_]=this._firstTwoTouches,P=Ko(m,u,y),j=Ko(m,u,_);P&&j||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ko(x,r,u){for(let m=0;m<x.length;m++)if(x[m].identifier===u)return r[m]}function Nc(x,r){return Math.log(x/r)/Math.LN2}class jh extends vd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Nc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nc(this._distance,m),pinchAround:u}}}function Lt(x,r){return 180*x.angleWith(r)/Math.PI}class Rl extends vd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lt(this._vector,m),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,m=Lt(r,this._startVector);return Math.abs(m)<u}}function Ah(x){return Math.abs(x.y)>Math.abs(x.x)}class xu extends vd{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,m){super.touchstart(r,u,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,Ah(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,_,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,m){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,_=u.mag()>=2;if(!y&&!_)return;if(!y||!_)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=r.y>0==u.y>0;return Ah(r)&&Ah(u)&&P}}const kh={panStep:100,bearingStep:15,pitchStep:10};class Of{constructor(r){this._tr=new So(r);const u=kh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,m=0,y=0,_=0,P=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),P=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,y=0),{cameraAnimation:j=>{const R=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:zf,zoom:u?Math.round(R.zoom)+u*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+m*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-_*this._panStep,-P*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zf(x){return x*(2-x)}const yd=4.000244140625;class Mh{constructor(r,u){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new So(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=d.h.now(),y=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%yd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=k.mousePos(this._el,r),m=this._tr;this._around=d.L.convert(this._aroundCenter?m.center:m.unproject(u)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>yd?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&R!==0&&(R=1/R);const z=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(z*R))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,m=this._startZoom,y=this._easing;let _,P=!1;if(this._type==="wheel"&&m&&y){const j=Math.min((d.h.now()-this._lastWheelEventTime)/200,1),R=y(j);_=d.B.number(m,u,R),j<1?this._frameId||(this._frameId=!0):P=!0}else _=u,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=d.bb;if(this._prevEase){const m=this._prevEase,y=(d.h.now()-m.start)/m.duration,_=m.easing(y+.01)-m.easing(y),P=.27/Math.sqrt(_*_+1e-4)*.01,j=Math.sqrt(.0729-P*P);u=d.ba(P,j,.25,1)}return this._prevEase={start:d.h.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Yo{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xo{constructor(r){this._tr=new So(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bd{constructor(){this._tap=new gd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,m){if(!this._swipePoint)if(this._tapTime){const y=u[0],_=r.timeStamp-this._tapTime<500,P=this._tapPoint.dist(y)<30;_&&P?m.length>0&&(this._swipePoint=y,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,u,m)}touchmove(r,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const y=u[0],_=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,m)}touchend(r,u,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const y=this._tap.touchend(r,u,m);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(r,u,m){this._el=r,this._mousePan=u,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ds{constructor(r,u,m){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jo{constructor(r,u,m,y){this._el=r,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Sc=x=>x.zoom||x.drag||x.pitch||x.rotate;class xd extends d.k{}function Ec(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class _u{constructor(r,u){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,_)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=y.type==="renderFrame"?void 0:y,j={needsRenderFrame:!1},R={},z={},U=y.touches,q=U?this._getMapTouches(U):void 0,X=q?k.touchPos(this._el,q):k.mousePos(this._el,y);for(const{handlerName:me,handler:ae,allowed:je}of this._handlers){if(!ae.isEnabled())continue;let Ue;this._blockedByActive(z,je,me)?ae.reset():ae[_||y.type]&&(Ue=ae[_||y.type](y,X,q),this.mergeHandlerResult(j,R,Ue,me,P),Ue&&Ue.needsRenderFrame&&this._triggerRenderFrame()),(Ue||ae.isActive())&&(z[me]=ae)}const le={};for(const me in this._previousActiveHandlers)z[me]||(le[me]=P);this._previousActiveHandlers=z,(Object.keys(le).length||Ec(j))&&(this._changes.push([j,R,le]),this._triggerRenderFrame()),(Object.keys(z).length||Ec(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=j;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Dh(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,_,P]of this._listeners)k.addEventListener(y,_,y===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[r,u,m]of this._listeners)k.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new Zo(u,r));const y=u.boxZoom=new kl(u,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const _=new Do(u),P=new Xo(u);u.doubleClickZoom=new Yo(P,_),this._add("tapZoom",_),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const j=new bd;this._add("tapDragZoom",j);const R=u.touchPitch=new xu(u);this._add("touchPitch",R),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const z=Ml(r),U=Po(r);u.dragRotate=new Ds(r,z,U),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const q=(({enable:je,clickTolerance:Ue})=>{const ye=new Th({checkCorrectEvent:ke=>k.mouseButton(ke)===0&&!ke.ctrlKey});return new To({clickTolerance:Ue,move:(ke,$e)=>({around:$e,panDelta:$e.sub(ke)}),activateOnStart:!0,moveStateManager:ye,enable:je,assignEvents:ts})})(r),X=new Gt(r,u);u.dragPan=new Rh(m,q,X),this._add("mousePan",q),this._add("touchPan",X,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const le=new Rl,ce=new jh;u.touchZoomRotate=new Jo(m,ce,le,j),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const me=u.scrollZoom=new Mh(u,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const ae=u.keyboard=new Of(u);this._add("keyboard",ae),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new bu(u))}_add(r,u,m){this._handlers.push({handlerName:r,handler:u,allowed:m}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Sc(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,m){for(const y in r)if(y!==m&&(!u||u.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const m of r)this._el.contains(m.target)&&u.push(m);return u}mergeHandlerResult(r,u,m,y,_){if(!m)return;d.e(r,m);const P={handlerName:y,originalEvent:m.originalEvent||_};m.zoomDelta!==void 0&&(u.zoom=P),m.panDelta!==void 0&&(u.drag=P),m.pitchDelta!==void 0&&(u.pitch=P),m.bearingDelta!==void 0&&(u.rotate=P)}_applyChanges(){const r={},u={},m={};for(const[y,_,P]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new d.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),d.e(u,_),d.e(m,P);this._updateMapTransform(r,u,m),this._changes=[]}_updateMapTransform(r,u,m){const y=this._map,_=y._getTransformForUpdate(),P=y.terrain;if(!(Ec(r)||P&&this._terrainMovement))return this._fireEvents(u,m,!0);let{panDelta:j,zoomDelta:R,bearingDelta:z,pitchDelta:U,around:q,pinchAround:X}=r;X!==void 0&&(q=X),y._stop(!0),q=q||y.transform.centerPoint;const le=_.pointLocation(j?q.sub(j):q);z&&(_.bearing+=z),U&&(_.pitch+=U),R&&(_.zoom+=R),P?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(j)):_.setLocationAtPoint(le,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(le,q),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(y.terrain)})):_.setLocationAtPoint(le,q),y._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,m,!0)}_fireEvents(r,u,m){const y=Sc(this._eventsInProgress),_=Sc(r),P={};for(const U in r){const{originalEvent:q}=r[U];this._eventsInProgress[U]||(P[`${U}start`]=q),this._eventsInProgress[U]=r[U]}!y&&_&&this._fireEvent("movestart",_.originalEvent);for(const U in P)this._fireEvent(U,P[U]);_&&this._fireEvent("move",_.originalEvent);for(const U in r){const{originalEvent:q}=r[U];this._fireEvent(U,q)}const j={};let R;for(const U in this._eventsInProgress){const{handlerName:q,originalEvent:X}=this._eventsInProgress[U];this._handlersById[q].isActive()||(delete this._eventsInProgress[U],R=u[q]||X,j[`${U}end`]=R)}for(const U in j)this._fireEvent(U,j[U]);const z=Sc(this._eventsInProgress);if(m&&(y||_)&&!z){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!U||!U.essential&&d.h.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:R})),q(this._map.getBearing())&&this._map.resetNorth()):(q(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new d.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new xd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Bf extends d.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const m=Math.min((d.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new d.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,m){return r=d.P.convert(r).mult(-1),this.panTo(this.transform.center,d.e({offset:r},u),m)}panTo(r,u,m){return this.easeTo(d.e({center:r},u),m)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,m){return this.easeTo(d.e({zoom:r},u),m)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,m){return this.easeTo(d.e({bearing:r},u),m)}resetNorth(r,u){return this.rotateTo(0,d.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Nt.convert(r);const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,u)}_cameraForBoxAndBearing(r,u,m,y){const _={top:0,bottom:0,right:0,left:0};if(typeof(y=d.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const $e=y.padding;y.padding={top:$e,bottom:$e,right:$e,left:$e}}y.padding=d.e(_,y.padding);const P=this.transform,j=P.padding,R=P.project(d.L.convert(r)),z=P.project(d.L.convert(u)),U=R.rotate(-m*Math.PI/180),q=z.rotate(-m*Math.PI/180),X=new d.P(Math.max(U.x,q.x),Math.max(U.y,q.y)),le=new d.P(Math.min(U.x,q.x),Math.min(U.y,q.y)),ce=X.sub(le),me=(P.width-(j.left+j.right+y.padding.left+y.padding.right))/ce.x,ae=(P.height-(j.top+j.bottom+y.padding.top+y.padding.bottom))/ce.y;if(ae<0||me<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const je=Math.min(P.scaleZoom(P.scale*Math.min(me,ae)),y.maxZoom),Ue=d.P.convert(y.offset),ye=new d.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(m*Math.PI/180),ke=Ue.add(ye).mult(P.scale/P.zoomScale(je));return{center:P.unproject(R.add(z).div(2).sub(ke)),zoom:je,bearing:m}}fitBounds(r,u,m){return this._fitInternal(this.cameraForBounds(r,u),u,m)}fitScreenCoordinates(r,u,m,y,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(r)),this.transform.pointLocation(d.P.convert(u)),m,y),y,_)}_fitInternal(r,u,m){return r?(delete(u=d.e(r,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(r,u){this.stop();const m=this._getTransformForUpdate();let y=!1,_=!1,P=!1;return"zoom"in r&&m.zoom!==+r.zoom&&(y=!0,m.zoom=+r.zoom),r.center!==void 0&&(m.center=d.L.convert(r.center)),"bearing"in r&&m.bearing!==+r.bearing&&(_=!0,m.bearing=+r.bearing),"pitch"in r&&m.pitch!==+r.pitch&&(P=!0,m.pitch=+r.pitch),r.padding==null||m.isPaddingEqual(r.padding)||(m.padding=r.padding),this._applyUpdatedTransform(m),this.fire(new d.k("movestart",u)).fire(new d.k("move",u)),y&&this.fire(new d.k("zoomstart",u)).fire(new d.k("zoom",u)).fire(new d.k("zoomend",u)),_&&this.fire(new d.k("rotatestart",u)).fire(new d.k("rotate",u)).fire(new d.k("rotateend",u)),P&&this.fire(new d.k("pitchstart",u)).fire(new d.k("pitch",u)).fire(new d.k("pitchend",u)),this.fire(new d.k("moveend",u))}calculateCameraOptionsFromTo(r,u,m,y=0){const _=d.U.fromLngLat(r,u),P=d.U.fromLngLat(m,y),j=P.x-_.x,R=P.y-_.y,z=P.z-_.z,U=Math.hypot(j,R,z);if(U===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(j,R),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),le=180*Math.atan2(j,-R)/Math.PI;let ce=180*Math.acos(q/U)/Math.PI;return ce=z<0?90-ce:90+ce,{center:P.toLngLat(),zoom:X,pitch:ce,bearing:le}}easeTo(r,u){this._stop(!1,r.easeId),((r=d.e({offset:[0,0],duration:500,easing:d.bb},r)).animate===!1||!r.essential&&d.h.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),y=this.getZoom(),_=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?+r.zoom:y,z="bearing"in r?this._normalizeBearing(r.bearing,_):_,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=d.P.convert(r.offset);let le=m.centerPoint.add(X);const ce=m.pointLocation(le),me=d.L.convert(r.center||ce);this._normalizeCenter(me);const ae=m.project(ce),je=m.project(me).sub(ae),Ue=m.zoomScale(R-y);let ye,ke;r.around&&(ye=d.L.convert(r.around),ke=m.locationPoint(ye));const $e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||R!==y,this._rotating=this._rotating||_!==z,this._pitching=this._pitching||U!==P,this._padding=!m.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,$e),this.terrain&&this._prepareElevation(me),this._ease(Ye=>{if(this._zooming&&(m.zoom=d.B.number(y,R,Ye)),this._rotating&&(m.bearing=d.B.number(_,z,Ye)),this._pitching&&(m.pitch=d.B.number(P,U,Ye)),this._padding&&(m.interpolatePadding(j,q,Ye),le=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ye),ye)m.setLocationAtPoint(ye,ke);else{const it=m.zoomScale(m.zoom-y),yt=R>y?Math.min(2,Ue):Math.max(.5,Ue),ft=Math.pow(yt,1-Ye),wt=m.unproject(ae.add(je.mult(Ye*ft)).mult(it));m.setLocationAtPoint(m.renderWorldCopies?wt.wrap():wt,le)}this._applyUpdatedTransform(m),this._fireMoveEvents(u)},Ye=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ye)},r),this}_prepareEase(r,u,m={}){this._moving=!0,u||m.moving||this.fire(new d.k("movestart",r)),this._zooming&&!m.zooming&&this.fire(new d.k("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new d.k("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new d.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(u-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=d.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:m,zoom:y,pitch:_,bearing:P,elevation:j}=this.transformCameraUpdate(u);m&&(u.center=m),y!==void 0&&(u.zoom=y),_!==void 0&&(u.pitch=_),P!==void 0&&(u.bearing=P),j!==void 0&&(u.elevation=j),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new d.k("move",r)),this._zooming&&this.fire(new d.k("zoom",r)),this._rotating&&this.fire(new d.k("rotate",r)),this._pitching&&this.fire(new d.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const m=this._zooming,y=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new d.k("zoomend",r)),y&&this.fire(new d.k("rotateend",r)),_&&this.fire(new d.k("pitchend",r)),this.fire(new d.k("moveend",r))}flyTo(r,u){if(!r.essential&&d.h.prefersReducedMotion){const en=d.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(en,u)}this.stop(),r=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.bb},r);const m=this._getTransformForUpdate(),y=this.getZoom(),_=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?d.ad(+r.zoom,m.minZoom,m.maxZoom):y,z="bearing"in r?this._normalizeBearing(r.bearing,_):_,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=m.zoomScale(R-y),le=d.P.convert(r.offset);let ce=m.centerPoint.add(le);const me=m.pointLocation(ce),ae=d.L.convert(r.center||me);this._normalizeCenter(ae);const je=m.project(me),Ue=m.project(ae).sub(je);let ye=r.curve;const ke=Math.max(m.width,m.height),$e=ke/X,Ye=Ue.mag();if("minZoom"in r){const en=d.ad(Math.min(r.minZoom,y,R),m.minZoom,m.maxZoom),kr=ke/m.zoomScale(en-y);ye=Math.sqrt(kr/Ye*2)}const it=ye*ye;function yt(en){const kr=($e*$e-ke*ke+(en?-1:1)*it*it*Ye*Ye)/(2*(en?$e:ke)*it*Ye);return Math.log(Math.sqrt(kr*kr+1)-kr)}function ft(en){return(Math.exp(en)-Math.exp(-en))/2}function wt(en){return(Math.exp(en)+Math.exp(-en))/2}const Qt=yt(!1);let Xn=function(en){return wt(Qt)/wt(Qt+ye*en)},At=function(en){return ke*((wt(Qt)*(ft(kr=Qt+ye*en)/wt(kr))-ft(Qt))/it)/Ye;var kr},mn=(yt(!0)-Qt)/ye;if(Math.abs(Ye)<1e-6||!isFinite(mn)){if(Math.abs(ke-$e)<1e-6)return this.easeTo(r,u);const en=$e<ke?-1:1;mn=Math.abs(Math.log($e/ke))/ye,At=function(){return 0},Xn=function(kr){return Math.exp(en*ye*kr)}}return r.duration="duration"in r?+r.duration:1e3*mn/("screenSpeed"in r?+r.screenSpeed/ye:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==z,this._pitching=U!==P,this._padding=!m.isPaddingEqual(q),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ae),this._ease(en=>{const kr=en*mn,Zn=1/Xn(kr);m.zoom=en===1?R:y+m.scaleZoom(Zn),this._rotating&&(m.bearing=d.B.number(_,z,en)),this._pitching&&(m.pitch=d.B.number(P,U,en)),this._padding&&(m.interpolatePadding(j,q,en),ce=m.centerPoint.add(le)),this.terrain&&!r.freezeElevation&&this._updateElevation(en);const In=en===1?ae:m.unproject(je.add(Ue.mult(At(kr))).mult(Zn));m.setLocationAtPoint(m.renderWorldCopies?In.wrap():In,ce),this._applyUpdatedTransform(m),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!r){const m=this.handlers;m&&m.stop(!1)}return this}_ease(r,u,m){m.animate===!1||m.duration===0?(r(1),u()):(this._easeStart=d.h.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=d.b5(r,-180,180);const m=Math.abs(r-u);return Math.abs(r-360-u)<m&&(r-=360),Math.abs(r+360-u)<m&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const m=r.lng-u.center.lng;r.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(d.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Gs{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const m=this._map._getUIString(`AttributionControl.${u}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const _=u[y];if(_.used||_.usedForTerrain){const P=_.getSource();P.attribution&&r.indexOf(P.attribution)<0&&r.push(P.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,_)=>y.length-_.length),r=r.filter((y,_)=>{for(let P=_+1;P<r.length;P++)if(r[P].indexOf(y)>=0)return!1;return!0});const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ti{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const u=k.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _d{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const y of m)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Lh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Dc=d.Q([{name:"a_pos3d",type:"Int16",components:3}]);class wd extends d.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const m={};for(const y of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))m[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),d.aS(y.posMatrix,0,d.N,0,d.N,0,1),this._tiles[y.key]=new Lr(y,this.tileSize));for(const y in this._tiles)m[y]||delete this._tiles[y]}freeRtt(r){for(const u in this._tiles){const m=this._tiles[u];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const m of this._renderableTilesKeys){const y=this._tiles[m].tileID;if(y.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),d.aS(_.posMatrix,0,d.N,0,d.N,0,1),u[m]=_}else if(y.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const P=y.canonical.z-r.canonical.z,j=y.canonical.x-(y.canonical.x>>P<<P),R=y.canonical.y-(y.canonical.y>>P<<P),z=d.N>>P;d.aS(_.posMatrix,0,z,0,z,0,1),d.$(_.posMatrix,_.posMatrix,[-j*z,-R*z,0]),u[m]=_}else if(r.canonical.isChildOf(y.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const P=r.canonical.z-y.canonical.z,j=r.canonical.x-(r.canonical.x>>P<<P),R=r.canonical.y-(r.canonical.y>>P<<P),z=d.N>>P;d.aS(_.posMatrix,0,d.N,0,d.N,0,1),d.$(_.posMatrix,_.posMatrix,[j*z,R*z,0]),d.a0(_.posMatrix,_.posMatrix,[1/2**P,1/2**P,0]),u[m]=_}}return u}getSourceTile(r,u){const m=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>m.maxzoom&&(y=m.maxzoom),y<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;y>=m.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(y--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Tc{constructor(r,u,m){this.painter=r,this.sourceCache=new wd(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,m,y=d.N){var _;if(!(u>=0&&u<y&&m>=0&&m<y))return 0;const P=this.getTerrainData(r),j=(_=P.tile)===null||_===void 0?void 0:_.dem;if(!j)return 0;const R=function(ce,me,ae){var je=me[0],Ue=me[1];return ce[0]=ae[0]*je+ae[4]*Ue+ae[12],ce[1]=ae[1]*je+ae[5]*Ue+ae[13],ce}([],[u/y*d.N,m/y*d.N],P.u_terrain_matrix),z=[R[0]*j.dim,R[1]*j.dim],U=Math.floor(z[0]),q=Math.floor(z[1]),X=z[0]-U,le=z[1]-q;return j.get(U,q)*(1-X)*(1-le)+j.get(U+1,q)*X*(1-le)+j.get(U,q+1)*(1-X)*le+j.get(U+1,q+1)*X*le}getElevationForLngLatZoom(r,u){const{tileID:m,mercatorX:y,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(m,y%d.N,_%d.N,d.N)}getElevation(r,u,m,y=d.N){return this.getDEMElevation(r,u,m,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,_=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new zt(y,_,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new zt(y,new d.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.ao([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new zt(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const y=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?_=r.canonical.z-y:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=r.canonical.x-(r.canonical.x>>_<<_),j=r.canonical.y-(r.canonical.y>>_<<_),R=d.bc(new Float64Array(16),[1/(d.N<<_),1/(d.N<<_),0]);d.$(R,R,[P*d.N,j*d.N,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,m=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new zt(u.context,{width:m,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new zt(u.context,{width:m,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,y,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,P=0;_<this._coordsTextureSize;_++)for(let j=0;j<this._coordsTextureSize;j++,P+=4)u[P+0]=255&j,u[P+1]=255&_,u[P+2]=j>>8<<4|_>>8,u[P+3]=0;const m=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new zt(r,m,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){const u=new Uint8Array(4),m=this.painter.context,y=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,u),m.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),P=u[1]+((15&u[2])<<8),j=this.coordsIndex[255-u[3]],R=j&&this.sourceCache.getTileByID(j);if(!R)return null;const z=this._coordsTextureSize,U=(1<<R.tileID.canonical.z)*z;return new d.U(this._allowMercatorOverflow(r,(R.tileID.canonical.x*z+_)/U),(R.tileID.canonical.y*z+P)/U,this.getElevation(R.tileID,_,P,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new d.bd,m=new d.b0,y=this.meshSize,_=d.N/y,P=y*y;for(let q=0;q<=y;q++)for(let X=0;X<=y;X++)u.emplaceBack(X*_,q*_,0);for(let q=0;q<P;q+=y+1)for(let X=0;X<y;X++)m.emplaceBack(X+q,y+X+q+1,y+X+q+2),m.emplaceBack(X+q,y+X+q+2,X+q+1);const j=u.length,R=j+2*(y+1);for(const q of[0,1])for(let X=0;X<=y;X++)for(const le of[0,1])u.emplaceBack(X*_,q*d.N,le);for(let q=0;q<2*y;q+=2)m.emplaceBack(R+q,R+q+1,R+q+3),m.emplaceBack(R+q,R+q+3,R+q+2),m.emplaceBack(j+q,j+q+3,j+q+1),m.emplaceBack(j+q,j+q+2,j+q+3);const z=u.length,U=z+2*(y+1);for(const q of[0,1])for(let X=0;X<=y;X++)for(const le of[0,1])u.emplaceBack(q*d.N,X*_,le);for(let q=0;q<2*y;q+=2)m.emplaceBack(z+q,z+q+1,z+q+3),m.emplaceBack(z+q,z+q+3,z+q+2),m.emplaceBack(U+q,U+q+3,U+q+1),m.emplaceBack(U+q,U+q+2,U+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(m),vertexBuffer:r.createVertexBuffer(u,Dc.members),segments:d.S.simpleSegment(0,0,u.length,m.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*d.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var m;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(m=this.getMinMaxElevation(y).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=u.dem.min*this.exaggeration,m.maxElevation=u.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,u){const m=d.U.fromLngLat(r.wrap()),y=(1<<u)*d.N,_=m.x*y,P=m.y*y,j=Math.floor(_/d.N),R=Math.floor(P/d.N);return{tileID:new d.O(u,0,u,j,R),mercatorX:_,mercatorY:P}}_allowMercatorOverflow(r,u){const m=r.x<this.painter.width/2;let y=d.bf(u);const _=this.painter.transform.center.lng;return m&&Math.sign(y)>0&&Math.sign(_)<0||!m&&Math.sign(y)<0&&Math.sign(_)>0?(y=360*Math.sign(_)+y,d.G(y)):u}}class Ff{constructor(r,u,m){this._context=r,this._size=u,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new zt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(m.texture),{id:r,fbo:u,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const vs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pc{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Ff(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(m=>!r._layers[m].isHidden(u)),this._coordsDescendingInv={};for(const m in r.sourceCaches){this._coordsDescendingInv[m]={};const y=r.sourceCaches[m].getVisibleCoordinates();for(const _ of y){const P=this.terrain.sourceCache.getTerrainCoords(_);for(const j in P)this._coordsDescendingInv[m][j]||(this._coordsDescendingInv[m][j]=[]),this._coordsDescendingInv[m][j].push(P[j])}}this._coordsDescendingInvStr={};for(const m of r._order){const y=r._layers[m],_=y.source;if(vs[y.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const P in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][P]=this._coordsDescendingInv[_][P].map(j=>j.key).sort().join()}}for(const m of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[y][m.tileID.key];_&&_!==m.rttCoords[y]&&(m.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,m=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(vs[u]&&(this._prevType&&vs[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!y))return!0;if(vs[this._prevType]||vs[u]&&y){this._prevType=u;const _=this._stacks.length-1,P=this._stacks[_]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(li(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[_]){const z=this.pool.getObjectForId(j.rtt[_].id);if(z.stamp===j.rtt[_].stamp){this.pool.useObject(z);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),j.rtt[_]={id:R.id,stamp:R.stamp},m.context.bindFramebuffer.set(R.fbo.framebuffer),m.context.clear({color:d.aT.transparent,stencil:0}),m.currentStencilSource=void 0;for(let z=0;z<P.length;z++){const U=m.style._layers[P[z]],q=U.source?this._coordsDescendingInv[U.source][j.tileID.key]:[j.tileID];m.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),m._renderTileClippingMasks(U,q),m.renderLayer(m,m.style.sourceCaches[U.source],U,q),U.source&&(j.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][j.tileID.key])}}return li(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),vs[u]}return!1}}const an=A,dn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Qo=x=>{x.touchstart=x.dragStart,x.touchmoveWindow=x.dragMove,x.touchend=x.dragEnd},jc={showCompass:!0,showZoom:!0,visualizePitch:!1};class wu{constructor(r,u,m=!1){this.mousedown=P=>{this.startMouse(d.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),k.mousePos(this.element,P)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,k.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Ml({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:j,bearingDegreesPerPixelMoved:R=.8})=>{const z=new Ph;return new To({clickTolerance:j,move:(U,q)=>({bearingDelta:(q.x-U.x)*R}),moveStateManager:z,enable:P,assignEvents:Qo})})({clickTolerance:y,enable:!0}),this.map=r,m&&(this.mousePitch=Po({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:j,pitchDegreesPerPixelMoved:R=-.5})=>{const z=new Ph;return new To({clickTolerance:j,move:(U,q)=>({pitchDelta:(q.y-U.y)*R}),moveStateManager:z,enable:P,assignEvents:Qo})})({clickTolerance:_,enable:!0})),k.addEventListener(u,"mousedown",this.mousedown),k.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),k.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),k.disableDrag()}moveMouse(r,u){const m=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(r,u)||{};if(y&&m.setBearing(m.getBearing()+y),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&m.setPitch(m.getPitch()+_)}}moveTouch(r,u){const m=this.map,{bearingDelta:y}=this.touchRotate.dragMove(r,u)||{};if(y&&m.setBearing(m.getBearing()+y),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&m.setPitch(m.getPitch()+_)}}off(){const r=this.element;k.removeEventListener(r,"mousedown",this.mousedown),k.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let ji;function Cu(x,r,u){if(x=new d.L(x.lng,x.lat),r){const m=new d.L(x.lng-360,x.lat),y=new d.L(x.lng+360,x.lat),_=u.locationPoint(x).distSqr(r);u.locationPoint(m).distSqr(r)<_?x=m:u.locationPoint(y).distSqr(r)<_&&(x=y)}for(;Math.abs(x.lng-u.center.lng)>180;){const m=u.locationPoint(x);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;x.lng>u.center.lng?x.lng-=360:x.lng+=360}return x}const xa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Uf(x,r,u){const m=x.classList;for(const y in xa)m.remove(`maplibregl-${u}-anchor-${y}`);m.add(`maplibregl-${u}-anchor-${r}`)}class Ll extends d.E{constructor(r){if(super(),this._onKeyPress=u=>{const m=u.code,y=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=u=>{const m=u.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!m)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${xa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${y}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=d.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");const u=k.createNS("http://www.w3.org/2000/svg","svg"),m=41,y=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${m}px`),u.setAttributeNS(null,"width",`${y}px`),u.setAttributeNS(null,"viewBox",`0 0 ${y} ${m}`);const _=k.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const P=k.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const j=k.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const je of R){const Ue=k.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",je.rx),Ue.setAttributeNS(null,"ry",je.ry),j.appendChild(Ue)}const z=k.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const U=k.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(U);const q=k.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const X=k.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(X);const le=k.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),le.setAttributeNS(null,"fill","#FFFFFF");const ce=k.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=k.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const ae=k.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),ce.appendChild(me),ce.appendChild(ae),P.appendChild(j),P.appendChild(z),P.appendChild(q),P.appendChild(le),P.appendChild(ce),u.appendChild(P),u.setAttributeNS(null,"height",m*this._scale+"px"),u.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(u),this._offset=d.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Uf(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=d.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=d.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ci={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ir=0,Ac=!1;const Nu={maxWidth:100,unit:"metric"};function bn(x,r,u){const m=u&&u.maxWidth||100,y=x._container.clientHeight/2,_=x.unproject([0,y]),P=x.unproject([m,y]),j=_.distanceTo(P);if(u&&u.unit==="imperial"){const R=3.2808*j;R>5280?_a(r,m,R/5280,x._getUIString("ScaleControl.Miles")):_a(r,m,R,x._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?_a(r,m,j/1852,x._getUIString("ScaleControl.NauticalMiles")):j>=1e3?_a(r,m,j/1e3,x._getUIString("ScaleControl.Kilometers")):_a(r,m,j,x._getUIString("ScaleControl.Meters"))}function _a(x,r,u,m){const y=function(_){const P=Math.pow(10,`${Math.floor(_)}`.length-1);let j=_/P;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(R){const z=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*z)/z}(j),P*j}(u);x.style.width=r*(y/u)+"px",x.innerHTML=`${y}&nbsp;${m}`}const _i={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wa(x){if(x){if(typeof x=="number"){const r=Math.round(Math.abs(x)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,x),"top-left":new d.P(r,r),"top-right":new d.P(-r,r),bottom:new d.P(0,-x),"bottom-left":new d.P(r,-r),"bottom-right":new d.P(-r,-r),left:new d.P(x,0),right:new d.P(-x,0)}}if(x instanceof d.P||Array.isArray(x)){const r=d.P.convert(x);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:d.P.convert(x.center||[0,0]),top:d.P.convert(x.top||[0,0]),"top-left":d.P.convert(x["top-left"]||[0,0]),"top-right":d.P.convert(x["top-right"]||[0,0]),bottom:d.P.convert(x.bottom||[0,0]),"bottom-left":d.P.convert(x["bottom-left"]||[0,0]),"bottom-right":d.P.convert(x["bottom-right"]||[0,0]),left:d.P.convert(x.left||[0,0]),right:d.P.convert(x.right||[0,0])}}return wa(new d.P(0,0))}const Il={extend:(x,...r)=>d.e(x,...r),run(x){x()},logToElement(x,r=!1,u="log"){const m=window.document.getElementById(u);m&&(r&&(m.innerHTML=""),m.innerHTML+=`<br>${x}`)}},Cd=A;class on{static get version(){return Cd}static get workerCount(){return yr.workerCount}static set workerCount(r){yr.workerCount=r}static get maxParallelImageRequests(){return d.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){d.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return d.c.WORKER_URL}static set workerUrl(r){d.c.WORKER_URL=r}static addProtocol(r,u){d.c.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete d.c.REGISTERED_PROTOCOLS[r]}}return on.Map=class extends Bf{constructor(x){if(d.bg.mark(d.bh.create),(x=d.e({},dn,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new md(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new d.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._cooperativeGestures=x.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new _d,this._controls=[],this._mapId=d.a2(),this._locale=d.e({},Lh,x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this._imageQueueHandle=Se.addThrottleControl(()=>this.isMoving()),this._requestManager=new De(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=Al(m=>{this._trackResize&&!this._removed&&this.resize(m)._update()},50);this._resizeObserver=new ResizeObserver(m=>{r?u(m):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _u(this,x),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=x.hash&&new gu(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,d.e({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new Gs({customAttribution:x.customAttribution})),x.maplibreLogo&&this.addControl(new ti,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new d.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new d.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new d.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(x,r){if(r===void 0&&(r=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=x.onAdd(this);this._controls.push(x);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(x);return r>-1&&this._controls.splice(r,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}calculateCameraOptionsFromTo(x,r,u,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(x,r,u,m)}resize(x){var r;const u=this._containerDimensions(),m=u[0],y=u[1],_=this._getClampedPixelRatio(m,y);if(this._resizeCanvas(m,y,_),this.painter.resize(m,y,_),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const R=this._getClampedPixelRatio(m,y);this._resizeCanvas(m,y,R),this.painter.resize(m,y,R)}this.transform.resize(m,y),(r=this._requestedCameraState)===null||r===void 0||r.resize(m,y);const P=!this._moving;return P&&(this.stop(),this.fire(new d.k("movestart",x)).fire(new d.k("move",x))),this.fire(new d.k("resize",x)),P&&this.fire(new d.k("moveend",x)),this}_getClampedPixelRatio(x,r){const{0:u,1:m}=this._maxCanvasSize,y=this.getPixelRatio(),_=x*y,P=r*y;return Math.min(_>u?u/_:1,P>m?m/P:1)*y}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(Nt.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(x){return this._cooperativeGestures=x,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(x){return this.transform.locationPoint(d.L.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.pointLocation(d.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,r,u){if(x==="mouseenter"||x==="mouseover"){let m=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const P=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];P.length?m||(m=!0,u.call(this,new ta(x,this,_.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(x==="mouseleave"||x==="mouseout"){let m=!1;return{layer:r,listener:u,delegates:{mousemove:P=>{(this.getLayer(r)?this.queryRenderedFeatures(P.point,{layers:[r]}):[]).length?m=!0:m&&(m=!1,u.call(this,new ta(x,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,u.call(this,new ta(x,this,P.originalEvent)))}}}}{const m=y=>{const _=this.getLayer(r)?this.queryRenderedFeatures(y.point,{layers:[r]}):[];_.length&&(y.features=_,u.call(this,y),delete y.features)};return{layer:r,listener:u,delegates:{[x]:m}}}}on(x,r,u){if(u===void 0)return super.on(x,r);const m=this._createDelegatedListener(x,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(m);for(const y in m.delegates)this.on(y,m.delegates[y]);return this}once(x,r,u){if(u===void 0)return super.once(x,r);const m=this._createDelegatedListener(x,r,u);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(x,r,u){return u===void 0?super.off(x,r):(this._delegatedListeners&&this._delegatedListeners[x]&&(m=>{const y=this._delegatedListeners[x];for(let _=0;_<y.length;_++){const P=y[_];if(P.layer===r&&P.listener===u){for(const j in P.delegates)this.off(j,P.delegates[j]);return y.splice(_,1),this}}})(),this)}queryRenderedFeatures(x,r){if(!this.style)return[];let u;const m=x instanceof d.P||Array.isArray(x),y=m?x:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:x)||{},y instanceof d.P||typeof y[0]=="number")u=[d.P.convert(y)];else{const _=d.P.convert(y[0]),P=d.P.convert(y[1]);u=[_,new d.P(P.x,_.y),P,new d.P(_.x,P.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(x,r){return this.style.querySourceFeatures(x,r)}setStyle(x,r){return(r=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(x,r))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const r=this._locale[x];if(r==null)throw new Error(`Missing UI string '${x}'`);return r}_updateStyle(x,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(x,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new Ii(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,r,u):this.style.loadJSON(x,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ii(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,r){if(typeof x=="string"){const u=this._requestManager.transformRequest(x,Pe.Style);d.f(u,(m,y)=>{m?this.fire(new d.j(m)):y&&this._updateDiff(y,r)})}else typeof x=="object"&&this._updateDiff(x,r)}_updateDiff(x,r){try{this.style.setState(x,r)&&this._update(!0)}catch(u){d.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(x,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(x,r){return this._lazyInitEmptyStyle(),this.style.addSource(x,r),this._update(!0)}isSourceLoaded(x){const r=this.style&&this.style.sourceCaches[x];if(r!==void 0)return r.loaded();this.fire(new d.j(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const r=this.style.sourceCaches[x.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);for(const u in this.style._layers){const m=this.style._layers[u];m.type==="hillshade"&&m.source===x.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Tc(this.painter,r,x),this.painter.renderToTexture=new Pc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==x.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:x})),this}getTerrain(){var x,r;return(r=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const r in x){const u=x[r]._tiles;for(const m in u){const y=u[m];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(x,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,r,u)}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,r,u={}){const{pixelRatio:m=1,sdf:y=!1,stretchX:_,stretchY:P,content:j}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||d.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:U}=r,q=r;return this.style.addImage(x,{data:new d.R({width:R,height:z},new Uint8Array(U)),pixelRatio:m,stretchX:_,stretchY:P,content:j,sdf:y,version:0,userImage:q}),q.onAdd&&q.onAdd(this,x),this}}{const{width:R,height:z,data:U}=d.h.getImageData(r);this.style.addImage(x,{data:new d.R({width:R,height:z},U),pixelRatio:m,stretchX:_,stretchY:P,content:j,sdf:y,version:0})}}updateImage(x,r){const u=this.style.getImage(x);if(!u)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||d.a(r)?d.h.getImageData(r):r,{width:y,height:_,data:P}=m;if(y===void 0||_===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||_!==u.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(r instanceof HTMLImageElement||d.a(r));return u.data.replace(P,j),this.style.updateImage(x,u),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,r){Se.getImage(this._requestManager.transformRequest(x,Pe.Image),r)}listImages(){return this.style.listImages()}addLayer(x,r){return this._lazyInitEmptyStyle(),this.style.addLayer(x,r),this._update(!0)}moveLayer(x,r){return this.style.moveLayer(x,r),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,r,u){return this.style.setLayerZoomRange(x,r,u),this._update(!0)}setFilter(x,r,u={}){return this.style.setFilter(x,r,u),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,r,u,m={}){return this.style.setPaintProperty(x,r,u,m),this._update(!0)}getPaintProperty(x,r){return this.style.getPaintProperty(x,r)}setLayoutProperty(x,r,u,m={}){return this.style.setLayoutProperty(x,r,u,m),this._update(!0)}getLayoutProperty(x,r){return this.style.getLayoutProperty(x,r)}setGlyphs(x,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,r,u,m=>{m||this._update(!0)}),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,r,u=>{u||this._update(!0)}),this}setLight(x,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,r){return this.style.setFeatureState(x,r),this._update()}removeFeatureState(x,r){return this.style.removeFeatureState(x,r),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,r=0;return this._container&&(x=this._container.clientWidth||400,r=this._container.clientHeight||300),[x,r]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const r=this._canvasContainer=k.create("div","maplibregl-canvas-container",x);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),m=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],m);const y=this._controlContainer=k.create("div","maplibregl-control-container",x),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{_[P]=k.create("div",`maplibregl-ctrl-${P} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=k.create("div","maplibregl-cooperative-gesture-screen",this._container);let x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${x}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){k.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(x,r,u){this._canvas.width=Math.floor(u*x),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const x={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{r={requestedAttributes:x},m&&(r.statusMessage=m.statusMessage,r.type=m.type)},{once:!0});const u=this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x);if(!u){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new Wo(u,this.transform),O.testSupport(u)}_onCooperativeGesture(x,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,_=d.h.now();this.style.zoomHistory.update(y,_);const P=new d.a8(y,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=P.crossFadingFactor();j===1&&j===this._crossFadingFactor||(u=!0,this._crossFadingFactor=j),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bg.mark(d.bh.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,d.bg.mark(d.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Se.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),d.bg.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=d.h.frame(x=>{d.bg.frame(x),this._frame=null,this._render(x)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return an}getCameraTargetElevation(){return this.transform.elevation}},on.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const m=this._map._getUIString(`NavigationControl.${u}`);r.title=m,r.setAttribute("aria-label",m)},this.options=d.e({},jc,x),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,r){const u=k.create("button",x,this._container);return u.type="button",u.addEventListener("click",r),u}},on.GeolocateControl=class extends d.E{constructor(x){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new d.L(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,y=this._map.getBearing(),_=d.e({bearing:y},this.options.fitBoundsOptions),P=Nt.fromLngLat(u,m);this._map.fitBounds(P,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new d.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ac)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ll({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ll({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")))})}},this.options=d.e({},ci,x)}onAdd(x){return this._map=x,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){ji===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(m=>{ji=m.state!=="denied",r(ji)}).catch(()=>{ji=!!window.navigator.geolocation,r(ji)}):(ji=!!window.navigator.geolocation,r(ji)):r(ji)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ir=0,Ac=!1}_isOutOfMapMaxBounds(x){const r=this._map.getMaxBounds(),u=x.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const x=this._map.getBounds(),r=x.getSouthEast(),u=x.getNorthEast(),m=r.distanceTo(u),y=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ir--,Ac=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ir++,Ir>1?(x={maximumAge:6e5,timeout:0},Ac=!0):(x=this.options.positionOptions,Ac=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},on.AttributionControl=Gs,on.LogoControl=ti,on.ScaleControl=class{constructor(x){this._onMove=()=>{bn(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,bn(this._map,this._container,this.options)},this.options=d.e({},Nu,x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},on.FullscreenControl=class extends d.E{constructor(x={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},on.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=x}onAdd(x){return this._map=x,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},on.Popup=class extends d.E{constructor(x){super(),this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new d.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let m=this.options.anchor;const y=wa(this.options.offset);if(!m){const P=this._container.offsetWidth,j=this._container.offsetHeight;let R;R=u.y+y.bottom.y<j?["top"]:u.y>this._map.transform.height-j?["bottom"]:[],u.x<P/2?R.push("left"):u.x>this._map.transform.width-P/2&&R.push("right"),m=R.length===0?"bottom":R.join("-")}const _=u.add(y[m]).round();k.setTransform(this._container,`${xa[m]} translate(${_.x}px,${_.y}px)`),Uf(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(_i),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=d.L.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const r=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=x;m=u.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){this._container&&this._container.classList.add(x)}removeClassName(x){this._container&&this._container.classList.remove(x)}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(hr);x&&x.focus()}},on.Marker=Ll,on.Style=Ii,on.LngLat=d.L,on.LngLatBounds=Nt,on.Point=d.P,on.MercatorCoordinate=d.U,on.Evented=d.E,on.AJAXError=d.bi,on.config=d.c,on.CanvasSource=cn,on.GeoJSONSource=qt,on.ImageSource=Pn,on.RasterDEMTileSource=Dn,on.RasterTileSource=yn,on.VectorTileSource=Mt,on.VideoSource=vr,on.setRTLTextPlugin=d.bj,on.getRTLTextPluginStatus=d.bk,on.prewarm=function(){fs().acquire(kn)},on.clearPrewarmedResources=function(){const x=qr;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(kn),qr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Il.extend(on,{isSafari:d.ac,getPerformanceMetrics:d.bg.getPerformanceMetrics}),on});var b=g;return b})})(oA);var Az=oA.exports;const Xa=lj(Az),kz=()=>{var Vn;const[o,t]=oe.useState(!1),[a,c]=oe.useState(!1),[g,N]=oe.useState(null),[b,d]=oe.useState(null),[A,k]=oe.useState(null),[O,B]=oe.useState(null),[W,ie]=oe.useState(null),[pe,Oe]=oe.useState(0),[Se,Pe]=oe.useState({email:"",password:""}),[De,Ce]=oe.useState(null),[ze,Re]=oe.useState(!1),Ze=oe.useRef(null),tt=oe.useRef(null),ut=oe.useRef(null),Rt=oe.useRef(null),zt=oe.useRef(null),fn=oe.useRef(null);oe.useEffect(()=>{const{data:{subscription:Nt}}=Zi.auth.onAuthStateChange(async(Be,Mt)=>{Be==="SIGNED_IN"&&Mt?await An(Mt.access_token):Be==="SIGNED_OUT"&&(t(!1),N(null),Ct(),lt())});return()=>Nt.unsubscribe()},[]),oe.useEffect(()=>{o&&navigator.geolocation&&(console.log("🔍 Checking location permission on component mount..."),"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(Nt=>{console.log("📍 Initial permission state:",Nt.state),Nt.state==="granted"?console.log("✅ Location permission already granted"):Nt.state==="prompt"?console.log("❓ Location permission needs to be requested"):Nt.state==="denied"&&(console.log("❌ Location permission denied"),k("Location permission is denied. Please enable it in your browser settings."))}))},[o]),oe.useEffect(()=>{(async()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser");return}try{"permissions"in navigator&&(await navigator.permissions.query({name:"geolocation"})).state==="denied"&&k("Location permission denied. Please enable location access in your browser settings.")}catch{console.log("Permission API not supported, will check when user clicks Start Tracking")}})()},[]);const lt=()=>{fn.current&&(fn.current.remove(),fn.current=null),Rt.current&&(Rt.current.remove(),Rt.current=null)},ct=(Nt,Be)=>{if(!zt.current||Rt.current)return;Rt.current=new Xa.Map({container:zt.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[Be,Nt],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),Rt.current.addControl(new Xa.NavigationControl,"top-right"),Rt.current.once("load",()=>{console.log("✅ Driver map loaded successfully"),Rt.current&&(Rt.current.dragRotate.disable(),Rt.current.touchZoomRotate.disableRotation(),console.log("🔄 Rotation features disabled"))}),Rt.current.on("error",Dn=>{console.error("❌ Driver map error:",Dn)});const Mt=document.createElement("div");Mt.className="driver-marker",Mt.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,fn.current=new Xa.Marker({element:Mt,anchor:"center"}).setLngLat([Be,Nt]).addTo(Rt.current);const yn=new Xa.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(g==null?void 0:g.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(g==null?void 0:g.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(g==null?void 0:g.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
        </div>
      `);fn.current.setPopup(yn)},ht=(Nt,Be)=>{if(!Rt.current||!fn.current)return;const Mt=[Be,Nt];fn.current.setLngLat(Mt),Rt.current.flyTo({center:Mt,duration:1e3});const yn=new Xa.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(g==null?void 0:g.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(g==null?void 0:g.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(g==null?void 0:g.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Coordinates:</strong> ${Nt.toFixed(6)}, ${Be.toFixed(6)}</p>
        </div>
      `);fn.current.setPopup(yn)},$t=async Nt=>{Nt.preventDefault(),Re(!0),Ce(null);try{const{data:Be,error:Mt}=await Zi.auth.signInWithPassword({email:Se.email,password:Se.password});if(Mt){console.error("❌ Login error:",Mt),Ce(Mt.message);return}Be.user&&Be.session?(console.log("✅ Login successful:",Be.user.email),await An(Be.session.access_token),Pe({email:"",password:""})):Ce("Login failed - no user data received")}catch(Be){console.error("❌ Login error:",Be),Ce("An unexpected error occurred during login")}finally{Re(!1)}},An=async Nt=>{var Be,Mt,yn,Dn,qt;try{console.log("🔌 Driver: Connecting to WebSocket..."),await ar.connect(),(Be=ar.socket)==null||Be.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server"),B(null)}),(Mt=ar.socket)==null||Mt.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server"),B("Disconnected from server")}),(yn=ar.socket)==null||yn.on("error",Ft=>{console.error("❌ Driver: Socket error:",Ft),B(Ft.message||"Socket error occurred")}),(Dn=ar.socket)==null||Dn.on("driver:authenticated",Ft=>{console.log("✅ Driver: Authentication successful:",Ft),t(!0),N(Ft.busInfo),B(null)}),(qt=ar.socket)==null||qt.on("driver:locationConfirmed",Ft=>{console.log("📍 Driver: Location confirmed:",Ft),ie(new Date().toLocaleTimeString()),Oe(Pn=>Pn+1)}),Ze.current=ar.socket,ar.authenticateAsDriver(Nt)}catch(Ft){console.error("❌ Driver: Authentication error:",Ft),B("Failed to authenticate with server")}},Ct=()=>{ar.disconnect(),Ze.current=null},pn=async()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser");return}const Nt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Be=navigator.userAgent.includes("Firefox"),Mt=navigator.userAgent.includes("Chrome"),yn=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome");console.log(`🌐 Device detected: ${Nt?"Mobile":"Desktop"} - ${Be?"Firefox":Mt?"Chrome":yn?"Safari":"Other"}`);const Dn={enableHighAccuracy:!0,timeout:Nt?3e4:6e4,maximumAge:0};console.log("📍 Starting location tracking with options:",Dn);try{if("permissions"in navigator){const qt=await navigator.permissions.query({name:"geolocation"});if(console.log(`🔐 Current permission state: ${qt.state}`),qt.state==="denied"){k(Nt?`Location permission denied on mobile. Please:
1. Go to your phone Settings
2. Find this browser app
3. Enable Location permission
4. Refresh this page`:"Location permission denied. Please reset location permissions and try again.");return}}}catch{console.log("Permission API not supported, proceeding with geolocation request")}console.log("📍 Requesting location permission..."),k(Nt?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(qt=>{console.log("✅ Initial position obtained:",{latitude:qt.coords.latitude,longitude:qt.coords.longitude,accuracy:qt.coords.accuracy,timestamp:new Date(qt.timestamp).toLocaleString()}),d(qt),k(null),ct(qt.coords.latitude,qt.coords.longitude),Wt(qt)},qt=>{console.error("❌ Geolocation error:",qt);let Ft="Location error: ";switch(qt.code){case qt.PERMISSION_DENIED:Nt?Ft=`Mobile location permission denied. Please:

1. Go to your phone Settings
2. Find this browser app (Chrome/Firefox/Safari)
3. Tap "Permissions" or "Privacy"
4. Enable "Location" permission
5. Return to this page and refresh

Alternative: Try opening this page in a different browser app.`:Be?Ft+='Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':Ft+="Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case qt.POSITION_UNAVAILABLE:Ft=Nt?`Location unavailable on mobile. Please:
1. Go outdoors or near a window
2. Wait 10-15 seconds
3. Make sure GPS is enabled in phone settings
4. Try again`:"Location information unavailable.";break;case qt.TIMEOUT:Ft=Nt?`Location request timed out on mobile. Please:
1. Go outdoors for better GPS signal
2. Wait 30 seconds and try again
3. Check if GPS is enabled in phone settings`:"Location request timed out. Please try again.";break;default:Ft+=qt.message}k(Ft)},Dn),ut.current=navigator.geolocation.watchPosition(qt=>{console.log("📍 Location update received:",{latitude:qt.coords.latitude,longitude:qt.coords.longitude,accuracy:qt.coords.accuracy,timestamp:new Date(qt.timestamp).toLocaleString()}),d(qt),k(null),ht(qt.coords.latitude,qt.coords.longitude),Wt(qt)},qt=>{console.error("❌ Geolocation watch error:",qt);let Ft="Location tracking error: ";switch(qt.code){case qt.PERMISSION_DENIED:Ft=Nt?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case qt.POSITION_UNAVAILABLE:Ft=Nt?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case qt.TIMEOUT:Ft=Nt?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:Ft+=qt.message}k(Ft)},Dn),c(!0),console.log("📍 Location tracking started")},Sn=()=>{ut.current&&(navigator.geolocation.clearWatch(ut.current),ut.current=null),tt.current&&(clearInterval(tt.current),tt.current=null),c(!1),console.log("📍 Location tracking stopped")},Wt=Nt=>{if(!Ze.current||!g)return;const Be={driverId:g.driver_id,latitude:Nt.coords.latitude,longitude:Nt.coords.longitude,timestamp:new Date().toISOString(),speed:Nt.coords.speed||void 0,heading:Nt.coords.heading||void 0};Ze.current.emit("driver:locationUpdate",Be)},Yn=async()=>{try{console.log("🔐 Driver: Starting sign out..."),a&&Sn(),Ct();const{error:Nt}=await Zi.auth.signOut();Nt?console.error("❌ Sign out error:",Nt):(console.log("✅ Driver: Sign out successful"),t(!1),N(null),d(null),k(null),B(null),ie(null),Oe(0),lt())}catch(Nt){console.error("❌ Sign out error:",Nt)}};return o?S.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:S.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("div",{children:[S.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),S.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",g==null?void 0:g.driver_name," | Bus: ",g==null?void 0:g.bus_number," | Route: ",g==null?void 0:g.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),S.jsxDEV("button",{onClick:Yn,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${O?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),S.jsxDEV("div",{children:[S.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-sm text-gray-600",children:O?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${a?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),S.jsxDEV("div",{children:[S.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-sm text-gray-600",children:a?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:S.jsxDEV("div",{children:[S.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),S.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:pe},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),W&&S.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",W]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:S.jsxDEV("div",{className:"space-y-3",children:a?S.jsxDEV("button",{onClick:Sn,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):S.jsxDEV(S.Fragment,{children:[S.jsxDEV("button",{onClick:pn,disabled:!!O,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),S.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(Nt=>{console.log("✅ Manual location permission granted:",Nt),k(null),pn()},Nt=>{console.error("❌ Manual location permission denied:",Nt),k("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),A&&A.includes("Permission denied")&&S.jsxDEV("button",{onClick:()=>{k(null),pn()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),S.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),S.jsxDEV("div",{ref:zt,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),A&&S.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[S.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),S.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[S.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),S.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[S.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),S.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),S.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[S.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),S.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),S.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),S.jsxDEV("button",{onClick:()=>{const Nt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(Be=>{const Mt=`✅ Location Test Successful!

Latitude: ${Be.coords.latitude}
Longitude: ${Be.coords.longitude}
Accuracy: ${Be.coords.accuracy}m
Device: ${Nt?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(Mt),k(null)},Be=>{const Mt=`❌ Location Test Failed

Error Code: ${Be.code}
Error Message: ${Be.message}
Device: ${Nt?"Mobile":"Desktop"}

Please check your location permissions.`;alert(Mt)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),b?S.jsxDEV("div",{className:"space-y-3",children:[S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),S.jsxDEV("span",{className:"font-mono",children:b.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),S.jsxDEV("span",{className:"font-mono",children:b.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),S.jsxDEV("span",{children:[(Vn=b.coords.accuracy)==null?void 0:Vn.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),b.coords.speed&&S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),S.jsxDEV("span",{children:[(b.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),b.coords.heading&&S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),S.jsxDEV("span",{children:[b.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),S.jsxDEV("span",{className:"text-sm",children:new Date(b.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):S.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),S.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[S.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),S.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[S.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),S.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):S.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:S.jsxDEV("div",{className:"max-w-md w-full",children:S.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[S.jsxDEV("div",{className:"text-center mb-6",children:[S.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),S.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),De&&S.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:S.jsxDEV("p",{className:"text-red-700 text-sm",children:De},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),S.jsxDEV("form",{onSubmit:$t,className:"space-y-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),S.jsxDEV("input",{id:"email",type:"email",required:!0,value:Se.email,onChange:Nt=>Pe(Be=>({...Be,email:Nt.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),S.jsxDEV("div",{children:[S.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),S.jsxDEV("input",{id:"password",type:"password",required:!0,value:Se.password,onChange:Nt=>Pe(Be=>({...Be,password:Nt.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),S.jsxDEV("button",{type:"submit",disabled:ze,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:ze?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),S.jsxDEV("div",{className:"mt-4 text-center",children:S.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)};var cA={exports:{}},qx={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=oe,t=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),d=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),pe=Symbol.iterator,Oe="@@iterator";function Se(te){if(te===null||typeof te!="object")return null;var Ae=pe&&te[pe]||te[Oe];return typeof Ae=="function"?Ae:null}var Pe=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function De(te){{for(var Ae=arguments.length,Fe=new Array(Ae>1?Ae-1:0),Ke=1;Ke<Ae;Ke++)Fe[Ke-1]=arguments[Ke];Ce("error",te,Fe)}}function Ce(te,Ae,Fe){{var Ke=Pe.ReactDebugCurrentFrame,dt=Ke.getStackAddendum();dt!==""&&(Ae+="%s",Fe=Fe.concat([dt]));var pt=Fe.map(function(Ot){return String(Ot)});pt.unshift("Warning: "+Ae),Function.prototype.apply.call(console[te],console,pt)}}var ze=!1,Re=!1,Ze=!1,tt=!1,ut=!1,Rt;Rt=Symbol.for("react.module.reference");function zt(te){return!!(typeof te=="string"||typeof te=="function"||te===c||te===N||ut||te===g||te===k||te===O||tt||te===ie||ze||Re||Ze||typeof te=="object"&&te!==null&&(te.$$typeof===W||te.$$typeof===B||te.$$typeof===b||te.$$typeof===d||te.$$typeof===A||te.$$typeof===Rt||te.getModuleId!==void 0))}function fn(te,Ae,Fe){var Ke=te.displayName;if(Ke)return Ke;var dt=Ae.displayName||Ae.name||"";return dt!==""?Fe+"("+dt+")":Fe}function lt(te){return te.displayName||"Context"}function ct(te){if(te==null)return null;if(typeof te.tag=="number"&&De("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof te=="function")return te.displayName||te.name||null;if(typeof te=="string")return te;switch(te){case c:return"Fragment";case a:return"Portal";case N:return"Profiler";case g:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList"}if(typeof te=="object")switch(te.$$typeof){case d:var Ae=te;return lt(Ae)+".Consumer";case b:var Fe=te;return lt(Fe._context)+".Provider";case A:return fn(te,te.render,"ForwardRef");case B:var Ke=te.displayName||null;return Ke!==null?Ke:ct(te.type)||"Memo";case W:{var dt=te,pt=dt._payload,Ot=dt._init;try{return ct(Ot(pt))}catch{return null}}}return null}var ht=Object.assign,$t=0,An,Ct,pn,Sn,Wt,Yn,Vn;function Nt(){}Nt.__reactDisabledLog=!0;function Be(){{if($t===0){An=console.log,Ct=console.info,pn=console.warn,Sn=console.error,Wt=console.group,Yn=console.groupCollapsed,Vn=console.groupEnd;var te={configurable:!0,enumerable:!0,value:Nt,writable:!0};Object.defineProperties(console,{info:te,log:te,warn:te,error:te,group:te,groupCollapsed:te,groupEnd:te})}$t++}}function Mt(){{if($t--,$t===0){var te={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ht({},te,{value:An}),info:ht({},te,{value:Ct}),warn:ht({},te,{value:pn}),error:ht({},te,{value:Sn}),group:ht({},te,{value:Wt}),groupCollapsed:ht({},te,{value:Yn}),groupEnd:ht({},te,{value:Vn})})}$t<0&&De("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var yn=Pe.ReactCurrentDispatcher,Dn;function qt(te,Ae,Fe){{if(Dn===void 0)try{throw Error()}catch(dt){var Ke=dt.stack.trim().match(/\n( *(at )?)/);Dn=Ke&&Ke[1]||""}return`
`+Dn+te}}var Ft=!1,Pn;{var vr=typeof WeakMap=="function"?WeakMap:Map;Pn=new vr}function cn(te,Ae){if(!te||Ft)return"";{var Fe=Pn.get(te);if(Fe!==void 0)return Fe}var Ke;Ft=!0;var dt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var pt;pt=yn.current,yn.current=null,Be();try{if(Ae){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(Hr){Ke=Hr}Reflect.construct(te,[],Ot)}else{try{Ot.call()}catch(Hr){Ke=Hr}te.call(Ot.prototype)}}else{try{throw Error()}catch(Hr){Ke=Hr}te()}}catch(Hr){if(Hr&&Ke&&typeof Hr.stack=="string"){for(var _t=Hr.stack.split(`
`),Ut=Ke.stack.split(`
`),wn=_t.length-1,gn=Ut.length-1;wn>=1&&gn>=0&&_t[wn]!==Ut[gn];)gn--;for(;wn>=1&&gn>=0;wn--,gn--)if(_t[wn]!==Ut[gn]){if(wn!==1||gn!==1)do if(wn--,gn--,gn<0||_t[wn]!==Ut[gn]){var Un=`
`+_t[wn].replace(" at new "," at ");return te.displayName&&Un.includes("<anonymous>")&&(Un=Un.replace("<anonymous>",te.displayName)),typeof te=="function"&&Pn.set(te,Un),Un}while(wn>=1&&gn>=0);break}}}finally{Ft=!1,yn.current=pt,Mt(),Error.prepareStackTrace=dt}var Hn=te?te.displayName||te.name:"",Yr=Hn?qt(Hn):"";return typeof te=="function"&&Pn.set(te,Yr),Yr}function tr(te,Ae,Fe){return cn(te,!1)}function $r(te){var Ae=te.prototype;return!!(Ae&&Ae.isReactComponent)}function Sr(te,Ae,Fe){if(te==null)return"";if(typeof te=="function")return cn(te,$r(te));if(typeof te=="string")return qt(te);switch(te){case k:return qt("Suspense");case O:return qt("SuspenseList")}if(typeof te=="object")switch(te.$$typeof){case A:return tr(te.render);case B:return Sr(te.type,Ae,Fe);case W:{var Ke=te,dt=Ke._payload,pt=Ke._init;try{return Sr(pt(dt),Ae,Fe)}catch{}}}return""}var ur=Object.prototype.hasOwnProperty,hi={},Lr=Pe.ReactDebugCurrentFrame;function ii(te){if(te){var Ae=te._owner,Fe=Sr(te.type,te._source,Ae?Ae.type:null);Lr.setExtraStackFrame(Fe)}else Lr.setExtraStackFrame(null)}function We(te,Ae,Fe,Ke,dt){{var pt=Function.call.bind(ur);for(var Ot in te)if(pt(te,Ot)){var _t=void 0;try{if(typeof te[Ot]!="function"){var Ut=Error((Ke||"React class")+": "+Fe+" type `"+Ot+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof te[Ot]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ut.name="Invariant Violation",Ut}_t=te[Ot](Ae,Ot,Ke,Fe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(wn){_t=wn}_t&&!(_t instanceof Error)&&(ii(dt),De("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ke||"React class",Fe,Ot,typeof _t),ii(null)),_t instanceof Error&&!(_t.message in hi)&&(hi[_t.message]=!0,ii(dt),De("Failed %s type: %s",Fe,_t.message),ii(null))}}}var mr=Array.isArray;function rr(te){return mr(te)}function Ln(te){{var Ae=typeof Symbol=="function"&&Symbol.toStringTag,Fe=Ae&&te[Symbol.toStringTag]||te.constructor.name||"Object";return Fe}}function kn(te){try{return yr(te),!1}catch{return!0}}function yr(te){return""+te}function si(te){if(kn(te))return De("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ln(te)),yr(te)}var qr=Pe.ReactCurrentOwner,fs={key:!0,ref:!0,__self:!0,__source:!0},Bi,Tt;function rn(te){if(ur.call(te,"ref")){var Ae=Object.getOwnPropertyDescriptor(te,"ref").get;if(Ae&&Ae.isReactWarning)return!1}return te.ref!==void 0}function nt(te){if(ur.call(te,"key")){var Ae=Object.getOwnPropertyDescriptor(te,"key").get;if(Ae&&Ae.isReactWarning)return!1}return te.key!==void 0}function zn(te,Ae){typeof te.ref=="string"&&qr.current}function Cn(te,Ae){{var Fe=function(){Bi||(Bi=!0,De("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ae))};Fe.isReactWarning=!0,Object.defineProperty(te,"key",{get:Fe,configurable:!0})}}function br(te,Ae){{var Fe=function(){Tt||(Tt=!0,De("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ae))};Fe.isReactWarning=!0,Object.defineProperty(te,"ref",{get:Fe,configurable:!0})}}var dr=function(te,Ae,Fe,Ke,dt,pt,Ot){var _t={$$typeof:t,type:te,key:Ae,ref:Fe,props:Ot,_owner:pt};return _t._store={},Object.defineProperty(_t._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(_t,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ke}),Object.defineProperty(_t,"_source",{configurable:!1,enumerable:!1,writable:!1,value:dt}),Object.freeze&&(Object.freeze(_t.props),Object.freeze(_t)),_t};function gt(te,Ae,Fe,Ke,dt){{var pt,Ot={},_t=null,Ut=null;Fe!==void 0&&(si(Fe),_t=""+Fe),nt(Ae)&&(si(Ae.key),_t=""+Ae.key),rn(Ae)&&(Ut=Ae.ref,zn(Ae,dt));for(pt in Ae)ur.call(Ae,pt)&&!fs.hasOwnProperty(pt)&&(Ot[pt]=Ae[pt]);if(te&&te.defaultProps){var wn=te.defaultProps;for(pt in wn)Ot[pt]===void 0&&(Ot[pt]=wn[pt])}if(_t||Ut){var gn=typeof te=="function"?te.displayName||te.name||"Unknown":te;_t&&Cn(Ot,gn),Ut&&br(Ot,gn)}return dr(te,_t,Ut,dt,Ke,qr.current,Ot)}}var Kt=Pe.ReactCurrentOwner,Bt=Pe.ReactDebugCurrentFrame;function On(te){if(te){var Ae=te._owner,Fe=Sr(te.type,te._source,Ae?Ae.type:null);Bt.setExtraStackFrame(Fe)}else Bt.setExtraStackFrame(null)}var Kr;Kr=!1;function un(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function ai(){{if(Kt.current){var te=ct(Kt.current.type);if(te)return`

Check the render method of \``+te+"`."}return""}}function fe(te){return""}var L={};function G(te){{var Ae=ai();if(!Ae){var Fe=typeof te=="string"?te:te.displayName||te.name;Fe&&(Ae=`

Check the top-level render call using <`+Fe+">.")}return Ae}}function J(te,Ae){{if(!te._store||te._store.validated||te.key!=null)return;te._store.validated=!0;var Fe=G(Ae);if(L[Fe])return;L[Fe]=!0;var Ke="";te&&te._owner&&te._owner!==Kt.current&&(Ke=" It was passed a child from "+ct(te._owner.type)+"."),On(te),De('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Fe,Ke),On(null)}}function se(te,Ae){{if(typeof te!="object")return;if(rr(te))for(var Fe=0;Fe<te.length;Fe++){var Ke=te[Fe];un(Ke)&&J(Ke,Ae)}else if(un(te))te._store&&(te._store.validated=!0);else if(te){var dt=Se(te);if(typeof dt=="function"&&dt!==te.entries)for(var pt=dt.call(te),Ot;!(Ot=pt.next()).done;)un(Ot.value)&&J(Ot.value,Ae)}}}function he(te){{var Ae=te.type;if(Ae==null||typeof Ae=="string")return;var Fe;if(typeof Ae=="function")Fe=Ae.propTypes;else if(typeof Ae=="object"&&(Ae.$$typeof===A||Ae.$$typeof===B))Fe=Ae.propTypes;else return;if(Fe){var Ke=ct(Ae);We(Fe,te.props,"prop",Ke,te)}else if(Ae.PropTypes!==void 0&&!Kr){Kr=!0;var dt=ct(Ae);De("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",dt||"Unknown")}typeof Ae.getDefaultProps=="function"&&!Ae.getDefaultProps.isReactClassApproved&&De("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function we(te){{for(var Ae=Object.keys(te.props),Fe=0;Fe<Ae.length;Fe++){var Ke=Ae[Fe];if(Ke!=="children"&&Ke!=="key"){On(te),De("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ke),On(null);break}}te.ref!==null&&(On(te),De("Invalid attribute `ref` supplied to `React.Fragment`."),On(null))}}var xe={};function ge(te,Ae,Fe,Ke,dt,pt){{var Ot=zt(te);if(!Ot){var _t="";(te===void 0||typeof te=="object"&&te!==null&&Object.keys(te).length===0)&&(_t+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ut=fe();Ut?_t+=Ut:_t+=ai();var wn;te===null?wn="null":rr(te)?wn="array":te!==void 0&&te.$$typeof===t?(wn="<"+(ct(te.type)||"Unknown")+" />",_t=" Did you accidentally export a JSX literal instead of a component?"):wn=typeof te,De("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",wn,_t)}var gn=gt(te,Ae,Fe,dt,pt);if(gn==null)return gn;if(Ot){var Un=Ae.children;if(Un!==void 0)if(Ke)if(rr(Un)){for(var Hn=0;Hn<Un.length;Hn++)se(Un[Hn],te);Object.freeze&&Object.freeze(Un)}else De("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(Un,te)}if(ur.call(Ae,"key")){var Yr=ct(te),Hr=Object.keys(Ae).filter(function(pc){return pc!=="key"}),Tn=Hr.length>0?"{key: someKey, "+Hr.join(": ..., ")+": ...}":"{key: someKey}";if(!xe[Yr+Tn]){var Us=Hr.length>0?"{"+Hr.join(": ..., ")+": ...}":"{}";De(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Tn,Yr,Us,Yr),xe[Yr+Tn]=!0}}return te===c?we(gn):he(gn),gn}}function Te(te,Ae,Fe){return ge(te,Ae,Fe,!0)}function Qe(te,Ae,Fe){return ge(te,Ae,Fe,!1)}var ne=Qe,Ne=Te;qx.Fragment=c,qx.jsx=ne,qx.jsxs=Ne})();cA.exports=qx;var nd=cA.exports;const _N=oe.createContext({});function wN(o){const t=oe.useRef(null);return t.current===null&&(t.current=o()),t.current}const CN=typeof window<"u",uA=CN?oe.useLayoutEffect:oe.useEffect,f0=oe.createContext(null);function NN(o,t){o.indexOf(t)===-1&&o.push(t)}function SN(o,t){const a=o.indexOf(t);a>-1&&o.splice(a,1)}const rd=(o,t,a)=>a>t?t:a<o?o:a;function VC(o,t){return t?`${o}. For more information and steps for solving, visit https://motion.dev/troubleshooting/${t}`:o}let Cp=()=>{},id=()=>{};Cp=(o,t,a)=>{!o&&typeof console<"u"&&console.warn(VC(t,a))},id=(o,t,a)=>{if(!o)throw new Error(VC(t,a))};const sd={},dA=o=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(o);function hA(o){return typeof o=="object"&&o!==null}const fA=o=>/^0[^.\s]+$/u.test(o);function EN(o){let t;return()=>(t===void 0&&(t=o()),t)}const bl=o=>o,Mz=(o,t)=>a=>t(o(a)),iy=(...o)=>o.reduce(Mz),Hv=(o,t,a)=>{const c=t-o;return c===0?1:(a-o)/c};class DN{constructor(){this.subscriptions=[]}add(t){return NN(this.subscriptions,t),()=>SN(this.subscriptions,t)}notify(t,a,c){const g=this.subscriptions.length;if(g)if(g===1)this.subscriptions[0](t,a,c);else for(let N=0;N<g;N++){const b=this.subscriptions[N];b&&b(t,a,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fc=o=>o*1e3,tu=o=>o/1e3;function mA(o,t){return t?o*(1e3/t):0}const GT=new Set;function TN(o,t,a){o||GT.has(t)||(console.warn(VC(t,a)),GT.add(t))}const pA=(o,t,a)=>(((1-3*a+3*t)*o+(3*a-6*t))*o+3*t)*o,Rz=1e-7,Lz=12;function Iz(o,t,a,c,g){let N,b,d=0;do b=t+(a-t)/2,N=pA(b,c,g)-o,N>0?a=b:t=b;while(Math.abs(N)>Rz&&++d<Lz);return b}function sy(o,t,a,c){if(o===t&&a===c)return bl;const g=N=>Iz(N,0,1,o,a);return N=>N===0||N===1?N:pA(g(N),t,c)}const gA=o=>t=>t<=.5?o(2*t)/2:(2-o(2*(1-t)))/2,vA=o=>t=>1-o(1-t),yA=sy(.33,1.53,.69,.99),PN=vA(yA),bA=gA(PN),xA=o=>(o*=2)<1?.5*PN(o):.5*(2-Math.pow(2,-10*(o-1))),jN=o=>1-Math.sin(Math.acos(o)),_A=vA(jN),wA=gA(jN),Vz=sy(.42,0,1,1),Oz=sy(0,0,.58,1),CA=sy(.42,0,.58,1),zz=o=>Array.isArray(o)&&typeof o[0]!="number",NA=o=>Array.isArray(o)&&typeof o[0]=="number",WT={linear:bl,easeIn:Vz,easeInOut:CA,easeOut:Oz,circIn:jN,circInOut:wA,circOut:_A,backIn:PN,backInOut:bA,backOut:yA,anticipate:xA},Bz=o=>typeof o=="string",ZT=o=>{if(NA(o)){id(o.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,a,c,g]=o;return sy(t,a,c,g)}else if(Bz(o))return id(WT[o]!==void 0,`Invalid easing type '${o}'`,"invalid-easing-type"),WT[o];return o},kx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Fz(o,t){let a=new Set,c=new Set,g=!1,N=!1;const b=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function A(O){b.has(O)&&(k.schedule(O),o()),O(d)}const k={schedule:(O,B=!1,W=!1)=>{const pe=W&&g?a:c;return B&&b.add(O),pe.has(O)||pe.add(O),O},cancel:O=>{c.delete(O),b.delete(O)},process:O=>{if(d=O,g){N=!0;return}g=!0,[a,c]=[c,a],a.forEach(A),a.clear(),g=!1,N&&(N=!1,k.process(O))}};return k}const Uz=40;function SA(o,t){let a=!1,c=!0;const g={delta:0,timestamp:0,isProcessing:!1},N=()=>a=!0,b=kx.reduce((Ce,ze)=>(Ce[ze]=Fz(N),Ce),{}),{setup:d,read:A,resolveKeyframes:k,preUpdate:O,update:B,preRender:W,render:ie,postRender:pe}=b,Oe=()=>{const Ce=sd.useManualTiming?g.timestamp:performance.now();a=!1,sd.useManualTiming||(g.delta=c?1e3/60:Math.max(Math.min(Ce-g.timestamp,Uz),1)),g.timestamp=Ce,g.isProcessing=!0,d.process(g),A.process(g),k.process(g),O.process(g),B.process(g),W.process(g),ie.process(g),pe.process(g),g.isProcessing=!1,a&&t&&(c=!1,o(Oe))},Se=()=>{a=!0,c=!0,g.isProcessing||o(Oe)};return{schedule:kx.reduce((Ce,ze)=>{const Re=b[ze];return Ce[ze]=(Ze,tt=!1,ut=!1)=>(a||Se(),Re.schedule(Ze,tt,ut)),Ce},{}),cancel:Ce=>{for(let ze=0;ze<kx.length;ze++)b[kx[ze]].cancel(Ce)},state:g,steps:b}}const{schedule:zi,cancel:vh,state:ma,steps:X1}=SA(typeof requestAnimationFrame<"u"?requestAnimationFrame:bl,!0);let Hx;function $z(){Hx=void 0}const go={now:()=>(Hx===void 0&&go.set(ma.isProcessing||sd.useManualTiming?ma.timestamp:performance.now()),Hx),set:o=>{Hx=o,queueMicrotask($z)}},EA=o=>t=>typeof t=="string"&&t.startsWith(o),AN=EA("--"),qz=EA("var(--"),kN=o=>qz(o)?Hz.test(o.split("/*")[0].trim()):!1,Hz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Np={test:o=>typeof o=="number",parse:parseFloat,transform:o=>o},Gv={...Np,transform:o=>rd(0,1,o)},Mx={...Np,default:1},Lv=o=>Math.round(o*1e5)/1e5,MN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gz(o){return o==null}const Wz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,RN=(o,t)=>a=>!!(typeof a=="string"&&Wz.test(a)&&a.startsWith(o)||t&&!Gz(a)&&Object.prototype.hasOwnProperty.call(a,t)),DA=(o,t,a)=>c=>{if(typeof c!="string")return c;const[g,N,b,d]=c.match(MN);return{[o]:parseFloat(g),[t]:parseFloat(N),[a]:parseFloat(b),alpha:d!==void 0?parseFloat(d):1}},Zz=o=>rd(0,255,o),J1={...Np,transform:o=>Math.round(Zz(o))},Ef={test:RN("rgb","red"),parse:DA("red","green","blue"),transform:({red:o,green:t,blue:a,alpha:c=1})=>"rgba("+J1.transform(o)+", "+J1.transform(t)+", "+J1.transform(a)+", "+Lv(Gv.transform(c))+")"};function Kz(o){let t="",a="",c="",g="";return o.length>5?(t=o.substring(1,3),a=o.substring(3,5),c=o.substring(5,7),g=o.substring(7,9)):(t=o.substring(1,2),a=o.substring(2,3),c=o.substring(3,4),g=o.substring(4,5),t+=t,a+=a,c+=c,g+=g),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(c,16),alpha:g?parseInt(g,16)/255:1}}const OC={test:RN("#"),parse:Kz,transform:Ef.transform},ay=o=>({test:t=>typeof t=="string"&&t.endsWith(o)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${o}`}),hh=ay("deg"),nu=ay("%"),Fn=ay("px"),Yz=ay("vh"),Xz=ay("vw"),KT={...nu,parse:o=>nu.parse(o)/100,transform:o=>nu.transform(o*100)},ap={test:RN("hsl","hue"),parse:DA("hue","saturation","lightness"),transform:({hue:o,saturation:t,lightness:a,alpha:c=1})=>"hsla("+Math.round(o)+", "+nu.transform(Lv(t))+", "+nu.transform(Lv(a))+", "+Lv(Gv.transform(c))+")"},Ns={test:o=>Ef.test(o)||OC.test(o)||ap.test(o),parse:o=>Ef.test(o)?Ef.parse(o):ap.test(o)?ap.parse(o):OC.parse(o),transform:o=>typeof o=="string"?o:o.hasOwnProperty("red")?Ef.transform(o):ap.transform(o),getAnimatableNone:o=>{const t=Ns.parse(o);return t.alpha=0,Ns.transform(t)}},Jz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qz(o){var t,a;return isNaN(o)&&typeof o=="string"&&(((t=o.match(MN))==null?void 0:t.length)||0)+(((a=o.match(Jz))==null?void 0:a.length)||0)>0}const TA="number",PA="color",e4="var",t4="var(",YT="${}",n4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wv(o){const t=o.toString(),a=[],c={color:[],number:[],var:[]},g=[];let N=0;const d=t.replace(n4,A=>(Ns.test(A)?(c.color.push(N),g.push(PA),a.push(Ns.parse(A))):A.startsWith(t4)?(c.var.push(N),g.push(e4),a.push(A)):(c.number.push(N),g.push(TA),a.push(parseFloat(A))),++N,YT)).split(YT);return{values:a,split:d,indexes:c,types:g}}function jA(o){return Wv(o).values}function AA(o){const{split:t,types:a}=Wv(o),c=t.length;return g=>{let N="";for(let b=0;b<c;b++)if(N+=t[b],g[b]!==void 0){const d=a[b];d===TA?N+=Lv(g[b]):d===PA?N+=Ns.transform(g[b]):N+=g[b]}return N}}const r4=o=>typeof o=="number"?0:Ns.test(o)?Ns.getAnimatableNone(o):o;function i4(o){const t=jA(o);return AA(o)(t.map(r4))}const yh={test:Qz,parse:jA,createTransformer:AA,getAnimatableNone:i4};function Q1(o,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?o+(t-o)*6*a:a<1/2?t:a<2/3?o+(t-o)*(2/3-a)*6:o}function s4({hue:o,saturation:t,lightness:a,alpha:c}){o/=360,t/=100,a/=100;let g=0,N=0,b=0;if(!t)g=N=b=a;else{const d=a<.5?a*(1+t):a+t-a*t,A=2*a-d;g=Q1(A,d,o+1/3),N=Q1(A,d,o),b=Q1(A,d,o-1/3)}return{red:Math.round(g*255),green:Math.round(N*255),blue:Math.round(b*255),alpha:c}}function Qx(o,t){return a=>a>0?t:o}const Yi=(o,t,a)=>o+(t-o)*a,eC=(o,t,a)=>{const c=o*o,g=a*(t*t-c)+c;return g<0?0:Math.sqrt(g)},a4=[OC,Ef,ap],o4=o=>a4.find(t=>t.test(o));function XT(o){const t=o4(o);if(Cp(!!t,`'${o}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let a=t.parse(o);return t===ap&&(a=s4(a)),a}const JT=(o,t)=>{const a=XT(o),c=XT(t);if(!a||!c)return Qx(o,t);const g={...a};return N=>(g.red=eC(a.red,c.red,N),g.green=eC(a.green,c.green,N),g.blue=eC(a.blue,c.blue,N),g.alpha=Yi(a.alpha,c.alpha,N),Ef.transform(g))},zC=new Set(["none","hidden"]);function l4(o,t){return zC.has(o)?a=>a<=0?o:t:a=>a>=1?t:o}function c4(o,t){return a=>Yi(o,t,a)}function LN(o){return typeof o=="number"?c4:typeof o=="string"?kN(o)?Qx:Ns.test(o)?JT:h4:Array.isArray(o)?kA:typeof o=="object"?Ns.test(o)?JT:u4:Qx}function kA(o,t){const a=[...o],c=a.length,g=o.map((N,b)=>LN(N)(N,t[b]));return N=>{for(let b=0;b<c;b++)a[b]=g[b](N);return a}}function u4(o,t){const a={...o,...t},c={};for(const g in a)o[g]!==void 0&&t[g]!==void 0&&(c[g]=LN(o[g])(o[g],t[g]));return g=>{for(const N in c)a[N]=c[N](g);return a}}function d4(o,t){const a=[],c={color:0,var:0,number:0};for(let g=0;g<t.values.length;g++){const N=t.types[g],b=o.indexes[N][c[N]],d=o.values[b]??0;a[g]=d,c[N]++}return a}const h4=(o,t)=>{const a=yh.createTransformer(t),c=Wv(o),g=Wv(t);return c.indexes.var.length===g.indexes.var.length&&c.indexes.color.length===g.indexes.color.length&&c.indexes.number.length>=g.indexes.number.length?zC.has(o)&&!g.values.length||zC.has(t)&&!c.values.length?l4(o,t):iy(kA(d4(c,g),g.values),a):(Cp(!0,`Complex values '${o}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Qx(o,t))};function MA(o,t,a){return typeof o=="number"&&typeof t=="number"&&typeof a=="number"?Yi(o,t,a):LN(o)(o,t)}const f4=o=>{const t=({timestamp:a})=>o(a);return{start:(a=!0)=>zi.update(t,a),stop:()=>vh(t),now:()=>ma.isProcessing?ma.timestamp:go.now()}},RA=(o,t,a=10)=>{let c="";const g=Math.max(Math.round(t/a),2);for(let N=0;N<g;N++)c+=Math.round(o(N/(g-1))*1e4)/1e4+", ";return`linear(${c.substring(0,c.length-2)})`},e0=2e4;function IN(o){let t=0;const a=50;let c=o.next(t);for(;!c.done&&t<e0;)t+=a,c=o.next(t);return t>=e0?1/0:t}function m4(o,t=100,a){const c=a({...o,keyframes:[0,t]}),g=Math.min(IN(c),e0);return{type:"keyframes",ease:N=>c.next(g*N).value/t,duration:tu(g)}}const p4=5;function LA(o,t,a){const c=Math.max(t-p4,0);return mA(a-o(c),t-c)}const Ki={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},tC=.001;function g4({duration:o=Ki.duration,bounce:t=Ki.bounce,velocity:a=Ki.velocity,mass:c=Ki.mass}){let g,N;Cp(o<=fc(Ki.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let b=1-t;b=rd(Ki.minDamping,Ki.maxDamping,b),o=rd(Ki.minDuration,Ki.maxDuration,tu(o)),b<1?(g=k=>{const O=k*b,B=O*o,W=O-a,ie=BC(k,b),pe=Math.exp(-B);return tC-W/ie*pe},N=k=>{const B=k*b*o,W=B*a+a,ie=Math.pow(b,2)*Math.pow(k,2)*o,pe=Math.exp(-B),Oe=BC(Math.pow(k,2),b);return(-g(k)+tC>0?-1:1)*((W-ie)*pe)/Oe}):(g=k=>{const O=Math.exp(-k*o),B=(k-a)*o+1;return-tC+O*B},N=k=>{const O=Math.exp(-k*o),B=(a-k)*(o*o);return O*B});const d=5/o,A=y4(g,N,d);if(o=fc(o),isNaN(A))return{stiffness:Ki.stiffness,damping:Ki.damping,duration:o};{const k=Math.pow(A,2)*c;return{stiffness:k,damping:b*2*Math.sqrt(c*k),duration:o}}}const v4=12;function y4(o,t,a){let c=a;for(let g=1;g<v4;g++)c=c-o(c)/t(c);return c}function BC(o,t){return o*Math.sqrt(1-t*t)}const b4=["duration","bounce"],x4=["stiffness","damping","mass"];function QT(o,t){return t.some(a=>o[a]!==void 0)}function _4(o){let t={velocity:Ki.velocity,stiffness:Ki.stiffness,damping:Ki.damping,mass:Ki.mass,isResolvedFromDuration:!1,...o};if(!QT(o,x4)&&QT(o,b4))if(o.visualDuration){const a=o.visualDuration,c=2*Math.PI/(a*1.2),g=c*c,N=2*rd(.05,1,1-(o.bounce||0))*Math.sqrt(g);t={...t,mass:Ki.mass,stiffness:g,damping:N}}else{const a=g4(o);t={...t,...a,mass:Ki.mass},t.isResolvedFromDuration=!0}return t}function t0(o=Ki.visualDuration,t=Ki.bounce){const a=typeof o!="object"?{visualDuration:o,keyframes:[0,1],bounce:t}:o;let{restSpeed:c,restDelta:g}=a;const N=a.keyframes[0],b=a.keyframes[a.keyframes.length-1],d={done:!1,value:N},{stiffness:A,damping:k,mass:O,duration:B,velocity:W,isResolvedFromDuration:ie}=_4({...a,velocity:-tu(a.velocity||0)}),pe=W||0,Oe=k/(2*Math.sqrt(A*O)),Se=b-N,Pe=tu(Math.sqrt(A/O)),De=Math.abs(Se)<5;c||(c=De?Ki.restSpeed.granular:Ki.restSpeed.default),g||(g=De?Ki.restDelta.granular:Ki.restDelta.default);let Ce;if(Oe<1){const Re=BC(Pe,Oe);Ce=Ze=>{const tt=Math.exp(-Oe*Pe*Ze);return b-tt*((pe+Oe*Pe*Se)/Re*Math.sin(Re*Ze)+Se*Math.cos(Re*Ze))}}else if(Oe===1)Ce=Re=>b-Math.exp(-Pe*Re)*(Se+(pe+Pe*Se)*Re);else{const Re=Pe*Math.sqrt(Oe*Oe-1);Ce=Ze=>{const tt=Math.exp(-Oe*Pe*Ze),ut=Math.min(Re*Ze,300);return b-tt*((pe+Oe*Pe*Se)*Math.sinh(ut)+Re*Se*Math.cosh(ut))/Re}}const ze={calculatedDuration:ie&&B||null,next:Re=>{const Ze=Ce(Re);if(ie)d.done=Re>=B;else{let tt=Re===0?pe:0;Oe<1&&(tt=Re===0?fc(pe):LA(Ce,Re,Ze));const ut=Math.abs(tt)<=c,Rt=Math.abs(b-Ze)<=g;d.done=ut&&Rt}return d.value=d.done?b:Ze,d},toString:()=>{const Re=Math.min(IN(ze),e0),Ze=RA(tt=>ze.next(Re*tt).value,Re,30);return Re+"ms "+Ze},toTransition:()=>{}};return ze}t0.applyToOptions=o=>{const t=m4(o,100,t0);return o.ease=t.ease,o.duration=fc(t.duration),o.type="keyframes",o};function FC({keyframes:o,velocity:t=0,power:a=.8,timeConstant:c=325,bounceDamping:g=10,bounceStiffness:N=500,modifyTarget:b,min:d,max:A,restDelta:k=.5,restSpeed:O}){const B=o[0],W={done:!1,value:B},ie=ut=>d!==void 0&&ut<d||A!==void 0&&ut>A,pe=ut=>d===void 0?A:A===void 0||Math.abs(d-ut)<Math.abs(A-ut)?d:A;let Oe=a*t;const Se=B+Oe,Pe=b===void 0?Se:b(Se);Pe!==Se&&(Oe=Pe-B);const De=ut=>-Oe*Math.exp(-ut/c),Ce=ut=>Pe+De(ut),ze=ut=>{const Rt=De(ut),zt=Ce(ut);W.done=Math.abs(Rt)<=k,W.value=W.done?Pe:zt};let Re,Ze;const tt=ut=>{ie(W.value)&&(Re=ut,Ze=t0({keyframes:[W.value,pe(W.value)],velocity:LA(Ce,ut,W.value),damping:g,stiffness:N,restDelta:k,restSpeed:O}))};return tt(0),{calculatedDuration:null,next:ut=>{let Rt=!1;return!Ze&&Re===void 0&&(Rt=!0,ze(ut),tt(ut)),Re!==void 0&&ut>=Re?Ze.next(ut-Re):(!Rt&&ze(ut),W)}}}function w4(o,t,a){const c=[],g=a||sd.mix||MA,N=o.length-1;for(let b=0;b<N;b++){let d=g(o[b],o[b+1]);if(t){const A=Array.isArray(t)?t[b]||bl:t;d=iy(A,d)}c.push(d)}return c}function C4(o,t,{clamp:a=!0,ease:c,mixer:g}={}){const N=o.length;if(id(N===t.length,"Both input and output ranges must be the same length","range-length"),N===1)return()=>t[0];if(N===2&&t[0]===t[1])return()=>t[1];const b=o[0]===o[1];o[0]>o[N-1]&&(o=[...o].reverse(),t=[...t].reverse());const d=w4(t,c,g),A=d.length,k=O=>{if(b&&O<o[0])return t[0];let B=0;if(A>1)for(;B<o.length-2&&!(O<o[B+1]);B++);const W=Hv(o[B],o[B+1],O);return d[B](W)};return a?O=>k(rd(o[0],o[N-1],O)):k}function N4(o,t){const a=o[o.length-1];for(let c=1;c<=t;c++){const g=Hv(0,t,c);o.push(Yi(a,1,g))}}function S4(o){const t=[0];return N4(t,o.length-1),t}function E4(o,t){return o.map(a=>a*t)}function D4(o,t){return o.map(()=>t||CA).splice(0,o.length-1)}function op({duration:o=300,keyframes:t,times:a,ease:c="easeInOut"}){const g=zz(c)?c.map(ZT):ZT(c),N={done:!1,value:t[0]},b=E4(a&&a.length===t.length?a:S4(t),o),d=C4(b,t,{ease:Array.isArray(g)?g:D4(t,g)});return{calculatedDuration:o,next:A=>(N.value=d(A),N.done=A>=o,N)}}const T4=o=>o!==null;function VN(o,{repeat:t,repeatType:a="loop"},c,g=1){const N=o.filter(T4),d=g<0||t&&a!=="loop"&&t%2===1?0:N.length-1;return!d||c===void 0?N[d]:c}const P4={decay:FC,inertia:FC,tween:op,keyframes:op,spring:t0};function IA(o){typeof o.type=="string"&&(o.type=P4[o.type])}class ON{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const j4=o=>o/100;class zN extends ON{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var c,g;const{motionValue:a}=this.options;a&&a.updatedAt!==go.now()&&this.tick(go.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(g=(c=this.options).onStop)==null||g.call(c))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;IA(t);const{type:a=op,repeat:c=0,repeatDelay:g=0,repeatType:N,velocity:b=0}=t;let{keyframes:d}=t;const A=a||op;A!==op&&id(d.length<=2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${d}`,"spring-two-frames"),A!==op&&typeof d[0]!="number"&&(this.mixKeyframes=iy(j4,MA(d[0],d[1])),d=[0,100]);const k=A({...t,keyframes:d});N==="mirror"&&(this.mirroredGenerator=A({...t,keyframes:[...d].reverse(),velocity:-b})),k.calculatedDuration===null&&(k.calculatedDuration=IN(k));const{calculatedDuration:O}=k;this.calculatedDuration=O,this.resolvedDuration=O+g,this.totalDuration=this.resolvedDuration*(c+1)-g,this.generator=k}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:c,totalDuration:g,mixKeyframes:N,mirroredGenerator:b,resolvedDuration:d,calculatedDuration:A}=this;if(this.startTime===null)return c.next(0);const{delay:k=0,keyframes:O,repeat:B,repeatType:W,repeatDelay:ie,type:pe,onUpdate:Oe,finalKeyframe:Se}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-g/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const Pe=this.currentTime-k*(this.playbackSpeed>=0?1:-1),De=this.playbackSpeed>=0?Pe<0:Pe>g;this.currentTime=Math.max(Pe,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let Ce=this.currentTime,ze=c;if(B){const ut=Math.min(this.currentTime,g)/d;let Rt=Math.floor(ut),zt=ut%1;!zt&&ut>=1&&(zt=1),zt===1&&Rt--,Rt=Math.min(Rt,B+1),!!(Rt%2)&&(W==="reverse"?(zt=1-zt,ie&&(zt-=ie/d)):W==="mirror"&&(ze=b)),Ce=rd(0,1,zt)*d}const Re=De?{done:!1,value:O[0]}:ze.next(Ce);N&&(Re.value=N(Re.value));let{done:Ze}=Re;!De&&A!==null&&(Ze=this.playbackSpeed>=0?this.currentTime>=g:this.currentTime<=0);const tt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ze);return tt&&pe!==FC&&(Re.value=VN(O,this.options,Se,this.speed)),Oe&&Oe(Re.value),tt&&this.finish(),Re}then(t,a){return this.finished.then(t,a)}get duration(){return tu(this.calculatedDuration)}get time(){return tu(this.currentTime)}set time(t){var a;t=fc(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(go.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=tu(this.currentTime))}play(){var g,N;if(this.isStopped)return;const{driver:t=f4,startTime:a}=this.options;this.driver||(this.driver=t(b=>this.tick(b))),(N=(g=this.options).onPlay)==null||N.call(g);const c=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=c):this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime||(this.startTime=a??c),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(go.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(t=this.options).onComplete)==null||a.call(t)}cancel(){var t,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(t=this.options).onCancel)==null||a.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),t.observe(this)}}function A4(o){for(let t=1;t<o.length;t++)o[t]??(o[t]=o[t-1])}const Df=o=>o*180/Math.PI,UC=o=>{const t=Df(Math.atan2(o[1],o[0]));return $C(t)},k4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:o=>(Math.abs(o[0])+Math.abs(o[3]))/2,rotate:UC,rotateZ:UC,skewX:o=>Df(Math.atan(o[1])),skewY:o=>Df(Math.atan(o[2])),skew:o=>(Math.abs(o[1])+Math.abs(o[2]))/2},$C=o=>(o=o%360,o<0&&(o+=360),o),eP=UC,tP=o=>Math.sqrt(o[0]*o[0]+o[1]*o[1]),nP=o=>Math.sqrt(o[4]*o[4]+o[5]*o[5]),M4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tP,scaleY:nP,scale:o=>(tP(o)+nP(o))/2,rotateX:o=>$C(Df(Math.atan2(o[6],o[5]))),rotateY:o=>$C(Df(Math.atan2(-o[2],o[0]))),rotateZ:eP,rotate:eP,skewX:o=>Df(Math.atan(o[4])),skewY:o=>Df(Math.atan(o[1])),skew:o=>(Math.abs(o[1])+Math.abs(o[4]))/2};function qC(o){return o.includes("scale")?1:0}function HC(o,t){if(!o||o==="none")return qC(t);const a=o.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let c,g;if(a)c=M4,g=a;else{const d=o.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=k4,g=d}if(!g)return qC(t);const N=c[t],b=g[1].split(",").map(L4);return typeof N=="function"?N(b):b[N]}const R4=(o,t)=>{const{transform:a="none"}=getComputedStyle(o);return HC(a,t)};function L4(o){return parseFloat(o.trim())}const Sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ep=new Set(Sp),rP=o=>o===Np||o===Fn,I4=new Set(["x","y","z"]),V4=Sp.filter(o=>!I4.has(o));function O4(o){const t=[];return V4.forEach(a=>{const c=o.getValue(a);c!==void 0&&(t.push([a,c.get()]),c.set(a.startsWith("scale")?1:0))}),t}const Tf={width:({x:o},{paddingLeft:t="0",paddingRight:a="0"})=>o.max-o.min-parseFloat(t)-parseFloat(a),height:({y:o},{paddingTop:t="0",paddingBottom:a="0"})=>o.max-o.min-parseFloat(t)-parseFloat(a),top:(o,{top:t})=>parseFloat(t),left:(o,{left:t})=>parseFloat(t),bottom:({y:o},{top:t})=>parseFloat(t)+(o.max-o.min),right:({x:o},{left:t})=>parseFloat(t)+(o.max-o.min),x:(o,{transform:t})=>HC(t,"x"),y:(o,{transform:t})=>HC(t,"y")};Tf.translateX=Tf.x;Tf.translateY=Tf.y;const Pf=new Set;let GC=!1,WC=!1,ZC=!1;function VA(){if(WC){const o=Array.from(Pf).filter(c=>c.needsMeasurement),t=new Set(o.map(c=>c.element)),a=new Map;t.forEach(c=>{const g=O4(c);g.length&&(a.set(c,g),c.render())}),o.forEach(c=>c.measureInitialState()),t.forEach(c=>{c.render();const g=a.get(c);g&&g.forEach(([N,b])=>{var d;(d=c.getValue(N))==null||d.set(b)})}),o.forEach(c=>c.measureEndState()),o.forEach(c=>{c.suspendedScrollY!==void 0&&window.scrollTo(0,c.suspendedScrollY)})}WC=!1,GC=!1,Pf.forEach(o=>o.complete(ZC)),Pf.clear()}function OA(){Pf.forEach(o=>{o.readKeyframes(),o.needsMeasurement&&(WC=!0)})}function z4(){ZC=!0,OA(),VA(),ZC=!1}class BN{constructor(t,a,c,g,N,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=c,this.motionValue=g,this.element=N,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(Pf.add(this),GC||(GC=!0,zi.read(OA),zi.resolveKeyframes(VA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:c,motionValue:g}=this;if(t[0]===null){const N=g==null?void 0:g.get(),b=t[t.length-1];if(N!==void 0)t[0]=N;else if(c&&a){const d=c.readValue(a,b);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=b),g&&N===void 0&&g.set(t[0])}A4(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Pf.delete(this)}cancel(){this.state==="scheduled"&&(Pf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const B4=o=>o.startsWith("--");function F4(o,t,a){B4(t)?o.style.setProperty(t,a):o.style[t]=a}const U4=EN(()=>window.ScrollTimeline!==void 0),$4={};function q4(o,t){const a=EN(o);return()=>$4[t]??a()}const zA=q4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Av=([o,t,a,c])=>`cubic-bezier(${o}, ${t}, ${a}, ${c})`,iP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Av([0,.65,.55,1]),circOut:Av([.55,0,1,.45]),backIn:Av([.31,.01,.66,-.59]),backOut:Av([.33,1.53,.69,.99])};function BA(o,t){if(o)return typeof o=="function"?zA()?RA(o,t):"ease-out":NA(o)?Av(o):Array.isArray(o)?o.map(a=>BA(a,t)||iP.easeOut):iP[o]}function H4(o,t,a,{delay:c=0,duration:g=300,repeat:N=0,repeatType:b="loop",ease:d="easeOut",times:A}={},k=void 0){const O={[t]:a};A&&(O.offset=A);const B=BA(d,g);Array.isArray(B)&&(O.easing=B);const W={delay:c,duration:g,easing:Array.isArray(B)?"linear":B,fill:"both",iterations:N+1,direction:b==="reverse"?"alternate":"normal"};return k&&(W.pseudoElement=k),o.animate(O,W)}function FA(o){return typeof o=="function"&&"applyToOptions"in o}function G4({type:o,...t}){return FA(o)&&zA()?o.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class W4 extends ON{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:c,keyframes:g,pseudoElement:N,allowFlatten:b=!1,finalKeyframe:d,onComplete:A}=t;this.isPseudoElement=!!N,this.allowFlatten=b,this.options=t,id(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const k=G4(t);this.animation=H4(a,c,g,k,N),k.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!N){const O=VN(g,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(O):F4(a,c,O),this.animation.cancel()}A==null||A(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,a;(a=(t=this.animation).finish)==null||a.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,a;this.isPseudoElement||(a=(t=this.animation).commitStyles)==null||a.call(t)}get duration(){var a,c;const t=((c=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:c.call(a).duration)||0;return tu(Number(t))}get time(){return tu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fc(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){var c;return this.allowFlatten&&((c=this.animation.effect)==null||c.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&U4()?(this.animation.timeline=t,bl):a(this)}}const UA={anticipate:xA,backInOut:bA,circInOut:wA};function Z4(o){return o in UA}function K4(o){typeof o.ease=="string"&&Z4(o.ease)&&(o.ease=UA[o.ease])}const sP=10;class Y4 extends W4{constructor(t){K4(t),IA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:c,onComplete:g,element:N,...b}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const d=new zN({...b,autoplay:!1}),A=fc(this.finishedTime??this.time);a.setWithVelocity(d.sample(A-sP).value,d.sample(A).value,sP),d.stop()}}const aP=(o,t)=>t==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(yh.test(o)||o==="0")&&!o.startsWith("url("));function X4(o){const t=o[0];if(o.length===1)return!0;for(let a=0;a<o.length;a++)if(o[a]!==t)return!0}function J4(o,t,a,c){const g=o[0];if(g===null)return!1;if(t==="display"||t==="visibility")return!0;const N=o[o.length-1],b=aP(g,t),d=aP(N,t);return Cp(b===d,`You are trying to animate ${t} from "${g}" to "${N}". "${b?N:g}" is not an animatable value.`,"value-not-animatable"),!b||!d?!1:X4(o)||(a==="spring"||FA(a))&&c}function KC(o){o.duration=0,o.type}const Q4=new Set(["opacity","clipPath","filter","transform"]),eB=EN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tB(o){var O;const{motionValue:t,name:a,repeatDelay:c,repeatType:g,damping:N,type:b}=o;if(!(((O=t==null?void 0:t.owner)==null?void 0:O.current)instanceof HTMLElement))return!1;const{onUpdate:A,transformTemplate:k}=t.owner.getProps();return eB()&&a&&Q4.has(a)&&(a!=="transform"||!k)&&!A&&!c&&g!=="mirror"&&N!==0&&b!=="inertia"}const nB=40;class rB extends ON{constructor({autoplay:t=!0,delay:a=0,type:c="keyframes",repeat:g=0,repeatDelay:N=0,repeatType:b="loop",keyframes:d,name:A,motionValue:k,element:O,...B}){var pe;super(),this.stop=()=>{var Oe,Se;this._animation&&(this._animation.stop(),(Oe=this.stopTimeline)==null||Oe.call(this)),(Se=this.keyframeResolver)==null||Se.cancel()},this.createdAt=go.now();const W={autoplay:t,delay:a,type:c,repeat:g,repeatDelay:N,repeatType:b,name:A,motionValue:k,element:O,...B},ie=(O==null?void 0:O.KeyframeResolver)||BN;this.keyframeResolver=new ie(d,(Oe,Se,Pe)=>this.onKeyframesResolved(Oe,Se,W,!Pe),A,k,O),(pe=this.keyframeResolver)==null||pe.scheduleResolve()}onKeyframesResolved(t,a,c,g){this.keyframeResolver=void 0;const{name:N,type:b,velocity:d,delay:A,isHandoff:k,onUpdate:O}=c;this.resolvedAt=go.now(),J4(t,N,b,d)||((sd.instantAnimations||!A)&&(O==null||O(VN(t,c,a))),t[0]=t[t.length-1],KC(c),c.repeat=0);const W={startTime:g?this.resolvedAt?this.resolvedAt-this.createdAt>nB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...c,keyframes:t},ie=!k&&tB(W)?new Y4({...W,element:W.motionValue.owner.current}):new zN(W);ie.finished.then(()=>this.notifyFinished()).catch(bl),this.pendingTimeline&&(this.stopTimeline=ie.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=ie}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),z4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const iB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sB(o){const t=iB.exec(o);if(!t)return[,];const[,a,c,g]=t;return[`--${a??c}`,g]}const aB=4;function $A(o,t,a=1){id(a<=aB,`Max CSS variable fallback depth detected in property "${o}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[c,g]=sB(o);if(!c)return;const N=window.getComputedStyle(t).getPropertyValue(c);if(N){const b=N.trim();return dA(b)?parseFloat(b):b}return kN(g)?$A(g,t,a+1):g}function FN(o,t){return(o==null?void 0:o[t])??(o==null?void 0:o.default)??o}const qA=new Set(["width","height","top","left","right","bottom",...Sp]),oB={test:o=>o==="auto",parse:o=>o},HA=o=>t=>t.test(o),GA=[Np,Fn,nu,hh,Xz,Yz,oB],oP=o=>GA.find(HA(o));function lB(o){return typeof o=="number"?o===0:o!==null?o==="none"||o==="0"||fA(o):!0}const cB=new Set(["brightness","contrast","saturate","opacity"]);function uB(o){const[t,a]=o.slice(0,-1).split("(");if(t==="drop-shadow")return o;const[c]=a.match(MN)||[];if(!c)return o;const g=a.replace(c,"");let N=cB.has(t)?1:0;return c!==a&&(N*=100),t+"("+N+g+")"}const dB=/\b([a-z-]*)\(.*?\)/gu,YC={...yh,getAnimatableNone:o=>{const t=o.match(dB);return t?t.map(uB).join(" "):o}},lP={...Np,transform:Math.round},hB={rotate:hh,rotateX:hh,rotateY:hh,rotateZ:hh,scale:Mx,scaleX:Mx,scaleY:Mx,scaleZ:Mx,skew:hh,skewX:hh,skewY:hh,distance:Fn,translateX:Fn,translateY:Fn,translateZ:Fn,x:Fn,y:Fn,z:Fn,perspective:Fn,transformPerspective:Fn,opacity:Gv,originX:KT,originY:KT,originZ:Fn},UN={borderWidth:Fn,borderTopWidth:Fn,borderRightWidth:Fn,borderBottomWidth:Fn,borderLeftWidth:Fn,borderRadius:Fn,radius:Fn,borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomRightRadius:Fn,borderBottomLeftRadius:Fn,width:Fn,maxWidth:Fn,height:Fn,maxHeight:Fn,top:Fn,right:Fn,bottom:Fn,left:Fn,padding:Fn,paddingTop:Fn,paddingRight:Fn,paddingBottom:Fn,paddingLeft:Fn,margin:Fn,marginTop:Fn,marginRight:Fn,marginBottom:Fn,marginLeft:Fn,backgroundPositionX:Fn,backgroundPositionY:Fn,...hB,zIndex:lP,fillOpacity:Gv,strokeOpacity:Gv,numOctaves:lP},fB={...UN,color:Ns,backgroundColor:Ns,outlineColor:Ns,fill:Ns,stroke:Ns,borderColor:Ns,borderTopColor:Ns,borderRightColor:Ns,borderBottomColor:Ns,borderLeftColor:Ns,filter:YC,WebkitFilter:YC},WA=o=>fB[o];function ZA(o,t){let a=WA(o);return a!==YC&&(a=yh),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const mB=new Set(["auto","none","0"]);function pB(o,t,a){let c=0,g;for(;c<o.length&&!g;){const N=o[c];typeof N=="string"&&!mB.has(N)&&Wv(N).values.length&&(g=o[c]),c++}if(g&&a)for(const N of t)o[N]=ZA(a,g)}class gB extends BN{constructor(t,a,c,g,N){super(t,a,c,g,N,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:c}=this;if(!a||!a.current)return;super.readKeyframes();for(let A=0;A<t.length;A++){let k=t[A];if(typeof k=="string"&&(k=k.trim(),kN(k))){const O=$A(k,a.current);O!==void 0&&(t[A]=O),A===t.length-1&&(this.finalKeyframe=k)}}if(this.resolveNoneKeyframes(),!qA.has(c)||t.length!==2)return;const[g,N]=t,b=oP(g),d=oP(N);if(b!==d)if(rP(b)&&rP(d))for(let A=0;A<t.length;A++){const k=t[A];typeof k=="string"&&(t[A]=parseFloat(k))}else Tf[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,c=[];for(let g=0;g<t.length;g++)(t[g]===null||lB(t[g]))&&c.push(g);c.length&&pB(t,c,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:c}=this;if(!t||!t.current)return;c==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tf[c](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const g=a[a.length-1];g!==void 0&&t.getValue(c,g).jump(g,!1)}measureEndState(){var d;const{element:t,name:a,unresolvedKeyframes:c}=this;if(!t||!t.current)return;const g=t.getValue(a);g&&g.jump(this.measuredOrigin,!1);const N=c.length-1,b=c[N];c[N]=Tf[a](t.measureViewportBox(),window.getComputedStyle(t.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([A,k])=>{t.getValue(A).set(k)}),this.resolveNoneKeyframes()}}function vB(o,t,a){if(o instanceof EventTarget)return[o];if(typeof o=="string"){let c=document;const g=(a==null?void 0:a[o])??c.querySelectorAll(o);return g?Array.from(g):[]}return Array.from(o)}const KA=(o,t)=>t&&typeof o=="number"?t.transform(o):o;function YA(o){return hA(o)&&"offsetHeight"in o}const cP=30,yB=o=>!isNaN(parseFloat(o));class bB{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=c=>{var N;const g=go.now();if(this.updatedAt!==g&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(c),this.current!==this.prev&&((N=this.events.change)==null||N.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=go.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=yB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return TN(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new DN);const c=this.events[t].add(a);return t==="change"?()=>{c(),zi.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,a,c){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-c}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=go.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>cP)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,cP);return mA(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,a;(t=this.dependents)==null||t.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vp(o,t){return new bB(o,t)}const{schedule:$N}=SA(queueMicrotask,!1),uc={x:!1,y:!1};function XA(){return uc.x||uc.y}function xB(o){return o==="x"||o==="y"?uc[o]?null:(uc[o]=!0,()=>{uc[o]=!1}):uc.x||uc.y?null:(uc.x=uc.y=!0,()=>{uc.x=uc.y=!1})}function JA(o,t){const a=vB(o),c=new AbortController,g={passive:!0,...t,signal:c.signal};return[a,g,()=>c.abort()]}function uP(o){return!(o.pointerType==="touch"||XA())}function _B(o,t,a={}){const[c,g,N]=JA(o,a),b=d=>{if(!uP(d))return;const{target:A}=d,k=t(A,d);if(typeof k!="function"||!A)return;const O=B=>{uP(B)&&(k(B),A.removeEventListener("pointerleave",O))};A.addEventListener("pointerleave",O,g)};return c.forEach(d=>{d.addEventListener("pointerenter",b,g)}),N}const QA=(o,t)=>t?o===t?!0:QA(o,t.parentElement):!1,qN=o=>o.pointerType==="mouse"?typeof o.button!="number"||o.button<=0:o.isPrimary!==!1,wB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CB(o){return wB.has(o.tagName)||o.tabIndex!==-1}const Gx=new WeakSet;function dP(o){return t=>{t.key==="Enter"&&o(t)}}function nC(o,t){o.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const NB=(o,t)=>{const a=o.currentTarget;if(!a)return;const c=dP(()=>{if(Gx.has(a))return;nC(a,"down");const g=dP(()=>{nC(a,"up")}),N=()=>nC(a,"cancel");a.addEventListener("keyup",g,t),a.addEventListener("blur",N,t)});a.addEventListener("keydown",c,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",c),t)};function hP(o){return qN(o)&&!XA()}function SB(o,t,a={}){const[c,g,N]=JA(o,a),b=d=>{const A=d.currentTarget;if(!hP(d))return;Gx.add(A);const k=t(A,d),O=(ie,pe)=>{window.removeEventListener("pointerup",B),window.removeEventListener("pointercancel",W),Gx.has(A)&&Gx.delete(A),hP(ie)&&typeof k=="function"&&k(ie,{success:pe})},B=ie=>{O(ie,A===window||A===document||a.useGlobalTarget||QA(A,ie.target))},W=ie=>{O(ie,!1)};window.addEventListener("pointerup",B,g),window.addEventListener("pointercancel",W,g)};return c.forEach(d=>{(a.useGlobalTarget?window:d).addEventListener("pointerdown",b,g),YA(d)&&(d.addEventListener("focus",k=>NB(k,g)),!CB(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),N}function ek(o){return hA(o)&&"ownerSVGElement"in o}function EB(o){return ek(o)&&o.tagName==="svg"}const La=o=>!!(o&&o.getVelocity),DB=[...GA,Ns,yh],TB=o=>DB.find(HA(o)),HN=oe.createContext({transformPagePoint:o=>o,isStatic:!1,reducedMotion:"never"});class PB extends oe.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const c=a.offsetParent,g=YA(c)&&c.offsetWidth||0,N=this.props.sizeRef.current;N.height=a.offsetHeight||0,N.width=a.offsetWidth||0,N.top=a.offsetTop,N.left=a.offsetLeft,N.right=g-N.width-N.left}return null}componentDidUpdate(){}render(){return this.props.children}}function jB({children:o,isPresent:t,anchorX:a,root:c}){const g=oe.useId(),N=oe.useRef(null),b=oe.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=oe.useContext(HN);return oe.useInsertionEffect(()=>{const{width:A,height:k,top:O,left:B,right:W}=b.current;if(t||!N.current||!A||!k)return;const ie=a==="left"?`left: ${B}`:`right: ${W}`;N.current.dataset.motionPopId=g;const pe=document.createElement("style");d&&(pe.nonce=d);const Oe=c??document.head;return Oe.appendChild(pe),pe.sheet&&pe.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${k}px !important;
            ${ie}px !important;
            top: ${O}px !important;
          }
        `),()=>{Oe.contains(pe)&&Oe.removeChild(pe)}},[t]),nd.jsx(PB,{isPresent:t,childRef:N,sizeRef:b,children:oe.cloneElement(o,{ref:N})})}const AB=({children:o,initial:t,isPresent:a,onExitComplete:c,custom:g,presenceAffectsLayout:N,mode:b,anchorX:d,root:A})=>{const k=wN(kB),O=oe.useId();let B=!0,W=oe.useMemo(()=>(B=!1,{id:O,initial:t,isPresent:a,custom:g,onExitComplete:ie=>{k.set(ie,!0);for(const pe of k.values())if(!pe)return;c&&c()},register:ie=>(k.set(ie,!1),()=>k.delete(ie))}),[a,k,c]);return N&&B&&(W={...W}),oe.useMemo(()=>{k.forEach((ie,pe)=>k.set(pe,!1))},[a]),oe.useEffect(()=>{!a&&!k.size&&c&&c()},[a]),b==="popLayout"&&(o=nd.jsx(jB,{isPresent:a,anchorX:d,root:A,children:o})),nd.jsx(f0.Provider,{value:W,children:o})};function kB(){return new Map}function tk(o=!0){const t=oe.useContext(f0);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:c,register:g}=t,N=oe.useId();oe.useEffect(()=>{if(o)return g(N)},[o]);const b=oe.useCallback(()=>o&&c&&c(N),[N,c,o]);return!a&&c?[!1,b]:[!0]}const Rx=o=>o.key||"";function fP(o){const t=[];return oe.Children.forEach(o,a=>{oe.isValidElement(a)&&t.push(a)}),t}const fp=({children:o,custom:t,initial:a=!0,onExitComplete:c,presenceAffectsLayout:g=!0,mode:N="sync",propagate:b=!1,anchorX:d="left",root:A})=>{const[k,O]=tk(b),B=oe.useMemo(()=>fP(o),[o]),W=b&&!k?[]:B.map(Rx),ie=oe.useRef(!0),pe=oe.useRef(B),Oe=wN(()=>new Map),[Se,Pe]=oe.useState(B),[De,Ce]=oe.useState(B);uA(()=>{ie.current=!1,pe.current=B;for(let Ze=0;Ze<De.length;Ze++){const tt=Rx(De[Ze]);W.includes(tt)?Oe.delete(tt):Oe.get(tt)!==!0&&Oe.set(tt,!1)}},[De,W.length,W.join("-")]);const ze=[];if(B!==Se){let Ze=[...B];for(let tt=0;tt<De.length;tt++){const ut=De[tt],Rt=Rx(ut);W.includes(Rt)||(Ze.splice(tt,0,ut),ze.push(ut))}return N==="wait"&&ze.length&&(Ze=ze),Ce(fP(Ze)),Pe(B),null}N==="wait"&&De.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:Re}=oe.useContext(_N);return nd.jsx(nd.Fragment,{children:De.map(Ze=>{const tt=Rx(Ze),ut=b&&!k?!1:B===De||W.includes(tt),Rt=()=>{if(Oe.has(tt))Oe.set(tt,!0);else return;let zt=!0;Oe.forEach(fn=>{fn||(zt=!1)}),zt&&(Re==null||Re(),Ce(pe.current),b&&(O==null||O()),c&&c())};return nd.jsx(AB,{isPresent:ut,initial:!ie.current||a?void 0:!1,custom:t,presenceAffectsLayout:g,mode:N,root:A,onExitComplete:ut?void 0:Rt,anchorX:d,children:Ze},tt)})})},nk=oe.createContext({strict:!1}),mP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yp={};for(const o in mP)yp[o]={isEnabled:t=>mP[o].some(a=>!!t[a])};function MB(o){for(const t in o)yp[t]={...yp[t],...o[t]}}const RB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function n0(o){return o.startsWith("while")||o.startsWith("drag")&&o!=="draggable"||o.startsWith("layout")||o.startsWith("onTap")||o.startsWith("onPan")||o.startsWith("onLayout")||RB.has(o)}let rk=o=>!n0(o);function LB(o){typeof o=="function"&&(rk=t=>t.startsWith("on")?!n0(t):o(t))}try{LB(require("@emotion/is-prop-valid").default)}catch{}function IB(o,t,a){const c={};for(const g in o)g==="values"&&typeof o.values=="object"||(rk(g)||a===!0&&n0(g)||!t&&!n0(g)||o.draggable&&g.startsWith("onDrag"))&&(c[g]=o[g]);return c}const m0=oe.createContext({});function p0(o){return o!==null&&typeof o=="object"&&typeof o.start=="function"}function Zv(o){return typeof o=="string"||Array.isArray(o)}const GN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WN=["initial",...GN];function g0(o){return p0(o.animate)||WN.some(t=>Zv(o[t]))}function ik(o){return!!(g0(o)||o.variants)}function VB(o,t){if(g0(o)){const{initial:a,animate:c}=o;return{initial:a===!1||Zv(a)?a:void 0,animate:Zv(c)?c:void 0}}return o.inherit!==!1?t:{}}function OB(o){const{initial:t,animate:a}=VB(o,oe.useContext(m0));return oe.useMemo(()=>({initial:t,animate:a}),[pP(t),pP(a)])}function pP(o){return Array.isArray(o)?o.join(" "):o}const Kv={};function zB(o){for(const t in o)Kv[t]=o[t],AN(t)&&(Kv[t].isCSSVariable=!0)}function sk(o,{layout:t,layoutId:a}){return Ep.has(o)||o.startsWith("origin")||(t||a!==void 0)&&(!!Kv[o]||o==="opacity")}const BB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FB=Sp.length;function UB(o,t,a){let c="",g=!0;for(let N=0;N<FB;N++){const b=Sp[N],d=o[b];if(d===void 0)continue;let A=!0;if(typeof d=="number"?A=d===(b.startsWith("scale")?1:0):A=parseFloat(d)===0,!A||a){const k=KA(d,UN[b]);if(!A){g=!1;const O=BB[b]||b;c+=`${O}(${k}) `}a&&(t[b]=k)}}return c=c.trim(),a?c=a(t,g?"":c):g&&(c="none"),c}function ZN(o,t,a){const{style:c,vars:g,transformOrigin:N}=o;let b=!1,d=!1;for(const A in t){const k=t[A];if(Ep.has(A)){b=!0;continue}else if(AN(A)){g[A]=k;continue}else{const O=KA(k,UN[A]);A.startsWith("origin")?(d=!0,N[A]=O):c[A]=O}}if(t.transform||(b||a?c.transform=UB(t,o.transform,a):c.transform&&(c.transform="none")),d){const{originX:A="50%",originY:k="50%",originZ:O=0}=N;c.transformOrigin=`${A} ${k} ${O}`}}const KN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ak(o,t,a){for(const c in t)!La(t[c])&&!sk(c,a)&&(o[c]=t[c])}function $B({transformTemplate:o},t){return oe.useMemo(()=>{const a=KN();return ZN(a,t,o),Object.assign({},a.vars,a.style)},[t])}function qB(o,t){const a=o.style||{},c={};return ak(c,a,o),Object.assign(c,$B(o,t)),c}function HB(o,t){const a={},c=qB(o,t);return o.drag&&o.dragListener!==!1&&(a.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=o.drag===!0?"none":`pan-${o.drag==="x"?"y":"x"}`),o.tabIndex===void 0&&(o.onTap||o.onTapStart||o.whileTap)&&(a.tabIndex=0),a.style=c,a}const GB={offset:"stroke-dashoffset",array:"stroke-dasharray"},WB={offset:"strokeDashoffset",array:"strokeDasharray"};function ZB(o,t,a=1,c=0,g=!0){o.pathLength=1;const N=g?GB:WB;o[N.offset]=Fn.transform(-c);const b=Fn.transform(t),d=Fn.transform(a);o[N.array]=`${b} ${d}`}function ok(o,{attrX:t,attrY:a,attrScale:c,pathLength:g,pathSpacing:N=1,pathOffset:b=0,...d},A,k,O){if(ZN(o,d,k),A){o.style.viewBox&&(o.attrs.viewBox=o.style.viewBox);return}o.attrs=o.style,o.style={};const{attrs:B,style:W}=o;B.transform&&(W.transform=B.transform,delete B.transform),(W.transform||B.transformOrigin)&&(W.transformOrigin=B.transformOrigin??"50% 50%",delete B.transformOrigin),W.transform&&(W.transformBox=(O==null?void 0:O.transformBox)??"fill-box",delete B.transformBox),t!==void 0&&(B.x=t),a!==void 0&&(B.y=a),c!==void 0&&(B.scale=c),g!==void 0&&ZB(B,g,N,b,!1)}const lk=()=>({...KN(),attrs:{}}),ck=o=>typeof o=="string"&&o.toLowerCase()==="svg";function KB(o,t,a,c){const g=oe.useMemo(()=>{const N=lk();return ok(N,t,ck(c),o.transformTemplate,o.style),{...N.attrs,style:{...N.style}}},[t]);if(o.style){const N={};ak(N,o.style,o),g.style={...N,...g.style}}return g}const YB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YN(o){return typeof o!="string"||o.includes("-")?!1:!!(YB.indexOf(o)>-1||/[A-Z]/u.test(o))}function XB(o,t,a,{latestValues:c},g,N=!1){const d=(YN(o)?KB:HB)(t,c,g,o),A=IB(t,typeof o=="string",N),k=o!==oe.Fragment?{...A,...d,ref:a}:{},{children:O}=t,B=oe.useMemo(()=>La(O)?O.get():O,[O]);return oe.createElement(o,{...k,children:B})}function gP(o){const t=[{},{}];return o==null||o.values.forEach((a,c)=>{t[0][c]=a.get(),t[1][c]=a.getVelocity()}),t}function XN(o,t,a,c){if(typeof t=="function"){const[g,N]=gP(c);t=t(a!==void 0?a:o.custom,g,N)}if(typeof t=="string"&&(t=o.variants&&o.variants[t]),typeof t=="function"){const[g,N]=gP(c);t=t(a!==void 0?a:o.custom,g,N)}return t}function Wx(o){return La(o)?o.get():o}function JB({scrapeMotionValuesFromProps:o,createRenderState:t},a,c,g){return{latestValues:QB(a,c,g,o),renderState:t()}}function QB(o,t,a,c){const g={},N=c(o,{});for(const W in N)g[W]=Wx(N[W]);let{initial:b,animate:d}=o;const A=g0(o),k=ik(o);t&&k&&!A&&o.inherit!==!1&&(b===void 0&&(b=t.initial),d===void 0&&(d=t.animate));let O=a?a.initial===!1:!1;O=O||b===!1;const B=O?d:b;if(B&&typeof B!="boolean"&&!p0(B)){const W=Array.isArray(B)?B:[B];for(let ie=0;ie<W.length;ie++){const pe=XN(o,W[ie]);if(pe){const{transitionEnd:Oe,transition:Se,...Pe}=pe;for(const De in Pe){let Ce=Pe[De];if(Array.isArray(Ce)){const ze=O?Ce.length-1:0;Ce=Ce[ze]}Ce!==null&&(g[De]=Ce)}for(const De in Oe)g[De]=Oe[De]}}}return g}const uk=o=>(t,a)=>{const c=oe.useContext(m0),g=oe.useContext(f0),N=()=>JB(o,t,c,g);return a?N():wN(N)};function JN(o,t,a){var N;const{style:c}=o,g={};for(const b in c)(La(c[b])||t.style&&La(t.style[b])||sk(b,o)||((N=a==null?void 0:a.getValue(b))==null?void 0:N.liveStyle)!==void 0)&&(g[b]=c[b]);return g}const eF=uk({scrapeMotionValuesFromProps:JN,createRenderState:KN});function dk(o,t,a){const c=JN(o,t,a);for(const g in o)if(La(o[g])||La(t[g])){const N=Sp.indexOf(g)!==-1?"attr"+g.charAt(0).toUpperCase()+g.substring(1):g;c[N]=o[g]}return c}const tF=uk({scrapeMotionValuesFromProps:dk,createRenderState:lk}),nF=Symbol.for("motionComponentSymbol");function lp(o){return o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}function rF(o,t,a){return oe.useCallback(c=>{c&&o.onMount&&o.onMount(c),t&&(c?t.mount(c):t.unmount()),a&&(typeof a=="function"?a(c):lp(a)&&(a.current=c))},[t])}const QN=o=>o.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iF="framerAppearId",hk="data-"+QN(iF),fk=oe.createContext({});function sF(o,t,a,c,g){var Oe,Se;const{visualElement:N}=oe.useContext(m0),b=oe.useContext(nk),d=oe.useContext(f0),A=oe.useContext(HN).reducedMotion,k=oe.useRef(null);c=c||b.renderer,!k.current&&c&&(k.current=c(o,{visualState:t,parent:N,props:a,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:A}));const O=k.current,B=oe.useContext(fk);O&&!O.projection&&g&&(O.type==="html"||O.type==="svg")&&aF(k.current,a,g,B);const W=oe.useRef(!1);oe.useInsertionEffect(()=>{O&&W.current&&O.update(a,d)});const ie=a[hk],pe=oe.useRef(!!ie&&!((Oe=window.MotionHandoffIsComplete)!=null&&Oe.call(window,ie))&&((Se=window.MotionHasOptimisedAnimation)==null?void 0:Se.call(window,ie)));return uA(()=>{O&&(W.current=!0,window.MotionIsMounted=!0,O.updateFeatures(),O.scheduleRenderMicrotask(),pe.current&&O.animationState&&O.animationState.animateChanges())}),oe.useEffect(()=>{O&&(!pe.current&&O.animationState&&O.animationState.animateChanges(),pe.current&&(queueMicrotask(()=>{var Pe;(Pe=window.MotionHandoffMarkAsComplete)==null||Pe.call(window,ie)}),pe.current=!1),O.enteringChildren=void 0)}),O}function aF(o,t,a,c){const{layoutId:g,layout:N,drag:b,dragConstraints:d,layoutScroll:A,layoutRoot:k,layoutCrossfade:O}=t;o.projection=new a(o.latestValues,t["data-framer-portal-id"]?void 0:mk(o.parent)),o.projection.setOptions({layoutId:g,layout:N,alwaysMeasureLayout:!!b||d&&lp(d),visualElement:o,animationType:typeof N=="string"?N:"both",initialPromotionConfig:c,crossfade:O,layoutScroll:A,layoutRoot:k})}function mk(o){if(o)return o.options.allowProjection!==!1?o.projection:mk(o.parent)}function rC(o,{forwardMotionProps:t=!1}={},a,c){a&&MB(a);const g=YN(o)?tF:eF;function N(d,A){let k;const O={...oe.useContext(HN),...d,layoutId:oF(d)},{isStatic:B}=O,W=OB(d),ie=g(d,B);if(!B&&CN){lF(O,a);const pe=cF(O);k=pe.MeasureLayout,W.visualElement=sF(o,ie,O,c,pe.ProjectionNode)}return nd.jsxs(m0.Provider,{value:W,children:[k&&W.visualElement?nd.jsx(k,{visualElement:W.visualElement,...O}):null,XB(o,d,rF(ie,W.visualElement,A),ie,B,t)]})}N.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const b=oe.forwardRef(N);return b[nF]=o,b}function oF({layoutId:o}){const t=oe.useContext(_N).id;return t&&o!==void 0?t+"-"+o:o}function lF(o,t){const a=oe.useContext(nk).strict;if(t&&a){const c="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";o.ignoreStrict?Cp(!1,c,"lazy-strict-mode"):id(!1,c,"lazy-strict-mode")}}function cF(o){const{drag:t,layout:a}=yp;if(!t&&!a)return{};const c={...t,...a};return{MeasureLayout:t!=null&&t.isEnabled(o)||a!=null&&a.isEnabled(o)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}function uF(o,t){if(typeof Proxy>"u")return rC;const a=new Map,c=(N,b)=>rC(N,b,o,t),g=(N,b)=>(TN(!1,"motion() is deprecated. Use motion.create() instead."),c(N,b));return new Proxy(g,{get:(N,b)=>b==="create"?c:(a.has(b)||a.set(b,rC(b,void 0,o,t)),a.get(b))})}function pk({top:o,left:t,right:a,bottom:c}){return{x:{min:t,max:a},y:{min:o,max:c}}}function dF({x:o,y:t}){return{top:t.min,right:o.max,bottom:t.max,left:o.min}}function hF(o,t){if(!t)return o;const a=t({x:o.left,y:o.top}),c=t({x:o.right,y:o.bottom});return{top:a.y,left:a.x,bottom:c.y,right:c.x}}function iC(o){return o===void 0||o===1}function XC({scale:o,scaleX:t,scaleY:a}){return!iC(o)||!iC(t)||!iC(a)}function Cf(o){return XC(o)||gk(o)||o.z||o.rotate||o.rotateX||o.rotateY||o.skewX||o.skewY}function gk(o){return vP(o.x)||vP(o.y)}function vP(o){return o&&o!=="0%"}function r0(o,t,a){const c=o-a,g=t*c;return a+g}function yP(o,t,a,c,g){return g!==void 0&&(o=r0(o,g,c)),r0(o,a,c)+t}function JC(o,t=0,a=1,c,g){o.min=yP(o.min,t,a,c,g),o.max=yP(o.max,t,a,c,g)}function vk(o,{x:t,y:a}){JC(o.x,t.translate,t.scale,t.originPoint),JC(o.y,a.translate,a.scale,a.originPoint)}const bP=.999999999999,xP=1.0000000000001;function fF(o,t,a,c=!1){const g=a.length;if(!g)return;t.x=t.y=1;let N,b;for(let d=0;d<g;d++){N=a[d],b=N.projectionDelta;const{visualElement:A}=N.options;A&&A.props.style&&A.props.style.display==="contents"||(c&&N.options.layoutScroll&&N.scroll&&N!==N.root&&up(o,{x:-N.scroll.offset.x,y:-N.scroll.offset.y}),b&&(t.x*=b.x.scale,t.y*=b.y.scale,vk(o,b)),c&&Cf(N.latestValues)&&up(o,N.latestValues))}t.x<xP&&t.x>bP&&(t.x=1),t.y<xP&&t.y>bP&&(t.y=1)}function cp(o,t){o.min=o.min+t,o.max=o.max+t}function _P(o,t,a,c,g=.5){const N=Yi(o.min,o.max,g);JC(o,t,a,N,c)}function up(o,t){_P(o.x,t.x,t.scaleX,t.scale,t.originX),_P(o.y,t.y,t.scaleY,t.scale,t.originY)}function yk(o,t){return pk(hF(o.getBoundingClientRect(),t))}function mF(o,t,a){const c=yk(o,a),{scroll:g}=t;return g&&(cp(c.x,g.offset.x),cp(c.y,g.offset.y)),c}const wP=()=>({translate:0,scale:1,origin:0,originPoint:0}),dp=()=>({x:wP(),y:wP()}),CP=()=>({min:0,max:0}),hs=()=>({x:CP(),y:CP()}),QC={current:null},bk={current:!1};function pF(){if(bk.current=!0,!!CN)if(window.matchMedia){const o=window.matchMedia("(prefers-reduced-motion)"),t=()=>QC.current=o.matches;o.addEventListener("change",t),t()}else QC.current=!1}const gF=new WeakMap;function vF(o,t,a){for(const c in t){const g=t[c],N=a[c];if(La(g))o.addValue(c,g);else if(La(N))o.addValue(c,vp(g,{owner:o}));else if(N!==g)if(o.hasValue(c)){const b=o.getValue(c);b.liveStyle===!0?b.jump(g):b.hasAnimated||b.set(g)}else{const b=o.getStaticValue(c);o.addValue(c,vp(b!==void 0?b:g,{owner:o}))}}for(const c in a)t[c]===void 0&&o.removeValue(c);return t}const NP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yF{scrapeMotionValuesFromProps(t,a,c){return{}}constructor({parent:t,props:a,presenceContext:c,reducedMotionConfig:g,blockInitialAnimation:N,visualState:b},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=BN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const W=go.now();this.renderScheduledAt<W&&(this.renderScheduledAt=W,zi.render(this.render,!1,!0))};const{latestValues:A,renderState:k}=b;this.latestValues=A,this.baseTarget={...A},this.initialValues=a.initial?{...A}:{},this.renderState=k,this.parent=t,this.props=a,this.presenceContext=c,this.depth=t?t.depth+1:0,this.reducedMotionConfig=g,this.options=d,this.blockInitialAnimation=!!N,this.isControllingVariants=g0(a),this.isVariantNode=ik(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:O,...B}=this.scrapeMotionValuesFromProps(a,{},this);for(const W in B){const ie=B[W];A[W]!==void 0&&La(ie)&&ie.set(A[W])}}mount(t){var a;this.current=t,gF.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((c,g)=>this.bindToMotionValue(g,c)),bk.current||pF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QC.current,TN(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected.","reduced-motion-disabled"),(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),vh(this.notifyUpdate),vh(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const c=this.features[a];c&&(c.unmount(),c.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const c=Ep.has(t);c&&this.onBindTransform&&this.onBindTransform();const g=a.on("change",b=>{this.latestValues[t]=b,this.props.onUpdate&&zi.preRender(this.notifyUpdate),c&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let N;window.MotionCheckAppearSync&&(N=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{g(),N&&N(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yp){const a=yp[t];if(!a)continue;const{isEnabled:c,Feature:g}=a;if(!this.features[t]&&g&&c(this.props)&&(this.features[t]=new g(this)),this.features[t]){const N=this.features[t];N.isMounted?N.update():(N.mount(),N.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let c=0;c<NP.length;c++){const g=NP[c];this.propEventSubscriptions[g]&&(this.propEventSubscriptions[g](),delete this.propEventSubscriptions[g]);const N="on"+g,b=t[N];b&&(this.propEventSubscriptions[g]=this.on(g,b))}this.prevMotionValues=vF(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const c=this.values.get(t);a!==c&&(c&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let c=this.values.get(t);return c===void 0&&a!==void 0&&(c=vp(a===null?void 0:a,{owner:this}),this.addValue(t,c)),c}readValue(t,a){let c=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return c!=null&&(typeof c=="string"&&(dA(c)||fA(c))?c=parseFloat(c):!TB(c)&&yh.test(a)&&(c=ZA(t,a)),this.setBaseTarget(t,La(c)?c.get():c)),La(c)?c.get():c}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){var N;const{initial:a}=this.props;let c;if(typeof a=="string"||typeof a=="object"){const b=XN(this.props,a,(N=this.presenceContext)==null?void 0:N.custom);b&&(c=b[t])}if(a&&c!==void 0)return c;const g=this.getBaseTargetFromProps(this.props,t);return g!==void 0&&!La(g)?g:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new DN),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}scheduleRenderMicrotask(){$N.render(this.render)}}class xk extends yF{constructor(){super(...arguments),this.KeyframeResolver=gB}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:c}){delete a[t],delete c[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;La(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function _k(o,{style:t,vars:a},c,g){const N=o.style;let b;for(b in t)N[b]=t[b];g==null||g.applyProjectionStyles(N,c);for(b in a)N.setProperty(b,a[b])}function bF(o){return window.getComputedStyle(o)}class xF extends xk{constructor(){super(...arguments),this.type="html",this.renderInstance=_k}readValueFromInstance(t,a){var c;if(Ep.has(a))return(c=this.projection)!=null&&c.isProjecting?qC(a):R4(t,a);{const g=bF(t),N=(AN(a)?g.getPropertyValue(a):g[a])||0;return typeof N=="string"?N.trim():N}}measureInstanceViewportBox(t,{transformPagePoint:a}){return yk(t,a)}build(t,a,c){ZN(t,a,c.transformTemplate)}scrapeMotionValuesFromProps(t,a,c){return JN(t,a,c)}}const wk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _F(o,t,a,c){_k(o,t,void 0,c);for(const g in t.attrs)o.setAttribute(wk.has(g)?g:QN(g),t.attrs[g])}class wF extends xk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hs}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(Ep.has(a)){const c=WA(a);return c&&c.default||0}return a=wk.has(a)?a:QN(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,c){return dk(t,a,c)}build(t,a,c){ok(t,a,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(t,a,c,g){_F(t,a,c,g)}mount(t){this.isSVGTag=ck(t.tagName),super.mount(t)}}const CF=(o,t)=>YN(o)?new wF(t):new xF(t,{allowProjection:o!==oe.Fragment});function mp(o,t,a){const c=o.getProps();return XN(c,t,a!==void 0?a:c.custom,o)}const eN=o=>Array.isArray(o);function NF(o,t,a){o.hasValue(t)?o.getValue(t).set(a):o.addValue(t,vp(a))}function SF(o){return eN(o)?o[o.length-1]||0:o}function EF(o,t){const a=mp(o,t);let{transitionEnd:c={},transition:g={},...N}=a||{};N={...N,...c};for(const b in N){const d=SF(N[b]);NF(o,b,d)}}function DF(o){return!!(La(o)&&o.add)}function tN(o,t){const a=o.getValue("willChange");if(DF(a))return a.add(t);if(!a&&sd.WillChange){const c=new sd.WillChange("auto");o.addValue("willChange",c),c.add(t)}}function Ck(o){return o.props[hk]}const TF=o=>o!==null;function PF(o,{repeat:t,repeatType:a="loop"},c){const g=o.filter(TF),N=t&&a!=="loop"&&t%2===1?0:g.length-1;return g[N]}const jF={type:"spring",stiffness:500,damping:25,restSpeed:10},AF=o=>({type:"spring",stiffness:550,damping:o===0?2*Math.sqrt(550):30,restSpeed:10}),kF={type:"keyframes",duration:.8},MF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RF=(o,{keyframes:t})=>t.length>2?kF:Ep.has(o)?o.startsWith("scale")?AF(t[1]):jF:MF;function LF({when:o,delay:t,delayChildren:a,staggerChildren:c,staggerDirection:g,repeat:N,repeatType:b,repeatDelay:d,from:A,elapsed:k,...O}){return!!Object.keys(O).length}const eS=(o,t,a,c={},g,N)=>b=>{const d=FN(c,o)||{},A=d.delay||c.delay||0;let{elapsed:k=0}=c;k=k-fc(A);const O={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-k,onUpdate:W=>{t.set(W),d.onUpdate&&d.onUpdate(W)},onComplete:()=>{b(),d.onComplete&&d.onComplete()},name:o,motionValue:t,element:N?void 0:g};LF(d)||Object.assign(O,RF(o,O)),O.duration&&(O.duration=fc(O.duration)),O.repeatDelay&&(O.repeatDelay=fc(O.repeatDelay)),O.from!==void 0&&(O.keyframes[0]=O.from);let B=!1;if((O.type===!1||O.duration===0&&!O.repeatDelay)&&(KC(O),O.delay===0&&(B=!0)),(sd.instantAnimations||sd.skipAnimations)&&(B=!0,KC(O),O.delay=0),O.allowFlatten=!d.type&&!d.ease,B&&!N&&t.get()!==void 0){const W=PF(O.keyframes,d);if(W!==void 0){zi.update(()=>{O.onUpdate(W),O.onComplete()});return}}return d.isSync?new zN(O):new rB(O)};function IF({protectedKeys:o,needsAnimating:t},a){const c=o.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,c}function Nk(o,t,{delay:a=0,transitionOverride:c,type:g}={}){let{transition:N=o.getDefaultTransition(),transitionEnd:b,...d}=t;c&&(N=c);const A=[],k=g&&o.animationState&&o.animationState.getState()[g];for(const O in d){const B=o.getValue(O,o.latestValues[O]??null),W=d[O];if(W===void 0||k&&IF(k,O))continue;const ie={delay:a,...FN(N||{},O)},pe=B.get();if(pe!==void 0&&!B.isAnimating&&!Array.isArray(W)&&W===pe&&!ie.velocity)continue;let Oe=!1;if(window.MotionHandoffAnimation){const Pe=Ck(o);if(Pe){const De=window.MotionHandoffAnimation(Pe,O,zi);De!==null&&(ie.startTime=De,Oe=!0)}}tN(o,O),B.start(eS(O,B,W,o.shouldReduceMotion&&qA.has(O)?{type:!1}:ie,o,Oe));const Se=B.animation;Se&&A.push(Se)}return b&&Promise.all(A).then(()=>{zi.update(()=>{b&&EF(o,b)})}),A}function Sk(o,t,a,c=0,g=1){const N=Array.from(o).sort((k,O)=>k.sortNodePosition(O)).indexOf(t),b=o.size,d=(b-1)*c;return typeof a=="function"?a(N,b):g===1?N*c:d-N*c}function nN(o,t,a={}){var A;const c=mp(o,t,a.type==="exit"?(A=o.presenceContext)==null?void 0:A.custom:void 0);let{transition:g=o.getDefaultTransition()||{}}=c||{};a.transitionOverride&&(g=a.transitionOverride);const N=c?()=>Promise.all(Nk(o,c,a)):()=>Promise.resolve(),b=o.variantChildren&&o.variantChildren.size?(k=0)=>{const{delayChildren:O=0,staggerChildren:B,staggerDirection:W}=g;return VF(o,t,k,O,B,W,a)}:()=>Promise.resolve(),{when:d}=g;if(d){const[k,O]=d==="beforeChildren"?[N,b]:[b,N];return k().then(()=>O())}else return Promise.all([N(),b(a.delay)])}function VF(o,t,a=0,c=0,g=0,N=1,b){const d=[];for(const A of o.variantChildren)A.notify("AnimationStart",t),d.push(nN(A,t,{...b,delay:a+(typeof c=="function"?0:c)+Sk(o.variantChildren,A,c,g,N)}).then(()=>A.notify("AnimationComplete",t)));return Promise.all(d)}function OF(o,t,a={}){o.notify("AnimationStart",t);let c;if(Array.isArray(t)){const g=t.map(N=>nN(o,N,a));c=Promise.all(g)}else if(typeof t=="string")c=nN(o,t,a);else{const g=typeof t=="function"?mp(o,t,a.custom):t;c=Promise.all(Nk(o,g,a))}return c.then(()=>{o.notify("AnimationComplete",t)})}function Ek(o,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==o.length)return!1;for(let c=0;c<a;c++)if(t[c]!==o[c])return!1;return!0}const zF=WN.length;function Dk(o){if(!o)return;if(!o.isControllingVariants){const a=o.parent?Dk(o.parent)||{}:{};return o.props.initial!==void 0&&(a.initial=o.props.initial),a}const t={};for(let a=0;a<zF;a++){const c=WN[a],g=o.props[c];(Zv(g)||g===!1)&&(t[c]=g)}return t}const BF=[...GN].reverse(),FF=GN.length;function UF(o){return t=>Promise.all(t.map(({animation:a,options:c})=>OF(o,a,c)))}function $F(o){let t=UF(o),a=SP(),c=!0;const g=A=>(k,O)=>{var W;const B=mp(o,O,A==="exit"?(W=o.presenceContext)==null?void 0:W.custom:void 0);if(B){const{transition:ie,transitionEnd:pe,...Oe}=B;k={...k,...Oe,...pe}}return k};function N(A){t=A(o)}function b(A){const{props:k}=o,O=Dk(o.parent)||{},B=[],W=new Set;let ie={},pe=1/0;for(let Se=0;Se<FF;Se++){const Pe=BF[Se],De=a[Pe],Ce=k[Pe]!==void 0?k[Pe]:O[Pe],ze=Zv(Ce),Re=Pe===A?De.isActive:null;Re===!1&&(pe=Se);let Ze=Ce===O[Pe]&&Ce!==k[Pe]&&ze;if(Ze&&c&&o.manuallyAnimateOnMount&&(Ze=!1),De.protectedKeys={...ie},!De.isActive&&Re===null||!Ce&&!De.prevProp||p0(Ce)||typeof Ce=="boolean")continue;const tt=qF(De.prevProp,Ce);let ut=tt||Pe===A&&De.isActive&&!Ze&&ze||Se>pe&&ze,Rt=!1;const zt=Array.isArray(Ce)?Ce:[Ce];let fn=zt.reduce(g(Pe),{});Re===!1&&(fn={});const{prevResolvedValues:lt={}}=De,ct={...lt,...fn},ht=Ct=>{ut=!0,W.has(Ct)&&(Rt=!0,W.delete(Ct)),De.needsAnimating[Ct]=!0;const pn=o.getValue(Ct);pn&&(pn.liveStyle=!1)};for(const Ct in ct){const pn=fn[Ct],Sn=lt[Ct];if(ie.hasOwnProperty(Ct))continue;let Wt=!1;eN(pn)&&eN(Sn)?Wt=!Ek(pn,Sn):Wt=pn!==Sn,Wt?pn!=null?ht(Ct):W.add(Ct):pn!==void 0&&W.has(Ct)?ht(Ct):De.protectedKeys[Ct]=!0}De.prevProp=Ce,De.prevResolvedValues=fn,De.isActive&&(ie={...ie,...fn}),c&&o.blockInitialAnimation&&(ut=!1);const $t=Ze&&tt;ut&&(!$t||Rt)&&B.push(...zt.map(Ct=>{const pn={type:Pe};if(typeof Ct=="string"&&c&&!$t&&o.manuallyAnimateOnMount&&o.parent){const{parent:Sn}=o,Wt=mp(Sn,Ct);if(Sn.enteringChildren&&Wt){const{delayChildren:Yn}=Wt.transition||{};pn.delay=Sk(Sn.enteringChildren,o,Yn)}}return{animation:Ct,options:pn}}))}if(W.size){const Se={};if(typeof k.initial!="boolean"){const Pe=mp(o,Array.isArray(k.initial)?k.initial[0]:k.initial);Pe&&Pe.transition&&(Se.transition=Pe.transition)}W.forEach(Pe=>{const De=o.getBaseTarget(Pe),Ce=o.getValue(Pe);Ce&&(Ce.liveStyle=!0),Se[Pe]=De??null}),B.push({animation:Se})}let Oe=!!B.length;return c&&(k.initial===!1||k.initial===k.animate)&&!o.manuallyAnimateOnMount&&(Oe=!1),c=!1,Oe?t(B):Promise.resolve()}function d(A,k){var B;if(a[A].isActive===k)return Promise.resolve();(B=o.variantChildren)==null||B.forEach(W=>{var ie;return(ie=W.animationState)==null?void 0:ie.setActive(A,k)}),a[A].isActive=k;const O=b(A);for(const W in a)a[W].protectedKeys={};return O}return{animateChanges:b,setActive:d,setAnimateFunction:N,getState:()=>a,reset:()=>{a=SP(),c=!0}}}function qF(o,t){return typeof t=="string"?t!==o:Array.isArray(t)?!Ek(t,o):!1}function _f(o=!1){return{isActive:o,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SP(){return{animate:_f(!0),whileInView:_f(),whileHover:_f(),whileTap:_f(),whileDrag:_f(),whileFocus:_f(),exit:_f()}}class xh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class HF extends xh{constructor(t){super(t),t.animationState||(t.animationState=$F(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();p0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let GF=0;class WF extends xh{constructor(){super(...arguments),this.id=GF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const g=this.node.animationState.setActive("exit",!t);a&&!t&&g.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ZF={animation:{Feature:HF},exit:{Feature:WF}};function Yv(o,t,a,c={passive:!0}){return o.addEventListener(t,a,c),()=>o.removeEventListener(t,a)}function oy(o){return{point:{x:o.pageX,y:o.pageY}}}const KF=o=>t=>qN(t)&&o(t,oy(t));function Iv(o,t,a,c){return Yv(o,t,KF(a),c)}const Tk=1e-4,YF=1-Tk,XF=1+Tk,Pk=.01,JF=0-Pk,QF=0+Pk;function Ja(o){return o.max-o.min}function e6(o,t,a){return Math.abs(o-t)<=a}function EP(o,t,a,c=.5){o.origin=c,o.originPoint=Yi(t.min,t.max,o.origin),o.scale=Ja(a)/Ja(t),o.translate=Yi(a.min,a.max,o.origin)-o.originPoint,(o.scale>=YF&&o.scale<=XF||isNaN(o.scale))&&(o.scale=1),(o.translate>=JF&&o.translate<=QF||isNaN(o.translate))&&(o.translate=0)}function Vv(o,t,a,c){EP(o.x,t.x,a.x,c?c.originX:void 0),EP(o.y,t.y,a.y,c?c.originY:void 0)}function DP(o,t,a){o.min=a.min+t.min,o.max=o.min+Ja(t)}function t6(o,t,a){DP(o.x,t.x,a.x),DP(o.y,t.y,a.y)}function TP(o,t,a){o.min=t.min-a.min,o.max=o.min+Ja(t)}function Ov(o,t,a){TP(o.x,t.x,a.x),TP(o.y,t.y,a.y)}function vl(o){return[o("x"),o("y")]}const jk=({current:o})=>o?o.ownerDocument.defaultView:null,PP=(o,t)=>Math.abs(o-t);function n6(o,t){const a=PP(o.x,t.x),c=PP(o.y,t.y);return Math.sqrt(a**2+c**2)}class Ak{constructor(t,a,{transformPagePoint:c,contextWindow:g=window,dragSnapToOrigin:N=!1,distanceThreshold:b=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=aC(this.lastMoveEventInfo,this.history),ie=this.startEvent!==null,pe=n6(W.offset,{x:0,y:0})>=this.distanceThreshold;if(!ie&&!pe)return;const{point:Oe}=W,{timestamp:Se}=ma;this.history.push({...Oe,timestamp:Se});const{onStart:Pe,onMove:De}=this.handlers;ie||(Pe&&Pe(this.lastMoveEvent,W),this.startEvent=this.lastMoveEvent),De&&De(this.lastMoveEvent,W)},this.handlePointerMove=(W,ie)=>{this.lastMoveEvent=W,this.lastMoveEventInfo=sC(ie,this.transformPagePoint),zi.update(this.updatePoint,!0)},this.handlePointerUp=(W,ie)=>{this.end();const{onEnd:pe,onSessionEnd:Oe,resumeAnimation:Se}=this.handlers;if(this.dragSnapToOrigin&&Se&&Se(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Pe=aC(W.type==="pointercancel"?this.lastMoveEventInfo:sC(ie,this.transformPagePoint),this.history);this.startEvent&&pe&&pe(W,Pe),Oe&&Oe(W,Pe)},!qN(t))return;this.dragSnapToOrigin=N,this.handlers=a,this.transformPagePoint=c,this.distanceThreshold=b,this.contextWindow=g||window;const d=oy(t),A=sC(d,this.transformPagePoint),{point:k}=A,{timestamp:O}=ma;this.history=[{...k,timestamp:O}];const{onSessionStart:B}=a;B&&B(t,aC(A,this.history)),this.removeListeners=iy(Iv(this.contextWindow,"pointermove",this.handlePointerMove),Iv(this.contextWindow,"pointerup",this.handlePointerUp),Iv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vh(this.updatePoint)}}function sC(o,t){return t?{point:t(o.point)}:o}function jP(o,t){return{x:o.x-t.x,y:o.y-t.y}}function aC({point:o},t){return{point:o,delta:jP(o,kk(t)),offset:jP(o,r6(t)),velocity:i6(t,.1)}}function r6(o){return o[0]}function kk(o){return o[o.length-1]}function i6(o,t){if(o.length<2)return{x:0,y:0};let a=o.length-1,c=null;const g=kk(o);for(;a>=0&&(c=o[a],!(g.timestamp-c.timestamp>fc(t)));)a--;if(!c)return{x:0,y:0};const N=tu(g.timestamp-c.timestamp);if(N===0)return{x:0,y:0};const b={x:(g.x-c.x)/N,y:(g.y-c.y)/N};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function s6(o,{min:t,max:a},c){return t!==void 0&&o<t?o=c?Yi(t,o,c.min):Math.max(o,t):a!==void 0&&o>a&&(o=c?Yi(a,o,c.max):Math.min(o,a)),o}function AP(o,t,a){return{min:t!==void 0?o.min+t:void 0,max:a!==void 0?o.max+a-(o.max-o.min):void 0}}function a6(o,{top:t,left:a,bottom:c,right:g}){return{x:AP(o.x,a,g),y:AP(o.y,t,c)}}function kP(o,t){let a=t.min-o.min,c=t.max-o.max;return t.max-t.min<o.max-o.min&&([a,c]=[c,a]),{min:a,max:c}}function o6(o,t){return{x:kP(o.x,t.x),y:kP(o.y,t.y)}}function l6(o,t){let a=.5;const c=Ja(o),g=Ja(t);return g>c?a=Hv(t.min,t.max-c,o.min):c>g&&(a=Hv(o.min,o.max-g,t.min)),rd(0,1,a)}function c6(o,t){const a={};return t.min!==void 0&&(a.min=t.min-o.min),t.max!==void 0&&(a.max=t.max-o.min),a}const rN=.35;function u6(o=rN){return o===!1?o=0:o===!0&&(o=rN),{x:MP(o,"left","right"),y:MP(o,"top","bottom")}}function MP(o,t,a){return{min:RP(o,t),max:RP(o,a)}}function RP(o,t){return typeof o=="number"?o:o[t]||0}const d6=new WeakMap;class h6{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:a=!1,distanceThreshold:c}={}){const{presenceContext:g}=this.visualElement;if(g&&g.isPresent===!1)return;const N=B=>{const{dragSnapToOrigin:W}=this.getProps();W?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(oy(B).point)},b=(B,W)=>{const{drag:ie,dragPropagation:pe,onDragStart:Oe}=this.getProps();if(ie&&!pe&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xB(ie),!this.openDragLock))return;this.latestPointerEvent=B,this.latestPanInfo=W,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vl(Pe=>{let De=this.getAxisMotionValue(Pe).get()||0;if(nu.test(De)){const{projection:Ce}=this.visualElement;if(Ce&&Ce.layout){const ze=Ce.layout.layoutBox[Pe];ze&&(De=Ja(ze)*(parseFloat(De)/100))}}this.originPoint[Pe]=De}),Oe&&zi.postRender(()=>Oe(B,W)),tN(this.visualElement,"transform");const{animationState:Se}=this.visualElement;Se&&Se.setActive("whileDrag",!0)},d=(B,W)=>{this.latestPointerEvent=B,this.latestPanInfo=W;const{dragPropagation:ie,dragDirectionLock:pe,onDirectionLock:Oe,onDrag:Se}=this.getProps();if(!ie&&!this.openDragLock)return;const{offset:Pe}=W;if(pe&&this.currentDirection===null){this.currentDirection=f6(Pe),this.currentDirection!==null&&Oe&&Oe(this.currentDirection);return}this.updateAxis("x",W.point,Pe),this.updateAxis("y",W.point,Pe),this.visualElement.render(),Se&&Se(B,W)},A=(B,W)=>{this.latestPointerEvent=B,this.latestPanInfo=W,this.stop(B,W),this.latestPointerEvent=null,this.latestPanInfo=null},k=()=>vl(B=>{var W;return this.getAnimationState(B)==="paused"&&((W=this.getAxisMotionValue(B).animation)==null?void 0:W.play())}),{dragSnapToOrigin:O}=this.getProps();this.panSession=new Ak(t,{onSessionStart:N,onStart:b,onMove:d,onSessionEnd:A,resumeAnimation:k},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:O,distanceThreshold:c,contextWindow:jk(this.visualElement)})}stop(t,a){const c=t||this.latestPointerEvent,g=a||this.latestPanInfo,N=this.isDragging;if(this.cancel(),!N||!g||!c)return;const{velocity:b}=g;this.startAnimation(b);const{onDragEnd:d}=this.getProps();d&&zi.postRender(()=>d(c,g))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,c){const{drag:g}=this.getProps();if(!c||!Lx(t,g,this.currentDirection))return;const N=this.getAxisMotionValue(t);let b=this.originPoint[t]+c[t];this.constraints&&this.constraints[t]&&(b=s6(b,this.constraints[t],this.elastic[t])),N.set(b)}resolveConstraints(){var N;const{dragConstraints:t,dragElastic:a}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(N=this.visualElement.projection)==null?void 0:N.layout,g=this.constraints;t&&lp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&c?this.constraints=a6(c.layoutBox,t):this.constraints=!1,this.elastic=u6(a),g!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&vl(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=c6(c.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!lp(t))return!1;const c=t.current;id(c!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:g}=this.visualElement;if(!g||!g.layout)return!1;const N=mF(c,g.root,this.visualElement.getTransformPagePoint());let b=o6(g.layout.layoutBox,N);if(a){const d=a(dF(b));this.hasMutatedConstraints=!!d,d&&(b=pk(d))}return b}startAnimation(t){const{drag:a,dragMomentum:c,dragElastic:g,dragTransition:N,dragSnapToOrigin:b,onDragTransitionEnd:d}=this.getProps(),A=this.constraints||{},k=vl(O=>{if(!Lx(O,a,this.currentDirection))return;let B=A&&A[O]||{};b&&(B={min:0,max:0});const W=g?200:1e6,ie=g?40:1e7,pe={type:"inertia",velocity:c?t[O]:0,bounceStiffness:W,bounceDamping:ie,timeConstant:750,restDelta:1,restSpeed:10,...N,...B};return this.startAxisValueAnimation(O,pe)});return Promise.all(k).then(d)}startAxisValueAnimation(t,a){const c=this.getAxisMotionValue(t);return tN(this.visualElement,t),c.start(eS(t,c,0,a,this.visualElement,!1))}stopAnimation(){vl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vl(t=>{var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.pause()})}getAnimationState(t){var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,c=this.visualElement.getProps(),g=c[a];return g||this.visualElement.getValue(t,(c.initial?c.initial[t]:void 0)||0)}snapToCursor(t){vl(a=>{const{drag:c}=this.getProps();if(!Lx(a,c,this.currentDirection))return;const{projection:g}=this.visualElement,N=this.getAxisMotionValue(a);if(g&&g.layout){const{min:b,max:d}=g.layout.layoutBox[a];N.set(t[a]-Yi(b,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:c}=this.visualElement;if(!lp(a)||!c||!this.constraints)return;this.stopAnimation();const g={x:0,y:0};vl(b=>{const d=this.getAxisMotionValue(b);if(d&&this.constraints!==!1){const A=d.get();g[b]=l6({min:A,max:A},this.constraints[b])}});const{transformTemplate:N}=this.visualElement.getProps();this.visualElement.current.style.transform=N?N({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),vl(b=>{if(!Lx(b,t,null))return;const d=this.getAxisMotionValue(b),{min:A,max:k}=this.constraints[b];d.set(Yi(A,k,g[b]))})}addListeners(){if(!this.visualElement.current)return;d6.set(this.visualElement,this);const t=this.visualElement.current,a=Iv(t,"pointerdown",A=>{const{drag:k,dragListener:O=!0}=this.getProps();k&&O&&this.start(A)}),c=()=>{const{dragConstraints:A}=this.getProps();lp(A)&&A.current&&(this.constraints=this.resolveRefConstraints())},{projection:g}=this.visualElement,N=g.addEventListener("measure",c);g&&!g.layout&&(g.root&&g.root.updateScroll(),g.updateLayout()),zi.read(c);const b=Yv(window,"resize",()=>this.scalePositionWithinConstraints()),d=g.addEventListener("didUpdate",({delta:A,hasLayoutChanged:k})=>{this.isDragging&&k&&(vl(O=>{const B=this.getAxisMotionValue(O);B&&(this.originPoint[O]+=A[O].translate,B.set(B.get()+A[O].translate))}),this.visualElement.render())});return()=>{b(),a(),N(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:c=!1,dragPropagation:g=!1,dragConstraints:N=!1,dragElastic:b=rN,dragMomentum:d=!0}=t;return{...t,drag:a,dragDirectionLock:c,dragPropagation:g,dragConstraints:N,dragElastic:b,dragMomentum:d}}}function Lx(o,t,a){return(t===!0||t===o)&&(a===null||a===o)}function f6(o,t=10){let a=null;return Math.abs(o.y)>t?a="y":Math.abs(o.x)>t&&(a="x"),a}class m6 extends xh{constructor(t){super(t),this.removeGroupControls=bl,this.removeListeners=bl,this.controls=new h6(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bl}unmount(){this.removeGroupControls(),this.removeListeners()}}const LP=o=>(t,a)=>{o&&zi.postRender(()=>o(t,a))};class p6 extends xh{constructor(){super(...arguments),this.removePointerDownListener=bl}onPointerDown(t){this.session=new Ak(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:c,onPanEnd:g}=this.node.getProps();return{onSessionStart:LP(t),onStart:LP(a),onMove:c,onEnd:(N,b)=>{delete this.session,g&&zi.postRender(()=>g(N,b))}}}mount(){this.removePointerDownListener=Iv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IP(o,t){return t.max===t.min?0:o/(t.max-t.min)*100}const Dv={correct:(o,t)=>{if(!t.target)return o;if(typeof o=="string")if(Fn.test(o))o=parseFloat(o);else return o;const a=IP(o,t.target.x),c=IP(o,t.target.y);return`${a}% ${c}%`}},g6={correct:(o,{treeScale:t,projectionDelta:a})=>{const c=o,g=yh.parse(o);if(g.length>5)return c;const N=yh.createTransformer(o),b=typeof g[0]!="number"?1:0,d=a.x.scale*t.x,A=a.y.scale*t.y;g[0+b]/=d,g[1+b]/=A;const k=Yi(d,A,.5);return typeof g[2+b]=="number"&&(g[2+b]/=k),typeof g[3+b]=="number"&&(g[3+b]/=k),N(g)}};let oC=!1;class v6 extends oe.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:c,layoutId:g}=this.props,{projection:N}=t;zB(y6),N&&(a.group&&a.group.add(N),c&&c.register&&g&&c.register(N),oC&&N.root.didUpdate(),N.addEventListener("animationComplete",()=>{this.safeToRemove()}),N.setOptions({...N.options,onExitComplete:()=>this.safeToRemove()})),Zx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:c,drag:g,isPresent:N}=this.props,{projection:b}=c;return b&&(b.isPresent=N,oC=!0,g||t.layoutDependency!==a||a===void 0||t.isPresent!==N?b.willUpdate():this.safeToRemove(),t.isPresent!==N&&(N?b.promote():b.relegate()||zi.postRender(()=>{const d=b.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),$N.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:c}=this.props,{projection:g}=t;oC=!0,g&&(g.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(g),c&&c.deregister&&c.deregister(g))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Mk(o){const[t,a]=tk(),c=oe.useContext(_N);return nd.jsx(v6,{...o,layoutGroup:c,switchLayoutGroup:oe.useContext(fk),isPresent:t,safeToRemove:a})}const y6={borderRadius:{...Dv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dv,borderTopRightRadius:Dv,borderBottomLeftRadius:Dv,borderBottomRightRadius:Dv,boxShadow:g6};function b6(o,t,a){const c=La(o)?o:vp(o);return c.start(eS("",c,t,a)),c.animation}const x6=(o,t)=>o.depth-t.depth;class _6{constructor(){this.children=[],this.isDirty=!1}add(t){NN(this.children,t),this.isDirty=!0}remove(t){SN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(x6),this.isDirty=!1,this.children.forEach(t)}}function w6(o,t){const a=go.now(),c=({timestamp:g})=>{const N=g-a;N>=t&&(vh(c),o(N-t))};return zi.setup(c,!0),()=>vh(c)}const Rk=["TopLeft","TopRight","BottomLeft","BottomRight"],C6=Rk.length,VP=o=>typeof o=="string"?parseFloat(o):o,OP=o=>typeof o=="number"||Fn.test(o);function N6(o,t,a,c,g,N){g?(o.opacity=Yi(0,a.opacity??1,S6(c)),o.opacityExit=Yi(t.opacity??1,0,E6(c))):N&&(o.opacity=Yi(t.opacity??1,a.opacity??1,c));for(let b=0;b<C6;b++){const d=`border${Rk[b]}Radius`;let A=zP(t,d),k=zP(a,d);if(A===void 0&&k===void 0)continue;A||(A=0),k||(k=0),A===0||k===0||OP(A)===OP(k)?(o[d]=Math.max(Yi(VP(A),VP(k),c),0),(nu.test(k)||nu.test(A))&&(o[d]+="%")):o[d]=k}(t.rotate||a.rotate)&&(o.rotate=Yi(t.rotate||0,a.rotate||0,c))}function zP(o,t){return o[t]!==void 0?o[t]:o.borderRadius}const S6=Lk(0,.5,_A),E6=Lk(.5,.95,bl);function Lk(o,t,a){return c=>c<o?0:c>t?1:a(Hv(o,t,c))}function BP(o,t){o.min=t.min,o.max=t.max}function pl(o,t){BP(o.x,t.x),BP(o.y,t.y)}function FP(o,t){o.translate=t.translate,o.scale=t.scale,o.originPoint=t.originPoint,o.origin=t.origin}function UP(o,t,a,c,g){return o-=t,o=r0(o,1/a,c),g!==void 0&&(o=r0(o,1/g,c)),o}function D6(o,t=0,a=1,c=.5,g,N=o,b=o){if(nu.test(t)&&(t=parseFloat(t),t=Yi(b.min,b.max,t/100)-b.min),typeof t!="number")return;let d=Yi(N.min,N.max,c);o===N&&(d-=t),o.min=UP(o.min,t,a,d,g),o.max=UP(o.max,t,a,d,g)}function $P(o,t,[a,c,g],N,b){D6(o,t[a],t[c],t[g],t.scale,N,b)}const T6=["x","scaleX","originX"],P6=["y","scaleY","originY"];function qP(o,t,a,c){$P(o.x,t,T6,a?a.x:void 0,c?c.x:void 0),$P(o.y,t,P6,a?a.y:void 0,c?c.y:void 0)}function HP(o){return o.translate===0&&o.scale===1}function Ik(o){return HP(o.x)&&HP(o.y)}function GP(o,t){return o.min===t.min&&o.max===t.max}function j6(o,t){return GP(o.x,t.x)&&GP(o.y,t.y)}function WP(o,t){return Math.round(o.min)===Math.round(t.min)&&Math.round(o.max)===Math.round(t.max)}function Vk(o,t){return WP(o.x,t.x)&&WP(o.y,t.y)}function ZP(o){return Ja(o.x)/Ja(o.y)}function KP(o,t){return o.translate===t.translate&&o.scale===t.scale&&o.originPoint===t.originPoint}class A6{constructor(){this.members=[]}add(t){NN(this.members,t),t.scheduleRender()}remove(t){if(SN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(g=>t===g);if(a===0)return!1;let c;for(let g=a;g>=0;g--){const N=this.members[g];if(N.isPresent!==!1){c=N;break}}return c?(this.promote(c),!0):!1}promote(t,a){const c=this.lead;if(t!==c&&(this.prevLead=c,this.lead=t,t.show(),c)){c.instance&&c.scheduleRender(),t.scheduleRender(),t.resumeFrom=c,a&&(t.resumeFrom.preserveOpacity=!0),c.snapshot&&(t.snapshot=c.snapshot,t.snapshot.latestValues=c.animationValues||c.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:g}=t.options;g===!1&&c.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:c}=t;a.onExitComplete&&a.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k6(o,t,a){let c="";const g=o.x.translate/t.x,N=o.y.translate/t.y,b=(a==null?void 0:a.z)||0;if((g||N||b)&&(c=`translate3d(${g}px, ${N}px, ${b}px) `),(t.x!==1||t.y!==1)&&(c+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:k,rotate:O,rotateX:B,rotateY:W,skewX:ie,skewY:pe}=a;k&&(c=`perspective(${k}px) ${c}`),O&&(c+=`rotate(${O}deg) `),B&&(c+=`rotateX(${B}deg) `),W&&(c+=`rotateY(${W}deg) `),ie&&(c+=`skewX(${ie}deg) `),pe&&(c+=`skewY(${pe}deg) `)}const d=o.x.scale*t.x,A=o.y.scale*t.y;return(d!==1||A!==1)&&(c+=`scale(${d}, ${A})`),c||"none"}const lC=["","X","Y","Z"],M6=1e3;let R6=0;function cC(o,t,a,c){const{latestValues:g}=t;g[o]&&(a[o]=g[o],t.setStaticValue(o,0),c&&(c[o]=0))}function Ok(o){if(o.hasCheckedOptimisedAppear=!0,o.root===o)return;const{visualElement:t}=o.options;if(!t)return;const a=Ck(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:g,layoutId:N}=o.options;window.MotionCancelOptimisedAnimation(a,"transform",zi,!(g||N))}const{parent:c}=o;c&&!c.hasCheckedOptimisedAppear&&Ok(c)}function zk({attachResizeListener:o,defaultParent:t,measureScroll:a,checkIsScrollRoot:c,resetTransform:g}){return class{constructor(b={},d=t==null?void 0:t()){this.id=R6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(V6),this.nodes.forEach(F6),this.nodes.forEach(U6),this.nodes.forEach(O6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let A=0;A<this.path.length;A++)this.path[A].shouldResetTransform=!0;this.root===this&&(this.nodes=new _6)}addEventListener(b,d){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new DN),this.eventHandlers.get(b).add(d)}notifyListeners(b,...d){const A=this.eventHandlers.get(b);A&&A.notify(...d)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=ek(b)&&!EB(b),this.instance=b;const{layoutId:d,layout:A,visualElement:k}=this.options;if(k&&!k.current&&k.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(A||d)&&(this.isLayoutDirty=!0),o){let O,B=0;const W=()=>this.root.updateBlockedByResize=!1;zi.read(()=>{B=window.innerWidth}),o(b,()=>{const ie=window.innerWidth;ie!==B&&(B=ie,this.root.updateBlockedByResize=!0,O&&O(),O=w6(W,250),Zx.hasAnimatedSinceResize&&(Zx.hasAnimatedSinceResize=!1,this.nodes.forEach(JP)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&k&&(d||A)&&this.addEventListener("didUpdate",({delta:O,hasLayoutChanged:B,hasRelativeLayoutChanged:W,layout:ie})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const pe=this.options.transition||k.getDefaultTransition()||W6,{onLayoutAnimationStart:Oe,onLayoutAnimationComplete:Se}=k.getProps(),Pe=!this.targetLayout||!Vk(this.targetLayout,ie),De=!B&&W;if(this.options.layoutRoot||this.resumeFrom||De||B&&(Pe||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Ce={...FN(pe,"layout"),onPlay:Oe,onComplete:Se};(k.shouldReduceMotion||this.options.layoutRoot)&&(Ce.delay=0,Ce.type=!1),this.startAnimation(Ce),this.setAnimationOrigin(O,De)}else B||JP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=ie})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($6),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ok(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let O=0;O<this.path.length;O++){const B=this.path[O];B.shouldResetTransform=!0,B.updateScroll("snapshot"),B.options.layoutRoot&&B.willUpdate(!1)}const{layoutId:d,layout:A}=this.options;if(d===void 0&&!A)return;const k=this.getTransformTemplate();this.prevTransformTemplateValue=k?k(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(B6),this.nodes.forEach(L6),this.nodes.forEach(I6)):this.nodes.forEach(XP),this.clearAllSnapshots();const d=go.now();ma.delta=rd(0,1e3/60,d-ma.timestamp),ma.timestamp=d,ma.isProcessing=!0,X1.update.process(ma),X1.preRender.process(ma),X1.render.process(ma),ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$N.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(z6),this.sharedNodes.forEach(q6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ja(this.snapshot.measuredBox.x)&&!Ja(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let A=0;A<this.path.length;A++)this.path[A].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(d=!1),d&&this.instance){const A=c(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:A,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:A}}}resetTransform(){if(!g)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Ik(this.projectionDelta),A=this.getTransformTemplate(),k=A?A(this.latestValues,""):void 0,O=k!==this.prevTransformTemplateValue;b&&this.instance&&(d||Cf(this.latestValues)||O)&&(g(this.instance,k),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const d=this.measurePageBox();let A=this.removeElementScroll(d);return b&&(A=this.removeTransform(A)),Z6(A),{animationId:this.root.animationId,measuredBox:d,layoutBox:A,latestValues:{},source:this.id}}measurePageBox(){var k;const{visualElement:b}=this.options;if(!b)return hs();const d=b.measureViewportBox();if(!(((k=this.scroll)==null?void 0:k.wasRoot)||this.path.some(K6))){const{scroll:O}=this.root;O&&(cp(d.x,O.offset.x),cp(d.y,O.offset.y))}return d}removeElementScroll(b){var A;const d=hs();if(pl(d,b),(A=this.scroll)!=null&&A.wasRoot)return d;for(let k=0;k<this.path.length;k++){const O=this.path[k],{scroll:B,options:W}=O;O!==this.root&&B&&W.layoutScroll&&(B.wasRoot&&pl(d,b),cp(d.x,B.offset.x),cp(d.y,B.offset.y))}return d}applyTransform(b,d=!1){const A=hs();pl(A,b);for(let k=0;k<this.path.length;k++){const O=this.path[k];!d&&O.options.layoutScroll&&O.scroll&&O!==O.root&&up(A,{x:-O.scroll.offset.x,y:-O.scroll.offset.y}),Cf(O.latestValues)&&up(A,O.latestValues)}return Cf(this.latestValues)&&up(A,this.latestValues),A}removeTransform(b){const d=hs();pl(d,b);for(let A=0;A<this.path.length;A++){const k=this.path[A];if(!k.instance||!Cf(k.latestValues))continue;XC(k.latestValues)&&k.updateSnapshot();const O=hs(),B=k.measurePageBox();pl(O,B),qP(d,k.latestValues,k.snapshot?k.snapshot.layoutBox:void 0,O)}return Cf(this.latestValues)&&qP(d,this.latestValues),d}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var W;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const A=!!this.resumingFrom||this!==d;if(!(b||A&&this.isSharedProjectionDirty||this.isProjectionDirty||(W=this.parent)!=null&&W.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:O,layoutId:B}=this.options;if(!(!this.layout||!(O||B))){if(this.resolvedRelativeTargetAt=ma.timestamp,!this.targetDelta&&!this.relativeTarget){const ie=this.getClosestProjectingParent();ie&&ie.layout&&this.animationProgress!==1?(this.relativeParent=ie,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),Ov(this.relativeTargetOrigin,this.layout.layoutBox,ie.layout.layoutBox),pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hs(),this.targetWithTransforms=hs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pl(this.target,this.layout.layoutBox),vk(this.target,this.targetDelta)):pl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const ie=this.getClosestProjectingParent();ie&&!!ie.resumingFrom==!!this.resumingFrom&&!ie.options.layoutScroll&&ie.target&&this.animationProgress!==1?(this.relativeParent=ie,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),Ov(this.relativeTargetOrigin,this.target,ie.target),pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||XC(this.parent.latestValues)||gk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var pe;const b=this.getLead(),d=!!this.resumingFrom||this!==b;let A=!0;if((this.isProjectionDirty||(pe=this.parent)!=null&&pe.isProjectionDirty)&&(A=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(A=!1),this.resolvedRelativeTargetAt===ma.timestamp&&(A=!1),A)return;const{layout:k,layoutId:O}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(k||O))return;pl(this.layoutCorrected,this.layout.layoutBox);const B=this.treeScale.x,W=this.treeScale.y;fF(this.layoutCorrected,this.treeScale,this.path,d),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=hs());const{target:ie}=b;if(!ie){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(FP(this.prevProjectionDelta.x,this.projectionDelta.x),FP(this.prevProjectionDelta.y,this.projectionDelta.y)),Vv(this.projectionDelta,this.layoutCorrected,ie,this.latestValues),(this.treeScale.x!==B||this.treeScale.y!==W||!KP(this.projectionDelta.x,this.prevProjectionDelta.x)||!KP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",ie))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),b){const A=this.getStack();A&&A.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dp(),this.projectionDelta=dp(),this.projectionDeltaWithTransform=dp()}setAnimationOrigin(b,d=!1){const A=this.snapshot,k=A?A.latestValues:{},O={...this.latestValues},B=dp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const W=hs(),ie=A?A.source:void 0,pe=this.layout?this.layout.source:void 0,Oe=ie!==pe,Se=this.getStack(),Pe=!Se||Se.members.length<=1,De=!!(Oe&&!Pe&&this.options.crossfade===!0&&!this.path.some(G6));this.animationProgress=0;let Ce;this.mixTargetDelta=ze=>{const Re=ze/1e3;QP(B.x,b.x,Re),QP(B.y,b.y,Re),this.setTargetDelta(B),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ov(W,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H6(this.relativeTarget,this.relativeTargetOrigin,W,Re),Ce&&j6(this.relativeTarget,Ce)&&(this.isProjectionDirty=!1),Ce||(Ce=hs()),pl(Ce,this.relativeTarget)),Oe&&(this.animationValues=O,N6(O,k,this.latestValues,Re,De,Pe)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var d,A,k;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(k=(A=this.resumingFrom)==null?void 0:A.currentAnimation)==null||k.stop(),this.pendingAnimation&&(vh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zi.update(()=>{Zx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vp(0)),this.currentAnimation=b6(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:O=>{this.mixTargetDelta(O),b.onUpdate&&b.onUpdate(O)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:d,target:A,layout:k,latestValues:O}=b;if(!(!d||!A||!k)){if(this!==b&&this.layout&&k&&Bk(this.options.animationType,this.layout.layoutBox,k.layoutBox)){A=this.target||hs();const B=Ja(this.layout.layoutBox.x);A.x.min=b.target.x.min,A.x.max=A.x.min+B;const W=Ja(this.layout.layoutBox.y);A.y.min=b.target.y.min,A.y.max=A.y.min+W}pl(d,A),up(d,O),Vv(this.projectionDeltaWithTransform,this.layoutCorrected,d,O)}}registerSharedNode(b,d){this.sharedNodes.has(b)||this.sharedNodes.set(b,new A6),this.sharedNodes.get(b).add(d);const k=d.options.initialPromotionConfig;d.promote({transition:k?k.transition:void 0,preserveFollowOpacity:k&&k.shouldPreserveFollowOpacity?k.shouldPreserveFollowOpacity(d):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var d;const{layoutId:b}=this.options;return b?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:b}=this.options;return b?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:d,preserveFollowOpacity:A}={}){const k=this.getStack();k&&k.promote(this,A),b&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let d=!1;const{latestValues:A}=b;if((A.z||A.rotate||A.rotateX||A.rotateY||A.rotateZ||A.skewX||A.skewY)&&(d=!0),!d)return;const k={};A.z&&cC("z",b,k,this.animationValues);for(let O=0;O<lC.length;O++)cC(`rotate${lC[O]}`,b,k,this.animationValues),cC(`skew${lC[O]}`,b,k,this.animationValues);b.render();for(const O in k)b.setStaticValue(O,k[O]),this.animationValues&&(this.animationValues[O]=k[O]);b.scheduleRender()}applyProjectionStyles(b,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const A=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=Wx(d==null?void 0:d.pointerEvents)||"",b.transform=A?A(this.latestValues,""):"none";return}const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Wx(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Cf(this.latestValues)&&(b.transform=A?A({},""):"none",this.hasProjected=!1);return}b.visibility="";const O=k.animationValues||k.latestValues;this.applyTransformsToTarget();let B=k6(this.projectionDeltaWithTransform,this.treeScale,O);A&&(B=A(O,B)),b.transform=B;const{x:W,y:ie}=this.projectionDelta;b.transformOrigin=`${W.origin*100}% ${ie.origin*100}% 0`,k.animationValues?b.opacity=k===this?O.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:O.opacityExit:b.opacity=k===this?O.opacity!==void 0?O.opacity:"":O.opacityExit!==void 0?O.opacityExit:0;for(const pe in Kv){if(O[pe]===void 0)continue;const{correct:Oe,applyTo:Se,isCSSVariable:Pe}=Kv[pe],De=B==="none"?O[pe]:Oe(O[pe],k);if(Se){const Ce=Se.length;for(let ze=0;ze<Ce;ze++)b[Se[ze]]=De}else Pe?this.options.visualElement.renderState.vars[pe]=De:b[pe]=De}this.options.layoutId&&(b.pointerEvents=k===this?Wx(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var d;return(d=b.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(YP),this.root.sharedNodes.clear()}}}function L6(o){o.updateLayout()}function I6(o){var a;const t=((a=o.resumeFrom)==null?void 0:a.snapshot)||o.snapshot;if(o.isLead()&&o.layout&&t&&o.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:g}=o.layout,{animationType:N}=o.options,b=t.source!==o.layout.source;N==="size"?vl(B=>{const W=b?t.measuredBox[B]:t.layoutBox[B],ie=Ja(W);W.min=c[B].min,W.max=W.min+ie}):Bk(N,t.layoutBox,c)&&vl(B=>{const W=b?t.measuredBox[B]:t.layoutBox[B],ie=Ja(c[B]);W.max=W.min+ie,o.relativeTarget&&!o.currentAnimation&&(o.isProjectionDirty=!0,o.relativeTarget[B].max=o.relativeTarget[B].min+ie)});const d=dp();Vv(d,c,t.layoutBox);const A=dp();b?Vv(A,o.applyTransform(g,!0),t.measuredBox):Vv(A,c,t.layoutBox);const k=!Ik(d);let O=!1;if(!o.resumeFrom){const B=o.getClosestProjectingParent();if(B&&!B.resumeFrom){const{snapshot:W,layout:ie}=B;if(W&&ie){const pe=hs();Ov(pe,t.layoutBox,W.layoutBox);const Oe=hs();Ov(Oe,c,ie.layoutBox),Vk(pe,Oe)||(O=!0),B.options.layoutRoot&&(o.relativeTarget=Oe,o.relativeTargetOrigin=pe,o.relativeParent=B)}}}o.notifyListeners("didUpdate",{layout:c,snapshot:t,delta:A,layoutDelta:d,hasLayoutChanged:k,hasRelativeLayoutChanged:O})}else if(o.isLead()){const{onExitComplete:c}=o.options;c&&c()}o.options.transition=void 0}function V6(o){o.parent&&(o.isProjecting()||(o.isProjectionDirty=o.parent.isProjectionDirty),o.isSharedProjectionDirty||(o.isSharedProjectionDirty=!!(o.isProjectionDirty||o.parent.isProjectionDirty||o.parent.isSharedProjectionDirty)),o.isTransformDirty||(o.isTransformDirty=o.parent.isTransformDirty))}function O6(o){o.isProjectionDirty=o.isSharedProjectionDirty=o.isTransformDirty=!1}function z6(o){o.clearSnapshot()}function YP(o){o.clearMeasurements()}function XP(o){o.isLayoutDirty=!1}function B6(o){const{visualElement:t}=o.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),o.resetTransform()}function JP(o){o.finishAnimation(),o.targetDelta=o.relativeTarget=o.target=void 0,o.isProjectionDirty=!0}function F6(o){o.resolveTargetDelta()}function U6(o){o.calcProjection()}function $6(o){o.resetSkewAndRotation()}function q6(o){o.removeLeadSnapshot()}function QP(o,t,a){o.translate=Yi(t.translate,0,a),o.scale=Yi(t.scale,1,a),o.origin=t.origin,o.originPoint=t.originPoint}function ej(o,t,a,c){o.min=Yi(t.min,a.min,c),o.max=Yi(t.max,a.max,c)}function H6(o,t,a,c){ej(o.x,t.x,a.x,c),ej(o.y,t.y,a.y,c)}function G6(o){return o.animationValues&&o.animationValues.opacityExit!==void 0}const W6={duration:.45,ease:[.4,0,.1,1]},tj=o=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(o),nj=tj("applewebkit/")&&!tj("chrome/")?Math.round:bl;function rj(o){o.min=nj(o.min),o.max=nj(o.max)}function Z6(o){rj(o.x),rj(o.y)}function Bk(o,t,a){return o==="position"||o==="preserve-aspect"&&!e6(ZP(t),ZP(a),.2)}function K6(o){var t;return o!==o.root&&((t=o.scroll)==null?void 0:t.wasRoot)}const Y6=zk({attachResizeListener:(o,t)=>Yv(o,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uC={current:void 0},Fk=zk({measureScroll:o=>({x:o.scrollLeft,y:o.scrollTop}),defaultParent:()=>{if(!uC.current){const o=new Y6({});o.mount(window),o.setOptions({layoutScroll:!0}),uC.current=o}return uC.current},resetTransform:(o,t)=>{o.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:o=>window.getComputedStyle(o).position==="fixed"}),X6={pan:{Feature:p6},drag:{Feature:m6,ProjectionNode:Fk,MeasureLayout:Mk}};function ij(o,t,a){const{props:c}=o;o.animationState&&c.whileHover&&o.animationState.setActive("whileHover",a==="Start");const g="onHover"+a,N=c[g];N&&zi.postRender(()=>N(t,oy(t)))}class J6 extends xh{mount(){const{current:t}=this.node;t&&(this.unmount=_B(t,(a,c)=>(ij(this.node,c,"Start"),g=>ij(this.node,g,"End"))))}unmount(){}}class Q6 extends xh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iy(Yv(this.node.current,"focus",()=>this.onFocus()),Yv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sj(o,t,a){const{props:c}=o;if(o.current instanceof HTMLButtonElement&&o.current.disabled)return;o.animationState&&c.whileTap&&o.animationState.setActive("whileTap",a==="Start");const g="onTap"+(a==="End"?"":a),N=c[g];N&&zi.postRender(()=>N(t,oy(t)))}class eU extends xh{mount(){const{current:t}=this.node;t&&(this.unmount=SB(t,(a,c)=>(sj(this.node,c,"Start"),(g,{success:N})=>sj(this.node,g,N?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const iN=new WeakMap,dC=new WeakMap,tU=o=>{const t=iN.get(o.target);t&&t(o)},nU=o=>{o.forEach(tU)};function rU({root:o,...t}){const a=o||document;dC.has(a)||dC.set(a,{});const c=dC.get(a),g=JSON.stringify(t);return c[g]||(c[g]=new IntersectionObserver(nU,{root:o,...t})),c[g]}function iU(o,t,a){const c=rU(t);return iN.set(o,a),c.observe(o),()=>{iN.delete(o),c.unobserve(o)}}const sU={some:0,all:1};class aU extends xh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:c,amount:g="some",once:N}=t,b={root:a?a.current:void 0,rootMargin:c,threshold:typeof g=="number"?g:sU[g]},d=A=>{const{isIntersecting:k}=A;if(this.isInView===k||(this.isInView=k,N&&!k&&this.hasEnteredView))return;k&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",k);const{onViewportEnter:O,onViewportLeave:B}=this.node.getProps(),W=k?O:B;W&&W(A)};return iU(this.node.current,b,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(oU(t,a))&&this.startObserver()}unmount(){}}function oU({viewport:o={}},{viewport:t={}}={}){return a=>o[a]!==t[a]}const lU={inView:{Feature:aU},tap:{Feature:eU},focus:{Feature:Q6},hover:{Feature:J6}},cU={layout:{ProjectionNode:Fk,MeasureLayout:Mk}},uU={...ZF,...lU,...X6,...cU},er=uF(uU,CF),Uk=oe.createContext(void 0),v0=()=>{const o=oe.useContext(Uk);if(!o)throw new Error("useTransition must be used within a TransitionProvider");return o},dU=({children:o})=>{const[t,a]=oe.useState("default"),{pathname:c}=jf();oe.useEffect(()=>{c==="/"&&(c.includes("login")||c.includes("admin-login")||c.includes("driver-login"))?a("homepage-to-login"):c==="/"&&(c.includes("student")||c.includes("student-map"))?a("homepage-to-map"):(c.includes("login")||c.includes("admin-login")||c.includes("driver-login"))&&(c.includes("dashboard")||c.includes("admin")||c.includes("driver-dashboard"))?a("login-to-dashboard"):a("default")},[c]);const g=N=>{a(N)};return S.jsxDEV(Uk.Provider,{value:{currentTransition:t,setTransition:g},children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:71,columnNumber:5},void 0)},hU=({children:o,isVisible:t})=>S.jsxDEV(er.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),fU=({children:o,isVisible:t})=>S.jsxDEV(er.div,{initial:{opacity:0,scale:.8},animate:{opacity:t?1:0,scale:t?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:S.jsxDEV(er.div,{initial:{opacity:0,y:100},animate:{opacity:t?1:0,y:t?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),mU=({children:o,isVisible:t})=>S.jsxDEV(er.div,{initial:{opacity:0,scale:.9},animate:{opacity:t?1:0,scale:t?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:S.jsxDEV(er.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),pU=({children:o})=>{const{currentTransition:t}=v0(),a=()=>{switch(t){case"homepage-to-login":return S.jsxDEV(hU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return S.jsxDEV(fU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return S.jsxDEV(mU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return o}};return S.jsxDEV(S.Fragment,{children:a()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},gU=()=>{const o=i0(),{setTransition:t}=v0(),a=oe.useRef(null),[c,g]=oe.useState(!1),[N,b]=oe.useState(null),[d,A]=oe.useState({email:"",password:""}),[k,O]=oe.useState(null),[B,W]=oe.useState(!1),[ie,pe]=oe.useState(!1),[Oe,Se]=oe.useState(!1);oe.useEffect(()=>{const ze=()=>{Se(window.innerWidth<768)};return ze(),window.addEventListener("resize",ze),()=>window.removeEventListener("resize",ze)},[]),oe.useEffect(()=>{if(a.current){a.current.playbackRate=.8;const ze=()=>pe(!0);return a.current.addEventListener("loadeddata",ze),()=>{a.current&&a.current.removeEventListener("loadeddata",ze)}}},[]),oe.useEffect(()=>{const{data:{subscription:ze}}=Zi.auth.onAuthStateChange(async(Re,Ze)=>{Re==="SIGNED_IN"&&Ze?await De(Ze.access_token):Re==="SIGNED_OUT"&&(g(!1),b(null),Ce())});return()=>ze.unsubscribe()},[]);const Pe=async ze=>{ze.preventDefault(),W(!0),O(null);try{const{data:Re,error:Ze}=await Zi.auth.signInWithPassword({email:d.email,password:d.password});if(Ze){console.error("❌ Login error:",Ze),O(Ze.message);return}Re.user&&Re.session?(console.log("✅ Login successful:",Re.user.email),await De(Re.session.access_token),A({email:"",password:""})):O("Login failed - no user data received")}catch(Re){console.error("❌ Login error:",Re),O("An unexpected error occurred during login")}finally{W(!1)}},De=async ze=>{var Re,Ze,tt;try{console.log("🔌 Driver: Connecting to WebSocket..."),await ar.connect(),(Re=ar.socket)==null||Re.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server")}),(Ze=ar.socket)==null||Ze.on("error",ut=>{console.error("❌ Driver: Socket error:",ut),O(ut.message||"Socket error occurred")}),(tt=ar.socket)==null||tt.on("driver:authenticated",ut=>{console.log("✅ Driver: Authentication successful:",ut),g(!0),b(ut.busInfo),t("login-to-dashboard"),setTimeout(()=>{o("/driver-dashboard")},1e3)}),ar.authenticateAsDriver(ze)}catch(ut){console.error("❌ Driver: Authentication error:",ut),O("Failed to authenticate with server")}},Ce=()=>{ar.disconnect()};return c&&N?S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV(er.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[S.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:164,columnNumber:11},void 0),S.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:165,columnNumber:11},void 0),S.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:159,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:158,columnNumber:7},void 0):S.jsxDEV("div",{className:"relative min-h-screen overflow-hidden",children:[S.jsxDEV("div",{className:"absolute inset-0 z-0",children:[S.jsxDEV("video",{ref:a,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",preload:"auto",children:[S.jsxDEV("source",{src:"/videos/Animated_Countryside_University_Bus.mp4",type:"video/mp4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:187,columnNumber:11},void 0),"Your browser does not support the video tag."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:178,columnNumber:9},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/60"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:195,columnNumber:9},void 0),!ie&&S.jsxDEV("div",{className:"absolute inset-0 bg-slate-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"loading-spinner"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:200,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:199,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:177,columnNumber:7},void 0),S.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:S.jsxDEV(er.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:S.jsxDEV(er.div,{whileHover:Oe?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:220,columnNumber:13},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:223,columnNumber:13},void 0),S.jsxDEV("div",{className:"relative z-10 p-8",children:[S.jsxDEV(er.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[S.jsxDEV("div",{className:"text-6xl mb-4 animate-pulse",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:234,columnNumber:17},void 0),S.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:235,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:228,columnNumber:15},void 0),S.jsxDEV(fp,{children:k&&S.jsxDEV(er.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:S.jsxDEV("p",{className:"text-red-200 text-sm",children:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:252,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:246,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:244,columnNumber:15},void 0),S.jsxDEV(er.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:Pe,className:"space-y-6",children:[S.jsxDEV(er.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[S.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:271,columnNumber:19},void 0),S.jsxDEV("input",{id:"email",type:"email",required:!0,value:d.email,onChange:ze=>A(Re=>({...Re,email:ze.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:277,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:266,columnNumber:17},void 0),S.jsxDEV(er.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[S.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:299,columnNumber:19},void 0),S.jsxDEV("input",{id:"password",type:"password",required:!0,value:d.password,onChange:ze=>A(Re=>({...Re,password:ze.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:305,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:294,columnNumber:17},void 0),S.jsxDEV(er.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:Oe?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:B,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:B?S.jsxDEV("div",{className:"flex items-center justify-center",children:[S.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:334,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:333,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:322,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:258,columnNumber:15},void 0),S.jsxDEV(er.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:S.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:350,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:344,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:226,columnNumber:13},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:357,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:214,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:207,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:206,columnNumber:7},void 0),S.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(Oe?8:15)].map((ze,Re)=>S.jsxDEV(er.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},Re,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:365,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:363,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:175,columnNumber:5},void 0)},vU=()=>{var fn;const[o,t]=oe.useState(!1),[a,c]=oe.useState(null),[g,N]=oe.useState(null),[b,d]=oe.useState(null),[A,k]=oe.useState(null),[O,B]=oe.useState(null),[W,ie]=oe.useState(0),pe=oe.useRef(null),Oe=oe.useRef(null),Se=oe.useRef(null),Pe=oe.useRef(null),De=oe.useRef(null);oe.useEffect(()=>((async()=>{var ct,ht,$t,An,Ct,pn;try{const{data:{session:Sn}}=await Zi.auth.getSession();Sn!=null&&Sn.user&&(await ar.connect(),(ct=ar.socket)==null||ct.on("connect",()=>{k(null)}),(ht=ar.socket)==null||ht.on("disconnect",()=>{k("Disconnected from server")}),($t=ar.socket)==null||$t.on("error",Wt=>{console.error("❌ Driver Dashboard: Socket error:",Wt),k(Wt.message||"Socket error occurred")}),(An=ar.socket)==null||An.on("driver:authenticated",Wt=>{c(Wt.busInfo),k(null)}),(Ct=ar.socket)==null||Ct.on("driver:authentication_failed",Wt=>{console.error("❌ Driver Dashboard: Authentication failed:",Wt),k("Authentication failed: "+(Wt.message||"Unknown error"))}),(pn=ar.socket)==null||pn.on("driver:locationConfirmed",()=>{B(new Date().toLocaleTimeString()),ie(Wt=>Wt+1)}),pe.current=ar.socket,ar.authenticateAsDriver(Sn.access_token),setTimeout(()=>{a||ut(Sn.user.id)},3e3))}catch(Sn){console.error("❌ Driver Dashboard: Initialization error:",Sn),k("Failed to initialize driver data")}})(),()=>{ar.socket&&(ar.socket.off("connect"),ar.socket.off("disconnect"),ar.socket.off("error"),ar.socket.off("driver:authenticated"),ar.socket.off("driver:locationConfirmed"))}),[]),oe.useEffect(()=>(Pe.current&&!Se.current&&Ce(),()=>{tt()}),[]);const Ce=()=>{if(!Pe.current)return;const lt=23.0225,ct=72.5714;Se.current=new Xa.Map({container:Pe.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[ct,lt],zoom:15,attributionControl:!1});const ht=document.createElement("div");ht.className="driver-marker",ht.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,De.current=new Xa.Marker({element:ht,anchor:"center"}).setLngLat([ct,lt]).addTo(Se.current)},ze=(lt,ct)=>{if(!Se.current||!De.current)return;const ht=[ct,lt];De.current.setLngLat(ht),Se.current.flyTo({center:ht,duration:1e3})},Re=async()=>{if(!navigator.geolocation){d("Geolocation is not supported by this browser");return}const ct={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{Oe.current=navigator.geolocation.watchPosition(ht=>{if(N(ht),d(null),Se.current&&De.current&&ze(ht.coords.latitude,ht.coords.longitude),ar.socket&&ar.isConnected()){const $t={driverId:(a==null?void 0:a.driver_id)||"",latitude:ht.coords.latitude,longitude:ht.coords.longitude,timestamp:new Date().toISOString(),speed:ht.coords.speed||void 0,heading:ht.coords.heading||void 0};ar.socket.emit("driver:locationUpdate",$t),B(new Date().toLocaleTimeString()),ie(An=>An+1)}},ht=>{console.error("❌ Location error:",ht);let $t="";switch(ht.code){case ht.PERMISSION_DENIED:$t="Location permission denied. Please enable location access.";break;case ht.POSITION_UNAVAILABLE:$t="Location information is unavailable.";break;case ht.TIMEOUT:$t="Location request timed out.";break;default:$t="An unknown error occurred."}d($t),t(!1)},ct),t(!0)}catch(ht){console.error("❌ Error starting location tracking:",ht),d("Failed to start location tracking")}},Ze=()=>{Oe.current&&(navigator.geolocation.clearWatch(Oe.current),Oe.current=null),t(!1)},tt=()=>{Se.current&&(Se.current.remove(),Se.current=null),De.current=null},ut=async lt=>{try{const ct=await fetch(`${eu.api.url}/api/drivers/${lt}/bus`,{method:"GET",headers:{"Content-Type":"application/json"}});if(ct.ok){const ht=await ct.json();ht.busInfo&&c(ht.busInfo)}else console.error("❌ Failed to fetch bus info from API:",ct.status)}catch(ct){console.error("❌ Error fetching bus info from API:",ct)}},Rt=()=>{ar.disconnect(),pe.current=null},zt=async()=>{try{Ze(),Rt(),tt(),await Zi.auth.signOut()}catch(lt){console.error("❌ Sign out error:",lt)}};return S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4",children:S.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[S.jsxDEV("div",{className:"card-glass p-6 mb-6",children:S.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[S.jsxDEV("div",{className:"flex-1",children:[S.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:361,columnNumber:15},void 0),S.jsxDEV("div",{className:"space-y-1",children:[S.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome, ",S.jsxDEV("span",{className:"font-semibold text-white",children:a==null?void 0:a.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:366,columnNumber:28},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:365,columnNumber:17},void 0),S.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[S.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus: ",S.jsxDEV("span",{className:"font-semibold text-white",children:a==null?void 0:a.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:370,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:369,columnNumber:19},void 0),S.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route: ",S.jsxDEV("span",{className:"font-semibold text-white",children:a==null?void 0:a.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:373,columnNumber:32},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:372,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:368,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:364,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:360,columnNumber:13},void 0),S.jsxDEV("button",{onClick:zt,className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:378,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:359,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:358,columnNumber:9},void 0),S.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[S.jsxDEV("div",{className:"card-glass p-4",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${A?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:392,columnNumber:15},void 0),S.jsxDEV("div",{className:"min-w-0 flex-1",children:[S.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:396,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:A?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:397,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:395,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:391,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:390,columnNumber:11},void 0),S.jsxDEV("div",{className:"card-glass p-4",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${o?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:407,columnNumber:15},void 0),S.jsxDEV("div",{className:"min-w-0 flex-1",children:[S.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:411,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:o?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:412,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:410,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:406,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:405,columnNumber:11},void 0),S.jsxDEV("div",{className:"card-glass p-4",children:S.jsxDEV("div",{children:[S.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:422,columnNumber:15},void 0),S.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:W},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:423,columnNumber:15},void 0),O&&S.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",O]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:425,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:421,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:420,columnNumber:11},void 0),S.jsxDEV("div",{className:"card-glass p-4",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${b?"bg-red-500":g?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:433,columnNumber:15},void 0),S.jsxDEV("div",{className:"min-w-0 flex-1",children:[S.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:437,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:b?"Error":g?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:438,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:436,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:432,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:431,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:388,columnNumber:9},void 0),S.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:452,columnNumber:11},void 0),S.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:o?S.jsxDEV("button",{onClick:Ze,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:478,columnNumber:15},void 0):S.jsxDEV(S.Fragment,{children:[S.jsxDEV("button",{onClick:Re,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:458,columnNumber:17},void 0),b&&S.jsxDEV("button",{onClick:()=>{d(null),Re()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:466,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:457,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:455,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:451,columnNumber:9},void 0),S.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsxDEV("div",{className:"card-glass p-6",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:492,columnNumber:13},void 0),S.jsxDEV("div",{ref:Pe,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:495,columnNumber:13},void 0),b&&S.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[S.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:503,columnNumber:17},void 0),S.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[S.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:507,columnNumber:19},void 0),S.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[S.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:513,columnNumber:21},void 0),S.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:518,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:517,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:522,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:521,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:526,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:525,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:530,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:529,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:534,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:533,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:538,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:537,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:516,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:512,columnNumber:19},void 0),S.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[S.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:546,columnNumber:21},void 0),S.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:551,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:550,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:555,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:554,columnNumber:23},void 0),S.jsxDEV("li",{children:["• ",S.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:559,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:558,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:549,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:545,columnNumber:19},void 0),S.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[S.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:565,columnNumber:21},void 0),S.jsxDEV("button",{onClick:()=>{const lt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(ct=>{const ht=`✅ Location Test Successful!

Latitude: ${ct.coords.latitude}
Longitude: ${ct.coords.longitude}
Accuracy: ${ct.coords.accuracy}m
Device: ${lt?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(ht),d(null)},ct=>{const ht=`❌ Location Test Failed

Error Code: ${ct.code}
Error Message: ${ct.message}
Device: ${lt?"Mobile":"Desktop"}

Please check your location permissions.`;alert(ht)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:572,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:564,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:506,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:502,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:491,columnNumber:11},void 0),S.jsxDEV("div",{className:"card-glass p-6",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:624,columnNumber:13},void 0),g?S.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[S.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[S.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:631,columnNumber:19},void 0),S.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:632,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:630,columnNumber:17},void 0),S.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:638,columnNumber:21},void 0),S.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:g.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:639,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:637,columnNumber:19},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:644,columnNumber:21},void 0),S.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:g.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:645,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:643,columnNumber:19},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:650,columnNumber:21},void 0),S.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(fn=g.coords.accuracy)==null?void 0:fn.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:651,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:649,columnNumber:19},void 0),g.coords.speed&&S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:657,columnNumber:23},void 0),S.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(g.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:658,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:656,columnNumber:21},void 0),g.coords.heading&&S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:665,columnNumber:23},void 0),S.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[g.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:666,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:664,columnNumber:21},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:672,columnNumber:21},void 0),S.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:W},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:673,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:671,columnNumber:19},void 0),O&&S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:677,columnNumber:23},void 0),S.jsxDEV("span",{className:"text-white font-medium text-sm",children:O},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:678,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:676,columnNumber:21},void 0),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:684,columnNumber:21},void 0),S.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(g.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:685,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:683,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:636,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:628,columnNumber:15},void 0):S.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[S.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:693,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:694,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:697,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:692,columnNumber:15},void 0),S.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[S.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:704,columnNumber:15},void 0),S.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[S.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:708,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:711,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:712,columnNumber:17},void 0),S.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:715,columnNumber:17},void 0),S.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:716,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:707,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:703,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:623,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:489,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:356,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:355,columnNumber:5},void 0)};class yU{constructor(){Js(this,"buses",{});Js(this,"previousLocations",{})}calculateSpeed(t,a,c,g,N){const d=this.toRadians(c-t),A=this.toRadians(g-a),k=Math.sin(d/2)*Math.sin(d/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(c))*Math.sin(A/2)*Math.sin(A/2),B=6371*(2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))),W=N/(1e3*60*60),ie=B/W;return Math.round(ie*10)/10}toRadians(t){return t*(Math.PI/180)}updateBusLocation(t){var A,k;const{busId:a,latitude:c,longitude:g,timestamp:N}=t,b=this.previousLocations[a];let d;if(b){const O=new Date(N).getTime()-new Date(b.timestamp).getTime();O>0&&(d=this.calculateSpeed(b.latitude,b.longitude,c,g,O))}this.buses[a]?(this.buses[a].currentLocation={...t,speed:d||t.speed},this.buses[a].eta=(k=t.eta)==null?void 0:k.estimated_arrival_minutes):this.buses[a]={busId:a,busNumber:`Bus ${a}`,routeName:"Route TBD",driverName:"Driver TBD",currentLocation:{...t,speed:d||t.speed},eta:(A=t.eta)==null?void 0:A.estimated_arrival_minutes},this.previousLocations[a]={latitude:c,longitude:g,timestamp:N}}getAllBuses(){return Object.values(this.buses)}updateBusInfo(t,a){this.buses[t]&&(this.buses[t]={...this.buses[t],...a})}syncBusFromAPI(t,a){var b;const c=a.bus_number||a.number_plate||`Bus ${t}`,g=a.route_name||((b=a.routes)==null?void 0:b.name)||"Route TBD",N=a.driver_name||(a.driver?`${a.driver.first_name||""} ${a.driver.last_name||""}`.trim():"Driver TBD");this.buses[t]?this.buses[t]={...this.buses[t],busNumber:c,routeName:g,driverName:N}:this.buses[t]={busId:t,busNumber:c,routeName:g,driverName:N,currentLocation:{busId:t,driverId:"",latitude:0,longitude:0,timestamp:new Date().toISOString(),speed:0},eta:void 0},console.log(`🔄 Synced bus ${t}: ${c} - ${g} - ${N}`)}clearBuses(){this.buses={},this.previousLocations={}}getBus(t){return this.buses[t]||null}getBusesByRoute(t){return Object.values(this.buses).filter(a=>a.routeName.toLowerCase().includes(t.toLowerCase()))}getBusesNearLocation(t,a,c=5){return Object.values(this.buses).filter(g=>this.calculateDistance(t,a,g.currentLocation.latitude,g.currentLocation.longitude)<=c)}calculateDistance(t,a,c,g){const b=this.toRadians(c-t),d=this.toRadians(g-a),A=Math.sin(b/2)*Math.sin(b/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(c))*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)))}removeBus(t){delete this.buses[t],delete this.previousLocations[t]}getBusesCount(){return Object.keys(this.buses).length}}const hC=new yU,zv=({children:o,className:t="",variant:a="default",hover:c=!0,glow:g=!1,onClick:N,delay:b=0})=>{const d="relative overflow-hidden rounded-2xl transition-all duration-500",A={default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"},k=c?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",O=g?"hover:shadow-blue-500/20 hover:shadow-2xl":"",B=N?"cursor-pointer":"";return S.jsxDEV(er.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:b,ease:[.4,0,.2,1]},whileHover:c?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:N?{scale:.98}:{},onClick:N,className:`
        ${d}
        ${A[a]}
        ${k}
        ${O}
        ${B}
        ${t}
      `,children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),g&&S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),S.jsxDEV("div",{className:"relative z-10 p-6",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)},aj=({className:o=""})=>{const t=oe.useRef(null),a=oe.useRef(null),c=oe.useRef({}),g=oe.useRef(!1),N=oe.useRef(new Set),[b,d]=oe.useState(!1),[A,k]=oe.useState(null),[O,B]=oe.useState("disconnected"),[W,ie]=oe.useState([]),[pe,Oe]=oe.useState([]),[Se,Pe]=oe.useState("all"),[De,Ce]=oe.useState(!0),[ze,Re]=oe.useState({}),[Ze,tt]=oe.useState(!1),[ut,Rt]=oe.useState(!0),[zt,fn]=oe.useState(!0),lt=oe.useCallback(async()=>{try{console.log("🔄 Loading routes from backend API...");const Be=await jC.getRoutes();Be.success&&Be.data?(console.log("✅ Routes loaded from backend:",Be.data.length,"routes"),Oe(Be.data),Be.data.forEach(Mt=>{console.log(`📍 Route: ${Mt.name} (ID: ${Mt.id}) - Active: ${Mt.is_active}`)})):console.error("❌ Failed to load routes:",Be)}catch(Be){console.error("❌ Error loading routes:",Be)}},[]),ct=oe.useCallback(()=>{a.current&&pe.forEach(Be=>{const Mt=`route-${Be.id}`;try{a.current.getLayer(Mt)&&a.current.removeLayer(Mt),a.current.getSource(Mt)&&a.current.removeSource(Mt),N.current.delete(Mt)}catch(yn){console.warn(`⚠️ Error removing route ${Be.name}:`,yn)}})},[pe]),ht=oe.useCallback(()=>{!a.current||pe.length===0||(console.log("🗺️ Adding routes to map:",pe.length,"routes"),pe.forEach((Be,Mt)=>{const yn=`route-${Be.id}`;if(N.current.has(yn)||a.current.getSource(yn)){console.log(`🗺️ Route ${yn} already exists, skipping...`);return}try{a.current.addSource(yn,{type:"geojson",data:{type:"Feature",properties:{name:Be.name,description:Be.description,distance:Be.distance_km,duration:Be.estimated_duration_minutes},geometry:Be.stops}}),a.current.addLayer({id:yn,type:"line",source:yn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":`hsl(${Mt*137.5%360}, 70%, 50%)`,"line-width":4,"line-opacity":.8}}),console.log(`🗺️ Added route ${Be.name} to map`),N.current.add(yn)}catch(Dn){console.warn(`⚠️ Error adding route ${Be.name}:`,Dn)}}))},[pe]),$t=oe.useCallback(Be=>{if(!a.current)return;const{busId:Mt,latitude:yn,longitude:Dn,speed:qt}=Be,Ft=hC.getBus(Mt);if(Ft)if(c.current[Mt])c.current[Mt].setLngLat([Dn,yn]),c.current[Mt].getPopup().setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${Ft.busNumber}</h3>
            <div class="bus-status ${b?"online":"offline"}">
              ${b?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${Ft.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${Ft.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${qt?`${qt} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(Be.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);else{const Pn=document.createElement("div");Pn.className="bus-marker",Pn.innerHTML=`
        <div class="bus-marker-pin">
          <div class="bus-marker-icon">🚌</div>
          <div class="bus-marker-pulse"></div>
        </div>
        <div class="bus-marker-content">
          <div class="bus-number">${Ft.busNumber}</div>
          <div class="bus-speed">${qt?`${qt} km/h`:"N/A"}</div>
          <div class="bus-eta">${Be.eta?`ETA: ${Be.eta.estimated_arrival_minutes} min`:"ETA: N/A"}</div>
        </div>
      `;const vr=new Xa.Marker({element:Pn,anchor:"center"}).setLngLat([Dn,yn]).addTo(a.current),cn=new Xa.Popup({offset:25,className:"bus-popup-container"}).setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${Ft.busNumber}</h3>
            <div class="bus-status ${b?"online":"offline"}">
              ${b?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${Ft.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${Ft.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${qt?`${qt} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(Be.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);vr.setPopup(cn),c.current[Mt]=vr}},[b]),An=oe.useCallback(Be=>{c.current[Be]&&(c.current[Be].remove(),delete c.current[Be])},[]),Ct=oe.useCallback(()=>{if(!a.current||Object.keys(ze).length===0)return;const Be=Object.values(ze).map(Mt=>[Mt.longitude,Mt.latitude]);if(Be.length===1)a.current.flyTo({center:Be[0],zoom:16,duration:2e3});else if(Be.length>1){const Mt=new Xa.LngLatBounds;Be.forEach(yn=>Mt.extend(yn)),a.current.fitBounds(Mt,{padding:50,duration:2e3})}},[ze]),pn=oe.useCallback(Be=>{console.log("📍 Bus location update:",Be),Re(Mt=>({...Mt,[Be.busId]:Be})),$t(Be)},[$t]),Sn=oe.useCallback(Be=>{console.log("🚌 Driver connected:",Be)},[]),Wt=oe.useCallback(Be=>{console.log("🚌 Driver disconnected:",Be),An(Be.busId)},[An]),Yn=oe.useCallback(Be=>{console.log("🚌 Bus arriving:",Be)},[]);oe.useEffect(()=>{if(!(g.current||!t.current))return console.log("🗺️ Initializing map..."),g.current=!0,a.current=new Xa.Map({container:t.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[72.571,23.025],zoom:12,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),a.current.addControl(new Xa.NavigationControl,"top-right"),a.current.once("load",()=>{console.log("🗺️ Map loaded successfully"),Ce(!1),lt()}),a.current.on("error",Be=>{console.error("❌ Map error:",Be)}),()=>{a.current&&(a.current.remove(),a.current=null,g.current=!1,N.current.clear(),c.current={})}},[lt]),oe.useEffect(()=>{let Be,Mt;const yn=async()=>{try{k(null),B("connecting"),await ar.connect(),d(!0),B("connected"),ar.onBusLocationUpdate(pn),ar.onDriverConnected(Sn),ar.onDriverDisconnected(Wt),ar.onStudentConnected(()=>{console.log("✅ Student connected to WebSocket")}),ar.onBusArriving(Yn),Mt=setInterval(()=>{!ar.getConnectionStatus()&&O==="connected"&&(B("disconnected"),d(!1))},1e4),(async()=>{try{for(;!Pr.isInitialized();)await new Promise(Pn=>setTimeout(Pn,100));const Ft=await jC.getAllBuses();if(Ft.success&&Ft.data){console.log("📊 Initial bus data from API:",Ft.data.length,"buses"),Ft.data.forEach(vr=>{const cn=vr.bus_id||vr.id;cn&&hC.syncBusFromAPI(cn,vr)});const Pn=hC.getAllBuses();ie(Pn),console.log("✅ Initial buses loaded and synced:",Ft.data.length)}}catch(Ft){console.error("❌ Error loading initial buses:",Ft)}})()}catch(Dn){console.error("❌ WebSocket connection failed:",Dn),k("Failed to connect to real-time updates"),d(!1),B("disconnected"),Be=setTimeout(()=>{console.log("🔄 Retrying WebSocket connection..."),B("reconnecting"),yn()},5e3)}};return yn(),()=>{Be&&clearTimeout(Be),Mt&&clearInterval(Mt),ar.disconnect()}},[Yn,pn,Sn,Wt]);const Vn=oe.useMemo(()=>Se==="all"?W:W.filter(Be=>{const Mt=pe.find(yn=>yn.name===Be.routeName);return Mt&&Mt.id===Se}),[W,Se,pe]),Nt=oe.useMemo(()=>pe.map(Be=>({id:Be.id,name:Be.name,description:Be.description})),[pe]);return oe.useEffect(()=>(pe.length>0&&a.current&&a.current.isStyleLoaded()&&(ct(),ht()),()=>{a.current&&ct()}),[pe,ht,ct]),S.jsxDEV("div",{className:`relative h-screen ${o}`,children:[De&&S.jsxDEV("div",{className:"loading-overlay",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:496,columnNumber:13},void 0),S.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:497,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:495,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:494,columnNumber:9},void 0),A&&S.jsxDEV("div",{className:"error-overlay",children:S.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:S.jsxDEV("div",{className:"flex",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:513,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:508,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:507,columnNumber:15},void 0),S.jsxDEV("div",{className:"ml-3",children:[S.jsxDEV("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:521,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-sm text-red-700 mt-1",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:524,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:520,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:506,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:505,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:504,columnNumber:9},void 0),S.jsxDEV("div",{ref:t,className:"map-container rounded-lg"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:532,columnNumber:7},void 0),S.jsxDEV(er.div,{initial:{x:-400},animate:{x:Ze?-350:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-4 left-4 z-30",children:[S.jsxDEV("button",{onClick:()=>tt(!Ze),className:"absolute -right-12 top-0 p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-200 z-40",children:S.jsxDEV("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${Ze?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:554,columnNumber:14},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:546,columnNumber:12},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:542,columnNumber:10},void 0),S.jsxDEV(zv,{variant:"premium",glow:!0,className:"w-80 max-h-[calc(100vh-2rem)] overflow-hidden",children:[S.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[S.jsxDEV("div",{className:"flex items-center space-x-3",children:[S.jsxDEV("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:570,columnNumber:16},void 0),S.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"Student Live Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:571,columnNumber:16},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:569,columnNumber:14},void 0),S.jsxDEV("div",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded",children:"Live Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:575,columnNumber:14},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:568,columnNumber:12},void 0),S.jsxDEV("div",{className:"p-4 space-y-4 max-h-[calc(100vh-8rem)] overflow-y-auto",children:[S.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-blue-50/80 rounded-lg border border-blue-200/50",children:[S.jsxDEV("div",{className:"flex items-center space-x-2",children:[S.jsxDEV("div",{className:`w-2 h-2 rounded-full ${b?"bg-green-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:585,columnNumber:18},void 0),S.jsxDEV("span",{className:"text-sm text-gray-800 font-medium",children:b?"Live Connected":"Offline"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:590,columnNumber:18},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:584,columnNumber:16},void 0),S.jsxDEV("span",{className:"text-xs text-gray-600 bg-white/70 px-2 py-1 rounded",children:[Vn.length," buses"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:594,columnNumber:16},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:583,columnNumber:14},void 0),S.jsxDEV("div",{className:"space-y-3",children:[S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Route Filter"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:602,columnNumber:18},void 0),S.jsxDEV("button",{onClick:()=>Rt(!ut),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:S.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${ut?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:615,columnNumber:22},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:607,columnNumber:20},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:603,columnNumber:18},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:601,columnNumber:16},void 0),S.jsxDEV(fp,{children:ut&&S.jsxDEV(er.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-3",children:[S.jsxDEV("select",{value:Se,onChange:Be=>Pe(Be.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200",children:[S.jsxDEV("option",{value:"all",children:["All Routes (",pe.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:639,columnNumber:24},void 0),Nt.map(Be=>S.jsxDEV("option",{value:Be.id,children:Be.name},Be.id,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:641,columnNumber:26},void 0))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:634,columnNumber:42},void 0),S.jsxDEV("button",{onClick:Ct,disabled:Vn.length===0,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 border border-blue-600 rounded-lg text-white font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["📍 Center on Buses (",Vn.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:647,columnNumber:22},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:627,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:625,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:600,columnNumber:14},void 0),S.jsxDEV("div",{className:"space-y-3",children:[S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:662,columnNumber:18},void 0),S.jsxDEV("button",{onClick:()=>fn(!zt),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:S.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${zt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:675,columnNumber:22},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:667,columnNumber:20},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:663,columnNumber:18},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:661,columnNumber:16},void 0),S.jsxDEV(fp,{children:zt&&S.jsxDEV(er.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-2 max-h-64 overflow-y-auto",children:Vn.length===0?S.jsxDEV("div",{className:"text-center py-4",children:[S.jsxDEV("div",{className:"text-gray-400 text-2xl mb-2",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:696,columnNumber:26},void 0),S.jsxDEV("p",{className:"text-gray-600 text-sm",children:"No buses tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:697,columnNumber:26},void 0),S.jsxDEV("p",{className:"text-gray-500 text-xs mt-1",children:"Check connection status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:698,columnNumber:26},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:695,columnNumber:24},void 0):Vn.map(Be=>{const Mt=ze[Be.busId];return S.jsxDEV(er.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 cursor-pointer transition-all duration-200 shadow-sm",onClick:()=>{const yn=ze[Be.busId];if(yn&&a.current){a.current.flyTo({center:[yn.longitude,yn.latitude],zoom:16,duration:1e3});const Dn=c.current[Be.busId];Dn&&Dn.getPopup().addTo(a.current)}},children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[S.jsxDEV("div",{className:"flex items-center space-x-2",children:[S.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:729,columnNumber:34},void 0),S.jsxDEV("span",{className:"font-medium text-sm text-gray-800",children:Be.busNumber},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:730,columnNumber:34},void 0),S.jsxDEV("span",{className:"text-xs text-blue-600 opacity-75",children:"👆"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:733,columnNumber:34},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:728,columnNumber:32},void 0),S.jsxDEV("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:Be.eta?`${Be.eta} min`:"ETA: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:737,columnNumber:32},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:727,columnNumber:30},void 0),S.jsxDEV("div",{className:"space-y-1",children:[S.jsxDEV("div",{className:"text-xs text-gray-600",children:["📍 Route: ",Be.routeName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:744,columnNumber:32},void 0),S.jsxDEV("div",{className:"text-xs text-gray-600",children:["👨‍💼 Driver: ",Be.driverName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:747,columnNumber:32},void 0),Mt&&S.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[S.jsxDEV("span",{className:"text-green-600",children:["🕐"," ",new Date(Mt.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:752,columnNumber:36},void 0),S.jsxDEV("span",{className:"text-blue-600",children:Mt.speed?`${Mt.speed} km/h`:"Speed: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:759,columnNumber:36},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:751,columnNumber:34},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:743,columnNumber:30},void 0)]},Be.busId,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:706,columnNumber:54},void 0)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:687,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:685,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:660,columnNumber:14},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:581,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:562,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:535,columnNumber:8},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:491,columnNumber:5},void 0)},bU=({children:o,variant:t="primary",size:a="md",className:c="",onClick:g,disabled:N=!1,loading:b=!1,icon:d,iconPosition:A="left"})=>{const k="relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",O={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},B={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"};return S.jsxDEV(er.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:N||b,className:`
        ${k}
        ${O[a]}
        ${B[t]}
        hover:-translate-y-0.5 active:translate-y-0
        ${c}
      `,children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),S.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[b&&S.jsxDEV(er.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),d&&A==="left"&&!b&&S.jsxDEV("span",{className:"flex-shrink-0",children:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),S.jsxDEV("span",{children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),d&&A==="right"&&!b&&S.jsxDEV("span",{className:"flex-shrink-0",children:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0)};function $k({onLoginSuccess:o}){const t=i0(),{setTransition:a}=v0(),[c,g]=oe.useState(!1),[N,b]=oe.useState(null),[d,A]=oe.useState(""),[k,O]=oe.useState(""),[B,W]=oe.useState(""),[ie,pe]=oe.useState(null);oe.useEffect(()=>{setTimeout(async()=>{try{console.log("🔄 Attempting automatic session recovery...");const ze=await Pr.recoverSession();ze.success&&Pr.isAdmin()?(console.log("✅ Session recovered, redirecting to admin panel"),Se()):console.log("📝 Session recovery failed or user is not admin:",ze.error)}catch(ze){console.log("📝 No valid session to recover:",ze)}},1e3)},[]);const Oe=async Ce=>{Ce.preventDefault(),g(!0),b(null),pe(null);try{const ze=new Promise((tt,ut)=>{setTimeout(()=>ut(new Error("Login timeout")),15e3)}),Re=Pr.signIn(d,k),Ze=await Promise.race([Re,ze]);Ze.success&&Ze.user?Ze.user.role==="admin"?(pe("Login successful! Redirecting to admin dashboard..."),setTimeout(()=>{Se()},1500)):(b("Access denied. Admin privileges required."),await Pr.signOut()):b(Ze.error||"Login failed. Please check your credentials.")}catch(ze){console.error("❌ Login error:",ze),ze instanceof Error&&ze.message==="Login timeout"?b("Login timed out. This might be due to slow network or profile loading. Please try again."):ze instanceof Error&&ze.message.includes("environment variables")?b("Configuration error. Please check your environment setup."):ze instanceof Error&&ze.message.includes("Profile loading timeout")?b("Profile loading is taking longer than expected. Please try again."):b("Network error. Please check your connection and try again.")}finally{g(!1)}},Se=()=>{a("login-to-dashboard"),o?o():t("/admin-dashboard")},Pe=async()=>{g(!0),b(null);try{(await Pr.recoverSession()).success&&Pr.isAdmin()?(pe("Session recovered! Redirecting..."),setTimeout(()=>{Se()},1e3)):b("No valid session found. Please log in again.")}catch{b("Session recovery failed. Please log in again.")}finally{g(!1)}},De=async()=>{g(!0),b(null);try{await Pr.forceFreshLogin(),pe("Session cleared. Please log in again with your credentials.")}catch{b("Failed to clear session.")}finally{g(!1)}};return S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[S.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[S.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:156,columnNumber:9},this),S.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:157,columnNumber:9},this),S.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:158,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:155,columnNumber:7},this),S.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((Ce,ze)=>S.jsxDEV(er.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*5},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},ze,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:164,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:162,columnNumber:7},this),S.jsxDEV(er.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:S.jsxDEV(zv,{variant:"ultra",glow:!0,className:"p-8 relative",children:[S.jsxDEV(er.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[S.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:204,columnNumber:15},this),S.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:205,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:13},this),S.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:219,columnNumber:13},this),S.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:222,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:197,columnNumber:11},this),S.jsxDEV(er.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:Oe,className:"space-y-6",children:[S.jsxDEV(er.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[S.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:241,columnNumber:15},this),S.jsxDEV("div",{className:"relative",children:[S.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:d,onChange:Ce=>A(Ce.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:245,columnNumber:17},this),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:257,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:236,columnNumber:13},this),S.jsxDEV(er.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[S.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:267,columnNumber:15},this),S.jsxDEV("div",{className:"relative",children:[S.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:k,onChange:Ce=>O(Ce.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:17},this),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:270,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:262,columnNumber:13},this),S.jsxDEV(er.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[S.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",S.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:294,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:293,columnNumber:15},this),S.jsxDEV("div",{className:"relative",children:[S.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:B,onChange:Ce=>W(Ce.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:297,columnNumber:17},this),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:288,columnNumber:13},this),S.jsxDEV(fp,{children:c&&S.jsxDEV(er.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:S.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[S.jsxDEV(er.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:322,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:321,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:315,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:313,columnNumber:13},this),S.jsxDEV(fp,{children:N&&S.jsxDEV(er.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:S.jsxDEV("div",{className:"flex",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:349,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:344,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:343,columnNumber:21},this),S.jsxDEV("div",{className:"ml-3",children:[S.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:357,columnNumber:23},this),S.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:N},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:360,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:356,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:342,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:334,columnNumber:13},this),S.jsxDEV(fp,{children:ie&&S.jsxDEV(er.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:S.jsxDEV("div",{className:"flex",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:383,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:378,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:377,columnNumber:21},this),S.jsxDEV("div",{className:"ml-3",children:[S.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:391,columnNumber:23},this),S.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:ie},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:394,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:390,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:370,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:13},this),S.jsxDEV(er.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:S.jsxDEV(bU,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:c,loading:c,icon:S.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:420,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:414,columnNumber:19},this),children:c?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:407,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:13},this),S.jsxDEV(er.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[S.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[S.jsxDEV("button",{type:"button",onClick:Pe,disabled:c,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:441,columnNumber:17},this),S.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:449,columnNumber:17},this),S.jsxDEV("button",{type:"button",onClick:De,disabled:c,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:450,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:440,columnNumber:15},this),S.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[S.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:461,columnNumber:17},this),S.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:462,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:434,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:191,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:185,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:153,columnNumber:5},this)}const xU=eu.api.url;class _U{async makeRequest(t,a={}){let c;try{const g=Pr.getAccessToken();if(console.log("🔑 Token check for",t,":",g?"Token exists":"No token"),!g)throw console.error("❌ No access token available for",t),new Error("No access token available");const N=new AbortController;c=setTimeout(()=>N.abort(),15e3);const b=await fetch(`${xU}/admin${t}`,{...a,signal:N.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`,...a.headers}}),d=await b.json();if(c&&clearTimeout(c),!b.ok)throw b.status===429?new Error("Rate limit exceeded. Please wait a moment and try again."):b.status===401?new Error("Authentication required. Please log in again."):b.status===403?new Error("Access denied. You do not have permission for this action."):b.status===404?new Error("Resource not found."):b.status===409?new Error(d.message||"Resource already exists"):b.status>=500?new Error("Server error. Please try again later."):new Error(d.message||d.error||"Request failed");return d}catch(g){return c&&clearTimeout(c),console.error(`❌ API request failed for ${t}:`,g),{success:!1,error:g instanceof Error?g.message:"Request failed"}}}async getAnalytics(){return this.makeRequest("/analytics")}async getSystemHealth(){return this.makeRequest("/health")}async getAllBuses(){var a;console.log("🚌 Fetching all buses...");const t=await this.makeRequest("/buses");return console.log("🚌 Buses result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} buses`:t.error),t}async getBusById(t){return this.makeRequest(`/buses/${t}`)}async createBus(t){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(t)})}async updateBus(t,a){return this.makeRequest(`/buses/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteBus(t){return this.makeRequest(`/buses/${t}`,{method:"DELETE"})}async getAllDrivers(){var a;console.log("👨‍💼 Fetching all drivers...");const t=await this.makeRequest("/drivers");return console.log("👨‍💼 Drivers result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} drivers`:t.error),t}async getAssignedDrivers(){var a;console.log("🚌 Fetching assigned drivers...");const t=await this.makeRequest("/assigned-drivers");return console.log("🚌 Assigned drivers result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} assigned drivers`:t.error),t}async getDriverById(t){return this.makeRequest(`/drivers/${t}`)}async assignDriverToBus(t,a){return this.makeRequest(`/drivers/${t}/assign-bus`,{method:"POST",body:JSON.stringify({busId:a})})}async unassignDriverFromBus(t){return this.makeRequest(`/drivers/${t}/unassign-bus`,{method:"POST"})}async createDriver(t){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(t)})}async updateDriver(t,a){return this.makeRequest(`/drivers/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteDriver(t){return this.makeRequest(`/drivers/${t}`,{method:"DELETE"})}async getAllRoutes(){var a;console.log("🛣️ Fetching all routes...");const t=await this.makeRequest("/routes");return console.log("🛣️ Routes result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} routes`:t.error),t}async getRouteById(t){return this.makeRequest(`/routes/${t}`)}async createRoute(t){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(t)})}async updateRoute(t,a){return this.makeRequest(`/routes/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteRoute(t){return this.makeRequest(`/routes/${t}`,{method:"DELETE"})}}const is=new _U,Tv="http://localhost:3000";class Ix{static async makeRequest(t,a={}){let c=Pr.getAccessToken();if(!c&&Pr.isAuthenticated()){console.log("🔄 No token found but user is authenticated, attempting to refresh session...");const N=await Pr.refreshSession();if(N.success)c=Pr.getAccessToken(),console.log("✅ Session refreshed, new token obtained");else throw console.error("❌ Failed to refresh session:",N.error),new Error("Authentication required")}const g={"Content-Type":"application/json",...c&&{Authorization:`Bearer ${c}`}};return fetch(`${Tv}${t}`,{...a,headers:{...g,...a.headers}})}static async uploadBusImage(t,a){try{console.log("🔐 Getting access token...");const c=Pr.getAccessToken();if(!c)return console.error("❌ No access token available"),{success:!1,error:"Authentication required"};console.log("✅ Access token obtained");const g=new FormData;g.append("image",a),g.append("busId",t),console.log("📤 Sending request to:",`${Tv}/storage/upload/bus-image`),console.log("📋 FormData contents:",{busId:t,fileName:a.name,fileSize:a.size,fileType:a.type});const N=await fetch(`${Tv}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(console.log("📥 Response status:",N.status),console.log("📥 Response headers:",Object.fromEntries(N.headers.entries())),!N.ok){const d=await N.json();return console.error("❌ Upload failed:",d),{success:!1,error:d.error||"Upload failed"}}const b=await N.json();return console.log("✅ Upload successful:",b),{success:!0,url:b.url,fileName:b.fileName}}catch(c){return console.error("❌ Upload bus image error:",c),{success:!1,error:"Network error during upload"}}}static async uploadDriverPhoto(t,a){try{const c=Pr.getAccessToken();if(!c)return{success:!1,error:"Authentication required"};const g=new FormData;g.append("photo",a),g.append("driverId",t);const N=await fetch(`${Tv}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(!N.ok)return{success:!1,error:(await N.json()).error||"Upload failed"};const b=await N.json();return{success:!0,url:b.url,fileName:b.fileName}}catch(c){return console.error("Upload driver photo error:",c),{success:!1,error:"Network error during upload"}}}static async uploadRouteMap(t,a){try{const c=Pr.getAccessToken();if(!c)return{success:!1,error:"Authentication required"};const g=new FormData;g.append("map",a),g.append("routeId",t);const N=await fetch(`${Tv}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(!N.ok)return{success:!1,error:(await N.json()).error||"Upload failed"};const b=await N.json();return{success:!0,url:b.url,fileName:b.fileName}}catch(c){return console.error("Upload route map error:",c),{success:!1,error:"Network error during upload"}}}static async getSignedUrl(t,a){try{const c=await this.makeRequest(`/storage/signed-url/${t}/${a}`);if(!c.ok)return{success:!1,error:(await c.json()).error||"Failed to get signed URL"};const g=await c.json();return{success:!0,signedUrl:g.signedUrl,expiresIn:g.expiresIn}}catch(c){return console.error("Get signed URL error:",c),{success:!1,error:"Network error"}}}static async deleteFile(t,a,c){try{const g=await this.makeRequest(`/storage/delete/${t}/${a}`,{method:"DELETE",body:JSON.stringify({fileUrl:c})});return g.ok?{success:!0}:{success:!1,error:(await g.json()).error||"Delete failed"}}catch(g){return console.error("Delete file error:",g),{success:!1,error:"Network error during deletion"}}}static async getFileInfo(t,a){try{const c=await this.makeRequest(`/storage/info/${t}/${a}`);if(!c.ok)return{success:!1,hasFile:!1,error:(await c.json()).error||"Failed to get file info"};const g=await c.json();return{success:!0,hasFile:g.hasFile,url:g.url,info:g.info}}catch(c){return console.error("Get file info error:",c),{success:!1,hasFile:!1,error:"Network error"}}}static async listFiles(t){try{const a=await this.makeRequest(`/storage/list/${t}`);return a.ok?{success:!0,files:(await a.json()).files}:{success:!1,error:(await a.json()).error||"Failed to list files"}}catch(a){return console.error("List files error:",a),{success:!1,error:"Network error"}}}static validateFile(t,a,c){return t?a.includes(t.type)?t.size>c?{isValid:!1,error:`File too large. Maximum size: ${c/(1024*1024)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${a.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(t){const a=["image/jpeg","image/jpg","image/png","image/webp"];return this.validateFile(t,a,5242880)}static validateDocument(t){const a=["application/pdf","image/jpeg","image/jpg","image/png"];return this.validateFile(t,a,10485760)}}function wU(){const[o,t]=oe.useState("bus"),[a,c]=oe.useState([]),[g,N]=oe.useState([]),[b,d]=oe.useState([]),[A,k]=oe.useState(!0),[O,B]=oe.useState(!1),[W,ie]=oe.useState(null),[pe,Oe]=oe.useState(""),[Se,Pe]=oe.useState(null),[De,Ce]=oe.useState(null);oe.useEffect(()=>{ze()},[]);const ze=async()=>{k(!0),Pe(null);try{const[lt,ct,ht]=await Promise.all([is.getAllBuses(),is.getAllDrivers(),is.getAllRoutes()]);if(lt.success&&lt.data&&c(lt.data),ct.success&&ct.data){const $t=new Map;ct.data.forEach(Ct=>{const pn=Ct.id;if(!$t.has(pn))$t.set(pn,Ct);else{const Sn=$t.get(pn);(!Sn.email&&Ct.email||Sn.email&&Ct.email&&!Sn.first_name&&Ct.first_name)&&$t.set(pn,Ct)}});const An=Array.from($t.values());N(An)}ht.success&&ht.data&&d(ht.data)}catch(lt){Pe("Failed to load data"),console.error("❌ Data loading error:",lt)}finally{k(!1)}},Re=lt=>{var ht;const ct=(ht=lt.target.files)==null?void 0:ht[0];ct&&(ie(ct),Pe(null))},Ze=async()=>{if(!W||!pe){Pe("Please select a file and an item");return}console.log("🚀 Starting upload...",{activeTab:o,selectedItem:pe,fileName:W.name,fileSize:W.size,fileType:W.type}),B(!0),Pe(null),Ce(null);try{let lt;switch(o){case"bus":console.log("📤 Uploading bus image..."),lt=await Ix.uploadBusImage(pe,W);break;case"driver":console.log("📤 Uploading driver photo..."),lt=await Ix.uploadDriverPhoto(pe,W);break;case"route":console.log("📤 Uploading route map..."),lt=await Ix.uploadRouteMap(pe,W);break}console.log("📥 Upload result:",lt),lt.success?(Ce("File uploaded successfully!"),ie(null),Oe(""),ze()):(Pe(lt.error||"Upload failed"),console.error("❌ Upload failed:",lt.error))}catch(lt){Pe("Upload failed. Please try again."),console.error("❌ Upload error:",lt)}finally{B(!1)}},tt=async(lt,ct)=>{if(confirm("Are you sure you want to delete this file?"))try{const ht=await Ix.deleteFile(o,lt,ct);ht.success?(Ce("File deleted successfully!"),ze()):Pe(ht.error||"Delete failed")}catch(ht){Pe("Delete failed. Please try again."),console.error("❌ Delete error:",ht)}},ut=()=>{switch(o){case"bus":return a;case"driver":return g;case"route":return b;default:return[]}},Rt=lt=>{switch(o){case"bus":return lt.number_plate;case"driver":{const ct=lt;return`${ct.first_name} ${ct.last_name}`}case"route":return lt.name;default:return"Unknown"}},zt=lt=>{let ct=null;switch(o){case"bus":ct=lt.bus_image_url||null;break;case"driver":ct=lt.profile_photo_url||null;break;case"route":ct=lt.route_map_url||null;break;default:return null}return ct?ct.startsWith("http")?ct:ct.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${ct}`:ct:null},fn=()=>{switch(o){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return A?S.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),S.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):S.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:S.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:S.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:S.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[S.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),Se&&S.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:S.jsxDEV("p",{className:"text-red-700",children:Se},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),De&&S.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:S.jsxDEV("p",{className:"text-green-700",children:De},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),S.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:S.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(lt=>S.jsxDEV("button",{onClick:()=>t(lt.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${o===lt.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:lt.name},lt.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),S.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",fn()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),S.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),S.jsxDEV("input",{type:"file",onChange:Re,accept:o==="route"?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),W&&S.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",W.name," (",(W.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ",o==="bus"?"Bus":o==="driver"?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),S.jsxDEV("select",{value:pe,onChange:lt=>Oe(lt.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[S.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),ut().map(lt=>S.jsxDEV("option",{value:lt.id||"",children:Rt(lt)},lt.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),S.jsxDEV("div",{className:"flex items-end",children:S.jsxDEV("button",{onClick:Ze,disabled:!W||!pe||O,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:O?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),S.jsxDEV("div",{children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",fn()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),ut().length===0?S.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):S.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ut().map(lt=>{const ct=zt(lt),ht=Rt(lt);return S.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[S.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:ht},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),ct?S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"mb-3",children:o!=="route"?S.jsxDEV("img",{src:ct,alt:ht,className:"w-full h-32 object-cover rounded-md",onError:$t=>{$t.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):S.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:S.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),S.jsxDEV("div",{className:"flex space-x-2",children:[S.jsxDEV("button",{onClick:()=>window.open(ct,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),S.jsxDEV("button",{onClick:()=>lt.id&&tt(lt.id,ct),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!lt.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):S.jsxDEV("div",{className:"text-center py-4",children:[S.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),S.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:S.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},lt.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const mo={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},CU=({onLocationSelect:o,onClose:t,title:a,defaultCenter:c=mo.coordinates,searchPlaceholder:g="Search for a location..."})=>{const N=sN.useRef(Math.random().toString(36).substr(2,9)),b=oe.useRef(null),d=oe.useRef(null),A=oe.useRef(null),[k,O]=oe.useState(""),[B,W]=oe.useState(null),[ie,pe]=oe.useState(!0),[Oe,Se]=oe.useState(null);oe.useEffect(()=>{if(!(!b.current||d.current))return console.log(`🗺️ [${N.current}] Initializing map with center:`,c),console.log(`🗺️ [${N.current}] Ganpat University coordinates:`,mo.coordinates),d.current=new Xa.Map({container:b.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:mo.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),d.current.on("load",()=>{var Re;console.log("🗺️ Map loaded, adding controls and marker");try{(Re=d.current)==null||Re.addControl(new Xa.NavigationControl),A.current=new Xa.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(c).addTo(d.current),d.current.flyTo({center:mo.coordinates,zoom:12,duration:1e3}),W({name:mo.name,coordinates:mo.coordinates,address:mo.address}),A.current.on("dragend",()=>{var tt;const Ze=(tt=A.current)==null?void 0:tt.getLngLat();Ze&&Pe([Ze.lng,Ze.lat])}),console.log(`🗺️ [${N.current}] Map centered on ${mo.name}`),pe(!1)}catch(Ze){console.error("❌ Error setting up map:",Ze),Se("Failed to initialize map"),pe(!1)}}),d.current.on("error",Re=>{console.error("❌ Map error:",Re),Se("Map failed to load"),pe(!1)}),d.current.on("click",Re=>{var tt;const Ze=[Re.lngLat.lng,Re.lngLat.lat];(tt=A.current)==null||tt.setLngLat(Ze),Pe(Ze)}),d.current.on("webglcontextlost",()=>{console.warn("⚠️ WebGL context lost, attempting to restore...")}),d.current.on("webglcontextrestored",()=>{console.log("✅ WebGL context restored")}),()=>{if(d.current){console.log("🗺️ Cleaning up map instance");try{d.current.off("load",()=>{}),d.current.off("click",()=>{}),d.current.off("error",()=>{}),d.current.off("webglcontextlost",()=>{}),d.current.off("webglcontextrestored",()=>{}),A.current&&A.current.remove(),d.current.remove()}catch(Re){console.warn("⚠️ Error during map cleanup:",Re)}finally{d.current=null,A.current=null}}}},[c]);const Pe=async Re=>{try{const tt=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Re[1]}&lon=${Re[0]}&zoom=18&addressdetails=1`)).json(),ut={name:tt.display_name.split(",")[0]||"Selected Location",coordinates:Re,address:tt.display_name};W(ut)}catch(Ze){console.error("Error reverse geocoding:",Ze),W({name:"Selected Location",coordinates:Re,address:`${Re[1]}, ${Re[0]}`})}},De=async()=>{var Re;if(!(!k.trim()||!d.current))try{console.log("🔍 Searching for:",k);const tt=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(k)}&limit=5&countrycodes=in`)).json();if(console.log("🔍 Search results:",tt),tt.length>0){const ut=tt[0],Rt=[parseFloat(ut.lon),parseFloat(ut.lat)];console.log("🗺️ Flying to coordinates:",Rt),d.current.flyTo({center:Rt,zoom:15}),(Re=A.current)==null||Re.setLngLat(Rt);const zt={name:ut.display_name.split(",")[0]||k,coordinates:Rt,address:ut.display_name};W(zt)}else console.log("🔍 No search results found")}catch(Ze){console.error("❌ Error searching location:",Ze)}},Ce=()=>{B&&(o(B),t())},ze=Re=>{Re.key==="Enter"&&De()};return S.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:S.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[S.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[S.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),S.jsxDEV("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:S.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),S.jsxDEV("div",{className:"p-4 border-b",children:[S.jsxDEV("div",{className:"flex gap-2 mb-2",children:[S.jsxDEV("input",{type:"text",value:k,onChange:Re=>O(Re.target.value),onKeyPress:ze,placeholder:g,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),S.jsxDEV("button",{onClick:De,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),S.jsxDEV("div",{className:"flex gap-2",children:S.jsxDEV("button",{onClick:()=>{var Re;d.current&&(console.log("🏫 Resetting to Ganpat University at coordinates:",mo.coordinates),d.current.flyTo({center:mo.coordinates,zoom:12}),(Re=A.current)==null||Re.setLngLat(mo.coordinates),W({name:mo.name,coordinates:mo.coordinates,address:mo.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),S.jsxDEV("div",{className:"flex-1 relative",children:[ie&&S.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),Oe&&S.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",Oe]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),S.jsxDEV("button",{onClick:()=>{Se(null),pe(!0),d.current&&(d.current.remove(),d.current=null,A.current=null);const Re=b.current;Re&&(Re.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),S.jsxDEV("div",{ref:b,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),B&&S.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[S.jsxDEV("div",{className:"mb-4",children:[S.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),S.jsxDEV("p",{className:"text-gray-700 font-medium",children:B.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),B.address&&S.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:B.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),S.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",B.coordinates[1].toFixed(6),","," ",B.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),S.jsxDEV("div",{className:"flex gap-2",children:[S.jsxDEV("button",{onClick:Ce,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),S.jsxDEV("button",{onClick:t,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function NU(){const[o,t]=oe.useState("buses"),[a,c]=oe.useState(!1),[g,N]=oe.useState(null),[b,d]=oe.useState(null),[A,k]=oe.useState([]),[O,B]=oe.useState([]),[W,ie]=oe.useState([]),[pe,Oe]=oe.useState([]),[Se,Pe]=oe.useState(!1),[De,Ce]=oe.useState(!1),[ze,Re]=oe.useState(!1),[Ze,tt]=oe.useState(!1),[ut,Rt]=oe.useState(!1),[zt,fn]=oe.useState(!1),[lt,ct]=oe.useState(null),[ht,$t]=oe.useState(null),[An,Ct]=oe.useState(!1),[pn,Sn]=oe.useState(!1),[Wt,Yn]=oe.useState({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),[Vn,Nt]=oe.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[Be,Mt]=oe.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[yn,Dn]=oe.useState(!1),[qt,Ft]=oe.useState(!1),[Pn,vr]=oe.useState(""),[cn,tr]=oe.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[$r,Sr]=oe.useState(!1),[ur,hi]=oe.useState("destination"),[Lr,ii]=oe.useState(null),[We,mr]=oe.useState(null),rr=oe.useCallback(async()=>{c(!0),N(null);try{const[L,G,J]=await Promise.all([is.getAllBuses(),is.getAllDrivers(),is.getAllRoutes()]);if(L.success&&L.data&&k(L.data),G.success&&G.data){const se=new Map;G.data.forEach(we=>{const xe=we.id;if(!se.has(xe))se.set(xe,we);else{const ge=se.get(xe);(!ge.email&&we.email||ge.email&&we.email&&!ge.first_name&&we.first_name)&&se.set(xe,we)}});const he=Array.from(se.values());B(he)}J.success&&J.data&&Oe(J.data),await Ln(),(!L.success||!G.success||!J.success)&&N("Failed to load some data")}catch(L){N("An error occurred while loading data"),console.error("❌ Data loading error:",L)}finally{c(!1)}},[]);oe.useEffect(()=>{rr()},[rr]);const Ln=async()=>{try{const L=await is.getAssignedDrivers();if(L.success&&L.data){const G=new Map;L.data.forEach(se=>{const he=se.driver_id;if(!G.has(he))G.set(he,se);else{const we=G.get(he);(!we.driver_email&&se.driver_email||we.driver_email&&se.driver_email&&!we.driver_name&&se.driver_name)&&G.set(he,se)}});const J=Array.from(G.values());ie(J)}else console.warn("⚠️ Failed to load assigned drivers:",L.error),ie([])}catch(L){console.warn("⚠️ Failed to load assigned drivers:",L),ie([])}},kn=async L=>{if(L.preventDefault(),c(!0),N(null),A.find(J=>J.code===Wt.code||J.number_plate===Wt.number_plate)){N(`Bus with code '${Wt.code}' or number plate '${Wt.number_plate}' already exists`),c(!1);return}try{const J=await is.createBus(Wt);J.success&&J.data?(k([...A,J.data]),Yn({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),Pe(!1),d("Bus created successfully!"),setTimeout(()=>d(null),3e3)):N(J.error||"Failed to create bus")}catch{N("An error occurred while creating bus")}finally{c(!1)}},yr=async L=>{if(confirm("Are you sure you want to delete this bus?")){c(!0),N(null);try{const G=await is.deleteBus(L);G.success?(k(A.filter(J=>J.id!==L)),d("Bus deleted successfully!"),setTimeout(()=>d(null),3e3)):N(G.error||"Failed to delete bus")}catch{N("An error occurred while deleting bus")}finally{c(!1)}}},si=async(L,G)=>{c(!0),N(null);try{const J=await is.updateBus(L,{route_id:G});J.success&&J.data?(k(A.map(se=>se.id===L?{...se,route_id:G}:se)),d("Route assigned to bus successfully!"),setTimeout(()=>d(null),3e3)):N(J.error||"Failed to assign route to bus")}catch{N("An error occurred while assigning route to bus")}finally{c(!1)}},qr=async L=>{if(L.preventDefault(),c(!0),N(null),!Be.email||!Be.first_name||!Be.last_name||!Be.password){N("All fields are required: Email, First Name, Last Name, and Password"),c(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Be.email)){N("Please enter a valid email address"),c(!1);return}if(Be.password!==Be.confirm_password){N("Passwords do not match"),c(!1);return}if(Be.password.length<6){N("Password must be at least 6 characters long"),c(!1);return}if(O.find(se=>se.email===Be.email)){N("Driver with this email already exists"),c(!1);return}if(!a)try{const se={email:Be.email,first_name:Be.first_name,last_name:Be.last_name,phone:Be.phone,role:"driver",password:Be.password},he=await is.createDriver(se);if(he.success&&he.data){const we=await is.getAllDrivers();if(we.success&&we.data){const xe=new Map;we.data.forEach(Te=>{const Qe=Te.id;if(!xe.has(Qe))xe.set(Qe,Te);else{const ne=xe.get(Qe);(!ne.email&&Te.email||ne.email&&Te.email&&!ne.first_name&&Te.first_name)&&xe.set(Qe,Te)}});const ge=Array.from(xe.values());B(ge)}Mt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),Dn(!1),Ft(!1),Re(!1),d(`Driver ${he.data.first_name} ${he.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>d(null),5e3)}else N(he.error||"Failed to create driver")}catch(se){N("An error occurred while creating driver"),console.error("❌ Error creating driver:",se)}finally{c(!1)}},fs=async(L,G)=>{c(!0),N(null);try{const J=await is.assignDriverToBus(L,G);J.success&&J.data?(await rr(),d("Bus assigned to driver successfully!"),setTimeout(()=>d(null),3e3)):N(J.error||"Failed to assign bus to driver")}catch{N("An error occurred while assigning bus to driver")}finally{c(!1)}},Bi=async L=>{if(confirm("Are you sure you want to unassign this driver?")){c(!0),N(null);try{const G=await is.unassignDriverFromBus(L);G.success?(await rr(),d("Driver unassigned successfully!"),setTimeout(()=>d(null),3e3)):N(G.error||"Failed to unassign driver")}catch{N("An error occurred while unassigning driver")}finally{c(!1)}}},Tt=async(L,G,J)=>{const se=`${G} ${J}`,he=`Are you sure you want to delete driver "${se}"?

This action will:
• Remove the driver from all database tables
• Delete their Supabase Auth account
• Unassign them from any buses
• This action cannot be undone!`;if(confirm(he)){c(!0),N(null);try{const we=await is.deleteDriver(L);we.success&&we.data?(B(O.filter(xe=>xe.id!==L)),ie(W.filter(xe=>xe.driver_id!==L)),d(`Driver "${se}" deleted successfully from all systems!`),setTimeout(()=>d(null),5e3)):N(we.error||`Failed to delete driver "${se}"`)}catch(we){N(`An error occurred while deleting driver "${se}"`),console.error("❌ Error deleting driver:",we)}finally{c(!1)}}},rn=async L=>{if(L.preventDefault(),c(!0),N(null),!cn.name.trim()){N("Route name is required"),c(!1);return}if(!cn.city.trim()){N("City is required"),c(!1);return}if(!cn.description.trim()){N("Route description is required"),c(!1);return}try{const G={...cn,distance_km:parseFloat(cn.distance_km)||0,estimated_duration_minutes:parseInt(cn.estimated_duration_minutes)||0,custom_destination:Lr==null?void 0:Lr.name,custom_destination_coordinates:Lr==null?void 0:Lr.coordinates,custom_origin:We==null?void 0:We.name,custom_origin_coordinates:We==null?void 0:We.coordinates,bus_stops:[]},J=await is.createRoute(G);J.success&&J.data?(Oe([...pe,J.data]),tr({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),ii(null),mr(null),tt(!1),d("Route created successfully!"),setTimeout(()=>d(null),3e3)):N(J.error||"Failed to create route")}catch{N("An error occurred while creating route")}finally{c(!1)}},nt=async L=>{if(confirm("Are you sure you want to delete this route?")){c(!0),N(null);try{const G=await is.deleteRoute(L);G.success?(Oe(pe.filter(J=>J.id!==L)),d("Route deleted successfully!"),setTimeout(()=>d(null),3e3)):N(G.error||"Failed to delete route")}catch{N("An error occurred while deleting route")}finally{c(!1)}}},zn=L=>{if(!L)return"Not Assigned";const G=pe.find(he=>he.id===L);if(!G)return"Unknown Route";const J=G.city||"Unknown City",se=G.destination||"Ganpat University";return`${J} → ${se}`},Cn=L=>{hi(L),Sr(!0)},br=L=>{ur==="destination"?ii(L):mr(L)},dr=L=>{if(!L)return"Not Assigned";const G=O.find(J=>J.id===L);return G?`${G.first_name} ${G.last_name}`:"Unknown Driver"},gt=L=>L.driver_full_name?L.driver_full_name:L.driver_first_name&&L.driver_last_name?`${L.driver_first_name} ${L.driver_last_name}`:L.assigned_driver_id?dr(L.assigned_driver_id):"Not Assigned",Kt=L=>{if(!L)return"Not Assigned";const G=A.find(J=>J.id===L);return G?G.number_plate:"Unknown Bus"},Bt=L=>{ct(L),Ct(!1),Rt(!0)},On=L=>{ct(L),Yn({code:L.code,number_plate:L.number_plate,capacity:L.capacity,model:L.model||"",year:L.year||new Date().getFullYear(),is_active:L.is_active}),Ct(!0),Rt(!0)},Kr=L=>{$t(L),Sn(!1),fn(!0)},un=L=>{$t(L),tr({name:L.name,description:L.description,distance_km:L.distance_km.toString(),estimated_duration_minutes:L.estimated_duration_minutes.toString(),is_active:L.is_active,city:L.city||""}),Sn(!0),fn(!0)},ai=async L=>{if(L.preventDefault(),!!(lt!=null&&lt.id)){c(!0),N(null);try{const G=await is.updateBus(lt.id,Wt);G.success&&G.data?(k(A.map(J=>J.id===lt.id?G.data:J)),Rt(!1),Ct(!1),ct(null),d("Bus updated successfully!"),setTimeout(()=>d(null),3e3)):N(G.error||"Failed to update bus")}catch{N("An error occurred while updating bus")}finally{c(!1)}}},fe=async L=>{if(L.preventDefault(),!!(ht!=null&&ht.id)){c(!0),N(null);try{const G={...cn,distance_km:parseFloat(cn.distance_km)||0,estimated_duration_minutes:parseInt(cn.estimated_duration_minutes)||0},J=await is.updateRoute(ht.id,G);J.success&&J.data?(Oe(pe.map(se=>se.id===ht.id?J.data:se)),fn(!1),Sn(!1),$t(null),d("Route updated successfully!"),setTimeout(()=>d(null),3e3)):N(J.error||"Failed to update route")}catch{N("An error occurred while updating route")}finally{c(!1)}}};return a?S.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[S.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),S.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),S.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):S.jsxDEV("div",{className:"space-y-6",children:[S.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),S.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),S.jsxDEV("button",{onClick:rr,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),b&&S.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:S.jsxDEV("p",{className:"text-green-800",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),g&&S.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:S.jsxDEV("p",{className:"text-red-800",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),S.jsxDEV("div",{className:"border-b border-gray-200",children:S.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[S.jsxDEV("button",{onClick:()=>t("buses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="buses"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🚌 Buses (",A.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),S.jsxDEV("button",{onClick:()=>t("drivers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="drivers"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["👨‍💼 Drivers (",O.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),S.jsxDEV("button",{onClick:()=>t("routes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="routes"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🗺️ Routes (",pe.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),o==="buses"&&S.jsxDEV("div",{className:"space-y-6",children:S.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),S.jsxDEV("div",{className:"flex space-x-2",children:S.jsxDEV("button",{onClick:()=>Pe(!Se),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Se?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),Se&&S.jsxDEV("form",{onSubmit:kn,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:Wt.code,onChange:L=>Yn({...Wt,code:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:Wt.number_plate,onChange:L=>Yn({...Wt,number_plate:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,value:Wt.capacity,onChange:L=>Yn({...Wt,capacity:parseInt(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),S.jsxDEV("input",{type:"text",value:Wt.model,onChange:L=>Yn({...Wt,model:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),S.jsxDEV("input",{type:"number",value:Wt.year,onChange:L=>Yn({...Wt,year:parseInt(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("input",{type:"checkbox",checked:Wt.is_active,onChange:L=>Yn({...Wt,is_active:L.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),S.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),S.jsxDEV("div",{className:"mt-4 flex justify-end",children:S.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),S.jsxDEV("div",{className:"overflow-x-auto",children:S.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsxDEV("thead",{className:"bg-gray-50",children:S.jsxDEV("tr",{children:[S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),S.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(L=>S.jsxDEV("tr",{className:"hover:bg-gray-50",children:[S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:L.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",L.capacity," | ",L.model," (",L.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:gt(L)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.route_name||zn(L.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.route_id?(()=>{const G=pe.find(J=>J.id===L.route_id);return(G==null?void 0:G.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:S.jsxDEV("div",{className:"flex flex-col space-y-2",children:[S.jsxDEV("div",{className:"flex space-x-2",children:[S.jsxDEV("button",{onClick:()=>Bt(L),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),S.jsxDEV("button",{onClick:()=>On(L),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),S.jsxDEV("button",{onClick:()=>yr(L.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),S.jsxDEV("select",{onChange:G=>si(L.id,G.target.value),value:L.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[S.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),pe.map(G=>S.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.name},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),o==="drivers"&&S.jsxDEV("div",{className:"space-y-6",children:[S.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),S.jsxDEV("div",{className:"flex space-x-2",children:[S.jsxDEV("button",{onClick:()=>Re(!ze),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:ze?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),S.jsxDEV("button",{onClick:()=>Ce(!De),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:De?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),De&&S.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[S.jsxDEV("div",{className:"mb-4",children:[S.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),S.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),S.jsxDEV("select",{required:!0,value:Pn,onChange:L=>vr(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[S.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),O.map(L=>S.jsxDEV("option",{value:L.id,className:"text-gray-900",children:[L.first_name," ",L.last_name," (",L.email,")"]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),O.length===0&&S.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),S.jsxDEV("select",{required:!0,value:Vn.assigned_bus_id||"",onChange:L=>Nt({...Vn,assigned_bus_id:L.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[S.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),A.map(L=>S.jsxDEV("option",{value:L.id,className:"text-gray-900",children:[L.number_plate," (",L.model||"Unknown Model",")"]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),S.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[S.jsxDEV("button",{type:"button",onClick:()=>{Ce(!1),vr(""),Nt({...Vn,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),S.jsxDEV("button",{onClick:()=>fs(Pn,Vn.assigned_bus_id),disabled:a||!Pn||!Vn.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),ze&&S.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[S.jsxDEV("div",{className:"mb-4",children:[S.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),S.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),S.jsxDEV("form",{onSubmit:qr,className:"space-y-4",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),S.jsxDEV("input",{type:"email",required:!0,value:Be.email,onChange:L=>Mt({...Be,email:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),S.jsxDEV("input",{type:"text",required:!0,value:Be.first_name,onChange:L=>Mt({...Be,first_name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),S.jsxDEV("input",{type:"text",required:!0,value:Be.last_name,onChange:L=>Mt({...Be,last_name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),S.jsxDEV("input",{type:"tel",value:Be.phone,onChange:L=>Mt({...Be,phone:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),S.jsxDEV("div",{className:"relative",children:[S.jsxDEV("input",{type:yn?"text":"password",required:!0,value:Be.password,onChange:L=>{console.log("Password input changed:",L.target.value),Mt({...Be,password:L.target.value})},onFocus:L=>{console.log("Password field focused"),L.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),S.jsxDEV("button",{type:"button",onClick:()=>Dn(!yn),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:yn?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),S.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",Be.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),S.jsxDEV("div",{className:"relative",children:[S.jsxDEV("input",{type:qt?"text":"password",required:!0,value:Be.confirm_password,onChange:L=>{console.log("Confirm password input changed:",L.target.value),Mt({...Be,confirm_password:L.target.value})},onFocus:L=>{console.log("Confirm password field focused"),L.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),S.jsxDEV("button",{type:"button",onClick:()=>Ft(!qt),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:qt?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),S.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[Be.password!==Be.confirm_password&&Be.confirm_password.length>0&&S.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),Be.password===Be.confirm_password&&Be.confirm_password.length>0&&S.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),S.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[S.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),S.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[S.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),S.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),S.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),S.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),S.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),S.jsxDEV("div",{className:"flex justify-end space-x-2",children:[S.jsxDEV("button",{type:"button",onClick:()=>{Re(!1),Mt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),Dn(!1),Ft(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),S.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),S.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[S.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),S.jsxDEV("button",{onClick:async()=>{try{const L=await is.getAllDrivers();if(L.success&&L.data){const G=new Map;L.data.forEach(se=>{const he=se.id;if(!G.has(he))G.set(he,se);else{const we=G.get(he);(!we.email&&se.email||we.email&&se.email&&!we.first_name&&se.first_name)&&G.set(he,se)}});const J=Array.from(G.values());B(J)}else console.warn("⚠️ Manual refresh failed:",L.error)}catch(L){console.warn("⚠️ Manual refresh failed:",L)}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),O.length>0?S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:O.map(L=>S.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[S.jsxDEV("div",{className:"font-medium text-gray-900",children:[L.first_name," ",L.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),S.jsxDEV("div",{className:"text-sm text-gray-600",children:L.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),S.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",L.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):S.jsxDEV("div",{className:"text-center py-4",children:[S.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),S.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),S.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),S.jsxDEV("div",{className:"overflow-x-auto",children:S.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsxDEV("thead",{className:"bg-gray-50",children:S.jsxDEV("tr",{children:[S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),S.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(L=>S.jsxDEV("tr",{className:"hover:bg-gray-50",children:[S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[L.first_name," ",L.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",L.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:Kt(L.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[S.jsxDEV("select",{onChange:G=>fs(L.id,G.target.value),value:L.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[S.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),A.map(G=>S.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.number_plate},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),S.jsxDEV("button",{onClick:()=>Tt(L.id,L.first_name,L.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),S.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:[W.length," driver",W.length!==1?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),W.length===0?S.jsxDEV("div",{className:"text-center py-8",children:[S.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),S.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),S.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):S.jsxDEV("div",{className:"overflow-x-auto",children:S.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsxDEV("thead",{className:"bg-gray-50",children:S.jsxDEV("tr",{children:[S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),S.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(L=>S.jsxDEV("tr",{className:"hover:bg-gray-50",children:[S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:L.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:L.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[S.jsxDEV("button",{onClick:()=>Bi(L.driver_id),disabled:a,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),S.jsxDEV("button",{onClick:()=>{const G=O.find(J=>J.id===L.driver_id);G&&Tt(G.id,G.first_name,G.last_name)},disabled:a,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},L.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),o==="routes"&&S.jsxDEV("div",{className:"space-y-6",children:S.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),S.jsxDEV("div",{className:"flex space-x-2",children:S.jsxDEV("button",{onClick:()=>tt(!Ze),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Ze?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),Ze&&S.jsxDEV("form",{onSubmit:rn,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:cn.name,onChange:L=>tr({...cn,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:cn.city,onChange:L=>tr({...cn,city:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:cn.distance_km,onChange:L=>tr({...cn,distance_km:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,value:cn.estimated_duration_minutes,onChange:L=>tr({...cn,estimated_duration_minutes:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("input",{type:"checkbox",checked:cn.is_active,onChange:L=>tr({...cn,is_active:L.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),S.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),S.jsxDEV("textarea",{value:cn.description,onChange:L=>tr({...cn,description:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),S.jsxDEV("div",{className:"space-y-2",children:[S.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),Lr&&S.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[S.jsxDEV("div",{className:"font-medium text-green-800",children:Lr.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),S.jsxDEV("div",{className:"text-sm text-green-600",children:Lr.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),S.jsxDEV("button",{type:"button",onClick:()=>Cn("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),S.jsxDEV("div",{className:"space-y-2",children:[S.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),We&&S.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[S.jsxDEV("div",{className:"font-medium text-blue-800",children:We.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),S.jsxDEV("div",{className:"text-sm text-blue-600",children:We.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),S.jsxDEV("button",{type:"button",onClick:()=>Cn("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),S.jsxDEV("div",{className:"mt-4 flex justify-end",children:S.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),S.jsxDEV("div",{className:"overflow-x-auto",children:S.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsxDEV("thead",{className:"bg-gray-50",children:S.jsxDEV("tr",{children:[S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),S.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),S.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(L=>S.jsxDEV("tr",{className:"hover:bg-gray-50",children:[S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{children:[S.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:L.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("div",{className:"text-sm text-gray-900",children:L.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[S.jsxDEV("div",{className:"text-sm text-gray-900",children:[L.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),S.jsxDEV("div",{className:"text-sm text-gray-900",children:[L.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),S.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:S.jsxDEV("div",{className:"flex space-x-2",children:[S.jsxDEV("button",{onClick:()=>Kr(L),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),S.jsxDEV("button",{onClick:()=>un(L),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),S.jsxDEV("button",{onClick:()=>nt(L.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},L.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),$r&&S.jsxDEV(CU,{onLocationSelect:br,onClose:()=>Sr(!1),title:ur==="destination"?"Select Destination":"Select Origin",searchPlaceholder:ur==="destination"?"Search for destination...":"Search for origin..."},`map-selector-${ur}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),ut&&lt&&S.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:S.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:An?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),S.jsxDEV("button",{onClick:()=>{Rt(!1),Ct(!1),ct(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),An?S.jsxDEV("form",{onSubmit:ai,className:"space-y-4",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:Wt.code,onChange:L=>Yn({...Wt,code:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:Wt.number_plate,onChange:L=>Yn({...Wt,number_plate:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,value:Wt.capacity,onChange:L=>Yn({...Wt,capacity:parseInt(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),S.jsxDEV("input",{type:"text",value:Wt.model,onChange:L=>Yn({...Wt,model:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),S.jsxDEV("input",{type:"number",value:Wt.year,onChange:L=>Yn({...Wt,year:parseInt(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("input",{type:"checkbox",checked:Wt.is_active,onChange:L=>Yn({...Wt,is_active:L.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),S.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),S.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[S.jsxDEV("button",{type:"button",onClick:()=>Ct(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),S.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):S.jsxDEV("div",{className:"space-y-4",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:lt.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:lt.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:[lt.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:lt.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:lt.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),S.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${lt.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:lt.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:gt(lt)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:lt.route_name||zn(lt.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),S.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:S.jsxDEV("button",{onClick:()=>Ct(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),zt&&ht&&S.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:S.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[S.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:pn?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),S.jsxDEV("button",{onClick:()=>{fn(!1),Sn(!1),$t(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),pn?S.jsxDEV("form",{onSubmit:fe,className:"space-y-4",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:cn.name,onChange:L=>tr({...cn,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),S.jsxDEV("input",{type:"text",required:!0,value:cn.city,onChange:L=>tr({...cn,city:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:cn.distance_km,onChange:L=>tr({...cn,distance_km:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),S.jsxDEV("input",{type:"number",required:!0,value:cn.estimated_duration_minutes,onChange:L=>tr({...cn,estimated_duration_minutes:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("input",{type:"checkbox",checked:cn.is_active,onChange:L=>tr({...cn,is_active:L.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),S.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),S.jsxDEV("div",{children:[S.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),S.jsxDEV("textarea",{value:cn.description,onChange:L=>tr({...cn,description:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),S.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[S.jsxDEV("button",{type:"button",onClick:()=>Sn(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),S.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):S.jsxDEV("div",{className:"space-y-4",children:[S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:ht.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:ht.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:[ht.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:[ht.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),S.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ht.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ht.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:ht.created_at?new Date(ht.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),ht.description&&S.jsxDEV("div",{children:[S.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-gray-900",children:ht.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),S.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:S.jsxDEV("button",{onClick:()=>Sn(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function SU(){const[o,t]=oe.useState(null),[a,c]=oe.useState(null),[g,N]=oe.useState(!0),[b,d]=oe.useState(null),[A,k]=oe.useState("overview");oe.useEffect(()=>{O()},[]);const O=async()=>{N(!0),d(null);try{const[ie,pe]=await Promise.all([is.getAnalytics(),is.getSystemHealth()]);ie.success&&ie.data&&t(ie.data),pe.success&&pe.data&&c(pe.data),(!ie.success||!pe.success)&&d("Failed to load dashboard data")}catch(ie){d("An error occurred while loading dashboard data"),console.error("❌ Dashboard data loading error:",ie)}finally{N(!1)}},B=async()=>{try{await Pr.signOut(),window.location.href="/"}catch(ie){console.error("❌ Sign out error:",ie)}},W=Pr.getCurrentProfile();return g?S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),S.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):b?S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:S.jsxDEV("div",{className:"card-glass p-8",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),S.jsxDEV("p",{className:"text-red-200 mb-4",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),S.jsxDEV("button",{onClick:O,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[S.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:S.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[S.jsxDEV("div",{className:"flex items-center",children:S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),S.jsxDEV("div",{className:"flex items-center space-x-4",children:[S.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(W==null?void 0:W.first_name)||(W==null?void 0:W.full_name)||(W==null?void 0:W.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),S.jsxDEV("button",{onClick:O,className:"btn-primary text-sm",disabled:g,children:g?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),S.jsxDEV("button",{onClick:B,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),S.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxDEV("div",{className:"border-b border-white/20",children:S.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[S.jsxDEV("button",{onClick:()=>k("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="overview"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:157,columnNumber:13},this),S.jsxDEV("button",{onClick:()=>k("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="analytics"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:167,columnNumber:13},this),S.jsxDEV("button",{onClick:()=>k("management"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="management"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:177,columnNumber:13},this),S.jsxDEV("button",{onClick:()=>k("media"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="media"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:156,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:155,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:7},this),S.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[A==="overview"&&S.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[S.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:S.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:217,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:212,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:211,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:210,columnNumber:21},this),S.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:S.jsxDEV("dl",{children:[S.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this),S.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:226,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:222,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:221,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:15},this),S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:S.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:245,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:240,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:239,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:238,columnNumber:21},this),S.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:S.jsxDEV("dl",{children:[S.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this),S.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:258,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:254,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:253,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:15},this),S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:S.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:277,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:272,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:271,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:270,columnNumber:21},this),S.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:S.jsxDEV("dl",{children:[S.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this),S.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:286,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:282,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:281,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:15},this),S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:S.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:305,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:300,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:299,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:298,columnNumber:21},this),S.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:S.jsxDEV("dl",{children:[S.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this),S.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:318,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:314,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:313,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:13},this),o&&S.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this),S.jsxDEV("div",{className:"space-y-3",children:[S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this),S.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeBuses,"/",o.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:341,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:337,columnNumber:23},this),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this),S.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeRoutes,"/",o.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:349,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:345,columnNumber:23},this),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this),S.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeDrivers,"/",o.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:357,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:353,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:336,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:332,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:331,columnNumber:17},this),S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this),S.jsxDEV("div",{className:"space-y-3",children:[S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this),S.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:375,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:371,columnNumber:23},this),S.jsxDEV("div",{className:"flex justify-between",children:[S.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this),S.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:383,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:370,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:366,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:365,columnNumber:17},this),S.jsxDEV("div",{className:"card-glass overflow-hidden",children:S.jsxDEV("div",{className:"p-5",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this),S.jsxDEV("div",{className:"text-sm text-white/70",children:a!=null&&a.timestamp?new Date(a.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:396,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:392,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:391,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:11},this),A==="analytics"&&o&&S.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:S.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[S.jsxDEV("div",{className:"card-glass p-6",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this),S.jsxDEV("div",{className:"space-y-4",children:[S.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[S.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this),S.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:o.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:417,columnNumber:19},this),S.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[S.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this),S.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:o.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:429,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:425,columnNumber:19},this),S.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[S.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this),S.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:o.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:437,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:433,columnNumber:19},this),S.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[S.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this),S.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[o.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:445,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:441,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:416,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:412,columnNumber:15},this),S.jsxDEV("div",{className:"card-glass p-6",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this),S.jsxDEV("div",{className:"space-y-4",children:[S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:S.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${o.activeBuses/o.totalBuses*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:464,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:463,columnNumber:23},this),S.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeBuses,"/",o.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:471,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:462,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:458,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:S.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${o.activeRoutes/o.totalRoutes*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:482,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:481,columnNumber:23},this),S.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeRoutes,"/",o.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:489,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:480,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:476,columnNumber:19},this),S.jsxDEV("div",{className:"flex items-center justify-between",children:[S.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this),S.jsxDEV("div",{className:"flex items-center",children:[S.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:S.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${o.activeDrivers/o.totalDrivers*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:500,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:499,columnNumber:23},this),S.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeDrivers,"/",o.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:507,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:498,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:494,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:457,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:453,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:11},this),A==="management"&&S.jsxDEV(NU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:40},this),A==="media"&&S.jsxDEV(wU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:522,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}function oj(){const[o,t]=oe.useState(!1),[a,c]=oe.useState(!1),[g,N]=oe.useState(!0),[b,d]=oe.useState(null);oe.useEffect(()=>{A();const B=()=>{A()};return Pr.onAuthStateChange(B),()=>{Pr.removeAuthStateChangeListener()}},[]);const A=async()=>{try{for(N(!0),d(null);!Pr.isInitialized();)await new Promise(ie=>setTimeout(ie,100));const B=Pr.isAuthenticated(),W=Pr.isAdmin();console.log("🔍 Auth Status Check:",{initialized:Pr.isInitialized(),authenticated:B,admin:W}),t(B),c(W),B&&!W?d("Access denied. Admin privileges required."):B||d(null)}catch(B){console.error("❌ Auth status check error:",B),d("Failed to check authentication status"),t(!1),c(!1)}finally{N(!1)}},k=()=>{t(!0),c(!0),d(null)},O=async()=>{try{const B=await Pr.signOut();B.success?(t(!1),c(!1),d(null)):(console.error("❌ Sign out failed:",B.error),t(!1),c(!1),d("Sign out failed, but you have been logged out locally."))}catch(B){console.error("❌ Sign out error:",B),t(!1),c(!1),d("Sign out failed, but you have been logged out locally.")}};return g?S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:100,columnNumber:11},this),S.jsxDEV("p",{className:"mt-4 text-white/70",children:"Checking authentication..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:98,columnNumber:7},this):o?a?S.jsxDEV(SU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:169,columnNumber:10},this):S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:S.jsxDEV("div",{className:"card-glass p-8 max-w-md",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Access Denied"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:145,columnNumber:13},this),S.jsxDEV("p",{className:"text-red-200 mb-4",children:"You don't have admin privileges. Please contact your administrator."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:148,columnNumber:13},this),b&&S.jsxDEV("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-400/30 rounded-lg",children:S.jsxDEV("p",{className:"text-sm text-red-200",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:154,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:153,columnNumber:15},this),S.jsxDEV("button",{onClick:O,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:157,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:144,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:143,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:142,columnNumber:7},this):b&&b.includes("environment variables")?S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"text-center",children:S.jsxDEV("div",{className:"card-glass p-8 max-w-md",children:[S.jsxDEV("h3",{className:"text-lg font-medium text-yellow-300 mb-2",children:"Configuration Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:114,columnNumber:15},this),S.jsxDEV("p",{className:"text-yellow-200 mb-4",children:"The application is not properly configured. Please check your environment variables."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:117,columnNumber:15},this),S.jsxDEV("p",{className:"text-sm text-yellow-100 mb-4",children:"Make sure the .env file exists in the frontend directory with the correct Supabase configuration."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:121,columnNumber:15},this),S.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Reload Page"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:113,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:111,columnNumber:9},this):S.jsxDEV($k,{onLoginSuccess:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminPanel.tsx",lineNumber:137,columnNumber:12},this)}const EU=({children:o,className:t=""})=>S.jsxDEV(er.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:t,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),fC=({children:o,className:t=""})=>S.jsxDEV(er.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:t,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),DU=()=>{const o=i0(),t=oe.useRef(null),[a,c]=oe.useState(!1),[g,N]=oe.useState(!1);oe.useEffect(()=>{const k=()=>{c(window.innerWidth<768)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),oe.useEffect(()=>{if(t.current){t.current.playbackRate=.8;const k=()=>N(!0);return t.current.addEventListener("loadeddata",k),()=>{t.current&&t.current.removeEventListener("loadeddata",k)}}},[]);const{setTransition:b}=v0(),d=k=>{k.includes("login")?b("homepage-to-login"):k.includes("student")||k.includes("student-map")?b("homepage-to-map"):b("default"),setTimeout(()=>{o(k)},200)},A=a?8:20;return S.jsxDEV("div",{className:"relative min-h-screen overflow-hidden",children:[S.jsxDEV("div",{className:"absolute inset-0 z-0",children:[S.jsxDEV("video",{ref:t,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",preload:"auto",children:[S.jsxDEV("source",{src:"/videos/Animated_Countryside_University_Bus.mp4",type:"video/mp4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:78,columnNumber:11},void 0),"Your browser does not support the video tag."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:69,columnNumber:9},void 0),S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-black/60"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:83,columnNumber:9},void 0),!g&&S.jsxDEV("div",{className:"absolute inset-0 bg-slate-900 flex items-center justify-center",children:S.jsxDEV("div",{className:"loading-spinner"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:88,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:87,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:68,columnNumber:7},void 0),S.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[S.jsxDEV(er.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[S.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:S.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:103,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:102,columnNumber:11},void 0),S.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:107,columnNumber:11},void 0),S.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:110,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:96,columnNumber:9},void 0),S.jsxDEV(EU,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[S.jsxDEV(fC,{children:S.jsxDEV(er.div,{whileHover:a?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:125,columnNumber:15},void 0),S.jsxDEV(zv,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>d("/driver-login"),children:[S.jsxDEV("div",{className:"text-center px-2",children:[S.jsxDEV("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4 animate-pulse",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:134,columnNumber:19},void 0),S.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:137,columnNumber:19},void 0),S.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:140,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:133,columnNumber:17},void 0),S.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:S.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:147,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:146,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:127,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:116,columnNumber:11},void 0),S.jsxDEV(fC,{children:S.jsxDEV(er.div,{whileHover:a?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:163,columnNumber:15},void 0),S.jsxDEV(zv,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>d("/student-map"),children:[S.jsxDEV("div",{className:"text-center px-2",children:[S.jsxDEV("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4 animate-pulse",children:"🗺️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:172,columnNumber:19},void 0),S.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:175,columnNumber:19},void 0),S.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:178,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:171,columnNumber:17},void 0),S.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:S.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:185,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:184,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:155,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:154,columnNumber:11},void 0),S.jsxDEV(fC,{children:S.jsxDEV(er.div,{whileHover:a?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[S.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:201,columnNumber:15},void 0),S.jsxDEV(zv,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>d("/admin-login"),children:[S.jsxDEV("div",{className:"text-center px-2",children:[S.jsxDEV("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4 animate-pulse",children:"⚙️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:210,columnNumber:19},void 0),S.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:213,columnNumber:19},void 0),S.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:216,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:209,columnNumber:17},void 0),S.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:S.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:223,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:222,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:203,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:193,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:192,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:114,columnNumber:9},void 0),S.jsxDEV(er.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:S.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:237,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:231,columnNumber:9},void 0),S.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(A)].map((k,O)=>S.jsxDEV(er.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},O,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:246,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:244,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:94,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:66,columnNumber:5},void 0)};function TU(){console.log("🚀 App component is rendering...");const[o,t]=oe.useState(null),[a,c]=oe.useState(!0),[g,N]=oe.useState(null),[b,d]=oe.useState({isAuthenticated:!1,user:null,loading:!0});oe.useEffect(()=>{(async()=>{try{for(c(!0);!Pr.isInitialized();)await new Promise(W=>setTimeout(W,100));const B=await jC.getHealth();t(B),N(null)}catch(B){N(B instanceof Error?B.message:"Failed to connect to backend"),t(null)}finally{c(!1)}})()},[]),oe.useEffect(()=>{const O=()=>{const B=Pr.getCurrentUser(),W=Pr.getCurrentProfile();d({isAuthenticated:!!B,user:W||null,loading:!1})};return Pr.onAuthStateChange(O),O(),()=>{Pr.removeAuthStateChangeListener()}},[]);const A=()=>{var O,B,W,ie,pe,Oe,Se,Pe,De,Ce;return S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:S.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:S.jsxDEV("div",{className:"card-glass p-8",children:[S.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:86,columnNumber:11},this),S.jsxDEV("div",{className:"space-y-6",children:[a&&S.jsxDEV("div",{className:"text-center",children:[S.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:93,columnNumber:17},this),S.jsxDEV("p",{className:"text-white/70 mt-4",children:"Checking backend connection..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:94,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:92,columnNumber:15},this),g&&S.jsxDEV("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:S.jsxDEV("div",{className:"flex",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:109,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:104,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:103,columnNumber:19},this),S.jsxDEV("div",{className:"ml-3",children:[S.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:117,columnNumber:21},this),S.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:120,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:116,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:102,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:101,columnNumber:15},this),o&&S.jsxDEV("div",{className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:S.jsxDEV("div",{className:"flex",children:[S.jsxDEV("div",{className:"flex-shrink-0",children:S.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:135,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:130,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:129,columnNumber:19},this),S.jsxDEV("div",{className:"ml-3",children:[S.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Backend Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:143,columnNumber:21},this),S.jsxDEV("div",{className:"text-sm text-green-200 mt-1 space-y-1",children:[S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:148,columnNumber:25},this)," ",o.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:147,columnNumber:23},this),S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"Database:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:151,columnNumber:25},this)," ",((B=(O=o.services)==null?void 0:O.database)==null?void 0:B.status)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:150,columnNumber:23},this),S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"Environment:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:155,columnNumber:25},this)," ",o.environment]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:23},this),S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:25},this)," ",new Date(o.timestamp).toLocaleString()]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:157,columnNumber:23},this),((ie=(W=o.services)==null?void 0:W.database)==null?void 0:ie.details)&&S.jsxDEV("div",{className:"mt-2 text-xs",children:[S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"PostgreSQL:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:164,columnNumber:29},this)," ",((pe=o.services.database.details.details)==null?void 0:pe.postgresVersion)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:163,columnNumber:27},this),S.jsxDEV("p",{children:[S.jsxDEV("strong",{children:"Pool Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:169,columnNumber:29},this)," ",`Total: ${((Oe=o.services.database.details.details)==null?void 0:Oe.poolSize)||0}, Idle: ${((Se=o.services.database.details.details)==null?void 0:Se.idleCount)||0}, Waiting: ${((Pe=o.services.database.details.details)==null?void 0:Pe.waitingCount)||0}`]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:168,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:146,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:142,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:128,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:127,columnNumber:15},this),S.jsxDEV("div",{className:"text-center text-sm text-white/60 mt-6",children:[S.jsxDEV("p",{children:"Phase 5: Admin Panel & Analytics Dashboard ✅"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:181,columnNumber:15},this),S.jsxDEV("p",{className:"mt-1",children:"Role-based access control, analytics charts, and system management"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:182,columnNumber:15},this),b.isAuthenticated&&S.jsxDEV("p",{className:"mt-2 text-green-400",children:["✅ Authenticated as:"," ",((De=b.user)==null?void 0:De.full_name)||((Ce=b.user)==null?void 0:Ce.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:187,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:13},this),S.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[S.jsxDEV(Nf,{to:"/driver",className:"btn-primary text-center block",children:"🚌 Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:196,columnNumber:15},this),S.jsxDEV(Nf,{to:"/student",className:"btn-primary text-center block",children:"👨‍🎓 Student Map (Live Tracking)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:200,columnNumber:15},this),S.jsxDEV(Nf,{to:"/admin",className:"btn-primary text-center block",children:"👨‍💼 Admin Panel (Phase 5)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:204,columnNumber:15},this),S.jsxDEV(Nf,{to:"/premium-demo",className:"btn-secondary text-center block",children:"✨ Premium UI Demo"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:208,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:195,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:85,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:84,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:83,columnNumber:5},this)},k=()=>S.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:S.jsxDEV("div",{className:"max-w-md w-full mx-auto text-center",children:S.jsxDEV("div",{className:"card-glass p-8",children:[S.jsxDEV("h1",{className:"text-6xl font-bold gradient-text mb-4",children:"404"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:226,columnNumber:11},this),S.jsxDEV("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Page Not Found"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:227,columnNumber:11},this),S.jsxDEV("p",{className:"text-white/70 mb-6",children:"The page you're looking for doesn't exist."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:230,columnNumber:11},this),S.jsxDEV(Nf,{to:"/",className:"btn-primary inline-block",children:"Go Back Home"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:225,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:224,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:223,columnNumber:5},this);return S.jsxDEV(i3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:S.jsxDEV(dU,{children:S.jsxDEV(pU,{children:S.jsxDEV($V,{children:[S.jsxDEV(gl,{path:"/",element:S.jsxDEV(DU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:247,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:247,columnNumber:13},this),S.jsxDEV(gl,{path:"/legacy",element:S.jsxDEV(A,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:250,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:250,columnNumber:13},this),S.jsxDEV(gl,{path:"/driver",element:S.jsxDEV(kz,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:251,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:251,columnNumber:13},this),S.jsxDEV(gl,{path:"/student",element:S.jsxDEV(aj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:252,columnNumber:45},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:252,columnNumber:13},this),S.jsxDEV(gl,{path:"/admin",element:S.jsxDEV(oj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:253,columnNumber:43},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:253,columnNumber:13},this),S.jsxDEV(gl,{path:"/driver-login",element:S.jsxDEV(gU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:256,columnNumber:50},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:256,columnNumber:13},this),S.jsxDEV(gl,{path:"/driver-dashboard",element:S.jsxDEV(vU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:257,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:257,columnNumber:13},this),S.jsxDEV(gl,{path:"/student-map",element:S.jsxDEV(aj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:13},this),S.jsxDEV(gl,{path:"/admin-login",element:S.jsxDEV($k,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:259,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:259,columnNumber:13},this),S.jsxDEV(gl,{path:"/admin-dashboard",element:S.jsxDEV(oj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:260,columnNumber:53},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:260,columnNumber:13},this),S.jsxDEV(gl,{path:"*",element:S.jsxDEV(k,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:245,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:244,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:243,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:242,columnNumber:5},this)}class PU extends oe.Component{constructor(){super(...arguments);Js(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,c){console.error("Uncaught error:",a,c)}render(){return this.state.hasError?S.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:S.jsxDEV("div",{className:"max-w-md w-full mx-auto p-6",children:S.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsxDEV("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"🚨 Application Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:31,columnNumber:15},this),S.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Something went wrong. Please try refreshing the page."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:34,columnNumber:15},this),this.state.error&&S.jsxDEV("details",{className:"text-left bg-gray-100 p-4 rounded-lg mb-4",children:[S.jsxDEV("summary",{className:"cursor-pointer font-medium text-gray-700",children:"Error Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:39,columnNumber:19},this),S.jsxDEV("pre",{className:"text-xs text-red-600 mt-2 whitespace-pre-wrap",children:this.state.error.toString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:42,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:38,columnNumber:17},this),S.jsxDEV("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Refresh Page"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:47,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:30,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:29,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ErrorBoundary.tsx",lineNumber:28,columnNumber:9},this):this.props.children}}const jU=()=>{{const o=console.warn;console.warn=(...t)=>{const a=t[0];typeof a=="string"&&(a.includes("React Router Future Flag Warning")||a.includes("v7_startTransition")||a.includes("v7_relativeSplatPath"))||typeof a=="string"&&a.includes("WebGL context was lost")||typeof a=="string"&&(a.includes("Firefox can't establish a connection")||a.includes("connection was interrupted while the page was loading"))||o.apply(console,t)}}},AU=window.fetch;window.fetch=async function(o,t){if(typeof o=="string"&&(o.includes(eu.api.url)||o.includes("localhost")))try{let a=Pr.getAccessToken();!a&&Pr.isAuthenticated()&&(console.log("🔄 No token found but user is authenticated, attempting to refresh session..."),(await Pr.refreshSession()).success&&(a=Pr.getAccessToken(),console.log("✅ Session refreshed, new token obtained"))),a&&(t=t||{},t.headers={...t.headers,Authorization:`Bearer ${a}`})}catch{console.log("🔓 Public access - authentication not available")}return AU(o,t)};jU();pC.createRoot(document.getElementById("root")).render(S.jsxDEV(sN.StrictMode,{children:S.jsxDEV(PU,{children:S.jsxDEV(TU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:14,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:13,columnNumber:3},void 0));
//# sourceMappingURL=index-Di143-no.js.map
