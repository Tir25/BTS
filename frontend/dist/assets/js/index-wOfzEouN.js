var eI=Object.defineProperty;var tI=(l,n,o)=>n in l?eI(l,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[n]=o;var mi=(l,n,o)=>tI(l,typeof n!="symbol"?n+"":n,o);function nI(l,n){for(var o=0;o<n.length;o++){const d=n[o];if(typeof d!="string"&&!Array.isArray(d)){for(const y in d)if(y!=="default"&&!(y in l)){const E=Object.getOwnPropertyDescriptor(d,y);E&&Object.defineProperty(l,y,E.get?E:{enumerable:!0,get:()=>d[y]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))d(y);new MutationObserver(y=>{for(const E of y)if(E.type==="childList")for(const x of E.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function o(y){const E={};return y.integrity&&(E.integrity=y.integrity),y.referrerPolicy&&(E.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?E.credentials="include":y.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function d(y){if(y.ep)return;y.ep=!0;const E=o(y);fetch(y.href,E)}})();var Oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PP(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function rI(l){if(l.__esModule)return l;var n=l.default;if(typeof n=="function"){var o=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(l).forEach(function(d){var y=Object.getOwnPropertyDescriptor(l,d);Object.defineProperty(o,d,y.get?y:{enumerable:!0,get:function(){return l[d]}})}),o}var jP={exports:{}},hC={},kP={exports:{}},Ux={exports:{}};Ux.exports;(function(l,n){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var o="18.3.1",d=Symbol.for("react.element"),y=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),k=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),De=Symbol.iterator,Ae="@@iterator";function we(K){if(K===null||typeof K!="object")return null;var _e=De&&K[De]||K[Ae];return typeof _e=="function"?_e:null}var fe={current:null},Ve={transition:null},ze={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},Je={current:null},Ye={},ot=null;function wt(K){ot=K}Ye.setExtraStackFrame=function(K){ot=K},Ye.getCurrentStack=null,Ye.getStackAddendum=function(){var K="";ot&&(K+=ot);var _e=Ye.getCurrentStack;return _e&&(K+=_e()||""),K};var gt=!1,sn=!1,st=!1,vt=!1,Nt=!1,on={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:Ve,ReactCurrentOwner:Je};on.ReactDebugCurrentFrame=Ye,on.ReactCurrentActQueue=ze;function yn(K){{for(var _e=arguments.length,Ge=new Array(_e>1?_e-1:0),et=1;et<_e;et++)Ge[et-1]=arguments[et];Wt("warn",K,Ge)}}function zt(K){{for(var _e=arguments.length,Ge=new Array(_e>1?_e-1:0),et=1;et<_e;et++)Ge[et-1]=arguments[et];Wt("error",K,Ge)}}function Wt(K,_e,Ge){{var et=on.ReactDebugCurrentFrame,jt=et.getStackAddendum();jt!==""&&(_e+="%s",Ge=Ge.concat([jt]));var Cn=Ge.map(function(Zt){return String(Zt)});Cn.unshift("Warning: "+_e),Function.prototype.apply.call(console[K],console,Cn)}}var dn={};function St(K,_e){{var Ge=K.constructor,et=Ge&&(Ge.displayName||Ge.name)||"ReactClass",jt=et+"."+_e;if(dn[jt])return;zt("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",_e,et),dn[jt]=!0}}var Rt={isMounted:function(K){return!1},enqueueForceUpdate:function(K,_e,Ge){St(K,"forceUpdate")},enqueueReplaceState:function(K,_e,Ge,et){St(K,"replaceState")},enqueueSetState:function(K,_e,Ge,et){St(K,"setState")}},Ht=Object.assign,ct={};Object.freeze(ct);function Ie(K,_e,Ge){this.props=K,this.context=_e,this.refs=ct,this.updater=Ge||Rt}Ie.prototype.isReactComponent={},Ie.prototype.setState=function(K,_e){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,_e,"setState")},Ie.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};{var bt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},hn=function(K,_e){Object.defineProperty(Ie.prototype,K,{get:function(){yn("%s(...) is deprecated in plain JavaScript React classes. %s",_e[0],_e[1])}})};for(var Sn in bt)bt.hasOwnProperty(Sn)&&hn(Sn,bt[Sn])}function Ft(){}Ft.prototype=Ie.prototype;function Bt(K,_e,Ge){this.props=K,this.context=_e,this.refs=ct,this.updater=Ge||Rt}var fn=Bt.prototype=new Ft;fn.constructor=Bt,Ht(fn,Ie.prototype),fn.isPureReactComponent=!0;function Bn(){var K={current:null};return Object.seal(K),K}var rn=Array.isArray;function Fn(K){return rn(K)}function Ur(K){{var _e=typeof Symbol=="function"&&Symbol.toStringTag,Ge=_e&&K[Symbol.toStringTag]||K.constructor.name||"Object";return Ge}}function Un(K){try{return er(K),!1}catch{return!0}}function er(K){return""+K}function Ti(K){if(Un(K))return zt("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ur(K)),er(K)}function Gr(K,_e,Ge){var et=K.displayName;if(et)return et;var jt=_e.displayName||_e.name||"";return jt!==""?Ge+"("+jt+")":Ge}function Li(K){return K.displayName||"Context"}function qe(K){if(K==null)return null;if(typeof K.tag=="number"&&zt("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof K=="function")return K.displayName||K.name||null;if(typeof K=="string")return K;switch(K){case E:return"Fragment";case y:return"Portal";case u:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case W:return"SuspenseList"}if(typeof K=="object")switch(K.$$typeof){case k:var _e=K;return Li(_e)+".Consumer";case A:var Ge=K;return Li(Ge._context)+".Provider";case B:return Gr(K,K.render,"ForwardRef");case ne:var et=K.displayName||null;return et!==null?et:qe(K.type)||"Memo";case me:{var jt=K,Cn=jt._payload,Zt=jt._init;try{return qe(Zt(Cn))}catch{return null}}}return null}var xr=Object.prototype.hasOwnProperty,hr={key:!0,ref:!0,__self:!0,__source:!0},zn,Ln,Dr;Dr={};function pi(K){if(xr.call(K,"ref")){var _e=Object.getOwnPropertyDescriptor(K,"ref").get;if(_e&&_e.isReactWarning)return!1}return K.ref!==void 0}function oi(K){if(xr.call(K,"key")){var _e=Object.getOwnPropertyDescriptor(K,"key").get;if(_e&&_e.isReactWarning)return!1}return K.key!==void 0}function Bs(K,_e){var Ge=function(){zn||(zn=!0,zt("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Ge.isReactWarning=!0,Object.defineProperty(K,"key",{get:Ge,configurable:!0})}function ds(K,_e){var Ge=function(){Ln||(Ln=!0,zt("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_e))};Ge.isReactWarning=!0,Object.defineProperty(K,"ref",{get:Ge,configurable:!0})}function Mt(K){if(typeof K.ref=="string"&&Je.current&&K.__self&&Je.current.stateNode!==K.__self){var _e=qe(Je.current.type);Dr[_e]||(zt('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_e,K.ref),Dr[_e]=!0)}}var an=function(K,_e,Ge,et,jt,Cn,Zt){var An={$$typeof:d,type:K,key:_e,ref:Ge,props:Zt,_owner:Cn};return An._store={},Object.defineProperty(An._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(An,"_self",{configurable:!1,enumerable:!1,writable:!1,value:et}),Object.defineProperty(An,"_source",{configurable:!1,enumerable:!1,writable:!1,value:jt}),Object.freeze&&(Object.freeze(An.props),Object.freeze(An)),An};function Qe(K,_e,Ge){var et,jt={},Cn=null,Zt=null,An=null,or=null;if(_e!=null){pi(_e)&&(Zt=_e.ref,Mt(_e)),oi(_e)&&(Ti(_e.key),Cn=""+_e.key),An=_e.__self===void 0?null:_e.__self,or=_e.__source===void 0?null:_e.__source;for(et in _e)xr.call(_e,et)&&!hr.hasOwnProperty(et)&&(jt[et]=_e[et])}var jr=arguments.length-2;if(jr===1)jt.children=Ge;else if(jr>1){for(var Wr=Array(jr),Zr=0;Zr<jr;Zr++)Wr[Zr]=arguments[Zr+2];Object.freeze&&Object.freeze(Wr),jt.children=Wr}if(K&&K.defaultProps){var tr=K.defaultProps;for(et in tr)jt[et]===void 0&&(jt[et]=tr[et])}if(Cn||Zt){var Kr=typeof K=="function"?K.displayName||K.name||"Unknown":K;Cn&&Bs(jt,Kr),Zt&&ds(jt,Kr)}return an(K,Cn,Zt,An,or,Je.current,jt)}function Hn(K,_e){var Ge=an(K.type,_e,K.ref,K._self,K._source,K._owner,K.props);return Ge}function Tn(K,_e,Ge){if(K==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var et,jt=Ht({},K.props),Cn=K.key,Zt=K.ref,An=K._self,or=K._source,jr=K._owner;if(_e!=null){pi(_e)&&(Zt=_e.ref,jr=Je.current),oi(_e)&&(Ti(_e.key),Cn=""+_e.key);var Wr;K.type&&K.type.defaultProps&&(Wr=K.type.defaultProps);for(et in _e)xr.call(_e,et)&&!hr.hasOwnProperty(et)&&(_e[et]===void 0&&Wr!==void 0?jt[et]=Wr[et]:jt[et]=_e[et])}var Zr=arguments.length-2;if(Zr===1)jt.children=Ge;else if(Zr>1){for(var tr=Array(Zr),Kr=0;Kr<Zr;Kr++)tr[Kr]=arguments[Kr+2];jt.children=tr}return an(K.type,Cn,Zt,An,or,jr,jt)}function wr(K){return typeof K=="object"&&K!==null&&K.$$typeof===d}var pr=".",dt=":";function tn(K){var _e=/[=:]/g,Ge={"=":"=0",":":"=2"},et=K.replace(_e,function(jt){return Ge[jt]});return"$"+et}var Ut=!1,nr=/\/+/g;function gi(K){return K.replace(nr,"$&/")}function bn(K,_e){return typeof K=="object"&&K!==null&&K.key!=null?(Ti(K.key),tn(""+K.key)):_e.toString(36)}function vi(K,_e,Ge,et,jt){var Cn=typeof K;(Cn==="undefined"||Cn==="boolean")&&(K=null);var Zt=!1;if(K===null)Zt=!0;else switch(Cn){case"string":case"number":Zt=!0;break;case"object":switch(K.$$typeof){case d:case y:Zt=!0}}if(Zt){var An=K,or=jt(An),jr=et===""?pr+bn(An,0):et;if(Fn(or)){var Wr="";jr!=null&&(Wr=gi(jr)+"/"),vi(or,_e,Wr,"",function(sd){return sd})}else or!=null&&(wr(or)&&(or.key&&(!An||An.key!==or.key)&&Ti(or.key),or=Hn(or,Ge+(or.key&&(!An||An.key!==or.key)?gi(""+or.key)+"/":"")+jr)),_e.push(or));return 1}var Zr,tr,Kr=0,di=et===""?pr:et+dt;if(Fn(K))for(var ba=0;ba<K.length;ba++)Zr=K[ba],tr=di+bn(Zr,ba),Kr+=vi(Zr,_e,Ge,tr,jt);else{var Pl=we(K);if(typeof Pl=="function"){var $s=K;Pl===$s.entries&&(Ut||yn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Ut=!0);for(var vc=Pl.call($s),yc,ru=0;!(yc=vc.next()).done;)Zr=yc.value,tr=di+bn(Zr,ru++),Kr+=vi(Zr,_e,Ge,tr,jt)}else if(Cn==="object"){var na=String(K);throw new Error("Objects are not valid as a React child (found: "+(na==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":na)+"). If you meant to render a collection of children, use an array instead.")}}return Kr}function he(K,_e,Ge){if(K==null)return K;var et=[],jt=0;return vi(K,et,"","",function(Cn){return _e.call(Ge,Cn,jt++)}),et}function I(K){var _e=0;return he(K,function(){_e++}),_e}function G(K,_e,Ge){he(K,function(){_e.apply(this,arguments)},Ge)}function J(K){return he(K,function(_e){return _e})||[]}function ie(K){if(!wr(K))throw new Error("React.Children.only expected to receive a single React element child.");return K}function de(K){var _e={$$typeof:k,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};_e.Provider={$$typeof:A,_context:_e};var Ge=!1,et=!1,jt=!1;{var Cn={$$typeof:k,_context:_e};Object.defineProperties(Cn,{Provider:{get:function(){return et||(et=!0,zt("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),_e.Provider},set:function(Zt){_e.Provider=Zt}},_currentValue:{get:function(){return _e._currentValue},set:function(Zt){_e._currentValue=Zt}},_currentValue2:{get:function(){return _e._currentValue2},set:function(Zt){_e._currentValue2=Zt}},_threadCount:{get:function(){return _e._threadCount},set:function(Zt){_e._threadCount=Zt}},Consumer:{get:function(){return Ge||(Ge=!0,zt("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),_e.Consumer}},displayName:{get:function(){return _e.displayName},set:function(Zt){jt||(yn("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Zt),jt=!0)}}}),_e.Consumer=Cn}return _e._currentRenderer=null,_e._currentRenderer2=null,_e}var Ce=-1,xe=0,ge=1,Ee=2;function Ke(K){if(K._status===Ce){var _e=K._result,Ge=_e();if(Ge.then(function(Cn){if(K._status===xe||K._status===Ce){var Zt=K;Zt._status=ge,Zt._result=Cn}},function(Cn){if(K._status===xe||K._status===Ce){var Zt=K;Zt._status=Ee,Zt._result=Cn}}),K._status===Ce){var et=K;et._status=xe,et._result=Ge}}if(K._status===ge){var jt=K._result;return jt===void 0&&zt(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,jt),"default"in jt||zt(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,jt),jt.default}else throw K._result}function te(K){var _e={_status:Ce,_result:K},Ge={$$typeof:me,_payload:_e,_init:Ke};{var et,jt;Object.defineProperties(Ge,{defaultProps:{configurable:!0,get:function(){return et},set:function(Cn){zt("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),et=Cn,Object.defineProperty(Ge,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return jt},set:function(Cn){zt("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),jt=Cn,Object.defineProperty(Ge,"propTypes",{enumerable:!0})}}})}return Ge}function Se(K){K!=null&&K.$$typeof===ne?zt("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof K!="function"?zt("forwardRef requires a render function but was given %s.",K===null?"null":typeof K):K.length!==0&&K.length!==2&&zt("forwardRef render functions accept exactly two parameters: props and ref. %s",K.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),K!=null&&(K.defaultProps!=null||K.propTypes!=null)&&zt("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var _e={$$typeof:B,render:K};{var Ge;Object.defineProperty(_e,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ge},set:function(et){Ge=et,!K.name&&!K.displayName&&(K.displayName=et)}})}return _e}var Xe;Xe=Symbol.for("react.module.reference");function ht(K){return!!(typeof K=="string"||typeof K=="function"||K===E||K===u||Nt||K===x||K===O||K===W||vt||K===ke||gt||sn||st||typeof K=="object"&&K!==null&&(K.$$typeof===me||K.$$typeof===ne||K.$$typeof===A||K.$$typeof===k||K.$$typeof===B||K.$$typeof===Xe||K.getModuleId!==void 0))}function pt(K,_e){ht(K)||zt("memo: The first argument must be a component. Instead received: %s",K===null?"null":typeof K);var Ge={$$typeof:ne,type:K,compare:_e===void 0?null:_e};{var et;Object.defineProperty(Ge,"displayName",{enumerable:!1,configurable:!0,get:function(){return et},set:function(jt){et=jt,!K.name&&!K.displayName&&(K.displayName=jt)}})}return Ge}function ft(){var K=fe.current;return K===null&&zt(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),K}function Tt(K){var _e=ft();if(K._context!==void 0){var Ge=K._context;Ge.Consumer===K?zt("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Ge.Provider===K&&zt("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return _e.useContext(K)}function Lt(K){var _e=ft();return _e.useState(K)}function kn(K,_e,Ge){var et=ft();return et.useReducer(K,_e,Ge)}function vn(K){var _e=ft();return _e.useRef(K)}function gn(K,_e){var Ge=ft();return Ge.useEffect(K,_e)}function Cr(K,_e){var Ge=ft();return Ge.useInsertionEffect(K,_e)}function ar(K,_e){var Ge=ft();return Ge.useLayoutEffect(K,_e)}function Tr(K,_e){var Ge=ft();return Ge.useCallback(K,_e)}function cr(K,_e){var Ge=ft();return Ge.useMemo(K,_e)}function Ki(K,_e,Ge){var et=ft();return et.useImperativeHandle(K,_e,Ge)}function mo(K,_e){{var Ge=ft();return Ge.useDebugValue(K,_e)}}function In(){var K=ft();return K.useTransition()}function po(K){var _e=ft();return _e.useDeferredValue(K)}function nd(){var K=ft();return K.useId()}function gr(K,_e,Ge){var et=ft();return et.useSyncExternalStore(K,_e,Ge)}var Qo=0,Fa,Ii,is,eu,hs,Vi,xl;function Vo(){}Vo.__reactDisabledLog=!0;function zr(){{if(Qo===0){Fa=console.log,Ii=console.info,is=console.warn,eu=console.error,hs=console.group,Vi=console.groupCollapsed,xl=console.groupEnd;var K={configurable:!0,enumerable:!0,value:Vo,writable:!0};Object.defineProperties(console,{info:K,log:K,warn:K,error:K,group:K,groupCollapsed:K,groupEnd:K})}Qo++}}function Gn(){{if(Qo--,Qo===0){var K={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Ht({},K,{value:Fa}),info:Ht({},K,{value:Ii}),warn:Ht({},K,{value:is}),error:Ht({},K,{value:eu}),group:Ht({},K,{value:hs}),groupCollapsed:Ht({},K,{value:Vi}),groupEnd:Ht({},K,{value:xl})})}Qo<0&&zt("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ys=on.ReactCurrentDispatcher,Pr;function ga(K,_e,Ge){{if(Pr===void 0)try{throw Error()}catch(jt){var et=jt.stack.trim().match(/\n( *(at )?)/);Pr=et&&et[1]||""}return`
`+Pr+K}}var Yi=!1,Ua;{var go=typeof WeakMap=="function"?WeakMap:Map;Ua=new go}function tu(K,_e){if(!K||Yi)return"";{var Ge=Ua.get(K);if(Ge!==void 0)return Ge}var et;Yi=!0;var jt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Cn;Cn=Ys.current,Ys.current=null,zr();try{if(_e){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(di){et=di}Reflect.construct(K,[],Zt)}else{try{Zt.call()}catch(di){et=di}K.call(Zt.prototype)}}else{try{throw Error()}catch(di){et=di}K()}}catch(di){if(di&&et&&typeof di.stack=="string"){for(var An=di.stack.split(`
`),or=et.stack.split(`
`),jr=An.length-1,Wr=or.length-1;jr>=1&&Wr>=0&&An[jr]!==or[Wr];)Wr--;for(;jr>=1&&Wr>=0;jr--,Wr--)if(An[jr]!==or[Wr]){if(jr!==1||Wr!==1)do if(jr--,Wr--,Wr<0||An[jr]!==or[Wr]){var Zr=`
`+An[jr].replace(" at new "," at ");return K.displayName&&Zr.includes("<anonymous>")&&(Zr=Zr.replace("<anonymous>",K.displayName)),typeof K=="function"&&Ua.set(K,Zr),Zr}while(jr>=1&&Wr>=0);break}}}finally{Yi=!1,Ys.current=Cn,Gn(),Error.prepareStackTrace=jt}var tr=K?K.displayName||K.name:"",Kr=tr?ga(tr):"";return typeof K=="function"&&Ua.set(K,Kr),Kr}function _l(K,_e,Ge){return tu(K,!1)}function fc(K){var _e=K.prototype;return!!(_e&&_e.isReactComponent)}function ea(K,_e,Ge){if(K==null)return"";if(typeof K=="function")return tu(K,fc(K));if(typeof K=="string")return ga(K);switch(K){case O:return ga("Suspense");case W:return ga("SuspenseList")}if(typeof K=="object")switch(K.$$typeof){case B:return _l(K.render);case ne:return ea(K.type,_e,Ge);case me:{var et=K,jt=et._payload,Cn=et._init;try{return ea(Cn(jt),_e,Ge)}catch{}}}return""}var zo={},wl=on.ReactDebugCurrentFrame;function sr(K){if(K){var _e=K._owner,Ge=ea(K.type,K._source,_e?_e.type:null);wl.setExtraStackFrame(Ge)}else wl.setExtraStackFrame(null)}function rd(K,_e,Ge,et,jt){{var Cn=Function.call.bind(xr);for(var Zt in K)if(Cn(K,Zt)){var An=void 0;try{if(typeof K[Zt]!="function"){var or=Error((et||"React class")+": "+Ge+" type `"+Zt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof K[Zt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw or.name="Invariant Violation",or}An=K[Zt](_e,Zt,et,Ge,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(jr){An=jr}An&&!(An instanceof Error)&&(sr(jt),zt("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",et||"React class",Ge,Zt,typeof An),sr(null)),An instanceof Error&&!(An.message in zo)&&(zo[An.message]=!0,sr(jt),zt("Failed %s type: %s",Ge,An.message),sr(null))}}}function va(K){if(K){var _e=K._owner,Ge=ea(K.type,K._source,_e?_e.type:null);wt(Ge)}else wt(null)}var jn;jn=!1;function Cl(){if(Je.current){var K=qe(Je.current.type);if(K)return`

Check the render method of \``+K+"`."}return""}function fs(K){if(K!==void 0){var _e=K.fileName.replace(/^.*[\\\/]/,""),Ge=K.lineNumber;return`

Check your code at `+_e+":"+Ge+"."}return""}function Nl(K){return K!=null?fs(K.__source):""}var ya={};function id(K){var _e=Cl();if(!_e){var Ge=typeof K=="string"?K:K.displayName||K.name;Ge&&(_e=`

Check the top-level render call using <`+Ge+">.")}return _e}function Pi(K,_e){if(!(!K._store||K._store.validated||K.key!=null)){K._store.validated=!0;var Ge=id(_e);if(!ya[Ge]){ya[Ge]=!0;var et="";K&&K._owner&&K._owner!==Je.current&&(et=" It was passed a child from "+qe(K._owner.type)+"."),va(K),zt('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ge,et),va(null)}}}function ei(K,_e){if(typeof K=="object"){if(Fn(K))for(var Ge=0;Ge<K.length;Ge++){var et=K[Ge];wr(et)&&Pi(et,_e)}else if(wr(K))K._store&&(K._store.validated=!0);else if(K){var jt=we(K);if(typeof jt=="function"&&jt!==K.entries)for(var Cn=jt.call(K),Zt;!(Zt=Cn.next()).done;)wr(Zt.value)&&Pi(Zt.value,_e)}}}function nu(K){{var _e=K.type;if(_e==null||typeof _e=="string")return;var Ge;if(typeof _e=="function")Ge=_e.propTypes;else if(typeof _e=="object"&&(_e.$$typeof===B||_e.$$typeof===ne))Ge=_e.propTypes;else return;if(Ge){var et=qe(_e);rd(Ge,K.props,"prop",et,K)}else if(_e.PropTypes!==void 0&&!jn){jn=!0;var jt=qe(_e);zt("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",jt||"Unknown")}typeof _e.getDefaultProps=="function"&&!_e.getDefaultProps.isReactClassApproved&&zt("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Fs(K){{for(var _e=Object.keys(K.props),Ge=0;Ge<_e.length;Ge++){var et=_e[Ge];if(et!=="children"&&et!=="key"){va(K),zt("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",et),va(null);break}}K.ref!==null&&(va(K),zt("Invalid attribute `ref` supplied to `React.Fragment`."),va(null))}}function ss(K,_e,Ge){var et=ht(K);if(!et){var jt="";(K===void 0||typeof K=="object"&&K!==null&&Object.keys(K).length===0)&&(jt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Cn=Nl(_e);Cn?jt+=Cn:jt+=Cl();var Zt;K===null?Zt="null":Fn(K)?Zt="array":K!==void 0&&K.$$typeof===d?(Zt="<"+(qe(K.type)||"Unknown")+" />",jt=" Did you accidentally export a JSX literal instead of a component?"):Zt=typeof K,zt("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Zt,jt)}var An=Qe.apply(this,arguments);if(An==null)return An;if(et)for(var or=2;or<arguments.length;or++)ei(arguments[or],K);return K===E?Fs(An):nu(An),An}var os=!1;function mc(K){var _e=ss.bind(null,K);return _e.type=K,os||(os=!0,yn("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(_e,"type",{enumerable:!1,get:function(){return yn("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:K}),K}}),_e}function ms(K,_e,Ge){for(var et=Tn.apply(this,arguments),jt=2;jt<arguments.length;jt++)ei(arguments[jt],et.type);return nu(et),et}function Sl(K,_e){var Ge=Ve.transition;Ve.transition={};var et=Ve.transition;Ve.transition._updatedFibers=new Set;try{K()}finally{if(Ve.transition=Ge,Ge===null&&et._updatedFibers){var jt=et._updatedFibers.size;jt>10&&yn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),et._updatedFibers.clear()}}}var $a=!1,ta=null;function pc(K){if(ta===null)try{var _e=("require"+Math.random()).slice(0,7),Ge=l&&l[_e];ta=Ge.call(l,"timers").setImmediate}catch{ta=function(jt){$a===!1&&($a=!0,typeof MessageChannel>"u"&&zt("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Cn=new MessageChannel;Cn.port1.onmessage=jt,Cn.port2.postMessage(void 0)}}return ta(K)}var Xs=0,Us=!1;function Wn(K){{var _e=Xs;Xs++,ze.current===null&&(ze.current=[]);var Ge=ze.isBatchingLegacy,et;try{if(ze.isBatchingLegacy=!0,et=K(),!Ge&&ze.didScheduleLegacyUpdate){var jt=ze.current;jt!==null&&(ze.didScheduleLegacyUpdate=!1,qa(jt))}}catch(tr){throw vo(_e),tr}finally{ze.isBatchingLegacy=Ge}if(et!==null&&typeof et=="object"&&typeof et.then=="function"){var Cn=et,Zt=!1,An={then:function(tr,Kr){Zt=!0,Cn.then(function(di){vo(_e),Xs===0?Xi(di,tr,Kr):tr(di)},function(di){vo(_e),Kr(di)})}};return!Us&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Zt||(Us=!0,zt("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),An}else{var or=et;if(vo(_e),Xs===0){var jr=ze.current;jr!==null&&(qa(jr),ze.current=null);var Wr={then:function(tr,Kr){ze.current===null?(ze.current=[],Xi(or,tr,Kr)):tr(or)}};return Wr}else{var Zr={then:function(tr,Kr){tr(or)}};return Zr}}}}function vo(K){K!==Xs-1&&zt("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Xs=K}function Xi(K,_e,Ge){{var et=ze.current;if(et!==null)try{qa(et),pc(function(){et.length===0?(ze.current=null,_e(K)):Xi(K,_e,Ge)})}catch(jt){Ge(jt)}else _e(K)}}var Ji=!1;function qa(K){if(!Ji){Ji=!0;var _e=0;try{for(;_e<K.length;_e++){var Ge=K[_e];do Ge=Ge(!0);while(Ge!==null)}K.length=0}catch(et){throw K=K.slice(_e+1),et}finally{Ji=!1}}}var El=ss,Dl=ms,Tl=mc,gc={map:he,forEach:G,count:I,toArray:J,only:ie};n.Children=gc,n.Component=Ie,n.Fragment=E,n.Profiler=u,n.PureComponent=Bt,n.StrictMode=x,n.Suspense=O,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=on,n.act=Wn,n.cloneElement=Dl,n.createContext=de,n.createElement=El,n.createFactory=Tl,n.createRef=Bn,n.forwardRef=Se,n.isValidElement=wr,n.lazy=te,n.memo=pt,n.startTransition=Sl,n.unstable_act=Wn,n.useCallback=Tr,n.useContext=Tt,n.useDebugValue=mo,n.useDeferredValue=po,n.useEffect=gn,n.useId=nd,n.useImperativeHandle=Ki,n.useInsertionEffect=Cr,n.useLayoutEffect=ar,n.useMemo=cr,n.useReducer=kn,n.useRef=vn,n.useState=Lt,n.useSyncExternalStore=gr,n.useTransition=In,n.version=o,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Ux,Ux.exports);var iI=Ux.exports;kP.exports=iI;var se=kP.exports;const Uv=PP(se),sI=nI({__proto__:null,default:Uv},[se]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var l=se,n=Symbol.for("react.element"),o=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),u=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),me=Symbol.iterator,ke="@@iterator";function De(te){if(te===null||typeof te!="object")return null;var Se=me&&te[me]||te[ke];return typeof Se=="function"?Se:null}var Ae=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function we(te){{for(var Se=arguments.length,Xe=new Array(Se>1?Se-1:0),ht=1;ht<Se;ht++)Xe[ht-1]=arguments[ht];fe("error",te,Xe)}}function fe(te,Se,Xe){{var ht=Ae.ReactDebugCurrentFrame,pt=ht.getStackAddendum();pt!==""&&(Se+="%s",Xe=Xe.concat([pt]));var ft=Xe.map(function(Tt){return String(Tt)});ft.unshift("Warning: "+Se),Function.prototype.apply.call(console[te],console,ft)}}var Ve=!1,ze=!1,Je=!1,Ye=!1,ot=!1,wt;wt=Symbol.for("react.module.reference");function gt(te){return!!(typeof te=="string"||typeof te=="function"||te===d||te===E||ot||te===y||te===k||te===B||Ye||te===ne||Ve||ze||Je||typeof te=="object"&&te!==null&&(te.$$typeof===W||te.$$typeof===O||te.$$typeof===x||te.$$typeof===u||te.$$typeof===A||te.$$typeof===wt||te.getModuleId!==void 0))}function sn(te,Se,Xe){var ht=te.displayName;if(ht)return ht;var pt=Se.displayName||Se.name||"";return pt!==""?Xe+"("+pt+")":Xe}function st(te){return te.displayName||"Context"}function vt(te){if(te==null)return null;if(typeof te.tag=="number"&&we("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof te=="function")return te.displayName||te.name||null;if(typeof te=="string")return te;switch(te){case d:return"Fragment";case o:return"Portal";case E:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList"}if(typeof te=="object")switch(te.$$typeof){case u:var Se=te;return st(Se)+".Consumer";case x:var Xe=te;return st(Xe._context)+".Provider";case A:return sn(te,te.render,"ForwardRef");case O:var ht=te.displayName||null;return ht!==null?ht:vt(te.type)||"Memo";case W:{var pt=te,ft=pt._payload,Tt=pt._init;try{return vt(Tt(ft))}catch{return null}}}return null}var Nt=Object.assign,on=0,yn,zt,Wt,dn,St,Rt,Ht;function ct(){}ct.__reactDisabledLog=!0;function Ie(){{if(on===0){yn=console.log,zt=console.info,Wt=console.warn,dn=console.error,St=console.group,Rt=console.groupCollapsed,Ht=console.groupEnd;var te={configurable:!0,enumerable:!0,value:ct,writable:!0};Object.defineProperties(console,{info:te,log:te,warn:te,error:te,group:te,groupCollapsed:te,groupEnd:te})}on++}}function bt(){{if(on--,on===0){var te={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Nt({},te,{value:yn}),info:Nt({},te,{value:zt}),warn:Nt({},te,{value:Wt}),error:Nt({},te,{value:dn}),group:Nt({},te,{value:St}),groupCollapsed:Nt({},te,{value:Rt}),groupEnd:Nt({},te,{value:Ht})})}on<0&&we("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var hn=Ae.ReactCurrentDispatcher,Sn;function Ft(te,Se,Xe){{if(Sn===void 0)try{throw Error()}catch(pt){var ht=pt.stack.trim().match(/\n( *(at )?)/);Sn=ht&&ht[1]||""}return`
`+Sn+te}}var Bt=!1,fn;{var Bn=typeof WeakMap=="function"?WeakMap:Map;fn=new Bn}function rn(te,Se){if(!te||Bt)return"";{var Xe=fn.get(te);if(Xe!==void 0)return Xe}var ht;Bt=!0;var pt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ft;ft=hn.current,hn.current=null,Ie();try{if(Se){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(cr){ht=cr}Reflect.construct(te,[],Tt)}else{try{Tt.call()}catch(cr){ht=cr}te.call(Tt.prototype)}}else{try{throw Error()}catch(cr){ht=cr}te()}}catch(cr){if(cr&&ht&&typeof cr.stack=="string"){for(var Lt=cr.stack.split(`
`),kn=ht.stack.split(`
`),vn=Lt.length-1,gn=kn.length-1;vn>=1&&gn>=0&&Lt[vn]!==kn[gn];)gn--;for(;vn>=1&&gn>=0;vn--,gn--)if(Lt[vn]!==kn[gn]){if(vn!==1||gn!==1)do if(vn--,gn--,gn<0||Lt[vn]!==kn[gn]){var Cr=`
`+Lt[vn].replace(" at new "," at ");return te.displayName&&Cr.includes("<anonymous>")&&(Cr=Cr.replace("<anonymous>",te.displayName)),typeof te=="function"&&fn.set(te,Cr),Cr}while(vn>=1&&gn>=0);break}}}finally{Bt=!1,hn.current=ft,bt(),Error.prepareStackTrace=pt}var ar=te?te.displayName||te.name:"",Tr=ar?Ft(ar):"";return typeof te=="function"&&fn.set(te,Tr),Tr}function Fn(te,Se,Xe){return rn(te,!1)}function Ur(te){var Se=te.prototype;return!!(Se&&Se.isReactComponent)}function Un(te,Se,Xe){if(te==null)return"";if(typeof te=="function")return rn(te,Ur(te));if(typeof te=="string")return Ft(te);switch(te){case k:return Ft("Suspense");case B:return Ft("SuspenseList")}if(typeof te=="object")switch(te.$$typeof){case A:return Fn(te.render);case O:return Un(te.type,Se,Xe);case W:{var ht=te,pt=ht._payload,ft=ht._init;try{return Un(ft(pt),Se,Xe)}catch{}}}return""}var er=Object.prototype.hasOwnProperty,Ti={},Gr=Ae.ReactDebugCurrentFrame;function Li(te){if(te){var Se=te._owner,Xe=Un(te.type,te._source,Se?Se.type:null);Gr.setExtraStackFrame(Xe)}else Gr.setExtraStackFrame(null)}function qe(te,Se,Xe,ht,pt){{var ft=Function.call.bind(er);for(var Tt in te)if(ft(te,Tt)){var Lt=void 0;try{if(typeof te[Tt]!="function"){var kn=Error((ht||"React class")+": "+Xe+" type `"+Tt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof te[Tt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw kn.name="Invariant Violation",kn}Lt=te[Tt](Se,Tt,ht,Xe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(vn){Lt=vn}Lt&&!(Lt instanceof Error)&&(Li(pt),we("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ht||"React class",Xe,Tt,typeof Lt),Li(null)),Lt instanceof Error&&!(Lt.message in Ti)&&(Ti[Lt.message]=!0,Li(pt),we("Failed %s type: %s",Xe,Lt.message),Li(null))}}}var xr=Array.isArray;function hr(te){return xr(te)}function zn(te){{var Se=typeof Symbol=="function"&&Symbol.toStringTag,Xe=Se&&te[Symbol.toStringTag]||te.constructor.name||"Object";return Xe}}function Ln(te){try{return Dr(te),!1}catch{return!0}}function Dr(te){return""+te}function pi(te){if(Ln(te))return we("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",zn(te)),Dr(te)}var oi=Ae.ReactCurrentOwner,Bs={key:!0,ref:!0,__self:!0,__source:!0},ds,Mt,an;an={};function Qe(te){if(er.call(te,"ref")){var Se=Object.getOwnPropertyDescriptor(te,"ref").get;if(Se&&Se.isReactWarning)return!1}return te.ref!==void 0}function Hn(te){if(er.call(te,"key")){var Se=Object.getOwnPropertyDescriptor(te,"key").get;if(Se&&Se.isReactWarning)return!1}return te.key!==void 0}function Tn(te,Se){if(typeof te.ref=="string"&&oi.current&&Se&&oi.current.stateNode!==Se){var Xe=vt(oi.current.type);an[Xe]||(we('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',vt(oi.current.type),te.ref),an[Xe]=!0)}}function wr(te,Se){{var Xe=function(){ds||(ds=!0,we("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Se))};Xe.isReactWarning=!0,Object.defineProperty(te,"key",{get:Xe,configurable:!0})}}function pr(te,Se){{var Xe=function(){Mt||(Mt=!0,we("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Se))};Xe.isReactWarning=!0,Object.defineProperty(te,"ref",{get:Xe,configurable:!0})}}var dt=function(te,Se,Xe,ht,pt,ft,Tt){var Lt={$$typeof:n,type:te,key:Se,ref:Xe,props:Tt,_owner:ft};return Lt._store={},Object.defineProperty(Lt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Lt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ht}),Object.defineProperty(Lt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:pt}),Object.freeze&&(Object.freeze(Lt.props),Object.freeze(Lt)),Lt};function tn(te,Se,Xe,ht,pt){{var ft,Tt={},Lt=null,kn=null;Xe!==void 0&&(pi(Xe),Lt=""+Xe),Hn(Se)&&(pi(Se.key),Lt=""+Se.key),Qe(Se)&&(kn=Se.ref,Tn(Se,pt));for(ft in Se)er.call(Se,ft)&&!Bs.hasOwnProperty(ft)&&(Tt[ft]=Se[ft]);if(te&&te.defaultProps){var vn=te.defaultProps;for(ft in vn)Tt[ft]===void 0&&(Tt[ft]=vn[ft])}if(Lt||kn){var gn=typeof te=="function"?te.displayName||te.name||"Unknown":te;Lt&&wr(Tt,gn),kn&&pr(Tt,gn)}return dt(te,Lt,kn,pt,ht,oi.current,Tt)}}var Ut=Ae.ReactCurrentOwner,nr=Ae.ReactDebugCurrentFrame;function gi(te){if(te){var Se=te._owner,Xe=Un(te.type,te._source,Se?Se.type:null);nr.setExtraStackFrame(Xe)}else nr.setExtraStackFrame(null)}var bn;bn=!1;function vi(te){return typeof te=="object"&&te!==null&&te.$$typeof===n}function he(){{if(Ut.current){var te=vt(Ut.current.type);if(te)return`

Check the render method of \``+te+"`."}return""}}function I(te){{if(te!==void 0){var Se=te.fileName.replace(/^.*[\\\/]/,""),Xe=te.lineNumber;return`

Check your code at `+Se+":"+Xe+"."}return""}}var G={};function J(te){{var Se=he();if(!Se){var Xe=typeof te=="string"?te:te.displayName||te.name;Xe&&(Se=`

Check the top-level render call using <`+Xe+">.")}return Se}}function ie(te,Se){{if(!te._store||te._store.validated||te.key!=null)return;te._store.validated=!0;var Xe=J(Se);if(G[Xe])return;G[Xe]=!0;var ht="";te&&te._owner&&te._owner!==Ut.current&&(ht=" It was passed a child from "+vt(te._owner.type)+"."),gi(te),we('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Xe,ht),gi(null)}}function de(te,Se){{if(typeof te!="object")return;if(hr(te))for(var Xe=0;Xe<te.length;Xe++){var ht=te[Xe];vi(ht)&&ie(ht,Se)}else if(vi(te))te._store&&(te._store.validated=!0);else if(te){var pt=De(te);if(typeof pt=="function"&&pt!==te.entries)for(var ft=pt.call(te),Tt;!(Tt=ft.next()).done;)vi(Tt.value)&&ie(Tt.value,Se)}}}function Ce(te){{var Se=te.type;if(Se==null||typeof Se=="string")return;var Xe;if(typeof Se=="function")Xe=Se.propTypes;else if(typeof Se=="object"&&(Se.$$typeof===A||Se.$$typeof===O))Xe=Se.propTypes;else return;if(Xe){var ht=vt(Se);qe(Xe,te.props,"prop",ht,te)}else if(Se.PropTypes!==void 0&&!bn){bn=!0;var pt=vt(Se);we("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",pt||"Unknown")}typeof Se.getDefaultProps=="function"&&!Se.getDefaultProps.isReactClassApproved&&we("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function xe(te){{for(var Se=Object.keys(te.props),Xe=0;Xe<Se.length;Xe++){var ht=Se[Xe];if(ht!=="children"&&ht!=="key"){gi(te),we("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ht),gi(null);break}}te.ref!==null&&(gi(te),we("Invalid attribute `ref` supplied to `React.Fragment`."),gi(null))}}var ge={};function Ee(te,Se,Xe,ht,pt,ft){{var Tt=gt(te);if(!Tt){var Lt="";(te===void 0||typeof te=="object"&&te!==null&&Object.keys(te).length===0)&&(Lt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var kn=I(pt);kn?Lt+=kn:Lt+=he();var vn;te===null?vn="null":hr(te)?vn="array":te!==void 0&&te.$$typeof===n?(vn="<"+(vt(te.type)||"Unknown")+" />",Lt=" Did you accidentally export a JSX literal instead of a component?"):vn=typeof te,we("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",vn,Lt)}var gn=tn(te,Se,Xe,pt,ft);if(gn==null)return gn;if(Tt){var Cr=Se.children;if(Cr!==void 0)if(ht)if(hr(Cr)){for(var ar=0;ar<Cr.length;ar++)de(Cr[ar],te);Object.freeze&&Object.freeze(Cr)}else we("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else de(Cr,te)}if(er.call(Se,"key")){var Tr=vt(te),cr=Object.keys(Se).filter(function(In){return In!=="key"}),Ki=cr.length>0?"{key: someKey, "+cr.join(": ..., ")+": ...}":"{key: someKey}";if(!ge[Tr+Ki]){var mo=cr.length>0?"{"+cr.join(": ..., ")+": ...}":"{}";we(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ki,Tr,mo,Tr),ge[Tr+Ki]=!0}}return te===d?xe(gn):Ce(gn),gn}}var Ke=Ee;hC.Fragment=d,hC.jsxDEV=Ke})();jP.exports=hC;var _=jP.exports,fC={},AP={exports:{}},za={},MP={exports:{}},RP={};(function(l){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n=!1,o=5;function d(Mt,an){var Qe=Mt.length;Mt.push(an),x(Mt,an,Qe)}function y(Mt){return Mt.length===0?null:Mt[0]}function E(Mt){if(Mt.length===0)return null;var an=Mt[0],Qe=Mt.pop();return Qe!==an&&(Mt[0]=Qe,u(Mt,Qe,0)),an}function x(Mt,an,Qe){for(var Hn=Qe;Hn>0;){var Tn=Hn-1>>>1,wr=Mt[Tn];if(A(wr,an)>0)Mt[Tn]=an,Mt[Hn]=wr,Hn=Tn;else return}}function u(Mt,an,Qe){for(var Hn=Qe,Tn=Mt.length,wr=Tn>>>1;Hn<wr;){var pr=(Hn+1)*2-1,dt=Mt[pr],tn=pr+1,Ut=Mt[tn];if(A(dt,an)<0)tn<Tn&&A(Ut,dt)<0?(Mt[Hn]=Ut,Mt[tn]=an,Hn=tn):(Mt[Hn]=dt,Mt[pr]=an,Hn=pr);else if(tn<Tn&&A(Ut,an)<0)Mt[Hn]=Ut,Mt[tn]=an,Hn=tn;else return}}function A(Mt,an){var Qe=Mt.sortIndex-an.sortIndex;return Qe!==0?Qe:Mt.id-an.id}var k=1,B=2,O=3,W=4,ne=5;function me(Mt,an){}var ke=typeof performance=="object"&&typeof performance.now=="function";if(ke){var De=performance;l.unstable_now=function(){return De.now()}}else{var Ae=Date,we=Ae.now();l.unstable_now=function(){return Ae.now()-we}}var fe=1073741823,Ve=-1,ze=250,Je=5e3,Ye=1e4,ot=fe,wt=[],gt=[],sn=1,st=null,vt=O,Nt=!1,on=!1,yn=!1,zt=typeof setTimeout=="function"?setTimeout:null,Wt=typeof clearTimeout=="function"?clearTimeout:null,dn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function St(Mt){for(var an=y(gt);an!==null;){if(an.callback===null)E(gt);else if(an.startTime<=Mt)E(gt),an.sortIndex=an.expirationTime,d(wt,an);else return;an=y(gt)}}function Rt(Mt){if(yn=!1,St(Mt),!on)if(y(wt)!==null)on=!0,Dr(Ht);else{var an=y(gt);an!==null&&pi(Rt,an.startTime-Mt)}}function Ht(Mt,an){on=!1,yn&&(yn=!1,oi()),Nt=!0;var Qe=vt;try{var Hn;if(!n)return ct(Mt,an)}finally{st=null,vt=Qe,Nt=!1}}function ct(Mt,an){var Qe=an;for(St(Qe),st=y(wt);st!==null&&!(st.expirationTime>Qe&&(!Mt||Gr()));){var Hn=st.callback;if(typeof Hn=="function"){st.callback=null,vt=st.priorityLevel;var Tn=st.expirationTime<=Qe,wr=Hn(Tn);Qe=l.unstable_now(),typeof wr=="function"?st.callback=wr:st===y(wt)&&E(wt),St(Qe)}else E(wt);st=y(wt)}if(st!==null)return!0;var pr=y(gt);return pr!==null&&pi(Rt,pr.startTime-Qe),!1}function Ie(Mt,an){switch(Mt){case k:case B:case O:case W:case ne:break;default:Mt=O}var Qe=vt;vt=Mt;try{return an()}finally{vt=Qe}}function bt(Mt){var an;switch(vt){case k:case B:case O:an=O;break;default:an=vt;break}var Qe=vt;vt=an;try{return Mt()}finally{vt=Qe}}function hn(Mt){var an=vt;return function(){var Qe=vt;vt=an;try{return Mt.apply(this,arguments)}finally{vt=Qe}}}function Sn(Mt,an,Qe){var Hn=l.unstable_now(),Tn;if(typeof Qe=="object"&&Qe!==null){var wr=Qe.delay;typeof wr=="number"&&wr>0?Tn=Hn+wr:Tn=Hn}else Tn=Hn;var pr;switch(Mt){case k:pr=Ve;break;case B:pr=ze;break;case ne:pr=ot;break;case W:pr=Ye;break;case O:default:pr=Je;break}var dt=Tn+pr,tn={id:sn++,callback:an,priorityLevel:Mt,startTime:Tn,expirationTime:dt,sortIndex:-1};return Tn>Hn?(tn.sortIndex=Tn,d(gt,tn),y(wt)===null&&tn===y(gt)&&(yn?oi():yn=!0,pi(Rt,Tn-Hn))):(tn.sortIndex=dt,d(wt,tn),!on&&!Nt&&(on=!0,Dr(Ht))),tn}function Ft(){}function Bt(){!on&&!Nt&&(on=!0,Dr(Ht))}function fn(){return y(wt)}function Bn(Mt){Mt.callback=null}function rn(){return vt}var Fn=!1,Ur=null,Un=-1,er=o,Ti=-1;function Gr(){var Mt=l.unstable_now()-Ti;return!(Mt<er)}function Li(){}function qe(Mt){if(Mt<0||Mt>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Mt>0?er=Math.floor(1e3/Mt):er=o}var xr=function(){if(Ur!==null){var Mt=l.unstable_now();Ti=Mt;var an=!0,Qe=!0;try{Qe=Ur(an,Mt)}finally{Qe?hr():(Fn=!1,Ur=null)}}else Fn=!1},hr;if(typeof dn=="function")hr=function(){dn(xr)};else if(typeof MessageChannel<"u"){var zn=new MessageChannel,Ln=zn.port2;zn.port1.onmessage=xr,hr=function(){Ln.postMessage(null)}}else hr=function(){zt(xr,0)};function Dr(Mt){Ur=Mt,Fn||(Fn=!0,hr())}function pi(Mt,an){Un=zt(function(){Mt(l.unstable_now())},an)}function oi(){Wt(Un),Un=-1}var Bs=Li,ds=null;l.unstable_IdlePriority=ne,l.unstable_ImmediatePriority=k,l.unstable_LowPriority=W,l.unstable_NormalPriority=O,l.unstable_Profiling=ds,l.unstable_UserBlockingPriority=B,l.unstable_cancelCallback=Bn,l.unstable_continueExecution=Bt,l.unstable_forceFrameRate=qe,l.unstable_getCurrentPriorityLevel=rn,l.unstable_getFirstCallbackNode=fn,l.unstable_next=bt,l.unstable_pauseExecution=Ft,l.unstable_requestPaint=Bs,l.unstable_runWithPriority=Ie,l.unstable_scheduleCallback=Sn,l.unstable_shouldYield=Gr,l.unstable_wrapCallback=hn,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(RP);MP.exports=RP;var oI=MP.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var l=se,n=oI,o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=!1;function y(e){d=e}function E(e){if(!d){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];u("warn",e,h)}}function x(e){if(!d){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];u("error",e,h)}}function u(e,i,h){{var p=o.ReactDebugCurrentFrame,C=p.getStackAddendum();C!==""&&(i+="%s",h=h.concat([C]));var D=h.map(function(L){return String(L)});D.unshift("Warning: "+i),Function.prototype.apply.call(console[e],console,D)}}var A=0,k=1,B=2,O=3,W=4,ne=5,me=6,ke=7,De=8,Ae=9,we=10,fe=11,Ve=12,ze=13,Je=14,Ye=15,ot=16,wt=17,gt=18,sn=19,st=21,vt=22,Nt=23,on=24,yn=25,zt=!0,Wt=!1,dn=!1,St=!1,Rt=!1,Ht=!0,ct=!0,Ie=!0,bt=!0,hn=new Set,Sn={},Ft={};function Bt(e,i){fn(e,i),fn(e+"Capture",i)}function fn(e,i){Sn[e]&&x("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),Sn[e]=i;{var h=e.toLowerCase();Ft[h]=e,e==="onDoubleClick"&&(Ft.ondblclick=e)}for(var p=0;p<i.length;p++)hn.add(i[p])}var Bn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rn=Object.prototype.hasOwnProperty;function Fn(e){{var i=typeof Symbol=="function"&&Symbol.toStringTag,h=i&&e[Symbol.toStringTag]||e.constructor.name||"Object";return h}}function Ur(e){try{return Un(e),!1}catch{return!0}}function Un(e){return""+e}function er(e,i){if(Ur(e))return x("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Fn(e)),Un(e)}function Ti(e){if(Ur(e))return x("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Fn(e)),Un(e)}function Gr(e,i){if(Ur(e))return x("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Fn(e)),Un(e)}function Li(e,i){if(Ur(e))return x("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Fn(e)),Un(e)}function qe(e){if(Ur(e))return x("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Fn(e)),Un(e)}function xr(e){if(Ur(e))return x("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Fn(e)),Un(e)}var hr=0,zn=1,Ln=2,Dr=3,pi=4,oi=5,Bs=6,ds=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Mt=ds+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",an=new RegExp("^["+ds+"]["+Mt+"]*$"),Qe={},Hn={};function Tn(e){return rn.call(Hn,e)?!0:rn.call(Qe,e)?!1:an.test(e)?(Hn[e]=!0,!0):(Qe[e]=!0,x("Invalid attribute name: `%s`",e),!1)}function wr(e,i,h){return i!==null?i.type===hr:h?!1:e.length>2&&(e[0]==="o"||e[0]==="O")&&(e[1]==="n"||e[1]==="N")}function pr(e,i,h,p){if(h!==null&&h.type===hr)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":{if(p)return!1;if(h!==null)return!h.acceptsBooleans;var C=e.toLowerCase().slice(0,5);return C!=="data-"&&C!=="aria-"}default:return!1}}function dt(e,i,h,p){if(i===null||typeof i>"u"||pr(e,i,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case Dr:return!i;case pi:return i===!1;case oi:return isNaN(i);case Bs:return isNaN(i)||i<1}return!1}function tn(e){return nr.hasOwnProperty(e)?nr[e]:null}function Ut(e,i,h,p,C,D,L){this.acceptsBooleans=i===Ln||i===Dr||i===pi,this.attributeName=p,this.attributeNamespace=C,this.mustUseProperty=h,this.propertyName=e,this.type=i,this.sanitizeURL=D,this.removeEmptyString=L}var nr={},gi=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];gi.forEach(function(e){nr[e]=new Ut(e,hr,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0],h=e[1];nr[i]=new Ut(i,zn,!1,h,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new Ut(e,Ln,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new Ut(e,Ln,!1,e,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){nr[e]=new Ut(e,Dr,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new Ut(e,Dr,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){nr[e]=new Ut(e,pi,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){nr[e]=new Ut(e,Bs,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){nr[e]=new Ut(e,oi,!1,e.toLowerCase(),null,!1,!1)});var bn=/[\-\:]([a-z])/g,vi=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var i=e.replace(bn,vi);nr[i]=new Ut(i,zn,!1,e,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var i=e.replace(bn,vi);nr[i]=new Ut(i,zn,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(bn,vi);nr[i]=new Ut(i,zn,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new Ut(e,zn,!1,e.toLowerCase(),null,!1,!1)});var he="xlinkHref";nr[he]=new Ut("xlinkHref",zn,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){nr[e]=new Ut(e,zn,!1,e.toLowerCase(),null,!0,!0)});var I=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,G=!1;function J(e){!G&&I.test(e)&&(G=!0,x("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function ie(e,i,h,p){if(p.mustUseProperty){var C=p.propertyName;return e[C]}else{er(h,i),p.sanitizeURL&&J(""+h);var D=p.attributeName,L=null;if(p.type===pi){if(e.hasAttribute(D)){var $=e.getAttribute(D);return $===""?!0:dt(i,h,p,!1)?$:$===""+h?h:$}}else if(e.hasAttribute(D)){if(dt(i,h,p,!1))return e.getAttribute(D);if(p.type===Dr)return h;L=e.getAttribute(D)}return dt(i,h,p,!1)?L===null?h:L:L===""+h?h:L}}function de(e,i,h,p){{if(!Tn(i))return;if(!e.hasAttribute(i))return h===void 0?void 0:null;var C=e.getAttribute(i);return er(h,i),C===""+h?h:C}}function Ce(e,i,h,p){var C=tn(i);if(!wr(i,C,p)){if(dt(i,h,C,p)&&(h=null),p||C===null){if(Tn(i)){var D=i;h===null?e.removeAttribute(D):(er(h,i),e.setAttribute(D,""+h))}return}var L=C.mustUseProperty;if(L){var $=C.propertyName;if(h===null){var Z=C.type;e[$]=Z===Dr?!1:""}else e[$]=h;return}var re=C.attributeName,ue=C.attributeNamespace;if(h===null)e.removeAttribute(re);else{var Re=C.type,Me;Re===Dr||Re===pi&&h===!0?Me="":(er(h,re),Me=""+h,C.sanitizeURL&&J(Me.toString())),ue?e.setAttributeNS(ue,re,Me):e.setAttribute(re,Me)}}}var xe=Symbol.for("react.element"),ge=Symbol.for("react.portal"),Ee=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),Xe=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),pt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),kn=Symbol.for("react.scope"),vn=Symbol.for("react.debug_trace_mode"),gn=Symbol.for("react.offscreen"),Cr=Symbol.for("react.legacy_hidden"),ar=Symbol.for("react.cache"),Tr=Symbol.for("react.tracing_marker"),cr=Symbol.iterator,Ki="@@iterator";function mo(e){if(e===null||typeof e!="object")return null;var i=cr&&e[cr]||e[Ki];return typeof i=="function"?i:null}var In=Object.assign,po=0,nd,gr,Qo,Fa,Ii,is,eu;function hs(){}hs.__reactDisabledLog=!0;function Vi(){{if(po===0){nd=console.log,gr=console.info,Qo=console.warn,Fa=console.error,Ii=console.group,is=console.groupCollapsed,eu=console.groupEnd;var e={configurable:!0,enumerable:!0,value:hs,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}po++}}function xl(){{if(po--,po===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:In({},e,{value:nd}),info:In({},e,{value:gr}),warn:In({},e,{value:Qo}),error:In({},e,{value:Fa}),group:In({},e,{value:Ii}),groupCollapsed:In({},e,{value:is}),groupEnd:In({},e,{value:eu})})}po<0&&x("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Vo=o.ReactCurrentDispatcher,zr;function Gn(e,i,h){{if(zr===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);zr=p&&p[1]||""}return`
`+zr+e}}var Ys=!1,Pr;{var ga=typeof WeakMap=="function"?WeakMap:Map;Pr=new ga}function Yi(e,i){if(!e||Ys)return"";{var h=Pr.get(e);if(h!==void 0)return h}var p;Ys=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=Vo.current,Vo.current=null,Vi();try{if(i){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(Ze){p=Ze}Reflect.construct(e,[],L)}else{try{L.call()}catch(Ze){p=Ze}e.call(L.prototype)}}else{try{throw Error()}catch(Ze){p=Ze}e()}}catch(Ze){if(Ze&&p&&typeof Ze.stack=="string"){for(var $=Ze.stack.split(`
`),Z=p.stack.split(`
`),re=$.length-1,ue=Z.length-1;re>=1&&ue>=0&&$[re]!==Z[ue];)ue--;for(;re>=1&&ue>=0;re--,ue--)if($[re]!==Z[ue]){if(re!==1||ue!==1)do if(re--,ue--,ue<0||$[re]!==Z[ue]){var Re=`
`+$[re].replace(" at new "," at ");return e.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",e.displayName)),typeof e=="function"&&Pr.set(e,Re),Re}while(re>=1&&ue>=0);break}}}finally{Ys=!1,Vo.current=D,xl(),Error.prepareStackTrace=C}var Me=e?e.displayName||e.name:"",We=Me?Gn(Me):"";return typeof e=="function"&&Pr.set(e,We),We}function Ua(e,i,h){return Yi(e,!0)}function go(e,i,h){return Yi(e,!1)}function tu(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function _l(e,i,h){if(e==null)return"";if(typeof e=="function")return Yi(e,tu(e));if(typeof e=="string")return Gn(e);switch(e){case pt:return Gn("Suspense");case ft:return Gn("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case ht:return go(e.render);case Tt:return _l(e.type,i,h);case Lt:{var p=e,C=p._payload,D=p._init;try{return _l(D(C),i,h)}catch{}}}return""}function fc(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case ne:return Gn(e.type);case ot:return Gn("Lazy");case ze:return Gn("Suspense");case sn:return Gn("SuspenseList");case A:case B:case Ye:return go(e.type);case fe:return go(e.type.render);case k:return Ua(e.type);default:return""}}function ea(e){try{var i="",h=e;do i+=fc(h),h=h.return;while(h);return i}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function zo(e,i,h){var p=e.displayName;if(p)return p;var C=i.displayName||i.name||"";return C!==""?h+"("+C+")":h}function wl(e){return e.displayName||"Context"}function sr(e){if(e==null)return null;if(typeof e.tag=="number"&&x("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ee:return"Fragment";case ge:return"Portal";case te:return"Profiler";case Ke:return"StrictMode";case pt:return"Suspense";case ft:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xe:var i=e;return wl(i)+".Consumer";case Se:var h=e;return wl(h._context)+".Provider";case ht:return zo(e,e.render,"ForwardRef");case Tt:var p=e.displayName||null;return p!==null?p:sr(e.type)||"Memo";case Lt:{var C=e,D=C._payload,L=C._init;try{return sr(L(D))}catch{return null}}}return null}function rd(e,i,h){var p=i.displayName||i.name||"";return e.displayName||(p!==""?h+"("+p+")":h)}function va(e){return e.displayName||"Context"}function jn(e){var i=e.tag,h=e.type;switch(i){case on:return"Cache";case Ae:var p=h;return va(p)+".Consumer";case we:var C=h;return va(C._context)+".Provider";case gt:return"DehydratedFragment";case fe:return rd(h,h.render,"ForwardRef");case ke:return"Fragment";case ne:return h;case W:return"Portal";case O:return"Root";case me:return"Text";case ot:return sr(h);case De:return h===Ke?"StrictMode":"Mode";case vt:return"Offscreen";case Ve:return"Profiler";case st:return"Scope";case ze:return"Suspense";case sn:return"SuspenseList";case yn:return"TracingMarker";case k:case A:case wt:case B:case Je:case Ye:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;break}return null}var Cl=o.ReactDebugCurrentFrame,fs=null,Nl=!1;function ya(){{if(fs===null)return null;var e=fs._debugOwner;if(e!==null&&typeof e<"u")return jn(e)}return null}function id(){return fs===null?"":ea(fs)}function Pi(){Cl.getCurrentStack=null,fs=null,Nl=!1}function ei(e){Cl.getCurrentStack=e===null?null:id,fs=e,Nl=!1}function nu(){return fs}function Fs(e){Nl=e}function ss(e){return""+e}function os(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return xr(e),e;default:return""}}var mc={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function ms(e,i){mc[i.type]||i.onChange||i.onInput||i.readOnly||i.disabled||i.value==null||x("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),i.onChange||i.readOnly||i.disabled||i.checked==null||x("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Sl(e){var i=e.type,h=e.nodeName;return h&&h.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $a(e){return e._valueTracker}function ta(e){e._valueTracker=null}function pc(e){var i="";return e&&(Sl(e)?i=e.checked?"true":"false":i=e.value),i}function Xs(e){var i=Sl(e)?"checked":"value",h=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);xr(e[i]);var p=""+e[i];if(!(e.hasOwnProperty(i)||typeof h>"u"||typeof h.get!="function"||typeof h.set!="function")){var C=h.get,D=h.set;Object.defineProperty(e,i,{configurable:!0,get:function(){return C.call(this)},set:function($){xr($),p=""+$,D.call(this,$)}}),Object.defineProperty(e,i,{enumerable:h.enumerable});var L={getValue:function(){return p},setValue:function($){xr($),p=""+$},stopTracking:function(){ta(e),delete e[i]}};return L}}function Us(e){$a(e)||(e._valueTracker=Xs(e))}function Wn(e){if(!e)return!1;var i=$a(e);if(!i)return!0;var h=i.getValue(),p=pc(e);return p!==h?(i.setValue(p),!0):!1}function vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xi=!1,Ji=!1,qa=!1,El=!1;function Dl(e){var i=e.type==="checkbox"||e.type==="radio";return i?e.checked!=null:e.value!=null}function Tl(e,i){var h=e,p=i.checked,C=In({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??h._wrapperState.initialChecked});return C}function gc(e,i){ms("input",i),i.checked!==void 0&&i.defaultChecked!==void 0&&!Ji&&(x("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",ya()||"A component",i.type),Ji=!0),i.value!==void 0&&i.defaultValue!==void 0&&!Xi&&(x("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",ya()||"A component",i.type),Xi=!0);var h=e,p=i.defaultValue==null?"":i.defaultValue;h._wrapperState={initialChecked:i.checked!=null?i.checked:i.defaultChecked,initialValue:os(i.value!=null?i.value:p),controlled:Dl(i)}}function K(e,i){var h=e,p=i.checked;p!=null&&Ce(h,"checked",p,!1)}function _e(e,i){var h=e;{var p=Dl(i);!h._wrapperState.controlled&&p&&!El&&(x("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),El=!0),h._wrapperState.controlled&&!p&&!qa&&(x("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),qa=!0)}K(e,i);var C=os(i.value),D=i.type;if(C!=null)D==="number"?(C===0&&h.value===""||h.value!=C)&&(h.value=ss(C)):h.value!==ss(C)&&(h.value=ss(C));else if(D==="submit"||D==="reset"){h.removeAttribute("value");return}i.hasOwnProperty("value")?Cn(h,i.type,C):i.hasOwnProperty("defaultValue")&&Cn(h,i.type,os(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(h.defaultChecked=!!i.defaultChecked)}function Ge(e,i,h){var p=e;if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var C=i.type,D=C==="submit"||C==="reset";if(D&&(i.value===void 0||i.value===null))return;var L=ss(p._wrapperState.initialValue);h||L!==p.value&&(p.value=L),p.defaultValue=L}var $=p.name;$!==""&&(p.name=""),p.defaultChecked=!p.defaultChecked,p.defaultChecked=!!p._wrapperState.initialChecked,$!==""&&(p.name=$)}function et(e,i){var h=e;_e(h,i),jt(h,i)}function jt(e,i){var h=i.name;if(i.type==="radio"&&h!=null){for(var p=e;p.parentNode;)p=p.parentNode;er(h,"name");for(var C=p.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),D=0;D<C.length;D++){var L=C[D];if(!(L===e||L.form!==e.form)){var $=ib(L);if(!$)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Wn(L),_e(L,$)}}}}function Cn(e,i,h){(i!=="number"||vo(e.ownerDocument)!==e)&&(h==null?e.defaultValue=ss(e._wrapperState.initialValue):e.defaultValue!==ss(h)&&(e.defaultValue=ss(h)))}var Zt=!1,An=!1,or=!1;function jr(e,i){i.value==null&&(typeof i.children=="object"&&i.children!==null?l.Children.forEach(i.children,function(h){h!=null&&(typeof h=="string"||typeof h=="number"||An||(An=!0,x("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):i.dangerouslySetInnerHTML!=null&&(or||(or=!0,x("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),i.selected!=null&&!Zt&&(x("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Zt=!0)}function Wr(e,i){i.value!=null&&e.setAttribute("value",ss(os(i.value)))}var Zr=Array.isArray;function tr(e){return Zr(e)}var Kr;Kr=!1;function di(){var e=ya();return e?`

Check the render method of \``+e+"`.":""}var ba=["value","defaultValue"];function Pl(e){{ms("select",e);for(var i=0;i<ba.length;i++){var h=ba[i];if(e[h]!=null){var p=tr(e[h]);e.multiple&&!p?x("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",h,di()):!e.multiple&&p&&x("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",h,di())}}}}function $s(e,i,h,p){var C=e.options;if(i){for(var D=h,L={},$=0;$<D.length;$++)L["$"+D[$]]=!0;for(var Z=0;Z<C.length;Z++){var re=L.hasOwnProperty("$"+C[Z].value);C[Z].selected!==re&&(C[Z].selected=re),re&&p&&(C[Z].defaultSelected=!0)}}else{for(var ue=ss(os(h)),Re=null,Me=0;Me<C.length;Me++){if(C[Me].value===ue){C[Me].selected=!0,p&&(C[Me].defaultSelected=!0);return}Re===null&&!C[Me].disabled&&(Re=C[Me])}Re!==null&&(Re.selected=!0)}}function vc(e,i){return In({},i,{value:void 0})}function yc(e,i){var h=e;Pl(i),h._wrapperState={wasMultiple:!!i.multiple},i.value!==void 0&&i.defaultValue!==void 0&&!Kr&&(x("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Kr=!0)}function ru(e,i){var h=e;h.multiple=!!i.multiple;var p=i.value;p!=null?$s(h,!!i.multiple,p,!1):i.defaultValue!=null&&$s(h,!!i.multiple,i.defaultValue,!0)}function na(e,i){var h=e,p=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?$s(h,!!i.multiple,C,!1):p!==!!i.multiple&&(i.defaultValue!=null?$s(h,!!i.multiple,i.defaultValue,!0):$s(h,!!i.multiple,i.multiple?[]:"",!1))}function sd(e,i){var h=e,p=i.value;p!=null&&$s(h,!!i.multiple,p,!1)}var xa=!1;function Ha(e,i){var h=e;if(i.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var p=In({},i,{value:void 0,defaultValue:void 0,children:ss(h._wrapperState.initialValue)});return p}function xh(e,i){var h=e;ms("textarea",i),i.value!==void 0&&i.defaultValue!==void 0&&!xa&&(x("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",ya()||"A component"),xa=!0);var p=i.value;if(p==null){var C=i.children,D=i.defaultValue;if(C!=null){x("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(tr(C)){if(C.length>1)throw new Error("<textarea> can only have at most one child.");C=C[0]}D=C}}D==null&&(D=""),p=D}h._wrapperState={initialValue:os(p)}}function od(e,i){var h=e,p=os(i.value),C=os(i.defaultValue);if(p!=null){var D=ss(p);D!==h.value&&(h.value=D),i.defaultValue==null&&h.defaultValue!==D&&(h.defaultValue=D)}C!=null&&(h.defaultValue=ss(C))}function fr(e,i){var h=e,p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function ai(e,i){od(e,i)}var _a="http://www.w3.org/1999/xhtml",rr="http://www.w3.org/1998/Math/MathML",wa="http://www.w3.org/2000/svg";function Yr(e){switch(e){case"svg":return wa;case"math":return rr;default:return _a}}function $r(e,i){return e==null||e===_a?Yr(i):e===wa&&i==="foreignObject"?_a:e}var iu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,h,p,C){MSApp.execUnsafeLocalFunction(function(){return e(i,h,p,C)})}:e},su,ad=iu(function(e,i){if(e.namespaceURI===wa&&!("innerHTML"in e)){su=su||document.createElement("div"),su.innerHTML="<svg>"+i.valueOf().toString()+"</svg>";for(var h=su.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;h.firstChild;)e.appendChild(h.firstChild);return}e.innerHTML=i}),as=1,yo=3,yi=8,bo=9,ou=11,Ga=function(e,i){if(i){var h=e.firstChild;if(h&&h===e.lastChild&&h.nodeType===yo){h.nodeValue=i;return}}e.textContent=i},au={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function xp(e,i){return e+i.charAt(0).toUpperCase()+i.substring(1)}var _h=["Webkit","ms","Moz","O"];Object.keys(Ca).forEach(function(e){_h.forEach(function(i){Ca[xp(i,e)]=Ca[e]})});function wh(e,i,h){var p=i==null||typeof i=="boolean"||i==="";return p?"":!h&&typeof i=="number"&&i!==0&&!(Ca.hasOwnProperty(e)&&Ca[e])?i+"px":(Li(i,e),(""+i).trim())}var Af=/([A-Z])/g,ld=/^ms-/;function Ch(e){return e.replace(Af,"-$1").toLowerCase().replace(ld,"-ms-")}var Nh=function(){};{var Mf=/^(?:webkit|moz|o)[A-Z]/,lu=/^-ms-/,cd=/-(.)/g,cu=/;\s*$/,jl={},ti={},Wa=!1,Ns=!1,bc=function(e){return e.replace(cd,function(i,h){return h.toUpperCase()})},uu=function(e){jl.hasOwnProperty(e)&&jl[e]||(jl[e]=!0,x("Unsupported style property %s. Did you mean %s?",e,bc(e.replace(lu,"ms-"))))},ud=function(e){jl.hasOwnProperty(e)&&jl[e]||(jl[e]=!0,x("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},kl=function(e,i){ti.hasOwnProperty(i)&&ti[i]||(ti[i]=!0,x(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,e,i.replace(cu,"")))},du=function(e,i){Wa||(Wa=!0,x("`NaN` is an invalid value for the `%s` css style property.",e))},xc=function(e,i){Ns||(Ns=!0,x("`Infinity` is an invalid value for the `%s` css style property.",e))};Nh=function(e,i){e.indexOf("-")>-1?uu(e):Mf.test(e)?ud(e):cu.test(i)&&kl(e,i),typeof i=="number"&&(isNaN(i)?du(e,i):isFinite(i)||xc(e,i))}}var Rf=Nh;function Lf(e){{var i="",h="";for(var p in e)if(e.hasOwnProperty(p)){var C=e[p];if(C!=null){var D=p.indexOf("--")===0;i+=h+(D?p:Ch(p))+":",i+=wh(p,C,D),h=";"}}return i||null}}function Sh(e,i){var h=e.style;for(var p in i)if(i.hasOwnProperty(p)){var C=p.indexOf("--")===0;C||Rf(p,i[p]);var D=wh(p,i[p],C);p==="float"&&(p="cssFloat"),C?h.setProperty(p,D):h[p]=D}}function If(e){return e==null||typeof e=="boolean"||e===""}function Eh(e){var i={};for(var h in e)for(var p=au[h]||[h],C=0;C<p.length;C++)i[p[C]]=h;return i}function ra(e,i){{if(!i)return;var h=Eh(e),p=Eh(i),C={};for(var D in h){var L=h[D],$=p[D];if($&&L!==$){var Z=L+","+$;if(C[Z])continue;C[Z]=!0,x("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",If(e[L])?"Removing":"Updating",L,$)}}}}var hu={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Js=In({menuitem:!0},hu),fu="__html";function dd(e,i){if(i){if(Js[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw new Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof i.dangerouslySetInnerHTML!="object"||!(fu in i.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!i.suppressContentEditableWarning&&i.contentEditable&&i.children!=null&&x("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),i.style!=null&&typeof i.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Za(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Na={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Al={},xo=new RegExp("^(aria)-["+Mt+"]*$"),Sa=new RegExp("^(aria)[A-Z]["+Mt+"]*$");function hd(e,i){{if(rn.call(Al,i)&&Al[i])return!0;if(Sa.test(i)){var h="aria-"+i.slice(4).toLowerCase(),p=Na.hasOwnProperty(h)?h:null;if(p==null)return x("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",i),Al[i]=!0,!0;if(i!==p)return x("Invalid ARIA attribute `%s`. Did you mean `%s`?",i,p),Al[i]=!0,!0}if(xo.test(i)){var C=i.toLowerCase(),D=Na.hasOwnProperty(C)?C:null;if(D==null)return Al[i]=!0,!1;if(i!==D)return x("Unknown ARIA attribute `%s`. Did you mean `%s`?",i,D),Al[i]=!0,!0}}return!0}function Ea(e,i){{var h=[];for(var p in i){var C=hd(e,p);C||h.push(p)}var D=h.map(function(L){return"`"+L+"`"}).join(", ");h.length===1?x("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e):h.length>1&&x("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e)}}function Da(e,i){Za(e,i)||Ea(e,i)}var Vf=!1;function Dh(e,i){{if(e!=="input"&&e!=="textarea"&&e!=="select")return;i!=null&&i.value===null&&!Vf&&(Vf=!0,e==="select"&&i.multiple?x("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):x("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}}var Th=function(){};{var Qi={},Ml=/^on./,Ta=/^on[^A-Z]/,qt=new RegExp("^(aria)-["+Mt+"]*$"),fd=new RegExp("^(aria)[A-Z]["+Mt+"]*$");Th=function(e,i,h,p){if(rn.call(Qi,i)&&Qi[i])return!0;var C=i.toLowerCase();if(C==="onfocusin"||C==="onfocusout")return x("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Qi[i]=!0,!0;if(p!=null){var D=p.registrationNameDependencies,L=p.possibleRegistrationNames;if(D.hasOwnProperty(i))return!0;var $=L.hasOwnProperty(C)?L[C]:null;if($!=null)return x("Invalid event handler property `%s`. Did you mean `%s`?",i,$),Qi[i]=!0,!0;if(Ml.test(i))return x("Unknown event handler property `%s`. It will be ignored.",i),Qi[i]=!0,!0}else if(Ml.test(i))return Ta.test(i)&&x("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",i),Qi[i]=!0,!0;if(qt.test(i)||fd.test(i))return!0;if(C==="innerhtml")return x("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Qi[i]=!0,!0;if(C==="aria")return x("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Qi[i]=!0,!0;if(C==="is"&&h!==null&&h!==void 0&&typeof h!="string")return x("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof h),Qi[i]=!0,!0;if(typeof h=="number"&&isNaN(h))return x("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",i),Qi[i]=!0,!0;var Z=tn(i),re=Z!==null&&Z.type===hr;if(mu.hasOwnProperty(C)){var ue=mu[C];if(ue!==i)return x("Invalid DOM property `%s`. Did you mean `%s`?",i,ue),Qi[i]=!0,!0}else if(!re&&i!==C)return x("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",i,C),Qi[i]=!0,!0;return typeof h=="boolean"&&pr(i,h,Z,!1)?(h?x('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',h,i,i,h,i):x('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',h,i,i,h,i,i,i),Qi[i]=!0,!0):re?!0:pr(i,h,Z,!1)?(Qi[i]=!0,!1):((h==="false"||h==="true")&&Z!==null&&Z.type===Dr&&(x("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",h,i,h==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',i,h),Qi[i]=!0),!0)}}var Ka=function(e,i,h){{var p=[];for(var C in i){var D=Th(e,C,i[C],h);D||p.push(C)}var L=p.map(function($){return"`"+$+"`"}).join(", ");p.length===1?x("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",L,e):p.length>1&&x("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",L,e)}};function _c(e,i,h){Za(e,i)||Ka(e,i,h)}var Ph=1,It=2,Rl=4,jh=Ph|It|Rl,pu=null;function kh(e){pu!==null&&x("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),pu=e}function zf(){pu===null&&x("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),pu=null}function Of(e){return e===pu}function md(e){var i=e.target||e.srcElement||window;return i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===yo?i.parentNode:i}var Ah=null,Ya=null,Xa=null;function pd(e){var i=qd(e);if(i){if(typeof Ah!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var h=i.stateNode;if(h){var p=ib(h);Ah(i.stateNode,i.type,p)}}}function Mh(e){Ah=e}function Ss(e){Ya?Xa?Xa.push(e):Xa=[e]:Ya=e}function Ja(){return Ya!==null||Xa!==null}function wc(){if(Ya){var e=Ya,i=Xa;if(Ya=null,Xa=null,pd(e),i)for(var h=0;h<i.length;h++)pd(i[h])}}var gd=function(e,i){return e(i)},Cc=function(){},gu=!1;function Bf(){var e=Ja();e&&(Cc(),wc())}function qs(e,i,h){if(gu)return e(i,h);gu=!0;try{return gd(e,i,h)}finally{gu=!1,Bf()}}function Xr(e,i,h){gd=e,Cc=h}function vd(e){return e==="button"||e==="input"||e==="select"||e==="textarea"}function Rh(e,i,h){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(h.disabled&&vd(i));default:return!1}}function Nc(e,i){var h=e.stateNode;if(h===null)return null;var p=ib(h);if(p===null)return null;var C=p[i];if(Rh(i,e.type,p))return null;if(C&&typeof C!="function")throw new Error("Expected `"+i+"` listener to be a function, instead got a value of `"+typeof C+"` type.");return C}var yd=!1;if(Bn)try{var Sc={};Object.defineProperty(Sc,"passive",{get:function(){yd=!0}}),window.addEventListener("test",Sc,Sc),window.removeEventListener("test",Sc,Sc)}catch{yd=!1}function Ff(e,i,h,p,C,D,L,$,Z){var re=Array.prototype.slice.call(arguments,3);try{i.apply(h,re)}catch(ue){this.onError(ue)}}var ps=Ff;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var Ec=document.createElement("react");ps=function(i,h,p,C,D,L,$,Z,re){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var ue=document.createEvent("Event"),Re=!1,Me=!0,We=window.event,Ze=Object.getOwnPropertyDescriptor(window,"event");function rt(){Ec.removeEventListener(it,En,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=We)}var Gt=Array.prototype.slice.call(arguments,3);function En(){Re=!0,rt(),h.apply(p,Gt),Me=!1}var _n,yr=!1,dr=!1;function Ue($e){if(_n=$e.error,yr=!0,_n===null&&$e.colno===0&&$e.lineno===0&&(dr=!0),$e.defaultPrevented&&_n!=null&&typeof _n=="object")try{_n._suppressLogging=!0}catch{}}var it="react-"+(i||"invokeguardedcallback");if(window.addEventListener("error",Ue),Ec.addEventListener(it,En,!1),ue.initEvent(it,!1,!1),Ec.dispatchEvent(ue),Ze&&Object.defineProperty(window,"event",Ze),Re&&Me&&(yr?dr&&(_n=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):_n=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(_n)),window.removeEventListener("error",Ue),!Re)return rt(),Ff.apply(this,arguments)}}var ln=ps,mn=!1,Qa=null,Dc=!1,vu=null,ji={onError:function(e){mn=!0,Qa=e}};function yu(e,i,h,p,C,D,L,$,Z){mn=!1,Qa=null,ln.apply(ji,arguments)}function _o(e,i,h,p,C,D,L,$,Z){if(yu.apply(this,arguments),mn){var re=ni();Dc||(Dc=!0,vu=re)}}function Uf(){if(Dc){var e=vu;throw Dc=!1,vu=null,e}}function Ll(){return mn}function ni(){if(mn){var e=Qa;return mn=!1,Qa=null,e}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Rr(e){return e._reactInternals}function Tc(e){return e._reactInternals!==void 0}function bu(e,i){e._reactInternals=i}var wn=0,wo=1,bi=2,ur=4,Co=16,Il=32,bd=64,cn=128,b=256,r=512,c=1024,m=2048,v=4096,w=8192,P=16384,j=32767,R=32768,z=65536,U=131072,q=1048576,X=2097152,ae=4194304,le=8388608,pe=16777216,oe=33554432,Te=ur|c|0,Oe=bi|ur|Co|Il|r|v|w,ye=ur|bd|r|w,Pe=m|Co,Be=ae|le|X,He=o.ReactCurrentOwner;function tt(e){var i=e,h=e;if(e.alternate)for(;i.return;)i=i.return;else{var p=i;do i=p,(i.flags&(bi|v))!==wn&&(h=i.return),p=i.return;while(p)}return i.tag===O?h:null}function mt(e){if(e.tag===ze){var i=e.memoizedState;if(i===null){var h=e.alternate;h!==null&&(i=h.memoizedState)}if(i!==null)return i.dehydrated}return null}function at(e){return e.tag===O?e.stateNode.containerInfo:null}function _t(e){return tt(e)===e}function Xt(e){{var i=He.current;if(i!==null&&i.tag===k){var h=i,p=h.stateNode;p._warnedAboutRefsInRender||x("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",jn(h)||"A component"),p._warnedAboutRefsInRender=!0}}var C=Rr(e);return C?tt(C)===C:!1}function Yn(e){if(tt(e)!==e)throw new Error("Unable to find node on an unmounted component.")}function kt(e){var i=e.alternate;if(!i){var h=tt(e);if(h===null)throw new Error("Unable to find node on an unmounted component.");return h!==e?null:e}for(var p=e,C=i;;){var D=p.return;if(D===null)break;var L=D.alternate;if(L===null){var $=D.return;if($!==null){p=C=$;continue}break}if(D.child===L.child){for(var Z=D.child;Z;){if(Z===p)return Yn(D),e;if(Z===C)return Yn(D),i;Z=Z.sibling}throw new Error("Unable to find node on an unmounted component.")}if(p.return!==C.return)p=D,C=L;else{for(var re=!1,ue=D.child;ue;){if(ue===p){re=!0,p=D,C=L;break}if(ue===C){re=!0,C=D,p=L;break}ue=ue.sibling}if(!re){for(ue=L.child;ue;){if(ue===p){re=!0,p=L,C=D;break}if(ue===C){re=!0,C=L,p=D;break}ue=ue.sibling}if(!re)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(p.alternate!==C)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(p.tag!==O)throw new Error("Unable to find node on an unmounted component.");return p.stateNode.current===p?e:i}function xn(e){var i=kt(e);return i!==null?Jt(i):null}function Jt(e){if(e.tag===ne||e.tag===me)return e;for(var i=e.child;i!==null;){var h=Jt(i);if(h!==null)return h;i=i.sibling}return null}function kr(e){var i=kt(e);return i!==null?Zn(i):null}function Zn(e){if(e.tag===ne||e.tag===me)return e;for(var i=e.child;i!==null;){if(i.tag!==W){var h=Zn(i);if(h!==null)return h}i=i.sibling}return null}var Rn=n.unstable_scheduleCallback,Xn=n.unstable_cancelCallback,xi=n.unstable_shouldYield,qr=n.unstable_requestPaint,mr=n.unstable_now,Bi=n.unstable_getCurrentPriorityLevel,li=n.unstable_ImmediatePriority,Es=n.unstable_UserBlockingPriority,_r=n.unstable_NormalPriority,ia=n.unstable_LowPriority,No=n.unstable_IdlePriority,el=n.unstable_yieldValue,Vl=n.unstable_setDisableYieldValue,Oo=null,Nr=null,Pt=null,ci=!1,ls=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function _i(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled)return!0;if(!i.supportsFiber)return x("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{ct&&(e=In({},e,{getLaneLabelMap:qf,injectProfilingHooks:$f})),Oo=i.inject(e),Nr=i}catch(h){x("React instrumentation encountered an error: %s.",h)}return!!i.checkDCE}function Fi(e,i){if(Nr&&typeof Nr.onScheduleFiberRoot=="function")try{Nr.onScheduleFiberRoot(Oo,e,i)}catch(h){ci||(ci=!0,x("React instrumentation encountered an error: %s",h))}}function Hs(e,i){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{var h=(e.current.flags&cn)===cn;if(Ie){var p;switch(i){case Fo:p=li;break;case $l:p=Es;break;case ql:p=_r;break;case Ed:p=No;break;default:p=_r;break}Nr.onCommitFiberRoot(Oo,e,p,h)}}catch(C){ci||(ci=!0,x("React instrumentation encountered an error: %s",C))}}function wi(e){if(Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(Oo,e)}catch(i){ci||(ci=!0,x("React instrumentation encountered an error: %s",i))}}function zl(e){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(Oo,e)}catch(i){ci||(ci=!0,x("React instrumentation encountered an error: %s",i))}}function ki(e){if(typeof el=="function"&&(Vl(e),y(e)),Nr&&typeof Nr.setStrictMode=="function")try{Nr.setStrictMode(Oo,e)}catch(i){ci||(ci=!0,x("React instrumentation encountered an error: %s",i))}}function $f(e){Pt=e}function qf(){{for(var e=new Map,i=1,h=0;h<Zf;h++){var p=Ip(i);e.set(i,p),i*=2}return e}}function _p(e){Pt!==null&&typeof Pt.markCommitStarted=="function"&&Pt.markCommitStarted(e)}function xd(){Pt!==null&&typeof Pt.markCommitStopped=="function"&&Pt.markCommitStopped()}function Gs(e){Pt!==null&&typeof Pt.markComponentRenderStarted=="function"&&Pt.markComponentRenderStarted(e)}function So(){Pt!==null&&typeof Pt.markComponentRenderStopped=="function"&&Pt.markComponentRenderStopped()}function sa(e){Pt!==null&&typeof Pt.markComponentPassiveEffectMountStarted=="function"&&Pt.markComponentPassiveEffectMountStarted(e)}function Eo(){Pt!==null&&typeof Pt.markComponentPassiveEffectMountStopped=="function"&&Pt.markComponentPassiveEffectMountStopped()}function oa(e){Pt!==null&&typeof Pt.markComponentPassiveEffectUnmountStarted=="function"&&Pt.markComponentPassiveEffectUnmountStarted(e)}function Lh(){Pt!==null&&typeof Pt.markComponentPassiveEffectUnmountStopped=="function"&&Pt.markComponentPassiveEffectUnmountStopped()}function Pa(e){Pt!==null&&typeof Pt.markComponentLayoutEffectMountStarted=="function"&&Pt.markComponentLayoutEffectMountStarted(e)}function y0(){Pt!==null&&typeof Pt.markComponentLayoutEffectMountStopped=="function"&&Pt.markComponentLayoutEffectMountStopped()}function wp(e){Pt!==null&&typeof Pt.markComponentLayoutEffectUnmountStarted=="function"&&Pt.markComponentLayoutEffectUnmountStarted(e)}function Ai(){Pt!==null&&typeof Pt.markComponentLayoutEffectUnmountStopped=="function"&&Pt.markComponentLayoutEffectUnmountStopped()}function Cp(e,i,h){Pt!==null&&typeof Pt.markComponentErrored=="function"&&Pt.markComponentErrored(e,i,h)}function ny(e,i,h){Pt!==null&&typeof Pt.markComponentSuspended=="function"&&Pt.markComponentSuspended(e,i,h)}function xu(e){Pt!==null&&typeof Pt.markLayoutEffectsStarted=="function"&&Pt.markLayoutEffectsStarted(e)}function _u(){Pt!==null&&typeof Pt.markLayoutEffectsStopped=="function"&&Pt.markLayoutEffectsStopped()}function Hf(e){Pt!==null&&typeof Pt.markPassiveEffectsStarted=="function"&&Pt.markPassiveEffectsStarted(e)}function Np(){Pt!==null&&typeof Pt.markPassiveEffectsStopped=="function"&&Pt.markPassiveEffectsStopped()}function Sp(e){Pt!==null&&typeof Pt.markRenderStarted=="function"&&Pt.markRenderStarted(e)}function b0(){Pt!==null&&typeof Pt.markRenderYielded=="function"&&Pt.markRenderYielded()}function Ep(){Pt!==null&&typeof Pt.markRenderStopped=="function"&&Pt.markRenderStopped()}function x0(e){Pt!==null&&typeof Pt.markRenderScheduled=="function"&&Pt.markRenderScheduled(e)}function Dp(e,i){Pt!==null&&typeof Pt.markForceUpdateScheduled=="function"&&Pt.markForceUpdateScheduled(e,i)}function Tp(e,i){Pt!==null&&typeof Pt.markStateUpdateScheduled=="function"&&Pt.markStateUpdateScheduled(e,i)}var Nn=0,lr=1,Lr=2,ri=8,tl=16,_d=Math.clz32?Math.clz32:ry,Gf=Math.log,Wf=Math.LN2;function ry(e){var i=e>>>0;return i===0?32:31-(Gf(i)/Wf|0)|0}var Zf=31,yt=0,Sr=0,Dn=1,Pc=2,nl=4,ja=8,rl=16,jc=32,wd=4194240,Cd=64,Kf=128,Yf=256,Pp=512,Ih=1024,Xf=2048,Vh=4096,wu=8192,Qs=16384,Jf=32768,jp=65536,Qf=131072,kp=262144,Ap=524288,Mp=1048576,Rp=2097152,Nd=130023424,Ol=4194304,em=8388608,Bl=16777216,Cu=33554432,Lp=67108864,iy=Ol,zh=134217728,sy=268435455,Oh=268435456,Nu=536870912,Bo=1073741824;function Ip(e){{if(e&Dn)return"Sync";if(e&Pc)return"InputContinuousHydration";if(e&nl)return"InputContinuous";if(e&ja)return"DefaultHydration";if(e&rl)return"Default";if(e&jc)return"TransitionHydration";if(e&wd)return"Transition";if(e&Nd)return"Retry";if(e&zh)return"SelectiveHydration";if(e&Oh)return"IdleHydration";if(e&Nu)return"Idle";if(e&Bo)return"Offscreen"}}var ui=-1,Fl=Cd,tm=Ol;function ii(e){switch(Du(e)){case Dn:return Dn;case Pc:return Pc;case nl:return nl;case ja:return ja;case rl:return rl;case jc:return jc;case Cd:case Kf:case Yf:case Pp:case Ih:case Xf:case Vh:case wu:case Qs:case Jf:case jp:case Qf:case kp:case Ap:case Mp:case Rp:return e&wd;case Ol:case em:case Bl:case Cu:case Lp:return e&Nd;case zh:return zh;case Oh:return Oh;case Nu:return Nu;case Bo:return Bo;default:return x("Should have found matching lanes. This is a bug in React."),e}}function Su(e,i){var h=e.pendingLanes;if(h===yt)return yt;var p=yt,C=e.suspendedLanes,D=e.pingedLanes,L=h&sy;if(L!==yt){var $=L&~C;if($!==yt)p=ii($);else{var Z=L&D;Z!==yt&&(p=ii(Z))}}else{var re=h&~C;re!==yt?p=ii(re):D!==yt&&(p=ii(D))}if(p===yt)return yt;if(i!==yt&&i!==p&&(i&C)===yt){var ue=Du(p),Re=Du(i);if(ue>=Re||ue===rl&&(Re&wd)!==yt)return i}(p&nl)!==yt&&(p|=h&rl);var Me=e.entangledLanes;if(Me!==yt)for(var We=e.entanglements,Ze=p&Me;Ze>0;){var rt=Ul(Ze),Gt=1<<rt;p|=We[rt],Ze&=~Gt}return p}function oy(e,i){for(var h=e.eventTimes,p=ui;i>0;){var C=Ul(i),D=1<<C,L=h[C];L>p&&(p=L),i&=~D}return p}function nm(e,i){switch(e){case Dn:case Pc:case nl:return i+250;case ja:case rl:case jc:case Cd:case Kf:case Yf:case Pp:case Ih:case Xf:case Vh:case wu:case Qs:case Jf:case jp:case Qf:case kp:case Ap:case Mp:case Rp:return i+5e3;case Ol:case em:case Bl:case Cu:case Lp:return ui;case zh:case Oh:case Nu:case Bo:return ui;default:return x("Should have found matching lanes. This is a bug in React."),ui}}function rm(e,i){for(var h=e.pendingLanes,p=e.suspendedLanes,C=e.pingedLanes,D=e.expirationTimes,L=h;L>0;){var $=Ul(L),Z=1<<$,re=D[$];re===ui?((Z&p)===yt||(Z&C)!==yt)&&(D[$]=nm(Z,i)):re<=i&&(e.expiredLanes|=Z),L&=~Z}}function Bh(e){return ii(e.pendingLanes)}function im(e){var i=e.pendingLanes&~Bo;return i!==yt?i:i&Bo?Bo:yt}function ay(e){return(e&Dn)!==yt}function Eu(e){return(e&sy)!==yt}function sm(e){return(e&Nd)===e}function Vp(e){var i=Dn|nl|rl;return(e&i)===yt}function ly(e){return(e&wd)===e}function om(e,i){var h=Pc|nl|ja|rl;return(i&h)!==yt}function cy(e,i){return(i&e.expiredLanes)!==yt}function Sd(e){return(e&wd)!==yt}function uy(){var e=Fl;return Fl<<=1,(Fl&wd)===yt&&(Fl=Cd),e}function zp(){var e=tm;return tm<<=1,(tm&Nd)===yt&&(tm=Ol),e}function Du(e){return e&-e}function Tu(e){return Du(e)}function Ul(e){return 31-_d(e)}function Fh(e){return Ul(e)}function Do(e,i){return(e&i)!==yt}function Pu(e,i){return(e&i)===i}function Jn(e,i){return e|i}function am(e,i){return e&~i}function dy(e,i){return e&i}function kN(e){return e}function _0(e,i){return e!==Sr&&e<i?e:i}function il(e){for(var i=[],h=0;h<Zf;h++)i.push(e);return i}function Uh(e,i,h){e.pendingLanes|=i,i!==Nu&&(e.suspendedLanes=yt,e.pingedLanes=yt);var p=e.eventTimes,C=Fh(i);p[C]=h}function hy(e,i){e.suspendedLanes|=i,e.pingedLanes&=~i;for(var h=e.expirationTimes,p=i;p>0;){var C=Ul(p),D=1<<C;h[C]=ui,p&=~D}}function ju(e,i,h){e.pingedLanes|=e.suspendedLanes&i}function w0(e,i){var h=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=yt,e.pingedLanes=yt,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i;for(var p=e.entanglements,C=e.eventTimes,D=e.expirationTimes,L=h;L>0;){var $=Ul(L),Z=1<<$;p[$]=yt,C[$]=ui,D[$]=ui,L&=~Z}}function Op(e,i){for(var h=e.entangledLanes|=i,p=e.entanglements,C=h;C;){var D=Ul(C),L=1<<D;L&i|p[D]&i&&(p[D]|=i),C&=~L}}function C0(e,i){var h=Du(i),p;switch(h){case nl:p=Pc;break;case rl:p=ja;break;case Cd:case Kf:case Yf:case Pp:case Ih:case Xf:case Vh:case wu:case Qs:case Jf:case jp:case Qf:case kp:case Ap:case Mp:case Rp:case Ol:case em:case Bl:case Cu:case Lp:p=jc;break;case Nu:p=Oh;break;default:p=Sr;break}return(p&(e.suspendedLanes|i))!==Sr?Sr:p}function Bp(e,i,h){if(ls)for(var p=e.pendingUpdatersLaneMap;h>0;){var C=Fh(h),D=1<<C,L=p[C];L.add(i),h&=~D}}function Fp(e,i){if(ls)for(var h=e.pendingUpdatersLaneMap,p=e.memoizedUpdaters;i>0;){var C=Fh(i),D=1<<C,L=h[C];L.size>0&&(L.forEach(function($){var Z=$.alternate;(Z===null||!p.has(Z))&&p.add($)}),L.clear()),i&=~D}}function fy(e,i){return null}var Fo=Dn,$l=nl,ql=rl,Ed=Nu,Hl=Sr;function Uo(){return Hl}function gs(e){Hl=e}function N0(e,i){var h=Hl;try{return Hl=e,i()}finally{Hl=h}}function my(e,i){return e!==0&&e<i?e:i}function S0(e,i){return e>i?e:i}function Up(e,i){return e!==0&&e<i}function Dd(e){var i=Du(e);return Up(Fo,i)?Up($l,i)?Eu(i)?ql:Ed:$l:Fo}function $h(e){var i=e.current.memoizedState;return i.isDehydrated}var py;function E0(e){py=e}function D0(e){py(e)}var $p;function T0(e){$p=e}var gy;function vy(e){gy=e}var lm;function yy(e){lm=e}var qp;function by(e){qp=e}var Hp=!1,ku=[],kc=null,Gl=null,Ac=null,qh=new Map,Hh=new Map,Wl=[],P0=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function j0(e){return P0.indexOf(e)>-1}function Gh(e,i,h,p,C){return{blockedOn:e,domEventName:i,eventSystemFlags:h,nativeEvent:C,targetContainers:[p]}}function zi(e,i){switch(e){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Ac=null;break;case"pointerover":case"pointerout":{var h=i.pointerId;qh.delete(h);break}case"gotpointercapture":case"lostpointercapture":{var p=i.pointerId;Hh.delete(p);break}}}function Td(e,i,h,p,C,D){if(e===null||e.nativeEvent!==D){var L=Gh(i,h,p,C,D);if(i!==null){var $=qd(i);$!==null&&$p($)}return L}e.eventSystemFlags|=p;var Z=e.targetContainers;return C!==null&&Z.indexOf(C)===-1&&Z.push(C),e}function xy(e,i,h,p,C){switch(i){case"focusin":{var D=C;return kc=Td(kc,e,i,h,p,D),!0}case"dragenter":{var L=C;return Gl=Td(Gl,e,i,h,p,L),!0}case"mouseover":{var $=C;return Ac=Td(Ac,e,i,h,p,$),!0}case"pointerover":{var Z=C,re=Z.pointerId;return qh.set(re,Td(qh.get(re)||null,e,i,h,p,Z)),!0}case"gotpointercapture":{var ue=C,Re=ue.pointerId;return Hh.set(Re,Td(Hh.get(Re)||null,e,i,h,p,ue)),!0}}return!1}function Gp(e){var i=tf(e.target);if(i!==null){var h=tt(i);if(h!==null){var p=h.tag;if(p===ze){var C=mt(h);if(C!==null){e.blockedOn=C,qp(e.priority,function(){gy(h)});return}}else if(p===O){var D=h.stateNode;if($h(D)){e.blockedOn=at(h);return}}}}e.blockedOn=null}function Ir(e){for(var i=lm(),h={blockedOn:null,target:e,priority:i},p=0;p<Wl.length&&Up(i,Wl[p].priority);p++);Wl.splice(p,0,h),p===0&&Gp(h)}function Pd(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;i.length>0;){var h=i[0],p=jd(e.domEventName,e.eventSystemFlags,h,e.nativeEvent);if(p===null){var C=e.nativeEvent,D=new C.constructor(C.type,C);kh(D),C.target.dispatchEvent(D),zf()}else{var L=qd(p);return L!==null&&$p(L),e.blockedOn=p,!1}i.shift()}return!0}function Wp(e,i,h){Pd(e)&&h.delete(i)}function _y(){Hp=!1,kc!==null&&Pd(kc)&&(kc=null),Gl!==null&&Pd(Gl)&&(Gl=null),Ac!==null&&Pd(Ac)&&(Ac=null),qh.forEach(Wp),Hh.forEach(Wp)}function $o(e,i){e.blockedOn===i&&(e.blockedOn=null,Hp||(Hp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_y)))}function sl(e){if(ku.length>0){$o(ku[0],e);for(var i=1;i<ku.length;i++){var h=ku[i];h.blockedOn===e&&(h.blockedOn=null)}}kc!==null&&$o(kc,e),Gl!==null&&$o(Gl,e),Ac!==null&&$o(Ac,e);var p=function($){return $o($,e)};qh.forEach(p),Hh.forEach(p);for(var C=0;C<Wl.length;C++){var D=Wl[C];D.blockedOn===e&&(D.blockedOn=null)}for(;Wl.length>0;){var L=Wl[0];if(L.blockedOn!==null)break;Gp(L),L.blockedOn===null&&Wl.shift()}}var Au=o.ReactCurrentBatchConfig,Zp=!0;function wy(e){Zp=!!e}function k0(){return Zp}function A0(e,i,h){var p=Mu(i),C;switch(p){case Fo:C=M0;break;case $l:C=R0;break;case ql:default:C=Kp;break}return C.bind(null,i,h,e)}function M0(e,i,h,p){var C=Uo(),D=Au.transition;Au.transition=null;try{gs(Fo),Kp(e,i,h,p)}finally{gs(C),Au.transition=D}}function R0(e,i,h,p){var C=Uo(),D=Au.transition;Au.transition=null;try{gs($l),Kp(e,i,h,p)}finally{gs(C),Au.transition=D}}function Kp(e,i,h,p){Zp&&L0(e,i,h,p)}function L0(e,i,h,p){var C=jd(e,i,h,p);if(C===null){Or(e,i,p,cm,h),zi(e,p);return}if(xy(C,e,i,h,p)){p.stopPropagation();return}if(zi(e,p),i&Rl&&j0(e)){for(;C!==null;){var D=qd(C);D!==null&&D0(D);var L=jd(e,i,h,p);if(L===null&&Or(e,i,p,cm,h),L===C)break;C=L}C!==null&&p.stopPropagation();return}Or(e,i,p,null,h)}var cm=null;function jd(e,i,h,p){cm=null;var C=md(p),D=tf(C);if(D!==null){var L=tt(D);if(L===null)D=null;else{var $=L.tag;if($===ze){var Z=mt(L);if(Z!==null)return Z;D=null}else if($===O){var re=L.stateNode;if($h(re))return at(L);D=null}else L!==D&&(D=null)}}return cm=D,null}function Mu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Fo;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return $l;case"message":{var i=Bi();switch(i){case li:return Fo;case Es:return $l;case _r:case ia:return ql;case No:return Ed;default:return ql}}default:return ql}}function Cy(e,i,h){return e.addEventListener(i,h,!1),h}function Yp(e,i,h){return e.addEventListener(i,h,!0),h}function Xp(e,i,h,p){return e.addEventListener(i,h,{capture:!0,passive:p}),h}function I0(e,i,h,p){return e.addEventListener(i,h,{passive:p}),h}var Wh=null,Jp=null,kd=null;function Ny(e){return Wh=e,Jp=Qp(),!0}function eo(){Wh=null,Jp=null,kd=null}function um(){if(kd)return kd;var e,i=Jp,h=i.length,p,C=Qp(),D=C.length;for(e=0;e<h&&i[e]===C[e];e++);var L=h-e;for(p=1;p<=L&&i[h-p]===C[D-p];p++);var $=p>1?1-p:void 0;return kd=C.slice(e,$),kd}function Qp(){return"value"in Wh?Wh.value:Wh.textContent}function ka(e){var i,h=e.keyCode;return"charCode"in e?(i=e.charCode,i===0&&h===13&&(i=13)):i=h,i===10&&(i=13),i>=32||i===13?i:0}function Mc(){return!0}function Ad(){return!1}function vs(e){function i(h,p,C,D,L){this._reactName=h,this._targetInst=C,this.type=p,this.nativeEvent=D,this.target=L,this.currentTarget=null;for(var $ in e)if(e.hasOwnProperty($)){var Z=e[$];Z?this[$]=Z(D):this[$]=D[$]}var re=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;return re?this.isDefaultPrevented=Mc:this.isDefaultPrevented=Ad,this.isPropagationStopped=Ad,this}return In(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),i}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Md=vs(Zl),Zh=In({},Zl,{view:0,detail:0}),Sy=vs(Zh),dm,eg,Rd;function Ey(e){e!==Rd&&(Rd&&e.type==="mousemove"?(dm=e.screenX-Rd.screenX,eg=e.screenY-Rd.screenY):(dm=0,eg=0),Rd=e)}var Ld=In({},Zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(Ey(e),dm)},movementY:function(e){return"movementY"in e?e.movementY:eg}}),hm=vs(Ld),V0=In({},Ld,{dataTransfer:0}),z0=vs(V0),Dy=In({},Zh,{relatedTarget:0}),Ru=vs(Dy),ol=In({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),Rc=vs(ol),Ty=In({},Zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tg=vs(Ty),O0=In({},Zl,{data:0}),Py=vs(O0),fm=Py,ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function rg(e){if(e.key){var i=ng[e.key]||e.key;if(i!=="Unidentified")return i}if(e.type==="keypress"){var h=ka(e);return h===13?"Enter":String.fromCharCode(h)}return e.type==="keydown"||e.type==="keyup"?B0[e.keyCode]||"Unidentified":""}var ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Id(e){var i=this,h=i.nativeEvent;if(h.getModifierState)return h.getModifierState(e);var p=ig[e];return p?!!h[p]:!1}function mm(e){return Id}var jy=In({},Zh,{key:rg,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sg=vs(jy),ky=In({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=vs(ky),Ay=In({},Zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),F0=vs(Ay),U0=In({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=vs(U0),$0=In({},Ld,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=vs($0),H0=[9,13,27,32],Ry=229,Yh=Bn&&"CompositionEvent"in window,aa=null;Bn&&"documentMode"in document&&(aa=document.documentMode);var Ly=Bn&&"TextEvent"in window&&!aa,og=Bn&&(!Yh||aa&&aa>8&&aa<=11),ag=32,lg=String.fromCharCode(ag);function Iy(){Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),Bt("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),Bt("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var cg=!1;function ug(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function pm(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function Vy(e,i){return e==="keydown"&&i.keyCode===Ry}function gm(e,i){switch(e){case"keyup":return H0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==Ry;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dg(e){var i=e.detail;return typeof i=="object"&&"data"in i?i.data:null}function To(e){return e.locale==="ko"}var al=!1;function zy(e,i,h,p,C){var D,L;if(Yh?D=pm(i):al?gm(i,p)&&(D="onCompositionEnd"):Vy(i,p)&&(D="onCompositionStart"),!D)return null;og&&!To(p)&&(!al&&D==="onCompositionStart"?al=Ny(C):D==="onCompositionEnd"&&al&&(L=um()));var $=Ds(h,D);if($.length>0){var Z=new Py(D,i,null,p,C);if(e.push({event:Z,listeners:$}),L)Z.data=L;else{var re=dg(p);re!==null&&(Z.data=re)}}}function Oy(e,i){switch(e){case"compositionend":return dg(i);case"keypress":var h=i.which;return h!==ag?null:(cg=!0,lg);case"textInput":var p=i.data;return p===lg&&cg?null:p;default:return null}}function By(e,i){if(al){if(e==="compositionend"||!Yh&&gm(e,i)){var h=um();return eo(),al=!1,h}return null}switch(e){case"paste":return null;case"keypress":if(!ug(i)){if(i.char&&i.char.length>1)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return og&&!To(i)?null:i.data;default:return null}}function Fy(e,i,h,p,C){var D;if(Ly?D=Oy(i,p):D=By(i,p),!D)return null;var L=Ds(h,"onBeforeInput");if(L.length>0){var $=new fm("onBeforeInput","beforeinput",null,p,C);e.push({event:$,listeners:L}),$.data=D}}function Uy(e,i,h,p,C,D,L){zy(e,i,h,p,C),Fy(e,i,h,p,C)}var $y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!$y[e.type]:i==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Hy(e){if(!Bn)return!1;var i="on"+e,h=i in document;if(!h){var p=document.createElement("div");p.setAttribute(i,"return;"),h=typeof p[i]=="function"}return h}function Lc(){Bt("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function hg(e,i,h,p){Ss(p);var C=Ds(i,"onChange");if(C.length>0){var D=new Md("onChange","change",null,h,p);e.push({event:D,listeners:C})}}var Vd=null,zd=null;function Gy(e){var i=e.nodeName&&e.nodeName.toLowerCase();return i==="select"||i==="input"&&e.type==="file"}function G0(e){var i=[];hg(i,zd,e,md(e)),qs(W0,i)}function W0(e){At(e,0)}function Xh(e){var i=Tm(e);if(Wn(i))return e}function Od(e,i){if(e==="change")return i}var fg=!1;Bn&&(fg=Hy("input")&&(!document.documentMode||document.documentMode>9));function vm(e,i){Vd=e,zd=i,Vd.attachEvent("onpropertychange",Jh)}function mg(){Vd&&(Vd.detachEvent("onpropertychange",Jh),Vd=null,zd=null)}function Jh(e){e.propertyName==="value"&&Xh(zd)&&G0(e)}function ym(e,i,h){e==="focusin"?(mg(),vm(i,h)):e==="focusout"&&mg()}function bm(e,i){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xh(zd)}function Z0(e){var i=e.nodeName;return i&&i.toLowerCase()==="input"&&(e.type==="checkbox"||e.type==="radio")}function K0(e,i){if(e==="click")return Xh(i)}function Y0(e,i){if(e==="input"||e==="change")return Xh(i)}function X0(e){var i=e._wrapperState;!i||!i.controlled||e.type!=="number"||Cn(e,"number",e.value)}function Bd(e,i,h,p,C,D,L){var $=h?Tm(h):window,Z,re;if(Gy($)?Z=Od:qy($)?fg?Z=Y0:(Z=bm,re=ym):Z0($)&&(Z=K0),Z){var ue=Z(i,h);if(ue){hg(e,ue,p,C);return}}re&&re(i,$,h),i==="focusout"&&X0($)}function ys(){fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"])}function Ic(e,i,h,p,C,D,L){var $=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout";if($&&!Of(p)){var re=p.relatedTarget||p.fromElement;if(re&&(tf(re)||Ag(re)))return}if(!(!Z&&!$)){var ue;if(C.window===C)ue=C;else{var Re=C.ownerDocument;Re?ue=Re.defaultView||Re.parentWindow:ue=window}var Me,We;if(Z){var Ze=p.relatedTarget||p.toElement;if(Me=h,We=Ze?tf(Ze):null,We!==null){var rt=tt(We);(We!==rt||We.tag!==ne&&We.tag!==me)&&(We=null)}}else Me=null,We=h;if(Me!==We){var Gt=hm,En="onMouseLeave",_n="onMouseEnter",yr="mouse";(i==="pointerout"||i==="pointerover")&&(Gt=Kh,En="onPointerLeave",_n="onPointerEnter",yr="pointer");var dr=Me==null?ue:Tm(Me),Ue=We==null?ue:Tm(We),it=new Gt(En,yr+"leave",Me,p,C);it.target=dr,it.relatedTarget=Ue;var $e=null,Ct=tf(C);if(Ct===h){var nn=new Gt(_n,yr+"enter",We,p,C);nn.target=Ue,nn.relatedTarget=dr,$e=nn}bs(e,it,$e,Me,We)}}}function pg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Po=typeof Object.is=="function"?Object.is:pg;function Fd(e,i){if(Po(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var h=Object.keys(e),p=Object.keys(i);if(h.length!==p.length)return!1;for(var C=0;C<h.length;C++){var D=h[C];if(!rn.call(i,D)||!Po(e[D],i[D]))return!1}return!0}function xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J0(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function gg(e,i){for(var h=xm(e),p=0,C=0;h;){if(h.nodeType===yo){if(C=p+h.textContent.length,p<=i&&C>=i)return{node:h,offset:i-p};p=C}h=xm(J0(h))}}function Wy(e){var i=e.ownerDocument,h=i&&i.defaultView||window,p=h.getSelection&&h.getSelection();if(!p||p.rangeCount===0)return null;var C=p.anchorNode,D=p.anchorOffset,L=p.focusNode,$=p.focusOffset;try{C.nodeType,L.nodeType}catch{return null}return Q0(e,C,D,L,$)}function Q0(e,i,h,p,C){var D=0,L=-1,$=-1,Z=0,re=0,ue=e,Re=null;e:for(;;){for(var Me=null;ue===i&&(h===0||ue.nodeType===yo)&&(L=D+h),ue===p&&(C===0||ue.nodeType===yo)&&($=D+C),ue.nodeType===yo&&(D+=ue.nodeValue.length),(Me=ue.firstChild)!==null;)Re=ue,ue=Me;for(;;){if(ue===e)break e;if(Re===i&&++Z===h&&(L=D),Re===p&&++re===C&&($=D),(Me=ue.nextSibling)!==null)break;ue=Re,Re=ue.parentNode}ue=Me}return L===-1||$===-1?null:{start:L,end:$}}function Zy(e,i){var h=e.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var C=p.getSelection(),D=e.textContent.length,L=Math.min(i.start,D),$=i.end===void 0?L:Math.min(i.end,D);if(!C.extend&&L>$){var Z=$;$=L,L=Z}var re=gg(e,L),ue=gg(e,$);if(re&&ue){if(C.rangeCount===1&&C.anchorNode===re.node&&C.anchorOffset===re.offset&&C.focusNode===ue.node&&C.focusOffset===ue.offset)return;var Re=h.createRange();Re.setStart(re.node,re.offset),C.removeAllRanges(),L>$?(C.addRange(Re),C.extend(ue.node,ue.offset)):(Re.setEnd(ue.node,ue.offset),C.addRange(Re))}}}function _m(e){return e&&e.nodeType===yo}function wm(e,i){return!e||!i?!1:e===i?!0:_m(e)?!1:_m(i)?wm(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1}function Ky(e){return e&&e.ownerDocument&&wm(e.ownerDocument.documentElement,e)}function Qh(e){try{return typeof e.contentWindow.location.href=="string"}catch{return!1}}function Cm(){for(var e=window,i=vo();i instanceof e.HTMLIFrameElement;){if(Qh(i))e=i.contentWindow;else return i;i=vo(e.document)}return i}function Nm(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function vg(){var e=Cm();return{focusedElem:e,selectionRange:Nm(e)?ef(e):null}}function Sm(e){var i=Cm(),h=e.focusedElem,p=e.selectionRange;if(i!==h&&Ky(h)){p!==null&&Nm(h)&&yg(h,p);for(var C=[],D=h;D=D.parentNode;)D.nodeType===as&&C.push({element:D,left:D.scrollLeft,top:D.scrollTop});typeof h.focus=="function"&&h.focus();for(var L=0;L<C.length;L++){var $=C[L];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}}function ef(e){var i;return"selectionStart"in e?i={start:e.selectionStart,end:e.selectionEnd}:i=Wy(e),i||{start:0,end:0}}function yg(e,i){var h=i.start,p=i.end;p===void 0&&(p=h),"selectionStart"in e?(e.selectionStart=h,e.selectionEnd=Math.min(p,e.value.length)):Zy(e,i)}var bg=Bn&&"documentMode"in document&&document.documentMode<=11;function xg(){Bt("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Ud=null,s=null,t=null,a=!1;function f(e){if("selectionStart"in e&&Nm(e))return{start:e.selectionStart,end:e.selectionEnd};var i=e.ownerDocument&&e.ownerDocument.defaultView||window,h=i.getSelection();return{anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}}function g(e){return e.window===e?e.document:e.nodeType===bo?e:e.ownerDocument}function N(e,i,h){var p=g(h);if(!(a||Ud==null||Ud!==vo(p))){var C=f(Ud);if(!t||!Fd(t,C)){t=C;var D=Ds(s,"onSelect");if(D.length>0){var L=new Md("onSelect","select",null,i,h);e.push({event:L,listeners:D}),L.target=Ud}}}}function S(e,i,h,p,C,D,L){var $=h?Tm(h):window;switch(i){case"focusin":(qy($)||$.contentEditable==="true")&&(Ud=$,s=h,t=null);break;case"focusout":Ud=null,s=null,t=null;break;case"mousedown":a=!0;break;case"contextmenu":case"mouseup":case"dragend":a=!1,N(e,p,C);break;case"selectionchange":if(bg)break;case"keydown":case"keyup":N(e,p,C)}}function T(e,i){var h={};return h[e.toLowerCase()]=i.toLowerCase(),h["Webkit"+e]="webkit"+i,h["Moz"+e]="moz"+i,h}var M={animationend:T("Animation","AnimationEnd"),animationiteration:T("Animation","AnimationIteration"),animationstart:T("Animation","AnimationStart"),transitionend:T("Transition","TransitionEnd")},V={},F={};Bn&&(F=document.createElement("div").style,"AnimationEvent"in window||(delete M.animationend.animation,delete M.animationiteration.animation,delete M.animationstart.animation),"TransitionEvent"in window||delete M.transitionend.transition);function H(e){if(V[e])return V[e];if(!M[e])return e;var i=M[e];for(var h in i)if(i.hasOwnProperty(h)&&h in F)return V[e]=i[h];return e}var Y=H("animationend"),Q=H("animationiteration"),ee=H("animationstart"),ce=H("transitionend"),ve=new Map,be=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function je(e,i){ve.set(e,i),Bt(i,[e])}function Ne(){for(var e=0;e<be.length;e++){var i=be[e],h=i.toLowerCase(),p=i[0].toUpperCase()+i.slice(1);je(h,"on"+p)}je(Y,"onAnimationEnd"),je(Q,"onAnimationIteration"),je(ee,"onAnimationStart"),je("dblclick","onDoubleClick"),je("focusin","onFocus"),je("focusout","onBlur"),je(ce,"onTransitionEnd")}function Le(e,i,h,p,C,D,L){var $=ve.get(i);if($!==void 0){var Z=Md,re=i;switch(i){case"keypress":if(ka(p)===0)return;case"keydown":case"keyup":Z=sg;break;case"focusin":re="focus",Z=Ru;break;case"focusout":re="blur",Z=Ru;break;case"beforeblur":case"afterblur":Z=Ru;break;case"click":if(p.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=F0;break;case Y:case Q:case ee:Z=Rc;break;case ce:Z=My;break;case"scroll":Z=Sy;break;case"wheel":Z=q0;break;case"copy":case"cut":case"paste":Z=tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Kh;break}var ue=(D&Rl)!==0;{var Re=!ue&&i==="scroll",Me=Ui(h,$,p.type,ue,Re);if(Me.length>0){var We=new Z($,re,null,p,C);e.push({event:We,listeners:Me})}}}}Ne(),ys(),Lc(),xg(),Iy();function Fe(e,i,h,p,C,D,L){Le(e,i,h,p,C,D);var $=(D&jh)===0;$&&(Ic(e,i,h,p,C),Bd(e,i,h,p,C),S(e,i,h,p,C),Uy(e,i,h,p,C))}var nt=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Vt=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(nt));function Kt(e,i,h){var p=e.type||"unknown-event";e.currentTarget=h,_o(p,i,void 0,e),e.currentTarget=null}function Ot(e,i,h){var p;if(h)for(var C=i.length-1;C>=0;C--){var D=i[C],L=D.instance,$=D.currentTarget,Z=D.listener;if(L!==p&&e.isPropagationStopped())return;Kt(e,Z,$),p=L}else for(var re=0;re<i.length;re++){var ue=i[re],Re=ue.instance,Me=ue.currentTarget,We=ue.listener;if(Re!==p&&e.isPropagationStopped())return;Kt(e,We,Me),p=Re}}function At(e,i){for(var h=(i&Rl)!==0,p=0;p<e.length;p++){var C=e[p],D=C.event,L=C.listeners;Ot(D,L,h)}Uf()}function Et(e,i,h,p,C){var D=md(h),L=[];Fe(L,e,p,h,D,i),At(L,i)}function xt(e,i){Vt.has(e)||x('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var h=!1,p=s2(i),C=Ws(e);p.has(C)||(Qt(i,e,It,h),p.add(C))}function Dt(e,i,h){Vt.has(e)&&!i&&x('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var p=0;i&&(p|=Rl),Qt(h,e,p,i)}var ut="_reactListening"+Math.random().toString(36).slice(2);function un(e){if(!e[ut]){e[ut]=!0,hn.forEach(function(h){h!=="selectionchange"&&(Vt.has(h)||Dt(h,!1,e),Dt(h,!0,e))});var i=e.nodeType===bo?e:e.ownerDocument;i!==null&&(i[ut]||(i[ut]=!0,Dt("selectionchange",!1,i)))}}function Qt(e,i,h,p,C){var D=A0(e,i,h),L=void 0;yd&&(i==="touchstart"||i==="touchmove"||i==="wheel")&&(L=!0),e=e,p?L!==void 0?Xp(e,i,D,L):Yp(e,i,D):L!==void 0?I0(e,i,D,L):Cy(e,i,D)}function $n(e,i){return e===i||e.nodeType===yi&&e.parentNode===i}function Or(e,i,h,p,C){var D=p;if(!(i&Ph)&&!(i&It)){var L=C;if(p!==null){var $=p;e:for(;;){if($===null)return;var Z=$.tag;if(Z===O||Z===W){var re=$.stateNode.containerInfo;if($n(re,L))break;if(Z===W)for(var ue=$.return;ue!==null;){var Re=ue.tag;if(Re===O||Re===W){var Me=ue.stateNode.containerInfo;if($n(Me,L))return}ue=ue.return}for(;re!==null;){var We=tf(re);if(We===null)return;var Ze=We.tag;if(Ze===ne||Ze===me){$=D=We;continue e}re=re.parentNode}}$=$.return}}}qs(function(){return Et(e,i,h,D)})}function Vr(e,i,h){return{instance:e,listener:i,currentTarget:h}}function Ui(e,i,h,p,C,D){for(var L=i!==null?i+"Capture":null,$=p?L:i,Z=[],re=e,ue=null;re!==null;){var Re=re,Me=Re.stateNode,We=Re.tag;if(We===ne&&Me!==null&&(ue=Me,$!==null)){var Ze=Nc(re,$);Ze!=null&&Z.push(Vr(re,Ze,ue))}if(C)break;re=re.return}return Z}function Ds(e,i){for(var h=i+"Capture",p=[],C=e;C!==null;){var D=C,L=D.stateNode,$=D.tag;if($===ne&&L!==null){var Z=L,re=Nc(C,h);re!=null&&p.unshift(Vr(C,re,Z));var ue=Nc(C,i);ue!=null&&p.push(Vr(C,ue,Z))}C=C.return}return p}function $i(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==ne);return e||null}function Oi(e,i){for(var h=e,p=i,C=0,D=h;D;D=$i(D))C++;for(var L=0,$=p;$;$=$i($))L++;for(;C-L>0;)h=$i(h),C--;for(;L-C>0;)p=$i(p),L--;for(var Z=C;Z--;){if(h===p||p!==null&&h===p.alternate)return h;h=$i(h),p=$i(p)}return null}function es(e,i,h,p,C){for(var D=i._reactName,L=[],$=h;$!==null&&$!==p;){var Z=$,re=Z.alternate,ue=Z.stateNode,Re=Z.tag;if(re!==null&&re===p)break;if(Re===ne&&ue!==null){var Me=ue;if(C){var We=Nc($,D);We!=null&&L.unshift(Vr($,We,Me))}else if(!C){var Ze=Nc($,D);Ze!=null&&L.push(Vr($,Ze,Me))}}$=$.return}L.length!==0&&e.push({event:i,listeners:L})}function bs(e,i,h,p,C){var D=p&&C?Oi(p,C):null;p!==null&&es(e,i,p,D,!1),C!==null&&h!==null&&es(e,h,C,D,!0)}function Ws(e,i){return e+"__bubble"}var Hr=!1,hi="dangerouslySetInnerHTML",Ci="suppressContentEditableWarning",Ni="suppressHydrationWarning",Ts="autoFocus",Mi="children",qi="style",xs="__html",Ri,Kn,Hi,cs,Si,qo,la;Ri={dialog:!0,webview:!0},Kn=function(e,i){Da(e,i),Dh(e,i),_c(e,i,{registrationNameDependencies:Sn,possibleRegistrationNames:Ft})},qo=Bn&&!document.documentMode,Hi=function(e,i,h){if(!Hr){var p=to(h),C=to(i);C!==p&&(Hr=!0,x("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(C),JSON.stringify(p)))}},cs=function(e){if(!Hr){Hr=!0;var i=[];e.forEach(function(h){i.push(h)}),x("Extra attributes from the server: %s",i)}},Si=function(e,i){i===!1?x("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):x("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof i)},la=function(e,i){var h=e.namespaceURI===_a?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return h.innerHTML=i,h.innerHTML};var Aa=/\r\n?/g,Kl=/\u0000|\uFFFD/g;function to(e){qe(e);var i=typeof e=="string"?e:""+e;return i.replace(Aa,`
`).replace(Kl,"")}function Zs(e,i,h,p){var C=to(i),D=to(e);if(D!==C&&(p&&(Hr||(Hr=!0,x('Text content did not match. Server: "%s" Client: "%s"',D,C))),h&&zt))throw new Error("Text content does not match server-rendered HTML.")}function Ks(e){return e.nodeType===bo?e:e.ownerDocument}function Yl(){}function Vc(e){e.onclick=Yl}function Yy(e,i,h,p,C){for(var D in p)if(p.hasOwnProperty(D)){var L=p[D];if(D===qi)L&&Object.freeze(L),Sh(i,L);else if(D===hi){var $=L?L[xs]:void 0;$!=null&&ad(i,$)}else if(D===Mi)if(typeof L=="string"){var Z=e!=="textarea"||L!=="";Z&&Ga(i,L)}else typeof L=="number"&&Ga(i,""+L);else D===Ci||D===Ni||D===Ts||(Sn.hasOwnProperty(D)?L!=null&&(typeof L!="function"&&Si(D,L),D==="onScroll"&&xt("scroll",i)):L!=null&&Ce(i,D,L,C))}}function _g(e,i,h,p){for(var C=0;C<i.length;C+=2){var D=i[C],L=i[C+1];D===qi?Sh(e,L):D===hi?ad(e,L):D===Mi?Ga(e,L):Ce(e,D,L,p)}}function wg(e,i,h,p){var C,D=Ks(h),L,$=p;if($===_a&&($=Yr(e)),$===_a){if(C=Za(e,i),!C&&e!==e.toLowerCase()&&x("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),e==="script"){var Z=D.createElement("div");Z.innerHTML="<script><\/script>";var re=Z.firstChild;L=Z.removeChild(re)}else if(typeof i.is=="string")L=D.createElement(e,{is:i.is});else if(L=D.createElement(e),e==="select"){var ue=L;i.multiple?ue.multiple=!0:i.size&&(ue.size=i.size)}}else L=D.createElementNS($,e);return $===_a&&!C&&Object.prototype.toString.call(L)==="[object HTMLUnknownElement]"&&!rn.call(Ri,e)&&(Ri[e]=!0,x("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e)),L}function Xl(e,i){return Ks(i).createTextNode(e)}function Xy(e,i,h,p){var C=Za(i,h);Kn(i,h);var D;switch(i){case"dialog":xt("cancel",e),xt("close",e),D=h;break;case"iframe":case"object":case"embed":xt("load",e),D=h;break;case"video":case"audio":for(var L=0;L<nt.length;L++)xt(nt[L],e);D=h;break;case"source":xt("error",e),D=h;break;case"img":case"image":case"link":xt("error",e),xt("load",e),D=h;break;case"details":xt("toggle",e),D=h;break;case"input":gc(e,h),D=Tl(e,h),xt("invalid",e);break;case"option":jr(e,h),D=h;break;case"select":yc(e,h),D=vc(e,h),xt("invalid",e);break;case"textarea":xh(e,h),D=Ha(e,h),xt("invalid",e);break;default:D=h}switch(dd(i,D),Yy(i,e,p,D,C),i){case"input":Us(e),Ge(e,h,!1);break;case"textarea":Us(e),fr(e);break;case"option":Wr(e,h);break;case"select":ru(e,h);break;default:typeof D.onClick=="function"&&Vc(e);break}}function Jy(e,i,h,p,C){Kn(i,p);var D=null,L,$;switch(i){case"input":L=Tl(e,h),$=Tl(e,p),D=[];break;case"select":L=vc(e,h),$=vc(e,p),D=[];break;case"textarea":L=Ha(e,h),$=Ha(e,p),D=[];break;default:L=h,$=p,typeof L.onClick!="function"&&typeof $.onClick=="function"&&Vc(e);break}dd(i,$);var Z,re,ue=null;for(Z in L)if(!($.hasOwnProperty(Z)||!L.hasOwnProperty(Z)||L[Z]==null))if(Z===qi){var Re=L[Z];for(re in Re)Re.hasOwnProperty(re)&&(ue||(ue={}),ue[re]="")}else Z===hi||Z===Mi||Z===Ci||Z===Ni||Z===Ts||(Sn.hasOwnProperty(Z)?D||(D=[]):(D=D||[]).push(Z,null));for(Z in $){var Me=$[Z],We=L!=null?L[Z]:void 0;if(!(!$.hasOwnProperty(Z)||Me===We||Me==null&&We==null))if(Z===qi)if(Me&&Object.freeze(Me),We){for(re in We)We.hasOwnProperty(re)&&(!Me||!Me.hasOwnProperty(re))&&(ue||(ue={}),ue[re]="");for(re in Me)Me.hasOwnProperty(re)&&We[re]!==Me[re]&&(ue||(ue={}),ue[re]=Me[re])}else ue||(D||(D=[]),D.push(Z,ue)),ue=Me;else if(Z===hi){var Ze=Me?Me[xs]:void 0,rt=We?We[xs]:void 0;Ze!=null&&rt!==Ze&&(D=D||[]).push(Z,Ze)}else Z===Mi?(typeof Me=="string"||typeof Me=="number")&&(D=D||[]).push(Z,""+Me):Z===Ci||Z===Ni||(Sn.hasOwnProperty(Z)?(Me!=null&&(typeof Me!="function"&&Si(Z,Me),Z==="onScroll"&&xt("scroll",e)),!D&&We!==Me&&(D=[])):(D=D||[]).push(Z,Me))}return ue&&(ra(ue,$[qi]),(D=D||[]).push(qi,ue)),D}function e_(e,i,h,p,C){h==="input"&&C.type==="radio"&&C.name!=null&&K(e,C);var D=Za(h,p),L=Za(h,C);switch(_g(e,i,D,L),h){case"input":_e(e,C);break;case"textarea":od(e,C);break;case"select":na(e,C);break}}function t_(e){{var i=e.toLowerCase();return mu.hasOwnProperty(i)&&mu[i]||null}}function n_(e,i,h,p,C,D,L){var $,Z;switch($=Za(i,h),Kn(i,h),i){case"dialog":xt("cancel",e),xt("close",e);break;case"iframe":case"object":case"embed":xt("load",e);break;case"video":case"audio":for(var re=0;re<nt.length;re++)xt(nt[re],e);break;case"source":xt("error",e);break;case"img":case"image":case"link":xt("error",e),xt("load",e);break;case"details":xt("toggle",e);break;case"input":gc(e,h),xt("invalid",e);break;case"option":jr(e,h);break;case"select":yc(e,h),xt("invalid",e);break;case"textarea":xh(e,h),xt("invalid",e);break}dd(i,h);{Z=new Set;for(var ue=e.attributes,Re=0;Re<ue.length;Re++){var Me=ue[Re].name.toLowerCase();switch(Me){case"value":break;case"checked":break;case"selected":break;default:Z.add(ue[Re].name)}}}var We=null;for(var Ze in h)if(h.hasOwnProperty(Ze)){var rt=h[Ze];if(Ze===Mi)typeof rt=="string"?e.textContent!==rt&&(h[Ni]!==!0&&Zs(e.textContent,rt,D,L),We=[Mi,rt]):typeof rt=="number"&&e.textContent!==""+rt&&(h[Ni]!==!0&&Zs(e.textContent,rt,D,L),We=[Mi,""+rt]);else if(Sn.hasOwnProperty(Ze))rt!=null&&(typeof rt!="function"&&Si(Ze,rt),Ze==="onScroll"&&xt("scroll",e));else if(L&&typeof $=="boolean"){var Gt=void 0,En=tn(Ze);if(h[Ni]!==!0){if(!(Ze===Ci||Ze===Ni||Ze==="value"||Ze==="checked"||Ze==="selected")){if(Ze===hi){var _n=e.innerHTML,yr=rt?rt[xs]:void 0;if(yr!=null){var dr=la(e,yr);dr!==_n&&Hi(Ze,_n,dr)}}else if(Ze===qi){if(Z.delete(Ze),qo){var Ue=Lf(rt);Gt=e.getAttribute("style"),Ue!==Gt&&Hi(Ze,Gt,Ue)}}else if($&&!Rt)Z.delete(Ze.toLowerCase()),Gt=de(e,Ze,rt),rt!==Gt&&Hi(Ze,Gt,rt);else if(!wr(Ze,En,$)&&!dt(Ze,rt,En,$)){var it=!1;if(En!==null)Z.delete(En.attributeName),Gt=ie(e,Ze,rt,En);else{var $e=p;if($e===_a&&($e=Yr(i)),$e===_a)Z.delete(Ze.toLowerCase());else{var Ct=t_(Ze);Ct!==null&&Ct!==Ze&&(it=!0,Z.delete(Ct)),Z.delete(Ze)}Gt=de(e,Ze,rt)}var nn=Rt;!nn&&rt!==Gt&&!it&&Hi(Ze,Gt,rt)}}}}}switch(L&&Z.size>0&&h[Ni]!==!0&&cs(Z),i){case"input":Us(e),Ge(e,h,!0);break;case"textarea":Us(e),fr(e);break;case"select":case"option":break;default:typeof h.onClick=="function"&&Vc(e);break}return We}function r_(e,i,h){var p=e.nodeValue!==i;return p}function Cg(e,i){{if(Hr)return;Hr=!0,x("Did not expect server HTML to contain a <%s> in <%s>.",i.nodeName.toLowerCase(),e.nodeName.toLowerCase())}}function Ng(e,i){{if(Hr)return;Hr=!0,x('Did not expect server HTML to contain the text node "%s" in <%s>.',i.nodeValue,e.nodeName.toLowerCase())}}function Sg(e,i,h){{if(Hr)return;Hr=!0,x("Expected server HTML to contain a matching <%s> in <%s>.",i,e.nodeName.toLowerCase())}}function Eg(e,i){{if(i===""||Hr)return;Hr=!0,x('Expected server HTML to contain a matching text node for "%s" in <%s>.',i,e.nodeName.toLowerCase())}}function Ma(e,i,h){switch(i){case"input":et(e,h);return;case"textarea":ai(e,h);return;case"select":sd(e,h);return}}var zc=function(){},$d=function(){};{var i_=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Qy=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],s_=Qy.concat(["button"]),Ps=["dd","dt","li","option","optgroup","p","rp","rt"],jo={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};$d=function(e,i){var h=In({},e||jo),p={tag:i};return Qy.indexOf(i)!==-1&&(h.aTagInScope=null,h.buttonTagInScope=null,h.nobrTagInScope=null),s_.indexOf(i)!==-1&&(h.pTagInButtonScope=null),i_.indexOf(i)!==-1&&i!=="address"&&i!=="div"&&i!=="p"&&(h.listItemTagAutoclosing=null,h.dlItemTagAutoclosing=null),h.current=p,i==="form"&&(h.formTag=p),i==="a"&&(h.aTagInScope=p),i==="button"&&(h.buttonTagInScope=p),i==="nobr"&&(h.nobrTagInScope=p),i==="p"&&(h.pTagInButtonScope=p),i==="li"&&(h.listItemTagAutoclosing=p),(i==="dd"||i==="dt")&&(h.dlItemTagAutoclosing=p),h};var Lu=function(e,i){switch(i){case"select":return e==="option"||e==="optgroup"||e==="#text";case"optgroup":return e==="option"||e==="#text";case"option":return e==="#text";case"tr":return e==="th"||e==="td"||e==="style"||e==="script"||e==="template";case"tbody":case"thead":case"tfoot":return e==="tr"||e==="style"||e==="script"||e==="template";case"colgroup":return e==="col"||e==="template";case"table":return e==="caption"||e==="colgroup"||e==="tbody"||e==="tfoot"||e==="thead"||e==="style"||e==="script"||e==="template";case"head":return e==="base"||e==="basefont"||e==="bgsound"||e==="link"||e==="meta"||e==="title"||e==="noscript"||e==="noframes"||e==="style"||e==="script"||e==="template";case"html":return e==="head"||e==="body"||e==="frameset";case"frameset":return e==="frame";case"#document":return e==="html"}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i!=="h1"&&i!=="h2"&&i!=="h3"&&i!=="h4"&&i!=="h5"&&i!=="h6";case"rp":case"rt":return Ps.indexOf(i)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return i==null}return!0},Ra=function(e,i){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i.pTagInButtonScope;case"form":return i.formTag||i.pTagInButtonScope;case"li":return i.listItemTagAutoclosing;case"dd":case"dt":return i.dlItemTagAutoclosing;case"button":return i.buttonTagInScope;case"a":return i.aTagInScope;case"nobr":return i.nobrTagInScope}return null},Oc={};zc=function(e,i,h){h=h||jo;var p=h.current,C=p&&p.tag;i!=null&&(e!=null&&x("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var D=Lu(e,C)?null:p,L=D?null:Ra(e,h),$=D||L;if($){var Z=$.tag,re=!!D+"|"+e+"|"+Z;if(!Oc[re]){Oc[re]=!0;var ue=e,Re="";if(e==="#text"?/\S/.test(i)?ue="Text nodes":(ue="Whitespace text nodes",Re=" Make sure you don't have any extra whitespace between tags on each line of your source code."):ue="<"+e+">",D){var Me="";Z==="table"&&e==="tr"&&(Me+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),x("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",ue,Z,Re,Me)}else x("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",ue,Z)}}}}var Ho="suppressHydrationWarning",eb="$",tb="/$",Dg="$?",Tg="$!",Qk="style",o_=null,a_=null;function eA(e){var i,h,p=e.nodeType;switch(p){case bo:case ou:{i=p===bo?"#document":"#fragment";var C=e.documentElement;h=C?C.namespaceURI:$r(null,"");break}default:{var D=p===yi?e.parentNode:e,L=D.namespaceURI||null;i=D.tagName,h=$r(L,i);break}}{var $=i.toLowerCase(),Z=$d(null,$);return{namespace:h,ancestorInfo:Z}}}function tA(e,i,h){{var p=e,C=$r(p.namespace,i),D=$d(p.ancestorInfo,i);return{namespace:C,ancestorInfo:D}}}function E6(e){return e}function nA(e){o_=k0(),a_=vg();var i=null;return wy(!1),i}function rA(e){Sm(a_),wy(o_),o_=null,a_=null}function iA(e,i,h,p,C){var D;{var L=p;if(zc(e,null,L.ancestorInfo),typeof i.children=="string"||typeof i.children=="number"){var $=""+i.children,Z=$d(L.ancestorInfo,e);zc(null,$,Z)}D=L.namespace}var re=wg(e,i,h,D);return kg(C,re),p_(re,i),re}function sA(e,i){e.appendChild(i)}function oA(e,i,h,p,C){switch(Xy(e,i,h,p),i){case"button":case"input":case"select":case"textarea":return!!h.autoFocus;case"img":return!0;default:return!1}}function aA(e,i,h,p,C,D){{var L=D;if(typeof p.children!=typeof h.children&&(typeof p.children=="string"||typeof p.children=="number")){var $=""+p.children,Z=$d(L.ancestorInfo,i);zc(null,$,Z)}}return Jy(e,i,h,p)}function l_(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}function lA(e,i,h,p){{var C=h;zc(null,e,C.ancestorInfo)}var D=Xl(e,i);return kg(p,D),D}function cA(){var e=window.event;return e===void 0?ql:Mu(e.type)}var c_=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,u_=-1,AN=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof AN<"u"?function(e){return AN.resolve(null).then(e).catch(hA)}:c_;function hA(e){setTimeout(function(){throw e})}function fA(e,i,h,p){switch(i){case"button":case"input":case"select":case"textarea":h.autoFocus&&e.focus();return;case"img":{h.src&&(e.src=h.src);return}}}function mA(e,i,h,p,C,D){e_(e,i,h,p,C),p_(e,C)}function MN(e){Ga(e,"")}function pA(e,i,h){e.nodeValue=h}function gA(e,i){e.appendChild(i)}function vA(e,i){var h;e.nodeType===yi?(h=e.parentNode,h.insertBefore(i,e)):(h=e,h.appendChild(i));var p=e._reactRootContainer;p==null&&h.onclick===null&&Vc(h)}function yA(e,i,h){e.insertBefore(i,h)}function bA(e,i,h){e.nodeType===yi?e.parentNode.insertBefore(i,h):e.insertBefore(i,h)}function xA(e,i){e.removeChild(i)}function _A(e,i){e.nodeType===yi?e.parentNode.removeChild(i):e.removeChild(i)}function d_(e,i){var h=i,p=0;do{var C=h.nextSibling;if(e.removeChild(h),C&&C.nodeType===yi){var D=C.data;if(D===tb)if(p===0){e.removeChild(C),sl(i);return}else p--;else(D===eb||D===Dg||D===Tg)&&p++}h=C}while(h);sl(i)}function wA(e,i){e.nodeType===yi?d_(e.parentNode,i):e.nodeType===as&&d_(e,i),sl(e)}function CA(e){e=e;var i=e.style;typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"}function NA(e){e.nodeValue=""}function SA(e,i){e=e;var h=i[Qk],p=h!=null&&h.hasOwnProperty("display")?h.display:null;e.style.display=wh("display",p)}function EA(e,i){e.nodeValue=i}function DA(e){e.nodeType===as?e.textContent="":e.nodeType===bo&&e.documentElement&&e.removeChild(e.documentElement)}function TA(e,i,h){return e.nodeType!==as||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e}function PA(e,i){return i===""||e.nodeType!==yo?null:e}function jA(e){return e.nodeType!==yi?null:e}function RN(e){return e.data===Dg}function h_(e){return e.data===Tg}function kA(e){var i=e.nextSibling&&e.nextSibling.dataset,h,p,C;return i&&(h=i.dgst,p=i.msg,C=i.stck),{message:p,digest:h,stack:C}}function AA(e,i){e._reactRetry=i}function nb(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===as||i===yo)break;if(i===yi){var h=e.data;if(h===eb||h===Tg||h===Dg)break;if(h===tb)return null}}return e}function Pg(e){return nb(e.nextSibling)}function MA(e){return nb(e.firstChild)}function RA(e){return nb(e.firstChild)}function LA(e){return nb(e.nextSibling)}function IA(e,i,h,p,C,D,L){kg(D,e),p_(e,h);var $;{var Z=C;$=Z.namespace}var re=(D.mode&lr)!==Nn;return n_(e,i,h,$,p,re,L)}function VA(e,i,h,p){return kg(h,e),h.mode&lr,r_(e,i)}function zA(e,i){kg(i,e)}function OA(e){for(var i=e.nextSibling,h=0;i;){if(i.nodeType===yi){var p=i.data;if(p===tb){if(h===0)return Pg(i);h--}else(p===eb||p===Tg||p===Dg)&&h++}i=i.nextSibling}return null}function LN(e){for(var i=e.previousSibling,h=0;i;){if(i.nodeType===yi){var p=i.data;if(p===eb||p===Tg||p===Dg){if(h===0)return i;h--}else p===tb&&h++}i=i.previousSibling}return null}function BA(e){sl(e)}function FA(e){sl(e)}function UA(e){return e!=="head"&&e!=="body"}function $A(e,i,h,p){var C=!0;Zs(i.nodeValue,h,p,C)}function qA(e,i,h,p,C,D){if(i[Ho]!==!0){var L=!0;Zs(p.nodeValue,C,D,L)}}function HA(e,i){i.nodeType===as?Cg(e,i):i.nodeType===yi||Ng(e,i)}function GA(e,i){{var h=e.parentNode;h!==null&&(i.nodeType===as?Cg(h,i):i.nodeType===yi||Ng(h,i))}}function WA(e,i,h,p,C){(C||i[Ho]!==!0)&&(p.nodeType===as?Cg(h,p):p.nodeType===yi||Ng(h,p))}function ZA(e,i,h){Sg(e,i)}function KA(e,i){Eg(e,i)}function YA(e,i,h){{var p=e.parentNode;p!==null&&Sg(p,i)}}function XA(e,i){{var h=e.parentNode;h!==null&&Eg(h,i)}}function JA(e,i,h,p,C,D){(D||i[Ho]!==!0)&&Sg(h,p)}function QA(e,i,h,p,C){(C||i[Ho]!==!0)&&Eg(h,p)}function e2(e){x("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",e.nodeName.toLowerCase())}function t2(e){un(e)}var Em=Math.random().toString(36).slice(2),Dm="__reactFiber$"+Em,f_="__reactProps$"+Em,jg="__reactContainer$"+Em,m_="__reactEvents$"+Em,n2="__reactListeners$"+Em,r2="__reactHandles$"+Em;function i2(e){delete e[Dm],delete e[f_],delete e[m_],delete e[n2],delete e[r2]}function kg(e,i){i[Dm]=e}function rb(e,i){i[jg]=e}function IN(e){e[jg]=null}function Ag(e){return!!e[jg]}function tf(e){var i=e[Dm];if(i)return i;for(var h=e.parentNode;h;){if(i=h[jg]||h[Dm],i){var p=i.alternate;if(i.child!==null||p!==null&&p.child!==null)for(var C=LN(e);C!==null;){var D=C[Dm];if(D)return D;C=LN(C)}return i}e=h,h=e.parentNode}return null}function qd(e){var i=e[Dm]||e[jg];return i&&(i.tag===ne||i.tag===me||i.tag===ze||i.tag===O)?i:null}function Tm(e){if(e.tag===ne||e.tag===me)return e.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function ib(e){return e[f_]||null}function p_(e,i){e[f_]=i}function s2(e){var i=e[m_];return i===void 0&&(i=e[m_]=new Set),i}var VN={},zN=o.ReactDebugCurrentFrame;function sb(e){if(e){var i=e._owner,h=_l(e.type,e._source,i?i.type:null);zN.setExtraStackFrame(h)}else zN.setExtraStackFrame(null)}function Jl(e,i,h,p,C){{var D=Function.call.bind(rn);for(var L in e)if(D(e,L)){var $=void 0;try{if(typeof e[L]!="function"){var Z=Error((p||"React class")+": "+h+" type `"+L+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[L]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Z.name="Invariant Violation",Z}$=e[L](i,L,p,h,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(re){$=re}$&&!($ instanceof Error)&&(sb(C),x("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",p||"React class",h,L,typeof $),sb(null)),$ instanceof Error&&!($.message in VN)&&(VN[$.message]=!0,sb(C),x("Failed %s type: %s",h,$.message),sb(null))}}}var g_=[],ob;ob=[];var Iu=-1;function Hd(e){return{current:e}}function ko(e,i){if(Iu<0){x("Unexpected pop.");return}i!==ob[Iu]&&x("Unexpected Fiber popped."),e.current=g_[Iu],g_[Iu]=null,ob[Iu]=null,Iu--}function Ao(e,i,h){Iu++,g_[Iu]=e.current,ob[Iu]=h,e.current=i}var v_;v_={};var La={};Object.freeze(La);var Vu=Hd(La),Bc=Hd(!1),y_=La;function Pm(e,i,h){return h&&Fc(i)?y_:Vu.current}function ON(e,i,h){{var p=e.stateNode;p.__reactInternalMemoizedUnmaskedChildContext=i,p.__reactInternalMemoizedMaskedChildContext=h}}function jm(e,i){{var h=e.type,p=h.contextTypes;if(!p)return La;var C=e.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===i)return C.__reactInternalMemoizedMaskedChildContext;var D={};for(var L in p)D[L]=i[L];{var $=jn(e)||"Unknown";Jl(p,D,"context",$)}return C&&ON(e,i,D),D}}function ab(){return Bc.current}function Fc(e){{var i=e.childContextTypes;return i!=null}}function lb(e){ko(Bc,e),ko(Vu,e)}function b_(e){ko(Bc,e),ko(Vu,e)}function BN(e,i,h){{if(Vu.current!==La)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Ao(Vu,i,e),Ao(Bc,h,e)}}function FN(e,i,h){{var p=e.stateNode,C=i.childContextTypes;if(typeof p.getChildContext!="function"){{var D=jn(e)||"Unknown";v_[D]||(v_[D]=!0,x("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D))}return h}var L=p.getChildContext();for(var $ in L)if(!($ in C))throw new Error((jn(e)||"Unknown")+'.getChildContext(): key "'+$+'" is not defined in childContextTypes.');{var Z=jn(e)||"Unknown";Jl(C,L,"child context",Z)}return In({},h,L)}}function cb(e){{var i=e.stateNode,h=i&&i.__reactInternalMemoizedMergedChildContext||La;return y_=Vu.current,Ao(Vu,h,e),Ao(Bc,Bc.current,e),!0}}function UN(e,i,h){{var p=e.stateNode;if(!p)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(h){var C=FN(e,i,y_);p.__reactInternalMemoizedMergedChildContext=C,ko(Bc,e),ko(Vu,e),Ao(Vu,C,e),Ao(Bc,h,e)}else ko(Bc,e),Ao(Bc,h,e)}}function o2(e){{if(!_t(e)||e.tag!==k)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var i=e;do{switch(i.tag){case O:return i.stateNode.context;case k:{var h=i.type;if(Fc(h))return i.stateNode.__reactInternalMemoizedMergedChildContext;break}}i=i.return}while(i!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Gd=0,ub=1,zu=null,x_=!1,__=!1;function $N(e){zu===null?zu=[e]:zu.push(e)}function a2(e){x_=!0,$N(e)}function qN(){x_&&Wd()}function Wd(){if(!__&&zu!==null){__=!0;var e=0,i=Uo();try{var h=!0,p=zu;for(gs(Fo);e<p.length;e++){var C=p[e];do C=C(h);while(C!==null)}zu=null,x_=!1}catch(D){throw zu!==null&&(zu=zu.slice(e+1)),Rn(li,Wd),D}finally{gs(i),__=!1}}return null}var km=[],Am=0,db=null,hb=0,ll=[],cl=0,nf=null,Ou=1,Bu="";function l2(e){return sf(),(e.flags&q)!==wn}function c2(e){return sf(),hb}function u2(){var e=Bu,i=Ou,h=i&~d2(i);return h.toString(32)+e}function rf(e,i){sf(),km[Am++]=hb,km[Am++]=db,db=e,hb=i}function HN(e,i,h){sf(),ll[cl++]=Ou,ll[cl++]=Bu,ll[cl++]=nf,nf=e;var p=Ou,C=Bu,D=fb(p)-1,L=p&~(1<<D),$=h+1,Z=fb(i)+D;if(Z>30){var re=D-D%5,ue=(1<<re)-1,Re=(L&ue).toString(32),Me=L>>re,We=D-re,Ze=fb(i)+We,rt=$<<We,Gt=rt|Me,En=Re+C;Ou=1<<Ze|Gt,Bu=En}else{var _n=$<<D,yr=_n|L,dr=C;Ou=1<<Z|yr,Bu=dr}}function w_(e){sf();var i=e.return;if(i!==null){var h=1,p=0;rf(e,h),HN(e,h,p)}}function fb(e){return 32-_d(e)}function d2(e){return 1<<fb(e)-1}function C_(e){for(;e===db;)db=km[--Am],km[Am]=null,hb=km[--Am],km[Am]=null;for(;e===nf;)nf=ll[--cl],ll[cl]=null,Bu=ll[--cl],ll[cl]=null,Ou=ll[--cl],ll[cl]=null}function h2(){return sf(),nf!==null?{id:Ou,overflow:Bu}:null}function f2(e,i){sf(),ll[cl++]=Ou,ll[cl++]=Bu,ll[cl++]=nf,Ou=i.id,Bu=i.overflow,nf=e}function sf(){ro()||x("Expected to be hydrating. This is a bug in React. Please file an issue.")}var no=null,ul=null,Ql=!1,of=!1,Zd=null;function m2(){Ql&&x("We should not be hydrating here. This is a bug in React. Please file a bug.")}function GN(){of=!0}function p2(){return of}function g2(e){var i=e.stateNode.containerInfo;return ul=RA(i),no=e,Ql=!0,Zd=null,of=!1,!0}function v2(e,i,h){return ul=LA(i),no=e,Ql=!0,Zd=null,of=!1,h!==null&&f2(e,h),!0}function WN(e,i){switch(e.tag){case O:{HA(e.stateNode.containerInfo,i);break}case ne:{var h=(e.mode&lr)!==Nn;WA(e.type,e.memoizedProps,e.stateNode,i,h);break}case ze:{var p=e.memoizedState;p.dehydrated!==null&&GA(p.dehydrated,i);break}}}function ZN(e,i){WN(e,i);var h=_L();h.stateNode=i,h.return=e;var p=e.deletions;p===null?(e.deletions=[h],e.flags|=Co):p.push(h)}function N_(e,i){{if(of)return;switch(e.tag){case O:{var h=e.stateNode.containerInfo;switch(i.tag){case ne:var p=i.type;i.pendingProps,ZA(h,p);break;case me:var C=i.pendingProps;KA(h,C);break}break}case ne:{var D=e.type,L=e.memoizedProps,$=e.stateNode;switch(i.tag){case ne:{var Z=i.type,re=i.pendingProps,ue=(e.mode&lr)!==Nn;JA(D,L,$,Z,re,ue);break}case me:{var Re=i.pendingProps,Me=(e.mode&lr)!==Nn;QA(D,L,$,Re,Me);break}}break}case ze:{var We=e.memoizedState,Ze=We.dehydrated;if(Ze!==null)switch(i.tag){case ne:var rt=i.type;i.pendingProps,YA(Ze,rt);break;case me:var Gt=i.pendingProps;XA(Ze,Gt);break}break}default:return}}}function KN(e,i){i.flags=i.flags&~v|bi,N_(e,i)}function YN(e,i){switch(e.tag){case ne:{var h=e.type;e.pendingProps;var p=TA(i,h);return p!==null?(e.stateNode=p,no=e,ul=MA(p),!0):!1}case me:{var C=e.pendingProps,D=PA(i,C);return D!==null?(e.stateNode=D,no=e,ul=null,!0):!1}case ze:{var L=jA(i);if(L!==null){var $={dehydrated:L,treeContext:h2(),retryLane:Bo};e.memoizedState=$;var Z=wL(L);return Z.return=e,e.child=Z,no=e,ul=null,!0}return!1}default:return!1}}function S_(e){return(e.mode&lr)!==Nn&&(e.flags&cn)===wn}function E_(e){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function D_(e){if(Ql){var i=ul;if(!i){S_(e)&&(N_(no,e),E_()),KN(no,e),Ql=!1,no=e;return}var h=i;if(!YN(e,i)){S_(e)&&(N_(no,e),E_()),i=Pg(h);var p=no;if(!i||!YN(e,i)){KN(no,e),Ql=!1,no=e;return}ZN(p,h)}}}function y2(e,i,h){var p=e.stateNode,C=!of,D=IA(p,e.type,e.memoizedProps,i,h,e,C);return e.updateQueue=D,D!==null}function b2(e){var i=e.stateNode,h=e.memoizedProps,p=VA(i,h,e);if(p){var C=no;if(C!==null)switch(C.tag){case O:{var D=C.stateNode.containerInfo,L=(C.mode&lr)!==Nn;$A(D,i,h,L);break}case ne:{var $=C.type,Z=C.memoizedProps,re=C.stateNode,ue=(C.mode&lr)!==Nn;qA($,Z,re,i,h,ue);break}}}return p}function x2(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");zA(h,e)}function _2(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return OA(h)}function XN(e){for(var i=e.return;i!==null&&i.tag!==ne&&i.tag!==O&&i.tag!==ze;)i=i.return;no=i}function mb(e){if(e!==no)return!1;if(!Ql)return XN(e),Ql=!0,!1;if(e.tag!==O&&(e.tag!==ne||UA(e.type)&&!l_(e.type,e.memoizedProps))){var i=ul;if(i)if(S_(e))JN(e),E_();else for(;i;)ZN(e,i),i=Pg(i)}return XN(e),e.tag===ze?ul=_2(e):ul=no?Pg(e.stateNode):null,!0}function w2(){return Ql&&ul!==null}function JN(e){for(var i=ul;i;)WN(e,i),i=Pg(i)}function Mm(){no=null,ul=null,Ql=!1,of=!1}function QN(){Zd!==null&&(GE(Zd),Zd=null)}function ro(){return Ql}function T_(e){Zd===null?Zd=[e]:Zd.push(e)}var C2=o.ReactCurrentBatchConfig,N2=null;function S2(){return C2.transition}var ec={recordUnsafeLifecycleWarnings:function(e,i){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,i){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var E2=function(e){for(var i=null,h=e;h!==null;)h.mode&ri&&(i=h),h=h.return;return i},af=function(e){var i=[];return e.forEach(function(h){i.push(h)}),i.sort().join(", ")},Mg=[],Rg=[],Lg=[],Ig=[],Vg=[],zg=[],lf=new Set;ec.recordUnsafeLifecycleWarnings=function(e,i){lf.has(e.type)||(typeof i.componentWillMount=="function"&&i.componentWillMount.__suppressDeprecationWarning!==!0&&Mg.push(e),e.mode&ri&&typeof i.UNSAFE_componentWillMount=="function"&&Rg.push(e),typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Lg.push(e),e.mode&ri&&typeof i.UNSAFE_componentWillReceiveProps=="function"&&Ig.push(e),typeof i.componentWillUpdate=="function"&&i.componentWillUpdate.__suppressDeprecationWarning!==!0&&Vg.push(e),e.mode&ri&&typeof i.UNSAFE_componentWillUpdate=="function"&&zg.push(e))},ec.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Mg.length>0&&(Mg.forEach(function(Me){e.add(jn(Me)||"Component"),lf.add(Me.type)}),Mg=[]);var i=new Set;Rg.length>0&&(Rg.forEach(function(Me){i.add(jn(Me)||"Component"),lf.add(Me.type)}),Rg=[]);var h=new Set;Lg.length>0&&(Lg.forEach(function(Me){h.add(jn(Me)||"Component"),lf.add(Me.type)}),Lg=[]);var p=new Set;Ig.length>0&&(Ig.forEach(function(Me){p.add(jn(Me)||"Component"),lf.add(Me.type)}),Ig=[]);var C=new Set;Vg.length>0&&(Vg.forEach(function(Me){C.add(jn(Me)||"Component"),lf.add(Me.type)}),Vg=[]);var D=new Set;if(zg.length>0&&(zg.forEach(function(Me){D.add(jn(Me)||"Component"),lf.add(Me.type)}),zg=[]),i.size>0){var L=af(i);x(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,L)}if(p.size>0){var $=af(p);x(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,$)}if(D.size>0){var Z=af(D);x(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,Z)}if(e.size>0){var re=af(e);E(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,re)}if(h.size>0){var ue=af(h);E(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,ue)}if(C.size>0){var Re=af(C);E(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Re)}};var pb=new Map,eS=new Set;ec.recordLegacyContextWarning=function(e,i){var h=E2(e);if(h===null){x("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!eS.has(e.type)){var p=pb.get(h);(e.type.contextTypes!=null||e.type.childContextTypes!=null||i!==null&&typeof i.getChildContext=="function")&&(p===void 0&&(p=[],pb.set(h,p)),p.push(e))}},ec.flushLegacyContextWarning=function(){pb.forEach(function(e,i){if(e.length!==0){var h=e[0],p=new Set;e.forEach(function(D){p.add(jn(D)||"Component"),eS.add(D.type)});var C=af(p);try{ei(h),x(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)}finally{Pi()}}})},ec.discardPendingWarnings=function(){Mg=[],Rg=[],Lg=[],Ig=[],Vg=[],zg=[],pb=new Map}}var P_,j_,k_,A_,M_,tS=function(e,i){};P_=!1,j_=!1,k_={},A_={},M_={},tS=function(e,i){if(!(e===null||typeof e!="object")&&!(!e._store||e._store.validated||e.key!=null)){if(typeof e._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var h=jn(i)||"Component";A_[h]||(A_[h]=!0,x('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function D2(e){return e.prototype&&e.prototype.isReactComponent}function Og(e,i,h){var p=h.ref;if(p!==null&&typeof p!="function"&&typeof p!="object"){if((e.mode&ri||Ht)&&!(h._owner&&h._self&&h._owner.stateNode!==h._self)&&!(h._owner&&h._owner.tag!==k)&&!(typeof h.type=="function"&&!D2(h.type))&&h._owner){var C=jn(e)||"Component";k_[C]||(x('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',C,p),k_[C]=!0)}if(h._owner){var D=h._owner,L;if(D){var $=D;if($.tag!==k)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");L=$.stateNode}if(!L)throw new Error("Missing owner for string ref "+p+". This error is likely caused by a bug in React. Please file an issue.");var Z=L;Gr(p,"ref");var re=""+p;if(i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===re)return i.ref;var ue=function(Re){var Me=Z.refs;Re===null?delete Me[re]:Me[re]=Re};return ue._stringRef=re,ue}else{if(typeof p!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!h._owner)throw new Error("Element ref was specified as a string ("+p+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return p}function gb(e,i){var h=Object.prototype.toString.call(i);throw new Error("Objects are not valid as a React child (found: "+(h==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":h)+"). If you meant to render a collection of children, use an array instead.")}function vb(e){{var i=jn(e)||"Component";if(M_[i])return;M_[i]=!0,x("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function nS(e){var i=e._payload,h=e._init;return h(i)}function rS(e){function i(Ue,it){if(e){var $e=Ue.deletions;$e===null?(Ue.deletions=[it],Ue.flags|=Co):$e.push(it)}}function h(Ue,it){if(!e)return null;for(var $e=it;$e!==null;)i(Ue,$e),$e=$e.sibling;return null}function p(Ue,it){for(var $e=new Map,Ct=it;Ct!==null;)Ct.key!==null?$e.set(Ct.key,Ct):$e.set(Ct.index,Ct),Ct=Ct.sibling;return $e}function C(Ue,it){var $e=vf(Ue,it);return $e.index=0,$e.sibling=null,$e}function D(Ue,it,$e){if(Ue.index=$e,!e)return Ue.flags|=q,it;var Ct=Ue.alternate;if(Ct!==null){var nn=Ct.index;return nn<it?(Ue.flags|=bi,it):nn}else return Ue.flags|=bi,it}function L(Ue){return e&&Ue.alternate===null&&(Ue.flags|=bi),Ue}function $(Ue,it,$e,Ct){if(it===null||it.tag!==me){var nn=T1($e,Ue.mode,Ct);return nn.return=Ue,nn}else{var Yt=C(it,$e);return Yt.return=Ue,Yt}}function Z(Ue,it,$e,Ct){var nn=$e.type;if(nn===Ee)return ue(Ue,it,$e.props.children,Ct,$e.key);if(it!==null&&(it.elementType===nn||lD(it,$e)||typeof nn=="object"&&nn!==null&&nn.$$typeof===Lt&&nS(nn)===it.type)){var Yt=C(it,$e.props);return Yt.ref=Og(Ue,it,$e),Yt.return=Ue,Yt._debugSource=$e._source,Yt._debugOwner=$e._owner,Yt}var Mn=D1($e,Ue.mode,Ct);return Mn.ref=Og(Ue,it,$e),Mn.return=Ue,Mn}function re(Ue,it,$e,Ct){if(it===null||it.tag!==W||it.stateNode.containerInfo!==$e.containerInfo||it.stateNode.implementation!==$e.implementation){var nn=P1($e,Ue.mode,Ct);return nn.return=Ue,nn}else{var Yt=C(it,$e.children||[]);return Yt.return=Ue,Yt}}function ue(Ue,it,$e,Ct,nn){if(it===null||it.tag!==ke){var Yt=sh($e,Ue.mode,Ct,nn);return Yt.return=Ue,Yt}else{var Mn=C(it,$e);return Mn.return=Ue,Mn}}function Re(Ue,it,$e){if(typeof it=="string"&&it!==""||typeof it=="number"){var Ct=T1(""+it,Ue.mode,$e);return Ct.return=Ue,Ct}if(typeof it=="object"&&it!==null){switch(it.$$typeof){case xe:{var nn=D1(it,Ue.mode,$e);return nn.ref=Og(Ue,null,it),nn.return=Ue,nn}case ge:{var Yt=P1(it,Ue.mode,$e);return Yt.return=Ue,Yt}case Lt:{var Mn=it._payload,qn=it._init;return Re(Ue,qn(Mn),$e)}}if(tr(it)||mo(it)){var Qr=sh(it,Ue.mode,$e,null);return Qr.return=Ue,Qr}gb(Ue,it)}return typeof it=="function"&&vb(Ue),null}function Me(Ue,it,$e,Ct){var nn=it!==null?it.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return nn!==null?null:$(Ue,it,""+$e,Ct);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case xe:return $e.key===nn?Z(Ue,it,$e,Ct):null;case ge:return $e.key===nn?re(Ue,it,$e,Ct):null;case Lt:{var Yt=$e._payload,Mn=$e._init;return Me(Ue,it,Mn(Yt),Ct)}}if(tr($e)||mo($e))return nn!==null?null:ue(Ue,it,$e,Ct,null);gb(Ue,$e)}return typeof $e=="function"&&vb(Ue),null}function We(Ue,it,$e,Ct,nn){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"){var Yt=Ue.get($e)||null;return $(it,Yt,""+Ct,nn)}if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case xe:{var Mn=Ue.get(Ct.key===null?$e:Ct.key)||null;return Z(it,Mn,Ct,nn)}case ge:{var qn=Ue.get(Ct.key===null?$e:Ct.key)||null;return re(it,qn,Ct,nn)}case Lt:var Qr=Ct._payload,Ar=Ct._init;return We(Ue,it,$e,Ar(Qr),nn)}if(tr(Ct)||mo(Ct)){var us=Ue.get($e)||null;return ue(it,us,Ct,nn,null)}gb(it,Ct)}return typeof Ct=="function"&&vb(it),null}function Ze(Ue,it,$e){{if(typeof Ue!="object"||Ue===null)return it;switch(Ue.$$typeof){case xe:case ge:tS(Ue,$e);var Ct=Ue.key;if(typeof Ct!="string")break;if(it===null){it=new Set,it.add(Ct);break}if(!it.has(Ct)){it.add(Ct);break}x("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",Ct);break;case Lt:var nn=Ue._payload,Yt=Ue._init;Ze(Yt(nn),it,$e);break}}return it}function rt(Ue,it,$e,Ct){for(var nn=null,Yt=0;Yt<$e.length;Yt++){var Mn=$e[Yt];nn=Ze(Mn,nn,Ue)}for(var qn=null,Qr=null,Ar=it,us=0,Mr=0,ts=null;Ar!==null&&Mr<$e.length;Mr++){Ar.index>Mr?(ts=Ar,Ar=null):ts=Ar.sibling;var Ro=Me(Ue,Ar,$e[Mr],Ct);if(Ro===null){Ar===null&&(Ar=ts);break}e&&Ar&&Ro.alternate===null&&i(Ue,Ar),us=D(Ro,us,Mr),Qr===null?qn=Ro:Qr.sibling=Ro,Qr=Ro,Ar=ts}if(Mr===$e.length){if(h(Ue,Ar),ro()){var uo=Mr;rf(Ue,uo)}return qn}if(Ar===null){for(;Mr<$e.length;Mr++){var Va=Re(Ue,$e[Mr],Ct);Va!==null&&(us=D(Va,us,Mr),Qr===null?qn=Va:Qr.sibling=Va,Qr=Va)}if(ro()){var Ko=Mr;rf(Ue,Ko)}return qn}for(var Yo=p(Ue,Ar);Mr<$e.length;Mr++){var Lo=We(Yo,Ue,Mr,$e[Mr],Ct);Lo!==null&&(e&&Lo.alternate!==null&&Yo.delete(Lo.key===null?Mr:Lo.key),us=D(Lo,us,Mr),Qr===null?qn=Lo:Qr.sibling=Lo,Qr=Lo)}if(e&&Yo.forEach(function(Jm){return i(Ue,Jm)}),ro()){var Wu=Mr;rf(Ue,Wu)}return qn}function Gt(Ue,it,$e,Ct){var nn=mo($e);if(typeof nn!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&$e[Symbol.toStringTag]==="Generator"&&(j_||x("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),j_=!0),$e.entries===nn&&(P_||x("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),P_=!0);var Yt=nn.call($e);if(Yt)for(var Mn=null,qn=Yt.next();!qn.done;qn=Yt.next()){var Qr=qn.value;Mn=Ze(Qr,Mn,Ue)}}var Ar=nn.call($e);if(Ar==null)throw new Error("An iterable object provided no iterator.");for(var us=null,Mr=null,ts=it,Ro=0,uo=0,Va=null,Ko=Ar.next();ts!==null&&!Ko.done;uo++,Ko=Ar.next()){ts.index>uo?(Va=ts,ts=null):Va=ts.sibling;var Yo=Me(Ue,ts,Ko.value,Ct);if(Yo===null){ts===null&&(ts=Va);break}e&&ts&&Yo.alternate===null&&i(Ue,ts),Ro=D(Yo,Ro,uo),Mr===null?us=Yo:Mr.sibling=Yo,Mr=Yo,ts=Va}if(Ko.done){if(h(Ue,ts),ro()){var Lo=uo;rf(Ue,Lo)}return us}if(ts===null){for(;!Ko.done;uo++,Ko=Ar.next()){var Wu=Re(Ue,Ko.value,Ct);Wu!==null&&(Ro=D(Wu,Ro,uo),Mr===null?us=Wu:Mr.sibling=Wu,Mr=Wu)}if(ro()){var Jm=uo;rf(Ue,Jm)}return us}for(var vv=p(Ue,ts);!Ko.done;uo++,Ko=Ar.next()){var Kc=We(vv,Ue,uo,Ko.value,Ct);Kc!==null&&(e&&Kc.alternate!==null&&vv.delete(Kc.key===null?uo:Kc.key),Ro=D(Kc,Ro,uo),Mr===null?us=Kc:Mr.sibling=Kc,Mr=Kc)}if(e&&vv.forEach(function(QL){return i(Ue,QL)}),ro()){var JL=uo;rf(Ue,JL)}return us}function En(Ue,it,$e,Ct){if(it!==null&&it.tag===me){h(Ue,it.sibling);var nn=C(it,$e);return nn.return=Ue,nn}h(Ue,it);var Yt=T1($e,Ue.mode,Ct);return Yt.return=Ue,Yt}function _n(Ue,it,$e,Ct){for(var nn=$e.key,Yt=it;Yt!==null;){if(Yt.key===nn){var Mn=$e.type;if(Mn===Ee){if(Yt.tag===ke){h(Ue,Yt.sibling);var qn=C(Yt,$e.props.children);return qn.return=Ue,qn._debugSource=$e._source,qn._debugOwner=$e._owner,qn}}else if(Yt.elementType===Mn||lD(Yt,$e)||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===Lt&&nS(Mn)===Yt.type){h(Ue,Yt.sibling);var Qr=C(Yt,$e.props);return Qr.ref=Og(Ue,Yt,$e),Qr.return=Ue,Qr._debugSource=$e._source,Qr._debugOwner=$e._owner,Qr}h(Ue,Yt);break}else i(Ue,Yt);Yt=Yt.sibling}if($e.type===Ee){var Ar=sh($e.props.children,Ue.mode,Ct,$e.key);return Ar.return=Ue,Ar}else{var us=D1($e,Ue.mode,Ct);return us.ref=Og(Ue,it,$e),us.return=Ue,us}}function yr(Ue,it,$e,Ct){for(var nn=$e.key,Yt=it;Yt!==null;){if(Yt.key===nn)if(Yt.tag===W&&Yt.stateNode.containerInfo===$e.containerInfo&&Yt.stateNode.implementation===$e.implementation){h(Ue,Yt.sibling);var Mn=C(Yt,$e.children||[]);return Mn.return=Ue,Mn}else{h(Ue,Yt);break}else i(Ue,Yt);Yt=Yt.sibling}var qn=P1($e,Ue.mode,Ct);return qn.return=Ue,qn}function dr(Ue,it,$e,Ct){var nn=typeof $e=="object"&&$e!==null&&$e.type===Ee&&$e.key===null;if(nn&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case xe:return L(_n(Ue,it,$e,Ct));case ge:return L(yr(Ue,it,$e,Ct));case Lt:var Yt=$e._payload,Mn=$e._init;return dr(Ue,it,Mn(Yt),Ct)}if(tr($e))return rt(Ue,it,$e,Ct);if(mo($e))return Gt(Ue,it,$e,Ct);gb(Ue,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?L(En(Ue,it,""+$e,Ct)):(typeof $e=="function"&&vb(Ue),h(Ue,it))}return dr}var Rm=rS(!0),iS=rS(!1);function T2(e,i){if(e!==null&&i.child!==e.child)throw new Error("Resuming work not yet implemented.");if(i.child!==null){var h=i.child,p=vf(h,h.pendingProps);for(i.child=p,p.return=i;h.sibling!==null;)h=h.sibling,p=p.sibling=vf(h,h.pendingProps),p.return=i;p.sibling=null}}function P2(e,i){for(var h=e.child;h!==null;)gL(h,i),h=h.sibling}var R_=Hd(null),L_;L_={};var yb=null,Lm=null,I_=null,bb=!1;function xb(){yb=null,Lm=null,I_=null,bb=!1}function sS(){bb=!0}function oS(){bb=!1}function aS(e,i,h){Ao(R_,i._currentValue,e),i._currentValue=h,i._currentRenderer!==void 0&&i._currentRenderer!==null&&i._currentRenderer!==L_&&x("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),i._currentRenderer=L_}function V_(e,i){var h=R_.current;ko(R_,i),e._currentValue=h}function z_(e,i,h){for(var p=e;p!==null;){var C=p.alternate;if(Pu(p.childLanes,i)?C!==null&&!Pu(C.childLanes,i)&&(C.childLanes=Jn(C.childLanes,i)):(p.childLanes=Jn(p.childLanes,i),C!==null&&(C.childLanes=Jn(C.childLanes,i))),p===h)break;p=p.return}p!==h&&x("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function j2(e,i,h){k2(e,i,h)}function k2(e,i,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var C=void 0,D=p.dependencies;if(D!==null){C=p.child;for(var L=D.firstContext;L!==null;){if(L.context===i){if(p.tag===k){var $=Tu(h),Z=Fu(ui,$);Z.tag=wb;var re=p.updateQueue;if(re!==null){var ue=re.shared,Re=ue.pending;Re===null?Z.next=Z:(Z.next=Re.next,Re.next=Z),ue.pending=Z}}p.lanes=Jn(p.lanes,h);var Me=p.alternate;Me!==null&&(Me.lanes=Jn(Me.lanes,h)),z_(p.return,h,e),D.lanes=Jn(D.lanes,h);break}L=L.next}}else if(p.tag===we)C=p.type===e.type?null:p.child;else if(p.tag===gt){var We=p.return;if(We===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");We.lanes=Jn(We.lanes,h);var Ze=We.alternate;Ze!==null&&(Ze.lanes=Jn(Ze.lanes,h)),z_(We,h,e),C=p.sibling}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===e){C=null;break}var rt=C.sibling;if(rt!==null){rt.return=C.return,C=rt;break}C=C.return}p=C}}function Im(e,i){yb=e,Lm=null,I_=null;var h=e.dependencies;if(h!==null){var p=h.firstContext;p!==null&&(Do(h.lanes,i)&&ev(),h.firstContext=null)}}function _s(e){bb&&x("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var i=e._currentValue;if(I_!==e){var h={context:e,memoizedValue:i,next:null};if(Lm===null){if(yb===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Lm=h,yb.dependencies={lanes:yt,firstContext:h}}else Lm=Lm.next=h}return i}var cf=null;function O_(e){cf===null?cf=[e]:cf.push(e)}function A2(){if(cf!==null){for(var e=0;e<cf.length;e++){var i=cf[e],h=i.interleaved;if(h!==null){i.interleaved=null;var p=h.next,C=i.pending;if(C!==null){var D=C.next;C.next=p,h.next=D}i.pending=h}}cf=null}}function lS(e,i,h,p){var C=i.interleaved;return C===null?(h.next=h,O_(i)):(h.next=C.next,C.next=h),i.interleaved=h,_b(e,p)}function M2(e,i,h,p){var C=i.interleaved;C===null?(h.next=h,O_(i)):(h.next=C.next,C.next=h),i.interleaved=h}function R2(e,i,h,p){var C=i.interleaved;return C===null?(h.next=h,O_(i)):(h.next=C.next,C.next=h),i.interleaved=h,_b(e,p)}function ca(e,i){return _b(e,i)}var L2=_b;function _b(e,i){e.lanes=Jn(e.lanes,i);var h=e.alternate;h!==null&&(h.lanes=Jn(h.lanes,i)),h===null&&(e.flags&(bi|v))!==wn&&iD(e);for(var p=e,C=e.return;C!==null;)C.childLanes=Jn(C.childLanes,i),h=C.alternate,h!==null?h.childLanes=Jn(h.childLanes,i):(C.flags&(bi|v))!==wn&&iD(e),p=C,C=C.return;if(p.tag===O){var D=p.stateNode;return D}else return null}var cS=0,uS=1,wb=2,B_=3,Cb=!1,F_,Nb;F_=!1,Nb=null;function U_(e){var i={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:yt},effects:null};e.updateQueue=i}function dS(e,i){var h=i.updateQueue,p=e.updateQueue;if(h===p){var C={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects};i.updateQueue=C}}function Fu(e,i){var h={eventTime:e,lane:i,tag:cS,payload:null,callback:null,next:null};return h}function Kd(e,i,h){var p=e.updateQueue;if(p===null)return null;var C=p.shared;if(Nb===C&&!F_&&(x("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),F_=!0),MR()){var D=C.pending;return D===null?i.next=i:(i.next=D.next,D.next=i),C.pending=i,L2(e,h)}else return R2(e,C,i,h)}function Sb(e,i,h){var p=i.updateQueue;if(p!==null){var C=p.shared;if(Sd(h)){var D=C.lanes;D=dy(D,e.pendingLanes);var L=Jn(D,h);C.lanes=L,Op(e,L)}}}function $_(e,i){var h=e.updateQueue,p=e.alternate;if(p!==null){var C=p.updateQueue;if(h===C){var D=null,L=null,$=h.firstBaseUpdate;if($!==null){var Z=$;do{var re={eventTime:Z.eventTime,lane:Z.lane,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null};L===null?D=L=re:(L.next=re,L=re),Z=Z.next}while(Z!==null);L===null?D=L=i:(L.next=i,L=i)}else D=L=i;h={baseState:C.baseState,firstBaseUpdate:D,lastBaseUpdate:L,shared:C.shared,effects:C.effects},e.updateQueue=h;return}}var ue=h.lastBaseUpdate;ue===null?h.firstBaseUpdate=i:ue.next=i,h.lastBaseUpdate=i}function I2(e,i,h,p,C,D){switch(h.tag){case uS:{var L=h.payload;if(typeof L=="function"){sS();var $=L.call(D,p,C);{if(e.mode&ri){ki(!0);try{L.call(D,p,C)}finally{ki(!1)}}oS()}return $}return L}case B_:e.flags=e.flags&~z|cn;case cS:{var Z=h.payload,re;if(typeof Z=="function"){sS(),re=Z.call(D,p,C);{if(e.mode&ri){ki(!0);try{Z.call(D,p,C)}finally{ki(!1)}}oS()}}else re=Z;return re==null?p:In({},p,re)}case wb:return Cb=!0,p}return p}function Eb(e,i,h,p){var C=e.updateQueue;Cb=!1,Nb=C.shared;var D=C.firstBaseUpdate,L=C.lastBaseUpdate,$=C.shared.pending;if($!==null){C.shared.pending=null;var Z=$,re=Z.next;Z.next=null,L===null?D=re:L.next=re,L=Z;var ue=e.alternate;if(ue!==null){var Re=ue.updateQueue,Me=Re.lastBaseUpdate;Me!==L&&(Me===null?Re.firstBaseUpdate=re:Me.next=re,Re.lastBaseUpdate=Z)}}if(D!==null){var We=C.baseState,Ze=yt,rt=null,Gt=null,En=null,_n=D;do{var yr=_n.lane,dr=_n.eventTime;if(Pu(p,yr)){if(En!==null){var it={eventTime:dr,lane:Sr,tag:_n.tag,payload:_n.payload,callback:_n.callback,next:null};En=En.next=it}We=I2(e,C,_n,We,i,h);var $e=_n.callback;if($e!==null&&_n.lane!==Sr){e.flags|=bd;var Ct=C.effects;Ct===null?C.effects=[_n]:Ct.push(_n)}}else{var Ue={eventTime:dr,lane:yr,tag:_n.tag,payload:_n.payload,callback:_n.callback,next:null};En===null?(Gt=En=Ue,rt=We):En=En.next=Ue,Ze=Jn(Ze,yr)}if(_n=_n.next,_n===null){if($=C.shared.pending,$===null)break;var nn=$,Yt=nn.next;nn.next=null,_n=Yt,C.lastBaseUpdate=nn,C.shared.pending=null}}while(!0);En===null&&(rt=We),C.baseState=rt,C.firstBaseUpdate=Gt,C.lastBaseUpdate=En;var Mn=C.shared.interleaved;if(Mn!==null){var qn=Mn;do Ze=Jn(Ze,qn.lane),qn=qn.next;while(qn!==Mn)}else D===null&&(C.shared.lanes=yt);hv(Ze),e.lanes=Ze,e.memoizedState=We}Nb=null}function V2(e,i){if(typeof e!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+e));e.call(i)}function hS(){Cb=!1}function Db(){return Cb}function fS(e,i,h){var p=i.effects;if(i.effects=null,p!==null)for(var C=0;C<p.length;C++){var D=p[C],L=D.callback;L!==null&&(D.callback=null,V2(L,h))}}var Bg={},Yd=Hd(Bg),Fg=Hd(Bg),Tb=Hd(Bg);function Pb(e){if(e===Bg)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function mS(){var e=Pb(Tb.current);return e}function q_(e,i){Ao(Tb,i,e),Ao(Fg,e,e),Ao(Yd,Bg,e);var h=eA(i);ko(Yd,e),Ao(Yd,h,e)}function Vm(e){ko(Yd,e),ko(Fg,e),ko(Tb,e)}function H_(){var e=Pb(Yd.current);return e}function pS(e){Pb(Tb.current);var i=Pb(Yd.current),h=tA(i,e.type);i!==h&&(Ao(Fg,e,e),Ao(Yd,h,e))}function G_(e){Fg.current===e&&(ko(Yd,e),ko(Fg,e))}var z2=0,gS=1,vS=1,Ug=2,tc=Hd(z2);function W_(e,i){return(e&i)!==0}function zm(e){return e&gS}function Z_(e,i){return e&gS|i}function O2(e,i){return e|i}function Xd(e,i){Ao(tc,i,e)}function Om(e){ko(tc,e)}function B2(e,i){var h=e.memoizedState;return h!==null?h.dehydrated!==null:(e.memoizedProps,!0)}function jb(e){for(var i=e;i!==null;){if(i.tag===ze){var h=i.memoizedState;if(h!==null){var p=h.dehydrated;if(p===null||RN(p)||h_(p))return i}}else if(i.tag===sn&&i.memoizedProps.revealOrder!==void 0){var C=(i.flags&cn)!==wn;if(C)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)return null;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ua=0,js=1,Uc=2,ks=4,io=8,K_=[];function Y_(){for(var e=0;e<K_.length;e++){var i=K_[e];i._workInProgressVersionPrimary=null}K_.length=0}function F2(e,i){var h=i._getVersion,p=h(i._source);e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,p]:e.mutableSourceEagerHydrationData.push(i,p)}var en=o.ReactCurrentDispatcher,$g=o.ReactCurrentBatchConfig,X_,Bm;X_=new Set;var uf=yt,Jr=null,As=null,Ms=null,kb=!1,qg=!1,Hg=0,U2=0,$2=25,lt=null,dl=null,Jd=-1,J_=!1;function Br(){{var e=lt;dl===null?dl=[e]:dl.push(e)}}function $t(){{var e=lt;dl!==null&&(Jd++,dl[Jd]!==e&&q2(e))}}function Fm(e){e!=null&&!tr(e)&&x("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",lt,typeof e)}function q2(e){{var i=jn(Jr);if(!X_.has(i)&&(X_.add(i),dl!==null)){for(var h="",p=30,C=0;C<=Jd;C++){for(var D=dl[C],L=C===Jd?e:D,$=C+1+". "+D;$.length<p;)$+=" ";$+=L+`
`,h+=$}x(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,i,h)}}}function Mo(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function Q_(e,i){if(J_)return!1;if(i===null)return x("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",lt),!1;e.length!==i.length&&x(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,lt,"["+i.join(", ")+"]","["+e.join(", ")+"]");for(var h=0;h<i.length&&h<e.length;h++)if(!Po(e[h],i[h]))return!1;return!0}function Um(e,i,h,p,C,D){uf=D,Jr=i,dl=e!==null?e._debugHookTypes:null,Jd=-1,J_=e!==null&&e.type!==i.type,i.memoizedState=null,i.updateQueue=null,i.lanes=yt,e!==null&&e.memoizedState!==null?en.current=OS:dl!==null?en.current=zS:en.current=VS;var L=h(p,C);if(qg){var $=0;do{if(qg=!1,Hg=0,$>=$2)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");$+=1,J_=!1,As=null,Ms=null,i.updateQueue=null,Jd=-1,en.current=BS,L=h(p,C)}while(qg)}en.current=qb,i._debugHookTypes=dl;var Z=As!==null&&As.next!==null;if(uf=yt,Jr=null,As=null,Ms=null,lt=null,dl=null,Jd=-1,e!==null&&(e.flags&Be)!==(i.flags&Be)&&(e.mode&lr)!==Nn&&x("Internal React error: Expected static flag was missing. Please notify the React team."),kb=!1,Z)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return L}function $m(){var e=Hg!==0;return Hg=0,e}function yS(e,i,h){i.updateQueue=e.updateQueue,(i.mode&tl)!==Nn?i.flags&=-50333701:i.flags&=-2053,e.lanes=am(e.lanes,h)}function bS(){if(en.current=qb,kb){for(var e=Jr.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}kb=!1}uf=yt,Jr=null,As=null,Ms=null,dl=null,Jd=-1,lt=null,AS=!1,qg=!1,Hg=0}function $c(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?Jr.memoizedState=Ms=e:Ms=Ms.next=e,Ms}function hl(){var e;if(As===null){var i=Jr.alternate;i!==null?e=i.memoizedState:e=null}else e=As.next;var h;if(Ms===null?h=Jr.memoizedState:h=Ms.next,h!==null)Ms=h,h=Ms.next,As=e;else{if(e===null)throw new Error("Rendered more hooks than during the previous render.");As=e;var p={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null};Ms===null?Jr.memoizedState=Ms=p:Ms=Ms.next=p}return Ms}function xS(){return{lastEffect:null,stores:null}}function ew(e,i){return typeof i=="function"?i(e):i}function tw(e,i,h){var p=$c(),C;h!==void 0?C=h(i):C=i,p.memoizedState=p.baseState=C;var D={pending:null,interleaved:null,lanes:yt,dispatch:null,lastRenderedReducer:e,lastRenderedState:C};p.queue=D;var L=D.dispatch=Z2.bind(null,Jr,D);return[p.memoizedState,L]}function nw(e,i,h){var p=hl(),C=p.queue;if(C===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");C.lastRenderedReducer=e;var D=As,L=D.baseQueue,$=C.pending;if($!==null){if(L!==null){var Z=L.next,re=$.next;L.next=re,$.next=Z}D.baseQueue!==L&&x("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),D.baseQueue=L=$,C.pending=null}if(L!==null){var ue=L.next,Re=D.baseState,Me=null,We=null,Ze=null,rt=ue;do{var Gt=rt.lane;if(Pu(uf,Gt)){if(Ze!==null){var _n={lane:Sr,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Ze=Ze.next=_n}if(rt.hasEagerState)Re=rt.eagerState;else{var yr=rt.action;Re=e(Re,yr)}}else{var En={lane:Gt,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Ze===null?(We=Ze=En,Me=Re):Ze=Ze.next=En,Jr.lanes=Jn(Jr.lanes,Gt),hv(Gt)}rt=rt.next}while(rt!==null&&rt!==ue);Ze===null?Me=Re:Ze.next=We,Po(Re,p.memoizedState)||ev(),p.memoizedState=Re,p.baseState=Me,p.baseQueue=Ze,C.lastRenderedState=Re}var dr=C.interleaved;if(dr!==null){var Ue=dr;do{var it=Ue.lane;Jr.lanes=Jn(Jr.lanes,it),hv(it),Ue=Ue.next}while(Ue!==dr)}else L===null&&(C.lanes=yt);var $e=C.dispatch;return[p.memoizedState,$e]}function rw(e,i,h){var p=hl(),C=p.queue;if(C===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");C.lastRenderedReducer=e;var D=C.dispatch,L=C.pending,$=p.memoizedState;if(L!==null){C.pending=null;var Z=L.next,re=Z;do{var ue=re.action;$=e($,ue),re=re.next}while(re!==Z);Po($,p.memoizedState)||ev(),p.memoizedState=$,p.baseQueue===null&&(p.baseState=$),C.lastRenderedState=$}return[$,D]}function D6(e,i,h){}function T6(e,i,h){}function iw(e,i,h){var p=Jr,C=$c(),D,L=ro();if(L){if(h===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");D=h(),Bm||D!==h()&&(x("The result of getServerSnapshot should be cached to avoid an infinite loop"),Bm=!0)}else{if(D=i(),!Bm){var $=i();Po(D,$)||(x("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var Z=cx();if(Z===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");om(Z,uf)||_S(p,i,D)}C.memoizedState=D;var re={value:D,getSnapshot:i};return C.queue=re,Ib(CS.bind(null,p,re,e),[e]),p.flags|=m,Gg(js|io,wS.bind(null,p,re,D,i),void 0,null),D}function Ab(e,i,h){var p=Jr,C=hl(),D=i();if(!Bm){var L=i();Po(D,L)||(x("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var $=C.memoizedState,Z=!Po($,D);Z&&(C.memoizedState=D,ev());var re=C.queue;if(Zg(CS.bind(null,p,re,e),[e]),re.getSnapshot!==i||Z||Ms!==null&&Ms.memoizedState.tag&js){p.flags|=m,Gg(js|io,wS.bind(null,p,re,D,i),void 0,null);var ue=cx();if(ue===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");om(ue,uf)||_S(p,i,D)}return D}function _S(e,i,h){e.flags|=P;var p={getSnapshot:i,value:h},C=Jr.updateQueue;if(C===null)C=xS(),Jr.updateQueue=C,C.stores=[p];else{var D=C.stores;D===null?C.stores=[p]:D.push(p)}}function wS(e,i,h,p){i.value=h,i.getSnapshot=p,NS(i)&&SS(e)}function CS(e,i,h){var p=function(){NS(i)&&SS(e)};return h(p)}function NS(e){var i=e.getSnapshot,h=e.value;try{var p=i();return!Po(h,p)}catch{return!0}}function SS(e){var i=ca(e,Dn);i!==null&&Vs(i,e,Dn,ui)}function Mb(e){var i=$c();typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e;var h={pending:null,interleaved:null,lanes:yt,dispatch:null,lastRenderedReducer:ew,lastRenderedState:e};i.queue=h;var p=h.dispatch=K2.bind(null,Jr,h);return[i.memoizedState,p]}function sw(e){return nw(ew)}function ow(e){return rw(ew)}function Gg(e,i,h,p){var C={tag:e,create:i,destroy:h,deps:p,next:null},D=Jr.updateQueue;if(D===null)D=xS(),Jr.updateQueue=D,D.lastEffect=C.next=C;else{var L=D.lastEffect;if(L===null)D.lastEffect=C.next=C;else{var $=L.next;L.next=C,C.next=$,D.lastEffect=C}}return C}function aw(e){var i=$c();{var h={current:e};return i.memoizedState=h,h}}function Rb(e){var i=hl();return i.memoizedState}function Wg(e,i,h,p){var C=$c(),D=p===void 0?null:p;Jr.flags|=e,C.memoizedState=Gg(js|i,h,void 0,D)}function Lb(e,i,h,p){var C=hl(),D=p===void 0?null:p,L=void 0;if(As!==null){var $=As.memoizedState;if(L=$.destroy,D!==null){var Z=$.deps;if(Q_(D,Z)){C.memoizedState=Gg(i,h,L,D);return}}}Jr.flags|=e,C.memoizedState=Gg(js|i,h,L,D)}function Ib(e,i){return(Jr.mode&tl)!==Nn?Wg(oe|m|le,io,e,i):Wg(m|le,io,e,i)}function Zg(e,i){return Lb(m,io,e,i)}function lw(e,i){return Wg(ur,Uc,e,i)}function Vb(e,i){return Lb(ur,Uc,e,i)}function cw(e,i){var h=ur;return h|=ae,(Jr.mode&tl)!==Nn&&(h|=pe),Wg(h,ks,e,i)}function zb(e,i){return Lb(ur,ks,e,i)}function ES(e,i){if(typeof i=="function"){var h=i,p=e();return h(p),function(){h(null)}}else if(i!=null){var C=i;C.hasOwnProperty("current")||x("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(C).join(", ")+"}");var D=e();return C.current=D,function(){C.current=null}}}function uw(e,i,h){typeof i!="function"&&x("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null,C=ur;return C|=ae,(Jr.mode&tl)!==Nn&&(C|=pe),Wg(C,ks,ES.bind(null,i,e),p)}function Ob(e,i,h){typeof i!="function"&&x("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null;return Lb(ur,ks,ES.bind(null,i,e),p)}function H2(e,i){}var Bb=H2;function dw(e,i){var h=$c(),p=i===void 0?null:i;return h.memoizedState=[e,p],e}function Fb(e,i){var h=hl(),p=i===void 0?null:i,C=h.memoizedState;if(C!==null&&p!==null){var D=C[1];if(Q_(p,D))return C[0]}return h.memoizedState=[e,p],e}function hw(e,i){var h=$c(),p=i===void 0?null:i,C=e();return h.memoizedState=[C,p],C}function Ub(e,i){var h=hl(),p=i===void 0?null:i,C=h.memoizedState;if(C!==null&&p!==null){var D=C[1];if(Q_(p,D))return C[0]}var L=e();return h.memoizedState=[L,p],L}function fw(e){var i=$c();return i.memoizedState=e,e}function DS(e){var i=hl(),h=As,p=h.memoizedState;return PS(i,p,e)}function TS(e){var i=hl();if(As===null)return i.memoizedState=e,e;var h=As.memoizedState;return PS(i,h,e)}function PS(e,i,h){var p=!Vp(uf);if(p){if(!Po(h,i)){var C=uy();Jr.lanes=Jn(Jr.lanes,C),hv(C),e.baseState=!0}return i}else return e.baseState&&(e.baseState=!1,ev()),e.memoizedState=h,h}function G2(e,i,h){var p=Uo();gs(my(p,$l)),e(!0);var C=$g.transition;$g.transition={};var D=$g.transition;$g.transition._updatedFibers=new Set;try{e(!1),i()}finally{if(gs(p),$g.transition=C,C===null&&D._updatedFibers){var L=D._updatedFibers.size;L>10&&E("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),D._updatedFibers.clear()}}}function mw(){var e=Mb(!1),i=e[0],h=e[1],p=G2.bind(null,h),C=$c();return C.memoizedState=p,[i,p]}function jS(){var e=sw(),i=e[0],h=hl(),p=h.memoizedState;return[i,p]}function kS(){var e=ow(),i=e[0],h=hl(),p=h.memoizedState;return[i,p]}var AS=!1;function W2(){return AS}function pw(){var e=$c(),i=cx(),h=i.identifierPrefix,p;if(ro()){var C=u2();p=":"+h+"R"+C;var D=Hg++;D>0&&(p+="H"+D.toString(32)),p+=":"}else{var L=U2++;p=":"+h+"r"+L.toString(32)+":"}return e.memoizedState=p,p}function $b(){var e=hl(),i=e.memoizedState;return i}function Z2(e,i,h){typeof arguments[3]=="function"&&x("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=rh(e),C={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(MS(e))RS(i,C);else{var D=lS(e,i,C,p);if(D!==null){var L=Zo();Vs(D,e,p,L),LS(D,i,p)}}IS(e,p)}function K2(e,i,h){typeof arguments[3]=="function"&&x("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=rh(e),C={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(MS(e))RS(i,C);else{var D=e.alternate;if(e.lanes===yt&&(D===null||D.lanes===yt)){var L=i.lastRenderedReducer;if(L!==null){var $;$=en.current,en.current=nc;try{var Z=i.lastRenderedState,re=L(Z,h);if(C.hasEagerState=!0,C.eagerState=re,Po(re,Z)){M2(e,i,C,p);return}}catch{}finally{en.current=$}}}var ue=lS(e,i,C,p);if(ue!==null){var Re=Zo();Vs(ue,e,p,Re),LS(ue,i,p)}}IS(e,p)}function MS(e){var i=e.alternate;return e===Jr||i!==null&&i===Jr}function RS(e,i){qg=kb=!0;var h=e.pending;h===null?i.next=i:(i.next=h.next,h.next=i),e.pending=i}function LS(e,i,h){if(Sd(h)){var p=i.lanes;p=dy(p,e.pendingLanes);var C=Jn(p,h);i.lanes=C,Op(e,C)}}function IS(e,i,h){Tp(e,i)}var qb={readContext:_s,useCallback:Mo,useContext:Mo,useEffect:Mo,useImperativeHandle:Mo,useInsertionEffect:Mo,useLayoutEffect:Mo,useMemo:Mo,useReducer:Mo,useRef:Mo,useState:Mo,useDebugValue:Mo,useDeferredValue:Mo,useTransition:Mo,useMutableSource:Mo,useSyncExternalStore:Mo,useId:Mo,unstable_isNewReconciler:Wt},VS=null,zS=null,OS=null,BS=null,qc=null,nc=null,Hb=null;{var gw=function(){x("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},On=function(){x("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};VS={readContext:function(e){return _s(e)},useCallback:function(e,i){return lt="useCallback",Br(),Fm(i),dw(e,i)},useContext:function(e){return lt="useContext",Br(),_s(e)},useEffect:function(e,i){return lt="useEffect",Br(),Fm(i),Ib(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",Br(),Fm(h),uw(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",Br(),Fm(i),lw(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",Br(),Fm(i),cw(e,i)},useMemo:function(e,i){lt="useMemo",Br(),Fm(i);var h=en.current;en.current=qc;try{return hw(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",Br();var p=en.current;en.current=qc;try{return tw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",Br(),aw(e)},useState:function(e){lt="useState",Br();var i=en.current;en.current=qc;try{return Mb(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",Br(),void 0},useDeferredValue:function(e){return lt="useDeferredValue",Br(),fw(e)},useTransition:function(){return lt="useTransition",Br(),mw()},useMutableSource:function(e,i,h){return lt="useMutableSource",Br(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",Br(),iw(e,i,h)},useId:function(){return lt="useId",Br(),pw()},unstable_isNewReconciler:Wt},zS={readContext:function(e){return _s(e)},useCallback:function(e,i){return lt="useCallback",$t(),dw(e,i)},useContext:function(e){return lt="useContext",$t(),_s(e)},useEffect:function(e,i){return lt="useEffect",$t(),Ib(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",$t(),uw(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",$t(),lw(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",$t(),cw(e,i)},useMemo:function(e,i){lt="useMemo",$t();var h=en.current;en.current=qc;try{return hw(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",$t();var p=en.current;en.current=qc;try{return tw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",$t(),aw(e)},useState:function(e){lt="useState",$t();var i=en.current;en.current=qc;try{return Mb(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",$t(),void 0},useDeferredValue:function(e){return lt="useDeferredValue",$t(),fw(e)},useTransition:function(){return lt="useTransition",$t(),mw()},useMutableSource:function(e,i,h){return lt="useMutableSource",$t(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",$t(),iw(e,i,h)},useId:function(){return lt="useId",$t(),pw()},unstable_isNewReconciler:Wt},OS={readContext:function(e){return _s(e)},useCallback:function(e,i){return lt="useCallback",$t(),Fb(e,i)},useContext:function(e){return lt="useContext",$t(),_s(e)},useEffect:function(e,i){return lt="useEffect",$t(),Zg(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",$t(),Ob(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",$t(),Vb(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",$t(),zb(e,i)},useMemo:function(e,i){lt="useMemo",$t();var h=en.current;en.current=nc;try{return Ub(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",$t();var p=en.current;en.current=nc;try{return nw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",$t(),Rb()},useState:function(e){lt="useState",$t();var i=en.current;en.current=nc;try{return sw(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",$t(),Bb()},useDeferredValue:function(e){return lt="useDeferredValue",$t(),DS(e)},useTransition:function(){return lt="useTransition",$t(),jS()},useMutableSource:function(e,i,h){return lt="useMutableSource",$t(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",$t(),Ab(e,i)},useId:function(){return lt="useId",$t(),$b()},unstable_isNewReconciler:Wt},BS={readContext:function(e){return _s(e)},useCallback:function(e,i){return lt="useCallback",$t(),Fb(e,i)},useContext:function(e){return lt="useContext",$t(),_s(e)},useEffect:function(e,i){return lt="useEffect",$t(),Zg(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",$t(),Ob(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",$t(),Vb(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",$t(),zb(e,i)},useMemo:function(e,i){lt="useMemo",$t();var h=en.current;en.current=Hb;try{return Ub(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",$t();var p=en.current;en.current=Hb;try{return rw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",$t(),Rb()},useState:function(e){lt="useState",$t();var i=en.current;en.current=Hb;try{return ow(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",$t(),Bb()},useDeferredValue:function(e){return lt="useDeferredValue",$t(),TS(e)},useTransition:function(){return lt="useTransition",$t(),kS()},useMutableSource:function(e,i,h){return lt="useMutableSource",$t(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",$t(),Ab(e,i)},useId:function(){return lt="useId",$t(),$b()},unstable_isNewReconciler:Wt},qc={readContext:function(e){return gw(),_s(e)},useCallback:function(e,i){return lt="useCallback",On(),Br(),dw(e,i)},useContext:function(e){return lt="useContext",On(),Br(),_s(e)},useEffect:function(e,i){return lt="useEffect",On(),Br(),Ib(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",On(),Br(),uw(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",On(),Br(),lw(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",On(),Br(),cw(e,i)},useMemo:function(e,i){lt="useMemo",On(),Br();var h=en.current;en.current=qc;try{return hw(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",On(),Br();var p=en.current;en.current=qc;try{return tw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",On(),Br(),aw(e)},useState:function(e){lt="useState",On(),Br();var i=en.current;en.current=qc;try{return Mb(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",On(),Br(),void 0},useDeferredValue:function(e){return lt="useDeferredValue",On(),Br(),fw(e)},useTransition:function(){return lt="useTransition",On(),Br(),mw()},useMutableSource:function(e,i,h){return lt="useMutableSource",On(),Br(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",On(),Br(),iw(e,i,h)},useId:function(){return lt="useId",On(),Br(),pw()},unstable_isNewReconciler:Wt},nc={readContext:function(e){return gw(),_s(e)},useCallback:function(e,i){return lt="useCallback",On(),$t(),Fb(e,i)},useContext:function(e){return lt="useContext",On(),$t(),_s(e)},useEffect:function(e,i){return lt="useEffect",On(),$t(),Zg(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",On(),$t(),Ob(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",On(),$t(),Vb(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",On(),$t(),zb(e,i)},useMemo:function(e,i){lt="useMemo",On(),$t();var h=en.current;en.current=nc;try{return Ub(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",On(),$t();var p=en.current;en.current=nc;try{return nw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",On(),$t(),Rb()},useState:function(e){lt="useState",On(),$t();var i=en.current;en.current=nc;try{return sw(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",On(),$t(),Bb()},useDeferredValue:function(e){return lt="useDeferredValue",On(),$t(),DS(e)},useTransition:function(){return lt="useTransition",On(),$t(),jS()},useMutableSource:function(e,i,h){return lt="useMutableSource",On(),$t(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",On(),$t(),Ab(e,i)},useId:function(){return lt="useId",On(),$t(),$b()},unstable_isNewReconciler:Wt},Hb={readContext:function(e){return gw(),_s(e)},useCallback:function(e,i){return lt="useCallback",On(),$t(),Fb(e,i)},useContext:function(e){return lt="useContext",On(),$t(),_s(e)},useEffect:function(e,i){return lt="useEffect",On(),$t(),Zg(e,i)},useImperativeHandle:function(e,i,h){return lt="useImperativeHandle",On(),$t(),Ob(e,i,h)},useInsertionEffect:function(e,i){return lt="useInsertionEffect",On(),$t(),Vb(e,i)},useLayoutEffect:function(e,i){return lt="useLayoutEffect",On(),$t(),zb(e,i)},useMemo:function(e,i){lt="useMemo",On(),$t();var h=en.current;en.current=nc;try{return Ub(e,i)}finally{en.current=h}},useReducer:function(e,i,h){lt="useReducer",On(),$t();var p=en.current;en.current=nc;try{return rw(e,i,h)}finally{en.current=p}},useRef:function(e){return lt="useRef",On(),$t(),Rb()},useState:function(e){lt="useState",On(),$t();var i=en.current;en.current=nc;try{return ow(e)}finally{en.current=i}},useDebugValue:function(e,i){return lt="useDebugValue",On(),$t(),Bb()},useDeferredValue:function(e){return lt="useDeferredValue",On(),$t(),TS(e)},useTransition:function(){return lt="useTransition",On(),$t(),kS()},useMutableSource:function(e,i,h){return lt="useMutableSource",On(),$t(),void 0},useSyncExternalStore:function(e,i,h){return lt="useSyncExternalStore",On(),$t(),Ab(e,i)},useId:function(){return lt="useId",On(),$t(),$b()},unstable_isNewReconciler:Wt}}var Qd=n.unstable_now,FS=0,Gb=-1,Kg=-1,Wb=-1,vw=!1,Zb=!1;function US(){return vw}function Y2(){Zb=!0}function X2(){vw=!1,Zb=!1}function J2(){vw=Zb,Zb=!1}function $S(){return FS}function qS(){FS=Qd()}function yw(e){Kg=Qd(),e.actualStartTime<0&&(e.actualStartTime=Qd())}function HS(e){Kg=-1}function Kb(e,i){if(Kg>=0){var h=Qd()-Kg;e.actualDuration+=h,i&&(e.selfBaseDuration=h),Kg=-1}}function Hc(e){if(Gb>=0){var i=Qd()-Gb;Gb=-1;for(var h=e.return;h!==null;){switch(h.tag){case O:var p=h.stateNode;p.effectDuration+=i;return;case Ve:var C=h.stateNode;C.effectDuration+=i;return}h=h.return}}}function bw(e){if(Wb>=0){var i=Qd()-Wb;Wb=-1;for(var h=e.return;h!==null;){switch(h.tag){case O:var p=h.stateNode;p!==null&&(p.passiveEffectDuration+=i);return;case Ve:var C=h.stateNode;C!==null&&(C.passiveEffectDuration+=i);return}h=h.return}}}function Gc(){Gb=Qd()}function xw(){Wb=Qd()}function _w(e){for(var i=e.child;i;)e.actualDuration+=i.actualDuration,i=i.sibling}function rc(e,i){if(e&&e.defaultProps){var h=In({},i),p=e.defaultProps;for(var C in p)h[C]===void 0&&(h[C]=p[C]);return h}return i}var ww={},Cw,Nw,Sw,Ew,Dw,GS,Yb,Tw,Pw,jw,Yg;{Cw=new Set,Nw=new Set,Sw=new Set,Ew=new Set,Tw=new Set,Dw=new Set,Pw=new Set,jw=new Set,Yg=new Set;var WS=new Set;Yb=function(e,i){if(!(e===null||typeof e=="function")){var h=i+"_"+e;WS.has(h)||(WS.add(h),x("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e))}},GS=function(e,i){if(i===void 0){var h=sr(e)||"Component";Dw.has(h)||(Dw.add(h),x("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",h))}},Object.defineProperty(ww,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(ww)}function kw(e,i,h,p){var C=e.memoizedState,D=h(p,C);{if(e.mode&ri){ki(!0);try{D=h(p,C)}finally{ki(!1)}}GS(i,D)}var L=D==null?C:In({},C,D);if(e.memoizedState=L,e.lanes===yt){var $=e.updateQueue;$.baseState=L}}var Aw={isMounted:Xt,enqueueSetState:function(e,i,h){var p=Rr(e),C=Zo(),D=rh(p),L=Fu(C,D);L.payload=i,h!=null&&(Yb(h,"setState"),L.callback=h);var $=Kd(p,L,D);$!==null&&(Vs($,p,D,C),Sb($,p,D)),Tp(p,D)},enqueueReplaceState:function(e,i,h){var p=Rr(e),C=Zo(),D=rh(p),L=Fu(C,D);L.tag=uS,L.payload=i,h!=null&&(Yb(h,"replaceState"),L.callback=h);var $=Kd(p,L,D);$!==null&&(Vs($,p,D,C),Sb($,p,D)),Tp(p,D)},enqueueForceUpdate:function(e,i){var h=Rr(e),p=Zo(),C=rh(h),D=Fu(p,C);D.tag=wb,i!=null&&(Yb(i,"forceUpdate"),D.callback=i);var L=Kd(h,D,C);L!==null&&(Vs(L,h,C,p),Sb(L,h,C)),Dp(h,C)}};function ZS(e,i,h,p,C,D,L){var $=e.stateNode;if(typeof $.shouldComponentUpdate=="function"){var Z=$.shouldComponentUpdate(p,D,L);{if(e.mode&ri){ki(!0);try{Z=$.shouldComponentUpdate(p,D,L)}finally{ki(!1)}}Z===void 0&&x("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",sr(i)||"Component")}return Z}return i.prototype&&i.prototype.isPureReactComponent?!Fd(h,p)||!Fd(C,D):!0}function Q2(e,i,h){var p=e.stateNode;{var C=sr(i)||"Component",D=p.render;D||(i.prototype&&typeof i.prototype.render=="function"?x("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",C):x("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",C)),p.getInitialState&&!p.getInitialState.isReactClassApproved&&!p.state&&x("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",C),p.getDefaultProps&&!p.getDefaultProps.isReactClassApproved&&x("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",C),p.propTypes&&x("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",C),p.contextType&&x("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",C),i.childContextTypes&&!Yg.has(i)&&(e.mode&ri)===Nn&&(Yg.add(i),x(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)),i.contextTypes&&!Yg.has(i)&&(e.mode&ri)===Nn&&(Yg.add(i),x(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)),p.contextTypes&&x("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",C),i.contextType&&i.contextTypes&&!Pw.has(i)&&(Pw.add(i),x("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",C)),typeof p.componentShouldUpdate=="function"&&x("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",C),i.prototype&&i.prototype.isPureReactComponent&&typeof p.shouldComponentUpdate<"u"&&x("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",sr(i)||"A pure component"),typeof p.componentDidUnmount=="function"&&x("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",C),typeof p.componentDidReceiveProps=="function"&&x("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",C),typeof p.componentWillRecieveProps=="function"&&x("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",C),typeof p.UNSAFE_componentWillRecieveProps=="function"&&x("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",C);var L=p.props!==h;p.props!==void 0&&L&&x("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",C,C),p.defaultProps&&x("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",C,C),typeof p.getSnapshotBeforeUpdate=="function"&&typeof p.componentDidUpdate!="function"&&!Sw.has(i)&&(Sw.add(i),x("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",sr(i))),typeof p.getDerivedStateFromProps=="function"&&x("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",C),typeof p.getDerivedStateFromError=="function"&&x("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",C),typeof i.getSnapshotBeforeUpdate=="function"&&x("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",C);var $=p.state;$&&(typeof $!="object"||tr($))&&x("%s.state: must be set to an object or null",C),typeof p.getChildContext=="function"&&typeof i.childContextTypes!="object"&&x("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",C)}}function KS(e,i){i.updater=Aw,e.stateNode=i,bu(i,e),i._reactInternalInstance=ww}function YS(e,i,h){var p=!1,C=La,D=La,L=i.contextType;if("contextType"in i){var $=L===null||L!==void 0&&L.$$typeof===Xe&&L._context===void 0;if(!$&&!jw.has(i)){jw.add(i);var Z="";L===void 0?Z=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof L!="object"?Z=" However, it is set to a "+typeof L+".":L.$$typeof===Se?Z=" Did you accidentally pass the Context.Provider instead?":L._context!==void 0?Z=" Did you accidentally pass the Context.Consumer instead?":Z=" However, it is set to an object with keys {"+Object.keys(L).join(", ")+"}.",x("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",sr(i)||"Component",Z)}}if(typeof L=="object"&&L!==null)D=_s(L);else{C=Pm(e,i,!0);var re=i.contextTypes;p=re!=null,D=p?jm(e,C):La}var ue=new i(h,D);if(e.mode&ri){ki(!0);try{ue=new i(h,D)}finally{ki(!1)}}var Re=e.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null;KS(e,ue);{if(typeof i.getDerivedStateFromProps=="function"&&Re===null){var Me=sr(i)||"Component";Nw.has(Me)||(Nw.add(Me),x("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Me,ue.state===null?"null":"undefined",Me))}if(typeof i.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"){var We=null,Ze=null,rt=null;if(typeof ue.componentWillMount=="function"&&ue.componentWillMount.__suppressDeprecationWarning!==!0?We="componentWillMount":typeof ue.UNSAFE_componentWillMount=="function"&&(We="UNSAFE_componentWillMount"),typeof ue.componentWillReceiveProps=="function"&&ue.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Ze="componentWillReceiveProps":typeof ue.UNSAFE_componentWillReceiveProps=="function"&&(Ze="UNSAFE_componentWillReceiveProps"),typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate.__suppressDeprecationWarning!==!0?rt="componentWillUpdate":typeof ue.UNSAFE_componentWillUpdate=="function"&&(rt="UNSAFE_componentWillUpdate"),We!==null||Ze!==null||rt!==null){var Gt=sr(i)||"Component",En=typeof i.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Ew.has(Gt)||(Ew.add(Gt),x(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Gt,En,We!==null?`
  `+We:"",Ze!==null?`
  `+Ze:"",rt!==null?`
  `+rt:""))}}}return p&&ON(e,C,D),ue}function eM(e,i){var h=i.state;typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),h!==i.state&&(x("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",jn(e)||"Component"),Aw.enqueueReplaceState(i,i.state,null))}function XS(e,i,h,p){var C=i.state;if(typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(h,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(h,p),i.state!==C){{var D=jn(e)||"Component";Cw.has(D)||(Cw.add(D),x("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D))}Aw.enqueueReplaceState(i,i.state,null)}}function Mw(e,i,h,p){Q2(e,i,h);var C=e.stateNode;C.props=h,C.state=e.memoizedState,C.refs={},U_(e);var D=i.contextType;if(typeof D=="object"&&D!==null)C.context=_s(D);else{var L=Pm(e,i,!0);C.context=jm(e,L)}{if(C.state===h){var $=sr(i)||"Component";Tw.has($)||(Tw.add($),x("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",$))}e.mode&ri&&ec.recordLegacyContextWarning(e,C),ec.recordUnsafeLifecycleWarnings(e,C)}C.state=e.memoizedState;var Z=i.getDerivedStateFromProps;if(typeof Z=="function"&&(kw(e,i,Z,h),C.state=e.memoizedState),typeof i.getDerivedStateFromProps!="function"&&typeof C.getSnapshotBeforeUpdate!="function"&&(typeof C.UNSAFE_componentWillMount=="function"||typeof C.componentWillMount=="function")&&(eM(e,C),Eb(e,h,C,p),C.state=e.memoizedState),typeof C.componentDidMount=="function"){var re=ur;re|=ae,(e.mode&tl)!==Nn&&(re|=pe),e.flags|=re}}function tM(e,i,h,p){var C=e.stateNode,D=e.memoizedProps;C.props=D;var L=C.context,$=i.contextType,Z=La;if(typeof $=="object"&&$!==null)Z=_s($);else{var re=Pm(e,i,!0);Z=jm(e,re)}var ue=i.getDerivedStateFromProps,Re=typeof ue=="function"||typeof C.getSnapshotBeforeUpdate=="function";!Re&&(typeof C.UNSAFE_componentWillReceiveProps=="function"||typeof C.componentWillReceiveProps=="function")&&(D!==h||L!==Z)&&XS(e,C,h,Z),hS();var Me=e.memoizedState,We=C.state=Me;if(Eb(e,h,C,p),We=e.memoizedState,D===h&&Me===We&&!ab()&&!Db()){if(typeof C.componentDidMount=="function"){var Ze=ur;Ze|=ae,(e.mode&tl)!==Nn&&(Ze|=pe),e.flags|=Ze}return!1}typeof ue=="function"&&(kw(e,i,ue,h),We=e.memoizedState);var rt=Db()||ZS(e,i,D,h,Me,We,Z);if(rt){if(!Re&&(typeof C.UNSAFE_componentWillMount=="function"||typeof C.componentWillMount=="function")&&(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"){var Gt=ur;Gt|=ae,(e.mode&tl)!==Nn&&(Gt|=pe),e.flags|=Gt}}else{if(typeof C.componentDidMount=="function"){var En=ur;En|=ae,(e.mode&tl)!==Nn&&(En|=pe),e.flags|=En}e.memoizedProps=h,e.memoizedState=We}return C.props=h,C.state=We,C.context=Z,rt}function nM(e,i,h,p,C){var D=i.stateNode;dS(e,i);var L=i.memoizedProps,$=i.type===i.elementType?L:rc(i.type,L);D.props=$;var Z=i.pendingProps,re=D.context,ue=h.contextType,Re=La;if(typeof ue=="object"&&ue!==null)Re=_s(ue);else{var Me=Pm(i,h,!0);Re=jm(i,Me)}var We=h.getDerivedStateFromProps,Ze=typeof We=="function"||typeof D.getSnapshotBeforeUpdate=="function";!Ze&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&(L!==Z||re!==Re)&&XS(i,D,p,Re),hS();var rt=i.memoizedState,Gt=D.state=rt;if(Eb(i,p,D,C),Gt=i.memoizedState,L===Z&&rt===Gt&&!ab()&&!Db()&&!dn)return typeof D.componentDidUpdate=="function"&&(L!==e.memoizedProps||rt!==e.memoizedState)&&(i.flags|=ur),typeof D.getSnapshotBeforeUpdate=="function"&&(L!==e.memoizedProps||rt!==e.memoizedState)&&(i.flags|=c),!1;typeof We=="function"&&(kw(i,h,We,p),Gt=i.memoizedState);var En=Db()||ZS(i,h,$,p,rt,Gt,Re)||dn;return En?(!Ze&&(typeof D.UNSAFE_componentWillUpdate=="function"||typeof D.componentWillUpdate=="function")&&(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,Gt,Re),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,Gt,Re)),typeof D.componentDidUpdate=="function"&&(i.flags|=ur),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=c)):(typeof D.componentDidUpdate=="function"&&(L!==e.memoizedProps||rt!==e.memoizedState)&&(i.flags|=ur),typeof D.getSnapshotBeforeUpdate=="function"&&(L!==e.memoizedProps||rt!==e.memoizedState)&&(i.flags|=c),i.memoizedProps=p,i.memoizedState=Gt),D.props=p,D.state=Gt,D.context=Re,En}function df(e,i){return{value:e,source:i,stack:ea(i),digest:null}}function Rw(e,i,h){return{value:e,source:null,stack:h??null,digest:i??null}}function rM(e,i){return!0}function Lw(e,i){try{var h=rM(e,i);if(h===!1)return;var p=i.value,C=i.source,D=i.stack,L=D!==null?D:"";if(p!=null&&p._suppressLogging){if(e.tag===k)return;console.error(p)}var $=C?jn(C):null,Z=$?"The above error occurred in the <"+$+"> component:":"The above error occurred in one of your React components:",re;if(e.tag===O)re=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var ue=jn(e)||"Anonymous";re="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+ue+".")}var Re=Z+`
`+L+`

`+(""+re);console.error(Re)}catch(Me){setTimeout(function(){throw Me})}}var iM=typeof WeakMap=="function"?WeakMap:Map;function JS(e,i,h){var p=Fu(ui,h);p.tag=B_,p.payload={element:null};var C=i.value;return p.callback=function(){YR(C),Lw(e,i)},p}function Iw(e,i,h){var p=Fu(ui,h);p.tag=B_;var C=e.type.getDerivedStateFromError;if(typeof C=="function"){var D=i.value;p.payload=function(){return C(D)},p.callback=function(){cD(e),Lw(e,i)}}var L=e.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(p.callback=function(){cD(e),Lw(e,i),typeof C!="function"&&ZR(this);var Z=i.value,re=i.stack;this.componentDidCatch(Z,{componentStack:re!==null?re:""}),typeof C!="function"&&(Do(e.lanes,Dn)||x("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",jn(e)||"Unknown"))}),p}function QS(e,i,h){var p=e.pingCache,C;if(p===null?(p=e.pingCache=new iM,C=new Set,p.set(i,C)):(C=p.get(i),C===void 0&&(C=new Set,p.set(i,C))),!C.has(h)){C.add(h);var D=XR.bind(null,e,i,h);ls&&fv(e,h),i.then(D,D)}}function sM(e,i,h,p){var C=e.updateQueue;if(C===null){var D=new Set;D.add(h),e.updateQueue=D}else C.add(h)}function oM(e,i){var h=e.tag;if((e.mode&lr)===Nn&&(h===A||h===fe||h===Ye)){var p=e.alternate;p?(e.updateQueue=p.updateQueue,e.memoizedState=p.memoizedState,e.lanes=p.lanes):(e.updateQueue=null,e.memoizedState=null)}}function eE(e){var i=e;do{if(i.tag===ze&&B2(i))return i;i=i.return}while(i!==null);return null}function tE(e,i,h,p,C){if((e.mode&lr)===Nn){if(e===i)e.flags|=z;else{if(e.flags|=cn,h.flags|=U,h.flags&=-52805,h.tag===k){var D=h.alternate;if(D===null)h.tag=wt;else{var L=Fu(ui,Dn);L.tag=wb,Kd(h,L,Dn)}}h.lanes=Jn(h.lanes,Dn)}return e}return e.flags|=z,e.lanes=C,e}function aM(e,i,h,p,C){if(h.flags|=R,ls&&fv(e,C),p!==null&&typeof p=="object"&&typeof p.then=="function"){var D=p;oM(h),ro()&&h.mode&lr&&GN();var L=eE(i);if(L!==null){L.flags&=~b,tE(L,i,h,e,C),L.mode&lr&&QS(e,D,C),sM(L,e,D);return}else{if(!ay(C)){QS(e,D,C),p1();return}var $=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");p=$}}else if(ro()&&h.mode&lr){GN();var Z=eE(i);if(Z!==null){(Z.flags&z)===wn&&(Z.flags|=b),tE(Z,i,h,e,C),T_(df(p,h));return}}p=df(p,h),BR(p);var re=i;do{switch(re.tag){case O:{var ue=p;re.flags|=z;var Re=Tu(C);re.lanes=Jn(re.lanes,Re);var Me=JS(re,ue,Re);$_(re,Me);return}case k:var We=p,Ze=re.type,rt=re.stateNode;if((re.flags&cn)===wn&&(typeof Ze.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&!eD(rt))){re.flags|=z;var Gt=Tu(C);re.lanes=Jn(re.lanes,Gt);var En=Iw(re,We,Gt);$_(re,En);return}break}re=re.return}while(re!==null)}function lM(){return null}var Xg=o.ReactCurrentOwner,ic=!1,Vw,Jg,zw,Ow,Bw,hf,Fw,Xb,Qg;Vw={},Jg={},zw={},Ow={},Bw={},hf=!1,Fw={},Xb={},Qg={};function Go(e,i,h,p){e===null?i.child=iS(i,null,h,p):i.child=Rm(i,e.child,h,p)}function cM(e,i,h,p){i.child=Rm(i,e.child,null,p),i.child=Rm(i,null,h,p)}function nE(e,i,h,p,C){if(i.type!==i.elementType){var D=h.propTypes;D&&Jl(D,p,"prop",sr(h))}var L=h.render,$=i.ref,Z,re;Im(i,C),Gs(i);{if(Xg.current=i,Fs(!0),Z=Um(e,i,L,p,$,C),re=$m(),i.mode&ri){ki(!0);try{Z=Um(e,i,L,p,$,C),re=$m()}finally{ki(!1)}}Fs(!1)}return So(),e!==null&&!ic?(yS(e,i,C),Uu(e,i,C)):(ro()&&re&&w_(i),i.flags|=wo,Go(e,i,Z,C),i.child)}function rE(e,i,h,p,C){if(e===null){var D=h.type;if(mL(D)&&h.compare===null&&h.defaultProps===void 0){var L=D;return L=Xm(D),i.tag=Ye,i.type=L,qw(i,D),iE(e,i,L,p,C)}{var $=D.propTypes;if($&&Jl($,p,"prop",sr(D)),h.defaultProps!==void 0){var Z=sr(D)||"Unknown";Qg[Z]||(x("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",Z),Qg[Z]=!0)}}var re=E1(h.type,null,p,i,i.mode,C);return re.ref=i.ref,re.return=i,i.child=re,re}{var ue=h.type,Re=ue.propTypes;Re&&Jl(Re,p,"prop",sr(ue))}var Me=e.child,We=Yw(e,C);if(!We){var Ze=Me.memoizedProps,rt=h.compare;if(rt=rt!==null?rt:Fd,rt(Ze,p)&&e.ref===i.ref)return Uu(e,i,C)}i.flags|=wo;var Gt=vf(Me,p);return Gt.ref=i.ref,Gt.return=i,i.child=Gt,Gt}function iE(e,i,h,p,C){if(i.type!==i.elementType){var D=i.elementType;if(D.$$typeof===Lt){var L=D,$=L._payload,Z=L._init;try{D=Z($)}catch{D=null}var re=D&&D.propTypes;re&&Jl(re,p,"prop",sr(D))}}if(e!==null){var ue=e.memoizedProps;if(Fd(ue,p)&&e.ref===i.ref&&i.type===e.type)if(ic=!1,i.pendingProps=p=ue,Yw(e,C))(e.flags&U)!==wn&&(ic=!0);else return i.lanes=e.lanes,Uu(e,i,C)}return Uw(e,i,h,p,C)}function sE(e,i,h){var p=i.pendingProps,C=p.children,D=e!==null?e.memoizedState:null;if(p.mode==="hidden"||St)if((i.mode&lr)===Nn){var L={baseLanes:yt,cachePool:null,transitions:null};i.memoizedState=L,ux(i,h)}else if(Do(h,Bo)){var Re={baseLanes:yt,cachePool:null,transitions:null};i.memoizedState=Re;var Me=D!==null?D.baseLanes:h;ux(i,Me)}else{var $=null,Z;if(D!==null){var re=D.baseLanes;Z=Jn(re,h)}else Z=h;i.lanes=i.childLanes=Bo;var ue={baseLanes:Z,cachePool:$,transitions:null};return i.memoizedState=ue,i.updateQueue=null,ux(i,Z),null}else{var We;D!==null?(We=Jn(D.baseLanes,h),i.memoizedState=null):We=h,ux(i,We)}return Go(e,i,C,h),i.child}function uM(e,i,h){var p=i.pendingProps;return Go(e,i,p,h),i.child}function dM(e,i,h){var p=i.pendingProps.children;return Go(e,i,p,h),i.child}function hM(e,i,h){{i.flags|=ur;{var p=i.stateNode;p.effectDuration=0,p.passiveEffectDuration=0}}var C=i.pendingProps,D=C.children;return Go(e,i,D,h),i.child}function oE(e,i){var h=i.ref;(e===null&&h!==null||e!==null&&e.ref!==h)&&(i.flags|=r,i.flags|=X)}function Uw(e,i,h,p,C){if(i.type!==i.elementType){var D=h.propTypes;D&&Jl(D,p,"prop",sr(h))}var L;{var $=Pm(i,h,!0);L=jm(i,$)}var Z,re;Im(i,C),Gs(i);{if(Xg.current=i,Fs(!0),Z=Um(e,i,h,p,L,C),re=$m(),i.mode&ri){ki(!0);try{Z=Um(e,i,h,p,L,C),re=$m()}finally{ki(!1)}}Fs(!1)}return So(),e!==null&&!ic?(yS(e,i,C),Uu(e,i,C)):(ro()&&re&&w_(i),i.flags|=wo,Go(e,i,Z,C),i.child)}function aE(e,i,h,p,C){{switch(PL(i)){case!1:{var D=i.stateNode,L=i.type,$=new L(i.memoizedProps,D.context),Z=$.state;D.updater.enqueueSetState(D,Z,null);break}case!0:{i.flags|=cn,i.flags|=z;var re=new Error("Simulated error coming from DevTools"),ue=Tu(C);i.lanes=Jn(i.lanes,ue);var Re=Iw(i,df(re,i),ue);$_(i,Re);break}}if(i.type!==i.elementType){var Me=h.propTypes;Me&&Jl(Me,p,"prop",sr(h))}}var We;Fc(h)?(We=!0,cb(i)):We=!1,Im(i,C);var Ze=i.stateNode,rt;Ze===null?(Qb(e,i),YS(i,h,p),Mw(i,h,p,C),rt=!0):e===null?rt=tM(i,h,p,C):rt=nM(e,i,h,p,C);var Gt=$w(e,i,h,rt,We,C);{var En=i.stateNode;rt&&En.props!==p&&(hf||x("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",jn(i)||"a component"),hf=!0)}return Gt}function $w(e,i,h,p,C,D){oE(e,i);var L=(i.flags&cn)!==wn;if(!p&&!L)return C&&UN(i,h,!1),Uu(e,i,D);var $=i.stateNode;Xg.current=i;var Z;if(L&&typeof h.getDerivedStateFromError!="function")Z=null,HS();else{Gs(i);{if(Fs(!0),Z=$.render(),i.mode&ri){ki(!0);try{$.render()}finally{ki(!1)}}Fs(!1)}So()}return i.flags|=wo,e!==null&&L?cM(e,i,Z,D):Go(e,i,Z,D),i.memoizedState=$.state,C&&UN(i,h,!0),i.child}function lE(e){var i=e.stateNode;i.pendingContext?BN(e,i.pendingContext,i.pendingContext!==i.context):i.context&&BN(e,i.context,!1),q_(e,i.containerInfo)}function fM(e,i,h){if(lE(i),e===null)throw new Error("Should have a current fiber. This is a bug in React.");var p=i.pendingProps,C=i.memoizedState,D=C.element;dS(e,i),Eb(i,p,null,h);var L=i.memoizedState;i.stateNode;var $=L.element;if(C.isDehydrated){var Z={element:$,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},re=i.updateQueue;if(re.baseState=Z,i.memoizedState=Z,i.flags&b){var ue=df(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),i);return cE(e,i,$,h,ue)}else if($!==D){var Re=df(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),i);return cE(e,i,$,h,Re)}else{g2(i);var Me=iS(i,null,$,h);i.child=Me;for(var We=Me;We;)We.flags=We.flags&~bi|v,We=We.sibling}}else{if(Mm(),$===D)return Uu(e,i,h);Go(e,i,$,h)}return i.child}function cE(e,i,h,p,C){return Mm(),T_(C),i.flags|=b,Go(e,i,h,p),i.child}function mM(e,i,h){pS(i),e===null&&D_(i);var p=i.type,C=i.pendingProps,D=e!==null?e.memoizedProps:null,L=C.children,$=l_(p,C);return $?L=null:D!==null&&l_(p,D)&&(i.flags|=Il),oE(e,i),Go(e,i,L,h),i.child}function pM(e,i){return e===null&&D_(i),null}function gM(e,i,h,p){Qb(e,i);var C=i.pendingProps,D=h,L=D._payload,$=D._init,Z=$(L);i.type=Z;var re=i.tag=pL(Z),ue=rc(Z,C),Re;switch(re){case A:return qw(i,Z),i.type=Z=Xm(Z),Re=Uw(null,i,Z,ue,p),Re;case k:return i.type=Z=x1(Z),Re=aE(null,i,Z,ue,p),Re;case fe:return i.type=Z=_1(Z),Re=nE(null,i,Z,ue,p),Re;case Je:{if(i.type!==i.elementType){var Me=Z.propTypes;Me&&Jl(Me,ue,"prop",sr(Z))}return Re=rE(null,i,Z,rc(Z.type,ue),p),Re}}var We="";throw Z!==null&&typeof Z=="object"&&Z.$$typeof===Lt&&(We=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+Z+". "+("Lazy element type must resolve to a class or function."+We))}function vM(e,i,h,p,C){Qb(e,i),i.tag=k;var D;return Fc(h)?(D=!0,cb(i)):D=!1,Im(i,C),YS(i,h,p),Mw(i,h,p,C),$w(null,i,h,!0,D,C)}function yM(e,i,h,p){Qb(e,i);var C=i.pendingProps,D;{var L=Pm(i,h,!1);D=jm(i,L)}Im(i,p);var $,Z;Gs(i);{if(h.prototype&&typeof h.prototype.render=="function"){var re=sr(h)||"Unknown";Vw[re]||(x("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",re,re),Vw[re]=!0)}i.mode&ri&&ec.recordLegacyContextWarning(i,null),Fs(!0),Xg.current=i,$=Um(null,i,h,C,D,p),Z=$m(),Fs(!1)}if(So(),i.flags|=wo,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){var ue=sr(h)||"Unknown";Jg[ue]||(x("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ue,ue,ue),Jg[ue]=!0)}if(typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){{var Re=sr(h)||"Unknown";Jg[Re]||(x("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Re,Re,Re),Jg[Re]=!0)}i.tag=k,i.memoizedState=null,i.updateQueue=null;var Me=!1;return Fc(h)?(Me=!0,cb(i)):Me=!1,i.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,U_(i),KS(i,$),Mw(i,h,C,p),$w(null,i,h,!0,Me,p)}else{if(i.tag=A,i.mode&ri){ki(!0);try{$=Um(null,i,h,C,D,p),Z=$m()}finally{ki(!1)}}return ro()&&Z&&w_(i),Go(null,i,$,p),qw(i,h),i.child}}function qw(e,i){{if(i&&i.childContextTypes&&x("%s(...): childContextTypes cannot be defined on a function component.",i.displayName||i.name||"Component"),e.ref!==null){var h="",p=ya();p&&(h+=`

Check the render method of \``+p+"`.");var C=p||"",D=e._debugSource;D&&(C=D.fileName+":"+D.lineNumber),Bw[C]||(Bw[C]=!0,x("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",h))}if(i.defaultProps!==void 0){var L=sr(i)||"Unknown";Qg[L]||(x("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",L),Qg[L]=!0)}if(typeof i.getDerivedStateFromProps=="function"){var $=sr(i)||"Unknown";Ow[$]||(x("%s: Function components do not support getDerivedStateFromProps.",$),Ow[$]=!0)}if(typeof i.contextType=="object"&&i.contextType!==null){var Z=sr(i)||"Unknown";zw[Z]||(x("%s: Function components do not support contextType.",Z),zw[Z]=!0)}}}var Hw={dehydrated:null,treeContext:null,retryLane:Sr};function Gw(e){return{baseLanes:e,cachePool:lM(),transitions:null}}function bM(e,i){var h=null;return{baseLanes:Jn(e.baseLanes,i),cachePool:h,transitions:e.transitions}}function xM(e,i,h,p){if(i!==null){var C=i.memoizedState;if(C===null)return!1}return W_(e,Ug)}function _M(e,i){return am(e.childLanes,i)}function uE(e,i,h){var p=i.pendingProps;jL(i)&&(i.flags|=cn);var C=tc.current,D=!1,L=(i.flags&cn)!==wn;if(L||xM(C,e)?(D=!0,i.flags&=~cn):(e===null||e.memoizedState!==null)&&(C=O2(C,vS)),C=zm(C),Xd(i,C),e===null){D_(i);var $=i.memoizedState;if($!==null){var Z=$.dehydrated;if(Z!==null)return EM(i,Z)}var re=p.children,ue=p.fallback;if(D){var Re=wM(i,re,ue,h),Me=i.child;return Me.memoizedState=Gw(h),i.memoizedState=Hw,Re}else return Ww(i,re)}else{var We=e.memoizedState;if(We!==null){var Ze=We.dehydrated;if(Ze!==null)return DM(e,i,L,p,Ze,We,h)}if(D){var rt=p.fallback,Gt=p.children,En=NM(e,i,Gt,rt,h),_n=i.child,yr=e.child.memoizedState;return _n.memoizedState=yr===null?Gw(h):bM(yr,h),_n.childLanes=_M(e,h),i.memoizedState=Hw,En}else{var dr=p.children,Ue=CM(e,i,dr,h);return i.memoizedState=null,Ue}}}function Ww(e,i,h){var p=e.mode,C={mode:"visible",children:i},D=Zw(C,p);return D.return=e,e.child=D,D}function wM(e,i,h,p){var C=e.mode,D=e.child,L={mode:"hidden",children:i},$,Z;return(C&lr)===Nn&&D!==null?($=D,$.childLanes=yt,$.pendingProps=L,e.mode&Lr&&($.actualDuration=0,$.actualStartTime=-1,$.selfBaseDuration=0,$.treeBaseDuration=0),Z=sh(h,C,p,null)):($=Zw(L,C),Z=sh(h,C,p,null)),$.return=e,Z.return=e,$.sibling=Z,e.child=$,Z}function Zw(e,i,h){return dD(e,i,yt,null)}function dE(e,i){return vf(e,i)}function CM(e,i,h,p){var C=e.child,D=C.sibling,L=dE(C,{mode:"visible",children:h});if((i.mode&lr)===Nn&&(L.lanes=p),L.return=i,L.sibling=null,D!==null){var $=i.deletions;$===null?(i.deletions=[D],i.flags|=Co):$.push(D)}return i.child=L,L}function NM(e,i,h,p,C){var D=i.mode,L=e.child,$=L.sibling,Z={mode:"hidden",children:h},re;if((D&lr)===Nn&&i.child!==L){var ue=i.child;re=ue,re.childLanes=yt,re.pendingProps=Z,i.mode&Lr&&(re.actualDuration=0,re.actualStartTime=-1,re.selfBaseDuration=L.selfBaseDuration,re.treeBaseDuration=L.treeBaseDuration),i.deletions=null}else re=dE(L,Z),re.subtreeFlags=L.subtreeFlags&Be;var Re;return $!==null?Re=vf($,p):(Re=sh(p,D,C,null),Re.flags|=bi),Re.return=i,re.return=i,re.sibling=Re,i.child=re,Re}function Jb(e,i,h,p){p!==null&&T_(p),Rm(i,e.child,null,h);var C=i.pendingProps,D=C.children,L=Ww(i,D);return L.flags|=bi,i.memoizedState=null,L}function SM(e,i,h,p,C){var D=i.mode,L={mode:"visible",children:h},$=Zw(L,D),Z=sh(p,D,C,null);return Z.flags|=bi,$.return=i,Z.return=i,$.sibling=Z,i.child=$,(i.mode&lr)!==Nn&&Rm(i,e.child,null,C),Z}function EM(e,i,h){return(e.mode&lr)===Nn?(x("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),e.lanes=Dn):h_(i)?e.lanes=ja:e.lanes=Bo,null}function DM(e,i,h,p,C,D,L){if(h)if(i.flags&b){i.flags&=~b;var Ue=Rw(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return Jb(e,i,L,Ue)}else{if(i.memoizedState!==null)return i.child=e.child,i.flags|=cn,null;var it=p.children,$e=p.fallback,Ct=SM(e,i,it,$e,L),nn=i.child;return nn.memoizedState=Gw(L),i.memoizedState=Hw,Ct}else{if(m2(),(i.mode&lr)===Nn)return Jb(e,i,L,null);if(h_(C)){var $,Z,re;{var ue=kA(C);$=ue.digest,Z=ue.message,re=ue.stack}var Re;Z?Re=new Error(Z):Re=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Me=Rw(Re,$,re);return Jb(e,i,L,Me)}var We=Do(L,e.childLanes);if(ic||We){var Ze=cx();if(Ze!==null){var rt=C0(Ze,L);if(rt!==Sr&&rt!==D.retryLane){D.retryLane=rt;var Gt=ui;ca(e,rt),Vs(Ze,e,rt,Gt)}}p1();var En=Rw(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return Jb(e,i,L,En)}else if(RN(C)){i.flags|=cn,i.child=e.child;var _n=JR.bind(null,e);return AA(C,_n),null}else{v2(i,C,D.treeContext);var yr=p.children,dr=Ww(i,yr);return dr.flags|=v,dr}}}function hE(e,i,h){e.lanes=Jn(e.lanes,i);var p=e.alternate;p!==null&&(p.lanes=Jn(p.lanes,i)),z_(e.return,i,h)}function TM(e,i,h){for(var p=i;p!==null;){if(p.tag===ze){var C=p.memoizedState;C!==null&&hE(p,h,e)}else if(p.tag===sn)hE(p,h,e);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function PM(e){for(var i=e,h=null;i!==null;){var p=i.alternate;p!==null&&jb(p)===null&&(h=i),i=i.sibling}return h}function jM(e){if(e!==void 0&&e!=="forwards"&&e!=="backwards"&&e!=="together"&&!Fw[e])if(Fw[e]=!0,typeof e=="string")switch(e.toLowerCase()){case"together":case"forwards":case"backwards":{x('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break}case"forward":case"backward":{x('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break}default:x('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e);break}else x('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}function kM(e,i){e!==void 0&&!Xb[e]&&(e!=="collapsed"&&e!=="hidden"?(Xb[e]=!0,x('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):i!=="forwards"&&i!=="backwards"&&(Xb[e]=!0,x('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}function fE(e,i){{var h=tr(e),p=!h&&typeof mo(e)=="function";if(h||p){var C=h?"array":"iterable";return x("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",C,i,C),!1}}return!0}function AM(e,i){if((i==="forwards"||i==="backwards")&&e!==void 0&&e!==null&&e!==!1)if(tr(e)){for(var h=0;h<e.length;h++)if(!fE(e[h],h))return}else{var p=mo(e);if(typeof p=="function"){var C=p.call(e);if(C)for(var D=C.next(),L=0;!D.done;D=C.next()){if(!fE(D.value,L))return;L++}}else x('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',i)}}function Kw(e,i,h,p,C){var D=e.memoizedState;D===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:C}:(D.isBackwards=i,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=h,D.tailMode=C)}function mE(e,i,h){var p=i.pendingProps,C=p.revealOrder,D=p.tail,L=p.children;jM(C),kM(D,C),AM(L,C),Go(e,i,L,h);var $=tc.current,Z=W_($,Ug);if(Z)$=Z_($,Ug),i.flags|=cn;else{var re=e!==null&&(e.flags&cn)!==wn;re&&TM(i,i.child,h),$=zm($)}if(Xd(i,$),(i.mode&lr)===Nn)i.memoizedState=null;else switch(C){case"forwards":{var ue=PM(i.child),Re;ue===null?(Re=i.child,i.child=null):(Re=ue.sibling,ue.sibling=null),Kw(i,!1,Re,ue,D);break}case"backwards":{var Me=null,We=i.child;for(i.child=null;We!==null;){var Ze=We.alternate;if(Ze!==null&&jb(Ze)===null){i.child=We;break}var rt=We.sibling;We.sibling=Me,Me=We,We=rt}Kw(i,!0,Me,null,D);break}case"together":{Kw(i,!1,null,null,void 0);break}default:i.memoizedState=null}return i.child}function MM(e,i,h){q_(i,i.stateNode.containerInfo);var p=i.pendingProps;return e===null?i.child=Rm(i,null,p,h):Go(e,i,p,h),i.child}var pE=!1;function RM(e,i,h){var p=i.type,C=p._context,D=i.pendingProps,L=i.memoizedProps,$=D.value;{"value"in D||pE||(pE=!0,x("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var Z=i.type.propTypes;Z&&Jl(Z,D,"prop","Context.Provider")}if(aS(i,C,$),L!==null){var re=L.value;if(Po(re,$)){if(L.children===D.children&&!ab())return Uu(e,i,h)}else j2(i,C,h)}var ue=D.children;return Go(e,i,ue,h),i.child}var gE=!1;function LM(e,i,h){var p=i.type;p._context===void 0?p!==p.Consumer&&(gE||(gE=!0,x("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):p=p._context;var C=i.pendingProps,D=C.children;typeof D!="function"&&x("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Im(i,h);var L=_s(p);Gs(i);var $;return Xg.current=i,Fs(!0),$=D(L),Fs(!1),So(),i.flags|=wo,Go(e,i,$,h),i.child}function ev(){ic=!0}function Qb(e,i){(i.mode&lr)===Nn&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=bi)}function Uu(e,i,h){return e!==null&&(i.dependencies=e.dependencies),HS(),hv(i.lanes),Do(h,i.childLanes)?(T2(e,i),i.child):null}function IM(e,i,h){{var p=i.return;if(p===null)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,i.alternate=null,h.index=i.index,h.sibling=i.sibling,h.return=i.return,h.ref=i.ref,i===p.child)p.child=h;else{var C=p.child;if(C===null)throw new Error("Expected parent to have a child.");for(;C.sibling!==i;)if(C=C.sibling,C===null)throw new Error("Expected to find the previous sibling.");C.sibling=h}var D=p.deletions;return D===null?(p.deletions=[e],p.flags|=Co):D.push(e),h.flags|=bi,h}}function Yw(e,i){var h=e.lanes;return!!Do(h,i)}function VM(e,i,h){switch(i.tag){case O:lE(i),i.stateNode,Mm();break;case ne:pS(i);break;case k:{var p=i.type;Fc(p)&&cb(i);break}case W:q_(i,i.stateNode.containerInfo);break;case we:{var C=i.memoizedProps.value,D=i.type._context;aS(i,D,C);break}case Ve:{var L=Do(h,i.childLanes);L&&(i.flags|=ur);{var $=i.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}}break;case ze:{var Z=i.memoizedState;if(Z!==null){if(Z.dehydrated!==null)return Xd(i,zm(tc.current)),i.flags|=cn,null;var re=i.child,ue=re.childLanes;if(Do(h,ue))return uE(e,i,h);Xd(i,zm(tc.current));var Re=Uu(e,i,h);return Re!==null?Re.sibling:null}else Xd(i,zm(tc.current));break}case sn:{var Me=(e.flags&cn)!==wn,We=Do(h,i.childLanes);if(Me){if(We)return mE(e,i,h);i.flags|=cn}var Ze=i.memoizedState;if(Ze!==null&&(Ze.rendering=null,Ze.tail=null,Ze.lastEffect=null),Xd(i,tc.current),We)break;return null}case vt:case Nt:return i.lanes=yt,sE(e,i,h)}return Uu(e,i,h)}function vE(e,i,h){if(i._debugNeedsRemount&&e!==null)return IM(e,i,E1(i.type,i.key,i.pendingProps,i._debugOwner||null,i.mode,i.lanes));if(e!==null){var p=e.memoizedProps,C=i.pendingProps;if(p!==C||ab()||i.type!==e.type)ic=!0;else{var D=Yw(e,h);if(!D&&(i.flags&cn)===wn)return ic=!1,VM(e,i,h);(e.flags&U)!==wn?ic=!0:ic=!1}}else if(ic=!1,ro()&&l2(i)){var L=i.index,$=c2();HN(i,$,L)}switch(i.lanes=yt,i.tag){case B:return yM(e,i,i.type,h);case ot:{var Z=i.elementType;return gM(e,i,Z,h)}case A:{var re=i.type,ue=i.pendingProps,Re=i.elementType===re?ue:rc(re,ue);return Uw(e,i,re,Re,h)}case k:{var Me=i.type,We=i.pendingProps,Ze=i.elementType===Me?We:rc(Me,We);return aE(e,i,Me,Ze,h)}case O:return fM(e,i,h);case ne:return mM(e,i,h);case me:return pM(e,i);case ze:return uE(e,i,h);case W:return MM(e,i,h);case fe:{var rt=i.type,Gt=i.pendingProps,En=i.elementType===rt?Gt:rc(rt,Gt);return nE(e,i,rt,En,h)}case ke:return uM(e,i,h);case De:return dM(e,i,h);case Ve:return hM(e,i,h);case we:return RM(e,i,h);case Ae:return LM(e,i,h);case Je:{var _n=i.type,yr=i.pendingProps,dr=rc(_n,yr);if(i.type!==i.elementType){var Ue=_n.propTypes;Ue&&Jl(Ue,dr,"prop",sr(_n))}return dr=rc(_n.type,dr),rE(e,i,_n,dr,h)}case Ye:return iE(e,i,i.type,i.pendingProps,h);case wt:{var it=i.type,$e=i.pendingProps,Ct=i.elementType===it?$e:rc(it,$e);return vM(e,i,it,Ct,h)}case sn:return mE(e,i,h);case st:break;case vt:return sE(e,i,h)}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function qm(e){e.flags|=ur}function yE(e){e.flags|=r,e.flags|=X}var bE,Xw,xE,_E;bE=function(e,i,h,p){for(var C=i.child;C!==null;){if(C.tag===ne||C.tag===me)sA(e,C.stateNode);else if(C.tag!==W){if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===i)return;for(;C.sibling===null;){if(C.return===null||C.return===i)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Xw=function(e,i){},xE=function(e,i,h,p,C){var D=e.memoizedProps;if(D!==p){var L=i.stateNode,$=H_(),Z=aA(L,h,D,p,C,$);i.updateQueue=Z,Z&&qm(i)}},_E=function(e,i,h,p){h!==p&&qm(i)};function tv(e,i){if(!ro())switch(e.tailMode){case"hidden":{for(var h=e.tail,p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?e.tail=null:p.sibling=null;break}case"collapsed":{for(var C=e.tail,D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?!i&&e.tail!==null?e.tail.sibling=null:e.tail=null:D.sibling=null;break}}}function so(e){var i=e.alternate!==null&&e.alternate.child===e.child,h=yt,p=wn;if(i){if((e.mode&Lr)!==Nn){for(var Z=e.selfBaseDuration,re=e.child;re!==null;)h=Jn(h,Jn(re.lanes,re.childLanes)),p|=re.subtreeFlags&Be,p|=re.flags&Be,Z+=re.treeBaseDuration,re=re.sibling;e.treeBaseDuration=Z}else for(var ue=e.child;ue!==null;)h=Jn(h,Jn(ue.lanes,ue.childLanes)),p|=ue.subtreeFlags&Be,p|=ue.flags&Be,ue.return=e,ue=ue.sibling;e.subtreeFlags|=p}else{if((e.mode&Lr)!==Nn){for(var C=e.actualDuration,D=e.selfBaseDuration,L=e.child;L!==null;)h=Jn(h,Jn(L.lanes,L.childLanes)),p|=L.subtreeFlags,p|=L.flags,C+=L.actualDuration,D+=L.treeBaseDuration,L=L.sibling;e.actualDuration=C,e.treeBaseDuration=D}else for(var $=e.child;$!==null;)h=Jn(h,Jn($.lanes,$.childLanes)),p|=$.subtreeFlags,p|=$.flags,$.return=e,$=$.sibling;e.subtreeFlags|=p}return e.childLanes=h,i}function zM(e,i,h){if(w2()&&(i.mode&lr)!==Nn&&(i.flags&cn)===wn)return JN(i),Mm(),i.flags|=b|R|z,!1;var p=mb(i);if(h!==null&&h.dehydrated!==null)if(e===null){if(!p)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(x2(i),so(i),(i.mode&Lr)!==Nn){var C=h!==null;if(C){var D=i.child;D!==null&&(i.treeBaseDuration-=D.treeBaseDuration)}}return!1}else{if(Mm(),(i.flags&cn)===wn&&(i.memoizedState=null),i.flags|=ur,so(i),(i.mode&Lr)!==Nn){var L=h!==null;if(L){var $=i.child;$!==null&&(i.treeBaseDuration-=$.treeBaseDuration)}}return!1}else return QN(),!0}function wE(e,i,h){var p=i.pendingProps;switch(C_(i),i.tag){case B:case ot:case Ye:case A:case fe:case ke:case De:case Ve:case Ae:case Je:return so(i),null;case k:{var C=i.type;return Fc(C)&&lb(i),so(i),null}case O:{var D=i.stateNode;if(Vm(i),b_(i),Y_(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),e===null||e.child===null){var L=mb(i);if(L)qm(i);else if(e!==null){var $=e.memoizedState;(!$.isDehydrated||(i.flags&b)!==wn)&&(i.flags|=c,QN())}}return Xw(e,i),so(i),null}case ne:{G_(i);var Z=mS(),re=i.type;if(e!==null&&i.stateNode!=null)xE(e,i,re,p,Z),e.ref!==i.ref&&yE(i);else{if(!p){if(i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return so(i),null}var ue=H_(),Re=mb(i);if(Re)y2(i,Z,ue)&&qm(i);else{var Me=iA(re,p,Z,ue,i);bE(Me,i,!1,!1),i.stateNode=Me,oA(Me,re,p,Z)&&qm(i)}i.ref!==null&&yE(i)}return so(i),null}case me:{var We=p;if(e&&i.stateNode!=null){var Ze=e.memoizedProps;_E(e,i,Ze,We)}else{if(typeof We!="string"&&i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var rt=mS(),Gt=H_(),En=mb(i);En?b2(i)&&qm(i):i.stateNode=lA(We,rt,Gt,i)}return so(i),null}case ze:{Om(i);var _n=i.memoizedState;if(e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){var yr=zM(e,i,_n);if(!yr)return i.flags&z?i:null}if((i.flags&cn)!==wn)return i.lanes=h,(i.mode&Lr)!==Nn&&_w(i),i;var dr=_n!==null,Ue=e!==null&&e.memoizedState!==null;if(dr!==Ue&&dr){var it=i.child;if(it.flags|=w,(i.mode&lr)!==Nn){var $e=e===null&&(i.memoizedProps.unstable_avoidThisFallback!==!0||!0);$e||W_(tc.current,vS)?OR():p1()}}var Ct=i.updateQueue;if(Ct!==null&&(i.flags|=ur),so(i),(i.mode&Lr)!==Nn&&dr){var nn=i.child;nn!==null&&(i.treeBaseDuration-=nn.treeBaseDuration)}return null}case W:return Vm(i),Xw(e,i),e===null&&t2(i.stateNode.containerInfo),so(i),null;case we:var Yt=i.type._context;return V_(Yt,i),so(i),null;case wt:{var Mn=i.type;return Fc(Mn)&&lb(i),so(i),null}case sn:{Om(i);var qn=i.memoizedState;if(qn===null)return so(i),null;var Qr=(i.flags&cn)!==wn,Ar=qn.rendering;if(Ar===null)if(Qr)tv(qn,!1);else{var us=FR()&&(e===null||(e.flags&cn)===wn);if(!us)for(var Mr=i.child;Mr!==null;){var ts=jb(Mr);if(ts!==null){Qr=!0,i.flags|=cn,tv(qn,!1);var Ro=ts.updateQueue;return Ro!==null&&(i.updateQueue=Ro,i.flags|=ur),i.subtreeFlags=wn,P2(i,h),Xd(i,Z_(tc.current,Ug)),i.child}Mr=Mr.sibling}qn.tail!==null&&mr()>$E()&&(i.flags|=cn,Qr=!0,tv(qn,!1),i.lanes=iy)}else{if(!Qr){var uo=jb(Ar);if(uo!==null){i.flags|=cn,Qr=!0;var Va=uo.updateQueue;if(Va!==null&&(i.updateQueue=Va,i.flags|=ur),tv(qn,!0),qn.tail===null&&qn.tailMode==="hidden"&&!Ar.alternate&&!ro())return so(i),null}else mr()*2-qn.renderingStartTime>$E()&&h!==Bo&&(i.flags|=cn,Qr=!0,tv(qn,!1),i.lanes=iy)}if(qn.isBackwards)Ar.sibling=i.child,i.child=Ar;else{var Ko=qn.last;Ko!==null?Ko.sibling=Ar:i.child=Ar,qn.last=Ar}}if(qn.tail!==null){var Yo=qn.tail;qn.rendering=Yo,qn.tail=Yo.sibling,qn.renderingStartTime=mr(),Yo.sibling=null;var Lo=tc.current;return Qr?Lo=Z_(Lo,Ug):Lo=zm(Lo),Xd(i,Lo),Yo}return so(i),null}case st:break;case vt:case Nt:{m1(i);var Wu=i.memoizedState,Jm=Wu!==null;if(e!==null){var vv=e.memoizedState,Kc=vv!==null;Kc!==Jm&&!St&&(i.flags|=w)}return!Jm||(i.mode&lr)===Nn?so(i):Do(Zc,Bo)&&(so(i),i.subtreeFlags&(bi|ur)&&(i.flags|=w)),null}case on:return null;case yn:return null}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function OM(e,i,h){switch(C_(i),i.tag){case k:{var p=i.type;Fc(p)&&lb(i);var C=i.flags;return C&z?(i.flags=C&~z|cn,(i.mode&Lr)!==Nn&&_w(i),i):null}case O:{i.stateNode,Vm(i),b_(i),Y_();var D=i.flags;return(D&z)!==wn&&(D&cn)===wn?(i.flags=D&~z|cn,i):null}case ne:return G_(i),null;case ze:{Om(i);var L=i.memoizedState;if(L!==null&&L.dehydrated!==null){if(i.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Mm()}var $=i.flags;return $&z?(i.flags=$&~z|cn,(i.mode&Lr)!==Nn&&_w(i),i):null}case sn:return Om(i),null;case W:return Vm(i),null;case we:var Z=i.type._context;return V_(Z,i),null;case vt:case Nt:return m1(i),null;case on:return null;default:return null}}function CE(e,i,h){switch(C_(i),i.tag){case k:{var p=i.type.childContextTypes;p!=null&&lb(i);break}case O:{i.stateNode,Vm(i),b_(i),Y_();break}case ne:{G_(i);break}case W:Vm(i);break;case ze:Om(i);break;case sn:Om(i);break;case we:var C=i.type._context;V_(C,i);break;case vt:case Nt:m1(i);break}}var NE=null;NE=new Set;var ex=!1,oo=!1,BM=typeof WeakSet=="function"?WeakSet:Set,pn=null,Hm=null,Gm=null;function FM(e){yu(null,function(){throw e}),ni()}var UM=function(e,i){if(i.props=e.memoizedProps,i.state=e.memoizedState,e.mode&Lr)try{Gc(),i.componentWillUnmount()}finally{Hc(e)}else i.componentWillUnmount()};function SE(e,i){try{eh(ks,e)}catch(h){fi(e,i,h)}}function Jw(e,i,h){try{UM(e,h)}catch(p){fi(e,i,p)}}function $M(e,i,h){try{h.componentDidMount()}catch(p){fi(e,i,p)}}function EE(e,i){try{TE(e)}catch(h){fi(e,i,h)}}function Wm(e,i){var h=e.ref;if(h!==null)if(typeof h=="function"){var p;try{if(Ie&&bt&&e.mode&Lr)try{Gc(),p=h(null)}finally{Hc(e)}else p=h(null)}catch(C){fi(e,i,C)}typeof p=="function"&&x("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",jn(e))}else h.current=null}function tx(e,i,h){try{h()}catch(p){fi(e,i,p)}}var DE=!1;function qM(e,i){nA(e.containerInfo),pn=i,HM();var h=DE;return DE=!1,h}function HM(){for(;pn!==null;){var e=pn,i=e.child;(e.subtreeFlags&Te)!==wn&&i!==null?(i.return=e,pn=i):GM()}}function GM(){for(;pn!==null;){var e=pn;ei(e);try{WM(e)}catch(h){fi(e,e.return,h)}Pi();var i=e.sibling;if(i!==null){i.return=e.return,pn=i;return}pn=e.return}}function WM(e){var i=e.alternate,h=e.flags;if((h&c)!==wn){switch(ei(e),e.tag){case A:case fe:case Ye:break;case k:{if(i!==null){var p=i.memoizedProps,C=i.memoizedState,D=e.stateNode;e.type===e.elementType&&!hf&&(D.props!==e.memoizedProps&&x("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(e)||"instance"),D.state!==e.memoizedState&&x("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(e)||"instance"));var L=D.getSnapshotBeforeUpdate(e.elementType===e.type?p:rc(e.type,p),C);{var $=NE;L===void 0&&!$.has(e.type)&&($.add(e.type),x("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",jn(e)))}D.__reactInternalSnapshotBeforeUpdate=L}break}case O:{{var Z=e.stateNode;DA(Z.containerInfo)}break}case ne:case me:case W:case wt:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Pi()}}function sc(e,i,h){var p=i.updateQueue,C=p!==null?p.lastEffect:null;if(C!==null){var D=C.next,L=D;do{if((L.tag&e)===e){var $=L.destroy;L.destroy=void 0,$!==void 0&&((e&io)!==ua?oa(i):(e&ks)!==ua&&wp(i),(e&Uc)!==ua&&mv(!0),tx(i,h,$),(e&Uc)!==ua&&mv(!1),(e&io)!==ua?Lh():(e&ks)!==ua&&Ai())}L=L.next}while(L!==D)}}function eh(e,i){var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var C=p.next,D=C;do{if((D.tag&e)===e){(e&io)!==ua?sa(i):(e&ks)!==ua&&Pa(i);var L=D.create;(e&Uc)!==ua&&mv(!0),D.destroy=L(),(e&Uc)!==ua&&mv(!1),(e&io)!==ua?Eo():(e&ks)!==ua&&y0();{var $=D.destroy;if($!==void 0&&typeof $!="function"){var Z=void 0;(D.tag&ks)!==wn?Z="useLayoutEffect":(D.tag&Uc)!==wn?Z="useInsertionEffect":Z="useEffect";var re=void 0;$===null?re=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof $.then=="function"?re=`

It looks like you wrote `+Z+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+Z+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:re=" You returned: "+$,x("%s must not return anything besides a function, which is used for clean-up.%s",Z,re)}}}D=D.next}while(D!==C)}}function ZM(e,i){if((i.flags&ur)!==wn)switch(i.tag){case Ve:{var h=i.stateNode.passiveEffectDuration,p=i.memoizedProps,C=p.id,D=p.onPostCommit,L=$S(),$=i.alternate===null?"mount":"update";US()&&($="nested-update"),typeof D=="function"&&D(C,$,h,L);var Z=i.return;e:for(;Z!==null;){switch(Z.tag){case O:var re=Z.stateNode;re.passiveEffectDuration+=h;break e;case Ve:var ue=Z.stateNode;ue.passiveEffectDuration+=h;break e}Z=Z.return}break}}}function KM(e,i,h,p){if((h.flags&ye)!==wn)switch(h.tag){case A:case fe:case Ye:{if(!oo)if(h.mode&Lr)try{Gc(),eh(ks|js,h)}finally{Hc(h)}else eh(ks|js,h);break}case k:{var C=h.stateNode;if(h.flags&ur&&!oo)if(i===null)if(h.type===h.elementType&&!hf&&(C.props!==h.memoizedProps&&x("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),C.state!==h.memoizedState&&x("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),h.mode&Lr)try{Gc(),C.componentDidMount()}finally{Hc(h)}else C.componentDidMount();else{var D=h.elementType===h.type?i.memoizedProps:rc(h.type,i.memoizedProps),L=i.memoizedState;if(h.type===h.elementType&&!hf&&(C.props!==h.memoizedProps&&x("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),C.state!==h.memoizedState&&x("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),h.mode&Lr)try{Gc(),C.componentDidUpdate(D,L,C.__reactInternalSnapshotBeforeUpdate)}finally{Hc(h)}else C.componentDidUpdate(D,L,C.__reactInternalSnapshotBeforeUpdate)}var $=h.updateQueue;$!==null&&(h.type===h.elementType&&!hf&&(C.props!==h.memoizedProps&&x("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",jn(h)||"instance"),C.state!==h.memoizedState&&x("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",jn(h)||"instance")),fS(h,$,C));break}case O:{var Z=h.updateQueue;if(Z!==null){var re=null;if(h.child!==null)switch(h.child.tag){case ne:re=h.child.stateNode;break;case k:re=h.child.stateNode;break}fS(h,Z,re)}break}case ne:{var ue=h.stateNode;if(i===null&&h.flags&ur){var Re=h.type,Me=h.memoizedProps;fA(ue,Re,Me)}break}case me:break;case W:break;case Ve:{{var We=h.memoizedProps,Ze=We.onCommit,rt=We.onRender,Gt=h.stateNode.effectDuration,En=$S(),_n=i===null?"mount":"update";US()&&(_n="nested-update"),typeof rt=="function"&&rt(h.memoizedProps.id,_n,h.actualDuration,h.treeBaseDuration,h.actualStartTime,En);{typeof Ze=="function"&&Ze(h.memoizedProps.id,_n,Gt,En),GR(h);var yr=h.return;e:for(;yr!==null;){switch(yr.tag){case O:var dr=yr.stateNode;dr.effectDuration+=Gt;break e;case Ve:var Ue=yr.stateNode;Ue.effectDuration+=Gt;break e}yr=yr.return}}}break}case ze:{rR(e,h);break}case sn:case wt:case st:case vt:case Nt:case yn:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}oo||h.flags&r&&TE(h)}function YM(e){switch(e.tag){case A:case fe:case Ye:{if(e.mode&Lr)try{Gc(),SE(e,e.return)}finally{Hc(e)}else SE(e,e.return);break}case k:{var i=e.stateNode;typeof i.componentDidMount=="function"&&$M(e,e.return,i),EE(e,e.return);break}case ne:{EE(e,e.return);break}}}function XM(e,i){for(var h=null,p=e;;){if(p.tag===ne){if(h===null){h=p;try{var C=p.stateNode;i?CA(C):SA(p.stateNode,p.memoizedProps)}catch(L){fi(e,e.return,L)}}}else if(p.tag===me){if(h===null)try{var D=p.stateNode;i?NA(D):EA(D,p.memoizedProps)}catch(L){fi(e,e.return,L)}}else if(!((p.tag===vt||p.tag===Nt)&&p.memoizedState!==null&&p!==e)){if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}function TE(e){var i=e.ref;if(i!==null){var h=e.stateNode,p;switch(e.tag){case ne:p=h;break;default:p=h}if(typeof i=="function"){var C;if(e.mode&Lr)try{Gc(),C=i(p)}finally{Hc(e)}else C=i(p);typeof C=="function"&&x("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",jn(e))}else i.hasOwnProperty("current")||x("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",jn(e)),i.current=p}}function JM(e){var i=e.alternate;i!==null&&(i.return=null),e.return=null}function PE(e){var i=e.alternate;i!==null&&(e.alternate=null,PE(i));{if(e.child=null,e.deletions=null,e.sibling=null,e.tag===ne){var h=e.stateNode;h!==null&&i2(h)}e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}}function QM(e){for(var i=e.return;i!==null;){if(jE(i))return i;i=i.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function jE(e){return e.tag===ne||e.tag===O||e.tag===W}function kE(e){var i=e;e:for(;;){for(;i.sibling===null;){if(i.return===null||jE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==ne&&i.tag!==me&&i.tag!==gt;){if(i.flags&bi||i.child===null||i.tag===W)continue e;i.child.return=i,i=i.child}if(!(i.flags&bi))return i.stateNode}}function eR(e){var i=QM(e);switch(i.tag){case ne:{var h=i.stateNode;i.flags&Il&&(MN(h),i.flags&=~Il);var p=kE(e);e1(e,p,h);break}case O:case W:{var C=i.stateNode.containerInfo,D=kE(e);Qw(e,D,C);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function Qw(e,i,h){var p=e.tag,C=p===ne||p===me;if(C){var D=e.stateNode;i?bA(h,D,i):vA(h,D)}else if(p!==W){var L=e.child;if(L!==null){Qw(L,i,h);for(var $=L.sibling;$!==null;)Qw($,i,h),$=$.sibling}}}function e1(e,i,h){var p=e.tag,C=p===ne||p===me;if(C){var D=e.stateNode;i?yA(h,D,i):gA(h,D)}else if(p!==W){var L=e.child;if(L!==null){e1(L,i,h);for(var $=L.sibling;$!==null;)e1($,i,h),$=$.sibling}}}var ao=null,oc=!1;function tR(e,i,h){{var p=i;e:for(;p!==null;){switch(p.tag){case ne:{ao=p.stateNode,oc=!1;break e}case O:{ao=p.stateNode.containerInfo,oc=!0;break e}case W:{ao=p.stateNode.containerInfo,oc=!0;break e}}p=p.return}if(ao===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");AE(e,i,h),ao=null,oc=!1}JM(h)}function th(e,i,h){for(var p=h.child;p!==null;)AE(e,i,p),p=p.sibling}function AE(e,i,h){switch(zl(h),h.tag){case ne:oo||Wm(h,i);case me:{{var p=ao,C=oc;ao=null,th(e,i,h),ao=p,oc=C,ao!==null&&(oc?_A(ao,h.stateNode):xA(ao,h.stateNode))}return}case gt:{ao!==null&&(oc?wA(ao,h.stateNode):d_(ao,h.stateNode));return}case W:{{var D=ao,L=oc;ao=h.stateNode.containerInfo,oc=!0,th(e,i,h),ao=D,oc=L}return}case A:case fe:case Je:case Ye:{if(!oo){var $=h.updateQueue;if($!==null){var Z=$.lastEffect;if(Z!==null){var re=Z.next,ue=re;do{var Re=ue,Me=Re.destroy,We=Re.tag;Me!==void 0&&((We&Uc)!==ua?tx(h,i,Me):(We&ks)!==ua&&(wp(h),h.mode&Lr?(Gc(),tx(h,i,Me),Hc(h)):tx(h,i,Me),Ai())),ue=ue.next}while(ue!==re)}}}th(e,i,h);return}case k:{if(!oo){Wm(h,i);var Ze=h.stateNode;typeof Ze.componentWillUnmount=="function"&&Jw(h,i,Ze)}th(e,i,h);return}case st:{th(e,i,h);return}case vt:{if(h.mode&lr){var rt=oo;oo=rt||h.memoizedState!==null,th(e,i,h),oo=rt}else th(e,i,h);break}default:{th(e,i,h);return}}}function nR(e){e.memoizedState}function rR(e,i){var h=i.memoizedState;if(h===null){var p=i.alternate;if(p!==null){var C=p.memoizedState;if(C!==null){var D=C.dehydrated;D!==null&&FA(D)}}}}function ME(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var h=e.stateNode;h===null&&(h=e.stateNode=new BM),i.forEach(function(p){var C=QR.bind(null,e,p);if(!h.has(p)){if(h.add(p),ls)if(Hm!==null&&Gm!==null)fv(Gm,Hm);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");p.then(C,C)}})}}function iR(e,i,h){Hm=h,Gm=e,ei(i),RE(i,e),ei(i),Hm=null,Gm=null}function ac(e,i,h){var p=i.deletions;if(p!==null)for(var C=0;C<p.length;C++){var D=p[C];try{tR(e,i,D)}catch(Z){fi(D,i,Z)}}var L=nu();if(i.subtreeFlags&Oe)for(var $=i.child;$!==null;)ei($),RE($,e),$=$.sibling;ei(L)}function RE(e,i,h){var p=e.alternate,C=e.flags;switch(e.tag){case A:case fe:case Je:case Ye:{if(ac(i,e),Wc(e),C&ur){try{sc(Uc|js,e,e.return),eh(Uc|js,e)}catch(Mn){fi(e,e.return,Mn)}if(e.mode&Lr){try{Gc(),sc(ks|js,e,e.return)}catch(Mn){fi(e,e.return,Mn)}Hc(e)}else try{sc(ks|js,e,e.return)}catch(Mn){fi(e,e.return,Mn)}}return}case k:{ac(i,e),Wc(e),C&r&&p!==null&&Wm(p,p.return);return}case ne:{ac(i,e),Wc(e),C&r&&p!==null&&Wm(p,p.return);{if(e.flags&Il){var D=e.stateNode;try{MN(D)}catch(Mn){fi(e,e.return,Mn)}}if(C&ur){var L=e.stateNode;if(L!=null){var $=e.memoizedProps,Z=p!==null?p.memoizedProps:$,re=e.type,ue=e.updateQueue;if(e.updateQueue=null,ue!==null)try{mA(L,ue,re,Z,$,e)}catch(Mn){fi(e,e.return,Mn)}}}}return}case me:{if(ac(i,e),Wc(e),C&ur){if(e.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var Re=e.stateNode,Me=e.memoizedProps,We=p!==null?p.memoizedProps:Me;try{pA(Re,We,Me)}catch(Mn){fi(e,e.return,Mn)}}return}case O:{if(ac(i,e),Wc(e),C&ur&&p!==null){var Ze=p.memoizedState;if(Ze.isDehydrated)try{BA(i.containerInfo)}catch(Mn){fi(e,e.return,Mn)}}return}case W:{ac(i,e),Wc(e);return}case ze:{ac(i,e),Wc(e);var rt=e.child;if(rt.flags&w){var Gt=rt.stateNode,En=rt.memoizedState,_n=En!==null;if(Gt.isHidden=_n,_n){var yr=rt.alternate!==null&&rt.alternate.memoizedState!==null;yr||zR()}}if(C&ur){try{nR(e)}catch(Mn){fi(e,e.return,Mn)}ME(e)}return}case vt:{var dr=p!==null&&p.memoizedState!==null;if(e.mode&lr){var Ue=oo;oo=Ue||dr,ac(i,e),oo=Ue}else ac(i,e);if(Wc(e),C&w){var it=e.stateNode,$e=e.memoizedState,Ct=$e!==null,nn=e;if(it.isHidden=Ct,Ct&&!dr&&(nn.mode&lr)!==Nn){pn=nn;for(var Yt=nn.child;Yt!==null;)pn=Yt,oR(Yt),Yt=Yt.sibling}XM(nn,Ct)}return}case sn:{ac(i,e),Wc(e),C&ur&&ME(e);return}case st:return;default:{ac(i,e),Wc(e);return}}}function Wc(e){var i=e.flags;if(i&bi){try{eR(e)}catch(h){fi(e,e.return,h)}e.flags&=~bi}i&v&&(e.flags&=~v)}function sR(e,i,h){Hm=h,Gm=i,pn=e,LE(e,i,h),Hm=null,Gm=null}function LE(e,i,h){for(var p=(e.mode&lr)!==Nn;pn!==null;){var C=pn,D=C.child;if(C.tag===vt&&p){var L=C.memoizedState!==null,$=L||ex;if($){t1(e,i,h);continue}else{var Z=C.alternate,re=Z!==null&&Z.memoizedState!==null,ue=re||oo,Re=ex,Me=oo;ex=$,oo=ue,oo&&!Me&&(pn=C,aR(C));for(var We=D;We!==null;)pn=We,LE(We,i,h),We=We.sibling;pn=C,ex=Re,oo=Me,t1(e,i,h);continue}}(C.subtreeFlags&ye)!==wn&&D!==null?(D.return=C,pn=D):t1(e,i,h)}}function t1(e,i,h){for(;pn!==null;){var p=pn;if((p.flags&ye)!==wn){var C=p.alternate;ei(p);try{KM(i,C,p,h)}catch(L){fi(p,p.return,L)}Pi()}if(p===e){pn=null;return}var D=p.sibling;if(D!==null){D.return=p.return,pn=D;return}pn=p.return}}function oR(e){for(;pn!==null;){var i=pn,h=i.child;switch(i.tag){case A:case fe:case Je:case Ye:{if(i.mode&Lr)try{Gc(),sc(ks,i,i.return)}finally{Hc(i)}else sc(ks,i,i.return);break}case k:{Wm(i,i.return);var p=i.stateNode;typeof p.componentWillUnmount=="function"&&Jw(i,i.return,p);break}case ne:{Wm(i,i.return);break}case vt:{var C=i.memoizedState!==null;if(C){IE(e);continue}break}}h!==null?(h.return=i,pn=h):IE(e)}}function IE(e){for(;pn!==null;){var i=pn;if(i===e){pn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,pn=h;return}pn=i.return}}function aR(e){for(;pn!==null;){var i=pn,h=i.child;if(i.tag===vt){var p=i.memoizedState!==null;if(p){VE(e);continue}}h!==null?(h.return=i,pn=h):VE(e)}}function VE(e){for(;pn!==null;){var i=pn;ei(i);try{YM(i)}catch(p){fi(i,i.return,p)}if(Pi(),i===e){pn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,pn=h;return}pn=i.return}}function lR(e,i,h,p){pn=i,cR(i,e,h,p)}function cR(e,i,h,p){for(;pn!==null;){var C=pn,D=C.child;(C.subtreeFlags&Pe)!==wn&&D!==null?(D.return=C,pn=D):uR(e,i,h,p)}}function uR(e,i,h,p){for(;pn!==null;){var C=pn;if((C.flags&m)!==wn){ei(C);try{dR(i,C,h,p)}catch(L){fi(C,C.return,L)}Pi()}if(C===e){pn=null;return}var D=C.sibling;if(D!==null){D.return=C.return,pn=D;return}pn=C.return}}function dR(e,i,h,p){switch(i.tag){case A:case fe:case Ye:{if(i.mode&Lr){xw();try{eh(io|js,i)}finally{bw(i)}}else eh(io|js,i);break}}}function hR(e){pn=e,fR()}function fR(){for(;pn!==null;){var e=pn,i=e.child;if((pn.flags&Co)!==wn){var h=e.deletions;if(h!==null){for(var p=0;p<h.length;p++){var C=h[p];pn=C,gR(C,e)}{var D=e.alternate;if(D!==null){var L=D.child;if(L!==null){D.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}}pn=e}}(e.subtreeFlags&Pe)!==wn&&i!==null?(i.return=e,pn=i):mR()}}function mR(){for(;pn!==null;){var e=pn;(e.flags&m)!==wn&&(ei(e),pR(e),Pi());var i=e.sibling;if(i!==null){i.return=e.return,pn=i;return}pn=e.return}}function pR(e){switch(e.tag){case A:case fe:case Ye:{e.mode&Lr?(xw(),sc(io|js,e,e.return),bw(e)):sc(io|js,e,e.return);break}}}function gR(e,i){for(;pn!==null;){var h=pn;ei(h),yR(h,i),Pi();var p=h.child;p!==null?(p.return=h,pn=p):vR(e)}}function vR(e){for(;pn!==null;){var i=pn,h=i.sibling,p=i.return;if(PE(i),i===e){pn=null;return}if(h!==null){h.return=p,pn=h;return}pn=p}}function yR(e,i){switch(e.tag){case A:case fe:case Ye:{e.mode&Lr?(xw(),sc(io,e,i),bw(e)):sc(io,e,i);break}}}function bR(e){switch(e.tag){case A:case fe:case Ye:{try{eh(ks|js,e)}catch(h){fi(e,e.return,h)}break}case k:{var i=e.stateNode;try{i.componentDidMount()}catch(h){fi(e,e.return,h)}break}}}function xR(e){switch(e.tag){case A:case fe:case Ye:{try{eh(io|js,e)}catch(i){fi(e,e.return,i)}break}}}function _R(e){switch(e.tag){case A:case fe:case Ye:{try{sc(ks|js,e,e.return)}catch(h){fi(e,e.return,h)}break}case k:{var i=e.stateNode;typeof i.componentWillUnmount=="function"&&Jw(e,e.return,i);break}}}function wR(e){switch(e.tag){case A:case fe:case Ye:try{sc(io|js,e,e.return)}catch(i){fi(e,e.return,i)}}}if(typeof Symbol=="function"&&Symbol.for){var nv=Symbol.for;nv("selector.component"),nv("selector.has_pseudo_class"),nv("selector.role"),nv("selector.test_id"),nv("selector.text")}var CR=[];function NR(){CR.forEach(function(e){return e()})}var SR=o.ReactCurrentActQueue;function ER(e){{var i=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,h=typeof jest<"u";return h&&i!==!1}}function zE(){{var e=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!e&&SR.current!==null&&x("The current testing environment is not configured to support act(...)"),e}}var DR=Math.ceil,n1=o.ReactCurrentDispatcher,r1=o.ReactCurrentOwner,lo=o.ReactCurrentBatchConfig,lc=o.ReactCurrentActQueue,Rs=0,OE=1,co=2,fl=4,$u=0,rv=1,ff=2,nx=3,iv=4,BE=5,i1=6,vr=Rs,Wo=null,Gi=null,Ls=yt,Zc=yt,s1=Hd(yt),Is=$u,sv=null,rx=yt,ov=yt,ix=yt,av=null,da=null,o1=0,FE=500,UE=1/0,TR=500,qu=null;function lv(){UE=mr()+TR}function $E(){return UE}var sx=!1,a1=null,Zm=null,mf=!1,nh=null,cv=yt,l1=[],c1=null,PR=50,uv=0,u1=null,d1=!1,ox=!1,jR=50,Km=0,ax=null,dv=ui,lx=yt,qE=!1;function cx(){return Wo}function Zo(){return(vr&(co|fl))!==Rs?mr():(dv!==ui||(dv=mr()),dv)}function rh(e){var i=e.mode;if((i&lr)===Nn)return Dn;if((vr&co)!==Rs&&Ls!==yt)return Tu(Ls);var h=S2()!==N2;if(h){if(lo.transition!==null){var p=lo.transition;p._updatedFibers||(p._updatedFibers=new Set),p._updatedFibers.add(e)}return lx===Sr&&(lx=uy()),lx}var C=Uo();if(C!==Sr)return C;var D=cA();return D}function kR(e){var i=e.mode;return(i&lr)===Nn?Dn:zp()}function Vs(e,i,h,p){tL(),qE&&x("useInsertionEffect must not schedule updates."),d1&&(ox=!0),Uh(e,h,p),(vr&co)!==yt&&e===Wo?iL(i):(ls&&Bp(e,i,h),sL(i),e===Wo&&((vr&co)===Rs&&(ov=Jn(ov,h)),Is===iv&&ih(e,Ls)),ha(e,p),h===Dn&&vr===Rs&&(i.mode&lr)===Nn&&!lc.isBatchingLegacy&&(lv(),qN()))}function AR(e,i,h){var p=e.current;p.lanes=i,Uh(e,i,h),ha(e,h)}function MR(e){return(vr&co)!==Rs}function ha(e,i){var h=e.callbackNode;rm(e,i);var p=Su(e,e===Wo?Ls:yt);if(p===yt){h!==null&&oD(h),e.callbackNode=null,e.callbackPriority=Sr;return}var C=Du(p),D=e.callbackPriority;if(D===C&&!(lc.current!==null&&h!==y1)){h==null&&D!==Dn&&x("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}h!=null&&oD(h);var L;if(C===Dn)e.tag===Gd?(lc.isBatchingLegacy!==null&&(lc.didScheduleLegacyUpdate=!0),a2(WE.bind(null,e))):$N(WE.bind(null,e)),lc.current!==null?lc.current.push(Wd):dA(function(){(vr&(co|fl))===Rs&&Wd()}),L=null;else{var $;switch(Dd(p)){case Fo:$=li;break;case $l:$=Es;break;case ql:$=_r;break;case Ed:$=No;break;default:$=_r;break}L=b1($,HE.bind(null,e))}e.callbackPriority=C,e.callbackNode=L}function HE(e,i){if(X2(),dv=ui,lx=yt,(vr&(co|fl))!==Rs)throw new Error("Should not already be working.");var h=e.callbackNode,p=Gu();if(p&&e.callbackNode!==h)return null;var C=Su(e,e===Wo?Ls:yt);if(C===yt)return null;var D=!om(e,C)&&!cy(e,C)&&!i,L=D?$R(e,C):dx(e,C);if(L!==$u){if(L===ff){var $=im(e);$!==yt&&(C=$,L=h1(e,$))}if(L===rv){var Z=sv;throw pf(e,yt),ih(e,C),ha(e,mr()),Z}if(L===i1)ih(e,C);else{var re=!om(e,C),ue=e.current.alternate;if(re&&!LR(ue)){if(L=dx(e,C),L===ff){var Re=im(e);Re!==yt&&(C=Re,L=h1(e,Re))}if(L===rv){var Me=sv;throw pf(e,yt),ih(e,C),ha(e,mr()),Me}}e.finishedWork=ue,e.finishedLanes=C,RR(e,L,C)}}return ha(e,mr()),e.callbackNode===h?HE.bind(null,e):null}function h1(e,i){var h=av;if($h(e)){var p=pf(e,i);p.flags|=b,e2(e.containerInfo)}var C=dx(e,i);if(C!==ff){var D=da;da=h,D!==null&&GE(D)}return C}function GE(e){da===null?da=e:da.push.apply(da,e)}function RR(e,i,h){switch(i){case $u:case rv:throw new Error("Root did not complete. This is a bug in React.");case ff:{gf(e,da,qu);break}case nx:{if(ih(e,h),sm(h)&&!aD()){var p=o1+FE-mr();if(p>10){var C=Su(e,yt);if(C!==yt)break;var D=e.suspendedLanes;if(!Pu(D,h)){Zo(),ju(e,D);break}e.timeoutHandle=c_(gf.bind(null,e,da,qu),p);break}}gf(e,da,qu);break}case iv:{if(ih(e,h),ly(h))break;if(!aD()){var L=oy(e,h),$=L,Z=mr()-$,re=eL(Z)-Z;if(re>10){e.timeoutHandle=c_(gf.bind(null,e,da,qu),re);break}}gf(e,da,qu);break}case BE:{gf(e,da,qu);break}default:throw new Error("Unknown root exit status.")}}function LR(e){for(var i=e;;){if(i.flags&P){var h=i.updateQueue;if(h!==null){var p=h.stores;if(p!==null)for(var C=0;C<p.length;C++){var D=p[C],L=D.getSnapshot,$=D.value;try{if(!Po(L(),$))return!1}catch{return!1}}}}var Z=i.child;if(i.subtreeFlags&P&&Z!==null){Z.return=i,i=Z;continue}if(i===e)return!0;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}return!0}function ih(e,i){i=am(i,ix),i=am(i,ov),hy(e,i)}function WE(e){if(J2(),(vr&(co|fl))!==Rs)throw new Error("Should not already be working.");Gu();var i=Su(e,yt);if(!Do(i,Dn))return ha(e,mr()),null;var h=dx(e,i);if(e.tag!==Gd&&h===ff){var p=im(e);p!==yt&&(i=p,h=h1(e,p))}if(h===rv){var C=sv;throw pf(e,yt),ih(e,i),ha(e,mr()),C}if(h===i1)throw new Error("Root did not complete. This is a bug in React.");var D=e.current.alternate;return e.finishedWork=D,e.finishedLanes=i,gf(e,da,qu),ha(e,mr()),null}function IR(e,i){i!==yt&&(Op(e,Jn(i,Dn)),ha(e,mr()),(vr&(co|fl))===Rs&&(lv(),Wd()))}function f1(e,i){var h=vr;vr|=OE;try{return e(i)}finally{vr=h,vr===Rs&&!lc.isBatchingLegacy&&(lv(),qN())}}function VR(e,i,h,p,C){var D=Uo(),L=lo.transition;try{return lo.transition=null,gs(Fo),e(i,h,p,C)}finally{gs(D),lo.transition=L,vr===Rs&&lv()}}function Hu(e){nh!==null&&nh.tag===Gd&&(vr&(co|fl))===Rs&&Gu();var i=vr;vr|=OE;var h=lo.transition,p=Uo();try{return lo.transition=null,gs(Fo),e?e():void 0}finally{gs(p),lo.transition=h,vr=i,(vr&(co|fl))===Rs&&Wd()}}function ZE(){return(vr&(co|fl))!==Rs}function ux(e,i){Ao(s1,Zc,e),Zc=Jn(Zc,i)}function m1(e){Zc=s1.current,ko(s1,e)}function pf(e,i){e.finishedWork=null,e.finishedLanes=yt;var h=e.timeoutHandle;if(h!==u_&&(e.timeoutHandle=u_,uA(h)),Gi!==null)for(var p=Gi.return;p!==null;){var C=p.alternate;CE(C,p),p=p.return}Wo=e;var D=vf(e.current,null);return Gi=D,Ls=Zc=i,Is=$u,sv=null,rx=yt,ov=yt,ix=yt,av=null,da=null,A2(),ec.discardPendingWarnings(),D}function KE(e,i){do{var h=Gi;try{if(xb(),bS(),Pi(),r1.current=null,h===null||h.return===null){Is=rv,sv=i,Gi=null;return}if(Ie&&h.mode&Lr&&Kb(h,!0),ct)if(So(),i!==null&&typeof i=="object"&&typeof i.then=="function"){var p=i;ny(h,p,Ls)}else Cp(h,i,Ls);aM(e,h.return,h,i,Ls),QE(h)}catch(C){i=C,Gi===h&&h!==null?(h=h.return,Gi=h):h=Gi;continue}return}while(!0)}function YE(){var e=n1.current;return n1.current=qb,e===null?qb:e}function XE(e){n1.current=e}function zR(){o1=mr()}function hv(e){rx=Jn(e,rx)}function OR(){Is===$u&&(Is=nx)}function p1(){(Is===$u||Is===nx||Is===ff)&&(Is=iv),Wo!==null&&(Eu(rx)||Eu(ov))&&ih(Wo,Ls)}function BR(e){Is!==iv&&(Is=ff),av===null?av=[e]:av.push(e)}function FR(){return Is===$u}function dx(e,i){var h=vr;vr|=co;var p=YE();if(Wo!==e||Ls!==i){if(ls){var C=e.memoizedUpdaters;C.size>0&&(fv(e,Ls),C.clear()),Fp(e,i)}qu=fy(),pf(e,i)}Sp(i);do try{UR();break}catch(D){KE(e,D)}while(!0);if(xb(),vr=h,XE(p),Gi!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Ep(),Wo=null,Ls=yt,Is}function UR(){for(;Gi!==null;)JE(Gi)}function $R(e,i){var h=vr;vr|=co;var p=YE();if(Wo!==e||Ls!==i){if(ls){var C=e.memoizedUpdaters;C.size>0&&(fv(e,Ls),C.clear()),Fp(e,i)}qu=fy(),lv(),pf(e,i)}Sp(i);do try{qR();break}catch(D){KE(e,D)}while(!0);return xb(),XE(p),vr=h,Gi!==null?(b0(),$u):(Ep(),Wo=null,Ls=yt,Is)}function qR(){for(;Gi!==null&&!xi();)JE(Gi)}function JE(e){var i=e.alternate;ei(e);var h;(e.mode&Lr)!==Nn?(yw(e),h=g1(i,e,Zc),Kb(e,!0)):h=g1(i,e,Zc),Pi(),e.memoizedProps=e.pendingProps,h===null?QE(e):Gi=h,r1.current=null}function QE(e){var i=e;do{var h=i.alternate,p=i.return;if((i.flags&R)===wn){ei(i);var C=void 0;if((i.mode&Lr)===Nn?C=wE(h,i,Zc):(yw(i),C=wE(h,i,Zc),Kb(i,!1)),Pi(),C!==null){Gi=C;return}}else{var D=OM(h,i);if(D!==null){D.flags&=j,Gi=D;return}if((i.mode&Lr)!==Nn){Kb(i,!1);for(var L=i.actualDuration,$=i.child;$!==null;)L+=$.actualDuration,$=$.sibling;i.actualDuration=L}if(p!==null)p.flags|=R,p.subtreeFlags=wn,p.deletions=null;else{Is=i1,Gi=null;return}}var Z=i.sibling;if(Z!==null){Gi=Z;return}i=p,Gi=i}while(i!==null);Is===$u&&(Is=BE)}function gf(e,i,h){var p=Uo(),C=lo.transition;try{lo.transition=null,gs(Fo),HR(e,i,h,p)}finally{lo.transition=C,gs(p)}return null}function HR(e,i,h,p){do Gu();while(nh!==null);if(nL(),(vr&(co|fl))!==Rs)throw new Error("Should not already be working.");var C=e.finishedWork,D=e.finishedLanes;if(_p(D),C===null)return xd(),null;if(D===yt&&x("root.finishedLanes should not be empty during a commit. This is a bug in React."),e.finishedWork=null,e.finishedLanes=yt,C===e.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackPriority=Sr;var L=Jn(C.lanes,C.childLanes);w0(e,L),e===Wo&&(Wo=null,Gi=null,Ls=yt),((C.subtreeFlags&Pe)!==wn||(C.flags&Pe)!==wn)&&(mf||(mf=!0,c1=h,b1(_r,function(){return Gu(),null})));var $=(C.subtreeFlags&(Te|Oe|ye|Pe))!==wn,Z=(C.flags&(Te|Oe|ye|Pe))!==wn;if($||Z){var re=lo.transition;lo.transition=null;var ue=Uo();gs(Fo);var Re=vr;vr|=fl,r1.current=null,qM(e,C),qS(),iR(e,C,D),rA(e.containerInfo),e.current=C,xu(D),sR(C,e,D),_u(),qr(),vr=Re,gs(ue),lo.transition=re}else e.current=C,qS();var Me=mf;if(mf?(mf=!1,nh=e,cv=D):(Km=0,ax=null),L=e.pendingLanes,L===yt&&(Zm=null),Me||rD(e.current,!1),Hs(C.stateNode,p),ls&&e.memoizedUpdaters.clear(),NR(),ha(e,mr()),i!==null)for(var We=e.onRecoverableError,Ze=0;Ze<i.length;Ze++){var rt=i[Ze],Gt=rt.stack,En=rt.digest;We(rt.value,{componentStack:Gt,digest:En})}if(sx){sx=!1;var _n=a1;throw a1=null,_n}return Do(cv,Dn)&&e.tag!==Gd&&Gu(),L=e.pendingLanes,Do(L,Dn)?(Y2(),e===u1?uv++:(uv=0,u1=e)):uv=0,Wd(),xd(),null}function Gu(){if(nh!==null){var e=Dd(cv),i=S0(ql,e),h=lo.transition,p=Uo();try{return lo.transition=null,gs(i),WR()}finally{gs(p),lo.transition=h}}return!1}function GR(e){l1.push(e),mf||(mf=!0,b1(_r,function(){return Gu(),null}))}function WR(){if(nh===null)return!1;var e=c1;c1=null;var i=nh,h=cv;if(nh=null,cv=yt,(vr&(co|fl))!==Rs)throw new Error("Cannot flush passive effects while already rendering.");d1=!0,ox=!1,Hf(h);var p=vr;vr|=fl,hR(i.current),lR(i,i.current,h,e);{var C=l1;l1=[];for(var D=0;D<C.length;D++){var L=C[D];ZM(i,L)}}Np(),rD(i.current,!0),vr=p,Wd(),ox?i===ax?Km++:(Km=0,ax=i):Km=0,d1=!1,ox=!1,wi(i);{var $=i.current.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}return!0}function eD(e){return Zm!==null&&Zm.has(e)}function ZR(e){Zm===null?Zm=new Set([e]):Zm.add(e)}function KR(e){sx||(sx=!0,a1=e)}var YR=KR;function tD(e,i,h){var p=df(h,i),C=JS(e,p,Dn),D=Kd(e,C,Dn),L=Zo();D!==null&&(Uh(D,Dn,L),ha(D,L))}function fi(e,i,h){if(FM(h),mv(!1),e.tag===O){tD(e,e,h);return}var p=null;for(p=i;p!==null;){if(p.tag===O){tD(p,e,h);return}else if(p.tag===k){var C=p.type,D=p.stateNode;if(typeof C.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&!eD(D)){var L=df(h,e),$=Iw(p,L,Dn),Z=Kd(p,$,Dn),re=Zo();Z!==null&&(Uh(Z,Dn,re),ha(Z,re));return}}p=p.return}x(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,h)}function XR(e,i,h){var p=e.pingCache;p!==null&&p.delete(i);var C=Zo();ju(e,h),oL(e),Wo===e&&Pu(Ls,h)&&(Is===iv||Is===nx&&sm(Ls)&&mr()-o1<FE?pf(e,yt):ix=Jn(ix,h)),ha(e,C)}function nD(e,i){i===Sr&&(i=kR(e));var h=Zo(),p=ca(e,i);p!==null&&(Uh(p,i,h),ha(p,h))}function JR(e){var i=e.memoizedState,h=Sr;i!==null&&(h=i.retryLane),nD(e,h)}function QR(e,i){var h=Sr,p;switch(e.tag){case ze:p=e.stateNode;var C=e.memoizedState;C!==null&&(h=C.retryLane);break;case sn:p=e.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}p!==null&&p.delete(i),nD(e,h)}function eL(e){return e<120?120:e<480?480:e<1080?1080:e<1920?1920:e<3e3?3e3:e<4320?4320:DR(e/1960)*1960}function tL(){if(uv>PR)throw uv=0,u1=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Km>jR&&(Km=0,ax=null,x("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function nL(){ec.flushLegacyContextWarning(),ec.flushPendingUnsafeLifecycleWarnings()}function rD(e,i){ei(e),hx(e,pe,_R),i&&hx(e,oe,wR),hx(e,pe,bR),i&&hx(e,oe,xR),Pi()}function hx(e,i,h){for(var p=e,C=null;p!==null;){var D=p.subtreeFlags&i;p!==C&&p.child!==null&&D!==wn?p=p.child:((p.flags&i)!==wn&&h(p),p.sibling!==null?p=p.sibling:p=C=p.return)}}var fx=null;function iD(e){{if((vr&co)!==Rs||!(e.mode&lr))return;var i=e.tag;if(i!==B&&i!==O&&i!==k&&i!==A&&i!==fe&&i!==Je&&i!==Ye)return;var h=jn(e)||"ReactComponent";if(fx!==null){if(fx.has(h))return;fx.add(h)}else fx=new Set([h]);var p=fs;try{ei(e),x("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{p?ei(e):Pi()}}}var g1;{var rL=null;g1=function(e,i,h){var p=hD(rL,i);try{return vE(e,i,h)}catch(D){if(p2()||D!==null&&typeof D=="object"&&typeof D.then=="function")throw D;if(xb(),bS(),CE(e,i),hD(i,p),i.mode&Lr&&yw(i),yu(null,vE,null,e,i,h),Ll()){var C=ni();typeof C=="object"&&C!==null&&C._suppressLogging&&typeof D=="object"&&D!==null&&!D._suppressLogging&&(D._suppressLogging=!0)}throw D}}}var sD=!1,v1;v1=new Set;function iL(e){if(Nl&&!W2())switch(e.tag){case A:case fe:case Ye:{var i=Gi&&jn(Gi)||"Unknown",h=i;if(!v1.has(h)){v1.add(h);var p=jn(e)||"Unknown";x("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",p,i,i)}break}case k:{sD||(x("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),sD=!0);break}}}function fv(e,i){if(ls){var h=e.memoizedUpdaters;h.forEach(function(p){Bp(e,p,i)})}}var y1={};function b1(e,i){{var h=lc.current;return h!==null?(h.push(i),y1):Rn(e,i)}}function oD(e){if(e!==y1)return Xn(e)}function aD(){return lc.current!==null}function sL(e){{if(e.mode&lr){if(!zE())return}else if(!ER()||vr!==Rs||e.tag!==A&&e.tag!==fe&&e.tag!==Ye)return;if(lc.current===null){var i=fs;try{ei(e),x(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,jn(e))}finally{i?ei(e):Pi()}}}}function oL(e){e.tag!==Gd&&zE()&&lc.current===null&&x(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function mv(e){qE=e}var ml=null,Ym=null,aL=function(e){ml=e};function Xm(e){{if(ml===null)return e;var i=ml(e);return i===void 0?e:i.current}}function x1(e){return Xm(e)}function _1(e){{if(ml===null)return e;var i=ml(e);if(i===void 0){if(e!=null&&typeof e.render=="function"){var h=Xm(e.render);if(e.render!==h){var p={$$typeof:ht,render:h};return e.displayName!==void 0&&(p.displayName=e.displayName),p}}return e}return i.current}}function lD(e,i){{if(ml===null)return!1;var h=e.elementType,p=i.type,C=!1,D=typeof p=="object"&&p!==null?p.$$typeof:null;switch(e.tag){case k:{typeof p=="function"&&(C=!0);break}case A:{(typeof p=="function"||D===Lt)&&(C=!0);break}case fe:{(D===ht||D===Lt)&&(C=!0);break}case Je:case Ye:{(D===Tt||D===Lt)&&(C=!0);break}default:return!1}if(C){var L=ml(h);if(L!==void 0&&L===ml(p))return!0}return!1}}function cD(e){{if(ml===null||typeof WeakSet!="function")return;Ym===null&&(Ym=new WeakSet),Ym.add(e)}}var lL=function(e,i){{if(ml===null)return;var h=i.staleFamilies,p=i.updatedFamilies;Gu(),Hu(function(){w1(e.current,p,h)})}},cL=function(e,i){{if(e.context!==La)return;Gu(),Hu(function(){pv(i,e,null,null)})}};function w1(e,i,h){{var p=e.alternate,C=e.child,D=e.sibling,L=e.tag,$=e.type,Z=null;switch(L){case A:case Ye:case k:Z=$;break;case fe:Z=$.render;break}if(ml===null)throw new Error("Expected resolveFamily to be set during hot reload.");var re=!1,ue=!1;if(Z!==null){var Re=ml(Z);Re!==void 0&&(h.has(Re)?ue=!0:i.has(Re)&&(L===k?ue=!0:re=!0))}if(Ym!==null&&(Ym.has(e)||p!==null&&Ym.has(p))&&(ue=!0),ue&&(e._debugNeedsRemount=!0),ue||re){var Me=ca(e,Dn);Me!==null&&Vs(Me,e,Dn,ui)}C!==null&&!ue&&w1(C,i,h),D!==null&&w1(D,i,h)}}var uL=function(e,i){{var h=new Set,p=new Set(i.map(function(C){return C.current}));return C1(e.current,p,h),h}};function C1(e,i,h){{var p=e.child,C=e.sibling,D=e.tag,L=e.type,$=null;switch(D){case A:case Ye:case k:$=L;break;case fe:$=L.render;break}var Z=!1;$!==null&&i.has($)&&(Z=!0),Z?dL(e,h):p!==null&&C1(p,i,h),C!==null&&C1(C,i,h)}}function dL(e,i){{var h=hL(e,i);if(h)return;for(var p=e;;){switch(p.tag){case ne:i.add(p.stateNode);return;case W:i.add(p.stateNode.containerInfo);return;case O:i.add(p.stateNode.containerInfo);return}if(p.return===null)throw new Error("Expected to reach root first.");p=p.return}}}function hL(e,i){for(var h=e,p=!1;;){if(h.tag===ne)p=!0,i.add(h.stateNode);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)return p;for(;h.sibling===null;){if(h.return===null||h.return===e)return p;h=h.return}h.sibling.return=h.return,h=h.sibling}return!1}var N1;{N1=!1;try{var uD=Object.preventExtensions({})}catch{N1=!0}}function fL(e,i,h,p){this.tag=e,this.key=h,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=i,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=p,this.flags=wn,this.subtreeFlags=wn,this.deletions=null,this.lanes=yt,this.childLanes=yt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!N1&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var Ia=function(e,i,h,p){return new fL(e,i,h,p)};function S1(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function mL(e){return typeof e=="function"&&!S1(e)&&e.defaultProps===void 0}function pL(e){if(typeof e=="function")return S1(e)?k:A;if(e!=null){var i=e.$$typeof;if(i===ht)return fe;if(i===Tt)return Je}return B}function vf(e,i){var h=e.alternate;h===null?(h=Ia(e.tag,i,e.key,e.mode),h.elementType=e.elementType,h.type=e.type,h.stateNode=e.stateNode,h._debugSource=e._debugSource,h._debugOwner=e._debugOwner,h._debugHookTypes=e._debugHookTypes,h.alternate=e,e.alternate=h):(h.pendingProps=i,h.type=e.type,h.flags=wn,h.subtreeFlags=wn,h.deletions=null,h.actualDuration=0,h.actualStartTime=-1),h.flags=e.flags&Be,h.childLanes=e.childLanes,h.lanes=e.lanes,h.child=e.child,h.memoizedProps=e.memoizedProps,h.memoizedState=e.memoizedState,h.updateQueue=e.updateQueue;var p=e.dependencies;switch(h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},h.sibling=e.sibling,h.index=e.index,h.ref=e.ref,h.selfBaseDuration=e.selfBaseDuration,h.treeBaseDuration=e.treeBaseDuration,h._debugNeedsRemount=e._debugNeedsRemount,h.tag){case B:case A:case Ye:h.type=Xm(e.type);break;case k:h.type=x1(e.type);break;case fe:h.type=_1(e.type);break}return h}function gL(e,i){e.flags&=Be|bi;var h=e.alternate;if(h===null)e.childLanes=yt,e.lanes=i,e.child=null,e.subtreeFlags=wn,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=h.childLanes,e.lanes=h.lanes,e.child=h.child,e.subtreeFlags=wn,e.deletions=null,e.memoizedProps=h.memoizedProps,e.memoizedState=h.memoizedState,e.updateQueue=h.updateQueue,e.type=h.type;var p=h.dependencies;e.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},e.selfBaseDuration=h.selfBaseDuration,e.treeBaseDuration=h.treeBaseDuration}return e}function vL(e,i,h){var p;return e===ub?(p=lr,i===!0&&(p|=ri,p|=tl)):p=Nn,ls&&(p|=Lr),Ia(O,null,null,p)}function E1(e,i,h,p,C,D){var L=B,$=e;if(typeof e=="function")S1(e)?(L=k,$=x1($)):$=Xm($);else if(typeof e=="string")L=ne;else e:switch(e){case Ee:return sh(h.children,C,D,i);case Ke:L=De,C|=ri,(C&lr)!==Nn&&(C|=tl);break;case te:return yL(h,C,D,i);case pt:return bL(h,C,D,i);case ft:return xL(h,C,D,i);case gn:return dD(h,C,D,i);case Cr:case kn:case ar:case Tr:case vn:default:{if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Se:L=we;break e;case Xe:L=Ae;break e;case ht:L=fe,$=_1($);break e;case Tt:L=Je;break e;case Lt:L=ot,$=null;break e}var Z="";{(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(Z+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var re=p?jn(p):null;re&&(Z+=`

Check the render method of \``+re+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(e==null?e:typeof e)+"."+Z))}}var ue=Ia(L,h,i,C);return ue.elementType=e,ue.type=$,ue.lanes=D,ue._debugOwner=p,ue}function D1(e,i,h){var p=null;p=e._owner;var C=e.type,D=e.key,L=e.props,$=E1(C,D,L,p,i,h);return $._debugSource=e._source,$._debugOwner=e._owner,$}function sh(e,i,h,p){var C=Ia(ke,e,p,i);return C.lanes=h,C}function yL(e,i,h,p){typeof e.id!="string"&&x('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id);var C=Ia(Ve,e,p,i|Lr);return C.elementType=te,C.lanes=h,C.stateNode={effectDuration:0,passiveEffectDuration:0},C}function bL(e,i,h,p){var C=Ia(ze,e,p,i);return C.elementType=pt,C.lanes=h,C}function xL(e,i,h,p){var C=Ia(sn,e,p,i);return C.elementType=ft,C.lanes=h,C}function dD(e,i,h,p){var C=Ia(vt,e,p,i);C.elementType=gn,C.lanes=h;var D={isHidden:!1};return C.stateNode=D,C}function T1(e,i,h){var p=Ia(me,e,null,i);return p.lanes=h,p}function _L(){var e=Ia(ne,null,null,Nn);return e.elementType="DELETED",e}function wL(e){var i=Ia(gt,null,null,Nn);return i.stateNode=e,i}function P1(e,i,h){var p=e.children!==null?e.children:[],C=Ia(W,p,e.key,i);return C.lanes=h,C.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},C}function hD(e,i){return e===null&&(e=Ia(B,null,null,Nn)),e.tag=i.tag,e.key=i.key,e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.return=i.return,e.child=i.child,e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e.pendingProps=i.pendingProps,e.memoizedProps=i.memoizedProps,e.updateQueue=i.updateQueue,e.memoizedState=i.memoizedState,e.dependencies=i.dependencies,e.mode=i.mode,e.flags=i.flags,e.subtreeFlags=i.subtreeFlags,e.deletions=i.deletions,e.lanes=i.lanes,e.childLanes=i.childLanes,e.alternate=i.alternate,e.actualDuration=i.actualDuration,e.actualStartTime=i.actualStartTime,e.selfBaseDuration=i.selfBaseDuration,e.treeBaseDuration=i.treeBaseDuration,e._debugSource=i._debugSource,e._debugOwner=i._debugOwner,e._debugNeedsRemount=i._debugNeedsRemount,e._debugHookTypes=i._debugHookTypes,e}function CL(e,i,h,p,C){this.tag=i,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=u_,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Sr,this.eventTimes=il(yt),this.expirationTimes=il(ui),this.pendingLanes=yt,this.suspendedLanes=yt,this.pingedLanes=yt,this.expiredLanes=yt,this.mutableReadLanes=yt,this.finishedLanes=yt,this.entangledLanes=yt,this.entanglements=il(yt),this.identifierPrefix=p,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var D=this.pendingUpdatersLaneMap=[],L=0;L<Zf;L++)D.push(new Set)}switch(i){case ub:this._debugRootType=h?"hydrateRoot()":"createRoot()";break;case Gd:this._debugRootType=h?"hydrate()":"render()";break}}function fD(e,i,h,p,C,D,L,$,Z,re){var ue=new CL(e,i,h,$,Z),Re=vL(i,D);ue.current=Re,Re.stateNode=ue;{var Me={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null};Re.memoizedState=Me}return U_(Re),ue}var j1="18.3.1";function NL(e,i,h){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return Ti(p),{$$typeof:ge,key:p==null?null:""+p,children:e,containerInfo:i,implementation:h}}var k1,A1;k1=!1,A1={};function mD(e){if(!e)return La;var i=Rr(e),h=o2(i);if(i.tag===k){var p=i.type;if(Fc(p))return FN(i,p,h)}return h}function SL(e,i){{var h=Rr(e);if(h===void 0){if(typeof e.render=="function")throw new Error("Unable to find node on an unmounted component.");var p=Object.keys(e).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+p)}var C=xn(h);if(C===null)return null;if(C.mode&ri){var D=jn(h)||"Component";if(!A1[D]){A1[D]=!0;var L=fs;try{ei(C),h.mode&ri?x("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D):x("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D)}finally{L?ei(L):Pi()}}}return C.stateNode}}function pD(e,i,h,p,C,D,L,$){var Z=!1,re=null;return fD(e,i,Z,re,h,p,C,D,L)}function gD(e,i,h,p,C,D,L,$,Z,re){var ue=!0,Re=fD(h,p,ue,e,C,D,L,$,Z);Re.context=mD(null);var Me=Re.current,We=Zo(),Ze=rh(Me),rt=Fu(We,Ze);return rt.callback=i??null,Kd(Me,rt,Ze),AR(Re,Ze,We),Re}function pv(e,i,h,p){Fi(i,e);var C=i.current,D=Zo(),L=rh(C);x0(L);var $=mD(h);i.context===null?i.context=$:i.pendingContext=$,Nl&&fs!==null&&!k1&&(k1=!0,x(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,jn(fs)||"Unknown"));var Z=Fu(D,L);Z.payload={element:e},p=p===void 0?null:p,p!==null&&(typeof p!="function"&&x("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",p),Z.callback=p);var re=Kd(C,Z,L);return re!==null&&(Vs(re,C,L,D),Sb(re,C,L)),L}function mx(e){var i=e.current;if(!i.child)return null;switch(i.child.tag){case ne:return i.child.stateNode;default:return i.child.stateNode}}function EL(e){switch(e.tag){case O:{var i=e.stateNode;if($h(i)){var h=Bh(i);IR(i,h)}break}case ze:{Hu(function(){var C=ca(e,Dn);if(C!==null){var D=Zo();Vs(C,e,Dn,D)}});var p=Dn;M1(e,p);break}}}function vD(e,i){var h=e.memoizedState;h!==null&&h.dehydrated!==null&&(h.retryLane=_0(h.retryLane,i))}function M1(e,i){vD(e,i);var h=e.alternate;h&&vD(h,i)}function DL(e){if(e.tag===ze){var i=zh,h=ca(e,i);if(h!==null){var p=Zo();Vs(h,e,i,p)}M1(e,i)}}function TL(e){if(e.tag===ze){var i=rh(e),h=ca(e,i);if(h!==null){var p=Zo();Vs(h,e,i,p)}M1(e,i)}}function yD(e){var i=kr(e);return i===null?null:i.stateNode}var bD=function(e){return null};function PL(e){return bD(e)}var xD=function(e){return!1};function jL(e){return xD(e)}var _D=null,wD=null,CD=null,ND=null,SD=null,ED=null,DD=null,TD=null,PD=null;{var jD=function(e,i,h){var p=i[h],C=tr(e)?e.slice():In({},e);return h+1===i.length?(tr(C)?C.splice(p,1):delete C[p],C):(C[p]=jD(e[p],i,h+1),C)},kD=function(e,i){return jD(e,i,0)},AD=function(e,i,h,p){var C=i[p],D=tr(e)?e.slice():In({},e);if(p+1===i.length){var L=h[p];D[L]=D[C],tr(D)?D.splice(C,1):delete D[C]}else D[C]=AD(e[C],i,h,p+1);return D},MD=function(e,i,h){if(i.length!==h.length){E("copyWithRename() expects paths of the same length");return}else for(var p=0;p<h.length-1;p++)if(i[p]!==h[p]){E("copyWithRename() expects paths to be the same except for the deepest key");return}return AD(e,i,h,0)},RD=function(e,i,h,p){if(h>=i.length)return p;var C=i[h],D=tr(e)?e.slice():In({},e);return D[C]=RD(e[C],i,h+1,p),D},LD=function(e,i,h){return RD(e,i,0,h)},R1=function(e,i){for(var h=e.memoizedState;h!==null&&i>0;)h=h.next,i--;return h};_D=function(e,i,h,p){var C=R1(e,i);if(C!==null){var D=LD(C.memoizedState,h,p);C.memoizedState=D,C.baseState=D,e.memoizedProps=In({},e.memoizedProps);var L=ca(e,Dn);L!==null&&Vs(L,e,Dn,ui)}},wD=function(e,i,h){var p=R1(e,i);if(p!==null){var C=kD(p.memoizedState,h);p.memoizedState=C,p.baseState=C,e.memoizedProps=In({},e.memoizedProps);var D=ca(e,Dn);D!==null&&Vs(D,e,Dn,ui)}},CD=function(e,i,h,p){var C=R1(e,i);if(C!==null){var D=MD(C.memoizedState,h,p);C.memoizedState=D,C.baseState=D,e.memoizedProps=In({},e.memoizedProps);var L=ca(e,Dn);L!==null&&Vs(L,e,Dn,ui)}},ND=function(e,i,h){e.pendingProps=LD(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=ca(e,Dn);p!==null&&Vs(p,e,Dn,ui)},SD=function(e,i){e.pendingProps=kD(e.memoizedProps,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var h=ca(e,Dn);h!==null&&Vs(h,e,Dn,ui)},ED=function(e,i,h){e.pendingProps=MD(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=ca(e,Dn);p!==null&&Vs(p,e,Dn,ui)},DD=function(e){var i=ca(e,Dn);i!==null&&Vs(i,e,Dn,ui)},TD=function(e){bD=e},PD=function(e){xD=e}}function kL(e){var i=xn(e);return i===null?null:i.stateNode}function AL(e){return null}function ML(){return fs}function RL(e){var i=e.findFiberByHostInstance,h=o.ReactCurrentDispatcher;return _i({bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:_D,overrideHookStateDeletePath:wD,overrideHookStateRenamePath:CD,overrideProps:ND,overridePropsDeletePath:SD,overridePropsRenamePath:ED,setErrorHandler:TD,setSuspenseHandler:PD,scheduleUpdate:DD,currentDispatcherRef:h,findHostInstanceByFiber:kL,findFiberByHostInstance:i||AL,findHostInstancesForRefresh:uL,scheduleRefresh:lL,scheduleRoot:cL,setRefreshHandler:aL,getCurrentFiber:ML,reconcilerVersion:j1})}var ID=typeof reportError=="function"?reportError:function(e){console.error(e)};function L1(e){this._internalRoot=e}px.prototype.render=L1.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?x("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):gx(arguments[1])?x("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&x("You passed a second argument to root.render(...) but it only accepts one argument.");var h=i.containerInfo;if(h.nodeType!==yi){var p=yD(i.current);p&&p.parentNode!==h&&x("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}pv(e,i,null,null)},px.prototype.unmount=L1.prototype.unmount=function(){typeof arguments[0]=="function"&&x("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;ZE()&&x("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Hu(function(){pv(null,e,null,null)}),IN(i)}};function LL(e,i){if(!gx(e))throw new Error("createRoot(...): Target container is not a DOM element.");VD(e);var h=!1,p=!1,C="",D=ID;i!=null&&(i.hydrate?E("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof i=="object"&&i!==null&&i.$$typeof===xe&&x(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(C=i.identifierPrefix),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.transitionCallbacks!==void 0&&i.transitionCallbacks);var L=pD(e,ub,null,h,p,C,D);rb(L.current,e);var $=e.nodeType===yi?e.parentNode:e;return un($),new L1(L)}function px(e){this._internalRoot=e}function IL(e){e&&Ir(e)}px.prototype.unstable_scheduleHydration=IL;function VL(e,i,h){if(!gx(e))throw new Error("hydrateRoot(...): Target container is not a DOM element.");VD(e),i===void 0&&x("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var p=h??null,C=h!=null&&h.hydratedSources||null,D=!1,L=!1,$="",Z=ID;h!=null&&(h.unstable_strictMode===!0&&(D=!0),h.identifierPrefix!==void 0&&($=h.identifierPrefix),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError));var re=gD(i,null,e,ub,p,D,L,$,Z);if(rb(re.current,e),un(e),C)for(var ue=0;ue<C.length;ue++){var Re=C[ue];F2(re,Re)}return new px(re)}function gx(e){return!!(e&&(e.nodeType===as||e.nodeType===bo||e.nodeType===ou))}function gv(e){return!!(e&&(e.nodeType===as||e.nodeType===bo||e.nodeType===ou||e.nodeType===yi&&e.nodeValue===" react-mount-point-unstable "))}function VD(e){e.nodeType===as&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&x("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),Ag(e)&&(e._reactRootContainer?x("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):x("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var zL=o.ReactCurrentOwner,zD;zD=function(e){if(e._reactRootContainer&&e.nodeType!==yi){var i=yD(e._reactRootContainer.current);i&&i.parentNode!==e&&x("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var h=!!e._reactRootContainer,p=I1(e),C=!!(p&&qd(p));C&&!h&&x("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===as&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&x("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function I1(e){return e?e.nodeType===bo?e.documentElement:e.firstChild:null}function OD(){}function OL(e,i,h,p,C){if(C){if(typeof p=="function"){var D=p;p=function(){var Me=mx(L);D.call(Me)}}var L=gD(i,p,e,Gd,null,!1,!1,"",OD);e._reactRootContainer=L,rb(L.current,e);var $=e.nodeType===yi?e.parentNode:e;return un($),Hu(),L}else{for(var Z;Z=e.lastChild;)e.removeChild(Z);if(typeof p=="function"){var re=p;p=function(){var Me=mx(ue);re.call(Me)}}var ue=pD(e,Gd,null,!1,!1,"",OD);e._reactRootContainer=ue,rb(ue.current,e);var Re=e.nodeType===yi?e.parentNode:e;return un(Re),Hu(function(){pv(i,ue,h,p)}),ue}}function BL(e,i){e!==null&&typeof e!="function"&&x("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e)}function vx(e,i,h,p,C){zD(h),BL(C===void 0?null:C,"render");var D=h._reactRootContainer,L;if(!D)L=OL(h,i,e,C,p);else{if(L=D,typeof C=="function"){var $=C;C=function(){var Z=mx(L);$.call(Z)}}pv(i,L,e,C)}return mx(L)}var BD=!1;function FL(e){{BD||(BD=!0,x("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var i=zL.current;if(i!==null&&i.stateNode!==null){var h=i.stateNode._warnedAboutRefsInRender;h||x("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",sr(i.type)||"A component"),i.stateNode._warnedAboutRefsInRender=!0}}return e==null?null:e.nodeType===as?e:SL(e,"findDOMNode")}function UL(e,i,h){if(x("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!gv(i))throw new Error("Target container is not a DOM element.");{var p=Ag(i)&&i._reactRootContainer===void 0;p&&x("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return vx(null,e,i,!0,h)}function $L(e,i,h){if(x("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!gv(i))throw new Error("Target container is not a DOM element.");{var p=Ag(i)&&i._reactRootContainer===void 0;p&&x("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return vx(null,e,i,!1,h)}function qL(e,i,h,p){if(x("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!gv(h))throw new Error("Target container is not a DOM element.");if(e==null||!Tc(e))throw new Error("parentComponent must be a valid React Component");return vx(e,i,h,!1,p)}var FD=!1;function HL(e){if(FD||(FD=!0,x("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!gv(e))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var i=Ag(e)&&e._reactRootContainer===void 0;i&&x("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(e._reactRootContainer){{var h=I1(e),p=h&&!qd(h);p&&x("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Hu(function(){vx(null,null,e,!1,function(){e._reactRootContainer=null,IN(e)})}),!0}else{{var C=I1(e),D=!!(C&&qd(C)),L=e.nodeType===as&&gv(e.parentNode)&&!!e.parentNode._reactRootContainer;D&&x("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",L?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}E0(EL),T0(DL),vy(TL),yy(Uo),by(N0),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&x("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Mh(Ma),Xr(f1,VR,Hu);function GL(e,i){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!gx(i))throw new Error("Target container is not a DOM element.");return NL(e,i,null,h)}function WL(e,i,h,p){return qL(e,i,h,p)}var V1={usingClientEntryPoint:!1,Events:[qd,Tm,ib,Ss,wc,f1]};function ZL(e,i){return V1.usingClientEntryPoint||x('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),LL(e,i)}function KL(e,i,h){return V1.usingClientEntryPoint||x('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),VL(e,i,h)}function YL(e){return ZE()&&x("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Hu(e)}var XL=RL({findFiberByHostInstance:tf,bundleType:1,version:j1,rendererPackageName:"react-dom"});if(!XL&&Bn&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var UD=window.location.protocol;/^(https?|file):$/.test(UD)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(UD==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V1,za.createPortal=GL,za.createRoot=ZL,za.findDOMNode=FL,za.flushSync=YL,za.hydrate=UL,za.hydrateRoot=KL,za.render=$L,za.unmountComponentAtNode=HL,za.unstable_batchedUpdates=f1,za.unstable_renderSubtreeIntoContainer=WL,za.version=j1,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();AP.exports=za;var aI=AP.exports,z1=aI;{var yx=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;fC.createRoot=function(l,n){yx.usingClientEntryPoint=!0;try{return z1.createRoot(l,n)}finally{yx.usingClientEntryPoint=!1}},fC.hydrateRoot=function(l,n,o){yx.usingClientEntryPoint=!0;try{return z1.hydrateRoot(l,n,o)}finally{yx.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mv(){return Mv=Object.assign?Object.assign.bind():function(l){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(l[d]=o[d])}return l},Mv.apply(this,arguments)}var dh;(function(l){l.Pop="POP",l.Push="PUSH",l.Replace="REPLACE"})(dh||(dh={}));const $D="popstate";function lI(l){l===void 0&&(l={});function n(d,y){let{pathname:E,search:x,hash:u}=d.location;return mC("",{pathname:E,search:x,hash:u},y.state&&y.state.usr||null,y.state&&y.state.key||"default")}function o(d,y){return typeof y=="string"?y:Rv(y)}return uI(n,o,null,l)}function Zi(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function Jc(l,n){if(!l){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function cI(){return Math.random().toString(36).substr(2,8)}function qD(l,n){return{usr:l.state,key:l.key,idx:n}}function mC(l,n,o,d){return o===void 0&&(o=null),Mv({pathname:typeof l=="string"?l:l.pathname,search:"",hash:""},typeof n=="string"?gp(n):n,{state:o,key:n&&n.key||d||cI()})}function Rv(l){let{pathname:n="/",search:o="",hash:d=""}=l;return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function gp(l){let n={};if(l){let o=l.indexOf("#");o>=0&&(n.hash=l.substr(o),l=l.substr(0,o));let d=l.indexOf("?");d>=0&&(n.search=l.substr(d),l=l.substr(0,d)),l&&(n.pathname=l)}return n}function uI(l,n,o,d){d===void 0&&(d={});let{window:y=document.defaultView,v5Compat:E=!1}=d,x=y.history,u=dh.Pop,A=null,k=B();k==null&&(k=0,x.replaceState(Mv({},x.state,{idx:k}),""));function B(){return(x.state||{idx:null}).idx}function O(){u=dh.Pop;let De=B(),Ae=De==null?null:De-k;k=De,A&&A({action:u,location:ke.location,delta:Ae})}function W(De,Ae){u=dh.Push;let we=mC(ke.location,De,Ae);k=B()+1;let fe=qD(we,k),Ve=ke.createHref(we);try{x.pushState(fe,"",Ve)}catch(ze){if(ze instanceof DOMException&&ze.name==="DataCloneError")throw ze;y.location.assign(Ve)}E&&A&&A({action:u,location:ke.location,delta:1})}function ne(De,Ae){u=dh.Replace;let we=mC(ke.location,De,Ae);k=B();let fe=qD(we,k),Ve=ke.createHref(we);x.replaceState(fe,"",Ve),E&&A&&A({action:u,location:ke.location,delta:0})}function me(De){let Ae=y.location.origin!=="null"?y.location.origin:y.location.href,we=typeof De=="string"?De:Rv(De);return we=we.replace(/ $/,"%20"),Zi(Ae,"No window.location.(origin|href) available to create URL for href: "+we),new URL(we,Ae)}let ke={get action(){return u},get location(){return l(y,x)},listen(De){if(A)throw new Error("A history only accepts one active listener");return y.addEventListener($D,O),A=De,()=>{y.removeEventListener($D,O),A=null}},createHref(De){return n(y,De)},createURL:me,encodeLocation(De){let Ae=me(De);return{pathname:Ae.pathname,search:Ae.search,hash:Ae.hash}},push:W,replace:ne,go(De){return x.go(De)}};return ke}var HD;(function(l){l.data="data",l.deferred="deferred",l.redirect="redirect",l.error="error"})(HD||(HD={}));function dI(l,n,o){return o===void 0&&(o="/"),hI(l,n,o)}function hI(l,n,o,d){let y=typeof n=="string"?gp(n):n,E=ph(y.pathname||"/",o);if(E==null)return null;let x=LP(l);fI(x);let u=null;for(let A=0;u==null&&A<x.length;++A){let k=NI(E);u=wI(x[A],k)}return u}function LP(l,n,o,d){n===void 0&&(n=[]),o===void 0&&(o=[]),d===void 0&&(d="");let y=(E,x,u)=>{let A={relativePath:u===void 0?E.path||"":u,caseSensitive:E.caseSensitive===!0,childrenIndex:x,route:E};A.relativePath.startsWith("/")&&(Zi(A.relativePath.startsWith(d),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+d+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(d.length));let k=Xu([d,A.relativePath]),B=o.concat(A);E.children&&E.children.length>0&&(Zi(E.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+k+'".')),LP(E.children,n,B,k)),!(E.path==null&&!E.index)&&n.push({path:k,score:xI(k,E.index),routesMeta:B})};return l.forEach((E,x)=>{var u;if(E.path===""||!((u=E.path)!=null&&u.includes("?")))y(E,x);else for(let A of IP(E.path))y(E,x,A)}),n}function IP(l){let n=l.split("/");if(n.length===0)return[];let[o,...d]=n,y=o.endsWith("?"),E=o.replace(/\?$/,"");if(d.length===0)return y?[E,""]:[E];let x=IP(d.join("/")),u=[];return u.push(...x.map(A=>A===""?E:[E,A].join("/"))),y&&u.push(...x),u.map(A=>l.startsWith("/")&&A===""?"/":A)}function fI(l){l.sort((n,o)=>n.score!==o.score?o.score-n.score:_I(n.routesMeta.map(d=>d.childrenIndex),o.routesMeta.map(d=>d.childrenIndex)))}const mI=/^:[\w-]+$/,pI=3,gI=2,vI=1,yI=10,bI=-2,GD=l=>l==="*";function xI(l,n){let o=l.split("/"),d=o.length;return o.some(GD)&&(d+=bI),n&&(d+=gI),o.filter(y=>!GD(y)).reduce((y,E)=>y+(mI.test(E)?pI:E===""?vI:yI),d)}function _I(l,n){return l.length===n.length&&l.slice(0,-1).every((d,y)=>d===n[y])?l[l.length-1]-n[n.length-1]:0}function wI(l,n,o){let{routesMeta:d}=l,y={},E="/",x=[];for(let u=0;u<d.length;++u){let A=d[u],k=u===d.length-1,B=E==="/"?n:n.slice(E.length)||"/",O=pC({path:A.relativePath,caseSensitive:A.caseSensitive,end:k},B),W=A.route;if(!O)return null;Object.assign(y,O.params),x.push({params:y,pathname:Xu([E,O.pathname]),pathnameBase:TI(Xu([E,O.pathnameBase])),route:W}),O.pathnameBase!=="/"&&(E=Xu([E,O.pathnameBase]))}return x}function pC(l,n){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,d]=CI(l.path,l.caseSensitive,l.end),y=n.match(o);if(!y)return null;let E=y[0],x=E.replace(/(.)\/+$/,"$1"),u=y.slice(1);return{params:d.reduce((k,B,O)=>{let{paramName:W,isOptional:ne}=B;if(W==="*"){let ke=u[O]||"";x=E.slice(0,E.length-ke.length).replace(/(.)\/+$/,"$1")}const me=u[O];return ne&&!me?k[W]=void 0:k[W]=(me||"").replace(/%2F/g,"/"),k},{}),pathname:E,pathnameBase:x,pattern:l}}function CI(l,n,o){n===void 0&&(n=!1),o===void 0&&(o=!0),Jc(l==="*"||!l.endsWith("*")||l.endsWith("/*"),'Route path "'+l+'" will be treated as if it were '+('"'+l.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+l.replace(/\*$/,"/*")+'".'));let d=[],y="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,u,A)=>(d.push({paramName:u,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(d.push({paramName:"*"}),y+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?y+="\\/*$":l!==""&&l!=="/"&&(y+="(?:(?=\\/|$))"),[new RegExp(y,n?void 0:"i"),d]}function NI(l){try{return l.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Jc(!1,'The URL path "'+l+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),l}}function ph(l,n){if(n==="/")return l;if(!l.toLowerCase().startsWith(n.toLowerCase()))return null;let o=n.endsWith("/")?n.length-1:n.length,d=l.charAt(o);return d&&d!=="/"?null:l.slice(o)||"/"}function SI(l,n){n===void 0&&(n="/");let{pathname:o,search:d="",hash:y=""}=typeof l=="string"?gp(l):l;return{pathname:o?o.startsWith("/")?o:EI(o,n):n,search:PI(d),hash:jI(y)}}function EI(l,n){let o=n.replace(/\/+$/,"").split("/");return l.split("/").forEach(y=>{y===".."?o.length>1&&o.pop():y!=="."&&o.push(y)}),o.length>1?o.join("/"):"/"}function O1(l,n,o,d){return"Cannot include a '"+l+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(d)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DI(l){return l.filter((n,o)=>o===0||n.route.path&&n.route.path.length>0)}function VP(l,n){let o=DI(l);return n?o.map((d,y)=>y===o.length-1?d.pathname:d.pathnameBase):o.map(d=>d.pathnameBase)}function zP(l,n,o,d){d===void 0&&(d=!1);let y;typeof l=="string"?y=gp(l):(y=Mv({},l),Zi(!y.pathname||!y.pathname.includes("?"),O1("?","pathname","search",y)),Zi(!y.pathname||!y.pathname.includes("#"),O1("#","pathname","hash",y)),Zi(!y.search||!y.search.includes("#"),O1("#","search","hash",y)));let E=l===""||y.pathname==="",x=E?"/":y.pathname,u;if(x==null)u=o;else{let O=n.length-1;if(!d&&x.startsWith("..")){let W=x.split("/");for(;W[0]==="..";)W.shift(),O-=1;y.pathname=W.join("/")}u=O>=0?n[O]:"/"}let A=SI(y,u),k=x&&x!=="/"&&x.endsWith("/"),B=(E||x===".")&&o.endsWith("/");return!A.pathname.endsWith("/")&&(k||B)&&(A.pathname+="/"),A}const Xu=l=>l.join("/").replace(/\/\/+/g,"/"),TI=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),PI=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,jI=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function kI(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}const OP=["post","put","patch","delete"];new Set(OP);const AI=["get",...OP];new Set(AI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lv(){return Lv=Object.assign?Object.assign.bind():function(l){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(l[d]=o[d])}return l},Lv.apply(this,arguments)}const $v=se.createContext(null);$v.displayName="DataRouter";const WC=se.createContext(null);WC.displayName="DataRouterState";const MI=se.createContext(null);MI.displayName="Await";const hc=se.createContext(null);hc.displayName="Navigation";const qv=se.createContext(null);qv.displayName="Location";const td=se.createContext({outlet:null,matches:[],isDataRoute:!1});td.displayName="Route";const ZC=se.createContext(null);ZC.displayName="RouteError";function RI(l,n){let{relative:o}=n===void 0?{}:n;Hv()||Zi(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:y}=se.useContext(hc),{hash:E,pathname:x,search:u}=Wv(l,{relative:o}),A=x;return d!=="/"&&(A=x==="/"?d:Xu([d,x])),y.createHref({pathname:A,search:u,hash:E})}function Hv(){return se.useContext(qv)!=null}function Tf(){return Hv()||Zi(!1,"useLocation() may be used only in the context of a <Router> component."),se.useContext(qv).location}const BP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FP(l){se.useContext(hc).static||se.useLayoutEffect(l)}function Gv(){let{isDataRoute:l}=se.useContext(td);return l?ZI():LI()}function LI(){Hv()||Zi(!1,"useNavigate() may be used only in the context of a <Router> component.");let l=se.useContext($v),{basename:n,future:o,navigator:d}=se.useContext(hc),{matches:y}=se.useContext(td),{pathname:E}=Tf(),x=JSON.stringify(VP(y,o.v7_relativeSplatPath)),u=se.useRef(!1);return FP(()=>{u.current=!0}),se.useCallback(function(k,B){if(B===void 0&&(B={}),Jc(u.current,BP),!u.current)return;if(typeof k=="number"){d.go(k);return}let O=zP(k,JSON.parse(x),E,B.relative==="path");l==null&&n!=="/"&&(O.pathname=O.pathname==="/"?n:Xu([n,O.pathname])),(B.replace?d.replace:d.push)(O,B.state,B)},[n,d,x,E,l])}function Wv(l,n){let{relative:o}=n===void 0?{}:n,{future:d}=se.useContext(hc),{matches:y}=se.useContext(td),{pathname:E}=Tf(),x=JSON.stringify(VP(y,d.v7_relativeSplatPath));return se.useMemo(()=>zP(l,JSON.parse(x),E,o==="path"),[l,x,E,o])}function II(l,n){return VI(l,n)}function VI(l,n,o,d){Hv()||Zi(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=se.useContext(hc),{matches:E}=se.useContext(td),x=E[E.length-1],u=x?x.params:{},A=x?x.pathname:"/",k=x?x.pathnameBase:"/",B=x&&x.route;{let we=B&&B.path||"";$P(A,!B||we.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+A+'" (under <Route path="'+we+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+we+'"> to <Route ')+('path="'+(we==="/"?"*":we+"/*")+'">.'))}let O=Tf(),W;if(n){var ne;let we=typeof n=="string"?gp(n):n;k==="/"||(ne=we.pathname)!=null&&ne.startsWith(k)||Zi(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+k+'" ')+('but pathname "'+we.pathname+'" was given in the `location` prop.')),W=we}else W=O;let me=W.pathname||"/",ke=me;if(k!=="/"){let we=k.replace(/^\//,"").split("/");ke="/"+me.replace(/^\//,"").split("/").slice(we.length).join("/")}let De=dI(l,{pathname:ke});Jc(B||De!=null,'No routes matched location "'+W.pathname+W.search+W.hash+'" '),Jc(De==null||De[De.length-1].route.element!==void 0||De[De.length-1].route.Component!==void 0||De[De.length-1].route.lazy!==void 0,'Matched leaf route at location "'+W.pathname+W.search+W.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let Ae=UI(De&&De.map(we=>Object.assign({},we,{params:Object.assign({},u,we.params),pathname:Xu([k,y.encodeLocation?y.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?k:Xu([k,y.encodeLocation?y.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),E,o,d);return n&&Ae?se.createElement(qv.Provider,{value:{location:Lv({pathname:"/",search:"",hash:"",state:null,key:"default"},W),navigationType:dh.Pop}},Ae):Ae}function zI(){let l=WI(),n=kI(l)?l.status+" "+l.statusText:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,d="rgba(200,200,200, 0.5)",y={padding:"0.5rem",backgroundColor:d},E={padding:"2px 4px",backgroundColor:d},x=null;return console.error("Error handled by React Router default ErrorBoundary:",l),x=se.createElement(se.Fragment,null,se.createElement("p",null,"💿 Hey developer 👋"),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:E},"ErrorBoundary")," or"," ",se.createElement("code",{style:E},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},n),o?se.createElement("pre",{style:y},o):null,x)}const OI=se.createElement(zI,null);class BI extends se.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,o){return o.location!==n.location||o.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:o.error,location:o.location,revalidation:n.revalidation||o.revalidation}}componentDidCatch(n,o){console.error("React Router caught the following error during render",n,o)}render(){return this.state.error!==void 0?se.createElement(td.Provider,{value:this.props.routeContext},se.createElement(ZC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FI(l){let{routeContext:n,match:o,children:d}=l,y=se.useContext($v);return y&&y.static&&y.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(y.staticContext._deepestRenderedBoundaryId=o.route.id),se.createElement(td.Provider,{value:n},d)}function UI(l,n,o,d){var y;if(n===void 0&&(n=[]),o===void 0&&(o=null),d===void 0&&(d=null),l==null){var E;if(!o)return null;if(o.errors)l=o.matches;else if((E=d)!=null&&E.v7_partialHydration&&n.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let x=l,u=(y=o)==null?void 0:y.errors;if(u!=null){let B=x.findIndex(O=>O.route.id&&(u==null?void 0:u[O.route.id])!==void 0);B>=0||Zi(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(u).join(",")),x=x.slice(0,Math.min(x.length,B+1))}let A=!1,k=-1;if(o&&d&&d.v7_partialHydration)for(let B=0;B<x.length;B++){let O=x[B];if((O.route.HydrateFallback||O.route.hydrateFallbackElement)&&(k=B),O.route.id){let{loaderData:W,errors:ne}=o,me=O.route.loader&&W[O.route.id]===void 0&&(!ne||ne[O.route.id]===void 0);if(O.route.lazy||me){A=!0,k>=0?x=x.slice(0,k+1):x=[x[0]];break}}}return x.reduceRight((B,O,W)=>{let ne,me=!1,ke=null,De=null;o&&(ne=u&&O.route.id?u[O.route.id]:void 0,ke=O.route.errorElement||OI,A&&(k<0&&W===0?($P("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),me=!0,De=null):k===W&&(me=!0,De=O.route.hydrateFallbackElement||null)));let Ae=n.concat(x.slice(0,W+1)),we=()=>{let fe;return ne?fe=ke:me?fe=De:O.route.Component?fe=se.createElement(O.route.Component,null):O.route.element?fe=O.route.element:fe=B,se.createElement(FI,{match:O,routeContext:{outlet:B,matches:Ae,isDataRoute:o!=null},children:fe})};return o&&(O.route.ErrorBoundary||O.route.errorElement||W===0)?se.createElement(BI,{location:o.location,revalidation:o.revalidation,component:ke,error:ne,children:we(),routeContext:{outlet:null,matches:Ae,isDataRoute:!0}}):we()},null)}var UP=function(l){return l.UseBlocker="useBlocker",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l}(UP||{}),Iv=function(l){return l.UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l}(Iv||{});function KC(l){return l+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function $I(l){let n=se.useContext($v);return n||Zi(!1,KC(l)),n}function qI(l){let n=se.useContext(WC);return n||Zi(!1,KC(l)),n}function HI(l){let n=se.useContext(td);return n||Zi(!1,KC(l)),n}function YC(l){let n=HI(l),o=n.matches[n.matches.length-1];return o.route.id||Zi(!1,l+' can only be used on routes that contain a unique "id"'),o.route.id}function GI(){return YC(Iv.UseRouteId)}function WI(){var l;let n=se.useContext(ZC),o=qI(Iv.UseRouteError),d=YC(Iv.UseRouteError);return n!==void 0?n:(l=o.errors)==null?void 0:l[d]}function ZI(){let{router:l}=$I(UP.UseNavigateStable),n=YC(Iv.UseNavigateStable),o=se.useRef(!1);return FP(()=>{o.current=!0}),se.useCallback(function(y,E){E===void 0&&(E={}),Jc(o.current,BP),o.current&&(typeof y=="number"?l.navigate(y):l.navigate(y,Lv({fromRouteId:n},E)))},[l,n])}const WD={};function $P(l,n,o){!n&&!WD[l]&&(WD[l]=!0,Jc(!1,o))}const ZD={};function KI(l,n){ZD[n]||(ZD[n]=!0,console.warn(n))}const KD=(l,n,o)=>KI(l,"⚠️ React Router Future Flag Warning: "+n+". "+("You can use the `"+l+"` future flag to opt-in early. ")+("For more information, see "+o+"."));function YI(l,n){(l==null?void 0:l.v7_startTransition)===void 0&&KD("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(l==null?void 0:l.v7_relativeSplatPath)===void 0&&KD("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function gl(l){Zi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XI(l){let{basename:n="/",children:o=null,location:d,navigationType:y=dh.Pop,navigator:E,static:x=!1,future:u}=l;Hv()&&Zi(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=n.replace(/^\/*/,"/"),k=se.useMemo(()=>({basename:A,navigator:E,static:x,future:Lv({v7_relativeSplatPath:!1},u)}),[A,u,E,x]);typeof d=="string"&&(d=gp(d));let{pathname:B="/",search:O="",hash:W="",state:ne=null,key:me="default"}=d,ke=se.useMemo(()=>{let De=ph(B,A);return De==null?null:{location:{pathname:De,search:O,hash:W,state:ne,key:me},navigationType:y}},[A,B,O,W,ne,me,y]);return Jc(ke!=null,'<Router basename="'+A+'"> is not able to match the URL '+('"'+B+O+W+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),ke==null?null:se.createElement(hc.Provider,{value:k},se.createElement(qv.Provider,{children:o,value:ke}))}function JI(l){let{children:n,location:o}=l;return II(gC(n),o)}new Promise(()=>{});function gC(l,n){n===void 0&&(n=[]);let o=[];return se.Children.forEach(l,(d,y)=>{if(!se.isValidElement(d))return;let E=[...n,y];if(d.type===se.Fragment){o.push.apply(o,gC(d.props.children,E));return}d.type!==gl&&Zi(!1,"["+(typeof d.type=="string"?d.type:d.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!d.props.index||!d.props.children||Zi(!1,"An index route cannot have child routes.");let x={id:d.props.id||E.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(x.children=gC(d.props.children,E)),o.push(x)}),o}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hp(){return hp=Object.assign?Object.assign.bind():function(l){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(l[d]=o[d])}return l},hp.apply(this,arguments)}function XC(l,n){if(l==null)return{};var o={},d=Object.keys(l),y,E;for(E=0;E<d.length;E++)y=d[E],!(n.indexOf(y)>=0)&&(o[y]=l[y]);return o}const Mx="get",Rx="application/x-www-form-urlencoded";function e0(l){return l!=null&&typeof l.tagName=="string"}function QI(l){return e0(l)&&l.tagName.toLowerCase()==="button"}function eV(l){return e0(l)&&l.tagName.toLowerCase()==="form"}function tV(l){return e0(l)&&l.tagName.toLowerCase()==="input"}function nV(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function rV(l,n){return l.button===0&&(!n||n==="_self")&&!nV(l)}let bx=null;function iV(){if(bx===null)try{new FormData(document.createElement("form"),0),bx=!1}catch{bx=!0}return bx}const sV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B1(l){return l!=null&&!sV.has(l)?(Jc(!1,'"'+l+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+Rx+'"')),null):l}function oV(l,n){let o,d,y,E,x;if(eV(l)){let u=l.getAttribute("action");d=u?ph(u,n):null,o=l.getAttribute("method")||Mx,y=B1(l.getAttribute("enctype"))||Rx,E=new FormData(l)}else if(QI(l)||tV(l)&&(l.type==="submit"||l.type==="image")){let u=l.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=l.getAttribute("formaction")||u.getAttribute("action");if(d=A?ph(A,n):null,o=l.getAttribute("formmethod")||u.getAttribute("method")||Mx,y=B1(l.getAttribute("formenctype"))||B1(u.getAttribute("enctype"))||Rx,E=new FormData(u,l),!iV()){let{name:k,type:B,value:O}=l;if(B==="image"){let W=k?k+".":"";E.append(W+"x","0"),E.append(W+"y","0")}else k&&E.append(k,O)}}else{if(e0(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Mx,d=null,y=Rx,x=l}return E&&y==="text/plain"&&(x=E,E=void 0),{action:d,method:o.toLowerCase(),encType:y,formData:E,body:x}}const aV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cV=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],uV="6";try{window.__reactRouterVersion=uV}catch{}const qP=se.createContext({isTransitioning:!1});qP.displayName="ViewTransition";const dV=se.createContext(new Map);dV.displayName="Fetchers";const hV="startTransition",YD=sI[hV];function fV(l){let{basename:n,children:o,future:d,window:y}=l,E=se.useRef();E.current==null&&(E.current=lI({window:y,v5Compat:!0}));let x=E.current,[u,A]=se.useState({action:x.action,location:x.location}),{v7_startTransition:k}=d||{},B=se.useCallback(O=>{k&&YD?YD(()=>A(O)):A(O)},[A,k]);return se.useLayoutEffect(()=>x.listen(B),[x,B]),se.useEffect(()=>YI(d),[d]),se.createElement(XI,{basename:n,children:o,location:u.location,navigationType:u.action,navigator:x,future:d})}const mV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sf=se.forwardRef(function(n,o){let{onClick:d,relative:y,reloadDocument:E,replace:x,state:u,target:A,to:k,preventScrollReset:B,viewTransition:O}=n,W=XC(n,aV),{basename:ne}=se.useContext(hc),me,ke=!1;if(typeof k=="string"&&pV.test(k)&&(me=k,mV))try{let fe=new URL(window.location.href),Ve=k.startsWith("//")?new URL(fe.protocol+k):new URL(k),ze=ph(Ve.pathname,ne);Ve.origin===fe.origin&&ze!=null?k=ze+Ve.search+Ve.hash:ke=!0}catch{Jc(!1,'<Link to="'+k+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let De=RI(k,{relative:y}),Ae=bV(k,{replace:x,state:u,target:A,preventScrollReset:B,relative:y,viewTransition:O});function we(fe){d&&d(fe),fe.defaultPrevented||Ae(fe)}return se.createElement("a",hp({},W,{href:me||De,onClick:ke||E?d:we,ref:o,target:A}))});Sf.displayName="Link";const gV=se.forwardRef(function(n,o){let{"aria-current":d="page",caseSensitive:y=!1,className:E="",end:x=!1,style:u,to:A,viewTransition:k,children:B}=n,O=XC(n,lV),W=Wv(A,{relative:O.relative}),ne=Tf(),me=se.useContext(WC),{navigator:ke,basename:De}=se.useContext(hc),Ae=me!=null&&SV(W)&&k===!0,we=ke.encodeLocation?ke.encodeLocation(W).pathname:W.pathname,fe=ne.pathname,Ve=me&&me.navigation&&me.navigation.location?me.navigation.location.pathname:null;y||(fe=fe.toLowerCase(),Ve=Ve?Ve.toLowerCase():null,we=we.toLowerCase()),Ve&&De&&(Ve=ph(Ve,De)||Ve);const ze=we!=="/"&&we.endsWith("/")?we.length-1:we.length;let Je=fe===we||!x&&fe.startsWith(we)&&fe.charAt(ze)==="/",Ye=Ve!=null&&(Ve===we||!x&&Ve.startsWith(we)&&Ve.charAt(we.length)==="/"),ot={isActive:Je,isPending:Ye,isTransitioning:Ae},wt=Je?d:void 0,gt;typeof E=="function"?gt=E(ot):gt=[E,Je?"active":null,Ye?"pending":null,Ae?"transitioning":null].filter(Boolean).join(" ");let sn=typeof u=="function"?u(ot):u;return se.createElement(Sf,hp({},O,{"aria-current":wt,className:gt,ref:o,style:sn,to:A,viewTransition:k}),typeof B=="function"?B(ot):B)});gV.displayName="NavLink";const vV=se.forwardRef((l,n)=>{let{fetcherKey:o,navigate:d,reloadDocument:y,replace:E,state:x,method:u=Mx,action:A,onSubmit:k,relative:B,preventScrollReset:O,viewTransition:W}=l,ne=XC(l,cV),me=CV(),ke=NV(A,{relative:B}),De=u.toLowerCase()==="get"?"get":"post",Ae=we=>{if(k&&k(we),we.defaultPrevented)return;we.preventDefault();let fe=we.nativeEvent.submitter,Ve=(fe==null?void 0:fe.getAttribute("formmethod"))||u;me(fe||we.currentTarget,{fetcherKey:o,method:Ve,navigate:d,replace:E,state:x,relative:B,preventScrollReset:O,viewTransition:W})};return se.createElement("form",hp({ref:n,method:De,action:ke,onSubmit:y?k:Ae},ne))});vV.displayName="Form";var $x;(function(l){l.UseScrollRestoration="useScrollRestoration",l.UseSubmit="useSubmit",l.UseSubmitFetcher="useSubmitFetcher",l.UseFetcher="useFetcher",l.useViewTransitionState="useViewTransitionState"})($x||($x={}));var XD;(function(l){l.UseFetcher="useFetcher",l.UseFetchers="useFetchers",l.UseScrollRestoration="useScrollRestoration"})(XD||(XD={}));function yV(l){return l+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function HP(l){let n=se.useContext($v);return n||Zi(!1,yV(l)),n}function bV(l,n){let{target:o,replace:d,state:y,preventScrollReset:E,relative:x,viewTransition:u}=n===void 0?{}:n,A=Gv(),k=Tf(),B=Wv(l,{relative:x});return se.useCallback(O=>{if(rV(O,o)){O.preventDefault();let W=d!==void 0?d:Rv(k)===Rv(B);A(l,{replace:W,state:y,preventScrollReset:E,relative:x,viewTransition:u})}},[k,A,B,d,y,o,l,E,x,u])}function xV(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let _V=0,wV=()=>"__"+String(++_V)+"__";function CV(){let{router:l}=HP($x.UseSubmit),{basename:n}=se.useContext(hc),o=GI();return se.useCallback(function(d,y){y===void 0&&(y={}),xV();let{action:E,method:x,encType:u,formData:A,body:k}=oV(d,n);if(y.navigate===!1){let B=y.fetcherKey||wV();l.fetch(B,o,y.action||E,{preventScrollReset:y.preventScrollReset,formData:A,body:k,formMethod:y.method||x,formEncType:y.encType||u,flushSync:y.flushSync})}else l.navigate(y.action||E,{preventScrollReset:y.preventScrollReset,formData:A,body:k,formMethod:y.method||x,formEncType:y.encType||u,replace:y.replace,state:y.state,fromRouteId:o,flushSync:y.flushSync,viewTransition:y.viewTransition})},[l,n,o])}function NV(l,n){let{relative:o}=n===void 0?{}:n,{basename:d}=se.useContext(hc),y=se.useContext(td);y||Zi(!1,"useFormAction must be used inside a RouteContext");let[E]=y.matches.slice(-1),x=hp({},Wv(l||".",{relative:o})),u=Tf();if(l==null){x.search=u.search;let A=new URLSearchParams(x.search),k=A.getAll("index");if(k.some(O=>O==="")){A.delete("index"),k.filter(W=>W).forEach(W=>A.append("index",W));let O=A.toString();x.search=O?"?"+O:""}}return(!l||l===".")&&E.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(x.pathname=x.pathname==="/"?d:Xu([d,x.pathname])),Rv(x)}function SV(l,n){n===void 0&&(n={});let o=se.useContext(qP);o==null&&Zi(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=HP($x.useViewTransitionState),y=Wv(l,{relative:n.relative});if(!o.isTransitioning)return!1;let E=ph(o.currentLocation.pathname,d)||o.currentLocation.pathname,x=ph(o.nextLocation.pathname,d)||o.nextLocation.pathname;return pC(y.pathname,x)!=null||pC(y.pathname,E)!=null}const EV="modulepreload",DV=function(l){return"/"+l},JD={},Zv=function(n,o,d){let y=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),u=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));y=Promise.allSettled(o.map(A=>{if(A=DV(A),A in JD)return;JD[A]=!0;const k=A.endsWith(".css"),B=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${B}`))return;const O=document.createElement("link");if(O.rel=k?"stylesheet":EV,k||(O.as="script"),O.crossOrigin="",O.href=A,u&&O.setAttribute("nonce",u),document.head.appendChild(O),k)return new Promise((W,ne)=>{O.addEventListener("load",W),O.addEventListener("error",()=>ne(new Error(`Unable to preload CSS for ${A}`)))})}))}function E(x){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=x,window.dispatchEvent(u),!u.defaultPrevented)throw x}return y.then(x=>{for(const u of x||[])u.status==="rejected"&&E(u.reason);return n().catch(E)})},TV=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...o)=>Zv(async()=>{const{default:d}=await Promise.resolve().then(()=>vp);return{default:d}},void 0).then(({default:d})=>d(...o)):n=fetch,(...o)=>n(...o)};class JC extends Error{constructor(n,o="FunctionsError",d){super(n),this.name=o,this.context=d}}class PV extends JC{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class QD extends JC{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class eT extends JC{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var vC;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(vC||(vC={}));var jV=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};class kV{constructor(n,{headers:o={},customFetch:d,region:y=vC.Any}={}){this.url=n,this.headers=o,this.region=y,this.fetch=TV(d)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,o={}){var d;return jV(this,void 0,void 0,function*(){try{const{headers:y,method:E,body:x}=o;let u={},{region:A}=o;A||(A=this.region);const k=new URL(`${this.url}/${n}`);A&&A!=="any"&&(u["x-region"]=A,k.searchParams.set("forceFunctionRegion",A));let B;x&&(y&&!Object.prototype.hasOwnProperty.call(y,"Content-Type")||!y)&&(typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",B=x):typeof x=="string"?(u["Content-Type"]="text/plain",B=x):typeof FormData<"u"&&x instanceof FormData?B=x:(u["Content-Type"]="application/json",B=JSON.stringify(x)));const O=yield this.fetch(k.toString(),{method:E||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),y),body:B}).catch(ke=>{throw new PV(ke)}),W=O.headers.get("x-relay-error");if(W&&W==="true")throw new QD(O);if(!O.ok)throw new eT(O);let ne=((d=O.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),me;return ne==="application/json"?me=yield O.json():ne==="application/octet-stream"?me=yield O.blob():ne==="text/event-stream"?me=O:ne==="multipart/form-data"?me=yield O.formData():me=yield O.text(),{data:me,error:null,response:O}}catch(y){return{data:null,error:y,response:y instanceof eT||y instanceof QD?y.context:void 0}}})}}var ma={},QC={},t0={},Kv={},n0={},r0={},AV=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fp=AV();const MV=fp.fetch,GP=fp.fetch.bind(fp),WP=fp.Headers,RV=fp.Request,LV=fp.Response,vp=Object.freeze(Object.defineProperty({__proto__:null,Headers:WP,Request:RV,Response:LV,default:GP,fetch:MV},Symbol.toStringTag,{value:"Module"})),IV=rI(vp);var i0={};Object.defineProperty(i0,"__esModule",{value:!0});let VV=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}};i0.default=VV;var ZP=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r0,"__esModule",{value:!0});const zV=ZP(IV),OV=ZP(i0);let BV=class{constructor(n){var o,d;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(o=n.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=n.signal,this.isMaybeSingle=(d=n.isMaybeSingle)!==null&&d!==void 0?d:!1,n.fetch?this.fetch=n.fetch:typeof fetch>"u"?this.fetch=zV.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,o){return this.headers=new Headers(this.headers),this.headers.set(n,o),this}then(n,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let y=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async E=>{var x,u,A,k;let B=null,O=null,W=null,ne=E.status,me=E.statusText;if(E.ok){if(this.method!=="HEAD"){const we=await E.text();we===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?O=we:O=JSON.parse(we))}const De=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),Ae=(A=E.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");De&&Ae&&Ae.length>1&&(W=parseInt(Ae[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(B={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,W=null,ne=406,me="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const De=await E.text();try{B=JSON.parse(De),Array.isArray(B)&&E.status===404&&(O=[],B=null,ne=200,me="OK")}catch{E.status===404&&De===""?(ne=204,me="No Content"):B={message:De}}if(B&&this.isMaybeSingle&&(!((k=B==null?void 0:B.details)===null||k===void 0)&&k.includes("0 rows"))&&(B=null,ne=200,me="OK"),B&&this.shouldThrowOnError)throw new OV.default(B)}return{error:B,data:O,count:W,status:ne,statusText:me}});return this.shouldThrowOnError||(y=y.catch(E=>{var x,u,A;return{error:{message:`${(x=E==null?void 0:E.name)!==null&&x!==void 0?x:"FetchError"}: ${E==null?void 0:E.message}`,details:`${(u=E==null?void 0:E.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(A=E==null?void 0:E.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),y.then(n,o)}returns(){return this}overrideTypes(){return this}};r0.default=BV;var FV=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(n0,"__esModule",{value:!0});const UV=FV(r0);let $V=class extends UV.default{select(n){let o=!1;const d=(n??"*").split("").map(y=>/\s/.test(y)&&!o?"":(y==='"'&&(o=!o),y)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:o=!0,nullsFirst:d,foreignTable:y,referencedTable:E=y}={}){const x=E?`${E}.order`:"order",u=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${u?`${u},`:""}${n}.${o?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:o,referencedTable:d=o}={}){const y=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(y,`${n}`),this}range(n,o,{foreignTable:d,referencedTable:y=d}={}){const E=typeof y>"u"?"offset":`${y}.offset`,x=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(E,`${n}`),this.url.searchParams.set(x,`${o-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:o=!1,settings:d=!1,buffers:y=!1,wal:E=!1,format:x="text"}={}){var u;const A=[n?"analyze":null,o?"verbose":null,d?"settings":null,y?"buffers":null,E?"wal":null].filter(Boolean).join("|"),k=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${k}"; options=${A};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};n0.default=$V;var qV=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Kv,"__esModule",{value:!0});const HV=qV(n0);let GV=class extends HV.default{eq(n,o){return this.url.searchParams.append(n,`eq.${o}`),this}neq(n,o){return this.url.searchParams.append(n,`neq.${o}`),this}gt(n,o){return this.url.searchParams.append(n,`gt.${o}`),this}gte(n,o){return this.url.searchParams.append(n,`gte.${o}`),this}lt(n,o){return this.url.searchParams.append(n,`lt.${o}`),this}lte(n,o){return this.url.searchParams.append(n,`lte.${o}`),this}like(n,o){return this.url.searchParams.append(n,`like.${o}`),this}likeAllOf(n,o){return this.url.searchParams.append(n,`like(all).{${o.join(",")}}`),this}likeAnyOf(n,o){return this.url.searchParams.append(n,`like(any).{${o.join(",")}}`),this}ilike(n,o){return this.url.searchParams.append(n,`ilike.${o}`),this}ilikeAllOf(n,o){return this.url.searchParams.append(n,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(n,o){return this.url.searchParams.append(n,`ilike(any).{${o.join(",")}}`),this}is(n,o){return this.url.searchParams.append(n,`is.${o}`),this}in(n,o){const d=Array.from(new Set(o)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(n,`in.(${d})`),this}contains(n,o){return typeof o=="string"?this.url.searchParams.append(n,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(n,`cs.{${o.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(o)}`),this}containedBy(n,o){return typeof o=="string"?this.url.searchParams.append(n,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(n,`cd.{${o.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(o)}`),this}rangeGt(n,o){return this.url.searchParams.append(n,`sr.${o}`),this}rangeGte(n,o){return this.url.searchParams.append(n,`nxl.${o}`),this}rangeLt(n,o){return this.url.searchParams.append(n,`sl.${o}`),this}rangeLte(n,o){return this.url.searchParams.append(n,`nxr.${o}`),this}rangeAdjacent(n,o){return this.url.searchParams.append(n,`adj.${o}`),this}overlaps(n,o){return typeof o=="string"?this.url.searchParams.append(n,`ov.${o}`):this.url.searchParams.append(n,`ov.{${o.join(",")}}`),this}textSearch(n,o,{config:d,type:y}={}){let E="";y==="plain"?E="pl":y==="phrase"?E="ph":y==="websearch"&&(E="w");const x=d===void 0?"":`(${d})`;return this.url.searchParams.append(n,`${E}fts${x}.${o}`),this}match(n){return Object.entries(n).forEach(([o,d])=>{this.url.searchParams.append(o,`eq.${d}`)}),this}not(n,o,d){return this.url.searchParams.append(n,`not.${o}.${d}`),this}or(n,{foreignTable:o,referencedTable:d=o}={}){const y=d?`${d}.or`:"or";return this.url.searchParams.append(y,`(${n})`),this}filter(n,o,d){return this.url.searchParams.append(n,`${o}.${d}`),this}};Kv.default=GV;var WV=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t0,"__esModule",{value:!0});const yv=WV(Kv);let ZV=class{constructor(n,{headers:o={},schema:d,fetch:y}){this.url=n,this.headers=new Headers(o),this.schema=d,this.fetch=y}select(n,{head:o=!1,count:d}={}){const y=o?"HEAD":"GET";let E=!1;const x=(n??"*").split("").map(u=>/\s/.test(u)&&!E?"":(u==='"'&&(E=!E),u)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new yv.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:o,defaultToNull:d=!0}={}){var y;const E="POST";if(o&&this.headers.append("Prefer",`count=${o}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const x=n.reduce((u,A)=>u.concat(Object.keys(A)),[]);if(x.length>0){const u=[...new Set(x)].map(A=>`"${A}"`);this.url.searchParams.set("columns",u.join(","))}}return new yv.default({method:E,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}upsert(n,{onConflict:o,ignoreDuplicates:d=!1,count:y,defaultToNull:E=!0}={}){var x;const u="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),y&&this.headers.append("Prefer",`count=${y}`),E||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const A=n.reduce((k,B)=>k.concat(Object.keys(B)),[]);if(A.length>0){const k=[...new Set(A)].map(B=>`"${B}"`);this.url.searchParams.set("columns",k.join(","))}}return new yv.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(n,{count:o}={}){var d;const y="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new yv.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:n}={}){var o;const d="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new yv.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};t0.default=ZV;var KP=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(QC,"__esModule",{value:!0});const KV=KP(t0),YV=KP(Kv);let XV=class YP{constructor(n,{headers:o={},schema:d,fetch:y}={}){this.url=n,this.headers=new Headers(o),this.schemaName=d,this.fetch=y}from(n){const o=new URL(`${this.url}/${n}`);return new KV.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new YP(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,o={},{head:d=!1,get:y=!1,count:E}={}){var x;let u;const A=new URL(`${this.url}/rpc/${n}`);let k;d||y?(u=d?"HEAD":"GET",Object.entries(o).filter(([O,W])=>W!==void 0).map(([O,W])=>[O,Array.isArray(W)?`{${W.join(",")}}`:`${W}`]).forEach(([O,W])=>{A.searchParams.append(O,W)})):(u="POST",k=o);const B=new Headers(this.headers);return E&&B.set("Prefer",`count=${E}`),new YV.default({method:u,url:A,headers:B,schema:this.schemaName,body:k,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}};QC.default=XV;var yp=Oa&&Oa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ma,"__esModule",{value:!0});ma.PostgrestError=ma.PostgrestBuilder=ma.PostgrestTransformBuilder=ma.PostgrestFilterBuilder=ma.PostgrestQueryBuilder=ma.PostgrestClient=void 0;const XP=yp(QC);ma.PostgrestClient=XP.default;const JP=yp(t0);ma.PostgrestQueryBuilder=JP.default;const QP=yp(Kv);ma.PostgrestFilterBuilder=QP.default;const ej=yp(n0);ma.PostgrestTransformBuilder=ej.default;const tj=yp(r0);ma.PostgrestBuilder=tj.default;const nj=yp(i0);ma.PostgrestError=nj.default;var JV=ma.default={PostgrestClient:XP.default,PostgrestQueryBuilder:JP.default,PostgrestFilterBuilder:QP.default,PostgrestTransformBuilder:ej.default,PostgrestBuilder:tj.default,PostgrestError:nj.default};const{PostgrestClient:QV,PostgrestQueryBuilder:L6,PostgrestFilterBuilder:I6,PostgrestTransformBuilder:V6,PostgrestBuilder:z6,PostgrestError:O6}=JV;class e3{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const o=parseInt(process.versions.node.split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let o=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(o+=`

Suggested solution: ${n.workaround}`),new Error(o)}static createWebSocket(n,o){const d=this.getWebSocketConstructor();return new d(n,o)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const t3="2.15.1",n3=`realtime-js/${t3}`,r3="1.0.0",yC=1e4,i3=1e3,s3=100;var Sv;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Sv||(Sv={}));var zs;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(zs||(zs={}));var uc;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(uc||(uc={}));var bC;(function(l){l.websocket="websocket"})(bC||(bC={}));var Ef;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Ef||(Ef={}));class o3{constructor(){this.HEADER_LENGTH=1}decode(n,o){return n.constructor===ArrayBuffer?o(this._binaryDecode(n)):o(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const o=new DataView(n),d=new TextDecoder;return this._decodeBroadcast(n,o,d)}_decodeBroadcast(n,o,d){const y=o.getUint8(1),E=o.getUint8(2);let x=this.HEADER_LENGTH+2;const u=d.decode(n.slice(x,x+y));x=x+y;const A=d.decode(n.slice(x,x+E));x=x+E;const k=JSON.parse(d.decode(n.slice(x,n.byteLength)));return{ref:null,topic:u,event:A,payload:k}}}class rj{constructor(n,o){this.callback=n,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ei;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Ei||(Ei={}));const tT=(l,n,o={})=>{var d;const y=(d=o.skipTypes)!==null&&d!==void 0?d:[];return Object.keys(n).reduce((E,x)=>(E[x]=a3(x,l,n,y),E),{})},a3=(l,n,o,d)=>{const y=n.find(u=>u.name===l),E=y==null?void 0:y.type,x=o[l];return E&&!d.includes(E)?ij(E,x):xC(x)},ij=(l,n)=>{if(l.charAt(0)==="_"){const o=l.slice(1,l.length);return d3(n,o)}switch(l){case Ei.bool:return l3(n);case Ei.float4:case Ei.float8:case Ei.int2:case Ei.int4:case Ei.int8:case Ei.numeric:case Ei.oid:return c3(n);case Ei.json:case Ei.jsonb:return u3(n);case Ei.timestamp:return h3(n);case Ei.abstime:case Ei.date:case Ei.daterange:case Ei.int4range:case Ei.int8range:case Ei.money:case Ei.reltime:case Ei.text:case Ei.time:case Ei.timestamptz:case Ei.timetz:case Ei.tsrange:case Ei.tstzrange:return xC(n);default:return xC(n)}},xC=l=>l,l3=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},c3=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},u3=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},d3=(l,n)=>{if(typeof l!="string")return l;const o=l.length-1,d=l[o];if(l[0]==="{"&&d==="}"){let E;const x=l.slice(1,o);try{E=JSON.parse("["+x+"]")}catch{E=x?x.split(","):[]}return E.map(u=>ij(n,u))}return l},h3=l=>typeof l=="string"?l.replace(" ","T"):l,sj=l=>{let n=l;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class F1{constructor(n,o,d={},y=yC){this.channel=n,this.event=o,this.payload=d,this.timeout=y,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,o){var d;return this._hasReceived(n)&&o((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:n,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:o}){this.recHooks.filter(d=>d.status===n).forEach(d=>d.callback(o))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var nT;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(nT||(nT={}));class Ev{constructor(n,o){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=(o==null?void 0:o.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},y=>{const{onJoin:E,onLeave:x,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ev.syncState(this.state,y,E,x),this.pendingDiffs.forEach(A=>{this.state=Ev.syncDiff(this.state,A,E,x)}),this.pendingDiffs=[],u()}),this.channel._on(d.diff,{},y=>{const{onJoin:E,onLeave:x,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(y):(this.state=Ev.syncDiff(this.state,y,E,x),u())}),this.onJoin((y,E,x)=>{this.channel._trigger("presence",{event:"join",key:y,currentPresences:E,newPresences:x})}),this.onLeave((y,E,x)=>{this.channel._trigger("presence",{event:"leave",key:y,currentPresences:E,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,o,d,y){const E=this.cloneDeep(n),x=this.transformState(o),u={},A={};return this.map(E,(k,B)=>{x[k]||(A[k]=B)}),this.map(x,(k,B)=>{const O=E[k];if(O){const W=B.map(De=>De.presence_ref),ne=O.map(De=>De.presence_ref),me=B.filter(De=>ne.indexOf(De.presence_ref)<0),ke=O.filter(De=>W.indexOf(De.presence_ref)<0);me.length>0&&(u[k]=me),ke.length>0&&(A[k]=ke)}else u[k]=B}),this.syncDiff(E,{joins:u,leaves:A},d,y)}static syncDiff(n,o,d,y){const{joins:E,leaves:x}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return d||(d=()=>{}),y||(y=()=>{}),this.map(E,(u,A)=>{var k;const B=(k=n[u])!==null&&k!==void 0?k:[];if(n[u]=this.cloneDeep(A),B.length>0){const O=n[u].map(ne=>ne.presence_ref),W=B.filter(ne=>O.indexOf(ne.presence_ref)<0);n[u].unshift(...W)}d(u,B,A)}),this.map(x,(u,A)=>{let k=n[u];if(!k)return;const B=A.map(O=>O.presence_ref);k=k.filter(O=>B.indexOf(O.presence_ref)<0),n[u]=k,y(u,k,A),k.length===0&&delete n[u]}),n}static map(n,o){return Object.getOwnPropertyNames(n).map(d=>o(d,n[d]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((o,d)=>{const y=n[d];return"metas"in y?o[d]=y.metas.map(E=>(E.presence_ref=E.phx_ref,delete E.phx_ref,delete E.phx_ref_prev,E)):o[d]=y,o},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rT;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(rT||(rT={}));var Dv;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Dv||(Dv={}));var Ku;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Ku||(Ku={}));class eN{constructor(n,o={config:{}},d){this.topic=n,this.params=o,this.socket=d,this.bindings={},this.state=zs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new F1(this,uc.join,this.params,this.timeout),this.rejoinTimer=new rj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(y=>y.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zs.closed,this.socket._remove(this)}),this._onError(y=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,y),this.state=zs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",y=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,y),this.state=zs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(uc.reply,{},(y,E)=>{this._trigger(this._replyEventName(E),y)}),this.presence=new Ev(this),this.broadcastEndpointURL=sj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,o=this.timeout){var d,y;if(this.socket.isConnected()||this.socket.connect(),this.state==zs.closed){const{config:{broadcast:E,presence:x,private:u}}=this.params,A=(y=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(W=>W.filter))!==null&&y!==void 0?y:[],k=!!this.bindings[Dv.PRESENCE]&&this.bindings[Dv.PRESENCE].length>0,B={},O={broadcast:E,presence:Object.assign(Object.assign({},x),{enabled:k}),postgres_changes:A,private:u};this.socket.accessTokenValue&&(B.access_token=this.socket.accessTokenValue),this._onError(W=>n==null?void 0:n(Ku.CHANNEL_ERROR,W)),this._onClose(()=>n==null?void 0:n(Ku.CLOSED)),this.updateJoinPayload(Object.assign({config:O},B)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:W})=>{var ne;if(this.socket.setAuth(),W===void 0){n==null||n(Ku.SUBSCRIBED);return}else{const me=this.bindings.postgres_changes,ke=(ne=me==null?void 0:me.length)!==null&&ne!==void 0?ne:0,De=[];for(let Ae=0;Ae<ke;Ae++){const we=me[Ae],{filter:{event:fe,schema:Ve,table:ze,filter:Je}}=we,Ye=W&&W[Ae];if(Ye&&Ye.event===fe&&Ye.schema===Ve&&Ye.table===ze&&Ye.filter===Je)De.push(Object.assign(Object.assign({},we),{id:Ye.id}));else{this.unsubscribe(),this.state=zs.errored,n==null||n(Ku.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=De,n&&n(Ku.SUBSCRIBED);return}}).receive("error",W=>{this.state=zs.errored,n==null||n(Ku.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(W).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ku.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,o={}){return await this.send({type:"presence",event:"track",payload:n},o.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,o,d){return this.state===zs.joined&&n===Dv.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,o,d)}async send(n,o={}){var d,y;if(!this._canPush()&&n.type==="broadcast"){const{event:E,payload:x}=n,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:E,payload:x,private:this.private}]})};try{const k=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);return await((y=k.body)===null||y===void 0?void 0:y.cancel()),k.ok?"ok":"error"}catch(k){return k.name==="AbortError"?"timed out":"error"}}else return new Promise(E=>{var x,u,A;const k=this._push(n.type,n,o.timeout||this.timeout);n.type==="broadcast"&&!(!((A=(u=(x=this.params)===null||x===void 0?void 0:x.config)===null||u===void 0?void 0:u.broadcast)===null||A===void 0)&&A.ack)&&E("ok"),k.receive("ok",()=>E("ok")),k.receive("error",()=>E("error")),k.receive("timeout",()=>E("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=zs.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(uc.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(y=>{d=new F1(this,uc.leave,{},n),d.receive("ok",()=>{o(),y("ok")}).receive("timeout",()=>{o(),y("timed out")}).receive("error",()=>{y("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d==null||d.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zs.closed,this.bindings={}}async _fetchWithTimeout(n,o,d){const y=new AbortController,E=setTimeout(()=>y.abort(),d),x=await this.socket.fetch(n,Object.assign(Object.assign({},o),{signal:y.signal}));return clearTimeout(E),x}_push(n,o,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let y=new F1(this,n,o,d);return this._canPush()?y.send():this._addToPushBuffer(y),y}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>s3){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(n,o,d){return o}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,o,d){var y,E;const x=n.toLocaleLowerCase(),{close:u,error:A,leave:k,join:B}=uc;if(d&&[u,A,k,B].indexOf(x)>=0&&d!==this._joinRef())return;let W=this._onMessage(x,o,d);if(o&&!W)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(y=this.bindings.postgres_changes)===null||y===void 0||y.filter(ne=>{var me,ke,De;return((me=ne.filter)===null||me===void 0?void 0:me.event)==="*"||((De=(ke=ne.filter)===null||ke===void 0?void 0:ke.event)===null||De===void 0?void 0:De.toLocaleLowerCase())===x}).map(ne=>ne.callback(W,d)):(E=this.bindings[x])===null||E===void 0||E.filter(ne=>{var me,ke,De,Ae,we,fe;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in ne){const Ve=ne.id,ze=(me=ne.filter)===null||me===void 0?void 0:me.event;return Ve&&((ke=o.ids)===null||ke===void 0?void 0:ke.includes(Ve))&&(ze==="*"||(ze==null?void 0:ze.toLocaleLowerCase())===((De=o.data)===null||De===void 0?void 0:De.type.toLocaleLowerCase()))}else{const Ve=(we=(Ae=ne==null?void 0:ne.filter)===null||Ae===void 0?void 0:Ae.event)===null||we===void 0?void 0:we.toLocaleLowerCase();return Ve==="*"||Ve===((fe=o==null?void 0:o.event)===null||fe===void 0?void 0:fe.toLocaleLowerCase())}else return ne.type.toLocaleLowerCase()===x}).map(ne=>{if(typeof W=="object"&&"ids"in W){const me=W.data,{schema:ke,table:De,commit_timestamp:Ae,type:we,errors:fe}=me;W=Object.assign(Object.assign({},{schema:ke,table:De,commit_timestamp:Ae,eventType:we,new:{},old:{},errors:fe}),this._getPayloadRecords(me))}ne.callback(W,d)})}_isClosed(){return this.state===zs.closed}_isJoined(){return this.state===zs.joined}_isJoining(){return this.state===zs.joining}_isLeaving(){return this.state===zs.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,o,d){const y=n.toLocaleLowerCase(),E={type:y,filter:o,callback:d};return this.bindings[y]?this.bindings[y].push(E):this.bindings[y]=[E],this}_off(n,o){const d=n.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(y=>{var E;return!(((E=y.type)===null||E===void 0?void 0:E.toLocaleLowerCase())===d&&eN.isEqual(y.filter,o))})),this}static isEqual(n,o){if(Object.keys(n).length!==Object.keys(o).length)return!1;for(const d in n)if(n[d]!==o[d])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(uc.close,{},n)}_onError(n){this._on(uc.error,{},o=>n(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zs.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const o={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(o.new=tT(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(o.old=tT(n.columns,n.old_record)),o}}const iT=()=>{},xx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f3=[1e3,2e3,5e3,1e4],m3=1e4,p3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g3{constructor(n,o){var d;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yC,this.transport=null,this.heartbeatIntervalMs=xx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iT,this.ref=0,this.reconnectTimer=null,this.logger=iT,this.conn=null,this.sendBuffer=[],this.serializer=new o3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=y=>{let E;return y?E=y:typeof fetch>"u"?E=(...x)=>Zv(async()=>{const{default:u}=await Promise.resolve().then(()=>vp);return{default:u}},void 0).then(({default:u})=>u(...x)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):E=fetch,(...x)=>E(...x)},!(!((d=o==null?void 0:o.params)===null||d===void 0)&&d.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${n}/${bC.websocket}`,this.httpEndpoint=sj(n),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o==null?void 0:o.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e3.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const o=n.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:r3}))}disconnect(n,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},n?this.conn.close(n,o??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const o=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const n=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,o,d){this.logger(n,o,d)}connectionState(){switch(this.conn&&this.conn.readyState){case Sv.connecting:return Ef.Connecting;case Sv.open:return Ef.Open;case Sv.closing:return Ef.Closing;default:return Ef.Closed}}isConnected(){return this.connectionState()===Ef.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,o={config:{}}){const d=`realtime:${n}`,y=this.getChannels().find(E=>E.topic===d);if(y)return y;{const E=new eN(`realtime:${n}`,o,this);return this.channels.push(E),E}}push(n){const{topic:o,event:d,payload:y,ref:E}=n,x=()=>{this.encode(n,u=>{var A;(A=this.conn)===null||A===void 0||A.send(u)})};this.log("push",`${o} ${d} (${E})`,y),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(i3,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},xx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let o=this.channels.find(d=>d.topic===n&&(d._isJoined()||d._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${n}"`),o.unsubscribe())}_remove(n){this.channels=this.channels.filter(o=>o.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,o=>{o.topic==="phoenix"&&o.event==="phx_reply"&&this.heartbeatCallback(o.payload.status==="ok"?"ok":"error"),o.ref&&o.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:d,event:y,payload:E,ref:x}=o,u=x?`(${x})`:"",A=E.status||"";this.log("receive",`${A} ${d} ${y} ${u}`.trim(),E),this.channels.filter(k=>k._isMember(d)).forEach(k=>k._trigger(y,E,x)),this._triggerStateCallbacks("message",o)})}_clearTimer(n){var o;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this.workerRef.terminate()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var o;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(uc.error))}_appendParams(n,o){if(Object.keys(o).length===0)return n;const d=n.match(/\?/)?"&":"?",y=new URLSearchParams(o);return`${n}${d}${y}`}_workerObjectUrl(n){let o;if(n)o=n;else{const d=new Blob([p3],{type:"application/javascript"});o=URL.createObjectURL(d)}return o}_setConnectionState(n,o=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(n=null){let o;n?o=n:this.accessToken?o=await this.accessToken():o=this.accessTokenValue,this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(d=>{const y={access_token:o,version:n3};o&&d.updateJoinPayload(y),d.joinedOnce&&d._isJoined()&&d._push(uc.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(o=>{this.log("error",`error setting auth in ${n}`,o)})}_triggerStateCallbacks(n,o){try{this.stateChangeCallbacks[n].forEach(d=>{try{d(o)}catch(y){this.log("error",`error in ${n} callback`,y)}})}catch(d){this.log("error",`error triggering ${n} callbacks`,d)}}_setupReconnectionTimer(){this.reconnectTimer=new rj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var o,d,y,E,x,u,A,k;if(this.transport=(o=n==null?void 0:n.transport)!==null&&o!==void 0?o:null,this.timeout=(d=n==null?void 0:n.timeout)!==null&&d!==void 0?d:yC,this.heartbeatIntervalMs=(y=n==null?void 0:n.heartbeatIntervalMs)!==null&&y!==void 0?y:xx.HEARTBEAT_INTERVAL,this.worker=(E=n==null?void 0:n.worker)!==null&&E!==void 0?E:!1,this.accessToken=(x=n==null?void 0:n.accessToken)!==null&&x!==void 0?x:null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=n==null?void 0:n.reconnectAfterMs)!==null&&u!==void 0?u:B=>f3[B-1]||m3,this.encode=(A=n==null?void 0:n.encode)!==null&&A!==void 0?A:(B,O)=>O(JSON.stringify(B)),this.decode=(k=n==null?void 0:n.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class tN extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Os(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class v3 extends tN{constructor(n,o,d){super(n),this.name="StorageApiError",this.status=o,this.statusCode=d}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _C extends tN{constructor(n,o){super(n),this.name="StorageUnknownError",this.originalError=o}}var y3=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};const oj=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...o)=>Zv(async()=>{const{default:d}=await Promise.resolve().then(()=>vp);return{default:d}},void 0).then(({default:d})=>d(...o)):n=fetch,(...o)=>n(...o)},b3=()=>y3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zv(()=>Promise.resolve().then(()=>vp),void 0)).Response:Response}),wC=l=>{if(Array.isArray(l))return l.map(o=>wC(o));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([o,d])=>{const y=o.replace(/([-_][a-z])/gi,E=>E.toUpperCase().replace(/[-_]/g,""));n[y]=wC(d)}),n},x3=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var Pf=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};const U1=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),_3=(l,n,o)=>Pf(void 0,void 0,void 0,function*(){const d=yield b3();l instanceof d&&!(o!=null&&o.noResolveJson)?l.json().then(y=>{const E=l.status||500,x=(y==null?void 0:y.statusCode)||E+"";n(new v3(U1(y),E,x))}).catch(y=>{n(new _C(U1(y),y))}):n(new _C(U1(l),l))}),w3=(l,n,o,d)=>{const y={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"||!d?y:(x3(d)?(y.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),y.body=JSON.stringify(d)):y.body=d,n!=null&&n.duplex&&(y.duplex=n.duplex),Object.assign(Object.assign({},y),o))};function Yv(l,n,o,d,y,E){return Pf(this,void 0,void 0,function*(){return new Promise((x,u)=>{l(o,w3(n,d,y,E)).then(A=>{if(!A.ok)throw A;return d!=null&&d.noResolveJson?A:A.json()}).then(A=>x(A)).catch(A=>_3(A,u,d))})})}function qx(l,n,o,d){return Pf(this,void 0,void 0,function*(){return Yv(l,"GET",n,o,d)})}function Yc(l,n,o,d,y){return Pf(this,void 0,void 0,function*(){return Yv(l,"POST",n,d,y,o)})}function CC(l,n,o,d,y){return Pf(this,void 0,void 0,function*(){return Yv(l,"PUT",n,d,y,o)})}function C3(l,n,o,d){return Pf(this,void 0,void 0,function*(){return Yv(l,"HEAD",n,Object.assign(Object.assign({},o),{noResolveJson:!0}),d)})}function aj(l,n,o,d,y){return Pf(this,void 0,void 0,function*(){return Yv(l,"DELETE",n,d,y,o)})}var Xo=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};const N3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class S3{constructor(n,o={},d,y){this.url=n,this.headers=o,this.bucketId=d,this.fetch=oj(y)}uploadOrUpdate(n,o,d,y){return Xo(this,void 0,void 0,function*(){try{let E;const x=Object.assign(Object.assign({},sT),y);let u=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(x.upsert)});const A=x.metadata;typeof Blob<"u"&&d instanceof Blob?(E=new FormData,E.append("cacheControl",x.cacheControl),A&&E.append("metadata",this.encodeMetadata(A)),E.append("",d)):typeof FormData<"u"&&d instanceof FormData?(E=d,E.append("cacheControl",x.cacheControl),A&&E.append("metadata",this.encodeMetadata(A))):(E=d,u["cache-control"]=`max-age=${x.cacheControl}`,u["content-type"]=x.contentType,A&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),y!=null&&y.headers&&(u=Object.assign(Object.assign({},u),y.headers));const k=this._removeEmptyFolders(o),B=this._getFinalPath(k),O=yield(n=="PUT"?CC:Yc)(this.fetch,`${this.url}/object/${B}`,E,Object.assign({headers:u},x!=null&&x.duplex?{duplex:x.duplex}:{}));return{data:{path:k,id:O.Id,fullPath:O.Key},error:null}}catch(E){if(Os(E))return{data:null,error:E};throw E}})}upload(n,o,d){return Xo(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,o,d)})}uploadToSignedUrl(n,o,d,y){return Xo(this,void 0,void 0,function*(){const E=this._removeEmptyFolders(n),x=this._getFinalPath(E),u=new URL(this.url+`/object/upload/sign/${x}`);u.searchParams.set("token",o);try{let A;const k=Object.assign({upsert:sT.upsert},y),B=Object.assign(Object.assign({},this.headers),{"x-upsert":String(k.upsert)});typeof Blob<"u"&&d instanceof Blob?(A=new FormData,A.append("cacheControl",k.cacheControl),A.append("",d)):typeof FormData<"u"&&d instanceof FormData?(A=d,A.append("cacheControl",k.cacheControl)):(A=d,B["cache-control"]=`max-age=${k.cacheControl}`,B["content-type"]=k.contentType);const O=yield CC(this.fetch,u.toString(),A,{headers:B});return{data:{path:E,fullPath:O.Key},error:null}}catch(A){if(Os(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(n,o){return Xo(this,void 0,void 0,function*(){try{let d=this._getFinalPath(n);const y=Object.assign({},this.headers);o!=null&&o.upsert&&(y["x-upsert"]="true");const E=yield Yc(this.fetch,`${this.url}/object/upload/sign/${d}`,{},{headers:y}),x=new URL(this.url+E.url),u=x.searchParams.get("token");if(!u)throw new tN("No token returned by API");return{data:{signedUrl:x.toString(),path:n,token:u},error:null}}catch(d){if(Os(d))return{data:null,error:d};throw d}})}update(n,o,d){return Xo(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,o,d)})}move(n,o,d){return Xo(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:o,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers}),error:null}}catch(y){if(Os(y))return{data:null,error:y};throw y}})}copy(n,o,d){return Xo(this,void 0,void 0,function*(){try{return{data:{path:(yield Yc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:o,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers})).Key},error:null}}catch(y){if(Os(y))return{data:null,error:y};throw y}})}createSignedUrl(n,o,d){return Xo(this,void 0,void 0,function*(){try{let y=this._getFinalPath(n),E=yield Yc(this.fetch,`${this.url}/object/sign/${y}`,Object.assign({expiresIn:o},d!=null&&d.transform?{transform:d.transform}:{}),{headers:this.headers});const x=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return E={signedUrl:encodeURI(`${this.url}${E.signedURL}${x}`)},{data:E,error:null}}catch(y){if(Os(y))return{data:null,error:y};throw y}})}createSignedUrls(n,o,d){return Xo(this,void 0,void 0,function*(){try{const y=yield Yc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:o,paths:n},{headers:this.headers}),E=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return{data:y.map(x=>Object.assign(Object.assign({},x),{signedUrl:x.signedURL?encodeURI(`${this.url}${x.signedURL}${E}`):null})),error:null}}catch(y){if(Os(y))return{data:null,error:y};throw y}})}download(n,o){return Xo(this,void 0,void 0,function*(){const y=typeof(o==null?void 0:o.transform)<"u"?"render/image/authenticated":"object",E=this.transformOptsToQueryString((o==null?void 0:o.transform)||{}),x=E?`?${E}`:"";try{const u=this._getFinalPath(n);return{data:yield(yield qx(this.fetch,`${this.url}/${y}/${u}${x}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Os(u))return{data:null,error:u};throw u}})}info(n){return Xo(this,void 0,void 0,function*(){const o=this._getFinalPath(n);try{const d=yield qx(this.fetch,`${this.url}/object/info/${o}`,{headers:this.headers});return{data:wC(d),error:null}}catch(d){if(Os(d))return{data:null,error:d};throw d}})}exists(n){return Xo(this,void 0,void 0,function*(){const o=this._getFinalPath(n);try{return yield C3(this.fetch,`${this.url}/object/${o}`,{headers:this.headers}),{data:!0,error:null}}catch(d){if(Os(d)&&d instanceof _C){const y=d.originalError;if([400,404].includes(y==null?void 0:y.status))return{data:!1,error:d}}throw d}})}getPublicUrl(n,o){const d=this._getFinalPath(n),y=[],E=o!=null&&o.download?`download=${o.download===!0?"":o.download}`:"";E!==""&&y.push(E);const u=typeof(o==null?void 0:o.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((o==null?void 0:o.transform)||{});A!==""&&y.push(A);let k=y.join("&");return k!==""&&(k=`?${k}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${d}${k}`)}}}remove(n){return Xo(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(o){if(Os(o))return{data:null,error:o};throw o}})}list(n,o,d){return Xo(this,void 0,void 0,function*(){try{const y=Object.assign(Object.assign(Object.assign({},N3),o),{prefix:n||""});return{data:yield Yc(this.fetch,`${this.url}/object/list/${this.bucketId}`,y,{headers:this.headers},d),error:null}}catch(y){if(Os(y))return{data:null,error:y};throw y}})}listV2(n,o){return Xo(this,void 0,void 0,function*(){try{const d=Object.assign({},n);return{data:yield Yc(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(Os(d))return{data:null,error:d};throw d}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const o=[];return n.width&&o.push(`width=${n.width}`),n.height&&o.push(`height=${n.height}`),n.resize&&o.push(`resize=${n.resize}`),n.format&&o.push(`format=${n.format}`),n.quality&&o.push(`quality=${n.quality}`),o.join("&")}}const E3="2.11.0",D3={"X-Client-Info":`storage-js/${E3}`};var Qm=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};class T3{constructor(n,o={},d,y){const E=new URL(n);y!=null&&y.useNewHostname&&/supabase\.(co|in|red)$/.test(E.hostname)&&!E.hostname.includes("storage.supabase.")&&(E.hostname=E.hostname.replace("supabase.","storage.supabase.")),this.url=E.href,this.headers=Object.assign(Object.assign({},D3),o),this.fetch=oj(d)}listBuckets(){return Qm(this,void 0,void 0,function*(){try{return{data:yield qx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Os(n))return{data:null,error:n};throw n}})}getBucket(n){return Qm(this,void 0,void 0,function*(){try{return{data:yield qx(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(o){if(Os(o))return{data:null,error:o};throw o}})}createBucket(n,o={public:!1}){return Qm(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(Os(d))return{data:null,error:d};throw d}})}updateBucket(n,o){return Qm(this,void 0,void 0,function*(){try{return{data:yield CC(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(Os(d))return{data:null,error:d};throw d}})}emptyBucket(n){return Qm(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(o){if(Os(o))return{data:null,error:o};throw o}})}deleteBucket(n){return Qm(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(o){if(Os(o))return{data:null,error:o};throw o}})}}class P3 extends T3{constructor(n,o={},d,y){super(n,o,d,y)}from(n){return new S3(this.url,this.headers,n,this.fetch)}}const j3="2.56.0";let wv="";typeof Deno<"u"?wv="deno":typeof document<"u"?wv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wv="react-native":wv="node";const k3={"X-Client-Info":`supabase-js-${wv}/${j3}`},A3={headers:k3},M3={schema:"public"},R3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L3={};var I3=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};const V3=l=>{let n;return l?n=l:typeof fetch>"u"?n=GP:n=fetch,(...o)=>n(...o)},z3=()=>typeof Headers>"u"?WP:Headers,O3=(l,n,o)=>{const d=V3(o),y=z3();return(E,x)=>I3(void 0,void 0,void 0,function*(){var u;const A=(u=yield n())!==null&&u!==void 0?u:l;let k=new y(x==null?void 0:x.headers);return k.has("apikey")||k.set("apikey",l),k.has("Authorization")||k.set("Authorization",`Bearer ${A}`),d(E,Object.assign(Object.assign({},x),{headers:k}))})};var B3=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};function F3(l){return l.endsWith("/")?l:l+"/"}function U3(l,n){var o,d;const{db:y,auth:E,realtime:x,global:u}=l,{db:A,auth:k,realtime:B,global:O}=n,W={db:Object.assign(Object.assign({},A),y),auth:Object.assign(Object.assign({},k),E),realtime:Object.assign(Object.assign({},B),x),storage:{},global:Object.assign(Object.assign(Object.assign({},O),u),{headers:Object.assign(Object.assign({},(o=O==null?void 0:O.headers)!==null&&o!==void 0?o:{}),(d=u==null?void 0:u.headers)!==null&&d!==void 0?d:{})}),accessToken:()=>B3(this,void 0,void 0,function*(){return""})};return l.accessToken?W.accessToken=l.accessToken:delete W.accessToken,W}const lj="2.71.1",ip=30*1e3,NC=3,$1=NC*ip,$3="http://localhost:9999",q3="supabase.auth.token",H3={"X-Client-Info":`gotrue-js/${lj}`},SC="X-Supabase-Api-Version",cj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W3=10*60*1e3;class nN extends Error{constructor(n,o,d){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=d}}function ir(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class Z3 extends nN{constructor(n,o,d){super(n,o,d),this.name="AuthApiError",this.status=o,this.code=d}}function K3(l){return ir(l)&&l.name==="AuthApiError"}class uj extends nN{constructor(n,o){super(n),this.name="AuthUnknownError",this.originalError=o}}class yh extends nN{constructor(n,o,d,y){super(n,d,y),this.name=o,this.status=d}}class ah extends yh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y3(l){return ir(l)&&l.name==="AuthSessionMissingError"}class _x extends yh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wx extends yh{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Cx extends yh{constructor(n,o=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X3(l){return ir(l)&&l.name==="AuthImplicitGrantRedirectError"}class oT extends yh{constructor(n,o=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class EC extends yh{constructor(n,o){super(n,"AuthRetryableFetchError",o,void 0)}}function q1(l){return ir(l)&&l.name==="AuthRetryableFetchError"}class aT extends yh{constructor(n,o,d){super(n,"AuthWeakPasswordError",o,"weak_password"),this.reasons=d}}class DC extends yh{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lT=` 	
\r=`.split(""),J3=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<lT.length;n+=1)l[lT[n].charCodeAt(0)]=-2;for(let n=0;n<Hx.length;n+=1)l[Hx[n].charCodeAt(0)]=n;return l})();function cT(l,n,o){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const d=n.queue>>n.queuedBits-6&63;o(Hx[d]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const d=n.queue>>n.queuedBits-6&63;o(Hx[d]),n.queuedBits-=6}}function dj(l,n,o){const d=J3[l];if(d>-1)for(n.queue=n.queue<<6|d,n.queuedBits+=6;n.queuedBits>=8;)o(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function uT(l){const n=[],o=x=>{n.push(String.fromCodePoint(x))},d={utf8seq:0,codepoint:0},y={queue:0,queuedBits:0},E=x=>{t5(x,d,o)};for(let x=0;x<l.length;x+=1)dj(l.charCodeAt(x),y,E);return n.join("")}function Q3(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function e5(l,n){for(let o=0;o<l.length;o+=1){let d=l.charCodeAt(o);if(d>55295&&d<=56319){const y=(d-55296)*1024&65535;d=(l.charCodeAt(o+1)-56320&65535|y)+65536,o+=1}Q3(d,n)}}function t5(l,n,o){if(n.utf8seq===0){if(l<=127){o(l);return}for(let d=1;d<6;d+=1)if(!(l>>7-d&1)){n.utf8seq=d;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&o(n.codepoint)}}function n5(l){const n=[],o={queue:0,queuedBits:0},d=y=>{n.push(y)};for(let y=0;y<l.length;y+=1)dj(l.charCodeAt(y),o,d);return new Uint8Array(n)}function r5(l){const n=[];return e5(l,o=>n.push(o)),new Uint8Array(n)}function i5(l){const n=[],o={queue:0,queuedBits:0},d=y=>{n.push(y)};return l.forEach(y=>cT(y,o,d)),cT(null,o,d),n.join("")}function s5(l){return Math.round(Date.now()/1e3)+l}function o5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const cc=()=>typeof window<"u"&&typeof document<"u",yf={tested:!1,writable:!1},hj=()=>{if(!cc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yf.tested)return yf.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),yf.tested=!0,yf.writable=!0}catch{yf.tested=!0,yf.writable=!1}return yf.writable};function a5(l){const n={},o=new URL(l);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((y,E)=>{n[E]=y})}catch{}return o.searchParams.forEach((d,y)=>{n[y]=d}),n}const fj=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...o)=>Zv(async()=>{const{default:d}=await Promise.resolve().then(()=>vp);return{default:d}},void 0).then(({default:d})=>d(...o)):n=fetch,(...o)=>n(...o)},l5=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",sp=async(l,n,o)=>{await l.setItem(n,JSON.stringify(o))},bf=async(l,n)=>{const o=await l.getItem(n);if(!o)return null;try{return JSON.parse(o)}catch{return o}},oh=async(l,n)=>{await l.removeItem(n)};class s0{constructor(){this.promise=new s0.promiseConstructor((n,o)=>{this.resolve=n,this.reject=o})}}s0.promiseConstructor=Promise;function H1(l){const n=l.split(".");if(n.length!==3)throw new DC("Invalid JWT structure");for(let d=0;d<n.length;d++)if(!G3.test(n[d]))throw new DC("JWT not in base64url format");return{header:JSON.parse(uT(n[0])),payload:JSON.parse(uT(n[1])),signature:n5(n[2]),raw:{header:n[0],payload:n[1]}}}async function c5(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function u5(l,n){return new Promise((d,y)=>{(async()=>{for(let E=0;E<1/0;E++)try{const x=await l(E);if(!n(E,null,x)){d(x);return}}catch(x){if(!n(E,x)){y(x);return}}})()})}function d5(l){return("0"+l.toString(16)).substr(-2)}function h5(){const n=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=o.length;let y="";for(let E=0;E<56;E++)y+=o.charAt(Math.floor(Math.random()*d));return y}return crypto.getRandomValues(n),Array.from(n,d5).join("")}async function f5(l){const o=new TextEncoder().encode(l),d=await crypto.subtle.digest("SHA-256",o),y=new Uint8Array(d);return Array.from(y).map(E=>String.fromCharCode(E)).join("")}async function m5(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const o=await f5(l);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ep(l,n,o=!1){const d=h5();let y=d;o&&(y+="/PASSWORD_RECOVERY"),await sp(l,`${n}-code-verifier`,y);const E=await m5(d);return[E,d===E?"plain":"s256"]}const p5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g5(l){const n=l.headers.get(SC);if(!n||!n.match(p5))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function v5(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function y5(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const b5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tp(l){if(!b5.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function G1(){const l={};return new Proxy(l,{get:(n,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dT(l){return JSON.parse(JSON.stringify(l))}var x5=function(l,n){var o={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&n.indexOf(d)<0&&(o[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,d=Object.getOwnPropertySymbols(l);y<d.length;y++)n.indexOf(d[y])<0&&Object.prototype.propertyIsEnumerable.call(l,d[y])&&(o[d[y]]=l[d[y]]);return o};const _f=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),_5=[502,503,504];async function hT(l){var n;if(!l5(l))throw new EC(_f(l),0);if(_5.includes(l.status))throw new EC(_f(l),l.status);let o;try{o=await l.json()}catch(E){throw new uj(_f(E),E)}let d;const y=g5(l);if(y&&y.getTime()>=cj["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?d=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(d=o.error_code),d){if(d==="weak_password")throw new aT(_f(o),l.status,((n=o.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(d==="session_not_found")throw new ah}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((E,x)=>E&&typeof x=="string",!0))throw new aT(_f(o),l.status,o.weak_password.reasons);throw new Z3(_f(o),l.status||500,d)}const w5=(l,n,o,d)=>{const y={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"?y:(y.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),y.body=JSON.stringify(d),Object.assign(Object.assign({},y),o))};async function br(l,n,o,d){var y;const E=Object.assign({},d==null?void 0:d.headers);E[SC]||(E[SC]=cj["2024-01-01"].name),d!=null&&d.jwt&&(E.Authorization=`Bearer ${d.jwt}`);const x=(y=d==null?void 0:d.query)!==null&&y!==void 0?y:{};d!=null&&d.redirectTo&&(x.redirect_to=d.redirectTo);const u=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",A=await C5(l,n,o+u,{headers:E,noResolveJson:d==null?void 0:d.noResolveJson},{},d==null?void 0:d.body);return d!=null&&d.xform?d==null?void 0:d.xform(A):{data:Object.assign({},A),error:null}}async function C5(l,n,o,d,y,E){const x=w5(n,d,y,E);let u;try{u=await l(o,Object.assign({},x))}catch(A){throw console.error(A),new EC(_f(A),0)}if(u.ok||await hT(u),d!=null&&d.noResolveJson)return u;try{return await u.json()}catch(A){await hT(A)}}function Zu(l){var n;let o=null;D5(l)&&(o=Object.assign({},l),l.expires_at||(o.expires_at=s5(l.expires_in)));const d=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:o,user:d},error:null}}function fT(l){const n=Zu(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((o,d)=>o&&typeof d=="string",!0)&&(n.data.weak_password=l.weak_password),n}function uh(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function N5(l){return{data:l,error:null}}function S5(l){const{action_link:n,email_otp:o,hashed_token:d,redirect_to:y,verification_type:E}=l,x=x5(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:n,email_otp:o,hashed_token:d,redirect_to:y,verification_type:E},A=Object.assign({},x);return{data:{properties:u,user:A},error:null}}function E5(l){return l}function D5(l){return l.access_token&&l.refresh_token&&l.expires_in}const W1=["global","local","others"];var T5=function(l,n){var o={};for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&n.indexOf(d)<0&&(o[d]=l[d]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,d=Object.getOwnPropertySymbols(l);y<d.length;y++)n.indexOf(d[y])<0&&Object.prototype.propertyIsEnumerable.call(l,d[y])&&(o[d[y]]=l[d[y]]);return o};class P5{constructor({url:n="",headers:o={},fetch:d}){this.url=n,this.headers=o,this.fetch=fj(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,o=W1[0]){if(W1.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${W1.join(", ")}`);try{return await br(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(d){if(ir(d))return{data:null,error:d};throw d}}async inviteUserByEmail(n,o={}){try{return await br(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:uh})}catch(d){if(ir(d))return{data:{user:null},error:d};throw d}}async generateLink(n){try{const{options:o}=n,d=T5(n,["options"]),y=Object.assign(Object.assign({},d),o);return"newEmail"in d&&(y.new_email=d==null?void 0:d.newEmail,delete y.newEmail),await br(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:y,headers:this.headers,xform:S5,redirectTo:o==null?void 0:o.redirectTo})}catch(o){if(ir(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(n){try{return await br(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:uh})}catch(o){if(ir(o))return{data:{user:null},error:o};throw o}}async listUsers(n){var o,d,y,E,x,u,A;try{const k={nextPage:null,lastPage:0,total:0},B=await br(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(o=n==null?void 0:n.page)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:"",per_page:(E=(y=n==null?void 0:n.perPage)===null||y===void 0?void 0:y.toString())!==null&&E!==void 0?E:""},xform:E5});if(B.error)throw B.error;const O=await B.json(),W=(x=B.headers.get("x-total-count"))!==null&&x!==void 0?x:0,ne=(A=(u=B.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&A!==void 0?A:[];return ne.length>0&&(ne.forEach(me=>{const ke=parseInt(me.split(";")[0].split("=")[1].substring(0,1)),De=JSON.parse(me.split(";")[1].split("=")[1]);k[`${De}Page`]=ke}),k.total=parseInt(W)),{data:Object.assign(Object.assign({},O),k),error:null}}catch(k){if(ir(k))return{data:{users:[]},error:k};throw k}}async getUserById(n){tp(n);try{return await br(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:uh})}catch(o){if(ir(o))return{data:{user:null},error:o};throw o}}async updateUserById(n,o){tp(n);try{return await br(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:o,headers:this.headers,xform:uh})}catch(d){if(ir(d))return{data:{user:null},error:d};throw d}}async deleteUser(n,o=!1){tp(n);try{return await br(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:o},xform:uh})}catch(d){if(ir(d))return{data:{user:null},error:d};throw d}}async _listFactors(n){tp(n.userId);try{const{data:o,error:d}=await br(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:y=>({data:{factors:y},error:null})});return{data:o,error:d}}catch(o){if(ir(o))return{data:null,error:o};throw o}}async _deleteFactor(n){tp(n.userId),tp(n.id);try{return{data:await br(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(o){if(ir(o))return{data:null,error:o};throw o}}}function mT(l={}){return{getItem:n=>l[n]||null,setItem:(n,o)=>{l[n]=o},removeItem:n=>{delete l[n]}}}function j5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const np={debug:!!(globalThis&&hj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mj extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class k5 extends mj{}async function A5(l,n,o){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const d=new globalThis.AbortController;return n>0&&setTimeout(()=>{d.abort(),np.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async y=>{if(y){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,y.name);try{return await o()}finally{np.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,y.name)}}else{if(n===0)throw np.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new k5(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(np.debug)try{const E=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(E,null,"  "))}catch(E){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",E)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}}))}j5();const M5={url:$3,storageKey:q3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pT(l,n,o){return await o()}const rp={};class Vv{constructor(n){var o,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vv.nextInstanceID,Vv.nextInstanceID+=1,this.instanceID>0&&cc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const y=Object.assign(Object.assign({},M5),n);if(this.logDebugMessages=!!y.debug,typeof y.debug=="function"&&(this.logger=y.debug),this.persistSession=y.persistSession,this.storageKey=y.storageKey,this.autoRefreshToken=y.autoRefreshToken,this.admin=new P5({url:y.url,headers:y.headers,fetch:y.fetch}),this.url=y.url,this.headers=y.headers,this.fetch=fj(y.fetch),this.lock=y.lock||pT,this.detectSessionInUrl=y.detectSessionInUrl,this.flowType=y.flowType,this.hasCustomAuthorizationHeader=y.hasCustomAuthorizationHeader,y.lock?this.lock=y.lock:cc()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=A5:this.lock=pT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(y.storage?this.storage=y.storage:hj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mT(this.memoryStorage)),y.userStorage&&(this.userStorage=y.userStorage)):(this.memoryStorage={},this.storage=mT(this.memoryStorage)),cc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(E){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",E)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async E=>{this._debug("received broadcast notification from other tab or client",E),await this._notifyAllSubscribers(E.data.event,E.data.session,!1)})}this.initialize()}get jwks(){var n,o;return(o=(n=rp[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(n){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,o;return(o=(n=rp[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lj}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const o=a5(window.location.href);let d="none";if(this._isImplicitGrantCallback(o)?d="implicit":await this._isPKCECallback(o)&&(d="pkce"),cc()&&this.detectSessionInUrl&&d!=="none"){const{data:y,error:E}=await this._getSessionFromURL(o,d);if(E){if(this._debug("#_initialize()","error detecting session from URL",E),X3(E)){const A=(n=E.details)===null||n===void 0?void 0:n.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:E}}return await this._removeSession(),{error:E}}const{session:x,redirectType:u}=y;return this._debug("#_initialize()","detected session in URL",x,"redirect type",u),await this._saveSession(x),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return ir(o)?{error:o}:{error:new uj("Unexpected error during initialization",o)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var o,d,y;try{const E=await br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(y=n==null?void 0:n.options)===null||y===void 0?void 0:y.captchaToken}},xform:Zu}),{data:x,error:u}=E;if(u||!x)return{data:{user:null,session:null},error:u};const A=x.session,k=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(E){if(ir(E))return{data:{user:null,session:null},error:E};throw E}}async signUp(n){var o,d,y;try{let E;if("email"in n){const{email:B,password:O,options:W}=n;let ne=null,me=null;this.flowType==="pkce"&&([ne,me]=await ep(this.storage,this.storageKey)),E=await br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:W==null?void 0:W.emailRedirectTo,body:{email:B,password:O,data:(o=W==null?void 0:W.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken},code_challenge:ne,code_challenge_method:me},xform:Zu})}else if("phone"in n){const{phone:B,password:O,options:W}=n;E=await br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:B,password:O,data:(d=W==null?void 0:W.data)!==null&&d!==void 0?d:{},channel:(y=W==null?void 0:W.channel)!==null&&y!==void 0?y:"sms",gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken}},xform:Zu})}else throw new wx("You must provide either an email or phone number and a password");const{data:x,error:u}=E;if(u||!x)return{data:{user:null,session:null},error:u};const A=x.session,k=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(E){if(ir(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithPassword(n){try{let o;if("email"in n){const{email:E,password:x,options:u}=n;o=await br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:E,password:x,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:fT})}else if("phone"in n){const{phone:E,password:x,options:u}=n;o=await br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:E,password:x,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:fT})}else throw new wx("You must provide either an email or phone number and a password");const{data:d,error:y}=o;return y?{data:{user:null,session:null},error:y}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new _x}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:y})}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOAuth(n){var o,d,y,E;return await this._handleProviderSignIn(n.provider,{redirectTo:(o=n.options)===null||o===void 0?void 0:o.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:(E=n.options)===null||E===void 0?void 0:E.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:o}=n;if(o==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}async signInWithSolana(n){var o,d,y,E,x,u,A,k,B,O,W,ne;let me,ke;if("message"in n)me=n.message,ke=n.signature;else{const{chain:De,wallet:Ae,statement:we,options:fe}=n;let Ve;if(cc())if(typeof Ae=="object")Ve=Ae;else{const Je=window;if("solana"in Je&&typeof Je.solana=="object"&&("signIn"in Je.solana&&typeof Je.solana.signIn=="function"||"signMessage"in Je.solana&&typeof Je.solana.signMessage=="function"))Ve=Je.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Ae!="object"||!(fe!=null&&fe.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Ve=Ae}const ze=new URL((o=fe==null?void 0:fe.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in Ve&&Ve.signIn){const Je=await Ve.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},fe==null?void 0:fe.signInWithSolana),{version:"1",domain:ze.host,uri:ze.href}),we?{statement:we}:null));let Ye;if(Array.isArray(Je)&&Je[0]&&typeof Je[0]=="object")Ye=Je[0];else if(Je&&typeof Je=="object"&&"signedMessage"in Je&&"signature"in Je)Ye=Je;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Ye&&"signature"in Ye&&(typeof Ye.signedMessage=="string"||Ye.signedMessage instanceof Uint8Array)&&Ye.signature instanceof Uint8Array)me=typeof Ye.signedMessage=="string"?Ye.signedMessage:new TextDecoder().decode(Ye.signedMessage),ke=Ye.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Ve)||typeof Ve.signMessage!="function"||!("publicKey"in Ve)||typeof Ve!="object"||!Ve.publicKey||!("toBase58"in Ve.publicKey)||typeof Ve.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");me=[`${ze.host} wants you to sign in with your Solana account:`,Ve.publicKey.toBase58(),...we?["",we,""]:[""],"Version: 1",`URI: ${ze.href}`,`Issued At: ${(y=(d=fe==null?void 0:fe.signInWithSolana)===null||d===void 0?void 0:d.issuedAt)!==null&&y!==void 0?y:new Date().toISOString()}`,...!((E=fe==null?void 0:fe.signInWithSolana)===null||E===void 0)&&E.notBefore?[`Not Before: ${fe.signInWithSolana.notBefore}`]:[],...!((x=fe==null?void 0:fe.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${fe.signInWithSolana.expirationTime}`]:[],...!((u=fe==null?void 0:fe.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${fe.signInWithSolana.chainId}`]:[],...!((A=fe==null?void 0:fe.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${fe.signInWithSolana.nonce}`]:[],...!((k=fe==null?void 0:fe.signInWithSolana)===null||k===void 0)&&k.requestId?[`Request ID: ${fe.signInWithSolana.requestId}`]:[],...!((O=(B=fe==null?void 0:fe.signInWithSolana)===null||B===void 0?void 0:B.resources)===null||O===void 0)&&O.length?["Resources",...fe.signInWithSolana.resources.map(Ye=>`- ${Ye}`)]:[]].join(`
`);const Je=await Ve.signMessage(new TextEncoder().encode(me),"utf8");if(!Je||!(Je instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");ke=Je}}try{const{data:De,error:Ae}=await br(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:me,signature:i5(ke)},!((W=n.options)===null||W===void 0)&&W.captchaToken?{gotrue_meta_security:{captcha_token:(ne=n.options)===null||ne===void 0?void 0:ne.captchaToken}}:null),xform:Zu});if(Ae)throw Ae;return!De||!De.session||!De.user?{data:{user:null,session:null},error:new _x}:(De.session&&(await this._saveSession(De.session),await this._notifyAllSubscribers("SIGNED_IN",De.session)),{data:Object.assign({},De),error:Ae})}catch(De){if(ir(De))return{data:{user:null,session:null},error:De};throw De}}async _exchangeCodeForSession(n){const o=await bf(this.storage,`${this.storageKey}-code-verifier`),[d,y]=(o??"").split("/");try{const{data:E,error:x}=await br(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:d},xform:Zu});if(await oh(this.storage,`${this.storageKey}-code-verifier`),x)throw x;return!E||!E.session||!E.user?{data:{user:null,session:null,redirectType:null},error:new _x}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign(Object.assign({},E),{redirectType:y??null}),error:x})}catch(E){if(ir(E))return{data:{user:null,session:null,redirectType:null},error:E};throw E}}async signInWithIdToken(n){try{const{options:o,provider:d,token:y,access_token:E,nonce:x}=n,u=await br(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:y,access_token:E,nonce:x,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zu}),{data:A,error:k}=u;return k?{data:{user:null,session:null},error:k}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new _x}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:k})}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOtp(n){var o,d,y,E,x;try{if("email"in n){const{email:u,options:A}=n;let k=null,B=null;this.flowType==="pkce"&&([k,B]=await ep(this.storage,this.storageKey));const{error:O}=await br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(d=A==null?void 0:A.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:k,code_challenge_method:B},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:O}}if("phone"in n){const{phone:u,options:A}=n,{data:k,error:B}=await br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(y=A==null?void 0:A.data)!==null&&y!==void 0?y:{},create_user:(E=A==null?void 0:A.shouldCreateUser)!==null&&E!==void 0?E:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(x=A==null?void 0:A.channel)!==null&&x!==void 0?x:"sms"}});return{data:{user:null,session:null,messageId:k==null?void 0:k.message_id},error:B}}throw new wx("You must provide either an email or phone number.")}catch(u){if(ir(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(n){var o,d;try{let y,E;"options"in n&&(y=(o=n.options)===null||o===void 0?void 0:o.redirectTo,E=(d=n.options)===null||d===void 0?void 0:d.captchaToken);const{data:x,error:u}=await br(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:E}}),redirectTo:y,xform:Zu});if(u)throw u;if(!x)throw new Error("An error occurred on token verification.");const A=x.session,k=x.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:k,session:A},error:null}}catch(y){if(ir(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSSO(n){var o,d,y;try{let E=null,x=null;return this.flowType==="pkce"&&([E,x]=await ep(this.storage,this.storageKey)),await br(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(d=(o=n.options)===null||o===void 0?void 0:o.redirectTo)!==null&&d!==void 0?d:void 0}),!((y=n==null?void 0:n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:E,code_challenge_method:x}),headers:this.headers,xform:N5})}catch(E){if(ir(E))return{data:null,error:E};throw E}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:o},error:d}=n;if(d)throw d;if(!o)throw new ah;const{error:y}=await br(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return{data:{user:null,session:null},error:y}})}catch(n){if(ir(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const o=`${this.url}/resend`;if("email"in n){const{email:d,type:y,options:E}=n,{error:x}=await br(this.fetch,"POST",o,{headers:this.headers,body:{email:d,type:y,gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},redirectTo:E==null?void 0:E.emailRedirectTo});return{data:{user:null,session:null},error:x}}else if("phone"in n){const{phone:d,type:y,options:E}=n,{data:x,error:u}=await br(this.fetch,"POST",o,{headers:this.headers,body:{phone:d,type:y,gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:u}}throw new wx("You must provide either an email or phone number and a type")}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async o=>o))}async _acquireLock(n,o){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),y=(async()=>(await d,await o()))();return this.pendingInLock.push((async()=>{try{await y}catch{}})()),y}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=o();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const y=[...this.pendingInLock];await Promise.all(y),this.pendingInLock.splice(0,y.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await n(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const o=await bf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?n=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const d=n.expires_at?n.expires_at*1e3-Date.now()<$1:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",n.expires_at),!d){if(this.userStorage){const x=await bf(this.userStorage,this.storageKey+"-user");x!=null&&x.user?n.user=x.user:n.user=G1()}if(this.storage.isServer&&n.user){let x=this.suppressGetSessionWarning;n=new Proxy(n,{get:(A,k,B)=>(!x&&k==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),x=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,k,B))})}return{data:{session:n},error:null}}const{session:y,error:E}=await this._callRefreshToken(n.refresh_token);return E?{data:{session:null},error:E}:{data:{session:y},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:uh}):await this._useSession(async o=>{var d,y,E;const{data:x,error:u}=o;if(u)throw u;return!(!((d=x.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ah}:await br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(E=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&E!==void 0?E:void 0,xform:uh})})}catch(o){if(ir(o))return Y3(o)&&(await this._removeSession(),await oh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}}async updateUser(n,o={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,o))}async _updateUser(n,o={}){try{return await this._useSession(async d=>{const{data:y,error:E}=d;if(E)throw E;if(!y.session)throw new ah;const x=y.session;let u=null,A=null;this.flowType==="pkce"&&n.email!=null&&([u,A]=await ep(this.storage,this.storageKey));const{data:k,error:B}=await br(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o==null?void 0:o.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:u,code_challenge_method:A}),jwt:x.access_token,xform:uh});if(B)throw B;return x.user=k.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),{data:{user:x.user},error:null}})}catch(d){if(ir(d))return{data:{user:null},error:d};throw d}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ah;const o=Date.now()/1e3;let d=o,y=!0,E=null;const{payload:x}=H1(n.access_token);if(x.exp&&(d=x.exp,y=d<=o),y){const{session:u,error:A}=await this._callRefreshToken(n.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!u)return{data:{user:null,session:null},error:null};E=u}else{const{data:u,error:A}=await this._getUser(n.access_token);if(A)throw A;E={access_token:n.access_token,refresh_token:n.refresh_token,user:u.user,token_type:"bearer",expires_in:d-o,expires_at:d},await this._saveSession(E),await this._notifyAllSubscribers("SIGNED_IN",E)}return{data:{user:E.user,session:E},error:null}}catch(o){if(ir(o))return{data:{session:null,user:null},error:o};throw o}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async o=>{var d;if(!n){const{data:x,error:u}=o;if(u)throw u;n=(d=x.session)!==null&&d!==void 0?d:void 0}if(!(n!=null&&n.refresh_token))throw new ah;const{session:y,error:E}=await this._callRefreshToken(n.refresh_token);return E?{data:{user:null,session:null},error:E}:y?{data:{user:y.user,session:y},error:null}:{data:{user:null,session:null},error:null}})}catch(o){if(ir(o))return{data:{user:null,session:null},error:o};throw o}}async _getSessionFromURL(n,o){try{if(!cc())throw new Cx("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Cx(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new oT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cx("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new oT("No code detected.");const{data:we,error:fe}=await this._exchangeCodeForSession(n.code);if(fe)throw fe;const Ve=new URL(window.location.href);return Ve.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Ve.toString()),{data:{session:we.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:y,access_token:E,refresh_token:x,expires_in:u,expires_at:A,token_type:k}=n;if(!E||!u||!x||!k)throw new Cx("No session defined in URL");const B=Math.round(Date.now()/1e3),O=parseInt(u);let W=B+O;A&&(W=parseInt(A));const ne=W-B;ne*1e3<=ip&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${ne}s, should have been closer to ${O}s`);const me=W-O;B-me>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",me,W,B):B-me<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",me,W,B);const{data:ke,error:De}=await this._getUser(E);if(De)throw De;const Ae={provider_token:d,provider_refresh_token:y,access_token:E,expires_in:O,expires_at:W,refresh_token:x,token_type:k,user:ke.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Ae,redirectType:n.type},error:null}}catch(d){if(ir(d))return{data:{session:null,redirectType:null},error:d};throw d}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const o=await bf(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&o)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async o=>{var d;const{data:y,error:E}=o;if(E)return{error:E};const x=(d=y.session)===null||d===void 0?void 0:d.access_token;if(x){const{error:u}=await this.admin.signOut(x,n);if(u&&!(K3(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return n!=="others"&&(await this._removeSession(),await oh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const o=o5(),d={id:o,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,d),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:d}}}async _emitInitialSession(n){return await this._useSession(async o=>{var d,y;try{const{data:{session:E},error:x}=o;if(x)throw x;await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",E)),this._debug("INITIAL_SESSION","callback id",n,"session",E)}catch(E){await((y=this.stateChangeEmitters.get(n))===null||y===void 0?void 0:y.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",E),console.error(E)}})}async resetPasswordForEmail(n,o={}){let d=null,y=null;this.flowType==="pkce"&&([d,y]=await ep(this.storage,this.storageKey,!0));try{return await br(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:d,code_challenge_method:y,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(E){if(ir(E))return{data:null,error:E};throw E}}async getUserIdentities(){var n;try{const{data:o,error:d}=await this.getUser();if(d)throw d;return{data:{identities:(n=o.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(o){if(ir(o))return{data:null,error:o};throw o}}async linkIdentity(n){var o;try{const{data:d,error:y}=await this._useSession(async E=>{var x,u,A,k,B;const{data:O,error:W}=E;if(W)throw W;const ne=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(x=n.options)===null||x===void 0?void 0:x.redirectTo,scopes:(u=n.options)===null||u===void 0?void 0:u.scopes,queryParams:(A=n.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await br(this.fetch,"GET",ne,{headers:this.headers,jwt:(B=(k=O.session)===null||k===void 0?void 0:k.access_token)!==null&&B!==void 0?B:void 0})});if(y)throw y;return cc()&&!(!((o=n.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d==null?void 0:d.url),{data:{provider:n.provider,url:d==null?void 0:d.url},error:null}}catch(d){if(ir(d))return{data:{provider:n.provider,url:null},error:d};throw d}}async unlinkIdentity(n){try{return await this._useSession(async o=>{var d,y;const{data:E,error:x}=o;if(x)throw x;return await br(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(y=(d=E.session)===null||d===void 0?void 0:d.access_token)!==null&&y!==void 0?y:void 0})})}catch(o){if(ir(o))return{data:null,error:o};throw o}}async _refreshAccessToken(n){const o=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{const d=Date.now();return await u5(async y=>(y>0&&await c5(200*Math.pow(2,y-1)),this._debug(o,"refreshing attempt",y),await br(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Zu})),(y,E)=>{const x=200*Math.pow(2,y);return E&&q1(E)&&Date.now()+x-d<ip})}catch(d){if(this._debug(o,"error",d),ir(d))return{data:{session:null,user:null},error:d};throw d}finally{this._debug(o,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,o){const d=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",o,"url",d),cc()&&!o.skipBrowserRedirect&&window.location.assign(d),{data:{provider:n,url:d},error:null}}async _recoverAndRefresh(){var n,o;const d="#_recoverAndRefresh()";this._debug(d,"begin");try{const y=await bf(this.storage,this.storageKey);if(y&&this.userStorage){let x=await bf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:y.user},await sp(this.userStorage,this.storageKey+"-user",x)),y.user=(n=x==null?void 0:x.user)!==null&&n!==void 0?n:G1()}else if(y&&!y.user&&!y.user){const x=await bf(this.storage,this.storageKey+"-user");x&&(x!=null&&x.user)?(y.user=x.user,await oh(this.storage,this.storageKey+"-user"),await sp(this.storage,this.storageKey,y)):y.user=G1()}if(this._debug(d,"session from storage",y),!this._isValidSession(y)){this._debug(d,"session is not valid"),y!==null&&await this._removeSession();return}const E=((o=y.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<$1;if(this._debug(d,`session has${E?"":" not"} expired with margin of ${$1}s`),E){if(this.autoRefreshToken&&y.refresh_token){const{error:x}=await this._callRefreshToken(y.refresh_token);x&&(console.error(x),q1(x)||(this._debug(d,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(y.user&&y.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:u}=await this._getUser(y.access_token);!u&&(x!=null&&x.user)?(y.user=x.user,await this._saveSession(y),await this._notifyAllSubscribers("SIGNED_IN",y)):this._debug(d,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(d,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",y)}catch(y){this._debug(d,"error",y),console.error(y);return}finally{this._debug(d,"end")}}async _callRefreshToken(n){var o,d;if(!n)throw new ah;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const y=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(y,"begin");try{this.refreshingDeferred=new s0;const{data:E,error:x}=await this._refreshAccessToken(n);if(x)throw x;if(!E.session)throw new ah;await this._saveSession(E.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",E.session);const u={session:E.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(E){if(this._debug(y,"error",E),ir(E)){const x={session:null,error:E};return q1(E)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(x),x}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(E),E}finally{this.refreshingDeferred=null,this._debug(y,"end")}}async _notifyAllSubscribers(n,o,d=!0){const y=`#_notifyAllSubscribers(${n})`;this._debug(y,"begin",o,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:n,session:o});const E=[],x=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(n,o)}catch(A){E.push(A)}});if(await Promise.all(x),E.length>0){for(let u=0;u<E.length;u+=1)console.error(E[u]);throw E[0]}}finally{this._debug(y,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const o=Object.assign({},n),d=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!d&&o.user&&await sp(this.userStorage,this.storageKey+"-user",{user:o.user});const y=Object.assign({},o);delete y.user;const E=dT(y);await sp(this.storage,this.storageKey,E)}else{const y=dT(o);await sp(this.storage,this.storageKey,y)}}async _removeSession(){this._debug("#_removeSession()"),await oh(this.storage,this.storageKey),await oh(this.storage,this.storageKey+"-code-verifier"),await oh(this.storage,this.storageKey+"-user"),this.userStorage&&await oh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&cc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ip);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async o=>{const{data:{session:d}}=o;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const y=Math.floor((d.expires_at*1e3-n)/ip);this._debug("#_autoRefreshTokenTick()",`access token expires in ${y} ticks, a tick lasts ${ip}ms, refresh threshold is ${NC} ticks`),y<=NC&&await this._callRefreshToken(d.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof mj)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const o=`#_onVisibilityChanged(${n})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,o,d){const y=[`provider=${encodeURIComponent(o)}`];if(d!=null&&d.redirectTo&&y.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d!=null&&d.scopes&&y.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[E,x]=await ep(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(E)}`,code_challenge_method:`${encodeURIComponent(x)}`});y.push(u.toString())}if(d!=null&&d.queryParams){const E=new URLSearchParams(d.queryParams);y.push(E.toString())}return d!=null&&d.skipBrowserRedirect&&y.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${n}?${y.join("&")}`}async _unenroll(n){try{return await this._useSession(async o=>{var d;const{data:y,error:E}=o;return E?{data:null,error:E}:await br(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(d=y==null?void 0:y.session)===null||d===void 0?void 0:d.access_token})})}catch(o){if(ir(o))return{data:null,error:o};throw o}}async _enroll(n){try{return await this._useSession(async o=>{var d,y;const{data:E,error:x}=o;if(x)return{data:null,error:x};const u=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:A,error:k}=await br(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(d=E==null?void 0:E.session)===null||d===void 0?void 0:d.access_token});return k?{data:null,error:k}:(n.factorType==="totp"&&(!((y=A==null?void 0:A.totp)===null||y===void 0)&&y.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(o){if(ir(o))return{data:null,error:o};throw o}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var d;const{data:y,error:E}=o;if(E)return{data:null,error:E};const{data:x,error:u}=await br(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(d=y==null?void 0:y.session)===null||d===void 0?void 0:d.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),{data:x,error:u})})}catch(o){if(ir(o))return{data:null,error:o};throw o}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var d;const{data:y,error:E}=o;return E?{data:null,error:E}:await br(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(d=y==null?void 0:y.session)===null||d===void 0?void 0:d.access_token})})}catch(o){if(ir(o))return{data:null,error:o};throw o}})}async _challengeAndVerify(n){const{data:o,error:d}=await this._challenge({factorId:n.factorId});return d?{data:null,error:d}:await this._verify({factorId:n.factorId,challengeId:o.id,code:n.code})}async _listFactors(){const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const d=(n==null?void 0:n.factors)||[],y=d.filter(x=>x.factor_type==="totp"&&x.status==="verified"),E=d.filter(x=>x.factor_type==="phone"&&x.status==="verified");return{data:{all:d,totp:y,phone:E},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var o,d;const{data:{session:y},error:E}=n;if(E)return{data:null,error:E};if(!y)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:x}=H1(y.access_token);let u=null;x.aal&&(u=x.aal);let A=u;((d=(o=y.user.factors)===null||o===void 0?void 0:o.filter(O=>O.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(A="aal2");const B=x.amr||[];return{data:{currentLevel:u,nextLevel:A,currentAuthenticationMethods:B},error:null}}))}async fetchJwk(n,o={keys:[]}){let d=o.keys.find(u=>u.kid===n);if(d)return d;const y=Date.now();if(d=this.jwks.keys.find(u=>u.kid===n),d&&this.jwks_cached_at+W3>y)return d;const{data:E,error:x}=await br(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!E.keys||E.keys.length===0||(this.jwks=E,this.jwks_cached_at=y,d=E.keys.find(u=>u.kid===n),!d)?null:d}async getClaims(n,o={}){try{let d=n;if(!d){const{data:ne,error:me}=await this.getSession();if(me||!ne.session)return{data:null,error:me};d=ne.session.access_token}const{header:y,payload:E,signature:x,raw:{header:u,payload:A}}=H1(d);o!=null&&o.allowExpired||v5(E.exp);const k=!y.alg||y.alg.startsWith("HS")||!y.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(y.kid,o!=null&&o.keys?{keys:o.keys}:o==null?void 0:o.jwks);if(!k){const{error:ne}=await this.getUser(d);if(ne)throw ne;return{data:{claims:E,header:y,signature:x},error:null}}const B=y5(y.alg),O=await crypto.subtle.importKey("jwk",k,B,!0,["verify"]);if(!await crypto.subtle.verify(B,O,x,r5(`${u}.${A}`)))throw new DC("Invalid JWT signature");return{data:{claims:E,header:y,signature:x},error:null}}catch(d){if(ir(d))return{data:null,error:d};throw d}}}Vv.nextInstanceID=0;const R5=Vv;class L5 extends R5{constructor(n){super(n)}}var I5=function(l,n,o,d){function y(E){return E instanceof o?E:new o(function(x){x(E)})}return new(o||(o=Promise))(function(E,x){function u(B){try{k(d.next(B))}catch(O){x(O)}}function A(B){try{k(d.throw(B))}catch(O){x(O)}}function k(B){B.done?E(B.value):y(B.value).then(u,A)}k((d=d.apply(l,n||[])).next())})};class V5{constructor(n,o,d){var y,E,x;if(this.supabaseUrl=n,this.supabaseKey=o,!n)throw new Error("supabaseUrl is required.");if(!o)throw new Error("supabaseKey is required.");const u=F3(n),A=new URL(u);this.realtimeUrl=new URL("realtime/v1",A),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",A),this.storageUrl=new URL("storage/v1",A),this.functionsUrl=new URL("functions/v1",A);const k=`sb-${A.hostname.split(".")[0]}-auth-token`,B={db:M3,realtime:L3,auth:Object.assign(Object.assign({},R3),{storageKey:k}),global:A3},O=U3(d??{},B);this.storageKey=(y=O.auth.storageKey)!==null&&y!==void 0?y:"",this.headers=(E=O.global.headers)!==null&&E!==void 0?E:{},O.accessToken?(this.accessToken=O.accessToken,this.auth=new Proxy({},{get:(W,ne)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(ne)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=O.auth)!==null&&x!==void 0?x:{},this.headers,O.global.fetch),this.fetch=O3(o,this._getAccessToken.bind(this),O.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},O.realtime)),this.rest=new QV(new URL("rest/v1",A).href,{headers:this.headers,schema:O.db.schema,fetch:this.fetch}),this.storage=new P3(this.storageUrl.href,this.headers,this.fetch,d==null?void 0:d.storage),O.accessToken||this._listenForAuthEvents()}get functions(){return new kV(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,o={},d={}){return this.rest.rpc(n,o,d)}channel(n,o={config:{}}){return this.realtime.channel(n,o)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,o;return I5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:d}=yield this.auth.getSession();return(o=(n=d.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:o,detectSessionInUrl:d,storage:y,storageKey:E,flowType:x,lock:u,debug:A},k,B){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L5({url:this.authUrl.href,headers:Object.assign(Object.assign({},O),k),storageKey:E,autoRefreshToken:n,persistSession:o,detectSessionInUrl:d,storage:y,flowType:x,lock:u,debug:A,fetch:B,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new g3(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,d)=>{this._handleTokenChanged(o,"CLIENT",d==null?void 0:d.access_token)})}_handleTokenChanged(n,o,d){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==d?this.changedAccessToken=d:n==="SIGNED_OUT"&&(this.realtime.setAuth(),o=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gT=(l,n,o)=>new V5(l,n,o);function z5(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}z5()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const O5=()=>"http://localhost:3000",B5=()=>"ws://localhost:3000",fo={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:O5(),websocketUrl:B5()}},isDevelopment:!0,isProduction:!1};console.log("🔧 Environment Configuration:",{supabaseUrl:fo.supabase.url?"✅ Set":"❌ Missing",supabaseKey:fo.supabase.anonKey?"✅ Set":"❌ Missing",apiUrl:fo.api.url,websocketUrl:fo.api.websocketUrl,currentHost:window.location.hostname,currentProtocol:window.location.protocol,envVar:"http://localhost:3000"});const F5=()=>{const{url:l,anonKey:n}=fo.supabase;if(console.log("🔧 Validating Supabase configuration:",{url:l?"✅ Set":"❌ Missing",anonKey:n?"✅ Set":"❌ Missing",envVars:{VITE_SUPABASE_URL:"✅ Set",VITE_SUPABASE_ANON_KEY:"✅ Set"}}),!l||l==="your_supabase_project_url"||l==="")throw console.error("❌ Supabase URL validation failed:",{url:l,envVar:"https://gthwmwfwvhyriygpcdlr.supabase.co"}),new Error("Invalid Supabase URL. Please check your environment variables.");if(!n||n==="your_supabase_anon_key_here"||n==="")throw console.error("❌ Supabase anon key validation failed:",{anonKey:n?"SET":"MISSING",envVar:"SET"}),new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(l)}catch(o){throw console.error("❌ Supabase URL format validation failed:",{url:l,error:o}),new Error(`Invalid Supabase URL format: ${l}`)}return console.log("✅ Supabase configuration validated successfully"),{url:l,anonKey:n}},U5=()=>{try{const l=F5(),n=gT(l.url,l.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Supabase client created successfully"),n}catch(l){console.error("❌ Failed to create Supabase client:",l);{console.log("🔄 Creating fallback Supabase client for development...");const n=gT("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Fallback Supabase client created"),n}}},si=U5();class $5{constructor(){mi(this,"currentUser",null);mi(this,"currentSession",null);mi(this,"currentProfile",null);mi(this,"currentDriverAssignment",null);mi(this,"authStateChangeListener",null);mi(this,"_isInitialized",!1);this.initializeAuth()}async initializeAuth(){try{const{data:{session:n},error:o}=await si.auth.getSession();if(o){console.error("❌ Error getting session:",o),this._isInitialized=!0;return}n&&(console.log("🔑 Setting initial session for user:",n.user.email),this.currentSession=n,this.currentUser=n.user,console.log("🔑 Session access token:",n.access_token?"Exists":"Missing"),await this.loadUserProfile(n.user.id));const{data:{subscription:d}}=si.auth.onAuthStateChange(async(y,E)=>{var x;console.log("🔄 Auth state changed:",y,(x=E==null?void 0:E.user)==null?void 0:x.email),this.currentSession=E,this.currentUser=(E==null?void 0:E.user)||null,E&&console.log("🔑 Auth state change - Session access token:",E.access_token?"Exists":"Missing"),E!=null&&E.user?await this.loadUserProfile(E.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()});return this._isInitialized=!0,console.log("✅ Auth service initialized"),()=>d.unsubscribe()}catch(n){console.error("❌ Error initializing auth:",n),this._isInitialized=!0}}async loadUserProfile(n){var o,d,y,E,x,u,A,k,B,O,W,ne,me;try{const ke=(d=(o=this.currentUser)==null?void 0:o.user_metadata)==null?void 0:d.roles;if(ke&&Array.isArray(ke)&&ke.length>1){const Je=window.location.pathname;let Ye="admin";Je.includes("/driver")?Ye="driver":Je.includes("/admin")?Ye="admin":Ye=["siddharthmali.211@gmail.com"].includes(((E=(y=this.currentUser)==null?void 0:y.email)==null?void 0:E.toLowerCase())||"")?"admin":"driver";const{data:ot,error:wt}=await si.from("profiles").select("*").eq("id",n).single();if(wt){console.error("❌ Error loading user profile:",wt),this.setTemporaryProfileWithRoleCheck(n,this.currentUser);return}this.currentProfile={id:ot.id,email:((x=this.currentUser)==null?void 0:x.email)||"",role:Ye,full_name:ot.full_name,first_name:((u=ot.full_name)==null?void 0:u.split(" ")[0])||"",last_name:((A=ot.full_name)==null?void 0:A.split(" ").slice(1).join(" "))||"",created_at:ot.created_at,updated_at:ot.updated_at};return}const{data:Ae,error:we}=await si.from("profiles").select("*").eq("id",n).single();if(we){console.error("❌ Error loading user profile:",we),this.setTemporaryProfileWithRoleCheck(n,this.currentUser);return}const Ve=["siddharthmali.211@gmail.com"].includes(((B=(k=this.currentUser)==null?void 0:k.email)==null?void 0:B.toLowerCase())||""),ze=Ve?"admin":Ae.role;console.log(`🔍 User ${(O=this.currentUser)==null?void 0:O.email} - Database role: ${Ae.role}, Admin check: ${Ve}, Final role: ${ze}`),this.currentProfile={id:Ae.id,email:((W=this.currentUser)==null?void 0:W.email)||"",role:ze,full_name:Ae.full_name,first_name:((ne=Ae.full_name)==null?void 0:ne.split(" ")[0])||"",last_name:((me=Ae.full_name)==null?void 0:me.split(" ").slice(1).join(" "))||"",created_at:Ae.created_at,updated_at:Ae.updated_at}}catch(ke){console.error("❌ Error in loadUserProfile:",ke),this.setTemporaryProfileWithRoleCheck(n,this.currentUser)}}setTemporaryProfileWithRoleCheck(n,o){var x,u,A,k,B,O,W,ne;console.log("🔄 Setting temporary profile with role check for user login");const E=["siddharthmali.211@gmail.com"].includes(((x=o.email)==null?void 0:x.toLowerCase())||"")?"admin":"student";console.log(`🔍 User ${o.email} assigned role: ${E}`),this.currentProfile={id:n,email:o.email||"",role:E,full_name:((u=o.user_metadata)==null?void 0:u.full_name)||((A=o.email)==null?void 0:A.split("@")[0])||"User",first_name:((B=(k=o.user_metadata)==null?void 0:k.full_name)==null?void 0:B.split(" ")[0])||((O=o.email)==null?void 0:O.split("@")[0])||"User",last_name:((ne=(W=o.user_metadata)==null?void 0:W.full_name)==null?void 0:ne.split(" ").slice(1).join(" "))||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}async signIn(n,o){var d;try{console.log("🔐 Starting sign in process for:",n);const y=si.auth.signInWithPassword({email:n,password:o}),E=new Promise((A,k)=>{setTimeout(()=>k(new Error("Authentication timeout")),5e3)}),{data:x,error:u}=await Promise.race([y,E]);if(u)return console.error("❌ Sign in error:",u),{success:!1,error:u.message};if(console.log("✅ Supabase authentication successful"),x.user&&x.session){console.log("👤 User data received:",x.user.email),this.currentUser=x.user,this.currentSession=x.session,console.log("📋 Loading user profile...");try{const A=this.loadUserProfile(x.user.id),k=new Promise((B,O)=>{setTimeout(()=>O(new Error("Profile loading timeout")),3e3)});await Promise.race([A,k]),console.log("✅ Profile loaded:",(d=this.currentProfile)==null?void 0:d.role)}catch(A){console.warn("⚠️ Profile loading failed, using temporary profile:",A),this.setTemporaryProfileWithRoleCheck(x.user.id,x.user)}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return console.error("❌ No user or session data received"),{success:!1,error:"Authentication failed"}}catch(y){return console.error("❌ Sign in error:",y),y instanceof Error&&y.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:y instanceof Error&&y.message.includes("timeout")?{success:!1,error:"Login timed out. Please try again."}:{success:!1,error:"Network error during sign in"}}}async signUp(n,o,d){try{const{data:y,error:E}=await si.auth.signUp({email:n,password:o,options:{data:{full_name:d.full_name,role:d.role||"student"}}});if(E)return console.error("❌ Sign up error:",E),{success:!1,error:E.message};if(y.user){const{error:x}=await si.from("profiles").insert({id:y.user.id,full_name:d.full_name||"Unknown User",role:d.role||"student"});return x?(console.error("❌ Error creating profile:",x),{success:!1,error:"Profile creation failed"}):{success:!0}}return{success:!1,error:"Registration failed"}}catch(y){return console.error("❌ Sign up error:",y),{success:!1,error:"Network error during sign up"}}}async signOut(){try{console.log("🔐 Starting sign out process...");const{error:n}=await si.auth.signOut();return n?(console.error("❌ Sign out error:",n),{success:!1,error:n.message}):(console.log("✅ Sign out successful"),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(n){return console.error("❌ Sign out error:",n),{success:!1,error:"Network error during sign out"}}}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(n){var o;return((o=this.currentProfile)==null?void 0:o.role)===n}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var o,d,y;let n=((o=this.currentSession)==null?void 0:o.access_token)||null;if(!n)try{const E=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const x of E){const u=localStorage.getItem(x);if(u){const A=JSON.parse(u);if(n=((d=A==null?void 0:A.currentSession)==null?void 0:d.access_token)||(A==null?void 0:A.access_token)||((y=A==null?void 0:A.session)==null?void 0:y.access_token)||null,n){console.log(`🔑 Retrieved token from localStorage fallback (${x})`);break}}}}catch(E){console.warn("⚠️ Error reading token from localStorage:",E)}return console.log("🔑 getAccessToken called:",n?"Token exists":"No token","Session:",!!this.currentSession),n}async validateTokenForAPI(){let n=this.getAccessToken(),o=!1;if(!n)return{valid:!1,token:null,refreshed:!1};try{const{data:{user:d},error:y}=await si.auth.getUser(n);if(y||!d){console.log("🔄 Token validation failed, attempting refresh:",y==null?void 0:y.message);const E=await this.refreshSession();if(E.success)n=this.getAccessToken(),o=!0,console.log("✅ Token refreshed successfully");else return console.log("❌ Token refresh failed:",E.error),{valid:!1,token:null,refreshed:!1}}if(n){const{data:{user:E},error:x}=await si.auth.getUser(n);return x||!E?(console.log("❌ Final token validation failed:",x==null?void 0:x.message),{valid:!1,token:null,refreshed:o}):{valid:!0,token:n,refreshed:o}}return{valid:!1,token:null,refreshed:o}}catch(d){return console.error("❌ Token validation error:",d),{valid:!1,token:null,refreshed:!1}}}async refreshSession(){try{if(!this.currentSession)return console.log("🔄 No current session to refresh"),{success:!1,error:"No session to refresh"};const{data:n,error:o}=await si.auth.refreshSession();return o?o.message.includes("Auth session missing")?(console.log("🔄 No session to refresh (expected for unauthenticated users)"),{success:!1,error:"No session to refresh"}):(console.error("❌ Session refresh error:",o),{success:!1,error:o.message}):n.session?(this.currentSession=n.session,this.currentUser=n.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(n){return console.error("❌ Session refresh error:",n),{success:!1,error:"Network error during session refresh"}}}async updateProfile(n){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:o}=await si.from("profiles").update(n).eq("id",this.currentUser.id);return o?(console.error("❌ Profile update error:",o),{success:!1,error:o.message}):(await this.loadUserProfile(this.currentUser.id),{success:!0})}catch(o){return console.error("❌ Profile update error:",o),{success:!1,error:"Network error during profile update"}}}onAuthStateChange(n){this.authStateChangeListener=n}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}async forceFreshLogin(){try{console.log("🔄 Forcing fresh login...");const n=[];for(let o=0;o<localStorage.length;o++){const d=localStorage.key(o);d&&(d.includes("supabase")||d.includes("auth")||d.includes("sb-"))&&n.push(d)}return n.forEach(o=>{localStorage.removeItem(o),console.log(`🗑️ Removed localStorage key: ${o}`)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,console.log("✅ Fresh login state prepared"),{success:!0}}catch(n){return console.error("❌ Error forcing fresh login:",n),{success:!1,error:"Failed to force fresh login"}}}async recoverSession(){var n,o,d,y;try{console.log("🔄 Attempting to recover session from localStorage...");const E=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let x=null,u=null;for(const W of E){const ne=localStorage.getItem(W);if(ne){x=ne,u=W,console.log(`📝 Found session in localStorage key: ${W}`);break}}if(!x)return console.log("📝 No stored session found in any localStorage key"),{success:!1,error:"No stored session"};let A;try{A=JSON.parse(x)}catch(W){return console.log("❌ Failed to parse stored session:",W),{success:!1,error:"Invalid session format"}}const k=((n=A==null?void 0:A.currentSession)==null?void 0:n.access_token)||(A==null?void 0:A.access_token)||((o=A==null?void 0:A.session)==null?void 0:o.access_token);if(!k)return console.log("🔑 No access token found in stored session structure:",A),{success:!1,error:"No access token in stored session"};console.log("🔑 Found access token, validating...");const{data:{user:B},error:O}=await si.auth.getUser(k);return O||!B?(console.log("❌ Stored token is invalid:",O==null?void 0:O.message),u&&localStorage.removeItem(u),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:k,refresh_token:((d=A==null?void 0:A.currentSession)==null?void 0:d.refresh_token)||(A==null?void 0:A.refresh_token),expires_in:((y=A==null?void 0:A.currentSession)==null?void 0:y.expires_in)||(A==null?void 0:A.expires_in),token_type:"bearer",user:B},this.currentUser=B,await this.loadUserProfile(B.id),console.log("✅ Session recovered successfully for user:",B.email),{success:!0})}catch(E){return console.error("❌ Error recovering session:",E),{success:!1,error:"Failed to recover session"}}}async getDriverBusAssignment(n){try{const{data:o,error:d}=await si.from("buses").select("id, number_plate, route_id").eq("assigned_driver_id",n).eq("is_active",!0).single();if(d||!o)return console.error("❌ Error fetching bus assignment:",d),null;let y="";if(o.route_id){const{data:A,error:k}=await si.from("routes").select("name").eq("id",o.route_id).single();!k&&A&&(y=A.name)}let E="Unknown Driver";const{data:x,error:u}=await si.from("profiles").select("full_name").eq("id",n).single();if(!u&&(x!=null&&x.full_name))E=x.full_name;else{const{data:A,error:k}=await si.from("users").select("first_name, last_name").eq("id",n).single();!k&&A&&(E=`${A.first_name||""} ${A.last_name||""}`.trim()||"Unknown Driver")}return{driver_id:n,bus_id:o.id,bus_number:o.number_plate,route_id:o.route_id||"",route_name:y,driver_name:E,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(o){return console.error("❌ Error in getDriverBusAssignment:",o),null}}async storeDriverBusAssignment(n){try{return this.currentDriverAssignment={...n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},console.log("✅ Driver bus assignment stored in memory successfully"),!0}catch(o){return console.error("❌ Error in storeDriverBusAssignment:",o),!1}}async clearDriverBusAssignment(){try{return this.currentDriverAssignment=null,console.log("✅ Driver bus assignment cleared from memory"),!0}catch(n){return console.error("❌ Error in clearDriverBusAssignment:",n),!1}}getCurrentDriverAssignment(){return this.currentDriverAssignment}async validateSession(){try{const{data:{session:n},error:o}=await si.auth.getSession();if(o)return console.error("❌ Session validation error:",o),!1;if(!n)return console.log("❌ No active session found"),!1;const d=new Date(n.expires_at*1e3),y=new Date;if(d.getTime()-y.getTime()<5*60*1e3){console.log("🔄 Session expiring soon, refreshing...");const{data:{session:x},error:u}=await si.auth.refreshSession();if(u)return console.error("❌ Session refresh error:",u),!1;x&&(this.currentSession=x,this.currentUser=x.user,console.log("✅ Session refreshed successfully"))}return!0}catch(n){return console.error("❌ Error validating session:",n),!1}}async validateDriverSession(){var n;try{if(!await this.validateSession())return{isValid:!1,assignment:null};if(((n=this.currentProfile)==null?void 0:n.role)!=="driver")return console.log("❌ User is not a driver"),{isValid:!1,assignment:null};const d=await this.getDriverBusAssignment(this.currentUser.id);return d?(this.currentDriverAssignment=d,{isValid:!0,assignment:d}):(console.log("❌ No active bus assignment found for driver"),{isValid:!1,assignment:null})}catch(o){return console.error("❌ Error validating driver session:",o),{isValid:!1,assignment:null}}}async logout(){var n;try{this.currentUser&&((n=this.currentProfile)==null?void 0:n.role)==="driver"&&await this.clearDriverBusAssignment(),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.currentDriverAssignment=null;const{error:o}=await si.auth.signOut();o?console.error("❌ Error signing out:",o):console.log("✅ Logged out successfully")}catch(o){console.error("❌ Error in logout:",o)}}}const Fr=new $5,q5=fo.api.url;class H5{constructor(n){mi(this,"baseUrl");this.baseUrl=n}async backendRequest(n,o){const y=`${this.baseUrl||fo.api.url}${n}`,E={"Content-Type":"application/json"};try{const u=Fr.getAccessToken();u&&(E.Authorization=`Bearer ${u}`)}catch{console.log("🔓 Public access - no authentication token available")}o!=null&&o.headers&&Object.assign(E,o.headers);const x=await fetch(y,{headers:E,...o});if(!x.ok){const u=await x.json().catch(()=>({}));throw new Error(u.message||u.error||`API request failed: ${x.status} ${x.statusText}`)}return x.json()}async getHealth(){return this.backendRequest("/health")}async getAllBuses(){try{const n=await this.backendRequest("/buses");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getAllBuses:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusInfo(n){try{const o=await this.backendRequest(`/buses/${n}`);return o.success&&o.data?{success:!0,data:o.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus info from backend:",o.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(o){return console.error("❌ Error in getBusInfo:",o),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutes(){try{const n=await this.backendRequest("/routes");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getRoutes:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getRouteInfo(n){try{const o=await this.backendRequest(`/routes/${n}`);return o.success&&o.data?{success:!0,data:o.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching route info from backend:",o.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(o){return console.error("❌ Error in getRouteInfo:",o),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getAllDrivers(){try{const n=await this.backendRequest("/admin/drivers");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching drivers from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getAllDrivers:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getDriverInfo(n){try{const o=await this.backendRequest(`/admin/drivers/${n}`);return o.success&&o.data?{success:!0,data:o.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching driver info from backend:",o.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(o){return console.error("❌ Error in getDriverInfo:",o),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getLiveLocations(){try{const n=await this.backendRequest("/locations/current");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getLiveLocations:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async updateLiveLocation(n,o,d){try{const y=await this.backendRequest("/locations/update",{method:"POST",body:JSON.stringify({busId:n,driverId:o,latitude:d.latitude,longitude:d.longitude,speed:d.speed,heading:d.heading,timestamp:new Date().toISOString()})});return y.success&&y.data?{success:!0,data:y.data,timestamp:new Date().toISOString()}:(console.error("❌ Error updating live location via backend:",y.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(y){return console.error("❌ Error in updateLiveLocation:",y),{success:!1,data:null,timestamp:new Date().toISOString()}}}}const zv=new H5(q5),Qc=Object.create(null);Qc.open="0";Qc.close="1";Qc.ping="2";Qc.pong="3";Qc.message="4";Qc.upgrade="5";Qc.noop="6";const Lx=Object.create(null);Object.keys(Qc).forEach(l=>{Lx[Qc[l]]=l});const TC={type:"error",data:"parser error"},pj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",gj=typeof ArrayBuffer=="function",vj=l=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer,rN=({type:l,data:n},o,d)=>pj&&n instanceof Blob?o?d(n):vT(n,d):gj&&(n instanceof ArrayBuffer||vj(n))?o?d(n):vT(new Blob([n]),d):d(Qc[l]+(n||"")),vT=(l,n)=>{const o=new FileReader;return o.onload=function(){const d=o.result.split(",")[1];n("b"+(d||""))},o.readAsDataURL(l)};function yT(l){return l instanceof Uint8Array?l:l instanceof ArrayBuffer?new Uint8Array(l):new Uint8Array(l.buffer,l.byteOffset,l.byteLength)}let Z1;function G5(l,n){if(pj&&l.data instanceof Blob)return l.data.arrayBuffer().then(yT).then(n);if(gj&&(l.data instanceof ArrayBuffer||vj(l.data)))return n(yT(l.data));rN(l,!1,o=>{Z1||(Z1=new TextEncoder),n(Z1.encode(o))})}const bT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let l=0;l<bT.length;l++)Cv[bT.charCodeAt(l)]=l;const W5=l=>{let n=l.length*.75,o=l.length,d,y=0,E,x,u,A;l[l.length-1]==="="&&(n--,l[l.length-2]==="="&&n--);const k=new ArrayBuffer(n),B=new Uint8Array(k);for(d=0;d<o;d+=4)E=Cv[l.charCodeAt(d)],x=Cv[l.charCodeAt(d+1)],u=Cv[l.charCodeAt(d+2)],A=Cv[l.charCodeAt(d+3)],B[y++]=E<<2|x>>4,B[y++]=(x&15)<<4|u>>2,B[y++]=(u&3)<<6|A&63;return k},Z5=typeof ArrayBuffer=="function",iN=(l,n)=>{if(typeof l!="string")return{type:"message",data:yj(l,n)};const o=l.charAt(0);return o==="b"?{type:"message",data:K5(l.substring(1),n)}:Lx[o]?l.length>1?{type:Lx[o],data:l.substring(1)}:{type:Lx[o]}:TC},K5=(l,n)=>{if(Z5){const o=W5(l);return yj(o,n)}else return{base64:!0,data:l}},yj=(l,n)=>{switch(n){case"blob":return l instanceof Blob?l:new Blob([l]);case"arraybuffer":default:return l instanceof ArrayBuffer?l:l.buffer}},bj="",Y5=(l,n)=>{const o=l.length,d=new Array(o);let y=0;l.forEach((E,x)=>{rN(E,!1,u=>{d[x]=u,++y===o&&n(d.join(bj))})})},X5=(l,n)=>{const o=l.split(bj),d=[];for(let y=0;y<o.length;y++){const E=iN(o[y],n);if(d.push(E),E.type==="error")break}return d};function J5(){return new TransformStream({transform(l,n){G5(l,o=>{const d=o.length;let y;if(d<126)y=new Uint8Array(1),new DataView(y.buffer).setUint8(0,d);else if(d<65536){y=new Uint8Array(3);const E=new DataView(y.buffer);E.setUint8(0,126),E.setUint16(1,d)}else{y=new Uint8Array(9);const E=new DataView(y.buffer);E.setUint8(0,127),E.setBigUint64(1,BigInt(d))}l.data&&typeof l.data!="string"&&(y[0]|=128),n.enqueue(y),n.enqueue(o)})}})}let K1;function Nx(l){return l.reduce((n,o)=>n+o.length,0)}function Sx(l,n){if(l[0].length===n)return l.shift();const o=new Uint8Array(n);let d=0;for(let y=0;y<n;y++)o[y]=l[0][d++],d===l[0].length&&(l.shift(),d=0);return l.length&&d<l[0].length&&(l[0]=l[0].slice(d)),o}function Q5(l,n){K1||(K1=new TextDecoder);const o=[];let d=0,y=-1,E=!1;return new TransformStream({transform(x,u){for(o.push(x);;){if(d===0){if(Nx(o)<1)break;const A=Sx(o,1);E=(A[0]&128)===128,y=A[0]&127,y<126?d=3:y===126?d=1:d=2}else if(d===1){if(Nx(o)<2)break;const A=Sx(o,2);y=new DataView(A.buffer,A.byteOffset,A.length).getUint16(0),d=3}else if(d===2){if(Nx(o)<8)break;const A=Sx(o,8),k=new DataView(A.buffer,A.byteOffset,A.length),B=k.getUint32(0);if(B>Math.pow(2,21)-1){u.enqueue(TC);break}y=B*Math.pow(2,32)+k.getUint32(4),d=3}else{if(Nx(o)<y)break;const A=Sx(o,y);u.enqueue(iN(E?A:K1.decode(A),n)),d=0}if(y===0||y>l){u.enqueue(TC);break}}}})}const xj=4;function Cs(l){if(l)return ez(l)}function ez(l){for(var n in Cs.prototype)l[n]=Cs.prototype[n];return l}Cs.prototype.on=Cs.prototype.addEventListener=function(l,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+l]=this._callbacks["$"+l]||[]).push(n),this};Cs.prototype.once=function(l,n){function o(){this.off(l,o),n.apply(this,arguments)}return o.fn=n,this.on(l,o),this};Cs.prototype.off=Cs.prototype.removeListener=Cs.prototype.removeAllListeners=Cs.prototype.removeEventListener=function(l,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+l];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+l],this;for(var d,y=0;y<o.length;y++)if(d=o[y],d===n||d.fn===n){o.splice(y,1);break}return o.length===0&&delete this._callbacks["$"+l],this};Cs.prototype.emit=function(l){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),o=this._callbacks["$"+l],d=1;d<arguments.length;d++)n[d-1]=arguments[d];if(o){o=o.slice(0);for(var d=0,y=o.length;d<y;++d)o[d].apply(this,n)}return this};Cs.prototype.emitReserved=Cs.prototype.emit;Cs.prototype.listeners=function(l){return this._callbacks=this._callbacks||{},this._callbacks["$"+l]||[]};Cs.prototype.hasListeners=function(l){return!!this.listeners(l).length};const o0=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,o)=>o(n,0),yl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tz="arraybuffer";function _j(l,...n){return n.reduce((o,d)=>(l.hasOwnProperty(d)&&(o[d]=l[d]),o),{})}const nz=yl.setTimeout,rz=yl.clearTimeout;function a0(l,n){n.useNativeTimers?(l.setTimeoutFn=nz.bind(yl),l.clearTimeoutFn=rz.bind(yl)):(l.setTimeoutFn=yl.setTimeout.bind(yl),l.clearTimeoutFn=yl.clearTimeout.bind(yl))}const iz=1.33;function sz(l){return typeof l=="string"?oz(l):Math.ceil((l.byteLength||l.size)*iz)}function oz(l){let n=0,o=0;for(let d=0,y=l.length;d<y;d++)n=l.charCodeAt(d),n<128?o+=1:n<2048?o+=2:n<55296||n>=57344?o+=3:(d++,o+=4);return o}function wj(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function az(l){let n="";for(let o in l)l.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(l[o]));return n}function lz(l){let n={},o=l.split("&");for(let d=0,y=o.length;d<y;d++){let E=o[d].split("=");n[decodeURIComponent(E[0])]=decodeURIComponent(E[1])}return n}class cz extends Error{constructor(n,o,d){super(n),this.description=o,this.context=d,this.type="TransportError"}}class sN extends Cs{constructor(n){super(),this.writable=!1,a0(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,o,d){return super.emitReserved("error",new cz(n,o,d)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const o=iN(n,this.socket.binaryType);this.onPacket(o)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,o={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(o)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const o=az(n);return o.length?"?"+o:""}}class uz extends sN{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const o=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let d=0;this._polling&&(d++,this.once("pollComplete",function(){--d||o()})),this.writable||(d++,this.once("drain",function(){--d||o()}))}else o()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const o=d=>{if(this.readyState==="opening"&&d.type==="open"&&this.onOpen(),d.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(d)};X5(n,this.socket.binaryType).forEach(o),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,Y5(n,o=>{this.doWrite(o,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",o=this.query||{};return this.opts.timestampRequests!==!1&&(o[this.opts.timestampParam]=wj()),!this.supportsBinary&&!o.sid&&(o.b64=1),this.createUri(n,o)}}let Cj=!1;try{Cj=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dz=Cj;function hz(){}class fz extends uz{constructor(n){if(super(n),typeof location<"u"){const o=location.protocol==="https:";let d=location.port;d||(d=o?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||d!==n.port}}doWrite(n,o){const d=this.request({method:"POST",data:n});d.on("success",o),d.on("error",(y,E)=>{this.onError("xhr post error",y,E)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(o,d)=>{this.onError("xhr poll error",o,d)}),this.pollXhr=n}}let up=class Ix extends Cs{constructor(n,o,d){super(),this.createRequest=n,a0(this,d),this._opts=d,this._method=d.method||"GET",this._uri=o,this._data=d.data!==void 0?d.data:null,this._create()}_create(){var n;const o=_j(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");o.xdomain=!!this._opts.xd;const d=this._xhr=this.createRequest(o);try{d.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(let y in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(y)&&d.setRequestHeader(y,this._opts.extraHeaders[y])}}catch{}if(this._method==="POST")try{d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{d.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(d),"withCredentials"in d&&(d.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(d.timeout=this._opts.requestTimeout),d.onreadystatechange=()=>{var y;d.readyState===3&&((y=this._opts.cookieJar)===null||y===void 0||y.parseCookies(d.getResponseHeader("set-cookie"))),d.readyState===4&&(d.status===200||d.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof d.status=="number"?d.status:0)},0))},d.send(this._data)}catch(y){this.setTimeoutFn(()=>{this._onError(y)},0);return}typeof document<"u"&&(this._index=Ix.requestsCount++,Ix.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hz,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ix.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};up.requestsCount=0;up.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xT);else if(typeof addEventListener=="function"){const l="onpagehide"in yl?"pagehide":"unload";addEventListener(l,xT,!1)}}function xT(){for(let l in up.requests)up.requests.hasOwnProperty(l)&&up.requests[l].abort()}const mz=function(){const l=Nj({xdomain:!1});return l&&l.responseType!==null}();class pz extends fz{constructor(n){super(n);const o=n&&n.forceBase64;this.supportsBinary=mz&&!o}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new up(Nj,this.uri(),n)}}function Nj(l){const n=l.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||dz))return new XMLHttpRequest}catch{}if(!n)try{return new yl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Sj=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class gz extends sN{get name(){return"websocket"}doOpen(){const n=this.uri(),o=this.opts.protocols,d=Sj?{}:_j(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(d.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,o,d)}catch(y){return this.emitReserved("error",y)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let o=0;o<n.length;o++){const d=n[o],y=o===n.length-1;rN(d,this.supportsBinary,E=>{try{this.doWrite(d,E)}catch{}y&&o0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",o=this.query||{};return this.opts.timestampRequests&&(o[this.opts.timestampParam]=wj()),this.supportsBinary||(o.b64=1),this.createUri(n,o)}}const Y1=yl.WebSocket||yl.MozWebSocket;class vz extends gz{createSocket(n,o,d){return Sj?new Y1(n,o,d):o?new Y1(n,o):new Y1(n)}doWrite(n,o){this.ws.send(o)}}class yz extends sN{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const o=Q5(Number.MAX_SAFE_INTEGER,this.socket.binaryType),d=n.readable.pipeThrough(o).getReader(),y=J5();y.readable.pipeTo(n.writable),this._writer=y.writable.getWriter();const E=()=>{d.read().then(({done:u,value:A})=>{u||(this.onPacket(A),E())}).catch(u=>{})};E();const x={type:"open"};this.query.sid&&(x.data=`{"sid":"${this.query.sid}"}`),this._writer.write(x).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let o=0;o<n.length;o++){const d=n[o],y=o===n.length-1;this._writer.write(d).then(()=>{y&&o0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const bz={websocket:vz,webtransport:yz,polling:pz},xz=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_z=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function PC(l){if(l.length>8e3)throw"URI too long";const n=l,o=l.indexOf("["),d=l.indexOf("]");o!=-1&&d!=-1&&(l=l.substring(0,o)+l.substring(o,d).replace(/:/g,";")+l.substring(d,l.length));let y=xz.exec(l||""),E={},x=14;for(;x--;)E[_z[x]]=y[x]||"";return o!=-1&&d!=-1&&(E.source=n,E.host=E.host.substring(1,E.host.length-1).replace(/;/g,":"),E.authority=E.authority.replace("[","").replace("]","").replace(/;/g,":"),E.ipv6uri=!0),E.pathNames=wz(E,E.path),E.queryKey=Cz(E,E.query),E}function wz(l,n){const o=/\/{2,9}/g,d=n.replace(o,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&d.splice(0,1),n.slice(-1)=="/"&&d.splice(d.length-1,1),d}function Cz(l,n){const o={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,y,E){y&&(o[y]=E)}),o}const jC=typeof addEventListener=="function"&&typeof removeEventListener=="function",Vx=[];jC&&addEventListener("offline",()=>{Vx.forEach(l=>l())},!1);class hh extends Cs{constructor(n,o){if(super(),this.binaryType=tz,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(o=n,n=null),n){const d=PC(n);o.hostname=d.host,o.secure=d.protocol==="https"||d.protocol==="wss",o.port=d.port,d.query&&(o.query=d.query)}else o.host&&(o.hostname=PC(o.host).host);a0(this,o),this.secure=o.secure!=null?o.secure:typeof location<"u"&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.hostname=o.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=o.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},o.transports.forEach(d=>{const y=d.prototype.name;this.transports.push(y),this._transportsByName[y]=d}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},o),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=lz(this.opts.query)),jC&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Vx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const o=Object.assign({},this.opts.query);o.EIO=xj,o.transport=n,this.id&&(o.sid=this.id);const d=Object.assign({},this.opts,{query:o,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](d)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&hh.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const o=this.createTransport(n);o.open(),this.setTransport(o)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",o=>this._onClose("transport close",o))}onOpen(){this.readyState="open",hh.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const o=new Error("server error");o.code=n.data,this._onError(o);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let o=1;for(let d=0;d<this.writeBuffer.length;d++){const y=this.writeBuffer[d].data;if(y&&(o+=sz(y)),d>0&&o>this._maxPayload)return this.writeBuffer.slice(0,d);o+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,o0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,o,d){return this._sendPacket("message",n,o,d),this}send(n,o,d){return this._sendPacket("message",n,o,d),this}_sendPacket(n,o,d,y){if(typeof o=="function"&&(y=o,o=void 0),typeof d=="function"&&(y=d,d=null),this.readyState==="closing"||this.readyState==="closed")return;d=d||{},d.compress=d.compress!==!1;const E={type:n,data:o,options:d};this.emitReserved("packetCreate",E),this.writeBuffer.push(E),y&&this.once("flush",y),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},o=()=>{this.off("upgrade",o),this.off("upgradeError",o),n()},d=()=>{this.once("upgrade",o),this.once("upgradeError",o)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?d():n()}):this.upgrading?d():n()),this}_onError(n){if(hh.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jC&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const d=Vx.indexOf(this._offlineEventListener);d!==-1&&Vx.splice(d,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,o),this.writeBuffer=[],this._prevBufferLen=0}}}hh.protocol=xj;class Nz extends hh{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let o=this.createTransport(n),d=!1;hh.priorWebsocketSuccess=!1;const y=()=>{d||(o.send([{type:"ping",data:"probe"}]),o.once("packet",O=>{if(!d)if(O.type==="pong"&&O.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",o),!o)return;hh.priorWebsocketSuccess=o.name==="websocket",this.transport.pause(()=>{d||this.readyState!=="closed"&&(B(),this.setTransport(o),o.send([{type:"upgrade"}]),this.emitReserved("upgrade",o),o=null,this.upgrading=!1,this.flush())})}else{const W=new Error("probe error");W.transport=o.name,this.emitReserved("upgradeError",W)}}))};function E(){d||(d=!0,B(),o.close(),o=null)}const x=O=>{const W=new Error("probe error: "+O);W.transport=o.name,E(),this.emitReserved("upgradeError",W)};function u(){x("transport closed")}function A(){x("socket closed")}function k(O){o&&O.name!==o.name&&E()}const B=()=>{o.removeListener("open",y),o.removeListener("error",x),o.removeListener("close",u),this.off("close",A),this.off("upgrading",k)};o.once("open",y),o.once("error",x),o.once("close",u),this.once("close",A),this.once("upgrading",k),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{d||o.open()},200):o.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const o=[];for(let d=0;d<n.length;d++)~this.transports.indexOf(n[d])&&o.push(n[d]);return o}}let Sz=class extends Nz{constructor(n,o={}){const d=typeof n=="object"?n:o;(!d.transports||d.transports&&typeof d.transports[0]=="string")&&(d.transports=(d.transports||["polling","websocket","webtransport"]).map(y=>bz[y]).filter(y=>!!y)),super(n,d)}};function Ez(l,n="",o){let d=l;o=o||typeof location<"u"&&location,l==null&&(l=o.protocol+"//"+o.host),typeof l=="string"&&(l.charAt(0)==="/"&&(l.charAt(1)==="/"?l=o.protocol+l:l=o.host+l),/^(https?|wss?):\/\//.test(l)||(typeof o<"u"?l=o.protocol+"//"+l:l="https://"+l),d=PC(l)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";const E=d.host.indexOf(":")!==-1?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+E+":"+d.port+n,d.href=d.protocol+"://"+E+(o&&o.port===d.port?"":":"+d.port),d}const Dz=typeof ArrayBuffer=="function",Tz=l=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(l):l.buffer instanceof ArrayBuffer,Ej=Object.prototype.toString,Pz=typeof Blob=="function"||typeof Blob<"u"&&Ej.call(Blob)==="[object BlobConstructor]",jz=typeof File=="function"||typeof File<"u"&&Ej.call(File)==="[object FileConstructor]";function oN(l){return Dz&&(l instanceof ArrayBuffer||Tz(l))||Pz&&l instanceof Blob||jz&&l instanceof File}function zx(l,n){if(!l||typeof l!="object")return!1;if(Array.isArray(l)){for(let o=0,d=l.length;o<d;o++)if(zx(l[o]))return!0;return!1}if(oN(l))return!0;if(l.toJSON&&typeof l.toJSON=="function"&&arguments.length===1)return zx(l.toJSON(),!0);for(const o in l)if(Object.prototype.hasOwnProperty.call(l,o)&&zx(l[o]))return!0;return!1}function kz(l){const n=[],o=l.data,d=l;return d.data=kC(o,n),d.attachments=n.length,{packet:d,buffers:n}}function kC(l,n){if(!l)return l;if(oN(l)){const o={_placeholder:!0,num:n.length};return n.push(l),o}else if(Array.isArray(l)){const o=new Array(l.length);for(let d=0;d<l.length;d++)o[d]=kC(l[d],n);return o}else if(typeof l=="object"&&!(l instanceof Date)){const o={};for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=kC(l[d],n));return o}return l}function Az(l,n){return l.data=AC(l.data,n),delete l.attachments,l}function AC(l,n){if(!l)return l;if(l&&l._placeholder===!0){if(typeof l.num=="number"&&l.num>=0&&l.num<n.length)return n[l.num];throw new Error("illegal attachments")}else if(Array.isArray(l))for(let o=0;o<l.length;o++)l[o]=AC(l[o],n);else if(typeof l=="object")for(const o in l)Object.prototype.hasOwnProperty.call(l,o)&&(l[o]=AC(l[o],n));return l}const Mz=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Rz=5;var Er;(function(l){l[l.CONNECT=0]="CONNECT",l[l.DISCONNECT=1]="DISCONNECT",l[l.EVENT=2]="EVENT",l[l.ACK=3]="ACK",l[l.CONNECT_ERROR=4]="CONNECT_ERROR",l[l.BINARY_EVENT=5]="BINARY_EVENT",l[l.BINARY_ACK=6]="BINARY_ACK"})(Er||(Er={}));class Lz{constructor(n){this.replacer=n}encode(n){return(n.type===Er.EVENT||n.type===Er.ACK)&&zx(n)?this.encodeAsBinary({type:n.type===Er.EVENT?Er.BINARY_EVENT:Er.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let o=""+n.type;return(n.type===Er.BINARY_EVENT||n.type===Er.BINARY_ACK)&&(o+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(o+=n.nsp+","),n.id!=null&&(o+=n.id),n.data!=null&&(o+=JSON.stringify(n.data,this.replacer)),o}encodeAsBinary(n){const o=kz(n),d=this.encodeAsString(o.packet),y=o.buffers;return y.unshift(d),y}}function _T(l){return Object.prototype.toString.call(l)==="[object Object]"}class aN extends Cs{constructor(n){super(),this.reviver=n}add(n){let o;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");o=this.decodeString(n);const d=o.type===Er.BINARY_EVENT;d||o.type===Er.BINARY_ACK?(o.type=d?Er.EVENT:Er.ACK,this.reconstructor=new Iz(o),o.attachments===0&&super.emitReserved("decoded",o)):super.emitReserved("decoded",o)}else if(oN(n)||n.base64)if(this.reconstructor)o=this.reconstructor.takeBinaryData(n),o&&(this.reconstructor=null,super.emitReserved("decoded",o));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let o=0;const d={type:Number(n.charAt(0))};if(Er[d.type]===void 0)throw new Error("unknown packet type "+d.type);if(d.type===Er.BINARY_EVENT||d.type===Er.BINARY_ACK){const E=o+1;for(;n.charAt(++o)!=="-"&&o!=n.length;);const x=n.substring(E,o);if(x!=Number(x)||n.charAt(o)!=="-")throw new Error("Illegal attachments");d.attachments=Number(x)}if(n.charAt(o+1)==="/"){const E=o+1;for(;++o&&!(n.charAt(o)===","||o===n.length););d.nsp=n.substring(E,o)}else d.nsp="/";const y=n.charAt(o+1);if(y!==""&&Number(y)==y){const E=o+1;for(;++o;){const x=n.charAt(o);if(x==null||Number(x)!=x){--o;break}if(o===n.length)break}d.id=Number(n.substring(E,o+1))}if(n.charAt(++o)){const E=this.tryParse(n.substr(o));if(aN.isPayloadValid(d.type,E))d.data=E;else throw new Error("invalid payload")}return d}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,o){switch(n){case Er.CONNECT:return _T(o);case Er.DISCONNECT:return o===void 0;case Er.CONNECT_ERROR:return typeof o=="string"||_T(o);case Er.EVENT:case Er.BINARY_EVENT:return Array.isArray(o)&&(typeof o[0]=="number"||typeof o[0]=="string"&&Mz.indexOf(o[0])===-1);case Er.ACK:case Er.BINARY_ACK:return Array.isArray(o)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Iz{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const o=Az(this.reconPack,this.buffers);return this.finishedReconstruction(),o}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vz=Object.freeze(Object.defineProperty({__proto__:null,Decoder:aN,Encoder:Lz,get PacketType(){return Er},protocol:Rz},Symbol.toStringTag,{value:"Module"}));function dc(l,n,o){return l.on(n,o),function(){l.off(n,o)}}const zz=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dj extends Cs{constructor(n,o,d){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=o,d&&d.auth&&(this.auth=d.auth),this._opts=Object.assign({},d),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[dc(n,"open",this.onopen.bind(this)),dc(n,"packet",this.onpacket.bind(this)),dc(n,"error",this.onerror.bind(this)),dc(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...o){var d,y,E;if(zz.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(o.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const x={type:Er.EVENT,data:o};if(x.options={},x.options.compress=this.flags.compress!==!1,typeof o[o.length-1]=="function"){const B=this.ids++,O=o.pop();this._registerAckCallback(B,O),x.id=B}const u=(y=(d=this.io.engine)===null||d===void 0?void 0:d.transport)===null||y===void 0?void 0:y.writable,A=this.connected&&!(!((E=this.io.engine)===null||E===void 0)&&E._hasPingExpired());return this.flags.volatile&&!u||(A?(this.notifyOutgoingListeners(x),this.packet(x)):this.sendBuffer.push(x)),this.flags={},this}_registerAckCallback(n,o){var d;const y=(d=this.flags.timeout)!==null&&d!==void 0?d:this._opts.ackTimeout;if(y===void 0){this.acks[n]=o;return}const E=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===n&&this.sendBuffer.splice(u,1);o.call(this,new Error("operation has timed out"))},y),x=(...u)=>{this.io.clearTimeoutFn(E),o.apply(this,u)};x.withError=!0,this.acks[n]=x}emitWithAck(n,...o){return new Promise((d,y)=>{const E=(x,u)=>x?y(x):d(u);E.withError=!0,o.push(E),this.emit(n,...o)})}_addToQueue(n){let o;typeof n[n.length-1]=="function"&&(o=n.pop());const d={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((y,...E)=>d!==this._queue[0]?void 0:(y!==null?d.tryCount>this._opts.retries&&(this._queue.shift(),o&&o(y)):(this._queue.shift(),o&&o(null,...E)),d.pending=!1,this._drainQueue())),this._queue.push(d),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const o=this._queue[0];o.pending&&!n||(o.pending=!0,o.tryCount++,this.flags=o.flags,this.emit.apply(this,o.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:Er.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,o){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,o),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(d=>String(d.id)===n)){const d=this.acks[n];delete this.acks[n],d.withError&&d.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case Er.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Er.EVENT:case Er.BINARY_EVENT:this.onevent(n);break;case Er.ACK:case Er.BINARY_ACK:this.onack(n);break;case Er.DISCONNECT:this.ondisconnect();break;case Er.CONNECT_ERROR:this.destroy();const d=new Error(n.data.message);d.data=n.data.data,this.emitReserved("connect_error",d);break}}onevent(n){const o=n.data||[];n.id!=null&&o.push(this.ack(n.id)),this.connected?this.emitEvent(o):this.receiveBuffer.push(Object.freeze(o))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const o=this._anyListeners.slice();for(const d of o)d.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const o=this;let d=!1;return function(...y){d||(d=!0,o.packet({type:Er.ACK,id:n,data:y}))}}onack(n){const o=this.acks[n.id];typeof o=="function"&&(delete this.acks[n.id],o.withError&&n.data.unshift(null),o.apply(this,n.data))}onconnect(n,o){this.id=n,this.recovered=o&&this._pid===o,this._pid=o,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Er.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const o=this._anyListeners;for(let d=0;d<o.length;d++)if(n===o[d])return o.splice(d,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const o=this._anyOutgoingListeners;for(let d=0;d<o.length;d++)if(n===o[d])return o.splice(d,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const o=this._anyOutgoingListeners.slice();for(const d of o)d.apply(this,n.data)}}}function bp(l){l=l||{},this.ms=l.min||100,this.max=l.max||1e4,this.factor=l.factor||2,this.jitter=l.jitter>0&&l.jitter<=1?l.jitter:0,this.attempts=0}bp.prototype.duration=function(){var l=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),o=Math.floor(n*this.jitter*l);l=Math.floor(n*10)&1?l+o:l-o}return Math.min(l,this.max)|0};bp.prototype.reset=function(){this.attempts=0};bp.prototype.setMin=function(l){this.ms=l};bp.prototype.setMax=function(l){this.max=l};bp.prototype.setJitter=function(l){this.jitter=l};class MC extends Cs{constructor(n,o){var d;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(o=n,n=void 0),o=o||{},o.path=o.path||"/socket.io",this.opts=o,a0(this,o),this.reconnection(o.reconnection!==!1),this.reconnectionAttempts(o.reconnectionAttempts||1/0),this.reconnectionDelay(o.reconnectionDelay||1e3),this.reconnectionDelayMax(o.reconnectionDelayMax||5e3),this.randomizationFactor((d=o.randomizationFactor)!==null&&d!==void 0?d:.5),this.backoff=new bp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(o.timeout==null?2e4:o.timeout),this._readyState="closed",this.uri=n;const y=o.parser||Vz;this.encoder=new y.Encoder,this.decoder=new y.Decoder,this._autoConnect=o.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var o;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(o=this.backoff)===null||o===void 0||o.setMin(n),this)}randomizationFactor(n){var o;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(o=this.backoff)===null||o===void 0||o.setJitter(n),this)}reconnectionDelayMax(n){var o;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(o=this.backoff)===null||o===void 0||o.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new Sz(this.uri,this.opts);const o=this.engine,d=this;this._readyState="opening",this.skipReconnect=!1;const y=dc(o,"open",function(){d.onopen(),n&&n()}),E=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),n?n(u):this.maybeReconnectOnOpen()},x=dc(o,"error",E);if(this._timeout!==!1){const u=this._timeout,A=this.setTimeoutFn(()=>{y(),E(new Error("timeout")),o.close()},u);this.opts.autoUnref&&A.unref(),this.subs.push(()=>{this.clearTimeoutFn(A)})}return this.subs.push(y),this.subs.push(x),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(dc(n,"ping",this.onping.bind(this)),dc(n,"data",this.ondata.bind(this)),dc(n,"error",this.onerror.bind(this)),dc(n,"close",this.onclose.bind(this)),dc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(o){this.onclose("parse error",o)}}ondecoded(n){o0(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,o){let d=this.nsps[n];return d?this._autoConnect&&!d.active&&d.connect():(d=new Dj(this,n,o),this.nsps[n]=d),d}_destroy(n){const o=Object.keys(this.nsps);for(const d of o)if(this.nsps[d].active)return;this._close()}_packet(n){const o=this.encoder.encode(n);for(let d=0;d<o.length;d++)this.engine.write(o[d],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,o){var d;this.cleanup(),(d=this.engine)===null||d===void 0||d.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,o),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const o=this.backoff.duration();this._reconnecting=!0;const d=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(y=>{y?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",y)):n.onreconnect()}))},o);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const bv={};function Ox(l,n){typeof l=="object"&&(n=l,l=void 0),n=n||{};const o=Ez(l,n.path||"/socket.io"),d=o.source,y=o.id,E=o.path,x=bv[y]&&E in bv[y].nsps,u=n.forceNew||n["force new connection"]||n.multiplex===!1||x;let A;return u?A=new MC(d,n):(bv[y]||(bv[y]=new MC(d,n)),A=bv[y]),o.query&&!n.query&&(n.query=o.queryKey),A.socket(o.path,n)}Object.assign(Ox,{Manager:MC,Socket:Dj,io:Ox,connect:Ox});class Oz{constructor(){mi(this,"socket",null);mi(this,"_isConnected",!1);mi(this,"connectionState","disconnected");mi(this,"reconnectAttempts",0);mi(this,"maxReconnectAttempts",10);mi(this,"reconnectDelay",1e3);mi(this,"maxReconnectDelay",3e4);mi(this,"heartbeatInterval",null);mi(this,"connectionTimeout",null);mi(this,"lastHeartbeat",0);mi(this,"isShuttingDown",!1);mi(this,"connectionMonitorInterval",null);mi(this,"busLocationListeners",[]);mi(this,"driverConnectedListeners",[]);mi(this,"driverDisconnectedListeners",[]);mi(this,"studentConnectedListeners",[]);mi(this,"busArrivingListeners",[]);this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.handleReconnect=this.handleReconnect.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this),this.monitorConnection=this.monitorConnection.bind(this)}async connect(){var n;if((n=this.socket)!=null&&n.connected||this.connectionState==="connecting"){console.log("🔌 WebSocket already connected or connecting");return}this.isShuttingDown=!1;try{this.connectionState="connecting",console.log("🔌 Connecting to WebSocket server...");const o=fo.api.websocketUrl;console.log("🔌 WebSocket URL:",o),this.socket=Ox(o,{transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:15e3,forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,autoConnect:!1,query:{clientType:"driver",version:"1.0.0",timestamp:Date.now().toString()},extraHeaders:{"User-Agent":"BusTrackingDriver/1.0.0"}}),this.connectionTimeout=setTimeout(()=>{this.connectionState==="connecting"&&(console.error("❌ WebSocket connection timeout"),this.handleError(new Error("Connection timeout")))},15e3),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleError),this.socket.on("error",this.handleError),this.socket.on("reconnect",this.handleReconnect),this.socket.on("reconnect_attempt",d=>{console.log(`🔄 Reconnection attempt ${d}`)}),this.socket.on("reconnect_error",d=>{console.error("❌ Reconnection error:",d)}),this.socket.on("reconnect_failed",()=>{console.error("❌ Reconnection failed after all attempts")}),this.socket.connect()}catch(o){console.error("❌ WebSocket connection error:",o),this.handleError(o)}}handleConnect(){var n;console.log("✅ WebSocket connected"),this._isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.startHeartbeat(),this.startConnectionMonitoring(),(n=this.socket)==null||n.emit("driver:connected",{timestamp:new Date().toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}})}handleDisconnect(n){console.log("❌ WebSocket disconnected:",n),this._isConnected=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!(this.isShuttingDown||n==="io client disconnect")&&this.handleReconnect()}handleError(n){console.error("❌ WebSocket error:",n),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!this.isShuttingDown&&(n.type==="TransportError"||n.type==="TransportOpenError")&&this.handleReconnect()}handleReconnect(){if(this.isShuttingDown||this.connectionState==="reconnecting")return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.connectionState="disconnected";return}this.connectionState="reconnecting",this.reconnectAttempts++,console.log(`🔄 Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);const n=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1)+Math.random()*1e3,this.maxReconnectDelay);setTimeout(()=>{this.isShuttingDown||this.connect()},n)}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{var n;(n=this.socket)!=null&&n.connected&&(this.socket.emit("ping"),this.lastHeartbeat=Date.now())},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startConnectionMonitoring(){this.connectionMonitorInterval&&clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=setInterval(()=>{this.monitorConnection()},1e4)}stopConnectionMonitoring(){this.connectionMonitorInterval&&(clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}monitorConnection(){if(!this.socket){console.log("🔍 Connection monitor: No socket available");return}const n=this.socket.connected,o=Date.now()-this.lastHeartbeat;console.log(`🔍 Connection monitor: Connected=${n}, Last heartbeat=${o}ms ago`),n&&o>6e4&&this.lastHeartbeat>0&&(console.warn("⚠️ Connection monitor: No heartbeat received, forcing reconnection"),this.socket.disconnect(),this.handleReconnect()),this._isConnected!==n&&(console.log(`🔄 Connection state changed: ${this._isConnected} -> ${n}`),this._isConnected=n,this.connectionState=n?"connected":"disconnected")}disconnect(){console.log("🔌 Disconnecting WebSocket..."),this.isShuttingDown=!0,this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}reset(){console.log("🔄 Resetting WebSocket service..."),this.isShuttingDown=!1,this.connectionState="disconnected",this._isConnected=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.socket&&(this.socket.disconnect(),this.socket=null),this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}isConnected(){var n;return this._isConnected&&((n=this.socket)==null?void 0:n.connected)===!0}getConnectionState(){return this.connectionState}getConnectionStatus(){return this._isConnected}authenticateAsDriver(n,o){console.log("🔐 Driver: Starting authentication process..."),console.log("🔐 Socket connected:",this.isConnected()),console.log("🔐 Socket state:",this.getConnectionState()),this.socket&&this.isConnected()?(console.log("🔐 Driver: Sending authentication request..."),this.socket.off("driver:authenticated"),this.socket.off("driver:authentication_failed"),this.socket.off("error"),this.socket.once("driver:authenticated",d=>{console.log("✅ Driver: Authentication successful:",d),o!=null&&o.onSuccess&&o.onSuccess(d)}),this.socket.once("driver:authentication_failed",d=>{console.error("❌ Driver: Authentication failed:",d),o!=null&&o.onFailure&&o.onFailure(d)}),this.socket.once("error",d=>{console.error("❌ Driver: Socket error during authentication:",d),o!=null&&o.onError&&o.onError(d)}),this.socket.emit("driver:authenticate",{token:n}),console.log("📤 Authentication request sent with token length:",n.length)):(console.error("❌ Driver: Cannot authenticate - socket not connected"),console.error("❌ Socket object:",!!this.socket),console.error("❌ Connection state:",this.getConnectionState()),o!=null&&o.onError&&o.onError(new Error("Socket not connected")))}sendLocationUpdate(n){this.socket&&this.isConnected()?(console.log("📍 Sending location update:",n),this.socket.emit("driver:locationUpdate",n)):console.error("❌ Cannot send location update - socket not connected")}onBusLocationUpdate(n){var o;this.busLocationListeners.push(n),(o=this.socket)==null||o.on("bus:locationUpdate",n)}onDriverConnected(n){var o;this.driverConnectedListeners.push(n),(o=this.socket)==null||o.on("driver:connected",n)}onDriverDisconnected(n){var o;this.driverDisconnectedListeners.push(n),(o=this.socket)==null||o.on("driver:disconnected",n)}onStudentConnected(n){var o;this.studentConnectedListeners.push(n),(o=this.socket)==null||o.on("student:connected",n)}onBusArriving(n){var o;this.busArrivingListeners.push(n),(o=this.socket)==null||o.on("bus:arriving",n)}off(n){var o;(o=this.socket)==null||o.off(n)}getConnectionStats(){return{isConnected:this._isConnected,connectionState:this.connectionState,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHeartbeat:this.lastHeartbeat,uptime:this.lastHeartbeat>0?Date.now()-this.lastHeartbeat:0}}async healthCheck(){var d;const n=this.getConnectionStats();return{healthy:this.isConnected()&&this.connectionState==="connected"&&n.lastHeartbeat>0&&Date.now()-n.lastHeartbeat<6e4,details:{...n,socketExists:!!this.socket,socketConnected:(d=this.socket)==null?void 0:d.connected,isShuttingDown:this.isShuttingDown}}}}const Pn=new Oz;var Tj={exports:{}};(function(l,n){(function(o,d){l.exports=d()})(Oa,function(){var o,d,y;function E(u,A){if(!o)o=A;else if(!d)d=A;else{var k="var sharedChunk = {}; ("+o+")(sharedChunk); ("+d+")(sharedChunk);",B={};o(B),y=A(B),typeof window<"u"&&(y.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}E(["exports"],function(u){function A(s,t,a,f){return new(a||(a=Promise))(function(g,N){function S(V){try{M(f.next(V))}catch(F){N(F)}}function T(V){try{M(f.throw(V))}catch(F){N(F)}}function M(V){var F;V.done?g(V.value):(F=V.value,F instanceof a?F:new a(function(H){H(F)})).then(S,T)}M((f=f.apply(s,t||[])).next())})}function k(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var B=O;function O(s,t){this.x=s,this.y=t}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,t){return this.clone()._rotateAround(s,t)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var t=s.x-this.x,a=s.y-this.y;return t*t+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,t){return Math.atan2(this.x*t-this.y*s,this.x*s+this.y*t)},_matMult:function(s){var t=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=t,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var t=Math.cos(s),a=Math.sin(s),f=a*this.x+t*this.y;return this.x=t*this.x-a*this.y,this.y=f,this},_rotateAround:function(s,t){var a=Math.cos(s),f=Math.sin(s),g=t.y+f*(this.x-t.x)+a*(this.y-t.y);return this.x=t.x+a*(this.x-t.x)-f*(this.y-t.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(s){return s instanceof O?s:Array.isArray(s)?new O(s[0],s[1]):s};var W=k(B),ne=me;function me(s,t,a,f){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(f-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=t,this.p2x=a,this.p2y=f}me.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,t){if(t===void 0&&(t=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,f=0;f<8;f++){var g=this.sampleCurveX(a)-s;if(Math.abs(g)<t)return a;var N=this.sampleCurveDerivativeX(a);if(Math.abs(N)<1e-6)break;a-=g/N}var S=0,T=1;for(a=s,f=0;f<20&&(g=this.sampleCurveX(a),!(Math.abs(g-s)<t));f++)s>g?S=a:T=a,a=.5*(T-S)+S;return a},solve:function(s,t){return this.sampleCurveY(this.solveCurveX(s,t))}};var ke=k(ne);let De,Ae;function we(){return De==null&&(De=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),De}function fe(){if(Ae==null&&(Ae=!1,we())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let f=0;f<5*5;f++){const g=4*f;t.fillStyle=`rgb(${g},${g+1},${g+2})`,t.fillRect(f%5,Math.floor(f/5),1,1)}const a=t.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&a[f]!==f){Ae=!0;break}}}return Ae||!1}function Ve(s,t,a,f){const g=new ke(s,t,a,f);return function(N){return g.solve(N)}}const ze=Ve(.25,.1,.25,1);function Je(s,t,a){return Math.min(a,Math.max(t,s))}function Ye(s,t,a){const f=a-t,g=((s-t)%f+f)%f+t;return g===t?a:g}function ot(s,...t){for(const a of t)for(const f in a)s[f]=a[f];return s}let wt=1;function gt(s,t,a){const f={};for(const g in s)f[g]=t.call(a||this,s[g],g,s);return f}function sn(s,t,a){const f={};for(const g in s)t.call(a||this,s[g],g,s)&&(f[g]=s[g]);return f}function st(s){return Array.isArray(s)?s.map(st):typeof s=="object"&&s?gt(s,st):s}const vt={};function Nt(s){vt[s]||(typeof console<"u"&&console.warn(s),vt[s]=!0)}function on(s,t,a){return(a.y-s.y)*(t.x-s.x)>(t.y-s.y)*(a.x-s.x)}function yn(s){let t=0;for(let a,f,g=0,N=s.length,S=N-1;g<N;S=g++)a=s[g],f=s[S],t+=(f.x-a.x)*(a.y+f.y);return t}function zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Wt=null;function dn(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Rt(s,t,a,f,g){return A(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const N=new VideoFrame(s,{timestamp:0});try{const S=N==null?void 0:N.format;if(!S||!S.startsWith("BGR")&&!S.startsWith("RGB"))throw new Error(`Unrecognized format ${S}`);const T=S.startsWith("BGR"),M=new Uint8ClampedArray(f*g*4);if(yield N.copyTo(M,function(V,F,H,Y,Q){const ee=4*Math.max(-F,0),ce=(Math.max(0,H)-H)*Y*4+ee,ve=4*Y,be=Math.max(0,F),je=Math.max(0,H);return{rect:{x:be,y:je,width:Math.min(V.width,F+Y)-be,height:Math.min(V.height,H+Q)-je},layout:[{offset:ce,stride:ve}]}}(s,t,a,f,g)),T)for(let V=0;V<M.length;V+=4){const F=M[V];M[V]=M[V+2],M[V+2]=F}return M}finally{N.close()}})}let Ht,ct,Ie,bt;const hn={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const t=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(s,t=0){return this.getImageCanvasContext(s).getImageData(-t,-t,s.width+2*t,s.height+2*t)},getImageCanvasContext(s){const t=window.document.createElement("canvas"),a=t.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return t.width=s.width,t.height=s.height,a.drawImage(s,0,0,s.width,s.height),a},resolveURL:s=>(Ie||(Ie=document.createElement("a")),Ie.href=s,Ie.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(bt==null&&(bt=matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)}},Sn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ft extends Error{constructor(t,a,f,g){super(`AJAXError: ${a} (${t}): ${f}`),this.status=t,this.statusText=a,this.url=f,this.body=g}}const Bt=zt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,fn=s=>Sn.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function Bn(s,t){const a=new AbortController,f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:Bt(),signal:a.signal});let g=!1,N=!1;return s.type==="json"&&f.headers.set("Accept","application/json"),N||fetch(f).then(S=>S.ok?(T=>{(s.type==="arrayBuffer"||s.type==="image"?T.arrayBuffer():s.type==="json"?T.json():T.text()).then(M=>{N||(g=!0,t(null,M,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(M=>{N||t(new Error(M.message))})})(S):S.blob().then(T=>t(new Ft(S.status,S.statusText,s.url,T)))).catch(S=>{S.code!==20&&t(new Error(S.message))}),{cancel:()=>{N=!0,g||a.abort()}}}const rn=function(s,t){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,t);if(!zt())return(fn(s.url)||Bn)(s,t)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Bt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Bn(s,t);if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,t,void 0,!0)}var a;return function(f,g){const N=new XMLHttpRequest;N.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(N.responseType="arraybuffer");for(const S in f.headers)N.setRequestHeader(S,f.headers[S]);return f.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=f.credentials==="include",N.onerror=()=>{g(new Error(N.statusText))},N.onload=()=>{if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let S=N.response;if(f.type==="json")try{S=JSON.parse(N.response)}catch(T){return g(T)}g(null,S,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else{const S=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});g(new Ft(N.status,N.statusText,f.url,S))}},N.send(f.body),{cancel:()=>N.abort()}}(s,t)},Fn=function(s,t){return rn(ot(s,{type:"arrayBuffer"}),t)};function Ur(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const t=new URL(s),a=window.location;return t.protocol===a.protocol&&t.host===a.host}function Un(s,t,a){a[s]&&a[s].indexOf(t)!==-1||(a[s]=a[s]||[],a[s].push(t))}function er(s,t,a){if(a&&a[s]){const f=a[s].indexOf(t);f!==-1&&a[s].splice(f,1)}}class Ti{constructor(t,a={}){ot(this,a),this.type=t}}class Gr extends Ti{constructor(t,a={}){super("error",ot({error:t},a))}}class Li{on(t,a){return this._listeners=this._listeners||{},Un(t,a,this._listeners),this}off(t,a){return er(t,a,this._listeners),er(t,a,this._oneTimeListeners),this}once(t,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Un(t,a,this._oneTimeListeners),this):new Promise(f=>this.once(t,f))}fire(t,a){typeof t=="string"&&(t=new Ti(t,a||{}));const f=t.type;if(this.listens(f)){t.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of g)T.call(this,t);const N=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of N)er(f,T,this._oneTimeListeners),T.call(this,t);const S=this._eventedParent;S&&(ot(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(t))}else t instanceof Gr&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}var qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const xr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hr(s,t){const a={};for(const f in s)f!=="ref"&&(a[f]=s[f]);return xr.forEach(f=>{f in t&&(a[f]=t[f])}),a}function zn(s,t){if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let a=0;a<s.length;a++)if(!zn(s[a],t[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&t!==null){if(typeof t!="object"||Object.keys(s).length!==Object.keys(t).length)return!1;for(const a in s)if(!zn(s[a],t[a]))return!1;return!0}return s===t}const Ln={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Dr(s,t,a){a.push({command:Ln.addSource,args:[s,t[s]]})}function pi(s,t,a){t.push({command:Ln.removeSource,args:[s]}),a[s]=!0}function oi(s,t,a,f){pi(s,a,f),Dr(s,t,a)}function Bs(s,t,a){let f;for(f in s[a])if(Object.prototype.hasOwnProperty.call(s[a],f)&&f!=="data"&&!zn(s[a][f],t[a][f]))return!1;for(f in t[a])if(Object.prototype.hasOwnProperty.call(t[a],f)&&f!=="data"&&!zn(s[a][f],t[a][f]))return!1;return!0}function ds(s,t,a,f,g,N){let S;for(S in t=t||{},s=s||{})Object.prototype.hasOwnProperty.call(s,S)&&(zn(s[S],t[S])||a.push({command:N,args:[f,S,t[S],g]}));for(S in t)Object.prototype.hasOwnProperty.call(t,S)&&!Object.prototype.hasOwnProperty.call(s,S)&&(zn(s[S],t[S])||a.push({command:N,args:[f,S,t[S],g]}))}function Mt(s){return s.id}function an(s,t){return s[t.id]=t,s}class Qe{constructor(t,a,f,g){this.message=(t?`${t}: `:"")+f,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function Hn(s,...t){for(const a of t)for(const f in a)s[f]=a[f];return s}class Tn extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}class wr{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[f,g]of a)this.bindings[f]=g}concat(t){return new wr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const pr={kind:"null"},dt={kind:"number"},tn={kind:"string"},Ut={kind:"boolean"},nr={kind:"color"},gi={kind:"object"},bn={kind:"value"},vi={kind:"collator"},he={kind:"formatted"},I={kind:"padding"},G={kind:"resolvedImage"},J={kind:"variableAnchorOffsetCollection"};function ie(s,t){return{kind:"array",itemType:s,N:t}}function de(s){if(s.kind==="array"){const t=de(s.itemType);return typeof s.N=="number"?`array<${t}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${t}>`}return s.kind}const Ce=[pr,dt,tn,Ut,nr,he,gi,ie(bn),I,G,J];function xe(s,t){if(t.kind==="error")return null;if(s.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!xe(s.itemType,t.itemType))&&(typeof s.N!="number"||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if(s.kind==="value"){for(const a of Ce)if(!xe(a,t))return null}}return`Expected ${de(s)} but found ${de(t)} instead.`}function ge(s,t){return t.some(a=>a.kind===s.kind)}function Ee(s,t){return t.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function Ke(s,t){return s.kind==="array"&&t.kind==="array"?s.itemType.kind===t.itemType.kind&&typeof s.N=="number":s.kind===t.kind}const te=.96422,Se=.82521,Xe=4/29,ht=6/29,pt=3*ht*ht,ft=ht*ht*ht,Tt=Math.PI/180,Lt=180/Math.PI;function kn(s){return(s%=360)<0&&(s+=360),s}function vn([s,t,a,f]){let g,N;const S=Cr((.2225045*(s=gn(s))+.7168786*(t=gn(t))+.0606169*(a=gn(a)))/1);s===t&&t===a?g=N=S:(g=Cr((.4360747*s+.3850649*t+.1430804*a)/te),N=Cr((.0139322*s+.0971045*t+.7141733*a)/Se));const T=116*S-16;return[T<0?0:T,500*(g-S),200*(S-N),f]}function gn(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Cr(s){return s>ft?Math.pow(s,1/3):s/pt+Xe}function ar([s,t,a,f]){let g=(s+16)/116,N=isNaN(t)?g:g+t/500,S=isNaN(a)?g:g-a/200;return g=1*cr(g),N=te*cr(N),S=Se*cr(S),[Tr(3.1338561*N-1.6168667*g-.4906146*S),Tr(-.9787684*N+1.9161415*g+.033454*S),Tr(.0719453*N-.2289914*g+1.4052427*S),f]}function Tr(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function cr(s){return s>ht?s*s*s:pt*(s-Xe)}function Ki(s){return parseInt(s.padEnd(2,s),16)/255}function mo(s,t){return In(t?s/100:s,0,1)}function In(s,t,a){return Math.min(Math.max(t,s),a)}function po(s){return!s.some(Number.isNaN)}const nd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class gr{constructor(t,a,f,g=1,N=!0){this.r=t,this.g=a,this.b=f,this.a=g,N||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[t,a,f,g]))}static parse(t){if(t instanceof gr)return t;if(typeof t!="string")return;const a=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=nd[f];if(g){const[S,T,M]=g;return[S/255,T/255,M/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const S=f.length<6?1:2;let T=1;return[Ki(f.slice(T,T+=S)),Ki(f.slice(T,T+=S)),Ki(f.slice(T,T+=S)),Ki(f.slice(T,T+S)||"ff")]}if(f.startsWith("rgb")){const S=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[T,M,V,F,H,Y,Q,ee,ce,ve,be,je]=S,Ne=[F||" ",Q||" ",ve].join("");if(Ne==="  "||Ne==="  /"||Ne===",,"||Ne===",,,"){const Le=[V,Y,ce].join(""),Fe=Le==="%%%"?100:Le===""?255:0;if(Fe){const nt=[In(+M/Fe,0,1),In(+H/Fe,0,1),In(+ee/Fe,0,1),be?mo(+be,je):1];if(po(nt))return nt}}return}}const N=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[S,T,M,V,F,H,Y,Q,ee]=N,ce=[M||" ",F||" ",Y].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ve=[+T,In(+V,0,100),In(+H,0,100),Q?mo(+Q,ee):1];if(po(ve))return function([be,je,Ne,Le]){function Fe(nt){const Vt=(nt+be/30)%12,Kt=je*Math.min(Ne,1-Ne);return Ne-Kt*Math.max(-1,Math.min(Vt-3,9-Vt,1))}return be=kn(be),je/=100,Ne/=100,[Fe(0),Fe(8),Fe(4),Le]}(ve)}}}(t);return a?new gr(...a,!1):void 0}get rgb(){const{r:t,g:a,b:f,a:g}=this,N=g||1/0;return this.overwriteGetter("rgb",[t/N,a/N,f/N,g])}get hcl(){return this.overwriteGetter("hcl",function(t){const[a,f,g,N]=vn(t),S=Math.sqrt(f*f+g*g);return[Math.round(1e4*S)?kn(Math.atan2(g,f)*Lt):NaN,S,a,N]}(this.rgb))}get lab(){return this.overwriteGetter("lab",vn(this.rgb))}overwriteGetter(t,a){return Object.defineProperty(this,t,{value:a}),a}toString(){const[t,a,f,g]=this.rgb;return`rgba(${[t,a,f].map(N=>Math.round(255*N)).join(",")},${g})`}}gr.black=new gr(0,0,0,1),gr.white=new gr(1,1,1,1),gr.transparent=new gr(0,0,0,0),gr.red=new gr(1,0,0,1);class Qo{constructor(t,a,f){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fa{constructor(t,a,f,g,N){this.text=t,this.image=a,this.scale=f,this.fontStack=g,this.textColor=N}}class Ii{constructor(t){this.sections=t}static fromString(t){return new Ii([new Fa(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Ii?t:Ii.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class is{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof is)return t;if(typeof t=="number")return new is([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const a of t)if(typeof a!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new is(t)}}toString(){return JSON.stringify(this.values)}}const eu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hs{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof hs)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let a=0;a<t.length;a+=2){const f=t[a],g=t[a+1];if(typeof f!="string"||!eu.has(f)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new hs(t)}}toString(){return JSON.stringify(this.values)}}class Vi{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Vi({name:t,available:!1}):null}}function xl(s,t,a,f){return typeof s=="number"&&s>=0&&s<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,t,a,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,t,a,f]:[s,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Vo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof gr||s instanceof Qo||s instanceof Ii||s instanceof is||s instanceof hs||s instanceof Vi)return!0;if(Array.isArray(s)){for(const t of s)if(!Vo(t))return!1;return!0}if(typeof s=="object"){for(const t in s)if(!Vo(s[t]))return!1;return!0}return!1}function zr(s){if(s===null)return pr;if(typeof s=="string")return tn;if(typeof s=="boolean")return Ut;if(typeof s=="number")return dt;if(s instanceof gr)return nr;if(s instanceof Qo)return vi;if(s instanceof Ii)return he;if(s instanceof is)return I;if(s instanceof hs)return J;if(s instanceof Vi)return G;if(Array.isArray(s)){const t=s.length;let a;for(const f of s){const g=zr(f);if(a){if(a===g)continue;a=bn;break}a=g}return ie(a||bn,t)}return gi}function Gn(s){const t=typeof s;return s===null?"":t==="string"||t==="number"||t==="boolean"?String(s):s instanceof gr||s instanceof Ii||s instanceof is||s instanceof hs||s instanceof Vi?s.toString():JSON.stringify(s)}class Ys{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(t.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Vo(t[1]))return a.error("invalid value");const f=t[1];let g=zr(f);const N=a.expectedType;return g.kind!=="array"||g.N!==0||!N||N.kind!=="array"||typeof N.N=="number"&&N.N!==0||(g=N),new Ys(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Pr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ga={string:tn,number:dt,boolean:Ut,object:gi};class Yi{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let f,g=1;const N=t[0];if(N==="array"){let T,M;if(t.length>2){const V=t[1];if(typeof V!="string"||!(V in ga)||V==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);T=ga[V],g++}else T=bn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=t[2],g++}f=ie(T,M)}else{if(!ga[N])throw new Error(`Types doesn't contain name = ${N}`);f=ga[N]}const S=[];for(;g<t.length;g++){const T=a.parse(t[g],g,bn);if(!T)return null;S.push(T)}return new Yi(f,S)}evaluate(t){for(let a=0;a<this.args.length;a++){const f=this.args[a].evaluate(t);if(!xe(this.type,zr(f)))return f;if(a===this.args.length-1)throw new Pr(`Expected value to be of type ${de(this.type)}, but found ${de(zr(f))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ua={"to-boolean":Ut,"to-color":nr,"to-number":dt,"to-string":tn};class go{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const f=t[0];if(!Ua[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&t.length!==2)return a.error("Expected one argument.");const g=Ua[f],N=[];for(let S=1;S<t.length;S++){const T=a.parse(t[S],S,bn);if(!T)return null;N.push(T)}return new go(g,N)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let a,f;for(const g of this.args){if(a=g.evaluate(t),f=null,a instanceof gr)return a;if(typeof a=="string"){const N=t.parseColor(a);if(N)return N}else if(Array.isArray(a)&&(f=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:xl(a[0],a[1],a[2],a[3]),!f))return new gr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Pr(f||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const f of this.args){a=f.evaluate(t);const g=is.parse(a);if(g)return g}throw new Pr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const f of this.args){a=f.evaluate(t);const g=hs.parse(a);if(g)return g}throw new Pr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const f of this.args){if(a=f.evaluate(t),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new Pr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Ii.fromString(Gn(this.args[0].evaluate(t)));case"resolvedImage":return Vi.fromString(Gn(this.args[0].evaluate(t)));default:return Gn(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const tu=["Unknown","Point","LineString","Polygon"];class _l{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?tu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=gr.parse(t)),a}}class fc{constructor(t,a,f=[],g,N=new wr,S=[]){this.registry=t,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=N,this.errors=S,this.expectedType=g,this._isConstant=a}parse(t,a,f,g,N={}){return a?this.concat(a,f,g)._parse(t,N):this._parse(t,N)}_parse(t,a){function f(g,N,S){return S==="assert"?new Yi(N,[g]):S==="coerce"?new go(N,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const N=this.registry[g];if(N){let S=N.parse(t,this);if(!S)return null;if(this.expectedType){const T=this.expectedType,M=S.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(T.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||M.kind!=="value"&&M.kind!=="array"){if(this.checkSubtype(T,M))return null}else S=f(S,T,a.typeAnnotation||"coerce");else S=f(S,T,a.typeAnnotation||"coerce");else S=f(S,T,a.typeAnnotation||"coerce");else S=f(S,T,a.typeAnnotation||"assert")}if(!(S instanceof Ys)&&S.type.kind!=="resolvedImage"&&this._isConstant(S)){const T=new _l;try{S=new Ys(S.type,S.evaluate(T))}catch(M){return this.error(M.message),null}}return S}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,f){const g=typeof t=="number"?this.path.concat(t):this.path,N=f?this.scope.concat(f):this.scope;return new fc(this.registry,this._isConstant,g,a||null,N,this.errors)}error(t,...a){const f=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new Tn(f,t))}checkSubtype(t,a){const f=xe(t,a);return f&&this.error(f),f}}class ea{constructor(t,a,f){this.type=vi,this.locale=f,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(t.length!==2)return a.error("Expected one argument.");const f=t[1];if(typeof f!="object"||Array.isArray(f))return a.error("Collator options argument must be an object.");const g=a.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Ut);if(!g)return null;const N=a.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Ut);if(!N)return null;let S=null;return f.locale&&(S=a.parse(f.locale,1,tn),!S)?null:new ea(g,N,S)}evaluate(t){return new Qo(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const zo=8192;function wl(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function sr(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function rd(s,t){const a=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(a*g*zo),Math.round(f*g*zo)]}function va(s,t,a){const f=s[0]-t[0],g=s[1]-t[1],N=s[0]-a[0],S=s[1]-a[1];return f*S-N*g==0&&f*N<=0&&g*S<=0}function jn(s,t){let a=!1;for(let S=0,T=t.length;S<T;S++){const M=t[S];for(let V=0,F=M.length;V<F-1;V++){if(va(s,M[V],M[V+1]))return!1;(g=M[V])[1]>(f=s)[1]!=(N=M[V+1])[1]>f[1]&&f[0]<(N[0]-g[0])*(f[1]-g[1])/(N[1]-g[1])+g[0]&&(a=!a)}}var f,g,N;return a}function Cl(s,t){for(let a=0;a<t.length;a++)if(jn(s,t[a]))return!0;return!1}function fs(s,t,a,f){const g=f[0]-a[0],N=f[1]-a[1],S=(s[0]-a[0])*N-g*(s[1]-a[1]),T=(t[0]-a[0])*N-g*(t[1]-a[1]);return S>0&&T<0||S<0&&T>0}function Nl(s,t,a){for(const V of a)for(let F=0;F<V.length-1;++F)if((T=[(S=V[F+1])[0]-(N=V[F])[0],S[1]-N[1]])[0]*(M=[(g=t)[0]-(f=s)[0],g[1]-f[1]])[1]-T[1]*M[0]!=0&&fs(f,g,N,S)&&fs(N,S,f,g))return!0;var f,g,N,S,T,M;return!1}function ya(s,t){for(let a=0;a<s.length;++a)if(!jn(s[a],t))return!1;for(let a=0;a<s.length-1;++a)if(Nl(s[a],s[a+1],t))return!1;return!0}function id(s,t){for(let a=0;a<t.length;a++)if(ya(s,t[a]))return!0;return!1}function Pi(s,t,a){const f=[];for(let g=0;g<s.length;g++){const N=[];for(let S=0;S<s[g].length;S++){const T=rd(s[g][S],a);wl(t,T),N.push(T)}f.push(N)}return f}function ei(s,t,a){const f=[];for(let g=0;g<s.length;g++){const N=Pi(s[g],t,a);f.push(N)}return f}function nu(s,t,a,f){if(s[0]<a[0]||s[0]>a[2]){const g=.5*f;let N=s[0]-a[0]>g?-f:a[0]-s[0]>g?f:0;N===0&&(N=s[0]-a[2]>g?-f:a[2]-s[0]>g?f:0),s[0]+=N}wl(t,s)}function Fs(s,t,a,f){const g=Math.pow(2,f.z)*zo,N=[f.x*zo,f.y*zo],S=[];for(const T of s)for(const M of T){const V=[M.x+N[0],M.y+N[1]];nu(V,t,a,g),S.push(V)}return S}function ss(s,t,a,f){const g=Math.pow(2,f.z)*zo,N=[f.x*zo,f.y*zo],S=[];for(const M of s){const V=[];for(const F of M){const H=[F.x+N[0],F.y+N[1]];wl(t,H),V.push(H)}S.push(V)}if(t[2]-t[0]<=g/2){(T=t)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of S)for(const V of M)nu(V,t,a,g)}var T;return S}class os{constructor(t,a){this.type=Ut,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Vo(t[1])){const f=t[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const N=f.features[g].geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new os(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new os(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new os(f,f)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,f){const g=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],S=a.canonicalID();if(f.type==="Polygon"){const T=Pi(f.coordinates,N,S),M=Fs(a.geometry(),g,N,S);if(!sr(g,N))return!1;for(const V of M)if(!jn(V,T))return!1}if(f.type==="MultiPolygon"){const T=ei(f.coordinates,N,S),M=Fs(a.geometry(),g,N,S);if(!sr(g,N))return!1;for(const V of M)if(!Cl(V,T))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,f){const g=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],S=a.canonicalID();if(f.type==="Polygon"){const T=Pi(f.coordinates,N,S),M=ss(a.geometry(),g,N,S);if(!sr(g,N))return!1;for(const V of M)if(!ya(V,T))return!1}if(f.type==="MultiPolygon"){const T=ei(f.coordinates,N,S),M=ss(a.geometry(),g,N,S);if(!sr(g,N))return!1;for(const V of M)if(!id(V,T))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class mc{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const f=t[1];return a.scope.has(f)?new mc(f,a.scope.get(f)):a.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ms{constructor(t,a,f,g){this.name=t,this.type=a,this._evaluate=f,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,a){const f=t[0],g=ms.definitions[f];if(!g)return a.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const N=Array.isArray(g)?g[0]:g.type,S=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,T=S.filter(([V])=>!Array.isArray(V)||V.length===t.length-1);let M=null;for(const[V,F]of T){M=new fc(a.registry,Sl,a.path,null,a.scope);const H=[];let Y=!1;for(let Q=1;Q<t.length;Q++){const ee=t[Q],ce=Array.isArray(V)?V[Q-1]:V.type,ve=M.parse(ee,1+H.length,ce);if(!ve){Y=!0;break}H.push(ve)}if(!Y)if(Array.isArray(V)&&V.length!==H.length)M.error(`Expected ${V.length} arguments, but found ${H.length} instead.`);else{for(let Q=0;Q<H.length;Q++){const ee=Array.isArray(V)?V[Q]:V.type,ce=H[Q];M.concat(Q+1).checkSubtype(ee,ce.type)}if(M.errors.length===0)return new ms(f,N,F,H)}}if(T.length===1)a.errors.push(...M.errors);else{const V=(T.length?T:S).map(([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(de).join(", ")})`:`(${de(Y.type)}...)`;var Y}).join(" | "),F=[];for(let H=1;H<t.length;H++){const Y=a.parse(t[H],1+F.length);if(!Y)return null;F.push(de(Y.type))}a.error(`Expected arguments of type ${V}, but found (${F.join(", ")}) instead.`)}return null}static register(t,a){ms.definitions=a;for(const f in a)t[f]=ms}}function Sl(s){if(s instanceof mc)return Sl(s.boundExpression);if(s instanceof ms&&s.name==="error"||s instanceof ea||s instanceof os)return!1;const t=s instanceof go||s instanceof Yi;let a=!0;return s.eachChild(f=>{a=t?a&&Sl(f):a&&f instanceof Ys}),!!a&&$a(s)&&pc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function $a(s){if(s instanceof ms&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof os)return!1;let t=!0;return s.eachChild(a=>{t&&!$a(a)&&(t=!1)}),t}function ta(s){if(s instanceof ms&&s.name==="feature-state")return!1;let t=!0;return s.eachChild(a=>{t&&!ta(a)&&(t=!1)}),t}function pc(s,t){if(s instanceof ms&&t.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(f=>{a&&!pc(f,t)&&(a=!1)}),a}function Xs(s,t){const a=s.length-1;let f,g,N=0,S=a,T=0;for(;N<=S;)if(T=Math.floor((N+S)/2),f=s[T],g=s[T+1],f<=t){if(T===a||t<g)return T;N=T+1}else{if(!(f>t))throw new Pr("Input is not a number.");S=T-1}return 0}class Us{constructor(t,a,f){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[g,N]of f)this.labels.push(g),this.outputs.push(N)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const f=a.parse(t[1],1,dt);if(!f)return null;const g=[];let N=null;a.expectedType&&a.expectedType.kind!=="value"&&(N=a.expectedType);for(let S=1;S<t.length;S+=2){const T=S===1?-1/0:t[S],M=t[S+1],V=S,F=S+1;if(typeof T!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(g.length&&g[g.length-1][0]>=T)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const H=a.parse(M,F,N);if(!H)return null;N=N||H.type,g.push([T,H])}return new Us(N,f,g)}evaluate(t){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(t);const g=this.input.evaluate(t);if(g<=a[0])return f[0].evaluate(t);const N=a.length;return g>=a[N-1]?f[N-1].evaluate(t):f[Xs(a,g)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Wn(s,t,a){return s+a*(t-s)}function vo(s,t,a){return s.map((f,g)=>Wn(f,t[g],a))}const Xi={number:Wn,color:function(s,t,a,f="rgb"){switch(f){case"rgb":{const[g,N,S,T]=vo(s.rgb,t.rgb,a);return new gr(g,N,S,T,!1)}case"hcl":{const[g,N,S,T]=s.hcl,[M,V,F,H]=t.hcl;let Y,Q;if(isNaN(g)||isNaN(M))isNaN(g)?isNaN(M)?Y=NaN:(Y=M,S!==1&&S!==0||(Q=V)):(Y=g,F!==1&&F!==0||(Q=N));else{let je=M-g;M>g&&je>180?je-=360:M<g&&g-M>180&&(je+=360),Y=g+a*je}const[ee,ce,ve,be]=function([je,Ne,Le,Fe]){return je=isNaN(je)?0:je*Tt,ar([Le,Math.cos(je)*Ne,Math.sin(je)*Ne,Fe])}([Y,Q??Wn(N,V,a),Wn(S,F,a),Wn(T,H,a)]);return new gr(ee,ce,ve,be,!1)}case"lab":{const[g,N,S,T]=ar(vo(s.lab,t.lab,a));return new gr(g,N,S,T,!1)}}},array:vo,padding:function(s,t,a){return new is(vo(s.values,t.values,a))},variableAnchorOffsetCollection:function(s,t,a){const f=s.values,g=t.values;if(f.length!==g.length)throw new Pr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${t.toString()}`);const N=[];for(let S=0;S<f.length;S+=2){if(f[S]!==g[S])throw new Pr(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${f[S]}, to[${S}]: ${g[S]}`);N.push(f[S]);const[T,M]=f[S+1],[V,F]=g[S+1];N.push([Wn(T,V,a),Wn(M,F,a)])}return new hs(N)}};class Ji{constructor(t,a,f,g,N){this.type=t,this.operator=a,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[S,T]of N)this.labels.push(S),this.outputs.push(T)}static interpolationFactor(t,a,f,g){let N=0;if(t.name==="exponential")N=qa(a,t.base,f,g);else if(t.name==="linear")N=qa(a,1,f,g);else if(t.name==="cubic-bezier"){const S=t.controlPoints;N=new ke(S[0],S[1],S[2],S[3]).solve(qa(a,1,f,g))}return N}static parse(t,a){let[f,g,N,...S]=t;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const V=g[1];if(typeof V!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:V}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const V=g.slice(1);if(V.length!==4||V.some(F=>typeof F!="number"||F<0||F>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:V}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(N=a.parse(N,2,dt),!N)return null;const T=[];let M=null;f==="interpolate-hcl"||f==="interpolate-lab"?M=nr:a.expectedType&&a.expectedType.kind!=="value"&&(M=a.expectedType);for(let V=0;V<S.length;V+=2){const F=S[V],H=S[V+1],Y=V+3,Q=V+4;if(typeof F!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=F)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ee=a.parse(H,Q,M);if(!ee)return null;M=M||ee.type,T.push([F,ee])}return Ke(M,dt)||Ke(M,nr)||Ke(M,I)||Ke(M,J)||Ke(M,ie(dt))?new Ji(M,f,g,N,T):a.error(`Type ${de(M)} is not interpolatable.`)}evaluate(t){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(t);const g=this.input.evaluate(t);if(g<=a[0])return f[0].evaluate(t);const N=a.length;if(g>=a[N-1])return f[N-1].evaluate(t);const S=Xs(a,g),T=Ji.interpolationFactor(this.interpolation,g,a[S],a[S+1]),M=f[S].evaluate(t),V=f[S+1].evaluate(t);switch(this.operator){case"interpolate":return Xi[this.type.kind](M,V,T);case"interpolate-hcl":return Xi.color(M,V,T,"hcl");case"interpolate-lab":return Xi.color(M,V,T,"lab")}}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function qa(s,t,a,f){const g=f-a,N=s-a;return g===0?0:t===1?N/g:(Math.pow(t,N)-1)/(Math.pow(t,g)-1)}class El{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expectected at least one argument.");let f=null;const g=a.expectedType;g&&g.kind!=="value"&&(f=g);const N=[];for(const T of t.slice(1)){const M=a.parse(T,1+N.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,N.push(M)}if(!f)throw new Error("No output type");const S=g&&N.some(T=>xe(g,T.type));return new El(S?bn:f,N)}evaluate(t){let a,f=null,g=0;for(const N of this.args)if(g++,f=N.evaluate(t),f&&f instanceof Vi&&!f.available&&(a||(a=f.name),f=null,g===this.args.length&&(f=a)),f!==null)break;return f}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class Dl{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const f=[];for(let N=1;N<t.length-1;N+=2){const S=t[N];if(typeof S!="string")return a.error(`Expected string, but found ${typeof S} instead.`,N);if(/[^a-zA-Z0-9_]/.test(S))return a.error("Variable names must contain only alphanumeric characters or '_'.",N);const T=a.parse(t[N+1],N+1);if(!T)return null;f.push([S,T])}const g=a.parse(t[t.length-1],t.length-1,a.expectedType,f);return g?new Dl(f,g):null}outputDefined(){return this.result.outputDefined()}}class Tl{constructor(t,a,f){this.type=t,this.index=a,this.input=f}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const f=a.parse(t[1],1,dt),g=a.parse(t[2],2,ie(a.expectedType||bn));return f&&g?new Tl(g.type.itemType,f,g):null}evaluate(t){const a=this.index.evaluate(t),f=this.input.evaluate(t);if(a<0)throw new Pr(`Array index out of bounds: ${a} < 0.`);if(a>=f.length)throw new Pr(`Array index out of bounds: ${a} > ${f.length-1}.`);if(a!==Math.floor(a))throw new Pr(`Array index must be an integer, but found ${a} instead.`);return f[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class gc{constructor(t,a){this.type=Ut,this.needle=t,this.haystack=a}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const f=a.parse(t[1],1,bn),g=a.parse(t[2],2,bn);return f&&g?ge(f.type,[Ut,tn,dt,pr,bn])?new gc(f,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${de(f.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),f=this.haystack.evaluate(t);if(!f)return!1;if(!Ee(a,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${de(zr(a))} instead.`);if(!Ee(f,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${de(zr(f))} instead.`);return f.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class K{constructor(t,a,f){this.type=dt,this.needle=t,this.haystack=a,this.fromIndex=f}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const f=a.parse(t[1],1,bn),g=a.parse(t[2],2,bn);if(!f||!g)return null;if(!ge(f.type,[Ut,tn,dt,pr,bn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${de(f.type)} instead`);if(t.length===4){const N=a.parse(t[3],3,dt);return N?new K(f,g,N):null}return new K(f,g)}evaluate(t){const a=this.needle.evaluate(t),f=this.haystack.evaluate(t);if(!Ee(a,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${de(zr(a))} instead.`);if(!Ee(f,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${de(zr(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(t);return f.indexOf(a,g)}return f.indexOf(a)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class _e{constructor(t,a,f,g,N,S){this.inputType=t,this.type=a,this.input=f,this.cases=g,this.outputs=N,this.otherwise=S}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let f,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const N={},S=[];for(let V=2;V<t.length-1;V+=2){let F=t[V];const H=t[V+1];Array.isArray(F)||(F=[F]);const Y=a.concat(V);if(F.length===0)return Y.error("Expected at least one branch label.");for(const ee of F){if(typeof ee!="number"&&typeof ee!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Y.error("Numeric branch labels must be integer values.");if(f){if(Y.checkSubtype(f,zr(ee)))return null}else f=zr(ee);if(N[String(ee)]!==void 0)return Y.error("Branch labels must be unique.");N[String(ee)]=S.length}const Q=a.parse(H,V,g);if(!Q)return null;g=g||Q.type,S.push(Q)}const T=a.parse(t[1],1,bn);if(!T)return null;const M=a.parse(t[t.length-1],t.length-1,g);return M?T.type.kind!=="value"&&a.concat(1).checkSubtype(f,T.type)?null:new _e(f,g,T,N,S,M):null}evaluate(t){const a=this.input.evaluate(t);return(zr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ge{constructor(t,a,f){this.type=t,this.branches=a,this.otherwise=f}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const g=[];for(let S=1;S<t.length-1;S+=2){const T=a.parse(t[S],S,Ut);if(!T)return null;const M=a.parse(t[S+1],S+1,f);if(!M)return null;g.push([T,M]),f=f||M.type}const N=a.parse(t[t.length-1],t.length-1,f);if(!N)return null;if(!f)throw new Error("Can't infer output type");return new Ge(f,g,N)}evaluate(t){for(const[a,f]of this.branches)if(a.evaluate(t))return f.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,f]of this.branches)t(a),t(f);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class et{constructor(t,a,f,g){this.type=t,this.input=a,this.beginIndex=f,this.endIndex=g}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const f=a.parse(t[1],1,bn),g=a.parse(t[2],2,dt);if(!f||!g)return null;if(!ge(f.type,[ie(bn),tn,bn]))return a.error(`Expected first argument to be of type array or string, but found ${de(f.type)} instead`);if(t.length===4){const N=a.parse(t[3],3,dt);return N?new et(f.type,f,g,N):null}return new et(f.type,f,g)}evaluate(t){const a=this.input.evaluate(t),f=this.beginIndex.evaluate(t);if(!Ee(a,["string","array"]))throw new Pr(`Expected first argument to be of type array or string, but found ${de(zr(a))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(t);return a.slice(f,g)}return a.slice(f)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function jt(s,t){return s==="=="||s==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Cn(s,t,a,f){return f.compare(t,a)===0}function Zt(s,t,a){const f=s!=="=="&&s!=="!=";return class Pj{constructor(N,S,T){this.type=Ut,this.lhs=N,this.rhs=S,this.collator=T,this.hasUntypedArgument=N.type.kind==="value"||S.type.kind==="value"}static parse(N,S){if(N.length!==3&&N.length!==4)return S.error("Expected two or three arguments.");const T=N[0];let M=S.parse(N[1],1,bn);if(!M)return null;if(!jt(T,M.type))return S.concat(1).error(`"${T}" comparisons are not supported for type '${de(M.type)}'.`);let V=S.parse(N[2],2,bn);if(!V)return null;if(!jt(T,V.type))return S.concat(2).error(`"${T}" comparisons are not supported for type '${de(V.type)}'.`);if(M.type.kind!==V.type.kind&&M.type.kind!=="value"&&V.type.kind!=="value")return S.error(`Cannot compare types '${de(M.type)}' and '${de(V.type)}'.`);f&&(M.type.kind==="value"&&V.type.kind!=="value"?M=new Yi(V.type,[M]):M.type.kind!=="value"&&V.type.kind==="value"&&(V=new Yi(M.type,[V])));let F=null;if(N.length===4){if(M.type.kind!=="string"&&V.type.kind!=="string"&&M.type.kind!=="value"&&V.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(F=S.parse(N[3],3,vi),!F)return null}return new Pj(M,V,F)}evaluate(N){const S=this.lhs.evaluate(N),T=this.rhs.evaluate(N);if(f&&this.hasUntypedArgument){const M=zr(S),V=zr(T);if(M.kind!==V.kind||M.kind!=="string"&&M.kind!=="number")throw new Pr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${M.kind}, ${V.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=zr(S),V=zr(T);if(M.kind!=="string"||V.kind!=="string")return t(N,S,T)}return this.collator?a(N,S,T,this.collator.evaluate(N)):t(N,S,T)}eachChild(N){N(this.lhs),N(this.rhs),this.collator&&N(this.collator)}outputDefined(){return!0}}}const An=Zt("==",function(s,t,a){return t===a},Cn),or=Zt("!=",function(s,t,a){return t!==a},function(s,t,a,f){return!Cn(0,t,a,f)}),jr=Zt("<",function(s,t,a){return t<a},function(s,t,a,f){return f.compare(t,a)<0}),Wr=Zt(">",function(s,t,a){return t>a},function(s,t,a,f){return f.compare(t,a)>0}),Zr=Zt("<=",function(s,t,a){return t<=a},function(s,t,a,f){return f.compare(t,a)<=0}),tr=Zt(">=",function(s,t,a){return t>=a},function(s,t,a,f){return f.compare(t,a)>=0});class Kr{constructor(t,a,f,g,N){this.type=tn,this.number=t,this.locale=a,this.currency=f,this.minFractionDigits=g,this.maxFractionDigits=N}static parse(t,a){if(t.length!==3)return a.error("Expected two arguments.");const f=a.parse(t[1],1,dt);if(!f)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let N=null;if(g.locale&&(N=a.parse(g.locale,1,tn),!N))return null;let S=null;if(g.currency&&(S=a.parse(g.currency,1,tn),!S))return null;let T=null;if(g["min-fraction-digits"]&&(T=a.parse(g["min-fraction-digits"],1,dt),!T))return null;let M=null;return g["max-fraction-digits"]&&(M=a.parse(g["max-fraction-digits"],1,dt),!M)?null:new Kr(f,N,S,T,M)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class di{constructor(t){this.type=he,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const f=t[1];if(!Array.isArray(f)&&typeof f=="object")return a.error("First argument must be an image or text section.");const g=[];let N=!1;for(let S=1;S<=t.length-1;++S){const T=t[S];if(N&&typeof T=="object"&&!Array.isArray(T)){N=!1;let M=null;if(T["font-scale"]&&(M=a.parse(T["font-scale"],1,dt),!M))return null;let V=null;if(T["text-font"]&&(V=a.parse(T["text-font"],1,ie(tn)),!V))return null;let F=null;if(T["text-color"]&&(F=a.parse(T["text-color"],1,nr),!F))return null;const H=g[g.length-1];H.scale=M,H.font=V,H.textColor=F}else{const M=a.parse(t[S],1,bn);if(!M)return null;const V=M.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");N=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new di(g)}evaluate(t){return new Ii(this.sections.map(a=>{const f=a.content.evaluate(t);return zr(f)===G?new Fa("",f,null,null,null):new Fa(Gn(f),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}outputDefined(){return!1}}class ba{constructor(t){this.type=G,this.input=t}static parse(t,a){if(t.length!==2)return a.error("Expected two arguments.");const f=a.parse(t[1],1,tn);return f?new ba(f):a.error("No image name provided.")}evaluate(t){const a=this.input.evaluate(t),f=Vi.fromString(a);return f&&t.availableImages&&(f.available=t.availableImages.indexOf(a)>-1),f}eachChild(t){t(this.input)}outputDefined(){return!1}}class Pl{constructor(t){this.type=dt,this.input=t}static parse(t,a){if(t.length!==2)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const f=a.parse(t[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${de(f.type)} instead.`):new Pl(f):null}evaluate(t){const a=this.input.evaluate(t);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Pr(`Expected value to be of type string or array, but found ${de(zr(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const $s={"==":An,"!=":or,">":Wr,"<":jr,">=":tr,"<=":Zr,array:Yi,at:Tl,boolean:Yi,case:Ge,coalesce:El,collator:ea,format:di,image:ba,in:gc,"index-of":K,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:Pl,let:Dl,literal:Ys,match:_e,number:Yi,"number-format":Kr,object:Yi,slice:et,step:Us,string:Yi,"to-boolean":go,"to-color":go,"to-number":go,"to-string":go,var:mc,within:os};function vc(s,[t,a,f,g]){t=t.evaluate(s),a=a.evaluate(s),f=f.evaluate(s);const N=g?g.evaluate(s):1,S=xl(t,a,f,N);if(S)throw new Pr(S);return new gr(t/255,a/255,f/255,N,!1)}function yc(s,t){return s in t}function ru(s,t){const a=t[s];return a===void 0?null:a}function na(s){return{type:s}}function sd(s){return{result:"success",value:s}}function xa(s){return{result:"error",value:s}}function Ha(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function xh(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function od(s){return!!s.expression&&s.expression.interpolated}function fr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function ai(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function _a(s){return s}function rr(s,t){const a=t.type==="color",f=s.stops&&typeof s.stops[0][0]=="object",g=f||!(f||s.property!==void 0),N=s.type||(od(t)?"exponential":"interval");if(a||t.type==="padding"){const F=a?gr.parse:is.parse;(s=Hn({},s)).stops&&(s.stops=s.stops.map(H=>[H[0],F(H[1])])),s.default=F(s.default?s.default:t.default)}if(s.colorSpace&&(S=s.colorSpace)!=="rgb"&&S!=="hcl"&&S!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var S;let T,M,V;if(N==="exponential")T=iu;else if(N==="interval")T=$r;else if(N==="categorical"){T=Yr,M=Object.create(null);for(const F of s.stops)M[F[0]]=F[1];V=typeof s.stops[0][0]}else{if(N!=="identity")throw new Error(`Unknown function type "${N}"`);T=su}if(f){const F={},H=[];for(let ee=0;ee<s.stops.length;ee++){const ce=s.stops[ee],ve=ce[0].zoom;F[ve]===void 0&&(F[ve]={zoom:ve,type:s.type,property:s.property,default:s.default,stops:[]},H.push(ve)),F[ve].stops.push([ce[0].value,ce[1]])}const Y=[];for(const ee of H)Y.push([F[ee].zoom,rr(F[ee],t)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:Ji.interpolationFactor.bind(void 0,Q),zoomStops:Y.map(ee=>ee[0]),evaluate:({zoom:ee},ce)=>iu({stops:Y,base:s.base},t,ee).evaluate(ee,ce)}}if(g){const F=N==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Ji.interpolationFactor.bind(void 0,F),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(s,t,H,M,V)}}return{kind:"source",evaluate(F,H){const Y=H&&H.properties?H.properties[s.property]:void 0;return Y===void 0?wa(s.default,t.default):T(s,t,Y,M,V)}}}function wa(s,t,a){return s!==void 0?s:t!==void 0?t:a!==void 0?a:void 0}function Yr(s,t,a,f,g){return wa(typeof a===g?f[a]:void 0,s.default,t.default)}function $r(s,t,a){if(fr(a)!=="number")return wa(s.default,t.default);const f=s.stops.length;if(f===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[f-1][0])return s.stops[f-1][1];const g=Xs(s.stops.map(N=>N[0]),a);return s.stops[g][1]}function iu(s,t,a){const f=s.base!==void 0?s.base:1;if(fr(a)!=="number")return wa(s.default,t.default);const g=s.stops.length;if(g===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[g-1][0])return s.stops[g-1][1];const N=Xs(s.stops.map(F=>F[0]),a),S=function(F,H,Y,Q){const ee=Q-Y,ce=F-Y;return ee===0?0:H===1?ce/ee:(Math.pow(H,ce)-1)/(Math.pow(H,ee)-1)}(a,f,s.stops[N][0],s.stops[N+1][0]),T=s.stops[N][1],M=s.stops[N+1][1],V=Xi[t.type]||_a;return typeof T.evaluate=="function"?{evaluate(...F){const H=T.evaluate.apply(void 0,F),Y=M.evaluate.apply(void 0,F);if(H!==void 0&&Y!==void 0)return V(H,Y,S,s.colorSpace)}}:V(T,M,S,s.colorSpace)}function su(s,t,a){switch(t.type){case"color":a=gr.parse(a);break;case"formatted":a=Ii.fromString(a.toString());break;case"resolvedImage":a=Vi.fromString(a.toString());break;case"padding":a=is.parse(a);break;default:fr(a)===t.type||t.type==="enum"&&t.values[a]||(a=void 0)}return wa(a,s.default,t.default)}ms.register($s,{error:[{kind:"error"},[tn],(s,[t])=>{throw new Pr(t.evaluate(s))}],typeof:[tn,[bn],(s,[t])=>de(zr(t.evaluate(s)))],"to-rgba":[ie(dt,4),[nr],(s,[t])=>{const[a,f,g,N]=t.evaluate(s).rgb;return[255*a,255*f,255*g,N]}],rgb:[nr,[dt,dt,dt],vc],rgba:[nr,[dt,dt,dt,dt],vc],has:{type:Ut,overloads:[[[tn],(s,[t])=>yc(t.evaluate(s),s.properties())],[[tn,gi],(s,[t,a])=>yc(t.evaluate(s),a.evaluate(s))]]},get:{type:bn,overloads:[[[tn],(s,[t])=>ru(t.evaluate(s),s.properties())],[[tn,gi],(s,[t,a])=>ru(t.evaluate(s),a.evaluate(s))]]},"feature-state":[bn,[tn],(s,[t])=>ru(t.evaluate(s),s.featureState||{})],properties:[gi,[],s=>s.properties()],"geometry-type":[tn,[],s=>s.geometryType()],id:[bn,[],s=>s.id()],zoom:[dt,[],s=>s.globals.zoom],"heatmap-density":[dt,[],s=>s.globals.heatmapDensity||0],"line-progress":[dt,[],s=>s.globals.lineProgress||0],accumulated:[bn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[dt,na(dt),(s,t)=>{let a=0;for(const f of t)a+=f.evaluate(s);return a}],"*":[dt,na(dt),(s,t)=>{let a=1;for(const f of t)a*=f.evaluate(s);return a}],"-":{type:dt,overloads:[[[dt,dt],(s,[t,a])=>t.evaluate(s)-a.evaluate(s)],[[dt],(s,[t])=>-t.evaluate(s)]]},"/":[dt,[dt,dt],(s,[t,a])=>t.evaluate(s)/a.evaluate(s)],"%":[dt,[dt,dt],(s,[t,a])=>t.evaluate(s)%a.evaluate(s)],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(s,[t,a])=>Math.pow(t.evaluate(s),a.evaluate(s))],sqrt:[dt,[dt],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))],log2:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[dt,[dt],(s,[t])=>Math.sin(t.evaluate(s))],cos:[dt,[dt],(s,[t])=>Math.cos(t.evaluate(s))],tan:[dt,[dt],(s,[t])=>Math.tan(t.evaluate(s))],asin:[dt,[dt],(s,[t])=>Math.asin(t.evaluate(s))],acos:[dt,[dt],(s,[t])=>Math.acos(t.evaluate(s))],atan:[dt,[dt],(s,[t])=>Math.atan(t.evaluate(s))],min:[dt,na(dt),(s,t)=>Math.min(...t.map(a=>a.evaluate(s)))],max:[dt,na(dt),(s,t)=>Math.max(...t.map(a=>a.evaluate(s)))],abs:[dt,[dt],(s,[t])=>Math.abs(t.evaluate(s))],round:[dt,[dt],(s,[t])=>{const a=t.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[dt,[dt],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[dt,[dt],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[Ut,[tn,bn],(s,[t,a])=>s.properties()[t.value]===a.value],"filter-id-==":[Ut,[bn],(s,[t])=>s.id()===t.value],"filter-type-==":[Ut,[tn],(s,[t])=>s.geometryType()===t.value],"filter-<":[Ut,[tn,bn],(s,[t,a])=>{const f=s.properties()[t.value],g=a.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Ut,[bn],(s,[t])=>{const a=s.id(),f=t.value;return typeof a==typeof f&&a<f}],"filter->":[Ut,[tn,bn],(s,[t,a])=>{const f=s.properties()[t.value],g=a.value;return typeof f==typeof g&&f>g}],"filter-id->":[Ut,[bn],(s,[t])=>{const a=s.id(),f=t.value;return typeof a==typeof f&&a>f}],"filter-<=":[Ut,[tn,bn],(s,[t,a])=>{const f=s.properties()[t.value],g=a.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Ut,[bn],(s,[t])=>{const a=s.id(),f=t.value;return typeof a==typeof f&&a<=f}],"filter->=":[Ut,[tn,bn],(s,[t,a])=>{const f=s.properties()[t.value],g=a.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Ut,[bn],(s,[t])=>{const a=s.id(),f=t.value;return typeof a==typeof f&&a>=f}],"filter-has":[Ut,[bn],(s,[t])=>t.value in s.properties()],"filter-has-id":[Ut,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Ut,[ie(tn)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[Ut,[ie(bn)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[Ut,[tn,ie(bn)],(s,[t,a])=>a.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[Ut,[tn,ie(bn)],(s,[t,a])=>function(f,g,N,S){for(;N<=S;){const T=N+S>>1;if(g[T]===f)return!0;g[T]>f?S=T-1:N=T+1}return!1}(s.properties()[t.value],a.value,0,a.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(s,[t,a])=>t.evaluate(s)&&a.evaluate(s)],[na(Ut),(s,t)=>{for(const a of t)if(!a.evaluate(s))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(s,[t,a])=>t.evaluate(s)||a.evaluate(s)],[na(Ut),(s,t)=>{for(const a of t)if(a.evaluate(s))return!0;return!1}]]},"!":[Ut,[Ut],(s,[t])=>!t.evaluate(s)],"is-supported-script":[Ut,[tn],(s,[t])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(t.evaluate(s))}],upcase:[tn,[tn],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[tn,[tn],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[tn,na(bn),(s,t)=>t.map(a=>Gn(a.evaluate(s))).join("")],"resolved-locale":[tn,[vi],(s,[t])=>t.evaluate(s).resolvedLocale()]});class ad{constructor(t,a){var f;this.expression=t,this._warningHistory={},this._evaluator=new _l,this._defaultValue=a?(f=a).type==="color"&&ai(f.default)?new gr(0,0,0,0):f.type==="color"?gr.parse(f.default)||null:f.type==="padding"?is.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?hs.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(t,a,f,g,N,S){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=f,this._evaluator.canonical=g,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)}evaluate(t,a,f,g,N,S){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function as(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in $s}function yo(s,t){const a=new fc($s,Sl,[],t?function(g){const N={color:nr,string:tn,number:dt,enum:tn,boolean:Ut,formatted:he,padding:I,resolvedImage:G,variableAnchorOffsetCollection:J};return g.type==="array"?ie(N[g.value]||bn,g.length):N[g.type]}(t):void 0),f=a.parse(s,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?sd(new ad(f,t)):xa(a.errors)}class yi{constructor(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent=t!=="constant"&&!ta(a.expression)}evaluateWithoutErrorHandling(t,a,f,g,N,S){return this._styleExpression.evaluateWithoutErrorHandling(t,a,f,g,N,S)}evaluate(t,a,f,g,N,S){return this._styleExpression.evaluate(t,a,f,g,N,S)}}class bo{constructor(t,a,f,g){this.kind=t,this.zoomStops=f,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!ta(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,a,f,g,N,S){return this._styleExpression.evaluateWithoutErrorHandling(t,a,f,g,N,S)}evaluate(t,a,f,g,N,S){return this._styleExpression.evaluate(t,a,f,g,N,S)}interpolationFactor(t,a,f){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,t,a,f):0}}function ou(s,t){const a=yo(s,t);if(a.result==="error")return a;const f=a.value.expression,g=$a(f);if(!g&&!Ha(t))return xa([new Tn("","data expressions not supported")]);const N=pc(f,["zoom"]);if(!N&&!xh(t))return xa([new Tn("","zoom expressions not supported")]);const S=au(f);return S||N?S instanceof Tn?xa([S]):S instanceof Ji&&!od(t)?xa([new Tn("",'"interpolate" expressions cannot be used with this property')]):sd(S?new bo(g?"camera":"composite",a.value,S.labels,S instanceof Ji?S.interpolation:void 0):new yi(g?"constant":"source",a.value)):xa([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ga{constructor(t,a){this._parameters=t,this._specification=a,Hn(this,rr(this._parameters,this._specification))}static deserialize(t){return new Ga(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function au(s){let t=null;if(s instanceof Dl)t=au(s.result);else if(s instanceof El){for(const a of s.args)if(t=au(a),t)break}else(s instanceof Us||s instanceof Ji)&&s.input instanceof ms&&s.input.name==="zoom"&&(t=s);return t instanceof Tn||s.eachChild(a=>{const f=au(a);f instanceof Tn?t=f:!t&&f?t=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&f&&t!==f&&(t=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Ca(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const t of s.slice(1))if(!Ca(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const xp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _h(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Ca(s)||(s=ld(s));const t=yo(s,xp);if(t.result==="error")throw new Error(t.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,f,g)=>t.value.evaluate(a,f,{},g),needGeometry:Af(s)}}function wh(s,t){return s<t?-1:s>t?1:0}function Af(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let t=1;t<s.length;t++)if(Af(s[t]))return!0;return!1}function ld(s){if(!s)return!0;const t=s[0];return s.length<=1?t!=="any":t==="=="?Ch(s[1],s[2],"=="):t==="!="?lu(Ch(s[1],s[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Ch(s[1],s[2],t):t==="any"?(a=s.slice(1),["any"].concat(a.map(ld))):t==="all"?["all"].concat(s.slice(1).map(ld)):t==="none"?["all"].concat(s.slice(1).map(ld).map(lu)):t==="in"?Nh(s[1],s.slice(2)):t==="!in"?lu(Nh(s[1],s.slice(2))):t==="has"?Mf(s[1]):t==="!has"?lu(Mf(s[1])):t!=="within"||s;var a}function Ch(s,t,a){switch(s){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,s,t]}}function Nh(s,t){if(t.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",s,["literal",t.sort(wh)]]:["filter-in-small",s,["literal",t]]}}function Mf(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function lu(s){return["!",s]}function cd(s){const t=typeof s;if(t==="number"||t==="boolean"||t==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const N of s)g+=`${cd(N)},`;return`${g}]`}const a=Object.keys(s).sort();let f="{";for(let g=0;g<a.length;g++)f+=`${JSON.stringify(a[g])}:${cd(s[a[g]])},`;return`${f}}`}function cu(s){let t="";for(const a of xr)t+=`/${cd(s[a])}`;return t}function jl(s){const t=s.value;return t?[new Qe(s.key,t,"constants have been deprecated as of v8")]:[]}function ti(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Wa(s){if(Array.isArray(s))return s.map(Wa);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const t={};for(const a in s)t[a]=Wa(s[a]);return t}return ti(s)}function Ns(s){const t=s.key,a=s.value,f=s.valueSpec||{},g=s.objectElementValidators||{},N=s.style,S=s.styleSpec,T=s.validateSpec;let M=[];const V=fr(a);if(V!=="object")return[new Qe(t,a,`object expected, ${V} found`)];for(const F in a){const H=F.split(".")[0],Y=f[H]||f["*"];let Q;if(g[H])Q=g[H];else if(f[H])Q=T;else if(g["*"])Q=g["*"];else{if(!f["*"]){M.push(new Qe(t,a[F],`unknown property "${F}"`));continue}Q=T}M=M.concat(Q({key:(t&&`${t}.`)+F,value:a[F],valueSpec:Y,style:N,styleSpec:S,object:a,objectKey:F,validateSpec:T},a))}for(const F in f)g[F]||f[F].required&&f[F].default===void 0&&a[F]===void 0&&M.push(new Qe(t,a,`missing required property "${F}"`));return M}function bc(s){const t=s.value,a=s.valueSpec,f=s.style,g=s.styleSpec,N=s.key,S=s.arrayElementValidator||s.validateSpec;if(fr(t)!=="array")return[new Qe(N,t,`array expected, ${fr(t)} found`)];if(a.length&&t.length!==a.length)return[new Qe(N,t,`array length ${a.length} expected, length ${t.length} found`)];if(a["min-length"]&&t.length<a["min-length"])return[new Qe(N,t,`array length at least ${a["min-length"]} expected, length ${t.length} found`)];let T={type:a.value,values:a.values};g.$version<7&&(T.function=a.function),fr(a.value)==="object"&&(T=a.value);let M=[];for(let V=0;V<t.length;V++)M=M.concat(S({array:t,arrayIndex:V,value:t[V],valueSpec:T,validateSpec:s.validateSpec,style:f,styleSpec:g,key:`${N}[${V}]`}));return M}function uu(s){const t=s.key,a=s.value,f=s.valueSpec;let g=fr(a);return g==="number"&&a!=a&&(g="NaN"),g!=="number"?[new Qe(t,a,`number expected, ${g} found`)]:"minimum"in f&&a<f.minimum?[new Qe(t,a,`${a} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&a>f.maximum?[new Qe(t,a,`${a} is greater than the maximum value ${f.maximum}`)]:[]}function ud(s){const t=s.valueSpec,a=ti(s.value.type);let f,g,N,S={};const T=a!=="categorical"&&s.value.property===void 0,M=!T,V=fr(s.value.stops)==="array"&&fr(s.value.stops[0])==="array"&&fr(s.value.stops[0][0])==="object",F=Ns({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Q){if(a==="identity")return[new Qe(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const ce=Q.value;return ee=ee.concat(bc({key:Q.key,value:ce,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:H})),fr(ce)==="array"&&ce.length===0&&ee.push(new Qe(Q.key,ce,"array must have at least one stop")),ee},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:t,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return a==="identity"&&T&&F.push(new Qe(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||F.push(new Qe(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!od(s.valueSpec)&&F.push(new Qe(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(M&&!Ha(s.valueSpec)?F.push(new Qe(s.key,s.value,"property functions not supported")):T&&!xh(s.valueSpec)&&F.push(new Qe(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!V||s.value.property!==void 0||F.push(new Qe(s.key,s.value,'"property" property is required')),F;function H(Q){let ee=[];const ce=Q.value,ve=Q.key;if(fr(ce)!=="array")return[new Qe(ve,ce,`array expected, ${fr(ce)} found`)];if(ce.length!==2)return[new Qe(ve,ce,`array length 2 expected, length ${ce.length} found`)];if(V){if(fr(ce[0])!=="object")return[new Qe(ve,ce,`object expected, ${fr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new Qe(ve,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new Qe(ve,ce,"object stop key must have value")];if(N&&N>ti(ce[0].zoom))return[new Qe(ve,ce[0].zoom,"stop zoom values must appear in ascending order")];ti(ce[0].zoom)!==N&&(N=ti(ce[0].zoom),g=void 0,S={}),ee=ee.concat(Ns({key:`${ve}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:uu,value:Y}}))}else ee=ee.concat(Y({key:`${ve}[0]`,value:ce[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},ce));return as(Wa(ce[1]))?ee.concat([new Qe(`${ve}[1]`,ce[1],"expressions are not allowed in function stops.")]):ee.concat(Q.validateSpec({key:`${ve}[1]`,value:ce[1],valueSpec:t,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,ee){const ce=fr(Q.value),ve=ti(Q.value),be=Q.value!==null?Q.value:ee;if(f){if(ce!==f)return[new Qe(Q.key,be,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new Qe(Q.key,be,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&a!=="categorical"){let je=`number expected, ${ce} found`;return Ha(t)&&a===void 0&&(je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(Q.key,be,je)]}return a!=="categorical"||ce!=="number"||isFinite(ve)&&Math.floor(ve)===ve?a!=="categorical"&&ce==="number"&&g!==void 0&&ve<g?[new Qe(Q.key,be,"stop domain values must appear in ascending order")]:(g=ve,a==="categorical"&&ve in S?[new Qe(Q.key,be,"stop domain values must be unique")]:(S[ve]=!0,[])):[new Qe(Q.key,be,`integer expected, found ${ve}`)]}}function kl(s){const t=(s.expressionContext==="property"?ou:yo)(Wa(s.value),s.valueSpec);if(t.result==="error")return t.value.map(f=>new Qe(`${s.key}${f.key}`,s.value,f.message));const a=t.value.expression||t.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new Qe(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ta(a))return[new Qe(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ta(a))return[new Qe(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!pc(a,["zoom","feature-state"]))return[new Qe(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!$a(a))return[new Qe(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function du(s){const t=s.key,a=s.value,f=s.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(ti(a))===-1&&g.push(new Qe(t,a,`expected one of [${f.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(f.values).indexOf(ti(a))===-1&&g.push(new Qe(t,a,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(a)} found`)),g}function xc(s){return Ca(Wa(s.value))?kl(Hn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rf(s)}function Rf(s){const t=s.value,a=s.key;if(fr(t)!=="array")return[new Qe(a,t,`array expected, ${fr(t)} found`)];const f=s.styleSpec;let g,N=[];if(t.length<1)return[new Qe(a,t,"filter array must have at least 1 element")];switch(N=N.concat(du({key:`${a}[0]`,value:t[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),ti(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ti(t[1])==="$type"&&N.push(new Qe(a,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&N.push(new Qe(a,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=fr(t[1]),g!=="string"&&N.push(new Qe(`${a}[1]`,t[1],`string expected, ${g} found`)));for(let S=2;S<t.length;S++)g=fr(t[S]),ti(t[1])==="$type"?N=N.concat(du({key:`${a}[${S}]`,value:t[S],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&N.push(new Qe(`${a}[${S}]`,t[S],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let S=1;S<t.length;S++)N=N.concat(Rf({key:`${a}[${S}]`,value:t[S],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=fr(t[1]),t.length!==2?N.push(new Qe(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&N.push(new Qe(`${a}[1]`,t[1],`string expected, ${g} found`));break;case"within":g=fr(t[1]),t.length!==2?N.push(new Qe(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="object"&&N.push(new Qe(`${a}[1]`,t[1],`object expected, ${g} found`))}return N}function Lf(s,t){const a=s.key,f=s.validateSpec,g=s.style,N=s.styleSpec,S=s.value,T=s.objectKey,M=N[`${t}_${s.layerType}`];if(!M)return[];const V=T.match(/^(.*)-transition$/);if(t==="paint"&&V&&M[V[1]]&&M[V[1]].transition)return f({key:a,value:S,valueSpec:N.transition,style:g,styleSpec:N});const F=s.valueSpec||M[T];if(!F)return[new Qe(a,S,`unknown property "${T}"`)];let H;if(fr(S)==="string"&&Ha(F)&&!F.tokens&&(H=/^{([^}]+)}$/.exec(S)))return[new Qe(a,S,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const Y=[];return s.layerType==="symbol"&&(T==="text-field"&&g&&!g.glyphs&&Y.push(new Qe(a,S,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&ai(Wa(S))&&ti(S.type)==="identity"&&Y.push(new Qe(a,S,'"text-font" does not support identity functions'))),Y.concat(f({key:s.key,value:S,valueSpec:F,style:g,styleSpec:N,expressionContext:"property",propertyType:t,propertyKey:T}))}function Sh(s){return Lf(s,"paint")}function If(s){return Lf(s,"layout")}function Eh(s){let t=[];const a=s.value,f=s.key,g=s.style,N=s.styleSpec;a.type||a.ref||t.push(new Qe(f,a,'either "type" or "ref" is required'));let S=ti(a.type);const T=ti(a.ref);if(a.id){const M=ti(a.id);for(let V=0;V<s.arrayIndex;V++){const F=g.layers[V];ti(F.id)===M&&t.push(new Qe(f,a.id,`duplicate layer id "${a.id}", previously used at line ${F.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach(V=>{V in a&&t.push(new Qe(f,a[V],`"${V}" is prohibited for ref layers`))}),g.layers.forEach(V=>{ti(V.id)===T&&(M=V)}),M?M.ref?t.push(new Qe(f,a.ref,"ref cannot reference another ref layer")):S=ti(M.type):t.push(new Qe(f,a.ref,`ref layer "${T}" not found`))}else if(S!=="background")if(a.source){const M=g.sources&&g.sources[a.source],V=M&&ti(M.type);M?V==="vector"&&S==="raster"?t.push(new Qe(f,a.source,`layer "${a.id}" requires a raster source`)):V!=="raster-dem"&&S==="hillshade"?t.push(new Qe(f,a.source,`layer "${a.id}" requires a raster-dem source`)):V==="raster"&&S!=="raster"?t.push(new Qe(f,a.source,`layer "${a.id}" requires a vector source`)):V!=="vector"||a["source-layer"]?V==="raster-dem"&&S!=="hillshade"?t.push(new Qe(f,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!a.paint||!a.paint["line-gradient"]||V==="geojson"&&M.lineMetrics||t.push(new Qe(f,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Qe(f,a,`layer "${a.id}" must specify a "source-layer"`)):t.push(new Qe(f,a.source,`source "${a.source}" not found`))}else t.push(new Qe(f,a,'missing required property "source"'));return t=t.concat(Ns({key:f,value:a,valueSpec:N.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:a.type,valueSpec:N.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:xc,layout:M=>Ns({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>If(Hn({layerType:S},V))}}),paint:M=>Ns({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>Sh(Hn({layerType:S},V))}})}})),t}function ra(s){const t=s.value,a=s.key,f=fr(t);return f!=="string"?[new Qe(a,t,`string expected, ${f} found`)]:[]}const hu={promoteId:function({key:s,value:t}){if(fr(t)==="string")return ra({key:s,value:t});{const a=[];for(const f in t)a.push(...ra({key:`${s}.${f}`,value:t[f]}));return a}}};function Js(s){const t=s.value,a=s.key,f=s.styleSpec,g=s.style,N=s.validateSpec;if(!t.type)return[new Qe(a,t,'"type" is required')];const S=ti(t.type);let T;switch(S){case"vector":case"raster":return T=Ns({key:a,value:t,valueSpec:f[`source_${S.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:hu,validateSpec:N}),T;case"raster-dem":return T=function(M){var V;const F=(V=M.sourceName)!==null&&V!==void 0?V:"",H=M.value,Y=M.styleSpec,Q=Y.source_raster_dem,ee=M.style;let ce=[];const ve=fr(H);if(H===void 0)return ce;if(ve!=="object")return ce.push(new Qe("source_raster_dem",H,`object expected, ${ve} found`)),ce;const be=ti(H.encoding)==="custom",je=["redFactor","greenFactor","blueFactor","baseShift"],Ne=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const Le in H)!be&&je.includes(Le)?ce.push(new Qe(Le,H[Le],`In "${F}": "${Le}" is only valid when "encoding" is set to "custom". ${Ne} encoding found`)):Q[Le]?ce=ce.concat(M.validateSpec({key:Le,value:H[Le],valueSpec:Q[Le],validateSpec:M.validateSpec,style:ee,styleSpec:Y})):ce.push(new Qe(Le,H[Le],`unknown property "${Le}"`));return ce}({sourceName:a,value:t,style:s.style,styleSpec:f,validateSpec:N}),T;case"geojson":if(T=Ns({key:a,value:t,valueSpec:f.source_geojson,style:g,styleSpec:f,validateSpec:N,objectElementValidators:hu}),t.cluster)for(const M in t.clusterProperties){const[V,F]=t.clusterProperties[M],H=typeof V=="string"?[V,["accumulated"],["get",M]]:V;T.push(...kl({key:`${a}.${M}.map`,value:F,expressionContext:"cluster-map"})),T.push(...kl({key:`${a}.${M}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return T;case"video":return Ns({key:a,value:t,valueSpec:f.source_video,style:g,validateSpec:N,styleSpec:f});case"image":return Ns({key:a,value:t,valueSpec:f.source_image,style:g,validateSpec:N,styleSpec:f});case"canvas":return[new Qe(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return du({key:`${a}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function fu(s){const t=s.value,a=s.styleSpec,f=a.light,g=s.style;let N=[];const S=fr(t);if(t===void 0)return N;if(S!=="object")return N=N.concat([new Qe("light",t,`object expected, ${S} found`)]),N;for(const T in t){const M=T.match(/^(.*)-transition$/);N=N.concat(M&&f[M[1]]&&f[M[1]].transition?s.validateSpec({key:T,value:t[T],valueSpec:a.transition,validateSpec:s.validateSpec,style:g,styleSpec:a}):f[T]?s.validateSpec({key:T,value:t[T],valueSpec:f[T],validateSpec:s.validateSpec,style:g,styleSpec:a}):[new Qe(T,t[T],`unknown property "${T}"`)])}return N}function dd(s){const t=s.value,a=s.styleSpec,f=a.terrain,g=s.style;let N=[];const S=fr(t);if(t===void 0)return N;if(S!=="object")return N=N.concat([new Qe("terrain",t,`object expected, ${S} found`)]),N;for(const T in t)N=N.concat(f[T]?s.validateSpec({key:T,value:t[T],valueSpec:f[T],validateSpec:s.validateSpec,style:g,styleSpec:a}):[new Qe(T,t[T],`unknown property "${T}"`)]);return N}function Za(s){let t=[];const a=s.value,f=s.key;if(Array.isArray(a)){const g=[],N=[];for(const S in a)a[S].id&&g.includes(a[S].id)&&t.push(new Qe(f,a,`all the sprites' ids must be unique, but ${a[S].id} is duplicated`)),g.push(a[S].id),a[S].url&&N.includes(a[S].url)&&t.push(new Qe(f,a,`all the sprites' URLs must be unique, but ${a[S].url} is duplicated`)),N.push(a[S].url),t=t.concat(Ns({key:`${f}[${S}]`,value:a[S],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return t}return ra({key:f,value:a})}const mu={"*":()=>[],array:bc,boolean:function(s){const t=s.value,a=s.key,f=fr(t);return f!=="boolean"?[new Qe(a,t,`boolean expected, ${f} found`)]:[]},number:uu,color:function(s){const t=s.key,a=s.value,f=fr(a);return f!=="string"?[new Qe(t,a,`color expected, ${f} found`)]:gr.parse(String(a))?[]:[new Qe(t,a,`color expected, "${a}" found`)]},constants:jl,enum:du,filter:xc,function:ud,layer:Eh,object:Ns,source:Js,light:fu,terrain:dd,string:ra,formatted:function(s){return ra(s).length===0?[]:kl(s)},resolvedImage:function(s){return ra(s).length===0?[]:kl(s)},padding:function(s){const t=s.key,a=s.value;if(fr(a)==="array"){if(a.length<1||a.length>4)return[new Qe(t,a,`padding requires 1 to 4 values; ${a.length} values found`)];const f={type:"number"};let g=[];for(let N=0;N<a.length;N++)g=g.concat(s.validateSpec({key:`${t}[${N}]`,value:a[N],validateSpec:s.validateSpec,valueSpec:f}));return g}return uu({key:t,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const t=s.key,a=s.value,f=fr(a),g=s.styleSpec;if(f!=="array"||a.length<1||a.length%2!=0)return[new Qe(t,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let N=[];for(let S=0;S<a.length;S+=2)N=N.concat(du({key:`${t}[${S}]`,value:a[S],valueSpec:g.layout_symbol["text-anchor"]})),N=N.concat(bc({key:`${t}[${S+1}]`,value:a[S+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return N},sprite:Za};function Na(s){const t=s.value,a=s.valueSpec,f=s.styleSpec;return s.validateSpec=Na,a.expression&&ai(ti(t))?ud(s):a.expression&&as(Wa(t))?kl(s):a.type&&mu[a.type]?mu[a.type](s):Ns(Hn({},s,{valueSpec:a.type?f[a.type]:a}))}function Al(s){const t=s.value,a=s.key,f=ra(s);return f.length||(t.indexOf("{fontstack}")===-1&&f.push(new Qe(a,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&f.push(new Qe(a,t,'"glyphs" url must include a "{range}" token'))),f}function xo(s,t=qe){let a=[];return a=a.concat(Na({key:"",value:s,valueSpec:t.$root,styleSpec:t,style:s,validateSpec:Na,objectElementValidators:{glyphs:Al,"*":()=>[]}})),s.constants&&(a=a.concat(jl({key:"constants",value:s.constants}))),hd(a)}function Sa(s){return function(t){return s({...t,validateSpec:Na})}}function hd(s){return[].concat(s).sort((t,a)=>t.line-a.line)}function Ea(s){return function(...t){return hd(s.apply(this,t))}}xo.source=Ea(Sa(Js)),xo.sprite=Ea(Sa(Za)),xo.glyphs=Ea(Sa(Al)),xo.light=Ea(Sa(fu)),xo.terrain=Ea(Sa(dd)),xo.layer=Ea(Sa(Eh)),xo.filter=Ea(Sa(xc)),xo.paintProperty=Ea(Sa(Sh)),xo.layoutProperty=Ea(Sa(If));const Da=xo,Vf=Da.light,Dh=Da.paintProperty,Th=Da.layoutProperty;function Qi(s,t){let a=!1;if(t&&t.length)for(const f of t)s.fire(new Gr(new Error(f.message))),a=!0;return a}class Ml{constructor(t,a,f){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const S=new Int32Array(this.arrayBuffer);t=S[0],this.d=(a=S[1])+2*(f=S[2]);for(let M=0;M<this.d*this.d;M++){const V=S[3+M],F=S[3+M+1];g.push(V===F?null:S.subarray(V,F))}const T=S[3+g.length+1];this.keys=S.subarray(S[3+g.length],T),this.bboxes=S.subarray(T),this.insert=this._insertReadonly}else{this.d=a+2*f;for(let S=0;S<this.d*this.d;S++)g.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=f,this.scale=a/t,this.uid=0;const N=f/a*t;this.min=-N,this.max=t+N}insert(t,a,f,g,N){this._forEachCell(a,f,g,N,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(N)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,a,f,g,N,S){this.cells[N].push(S)}query(t,a,f,g,N){const S=this.min,T=this.max;if(t<=S&&a<=S&&T<=f&&T<=g&&!N)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(t,a,f,g,this._queryCell,M,{},N),M}}_queryCell(t,a,f,g,N,S,T,M){const V=this.cells[N];if(V!==null){const F=this.keys,H=this.bboxes;for(let Y=0;Y<V.length;Y++){const Q=V[Y];if(T[Q]===void 0){const ee=4*Q;(M?M(H[ee+0],H[ee+1],H[ee+2],H[ee+3]):t<=H[ee+2]&&a<=H[ee+3]&&f>=H[ee+0]&&g>=H[ee+1])?(T[Q]=!0,S.push(F[Q])):T[Q]=!1}}}}_forEachCell(t,a,f,g,N,S,T,M){const V=this._convertToCellCoord(t),F=this._convertToCellCoord(a),H=this._convertToCellCoord(f),Y=this._convertToCellCoord(g);for(let Q=V;Q<=H;Q++)for(let ee=F;ee<=Y;ee++){const ce=this.d*ee+Q;if((!M||M(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&N.call(this,t,a,f,g,ce,S,T,M))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,a=3+this.cells.length+1+1;let f=0;for(let S=0;S<this.cells.length;S++)f+=this.cells[S].length;const g=new Int32Array(a+f+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let N=a;for(let S=0;S<t.length;S++){const T=t[S];g[3+S]=N,g.set(T,N),N+=T.length}return g[3+t.length]=N,g.set(this.keys,N),N+=this.keys.length,g[3+t.length+1]=N,g.set(this.bboxes,N),N+=this.bboxes.length,g.buffer}static serialize(t,a){const f=t.toArrayBuffer();return a&&a.push(f),{buffer:f}}static deserialize(t){return new Ml(t.buffer)}}const Ta={};function qt(s,t,a={}){if(Ta[s])throw new Error(`${s} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:s,writeable:!1}),Ta[s]={klass:t,omit:a.omit||[],shallow:a.shallow||[]}}qt("Object",Object),qt("TransferableGridIndex",Ml),qt("Color",gr),qt("Error",Error),qt("AJAXError",Ft),qt("ResolvedImage",Vi),qt("StylePropertyFunction",Ga),qt("StyleExpression",ad,{omit:["_evaluator"]}),qt("ZoomDependentExpression",bo),qt("ZoomConstantExpression",yi),qt("CompoundExpression",ms,{omit:["_evaluate"]});for(const s in $s)$s[s]._classRegistryKey||qt(`Expression_${s}`,$s[s]);function fd(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Ka(s,t){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(fd(s)||dn(s))return t&&t.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return t&&t.push(a.buffer),a}if(s instanceof ImageData)return t&&t.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const f of s)a.push(Ka(f,t));return a}if(typeof s=="object"){const a=s.constructor,f=a._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Ta[f])throw new Error(`${f} is not registered.`);const g=a.serialize?a.serialize(s,t):{};if(a.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const N in s){if(!s.hasOwnProperty(N)||Ta[f].omit.indexOf(N)>=0)continue;const S=s[N];g[N]=Ta[f].shallow.indexOf(N)>=0?S:Ka(S,t)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof s)}function _c(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||fd(s)||dn(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(_c);if(typeof s=="object"){const t=s.$name||"Object";if(!Ta[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:a}=Ta[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(s);const f=Object.create(a.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const N=s[g];f[g]=Ta[t].shallow.indexOf(g)>=0?N:_c(N)}return f}throw new Error("can't deserialize object of type "+typeof s)}class Ph{constructor(){this.first=!0}update(t,a){const f=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=f,!0))}}const It={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Rl(s){for(const t of s)if(kh(t.charCodeAt(0)))return!0;return!1}function jh(s){for(const t of s)if(!pu(t.charCodeAt(0)))return!1;return!0}function pu(s){return!(It.Arabic(s)||It["Arabic Supplement"](s)||It["Arabic Extended-A"](s)||It["Arabic Presentation Forms-A"](s)||It["Arabic Presentation Forms-B"](s))}function kh(s){return!(s!==746&&s!==747&&(s<4352||!(It["Bopomofo Extended"](s)||It.Bopomofo(s)||It["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||It["CJK Compatibility Ideographs"](s)||It["CJK Compatibility"](s)||It["CJK Radicals Supplement"](s)||It["CJK Strokes"](s)||!(!It["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||It["CJK Unified Ideographs Extension A"](s)||It["CJK Unified Ideographs"](s)||It["Enclosed CJK Letters and Months"](s)||It["Hangul Compatibility Jamo"](s)||It["Hangul Jamo Extended-A"](s)||It["Hangul Jamo Extended-B"](s)||It["Hangul Jamo"](s)||It["Hangul Syllables"](s)||It.Hiragana(s)||It["Ideographic Description Characters"](s)||It.Kanbun(s)||It["Kangxi Radicals"](s)||It["Katakana Phonetic Extensions"](s)||It.Katakana(s)&&s!==12540||!(!It["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!It["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||It["Unified Canadian Aboriginal Syllabics"](s)||It["Unified Canadian Aboriginal Syllabics Extended"](s)||It["Vertical Forms"](s)||It["Yijing Hexagram Symbols"](s)||It["Yi Syllables"](s)||It["Yi Radicals"](s))))}function zf(s){return!(kh(s)||function(t){return!!(It["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||It["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||It["Letterlike Symbols"](t)||It["Number Forms"](t)||It["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||It["Control Pictures"](t)&&t!==9251||It["Optical Character Recognition"](t)||It["Enclosed Alphanumerics"](t)||It["Geometric Shapes"](t)||It["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||It["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||It["CJK Symbols and Punctuation"](t)||It.Katakana(t)||It["Private Use Area"](t)||It["CJK Compatibility Forms"](t)||It["Small Form Variants"](t)||It["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(s))}function Of(s){return s>=1424&&s<=2303||It["Arabic Presentation Forms-A"](s)||It["Arabic Presentation Forms-B"](s)}function md(s,t){return!(!t&&Of(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||It.Khmer(s))}function Ah(s){for(const t of s)if(Of(t.charCodeAt(0)))return!0;return!1}const Ya="deferred",Xa="loading",pd="loaded";let Mh=null,Ss="unavailable",Ja=null;const wc=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Ss="error"),Mh&&Mh(s)};function gd(){Cc.fire(new Ti("pluginStateChange",{pluginStatus:Ss,pluginURL:Ja}))}const Cc=new Li,gu=function(){return Ss},Bf=function(){if(Ss!==Ya||!Ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ss=Xa,gd(),Ja&&Fn({url:Ja},s=>{s?wc(s):(Ss=pd,gd())})},qs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ss===pd||qs.applyArabicShaping!=null,isLoading:()=>Ss===Xa,setState(s){if(!zt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ss=s.pluginStatus,Ja=s.pluginURL},isParsed(){if(!zt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return qs.applyArabicShaping!=null&&qs.processBidirectionalText!=null&&qs.processStyledBidirectionalText!=null},getPluginURL(){if(!zt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ja}};class Xr{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ph,this.transition={})}isSupportedScript(t){return function(a,f){for(const g of a)if(!md(g.charCodeAt(0),f))return!1;return!0}(t,qs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,a=t-Math.floor(t),f=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*a}}}class vd{constructor(t,a){this.property=t,this.value=a,this.expression=function(f,g){if(ai(f))return new Ga(f,g);if(as(f)){const N=ou(f,g);if(N.result==="error")throw new Error(N.value.map(S=>`${S.key}: ${S.message}`).join(", "));return N.value}{let N=f;return g.type==="color"&&typeof f=="string"?N=gr.parse(f):g.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(N=hs.parse(f)):N=is.parse(f),{kind:"constant",evaluate:()=>N}}}(a===void 0?t.specification.default:a,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,a,f){return this.property.possiblyEvaluate(this,t,a,f)}}class Rh{constructor(t){this.property=t,this.value=new vd(t,void 0)}transitioned(t,a){return new yd(this.property,this.value,a,ot({},t.transition,this.transition),t.now)}untransitioned(){return new yd(this.property,this.value,null,{},0)}}class Nc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return st(this._values[t].value.value)}setValue(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Rh(this._values[t].property)),this._values[t].value=new vd(this._values[t].property,a===null?void 0:st(a))}getTransition(t){return st(this._values[t].transition)}setTransition(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Rh(this._values[t].property)),this._values[t].transition=st(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(t[a]=f);const g=this.getTransition(a);g!==void 0&&(t[`${a}-transition`]=g)}return t}transitioned(t,a){const f=new Sc(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(t,a._values[g]);return f}untransitioned(){const t=new Sc(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class yd{constructor(t,a,f,g,N){this.property=t,this.value=a,this.begin=N+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(t,a,f){const g=t.now||0,N=this.value.possiblyEvaluate(t,a,f),S=this.prior;if(S){if(g>this.end)return this.prior=null,N;if(this.value.isDataDriven())return this.prior=null,N;if(g<this.begin)return S.possiblyEvaluate(t,a,f);{const T=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(t,a,f),N,function(M){if(M<=0)return 0;if(M>=1)return 1;const V=M*M,F=V*M;return 4*(M<.5?F:3*(M-V)+F-.75)}(T))}}return N}}class Sc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,f){const g=new Ec(this._properties);for(const N of Object.keys(this._values))g._values[N]=this._values[N].possiblyEvaluate(t,a,f);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ff{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return st(this._values[t].value)}setValue(t,a){this._values[t]=new vd(this._values[t].property,a===null?void 0:st(a))}serialize(){const t={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(t[a]=f)}return t}possiblyEvaluate(t,a,f){const g=new Ec(this._properties);for(const N of Object.keys(this._values))g._values[N]=this._values[N].possiblyEvaluate(t,a,f);return g}}class ps{constructor(t,a,f){this.property=t,this.value=a,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,a,f,g){return this.property.evaluate(this.value,this.parameters,t,a,f,g)}}class Ec{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ln{constructor(t){this.specification=t}possiblyEvaluate(t,a){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(a)}interpolate(t,a,f){const g=Xi[this.specification.type];return g?g(t,a,f):t}}class mn{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,f,g){return new ps(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},f,g)}:t.expression,a)}interpolate(t,a,f){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new ps(this,{kind:"constant",value:void 0},t.parameters);const g=Xi[this.specification.type];if(g){const N=g(t.value.value,a.value.value,f);return new ps(this,{kind:"constant",value:N},t.parameters)}return t}evaluate(t,a,f,g,N,S){return t.kind==="constant"?t.value:t.evaluate(a,f,g,N,S)}}class Qa extends mn{possiblyEvaluate(t,a,f,g){if(t.value===void 0)return new ps(this,{kind:"constant",value:void 0},a);if(t.expression.kind==="constant"){const N=t.expression.evaluate(a,null,{},f,g),S=t.property.specification.type==="resolvedImage"&&typeof N!="string"?N.name:N,T=this._calculate(S,S,S,a);return new ps(this,{kind:"constant",value:T},a)}if(t.expression.kind==="camera"){const N=this._calculate(t.expression.evaluate({zoom:a.zoom-1}),t.expression.evaluate({zoom:a.zoom}),t.expression.evaluate({zoom:a.zoom+1}),a);return new ps(this,{kind:"constant",value:N},a)}return new ps(this,t.expression,a)}evaluate(t,a,f,g,N,S){if(t.kind==="source"){const T=t.evaluate(a,f,g,N,S);return this._calculate(T,T,T,a)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(a.zoom)-1},f,g),t.evaluate({zoom:Math.floor(a.zoom)},f,g),t.evaluate({zoom:Math.floor(a.zoom)+1},f,g),a):t.value}_calculate(t,a,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:f,to:a}}interpolate(t){return t}}class Dc{constructor(t){this.specification=t}possiblyEvaluate(t,a,f,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const N=t.expression.evaluate(a,null,{},f,g);return this._calculate(N,N,N,a)}return this._calculate(t.expression.evaluate(new Xr(Math.floor(a.zoom-1),a)),t.expression.evaluate(new Xr(Math.floor(a.zoom),a)),t.expression.evaluate(new Xr(Math.floor(a.zoom+1),a)),a)}}_calculate(t,a,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:f,to:a}}interpolate(t){return t}}class vu{constructor(t){this.specification=t}possiblyEvaluate(t,a,f,g){return!!t.expression.evaluate(a,null,{},f,g)}interpolate(){return!1}}class ji{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in t){const f=t[a];f.specification.overridable&&this.overridableProperties.push(a);const g=this.defaultPropertyValues[a]=new vd(f,void 0),N=this.defaultTransitionablePropertyValues[a]=new Rh(f);this.defaultTransitioningPropertyValues[a]=N.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=g.possiblyEvaluate({})}}}qt("DataDrivenProperty",mn),qt("DataConstantProperty",ln),qt("CrossFadedDataDrivenProperty",Qa),qt("CrossFadedProperty",Dc),qt("ColorRampProperty",vu);const yu="-transition";class _o extends Li{constructor(t,a){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new Ff(a.layout)),a.paint)){this._transitionablePaint=new Nc(a.paint);for(const f in t.paint)this.setPaintProperty(f,t.paint[f],{validate:!1});for(const f in t.layout)this.setLayoutProperty(f,t.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ec(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a,f={}){a!=null&&this._validate(Th,`layers.${this.id}.layout.${t}`,t,a,f)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,a):this.visibility=a)}getPaintProperty(t){return t.endsWith(yu)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a,f={}){if(a!=null&&this._validate(Dh,`layers.${this.id}.paint.${t}`,t,a,f))return!1;if(t.endsWith(yu))return this._transitionablePaint.setTransition(t.slice(0,-11),a||void 0),!1;{const g=this._transitionablePaint._values[t],N=g.property.specification["property-type"]==="cross-faded-data-driven",S=g.value.isDataDriven(),T=g.value;this._transitionablePaint.setValue(t,a),this._handleSpecialPaintPropertyUpdate(t);const M=this._transitionablePaint._values[t].value;return M.isDataDriven()||S||N||this._handleOverridablePaintPropertyUpdate(t,T,M)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,a,f){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),sn(t,(a,f)=>!(a===void 0||f==="layout"&&!Object.keys(a).length||f==="paint"&&!Object.keys(a).length))}_validate(t,a,f,g,N={}){return(!N||N.validate!==!1)&&Qi(this,t.call(Da,{key:a,layerType:this.type,objectKey:f,value:g,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof ps&&Ha(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const Uf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ll{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ni{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Rr(s,t=1){let a=0,f=0;return{members:s.map(g=>{const N=Uf[g.type].BYTES_PER_ELEMENT,S=a=Tc(a,Math.max(t,N)),T=g.components||1;return f=Math.max(f,N),a+=N*T,{name:g.name,type:g.type,components:T,offset:S}}),size:Tc(a,Math.max(f,t)),alignment:t}}function Tc(s,t){return Math.ceil(s/t)*t}class bu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const f=this.length;return this.resize(f+1),this.emplace(f,t,a)}emplace(t,a,f){const g=2*t;return this.int16[g+0]=a,this.int16[g+1]=f,t}}bu.prototype.bytesPerElement=4,qt("StructArrayLayout2i4",bu);class wn extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,f)}emplace(t,a,f,g){const N=3*t;return this.int16[N+0]=a,this.int16[N+1]=f,this.int16[N+2]=g,t}}wn.prototype.bytesPerElement=6,qt("StructArrayLayout3i6",wn);class wo extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f,g){const N=this.length;return this.resize(N+1),this.emplace(N,t,a,f,g)}emplace(t,a,f,g,N){const S=4*t;return this.int16[S+0]=a,this.int16[S+1]=f,this.int16[S+2]=g,this.int16[S+3]=N,t}}wo.prototype.bytesPerElement=8,qt("StructArrayLayout4i8",wo);class bi extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,f,g,N,S)}emplace(t,a,f,g,N,S,T){const M=6*t;return this.int16[M+0]=a,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=N,this.int16[M+4]=S,this.int16[M+5]=T,t}}bi.prototype.bytesPerElement=12,qt("StructArrayLayout2i4i12",bi);class ur extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,f,g,N,S)}emplace(t,a,f,g,N,S,T){const M=4*t,V=8*t;return this.int16[M+0]=a,this.int16[M+1]=f,this.uint8[V+4]=g,this.uint8[V+5]=N,this.uint8[V+6]=S,this.uint8[V+7]=T,t}}ur.prototype.bytesPerElement=8,qt("StructArrayLayout2i4ub8",ur);class Co extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const f=this.length;return this.resize(f+1),this.emplace(f,t,a)}emplace(t,a,f){const g=2*t;return this.float32[g+0]=a,this.float32[g+1]=f,t}}Co.prototype.bytesPerElement=8,qt("StructArrayLayout2f8",Co);class Il extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S,T,M,V,F){const H=this.length;return this.resize(H+1),this.emplace(H,t,a,f,g,N,S,T,M,V,F)}emplace(t,a,f,g,N,S,T,M,V,F,H){const Y=10*t;return this.uint16[Y+0]=a,this.uint16[Y+1]=f,this.uint16[Y+2]=g,this.uint16[Y+3]=N,this.uint16[Y+4]=S,this.uint16[Y+5]=T,this.uint16[Y+6]=M,this.uint16[Y+7]=V,this.uint16[Y+8]=F,this.uint16[Y+9]=H,t}}Il.prototype.bytesPerElement=20,qt("StructArrayLayout10ui20",Il);class bd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S,T,M,V,F,H,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,a,f,g,N,S,T,M,V,F,H,Y)}emplace(t,a,f,g,N,S,T,M,V,F,H,Y,Q){const ee=12*t;return this.int16[ee+0]=a,this.int16[ee+1]=f,this.int16[ee+2]=g,this.int16[ee+3]=N,this.uint16[ee+4]=S,this.uint16[ee+5]=T,this.uint16[ee+6]=M,this.uint16[ee+7]=V,this.int16[ee+8]=F,this.int16[ee+9]=H,this.int16[ee+10]=Y,this.int16[ee+11]=Q,t}}bd.prototype.bytesPerElement=24,qt("StructArrayLayout4i4ui4i24",bd);class cn extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,f)}emplace(t,a,f,g){const N=3*t;return this.float32[N+0]=a,this.float32[N+1]=f,this.float32[N+2]=g,t}}cn.prototype.bytesPerElement=12,qt("StructArrayLayout3f12",cn);class b extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}b.prototype.bytesPerElement=4,qt("StructArrayLayout1ul4",b);class r extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S,T,M,V){const F=this.length;return this.resize(F+1),this.emplace(F,t,a,f,g,N,S,T,M,V)}emplace(t,a,f,g,N,S,T,M,V,F){const H=10*t,Y=5*t;return this.int16[H+0]=a,this.int16[H+1]=f,this.int16[H+2]=g,this.int16[H+3]=N,this.int16[H+4]=S,this.int16[H+5]=T,this.uint32[Y+3]=M,this.uint16[H+8]=V,this.uint16[H+9]=F,t}}r.prototype.bytesPerElement=20,qt("StructArrayLayout6i1ul2ui20",r);class c extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S){const T=this.length;return this.resize(T+1),this.emplace(T,t,a,f,g,N,S)}emplace(t,a,f,g,N,S,T){const M=6*t;return this.int16[M+0]=a,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=N,this.int16[M+4]=S,this.int16[M+5]=T,t}}c.prototype.bytesPerElement=12,qt("StructArrayLayout2i2i2i12",c);class m extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N){const S=this.length;return this.resize(S+1),this.emplace(S,t,a,f,g,N)}emplace(t,a,f,g,N,S){const T=4*t,M=8*t;return this.float32[T+0]=a,this.float32[T+1]=f,this.float32[T+2]=g,this.int16[M+6]=N,this.int16[M+7]=S,t}}m.prototype.bytesPerElement=16,qt("StructArrayLayout2f1f2i16",m);class v extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f,g){const N=this.length;return this.resize(N+1),this.emplace(N,t,a,f,g)}emplace(t,a,f,g,N){const S=12*t,T=3*t;return this.uint8[S+0]=a,this.uint8[S+1]=f,this.float32[T+1]=g,this.float32[T+2]=N,t}}v.prototype.bytesPerElement=12,qt("StructArrayLayout2ub2f12",v);class w extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,f)}emplace(t,a,f,g){const N=3*t;return this.uint16[N+0]=a,this.uint16[N+1]=f,this.uint16[N+2]=g,t}}w.prototype.bytesPerElement=6,qt("StructArrayLayout3ui6",w);class P extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be){const je=this.length;return this.resize(je+1),this.emplace(je,t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be)}emplace(t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be,je){const Ne=24*t,Le=12*t,Fe=48*t;return this.int16[Ne+0]=a,this.int16[Ne+1]=f,this.uint16[Ne+2]=g,this.uint16[Ne+3]=N,this.uint32[Le+2]=S,this.uint32[Le+3]=T,this.uint32[Le+4]=M,this.uint16[Ne+10]=V,this.uint16[Ne+11]=F,this.uint16[Ne+12]=H,this.float32[Le+7]=Y,this.float32[Le+8]=Q,this.uint8[Fe+36]=ee,this.uint8[Fe+37]=ce,this.uint8[Fe+38]=ve,this.uint32[Le+10]=be,this.int16[Ne+22]=je,t}}P.prototype.bytesPerElement=48,qt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",P);class j extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be,je,Ne,Le,Fe,nt,Vt,Kt,Ot,At,Et,xt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be,je,Ne,Le,Fe,nt,Vt,Kt,Ot,At,Et,xt)}emplace(t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce,ve,be,je,Ne,Le,Fe,nt,Vt,Kt,Ot,At,Et,xt,Dt){const ut=32*t,un=16*t;return this.int16[ut+0]=a,this.int16[ut+1]=f,this.int16[ut+2]=g,this.int16[ut+3]=N,this.int16[ut+4]=S,this.int16[ut+5]=T,this.int16[ut+6]=M,this.int16[ut+7]=V,this.uint16[ut+8]=F,this.uint16[ut+9]=H,this.uint16[ut+10]=Y,this.uint16[ut+11]=Q,this.uint16[ut+12]=ee,this.uint16[ut+13]=ce,this.uint16[ut+14]=ve,this.uint16[ut+15]=be,this.uint16[ut+16]=je,this.uint16[ut+17]=Ne,this.uint16[ut+18]=Le,this.uint16[ut+19]=Fe,this.uint16[ut+20]=nt,this.uint16[ut+21]=Vt,this.uint16[ut+22]=Kt,this.uint32[un+12]=Ot,this.float32[un+13]=At,this.float32[un+14]=Et,this.uint16[ut+30]=xt,this.uint16[ut+31]=Dt,t}}j.prototype.bytesPerElement=64,qt("StructArrayLayout8i15ui1ul2f2ui64",j);class R extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}R.prototype.bytesPerElement=4,qt("StructArrayLayout1f4",R);class z extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,f)}emplace(t,a,f,g){const N=3*t;return this.uint16[6*t+0]=a,this.float32[N+1]=f,this.float32[N+2]=g,t}}z.prototype.bytesPerElement=12,qt("StructArrayLayout1ui2f12",z);class U extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,f){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,f)}emplace(t,a,f,g){const N=4*t;return this.uint32[2*t+0]=a,this.uint16[N+2]=f,this.uint16[N+3]=g,t}}U.prototype.bytesPerElement=8,qt("StructArrayLayout1ul2ui8",U);class q extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const f=this.length;return this.resize(f+1),this.emplace(f,t,a)}emplace(t,a,f){const g=2*t;return this.uint16[g+0]=a,this.uint16[g+1]=f,t}}q.prototype.bytesPerElement=4,qt("StructArrayLayout2ui4",q);class X extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}X.prototype.bytesPerElement=2,qt("StructArrayLayout1ui2",X);class ae extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,f,g){const N=this.length;return this.resize(N+1),this.emplace(N,t,a,f,g)}emplace(t,a,f,g,N){const S=4*t;return this.float32[S+0]=a,this.float32[S+1]=f,this.float32[S+2]=g,this.float32[S+3]=N,t}}ae.prototype.bytesPerElement=16,qt("StructArrayLayout4f16",ae);class le extends Ll{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new W(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class pe extends r{get(t){return new le(this,t)}}qt("CollisionBoxArray",pe);class oe extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class Te extends P{get(t){return new oe(this,t)}}qt("PlacedSymbolArray",Te);class Oe extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Oe.prototype.size=64;class ye extends j{get(t){return new Oe(this,t)}}qt("SymbolInstanceArray",ye);class Pe extends R{getoffsetX(t){return this.float32[1*t+0]}}qt("GlyphOffsetArray",Pe);class Be extends wn{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}qt("SymbolLineVertexArray",Be);class He extends Ll{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}He.prototype.size=12;class tt extends z{get(t){return new He(this,t)}}qt("TextAnchorOffsetArray",tt);class mt extends Ll{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class at extends U{get(t){return new mt(this,t)}}qt("FeatureIndexArray",at);class _t extends bu{}class Xt extends bu{}class Yn extends bu{}class kt extends bi{}class xn extends ur{}class Jt extends Co{}class kr extends Il{}class Zn extends bd{}class Rn extends cn{}class Xn extends b{}class xi extends c{}class qr extends v{}class mr extends w{}class Bi extends q{}const li=Rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Es}=li;class _r{constructor(t=[]){this.segments=t}prepareSegment(t,a,f,g){let N=this.segments[this.segments.length-1];return t>_r.MAX_VERTEX_ARRAY_LENGTH&&Nt(`Max vertices per segment is ${_r.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!N||N.vertexLength+t>_r.MAX_VERTEX_ARRAY_LENGTH||N.sortKey!==g)&&(N={vertexOffset:a.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(N.sortKey=g),this.segments.push(N)),N}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,f,g){return new _r([{vertexOffset:t,primitiveOffset:a,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function ia(s,t){return 256*(s=Je(Math.floor(s),0,255))+Je(Math.floor(t),0,255)}_r.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qt("SegmentVector",_r);const No=Rr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var el={exports:{}},Vl={exports:{}};Vl.exports=function(s,t){var a,f,g,N,S,T,M,V;for(f=s.length-(a=3&s.length),g=t,S=3432918353,T=461845907,V=0;V<f;)M=255&s.charCodeAt(V)|(255&s.charCodeAt(++V))<<8|(255&s.charCodeAt(++V))<<16|(255&s.charCodeAt(++V))<<24,++V,g=27492+(65535&(N=5*(65535&(g=(g^=M=(65535&(M=(M=(65535&M)*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(M=0,a){case 3:M^=(255&s.charCodeAt(V+2))<<16;case 2:M^=(255&s.charCodeAt(V+1))<<8;case 1:g^=M=(65535&(M=(M=(65535&(M^=255&s.charCodeAt(V)))*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Oo=Vl.exports,Nr={exports:{}};Nr.exports=function(s,t){for(var a,f=s.length,g=t^f,N=0;f>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(N)|(255&s.charCodeAt(++N))<<8|(255&s.charCodeAt(++N))<<16|(255&s.charCodeAt(++N))<<24))+((1540483477*(a>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),f-=4,++N;switch(f){case 3:g^=(255&s.charCodeAt(N+2))<<16;case 2:g^=(255&s.charCodeAt(N+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(N)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var Pt=Oo,ci=Nr.exports;el.exports=Pt,el.exports.murmur3=Pt,el.exports.murmur2=ci;var ls=k(el.exports);class _i{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,a,f,g){this.ids.push(Fi(t)),this.positions.push(a,f,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Fi(t);let f=0,g=this.ids.length-1;for(;f<g;){const S=f+g>>1;this.ids[S]>=a?g=S:f=S+1}const N=[];for(;this.ids[f]===a;)N.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return N}static serialize(t,a){const f=new Float64Array(t.ids),g=new Uint32Array(t.positions);return Hs(f,g,0,f.length-1),a&&a.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(t){const a=new _i;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a}}function Fi(s){const t=+s;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ls(String(s))}function Hs(s,t,a,f){for(;a<f;){const g=s[a+f>>1];let N=a-1,S=f+1;for(;;){do N++;while(s[N]<g);do S--;while(s[S]>g);if(N>=S)break;wi(s,N,S),wi(t,3*N,3*S),wi(t,3*N+1,3*S+1),wi(t,3*N+2,3*S+2)}S-a<f-S?(Hs(s,t,a,S),a=S+1):(Hs(s,t,S+1,f),f=S)}}function wi(s,t,a){const f=s[t];s[t]=s[a],s[a]=f}qt("FeaturePositionMap",_i);class zl{constructor(t,a){this.gl=t.gl,this.location=a}}class ki extends zl{constructor(t,a){super(t,a),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class $f extends zl{constructor(t,a){super(t,a),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class qf extends zl{constructor(t,a){super(t,a),this.current=gr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const _p=new Float32Array(16);function xd(s){return[ia(255*s.r,255*s.g),ia(255*s.b,255*s.a)]}class Gs{constructor(t,a,f){this.value=t,this.uniformNames=a.map(g=>`u_${g}`),this.type=f}setUniform(t,a,f){t.set(f.constantOr(this.value))}getBinding(t,a,f){return this.type==="color"?new qf(t,a):new ki(t,a)}}class So{constructor(t,a){this.uniformNames=a.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr}setUniform(t,a,f,g){const N=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;N&&t.set(N)}getBinding(t,a,f){return f.substr(0,9)==="u_pattern"?new $f(t,a):new ki(t,a)}}class sa{constructor(t,a,f,g){this.expression=t,this.type=f,this.maxValue=0,this.paintVertexAttributes=a.map(N=>({name:`a_${N}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,a,f,g,N){const S=this.paintVertexArray.length,T=this.expression.evaluate(new Xr(0),a,{},g,[],N);this.paintVertexArray.resize(t),this._setPaintValue(S,t,T)}updatePaintArray(t,a,f,g){const N=this.expression.evaluate({zoom:0},f,g);this._setPaintValue(t,a,N)}_setPaintValue(t,a,f){if(this.type==="color"){const g=xd(f);for(let N=t;N<a;N++)this.paintVertexArray.emplace(N,g[0],g[1])}else{for(let g=t;g<a;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Eo{constructor(t,a,f,g,N,S){this.expression=t,this.uniformNames=a.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=g,this.zoom=N,this.maxValue=0,this.paintVertexAttributes=a.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(t,a,f,g,N){const S=this.expression.evaluate(new Xr(this.zoom),a,{},g,[],N),T=this.expression.evaluate(new Xr(this.zoom+1),a,{},g,[],N),M=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(M,t,S,T)}updatePaintArray(t,a,f,g){const N=this.expression.evaluate({zoom:this.zoom},f,g),S=this.expression.evaluate({zoom:this.zoom+1},f,g);this._setPaintValue(t,a,N,S)}_setPaintValue(t,a,f,g){if(this.type==="color"){const N=xd(f),S=xd(g);for(let T=t;T<a;T++)this.paintVertexArray.emplace(T,N[0],N[1],S[0],S[1])}else{for(let N=t;N<a;N++)this.paintVertexArray.emplace(N,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a){const f=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=Je(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,a,f){return new ki(t,a)}}class oa{constructor(t,a,f,g,N,S){this.expression=t,this.type=a,this.useIntegerZoom=f,this.zoom=g,this.layerId=S,this.zoomInPaintVertexArray=new N,this.zoomOutPaintVertexArray=new N}populatePaintArray(t,a,f){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,a.patterns&&a.patterns[this.layerId],f)}updatePaintArray(t,a,f,g,N){this._setPaintValues(t,a,f.patterns&&f.patterns[this.layerId],N)}_setPaintValues(t,a,f,g){if(!g||!f)return;const{min:N,mid:S,max:T}=f,M=g[N],V=g[S],F=g[T];if(M&&V&&F)for(let H=t;H<a;H++)this.zoomInPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],V.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],V.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,No.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,No.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lh{constructor(t,a,f){this.binders={},this._buffers=[];const g=[];for(const N in t.paint._values){if(!f(N))continue;const S=t.paint.get(N);if(!(S instanceof ps&&Ha(S.property.specification)))continue;const T=y0(N,t.type),M=S.value,V=S.property.specification.type,F=S.property.useIntegerZoom,H=S.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(M.kind==="constant")this.binders[N]=Y?new So(M.value,T):new Gs(M.value,T,V),g.push(`/u_${N}`);else if(M.kind==="source"||Y){const Q=wp(N,V,"source");this.binders[N]=Y?new oa(M,V,F,a,Q,t.id):new sa(M,T,V,Q),g.push(`/a_${N}`)}else{const Q=wp(N,V,"composite");this.binders[N]=new Eo(M,T,V,F,a,Q),g.push(`/z_${N}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof sa||a instanceof Eo?a.maxValue:0}populatePaintArrays(t,a,f,g,N){for(const S in this.binders){const T=this.binders[S];(T instanceof sa||T instanceof Eo||T instanceof oa)&&T.populatePaintArray(t,a,f,g,N)}}setConstantPatternPositions(t,a){for(const f in this.binders){const g=this.binders[f];g instanceof So&&g.setConstantPatternPositions(t,a)}}updatePaintArrays(t,a,f,g,N){let S=!1;for(const T in t){const M=a.getPositions(T);for(const V of M){const F=f.feature(V.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof sa||Y instanceof Eo||Y instanceof oa)&&Y.expression.isStateDependent===!0){const Q=g.paint.get(H);Y.expression=Q.value,Y.updatePaintArray(V.start,V.end,F,t[T],N),S=!0}}}}return S}defines(){const t=[];for(const a in this.binders){const f=this.binders[a];(f instanceof Gs||f instanceof So)&&t.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof sa||f instanceof Eo)for(let g=0;g<f.paintVertexAttributes.length;g++)t.push(f.paintVertexAttributes[g].name);else if(f instanceof oa)for(let g=0;g<No.members.length;g++)t.push(No.members[g].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof Gs||f instanceof So||f instanceof Eo)for(const g of f.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,a){const f=[];for(const g in this.binders){const N=this.binders[g];if(N instanceof Gs||N instanceof So||N instanceof Eo){for(const S of N.uniformNames)if(a[S]){const T=N.getBinding(t,a[S],S);f.push({name:S,property:g,binding:T})}}}return f}setUniforms(t,a,f,g){for(const{name:N,property:S,binding:T}of a)this.binders[S].setUniform(T,g,f.get(S),N)}updatePaintBuffers(t){this._buffers=[];for(const a in this.binders){const f=this.binders[a];if(t&&f instanceof oa){const g=t.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(f instanceof sa||f instanceof Eo)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(t){for(const a in this.binders){const f=this.binders[a];(f instanceof sa||f instanceof Eo||f instanceof oa)&&f.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof sa||a instanceof Eo||a instanceof oa)&&a.destroy()}}}class Pa{constructor(t,a,f=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Lh(g,a,f);this.needsUpload=!1,this._featureMap=new _i,this._bufferOffset=0}populatePaintArrays(t,a,f,g,N,S){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(t,a,g,N,S);a.id!==void 0&&this._featureMap.add(a.id,f,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,f,g){for(const N of f)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(t,this._featureMap,a,N,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function y0(s,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${t}-`,"").replace(/-/g,"_")]}function wp(s,t,a){const f={color:{source:Co,composite:ae},number:{source:R,composite:Co}},g=function(N){return{"line-pattern":{source:kr,composite:kr},"fill-pattern":{source:kr,composite:kr},"fill-extrusion-pattern":{source:kr,composite:kr}}[N]}(s);return g&&g[a]||f[t][a]}qt("ConstantBinder",Gs),qt("CrossFadedConstantBinder",So),qt("SourceExpressionBinder",sa),qt("CrossFadedCompositeBinder",oa),qt("CompositeExpressionBinder",Eo),qt("ProgramConfiguration",Lh,{omit:["_buffers"]}),qt("ProgramConfigurationSet",Pa);const Ai=8192,Cp=Math.pow(2,14)-1,ny=-Cp-1;function xu(s){const t=Ai/s.extent,a=s.loadGeometry();for(let f=0;f<a.length;f++){const g=a[f];for(let N=0;N<g.length;N++){const S=g[N],T=Math.round(S.x*t),M=Math.round(S.y*t);S.x=Je(T,ny,Cp),S.y=Je(M,ny,Cp),(T<S.x||T>S.x+1||M<S.y||M>S.y+1)&&Nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function _u(s,t){return{type:s.type,id:s.id,properties:s.properties,geometry:t?xu(s):[]}}function Hf(s,t,a,f,g){s.emplaceBack(2*t+(f+1)/2,2*a+(g+1)/2)}class Np{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.indexArray=new mr,this.segments=new _r,this.programConfigurations=new Pa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,f){const g=this.layers[0],N=[];let S=null,T=!1;g.type==="circle"&&(S=g.layout.get("circle-sort-key"),T=!S.isConstant());for(const{feature:M,id:V,index:F,sourceLayerIndex:H}of t){const Y=this.layers[0]._featureFilter.needGeometry,Q=_u(M,Y);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),Q,f))continue;const ee=T?S.evaluate(Q,{},f):void 0,ce={id:V,properties:M.properties,type:M.type,sourceLayerIndex:H,index:F,geometry:Y?Q.geometry:xu(M),patterns:{},sortKey:ee};N.push(ce)}T&&N.sort((M,V)=>M.sortKey-V.sortKey);for(const M of N){const{geometry:V,index:F,sourceLayerIndex:H}=M,Y=t[F].feature;this.addFeature(M,V,F,f),a.featureIndex.insert(Y,V,F,H,this.index)}}update(t,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Es),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,f,g){for(const N of a)for(const S of N){const T=S.x,M=S.y;if(T<0||T>=Ai||M<0||M>=Ai)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),F=V.vertexLength;Hf(this.layoutVertexArray,T,M,-1,-1),Hf(this.layoutVertexArray,T,M,1,-1),Hf(this.layoutVertexArray,T,M,1,1),Hf(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,f,{},g)}}function Sp(s,t){for(let a=0;a<s.length;a++)if(ri(t,s[a]))return!0;for(let a=0;a<t.length;a++)if(ri(s,t[a]))return!0;return!!Dp(s,t)}function b0(s,t,a){return!!ri(s,t)||!!Nn(t,s,a)}function Ep(s,t){if(s.length===1)return Lr(t,s[0]);for(let a=0;a<t.length;a++){const f=t[a];for(let g=0;g<f.length;g++)if(ri(s,f[g]))return!0}for(let a=0;a<s.length;a++)if(Lr(t,s[a]))return!0;for(let a=0;a<t.length;a++)if(Dp(s,t[a]))return!0;return!1}function x0(s,t,a){if(s.length>1){if(Dp(s,t))return!0;for(let f=0;f<t.length;f++)if(Nn(t[f],s,a))return!0}for(let f=0;f<s.length;f++)if(Nn(s[f],t,a))return!0;return!1}function Dp(s,t){if(s.length===0||t.length===0)return!1;for(let a=0;a<s.length-1;a++){const f=s[a],g=s[a+1];for(let N=0;N<t.length-1;N++)if(Tp(f,g,t[N],t[N+1]))return!0}return!1}function Tp(s,t,a,f){return on(s,a,f)!==on(t,a,f)&&on(s,t,a)!==on(s,t,f)}function Nn(s,t,a){const f=a*a;if(t.length===1)return s.distSqr(t[0])<f;for(let g=1;g<t.length;g++)if(lr(s,t[g-1],t[g])<f)return!0;return!1}function lr(s,t,a){const f=t.distSqr(a);if(f===0)return s.distSqr(t);const g=((s.x-t.x)*(a.x-t.x)+(s.y-t.y)*(a.y-t.y))/f;return s.distSqr(g<0?t:g>1?a:a.sub(t)._mult(g)._add(t))}function Lr(s,t){let a,f,g,N=!1;for(let S=0;S<s.length;S++){a=s[S];for(let T=0,M=a.length-1;T<a.length;M=T++)f=a[T],g=a[M],f.y>t.y!=g.y>t.y&&t.x<(g.x-f.x)*(t.y-f.y)/(g.y-f.y)+f.x&&(N=!N)}return N}function ri(s,t){let a=!1;for(let f=0,g=s.length-1;f<s.length;g=f++){const N=s[f],S=s[g];N.y>t.y!=S.y>t.y&&t.x<(S.x-N.x)*(t.y-N.y)/(S.y-N.y)+N.x&&(a=!a)}return a}function tl(s,t,a){const f=a[0],g=a[2];if(s.x<f.x&&t.x<f.x||s.x>g.x&&t.x>g.x||s.y<f.y&&t.y<f.y||s.y>g.y&&t.y>g.y)return!1;const N=on(s,t,a[0]);return N!==on(s,t,a[1])||N!==on(s,t,a[2])||N!==on(s,t,a[3])}function _d(s,t,a){const f=t.paint.get(s).value;return f.kind==="constant"?f.value:a.programConfigurations.get(t.id).getMaxValue(s)}function Gf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wf(s,t,a,f,g){if(!t[0]&&!t[1])return s;const N=W.convert(t)._mult(g);a==="viewport"&&N._rotate(-f);const S=[];for(let T=0;T<s.length;T++)S.push(s[T].sub(N));return S}let ry,Zf;qt("CircleBucket",Np,{omit:["layers"]});var yt={get paint(){return Zf=Zf||new ji({"circle-radius":new mn(qe.paint_circle["circle-radius"]),"circle-color":new mn(qe.paint_circle["circle-color"]),"circle-blur":new mn(qe.paint_circle["circle-blur"]),"circle-opacity":new mn(qe.paint_circle["circle-opacity"]),"circle-translate":new ln(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new ln(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ln(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ln(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mn(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mn(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mn(qe.paint_circle["circle-stroke-opacity"])})},get layout(){return ry=ry||new ji({"circle-sort-key":new mn(qe.layout_circle["circle-sort-key"])})}},Sr=1e-6,Dn=typeof Float32Array<"u"?Float32Array:Array;function Pc(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function nl(s,t,a){var f=t[0],g=t[1],N=t[2],S=t[3],T=t[4],M=t[5],V=t[6],F=t[7],H=t[8],Y=t[9],Q=t[10],ee=t[11],ce=t[12],ve=t[13],be=t[14],je=t[15],Ne=a[0],Le=a[1],Fe=a[2],nt=a[3];return s[0]=Ne*f+Le*T+Fe*H+nt*ce,s[1]=Ne*g+Le*M+Fe*Y+nt*ve,s[2]=Ne*N+Le*V+Fe*Q+nt*be,s[3]=Ne*S+Le*F+Fe*ee+nt*je,s[4]=(Ne=a[4])*f+(Le=a[5])*T+(Fe=a[6])*H+(nt=a[7])*ce,s[5]=Ne*g+Le*M+Fe*Y+nt*ve,s[6]=Ne*N+Le*V+Fe*Q+nt*be,s[7]=Ne*S+Le*F+Fe*ee+nt*je,s[8]=(Ne=a[8])*f+(Le=a[9])*T+(Fe=a[10])*H+(nt=a[11])*ce,s[9]=Ne*g+Le*M+Fe*Y+nt*ve,s[10]=Ne*N+Le*V+Fe*Q+nt*be,s[11]=Ne*S+Le*F+Fe*ee+nt*je,s[12]=(Ne=a[12])*f+(Le=a[13])*T+(Fe=a[14])*H+(nt=a[15])*ce,s[13]=Ne*g+Le*M+Fe*Y+nt*ve,s[14]=Ne*N+Le*V+Fe*Q+nt*be,s[15]=Ne*S+Le*F+Fe*ee+nt*je,s}Math.hypot||(Math.hypot=function(){for(var s=0,t=arguments.length;t--;)s+=arguments[t]*arguments[t];return Math.sqrt(s)});var ja,rl=nl;function jc(s,t,a){var f=t[0],g=t[1],N=t[2],S=t[3];return s[0]=a[0]*f+a[4]*g+a[8]*N+a[12]*S,s[1]=a[1]*f+a[5]*g+a[9]*N+a[13]*S,s[2]=a[2]*f+a[6]*g+a[10]*N+a[14]*S,s[3]=a[3]*f+a[7]*g+a[11]*N+a[15]*S,s}ja=new Dn(4),Dn!=Float32Array&&(ja[0]=0,ja[1]=0,ja[2]=0,ja[3]=0);class wd extends _o{constructor(t){super(t,yt)}createBucket(t){return new Np(t)}queryRadius(t){const a=t;return _d("circle-radius",this,a)+_d("circle-stroke-width",this,a)+Gf(this.paint.get("circle-translate"))}queryIntersectsFeature(t,a,f,g,N,S,T,M){const V=Wf(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,T),F=this.paint.get("circle-radius").evaluate(a,f)+this.paint.get("circle-stroke-width").evaluate(a,f),H=this.paint.get("circle-pitch-alignment")==="map",Y=H?V:function(ee,ce){return ee.map(ve=>Cd(ve,ce))}(V,M),Q=H?F*T:F;for(const ee of g)for(const ce of ee){const ve=H?ce:Cd(ce,M);let be=Q;const je=jc([],[ce.x,ce.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=je[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=S.cameraToCenterDistance/je[3]),b0(Y,ve,be))return!0}return!1}}function Cd(s,t){const a=jc([],[s.x,s.y,0,1],t);return new W(a[0]/a[3],a[1]/a[3])}class Kf extends Np{}let Yf;qt("HeatmapBucket",Kf,{omit:["layers"]});var Pp={get paint(){return Yf=Yf||new ji({"heatmap-radius":new mn(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mn(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ln(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vu(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ln(qe.paint_heatmap["heatmap-opacity"])})}};function Ih(s,{width:t,height:a},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*a*f)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*a*f}`)}else g=new Uint8Array(t*a*f);return s.width=t,s.height=a,s.data=g,s}function Xf(s,{width:t,height:a},f){if(t===s.width&&a===s.height)return;const g=Ih({},{width:t,height:a},f);Vh(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,t),height:Math.min(s.height,a)},f),s.width=t,s.height=a,s.data=g.data}function Vh(s,t,a,f,g,N){if(g.width===0||g.height===0)return t;if(g.width>s.width||g.height>s.height||a.x>s.width-g.width||a.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||f.x>t.width-g.width||f.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const S=s.data,T=t.data;if(S===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<g.height;M++){const V=((a.y+M)*s.width+a.x)*N,F=((f.y+M)*t.width+f.x)*N;for(let H=0;H<g.width*N;H++)T[F+H]=S[V+H]}return t}class wu{constructor(t,a){Ih(this,t,1,a)}resize(t){Xf(this,t,1)}clone(){return new wu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,f,g,N){Vh(t,a,f,g,N,1)}}class Qs{constructor(t,a){Ih(this,t,4,a)}resize(t){Xf(this,t,4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,f,g,N){Vh(t,a,f,g,N,4)}}function Jf(s){const t={},a=s.resolution||256,f=s.clips?s.clips.length:1,g=s.image||new Qs({width:a,height:f});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const N=(S,T,M)=>{t[s.evaluationKey]=M;const V=s.expression.evaluate(t);g.data[S+T+0]=Math.floor(255*V.r/V.a),g.data[S+T+1]=Math.floor(255*V.g/V.a),g.data[S+T+2]=Math.floor(255*V.b/V.a),g.data[S+T+3]=Math.floor(255*V.a)};if(s.clips)for(let S=0,T=0;S<f;++S,T+=4*a)for(let M=0,V=0;M<a;M++,V+=4){const F=M/(a-1),{start:H,end:Y}=s.clips[S];N(T,V,H*(1-F)+Y*F)}else for(let S=0,T=0;S<a;S++,T+=4)N(0,T,S/(a-1));return g}qt("AlphaImage",wu),qt("RGBAImage",Qs);class jp extends _o{createBucket(t){return new Kf(t)}constructor(t){super(t,Pp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Jf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qf;var kp={get paint(){return Qf=Qf||new ji({"hillshade-illumination-direction":new ln(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ln(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ln(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ln(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ln(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ln(qe.paint_hillshade["hillshade-accent-color"])})}};class Ap extends _o{constructor(t){super(t,kp)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Mp=Rr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rp}=Mp;var Nd={exports:{}};function Ol(s,t,a){a=a||2;var f,g,N,S,T,M,V,F=t&&t.length,H=F?t[0]*a:s.length,Y=em(s,0,H,a,!0),Q=[];if(!Y||Y.next===Y.prev)return Q;if(F&&(Y=function(ce,ve,be,je){var Ne,Le,Fe,nt=[];for(Ne=0,Le=ve.length;Ne<Le;Ne++)(Fe=em(ce,ve[Ne]*je,Ne<Le-1?ve[Ne+1]*je:ce.length,je,!1))===Fe.next&&(Fe.steiner=!0),nt.push(ui(Fe));for(nt.sort(Oh),Ne=0;Ne<nt.length;Ne++)be=Nu(nt[Ne],be);return be}(s,t,Y,a)),s.length>80*a){f=N=s[0],g=S=s[1];for(var ee=a;ee<H;ee+=a)(T=s[ee])<f&&(f=T),(M=s[ee+1])<g&&(g=M),T>N&&(N=T),M>S&&(S=M);V=(V=Math.max(N-f,S-g))!==0?32767/V:0}return Cu(Y,Q,a,f,g,V,0),Q}function em(s,t,a,f,g){var N,S;if(g===Vp(s,t,a,f)>0)for(N=t;N<a;N+=f)S=ay(N,s[N],s[N+1],S);else for(N=a-f;N>=t;N-=f)S=ay(N,s[N],s[N+1],S);return S&&Su(S,S.next)&&(Eu(S),S=S.next),S}function Bl(s,t){if(!s)return s;t||(t=s);var a,f=s;do if(a=!1,f.steiner||!Su(f,f.next)&&ii(f.prev,f,f.next)!==0)f=f.next;else{if(Eu(f),(f=t=f.prev)===f.next)break;a=!0}while(a||f!==t);return t}function Cu(s,t,a,f,g,N,S){if(s){!S&&N&&function(F,H,Y,Q){var ee=F;do ee.z===0&&(ee.z=Ip(ee.x,ee.y,H,Y,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==F);ee.prevZ.nextZ=null,ee.prevZ=null,function(ce){var ve,be,je,Ne,Le,Fe,nt,Vt,Kt=1;do{for(be=ce,ce=null,Le=null,Fe=0;be;){for(Fe++,je=be,nt=0,ve=0;ve<Kt&&(nt++,je=je.nextZ);ve++);for(Vt=Kt;nt>0||Vt>0&&je;)nt!==0&&(Vt===0||!je||be.z<=je.z)?(Ne=be,be=be.nextZ,nt--):(Ne=je,je=je.nextZ,Vt--),Le?Le.nextZ=Ne:ce=Ne,Ne.prevZ=Le,Le=Ne;be=je}Le.nextZ=null,Kt*=2}while(Fe>1)}(ee)}(s,f,g,N);for(var T,M,V=s;s.prev!==s.next;)if(T=s.prev,M=s.next,N?iy(s,f,g,N):Lp(s))t.push(T.i/a|0),t.push(s.i/a|0),t.push(M.i/a|0),Eu(s),s=M.next,V=M.next;else if((s=M)===V){S?S===1?Cu(s=zh(Bl(s),t,a),t,a,f,g,N,2):S===2&&sy(s,t,a,f,g,N):Cu(Bl(s),t,a,f,g,N,1);break}}}function Lp(s){var t=s.prev,a=s,f=s.next;if(ii(t,a,f)>=0)return!1;for(var g=t.x,N=a.x,S=f.x,T=t.y,M=a.y,V=f.y,F=g<N?g<S?g:S:N<S?N:S,H=T<M?T<V?T:V:M<V?M:V,Y=g>N?g>S?g:S:N>S?N:S,Q=T>M?T>V?T:V:M>V?M:V,ee=f.next;ee!==t;){if(ee.x>=F&&ee.x<=Y&&ee.y>=H&&ee.y<=Q&&Fl(g,T,N,M,S,V,ee.x,ee.y)&&ii(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function iy(s,t,a,f){var g=s.prev,N=s,S=s.next;if(ii(g,N,S)>=0)return!1;for(var T=g.x,M=N.x,V=S.x,F=g.y,H=N.y,Y=S.y,Q=T<M?T<V?T:V:M<V?M:V,ee=F<H?F<Y?F:Y:H<Y?H:Y,ce=T>M?T>V?T:V:M>V?M:V,ve=F>H?F>Y?F:Y:H>Y?H:Y,be=Ip(Q,ee,t,a,f),je=Ip(ce,ve,t,a,f),Ne=s.prevZ,Le=s.nextZ;Ne&&Ne.z>=be&&Le&&Le.z<=je;){if(Ne.x>=Q&&Ne.x<=ce&&Ne.y>=ee&&Ne.y<=ve&&Ne!==g&&Ne!==S&&Fl(T,F,M,H,V,Y,Ne.x,Ne.y)&&ii(Ne.prev,Ne,Ne.next)>=0||(Ne=Ne.prevZ,Le.x>=Q&&Le.x<=ce&&Le.y>=ee&&Le.y<=ve&&Le!==g&&Le!==S&&Fl(T,F,M,H,V,Y,Le.x,Le.y)&&ii(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ne&&Ne.z>=be;){if(Ne.x>=Q&&Ne.x<=ce&&Ne.y>=ee&&Ne.y<=ve&&Ne!==g&&Ne!==S&&Fl(T,F,M,H,V,Y,Ne.x,Ne.y)&&ii(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.prevZ}for(;Le&&Le.z<=je;){if(Le.x>=Q&&Le.x<=ce&&Le.y>=ee&&Le.y<=ve&&Le!==g&&Le!==S&&Fl(T,F,M,H,V,Y,Le.x,Le.y)&&ii(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function zh(s,t,a){var f=s;do{var g=f.prev,N=f.next.next;!Su(g,N)&&oy(g,f,f.next,N)&&Bh(g,N)&&Bh(N,g)&&(t.push(g.i/a|0),t.push(f.i/a|0),t.push(N.i/a|0),Eu(f),Eu(f.next),f=s=N),f=f.next}while(f!==s);return Bl(f)}function sy(s,t,a,f,g,N){var S=s;do{for(var T=S.next.next;T!==S.prev;){if(S.i!==T.i&&tm(S,T)){var M=im(S,T);return S=Bl(S,S.next),M=Bl(M,M.next),Cu(S,t,a,f,g,N,0),void Cu(M,t,a,f,g,N,0)}T=T.next}S=S.next}while(S!==s)}function Oh(s,t){return s.x-t.x}function Nu(s,t){var a=function(g,N){var S,T=N,M=g.x,V=g.y,F=-1/0;do{if(V<=T.y&&V>=T.next.y&&T.next.y!==T.y){var H=T.x+(V-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=M&&H>F&&(F=H,S=T.x<T.next.x?T:T.next,H===M))return S}T=T.next}while(T!==N);if(!S)return null;var Y,Q=S,ee=S.x,ce=S.y,ve=1/0;T=S;do M>=T.x&&T.x>=ee&&M!==T.x&&Fl(V<ce?M:F,V,ee,ce,V<ce?F:M,V,T.x,T.y)&&(Y=Math.abs(V-T.y)/(M-T.x),Bh(T,g)&&(Y<ve||Y===ve&&(T.x>S.x||T.x===S.x&&Bo(S,T)))&&(S=T,ve=Y)),T=T.next;while(T!==Q);return S}(s,t);if(!a)return t;var f=im(a,s);return Bl(f,f.next),Bl(a,a.next)}function Bo(s,t){return ii(s.prev,s,t.prev)<0&&ii(t.next,s,s.next)<0}function Ip(s,t,a,f,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-f)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ui(s){var t=s,a=s;do(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next;while(t!==s);return a}function Fl(s,t,a,f,g,N,S,T){return(g-S)*(t-T)>=(s-S)*(N-T)&&(s-S)*(f-T)>=(a-S)*(t-T)&&(a-S)*(N-T)>=(g-S)*(f-T)}function tm(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!function(a,f){var g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==f.i&&g.next.i!==f.i&&oy(g,g.next,a,f))return!0;g=g.next}while(g!==a);return!1}(s,t)&&(Bh(s,t)&&Bh(t,s)&&function(a,f){var g=a,N=!1,S=(a.x+f.x)/2,T=(a.y+f.y)/2;do g.y>T!=g.next.y>T&&g.next.y!==g.y&&S<(g.next.x-g.x)*(T-g.y)/(g.next.y-g.y)+g.x&&(N=!N),g=g.next;while(g!==a);return N}(s,t)&&(ii(s.prev,s,t.prev)||ii(s,t.prev,t))||Su(s,t)&&ii(s.prev,s,s.next)>0&&ii(t.prev,t,t.next)>0)}function ii(s,t,a){return(t.y-s.y)*(a.x-t.x)-(t.x-s.x)*(a.y-t.y)}function Su(s,t){return s.x===t.x&&s.y===t.y}function oy(s,t,a,f){var g=rm(ii(s,t,a)),N=rm(ii(s,t,f)),S=rm(ii(a,f,s)),T=rm(ii(a,f,t));return g!==N&&S!==T||!(g!==0||!nm(s,a,t))||!(N!==0||!nm(s,f,t))||!(S!==0||!nm(a,s,f))||!(T!==0||!nm(a,t,f))}function nm(s,t,a){return t.x<=Math.max(s.x,a.x)&&t.x>=Math.min(s.x,a.x)&&t.y<=Math.max(s.y,a.y)&&t.y>=Math.min(s.y,a.y)}function rm(s){return s>0?1:s<0?-1:0}function Bh(s,t){return ii(s.prev,s,s.next)<0?ii(s,t,s.next)>=0&&ii(s,s.prev,t)>=0:ii(s,t,s.prev)<0||ii(s,s.next,t)<0}function im(s,t){var a=new sm(s.i,s.x,s.y),f=new sm(t.i,t.x,t.y),g=s.next,N=t.prev;return s.next=t,t.prev=s,a.next=g,g.prev=a,f.next=a,a.prev=f,N.next=f,f.prev=N,f}function ay(s,t,a,f){var g=new sm(s,t,a);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function Eu(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function sm(s,t,a){this.i=s,this.x=t,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vp(s,t,a,f){for(var g=0,N=t,S=a-f;N<a;N+=f)g+=(s[S]-s[N])*(s[N+1]+s[S+1]),S=N;return g}Nd.exports=Ol,Nd.exports.default=Ol,Ol.deviation=function(s,t,a,f){var g=t&&t.length,N=Math.abs(Vp(s,0,g?t[0]*a:s.length,a));if(g)for(var S=0,T=t.length;S<T;S++)N-=Math.abs(Vp(s,t[S]*a,S<T-1?t[S+1]*a:s.length,a));var M=0;for(S=0;S<f.length;S+=3){var V=f[S]*a,F=f[S+1]*a,H=f[S+2]*a;M+=Math.abs((s[V]-s[H])*(s[F+1]-s[V+1])-(s[V]-s[F])*(s[H+1]-s[V+1]))}return N===0&&M===0?0:Math.abs((M-N)/N)},Ol.flatten=function(s){for(var t=s[0][0].length,a={vertices:[],holes:[],dimensions:t},f=0,g=0;g<s.length;g++){for(var N=0;N<s[g].length;N++)for(var S=0;S<t;S++)a.vertices.push(s[g][N][S]);g>0&&a.holes.push(f+=s[g-1].length)}return a};var ly=k(Nd.exports);function om(s,t,a,f,g){cy(s,t,a,f||s.length-1,g||uy)}function cy(s,t,a,f,g){for(;f>a;){if(f-a>600){var N=f-a+1,S=t-a+1,T=Math.log(N),M=.5*Math.exp(2*T/3),V=.5*Math.sqrt(T*M*(N-M)/N)*(S-N/2<0?-1:1);cy(s,t,Math.max(a,Math.floor(t-S*M/N+V)),Math.min(f,Math.floor(t+(N-S)*M/N+V)),g)}var F=s[t],H=a,Y=f;for(Sd(s,a,t),g(s[f],F)>0&&Sd(s,a,f);H<Y;){for(Sd(s,H,Y),H++,Y--;g(s[H],F)<0;)H++;for(;g(s[Y],F)>0;)Y--}g(s[a],F)===0?Sd(s,a,Y):Sd(s,++Y,f),Y<=t&&(a=Y+1),t<=Y&&(f=Y-1)}}function Sd(s,t,a){var f=s[t];s[t]=s[a],s[a]=f}function uy(s,t){return s<t?-1:s>t?1:0}function zp(s,t){const a=s.length;if(a<=1)return[s];const f=[];let g,N;for(let S=0;S<a;S++){const T=yn(s[S]);T!==0&&(s[S].area=Math.abs(T),N===void 0&&(N=T<0),N===T<0?(g&&f.push(g),g=[s[S]]):g.push(s[S]))}if(g&&f.push(g),t>1)for(let S=0;S<f.length;S++)f[S].length<=t||(om(f[S],t,1,f[S].length-1,Du),f[S]=f[S].slice(0,t));return f}function Du(s,t){return t.area-s.area}function Tu(s,t,a){const f=a.patternDependencies;let g=!1;for(const N of t){const S=N.paint.get(`${s}-pattern`);S.isConstant()||(g=!0);const T=S.constantOr(null);T&&(g=!0,f[T.to]=!0,f[T.from]=!0)}return g}function Ul(s,t,a,f,g){const N=g.patternDependencies;for(const S of t){const T=S.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:f-1},a,{},g.availableImages),V=T.evaluate({zoom:f},a,{},g.availableImages),F=T.evaluate({zoom:f+1},a,{},g.availableImages);M=M&&M.name?M.name:M,V=V&&V.name?V.name:V,F=F&&F.name?F.name:F,N[M]=!0,N[V]=!0,N[F]=!0,a.patterns[S.id]={min:M,mid:V,max:F}}}return a}class Fh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yn,this.indexArray=new mr,this.indexArray2=new Bi,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new _r,this.segments2=new _r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,f){this.hasPattern=Tu("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),N=!g.isConstant(),S=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of t){const H=this.layers[0]._featureFilter.needGeometry,Y=_u(T,H);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),Y,f))continue;const Q=N?g.evaluate(Y,{},f,a.availableImages):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:xu(T),patterns:{},sortKey:Q};S.push(ee)}N&&S.sort((T,M)=>T.sortKey-M.sortKey);for(const T of S){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=Ul("fill",this.layers,T,this.zoom,a);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});a.featureIndex.insert(t[V].feature,M,V,F,this.index)}}update(t,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,f)}addFeatures(t,a,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rp),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,f,g,N){for(const S of zp(a,500)){let T=0;for(const Q of S)T+=Q.length;const M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),V=M.vertexLength,F=[],H=[];for(const Q of S){if(Q.length===0)continue;Q!==S[0]&&H.push(F.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ce=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ce+Q.length-1,ce),F.push(Q[0].x),F.push(Q[0].y);for(let ve=1;ve<Q.length;ve++)this.layoutVertexArray.emplaceBack(Q[ve].x,Q[ve].y),this.indexArray2.emplaceBack(ce+ve-1,ce+ve),F.push(Q[ve].x),F.push(Q[ve].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const Y=ly(F,H);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(V+Y[Q],V+Y[Q+1],V+Y[Q+2]);M.vertexLength+=T,M.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,f,N,g)}}let Do,Pu;qt("FillBucket",Fh,{omit:["layers","patternFeatures"]});var Jn={get paint(){return Pu=Pu||new ji({"fill-antialias":new ln(qe.paint_fill["fill-antialias"]),"fill-opacity":new mn(qe.paint_fill["fill-opacity"]),"fill-color":new mn(qe.paint_fill["fill-color"]),"fill-outline-color":new mn(qe.paint_fill["fill-outline-color"]),"fill-translate":new ln(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new ln(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qa(qe.paint_fill["fill-pattern"])})},get layout(){return Do=Do||new ji({"fill-sort-key":new mn(qe.layout_fill["fill-sort-key"])})}};class am extends _o{constructor(t){super(t,Jn)}recalculate(t,a){super.recalculate(t,a);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Fh(t)}queryRadius(){return Gf(this.paint.get("fill-translate"))}queryIntersectsFeature(t,a,f,g,N,S,T){return Ep(Wf(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,T),g)}isTileClipped(){return!0}}const dy=Rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),kN=Rr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_0}=dy;var il={},Uh=B,hy=ju;function ju(s,t,a,f,g){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=f,this._values=g,s.readFields(w0,this,t)}function w0(s,t,a){s==1?t.id=a.readVarint():s==2?function(f,g){for(var N=f.readVarint()+f.pos;f.pos<N;){var S=g._keys[f.readVarint()],T=g._values[f.readVarint()];g.properties[S]=T}}(a,t):s==3?t.type=a.readVarint():s==4&&(t._geometry=a.pos)}function Op(s){for(var t,a,f=0,g=0,N=s.length,S=N-1;g<N;S=g++)f+=((a=s[S]).x-(t=s[g]).x)*(t.y+a.y);return f}ju.types=["Unknown","Point","LineString","Polygon"],ju.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var t,a=s.readVarint()+s.pos,f=1,g=0,N=0,S=0,T=[];s.pos<a;){if(g<=0){var M=s.readVarint();f=7&M,g=M>>3}if(g--,f===1||f===2)N+=s.readSVarint(),S+=s.readSVarint(),f===1&&(t&&T.push(t),t=[]),t.push(new Uh(N,S));else{if(f!==7)throw new Error("unknown command "+f);t&&t.push(t[0].clone())}}return t&&T.push(t),T},ju.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var t=s.readVarint()+s.pos,a=1,f=0,g=0,N=0,S=1/0,T=-1/0,M=1/0,V=-1/0;s.pos<t;){if(f<=0){var F=s.readVarint();a=7&F,f=F>>3}if(f--,a===1||a===2)(g+=s.readSVarint())<S&&(S=g),g>T&&(T=g),(N+=s.readSVarint())<M&&(M=N),N>V&&(V=N);else if(a!==7)throw new Error("unknown command "+a)}return[S,M,T,V]},ju.prototype.toGeoJSON=function(s,t,a){var f,g,N=this.extent*Math.pow(2,a),S=this.extent*s,T=this.extent*t,M=this.loadGeometry(),V=ju.types[this.type];function F(Q){for(var ee=0;ee<Q.length;ee++){var ce=Q[ee];Q[ee]=[360*(ce.x+S)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+T)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(f=0;f<M.length;f++)H[f]=M[f][0];F(M=H);break;case 2:for(f=0;f<M.length;f++)F(M[f]);break;case 3:for(M=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var ce,ve,be=[],je=0;je<ee;je++){var Ne=Op(Q[je]);Ne!==0&&(ve===void 0&&(ve=Ne<0),ve===Ne<0?(ce&&be.push(ce),ce=[Q[je]]):ce.push(Q[je]))}return ce&&be.push(ce),be}(M),f=0;f<M.length;f++)for(g=0;g<M[f].length;g++)F(M[f][g])}M.length===1?M=M[0]:V="Multi"+V;var Y={type:"Feature",geometry:{type:V,coordinates:M},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var C0=hy,Bp=Fp;function Fp(s,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(fy,this,t),this.length=this._features.length}function fy(s,t,a){s===15?t.version=a.readVarint():s===1?t.name=a.readString():s===5?t.extent=a.readVarint():s===2?t._features.push(a.pos):s===3?t._keys.push(a.readString()):s===4&&t._values.push(function(f){for(var g=null,N=f.readVarint()+f.pos;f.pos<N;){var S=f.readVarint()>>3;g=S===1?f.readString():S===2?f.readFloat():S===3?f.readDouble():S===4?f.readVarint64():S===5?f.readVarint():S===6?f.readSVarint():S===7?f.readBoolean():null}return g}(a))}Fp.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var t=this._pbf.readVarint()+this._pbf.pos;return new C0(this._pbf,t,this.extent,this._keys,this._values)};var Fo=Bp;function $l(s,t,a){if(s===3){var f=new Fo(a,a.readVarint()+a.pos);f.length&&(t[f.name]=f)}}il.VectorTile=function(s,t){this.layers=s.readFields($l,{},t)},il.VectorTileFeature=hy,il.VectorTileLayer=Bp;const ql=il.VectorTileFeature.types,Ed=Math.pow(2,13);function Hl(s,t,a,f,g,N,S,T){s.emplaceBack(t,a,2*Math.floor(f*Ed)+S,g*Ed*2,N*Ed*2,Math.round(T))}class Uo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new _t,this.indexArray=new mr,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new _r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,f){this.features=[],this.hasPattern=Tu("fill-extrusion",this.layers,a);for(const{feature:g,id:N,index:S,sourceLayerIndex:T}of t){const M=this.layers[0]._featureFilter.needGeometry,V=_u(g,M);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),V,f))continue;const F={id:N,sourceLayerIndex:T,index:S,geometry:M?V.geometry:xu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Ul("fill-extrusion",this.layers,F,this.zoom,a)):this.addFeature(F,F.geometry,S,f,{}),a.featureIndex.insert(g,F.geometry,S,T,this.index,!0)}}addFeatures(t,a,f){for(const g of this.features){const{geometry:N}=g;this.addFeature(g,N,g.index,a,f)}}update(t,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_0),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,kN.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,a,f,g,N){const S={x:0,y:0,vertexCount:0};for(const T of zp(a,500)){let M=0;for(const ee of T)M+=ee.length;let V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of T){if(ee.length===0||N0(ee))continue;let ce=0;for(let ve=0;ve<ee.length;ve++){const be=ee[ve];if(ve>=1){const je=ee[ve-1];if(!gs(be,je)){V.vertexLength+4>_r.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ne=be.sub(je)._perp()._unit(),Le=je.dist(be);ce+Le>32768&&(ce=0),Hl(this.layoutVertexArray,be.x,be.y,Ne.x,Ne.y,0,0,ce),Hl(this.layoutVertexArray,be.x,be.y,Ne.x,Ne.y,0,1,ce),S.x+=2*be.x,S.y+=2*be.y,S.vertexCount+=2,ce+=Le,Hl(this.layoutVertexArray,je.x,je.y,Ne.x,Ne.y,0,0,ce),Hl(this.layoutVertexArray,je.x,je.y,Ne.x,Ne.y,0,1,ce),S.x+=2*je.x,S.y+=2*je.y,S.vertexCount+=2;const Fe=V.vertexLength;this.indexArray.emplaceBack(Fe,Fe+2,Fe+1),this.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+M>_r.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),ql[t.type]!=="Polygon")continue;const F=[],H=[],Y=V.vertexLength;for(const ee of T)if(ee.length!==0){ee!==T[0]&&H.push(F.length/2);for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];Hl(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),S.x+=ve.x,S.y+=ve.y,S.vertexCount+=1,F.push(ve.x),F.push(ve.y)}}const Q=ly(F,H);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(Y+Q[ee],Y+Q[ee+2],Y+Q[ee+1]);V.primitiveLength+=Q.length/3,V.vertexLength+=M}for(let T=0;T<S.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(S.x/S.vertexCount),Math.floor(S.y/S.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,f,N,g)}}function gs(s,t){return s.x===t.x&&(s.x<0||s.x>Ai)||s.y===t.y&&(s.y<0||s.y>Ai)}function N0(s){return s.every(t=>t.x<0)||s.every(t=>t.x>Ai)||s.every(t=>t.y<0)||s.every(t=>t.y>Ai)}let my;qt("FillExtrusionBucket",Uo,{omit:["layers","features"]});var S0={get paint(){return my=my||new ji({"fill-extrusion-opacity":new ln(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mn(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ln(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ln(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qa(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mn(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mn(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ln(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Up extends _o{constructor(t){super(t,S0)}createBucket(t){return new Uo(t)}queryRadius(){return Gf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,a,f,g,N,S,T,M){const V=Wf(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,T),F=this.paint.get("fill-extrusion-height").evaluate(a,f),H=this.paint.get("fill-extrusion-base").evaluate(a,f),Y=function(ee,ce,ve,be){const je=[];for(const Ne of ee){const Le=[Ne.x,Ne.y,0,1];jc(Le,Le,ce),je.push(new W(Le[0]/Le[3],Le[1]/Le[3]))}return je}(V,M),Q=function(ee,ce,ve,be){const je=[],Ne=[],Le=be[8]*ce,Fe=be[9]*ce,nt=be[10]*ce,Vt=be[11]*ce,Kt=be[8]*ve,Ot=be[9]*ve,At=be[10]*ve,Et=be[11]*ve;for(const xt of ee){const Dt=[],ut=[];for(const un of xt){const Qt=un.x,$n=un.y,Or=be[0]*Qt+be[4]*$n+be[12],Vr=be[1]*Qt+be[5]*$n+be[13],Ui=be[2]*Qt+be[6]*$n+be[14],Ds=be[3]*Qt+be[7]*$n+be[15],$i=Ui+nt,Oi=Ds+Vt,es=Or+Kt,bs=Vr+Ot,Ws=Ui+At,Hr=Ds+Et,hi=new W((Or+Le)/Oi,(Vr+Fe)/Oi);hi.z=$i/Oi,Dt.push(hi);const Ci=new W(es/Hr,bs/Hr);Ci.z=Ws/Hr,ut.push(Ci)}je.push(Dt),Ne.push(ut)}return[je,Ne]}(g,H,F,M);return function(ee,ce,ve){let be=1/0;Ep(ve,ce)&&(be=$h(ve,ce[0]));for(let je=0;je<ce.length;je++){const Ne=ce[je],Le=ee[je];for(let Fe=0;Fe<Ne.length-1;Fe++){const nt=Ne[Fe],Vt=[nt,Ne[Fe+1],Le[Fe+1],Le[Fe],nt];Sp(ve,Vt)&&(be=Math.min(be,$h(ve,Vt)))}}return be!==1/0&&be}(Q[0],Q[1],Y)}}function Dd(s,t){return s.x*t.x+s.y*t.y}function $h(s,t){if(s.length===1){let a=0;const f=t[a++];let g;for(;!g||f.equals(g);)if(g=t[a++],!g)return 1/0;for(;a<t.length;a++){const N=t[a],S=s[0],T=g.sub(f),M=N.sub(f),V=S.sub(f),F=Dd(T,T),H=Dd(T,M),Y=Dd(M,M),Q=Dd(V,T),ee=Dd(V,M),ce=F*Y-H*H,ve=(Y*Q-H*ee)/ce,be=(F*ee-H*Q)/ce,je=f.z*(1-ve-be)+g.z*ve+N.z*be;if(isFinite(je))return je}return 1/0}{let a=1/0;for(const f of t)a=Math.min(a,f.z);return a}}const py=Rr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:E0}=py,D0=Rr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$p}=D0,T0=il.VectorTileFeature.types,gy=Math.cos(Math.PI/180*37.5),vy=Math.pow(2,14)/.5;class lm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new xn,this.layoutVertexArray2=new Jt,this.indexArray=new mr,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new _r,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,f){this.hasPattern=Tu("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),N=!g.isConstant(),S=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of t){const H=this.layers[0]._featureFilter.needGeometry,Y=_u(T,H);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),Y,f))continue;const Q=N?g.evaluate(Y,{},f):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:xu(T),patterns:{},sortKey:Q};S.push(ee)}N&&S.sort((T,M)=>T.sortKey-M.sortKey);for(const T of S){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=Ul("line",this.layers,T,this.zoom,a);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});a.featureIndex.insert(t[V].feature,M,V,F,this.index)}}update(t,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,f)}addFeatures(t,a,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,$p)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,E0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,f,g,N){const S=this.layers[0].layout,T=S.get("line-join").evaluate(t,{}),M=S.get("line-cap"),V=S.get("line-miter-limit"),F=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const H of a)this.addLine(H,t,T,M,V,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,f,N,g)}addLine(t,a,f,g,N,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<t.length-1;be++)this.totalDistance+=t[be].dist(t[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=T0[a.type]==="Polygon";let M=t.length;for(;M>=2&&t[M-1].equals(t[M-2]);)M--;let V=0;for(;V<M-1&&t[V].equals(t[V+1]);)V++;if(M<(T?3:2))return;f==="bevel"&&(N=1.05);const F=this.overscaling<=16?15*Ai/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let Y,Q,ee,ce,ve;this.e1=this.e2=-1,T&&(Y=t[M-2],ve=t[V].sub(Y)._unit()._perp());for(let be=V;be<M;be++){if(ee=be===M-1?T?t[V+1]:void 0:t[be+1],ee&&t[be].equals(ee))continue;ve&&(ce=ve),Y&&(Q=Y),Y=t[be],ve=ee?ee.sub(Y)._unit()._perp():ce,ce=ce||ve;let je=ce.add(ve);je.x===0&&je.y===0||je._unit();const Ne=ce.x*ve.x+ce.y*ve.y,Le=je.x*ve.x+je.y*ve.y,Fe=Le!==0?1/Le:1/0,nt=2*Math.sqrt(2-2*Le),Vt=Le<gy&&Q&&ee,Kt=ce.x*ve.y-ce.y*ve.x>0;if(Vt&&be>V){const Et=Y.dist(Q);if(Et>2*F){const xt=Y.sub(Y.sub(Q)._mult(F/Et)._round());this.updateDistance(Q,xt),this.addCurrentVertex(xt,ce,0,0,H),Q=xt}}const Ot=Q&&ee;let At=Ot?f:T?"butt":g;if(Ot&&At==="round"&&(Fe<S?At="miter":Fe<=2&&(At="fakeround")),At==="miter"&&Fe>N&&(At="bevel"),At==="bevel"&&(Fe>2&&(At="flipbevel"),Fe<N&&(At="miter")),Q&&this.updateDistance(Q,Y),At==="miter")je._mult(Fe),this.addCurrentVertex(Y,je,0,0,H);else if(At==="flipbevel"){if(Fe>100)je=ve.mult(-1);else{const Et=Fe*ce.add(ve).mag()/ce.sub(ve).mag();je._perp()._mult(Et*(Kt?-1:1))}this.addCurrentVertex(Y,je,0,0,H),this.addCurrentVertex(Y,je.mult(-1),0,0,H)}else if(At==="bevel"||At==="fakeround"){const Et=-Math.sqrt(Fe*Fe-1),xt=Kt?Et:0,Dt=Kt?0:Et;if(Q&&this.addCurrentVertex(Y,ce,xt,Dt,H),At==="fakeround"){const ut=Math.round(180*nt/Math.PI/20);for(let un=1;un<ut;un++){let Qt=un/ut;if(Qt!==.5){const Or=Qt-.5;Qt+=Qt*Or*(Qt-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*Or*Or+(.848013+Ne*(.215638*Ne-1.06021)))}const $n=ve.sub(ce)._mult(Qt)._add(ce)._unit()._mult(Kt?-1:1);this.addHalfVertex(Y,$n.x,$n.y,!1,Kt,0,H)}}ee&&this.addCurrentVertex(Y,ve,-xt,-Dt,H)}else if(At==="butt")this.addCurrentVertex(Y,je,0,0,H);else if(At==="square"){const Et=Q?1:-1;this.addCurrentVertex(Y,je,Et,Et,H)}else At==="round"&&(Q&&(this.addCurrentVertex(Y,ce,0,0,H),this.addCurrentVertex(Y,ce,1,1,H,!0)),ee&&(this.addCurrentVertex(Y,ve,-1,-1,H,!0),this.addCurrentVertex(Y,ve,0,0,H)));if(Vt&&be<M-1){const Et=Y.dist(ee);if(Et>2*F){const xt=Y.add(ee.sub(Y)._mult(F/Et)._round());this.updateDistance(Y,xt),this.addCurrentVertex(xt,ve,0,0,H),Y=xt}}}}addCurrentVertex(t,a,f,g,N,S=!1){const T=a.y*g-a.x,M=-a.y-a.x*g;this.addHalfVertex(t,a.x+a.y*f,a.y-a.x*f,S,!1,f,N),this.addHalfVertex(t,T,M,S,!0,-g,N),this.distance>vy/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,a,f,g,N,S))}addHalfVertex({x:t,y:a},f,g,N,S,T,M){const V=.5*(this.lineClips?this.scaledDistance*(vy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(N?1:0),(a<<1)+(S?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(T===0?0:T<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),M.primitiveLength++),S?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}let yy,qp;qt("LineBucket",lm,{omit:["layers","patternFeatures"]});var by={get paint(){return qp=qp||new ji({"line-opacity":new mn(qe.paint_line["line-opacity"]),"line-color":new mn(qe.paint_line["line-color"]),"line-translate":new ln(qe.paint_line["line-translate"]),"line-translate-anchor":new ln(qe.paint_line["line-translate-anchor"]),"line-width":new mn(qe.paint_line["line-width"]),"line-gap-width":new mn(qe.paint_line["line-gap-width"]),"line-offset":new mn(qe.paint_line["line-offset"]),"line-blur":new mn(qe.paint_line["line-blur"]),"line-dasharray":new Dc(qe.paint_line["line-dasharray"]),"line-pattern":new Qa(qe.paint_line["line-pattern"]),"line-gradient":new vu(qe.paint_line["line-gradient"])})},get layout(){return yy=yy||new ji({"line-cap":new ln(qe.layout_line["line-cap"]),"line-join":new mn(qe.layout_line["line-join"]),"line-miter-limit":new ln(qe.layout_line["line-miter-limit"]),"line-round-limit":new ln(qe.layout_line["line-round-limit"]),"line-sort-key":new mn(qe.layout_line["line-sort-key"])})}};class Hp extends mn{possiblyEvaluate(t,a){return a=new Xr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(t,a)}evaluate(t,a,f,g){return a=ot({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(t,a,f,g)}}let ku;class kc extends _o{constructor(t){super(t,by),this.gradientVersion=0,ku||(ku=new Hp(by.paint.properties["line-width"].specification),ku.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Us,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,a){super.recalculate(t,a),this.paint._values["line-floorwidth"]=ku.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new lm(t)}queryRadius(t){const a=t,f=Gl(_d("line-width",this,a),_d("line-gap-width",this,a)),g=_d("line-offset",this,a);return f/2+Math.abs(g)+Gf(this.paint.get("line-translate"))}queryIntersectsFeature(t,a,f,g,N,S,T){const M=Wf(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,T),V=T/2*Gl(this.paint.get("line-width").evaluate(a,f),this.paint.get("line-gap-width").evaluate(a,f)),F=this.paint.get("line-offset").evaluate(a,f);return F&&(g=function(H,Y){const Q=[];for(let ee=0;ee<H.length;ee++){const ce=H[ee],ve=[];for(let be=0;be<ce.length;be++){const je=ce[be-1],Ne=ce[be],Le=ce[be+1],Fe=be===0?new W(0,0):Ne.sub(je)._unit()._perp(),nt=be===ce.length-1?new W(0,0):Le.sub(Ne)._unit()._perp(),Vt=Fe._add(nt)._unit(),Kt=Vt.x*nt.x+Vt.y*nt.y;Kt!==0&&Vt._mult(1/Kt),ve.push(Vt._mult(Y)._add(Ne))}Q.push(ve)}return Q}(g,F*T)),function(H,Y,Q){for(let ee=0;ee<Y.length;ee++){const ce=Y[ee];if(H.length>=3){for(let ve=0;ve<ce.length;ve++)if(ri(H,ce[ve]))return!0}if(x0(H,ce,Q))return!0}return!1}(M,g,V)}isTileClipped(){return!0}}function Gl(s,t){return t>0?t+2*s:s}const Ac=Rr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qh=Rr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Rr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hh=Rr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Rr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Wl=Rr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),P0=Rr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function j0(s,t,a){return s.sections.forEach(f=>{f.text=function(g,N,S){const T=N.layout.get("text-transform").evaluate(S,{});return T==="uppercase"?g=g.toLocaleUpperCase():T==="lowercase"&&(g=g.toLocaleLowerCase()),qs.applyArabicShaping&&(g=qs.applyArabicShaping(g)),g}(f.text,t,a)}),s}Rr([{name:"triangle",components:3,type:"Uint16"}]),Rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Rr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Rr([{type:"Float32",name:"offsetX"}]),Rr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Rr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Gh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var zi=24,Td=Ir,xy=function(s,t,a,f,g){var N,S,T=8*g-f-1,M=(1<<T)-1,V=M>>1,F=-7,H=g-1,Y=-1,Q=s[t+H];for(H+=Y,N=Q&(1<<-F)-1,Q>>=-F,F+=T;F>0;N=256*N+s[t+H],H+=Y,F-=8);for(S=N&(1<<-F)-1,N>>=-F,F+=f;F>0;S=256*S+s[t+H],H+=Y,F-=8);if(N===0)N=1-V;else{if(N===M)return S?NaN:1/0*(Q?-1:1);S+=Math.pow(2,f),N-=V}return(Q?-1:1)*S*Math.pow(2,N-f)},Gp=function(s,t,a,f,g,N){var S,T,M,V=8*N-g-1,F=(1<<V)-1,H=F>>1,Y=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,ee=1,ce=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(T=isNaN(t)?1:0,S=F):(S=Math.floor(Math.log(t)/Math.LN2),t*(M=Math.pow(2,-S))<1&&(S--,M*=2),(t+=S+H>=1?Y/M:Y*Math.pow(2,1-H))*M>=2&&(S++,M/=2),S+H>=F?(T=0,S=F):S+H>=1?(T=(t*M-1)*Math.pow(2,g),S+=H):(T=t*Math.pow(2,H-1)*Math.pow(2,g),S=0));g>=8;s[a+Q]=255&T,Q+=ee,T/=256,g-=8);for(S=S<<g|T,V+=g;V>0;s[a+Q]=255&S,Q+=ee,S/=256,V-=8);s[a+Q-ee]|=128*ce};function Ir(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var Pd=4294967296,Wp=1/Pd,_y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $o(s){return s.type===Ir.Bytes?s.readVarint()+s.pos:s.pos+1}function sl(s,t,a){return a?4294967296*t+(s>>>0):4294967296*(t>>>0)+(s>>>0)}function Au(s,t,a){var f=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(f);for(var g=a.pos-1;g>=s;g--)a.buf[g+f]=a.buf[g]}function Zp(s,t){for(var a=0;a<s.length;a++)t.writeVarint(s[a])}function wy(s,t){for(var a=0;a<s.length;a++)t.writeSVarint(s[a])}function k0(s,t){for(var a=0;a<s.length;a++)t.writeFloat(s[a])}function A0(s,t){for(var a=0;a<s.length;a++)t.writeDouble(s[a])}function M0(s,t){for(var a=0;a<s.length;a++)t.writeBoolean(s[a])}function R0(s,t){for(var a=0;a<s.length;a++)t.writeFixed32(s[a])}function Kp(s,t){for(var a=0;a<s.length;a++)t.writeSFixed32(s[a])}function L0(s,t){for(var a=0;a<s.length;a++)t.writeFixed64(s[a])}function cm(s,t){for(var a=0;a<s.length;a++)t.writeSFixed64(s[a])}function jd(s,t){return(s[t]|s[t+1]<<8|s[t+2]<<16)+16777216*s[t+3]}function Mu(s,t,a){s[a]=t,s[a+1]=t>>>8,s[a+2]=t>>>16,s[a+3]=t>>>24}function Cy(s,t){return(s[t]|s[t+1]<<8|s[t+2]<<16)+(s[t+3]<<24)}Ir.prototype={destroy:function(){this.buf=null},readFields:function(s,t,a){for(a=a||this.length;this.pos<a;){var f=this.readVarint(),g=f>>3,N=this.pos;this.type=7&f,s(g,t,this),this.pos===N&&this.skip(f)}return t},readMessage:function(s,t){return this.readFields(s,t,this.readVarint()+this.pos)},readFixed32:function(){var s=jd(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Cy(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=jd(this.buf,this.pos)+jd(this.buf,this.pos+4)*Pd;return this.pos+=8,s},readSFixed64:function(){var s=jd(this.buf,this.pos)+Cy(this.buf,this.pos+4)*Pd;return this.pos+=8,s},readFloat:function(){var s=xy(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=xy(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var t,a,f=this.buf;return t=127&(a=f[this.pos++]),a<128?t:(t|=(127&(a=f[this.pos++]))<<7,a<128?t:(t|=(127&(a=f[this.pos++]))<<14,a<128?t:(t|=(127&(a=f[this.pos++]))<<21,a<128?t:function(g,N,S){var T,M,V=S.buf;if(T=(112&(M=V[S.pos++]))>>4,M<128||(T|=(127&(M=V[S.pos++]))<<3,M<128)||(T|=(127&(M=V[S.pos++]))<<10,M<128)||(T|=(127&(M=V[S.pos++]))<<17,M<128)||(T|=(127&(M=V[S.pos++]))<<24,M<128)||(T|=(1&(M=V[S.pos++]))<<31,M<128))return sl(g,T,N);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=f[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,t=this.pos;return this.pos=s,s-t>=12&&_y?function(a,f,g){return _y.decode(a.subarray(f,g))}(this.buf,t,s):function(a,f,g){for(var N="",S=f;S<g;){var T,M,V,F=a[S],H=null,Y=F>239?4:F>223?3:F>191?2:1;if(S+Y>g)break;Y===1?F<128&&(H=F):Y===2?(192&(T=a[S+1]))==128&&(H=(31&F)<<6|63&T)<=127&&(H=null):Y===3?(M=a[S+2],(192&(T=a[S+1]))==128&&(192&M)==128&&((H=(15&F)<<12|(63&T)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(M=a[S+2],V=a[S+3],(192&(T=a[S+1]))==128&&(192&M)==128&&(192&V)==128&&((H=(15&F)<<18|(63&T)<<12|(63&M)<<6|63&V)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,N+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),N+=String.fromCharCode(H),S+=Y}return N}(this.buf,t,s)},readBytes:function(){var s=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,s);return this.pos=s,t},readPackedVarint:function(s,t){if(this.type!==Ir.Bytes)return s.push(this.readVarint(t));var a=$o(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(t));return s},readPackedSVarint:function(s){if(this.type!==Ir.Bytes)return s.push(this.readSVarint());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Ir.Bytes)return s.push(this.readBoolean());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Ir.Bytes)return s.push(this.readFloat());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Ir.Bytes)return s.push(this.readDouble());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Ir.Bytes)return s.push(this.readFixed32());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Ir.Bytes)return s.push(this.readSFixed32());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Ir.Bytes)return s.push(this.readFixed64());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Ir.Bytes)return s.push(this.readSFixed64());var t=$o(this);for(s=s||[];this.pos<t;)s.push(this.readSFixed64());return s},skip:function(s){var t=7&s;if(t===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ir.Fixed32)this.pos+=4;else{if(t!==Ir.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(s,t){this.writeVarint(s<<3|t)},realloc:function(s){for(var t=this.length||16;t<this.pos+s;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Mu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Mu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Mu(this.buf,-1&s,this.pos),Mu(this.buf,Math.floor(s*Wp),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Mu(this.buf,-1&s,this.pos),Mu(this.buf,Math.floor(s*Wp),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(t,a){var f,g;if(t>=0?(f=t%4294967296|0,g=t/4294967296|0):(g=~(-t/4294967296),4294967295^(f=~(-t%4294967296))?f=f+1|0:(f=0,g=g+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(N,S,T){T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,T.buf[T.pos]=127&(N>>>=7)}(f,0,a),function(N,S){var T=(7&N)<<4;S.buf[S.pos++]|=T|((N>>>=3)?128:0),N&&(S.buf[S.pos++]=127&N|((N>>>=7)?128:0),N&&(S.buf[S.pos++]=127&N|((N>>>=7)?128:0),N&&(S.buf[S.pos++]=127&N|((N>>>=7)?128:0),N&&(S.buf[S.pos++]=127&N|((N>>>=7)?128:0),N&&(S.buf[S.pos++]=127&N)))))}(g,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var t=this.pos;this.pos=function(f,g,N){for(var S,T,M=0;M<g.length;M++){if((S=g.charCodeAt(M))>55295&&S<57344){if(!T){S>56319||M+1===g.length?(f[N++]=239,f[N++]=191,f[N++]=189):T=S;continue}if(S<56320){f[N++]=239,f[N++]=191,f[N++]=189,T=S;continue}S=T-55296<<10|S-56320|65536,T=null}else T&&(f[N++]=239,f[N++]=191,f[N++]=189,T=null);S<128?f[N++]=S:(S<2048?f[N++]=S>>6|192:(S<65536?f[N++]=S>>12|224:(f[N++]=S>>18|240,f[N++]=S>>12&63|128),f[N++]=S>>6&63|128),f[N++]=63&S|128)}return N}(this.buf,s,this.pos);var a=this.pos-t;a>=128&&Au(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),Gp(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Gp(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var t=s.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,t){this.pos++;var a=this.pos;s(t,this);var f=this.pos-a;f>=128&&Au(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f},writeMessage:function(s,t,a){this.writeTag(s,Ir.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(s,t){t.length&&this.writeMessage(s,Zp,t)},writePackedSVarint:function(s,t){t.length&&this.writeMessage(s,wy,t)},writePackedBoolean:function(s,t){t.length&&this.writeMessage(s,M0,t)},writePackedFloat:function(s,t){t.length&&this.writeMessage(s,k0,t)},writePackedDouble:function(s,t){t.length&&this.writeMessage(s,A0,t)},writePackedFixed32:function(s,t){t.length&&this.writeMessage(s,R0,t)},writePackedSFixed32:function(s,t){t.length&&this.writeMessage(s,Kp,t)},writePackedFixed64:function(s,t){t.length&&this.writeMessage(s,L0,t)},writePackedSFixed64:function(s,t){t.length&&this.writeMessage(s,cm,t)},writeBytesField:function(s,t){this.writeTag(s,Ir.Bytes),this.writeBytes(t)},writeFixed32Field:function(s,t){this.writeTag(s,Ir.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(s,t){this.writeTag(s,Ir.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(s,t){this.writeTag(s,Ir.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(s,t){this.writeTag(s,Ir.Fixed64),this.writeSFixed64(t)},writeVarintField:function(s,t){this.writeTag(s,Ir.Varint),this.writeVarint(t)},writeSVarintField:function(s,t){this.writeTag(s,Ir.Varint),this.writeSVarint(t)},writeStringField:function(s,t){this.writeTag(s,Ir.Bytes),this.writeString(t)},writeFloatField:function(s,t){this.writeTag(s,Ir.Fixed32),this.writeFloat(t)},writeDoubleField:function(s,t){this.writeTag(s,Ir.Fixed64),this.writeDouble(t)},writeBooleanField:function(s,t){this.writeVarintField(s,!!t)}};var Yp=k(Td);const Xp=3;function I0(s,t,a){s===1&&a.readMessage(Wh,t)}function Wh(s,t,a){if(s===3){const{id:f,bitmap:g,width:N,height:S,left:T,top:M,advance:V}=a.readMessage(Jp,{});t.push({id:f,bitmap:new wu({width:N+2*Xp,height:S+2*Xp},g),metrics:{width:N,height:S,left:T,top:M,advance:V}})}}function Jp(s,t,a){s===1?t.id=a.readVarint():s===2?t.bitmap=a.readBytes():s===3?t.width=a.readVarint():s===4?t.height=a.readVarint():s===5?t.left=a.readSVarint():s===6?t.top=a.readSVarint():s===7&&(t.advance=a.readVarint())}const kd=Xp;function Ny(s){let t=0,a=0;for(const S of s)t+=S.w*S.h,a=Math.max(a,S.w);s.sort((S,T)=>T.h-S.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let g=0,N=0;for(const S of s)for(let T=f.length-1;T>=0;T--){const M=f[T];if(!(S.w>M.w||S.h>M.h)){if(S.x=M.x,S.y=M.y,N=Math.max(N,S.y+S.h),g=Math.max(g,S.x+S.w),S.w===M.w&&S.h===M.h){const V=f.pop();T<f.length&&(f[T]=V)}else S.h===M.h?(M.x+=S.w,M.w-=S.w):S.w===M.w?(M.y+=S.h,M.h-=S.h):(f.push({x:M.x+S.w,y:M.y,w:M.w-S.w,h:S.h}),M.y+=S.h,M.h-=S.h);break}}return{w:g,h:N,fill:t/(g*N)||0}}const eo=1;class um{constructor(t,{pixelRatio:a,version:f,stretchX:g,stretchY:N,content:S}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=g,this.stretchY=N,this.content=S,this.version=f}get tl(){return[this.paddedRect.x+eo,this.paddedRect.y+eo]}get br(){return[this.paddedRect.x+this.paddedRect.w-eo,this.paddedRect.y+this.paddedRect.h-eo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*eo)/this.pixelRatio,(this.paddedRect.h-2*eo)/this.pixelRatio]}}class Qp{constructor(t,a){const f={},g={};this.haveRenderCallbacks=[];const N=[];this.addImages(t,f,N),this.addImages(a,g,N);const{w:S,h:T}=Ny(N),M=new Qs({width:S||1,height:T||1});for(const V in t){const F=t[V],H=f[V].paddedRect;Qs.copy(F.data,M,{x:0,y:0},{x:H.x+eo,y:H.y+eo},F.data)}for(const V in a){const F=a[V],H=g[V].paddedRect,Y=H.x+eo,Q=H.y+eo,ee=F.data.width,ce=F.data.height;Qs.copy(F.data,M,{x:0,y:0},{x:Y,y:Q},F.data),Qs.copy(F.data,M,{x:0,y:ce-1},{x:Y,y:Q-1},{width:ee,height:1}),Qs.copy(F.data,M,{x:0,y:0},{x:Y,y:Q+ce},{width:ee,height:1}),Qs.copy(F.data,M,{x:ee-1,y:0},{x:Y-1,y:Q},{width:1,height:ce}),Qs.copy(F.data,M,{x:0,y:0},{x:Y+ee,y:Q},{width:1,height:ce})}this.image=M,this.iconPositions=f,this.patternPositions=g}addImages(t,a,f){for(const g in t){const N=t[g],S={x:0,y:0,w:N.data.width+2*eo,h:N.data.height+2*eo};f.push(S),a[g]=new um(S,N),N.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,a){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in t.updatedImages)this.patchUpdatedImage(this.iconPositions[f],t.getImage(f),a),this.patchUpdatedImage(this.patternPositions[f],t.getImage(f),a)}patchUpdatedImage(t,a,f){if(!t||!a||t.version===a.version)return;t.version=a.version;const[g,N]=t.tl;f.update(a.data,void 0,{x:g,y:N})}}var ka;qt("ImagePosition",um),qt("ImageAtlas",Qp),u.ai=void 0,(ka=u.ai||(u.ai={}))[ka.none=0]="none",ka[ka.horizontal=1]="horizontal",ka[ka.vertical=2]="vertical",ka[ka.horizontalOnly=3]="horizontalOnly";const Mc=-17;class Ad{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,a){const f=new Ad;return f.scale=t||1,f.fontStack=a,f}static forImage(t){const a=new Ad;return a.imageName=t,a}}class vs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const f=new vs;for(let g=0;g<t.sections.length;g++){const N=t.sections[g];N.image?f.addImageSection(N):f.addTextSection(N,a)}return f}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let a="";for(let f=0;f<t.length;f++){const g=t.charCodeAt(f+1)||null,N=t.charCodeAt(f-1)||null;a+=g&&zf(g)&&!Gh[t[f+1]]||N&&zf(N)&&!Gh[t[f-1]]||!Gh[t[f]]?t[f]:Gh[t[f]]}return a}(this.text)}trim(){let t=0;for(let f=0;f<this.text.length&&Md[this.text.charCodeAt(f)];f++)t++;let a=this.text.length;for(let f=this.text.length-1;f>=0&&f>=t&&Md[this.text.charCodeAt(f)];f--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const f=new vs;return f.text=this.text.substring(t,a),f.sectionIndex=this.sectionIndex.slice(t,a),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}addTextSection(t,a){this.text+=t.text,this.sections.push(Ad.forText(t.scale,t.fontStack||a));const f=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(f)}addImageSection(t){const a=t.image?t.image.name:"";if(a.length===0)return void Nt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Ad.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Nt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zl(s,t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee,ce){const ve=vs.fromFeature(s,g);let be;H===u.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:je,processStyledBidirectionalText:Ne}=qs;if(je&&ve.sections.length===1){be=[];const nt=je(ve.toString(),Ld(ve,V,N,t,f,Q,ee));for(const Vt of nt){const Kt=new vs;Kt.text=Vt,Kt.sections=ve.sections;for(let Ot=0;Ot<Vt.length;Ot++)Kt.sectionIndex.push(0);be.push(Kt)}}else if(Ne){be=[];const nt=Ne(ve.text,ve.sectionIndex,Ld(ve,V,N,t,f,Q,ee));for(const Vt of nt){const Kt=new vs;Kt.text=Vt[0],Kt.sectionIndex=Vt[1],Kt.sections=ve.sections,be.push(Kt)}}else be=function(nt,Vt){const Kt=[],Ot=nt.text;let At=0;for(const Et of Vt)Kt.push(nt.substring(At,Et)),At=Et;return At<Ot.length&&Kt.push(nt.substring(At,Ot.length)),Kt}(ve,Ld(ve,V,N,t,f,Q,ee));const Le=[],Fe={positionedLines:Le,text:ve.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(nt,Vt,Kt,Ot,At,Et,xt,Dt,ut,un,Qt,$n){let Or=0,Vr=Mc,Ui=0,Ds=0;const $i=Dt==="right"?1:Dt==="left"?0:.5;let Oi=0;for(const hi of At){hi.trim();const Ci=hi.getMaxScale(),Ni=(Ci-1)*zi,Ts={positionedGlyphs:[],lineOffset:0};nt.positionedLines[Oi]=Ts;const Mi=Ts.positionedGlyphs;let qi=0;if(!hi.length()){Vr+=Et,++Oi;continue}for(let Ri=0;Ri<hi.length();Ri++){const Kn=hi.getSection(Ri),Hi=hi.getSectionIndex(Ri),cs=hi.getCharCode(Ri);let Si=0,qo=null,la=null,Aa=null,Kl=zi;const to=!(ut===u.ai.horizontal||!Qt&&!kh(cs)||Qt&&(Md[cs]||(es=cs,It.Arabic(es)||It["Arabic Supplement"](es)||It["Arabic Extended-A"](es)||It["Arabic Presentation Forms-A"](es)||It["Arabic Presentation Forms-B"](es))));if(Kn.imageName){const Zs=Ot[Kn.imageName];if(!Zs)continue;Aa=Kn.imageName,nt.iconsInText=nt.iconsInText||!0,la=Zs.paddedRect;const Ks=Zs.displaySize;Kn.scale=Kn.scale*zi/$n,qo={width:Ks[0],height:Ks[1],left:eo,top:-kd,advance:to?Ks[1]:Ks[0]},Si=Ni+(zi-Ks[1]*Kn.scale),Kl=qo.advance;const Yl=to?Ks[0]*Kn.scale-zi*Ci:Ks[1]*Kn.scale-zi*Ci;Yl>0&&Yl>qi&&(qi=Yl)}else{const Zs=Kt[Kn.fontStack],Ks=Zs&&Zs[cs];if(Ks&&Ks.rect)la=Ks.rect,qo=Ks.metrics;else{const Yl=Vt[Kn.fontStack],Vc=Yl&&Yl[cs];if(!Vc)continue;qo=Vc.metrics}Si=(Ci-Kn.scale)*zi}to?(nt.verticalizable=!0,Mi.push({glyph:cs,imageName:Aa,x:Or,y:Vr+Si,vertical:to,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:Hi,metrics:qo,rect:la}),Or+=Kl*Kn.scale+un):(Mi.push({glyph:cs,imageName:Aa,x:Or,y:Vr+Si,vertical:to,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:Hi,metrics:qo,rect:la}),Or+=qo.advance*Kn.scale+un)}Mi.length!==0&&(Ui=Math.max(Or-un,Ui),V0(Mi,0,Mi.length-1,$i,qi)),Or=0;const xs=Et*Ci+qi;Ts.lineOffset=Math.max(qi,Ni),Vr+=xs,Ds=Math.max(xs,Ds),++Oi}var es;const bs=Vr-Mc,{horizontalAlign:Ws,verticalAlign:Hr}=hm(xt);(function(hi,Ci,Ni,Ts,Mi,qi,xs,Ri,Kn){const Hi=(Ci-Ni)*Mi;let cs=0;cs=qi!==xs?-Ri*Ts-Mc:(-Ts*Kn+.5)*xs;for(const Si of hi)for(const qo of Si.positionedGlyphs)qo.x+=Hi,qo.y+=cs})(nt.positionedLines,$i,Ws,Hr,Ui,Ds,Et,bs,At.length),nt.top+=-Hr*bs,nt.bottom=nt.top+bs,nt.left+=-Ws*Ui,nt.right=nt.left+Ui}(Fe,t,a,f,be,S,T,M,H,V,Y,ce),!function(nt){for(const Vt of nt)if(Vt.positionedGlyphs.length!==0)return!1;return!0}(Le)&&Fe}const Md={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Zh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Sy(s,t,a,f,g,N){if(t.imageName){const S=f[t.imageName];return S?S.displaySize[0]*t.scale*zi/N+g:0}{const S=a[t.fontStack],T=S&&S[s];return T?T.metrics.advance*t.scale+g:0}}function dm(s,t,a,f){const g=Math.pow(s-t,2);return f?s<t?g/2:2*g:g+Math.abs(a)*a}function eg(s,t,a){let f=0;return s===10&&(f-=1e4),a&&(f+=150),s!==40&&s!==65288||(f+=50),t!==41&&t!==65289||(f+=50),f}function Rd(s,t,a,f,g,N){let S=null,T=dm(t,a,g,N);for(const M of f){const V=dm(t-M.x,a,g,N)+M.badness;V<=T&&(S=M,T=V)}return{index:s,x:t,priorBreak:S,badness:T}}function Ey(s){return s?Ey(s.priorBreak).concat(s.index):[]}function Ld(s,t,a,f,g,N,S){if(N!=="point")return[];if(!s)return[];const T=[],M=function(Y,Q,ee,ce,ve,be){let je=0;for(let Ne=0;Ne<Y.length();Ne++){const Le=Y.getSection(Ne);je+=Sy(Y.getCharCode(Ne),Le,ce,ve,Q,be)}return je/Math.max(1,Math.ceil(je/ee))}(s,t,a,f,g,S),V=s.text.indexOf("​")>=0;let F=0;for(let Y=0;Y<s.length();Y++){const Q=s.getSection(Y),ee=s.getCharCode(Y);if(Md[ee]||(F+=Sy(ee,Q,f,g,t,S)),Y<s.length()-1){const ce=!((H=ee)<11904||!(It["Bopomofo Extended"](H)||It.Bopomofo(H)||It["CJK Compatibility Forms"](H)||It["CJK Compatibility Ideographs"](H)||It["CJK Compatibility"](H)||It["CJK Radicals Supplement"](H)||It["CJK Strokes"](H)||It["CJK Symbols and Punctuation"](H)||It["CJK Unified Ideographs Extension A"](H)||It["CJK Unified Ideographs"](H)||It["Enclosed CJK Letters and Months"](H)||It["Halfwidth and Fullwidth Forms"](H)||It.Hiragana(H)||It["Ideographic Description Characters"](H)||It["Kangxi Radicals"](H)||It["Katakana Phonetic Extensions"](H)||It.Katakana(H)||It["Vertical Forms"](H)||It["Yi Radicals"](H)||It["Yi Syllables"](H)));(Zh[ee]||ce||Q.imageName)&&T.push(Rd(Y+1,F,M,T,eg(ee,s.getCharCode(Y+1),ce&&V),!1))}}var H;return Ey(Rd(s.length(),F,M,T,0,!0))}function hm(s){let t=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function V0(s,t,a,f,g){if(!f&&!g)return;const N=s[a],S=(s[a].x+N.metrics.advance*N.scale)*f;for(let T=t;T<=a;T++)s[T].x-=S,s[T].y+=g}function z0(s,t,a){const{horizontalAlign:f,verticalAlign:g}=hm(a),N=t[0]-s.displaySize[0]*f,S=t[1]-s.displaySize[1]*g;return{image:s,top:S,bottom:S+s.displaySize[1],left:N,right:N+s.displaySize[0]}}function Dy(s,t,a,f,g,N){const S=s.image;let T;if(S.content){const ve=S.content,be=S.pixelRatio||1;T=[ve[0]/be,ve[1]/be,S.displaySize[0]-ve[2]/be,S.displaySize[1]-ve[3]/be]}const M=t.left*N,V=t.right*N;let F,H,Y,Q;a==="width"||a==="both"?(Q=g[0]+M-f[3],H=g[0]+V+f[1]):(Q=g[0]+(M+V-S.displaySize[0])/2,H=Q+S.displaySize[0]);const ee=t.top*N,ce=t.bottom*N;return a==="height"||a==="both"?(F=g[1]+ee-f[0],Y=g[1]+ce+f[2]):(F=g[1]+(ee+ce-S.displaySize[1])/2,Y=F+S.displaySize[1]),{image:S,top:F,right:H,bottom:Y,left:Q,collisionPadding:T}}const Ru=255,ol=128,Rc=Ru*ol;function Ty(s,t){const{expression:a}=t;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Xr(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=a;let N=0;for(;N<f.length&&f[N]<=s;)N++;N=Math.max(0,N-1);let S=N;for(;S<f.length&&f[S]<s+1;)S++;S=Math.min(f.length-1,S);const T=f[N],M=f[S];return a.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:T,maxZoom:M,minSize:a.evaluate(new Xr(T)),maxSize:a.evaluate(new Xr(M)),interpolationType:g}}}function tg(s,t,a){let f="never";const g=s.get(t);return g?f=g:s.get(a)&&(f="always"),f}const O0=il.VectorTileFeature.types,Py=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fm(s,t,a,f,g,N,S,T,M,V,F,H,Y){const Q=T?Math.min(Rc,Math.round(T[0])):0,ee=T?Math.min(Rc,Math.round(T[1])):0;s.emplaceBack(t,a,Math.round(32*f),Math.round(32*g),N,S,(Q<<1)+(M?1:0),ee,16*V,16*F,256*H,256*Y)}function ng(s,t,a){s.emplaceBack(t.x,t.y,a),s.emplaceBack(t.x,t.y,a),s.emplaceBack(t.x,t.y,a),s.emplaceBack(t.x,t.y,a)}function B0(s){for(const t of s.sections)if(Ah(t.text))return!0;return!1}class rg{constructor(t){this.layoutVertexArray=new Zn,this.indexArray=new mr,this.programConfigurations=t,this.segments=new _r,this.dynamicLayoutVertexArray=new Rn,this.opacityVertexArray=new Xn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Te}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,a,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ac.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,qh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Py,!0),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qt("SymbolBuffers",rg);class ig{constructor(t,a,f){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new f,this.segments=new _r,this.collisionVertexArray=new qr}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qt("CollisionBuffers",ig);class Id{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(S=>S.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Pc([]),this.placementViewportMatrix=Pc([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ty(this.zoom,a["text-size"]),this.iconSizeData=Ty(this.zoom,a["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),N=f.get("symbol-z-order");this.canOverlap=tg(f,"text-overlap","text-allow-overlap")!=="never"||tg(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=N!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(N==="viewport-y"||N==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(S=>u.ai[S])),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=t.sourceID}createArrays(){this.text=new rg(new Pa(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new rg(new Pa(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Pe,this.lineVertexArray=new Be,this.symbolInstances=new ye,this.textAnchorOffsets=new tt}calculateGlyphDependencies(t,a,f,g,N){for(let S=0;S<t.length;S++)if(a[t.charCodeAt(S)]=!0,(f||g)&&N){const T=Gh[t.charAt(S)];T&&(a[T.charCodeAt(0)]=!0)}}populate(t,a,f){const g=this.layers[0],N=g.layout,S=N.get("text-font"),T=N.get("text-field"),M=N.get("icon-image"),V=(T.value.kind!=="constant"||T.value.value instanceof Ii&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),F=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,H=N.get("symbol-sort-key");if(this.features=[],!V&&!F)return;const Y=a.iconDependencies,Q=a.glyphDependencies,ee=a.availableImages,ce=new Xr(this.zoom);for(const{feature:ve,id:be,index:je,sourceLayerIndex:Ne}of t){const Le=g._featureFilter.needGeometry,Fe=_u(ve,Le);if(!g._featureFilter.filter(ce,Fe,f))continue;let nt,Vt;if(Le||(Fe.geometry=xu(ve)),V){const Ot=g.getValueAndResolveTokens("text-field",Fe,f,ee),At=Ii.factory(Ot);B0(At)&&(this.hasRTLText=!0),(!this.hasRTLText||gu()==="unavailable"||this.hasRTLText&&qs.isParsed())&&(nt=j0(At,g,Fe))}if(F){const Ot=g.getValueAndResolveTokens("icon-image",Fe,f,ee);Vt=Ot instanceof Vi?Ot:Vi.fromString(Ot)}if(!nt&&!Vt)continue;const Kt=this.sortFeaturesByKey?H.evaluate(Fe,{},f):void 0;if(this.features.push({id:be,text:nt,icon:Vt,index:je,sourceLayerIndex:Ne,geometry:Fe.geometry,properties:ve.properties,type:O0[ve.type],sortKey:Kt}),Vt&&(Y[Vt.name]=!0),nt){const Ot=S.evaluate(Fe,{},f).join(","),At=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ai.vertical)>=0;for(const Et of nt.sections)if(Et.image)Y[Et.image.name]=!0;else{const xt=Rl(nt.toString()),Dt=Et.fontStack||Ot,ut=Q[Dt]=Q[Dt]||{};this.calculateGlyphDependencies(Et.text,ut,At,this.allowVerticalPlacement,xt)}}}N.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},je={},Ne=[];let Le=0;function Fe(Ot){Ne.push(ve[Ot]),Le++}function nt(Ot,At,Et){const xt=je[Ot];return delete je[Ot],je[At]=xt,Ne[xt].geometry[0].pop(),Ne[xt].geometry[0]=Ne[xt].geometry[0].concat(Et[0]),xt}function Vt(Ot,At,Et){const xt=be[At];return delete be[At],be[Ot]=xt,Ne[xt].geometry[0].shift(),Ne[xt].geometry[0]=Et[0].concat(Ne[xt].geometry[0]),xt}function Kt(Ot,At,Et){const xt=Et?At[0][At[0].length-1]:At[0][0];return`${Ot}:${xt.x}:${xt.y}`}for(let Ot=0;Ot<ve.length;Ot++){const At=ve[Ot],Et=At.geometry,xt=At.text?At.text.toString():null;if(!xt){Fe(Ot);continue}const Dt=Kt(xt,Et),ut=Kt(xt,Et,!0);if(Dt in je&&ut in be&&je[Dt]!==be[ut]){const un=Vt(Dt,ut,Et),Qt=nt(Dt,ut,Ne[un].geometry);delete be[Dt],delete je[ut],je[Kt(xt,Ne[Qt].geometry,!0)]=Qt,Ne[un].geometry=null}else Dt in je?nt(Dt,ut,Et):ut in be?Vt(Dt,ut,Et):(Fe(Ot),be[Dt]=Le-1,je[ut]=Le-1)}return Ne.filter(Ot=>Ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(t,a,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,f),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const f=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(a[t.segment+1]),N=t.dist(a[t.segment]);const S={};for(let T=t.segment+1;T<a.length;T++)S[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:g},T<a.length-1&&(g+=a[T+1].dist(a[T]));for(let T=t.segment||0;T>=0;T--)S[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:N},T>0&&(N+=a[T-1].dist(a[T]));for(let T=0;T<a.length;T++){const M=S[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(t,a,f,g,N,S,T,M,V,F,H,Y){const Q=t.indexArray,ee=t.layoutVertexArray,ce=t.segments.prepareSegment(4*a.length,ee,Q,this.canOverlap?S.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ce.vertexLength,je=this.allowVerticalPlacement&&T===u.ai.vertical?Math.PI/2:0,Ne=S.text&&S.text.sections;for(let Le=0;Le<a.length;Le++){const{tl:Fe,tr:nt,bl:Vt,br:Kt,tex:Ot,pixelOffsetTL:At,pixelOffsetBR:Et,minFontScaleX:xt,minFontScaleY:Dt,glyphOffset:ut,isSDF:un,sectionIndex:Qt}=a[Le],$n=ce.vertexLength,Or=ut[1];fm(ee,M.x,M.y,Fe.x,Or+Fe.y,Ot.x,Ot.y,f,un,At.x,At.y,xt,Dt),fm(ee,M.x,M.y,nt.x,Or+nt.y,Ot.x+Ot.w,Ot.y,f,un,Et.x,At.y,xt,Dt),fm(ee,M.x,M.y,Vt.x,Or+Vt.y,Ot.x,Ot.y+Ot.h,f,un,At.x,Et.y,xt,Dt),fm(ee,M.x,M.y,Kt.x,Or+Kt.y,Ot.x+Ot.w,Ot.y+Ot.h,f,un,Et.x,Et.y,xt,Dt),ng(t.dynamicLayoutVertexArray,M,je),Q.emplaceBack($n,$n+1,$n+2),Q.emplaceBack($n+1,$n+2,$n+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),Le!==a.length-1&&Qt===a[Le+1].sectionIndex||t.programConfigurations.populatePaintArrays(ee.length,S,S.index,{},Y,Ne&&Ne[Qt])}t.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,be,V,F,M.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],T,0,!1,0,H)}_addCollisionDebugVertex(t,a,f,g,N,S){return a.emplaceBack(0,0),t.emplaceBack(f.x,f.y,g,N,Math.round(S.x),Math.round(S.y))}addCollisionDebugVertices(t,a,f,g,N,S,T){const M=N.segments.prepareSegment(4,N.layoutVertexArray,N.indexArray),V=M.vertexLength,F=N.layoutVertexArray,H=N.collisionVertexArray,Y=T.anchorX,Q=T.anchorY;this._addCollisionDebugVertex(F,H,S,Y,Q,new W(t,a)),this._addCollisionDebugVertex(F,H,S,Y,Q,new W(f,a)),this._addCollisionDebugVertex(F,H,S,Y,Q,new W(f,g)),this._addCollisionDebugVertex(F,H,S,Y,Q,new W(t,g)),M.vertexLength+=4;const ee=N.indexArray;ee.emplaceBack(V,V+1),ee.emplaceBack(V+1,V+2),ee.emplaceBack(V+2,V+3),ee.emplaceBack(V+3,V),M.primitiveLength+=4}addDebugCollisionBoxes(t,a,f,g){for(let N=t;N<a;N++){const S=this.collisionBoxArray.get(N);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,g?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ig(xi,Wl.members,Bi),this.iconCollisionBox=new ig(xi,Wl.members,Bi);for(let t=0;t<this.symbolInstances.length;t++){const a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(t,a,f,g,N,S,T,M,V){const F={};for(let H=a;H<f;H++){const Y=t.get(H);F.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.textFeatureIndex=Y.featureIndex;break}for(let H=g;H<N;H++){const Y=t.get(H);F.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=S;H<T;H++){const Y=t.get(H);F.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.iconFeatureIndex=Y.featureIndex;break}for(let H=M;H<V;H++){const Y=t.get(H);F.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalIconFeatureIndex=Y.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,a){const f=t.placedSymbolArray.get(a),g=f.vertexStartIndex+4*f.numGlyphs;for(let N=f.vertexStartIndex;N<g;N+=4)t.indexArray.emplaceBack(N,N+1,N+2),t.indexArray.emplaceBack(N+1,N+2,N+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(t),f=Math.cos(t),g=[],N=[],S=[];for(let T=0;T<this.symbolInstances.length;++T){S.push(T);const M=this.symbolInstances.get(T);g.push(0|Math.round(a*M.anchorX+f*M.anchorY)),N.push(M.featureIndex)}return S.sort((T,M)=>g[T]-g[M]||N[M]-N[T]),S}addToSortKeyRanges(t,a){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===a?f.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const f=this.symbolInstances.get(a);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((g,N,S)=>{g>=0&&S.indexOf(g)===N&&this.addIndicesForPlacedSymbol(this.text,g)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mm,jy;qt("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=ng;var sg={get paint(){return jy=jy||new ji({"icon-opacity":new mn(qe.paint_symbol["icon-opacity"]),"icon-color":new mn(qe.paint_symbol["icon-color"]),"icon-halo-color":new mn(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new mn(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mn(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new ln(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new ln(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new mn(qe.paint_symbol["text-opacity"]),"text-color":new mn(qe.paint_symbol["text-color"],{runtimeType:nr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new mn(qe.paint_symbol["text-halo-color"]),"text-halo-width":new mn(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new mn(qe.paint_symbol["text-halo-blur"]),"text-translate":new ln(qe.paint_symbol["text-translate"]),"text-translate-anchor":new ln(qe.paint_symbol["text-translate-anchor"])})},get layout(){return mm=mm||new ji({"symbol-placement":new ln(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new ln(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ln(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mn(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ln(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ln(qe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ln(qe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ln(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new ln(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ln(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new mn(qe.layout_symbol["icon-size"]),"icon-text-fit":new ln(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ln(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new mn(qe.layout_symbol["icon-image"]),"icon-rotate":new mn(qe.layout_symbol["icon-rotate"]),"icon-padding":new mn(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new ln(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new mn(qe.layout_symbol["icon-offset"]),"icon-anchor":new mn(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ln(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ln(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ln(qe.layout_symbol["text-rotation-alignment"]),"text-field":new mn(qe.layout_symbol["text-field"]),"text-font":new mn(qe.layout_symbol["text-font"]),"text-size":new mn(qe.layout_symbol["text-size"]),"text-max-width":new mn(qe.layout_symbol["text-max-width"]),"text-line-height":new ln(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new mn(qe.layout_symbol["text-letter-spacing"]),"text-justify":new mn(qe.layout_symbol["text-justify"]),"text-radial-offset":new mn(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ln(qe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mn(qe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mn(qe.layout_symbol["text-anchor"]),"text-max-angle":new ln(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new ln(qe.layout_symbol["text-writing-mode"]),"text-rotate":new mn(qe.layout_symbol["text-rotate"]),"text-padding":new ln(qe.layout_symbol["text-padding"]),"text-keep-upright":new ln(qe.layout_symbol["text-keep-upright"]),"text-transform":new mn(qe.layout_symbol["text-transform"]),"text-offset":new mn(qe.layout_symbol["text-offset"]),"text-allow-overlap":new ln(qe.layout_symbol["text-allow-overlap"]),"text-overlap":new ln(qe.layout_symbol["text-overlap"]),"text-ignore-placement":new ln(qe.layout_symbol["text-ignore-placement"]),"text-optional":new ln(qe.layout_symbol["text-optional"])})}};class ky{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:pr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qt("FormatSectionOverride",ky,{omit:["defaultValue"]});class Kh extends _o{constructor(t){super(t,sg)}recalculate(t,a){if(super.recalculate(t,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const N of f)g.indexOf(N)<0&&g.push(N);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,a,f,g){const N=this.layout.get(t).evaluate(a,{},f,g),S=this._unevaluatedLayout._values[t];return S.isDataDriven()||as(S.value)||!N?N:function(T,M){return M.replace(/{([^{}]+)}/g,(V,F)=>T&&F in T?String(T[F]):"")}(a.properties,N)}createBucket(t){return new Id(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of sg.paint.overridableProperties){if(!Kh.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),f=new ky(a),g=new ad(f,a.property.specification);let N=null;N=a.value.kind==="constant"||a.value.kind==="source"?new yi("source",g):new bo("composite",g,a.value.zoomStops),this.paint._values[t]=new ps(a.property,N,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,f){return!(!this.layout||a.isDataDriven()||f.isDataDriven())&&Kh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const f=t.get("text-field"),g=sg.paint.properties[a];let N=!1;const S=T=>{for(const M of T)if(g.overrides&&g.overrides.hasOverride(M))return void(N=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ii)S(f.value.value.sections);else if(f.value.kind==="source"){const T=V=>{N||(V instanceof Ys&&zr(V.value)===he?S(V.value.sections):V instanceof di?S(V.sections):V.eachChild(T))},M=f.value;M._styleExpression&&T(M._styleExpression.expression)}return N}}let Ay;var F0={get paint(){return Ay=Ay||new ji({"background-color":new ln(qe.paint_background["background-color"]),"background-pattern":new Dc(qe.paint_background["background-pattern"]),"background-opacity":new ln(qe.paint_background["background-opacity"])})}};class U0 extends _o{constructor(t){super(t,F0)}}let My;var $0={get paint(){return My=My||new ji({"raster-opacity":new ln(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new ln(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ln(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ln(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new ln(qe.paint_raster["raster-saturation"]),"raster-contrast":new ln(qe.paint_raster["raster-contrast"]),"raster-resampling":new ln(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new ln(qe.paint_raster["raster-fade-duration"])})}};class q0 extends _o{constructor(t){super(t,$0)}}class H0 extends _o{constructor(t){super(t,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ry{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Yh=63710088e-1;class aa{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new aa(Ye(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,f=this.lat*a,g=t.lat*a,N=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((t.lng-this.lng)*a);return Yh*Math.acos(Math.min(N,1))}static convert(t){if(t instanceof aa)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new aa(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new aa(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ly=2*Math.PI*Yh;function og(s){return Ly*Math.cos(s*Math.PI/180)}function ag(s){return(180+s)/360}function lg(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Iy(s,t){return s/og(t)}function cg(s){return 360*s-180}function ug(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class pm{constructor(t,a,f=0){this.x=+t,this.y=+a,this.z=+f}static fromLngLat(t,a=0){const f=aa.convert(t);return new pm(ag(f.lng),lg(f.lat),Iy(a,f.lat))}toLngLat(){return new aa(cg(this.x),ug(this.y))}toAltitude(){return this.z*og(ug(this.y))}meterInMercatorCoordinateUnits(){return 1/Ly*(t=ug(this.y),1/Math.cos(t*Math.PI/180));var t}}function Vy(s,t,a){var f=2*Math.PI*6378137/256/Math.pow(2,a);return[s*f-2*Math.PI*6378137/2,t*f-2*Math.PI*6378137/2]}class gm{constructor(t,a,f){if(t<0||t>25||f<0||f>=Math.pow(2,t)||a<0||a>=Math.pow(2,t))throw new Error(`x=${a}, y=${f}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=a,this.y=f,this.key=al(0,t,t,a,f)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a,f){const g=(S=this.y,T=this.z,M=Vy(256*(N=this.x),256*(S=Math.pow(2,T)-S-1),T),V=Vy(256*(N+1),256*(S+1),T),M[0]+","+M[1]+","+V[0]+","+V[1]);var N,S,T,M,V;const F=function(H,Y,Q){let ee,ce="";for(let ve=H;ve>0;ve--)ee=1<<ve-1,ce+=(Y&ee?1:0)+(Q&ee?2:0);return ce}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const a=this.z-t.z;return a>0&&t.x===this.x>>a&&t.y===this.y>>a}getTilePoint(t){const a=Math.pow(2,this.z);return new W((t.x*a-this.x)*Ai,(t.y*a-this.y)*Ai)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dg{constructor(t,a){this.wrap=t,this.canonical=a,this.key=al(t,a.z,a.z,a.x,a.y)}}class To{constructor(t,a,f,g,N){if(t<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${f}`);this.overscaledZ=t,this.wrap=a,this.canonical=new gm(f,+g,+N),this.key=al(a,t,f,g,N)}clone(){return new To(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-t;return t>this.canonical.z?new To(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new To(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-t;return t>this.canonical.z?al(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):al(this.wrap*+a,t,t,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new To(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new To(a,this.wrap,a,f,g),new To(a,this.wrap,a,f+1,g),new To(a,this.wrap,a,f,g+1),new To(a,this.wrap,a,f+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new To(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new To(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new pm(t.x-this.wrap,t.y))}}function al(s,t,a,f,g){(s*=2)<0&&(s=-1*s-1);const N=1<<a;return(N*N*s+N*g+f).toString(36)+a.toString(36)+t.toString(36)}qt("CanonicalTileID",gm),qt("OverscaledTileID",To,{omit:["posMatrix"]});class zy{constructor(t,a,f,g=1,N=1,S=1,T=0){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Nt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const M=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=N,this.blueFactor=S,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<M;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(M,V)]=this.data[this._idx(M-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,M)]=this.data[this._idx(V,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<M;V++)for(let F=0;F<M;F++){const H=this.get(V,F);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(t,a){const f=new Uint8Array(this.data.buffer),g=4*this._idx(t,a);return this.unpack(f[g],f[g+1],f[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}unpack(t,a,f){return t*this.redFactor+a*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new Qs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,a,f){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,N=a*this.dim+this.dim,S=f*this.dim,T=f*this.dim+this.dim;switch(a){case-1:g=N-1;break;case 1:N=g+1}switch(f){case-1:S=T-1;break;case 1:T=S+1}const M=-a*this.dim,V=-f*this.dim;for(let F=S;F<T;F++)for(let H=g;H<N;H++)this.data[this._idx(H,F)]=t.data[this._idx(H+M,F+V)]}}qt("DEMData",zy);class Oy{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const f=t[a];this._stringToNumber[f]=a,this._numberToString[a]=f}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class By{constructor(t,a,f,g,N){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=f,t._y=g,this.properties=t.properties,this.id=N}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(t[a]=this[a]);return t}}class Fy{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ml(Ai,16,0),this.grid3D=new Ml(Ai,16,0),this.featureIndexArray=new at,this.promoteId=a}insert(t,a,f,g,N,S){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,N);const M=S?this.grid3D:this.grid;for(let V=0;V<a.length;V++){const F=a[V],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<F.length;Y++){const Q=F[Y];H[0]=Math.min(H[0],Q.x),H[1]=Math.min(H[1],Q.y),H[2]=Math.max(H[2],Q.x),H[3]=Math.max(H[3],Q.y)}H[0]<Ai&&H[1]<Ai&&H[2]>=0&&H[3]>=0&&M.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new Yp(this.rawTileData)).layers,this.sourceLayerCoder=new Oy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,a,f,g){this.loadVTLayers();const N=t.params||{},S=Ai/t.tileSize/t.scale,T=_h(N.filter),M=t.queryGeometry,V=t.queryPadding*S,F=$y(M),H=this.grid.query(F.minX-V,F.minY-V,F.maxX+V,F.maxY+V),Y=$y(t.cameraQueryGeometry),Q=this.grid3D.query(Y.minX-V,Y.minY-V,Y.maxX+V,Y.maxY+V,(ve,be,je,Ne)=>function(Le,Fe,nt,Vt,Kt){for(const At of Le)if(Fe<=At.x&&nt<=At.y&&Vt>=At.x&&Kt>=At.y)return!0;const Ot=[new W(Fe,nt),new W(Fe,Kt),new W(Vt,Kt),new W(Vt,nt)];if(Le.length>2){for(const At of Ot)if(ri(Le,At))return!0}for(let At=0;At<Le.length-1;At++)if(tl(Le[At],Le[At+1],Ot))return!0;return!1}(t.cameraQueryGeometry,ve-V,be-V,je+V,Ne+V));for(const ve of Q)H.push(ve);H.sort(qy);const ee={};let ce;for(let ve=0;ve<H.length;ve++){const be=H[ve];if(be===ce)continue;ce=be;const je=this.featureIndexArray.get(be);let Ne=null;this.loadMatchingFeature(ee,je.bucketIndex,je.sourceLayerIndex,je.featureIndex,T,N.layers,N.availableImages,a,f,g,(Le,Fe,nt)=>(Ne||(Ne=xu(Le)),Fe.queryIntersectsFeature(M,Le,nt,Ne,this.z,t.transform,S,t.pixelPosMatrix)))}return ee}loadMatchingFeature(t,a,f,g,N,S,T,M,V,F,H){const Y=this.bucketLayerIDs[a];if(S&&!function(ve,be){for(let je=0;je<ve.length;je++)if(be.indexOf(ve[je])>=0)return!0;return!1}(S,Y))return;const Q=this.sourceLayerCoder.decode(f),ee=this.vtLayers[Q].feature(g);if(N.needGeometry){const ve=_u(ee,!0);if(!N.filter(new Xr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!N.filter(new Xr(this.tileID.overscaledZ),ee))return;const ce=this.getId(ee,Q);for(let ve=0;ve<Y.length;ve++){const be=Y[ve];if(S&&S.indexOf(be)<0)continue;const je=M[be];if(!je)continue;let Ne={};ce&&F&&(Ne=F.getState(je.sourceLayer||"_geojsonTileLayer",ce));const Le=ot({},V[be]);Le.paint=Uy(Le.paint,je.paint,ee,Ne,T),Le.layout=Uy(Le.layout,je.layout,ee,Ne,T);const Fe=!H||H(ee,je,Ne);if(!Fe)continue;const nt=new By(ee,this.z,this.x,this.y,ce);nt.layer=Le;let Vt=t[be];Vt===void 0&&(Vt=t[be]=[]),Vt.push({featureIndex:g,feature:nt,intersectionZ:Fe})}}lookupSymbolFeatures(t,a,f,g,N,S,T,M){const V={};this.loadVTLayers();const F=_h(N);for(const H of t)this.loadMatchingFeature(V,f,g,H,F,S,T,M,a);return V}hasLayer(t){for(const a of this.bucketLayerIDs)for(const f of a)if(t===f)return!0;return!1}getId(t,a){let f=t.id;return this.promoteId&&(f=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof f=="boolean"&&(f=Number(f))),f}}function Uy(s,t,a,f,g){return gt(s,(N,S)=>{const T=t instanceof Ec?t.get(S):null;return T&&T.evaluate?T.evaluate(a,f,g):T})}function $y(s){let t=1/0,a=1/0,f=-1/0,g=-1/0;for(const N of s)t=Math.min(t,N.x),a=Math.min(a,N.y),f=Math.max(f,N.x),g=Math.max(g,N.y);return{minX:t,minY:a,maxX:f,maxY:g}}function qy(s,t){return t-s}function Hy(s,t,a,f,g){const N=[];for(let S=0;S<s.length;S++){const T=s[S];let M;for(let V=0;V<T.length-1;V++){let F=T[V],H=T[V+1];F.x<t&&H.x<t||(F.x<t?F=new W(t,F.y+(t-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x<t&&(H=new W(t,F.y+(t-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y<a&&H.y<a||(F.y<a?F=new W(F.x+(a-F.y)/(H.y-F.y)*(H.x-F.x),a)._round():H.y<a&&(H=new W(F.x+(a-F.y)/(H.y-F.y)*(H.x-F.x),a)._round()),F.x>=f&&H.x>=f||(F.x>=f?F=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x>=f&&(H=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y>=g&&H.y>=g||(F.y>=g?F=new W(F.x+(g-F.y)/(H.y-F.y)*(H.x-F.x),g)._round():H.y>=g&&(H=new W(F.x+(g-F.y)/(H.y-F.y)*(H.x-F.x),g)._round()),M&&F.equals(M[M.length-1])||(M=[F],N.push(M)),M.push(H)))))}}return N}qt("FeatureIndex",Fy,{omit:["rawTileData","sourceLayerCoder"]});class Lc extends W{constructor(t,a,f,g){super(t,a),this.angle=f,g!==void 0&&(this.segment=g)}clone(){return new Lc(this.x,this.y,this.angle,this.segment)}}function hg(s,t,a,f,g){if(t.segment===void 0||a===0)return!0;let N=t,S=t.segment+1,T=0;for(;T>-a/2;){if(S--,S<0)return!1;T-=s[S].dist(N),N=s[S]}T+=s[S].dist(s[S+1]),S++;const M=[];let V=0;for(;T<a/2;){const F=s[S],H=s[S+1];if(!H)return!1;let Y=s[S-1].angleTo(F)-F.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:Y}),V+=Y;T-M[0].distance>f;)V-=M.shift().angleDelta;if(V>g)return!1;S++,T+=F.dist(H)}return!0}function Vd(s){let t=0;for(let a=0;a<s.length-1;a++)t+=s[a].dist(s[a+1]);return t}function zd(s,t,a){return s?.6*t*a:0}function Gy(s,t){return Math.max(s?s.right-s.left:0,t?t.right-t.left:0)}function G0(s,t,a,f,g,N){const S=zd(a,g,N),T=Gy(a,f)*N;let M=0;const V=Vd(s)/2;for(let F=0;F<s.length-1;F++){const H=s[F],Y=s[F+1],Q=H.dist(Y);if(M+Q>V){const ee=(V-M)/Q,ce=Xi.number(H.x,Y.x,ee),ve=Xi.number(H.y,Y.y,ee),be=new Lc(ce,ve,Y.angleTo(H),F);return be._round(),!S||hg(s,be,T,S,t)?be:void 0}M+=Q}}function W0(s,t,a,f,g,N,S,T,M){const V=zd(f,N,S),F=Gy(f,g),H=F*S,Y=s[0].x===0||s[0].x===M||s[0].y===0||s[0].y===M;return t-H<t/4&&(t=H+t/4),Xh(s,Y?t/2*T%t:(F/2+2*N)*S*T%t,t,V,a,H,Y,!1,M)}function Xh(s,t,a,f,g,N,S,T,M){const V=N/2,F=Vd(s);let H=0,Y=t-a,Q=[];for(let ee=0;ee<s.length-1;ee++){const ce=s[ee],ve=s[ee+1],be=ce.dist(ve),je=ve.angleTo(ce);for(;Y+a<H+be;){Y+=a;const Ne=(Y-H)/be,Le=Xi.number(ce.x,ve.x,Ne),Fe=Xi.number(ce.y,ve.y,Ne);if(Le>=0&&Le<M&&Fe>=0&&Fe<M&&Y-V>=0&&Y+V<=F){const nt=new Lc(Le,Fe,je,ee);nt._round(),f&&!hg(s,nt,N,f,g)||Q.push(nt)}}H+=be}return T||Q.length||S||(Q=Xh(s,H/2,a,f,g,N,S,!0,M)),Q}qt("Anchor",Lc);const Od=eo;function fg(s,t,a,f){const g=[],N=s.image,S=N.pixelRatio,T=N.paddedRect.w-2*Od,M=N.paddedRect.h-2*Od,V=s.right-s.left,F=s.bottom-s.top,H=N.stretchX||[[0,T]],Y=N.stretchY||[[0,M]],Q=(Et,xt)=>Et+xt[1]-xt[0],ee=H.reduce(Q,0),ce=Y.reduce(Q,0),ve=T-ee,be=M-ce;let je=0,Ne=ee,Le=0,Fe=ce,nt=0,Vt=ve,Kt=0,Ot=be;if(N.content&&f){const Et=N.content;je=vm(H,0,Et[0]),Le=vm(Y,0,Et[1]),Ne=vm(H,Et[0],Et[2]),Fe=vm(Y,Et[1],Et[3]),nt=Et[0]-je,Kt=Et[1]-Le,Vt=Et[2]-Et[0]-Ne,Ot=Et[3]-Et[1]-Fe}const At=(Et,xt,Dt,ut)=>{const un=Jh(Et.stretch-je,Ne,V,s.left),Qt=ym(Et.fixed-nt,Vt,Et.stretch,ee),$n=Jh(xt.stretch-Le,Fe,F,s.top),Or=ym(xt.fixed-Kt,Ot,xt.stretch,ce),Vr=Jh(Dt.stretch-je,Ne,V,s.left),Ui=ym(Dt.fixed-nt,Vt,Dt.stretch,ee),Ds=Jh(ut.stretch-Le,Fe,F,s.top),$i=ym(ut.fixed-Kt,Ot,ut.stretch,ce),Oi=new W(un,$n),es=new W(Vr,$n),bs=new W(Vr,Ds),Ws=new W(un,Ds),Hr=new W(Qt/S,Or/S),hi=new W(Ui/S,$i/S),Ci=t*Math.PI/180;if(Ci){const Mi=Math.sin(Ci),qi=Math.cos(Ci),xs=[qi,-Mi,Mi,qi];Oi._matMult(xs),es._matMult(xs),Ws._matMult(xs),bs._matMult(xs)}const Ni=Et.stretch+Et.fixed,Ts=xt.stretch+xt.fixed;return{tl:Oi,tr:es,bl:Ws,br:bs,tex:{x:N.paddedRect.x+Od+Ni,y:N.paddedRect.y+Od+Ts,w:Dt.stretch+Dt.fixed-Ni,h:ut.stretch+ut.fixed-Ts},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:hi,minFontScaleX:Vt/S/V,minFontScaleY:Ot/S/F,isSDF:a}};if(f&&(N.stretchX||N.stretchY)){const Et=mg(H,ve,ee),xt=mg(Y,be,ce);for(let Dt=0;Dt<Et.length-1;Dt++){const ut=Et[Dt],un=Et[Dt+1];for(let Qt=0;Qt<xt.length-1;Qt++)g.push(At(ut,xt[Qt],un,xt[Qt+1]))}}else g.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return g}function vm(s,t,a){let f=0;for(const g of s)f+=Math.max(t,Math.min(a,g[1]))-Math.max(t,Math.min(a,g[0]));return f}function mg(s,t,a){const f=[{fixed:-Od,stretch:0}];for(const[g,N]of s){const S=f[f.length-1];f.push({fixed:g-S.stretch,stretch:S.stretch}),f.push({fixed:g-S.stretch,stretch:S.stretch+(N-g)})}return f.push({fixed:t+Od,stretch:a}),f}function Jh(s,t,a,f){return s/t*a+f}function ym(s,t,a,f){return s-t*a/f}class bm{constructor(t,a,f,g,N,S,T,M,V,F){if(this.boxStartIndex=t.length,V){let H=S.top,Y=S.bottom;const Q=S.collisionPadding;Q&&(H-=Q[1],Y+=Q[3]);let ee=Y-H;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let H=S.top*T-M[0],Y=S.bottom*T+M[2],Q=S.left*T-M[3],ee=S.right*T+M[1];const ce=S.collisionPadding;if(ce&&(Q-=ce[0]*T,H-=ce[1]*T,ee+=ce[2]*T,Y+=ce[3]*T),F){const ve=new W(Q,H),be=new W(ee,H),je=new W(Q,Y),Ne=new W(ee,Y),Le=F*Math.PI/180;ve._rotate(Le),be._rotate(Le),je._rotate(Le),Ne._rotate(Le),Q=Math.min(ve.x,be.x,je.x,Ne.x),ee=Math.max(ve.x,be.x,je.x,Ne.x),H=Math.min(ve.y,be.y,je.y,Ne.y),Y=Math.max(ve.y,be.y,je.y,Ne.y)}t.emplaceBack(a.x,a.y,Q,H,ee,Y,f,g,N)}this.boxEndIndex=t.length}}class Z0{constructor(t=[],a=K0){if(this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:a,compare:f}=this,g=a[t];for(;t>0;){const N=t-1>>1,S=a[N];if(f(g,S)>=0)break;a[t]=S,t=N}a[t]=g}_down(t){const{data:a,compare:f}=this,g=this.length>>1,N=a[t];for(;t<g;){let S=1+(t<<1),T=a[S];const M=S+1;if(M<this.length&&f(a[M],T)<0&&(S=M,T=a[M]),f(T,N)>=0)break;a[t]=T,t=S}a[t]=N}}function K0(s,t){return s<t?-1:s>t?1:0}function Y0(s,t=1,a=!1){let f=1/0,g=1/0,N=-1/0,S=-1/0;const T=s[0];for(let Q=0;Q<T.length;Q++){const ee=T[Q];(!Q||ee.x<f)&&(f=ee.x),(!Q||ee.y<g)&&(g=ee.y),(!Q||ee.x>N)&&(N=ee.x),(!Q||ee.y>S)&&(S=ee.y)}const M=Math.min(N-f,S-g);let V=M/2;const F=new Z0([],X0);if(M===0)return new W(f,g);for(let Q=f;Q<N;Q+=M)for(let ee=g;ee<S;ee+=M)F.push(new Bd(Q+V,ee+V,V,s));let H=function(Q){let ee=0,ce=0,ve=0;const be=Q[0];for(let je=0,Ne=be.length,Le=Ne-1;je<Ne;Le=je++){const Fe=be[je],nt=be[Le],Vt=Fe.x*nt.y-nt.x*Fe.y;ce+=(Fe.x+nt.x)*Vt,ve+=(Fe.y+nt.y)*Vt,ee+=3*Vt}return new Bd(ce/ee,ve/ee,0,Q)}(s),Y=F.length;for(;F.length;){const Q=F.pop();(Q.d>H.d||!H.d)&&(H=Q,a&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Y)),Q.max-H.d<=t||(V=Q.h/2,F.push(new Bd(Q.p.x-V,Q.p.y-V,V,s)),F.push(new Bd(Q.p.x+V,Q.p.y-V,V,s)),F.push(new Bd(Q.p.x-V,Q.p.y+V,V,s)),F.push(new Bd(Q.p.x+V,Q.p.y+V,V,s)),Y+=4)}return a&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function X0(s,t){return t.max-s.max}function Bd(s,t,a,f){this.p=new W(s,t),this.h=a,this.d=function(g,N){let S=!1,T=1/0;for(let M=0;M<N.length;M++){const V=N[M];for(let F=0,H=V.length,Y=H-1;F<H;Y=F++){const Q=V[F],ee=V[Y];Q.y>g.y!=ee.y>g.y&&g.x<(ee.x-Q.x)*(g.y-Q.y)/(ee.y-Q.y)+Q.x&&(S=!S),T=Math.min(T,lr(g,Q,ee))}}return(S?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ys;u.aq=void 0,(ys=u.aq||(u.aq={}))[ys.center=1]="center",ys[ys.left=2]="left",ys[ys.right=3]="right",ys[ys.top=4]="top",ys[ys.bottom=5]="bottom",ys[ys["top-left"]=6]="top-left",ys[ys["top-right"]=7]="top-right",ys[ys["bottom-left"]=8]="bottom-left",ys[ys["bottom-right"]=9]="bottom-right";const Ic=7,pg=Number.POSITIVE_INFINITY;function Po(s,t){return t[1]!==pg?function(a,f,g){let N=0,S=0;switch(f=Math.abs(f),g=Math.abs(g),a){case"top-right":case"top-left":case"top":S=g-Ic;break;case"bottom-right":case"bottom-left":case"bottom":S=-g+Ic}switch(a){case"top-right":case"bottom-right":case"right":N=-f;break;case"top-left":case"bottom-left":case"left":N=f}return[N,S]}(s,t[0],t[1]):function(a,f){let g=0,N=0;f<0&&(f=0);const S=f/Math.SQRT2;switch(a){case"top-right":case"top-left":N=S-Ic;break;case"bottom-right":case"bottom-left":N=-S+Ic;break;case"bottom":N=-f+Ic;break;case"top":N=f-Ic}switch(a){case"top-right":case"bottom-right":g=-S;break;case"top-left":case"bottom-left":g=S;break;case"left":g=f;break;case"right":g=-f}return[g,N]}(s,t[0])}function Fd(s,t,a){var f;const g=s.layout,N=(f=g.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(t,{},a);if(N){const T=N.values,M=[];for(let V=0;V<T.length;V+=2){const F=M[V]=T[V],H=T[V+1].map(Y=>Y*zi);F.startsWith("top")?H[1]-=Ic:F.startsWith("bottom")&&(H[1]+=Ic),M[V+1]=H}return new hs(M)}const S=g.get("text-variable-anchor");if(S){let T;T=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(t,{},a)*zi,pg]:g.get("text-offset").evaluate(t,{},a).map(V=>V*zi);const M=[];for(const V of S)M.push(V,Po(V,T));return new hs(M)}return null}function xm(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function J0(s,t,a,f,g,N,S,T,M,V,F){let H=N.textMaxSize.evaluate(t,{});H===void 0&&(H=S);const Y=s.layers[0].layout,Q=Y.get("icon-offset").evaluate(t,{},F),ee=Wy(a.horizontal),ce=S/24,ve=s.tilePixelRatio*ce,be=s.tilePixelRatio*H/24,je=s.tilePixelRatio*T,Ne=s.tilePixelRatio*Y.get("symbol-spacing"),Le=Y.get("text-padding")*s.tilePixelRatio,Fe=function(ut,un,Qt,$n=1){const Or=ut.get("icon-padding").evaluate(un,{},Qt),Vr=Or&&Or.values;return[Vr[0]*$n,Vr[1]*$n,Vr[2]*$n,Vr[3]*$n]}(Y,t,F,s.tilePixelRatio),nt=Y.get("text-max-angle")/180*Math.PI,Vt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Kt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Ot=Y.get("symbol-placement"),At=Ne/2,Et=Y.get("icon-text-fit");let xt;f&&Et!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(xt=Dy(f,a.vertical,Et,Y.get("icon-text-fit-padding"),Q,ce)),ee&&(f=Dy(f,ee,Et,Y.get("icon-text-fit-padding"),Q,ce)));const Dt=(ut,un)=>{un.x<0||un.x>=Ai||un.y<0||un.y>=Ai||function(Qt,$n,Or,Vr,Ui,Ds,$i,Oi,es,bs,Ws,Hr,hi,Ci,Ni,Ts,Mi,qi,xs,Ri,Kn,Hi,cs,Si,qo){const la=Qt.addToLineVertexArray($n,Or);let Aa,Kl,to,Zs,Ks=0,Yl=0,Vc=0,Yy=0,_g=-1,wg=-1;const Xl={};let Xy=ls("");if(Qt.allowVerticalPlacement&&Vr.vertical){const Ps=Oi.layout.get("text-rotate").evaluate(Kn,{},Si)+90;to=new bm(es,$n,bs,Ws,Hr,Vr.vertical,hi,Ci,Ni,Ps),$i&&(Zs=new bm(es,$n,bs,Ws,Hr,$i,Mi,qi,Ni,Ps))}if(Ui){const Ps=Oi.layout.get("icon-rotate").evaluate(Kn,{}),jo=Oi.layout.get("icon-text-fit")!=="none",Lu=fg(Ui,Ps,cs,jo),Ra=$i?fg($i,Ps,cs,jo):void 0;Kl=new bm(es,$n,bs,Ws,Hr,Ui,Mi,qi,!1,Ps),Ks=4*Lu.length;const Oc=Qt.iconSizeData;let Ho=null;Oc.kind==="source"?(Ho=[ol*Oi.layout.get("icon-size").evaluate(Kn,{})],Ho[0]>Rc&&Nt(`${Qt.layerIds[0]}: Value for "icon-size" is >= ${Ru}. Reduce your "icon-size".`)):Oc.kind==="composite"&&(Ho=[ol*Hi.compositeIconSizes[0].evaluate(Kn,{},Si),ol*Hi.compositeIconSizes[1].evaluate(Kn,{},Si)],(Ho[0]>Rc||Ho[1]>Rc)&&Nt(`${Qt.layerIds[0]}: Value for "icon-size" is >= ${Ru}. Reduce your "icon-size".`)),Qt.addSymbols(Qt.icon,Lu,Ho,Ri,xs,Kn,u.ai.none,$n,la.lineStartIndex,la.lineLength,-1,Si),_g=Qt.icon.placedSymbolArray.length-1,Ra&&(Yl=4*Ra.length,Qt.addSymbols(Qt.icon,Ra,Ho,Ri,xs,Kn,u.ai.vertical,$n,la.lineStartIndex,la.lineLength,-1,Si),wg=Qt.icon.placedSymbolArray.length-1)}const Jy=Object.keys(Vr.horizontal);for(const Ps of Jy){const jo=Vr.horizontal[Ps];if(!Aa){Xy=ls(jo.text);const Ra=Oi.layout.get("text-rotate").evaluate(Kn,{},Si);Aa=new bm(es,$n,bs,Ws,Hr,jo,hi,Ci,Ni,Ra)}const Lu=jo.positionedLines.length===1;if(Vc+=gg(Qt,$n,jo,Ds,Oi,Ni,Kn,Ts,la,Vr.vertical?u.ai.horizontal:u.ai.horizontalOnly,Lu?Jy:[Ps],Xl,_g,Hi,Si),Lu)break}Vr.vertical&&(Yy+=gg(Qt,$n,Vr.vertical,Ds,Oi,Ni,Kn,Ts,la,u.ai.vertical,["vertical"],Xl,wg,Hi,Si));const e_=Aa?Aa.boxStartIndex:Qt.collisionBoxArray.length,t_=Aa?Aa.boxEndIndex:Qt.collisionBoxArray.length,n_=to?to.boxStartIndex:Qt.collisionBoxArray.length,r_=to?to.boxEndIndex:Qt.collisionBoxArray.length,Cg=Kl?Kl.boxStartIndex:Qt.collisionBoxArray.length,Ng=Kl?Kl.boxEndIndex:Qt.collisionBoxArray.length,Sg=Zs?Zs.boxStartIndex:Qt.collisionBoxArray.length,Eg=Zs?Zs.boxEndIndex:Qt.collisionBoxArray.length;let Ma=-1;const zc=(Ps,jo)=>Ps&&Ps.circleDiameter?Math.max(Ps.circleDiameter,jo):jo;Ma=zc(Aa,Ma),Ma=zc(to,Ma),Ma=zc(Kl,Ma),Ma=zc(Zs,Ma);const $d=Ma>-1?1:0;$d&&(Ma*=qo/zi),Qt.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&Qt.addToSortKeyRanges(Qt.symbolInstances.length,Kn.sortKey);const i_=Fd(Oi,Kn,Si),[Qy,s_]=function(Ps,jo){const Lu=Ps.length,Ra=jo==null?void 0:jo.values;if((Ra==null?void 0:Ra.length)>0)for(let Oc=0;Oc<Ra.length;Oc+=2){const Ho=Ra[Oc+1];Ps.emplaceBack(u.aq[Ra[Oc]],Ho[0],Ho[1])}return[Lu,Ps.length]}(Qt.textAnchorOffsets,i_);Qt.symbolInstances.emplaceBack($n.x,$n.y,Xl.right>=0?Xl.right:-1,Xl.center>=0?Xl.center:-1,Xl.left>=0?Xl.left:-1,Xl.vertical||-1,_g,wg,Xy,e_,t_,n_,r_,Cg,Ng,Sg,Eg,bs,Vc,Yy,Ks,Yl,$d,0,hi,Ma,Qy,s_)}(s,un,ut,a,f,g,xt,s.layers[0],s.collisionBoxArray,t.index,t.sourceLayerIndex,s.index,ve,[Le,Le,Le,Le],Vt,M,je,Fe,Kt,Q,t,N,V,F,S)};if(Ot==="line")for(const ut of Hy(t.geometry,0,0,Ai,Ai)){const un=W0(ut,Ne,nt,a.vertical||ee,f,24,be,s.overscaling,Ai);for(const Qt of un)ee&&Q0(s,ee.text,At,Qt)||Dt(ut,Qt)}else if(Ot==="line-center"){for(const ut of t.geometry)if(ut.length>1){const un=G0(ut,nt,a.vertical||ee,f,24,be);un&&Dt(ut,un)}}else if(t.type==="Polygon")for(const ut of zp(t.geometry,0)){const un=Y0(ut,16);Dt(ut[0],new Lc(un.x,un.y,0))}else if(t.type==="LineString")for(const ut of t.geometry)Dt(ut,new Lc(ut[0].x,ut[0].y,0));else if(t.type==="Point")for(const ut of t.geometry)for(const un of ut)Dt([un],new Lc(un.x,un.y,0))}function gg(s,t,a,f,g,N,S,T,M,V,F,H,Y,Q,ee){const ce=function(je,Ne,Le,Fe,nt,Vt,Kt,Ot){const At=Fe.layout.get("text-rotate").evaluate(Vt,{})*Math.PI/180,Et=[];for(const xt of Ne.positionedLines)for(const Dt of xt.positionedGlyphs){if(!Dt.rect)continue;const ut=Dt.rect||{};let un=kd+1,Qt=!0,$n=1,Or=0;const Vr=(nt||Ot)&&Dt.vertical,Ui=Dt.metrics.advance*Dt.scale/2;if(Ot&&Ne.verticalizable&&(Or=xt.lineOffset/2-(Dt.imageName?-(zi-Dt.metrics.width*Dt.scale)/2:(Dt.scale-1)*zi)),Dt.imageName){const Ri=Kt[Dt.imageName];Qt=Ri.sdf,$n=Ri.pixelRatio,un=eo/$n}const Ds=nt?[Dt.x+Ui,Dt.y]:[0,0];let $i=nt?[0,0]:[Dt.x+Ui+Le[0],Dt.y+Le[1]-Or],Oi=[0,0];Vr&&(Oi=$i,$i=[0,0]);const es=Dt.metrics.isDoubleResolution?2:1,bs=(Dt.metrics.left-un)*Dt.scale-Ui+$i[0],Ws=(-Dt.metrics.top-un)*Dt.scale+$i[1],Hr=bs+ut.w/es*Dt.scale/$n,hi=Ws+ut.h/es*Dt.scale/$n,Ci=new W(bs,Ws),Ni=new W(Hr,Ws),Ts=new W(bs,hi),Mi=new W(Hr,hi);if(Vr){const Ri=new W(-Ui,Ui-Mc),Kn=-Math.PI/2,Hi=zi/2-Ui,cs=new W(5-Mc-Hi,-(Dt.imageName?Hi:0)),Si=new W(...Oi);Ci._rotateAround(Kn,Ri)._add(cs)._add(Si),Ni._rotateAround(Kn,Ri)._add(cs)._add(Si),Ts._rotateAround(Kn,Ri)._add(cs)._add(Si),Mi._rotateAround(Kn,Ri)._add(cs)._add(Si)}if(At){const Ri=Math.sin(At),Kn=Math.cos(At),Hi=[Kn,-Ri,Ri,Kn];Ci._matMult(Hi),Ni._matMult(Hi),Ts._matMult(Hi),Mi._matMult(Hi)}const qi=new W(0,0),xs=new W(0,0);Et.push({tl:Ci,tr:Ni,bl:Ts,br:Mi,tex:ut,writingMode:Ne.writingMode,glyphOffset:Ds,sectionIndex:Dt.sectionIndex,isSDF:Qt,pixelOffsetTL:qi,pixelOffsetBR:xs,minFontScaleX:0,minFontScaleY:0})}return Et}(0,a,T,g,N,S,f,s.allowVerticalPlacement),ve=s.textSizeData;let be=null;ve.kind==="source"?(be=[ol*g.layout.get("text-size").evaluate(S,{})],be[0]>Rc&&Nt(`${s.layerIds[0]}: Value for "text-size" is >= ${Ru}. Reduce your "text-size".`)):ve.kind==="composite"&&(be=[ol*Q.compositeTextSizes[0].evaluate(S,{},ee),ol*Q.compositeTextSizes[1].evaluate(S,{},ee)],(be[0]>Rc||be[1]>Rc)&&Nt(`${s.layerIds[0]}: Value for "text-size" is >= ${Ru}. Reduce your "text-size".`)),s.addSymbols(s.text,ce,be,T,N,S,V,t,M.lineStartIndex,M.lineLength,Y,ee);for(const je of F)H[je]=s.text.placedSymbolArray.length-1;return 4*ce.length}function Wy(s){for(const t in s)return s[t];return null}function Q0(s,t,a,f){const g=s.compareText;if(t in g){const N=g[t];for(let S=N.length-1;S>=0;S--)if(f.dist(N[S])<a)return!0}else g[t]=[];return g[t].push(f),!1}const Zy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _m{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,f]=new Uint8Array(t,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const N=Zy[15&f];if(!N)throw new Error("Unrecognized array type.");const[S]=new Uint16Array(t,2,1),[T]=new Uint32Array(t,4,1);return new _m(T,S,N,t)}constructor(t,a=64,f=Float64Array,g){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=f,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const N=Zy.indexOf(this.ArrayType),S=2*t*this.ArrayType.BYTES_PER_ELEMENT,T=t*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(N<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+T+M,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+S+T+M),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+T+M,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+N]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=t)}add(t,a){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=t,this.coords[this._pos++]=a,f}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,a,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:N,coords:S,nodeSize:T}=this,M=[0,N.length-1,0],V=[];for(;M.length;){const F=M.pop()||0,H=M.pop()||0,Y=M.pop()||0;if(H-Y<=T){for(let ve=Y;ve<=H;ve++){const be=S[2*ve],je=S[2*ve+1];be>=t&&be<=f&&je>=a&&je<=g&&V.push(N[ve])}continue}const Q=Y+H>>1,ee=S[2*Q],ce=S[2*Q+1];ee>=t&&ee<=f&&ce>=a&&ce<=g&&V.push(N[Q]),(F===0?t<=ee:a<=ce)&&(M.push(Y),M.push(Q-1),M.push(1-F)),(F===0?f>=ee:g>=ce)&&(M.push(Q+1),M.push(H),M.push(1-F))}return V}within(t,a,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:N,nodeSize:S}=this,T=[0,g.length-1,0],M=[],V=f*f;for(;T.length;){const F=T.pop()||0,H=T.pop()||0,Y=T.pop()||0;if(H-Y<=S){for(let ve=Y;ve<=H;ve++)Nm(N[2*ve],N[2*ve+1],t,a)<=V&&M.push(g[ve]);continue}const Q=Y+H>>1,ee=N[2*Q],ce=N[2*Q+1];Nm(ee,ce,t,a)<=V&&M.push(g[Q]),(F===0?t-f<=ee:a-f<=ce)&&(T.push(Y),T.push(Q-1),T.push(1-F)),(F===0?t+f>=ee:a+f>=ce)&&(T.push(Q+1),T.push(H),T.push(1-F))}return M}}function wm(s,t,a,f,g,N){if(g-f<=a)return;const S=f+g>>1;Ky(s,t,S,f,g,N),wm(s,t,a,f,S-1,1-N),wm(s,t,a,S+1,g,1-N)}function Ky(s,t,a,f,g,N){for(;g>f;){if(g-f>600){const V=g-f+1,F=a-f+1,H=Math.log(V),Y=.5*Math.exp(2*H/3),Q=.5*Math.sqrt(H*Y*(V-Y)/V)*(F-V/2<0?-1:1);Ky(s,t,a,Math.max(f,Math.floor(a-F*Y/V+Q)),Math.min(g,Math.floor(a+(V-F)*Y/V+Q)),N)}const S=t[2*a+N];let T=f,M=g;for(Qh(s,t,f,a),t[2*g+N]>S&&Qh(s,t,f,g);T<M;){for(Qh(s,t,T,M),T++,M--;t[2*T+N]<S;)T++;for(;t[2*M+N]>S;)M--}t[2*f+N]===S?Qh(s,t,f,M):(M++,Qh(s,t,M,g)),M<=a&&(f=M+1),a<=M&&(g=M-1)}}function Qh(s,t,a,f){Cm(s,a,f),Cm(t,2*a,2*f),Cm(t,2*a+1,2*f+1)}function Cm(s,t,a){const f=s[t];s[t]=s[a],s[a]=f}function Nm(s,t,a,f){const g=s-a,N=t-f;return g*g+N*N}var vg;u.bh=void 0,(vg=u.bh||(u.bh={})).create="create",vg.load="load",vg.fullLoad="fullLoad";let Sm=null,ef=[];const yg=1e3/60,bg="loadTime",xg="fullLoadTime",Ud={mark(s){performance.mark(s)},frame(s){const t=s;Sm!=null&&ef.push(t-Sm),Sm=t},clearMetrics(){Sm=null,ef=[],performance.clearMeasures(bg),performance.clearMeasures(xg);for(const s in u.bh)performance.clearMarks(u.bh[s])},getPerformanceMetrics(){performance.measure(bg,u.bh.create,u.bh.load),performance.measure(xg,u.bh.create,u.bh.fullLoad);const s=performance.getEntriesByName(bg)[0].duration,t=performance.getEntriesByName(xg)[0].duration,a=ef.length,f=1/(ef.reduce((N,S)=>N+S,0)/a/1e3),g=ef.filter(N=>N>yg).reduce((N,S)=>N+(S-yg)/yg,0);return{loadTime:s,fullLoadTime:t,fps:f,percentDroppedFrames:g/(a+g)*100,totalFrames:a}}};u.$=function(s,t,a){var f,g,N,S,T,M,V,F,H,Y,Q,ee,ce=a[0],ve=a[1],be=a[2];return t===s?(s[12]=t[0]*ce+t[4]*ve+t[8]*be+t[12],s[13]=t[1]*ce+t[5]*ve+t[9]*be+t[13],s[14]=t[2]*ce+t[6]*ve+t[10]*be+t[14],s[15]=t[3]*ce+t[7]*ve+t[11]*be+t[15]):(g=t[1],N=t[2],S=t[3],T=t[4],M=t[5],V=t[6],F=t[7],H=t[8],Y=t[9],Q=t[10],ee=t[11],s[0]=f=t[0],s[1]=g,s[2]=N,s[3]=S,s[4]=T,s[5]=M,s[6]=V,s[7]=F,s[8]=H,s[9]=Y,s[10]=Q,s[11]=ee,s[12]=f*ce+T*ve+H*be+t[12],s[13]=g*ce+M*ve+Y*be+t[13],s[14]=N*ce+V*ve+Q*be+t[14],s[15]=S*ce+F*ve+ee*be+t[15]),s},u.A=Dn,u.B=Xi,u.C=class{constructor(s,t,a){this.receive=f=>{const g=f.data,N=g.id;if(N&&(!g.targetMapId||this.mapId===g.targetMapId))if(g.type==="<cancel>"){delete this.tasks[N];const S=this.cancelCallbacks[N];delete this.cancelCallbacks[N],S&&S()}else zt()||g.mustQueue?(this.tasks[N]=g,this.taskQueue.push(N),this.invoker.trigger()):this.processTask(N,g)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),g=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),g&&this.processTask(f,g)},this.target=s,this.parent=t,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Ry(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=zt()?s:window}send(s,t,a,f,g=!1){const N=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[N]=a);const S=[],T={id:N,type:s,hasCallback:!!a,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Ka(t,S)};return this.target.postMessage(T,{transfer:S}),{cancel:()=>{a&&delete this.callbacks[N],this.target.postMessage({id:N,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(s,t){if(t.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(t.error?a(_c(t.error)):a(null,_c(t.data)))}else{let a=!1;const f=[],g=t.hasCallback?(T,M)=>{a=!0,delete this.cancelCallbacks[s];const V={id:s,type:"<response>",sourceMapId:this.mapId,error:T?Ka(T):null,data:Ka(M,f)};this.target.postMessage(V,{transfer:f})}:T=>{a=!0};let N=null;const S=_c(t.data);if(this.parent[t.type])N=this.parent[t.type](t.sourceMapId,S,g);else if("getWorkerSource"in this.parent){const T=t.type.split(".");N=this.parent.getWorkerSource(t.sourceMapId,T[0],S.source)[T[1]](S,g)}else g(new Error(`Could not find function ${t.type}`));!a&&N&&N.cancel&&(this.cancelCallbacks[s]=N.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.D=ln,u.E=Li,u.F=function(s,t){const a={};for(let f=0;f<t.length;f++){const g=t[f];g in s&&(a[g]=s[g])}return a},u.G=ag,u.H=lg,u.I=um,u.J=we,u.K=fe,u.L=aa,u.M=Rt,u.N=Ai,u.O=To,u.P=W,u.Q=Rr,u.R=Qs,u.S=_r,u.T=Nc,u.U=pm,u.V=class extends wo{},u.W=gm,u.X=function(s,t){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(let f=0;f<s.length;f++){const g=window.document.createElement("source");Ur(s[f])||(a.crossOrigin="Anonymous"),g.src=s[f],a.appendChild(g)}return{cancel:()=>{}}},u.Y=Qe,u.Z=function(){var s=new Dn(16);return Dn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},u._=A,u.a=dn,u.a$=class extends X{},u.a0=function(s,t,a){var f=a[0],g=a[1],N=a[2];return s[0]=t[0]*f,s[1]=t[1]*f,s[2]=t[2]*f,s[3]=t[3]*f,s[4]=t[4]*g,s[5]=t[5]*g,s[6]=t[6]*g,s[7]=t[7]*g,s[8]=t[8]*N,s[9]=t[9]*N,s[10]=t[10]*N,s[11]=t[11]*N,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},u.a1=nl,u.a2=function(){return wt++},u.a3=pe,u.a4=Id,u.a5=function(){qs.isLoading()||qs.isLoaded()||gu()!=="deferred"||Bf()},u.a6=_h,u.a7=_u,u.a8=Xr,u.a9=By,u.aA=wc,u.aB=function(s){s=s.slice();const t=Object.create(null);for(let a=0;a<s.length;a++)t[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=hr(s[a],t[s[a].ref]));return s},u.aC=function(s){if(s.type==="custom")return new H0(s);switch(s.type){case"background":return new U0(s);case"circle":return new wd(s);case"fill":return new am(s);case"fill-extrusion":return new Up(s);case"heatmap":return new jp(s);case"hillshade":return new Ap(s);case"line":return new kc(s);case"raster":return new q0(s);case"symbol":return new Kh(s)}},u.aD=st,u.aE=function(s,t){if(!s)return[{command:Ln.setStyle,args:[t]}];let a=[];try{if(!zn(s.version,t.version))return[{command:Ln.setStyle,args:[t]}];zn(s.center,t.center)||a.push({command:Ln.setCenter,args:[t.center]}),zn(s.zoom,t.zoom)||a.push({command:Ln.setZoom,args:[t.zoom]}),zn(s.bearing,t.bearing)||a.push({command:Ln.setBearing,args:[t.bearing]}),zn(s.pitch,t.pitch)||a.push({command:Ln.setPitch,args:[t.pitch]}),zn(s.sprite,t.sprite)||a.push({command:Ln.setSprite,args:[t.sprite]}),zn(s.glyphs,t.glyphs)||a.push({command:Ln.setGlyphs,args:[t.glyphs]}),zn(s.transition,t.transition)||a.push({command:Ln.setTransition,args:[t.transition]}),zn(s.light,t.light)||a.push({command:Ln.setLight,args:[t.light]});const f={},g=[];(function(S,T,M,V){let F;for(F in T=T||{},S=S||{})Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(T,F)||pi(F,M,V));for(F in T)Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(S,F)?zn(S[F],T[F])||(S[F].type==="geojson"&&T[F].type==="geojson"&&Bs(S,T,F)?M.push({command:Ln.setGeoJSONSourceData,args:[F,T[F].data]}):oi(F,T,M,V)):Dr(F,T,M))})(s.sources,t.sources,g,f);const N=[];s.layers&&s.layers.forEach(S=>{f[S.source]?a.push({command:Ln.removeLayer,args:[S.id]}):N.push(S)}),a=a.concat(g),function(S,T,M){T=T||[];const V=(S=S||[]).map(Mt),F=T.map(Mt),H=S.reduce(an,{}),Y=T.reduce(an,{}),Q=V.slice(),ee=Object.create(null);let ce,ve,be,je,Ne,Le,Fe;for(ce=0,ve=0;ce<V.length;ce++)be=V[ce],Object.prototype.hasOwnProperty.call(Y,be)?ve++:(M.push({command:Ln.removeLayer,args:[be]}),Q.splice(Q.indexOf(be,ve),1));for(ce=0,ve=0;ce<F.length;ce++)be=F[F.length-1-ce],Q[Q.length-1-ce]!==be&&(Object.prototype.hasOwnProperty.call(H,be)?(M.push({command:Ln.removeLayer,args:[be]}),Q.splice(Q.lastIndexOf(be,Q.length-ve),1)):ve++,Le=Q[Q.length-ce],M.push({command:Ln.addLayer,args:[Y[be],Le]}),Q.splice(Q.length-ce,0,be),ee[be]=!0);for(ce=0;ce<F.length;ce++)if(be=F[ce],je=H[be],Ne=Y[be],!ee[be]&&!zn(je,Ne))if(zn(je.source,Ne.source)&&zn(je["source-layer"],Ne["source-layer"])&&zn(je.type,Ne.type)){for(Fe in ds(je.layout,Ne.layout,M,be,null,Ln.setLayoutProperty),ds(je.paint,Ne.paint,M,be,null,Ln.setPaintProperty),zn(je.filter,Ne.filter)||M.push({command:Ln.setFilter,args:[be,Ne.filter]}),zn(je.minzoom,Ne.minzoom)&&zn(je.maxzoom,Ne.maxzoom)||M.push({command:Ln.setLayerZoomRange,args:[be,Ne.minzoom,Ne.maxzoom]}),je)Object.prototype.hasOwnProperty.call(je,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?ds(je[Fe],Ne[Fe],M,be,Fe.slice(6),Ln.setPaintProperty):zn(je[Fe],Ne[Fe])||M.push({command:Ln.setLayerProperty,args:[be,Fe,Ne[Fe]]}));for(Fe in Ne)Object.prototype.hasOwnProperty.call(Ne,Fe)&&!Object.prototype.hasOwnProperty.call(je,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?ds(je[Fe],Ne[Fe],M,be,Fe.slice(6),Ln.setPaintProperty):zn(je[Fe],Ne[Fe])||M.push({command:Ln.setLayerProperty,args:[be,Fe,Ne[Fe]]}))}else M.push({command:Ln.removeLayer,args:[be]}),Le=Q[Q.lastIndexOf(be)+1],M.push({command:Ln.addLayer,args:[Ne,Le]})}(N,t.layers,a)}catch(f){console.warn("Unable to compute style diff:",f),a=[{command:Ln.setStyle,args:[t]}]}return a},u.aF=function(s){const t=[],a=s.id;return a===void 0&&t.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&t.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},u.aG=function s(t,a){if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(let f=0;f<t.length;f++)if(!s(t[f],a[f]))return!1;return!0}if(typeof t=="object"&&t!==null&&a!==null){if(typeof a!="object"||Object.keys(t).length!==Object.keys(a).length)return!1;for(const f in t)if(!s(t[f],a[f]))return!1;return!0}return t===a},u.aH=gt,u.aI=sn,u.aJ=Cc,u.aK=function(s){return s({pluginStatus:Ss,pluginURL:Ja}),Cc.on("pluginStateChange",s),s},u.aL=class extends zl{constructor(s,t){super(s,t),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},u.aM=ki,u.aN=class extends zl{constructor(s,t){super(s,t),this.current=_p}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let t=1;t<16;t++)if(s[t]!==this.current[t]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},u.aO=$f,u.aP=class extends zl{constructor(s,t){super(s,t),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},u.aQ=class extends zl{constructor(s,t){super(s,t),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},u.aR=qf,u.aS=function(s,t,a,f,g,N,S){var T=1/(t-a),M=1/(f-g),V=1/(N-S);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*M,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*V,s[11]=0,s[12]=(t+a)*T,s[13]=(g+f)*M,s[14]=(S+N)*V,s[15]=1,s},u.aT=gr,u.aU=rl,u.aV=class extends m{},u.aW=P0,u.aX=class extends w{},u.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},u.aZ=Jf,u.a_=_t,u.aa=function(s){const t={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,f,g,N)=>{const S=g||N;return t[f]=!S||S.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t},u.ab=function(s,t){const a=[];for(const f in s)f in t||a.push(f);return a},u.ac=function(s){if(Wt==null){const t=s.navigator?s.navigator.userAgent:null;Wt=!!s.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Wt},u.ad=Je,u.ae=function(s,t,a){var f=Math.sin(a),g=Math.cos(a),N=t[0],S=t[1],T=t[2],M=t[3],V=t[4],F=t[5],H=t[6],Y=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=N*g+V*f,s[1]=S*g+F*f,s[2]=T*g+H*f,s[3]=M*g+Y*f,s[4]=V*g-N*f,s[5]=F*g-S*f,s[6]=H*g-T*f,s[7]=Y*g-M*f,s},u.af=function(s){var t=new Dn(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},u.ag=jc,u.ah=function(s,t){let a=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:N,maxZoom:S}=s,T=g?Je(Ji.interpolationFactor(g,t,N,S),0,1):0;s.kind==="camera"?f=Xi.number(s.minSize,s.maxSize,T):a=T}return{uSizeT:a,uSize:f}},u.aj=function(s,{uSize:t,uSizeT:a},{lowerSize:f,upperSize:g}){return s.kind==="source"?f/ol:s.kind==="composite"?Xi.number(f/ol,g/ol,a):t},u.ak=ng,u.al=function(s,t,a,f){const g=t.y-s.y,N=t.x-s.x,S=f.y-a.y,T=f.x-a.x,M=S*N-T*g;if(M===0)return null;const V=(T*(s.y-a.y)-S*(s.x-a.x))/M;return new W(s.x+V*N,s.y+V*g)},u.am=Hy,u.an=Sp,u.ao=Pc,u.ap=zi,u.ar=tg,u.as=function(s,t){var a=t[0],f=t[1],g=t[2],N=t[3],S=t[4],T=t[5],M=t[6],V=t[7],F=t[8],H=t[9],Y=t[10],Q=t[11],ee=t[12],ce=t[13],ve=t[14],be=t[15],je=a*T-f*S,Ne=a*M-g*S,Le=a*V-N*S,Fe=f*M-g*T,nt=f*V-N*T,Vt=g*V-N*M,Kt=F*ce-H*ee,Ot=F*ve-Y*ee,At=F*be-Q*ee,Et=H*ve-Y*ce,xt=H*be-Q*ce,Dt=Y*be-Q*ve,ut=je*Dt-Ne*xt+Le*Et+Fe*At-nt*Ot+Vt*Kt;return ut?(s[0]=(T*Dt-M*xt+V*Et)*(ut=1/ut),s[1]=(g*xt-f*Dt-N*Et)*ut,s[2]=(ce*Vt-ve*nt+be*Fe)*ut,s[3]=(Y*nt-H*Vt-Q*Fe)*ut,s[4]=(M*At-S*Dt-V*Ot)*ut,s[5]=(a*Dt-g*At+N*Ot)*ut,s[6]=(ve*Le-ee*Vt-be*Ne)*ut,s[7]=(F*Vt-Y*Le+Q*Ne)*ut,s[8]=(S*xt-T*At+V*Kt)*ut,s[9]=(f*At-a*xt-N*Kt)*ut,s[10]=(ee*nt-ce*Le+be*je)*ut,s[11]=(H*Le-F*nt-Q*je)*ut,s[12]=(T*Ot-S*Et-M*Kt)*ut,s[13]=(a*Et-f*Ot+g*Kt)*ut,s[14]=(ce*Ne-ee*Fe-ve*je)*ut,s[15]=(F*Fe-H*Ne+Y*je)*ut,s):null},u.at=xm,u.au=hm,u.av=_m,u.aw=function(){const s={},t=qe.$version;for(const a in qe.$root){const f=qe.$root[a];if(f.required){let g=null;g=a==="version"?t:f.type==="array"?[]:{},g!=null&&(s[a]=g)}}return s},u.ax=Ln,u.ay=Ph,u.az=Bt,u.b=function(s,t){const a=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(a).then(f=>{t(null,f)}).catch(f=>{t(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.b0=mr,u.b1=function(s,t){var a=s[0],f=s[1],g=s[2],N=s[3],S=s[4],T=s[5],M=s[6],V=s[7],F=s[8],H=s[9],Y=s[10],Q=s[11],ee=s[12],ce=s[13],ve=s[14],be=s[15],je=t[0],Ne=t[1],Le=t[2],Fe=t[3],nt=t[4],Vt=t[5],Kt=t[6],Ot=t[7],At=t[8],Et=t[9],xt=t[10],Dt=t[11],ut=t[12],un=t[13],Qt=t[14],$n=t[15];return Math.abs(a-je)<=Sr*Math.max(1,Math.abs(a),Math.abs(je))&&Math.abs(f-Ne)<=Sr*Math.max(1,Math.abs(f),Math.abs(Ne))&&Math.abs(g-Le)<=Sr*Math.max(1,Math.abs(g),Math.abs(Le))&&Math.abs(N-Fe)<=Sr*Math.max(1,Math.abs(N),Math.abs(Fe))&&Math.abs(S-nt)<=Sr*Math.max(1,Math.abs(S),Math.abs(nt))&&Math.abs(T-Vt)<=Sr*Math.max(1,Math.abs(T),Math.abs(Vt))&&Math.abs(M-Kt)<=Sr*Math.max(1,Math.abs(M),Math.abs(Kt))&&Math.abs(V-Ot)<=Sr*Math.max(1,Math.abs(V),Math.abs(Ot))&&Math.abs(F-At)<=Sr*Math.max(1,Math.abs(F),Math.abs(At))&&Math.abs(H-Et)<=Sr*Math.max(1,Math.abs(H),Math.abs(Et))&&Math.abs(Y-xt)<=Sr*Math.max(1,Math.abs(Y),Math.abs(xt))&&Math.abs(Q-Dt)<=Sr*Math.max(1,Math.abs(Q),Math.abs(Dt))&&Math.abs(ee-ut)<=Sr*Math.max(1,Math.abs(ee),Math.abs(ut))&&Math.abs(ce-un)<=Sr*Math.max(1,Math.abs(ce),Math.abs(un))&&Math.abs(ve-Qt)<=Sr*Math.max(1,Math.abs(ve),Math.abs(Qt))&&Math.abs(be-$n)<=Sr*Math.max(1,Math.abs(be),Math.abs($n))},u.b2=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},u.b3=function(s,t,a){return s[0]=t[0]*a[0],s[1]=t[1]*a[1],s[2]=t[2]*a[2],s[3]=t[3]*a[3],s},u.b4=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]},u.b5=Ye,u.b6=dg,u.b7=Iy,u.b8=function(s,t,a,f,g){var N,S=1/Math.tan(t/2);return s[0]=S/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=S,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+f)*(N=1/(f-g)),s[14]=2*g*f*N):(s[10]=-1,s[14]=-2*f),s},u.b9=function(s,t,a){var f=Math.sin(a),g=Math.cos(a),N=t[4],S=t[5],T=t[6],M=t[7],V=t[8],F=t[9],H=t[10],Y=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=N*g+V*f,s[5]=S*g+F*f,s[6]=T*g+H*f,s[7]=M*g+Y*f,s[8]=V*g-N*f,s[9]=F*g-S*f,s[10]=H*g-T*f,s[11]=Y*g-M*f,s},u.bA=B,u.bB=Td,u.bC=yo,u.bD=qs,u.ba=Ve,u.bb=ze,u.bc=function(s,t){return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},u.bd=class extends wn{},u.be=Yh,u.bf=cg,u.bg=Ud,u.bi=Ft,u.bj=function(s,t,a=!1){if(Ss===Ya||Ss===Xa||Ss===pd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ja=hn.resolveURL(s),Ss=Ya,Mh=t,gd(),a||Bf()},u.bk=gu,u.bl=function(s,t){const a={};for(let g=0;g<s.length;g++){const N=t&&t[s[g].id]||cu(s[g]);t&&(t[s[g].id]=N);let S=a[N];S||(S=a[N]=[]),S.push(s[g])}const f=[];for(const g in a)f.push(a[g]);return f},u.bm=qt,u.bn=Oy,u.bo=Fy,u.bp=Qp,u.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Ai/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const t=s.bucket.layers[0],a=t.layout,f=t._unevaluatedLayout._values,g={layoutIconSize:f["icon-size"].possiblyEvaluate(new Xr(s.bucket.zoom+1),s.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Xr(s.bucket.zoom+1),s.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Xr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.textSizeData;g.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Xr(V),s.canonical),f["text-size"].possiblyEvaluate(new Xr(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.iconSizeData;g.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Xr(V),s.canonical),f["icon-size"].possiblyEvaluate(new Xr(F),s.canonical)]}const N=a.get("text-line-height")*zi,S=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",T=a.get("text-keep-upright"),M=a.get("text-size");for(const V of s.bucket.features){const F=a.get("text-font").evaluate(V,{},s.canonical).join(","),H=M.evaluate(V,{},s.canonical),Y=g.layoutTextSize.evaluate(V,{},s.canonical),Q=g.layoutIconSize.evaluate(V,{},s.canonical),ee={horizontal:{},vertical:void 0},ce=V.text;let ve,be=[0,0];if(ce){const Le=ce.toString(),Fe=a.get("text-letter-spacing").evaluate(V,{},s.canonical)*zi,nt=jh(Le)?Fe:0,Vt=a.get("text-anchor").evaluate(V,{},s.canonical),Kt=Fd(t,V,s.canonical);if(!Kt){const Dt=a.get("text-radial-offset").evaluate(V,{},s.canonical);be=Dt?Po(Vt,[Dt*zi,pg]):a.get("text-offset").evaluate(V,{},s.canonical).map(ut=>ut*zi)}let Ot=S?"center":a.get("text-justify").evaluate(V,{},s.canonical);const At=a.get("symbol-placement"),Et=At==="point"?a.get("text-max-width").evaluate(V,{},s.canonical)*zi:0,xt=()=>{s.bucket.allowVerticalPlacement&&Rl(Le)&&(ee.vertical=Zl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Vt,"left",nt,be,u.ai.vertical,!0,At,Y,H))};if(!S&&Kt){const Dt=new Set;if(Ot==="auto")for(let un=0;un<Kt.values.length;un+=2)Dt.add(xm(Kt.values[un]));else Dt.add(Ot);let ut=!1;for(const un of Dt)if(!ee.horizontal[un])if(ut)ee.horizontal[un]=ee.horizontal[0];else{const Qt=Zl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,"center",un,nt,be,u.ai.horizontal,!1,At,Y,H);Qt&&(ee.horizontal[un]=Qt,ut=Qt.positionedLines.length===1)}xt()}else{Ot==="auto"&&(Ot=xm(Vt));const Dt=Zl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Vt,Ot,nt,be,u.ai.horizontal,!1,At,Y,H);Dt&&(ee.horizontal[Ot]=Dt),xt(),Rl(Le)&&S&&T&&(ee.vertical=Zl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Vt,Ot,nt,be,u.ai.vertical,!1,At,Y,H))}}let je=!1;if(V.icon&&V.icon.name){const Le=s.imageMap[V.icon.name];Le&&(ve=z0(s.imagePositions[V.icon.name],a.get("icon-offset").evaluate(V,{},s.canonical),a.get("icon-anchor").evaluate(V,{},s.canonical)),je=!!Le.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=je:s.bucket.sdfIcons!==je&&Nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Ne=Wy(ee.horizontal)||ee.vertical;s.bucket.iconsInText=!!Ne&&Ne.iconsInText,(Ne||ve)&&J0(s.bucket,V,ee,ve,s.imageMap,g,Y,Q,be,je,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},u.br=lm,u.bs=Fh,u.bt=Uo,u.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},u.bv=Yp,u.bw=il,u.bx=function(s,t,a,f,g){return A(this,void 0,void 0,function*(){if(fe())try{return yield Rt(s,t,a,f,g)}catch{}return function(N,S,T,M,V){const F=N.width,H=N.height;Ht&&ct||(Ht=new OffscreenCanvas(F,H),ct=Ht.getContext("2d",{willReadFrequently:!0})),Ht.width=F,Ht.height=H,ct.drawImage(N,0,0,F,H);const Y=ct.getImageData(S,T,M,V);return ct.clearRect(0,0,F,H),Y.data}(s,t,a,f,g)})},u.by=zy,u.bz=k,u.c=Sn,u.d=function(s,t){const a=new Image;a.onload=()=>{t(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=St})},a.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});a.src=s.byteLength?URL.createObjectURL(f):St},u.e=ot,u.f=function(s,t){return rn(ot(s,{type:"json"}),t)},u.g=fn,u.h=hn,u.i=zt,u.j=Gr,u.k=Ti,u.l=Fn,u.m=rn,u.n=function(s){return new Yp(s).readFields(I0,[])},u.o=function(s,t,a){if(!s.length)return a(null,[]);let f=s.length;const g=new Array(s.length);let N=null;s.forEach((S,T)=>{t(S,(M,V)=>{M&&(N=M),g[T]=V,--f==0&&a(N,g)})})},u.p=Ny,u.q=wu,u.r=ji,u.s=Ur,u.t=Vf,u.u=It,u.v=qe,u.w=Nt,u.x=Qi,u.y=Da,u.z=function([s,t,a]){return t+=90,t*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(a),y:s*Math.sin(t)*Math.sin(a),z:s*Math.cos(a)}}}),E(["./shared"],function(u){class A{constructor(I){this.keyCache={},I&&this.replace(I)}replace(I){this._layerConfigs={},this._layers={},this.update(I,[])}update(I,G){for(const ie of I){this._layerConfigs[ie.id]=ie;const de=this._layers[ie.id]=u.aC(ie);de._featureFilter=u.a6(de.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of G)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const J=u.bl(Object.values(this._layerConfigs),this.keyCache);for(const ie of J){const de=ie.map(te=>this._layers[te.id]),Ce=de[0];if(Ce.visibility==="none")continue;const xe=Ce.source||"";let ge=this.familiesBySource[xe];ge||(ge=this.familiesBySource[xe]={});const Ee=Ce.sourceLayer||"_geojsonTileLayer";let Ke=ge[Ee];Ke||(Ke=ge[Ee]=[]),Ke.push(de)}}}class k{constructor(I){const G={},J=[];for(const xe in I){const ge=I[xe],Ee=G[xe]={};for(const Ke in ge){const te=ge[+Ke];if(!te||te.bitmap.width===0||te.bitmap.height===0)continue;const Se={x:0,y:0,w:te.bitmap.width+2,h:te.bitmap.height+2};J.push(Se),Ee[Ke]={rect:Se,metrics:te.metrics}}}const{w:ie,h:de}=u.p(J),Ce=new u.q({width:ie||1,height:de||1});for(const xe in I){const ge=I[xe];for(const Ee in ge){const Ke=ge[+Ee];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;const te=G[xe][Ee].rect;u.q.copy(Ke.bitmap,Ce,{x:0,y:0},{x:te.x+1,y:te.y+1},Ke.bitmap)}}this.image=Ce,this.positions=G}}u.bm("GlyphAtlas",k);class B{constructor(I){this.tileID=new u.O(I.tileID.overscaledZ,I.tileID.wrap,I.tileID.canonical.z,I.tileID.canonical.x,I.tileID.canonical.y),this.uid=I.uid,this.zoom=I.zoom,this.pixelRatio=I.pixelRatio,this.tileSize=I.tileSize,this.source=I.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=I.showCollisionBoxes,this.collectResourceTiming=!!I.collectResourceTiming,this.returnDependencies=!!I.returnDependencies,this.promoteId=I.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(I,G,J,ie,de){this.status="parsing",this.data=I,this.collisionBoxArray=new u.a3;const Ce=new u.bn(Object.keys(I.layers).sort()),xe=new u.bo(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const ge={},Ee={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Ke=G.familiesBySource[this.source];for(const vn in Ke){const gn=I.layers[vn];if(!gn)continue;gn.version===1&&u.w(`Vector tile source "${this.source}" layer "${vn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Cr=Ce.encode(vn),ar=[];for(let Tr=0;Tr<gn.length;Tr++){const cr=gn.feature(Tr),Ki=xe.getId(cr,vn);ar.push({feature:cr,id:Ki,index:Tr,sourceLayerIndex:Cr})}for(const Tr of Ke[vn]){const cr=Tr[0];cr.source!==this.source&&u.w(`layer.source = ${cr.source} does not equal this.source = ${this.source}`),cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||cr.visibility!=="none"&&(O(Tr,this.zoom,J),(ge[cr.id]=cr.createBucket({index:xe.bucketLayerIDs.length,layers:Tr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cr,sourceID:this.source})).populate(ar,Ee,this.tileID.canonical),xe.bucketLayerIDs.push(Tr.map(Ki=>Ki.id)))}}let te,Se,Xe,ht;const pt=u.aH(Ee.glyphDependencies,vn=>Object.keys(vn).map(Number));this.inFlightDependencies.forEach(vn=>vn==null?void 0:vn.cancel()),this.inFlightDependencies=[];const ft=++this.dependencySentinel;Object.keys(pt).length?this.inFlightDependencies.push(ie.send("getGlyphs",{uid:this.uid,stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"},(vn,gn)=>{ft===this.dependencySentinel&&(te||(te=vn,Se=gn,kn.call(this)))})):Se={};const Tt=Object.keys(Ee.iconDependencies);Tt.length?this.inFlightDependencies.push(ie.send("getImages",{icons:Tt,source:this.source,tileID:this.tileID,type:"icons"},(vn,gn)=>{ft===this.dependencySentinel&&(te||(te=vn,Xe=gn,kn.call(this)))})):Xe={};const Lt=Object.keys(Ee.patternDependencies);function kn(){if(te)return de(te);if(Se&&Xe&&ht){const vn=new k(Se),gn=new u.bp(Xe,ht);for(const Cr in ge){const ar=ge[Cr];ar instanceof u.a4?(O(ar.layers,this.zoom,J),u.bq({bucket:ar,glyphMap:Se,glyphPositions:vn.positions,imageMap:Xe,imagePositions:gn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ar.hasPattern&&(ar instanceof u.br||ar instanceof u.bs||ar instanceof u.bt)&&(O(ar.layers,this.zoom,J),ar.addFeatures(Ee,this.tileID.canonical,gn.patternPositions))}this.status="done",de(null,{buckets:Object.values(ge).filter(Cr=>!Cr.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vn.image,imageAtlas:gn,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Xe:null,glyphPositions:this.returnDependencies?vn.positions:null})}}Lt.length?this.inFlightDependencies.push(ie.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"patterns"},(vn,gn)=>{ft===this.dependencySentinel&&(te||(te=vn,ht=gn,kn.call(this)))})):ht={},kn.call(this)}}function O(he,I,G){const J=new u.a8(I);for(const ie of he)ie.recalculate(J,G)}function W(he,I){const G=u.l(he.request,(J,ie,de,Ce)=>{if(J)I(J);else if(ie)try{const xe=new u.bw.VectorTile(new u.bv(ie));I(null,{vectorTile:xe,rawData:ie,cacheControl:de,expires:Ce})}catch(xe){const ge=new Uint8Array(ie);let Ee=`Unable to parse the tile at ${he.request.url}, `;Ee+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${xe.messge}`,I(new Error(Ee))}});return()=>{G.cancel(),I()}}class ne{constructor(I,G,J,ie){this.actor=I,this.layerIndex=G,this.availableImages=J,this.loadVectorData=ie||W,this.fetching={},this.loading={},this.loaded={}}loadTile(I,G){const J=I.uid;this.loading||(this.loading={});const ie=!!(I&&I.request&&I.request.collectResourceTiming)&&new u.bu(I.request),de=this.loading[J]=new B(I);de.abort=this.loadVectorData(I,(Ce,xe)=>{if(delete this.loading[J],Ce||!xe)return de.status="done",this.loaded[J]=de,G(Ce);const ge=xe.rawData,Ee={};xe.expires&&(Ee.expires=xe.expires),xe.cacheControl&&(Ee.cacheControl=xe.cacheControl);const Ke={};if(ie){const te=ie.finish();te&&(Ke.resourceTiming=JSON.parse(JSON.stringify(te)))}de.vectorTile=xe.vectorTile,de.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(te,Se)=>{if(delete this.fetching[J],te||!Se)return G(te);G(null,u.e({rawTileData:ge.slice(0)},Se,Ee,Ke))}),this.loaded=this.loaded||{},this.loaded[J]=de,this.fetching[J]={rawTileData:ge,cacheControl:Ee,resourceTiming:Ke}})}reloadTile(I,G){const J=this.loaded,ie=I.uid;if(J&&J[ie]){const de=J[ie];de.showCollisionBoxes=I.showCollisionBoxes,de.status==="parsing"?de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ce,xe)=>{if(Ce||!xe)return G(Ce,xe);let ge;if(this.fetching[ie]){const{rawTileData:Ee,cacheControl:Ke,resourceTiming:te}=this.fetching[ie];delete this.fetching[ie],ge=u.e({rawTileData:Ee.slice(0)},xe,Ke,te)}else ge=xe;G(null,ge)}):de.status==="done"&&(de.vectorTile?de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(I,G){const J=this.loading,ie=I.uid;J&&J[ie]&&J[ie].abort&&(J[ie].abort(),delete J[ie]),G()}removeTile(I,G){const J=this.loaded,ie=I.uid;J&&J[ie]&&delete J[ie],G()}}class me{constructor(){this.loaded={}}loadTile(I,G){return u._(this,void 0,void 0,function*(){const{uid:J,encoding:ie,rawImageData:de,redFactor:Ce,greenFactor:xe,blueFactor:ge,baseShift:Ee}=I,Ke=de.width+2,te=de.height+2,Se=u.a(de)?new u.R({width:Ke,height:te},yield u.bx(de,-1,-1,Ke,te)):de,Xe=new u.by(J,Se,ie,Ce,xe,ge,Ee);this.loaded=this.loaded||{},this.loaded[J]=Xe,G(null,Xe)})}removeTile(I){const G=this.loaded,J=I.uid;G&&G[J]&&delete G[J]}}function ke(he,I){if(he.length!==0){De(he[0],I);for(var G=1;G<he.length;G++)De(he[G],!I)}}function De(he,I){for(var G=0,J=0,ie=0,de=he.length,Ce=de-1;ie<de;Ce=ie++){var xe=(he[ie][0]-he[Ce][0])*(he[Ce][1]+he[ie][1]),ge=G+xe;J+=Math.abs(G)>=Math.abs(xe)?G-ge+xe:xe-ge+G,G=ge}G+J>=0!=!!I&&he.reverse()}var Ae=u.bz(function he(I,G){var J,ie=I&&I.type;if(ie==="FeatureCollection")for(J=0;J<I.features.length;J++)he(I.features[J],G);else if(ie==="GeometryCollection")for(J=0;J<I.geometries.length;J++)he(I.geometries[J],G);else if(ie==="Feature")he(I.geometry,G);else if(ie==="Polygon")ke(I.coordinates,G);else if(ie==="MultiPolygon")for(J=0;J<I.coordinates.length;J++)ke(I.coordinates[J],G);return I});const we=u.bw.VectorTileFeature.prototype.toGeoJSON;var fe={exports:{}},Ve=u.bA,ze=u.bw.VectorTileFeature,Je=Ye;function Ye(he,I){this.options=I||{},this.features=he,this.length=he.length}function ot(he,I){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=I||4096}Ye.prototype.feature=function(he){return new ot(this.features[he],this.options.extent)},ot.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var I=0;I<he.length;I++){for(var G=he[I],J=[],ie=0;ie<G.length;ie++)J.push(new Ve(G[ie][0],G[ie][1]));this.geometry.push(J)}return this.geometry},ot.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,I=1/0,G=-1/0,J=1/0,ie=-1/0,de=0;de<he.length;de++)for(var Ce=he[de],xe=0;xe<Ce.length;xe++){var ge=Ce[xe];I=Math.min(I,ge.x),G=Math.max(G,ge.x),J=Math.min(J,ge.y),ie=Math.max(ie,ge.y)}return[I,J,G,ie]},ot.prototype.toGeoJSON=ze.prototype.toGeoJSON;var wt=u.bB,gt=Je;function sn(he){var I=new wt;return function(G,J){for(var ie in G.layers)J.writeMessage(3,st,G.layers[ie])}(he,I),I.finish()}function st(he,I){var G;I.writeVarintField(15,he.version||1),I.writeStringField(1,he.name||""),I.writeVarintField(5,he.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<he.length;G++)J.feature=he.feature(G),I.writeMessage(2,vt,J);var ie=J.keys;for(G=0;G<ie.length;G++)I.writeStringField(3,ie[G]);var de=J.values;for(G=0;G<de.length;G++)I.writeMessage(4,Wt,de[G])}function vt(he,I){var G=he.feature;G.id!==void 0&&I.writeVarintField(1,G.id),I.writeMessage(2,Nt,he),I.writeVarintField(3,G.type),I.writeMessage(4,zt,G)}function Nt(he,I){var G=he.feature,J=he.keys,ie=he.values,de=he.keycache,Ce=he.valuecache;for(var xe in G.properties){var ge=G.properties[xe],Ee=de[xe];if(ge!==null){Ee===void 0&&(J.push(xe),de[xe]=Ee=J.length-1),I.writeVarint(Ee);var Ke=typeof ge;Ke!=="string"&&Ke!=="boolean"&&Ke!=="number"&&(ge=JSON.stringify(ge));var te=Ke+":"+ge,Se=Ce[te];Se===void 0&&(ie.push(ge),Ce[te]=Se=ie.length-1),I.writeVarint(Se)}}}function on(he,I){return(I<<3)+(7&he)}function yn(he){return he<<1^he>>31}function zt(he,I){for(var G=he.loadGeometry(),J=he.type,ie=0,de=0,Ce=G.length,xe=0;xe<Ce;xe++){var ge=G[xe],Ee=1;J===1&&(Ee=ge.length),I.writeVarint(on(1,Ee));for(var Ke=J===3?ge.length-1:ge.length,te=0;te<Ke;te++){te===1&&J!==1&&I.writeVarint(on(2,Ke-1));var Se=ge[te].x-ie,Xe=ge[te].y-de;I.writeVarint(yn(Se)),I.writeVarint(yn(Xe)),ie+=Se,de+=Xe}J===3&&I.writeVarint(on(7,1))}}function Wt(he,I){var G=typeof he;G==="string"?I.writeStringField(1,he):G==="boolean"?I.writeBooleanField(7,he):G==="number"&&(he%1!=0?I.writeDoubleField(3,he):he<0?I.writeSVarintField(6,he):I.writeVarintField(5,he))}fe.exports=sn,fe.exports.fromVectorTileJs=sn,fe.exports.fromGeojsonVt=function(he,I){I=I||{};var G={};for(var J in he)G[J]=new gt(he[J].features,I),G[J].name=J,G[J].version=I.version,G[J].extent=I.extent;return sn({layers:G})},fe.exports.GeoJSONWrapper=gt;var dn=u.bz(fe.exports);const St={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Rt=Math.fround||(Ht=new Float32Array(1),he=>(Ht[0]=+he,Ht[0]));var Ht;const ct=3,Ie=5,bt=6;class hn{constructor(I){this.options=Object.assign(Object.create(St),I),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(I){const{log:G,minZoom:J,maxZoom:ie}=this.options;G&&console.time("total time");const de=`prepare ${I.length} points`;G&&console.time(de),this.points=I;const Ce=[];for(let ge=0;ge<I.length;ge++){const Ee=I[ge];if(!Ee.geometry)continue;const[Ke,te]=Ee.geometry.coordinates,Se=Rt(Bt(Ke)),Xe=Rt(fn(te));Ce.push(Se,Xe,1/0,ge,-1,1),this.options.reduce&&Ce.push(0)}let xe=this.trees[ie+1]=this._createTree(Ce);G&&console.timeEnd(de);for(let ge=ie;ge>=J;ge--){const Ee=+Date.now();xe=this.trees[ge]=this._createTree(this._cluster(xe,ge)),G&&console.log("z%d: %d clusters in %dms",ge,xe.numItems,+Date.now()-Ee)}return G&&console.timeEnd("total time"),this}getClusters(I,G){let J=((I[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,I[1]));let de=I[2]===180?180:((I[2]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,I[3]));if(I[2]-I[0]>=360)J=-180,de=180;else if(J>de){const te=this.getClusters([J,ie,180,Ce],G),Se=this.getClusters([-180,ie,de,Ce],G);return te.concat(Se)}const xe=this.trees[this._limitZoom(G)],ge=xe.range(Bt(J),fn(Ce),Bt(de),fn(ie)),Ee=xe.data,Ke=[];for(const te of ge){const Se=this.stride*te;Ke.push(Ee[Se+Ie]>1?Sn(Ee,Se,this.clusterProps):this.points[Ee[Se+ct]])}return Ke}getChildren(I){const G=this._getOriginId(I),J=this._getOriginZoom(I),ie="No cluster with the specified id.",de=this.trees[J];if(!de)throw new Error(ie);const Ce=de.data;if(G*this.stride>=Ce.length)throw new Error(ie);const xe=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ge=de.within(Ce[G*this.stride],Ce[G*this.stride+1],xe),Ee=[];for(const Ke of ge){const te=Ke*this.stride;Ce[te+4]===I&&Ee.push(Ce[te+Ie]>1?Sn(Ce,te,this.clusterProps):this.points[Ce[te+ct]])}if(Ee.length===0)throw new Error(ie);return Ee}getLeaves(I,G,J){const ie=[];return this._appendLeaves(ie,I,G=G||10,J=J||0,0),ie}getTile(I,G,J){const ie=this.trees[this._limitZoom(I)],de=Math.pow(2,I),{extent:Ce,radius:xe}=this.options,ge=xe/Ce,Ee=(J-ge)/de,Ke=(J+1+ge)/de,te={features:[]};return this._addTileFeatures(ie.range((G-ge)/de,Ee,(G+1+ge)/de,Ke),ie.data,G,J,de,te),G===0&&this._addTileFeatures(ie.range(1-ge/de,Ee,1,Ke),ie.data,de,J,de,te),G===de-1&&this._addTileFeatures(ie.range(0,Ee,ge/de,Ke),ie.data,-1,J,de,te),te.features.length?te:null}getClusterExpansionZoom(I){let G=this._getOriginZoom(I)-1;for(;G<=this.options.maxZoom;){const J=this.getChildren(I);if(G++,J.length!==1)break;I=J[0].properties.cluster_id}return G}_appendLeaves(I,G,J,ie,de){const Ce=this.getChildren(G);for(const xe of Ce){const ge=xe.properties;if(ge&&ge.cluster?de+ge.point_count<=ie?de+=ge.point_count:de=this._appendLeaves(I,ge.cluster_id,J,ie,de):de<ie?de++:I.push(xe),I.length===J)break}return de}_createTree(I){const G=new u.av(I.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<I.length;J+=this.stride)G.add(I[J],I[J+1]);return G.finish(),G.data=I,G}_addTileFeatures(I,G,J,ie,de,Ce){for(const xe of I){const ge=xe*this.stride,Ee=G[ge+Ie]>1;let Ke,te,Se;if(Ee)Ke=Ft(G,ge,this.clusterProps),te=G[ge],Se=G[ge+1];else{const pt=this.points[G[ge+ct]];Ke=pt.properties;const[ft,Tt]=pt.geometry.coordinates;te=Bt(ft),Se=fn(Tt)}const Xe={type:1,geometry:[[Math.round(this.options.extent*(te*de-J)),Math.round(this.options.extent*(Se*de-ie))]],tags:Ke};let ht;ht=Ee||this.options.generateId?G[ge+ct]:this.points[G[ge+ct]].id,ht!==void 0&&(Xe.id=ht),Ce.features.push(Xe)}}_limitZoom(I){return Math.max(this.options.minZoom,Math.min(Math.floor(+I),this.options.maxZoom+1))}_cluster(I,G){const{radius:J,extent:ie,reduce:de,minPoints:Ce}=this.options,xe=J/(ie*Math.pow(2,G)),ge=I.data,Ee=[],Ke=this.stride;for(let te=0;te<ge.length;te+=Ke){if(ge[te+2]<=G)continue;ge[te+2]=G;const Se=ge[te],Xe=ge[te+1],ht=I.within(ge[te],ge[te+1],xe),pt=ge[te+Ie];let ft=pt;for(const Tt of ht){const Lt=Tt*Ke;ge[Lt+2]>G&&(ft+=ge[Lt+Ie])}if(ft>pt&&ft>=Ce){let Tt,Lt=Se*pt,kn=Xe*pt,vn=-1;const gn=((te/Ke|0)<<5)+(G+1)+this.points.length;for(const Cr of ht){const ar=Cr*Ke;if(ge[ar+2]<=G)continue;ge[ar+2]=G;const Tr=ge[ar+Ie];Lt+=ge[ar]*Tr,kn+=ge[ar+1]*Tr,ge[ar+4]=gn,de&&(Tt||(Tt=this._map(ge,te,!0),vn=this.clusterProps.length,this.clusterProps.push(Tt)),de(Tt,this._map(ge,ar)))}ge[te+4]=gn,Ee.push(Lt/ft,kn/ft,1/0,gn,-1,ft),de&&Ee.push(vn)}else{for(let Tt=0;Tt<Ke;Tt++)Ee.push(ge[te+Tt]);if(ft>1)for(const Tt of ht){const Lt=Tt*Ke;if(!(ge[Lt+2]<=G)){ge[Lt+2]=G;for(let kn=0;kn<Ke;kn++)Ee.push(ge[Lt+kn])}}}}return Ee}_getOriginId(I){return I-this.points.length>>5}_getOriginZoom(I){return(I-this.points.length)%32}_map(I,G,J){if(I[G+Ie]>1){const Ce=this.clusterProps[I[G+bt]];return J?Object.assign({},Ce):Ce}const ie=this.points[I[G+ct]].properties,de=this.options.map(ie);return J&&de===ie?Object.assign({},de):de}}function Sn(he,I,G){return{type:"Feature",id:he[I+ct],properties:Ft(he,I,G),geometry:{type:"Point",coordinates:[(J=he[I],360*(J-.5)),Bn(he[I+1])]}};var J}function Ft(he,I,G){const J=he[I+Ie],ie=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,de=he[I+bt],Ce=de===-1?{}:Object.assign({},G[de]);return Object.assign(Ce,{cluster:!0,cluster_id:he[I+ct],point_count:J,point_count_abbreviated:ie})}function Bt(he){return he/360+.5}function fn(he){const I=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return G<0?0:G>1?1:G}function Bn(he){const I=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(I))/Math.PI-90}function rn(he,I,G,J){for(var ie,de=J,Ce=G-I>>1,xe=G-I,ge=he[I],Ee=he[I+1],Ke=he[G],te=he[G+1],Se=I+3;Se<G;Se+=3){var Xe=Fn(he[Se],he[Se+1],ge,Ee,Ke,te);if(Xe>de)ie=Se,de=Xe;else if(Xe===de){var ht=Math.abs(Se-Ce);ht<xe&&(ie=Se,xe=ht)}}de>J&&(ie-I>3&&rn(he,I,ie,J),he[ie+2]=de,G-ie>3&&rn(he,ie,G,J))}function Fn(he,I,G,J,ie,de){var Ce=ie-G,xe=de-J;if(Ce!==0||xe!==0){var ge=((he-G)*Ce+(I-J)*xe)/(Ce*Ce+xe*xe);ge>1?(G=ie,J=de):ge>0&&(G+=Ce*ge,J+=xe*ge)}return(Ce=he-G)*Ce+(xe=I-J)*xe}function Ur(he,I,G,J){var ie={id:he===void 0?null:he,type:I,geometry:G,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var Ce=de.geometry,xe=de.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Un(de,Ce);else if(xe==="Polygon"||xe==="MultiLineString")for(var ge=0;ge<Ce.length;ge++)Un(de,Ce[ge]);else if(xe==="MultiPolygon")for(ge=0;ge<Ce.length;ge++)for(var Ee=0;Ee<Ce[ge].length;Ee++)Un(de,Ce[ge][Ee])}(ie),ie}function Un(he,I){for(var G=0;G<I.length;G+=3)he.minX=Math.min(he.minX,I[G]),he.minY=Math.min(he.minY,I[G+1]),he.maxX=Math.max(he.maxX,I[G]),he.maxY=Math.max(he.maxY,I[G+1])}function er(he,I,G,J){if(I.geometry){var ie=I.geometry.coordinates,de=I.geometry.type,Ce=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),xe=[],ge=I.id;if(G.promoteId?ge=I.properties[G.promoteId]:G.generateId&&(ge=J||0),de==="Point")Ti(ie,xe);else if(de==="MultiPoint")for(var Ee=0;Ee<ie.length;Ee++)Ti(ie[Ee],xe);else if(de==="LineString")Gr(ie,xe,Ce,!1);else if(de==="MultiLineString"){if(G.lineMetrics){for(Ee=0;Ee<ie.length;Ee++)Gr(ie[Ee],xe=[],Ce,!1),he.push(Ur(ge,"LineString",xe,I.properties));return}Li(ie,xe,Ce,!1)}else if(de==="Polygon")Li(ie,xe,Ce,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(Ee=0;Ee<I.geometry.geometries.length;Ee++)er(he,{id:ge,geometry:I.geometry.geometries[Ee],properties:I.properties},G,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<ie.length;Ee++){var Ke=[];Li(ie[Ee],Ke,Ce,!0),xe.push(Ke)}}he.push(Ur(ge,de,xe,I.properties))}}function Ti(he,I){I.push(qe(he[0])),I.push(xr(he[1])),I.push(0)}function Gr(he,I,G,J){for(var ie,de,Ce=0,xe=0;xe<he.length;xe++){var ge=qe(he[xe][0]),Ee=xr(he[xe][1]);I.push(ge),I.push(Ee),I.push(0),xe>0&&(Ce+=J?(ie*Ee-ge*de)/2:Math.sqrt(Math.pow(ge-ie,2)+Math.pow(Ee-de,2))),ie=ge,de=Ee}var Ke=I.length-3;I[2]=1,rn(I,0,Ke,G),I[Ke+2]=1,I.size=Math.abs(Ce),I.start=0,I.end=I.size}function Li(he,I,G,J){for(var ie=0;ie<he.length;ie++){var de=[];Gr(he[ie],de,G,J),I.push(de)}}function qe(he){return he/360+.5}function xr(he){var I=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return G<0?0:G>1?1:G}function hr(he,I,G,J,ie,de,Ce,xe){if(J/=I,de>=(G/=I)&&Ce<J)return he;if(Ce<G||de>=J)return null;for(var ge=[],Ee=0;Ee<he.length;Ee++){var Ke=he[Ee],te=Ke.geometry,Se=Ke.type,Xe=ie===0?Ke.minX:Ke.minY,ht=ie===0?Ke.maxX:Ke.maxY;if(Xe>=G&&ht<J)ge.push(Ke);else if(!(ht<G||Xe>=J)){var pt=[];if(Se==="Point"||Se==="MultiPoint")zn(te,pt,G,J,ie);else if(Se==="LineString")Ln(te,pt,G,J,ie,!1,xe.lineMetrics);else if(Se==="MultiLineString")pi(te,pt,G,J,ie,!1);else if(Se==="Polygon")pi(te,pt,G,J,ie,!0);else if(Se==="MultiPolygon")for(var ft=0;ft<te.length;ft++){var Tt=[];pi(te[ft],Tt,G,J,ie,!0),Tt.length&&pt.push(Tt)}if(pt.length){if(xe.lineMetrics&&Se==="LineString"){for(ft=0;ft<pt.length;ft++)ge.push(Ur(Ke.id,Se,pt[ft],Ke.tags));continue}Se!=="LineString"&&Se!=="MultiLineString"||(pt.length===1?(Se="LineString",pt=pt[0]):Se="MultiLineString"),Se!=="Point"&&Se!=="MultiPoint"||(Se=pt.length===3?"Point":"MultiPoint"),ge.push(Ur(Ke.id,Se,pt,Ke.tags))}}}return ge.length?ge:null}function zn(he,I,G,J,ie){for(var de=0;de<he.length;de+=3){var Ce=he[de+ie];Ce>=G&&Ce<=J&&(I.push(he[de]),I.push(he[de+1]),I.push(he[de+2]))}}function Ln(he,I,G,J,ie,de,Ce){for(var xe,ge,Ee=Dr(he),Ke=ie===0?Bs:ds,te=he.start,Se=0;Se<he.length-3;Se+=3){var Xe=he[Se],ht=he[Se+1],pt=he[Se+2],ft=he[Se+3],Tt=he[Se+4],Lt=ie===0?Xe:ht,kn=ie===0?ft:Tt,vn=!1;Ce&&(xe=Math.sqrt(Math.pow(Xe-ft,2)+Math.pow(ht-Tt,2))),Lt<G?kn>G&&(ge=Ke(Ee,Xe,ht,ft,Tt,G),Ce&&(Ee.start=te+xe*ge)):Lt>J?kn<J&&(ge=Ke(Ee,Xe,ht,ft,Tt,J),Ce&&(Ee.start=te+xe*ge)):oi(Ee,Xe,ht,pt),kn<G&&Lt>=G&&(ge=Ke(Ee,Xe,ht,ft,Tt,G),vn=!0),kn>J&&Lt<=J&&(ge=Ke(Ee,Xe,ht,ft,Tt,J),vn=!0),!de&&vn&&(Ce&&(Ee.end=te+xe*ge),I.push(Ee),Ee=Dr(he)),Ce&&(te+=xe)}var gn=he.length-3;Xe=he[gn],ht=he[gn+1],pt=he[gn+2],(Lt=ie===0?Xe:ht)>=G&&Lt<=J&&oi(Ee,Xe,ht,pt),gn=Ee.length-3,de&&gn>=3&&(Ee[gn]!==Ee[0]||Ee[gn+1]!==Ee[1])&&oi(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&I.push(Ee)}function Dr(he){var I=[];return I.size=he.size,I.start=he.start,I.end=he.end,I}function pi(he,I,G,J,ie,de){for(var Ce=0;Ce<he.length;Ce++)Ln(he[Ce],I,G,J,ie,de,!1)}function oi(he,I,G,J){he.push(I),he.push(G),he.push(J)}function Bs(he,I,G,J,ie,de){var Ce=(de-I)/(J-I);return he.push(de),he.push(G+(ie-G)*Ce),he.push(1),Ce}function ds(he,I,G,J,ie,de){var Ce=(de-G)/(ie-G);return he.push(I+(J-I)*Ce),he.push(de),he.push(1),Ce}function Mt(he,I){for(var G=[],J=0;J<he.length;J++){var ie,de=he[J],Ce=de.type;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")ie=an(de.geometry,I);else if(Ce==="MultiLineString"||Ce==="Polygon"){ie=[];for(var xe=0;xe<de.geometry.length;xe++)ie.push(an(de.geometry[xe],I))}else if(Ce==="MultiPolygon")for(ie=[],xe=0;xe<de.geometry.length;xe++){for(var ge=[],Ee=0;Ee<de.geometry[xe].length;Ee++)ge.push(an(de.geometry[xe][Ee],I));ie.push(ge)}G.push(Ur(de.id,Ce,ie,de.tags))}return G}function an(he,I){var G=[];G.size=he.size,he.start!==void 0&&(G.start=he.start,G.end=he.end);for(var J=0;J<he.length;J+=3)G.push(he[J]+I,he[J+1],he[J+2]);return G}function Qe(he,I){if(he.transformed)return he;var G,J,ie,de=1<<he.z,Ce=he.x,xe=he.y;for(G=0;G<he.features.length;G++){var ge=he.features[G],Ee=ge.geometry,Ke=ge.type;if(ge.geometry=[],Ke===1)for(J=0;J<Ee.length;J+=2)ge.geometry.push(Hn(Ee[J],Ee[J+1],I,de,Ce,xe));else for(J=0;J<Ee.length;J++){var te=[];for(ie=0;ie<Ee[J].length;ie+=2)te.push(Hn(Ee[J][ie],Ee[J][ie+1],I,de,Ce,xe));ge.geometry.push(te)}}return he.transformed=!0,he}function Hn(he,I,G,J,ie,de){return[Math.round(G*(he*J-ie)),Math.round(G*(I*J-de))]}function Tn(he,I,G,J,ie){for(var de=I===ie.maxZoom?0:ie.tolerance/((1<<I)*ie.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:J,z:I,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<he.length;xe++){Ce.numFeatures++,wr(Ce,he[xe],de,ie);var ge=he[xe].minX,Ee=he[xe].minY,Ke=he[xe].maxX,te=he[xe].maxY;ge<Ce.minX&&(Ce.minX=ge),Ee<Ce.minY&&(Ce.minY=Ee),Ke>Ce.maxX&&(Ce.maxX=Ke),te>Ce.maxY&&(Ce.maxY=te)}return Ce}function wr(he,I,G,J){var ie=I.geometry,de=I.type,Ce=[];if(de==="Point"||de==="MultiPoint")for(var xe=0;xe<ie.length;xe+=3)Ce.push(ie[xe]),Ce.push(ie[xe+1]),he.numPoints++,he.numSimplified++;else if(de==="LineString")pr(Ce,ie,he,G,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(xe=0;xe<ie.length;xe++)pr(Ce,ie[xe],he,G,de==="Polygon",xe===0);else if(de==="MultiPolygon")for(var ge=0;ge<ie.length;ge++){var Ee=ie[ge];for(xe=0;xe<Ee.length;xe++)pr(Ce,Ee[xe],he,G,!0,xe===0)}if(Ce.length){var Ke=I.tags||null;if(de==="LineString"&&J.lineMetrics){for(var te in Ke={},I.tags)Ke[te]=I.tags[te];Ke.mapbox_clip_start=ie.start/ie.size,Ke.mapbox_clip_end=ie.end/ie.size}var Se={geometry:Ce,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:Ke};I.id!==null&&(Se.id=I.id),he.features.push(Se)}}function pr(he,I,G,J,ie,de){var Ce=J*J;if(J>0&&I.size<(ie?Ce:J))G.numPoints+=I.length/3;else{for(var xe=[],ge=0;ge<I.length;ge+=3)(J===0||I[ge+2]>Ce)&&(G.numSimplified++,xe.push(I[ge]),xe.push(I[ge+1])),G.numPoints++;ie&&function(Ee,Ke){for(var te=0,Se=0,Xe=Ee.length,ht=Xe-2;Se<Xe;ht=Se,Se+=2)te+=(Ee[Se]-Ee[ht])*(Ee[Se+1]+Ee[ht+1]);if(te>0===Ke)for(Se=0,Xe=Ee.length;Se<Xe/2;Se+=2){var pt=Ee[Se],ft=Ee[Se+1];Ee[Se]=Ee[Xe-2-Se],Ee[Se+1]=Ee[Xe-1-Se],Ee[Xe-2-Se]=pt,Ee[Xe-1-Se]=ft}}(xe,de),he.push(xe)}}function dt(he,I){var G=(I=this.options=function(ie,de){for(var Ce in de)ie[Ce]=de[Ce];return ie}(Object.create(this.options),I)).debug;if(G&&console.time("preprocess data"),I.maxZoom<0||I.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(I.promoteId&&I.generateId)throw new Error("promoteId and generateId cannot be used together.");var J=function(ie,de){var Ce=[];if(ie.type==="FeatureCollection")for(var xe=0;xe<ie.features.length;xe++)er(Ce,ie.features[xe],de,xe);else er(Ce,ie.type==="Feature"?ie:{geometry:ie},de);return Ce}(he,I);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",I.indexMaxZoom,I.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(ie,de){var Ce=de.buffer/de.extent,xe=ie,ge=hr(ie,1,-1-Ce,Ce,0,-1,2,de),Ee=hr(ie,1,1-Ce,2+Ce,0,-1,2,de);return(ge||Ee)&&(xe=hr(ie,1,-Ce,1+Ce,0,-1,2,de)||[],ge&&(xe=Mt(ge,1).concat(xe)),Ee&&(xe=xe.concat(Mt(Ee,-1)))),xe}(J,I),J.length&&this.splitTile(J,0,0,0),G&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tn(he,I,G){return 32*((1<<he)*G+I)+he}function Ut(he,I){return I?he.properties[I]:he.id}function nr(he,I){if(he==null)return!0;if(he.type==="Feature")return Ut(he,I)!=null;if(he.type==="FeatureCollection"){const G=new Set;for(const J of he.features){const ie=Ut(J,I);if(ie==null||G.has(ie))return!1;G.add(ie)}return!0}return!1}function gi(he,I){const G=new Map;if(he!=null)if(he.type==="Feature")G.set(Ut(he,I),he);else for(const J of he.features)G.set(Ut(J,I),J);return G}dt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},dt.prototype.splitTile=function(he,I,G,J,ie,de,Ce){for(var xe=[he,I,G,J],ge=this.options,Ee=ge.debug;xe.length;){J=xe.pop(),G=xe.pop(),I=xe.pop(),he=xe.pop();var Ke=1<<I,te=tn(I,G,J),Se=this.tiles[te];if(!Se&&(Ee>1&&console.time("creation"),Se=this.tiles[te]=Tn(he,I,G,J,ge),this.tileCoords.push({z:I,x:G,y:J}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",I,G,J,Se.numFeatures,Se.numPoints,Se.numSimplified),console.timeEnd("creation"));var Xe="z"+I;this.stats[Xe]=(this.stats[Xe]||0)+1,this.total++}if(Se.source=he,ie){if(I===ge.maxZoom||I===ie)continue;var ht=1<<ie-I;if(G!==Math.floor(de/ht)||J!==Math.floor(Ce/ht))continue}else if(I===ge.indexMaxZoom||Se.numPoints<=ge.indexMaxPoints)continue;if(Se.source=null,he.length!==0){Ee>1&&console.time("clipping");var pt,ft,Tt,Lt,kn,vn,gn=.5*ge.buffer/ge.extent,Cr=.5-gn,ar=.5+gn,Tr=1+gn;pt=ft=Tt=Lt=null,kn=hr(he,Ke,G-gn,G+ar,0,Se.minX,Se.maxX,ge),vn=hr(he,Ke,G+Cr,G+Tr,0,Se.minX,Se.maxX,ge),he=null,kn&&(pt=hr(kn,Ke,J-gn,J+ar,1,Se.minY,Se.maxY,ge),ft=hr(kn,Ke,J+Cr,J+Tr,1,Se.minY,Se.maxY,ge),kn=null),vn&&(Tt=hr(vn,Ke,J-gn,J+ar,1,Se.minY,Se.maxY,ge),Lt=hr(vn,Ke,J+Cr,J+Tr,1,Se.minY,Se.maxY,ge),vn=null),Ee>1&&console.timeEnd("clipping"),xe.push(pt||[],I+1,2*G,2*J),xe.push(ft||[],I+1,2*G,2*J+1),xe.push(Tt||[],I+1,2*G+1,2*J),xe.push(Lt||[],I+1,2*G+1,2*J+1)}}},dt.prototype.getTile=function(he,I,G){var J=this.options,ie=J.extent,de=J.debug;if(he<0||he>24)return null;var Ce=1<<he,xe=tn(he,I=(I%Ce+Ce)%Ce,G);if(this.tiles[xe])return Qe(this.tiles[xe],ie);de>1&&console.log("drilling down to z%d-%d-%d",he,I,G);for(var ge,Ee=he,Ke=I,te=G;!ge&&Ee>0;)Ee--,Ke=Math.floor(Ke/2),te=Math.floor(te/2),ge=this.tiles[tn(Ee,Ke,te)];return ge&&ge.source?(de>1&&console.log("found parent tile z%d-%d-%d",Ee,Ke,te),de>1&&console.time("drilling down"),this.splitTile(ge.source,Ee,Ke,te,he,I,G),de>1&&console.timeEnd("drilling down"),this.tiles[xe]?Qe(this.tiles[xe],ie):null):null};class bn extends ne{constructor(I,G,J,ie){super(I,G,J),this._dataUpdateable=new Map,this.loadGeoJSON=(de,Ce)=>{const{promoteId:xe}=de;if(de.request)return u.f(de.request,(ge,Ee,Ke,te)=>{this._dataUpdateable=nr(Ee,xe)?gi(Ee,xe):void 0,Ce(ge,Ee,Ke,te)});if(typeof de.data=="string")try{const ge=JSON.parse(de.data);this._dataUpdateable=nr(ge,xe)?gi(ge,xe):void 0,Ce(null,ge)}catch{Ce(new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`))}else de.dataDiff?this._dataUpdateable?(function(ge,Ee,Ke){var te,Se,Xe,ht;if(Ee.removeAll&&ge.clear(),Ee.remove)for(const pt of Ee.remove)ge.delete(pt);if(Ee.add)for(const pt of Ee.add){const ft=Ut(pt,Ke);ft!=null&&ge.set(ft,pt)}if(Ee.update)for(const pt of Ee.update){let ft=ge.get(pt.id);if(ft==null)continue;const Tt=!pt.removeAllProperties&&(((te=pt.removeProperties)===null||te===void 0?void 0:te.length)>0||((Se=pt.addOrUpdateProperties)===null||Se===void 0?void 0:Se.length)>0);if((pt.newGeometry||pt.removeAllProperties||Tt)&&(ft=Object.assign({},ft),ge.set(pt.id,ft),Tt&&(ft.properties=Object.assign({},ft.properties))),pt.newGeometry&&(ft.geometry=pt.newGeometry),pt.removeAllProperties)ft.properties={};else if(((Xe=pt.removeProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(const Lt of pt.removeProperties)Object.prototype.hasOwnProperty.call(ft.properties,Lt)&&delete ft.properties[Lt];if(((ht=pt.addOrUpdateProperties)===null||ht===void 0?void 0:ht.length)>0)for(const{key:Lt,value:kn}of pt.addOrUpdateProperties)ft.properties[Lt]=kn}}(this._dataUpdateable,de.dataDiff,xe),Ce(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ce(new Error(`Cannot update existing geojson data in ${de.source}`)):Ce(new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ie&&(this.loadGeoJSON=ie)}loadGeoJSONTile(I,G){const J=I.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const ie=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ie)return G(null,null);const de=new class{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.N,this.length=xe.length,this._features=xe}feature(xe){return new class{constructor(ge){this._feature=ge,this.extent=u.N,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))}loadGeometry(){if(this._feature.type===1){const ge=[];for(const Ee of this._feature.geometry)ge.push([new u.P(Ee[0],Ee[1])]);return ge}{const ge=[];for(const Ee of this._feature.geometry){const Ke=[];for(const te of Ee)Ke.push(new u.P(te[0],te[1]));ge.push(Ke)}return ge}}toGeoJSON(ge,Ee,Ke){return we.call(this,ge,Ee,Ke)}}(this._features[xe])}}(ie.features);let Ce=dn(de);Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),G(null,{vectorTile:de,rawData:Ce.buffer})}loadData(I,G){var J;(J=this._pendingRequest)===null||J===void 0||J.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ie=!!(I&&I.request&&I.request.collectResourceTiming)&&new u.bu(I.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(I,(de,Ce)=>{if(delete this._pendingCallback,delete this._pendingRequest,de||!Ce)return G(de);if(typeof Ce!="object")return G(new Error(`Input data given to '${I.source}' is not a valid GeoJSON object.`));{Ae(Ce,!0);try{if(I.filter){const ge=u.bC(I.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(Ke=>`${Ke.key}: ${Ke.message}`).join(", "));Ce={type:"FeatureCollection",features:Ce.features.filter(Ke=>ge.value.evaluate({zoom:0},Ke))}}this._geoJSONIndex=I.cluster?new hn(function({superclusterOptions:ge,clusterProperties:Ee}){if(!Ee||!ge)return ge;const Ke={},te={},Se={accumulated:null,zoom:0},Xe={properties:null},ht=Object.keys(Ee);for(const pt of ht){const[ft,Tt]=Ee[pt],Lt=u.bC(Tt),kn=u.bC(typeof ft=="string"?[ft,["accumulated"],["get",pt]]:ft);Ke[pt]=Lt.value,te[pt]=kn.value}return ge.map=pt=>{Xe.properties=pt;const ft={};for(const Tt of ht)ft[Tt]=Ke[Tt].evaluate(Se,Xe);return ft},ge.reduce=(pt,ft)=>{Xe.properties=ft;for(const Tt of ht)Se.accumulated=pt[Tt],pt[Tt]=te[Tt].evaluate(Se,Xe)},ge}(I)).load(Ce.features):function(ge,Ee){return new dt(ge,Ee)}(Ce,I.geojsonVtOptions)}catch(ge){return G(ge)}this.loaded={};const xe={};if(ie){const ge=ie.finish();ge&&(xe.resourceTiming={},xe.resourceTiming[I.source]=JSON.parse(JSON.stringify(ge)))}G(null,xe)}})}reloadTile(I,G){const J=this.loaded;return J&&J[I.uid]?super.reloadTile(I,G):this.loadTile(I,G)}removeSource(I,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(I,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(I.clusterId))}catch(J){G(J)}}getClusterChildren(I,G){try{G(null,this._geoJSONIndex.getChildren(I.clusterId))}catch(J){G(J)}}getClusterLeaves(I,G){try{G(null,this._geoJSONIndex.getLeaves(I.clusterId,I.limit,I.offset))}catch(J){G(J)}}}class vi{constructor(I){this.self=I,this.actor=new u.C(I,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ne,geojson:bn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,J)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=J},this.self.registerRTLTextPlugin=G=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.applyArabicShaping=G.applyArabicShaping,u.bD.processBidirectionalText=G.processBidirectionalText,u.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(I,G){this.referrer=G}setImages(I,G,J){this.availableImages[I]=G;for(const ie in this.workerSources[I]){const de=this.workerSources[I][ie];for(const Ce in de)de[Ce].availableImages=G}J()}setLayers(I,G,J){this.getLayerIndex(I).replace(G),J()}updateLayers(I,G,J){this.getLayerIndex(I).update(G.layers,G.removedIds),J()}loadTile(I,G,J){this.getWorkerSource(I,G.type,G.source).loadTile(G,J)}loadDEMTile(I,G,J){this.getDEMWorkerSource(I,G.source).loadTile(G,J)}reloadTile(I,G,J){this.getWorkerSource(I,G.type,G.source).reloadTile(G,J)}abortTile(I,G,J){this.getWorkerSource(I,G.type,G.source).abortTile(G,J)}removeTile(I,G,J){this.getWorkerSource(I,G.type,G.source).removeTile(G,J)}removeDEMTile(I,G){this.getDEMWorkerSource(I,G.source).removeTile(G)}removeSource(I,G,J){if(!this.workerSources[I]||!this.workerSources[I][G.type]||!this.workerSources[I][G.type][G.source])return;const ie=this.workerSources[I][G.type][G.source];delete this.workerSources[I][G.type][G.source],ie.removeSource!==void 0?ie.removeSource(G,J):J()}loadWorkerSource(I,G,J){try{this.self.importScripts(G.url),J()}catch(ie){J(ie.toString())}}syncRTLPluginState(I,G,J){try{u.bD.setState(G);const ie=u.bD.getPluginURL();if(u.bD.isLoaded()&&!u.bD.isParsed()&&ie!=null){this.self.importScripts(ie);const de=u.bD.isParsed();J(de?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ie}`),de)}}catch(ie){J(ie.toString())}}getAvailableImages(I){let G=this.availableImages[I];return G||(G=[]),G}getLayerIndex(I){let G=this.layerIndexes[I];return G||(G=this.layerIndexes[I]=new A),G}getWorkerSource(I,G,J){return this.workerSources[I]||(this.workerSources[I]={}),this.workerSources[I][G]||(this.workerSources[I][G]={}),this.workerSources[I][G][J]||(this.workerSources[I][G][J]=new this.workerSourceTypes[G]({send:(ie,de,Ce)=>{this.actor.send(ie,de,Ce,I)}},this.getLayerIndex(I),this.getAvailableImages(I))),this.workerSources[I][G][J]}getDEMWorkerSource(I,G){return this.demWorkerSources[I]||(this.demWorkerSources[I]={}),this.demWorkerSources[I][G]||(this.demWorkerSources[I][G]=new me),this.demWorkerSources[I][G]}}return u.i()&&(self.worker=new vi(self)),vi}),E(["./shared"],function(u){var A="3.6.2";class k{static testProp(r){if(!k.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in k.docStyle)return r[c];return r[0]}static create(r,c,m){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(r,c){r.style[k.transformProp]=c}static addEventListener(r,c,m,v={}){r.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(r,c,m,v={}){r.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static mousePos(r,c){const m=r.getBoundingClientRect();return new u.P(c.clientX-m.left-r.clientLeft,c.clientY-m.top-r.clientTop)}static touchPos(r,c){const m=r.getBoundingClientRect(),v=[];for(let w=0;w<c.length;w++)v.push(new u.P(c[w].clientX-m.left-r.clientLeft,c[w].clientY-m.top-r.clientTop));return v}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const B={supported:!1,testSupport:function(b){!ne&&W&&(me?ke(b):O=b)}};let O,W,ne=!1,me=!1;function ke(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,W),b.isContextLost())return;B.supported=!0}catch{}b.deleteTexture(r),ne=!0}var De,Ae;typeof document<"u"&&(W=document.createElement("img"),W.onload=function(){O&&ke(O),O=null,me=!0},W.onerror=function(){ne=!0,O=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,c,m,v;b.resetRequestQueue=()=>{r=[],c=0,m=0,v={}},b.addThrottleControl=z=>{const U=m++;return v[U]=z,U},b.removeThrottleControl=z=>{delete v[z],j()},b.getImage=(z,U,q=!0)=>{B.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*");const X={requestParameters:z,supportImageRefresh:q,callback:U,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),c--),j())}};return r.push(X),j(),X};const w=z=>{const{requestParameters:U,supportImageRefresh:q,callback:X}=z;return u.e(U,{type:"image"}),(q!==!1||u.i()||u.g(U.url)||U.headers&&!Object.keys(U.headers).reduce((ae,le)=>ae&&le==="accept",!0)?u.m:R)(U,(ae,le,pe,oe)=>{P(z,X,ae,le,pe,oe)})},P=(z,U,q,X,ae,le)=>{q?U(q):X instanceof HTMLImageElement||u.a(X)?U(null,X):X&&((pe,oe)=>{typeof createImageBitmap=="function"?u.b(pe,oe):u.d(pe,oe)})(X,(pe,oe)=>{pe!=null?U(pe):oe!=null&&U(null,oe,{cacheControl:ae,expires:le})}),z.cancelled||(z.completed=!0,c--,j())},j=()=>{const z=(()=>{const U=Object.keys(v);let q=!1;if(U.length>0){for(const X of U)if(q=v[X](),q)break}return q})()?u.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<z&&r.length>0;U++){const q=r.shift();if(q.cancelled){U--;continue}const X=w(q);c++,q.innerRequest=X}},R=(z,U)=>{const q=new Image,X=z.url;let ae=!1;const le=z.credentials;return le&&le==="include"?q.crossOrigin="use-credentials":(le&&le==="same-origin"||!u.s(X))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{U(null,q),q.onerror=q.onload=null},q.onerror=()=>{ae||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=X,{cancel:()=>{ae=!0,q.src=""}}}}(De||(De={})),De.resetRequestQueue(),function(b){b.Glyphs="Glyphs",b.Image="Image",b.Source="Source",b.SpriteImage="SpriteImage",b.SpriteJSON="SpriteJSON",b.Style="Style",b.Tile="Tile",b.Unknown="Unknown"}(Ae||(Ae={}));class we{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}normalizeSpriteURL(r,c,m){const v=function(w){const P=w.match(fe);if(!P)throw new Error(`Unable to parse URL "${w}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(r);return v.path+=`${c}${m}`,function(w){const P=w.params.length?`?${w.params.join("&")}`:"";return`${w.protocol}://${w.authority}${w.path}${P}`}(v)}setTransformRequest(r){this._transformRequestFn=r}}const fe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ve(b){var r=new u.A(3);return r[0]=b[0],r[1]=b[1],r[2]=b[2],r}var ze,Je=function(b,r,c){return b[0]=r[0]-c[0],b[1]=r[1]-c[1],b[2]=r[2]-c[2],b};ze=new u.A(3),u.A!=Float32Array&&(ze[0]=0,ze[1]=0,ze[2]=0);var Ye=function(b){var r=b[0],c=b[1];return r*r+c*c};function ot(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const c=[];for(const{id:m,url:v}of b){const w=`${m}${v}`;c.indexOf(w)===-1&&(c.push(w),r.push({id:m,url:v}))}}return r}function wt(b,r,c,m,v){if(m)return void b(m);if(v!==Object.values(r).length||v!==Object.values(c).length)return;const w={};for(const P in r){w[P]={};const j=u.h.getImageCanvasContext(c[P]),R=r[P];for(const z in R){const{width:U,height:q,x:X,y:ae,sdf:le,pixelRatio:pe,stretchX:oe,stretchY:Te,content:Oe}=R[z];w[P][z]={data:null,pixelRatio:pe,sdf:le,stretchX:oe,stretchY:Te,content:Oe,spriteData:{width:U,height:q,x:X,y:ae,context:j}}}}b(null,w)}(function(){var b=new u.A(2);u.A!=Float32Array&&(b[0]=0,b[1]=0)})();class gt{constructor(r,c,m,v){this.context=r,this.format=m,this.texture=r.gl.createTexture(),this.update(c,v)}update(r,c,m){const{width:v,height:w}=r,P=!(this.size&&this.size[0]===v&&this.size[1]===w||m),{context:j}=this,{gl:R}=j;if(this.useMipmap=!!(c&&c.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!c||c.premultiply!==!1)),P)this.size=[v,w],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,v,w,0,this.format,R.UNSIGNED_BYTE,r.data);else{const{x:z,y:U}=m||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?R.texSubImage2D(R.TEXTURE_2D,0,z,U,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,z,U,v,w,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(r,c,m){const{context:v}=this,{gl:w}=v;w.bindTexture(w.TEXTURE_2D,this.texture),m!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=w.LINEAR),r!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,r),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,m||r),this.filter=r),c!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,c),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function sn(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class st extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new u.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,c){if(!r)return!0;let m=0;for(const v of r){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,w=m&&m.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||w<r[1]||r[2]<0||v<r[2]||r[3]<0||w<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,m=!0){const v=this.getImage(r);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,c){let m=!0;if(!this.isLoaded())for(const v of r)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(r,c):this.requestors.push({ids:r,callback:c})}_notify(r,c){const m={};for(const v of r){let w=this.getImage(v);w||(this.fire(new u.k("styleimagemissing",{id:v})),w=this.getImage(v)),w?m[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:u.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],m=this.getImage(r);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new u.I(v,m);this.patterns[r]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new gt(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const w in this.patterns)r.push(this.patterns[w].bin);const{w:c,h:m}=u.p(r),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const w in this.patterns){const{bin:P}=this.patterns[w],j=P.x+1,R=P.y+1,z=this.getImage(w).data,U=z.width,q=z.height;u.R.copy(z,v,{x:0,y:0},{x:j,y:R},{width:U,height:q}),u.R.copy(z,v,{x:0,y:q-1},{x:j,y:R-1},{width:U,height:1}),u.R.copy(z,v,{x:0,y:0},{x:j,y:R+q},{width:U,height:1}),u.R.copy(z,v,{x:U-1,y:0},{x:j-1,y:R},{width:1,height:q}),u.R.copy(z,v,{x:0,y:0},{x:j+U,y:R},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||u.w(`Image with ID: "${c}" was not found`),sn(m)&&this.updateImage(c,m)}}}const vt=1e20;function Nt(b,r,c,m,v,w,P,j,R){for(let z=r;z<r+m;z++)on(b,c*w+z,w,v,P,j,R);for(let z=c;z<c+v;z++)on(b,z*w+r,1,m,P,j,R)}function on(b,r,c,m,v,w,P){w[0]=0,P[0]=-vt,P[1]=vt,v[0]=b[r];for(let j=1,R=0,z=0;j<m;j++){v[j]=b[r+j*c];const U=j*j;do{const q=w[R];z=(v[j]-v[q]+U-q*q)/(j-q)/2}while(z<=P[R]&&--R>-1);R++,w[R]=j,P[R]=z,P[R+1]=vt}for(let j=0,R=0;j<m;j++){for(;P[R+1]<j;)R++;const z=w[R],U=j-z;b[r+j*c]=v[z]+U*U}}class yn{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r,c){const m=[];for(const v in r)for(const w of r[v])m.push({stack:v,id:w});u.o(m,({stack:v,id:w},P)=>{let j=this.entries[v];j||(j=this.entries[v]={glyphs:{},requests:{},ranges:{}});let R=j.glyphs[w];if(R!==void 0)return void P(null,{stack:v,id:w,glyph:R});if(R=this._tinySDF(j,v,w),R)return j.glyphs[w]=R,void P(null,{stack:v,id:w,glyph:R});const z=Math.floor(w/256);if(256*z>65535)return void P(new Error("glyphs > 65535 not supported"));if(j.ranges[z])return void P(null,{stack:v,id:w,glyph:R});if(!this.url)return void P(new Error("glyphsUrl is not set"));let U=j.requests[z];U||(U=j.requests[z]=[],yn.loadGlyphRange(v,z,this.url,this.requestManager,(q,X)=>{if(X){for(const ae in X)this._doesCharSupportLocalGlyph(+ae)||(j.glyphs[+ae]=X[+ae]);j.ranges[z]=!0}for(const ae of U)ae(q,X);delete j.requests[z]})),U.push((q,X)=>{q?P(q):X&&P(null,{stack:v,id:w,glyph:X[w]||null})})},(v,w)=>{if(v)c(v);else if(w){const P={};for(const{stack:j,id:R,glyph:z}of w)(P[j]||(P[j]={}))[R]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};c(null,P)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let w=r.tinySDF;if(!w){let j="400";/bold/i.test(c)?j="900":/medium/i.test(c)?j="500":/light/i.test(c)&&(j="200"),w=r.tinySDF=new yn.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:j})}const P=w.draw(String.fromCharCode(m));return{id:m,bitmap:new u.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}yn.loadGlyphRange=function(b,r,c,m,v){const w=256*r,P=w+255,j=m.transformRequest(c.replace("{fontstack}",b).replace("{range}",`${w}-${P}`),Ae.Glyphs);u.l(j,(R,z)=>{if(R)v(R);else if(z){const U={};for(const q of u.n(z))U[q.id]=q;v(null,U)}})},yn.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:w="normal",fontStyle:P="normal"}={}){this.buffer=r,this.cutoff=m,this.radius=c;const j=this.size=b+4*r,R=this._createCanvas(j),z=this.ctx=R.getContext("2d",{willReadFrequently:!0});z.font=`${P} ${w} ${b}px ${v}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:w}=this.ctx.measureText(b),P=Math.ceil(c),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-v))),R=Math.min(this.size-this.buffer,P+Math.ceil(m)),z=j+2*this.buffer,U=R+2*this.buffer,q=Math.max(z*U,0),X=new Uint8ClampedArray(q),ae={data:X,width:z,height:U,glyphWidth:j,glyphHeight:R,glyphTop:P,glyphLeft:0,glyphAdvance:r};if(j===0||R===0)return ae;const{ctx:le,buffer:pe,gridInner:oe,gridOuter:Te}=this;le.clearRect(pe,pe,j,R),le.fillText(b,pe,pe+P);const Oe=le.getImageData(pe,pe,j,R);Te.fill(vt,0,q),oe.fill(0,0,q);for(let ye=0;ye<R;ye++)for(let Pe=0;Pe<j;Pe++){const Be=Oe.data[4*(ye*j+Pe)+3]/255;if(Be===0)continue;const He=(ye+pe)*z+Pe+pe;if(Be===1)Te[He]=0,oe[He]=vt;else{const tt=.5-Be;Te[He]=tt>0?tt*tt:0,oe[He]=tt<0?tt*tt:0}}Nt(Te,0,0,z,U,z,this.f,this.v,this.z),Nt(oe,pe,pe,j,R,z,this.f,this.v,this.z);for(let ye=0;ye<q;ye++){const Pe=Math.sqrt(Te[ye])-Math.sqrt(oe[ye]);X[ye]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return ae}};class zt{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,c){return u.z(r.expression.evaluate(c))}interpolate(r,c,m){return{x:u.B.number(r.x,c.x,m),y:u.B.number(r.y,c.y,m),z:u.B.number(r.z,c.z,m)}}}let Wt;class dn extends u.E{constructor(r){super(),Wt=Wt||new u.r({anchor:new u.D(u.v.light.anchor),position:new zt,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Wt),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(u.t,r,c))for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m){return(!m||m.validate!==!1)&&u.x(this,r.call(u.y,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}}class St{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const m=r.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,c)),this.dashEntry[m]}getDashRanges(r,c,m){const v=[];let w=r.length%2==1?-r[r.length-1]*m:0,P=r[0]*m,j=!0;v.push({left:w,right:P,isDash:j,zeroLength:r[0]===0});let R=r[0];for(let z=1;z<r.length;z++){j=!j;const U=r[z];w=R*m,R+=U,P=R*m,v.push({left:w,right:P,isDash:j,zeroLength:U===0})}return v}addRoundDash(r,c,m){const v=c/2;for(let w=-m;w<=m;w++){const P=this.width*(this.nextRow+m+w);let j=0,R=r[j];for(let z=0;z<this.width;z++){z/R.right>1&&(R=r[++j]);const U=Math.abs(z-R.left),q=Math.abs(z-R.right),X=Math.min(U,q);let ae;const le=w/m*(v+1);if(R.isDash){const pe=v-Math.abs(le);ae=Math.sqrt(X*X+pe*pe)}else ae=v-Math.sqrt(X*X+le*le);this.data[P+z]=Math.max(0,Math.min(255,ae+128))}}}addRegularDash(r){for(let j=r.length-1;j>=0;--j){const R=r[j],z=r[j+1];R.zeroLength?r.splice(j,1):z&&z.isDash===R.isDash&&(z.left=R.left,r.splice(j,1))}const c=r[0],m=r[r.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let w=0,P=r[w];for(let j=0;j<this.width;j++){j/P.right>1&&(P=r[++w]);const R=Math.abs(j-P.left),z=Math.abs(j-P.right),U=Math.min(R,z);this.data[v+j]=Math.max(0,Math.min(255,(P.isDash?U:-U)+128))}}addDash(r,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return u.w("LineAtlas out of space"),null;let w=0;for(let j=0;j<r.length;j++)w+=r[j];if(w!==0){const j=this.width/w,R=this.getDashRanges(r,this.width,j);c?this.addRoundDash(R,j,m):this.addRegularDash(R)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:w};return this.nextRow+=v,this.dirty=!0,P}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Rt{constructor(r,c,m){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=m;const v=this.workerPool.acquire(m);for(let w=0;w<v.length;w++){const P=new u.C(v[w],c,m);P.name=`Worker ${w}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c,m){u.o(this.actors,(v,w)=>{v.send(r,c,w)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Ht(b,r,c){const m=function(v,w){if(v)return c(v);if(w){const P=u.F(u.e(w,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(P.vectorLayers=w.vector_layers,P.vectorLayerIds=P.vectorLayers.map(j=>j.id)),c(null,P)}};return b.url?u.f(r.transformRequest(b.url,Ae.Source),m):u.h.frame(()=>m(null,b))}class ct{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}extend(r){const c=this._sw,m=this._ne;let v,w;if(r instanceof u.L)v=r,w=r;else{if(!(r instanceof ct))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ct.convert(r)):this.extend(u.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.L.convert(r)):this;if(v=r._sw,w=r._ne,!v||!w)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new u.L(v.lng,v.lat),this._ne=new u.L(w.lng,w.lat)),this}getCenter(){return new u.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.L(this.getWest(),this.getNorth())}getSouthEast(){return new u.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:m}=u.L.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}static convert(r){return r instanceof ct?r:r&&new ct(r)}static fromLngLat(r,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*r.lat);return new ct(new u.L(r.lng-v,r.lat-m),new u.L(r.lng+v,r.lat+m))}}class Ie{constructor(r,c,m){this.bounds=ct.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),m=Math.floor(u.G(this.bounds.getWest())*c),v=Math.floor(u.H(this.bounds.getNorth())*c),w=Math.ceil(u.G(this.bounds.getEast())*c),P=Math.ceil(u.H(this.bounds.getSouth())*c);return r.x>=m&&r.x<w&&r.y>=v&&r.y<P}}class bt extends u.E{constructor(r,c,m,v){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ht(this._options,this.map._requestManager,(w,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),w?this.fire(new u.j(w)):P&&(u.e(this,P),P.bounds&&(this.tileBounds=new Ie(P.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.e({},this._options),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.F(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,c){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,Ae.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(P,j){return delete r.request,r.aborted?c(null):P&&P.status!==404?c(P):(j&&j.resourceTiming&&(r.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&r.setExpiryData(j),r.loadVectorData(j,this.map.painter),c(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=c:r.request=r.actor.send("reloadTile",v,w.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",v,w.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class hn extends u.E{constructor(r,c,m,v){super(),this.id=r,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ht(this._options,this.map._requestManager,(r,c)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new u.j(r)):c&&(u.e(this,c),c.bounds&&(this.tileBounds=new Ie(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,c){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=De.getImage(this.map._requestManager.transformRequest(m,Ae.Tile),(v,w,P)=>{if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(v)r.state="errored",c(v);else if(w){this.map._refreshExpiredTiles&&P&&r.setExpiryData(P);const j=this.map.painter.context,R=j.gl;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new gt(j,w,R.RGBA,{useMipmap:!0}),r.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),r.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(r,c){r.request&&(r.request.cancel(),delete r.request),c()}unloadTile(r,c){r.texture&&this.map.painter.saveTileTexture(r.texture),c()}hasTransition(){return!1}}class Sn extends hn{constructor(r,c,m,v){super(r,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r,c){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(m,Ae.Tile);function w(P,j){P&&(r.state="errored",c(P)),j&&(r.dem=j,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",c(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=De.getImage(v,(P,j,R)=>u._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(P)r.state="errored",c(P);else if(j){this.map._refreshExpiredTiles&&r.setExpiryData(R);const z=u.a(j)&&u.J()?j:yield function(q){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.K()){const X=q.width+2,ae=q.height+2;try{return new u.R({width:X,height:ae},yield u.M(q,-1,-1,X,ae))}catch{}}return u.h.getImageData(q,1)})}(j),U={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",U,w))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const c=r.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,w=c.x===0?r.wrap-1:r.wrap,P=(c.x+1+m)%m,j=c.x+1===m?r.wrap+1:r.wrap,R={};return R[new u.O(r.overscaledZ,w,c.z,v,c.y).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(R[new u.O(r.overscaledZ,w,c.z,v,c.y-1).key]={backfilled:!1},R[new u.O(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<m&&(R[new u.O(r.overscaledZ,w,c.z,v,c.y+1).key]={backfilled:!1},R[new u.O(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,c.z,P,c.y+1).key]={backfilled:!1}),R}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class Ft extends u.E{constructor(r,c,m,v){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const w=u.N/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*w,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*w,extent:u.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.N,radius:(c.clusterRadius||50)*w,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},c),this}getClusterChildren(r,c){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},c),this}getClusterLeaves(r,c,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:c,offset:m},v),this}_updateWorkerData(r){const c=u.e({},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(u.h.resolveURL(this._data),Ae.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(m,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let w=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(w=v.resourceTiming[this.id].slice(0)),m)return void this.fire(new u.j(m));const P={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&u.e(P,{resourceTiming:w}),this.fire(new u.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,c){const m=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const v={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(m,v,(w,P)=>(delete r.request,r.unloadVectorData(),r.aborted?c(null):w?c(w):(r.loadVectorData(P,this.map.painter,m==="reloadTile"),c(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Bt=u.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class fn extends u.E{constructor(r,c,m,v){super(),this.load=(w,P)=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=De.getImage(this.map._requestManager.transformRequest(this.url,Ae.Image),(j,R)=>{this._request=null,this._loaded=!0,j?this.fire(new u.j(j)):R&&(this.image=R,w&&(this.coordinates=w),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new gt(w,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(u.U.fromLngLat);this.tileID=function(v){let w=1/0,P=1/0,j=-1/0,R=-1/0;for(const X of v)w=Math.min(w,X.x),P=Math.min(P,X.y),j=Math.max(j,X.x),R=Math.max(R,X.y);const z=Math.max(j-w,R-P),U=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),q=Math.pow(2,U);return new u.W(U,Math.floor((w+j)/2*q),Math.floor((P+R)/2*q))}(c),this.minzoom=this.maxzoom=this.tileID.z;const m=c.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new u.V,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,u.N,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,u.N),this._boundsArray.emplaceBack(m[2].x,m[2].y,u.N,u.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,c){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},c(null)):(r.state="errored",c(null))}hasTransition(){return!1}}class Bn extends fn{constructor(r,c,m,v){super(r,c,m,v),this.load=()=>{this._loaded=!1;const w=this.options;this.urls=[];for(const P of w.urls)this.urls.push(this.map._requestManager.transformRequest(P,Ae.Source).url);u.X(this.urls,(P,j)=>{this._loaded=!0,P?this.fire(new u.j(P)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new gt(w,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new u.j(new u.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class rn extends fn{constructor(r,c,m,v){super(r,c,m,v),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,j=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new gt(P,this.canvas,j.RGBA,{premultiply:!0});let R=!1;for(const z in this.tiles){const U=this.tiles[z];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,R=!0)}R&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(P=>typeof P!="number"))||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Fn={},Ur=b=>{switch(b){case"geojson":return Ft;case"image":return fn;case"raster":return hn;case"raster-dem":return Sn;case"vector":return bt;case"video":return Bn;case"canvas":return rn}return Fn[b]};function Un(b,r){const c=u.Z();return u.$(c,c,[1,1,0]),u.a0(c,c,[.5*b.width,.5*b.height,1]),u.a1(c,c,b.calculatePosMatrix(r.toUnwrapped()))}function er(b,r,c,m,v,w){const P=function(q,X,ae){if(q)for(const le of q){const pe=X[le];if(pe&&pe.source===ae&&pe.type==="fill-extrusion")return!0}else for(const le in X){const pe=X[le];if(pe.source===ae&&pe.type==="fill-extrusion")return!0}return!1}(v&&v.layers,r,b.id),j=w.maxPitchScaleFactor(),R=b.tilesIn(m,j,P);R.sort(Ti);const z=[];for(const q of R)z.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,c,b._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,v,w,j,Un(b.transform,q.tileID))});const U=function(q){const X={},ae={};for(const le of q){const pe=le.queryResults,oe=le.wrappedTileID,Te=ae[oe]=ae[oe]||{};for(const Oe in pe){const ye=pe[Oe],Pe=Te[Oe]=Te[Oe]||{},Be=X[Oe]=X[Oe]||[];for(const He of ye)Pe[He.featureIndex]||(Pe[He.featureIndex]=!0,Be.push(He))}}return X}(z);for(const q in U)U[q].forEach(X=>{const ae=X.feature,le=b.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=le});return U}function Ti(b,r){const c=b.tileID,m=r.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}class Gr{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(v,w){const P={};if(!w)return P;for(const j of v){const R=j.layerIds.map(z=>w.getLayer(z)).filter(Boolean);if(R.length!==0){j.layers=R,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(z=>R.filter(U=>U.id===z)[0]));for(const z of R)P[z.id]=j}}return P}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const w=this.buckets[v];if(w instanceof u.a4){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const w=this.buckets[v];if(w instanceof u.a4&&w.hasRTLText){this.hasRTLText=!0,u.a5();break}}this.queryPadding=0;for(const v in this.buckets){const w=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(w))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new gt(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new gt(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,m,v,w,P,j,R,z,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:w,scale:P,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:j,queryPadding:this.queryPadding*z},r,c,m):{}}querySourceFeatures(r,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),w=c&&c.sourceLayer?c.sourceLayer:"",P=v._geojsonTileLayer||v[w];if(!P)return;const j=u.a6(c&&c.filter),{z:R,x:z,y:U}=this.tileID.canonical,q={z:R,x:z,y:U};for(let X=0;X<P.length;X++){const ae=P.feature(X);if(j.needGeometry){const oe=u.a7(ae,!0);if(!j.filter(new u.a8(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!j.filter(new u.a8(this.tileID.overscaledZ),ae))continue;const le=m.getId(ae,w),pe=new u.a9(ae,R,z,U,le);pe.tile=q,r.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const m=u.aa(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const w=this.expirationTime-c;w?this.expirationTime=m+Math.max(w,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const w=this.buckets[v],P=w.layers[0].sourceLayer||"_geojsonTileLayer",j=m[P],R=r[P];if(!j||!R||Object.keys(R).length===0)continue;w.update(R,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=c&&c.style&&c.style.getLayer(v);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=u.h.now()+r}setDependencies(r,c){const m={};for(const v of c)m[v]=!0;this.dependencies[r]=m}hasDependency(r,c){for(const m of r){const v=this.dependencies[m];if(v){for(const w of c)if(v[w])return!0}}return!1}}class Li{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,m){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const w={value:c,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(r,w)},m)),this.data[v].push(w),this.order.push(v),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const m=r.wrapped().key,v=c===void 0?0:this.data[m].indexOf(c),w=this.data[m][v];return this.data[m].splice(v,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const m in this.data)for(const v of this.data[m])r(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class qe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,m){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},u.e(this.stateChanges[r][v],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const w in this.state[r])w!==v&&(this.deletedStates[r][w]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const w in this.state[r][v])m[w]||(this.deletedStates[r][v][w]=null)}else for(const w in m)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][w]===null&&delete this.deletedStates[r][v][w]}removeFeatureState(r,c,m){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][m]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(m in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][m]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const m=String(c),v=u.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const w=this.deletedStates[r][c];if(w===null)return{};for(const P in w)delete v[P]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const w={};for(const P in this.stateChanges[v])this.state[v][P]||(this.state[v][P]={}),u.e(this.state[v][P],this.stateChanges[v][P]),w[P]=this.state[v][P];m[v]=w}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const w={};if(this.deletedStates[v]===null)for(const P in this.state[v])w[P]={},this.state[v][P]={};else for(const P in this.deletedStates[v]){if(this.deletedStates[v][P]===null)this.state[v][P]={};else for(const j of Object.keys(this.deletedStates[v][P]))delete this.state[v][P][j];w[P]=this.state[v][P]}m[v]=m[v]||{},u.e(m[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in r)r[v].setFeatureState(m,c)}}class xr extends u.E{constructor(r,c,m){super(),this.id=r,this.dispatcher=m,this.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,w,P,j)=>{const R=new(Ur(w.type))(v,w,P,j);if(R.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${R.id}`);return R})(r,c,m,this),this._tiles={},this._cache=new Li(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new qe,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c){return this._source.loadTile(r,c)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(hr).map(r=>r.key)}getRenderableIds(r){const c=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&c.push(this._tiles[m]);return r?c.sort((m,v)=>{const w=m.tileID,P=v.tileID,j=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),R=new u.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-P.overscaledZ||R.y-j.y||R.x-j.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(hr).map(m=>m.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,r,c)))}_tileLoaded(r,c,m,v){if(v)return r.state="errored",void(v.status!==404?this._source.fire(new u.j(v,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=u.h.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const w=c[v];if(r.neighboringTiles&&r.neighboringTiles[w]){const P=this.getTileByID(w);m(r,P),m(P,r)}}function m(v,w){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let P=w.tileID.canonical.x-v.tileID.canonical.x;const j=w.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),z=w.tileID.key;P===0&&j===0||Math.abs(j)>1||(Math.abs(P)>1&&(Math.abs(P+R)===1?P+=R:Math.abs(P-R)===1&&(P-=R)),w.dem&&v.dem&&(v.dem.backfillBorder(w.dem,P,j),v.neighboringTiles&&v.neighboringTiles[z]&&(v.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,m,v){for(const w in this._tiles){let P=this._tiles[w];if(v[w]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>m)continue;let j=P.tileID;for(;P&&P.tileID.overscaledZ>c+1;){const z=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[z.key],P&&P.hasData()&&(j=z)}let R=j;for(;R.overscaledZ>c;)if(R=R.scaledTo(R.overscaledZ-1),r[R.key]){v[j.key]=j;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=r.overscaledZ-1;m>=c;m--){const v=r.scaledTo(m),w=this._getLoadedTile(v);if(w)return w}}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?u.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(w)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const m={};for(const v in this._tiles){const w=this._tiles[v];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+c),m[w.tileID.key]=w}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(r,c){if(this.transform=r,this.terrain=c,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new u.O(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(m=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(m=m.filter(U=>this._source.hasTile(U)))):m=[];const v=r.coveringZoomLevel(this._source),w=Math.max(v-xr.maxOverzooming,this._source.minzoom),P=Math.max(v+xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const q of m)if(q.canonical.z>this._source.minzoom){const X=q.scaledTo(q.canonical.z-1);U[X.key]=X;const ae=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));U[ae.key]=ae}m=m.concat(Object.values(U))}const j=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(m,v);if(zn(this._source.type)){const U={},q={},X=Object.keys(R),ae=u.h.now();for(const le of X){const pe=R[le],oe=this._tiles[le];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=ae)continue;const Te=this.findLoadedParent(pe,w);Te&&(this._addTile(Te.tileID),U[Te.tileID.key]=Te.tileID),q[le]=pe}this._retainLoadedChildren(q,v,P,R);for(const le in U)R[le]||(this._coveredTiles[le]=!0,R[le]=U[le]);if(c){const le={},pe={};for(const oe of m)this._tiles[oe.key].hasData()?le[oe.key]=oe:pe[oe.key]=oe;for(const oe in pe){const Te=pe[oe].children(this._source.maxzoom);this._tiles[Te[0].key]&&this._tiles[Te[1].key]&&this._tiles[Te[2].key]&&this._tiles[Te[3].key]&&(le[Te[0].key]=R[Te[0].key]=Te[0],le[Te[1].key]=R[Te[1].key]=Te[1],le[Te[2].key]=R[Te[2].key]=Te[2],le[Te[3].key]=R[Te[3].key]=Te[3],delete pe[oe])}for(const oe in pe){const Te=this.findLoadedParent(pe[oe],this._source.minzoom);if(Te){le[Te.tileID.key]=R[Te.tileID.key]=Te.tileID;for(const Oe in le)le[Oe].isChildOf(Te.tileID)&&delete le[Oe]}}for(const oe in this._tiles)le[oe]||(this._coveredTiles[oe]=!0)}}for(const U in R)this._tiles[U].clearFadeHold();const z=u.ab(this._tiles,R);for(const U of z){const q=this._tiles[U];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){const m={},v={},w=Math.max(c-xr.maxOverzooming,this._source.minzoom),P=Math.max(c+xr.maxUnderzooming,this._source.minzoom),j={};for(const R of r){const z=this._addTile(R);m[R.key]=R,z.hasData()||c<this._source.maxzoom&&(j[R.key]=R)}this._retainLoadedChildren(j,c,P,m);for(const R of r){let z=this._tiles[R.key];if(z.hasData())continue;if(c+1>this._source.maxzoom){const q=R.children(this._source.maxzoom)[0],X=this.getTile(q);if(X&&X.hasData()){m[q.key]=q;continue}}else{const q=R.children(this._source.maxzoom);if(m[q[0].key]&&m[q[1].key]&&m[q[2].key]&&m[q[3].key])continue}let U=z.wasRequested();for(let q=R.overscaledZ-1;q>=w;--q){const X=R.scaledTo(q);if(v[X.key])break;if(v[X.key]=!0,z=this.getTile(X),!z&&U&&(z=this._addTile(X)),z){const ae=z.hasData();if((U||ae)&&(m[X.key]=X),U=z.wasRequested(),ae)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let m,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const w=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;v=w}for(const w of c)this._loadedParentTiles[w]=m}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const m=c;return c||(c=new Gr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,r.key,c.state))),c.uses++,this._tiles[r.key]=c,m||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=c.getExpiryTimeout();m&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},m))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,m){const v=[],w=this.transform;if(!w)return v;const P=m?w.getCameraQueryGeometry(r):r,j=r.map(le=>w.pointCoordinate(le,this.terrain)),R=P.map(le=>w.pointCoordinate(le,this.terrain)),z=this.getIds();let U=1/0,q=1/0,X=-1/0,ae=-1/0;for(const le of R)U=Math.min(U,le.x),q=Math.min(q,le.y),X=Math.max(X,le.x),ae=Math.max(ae,le.y);for(let le=0;le<z.length;le++){const pe=this._tiles[z[le]];if(pe.holdingForFade())continue;const oe=pe.tileID,Te=Math.pow(2,w.zoom-pe.tileID.overscaledZ),Oe=c*pe.queryPadding*u.N/pe.tileSize/Te,ye=[oe.getTilePoint(new u.U(U,q)),oe.getTilePoint(new u.U(X,ae))];if(ye[0].x-Oe<u.N&&ye[0].y-Oe<u.N&&ye[1].x+Oe>=0&&ye[1].y+Oe>=0){const Pe=j.map(He=>oe.getTilePoint(He)),Be=R.map(He=>oe.getTilePoint(He));v.push({tile:pe,tileID:oe,queryGeometry:Pe,cameraQueryGeometry:Be,scale:Te})}}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(m=>this._tiles[m].tileID);for(const m of c)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(zn(this._source.type)){const r=u.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,m){this._state.updateState(r=r||"_geojsonTileLayer",c,m)}removeFeatureState(r,c,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,m)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,m){const v=this._tiles[r];v&&v.setDependencies(c,m)}reloadTilesForDependencies(r,c){for(const m in this._tiles)this._tiles[m].hasDependency(r,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(r,c))}}function hr(b,r){const c=Math.abs(2*b.wrap)-+(b.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||m-c||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function zn(b){return b==="raster"||b==="image"||b==="video"}xr.maxOverzooming=10,xr.maxUnderzooming=3;const Ln="mapboxgl_preloaded_worker_pool";class Dr{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Dr.workerCount;)this.workers.push(new Worker(u.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ln]}numActive(){return Object.keys(this.active).length}}const pi=Math.floor(u.h.hardwareConcurrency/2);let oi;function Bs(){return oi||(oi=new Dr),oi}Dr.workerCount=u.ac(globalThis)?Math.max(Math.min(pi,3),1):1;class ds{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ad(r,0,1);let c=1,m=this._distances[c];const v=r*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const w=c-1,P=this._distances[w],j=m-P,R=j>0?(v-P)/j:0;return this.points[w].mult(1-R).add(this.points[c].mult(R))}}function Mt(b,r){let c=!0;return b==="always"||b!=="never"&&r!=="never"||(c=!1),c}class an{constructor(r,c,m){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(c/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,m,v,w){this._forEachCell(c,m,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(r,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(r,c,m,v,w,P){this.boxCells[w].push(P)}_insertCircleCell(r,c,m,v,w,P){this.circleCells[w].push(P)}_query(r,c,m,v,w,P,j){if(m<0||r>this.width||v<0||c>this.height)return[];const R=[];if(r<=0&&c<=0&&this.width<=m&&this.height<=v){if(w)return[{key:null,x1:r,y1:c,x2:m,y2:v}];for(let z=0;z<this.boxKeys.length;z++)R.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const U=this.circles[3*z],q=this.circles[3*z+1],X=this.circles[3*z+2];R.push({key:this.circleKeys[z],x1:U-X,y1:q-X,x2:U+X,y2:q+X})}}else this._forEachCell(r,c,m,v,this._queryCell,R,{hitTest:w,overlapMode:P,seenUids:{box:{},circle:{}}},j);return R}query(r,c,m,v){return this._query(r,c,m,v,!1,null)}hitTest(r,c,m,v,w,P){return this._query(r,c,m,v,!0,w,P).length>0}hitTestCircle(r,c,m,v,w){const P=r-m,j=r+m,R=c-m,z=c+m;if(j<0||P>this.width||z<0||R>this.height)return!1;const U=[];return this._forEachCell(P,R,j,z,this._queryCellCircle,U,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:m},seenUids:{box:{},circle:{}}},w),U.length>0}_queryCell(r,c,m,v,w,P,j,R){const{seenUids:z,hitTest:U,overlapMode:q}=j,X=this.boxCells[w];if(X!==null){const le=this.bboxes;for(const pe of X)if(!z.box[pe]){z.box[pe]=!0;const oe=4*pe,Te=this.boxKeys[pe];if(r<=le[oe+2]&&c<=le[oe+3]&&m>=le[oe+0]&&v>=le[oe+1]&&(!R||R(Te))&&(!U||!Mt(q,Te.overlapMode))&&(P.push({key:Te,x1:le[oe],y1:le[oe+1],x2:le[oe+2],y2:le[oe+3]}),U))return!0}}const ae=this.circleCells[w];if(ae!==null){const le=this.circles;for(const pe of ae)if(!z.circle[pe]){z.circle[pe]=!0;const oe=3*pe,Te=this.circleKeys[pe];if(this._circleAndRectCollide(le[oe],le[oe+1],le[oe+2],r,c,m,v)&&(!R||R(Te))&&(!U||!Mt(q,Te.overlapMode))){const Oe=le[oe],ye=le[oe+1],Pe=le[oe+2];if(P.push({key:Te,x1:Oe-Pe,y1:ye-Pe,x2:Oe+Pe,y2:ye+Pe}),U)return!0}}}return!1}_queryCellCircle(r,c,m,v,w,P,j,R){const{circle:z,seenUids:U,overlapMode:q}=j,X=this.boxCells[w];if(X!==null){const le=this.bboxes;for(const pe of X)if(!U.box[pe]){U.box[pe]=!0;const oe=4*pe,Te=this.boxKeys[pe];if(this._circleAndRectCollide(z.x,z.y,z.radius,le[oe+0],le[oe+1],le[oe+2],le[oe+3])&&(!R||R(Te))&&!Mt(q,Te.overlapMode))return P.push(!0),!0}}const ae=this.circleCells[w];if(ae!==null){const le=this.circles;for(const pe of ae)if(!U.circle[pe]){U.circle[pe]=!0;const oe=3*pe,Te=this.circleKeys[pe];if(this._circlesCollide(le[oe],le[oe+1],le[oe+2],z.x,z.y,z.radius)&&(!R||R(Te))&&!Mt(q,Te.overlapMode))return P.push(!0),!0}}}_forEachCell(r,c,m,v,w,P,j,R){const z=this._convertToXCellCoord(r),U=this._convertToYCellCoord(c),q=this._convertToXCellCoord(m),X=this._convertToYCellCoord(v);for(let ae=z;ae<=q;ae++)for(let le=U;le<=X;le++)if(w.call(this,r,c,m,v,this.xCellCount*le+ae,P,j,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,m,v,w,P){const j=v-r,R=w-c,z=m+P;return z*z>j*j+R*R}_circleAndRectCollide(r,c,m,v,w,P,j){const R=(P-v)/2,z=Math.abs(r-(v+R));if(z>R+m)return!1;const U=(j-w)/2,q=Math.abs(c-(w+U));if(q>U+m)return!1;if(z<=R||q<=U)return!0;const X=z-R,ae=q-U;return X*X+ae*ae<=m*m}}function Qe(b,r,c,m,v){const w=u.Z();return r?(u.a0(w,w,[1/v,1/v,1]),c||u.ae(w,w,m.angle)):u.a1(w,m.labelPlaneMatrix,b),w}function Hn(b,r,c,m,v){if(r){const w=u.af(b);return u.a0(w,w,[v,v,1]),c||u.ae(w,w,-m.angle),w}return m.glCoordMatrix}function Tn(b,r,c){let m;c?(m=[b.x,b.y,c(b.x,b.y),1],u.ag(m,m,r)):(m=[b.x,b.y,0,1],ie(m,m,r));const v=m[3];return{point:new u.P(m[0]/v,m[1]/v),signedDistanceFromCamera:v}}function wr(b,r){return .5+b/r*.5}function pr(b,r){const c=b[0]/b[3],m=b[1]/b[3];return c>=-r[0]&&c<=r[0]&&m>=-r[1]&&m<=r[1]}function dt(b,r,c,m,v,w,P,j,R,z){const U=m?b.textSizeData:b.iconSizeData,q=u.ah(U,c.transform.zoom),X=[256/c.width*2+1,256/c.height*2+1],ae=m?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ae.clear();const le=b.lineVertexArray,pe=m?b.text.placedSymbolArray:b.icon.placedSymbolArray,oe=c.transform.width/c.transform.height;let Te=!1;for(let Oe=0;Oe<pe.length;Oe++){const ye=pe.get(Oe);if(ye.hidden||ye.writingMode===u.ai.vertical&&!Te){J(ye.numGlyphs,ae);continue}let Pe;if(Te=!1,z?(Pe=[ye.anchorX,ye.anchorY,z(ye.anchorX,ye.anchorY),1],u.ag(Pe,Pe,r)):(Pe=[ye.anchorX,ye.anchorY,0,1],ie(Pe,Pe,r)),!pr(Pe,X)){J(ye.numGlyphs,ae);continue}const Be=wr(c.transform.cameraToCenterDistance,Pe[3]),He=u.aj(U,q,ye),tt=P?He/Be:He*Be,mt=new u.P(ye.anchorX,ye.anchorY),at=Tn(mt,v,z).point,_t={projections:{},offsets:{}},Xt=nr(ye,tt,!1,j,r,v,w,b.glyphOffsetArray,le,ae,at,mt,_t,oe,R,z);Te=Xt.useVertical,(Xt.notEnoughRoom||Te||Xt.needsFlipping&&nr(ye,tt,!0,j,r,v,w,b.glyphOffsetArray,le,ae,at,mt,_t,oe,R,z).notEnoughRoom)&&J(ye.numGlyphs,ae)}m?b.text.dynamicLayoutVertexBuffer.updateData(ae):b.icon.dynamicLayoutVertexBuffer.updateData(ae)}function tn(b,r,c,m,v,w,P,j,R,z,U,q,X){const ae=j.glyphStartIndex+j.numGlyphs,le=j.lineStartIndex,pe=j.lineStartIndex+j.lineLength,oe=r.getoffsetX(j.glyphStartIndex),Te=r.getoffsetX(ae-1),Oe=I(b*oe,c,m,v,w,P,j.segment,le,pe,R,z,U,q,X);if(!Oe)return null;const ye=I(b*Te,c,m,v,w,P,j.segment,le,pe,R,z,U,q,X);return ye?{first:Oe,last:ye}:null}function Ut(b,r,c,m){return b===u.ai.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*m?{useVertical:!0}:(b===u.ai.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function nr(b,r,c,m,v,w,P,j,R,z,U,q,X,ae,le,pe){const oe=r/24,Te=b.lineOffsetX*oe,Oe=b.lineOffsetY*oe;let ye;if(b.numGlyphs>1){const Pe=b.glyphStartIndex+b.numGlyphs,Be=b.lineStartIndex,He=b.lineStartIndex+b.lineLength,tt=tn(oe,j,Te,Oe,c,U,q,b,R,w,X,le,pe);if(!tt)return{notEnoughRoom:!0};const mt=Tn(tt.first.point,P,pe).point,at=Tn(tt.last.point,P,pe).point;if(m&&!c){const _t=Ut(b.writingMode,mt,at,ae);if(_t)return _t}ye=[tt.first];for(let _t=b.glyphStartIndex+1;_t<Pe-1;_t++)ye.push(I(oe*j.getoffsetX(_t),Te,Oe,c,U,q,b.segment,Be,He,R,w,X,le,pe));ye.push(tt.last)}else{if(m&&!c){const Be=Tn(q,v,pe).point,He=b.lineStartIndex+b.segment+1,tt=new u.P(R.getx(He),R.gety(He)),mt=Tn(tt,v,pe),at=mt.signedDistanceFromCamera>0?mt.point:gi(q,tt,Be,1,v,pe),_t=Ut(b.writingMode,Be,at,ae);if(_t)return _t}const Pe=I(oe*j.getoffsetX(b.glyphStartIndex),Te,Oe,c,U,q,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,R,w,X,le,pe);if(!Pe)return{notEnoughRoom:!0};ye=[Pe]}for(const Pe of ye)u.ak(z,Pe.point,Pe.angle);return{}}function gi(b,r,c,m,v,w){const P=Tn(b.add(b.sub(r)._unit()),v,w).point,j=c.sub(P);return c.add(j._mult(m/j.mag()))}function bn(b,r){const{projectionCache:c,lineVertexArray:m,labelPlaneMatrix:v,tileAnchorPoint:w,distanceFromAnchor:P,getElevation:j,previousVertex:R,direction:z,absOffsetX:U}=r;if(c.projections[b])return c.projections[b];const q=new u.P(m.getx(b),m.gety(b)),X=Tn(q,v,j);if(X.signedDistanceFromCamera>0)return c.projections[b]=X.point,X.point;const ae=b-z;return gi(P===0?w:new u.P(m.getx(ae),m.gety(ae)),q,R,U-P+1,v,j)}function vi(b,r,c){return b._unit()._perp()._mult(r*c)}function he(b,r,c,m,v,w,P,j){const{projectionCache:R,direction:z}=j;if(R.offsets[b])return R.offsets[b];const U=c.add(r);if(b+z<m||b+z>=v)return R.offsets[b]=U,U;const q=bn(b+z,j),X=vi(q.sub(c),P,z),ae=c.add(X),le=q.add(X);return R.offsets[b]=u.al(w,U,ae,le)||U,R.offsets[b]}function I(b,r,c,m,v,w,P,j,R,z,U,q,X,ae){const le=m?b-r:b+r;let pe=le>0?1:-1,oe=0;m&&(pe*=-1,oe=Math.PI),pe<0&&(oe+=Math.PI);let Te,Oe,ye=pe>0?j+P:j+P+1,Pe=v,Be=v,He=0,tt=0;const mt=Math.abs(le),at=[];let _t;for(;He+tt<=mt;){if(ye+=pe,ye<j||ye>=R)return null;He+=tt,Be=Pe,Oe=Te;const kt={projectionCache:q,lineVertexArray:z,labelPlaneMatrix:U,tileAnchorPoint:w,distanceFromAnchor:He,getElevation:ae,previousVertex:Be,direction:pe,absOffsetX:mt};if(Pe=bn(ye,kt),c===0)at.push(Be),_t=Pe.sub(Be);else{let xn;const Jt=Pe.sub(Be);xn=Jt.mag()===0?vi(bn(ye+pe,kt).sub(Pe),c,pe):vi(Jt,c,pe),Oe||(Oe=Be.add(xn)),Te=he(ye,xn,Pe,j,R,Oe,c,kt),at.push(Oe),_t=Te.sub(Oe)}tt=_t.mag()}const Xt=_t._mult((mt-He)/tt)._add(Oe||Be),Yn=oe+Math.atan2(Pe.y-Be.y,Pe.x-Be.x);return at.push(Xt),{point:Xt,angle:X?Yn:0,path:at}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function J(b,r){for(let c=0;c<b;c++){const m=r.length;r.resize(m+4),r.float32.set(G,3*m)}}function ie(b,r,c){const m=r[0],v=r[1];return b[0]=c[0]*m+c[4]*v+c[12],b[1]=c[1]*m+c[5]*v+c[13],b[3]=c[3]*m+c[7]*v+c[15],b}const de=100;class Ce{constructor(r,c=new an(r.width+200,r.height+200,25),m=new an(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=m,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+de,this.screenBottomBoundary=r.height+de,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,m,v,w,P){const j=this.projectAndGetPerspectiveRatio(v,r.anchorPointX,r.anchorPointY,P),R=m*j.perspectiveRatio,z=r.x1*R+j.point.x,U=r.y1*R+j.point.y,q=r.x2*R+j.point.x,X=r.y2*R+j.point.y;return!this.isInsideGrid(z,U,q,X)||c!=="always"&&this.grid.hitTest(z,U,q,X,c,w)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,U,q,X],offscreen:this.isOffscreen(z,U,q,X)}}placeCollisionCircles(r,c,m,v,w,P,j,R,z,U,q,X,ae,le){const pe=[],oe=new u.P(c.anchorX,c.anchorY),Te=Tn(oe,P,le),Oe=wr(this.transform.cameraToCenterDistance,Te.signedDistanceFromCamera),ye=(U?w/Oe:w*Oe)/u.ap,Pe=Tn(oe,j,le).point,Be=tn(ye,v,c.lineOffsetX*ye,c.lineOffsetY*ye,!1,Pe,oe,c,m,j,{projections:{},offsets:{}},!1,le);let He=!1,tt=!1,mt=!0;if(Be){const at=.5*X*Oe+ae,_t=new u.P(-100,-100),Xt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Yn=new ds,kt=Be.first,xn=Be.last;let Jt=[];for(let Rn=kt.path.length-1;Rn>=1;Rn--)Jt.push(kt.path[Rn]);for(let Rn=1;Rn<xn.path.length;Rn++)Jt.push(xn.path[Rn]);const kr=2.5*at;if(R){const Rn=Jt.map(Xn=>Tn(Xn,R,le));Jt=Rn.some(Xn=>Xn.signedDistanceFromCamera<=0)?[]:Rn.map(Xn=>Xn.point)}let Zn=[];if(Jt.length>0){const Rn=Jt[0].clone(),Xn=Jt[0].clone();for(let xi=1;xi<Jt.length;xi++)Rn.x=Math.min(Rn.x,Jt[xi].x),Rn.y=Math.min(Rn.y,Jt[xi].y),Xn.x=Math.max(Xn.x,Jt[xi].x),Xn.y=Math.max(Xn.y,Jt[xi].y);Zn=Rn.x>=_t.x&&Xn.x<=Xt.x&&Rn.y>=_t.y&&Xn.y<=Xt.y?[Jt]:Xn.x<_t.x||Rn.x>Xt.x||Xn.y<_t.y||Rn.y>Xt.y?[]:u.am([Jt],_t.x,_t.y,Xt.x,Xt.y)}for(const Rn of Zn){Yn.reset(Rn,.25*at);let Xn=0;Xn=Yn.length<=.5*at?1:Math.ceil(Yn.paddedLength/kr)+1;for(let xi=0;xi<Xn;xi++){const qr=xi/Math.max(Xn-1,1),mr=Yn.lerp(qr),Bi=mr.x+de,li=mr.y+de;pe.push(Bi,li,at,0);const Es=Bi-at,_r=li-at,ia=Bi+at,No=li+at;if(mt=mt&&this.isOffscreen(Es,_r,ia,No),tt=tt||this.isInsideGrid(Es,_r,ia,No),r!=="always"&&this.grid.hitTestCircle(Bi,li,at,r,q)&&(He=!0,!z))return{circles:[],offscreen:!1,collisionDetected:He}}}}return{circles:!z&&He||!tt||Oe<this.perspectiveRatioCutoff?[]:pe,offscreen:mt,collisionDetected:He}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,v=1/0,w=-1/0,P=-1/0;for(const U of r){const q=new u.P(U.x+de,U.y+de);m=Math.min(m,q.x),v=Math.min(v,q.y),w=Math.max(w,q.x),P=Math.max(P,q.y),c.push(q)}const j=this.grid.query(m,v,w,P).concat(this.ignoredGrid.query(m,v,w,P)),R={},z={};for(const U of j){const q=U.key;if(R[q.bucketInstanceId]===void 0&&(R[q.bucketInstanceId]={}),R[q.bucketInstanceId][q.featureIndex])continue;const X=[new u.P(U.x1,U.y1),new u.P(U.x2,U.y1),new u.P(U.x2,U.y2),new u.P(U.x1,U.y2)];u.an(c,X)&&(R[q.bucketInstanceId][q.featureIndex]=!0,z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]=[]),z[q.bucketInstanceId].push(q.featureIndex))}return z}insertCollisionBox(r,c,m,v,w,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:w,collisionGroupID:P,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,m,v,w,P){const j=m?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:w,collisionGroupID:P,overlapMode:c};for(let z=0;z<r.length;z+=4)j.insertCircle(R,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,c,m,v){let w;return v?(w=[c,m,v(c,m),1],u.ag(w,w,r)):(w=[c,m,0,1],ie(w,w,r)),{point:new u.P((w[0]/w[3]+1)/2*this.transform.width+de,(-w[1]/w[3]+1)/2*this.transform.height+de),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}}isOffscreen(r,c,m,v){return m<de||r>=this.screenRightBoundary||v<de||c>this.screenBottomBoundary}isInsideGrid(r,c,m,v){return m>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=u.ao([]);return u.$(r,r,[-100,-100,0]),r}}function xe(b,r,c){return r*(u.N/(b.tileSize*Math.pow(2,c-b.tileID.overscaledZ)))}class ge{constructor(r,c,m,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Ee{constructor(r,c,m,v,w){this.text=new ge(r?r.text:null,c,m,w),this.icon=new ge(r?r.icon:null,c,v,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ke{constructor(r,c,m){this.text=r,this.icon=c,this.skipFade=m}}class te{constructor(){this.invProjMatrix=u.Z(),this.viewportMatrix=u.Z(),this.circles=[]}}class Se{constructor(r,c,m,v,w){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=w}}class Xe{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[r]}}function ht(b,r,c,m,v){const{horizontalAlign:w,verticalAlign:P}=u.au(b);return new u.P(-(w-.5)*r+m[0]*v,-(P-.5)*c+m[1]*v)}function pt(b,r,c,m,v,w){const{x1:P,x2:j,y1:R,y2:z,anchorPointX:U,anchorPointY:q}=b,X=new u.P(r,c);return m&&X._rotate(v?w:-w),{x1:P+X.x,y1:R+X.y,x2:j+X.x,y2:z+X.y,anchorPointX:U,anchorPointY:q}}class ft{constructor(r,c,m,v,w){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new Ce(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Xe(v),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,c,m,v){const w=m.getBucket(c),P=m.latestFeatureIndex;if(!w||!P||c.id!==w.layerIds[0])return;const j=m.collisionBoxArray,R=w.layers[0].layout,z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/u.N,q=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),X=R.get("text-pitch-alignment")==="map",ae=R.get("text-rotation-alignment")==="map",le=xe(m,1,this.transform.zoom),pe=Qe(q,X,ae,this.transform,le);let oe=null;if(X){const Oe=Hn(q,X,ae,this.transform,le);oe=u.a1([],this.transform.labelPlaneMatrix,Oe)}this.retainedQueryData[w.bucketInstanceId]=new Se(w.bucketInstanceId,P,w.sourceLayerIndex,w.index,m.tileID);const Te={bucket:w,layout:R,posMatrix:q,textLabelPlaneMatrix:pe,labelToScreenMatrix:oe,scale:z,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:u.ah(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const Oe of w.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Pe,symbolInstanceEnd:Be}=Oe;r.push({sortKey:ye,symbolInstanceStart:Pe,symbolInstanceEnd:Be,parameters:Te})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(r,c,m,v,w,P,j,R,z,U,q,X,ae,le,pe,oe){const Te=u.aq[r.textAnchor],Oe=[r.textOffset0,r.textOffset1],ye=ht(Te,m,v,Oe,w),Pe=this.collisionIndex.placeCollisionBox(pt(c,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,oe);if((!pe||this.collisionIndex.placeCollisionBox(pt(pe,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,oe).box.length!==0)&&Pe.box.length>0){let Be;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(Be=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Oe,width:m,height:v,anchor:Te,textBoxScale:w,prevAnchor:Be},this.markUsedJustification(ae,Te,X,le),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,le,X),this.placedOrientations[X.crossTileID]=le),{shift:ye,placedGlyphBoxes:Pe}}}placeLayerBucketPart(r,c,m){const{bucket:v,layout:w,posMatrix:P,textLabelPlaneMatrix:j,labelToScreenMatrix:R,textPixelRatio:z,holdingForFade:U,collisionBoxArray:q,partiallyEvaluatedTextSize:X,collisionGroup:ae}=r.parameters,le=w.get("text-optional"),pe=w.get("icon-optional"),oe=u.ar(w,"text-overlap","text-allow-overlap"),Te=oe==="always",Oe=u.ar(w,"icon-overlap","icon-allow-overlap"),ye=Oe==="always",Pe=w.get("text-rotation-alignment")==="map",Be=w.get("text-pitch-alignment")==="map",He=w.get("icon-text-fit")!=="none",tt=w.get("symbol-z-order")==="viewport-y",mt=Te&&(ye||!v.hasIconData()||pe),at=ye&&(Te||!v.hasTextData()||le);!v.collisionArrays&&q&&v.deserializeCollisionBoxes(q);const _t=this.retainedQueryData[v.bucketInstanceId].tileID,Xt=this.terrain?(kt,xn)=>this.terrain.getElevation(_t,kt,xn):null,Yn=(kt,xn)=>{var Jt,kr;if(c[kt.crossTileID])return;if(U)return void(this.placements[kt.crossTileID]=new Ke(!1,!1,!1));let Zn=!1,Rn=!1,Xn=!0,xi=null,qr={box:null,offscreen:null},mr={box:null},Bi=null,li=null,Es=null,_r=0,ia=0,No=0;xn.textFeatureIndex?_r=xn.textFeatureIndex:kt.useRuntimeCollisionCircles&&(_r=kt.featureIndex),xn.verticalTextFeatureIndex&&(ia=xn.verticalTextFeatureIndex);const el=xn.textBox;if(el){const Nr=_i=>{let Fi=u.ai.horizontal;if(v.allowVerticalPlacement&&!_i&&this.prevPlacement){const Hs=this.prevPlacement.placedOrientations[kt.crossTileID];Hs&&(this.placedOrientations[kt.crossTileID]=Hs,Fi=Hs,this.markUsedOrientation(v,Fi,kt))}return Fi},Pt=(_i,Fi)=>{if(v.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&xn.verticalTextBox){for(const Hs of v.writingModes)if(Hs===u.ai.vertical?(qr=Fi(),mr=qr):qr=_i(),qr&&qr.box&&qr.box.length)break}else qr=_i()},ci=kt.textAnchorOffsetStartIndex,ls=kt.textAnchorOffsetEndIndex;if(ls===ci){const _i=(Fi,Hs)=>{const wi=this.collisionIndex.placeCollisionBox(Fi,oe,z,P,ae.predicate,Xt);return wi&&wi.box&&wi.box.length&&(this.markUsedOrientation(v,Hs,kt),this.placedOrientations[kt.crossTileID]=Hs),wi};Pt(()=>_i(el,u.ai.horizontal),()=>{const Fi=xn.verticalTextBox;return v.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Fi?_i(Fi,u.ai.vertical):{box:null,offscreen:null}}),Nr(qr&&qr.box&&qr.box.length)}else{let _i=u.aq[(kr=(Jt=this.prevPlacement)===null||Jt===void 0?void 0:Jt.variableOffsets[kt.crossTileID])===null||kr===void 0?void 0:kr.anchor];const Fi=(wi,zl,ki)=>{const $f=wi.x2-wi.x1,qf=wi.y2-wi.y1,_p=kt.textBoxScale,xd=He&&Oe==="never"?zl:null;let Gs={box:[],offscreen:!1},So=oe==="never"?1:2,sa="never";_i&&So++;for(let Eo=0;Eo<So;Eo++){for(let oa=ci;oa<ls;oa++){const Lh=v.textAnchorOffsets.get(oa);if(_i&&Lh.textAnchor!==_i)continue;const Pa=this.attemptAnchorPlacement(Lh,wi,$f,qf,_p,Pe,Be,z,P,ae,sa,kt,v,ki,xd,Xt);if(Pa&&(Gs=Pa.placedGlyphBoxes,Gs&&Gs.box&&Gs.box.length))return Zn=!0,xi=Pa.shift,Gs}_i?_i=null:sa=oe}return Gs};Pt(()=>Fi(el,xn.iconBox,u.ai.horizontal),()=>{const wi=xn.verticalTextBox;return v.allowVerticalPlacement&&!(qr&&qr.box&&qr.box.length)&&kt.numVerticalGlyphVertices>0&&wi?Fi(wi,xn.verticalIconBox,u.ai.vertical):{box:null,offscreen:null}}),qr&&(Zn=qr.box,Xn=qr.offscreen);const Hs=Nr(qr&&qr.box);if(!Zn&&this.prevPlacement){const wi=this.prevPlacement.variableOffsets[kt.crossTileID];wi&&(this.variableOffsets[kt.crossTileID]=wi,this.markUsedJustification(v,wi.anchor,kt,Hs))}}}if(Bi=qr,Zn=Bi&&Bi.box&&Bi.box.length>0,Xn=Bi&&Bi.offscreen,kt.useRuntimeCollisionCircles){const Nr=v.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),Pt=u.aj(v.textSizeData,X,Nr),ci=w.get("text-padding");li=this.collisionIndex.placeCollisionCircles(oe,Nr,v.lineVertexArray,v.glyphOffsetArray,Pt,P,j,R,m,Be,ae.predicate,kt.collisionCircleDiameter,ci,Xt),li.circles.length&&li.collisionDetected&&!m&&u.w("Collisions detected, but collision boxes are not shown"),Zn=Te||li.circles.length>0&&!li.collisionDetected,Xn=Xn&&li.offscreen}if(xn.iconFeatureIndex&&(No=xn.iconFeatureIndex),xn.iconBox){const Nr=Pt=>{const ci=He&&xi?pt(Pt,xi.x,xi.y,Pe,Be,this.transform.angle):Pt;return this.collisionIndex.placeCollisionBox(ci,Oe,z,P,ae.predicate,Xt)};mr&&mr.box&&mr.box.length&&xn.verticalIconBox?(Es=Nr(xn.verticalIconBox),Rn=Es.box.length>0):(Es=Nr(xn.iconBox),Rn=Es.box.length>0),Xn=Xn&&Es.offscreen}const Vl=le||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,Oo=pe||kt.numIconVertices===0;if(Vl||Oo?Oo?Vl||(Rn=Rn&&Zn):Zn=Rn&&Zn:Rn=Zn=Rn&&Zn,Zn&&Bi&&Bi.box&&this.collisionIndex.insertCollisionBox(Bi.box,oe,w.get("text-ignore-placement"),v.bucketInstanceId,mr&&mr.box&&ia?ia:_r,ae.ID),Rn&&Es&&this.collisionIndex.insertCollisionBox(Es.box,Oe,w.get("icon-ignore-placement"),v.bucketInstanceId,No,ae.ID),li&&(Zn&&this.collisionIndex.insertCollisionCircles(li.circles,oe,w.get("text-ignore-placement"),v.bucketInstanceId,_r,ae.ID),m)){const Nr=v.bucketInstanceId;let Pt=this.collisionCircleArrays[Nr];Pt===void 0&&(Pt=this.collisionCircleArrays[Nr]=new te);for(let ci=0;ci<li.circles.length;ci+=4)Pt.circles.push(li.circles[ci+0]),Pt.circles.push(li.circles[ci+1]),Pt.circles.push(li.circles[ci+2]),Pt.circles.push(li.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new Ke(Zn||mt,Rn||at,Xn||v.justReloaded),c[kt.crossTileID]=!0};if(tt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=v.getSortedSymbolIndexes(this.transform.angle);for(let xn=kt.length-1;xn>=0;--xn){const Jt=kt[xn];Yn(v.symbolInstances.get(Jt),v.collisionArrays[Jt])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)Yn(v.symbolInstances.get(kt),v.collisionArrays[kt]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[v.bucketInstanceId];u.as(kt.invProjMatrix,P),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(r,c,m,v){let w;w=v===u.ai.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[u.at(c)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const j of P)j>=0&&(r.text.placedSymbolArray.get(j).crossTileID=w>=0&&j!==w?0:m.crossTileID)}markUsedOrientation(r,c,m){const v=c===u.ai.horizontal||c===u.ai.horizontalOnly?c:0,w=c===u.ai.vertical?c:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const j of P)r.text.placedSymbolArray.get(j).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,w=c?c.opacities:{},P=c?c.variableOffsets:{},j=c?c.placedOrientations:{};for(const R in this.placements){const z=this.placements[R],U=w[R];U?(this.opacities[R]=new Ee(U,v,z.text,z.icon),m=m||z.text!==U.text.placed||z.icon!==U.icon.placed):(this.opacities[R]=new Ee(null,v,z.text,z.icon,z.skipFade),m=m||z.text||z.icon)}for(const R in w){const z=w[R];if(!this.opacities[R]){const U=new Ee(z,v,!1,!1);U.isHidden()||(this.opacities[R]=U,m=m||z.text.placed||z.icon.placed)}}for(const R in P)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=P[R]);for(const R in j)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=j[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const m={};for(const v of c){const w=v.getBucket(r);w&&v.latestFeatureIndex&&r.id===w.layerIds[0]&&this.updateBucketOpacities(w,m,v.collisionBoxArray)}}updateBucketOpacities(r,c,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const v=r.layers[0],w=v.layout,P=new Ee(null,0,!1,!1,!0),j=w.get("text-allow-overlap"),R=w.get("icon-allow-overlap"),z=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=w.get("text-rotation-alignment")==="map",q=w.get("text-pitch-alignment")==="map",X=w.get("icon-text-fit")!=="none",ae=new Ee(null,0,j&&(R||!r.hasIconData()||w.get("icon-optional")),R&&(j||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const le=(pe,oe,Te)=>{for(let Oe=0;Oe<oe/4;Oe++)pe.opacityVertexArray.emplaceBack(Te);pe.hasVisibleVertices=pe.hasVisibleVertices||Te!==Ki};for(let pe=0;pe<r.symbolInstances.length;pe++){const oe=r.symbolInstances.get(pe),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:Oe,crossTileID:ye}=oe;let Pe=this.opacities[ye];c[ye]?Pe=P:Pe||(Pe=ae,this.opacities[ye]=Pe),c[ye]=!0;const Be=oe.numIconVertices>0,He=this.placedOrientations[oe.crossTileID],tt=He===u.ai.vertical,mt=He===u.ai.horizontal||He===u.ai.horizontalOnly;if(Te>0||Oe>0){const at=cr(Pe.text);le(r.text,Te,tt?Ki:at),le(r.text,Oe,mt?Ki:at);const _t=Pe.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=_t||tt?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=_t||mt?1:0);const Xt=this.variableOffsets[oe.crossTileID];Xt&&this.markUsedJustification(r,Xt.anchor,oe,He);const Yn=this.placedOrientations[oe.crossTileID];Yn&&(this.markUsedJustification(r,"left",oe,Yn),this.markUsedOrientation(r,Yn,oe))}if(Be){const at=cr(Pe.icon),_t=!(X&&oe.verticalPlacedIconSymbolIndex&&tt);oe.placedIconSymbolIndex>=0&&(le(r.icon,oe.numIconVertices,_t?at:Ki),r.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(le(r.icon,oe.numVerticalIconVertices,_t?Ki:at),r.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const at=r.collisionArrays[pe];if(at){let _t=new u.P(0,0);if(at.textBox||at.verticalTextBox){let Yn=!0;if(z){const kt=this.variableOffsets[ye];kt?(_t=ht(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),U&&_t._rotate(q?this.transform.angle:-this.transform.angle)):Yn=!1}at.textBox&&Tt(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Yn||tt,_t.x,_t.y),at.verticalTextBox&&Tt(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Yn||mt,_t.x,_t.y)}const Xt=!!(!mt&&at.verticalIconBox);at.iconBox&&Tt(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,Xt,X?_t.x:0,X?_t.y:0),at.verticalIconBox&&Tt(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,!Xt,X?_t.x:0,X?_t.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=pe.invProjMatrix,r.placementViewportMatrix=pe.viewportMatrix,r.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function Tt(b,r,c,m,v){b.emplaceBack(r?1:0,c?1:0,m||0,v||0),b.emplaceBack(r?1:0,c?1:0,m||0,v||0),b.emplaceBack(r?1:0,c?1:0,m||0,v||0),b.emplaceBack(r?1:0,c?1:0,m||0,v||0)}const Lt=Math.pow(2,25),kn=Math.pow(2,24),vn=Math.pow(2,17),gn=Math.pow(2,16),Cr=Math.pow(2,9),ar=Math.pow(2,8),Tr=Math.pow(2,1);function cr(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,c=Math.floor(127*b.opacity);return c*Lt+r*kn+c*vn+r*gn+c*Cr+r*ar+c*Tr+r}const Ki=0;class mo{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,m,v,w){const P=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(P,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((j,R)=>j.sortKey-R.sortKey));this._currentPartIndex<P.length;)if(c.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class In{constructor(r,c,m,v,w,P,j,R){this.placement=new ft(r,c,P,j,R),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(r,c,m){const v=u.h.now(),w=()=>!this._forceFullPlacement&&u.h.now()-v>2;for(;this._currentPlacementIndex>=0;){const P=c[r[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=j)&&(!P.maxzoom||P.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new mo(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const po=512/u.N/2;class nd{constructor(r,c,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let w=0;w<c.length;w++){const P=c.get(w),j=P.key,R=v.get(j);R?R.push(P):v.set(j,[P])}for(const[w,P]of v){const j={positions:P.map(R=>({x:Math.floor(R.anchorX*po),y:Math.floor(R.anchorY*po)})),crossTileIDs:P.map(R=>R.crossTileID)};if(j.positions.length>128){const R=new u.av(j.positions.length,16,Uint16Array);for(const{x:z,y:U}of j.positions)R.add(z,U);R.finish(),delete j.positions,j.index=R}this._symbolsByKey[w]=j}}getScaledCoordinates(r,c){const{x:m,y:v,z:w}=this.tileID.canonical,{x:P,y:j,z:R}=c.canonical,z=po/Math.pow(2,R-w),U=(j*u.N+r.anchorY)*z,q=v*u.N*po;return{x:Math.floor((P*u.N+r.anchorX)*z-m*u.N*po),y:Math.floor(U-q)}}findMatches(r,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let w=0;w<r.length;w++){const P=r.get(w);if(P.crossTileID)continue;const j=this._symbolsByKey[P.key];if(!j)continue;const R=this.getScaledCoordinates(P,c);if(j.index){const z=j.index.range(R.x-v,R.y-v,R.x+v,R.y+v).sort();for(const U of z){const q=j.crossTileIDs[U];if(!m[q]){m[q]=!0,P.crossTileID=q;break}}}else if(j.positions)for(let z=0;z<j.positions.length;z++){const U=j.positions[z],q=j.crossTileIDs[z];if(Math.abs(U.x-R.x)<=v&&Math.abs(U.y-R.y)<=v&&!m[q]){m[q]=!0,P.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class gr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],w={};for(const P in v){const j=v[P];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+c),w[j.tileID.key]=j}this.indexes[m]=w}this.lng=r}addBucket(r,c,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let w=0;w<c.symbolInstances.length;w++)c.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const w in this.indexes){const P=this.indexes[w];if(Number(w)>r.overscaledZ)for(const j in P){const R=P[j];R.tileID.isChildOf(r)&&R.findMatches(c.symbolInstances,r,v)}else{const j=P[r.scaledTo(Number(w)).key];j&&j.findMatches(c.symbolInstances,r,v)}}for(let w=0;w<c.symbolInstances.length;w++){const P=c.symbolInstances.get(w);P.crossTileID||(P.crossTileID=m.generate(),v[P.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new nd(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const w in v)r[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[w]),delete v[w],c=!0)}return c}}class Fa{constructor(){this.layerIndexes={},this.crossTileIDs=new gr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,m){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new Qo);let w=!1;const P={};v.handleWrapJump(m);for(const j of c){const R=j.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(j.tileID,R,this.crossTileIDs)&&(w=!0),P[R.bucketInstanceId]=!0)}return v.removeStaleBuckets(P)&&(w=!0),w}pruneUnusedLayers(r){const c={};r.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const Ii=(b,r)=>u.x(b,r&&r.filter(c=>c.identifier!=="source.canvas")),is=u.F(u.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),eu=u.F(u.ax,["setCenter","setZoom","setBearing","setPitch"]),hs=u.aw();class Vi extends u.E{constructor(r,c={}){super(),this.map=r,this.dispatcher=new Rt(Bs(),this,r._getMapId()),this.imageManager=new st,this.imageManager.setEventedParent(this),this.glyphManager=new yn(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new St(256,512),this.crossTileSymbolIndex=new Fa,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.az());const m=this;this._rtlTextPluginCallback=Vi.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,P)=>{if(u.aA(w),P&&P.every(j=>j))for(const j in m.sourceCaches){const R=m.sourceCaches[j].getSource().type;R!=="vector"&&R!=="geojson"||m.sourceCaches[j].reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.sourceCaches[v.sourceId];if(!w)return;const P=w.getSource();if(P&&P.vectorLayerIds)for(const j in this._layers){const R=this._layers[j];R.source===P.id&&this._validateLayer(R)}})}loadURL(r,c={},m){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,Ae.Style);this._request=u.f(v,(w,P)=>{this._request=null,w?this.fire(new u.j(w)):P&&this._load(P,c,m)})}loadJSON(r,c={},m){this.fire(new u.k("dataloading",{dataType:"style"})),this._request=u.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(r,c,m)})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(hs,{validate:!1})}_load(r,c,m){var v;const w=c.transformStyle?c.transformStyle(m,r):r;if(!c.validate||!Ii(this,u.y(w))){this._loaded=!0,this.stylesheet=w;for(const P in w.sources)this.addSource(P,w.sources[P],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new dn(this.stylesheet.light),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const m=u.aC(c);m.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=m}}_loadSprite(r,c=!1,m=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(v,w,P,j){const R=ot(v),z=R.length,U=P>1?"@2x":"",q={},X={},ae={};for(const{id:le,url:pe}of R){const oe=w.transformRequest(w.normalizeSpriteURL(pe,U,".json"),Ae.SpriteJSON),Te=`${le}_${oe.url}`;q[Te]=u.f(oe,(Pe,Be)=>{delete q[Te],X[le]=Be,wt(j,X,ae,Pe,z)});const Oe=w.transformRequest(w.normalizeSpriteURL(pe,U,".png"),Ae.SpriteImage),ye=`${le}_${Oe.url}`;q[ye]=De.getImage(Oe,(Pe,Be)=>{delete q[ye],ae[le]=Be,wt(j,X,ae,Pe,z)})}return{cancel(){for(const le of Object.values(q))le.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(v,w)=>{if(this._spriteRequest=null,v)this.fire(new u.j(v));else if(w)for(const P in w){this._spritesImagesIds[P]=[];const j=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(R=>!(R in w)):[];for(const R of j)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in w[P]){const z=P==="default"?R:`${P}:${R}`;this._spritesImagesIds[P].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,w[P][R],!1):this.imageManager.addImage(z,w[P][R]),c&&(this._changedImages[z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),m&&m(v)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const m=r.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new u.j(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const c=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c);const m=[];for(const v of r)c[v]&&m.push(c[v]);return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(r[m]=v.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const P in this._updatedSources){const j=this._updatedSources[P];if(j==="reload")this._reloadSource(P);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const w=this.sourceCaches[v];m[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];w.recalculate(r,this._availableImages),!w.isHidden(r.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const v in m){const w=this.sourceCaches[v];m[v]!==w.used&&w.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){this._checkLoaded();const m=this.serialize();if(r=c.transformStyle?c.transformStyle(m,r):r,Ii(this,u.y(r)))return!1;(r=u.aD(r)).layers=u.aB(r.layers);const v=u.aE(m,r).filter(P=>!(P.command in eu));if(v.length===0)return!1;const w=v.filter(P=>!(P.command in is));if(w.length>0)throw new Error(`Unimplemented: ${w.map(P=>P.command).join(", ")}.`);for(const P of v)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,c){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.y.source,`sources.${r}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new xr(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r})),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,m={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new u.j(new Error(`Layer "${v}" already exists on this map.`)));let w;if(r.type==="custom"){if(Ii(this,u.aF(r)))return;w=u.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=u.aD(r),r=u.e(r,{source:v})),this._validate(u.y.layer,`layers.${v}`,r,{arrayIndex:-1},m))return;w=u.aC(r),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}})}const P=c?this._order.indexOf(c):this._order.length;if(c&&P===-1)this.fire(new u.j(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(P,0,v),this._layerOrderChanged=!0,this._layers[v]=w,this._removedLayers[v]&&w.source&&w.type!=="custom"){const j=this._removedLayers[v];delete this._removedLayers[v],j.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const m=this._order.indexOf(r);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,m){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,m={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!u.aG(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(u.y.filter,`layers.${v.id}.filter`,c,null,m)||(v.filter=u.aD(c),this._updateLayer(v)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aD(this.getLayer(r).filter)}setLayoutProperty(r,c,m,v={}){this._checkLoaded();const w=this.getLayer(r);w?u.aG(w.getLayoutProperty(c),m)||(w.setLayoutProperty(c,m,v),this._updateLayer(w)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const m=this.getLayer(r);if(m)return m.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,m,v={}){this._checkLoaded();const w=this.getLayer(r);w?u.aG(w.getPaintProperty(c),m)||(w.setPaintProperty(c,m,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const m=r.source,v=r.sourceLayer,w=this.sourceCaches[m];if(w===void 0)return void this.fire(new u.j(new Error(`The source '${m}' does not exist in the map's style.`)));const P=w.getSource().type;P==="geojson"&&v?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||v?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(v,r.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const m=r.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new u.j(new Error(`The source '${m}' does not exist in the map's style.`)));const w=v.getSource().type,P=w==="vector"?r.sourceLayer:void 0;w!=="vector"||P?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(P,r.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,m=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aH(this.sourceCaches,w=>w.serialize()),c=this._serializeByIds(this._order),m=this.map.getTerrain()||void 0,v=this.stylesheet;return u.aI({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:r,layers:c,terrain:m},w=>w!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=P=>this._layers[P].type==="fill-extrusion",m={},v=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(c(j)){m[j]=P;for(const R of r){const z=R[j];if(z)for(const U of z)v.push(U)}}}v.sort((P,j)=>j.intersectionZ-P.intersectionZ);const w=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(c(j))for(let R=v.length-1;R>=0;R--){const z=v[R].feature;if(m[z.layer.id]<P)break;w.push(z),v.pop()}else for(const R of r){const z=R[j];if(z)for(const U of z)w.push(U.feature)}}return w}queryRenderedFeatures(r,c,m){c&&c.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const j of c.layers){const R=this._layers[j];if(!R)return this.fire(new u.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];v[R.source]=!0}}const w=[];c.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const j in this.sourceCaches)c.layers&&!v[j]||w.push(er(this.sourceCaches[j],this._layers,P,r,c,m));return this.placement&&w.push(function(j,R,z,U,q,X,ae){const le={},pe=X.queryRenderedSymbols(U),oe=[];for(const Te of Object.keys(pe).map(Number))oe.push(ae[Te]);oe.sort(Ti);for(const Te of oe){const Oe=Te.featureIndex.lookupSymbolFeatures(pe[Te.bucketInstanceId],R,Te.bucketIndex,Te.sourceLayerIndex,q.filter,q.layers,q.availableImages,j);for(const ye in Oe){const Pe=le[ye]=le[ye]||[],Be=Oe[ye];Be.sort((He,tt)=>{const mt=Te.featureSortOrder;if(mt){const at=mt.indexOf(He.featureIndex);return mt.indexOf(tt.featureIndex)-at}return tt.featureIndex-He.featureIndex});for(const He of Be)Pe.push(He)}}for(const Te in le)le[Te].forEach(Oe=>{const ye=Oe.feature,Pe=z[j[Te].source].getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=Pe});return le}(this._layers,P,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(r,c){c&&c.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[r];return m?function(v,w){const P=v.getRenderableIds().map(z=>v.getTileByID(z)),j=[],R={};for(let z=0;z<P.length;z++){const U=P[z],q=U.tileID.canonical.key;R[q]||(R[q]=!0,U.querySourceFeatures(j,w))}return j}(m,c):[]}addSourceType(r,c,m){return Ur(r)?m(new Error(`A source type called "${r}" already exists.`)):(((v,w)=>{Fn[v]=w})(r,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const P in r)if(!u.aG(r[P],m[P])){v=!0;break}if(!v)return;const w={now:u.h.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(w)}_validate(r,c,m,v,w={}){return(!w||w.validate!==!1)&&Ii(this,r.call(u.y,u.e({key:c,style:this.serialize(),value:m,styleSpec:u.v},v)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const m=this.sourceCaches[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,m,v,w=!1){let P=!1,j=!1;const R={};for(const z of this._order){const U=this._layers[z];if(U.type!=="symbol")continue;if(!R[U.source]){const X=this.sourceCaches[U.source];R[U.source]=X.getRenderableIds(!0).map(ae=>X.getTileByID(ae)).sort((ae,le)=>le.tileID.overscaledZ-ae.tileID.overscaledZ||(ae.tileID.isLessThan(le.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(U,R[U.source],r.center.lng);P=P||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.h.now(),r.zoom))&&(this.pauseablePlacement=new In(r,this.map.terrain,this._order,w,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.h.now()),j=!0),P&&this.pauseablePlacement.placement.setStale()),j||P)for(const z of this._order){const U=this._layers[z];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(r,c,m){this.glyphManager.getGlyphs(c.stacks,m);const v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,[""])}getResource(r,c,m){return u.m(c,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(u.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,m={},v){this._checkLoaded();const w=[{id:r,url:c}],P=[...ot(this.stylesheet.sprite),...w];this._validate(u.y.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(w,!0,v))}removeSprite(r){this._checkLoaded();const c=ot(this.stylesheet.sprite);if(c.find(m=>m.id===r)){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex(m=>m.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ot(this.stylesheet.sprite)}setSprite(r,c={},m){this._checkLoaded(),r&&this._validate(u.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}Vi.registerForPluginStateChange=u.aK;var xl=u.Q([{name:"a_pos",type:"Int16",components:2}]),Vo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const zr={prelude:Gn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Gn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Gn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Gn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Gn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Vo),terrainDepth:Gn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Vo),terrainCoords:Gn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Vo)};function Gn(b,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/attribute ([\w]+) ([\w]+)/g),v=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=w?w.concat(v):v,j={};return{fragmentSource:b=b.replace(c,(R,z,U,q,X)=>(j[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = u_${X};
#endif
`)),vertexSource:r=r.replace(c,(R,z,U,q,X)=>{const ae=q==="float"?"vec2":"vec4",le=X.match(/color/)?"color":ae;return j[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${ae} a_${X};
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${ae} a_${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Ys{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,m,v,w,P,j,R,z){this.context=r;let U=this.boundPaintVertexBuffers.length!==v.length;for(let q=0;!U&&q<v.length;q++)this.boundPaintVertexBuffers[q]!==v[q]&&(U=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==w||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==z?this.freshBind(c,m,v,w,P,j,R,z):(r.bindVertexArray.set(this.vao),j&&j.bind(),w&&w.dynamicDraw&&w.bind(),R&&R.bind(),z&&z.bind())}freshBind(r,c,m,v,w,P,j,R){const z=r.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=R,c.enableAttributes(q,r);for(const X of m)X.enableAttributes(q,r);P&&P.enableAttributes(q,r),j&&j.enableAttributes(q,r),R&&R.enableAttributes(q,r),c.bind(),c.setVertexAttribPointers(q,r,w);for(const X of m)X.bind(),X.setVertexAttribPointers(q,r,w);P&&(P.bind(),P.setVertexAttribPointers(q,r,w)),v&&v.bind(),j&&(j.bind(),j.setVertexAttribPointers(q,r,w)),R&&(R.bind(),R.setVertexAttribPointers(q,r,w)),U.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Pr(b){const r=[];for(let c=0;c<b.length;c++){if(b[c]===null)continue;const m=b[c].split(" ");r.push(m.pop())}return r}class ga{constructor(r,c,m,v,w,P){const j=r.gl;this.program=j.createProgram();const R=Pr(c.staticAttributes),z=m?m.getBinderAttributes():[],U=R.concat(z),q=zr.prelude.staticUniforms?Pr(zr.prelude.staticUniforms):[],X=c.staticUniforms?Pr(c.staticUniforms):[],ae=m?m.getBinderUniforms():[],le=q.concat(X).concat(ae),pe=[];for(const He of le)pe.indexOf(He)<0&&pe.push(He);const oe=m?m.defines():[];w&&oe.push("#define OVERDRAW_INSPECTOR;"),P&&oe.push("#define TERRAIN3D;");const Te=oe.concat(zr.prelude.fragmentSource,c.fragmentSource).join(`
`),Oe=oe.concat(zr.prelude.vertexSource,c.vertexSource).join(`
`),ye=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ye,Te),j.compileShader(ye),!j.getShaderParameter(ye,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(ye)}`);j.attachShader(this.program,ye);const Pe=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Pe,Oe),j.compileShader(Pe),!j.getShaderParameter(Pe,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Pe)}`);j.attachShader(this.program,Pe),this.attributes={};const Be={};this.numAttributes=U.length;for(let He=0;He<this.numAttributes;He++)U[He]&&(j.bindAttribLocation(this.program,He,U[He]),this.attributes[U[He]]=He);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Pe),j.deleteShader(ye);for(let He=0;He<pe.length;He++){const tt=pe[He];if(tt&&!Be[tt]){const mt=j.getUniformLocation(this.program,tt);mt&&(Be[tt]=mt)}}this.fixedUniforms=v(r,Be),this.terrainUniforms=((He,tt)=>({u_depth:new u.aL(He,tt.u_depth),u_terrain:new u.aL(He,tt.u_terrain),u_terrain_dim:new u.aM(He,tt.u_terrain_dim),u_terrain_matrix:new u.aN(He,tt.u_terrain_matrix),u_terrain_unpack:new u.aO(He,tt.u_terrain_unpack),u_terrain_exaggeration:new u.aM(He,tt.u_terrain_exaggeration)}))(r,Be),this.binderUniforms=m?m.getUniforms(r,Be):[]}draw(r,c,m,v,w,P,j,R,z,U,q,X,ae,le,pe,oe,Te,Oe){const ye=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(v),r.setColorMode(w),r.setCullFace(P),R){r.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,R.texture);for(const Be in this.terrainUniforms)this.terrainUniforms[Be].set(R[Be])}for(const Be in this.fixedUniforms)this.fixedUniforms[Be].set(j[Be]);pe&&pe.setUniforms(r,this.binderUniforms,ae,{zoom:le});let Pe=0;switch(c){case ye.LINES:Pe=2;break;case ye.TRIANGLES:Pe=3;break;case ye.LINE_STRIP:Pe=1}for(const Be of X.get()){const He=Be.vaos||(Be.vaos={});(He[z]||(He[z]=new Ys)).bind(r,this,U,pe?pe.getPaintVertexBuffers():[],q,Be.vertexOffset,oe,Te,Oe),ye.drawElements(c,Be.primitiveLength*Pe,ye.UNSIGNED_SHORT,Be.primitiveOffset*Pe*2)}}}function Yi(b,r,c){const m=1/xe(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),w=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,P=w*(c.tileID.canonical.x+c.tileID.wrap*v),j=w*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[P>>16,j>>16],u_pixel_coord_lower:[65535&P,65535&j]}}const Ua=(b,r,c,m)=>{const v=r.style.light,w=v.properties.get("position"),P=[w.x,w.y,w.z],j=function(){var z=new u.A(9);return u.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();v.properties.get("anchor")==="viewport"&&function(z,U){var q=Math.sin(U),X=Math.cos(U);z[0]=X,z[1]=q,z[2]=0,z[3]=-q,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(j,-r.transform.angle),function(z,U,q){var X=U[0],ae=U[1],le=U[2];z[0]=X*q[0]+ae*q[3]+le*q[6],z[1]=X*q[1]+ae*q[4]+le*q[7],z[2]=X*q[2]+ae*q[5]+le*q[8]}(P,P,j);const R=v.properties.get("color");return{u_matrix:b,u_lightpos:P,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+c,u_opacity:m}},go=(b,r,c,m,v,w,P)=>u.e(Ua(b,r,c,m),Yi(w,r,P),{u_height_factor:-Math.pow(2,v.overscaledZ)/P.tileSize/8}),tu=b=>({u_matrix:b}),_l=(b,r,c,m)=>u.e(tu(b),Yi(c,r,m)),fc=(b,r)=>({u_matrix:b,u_world:r}),ea=(b,r,c,m,v)=>u.e(_l(b,r,c,m),{u_world:v}),zo=(b,r,c,m)=>{const v=b.transform;let w,P;if(m.paint.get("circle-pitch-alignment")==="map"){const j=xe(c,1,v.zoom);w=!0,P=[j,j]}else w=!1,P=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(r.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:P}},wl=(b,r,c)=>{const m=xe(c,1,r.zoom),v=Math.pow(2,r.zoom-c.tileID.overscaledZ),w=c.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[r.pixelsToGLUnits[0]/(m*v),r.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:w}},sr=(b,r,c=1)=>({u_matrix:b,u_color:r,u_overlay:0,u_overlay_scale:c}),rd=b=>({u_matrix:b}),va=(b,r,c,m)=>({u_matrix:b,u_extrude_scale:xe(r,1,c),u_intensity:m});function jn(b,r){const c=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new u.U(0,m/c).toLngLat().lat,new u.U(0,(m+1)/c).toLngLat().lat]}const Cl=(b,r,c,m)=>{const v=b.transform;return{u_matrix:Pi(b,r,c,m),u_ratio:1/xe(r,1,v.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},fs=(b,r,c,m,v)=>u.e(Cl(b,r,c,v),{u_image:0,u_image_height:m}),Nl=(b,r,c,m,v)=>{const w=b.transform,P=id(r,w);return{u_matrix:Pi(b,r,c,v),u_texsize:r.imageAtlasTexture.size,u_ratio:1/xe(r,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},ya=(b,r,c,m,v,w)=>{const P=b.lineAtlas,j=id(r,b.transform),R=c.layout.get("line-cap")==="round",z=P.getDash(m.from,R),U=P.getDash(m.to,R),q=z.width*v.fromScale,X=U.width*v.toScale;return u.e(Cl(b,r,c,w),{u_patternscale_a:[j/q,-z.height/2],u_patternscale_b:[j/X,-U.height/2],u_sdfgamma:P.width/(256*Math.min(q,X)*b.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:U.y,u_mix:v.t})};function id(b,r){return 1/xe(b,1,r.tileZoom)}function Pi(b,r,c,m){return b.translatePosMatrix(m?m.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const ei=(b,r,c,m,v)=>{return{u_matrix:b,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(P=v.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(w=v.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:nu(v.paint.get("raster-hue-rotate"))};var w,P};function nu(b){b*=Math.PI/180;const r=Math.sin(b),c=Math.cos(b);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Fs=(b,r,c,m,v,w,P,j,R,z)=>{const U=v.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:U.width/U.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:P,u_coord_matrix:j,u_is_text:+R,u_pitch_with_map:+m,u_texsize:z,u_texture:0}},ss=(b,r,c,m,v,w,P,j,R,z,U)=>{const q=v.transform;return u.e(Fs(b,r,c,m,v,w,P,j,R,z),{u_gamma_scale:m?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:1})},os=(b,r,c,m,v,w,P,j,R,z)=>u.e(ss(b,r,c,m,v,w,P,j,!0,R),{u_texsize_icon:z,u_texture_icon:1}),mc=(b,r,c)=>({u_matrix:b,u_opacity:r,u_color:c}),ms=(b,r,c,m,v,w)=>u.e(function(P,j,R,z){const U=R.imageManager.getPattern(P.from.toString()),q=R.imageManager.getPattern(P.to.toString()),{width:X,height:ae}=R.imageManager.getPixelSize(),le=Math.pow(2,z.tileID.overscaledZ),pe=z.tileSize*Math.pow(2,R.transform.tileZoom)/le,oe=pe*(z.tileID.canonical.x+z.tileID.wrap*le),Te=pe*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[X,ae],u_mix:j.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/xe(z,1,R.transform.tileZoom),u_pixel_coord_upper:[oe>>16,Te>>16],u_pixel_coord_lower:[65535&oe,65535&Te]}}(m,w,c,v),{u_matrix:b,u_opacity:r}),Sl={fillExtrusion:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_lightpos:new u.aP(b,r.u_lightpos),u_lightintensity:new u.aM(b,r.u_lightintensity),u_lightcolor:new u.aP(b,r.u_lightcolor),u_vertical_gradient:new u.aM(b,r.u_vertical_gradient),u_opacity:new u.aM(b,r.u_opacity)}),fillExtrusionPattern:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_lightpos:new u.aP(b,r.u_lightpos),u_lightintensity:new u.aM(b,r.u_lightintensity),u_lightcolor:new u.aP(b,r.u_lightcolor),u_vertical_gradient:new u.aM(b,r.u_vertical_gradient),u_height_factor:new u.aM(b,r.u_height_factor),u_image:new u.aL(b,r.u_image),u_texsize:new u.aQ(b,r.u_texsize),u_pixel_coord_upper:new u.aQ(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(b,r.u_pixel_coord_lower),u_scale:new u.aP(b,r.u_scale),u_fade:new u.aM(b,r.u_fade),u_opacity:new u.aM(b,r.u_opacity)}),fill:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix)}),fillPattern:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_image:new u.aL(b,r.u_image),u_texsize:new u.aQ(b,r.u_texsize),u_pixel_coord_upper:new u.aQ(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(b,r.u_pixel_coord_lower),u_scale:new u.aP(b,r.u_scale),u_fade:new u.aM(b,r.u_fade)}),fillOutline:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_world:new u.aQ(b,r.u_world)}),fillOutlinePattern:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_world:new u.aQ(b,r.u_world),u_image:new u.aL(b,r.u_image),u_texsize:new u.aQ(b,r.u_texsize),u_pixel_coord_upper:new u.aQ(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(b,r.u_pixel_coord_lower),u_scale:new u.aP(b,r.u_scale),u_fade:new u.aM(b,r.u_fade)}),circle:(b,r)=>({u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_scale_with_map:new u.aL(b,r.u_scale_with_map),u_pitch_with_map:new u.aL(b,r.u_pitch_with_map),u_extrude_scale:new u.aQ(b,r.u_extrude_scale),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_matrix:new u.aN(b,r.u_matrix)}),collisionBox:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aM(b,r.u_pixels_to_tile_units),u_extrude_scale:new u.aQ(b,r.u_extrude_scale),u_overscale_factor:new u.aM(b,r.u_overscale_factor)}),collisionCircle:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_inv_matrix:new u.aN(b,r.u_inv_matrix),u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_viewport_size:new u.aQ(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new u.aR(b,r.u_color),u_matrix:new u.aN(b,r.u_matrix),u_overlay:new u.aL(b,r.u_overlay),u_overlay_scale:new u.aM(b,r.u_overlay_scale)}),clippingMask:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix)}),heatmap:(b,r)=>({u_extrude_scale:new u.aM(b,r.u_extrude_scale),u_intensity:new u.aM(b,r.u_intensity),u_matrix:new u.aN(b,r.u_matrix)}),heatmapTexture:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_world:new u.aQ(b,r.u_world),u_image:new u.aL(b,r.u_image),u_color_ramp:new u.aL(b,r.u_color_ramp),u_opacity:new u.aM(b,r.u_opacity)}),hillshade:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_image:new u.aL(b,r.u_image),u_latrange:new u.aQ(b,r.u_latrange),u_light:new u.aQ(b,r.u_light),u_shadow:new u.aR(b,r.u_shadow),u_highlight:new u.aR(b,r.u_highlight),u_accent:new u.aR(b,r.u_accent)}),hillshadePrepare:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_image:new u.aL(b,r.u_image),u_dimension:new u.aQ(b,r.u_dimension),u_zoom:new u.aM(b,r.u_zoom),u_unpack:new u.aO(b,r.u_unpack)}),line:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_ratio:new u.aM(b,r.u_ratio),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_ratio:new u.aM(b,r.u_ratio),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(b,r.u_units_to_pixels),u_image:new u.aL(b,r.u_image),u_image_height:new u.aM(b,r.u_image_height)}),linePattern:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_texsize:new u.aQ(b,r.u_texsize),u_ratio:new u.aM(b,r.u_ratio),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_image:new u.aL(b,r.u_image),u_units_to_pixels:new u.aQ(b,r.u_units_to_pixels),u_scale:new u.aP(b,r.u_scale),u_fade:new u.aM(b,r.u_fade)}),lineSDF:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_ratio:new u.aM(b,r.u_ratio),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(b,r.u_units_to_pixels),u_patternscale_a:new u.aQ(b,r.u_patternscale_a),u_patternscale_b:new u.aQ(b,r.u_patternscale_b),u_sdfgamma:new u.aM(b,r.u_sdfgamma),u_image:new u.aL(b,r.u_image),u_tex_y_a:new u.aM(b,r.u_tex_y_a),u_tex_y_b:new u.aM(b,r.u_tex_y_b),u_mix:new u.aM(b,r.u_mix)}),raster:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_tl_parent:new u.aQ(b,r.u_tl_parent),u_scale_parent:new u.aM(b,r.u_scale_parent),u_buffer_scale:new u.aM(b,r.u_buffer_scale),u_fade_t:new u.aM(b,r.u_fade_t),u_opacity:new u.aM(b,r.u_opacity),u_image0:new u.aL(b,r.u_image0),u_image1:new u.aL(b,r.u_image1),u_brightness_low:new u.aM(b,r.u_brightness_low),u_brightness_high:new u.aM(b,r.u_brightness_high),u_saturation_factor:new u.aM(b,r.u_saturation_factor),u_contrast_factor:new u.aM(b,r.u_contrast_factor),u_spin_weights:new u.aP(b,r.u_spin_weights)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new u.aL(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(b,r.u_is_size_feature_constant),u_size_t:new u.aM(b,r.u_size_t),u_size:new u.aM(b,r.u_size),u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_pitch:new u.aM(b,r.u_pitch),u_rotate_symbol:new u.aL(b,r.u_rotate_symbol),u_aspect_ratio:new u.aM(b,r.u_aspect_ratio),u_fade_change:new u.aM(b,r.u_fade_change),u_matrix:new u.aN(b,r.u_matrix),u_label_plane_matrix:new u.aN(b,r.u_label_plane_matrix),u_coord_matrix:new u.aN(b,r.u_coord_matrix),u_is_text:new u.aL(b,r.u_is_text),u_pitch_with_map:new u.aL(b,r.u_pitch_with_map),u_texsize:new u.aQ(b,r.u_texsize),u_texture:new u.aL(b,r.u_texture)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new u.aL(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(b,r.u_is_size_feature_constant),u_size_t:new u.aM(b,r.u_size_t),u_size:new u.aM(b,r.u_size),u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_pitch:new u.aM(b,r.u_pitch),u_rotate_symbol:new u.aL(b,r.u_rotate_symbol),u_aspect_ratio:new u.aM(b,r.u_aspect_ratio),u_fade_change:new u.aM(b,r.u_fade_change),u_matrix:new u.aN(b,r.u_matrix),u_label_plane_matrix:new u.aN(b,r.u_label_plane_matrix),u_coord_matrix:new u.aN(b,r.u_coord_matrix),u_is_text:new u.aL(b,r.u_is_text),u_pitch_with_map:new u.aL(b,r.u_pitch_with_map),u_texsize:new u.aQ(b,r.u_texsize),u_texture:new u.aL(b,r.u_texture),u_gamma_scale:new u.aM(b,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_is_halo:new u.aL(b,r.u_is_halo)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new u.aL(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(b,r.u_is_size_feature_constant),u_size_t:new u.aM(b,r.u_size_t),u_size:new u.aM(b,r.u_size),u_camera_to_center_distance:new u.aM(b,r.u_camera_to_center_distance),u_pitch:new u.aM(b,r.u_pitch),u_rotate_symbol:new u.aL(b,r.u_rotate_symbol),u_aspect_ratio:new u.aM(b,r.u_aspect_ratio),u_fade_change:new u.aM(b,r.u_fade_change),u_matrix:new u.aN(b,r.u_matrix),u_label_plane_matrix:new u.aN(b,r.u_label_plane_matrix),u_coord_matrix:new u.aN(b,r.u_coord_matrix),u_is_text:new u.aL(b,r.u_is_text),u_pitch_with_map:new u.aL(b,r.u_pitch_with_map),u_texsize:new u.aQ(b,r.u_texsize),u_texsize_icon:new u.aQ(b,r.u_texsize_icon),u_texture:new u.aL(b,r.u_texture),u_texture_icon:new u.aL(b,r.u_texture_icon),u_gamma_scale:new u.aM(b,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(b,r.u_device_pixel_ratio),u_is_halo:new u.aL(b,r.u_is_halo)}),background:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_opacity:new u.aM(b,r.u_opacity),u_color:new u.aR(b,r.u_color)}),backgroundPattern:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_opacity:new u.aM(b,r.u_opacity),u_image:new u.aL(b,r.u_image),u_pattern_tl_a:new u.aQ(b,r.u_pattern_tl_a),u_pattern_br_a:new u.aQ(b,r.u_pattern_br_a),u_pattern_tl_b:new u.aQ(b,r.u_pattern_tl_b),u_pattern_br_b:new u.aQ(b,r.u_pattern_br_b),u_texsize:new u.aQ(b,r.u_texsize),u_mix:new u.aM(b,r.u_mix),u_pattern_size_a:new u.aQ(b,r.u_pattern_size_a),u_pattern_size_b:new u.aQ(b,r.u_pattern_size_b),u_scale_a:new u.aM(b,r.u_scale_a),u_scale_b:new u.aM(b,r.u_scale_b),u_pixel_coord_upper:new u.aQ(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aM(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_texture:new u.aL(b,r.u_texture),u_ele_delta:new u.aM(b,r.u_ele_delta)}),terrainDepth:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_ele_delta:new u.aM(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_matrix:new u.aN(b,r.u_matrix),u_texture:new u.aL(b,r.u_texture),u_terrain_coords_id:new u.aM(b,r.u_terrain_coords_id),u_ele_delta:new u.aM(b,r.u_ele_delta)})};class $a{constructor(r,c,m){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ta={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class pc{constructor(r,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const w=r.gl;this.buffer=w.createBuffer(),r.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,m){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],P=c.attributes[w.name];P!==void 0&&r.vertexAttribPointer(P,w.components,r[ta[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xs=new WeakMap;function Us(b){var r;if(Xs.has(b))return Xs.get(b);{const c=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Xs.set(b,c),c}}class Wn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class vo extends Wn{getDefault(){return u.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Xi extends Wn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Ji extends Wn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class qa extends Wn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class El extends Wn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Dl extends Wn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Tl extends Wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class gc extends Wn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class K extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class _e extends Wn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ge extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class et extends Wn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class jt extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Cn extends Wn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Zt extends Wn{getDefault(){return u.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class An extends Wn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class or extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class jr extends Wn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Wr extends Wn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Zr extends Wn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class tr extends Wn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Kr extends Wn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class di extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ba extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pl extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class $s extends Wn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class vc extends Wn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class yc extends Wn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const m=this.gl;Us(m)?m.bindVertexArray(r):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ru extends Wn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class na extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class sd extends Wn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class xa extends Wn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Ha extends xa{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class xh extends xa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class od extends xa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class fr{constructor(r,c,m,v,w){this.context=r,this.width=c,this.height=m;const P=r.gl,j=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Ha(r,j),v)this.depthAttachment=w?new od(r,j):new xh(r,j);else if(w)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class ai{constructor(r,c,m){this.blendFunction=r,this.blendColor=c,this.mask=m}}ai.Replace=[1,0],ai.disabled=new ai(ai.Replace,u.aT.transparent,[!1,!1,!1,!1]),ai.unblended=new ai(ai.Replace,u.aT.transparent,[!0,!0,!0,!0]),ai.alphaBlended=new ai([1,771],u.aT.transparent,[!0,!0,!0,!0]);class _a{constructor(r){var c,m;if(this.gl=r,this.clearColor=new vo(this),this.clearDepth=new Xi(this),this.clearStencil=new Ji(this),this.colorMask=new qa(this),this.depthMask=new El(this),this.stencilMask=new Dl(this),this.stencilFunc=new Tl(this),this.stencilOp=new gc(this),this.stencilTest=new K(this),this.depthRange=new _e(this),this.depthTest=new Ge(this),this.depthFunc=new et(this),this.blend=new jt(this),this.blendFunc=new Cn(this),this.blendColor=new Zt(this),this.blendEquation=new An(this),this.cullFace=new or(this),this.cullFaceSide=new jr(this),this.frontFace=new Wr(this),this.program=new Zr(this),this.activeTexture=new tr(this),this.viewport=new Kr(this),this.bindFramebuffer=new di(this),this.bindRenderbuffer=new ba(this),this.bindTexture=new Pl(this),this.bindVertexBuffer=new $s(this),this.bindElementBuffer=new vc(this),this.bindVertexArray=new yc(this),this.pixelStoreUnpack=new ru(this),this.pixelStoreUnpackPremultiplyAlpha=new na(this),this.pixelStoreUnpackFlipY=new sd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Us(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new $a(this,r,c)}createVertexBuffer(r,c,m){return new pc(this,r,c,m)}createRenderbuffer(r,c,m){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,r,c,m),this.bindRenderbuffer.set(null),w}createFramebuffer(r,c,m,v){return new fr(this,r,c,m,v)}clear({color:r,depth:c,stencil:m}){const v=this.gl;let w=0;r&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(w)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aG(r.blendFunction,ai.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Us(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Us(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class rr{constructor(r,c,m){this.func=r,this.mask=c,this.range=m}}rr.ReadOnly=!1,rr.ReadWrite=!0,rr.disabled=new rr(519,rr.ReadOnly,[0,1]);const wa=7680;class Yr{constructor(r,c,m,v,w,P){this.test=r,this.ref=c,this.mask=m,this.fail=v,this.depthFail=w,this.pass=P}}Yr.disabled=new Yr({func:519,mask:0},0,0,wa,wa,wa);class $r{constructor(r,c,m){this.enable=r,this.mode=c,this.frontFace=m}}let iu;function su(b,r,c,m,v,w,P){const j=b.context,R=j.gl,z=b.useProgram("collisionBox"),U=[];let q=0,X=0;for(let ye=0;ye<m.length;ye++){const Pe=m[ye],Be=r.getTile(Pe),He=Be.getBucket(c);if(!He)continue;let tt=Pe.posMatrix;v[0]===0&&v[1]===0||(tt=b.translatePosMatrix(Pe.posMatrix,Be,v,w));const mt=P?He.textCollisionBox:He.iconCollisionBox,at=He.collisionCircleArray;if(at.length>0){const _t=u.Z(),Xt=tt;u.aU(_t,He.placementInvProjMatrix,b.transform.glCoordMatrix),u.aU(_t,_t,He.placementViewportMatrix),U.push({circleArray:at,circleOffset:X,transform:Xt,invTransform:_t,coord:Pe}),q+=at.length/4,X=q}mt&&z.draw(j,R.LINES,rr.disabled,Yr.disabled,b.colorModeForRenderPass(),$r.disabled,wl(tt,b.transform,Be),b.style.map.terrain&&b.style.map.terrain.getTerrainData(Pe),c.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,null,b.transform.zoom,null,null,mt.collisionVertexBuffer)}if(!P||!U.length)return;const ae=b.useProgram("collisionCircle"),le=new u.aV;le.resize(4*q),le._trim();let pe=0;for(const ye of U)for(let Pe=0;Pe<ye.circleArray.length/4;Pe++){const Be=4*Pe,He=ye.circleArray[Be+0],tt=ye.circleArray[Be+1],mt=ye.circleArray[Be+2],at=ye.circleArray[Be+3];le.emplace(pe++,He,tt,mt,at,0),le.emplace(pe++,He,tt,mt,at,1),le.emplace(pe++,He,tt,mt,at,2),le.emplace(pe++,He,tt,mt,at,3)}(!iu||iu.length<2*q)&&(iu=function(ye){const Pe=2*ye,Be=new u.aX;Be.resize(Pe),Be._trim();for(let He=0;He<Pe;He++){const tt=6*He;Be.uint16[tt+0]=4*He+0,Be.uint16[tt+1]=4*He+1,Be.uint16[tt+2]=4*He+2,Be.uint16[tt+3]=4*He+2,Be.uint16[tt+4]=4*He+3,Be.uint16[tt+5]=4*He+0}return Be}(q));const oe=j.createIndexBuffer(iu,!0),Te=j.createVertexBuffer(le,u.aW.members,!0);for(const ye of U){const Pe={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(Oe=b.transform).cameraToCenterDistance,u_viewport_size:[Oe.width,Oe.height]};ae.draw(j,R.TRIANGLES,rr.disabled,Yr.disabled,b.colorModeForRenderPass(),$r.disabled,Pe,b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye.coord),c.id,Te,oe,u.S.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,b.transform.zoom,null,null,null)}var Oe;Te.destroy(),oe.destroy()}$r.disabled=new $r(!1,1029,2305),$r.backCCW=new $r(!0,1029,2305);const ad=u.ao(new Float32Array(16));function as(b,r,c,m,v,w){const{horizontalAlign:P,verticalAlign:j}=u.au(b);return new u.P((-(P-.5)*r/v+m[0])*w,(-(j-.5)*c/v+m[1])*w)}function yo(b,r,c,m,v,w,P,j,R,z,U){const q=b.text.placedSymbolArray,X=b.text.dynamicLayoutVertexArray,ae=b.icon.dynamicLayoutVertexArray,le={};X.clear();for(let pe=0;pe<q.length;pe++){const oe=q.get(pe),Te=oe.hidden||!oe.crossTileID||b.allowVerticalPlacement&&!oe.placedOrientation?null:m[oe.crossTileID];if(Te){const Oe=new u.P(oe.anchorX,oe.anchorY),ye=Tn(Oe,c?P:w,U),Pe=wr(v.cameraToCenterDistance,ye.signedDistanceFromCamera);let Be=u.aj(b.textSizeData,R,oe)*Pe/u.ap;c&&(Be*=b.tilePixelRatio/j);const{width:He,height:tt,anchor:mt,textOffset:at,textBoxScale:_t}=Te,Xt=as(mt,He,tt,at,_t,Be),Yn=c?Tn(Oe.add(Xt),w,U).point:ye.point.add(r?Xt.rotate(-v.angle):Xt),kt=b.allowVerticalPlacement&&oe.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let xn=0;xn<oe.numGlyphs;xn++)u.ak(X,Yn,kt);z&&oe.associatedIconIndex>=0&&(le[oe.associatedIconIndex]={shiftedAnchor:Yn,angle:kt})}else J(oe.numGlyphs,X)}if(z){ae.clear();const pe=b.icon.placedSymbolArray;for(let oe=0;oe<pe.length;oe++){const Te=pe.get(oe);if(Te.hidden)J(Te.numGlyphs,ae);else{const Oe=le[oe];if(Oe)for(let ye=0;ye<Te.numGlyphs;ye++)u.ak(ae,Oe.shiftedAnchor,Oe.angle);else J(Te.numGlyphs,ae)}}b.icon.dynamicLayoutVertexBuffer.updateData(ae)}b.text.dynamicLayoutVertexBuffer.updateData(X)}function yi(b,r,c){return c.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function bo(b,r,c,m,v,w,P,j,R,z,U,q){const X=b.context,ae=X.gl,le=b.transform,pe=j==="map",oe=R==="map",Te=j!=="viewport"&&c.layout.get("symbol-placement")!=="point",Oe=pe&&!oe&&!Te,ye=!c.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Be=b.depthModeForSublayer(0,rr.ReadOnly),He=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[];for(const mt of m){const at=r.getTile(mt),_t=at.getBucket(c);if(!_t)continue;const Xt=v?_t.text:_t.icon;if(!Xt||!Xt.segments.get().length||!Xt.hasVisibleVertices)continue;const Yn=Xt.programConfigurations.get(c.id),kt=v||_t.sdfIcons,xn=v?_t.textSizeData:_t.iconSizeData,Jt=oe||le.pitch!==0,kr=b.useProgram(yi(kt,v,_t),Yn),Zn=u.ah(xn,le.zoom),Rn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(mt);let Xn,xi,qr,mr,Bi=[0,0],li=null;if(v)xi=at.glyphAtlasTexture,qr=ae.LINEAR,Xn=at.glyphAtlasTexture.size,_t.iconsInText&&(Bi=at.imageAtlasTexture.size,li=at.imageAtlasTexture,mr=Jt||b.options.rotating||b.options.zooming||xn.kind==="composite"||xn.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const _i=c.layout.get("icon-size").constantOr(0)!==1||_t.iconsNeedLinear;xi=at.imageAtlasTexture,qr=kt||b.options.rotating||b.options.zooming||_i||Jt?ae.LINEAR:ae.NEAREST,Xn=at.imageAtlasTexture.size}const Es=xe(at,1,b.transform.zoom),_r=Qe(mt.posMatrix,oe,pe,b.transform,Es),ia=Hn(mt.posMatrix,oe,pe,b.transform,Es),No=He&&_t.hasTextData(),el=c.layout.get("icon-text-fit")!=="none"&&No&&_t.hasIconData();if(Te){const _i=b.style.map.terrain?(Hs,wi)=>b.style.map.terrain.getElevation(mt,Hs,wi):null,Fi=c.layout.get("text-rotation-alignment")==="map";dt(_t,mt.posMatrix,b,v,_r,ia,oe,z,Fi,_i)}const Vl=b.translatePosMatrix(mt.posMatrix,at,w,P),Oo=Te||v&&He||el?ad:_r,Nr=b.translatePosMatrix(ia,at,w,P,!0),Pt=kt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ci;ci=kt?_t.iconsInText?os(xn.kind,Zn,Oe,oe,b,Vl,Oo,Nr,Xn,Bi):ss(xn.kind,Zn,Oe,oe,b,Vl,Oo,Nr,v,Xn):Fs(xn.kind,Zn,Oe,oe,b,Vl,Oo,Nr,v,Xn);const ls={program:kr,buffers:Xt,uniformValues:ci,atlasTexture:xi,atlasTextureIcon:li,atlasInterpolation:qr,atlasInterpolationIcon:mr,isSDF:kt,hasHalo:Pt};if(ye&&_t.canOverlap){Pe=!0;const _i=Xt.segments.get();for(const Fi of _i)tt.push({segments:new u.S([Fi]),sortKey:Fi.sortKey,state:ls,terrainData:Rn})}else tt.push({segments:Xt.segments,sortKey:0,state:ls,terrainData:Rn})}Pe&&tt.sort((mt,at)=>mt.sortKey-at.sortKey);for(const mt of tt){const at=mt.state;if(X.activeTexture.set(ae.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,ae.CLAMP_TO_EDGE),at.atlasTextureIcon&&(X.activeTexture.set(ae.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),at.isSDF){const _t=at.uniformValues;at.hasHalo&&(_t.u_is_halo=1,ou(at.buffers,mt.segments,c,b,at.program,Be,U,q,_t,mt.terrainData)),_t.u_is_halo=0}ou(at.buffers,mt.segments,c,b,at.program,Be,U,q,at.uniformValues,mt.terrainData)}}function ou(b,r,c,m,v,w,P,j,R,z){const U=m.context;v.draw(U,U.gl.TRIANGLES,w,P,j,$r.disabled,R,z,c.id,b.layoutVertexBuffer,b.indexBuffer,r,c.paint,m.transform.zoom,b.programConfigurations.get(c.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Ga(b,r,c,m,v){if(!c||!m||!m.imageAtlas)return;const w=m.imageAtlas.patternPositions;let P=w[c.to.toString()],j=w[c.from.toString()];if(!P&&j&&(P=j),!j&&P&&(j=P),!P||!j){const R=v.getPaintProperty(r);P=w[R],j=w[R]}P&&j&&b.setConstantPatternPositions(P,j)}function au(b,r,c,m,v,w,P){const j=b.context.gl,R="fill-pattern",z=c.paint.get(R),U=z&&z.constantOr(1),q=c.getCrossfadeParameters();let X,ae,le,pe,oe;P?(ae=U&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=j.LINES):(ae=U?"fillPattern":"fill",X=j.TRIANGLES);const Te=z.constantOr(null);for(const Oe of m){const ye=r.getTile(Oe);if(U&&!ye.patternsLoaded())continue;const Pe=ye.getBucket(c);if(!Pe)continue;const Be=Pe.programConfigurations.get(c.id),He=b.useProgram(ae,Be),tt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Oe);U&&(b.context.activeTexture.set(j.TEXTURE0),ye.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Be.updatePaintBuffers(q)),Ga(Be,R,Te,ye,c);const mt=tt?Oe:null,at=b.translatePosMatrix(mt?mt.posMatrix:Oe.posMatrix,ye,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(P){pe=Pe.indexBuffer2,oe=Pe.segments2;const _t=[j.drawingBufferWidth,j.drawingBufferHeight];le=ae==="fillOutlinePattern"&&U?ea(at,b,q,ye,_t):fc(at,_t)}else pe=Pe.indexBuffer,oe=Pe.segments,le=U?_l(at,b,q,ye):tu(at);He.draw(b.context,X,v,b.stencilModeForClipping(Oe),w,$r.disabled,le,tt,c.id,Pe.layoutVertexBuffer,pe,oe,c.paint,b.transform.zoom,Be)}}function Ca(b,r,c,m,v,w,P){const j=b.context,R=j.gl,z="fill-extrusion-pattern",U=c.paint.get(z),q=U.constantOr(1),X=c.getCrossfadeParameters(),ae=c.paint.get("fill-extrusion-opacity"),le=U.constantOr(null);for(const pe of m){const oe=r.getTile(pe),Te=oe.getBucket(c);if(!Te)continue;const Oe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(pe),ye=Te.programConfigurations.get(c.id),Pe=b.useProgram(q?"fillExtrusionPattern":"fillExtrusion",ye);q&&(b.context.activeTexture.set(R.TEXTURE0),oe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ye.updatePaintBuffers(X)),Ga(ye,z,le,oe,c);const Be=b.translatePosMatrix(pe.posMatrix,oe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),He=c.paint.get("fill-extrusion-vertical-gradient"),tt=q?go(Be,b,He,ae,pe,X,oe):Ua(Be,b,He,ae);Pe.draw(j,j.gl.TRIANGLES,v,w,P,$r.backCCW,tt,Oe,c.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,c.paint,b.transform.zoom,ye,b.style.map.terrain&&Te.centroidVertexBuffer)}}function xp(b,r,c,m,v,w,P){const j=b.context,R=j.gl,z=c.fbo;if(!z)return;const U=b.useProgram("hillshade"),q=b.style.map.terrain&&b.style.map.terrain.getTerrainData(r);j.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,z.colorAttachment.get()),U.draw(j,R.TRIANGLES,v,w,P,$r.disabled,((X,ae,le,pe)=>{const oe=le.paint.get("hillshade-shadow-color"),Te=le.paint.get("hillshade-highlight-color"),Oe=le.paint.get("hillshade-accent-color");let ye=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=X.transform.angle);const Pe=!X.options.moving;return{u_matrix:pe?pe.posMatrix:X.transform.calculatePosMatrix(ae.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:jn(0,ae.tileID),u_light:[le.paint.get("hillshade-exaggeration"),ye],u_shadow:oe,u_highlight:Te,u_accent:Oe}})(b,c,m,q?r:null),q,m.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function _h(b,r,c,m,v,w){const P=b.context,j=P.gl,R=r.dem;if(R&&R.data){const z=R.dim,U=R.stride,q=R.getPixels();if(P.activeTexture.set(j.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||b.getTileTexture(U),r.demTexture){const ae=r.demTexture;ae.update(q,{premultiply:!1}),ae.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else r.demTexture=new gt(P,q,j.RGBA,{premultiply:!1}),r.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);P.activeTexture.set(j.TEXTURE0);let X=r.fbo;if(!X){const ae=new gt(P,{width:z,height:z,data:null},j.RGBA);ae.bind(j.LINEAR,j.CLAMP_TO_EDGE),X=r.fbo=P.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(ae.texture)}P.bindFramebuffer.set(X.framebuffer),P.viewport.set([0,0,z,z]),b.useProgram("hillshadePrepare").draw(P,j.TRIANGLES,m,v,w,$r.disabled,((ae,le)=>{const pe=le.stride,oe=u.Z();return u.aS(oe,0,u.N,-u.N,0,0,1),u.$(oe,oe,[0,-u.N,0]),{u_matrix:oe,u_image:1,u_dimension:[pe,pe],u_zoom:ae.overscaledZ,u_unpack:le.getUnpackVector()}})(r.tileID,R),null,c.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function wh(b,r,c,m,v,w){const P=m.paint.get("raster-fade-duration");if(!w&&P>0){const j=u.h.now(),R=(j-b.timeAdded)/P,z=r?(j-r.timeAdded)/P:-1,U=c.getSource(),q=v.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),X=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(b.tileID.overscaledZ-q),ae=X&&b.refreshedUponExpiration?1:u.ad(X?R:1-z,0,1);return b.refreshedUponExpiration&&R>=1&&(b.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}const Af=new u.aT(1,0,0,1),ld=new u.aT(0,1,0,1),Ch=new u.aT(0,0,1,1),Nh=new u.aT(1,0,1,1),Mf=new u.aT(0,1,1,1);function lu(b,r,c,m){cu(b,0,r+c/2,b.transform.width,c,m)}function cd(b,r,c,m){cu(b,r-c/2,0,c,b.transform.height,m)}function cu(b,r,c,m,v,w){const P=b.context,j=P.gl;j.enable(j.SCISSOR_TEST),j.scissor(r*b.pixelRatio,c*b.pixelRatio,m*b.pixelRatio,v*b.pixelRatio),P.clear({color:w}),j.disable(j.SCISSOR_TEST)}function jl(b,r,c){const m=b.context,v=m.gl,w=c.posMatrix,P=b.useProgram("debug"),j=rr.disabled,R=Yr.disabled,z=b.colorModeForRenderPass(),U="$debug",q=b.style.map.terrain&&b.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const X=r.getTileByID(c.key).latestRawTileData,ae=Math.floor((X&&X.byteLength||0)/1024),le=r.getTile(c).tileSize,pe=512/Math.min(le,512)*(c.overscaledZ/b.transform.zoom)*.5;let oe=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(oe+=` => ${c.overscaledZ}`),function(Te,Oe){Te.initDebugOverlayCanvas();const ye=Te.debugOverlayCanvas,Pe=Te.context.gl,Be=Te.debugOverlayCanvas.getContext("2d");Be.clearRect(0,0,ye.width,ye.height),Be.shadowColor="white",Be.shadowBlur=2,Be.lineWidth=1.5,Be.strokeStyle="white",Be.textBaseline="top",Be.font="bold 36px Open Sans, sans-serif",Be.fillText(Oe,5,5),Be.strokeText(Oe,5,5),Te.debugOverlayTexture.update(ye),Te.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(b,`${oe} ${ae}kB`),P.draw(m,v.TRIANGLES,j,R,ai.alphaBlended,$r.disabled,sr(w,u.aT.transparent,pe),null,U,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),P.draw(m,v.LINE_STRIP,j,R,z,$r.disabled,sr(w,u.aT.red),q,U,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function ti(b,r,c){const m=b.context,v=m.gl,w=b.colorModeForRenderPass(),P=new rr(v.LEQUAL,rr.ReadWrite,b.depthRangeFor3D),j=b.useProgram("terrain"),R=r.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,b.width,b.height]);for(const z of c){const U=b.renderToTexture.getTexture(z),q=r.getTerrainData(z.tileID);m.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,U.texture);const X={u_matrix:b.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(b.transform.zoom)};j.draw(m,v.TRIANGLES,P,Yr.disabled,w,$r.backCCW,X,q,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class Wa{constructor(r,c){this.context=new _a(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.Z(),renderTime:0},this.setup(),this.numSublayers=xr.maxUnderzooming+xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fa}resize(r,c,m){if(this.width=Math.floor(r*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new u.a_;c.emplaceBack(0,0),c.emplaceBack(u.N,0),c.emplaceBack(0,u.N),c.emplaceBack(u.N,u.N),this.tileExtentBuffer=r.createVertexBuffer(c,xl.members),this.tileExtentSegments=u.S.simpleSegment(0,0,4,2);const m=new u.a_;m.emplaceBack(0,0),m.emplaceBack(u.N,0),m.emplaceBack(0,u.N),m.emplaceBack(u.N,u.N),this.debugBuffer=r.createVertexBuffer(m,xl.members),this.debugSegments=u.S.simpleSegment(0,0,4,5);const v=new u.V;v.emplaceBack(0,0,0,0),v.emplaceBack(u.N,0,u.N,0),v.emplaceBack(0,u.N,0,u.N),v.emplaceBack(u.N,u.N,u.N,u.N),this.rasterBoundsBuffer=r.createVertexBuffer(v,Bt.members),this.rasterBoundsSegments=u.S.simpleSegment(0,0,4,2);const w=new u.a_;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(w,xl.members),this.viewportSegments=u.S.simpleSegment(0,0,4,2);const P=new u.a$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(P);const j=new u.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(j);const R=this.context.gl;this.stencilClearMode=new Yr({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=u.Z();u.aS(m,0,this.width,this.height,0,0,1),u.a0(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,rr.disabled,this.stencilClearMode,ai.disabled,$r.disabled,rd(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const m=this.context,v=m.gl;this.nextStencilID+c.length>256&&this.clearStencil(),m.setColorMode(ai.disabled),m.setDepthMode(rr.disabled);const w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of c){const j=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);w.draw(m,v.TRIANGLES,rr.disabled,new Yr({func:v.ALWAYS,mask:0},j,255,v.KEEP,v.KEEP,v.REPLACE),ai.disabled,$r.disabled,rd(P.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Yr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Yr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,m=r.sort((P,j)=>j.overscaledZ-P.overscaledZ),v=m[m.length-1].overscaledZ,w=m[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const P={};for(let j=0;j<w;j++)P[j+v]=new Yr({func:c.GEQUAL,mask:255},j+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[P,m]}return[{[v]:Yr.disabled},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new ai([r.CONSTANT_COLOR,r.ONE],new u.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ai.unblended:ai.alphaBlended}depthModeForSublayer(r,c,m){if(!this.opaquePassEnabledForLayer())return rr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new rr(m||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(u.h.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches,w={},P={},j={};for(const R in v){const z=v[R];z.used&&z.prepare(this.context),w[R]=z.getVisibleCoordinates(),P[R]=w[R].slice().reverse(),j[R]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<m.length;R++)if(this.style._layers[m[R]].is3D()){this.opaquePassCutoff=R;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const R=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||R.length)&&(u.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,U){const q=z.context,X=q.gl,ae=ai.unblended,le=new rr(X.LEQUAL,rr.ReadWrite,[0,1]),pe=U.getTerrainMesh(),oe=U.sourceCache.getRenderableTiles(),Te=z.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:u.aT.transparent,depth:1});for(const Oe of oe){const ye=U.getTerrainData(Oe.tileID),Pe={u_matrix:z.transform.calculatePosMatrix(Oe.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};Te.draw(q,X.TRIANGLES,le,Yr.disabled,ae,$r.backCCW,Pe,ye,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain),function(z,U){const q=z.context,X=q.gl,ae=ai.unblended,le=new rr(X.LEQUAL,rr.ReadWrite,[0,1]),pe=U.getTerrainMesh(),oe=U.getCoordsTexture(),Te=U.sourceCache.getRenderableTiles(),Oe=z.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:u.aT.transparent,depth:1}),U.coordsIndex=[];for(const ye of Te){const Pe=U.getTerrainData(ye.tileID);q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,oe.texture);const Be={u_matrix:z.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};Oe.draw(q,X.TRIANGLES,le,Yr.disabled,ae,$r.backCCW,Be,Pe,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),U.coordsIndex.push(ye.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const R of m){const z=this.style._layers[R];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const U=P[z.source];(z.type==="custom"||U.length)&&this.renderLayer(this,v[z.source],z,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aT.black:u.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[m[this.currentLayer]],z=v[R.source],U=w[R.source];this._renderTileClippingMasks(R,U),this.renderLayer(this,z,R,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const R=this.style._layers[m[this.currentLayer]],z=v[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const U=(R.type==="symbol"?j:P)[R.source];this._renderTileClippingMasks(R,w[R.source]),this.renderLayer(this,z,R,U)}if(this.options.showTileBoundaries){const R=function(z,U){let q=null;const X=Object.values(z._layers).flatMap(oe=>oe.source&&!oe.isHidden(U)?[z.sourceCaches[oe.source]]:[]),ae=X.filter(oe=>oe.getSource().type==="vector"),le=X.filter(oe=>oe.getSource().type!=="vector"),pe=oe=>{(!q||q.getSource().maxzoom<oe.getSource().maxzoom)&&(q=oe)};return ae.forEach(oe=>pe(oe)),q||le.forEach(oe=>pe(oe)),q}(this.style,this.transform.zoom);R&&function(z,U,q){for(let X=0;X<q.length;X++)jl(z,U,q[X])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const z=R.transform.padding;lu(R,R.transform.height-(z.top||0),3,Af),lu(R,z.bottom||0,3,ld),cd(R,z.left||0,3,Ch),cd(R,R.transform.width-(z.right||0),3,Nh);const U=R.transform.centerPoint;(function(q,X,ae,le){cu(q,X-1,ae-10,2,20,le),cu(q,X-10,ae-1,20,2,le)})(R,U.x,R.transform.height-U.y,Mf)}(this),this.context.setDefault()}renderLayer(r,c,m,v){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(v||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(w,P,j,R,z){if(w.renderPass!=="translucent")return;const U=Yr.disabled,q=w.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ae,le,pe,oe,Te,Oe){const ye=ae.transform,Pe=oe==="map",Be=Te==="map";for(const He of X){const tt=pe.getTile(He),mt=tt.getBucket(le);if(!mt||!mt.text||!mt.text.segments.get().length)continue;const at=u.ah(mt.textSizeData,ye.zoom),_t=xe(tt,1,ae.transform.zoom),Xt=Qe(He.posMatrix,Be,Pe,ae.transform,_t),Yn=le.layout.get("icon-text-fit")!=="none"&&mt.hasIconData();if(at){const kt=Math.pow(2,ye.zoom-tt.tileID.overscaledZ);yo(mt,Pe,Be,Oe,ye,Xt,He.posMatrix,kt,at,Yn,ae.style.map.terrain?(xn,Jt)=>ae.style.map.terrain.getElevation(He,xn,Jt):null)}}}(R,w,j,P,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),z),j.paint.get("icon-opacity").constantOr(1)!==0&&bo(w,P,j,R,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),U,q),j.paint.get("text-opacity").constantOr(1)!==0&&bo(w,P,j,R,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),U,q),P.map.showCollisionBoxes&&(su(w,P,j,R,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),su(w,P,j,R,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(r,c,m,v,this.style.placement.variableOffsets);break;case"circle":(function(w,P,j,R){if(w.renderPass!=="translucent")return;const z=j.paint.get("circle-opacity"),U=j.paint.get("circle-stroke-width"),q=j.paint.get("circle-stroke-opacity"),X=!j.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(U.constantOr(1)===0||q.constantOr(1)===0))return;const ae=w.context,le=ae.gl,pe=w.depthModeForSublayer(0,rr.ReadOnly),oe=Yr.disabled,Te=w.colorModeForRenderPass(),Oe=[];for(let ye=0;ye<R.length;ye++){const Pe=R[ye],Be=P.getTile(Pe),He=Be.getBucket(j);if(!He)continue;const tt=He.programConfigurations.get(j.id),mt=w.useProgram("circle",tt),at=He.layoutVertexBuffer,_t=He.indexBuffer,Xt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pe),Yn={programConfiguration:tt,program:mt,layoutVertexBuffer:at,indexBuffer:_t,uniformValues:zo(w,Pe,Be,j),terrainData:Xt};if(X){const kt=He.segments.get();for(const xn of kt)Oe.push({segments:new u.S([xn]),sortKey:xn.sortKey,state:Yn})}else Oe.push({segments:He.segments,sortKey:0,state:Yn})}X&&Oe.sort((ye,Pe)=>ye.sortKey-Pe.sortKey);for(const ye of Oe){const{programConfiguration:Pe,program:Be,layoutVertexBuffer:He,indexBuffer:tt,uniformValues:mt,terrainData:at}=ye.state;Be.draw(ae,le.TRIANGLES,pe,oe,Te,$r.disabled,mt,at,j.id,He,tt,ye.segments,j.paint,w.transform.zoom,Pe)}})(r,c,m,v);break;case"heatmap":(function(w,P,j,R){if(j.paint.get("heatmap-opacity")!==0)if(w.renderPass==="offscreen"){const z=w.context,U=z.gl,q=Yr.disabled,X=new ai([U.ONE,U.ONE],u.aT.transparent,[!0,!0,!0,!0]);(function(ae,le,pe){const oe=ae.gl;ae.activeTexture.set(oe.TEXTURE1),ae.viewport.set([0,0,le.width/4,le.height/4]);let Te=pe.heatmapFbo;if(Te)oe.bindTexture(oe.TEXTURE_2D,Te.colorAttachment.get()),ae.bindFramebuffer.set(Te.framebuffer);else{const Oe=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Oe),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),Te=pe.heatmapFbo=ae.createFramebuffer(le.width/4,le.height/4,!1,!1),function(ye,Pe,Be,He){var tt,mt;const at=ye.gl,_t=(tt=ye.HALF_FLOAT)!==null&&tt!==void 0?tt:at.UNSIGNED_BYTE,Xt=(mt=ye.RGBA16F)!==null&&mt!==void 0?mt:at.RGBA;at.texImage2D(at.TEXTURE_2D,0,Xt,Pe.width/4,Pe.height/4,0,at.RGBA,_t,null),He.colorAttachment.set(Be)}(ae,le,Oe,Te)}})(z,w,j),z.clear({color:u.aT.transparent});for(let ae=0;ae<R.length;ae++){const le=R[ae];if(P.hasRenderableParent(le))continue;const pe=P.getTile(le),oe=pe.getBucket(j);if(!oe)continue;const Te=oe.programConfigurations.get(j.id),Oe=w.useProgram("heatmap",Te),{zoom:ye}=w.transform;Oe.draw(z,U.TRIANGLES,rr.disabled,q,X,$r.disabled,va(le.posMatrix,pe,ye,j.paint.get("heatmap-intensity")),null,j.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,j.paint,w.transform.zoom,Te)}z.viewport.set([0,0,w.width,w.height])}else w.renderPass==="translucent"&&(w.context.setColorMode(w.colorModeForRenderPass()),function(z,U){const q=z.context,X=q.gl,ae=U.heatmapFbo;if(!ae)return;q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ae.colorAttachment.get()),q.activeTexture.set(X.TEXTURE1);let le=U.colorRampTexture;le||(le=U.colorRampTexture=new gt(q,U.colorRamp,X.RGBA)),le.bind(X.LINEAR,X.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(q,X.TRIANGLES,rr.disabled,Yr.disabled,z.colorModeForRenderPass(),$r.disabled,((pe,oe,Te,Oe)=>{const ye=u.Z();u.aS(ye,0,pe.width,pe.height,0,0,1);const Pe=pe.context.gl;return{u_matrix:ye,u_world:[Pe.drawingBufferWidth,Pe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:oe.paint.get("heatmap-opacity")}})(z,U),null,U.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,U.paint,z.transform.zoom)}(w,j))})(r,c,m,v);break;case"line":(function(w,P,j,R){if(w.renderPass!=="translucent")return;const z=j.paint.get("line-opacity"),U=j.paint.get("line-width");if(z.constantOr(1)===0||U.constantOr(1)===0)return;const q=w.depthModeForSublayer(0,rr.ReadOnly),X=w.colorModeForRenderPass(),ae=j.paint.get("line-dasharray"),le=j.paint.get("line-pattern"),pe=le.constantOr(1),oe=j.paint.get("line-gradient"),Te=j.getCrossfadeParameters(),Oe=pe?"linePattern":ae?"lineSDF":oe?"lineGradient":"line",ye=w.context,Pe=ye.gl;let Be=!0;for(const He of R){const tt=P.getTile(He);if(pe&&!tt.patternsLoaded())continue;const mt=tt.getBucket(j);if(!mt)continue;const at=mt.programConfigurations.get(j.id),_t=w.context.program.get(),Xt=w.useProgram(Oe,at),Yn=Be||Xt.program!==_t,kt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(He),xn=le.constantOr(null);if(xn&&tt.imageAtlas){const Zn=tt.imageAtlas,Rn=Zn.patternPositions[xn.to.toString()],Xn=Zn.patternPositions[xn.from.toString()];Rn&&Xn&&at.setConstantPatternPositions(Rn,Xn)}const Jt=kt?He:null,kr=pe?Nl(w,tt,j,Te,Jt):ae?ya(w,tt,j,ae,Te,Jt):oe?fs(w,tt,j,mt.lineClipsArray.length,Jt):Cl(w,tt,j,Jt);if(pe)ye.activeTexture.set(Pe.TEXTURE0),tt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),at.updatePaintBuffers(Te);else if(ae&&(Yn||w.lineAtlas.dirty))ye.activeTexture.set(Pe.TEXTURE0),w.lineAtlas.bind(ye);else if(oe){const Zn=mt.gradients[j.id];let Rn=Zn.texture;if(j.gradientVersion!==Zn.version){let Xn=256;if(j.stepInterpolant){const xi=P.getSource().maxzoom,qr=He.canonical.z===xi?Math.ceil(1<<w.transform.maxZoom-He.canonical.z):1;Xn=u.ad(u.aY(mt.maxLineLength/u.N*1024*qr),256,ye.maxTextureSize)}Zn.gradient=u.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Xn,image:Zn.gradient||void 0,clips:mt.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new gt(ye,Zn.gradient,Pe.RGBA),Zn.version=j.gradientVersion,Rn=Zn.texture}ye.activeTexture.set(Pe.TEXTURE0),Rn.bind(j.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}Xt.draw(ye,Pe.TRIANGLES,q,w.stencilModeForClipping(He),X,$r.disabled,kr,kt,j.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,j.paint,w.transform.zoom,at,mt.layoutVertexBuffer2),Be=!1}})(r,c,m,v);break;case"fill":(function(w,P,j,R){const z=j.paint.get("fill-color"),U=j.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const q=w.colorModeForRenderPass(),X=j.paint.get("fill-pattern"),ae=w.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(u.aT.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ae){const le=w.depthModeForSublayer(1,w.renderPass==="opaque"?rr.ReadWrite:rr.ReadOnly);au(w,P,j,R,le,q,!1)}if(w.renderPass==="translucent"&&j.paint.get("fill-antialias")){const le=w.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,rr.ReadOnly);au(w,P,j,R,le,q,!0)}})(r,c,m,v);break;case"fill-extrusion":(function(w,P,j,R){const z=j.paint.get("fill-extrusion-opacity");if(z!==0&&w.renderPass==="translucent"){const U=new rr(w.context.gl.LEQUAL,rr.ReadWrite,w.depthRangeFor3D);if(z!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))Ca(w,P,j,R,U,Yr.disabled,ai.disabled),Ca(w,P,j,R,U,w.stencilModeFor3D(),w.colorModeForRenderPass());else{const q=w.colorModeForRenderPass();Ca(w,P,j,R,U,Yr.disabled,q)}}})(r,c,m,v);break;case"hillshade":(function(w,P,j,R){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const z=w.context,U=w.depthModeForSublayer(0,rr.ReadOnly),q=w.colorModeForRenderPass(),[X,ae]=w.renderPass==="translucent"?w.stencilConfigForOverlap(R):[{},R];for(const le of ae){const pe=P.getTile(le);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&w.renderPass==="offscreen"?_h(w,pe,j,U,Yr.disabled,q):w.renderPass==="translucent"&&xp(w,le,pe,j,U,X[le.overscaledZ],q)}z.viewport.set([0,0,w.width,w.height])})(r,c,m,v);break;case"raster":(function(w,P,j,R){if(w.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!R.length)return;const z=w.context,U=z.gl,q=P.getSource(),X=w.useProgram("raster"),ae=w.colorModeForRenderPass(),[le,pe]=q instanceof fn?[{},R]:w.stencilConfigForOverlap(R),oe=pe[pe.length-1].overscaledZ,Te=!w.options.moving;for(const Oe of pe){const ye=w.depthModeForSublayer(Oe.overscaledZ-oe,j.paint.get("raster-opacity")===1?rr.ReadWrite:rr.ReadOnly,U.LESS),Pe=P.getTile(Oe);Pe.registerFadeDuration(j.paint.get("raster-fade-duration"));const Be=P.findLoadedParent(Oe,0),He=wh(Pe,Be,P,j,w.transform,w.style.map.terrain);let tt,mt;const at=j.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;z.activeTexture.set(U.TEXTURE0),Pe.texture.bind(at,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(U.TEXTURE1),Be?(Be.texture.bind(at,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,Be.tileID.overscaledZ-Pe.tileID.overscaledZ),mt=[Pe.tileID.canonical.x*tt%1,Pe.tileID.canonical.y*tt%1]):Pe.texture.bind(at,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const _t=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Oe),Xt=_t?Oe:null,Yn=Xt?Xt.posMatrix:w.transform.calculatePosMatrix(Oe.toUnwrapped(),Te),kt=ei(Yn,mt||[0,0],tt||1,He,j);q instanceof fn?X.draw(z,U.TRIANGLES,ye,Yr.disabled,ae,$r.disabled,kt,_t,j.id,q.boundsBuffer,w.quadTriangleIndexBuffer,q.boundsSegments):X.draw(z,U.TRIANGLES,ye,le[Oe.overscaledZ],ae,$r.disabled,kt,_t,j.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(r,c,m,v);break;case"background":(function(w,P,j,R){const z=j.paint.get("background-color"),U=j.paint.get("background-opacity");if(U===0)return;const q=w.context,X=q.gl,ae=w.transform,le=ae.tileSize,pe=j.paint.get("background-pattern");if(w.isPatternMissing(pe))return;const oe=!pe&&z.a===1&&U===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==oe)return;const Te=Yr.disabled,Oe=w.depthModeForSublayer(0,oe==="opaque"?rr.ReadWrite:rr.ReadOnly),ye=w.colorModeForRenderPass(),Pe=w.useProgram(pe?"backgroundPattern":"background"),Be=R||ae.coveringTiles({tileSize:le,terrain:w.style.map.terrain});pe&&(q.activeTexture.set(X.TEXTURE0),w.imageManager.bind(w.context));const He=j.getCrossfadeParameters();for(const tt of Be){const mt=R?tt.posMatrix:w.transform.calculatePosMatrix(tt.toUnwrapped()),at=pe?ms(mt,U,w,pe,{tileID:tt,tileSize:le},He):mc(mt,U,z),_t=w.style.map.terrain&&w.style.map.terrain.getTerrainData(tt);Pe.draw(q,X.TRIANGLES,Oe,Te,ye,$r.disabled,at,_t,j.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(r,0,m,v);break;case"custom":(function(w,P,j){const R=w.context,z=j.implementation;if(w.renderPass==="offscreen"){const U=z.prerender;U&&(w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),U.call(z,R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),R.setStencilMode(Yr.disabled);const U=z.renderingMode==="3d"?new rr(w.context.gl.LEQUAL,rr.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,rr.ReadOnly);R.setDepthMode(U),z.render(R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState(),R.bindFramebuffer.set(null)}})(r,0,m)}}translatePosMatrix(r,c,m,v,w){if(!m[0]&&!m[1])return r;const P=w?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(P){const z=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*z,m[0]*z+m[1]*U]}const j=[w?m[0]:xe(c,m[0],this.transform.zoom),w?m[1]:xe(c,m[1],this.transform.zoom),0],R=new Float32Array(16);return u.$(R,r,j),R}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!c||!m}useProgram(r,c){this.cache=this.cache||{};const m=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new ga(this.context,zr[r],c,Sl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new gt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class Ns{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,m){const v=Math.pow(2,m),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const R=1/(j=u.ag([],j,r))[3]/c*v;return u.b3(j,j,[R,R,1/j[3],R])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const R=function(X,ae){var le=ae[0],pe=ae[1],oe=ae[2],Te=le*le+pe*pe+oe*oe;return Te>0&&(Te=1/Math.sqrt(Te)),X[0]=ae[0]*Te,X[1]=ae[1]*Te,X[2]=ae[2]*Te,X}([],function(X,ae,le){var pe=ae[0],oe=ae[1],Te=ae[2],Oe=le[0],ye=le[1],Pe=le[2];return X[0]=oe*Pe-Te*ye,X[1]=Te*Oe-pe*Pe,X[2]=pe*ye-oe*Oe,X}([],Je([],w[j[0]],w[j[1]]),Je([],w[j[2]],w[j[1]]))),z=-((U=R)[0]*(q=w[j[1]])[0]+U[1]*q[1]+U[2]*q[2]);var U,q;return R.concat(z)});return new Ns(w,P)}}class bc{constructor(r,c){this.min=r,this.max=c,this.center=function(m,v,w){return m[0]=.5*v[0],m[1]=.5*v[1],m[2]=.5*v[2],m}([],function(m,v,w){return m[0]=v[0]+w[0],m[1]=v[1]+w[1],m[2]=v[2]+w[2],m}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],m=Ve(this.min),v=Ve(this.max);for(let w=0;w<c.length;w++)m[w]=c[w]?this.min[w]:this.center[w],v[w]=c[w]?this.center[w]:this.max[w];return v[2]=this.max[2],new bc(m,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let v=0;v<r.planes.length;v++){const w=r.planes[v];let P=0;for(let j=0;j<c.length;j++)u.b4(w,c[j])>=0&&P++;if(P===0)return 0;P!==c.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let w=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let j=0;j<r.points.length;j++){const R=r.points[j][v]-this.min[v];w=Math.min(w,R),P=Math.max(P,R)}if(P<0||w>this.max[v]-this.min[v])return 0}return 1}}class uu{constructor(r=0,c=0,m=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=m,this.right=v}interpolate(r,c,m){return c.top!=null&&r.top!=null&&(this.top=u.B.number(r.top,c.top,m)),c.bottom!=null&&r.bottom!=null&&(this.bottom=u.B.number(r.bottom,c.bottom,m)),c.left!=null&&r.left!=null&&(this.left=u.B.number(r.left,c.left,m)),c.right!=null&&r.right!=null&&(this.right=u.B.number(r.right,c.right,m)),this}getCenter(r,c){const m=u.ad((this.left+r-this.right)/2,0,r),v=u.ad((this.top+c-this.bottom)/2,0,c);return new u.P(m,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new uu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ud{constructor(r,c,m,v,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=w===void 0||!!w,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=m??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new uu,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new ud(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-u.b5(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var m=new u.A(4);return u.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,v,w){var P=v[0],j=v[1],R=v[2],z=v[3],U=Math.sin(w),q=Math.cos(w);m[0]=P*q+R*U,m[1]=j*q+z*U,m[2]=P*-U+R*q,m[3]=j*-U+z*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=u.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,m){this._unmodified=!1,this._edgeInsets.interpolate(r,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new u.b6(0,r)];if(this._renderWorldCopies){const m=this.pointCoordinate(new u.P(0,0)),v=this.pointCoordinate(new u.P(this.width,0)),w=this.pointCoordinate(new u.P(this.width,this.height)),P=this.pointCoordinate(new u.P(0,this.height)),j=Math.floor(Math.min(m.x,v.x,w.x,P.x)),R=Math.floor(Math.max(m.x,v.x,w.x,P.x)),z=1;for(let U=j-z;U<=R+z;U++)U!==0&&c.push(new u.b6(U,r))}return c}coveringTiles(r){var c,m;let v=this.coveringZoomLevel(r);const w=v;if(r.minzoom!==void 0&&v<r.minzoom)return[];r.maxzoom!==void 0&&v>r.maxzoom&&(v=r.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),j=u.U.fromLngLat(this.center),R=Math.pow(2,v),z=[R*P.x,R*P.y,0],U=[R*j.x,R*j.y,0],q=Ns.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let X=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=v);const ae=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,le=ye=>({aabb:new bc([ye*R,0,0],[(ye+1)*R,R,0]),zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),pe=[],oe=[],Te=v,Oe=r.reparseOverscaled?w:v;if(this._renderWorldCopies)for(let ye=1;ye<=3;ye++)pe.push(le(-ye)),pe.push(le(ye));for(pe.push(le(0));pe.length>0;){const ye=pe.pop(),Pe=ye.x,Be=ye.y;let He=ye.fullyVisible;if(!He){const Xt=ye.aabb.intersects(q);if(Xt===0)continue;He=Xt===2}const tt=r.terrain?z:U,mt=ye.aabb.distanceX(tt),at=ye.aabb.distanceY(tt),_t=Math.max(Math.abs(mt),Math.abs(at));if(ye.zoom===Te||_t>ae+(1<<Te-ye.zoom)-2&&ye.zoom>=X){const Xt=Te-ye.zoom,Yn=z[0]-.5-(Pe<<Xt),kt=z[1]-.5-(Be<<Xt);oe.push({tileID:new u.O(ye.zoom===Te?Oe:ye.zoom,ye.wrap,ye.zoom,Pe,Be),distanceSq:Ye([U[0]-.5-Pe,U[1]-.5-Be]),tileDistanceToCamera:Math.sqrt(Yn*Yn+kt*kt)})}else for(let Xt=0;Xt<4;Xt++){const Yn=(Pe<<1)+Xt%2,kt=(Be<<1)+(Xt>>1),xn=ye.zoom+1;let Jt=ye.aabb.quadrant(Xt);if(r.terrain){const kr=new u.O(xn,ye.wrap,xn,Yn,kt),Zn=r.terrain.getMinMaxElevation(kr),Rn=(c=Zn.minElevation)!==null&&c!==void 0?c:this.elevation,Xn=(m=Zn.maxElevation)!==null&&m!==void 0?m:this.elevation;Jt=new bc([Jt.min[0],Jt.min[1],Rn],[Jt.max[0],Jt.max[1],Xn])}pe.push({aabb:Jt,zoom:xn,x:Yn,y:kt,wrap:ye.wrap,fullyVisible:He})}}return oe.sort((ye,Pe)=>ye.distanceSq-Pe.distanceSq).map(ye=>ye.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=u.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.P(u.G(r.lng)*this.worldSize,u.H(c)*this.worldSize)}unproject(r){return new u.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.pointLocation(this.centerPoint,r),m=r.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-m))return;const v=this.getCameraPosition(),w=u.U.fromLngLat(v.lngLat,v.altitude),P=u.U.fromLngLat(c,m),j=w.x-P.x,R=w.y-P.y,z=w.z-P.z,U=Math.sqrt(j*j+R*R+z*z),q=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=m,this._center=c,this.zoom=q}setLocationAtPoint(r,c){const m=this.pointCoordinate(c),v=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(r),P=new u.U(w.x-(m.x-v.x),w.y-(m.y-v.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return u.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const X=c.pointCoordinate(r);if(X!=null)return X}const m=[r.x,r.y,0,1],v=[r.x,r.y,1,1];u.ag(m,m,this.pixelMatrixInverse),u.ag(v,v,this.pixelMatrixInverse);const w=m[3],P=v[3],j=m[1]/w,R=v[1]/P,z=m[2]/w,U=v[2]/P,q=z===U?0:(0-z)/(U-z);return new u.U(u.B.number(m[0]/w,v[0]/P,q)/this.worldSize,u.B.number(j,R,q)/this.worldSize)}coordinatePoint(r,c=0,m=this.pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return u.ag(v,v,m),new u.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new ct().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ct([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,c=!1){const m=r.key,v=c?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const w=r.canonical,P=this.worldSize/this.zoomScale(w.z),j=w.x+Math.pow(2,w.z)*r.wrap,R=u.ao(new Float64Array(16));return u.$(R,R,[j*P,w.y*P,0]),u.a0(R,R,[P/u.N,P/u.N,1]),u.a1(R,c?this.alignedProjMatrix:this.projMatrix,R),v[m]=new Float32Array(R),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,c,m,v,w=-90,P=90,j=-180,R=180;const z=this.size,U=this._unmodified;if(this.latRange){const ae=this.latRange;w=u.H(ae[1])*this.worldSize,P=u.H(ae[0])*this.worldSize,r=P-w<z.y?z.y/(P-w):0}if(this.lngRange){const ae=this.lngRange;j=u.b5(u.G(ae[0])*this.worldSize,0,this.worldSize),R=u.b5(u.G(ae[1])*this.worldSize,0,this.worldSize),R<j&&(R+=this.worldSize),c=R-j<z.x?z.x/(R-j):0}const q=this.point,X=Math.max(c||0,r||0);if(X)return this.center=this.unproject(new u.P(c?(R+j)/2:q.x,r?(P+w)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const ae=q.y,le=z.y/2;ae-le<w&&(v=w+le),ae+le>P&&(v=P-le)}if(this.lngRange){const ae=(j+R)/2,le=u.b5(q.x,ae-this.worldSize/2,ae+this.worldSize/2),pe=z.x/2;le-pe<j&&(m=j+pe),le+pe>R&&(m=R-pe)}m===void 0&&v===void 0||(this.center=this.unproject(new u.P(m!==void 0?m:q.x,v!==void 0?v:q.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b7(1,this.center.lat)*this.worldSize;let v=u.ao(new Float64Array(16));u.a0(v,v,[this.width/2,-this.height/2,1]),u.$(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=u.ao(new Float64Array(16)),u.a0(v,v,[1,-1,1]),u.$(v,v,[-1,-1,0]),u.a0(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),j=w-P*this._pixelPerMeter/Math.cos(this._pitch),R=P<0?j:w,z=Math.PI/2+this._pitch,U=this._fov*(.5+r.y/this.height),q=Math.sin(U)*R/Math.sin(u.ad(Math.PI-z-U,.01,Math.PI-.01)),X=this.getHorizon(),ae=2*Math.atan(X/this.cameraToCenterDistance)*(.5+r.y/(2*X)),le=Math.sin(ae)*R/Math.sin(u.ad(Math.PI-z-ae,.01,Math.PI-.01)),pe=Math.min(q,le),oe=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+R),Te=this.height/50;v=new Float64Array(16),u.b8(v,this._fov,this.width/this.height,Te,oe),v[8]=2*-r.x/this.width,v[9]=2*r.y/this.height,u.a0(v,v,[1,-1,1]),u.$(v,v,[0,0,-this.cameraToCenterDistance]),u.b9(v,v,this._pitch),u.ae(v,v,this.angle),u.$(v,v,[-c,-m,0]),this.mercatorMatrix=u.a0([],v,[this.worldSize,this.worldSize,this.worldSize]),u.a0(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.a1(new Float64Array(16),this.labelPlaneMatrix,v),u.$(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=u.as([],v),this.pixelMatrix3D=u.a1(new Float64Array(16),this.labelPlaneMatrix,v);const Oe=this.width%2/2,ye=this.height%2/2,Pe=Math.cos(this.angle),Be=Math.sin(this.angle),He=c-Math.round(c)+Pe*Oe+Be*ye,tt=m-Math.round(m)+Pe*ye+Be*Oe,mt=new Float64Array(v);if(u.$(mt,mt,[He>.5?He-1:He,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=mt,v=u.as(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let m=c.x,v=c.y,w=c.x,P=c.y;for(const j of r)m=Math.min(m,j.x),v=Math.min(v,j.y),w=Math.max(w,j.x),P=Math.max(P,j.y);return[new u.P(m,v),new u.P(w,v),new u.P(w,P),new u.P(m,P),new u.P(m,v)]}}}function kl(b,r){let c,m=!1,v=null,w=null;const P=()=>{v=null,m&&(b.apply(w,c),v=setTimeout(P,r),m=!1)};return(...j)=>(m=!0,w=this,c=j,v||P(),v)}class du{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(m=v)}),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(m=>isNaN(m))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=kl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),P=Math.round(c.lng*w)/w,j=Math.round(c.lat*w)/w,R=this._map.getBearing(),z=this._map.getPitch();let U="";if(U+=r?`/${P}/${j}/${m}`:`${m}/${j}/${P}`,(R||z)&&(U+="/"+Math.round(10*R)/10),z&&(U+=`/${Math.round(z)}`),this._hashName){const q=this._hashName;let X=!1;const ae=window.location.hash.slice(1).split("&").map(le=>{const pe=le.split("=")[0];return pe===q?(X=!0,`${pe}=${U}`):le}).filter(le=>le);return X||ae.push(`${q}=${U}`),`#${ae.join("&")}`}return`#${U}`}}const xc={linearity:.3,easing:u.ba(0,0,.3,1)},Rf=u.e({deceleration:2500,maxSpeed:1400},xc),Lf=u.e({deceleration:20,maxSpeed:1400},xc),Sh=u.e({deceleration:1e3,maxSpeed:360},xc),If=u.e({deceleration:1e3,maxSpeed:90},xc);class Eh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=u.h.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)c.zoom+=w.zoomDelta||0,c.bearing+=w.bearingDelta||0,c.pitch+=w.pitchDelta||0,w.panDelta&&c.pan._add(w.panDelta),w.around&&(c.around=w.around),w.pinchAround&&(c.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const w=hu(c.pan.mag(),m,u.e({},Rf,r||{}));v.offset=c.pan.mult(w.amount/c.pan.mag()),v.center=this._map.transform.center,ra(v,w)}if(c.zoom){const w=hu(c.zoom,m,Lf);v.zoom=this._map.transform.zoom+w.amount,ra(v,w)}if(c.bearing){const w=hu(c.bearing,m,Sh);v.bearing=this._map.transform.bearing+u.ad(w.amount,-179,179),ra(v,w)}if(c.pitch){const w=hu(c.pitch,m,If);v.pitch=this._map.transform.pitch+w.amount,ra(v,w)}if(v.zoom||v.bearing){const w=c.pinchAround===void 0?c.around:c.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),u.e(v,{noMoveStart:!0})}}function ra(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function hu(b,r,c){const{maxSpeed:m,linearity:v,deceleration:w}=c,P=u.ad(b*v/(r/1e3),-m,m),j=Math.abs(P)/(w*v);return{easing:c.easing,duration:1e3*j,amount:P*(j/2)}}class Js extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m,v={}){const w=k.mousePos(c.getCanvasContainer(),m),P=c.unproject(w);super(r,u.e({point:w,lngLat:P,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class fu extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){const v=r==="touchend"?m.changedTouches:m.touches,w=k.touchPos(c.getCanvasContainer(),v),P=w.map(R=>c.unproject(R)),j=w.reduce((R,z,U,q)=>R.add(z.div(q.length)),new u.P(0,0));super(r,{points:w,point:j,lngLats:P,lngLat:c.unproject(j),originalEvent:m}),this._defaultPrevented=!1}}class dd extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class Za{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new dd(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new Js(r.type,this._map,r))}mouseup(r){this._map.fire(new Js(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Js(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Js(r.type,this._map,r))}mouseover(r){this._map.fire(new Js(r.type,this._map,r))}mouseout(r){this._map.fire(new Js(r.type,this._map,r))}touchstart(r){return this._firePreventable(new fu(r.type,this._map,r))}touchmove(r){this._map.fire(new fu(r.type,this._map,r))}touchend(r){this._map.fire(new fu(r.type,this._map,r))}touchcancel(r){this._map.fire(new fu(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Js(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Js("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Js(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Al{constructor(r,c){this._map=r,this._tr=new Na(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(k.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const w=Math.min(v.x,m.x),P=Math.max(v.x,m.x),j=Math.min(v.y,m.y),R=Math.max(v.y,m.y);k.setTransform(this._box,`translate(${w}px,${j}px)`),this._box.style.width=P-w+"px",this._box.style.height=R-j+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const m=this._startPos,v=c;if(this.reset(),k.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:w=>w.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new u.k(r,{originalEvent:c}))}}function xo(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const c={};for(let m=0;m<b.length;m++)c[b[m].identifier]=r[m];return c}class Sa{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const w=new u.P(0,0);for(const P of v)w._add(P);return w.div(v.length)}(c),this.touches=xo(m,c)))}touchmove(r,c,m){if(this.aborted||!this.centroid)return;const v=xo(m,c);for(const w in this.touches){const P=v[w];(!P||P.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(r,c,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class hd{constructor(r){this.singleTap=new Sa(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,m){this.singleTap.touchstart(r,c,m)}touchmove(r,c,m){this.singleTap.touchmove(r,c,m)}touchend(r,c,m){const v=this.singleTap.touchend(r,c,m);if(v){const w=r.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(v)<30;if(w&&P||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Ea{constructor(r){this._tr=new Na(r),this._zoomIn=new hd({numTouches:1,numTaps:2}),this._zoomOut=new hd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,m){this._zoomIn.touchstart(r,c,m),this._zoomOut.touchstart(r,c,m)}touchmove(r,c,m){this._zoomIn.touchmove(r,c,m),this._zoomOut.touchmove(r,c,m)}touchend(r,c,m){const v=this._zoomIn.touchend(r,c,m),w=this._zoomOut.touchend(r,c,m),P=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(v)},{originalEvent:r})}):w?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(w)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Da{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=c.length?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&k.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vf={0:1,2:2};class Dh{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=k.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,m){const v=Vf[m];return c.buttons===void 0||(c.buttons&v)!==v}(r,this._eventButton)}isValidEndEvent(r){return k.mouseButton(r)===this._eventButton}}class Th{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Qi=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=function(r){r.preventDefault()}},Ml=({enable:b,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const m=new Dh({checkCorrectEvent:v=>k.mouseButton(v)===0&&v.ctrlKey||k.mouseButton(v)===2});return new Da({clickTolerance:r,move:(v,w)=>({bearingDelta:(w.x-v.x)*c}),moveStateManager:m,enable:b,assignEvents:Qi})},Ta=({enable:b,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const m=new Dh({checkCorrectEvent:v=>k.mouseButton(v)===0&&v.ctrlKey||k.mouseButton(v)===2});return new Da({clickTolerance:r,move:(v,w)=>({pitchDelta:(w.y-v.y)*c}),moveStateManager:m,enable:b,assignEvents:Qi})};class qt{constructor(r,c){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,c,m){return this._calculateTransform(r,c,m)}touchmove(r,c,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,c,m)}touchend(r,c,m){this._calculateTransform(r,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,m){m.length>0&&(this._active=!0);const v=xo(m,c),w=new u.P(0,0),P=new u.P(0,0);let j=0;for(const z in v){const U=v[z],q=this._touches[z];q&&(w._add(U),P._add(U.sub(q)),j++,v[z]=U)}if(this._touches=v,j<this._minTouches||!P.mag())return;const R=P.div(j);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(j),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,m){if(!this._firstTwoTouches)return;r.preventDefault();const[v,w]=this._firstTwoTouches,P=Ka(m,c,v),j=Ka(m,c,w);if(!P||!j)return;const R=this._aroundCenter?null:P.add(j).div(2);return this._move([P,j],R,r)}touchend(r,c,m){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,P=Ka(m,c,v),j=Ka(m,c,w);P&&j||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ka(b,r,c){for(let m=0;m<b.length;m++)if(b[m].identifier===c)return r[m]}function _c(b,r){return Math.log(b/r)/Math.LN2}class Ph extends fd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(_c(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_c(this._distance,m),pinchAround:c}}}function It(b,r){return 180*b.angleWith(r)/Math.PI}class Rl extends fd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:It(this._vector,m),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,m=It(r,this._startVector);return Math.abs(m)<c}}function jh(b){return Math.abs(b.y)>Math.abs(b.x)}class pu extends fd{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,m){super.touchstart(r,c,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,jh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),w=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,w,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,m){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,w=c.mag()>=2;if(!v&&!w)return;if(!v||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=r.y>0==c.y>0;return jh(r)&&jh(c)&&P}}const kh={panStep:100,bearingStep:15,pitchStep:10};class zf{constructor(r){this._tr=new Na(r);const c=kh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,m=0,v=0,w=0,P=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),w=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),w=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),P=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:j=>{const R=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:Of,zoom:c?Math.round(R.zoom)+c*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+m*this._bearingStep,pitch:R.pitch+v*this._pitchStep,offset:[-w*this._panStep,-P*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Of(b){return b*(2-b)}const md=4.000244140625;class Ah{constructor(r,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new Na(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=u.h.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%md==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=k.mousePos(this._el,r),m=this._tr;this._around=u.L.convert(this._aroundCenter?m.center:m.unproject(c)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>md?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&R!==0&&(R=1/R);const z=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(z*R))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,m=this._startZoom,v=this._easing;let w,P=!1;if(this._type==="wheel"&&m&&v){const j=Math.min((u.h.now()-this._lastWheelEventTime)/200,1),R=v(j);w=u.B.number(m,c,R),j<1?this._frameId||(this._frameId=!0):P=!0}else w=c,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:w-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=u.bb;if(this._prevEase){const m=this._prevEase,v=(u.h.now()-m.start)/m.duration,w=m.easing(v+.01)-m.easing(v),P=.27/Math.sqrt(w*w+1e-4)*.01,j=Math.sqrt(.0729-P*P);c=u.ba(P,j,.25,1)}return this._prevEase={start:u.h.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ya{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xa{constructor(r){this._tr=new Na(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pd{constructor(){this._tap=new hd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],w=r.timeStamp-this._tapTime<500,P=this._tapPoint.dist(v)<30;w&&P?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,c,m)}touchmove(r,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(r,c,m)}touchend(r,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(r,c,m);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mh{constructor(r,c,m){this._el=r,this._mousePan=c,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ss{constructor(r,c,m){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ja{constructor(r,c,m,v){this._el=r,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wc=b=>b.zoom||b.drag||b.pitch||b.rotate;class gd extends u.k{}function Cc(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class gu{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,w)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=v.type==="renderFrame"?void 0:v,j={needsRenderFrame:!1},R={},z={},U=v.touches,q=U?this._getMapTouches(U):void 0,X=q?k.touchPos(this._el,q):k.mousePos(this._el,v);for(const{handlerName:pe,handler:oe,allowed:Te}of this._handlers){if(!oe.isEnabled())continue;let Oe;this._blockedByActive(z,Te,pe)?oe.reset():oe[w||v.type]&&(Oe=oe[w||v.type](v,X,q),this.mergeHandlerResult(j,R,Oe,pe,P),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||oe.isActive())&&(z[pe]=oe)}const ae={};for(const pe in this._previousActiveHandlers)z[pe]||(ae[pe]=P);this._previousActiveHandlers=z,(Object.keys(ae).length||Cc(j))&&(this._changes.push([j,R,ae]),this._triggerRenderFrame()),(Object.keys(z).length||Cc(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=j;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Eh(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,w,P]of this._listeners)k.addEventListener(v,w,v===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[r,c,m]of this._listeners)k.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Za(c,r));const v=c.boxZoom=new Al(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const w=new Ea(c),P=new Xa(c);c.doubleClickZoom=new Ya(P,w),this._add("tapZoom",w),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const j=new pd;this._add("tapDragZoom",j);const R=c.touchPitch=new pu(c);this._add("touchPitch",R),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const z=Ml(r),U=Ta(r);c.dragRotate=new Ss(r,z,U),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const q=(({enable:Te,clickTolerance:Oe})=>{const ye=new Dh({checkCorrectEvent:Pe=>k.mouseButton(Pe)===0&&!Pe.ctrlKey});return new Da({clickTolerance:Oe,move:(Pe,Be)=>({around:Be,panDelta:Be.sub(Pe)}),activateOnStart:!0,moveStateManager:ye,enable:Te,assignEvents:Qi})})(r),X=new qt(r,c);c.dragPan=new Mh(m,q,X),this._add("mousePan",q),this._add("touchPan",X,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const ae=new Rl,le=new Ph;c.touchZoomRotate=new Ja(m,le,ae,j),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const pe=c.scrollZoom=new Ah(c,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const oe=c.keyboard=new zf(c);this._add("keyboard",oe),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new mu(c))}_add(r,c,m){this._handlers.push({handlerName:r,handler:c,allowed:m}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wc(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,m){for(const v in r)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const m of r)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(r,c,m,v,w){if(!m)return;u.e(r,m);const P={handlerName:v,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(c.zoom=P),m.panDelta!==void 0&&(c.drag=P),m.pitchDelta!==void 0&&(c.pitch=P),m.bearingDelta!==void 0&&(c.rotate=P)}_applyChanges(){const r={},c={},m={};for(const[v,w,P]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),u.e(c,w),u.e(m,P);this._updateMapTransform(r,c,m),this._changes=[]}_updateMapTransform(r,c,m){const v=this._map,w=v._getTransformForUpdate(),P=v.terrain;if(!(Cc(r)||P&&this._terrainMovement))return this._fireEvents(c,m,!0);let{panDelta:j,zoomDelta:R,bearingDelta:z,pitchDelta:U,around:q,pinchAround:X}=r;X!==void 0&&(q=X),v._stop(!0),q=q||v.transform.centerPoint;const ae=w.pointLocation(j?q.sub(j):q);z&&(w.bearing+=z),U&&(w.pitch+=U),R&&(w.zoom+=R),P?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(j)):w.setLocationAtPoint(ae,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(ae,q),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,w.recalculateZoom(v.terrain)})):w.setLocationAtPoint(ae,q),v._applyUpdatedTransform(w),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,m,!0)}_fireEvents(r,c,m){const v=wc(this._eventsInProgress),w=wc(r),P={};for(const U in r){const{originalEvent:q}=r[U];this._eventsInProgress[U]||(P[`${U}start`]=q),this._eventsInProgress[U]=r[U]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in P)this._fireEvent(U,P[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in r){const{originalEvent:q}=r[U];this._fireEvent(U,q)}const j={};let R;for(const U in this._eventsInProgress){const{handlerName:q,originalEvent:X}=this._eventsInProgress[U];this._handlersById[q].isActive()||(delete this._eventsInProgress[U],R=c[q]||X,j[`${U}end`]=R)}for(const U in j)this._fireEvent(U,j[U]);const z=wc(this._eventsInProgress);if(m&&(v||w)&&!z){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!U||!U.essential&&u.h.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:R})),q(this._map.getBearing())&&this._map.resetNorth()):(q(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new u.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new gd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Bf extends u.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const m=Math.min((u.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,m){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},c),m)}panTo(r,c,m){return this.easeTo(u.e({center:r},c),m)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,m){return this.easeTo(u.e({zoom:r},c),m)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,m){return this.easeTo(u.e({bearing:r},c),m)}resetNorth(r,c){return this.rotateTo(0,u.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=ct.convert(r);const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,c)}_cameraForBoxAndBearing(r,c,m,v){const w={top:0,bottom:0,right:0,left:0};if(typeof(v=u.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const Be=v.padding;v.padding={top:Be,bottom:Be,right:Be,left:Be}}v.padding=u.e(w,v.padding);const P=this.transform,j=P.padding,R=P.project(u.L.convert(r)),z=P.project(u.L.convert(c)),U=R.rotate(-m*Math.PI/180),q=z.rotate(-m*Math.PI/180),X=new u.P(Math.max(U.x,q.x),Math.max(U.y,q.y)),ae=new u.P(Math.min(U.x,q.x),Math.min(U.y,q.y)),le=X.sub(ae),pe=(P.width-(j.left+j.right+v.padding.left+v.padding.right))/le.x,oe=(P.height-(j.top+j.bottom+v.padding.top+v.padding.bottom))/le.y;if(oe<0||pe<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Te=Math.min(P.scaleZoom(P.scale*Math.min(pe,oe)),v.maxZoom),Oe=u.P.convert(v.offset),ye=new u.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Pe=Oe.add(ye).mult(P.scale/P.zoomScale(Te));return{center:P.unproject(R.add(z).div(2).sub(Pe)),zoom:Te,bearing:m}}fitBounds(r,c,m){return this._fitInternal(this.cameraForBounds(r,c),c,m)}fitScreenCoordinates(r,c,m,v,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(c)),m,v),v,w)}_fitInternal(r,c,m){return r?(delete(c=u.e(r,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(r,c){this.stop();const m=this._getTransformForUpdate();let v=!1,w=!1,P=!1;return"zoom"in r&&m.zoom!==+r.zoom&&(v=!0,m.zoom=+r.zoom),r.center!==void 0&&(m.center=u.L.convert(r.center)),"bearing"in r&&m.bearing!==+r.bearing&&(w=!0,m.bearing=+r.bearing),"pitch"in r&&m.pitch!==+r.pitch&&(P=!0,m.pitch=+r.pitch),r.padding==null||m.isPaddingEqual(r.padding)||(m.padding=r.padding),this._applyUpdatedTransform(m),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),v&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),w&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),P&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(r,c,m,v=0){const w=u.U.fromLngLat(r,c),P=u.U.fromLngLat(m,v),j=P.x-w.x,R=P.y-w.y,z=P.z-w.z,U=Math.hypot(j,R,z);if(U===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(j,R),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),ae=180*Math.atan2(j,-R)/Math.PI;let le=180*Math.acos(q/U)/Math.PI;return le=z<0?90-le:90+le,{center:P.toLngLat(),zoom:X,pitch:le,bearing:ae}}easeTo(r,c){this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.bb},r)).animate===!1||!r.essential&&u.h.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?+r.zoom:v,z="bearing"in r?this._normalizeBearing(r.bearing,w):w,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=u.P.convert(r.offset);let ae=m.centerPoint.add(X);const le=m.pointLocation(ae),pe=u.L.convert(r.center||le);this._normalizeCenter(pe);const oe=m.project(le),Te=m.project(pe).sub(oe),Oe=m.zoomScale(R-v);let ye,Pe;r.around&&(ye=u.L.convert(r.around),Pe=m.locationPoint(ye));const Be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||R!==v,this._rotating=this._rotating||w!==z,this._pitching=this._pitching||U!==P,this._padding=!m.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,Be),this.terrain&&this._prepareElevation(pe),this._ease(He=>{if(this._zooming&&(m.zoom=u.B.number(v,R,He)),this._rotating&&(m.bearing=u.B.number(w,z,He)),this._pitching&&(m.pitch=u.B.number(P,U,He)),this._padding&&(m.interpolatePadding(j,q,He),ae=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(He),ye)m.setLocationAtPoint(ye,Pe);else{const tt=m.zoomScale(m.zoom-v),mt=R>v?Math.min(2,Oe):Math.max(.5,Oe),at=Math.pow(mt,1-He),_t=m.unproject(oe.add(Te.mult(He*at)).mult(tt));m.setLocationAtPoint(m.renderWorldCopies?_t.wrap():_t,ae)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},He=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,He)},r),this}_prepareEase(r,c,m={}){this._moving=!0,c||m.moving||this.fire(new u.k("movestart",r)),this._zooming&&!m.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(c-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=u.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const c=r.clone(),{center:m,zoom:v,pitch:w,bearing:P,elevation:j}=this.transformCameraUpdate(c);m&&(c.center=m),v!==void 0&&(c.zoom=v),w!==void 0&&(c.pitch=w),P!==void 0&&(c.bearing=P),j!==void 0&&(c.elevation=j),this.transform.apply(c)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new u.k("zoomend",r)),v&&this.fire(new u.k("rotateend",r)),w&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,c){if(!r.essential&&u.h.prefersReducedMotion){const Jt=u.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Jt,c)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.bb},r);const m=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?u.ad(+r.zoom,m.minZoom,m.maxZoom):v,z="bearing"in r?this._normalizeBearing(r.bearing,w):w,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=m.zoomScale(R-v),ae=u.P.convert(r.offset);let le=m.centerPoint.add(ae);const pe=m.pointLocation(le),oe=u.L.convert(r.center||pe);this._normalizeCenter(oe);const Te=m.project(pe),Oe=m.project(oe).sub(Te);let ye=r.curve;const Pe=Math.max(m.width,m.height),Be=Pe/X,He=Oe.mag();if("minZoom"in r){const Jt=u.ad(Math.min(r.minZoom,v,R),m.minZoom,m.maxZoom),kr=Pe/m.zoomScale(Jt-v);ye=Math.sqrt(kr/He*2)}const tt=ye*ye;function mt(Jt){const kr=(Be*Be-Pe*Pe+(Jt?-1:1)*tt*tt*He*He)/(2*(Jt?Be:Pe)*tt*He);return Math.log(Math.sqrt(kr*kr+1)-kr)}function at(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function _t(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}const Xt=mt(!1);let Yn=function(Jt){return _t(Xt)/_t(Xt+ye*Jt)},kt=function(Jt){return Pe*((_t(Xt)*(at(kr=Xt+ye*Jt)/_t(kr))-at(Xt))/tt)/He;var kr},xn=(mt(!0)-Xt)/ye;if(Math.abs(He)<1e-6||!isFinite(xn)){if(Math.abs(Pe-Be)<1e-6)return this.easeTo(r,c);const Jt=Be<Pe?-1:1;xn=Math.abs(Math.log(Be/Pe))/ye,kt=function(){return 0},Yn=function(kr){return Math.exp(Jt*ye*kr)}}return r.duration="duration"in r?+r.duration:1e3*xn/("screenSpeed"in r?+r.screenSpeed/ye:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==z,this._pitching=U!==P,this._padding=!m.isPaddingEqual(q),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(oe),this._ease(Jt=>{const kr=Jt*xn,Zn=1/Yn(kr);m.zoom=Jt===1?R:v+m.scaleZoom(Zn),this._rotating&&(m.bearing=u.B.number(w,z,Jt)),this._pitching&&(m.pitch=u.B.number(P,U,Jt)),this._padding&&(m.interpolatePadding(j,q,Jt),le=m.centerPoint.add(ae)),this.terrain&&!r.freezeElevation&&this._updateElevation(Jt);const Rn=Jt===1?oe:m.unproject(Te.add(Oe.mult(kt(kr))).mult(Zn));m.setLocationAtPoint(m.renderWorldCopies?Rn.wrap():Rn,le),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!r){const m=this.handlers;m&&m.stop(!1)}return this}_ease(r,c,m){m.animate===!1||m.duration===0?(r(1),c()):(this._easeStart=u.h.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=u.b5(r,-180,180);const m=Math.abs(r-c);return Math.abs(r-360-c)<m&&(r-=360),Math.abs(r+360-c)<m&&(r+=360),r}_normalizeCenter(r){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const m=r.lng-c.center.lng;r.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class qs{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const m=this._map._getUIString(`AttributionControl.${c}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const w=c[v];if(w.used||w.usedForTerrain){const P=w.getSource();P.attribution&&r.indexOf(P.attribution)<0&&r.push(P.attribution)}}r=r.filter(v=>String(v).trim()),r.sort((v,w)=>v.length-w.length),r=r.filter((v,w)=>{for(let P=w+1;P<r.length;P++)if(r[P].indexOf(v)>=0)return!1;return!0});const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xr{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const c=k.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Rh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Nc=u.Q([{name:"a_pos3d",type:"Int16",components:3}]);class yd extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const m={};for(const v of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),u.aS(v.posMatrix,0,u.N,0,u.N,0,1),this._tiles[v.key]=new Gr(v,this.tileSize));for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const m=this._tiles[c];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID;if(v.canonical.equals(r.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16),u.aS(w.posMatrix,0,u.N,0,u.N,0,1),c[m]=w}else if(v.canonical.isChildOf(r.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16);const P=v.canonical.z-r.canonical.z,j=v.canonical.x-(v.canonical.x>>P<<P),R=v.canonical.y-(v.canonical.y>>P<<P),z=u.N>>P;u.aS(w.posMatrix,0,z,0,z,0,1),u.$(w.posMatrix,w.posMatrix,[-j*z,-R*z,0]),c[m]=w}else if(r.canonical.isChildOf(v.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16);const P=r.canonical.z-v.canonical.z,j=r.canonical.x-(r.canonical.x>>P<<P),R=r.canonical.y-(r.canonical.y>>P<<P),z=u.N>>P;u.aS(w.posMatrix,0,u.N,0,u.N,0,1),u.$(w.posMatrix,w.posMatrix,[j*z,R*z,0]),u.a0(w.posMatrix,w.posMatrix,[1/2**P,1/2**P,0]),c[m]=w}}return c}getSourceTile(r,c){const m=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!w||!w.dem)&&c)for(;v>=m.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(r.scaledTo(v--).key);return w}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class Sc{constructor(r,c,m){this.painter=r,this.sourceCache=new yd(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,m,v=u.N){var w;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const P=this.getTerrainData(r),j=(w=P.tile)===null||w===void 0?void 0:w.dem;if(!j)return 0;const R=function(le,pe,oe){var Te=pe[0],Oe=pe[1];return le[0]=oe[0]*Te+oe[4]*Oe+oe[12],le[1]=oe[1]*Te+oe[5]*Oe+oe[13],le}([],[c/v*u.N,m/v*u.N],P.u_terrain_matrix),z=[R[0]*j.dim,R[1]*j.dim],U=Math.floor(z[0]),q=Math.floor(z[1]),X=z[0]-U,ae=z[1]-q;return j.get(U,q)*(1-X)*(1-ae)+j.get(U+1,q)*X*(1-ae)+j.get(U,q+1)*(1-X)*ae+j.get(U+1,q+1)*X*ae}getElevationForLngLatZoom(r,c){const{tileID:m,mercatorX:v,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(m,v%u.N,w%u.N,u.N)}getElevation(r,c,m,v=u.N){return this.getDEMElevation(r,c,m,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,w=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new gt(v,w,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new gt(v,new u.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new gt(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c+c.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let w=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?w=r.canonical.z-v:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=r.canonical.x-(r.canonical.x>>w<<w),j=r.canonical.y-(r.canonical.y>>w<<w),R=u.bc(new Float64Array(16),[1/(u.N<<w),1/(u.N<<w),0]);u.$(R,R,[P*u.N,j*u.N,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new gt(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new gt(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,P=0;w<this._coordsTextureSize;w++)for(let j=0;j<this._coordsTextureSize;j++,P+=4)c[P+0]=255&j,c[P+1]=255&w,c[P+2]=j>>8<<4|w>>8,c[P+3]=0;const m=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new gt(r,m,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const w=c[0]+(c[2]>>4<<8),P=c[1]+((15&c[2])<<8),j=this.coordsIndex[255-c[3]],R=j&&this.sourceCache.getTileByID(j);if(!R)return null;const z=this._coordsTextureSize,U=(1<<R.tileID.canonical.z)*z;return new u.U(this._allowMercatorOverflow(r,(R.tileID.canonical.x*z+w)/U),(R.tileID.canonical.y*z+P)/U,this.getElevation(R.tileID,w,P,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new u.bd,m=new u.b0,v=this.meshSize,w=u.N/v,P=v*v;for(let q=0;q<=v;q++)for(let X=0;X<=v;X++)c.emplaceBack(X*w,q*w,0);for(let q=0;q<P;q+=v+1)for(let X=0;X<v;X++)m.emplaceBack(X+q,v+X+q+1,v+X+q+2),m.emplaceBack(X+q,v+X+q+2,X+q+1);const j=c.length,R=j+2*(v+1);for(const q of[0,1])for(let X=0;X<=v;X++)for(const ae of[0,1])c.emplaceBack(X*w,q*u.N,ae);for(let q=0;q<2*v;q+=2)m.emplaceBack(R+q,R+q+1,R+q+3),m.emplaceBack(R+q,R+q+3,R+q+2),m.emplaceBack(j+q,j+q+3,j+q+1),m.emplaceBack(j+q,j+q+2,j+q+3);const z=c.length,U=z+2*(v+1);for(const q of[0,1])for(let X=0;X<=v;X++)for(const ae of[0,1])c.emplaceBack(q*u.N,X*w,ae);for(let q=0;q<2*v;q+=2)m.emplaceBack(z+q,z+q+1,z+q+3),m.emplaceBack(z+q,z+q+3,z+q+2),m.emplaceBack(U+q,U+q+3,U+q+1),m.emplaceBack(U+q,U+q+2,U+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(m),vertexBuffer:r.createVertexBuffer(c,Nc.members),segments:u.S.simpleSegment(0,0,c.length,m.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var m;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,c){const m=u.U.fromLngLat(r.wrap()),v=(1<<c)*u.N,w=m.x*v,P=m.y*v,j=Math.floor(w/u.N),R=Math.floor(P/u.N);return{tileID:new u.O(c,0,c,j,R),mercatorX:w,mercatorY:P}}_allowMercatorOverflow(r,c){const m=r.x<this.painter.width/2;let v=u.bf(c);const w=this.painter.transform.center.lng;return m&&Math.sign(v)>0&&Math.sign(w)<0||!m&&Math.sign(v)<0&&Math.sign(w)>0?(v=360*Math.sign(w)+v,u.G(v)):c}}class Ff{constructor(r,c,m){this._context=r,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new gt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:r,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ps={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ec{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Ff(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(m=>!r._layers[m].isHidden(c)),this._coordsDescendingInv={};for(const m in r.sourceCaches){this._coordsDescendingInv[m]={};const v=r.sourceCaches[m].getVisibleCoordinates();for(const w of v){const P=this.terrain.sourceCache.getTerrainCoords(w);for(const j in P)this._coordsDescendingInv[m][j]||(this._coordsDescendingInv[m][j]=[]),this._coordsDescendingInv[m][j].push(P[j])}}this._coordsDescendingInvStr={};for(const m of r._order){const v=r._layers[m],w=v.source;if(ps[v.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(const P in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][P]=this._coordsDescendingInv[w][P].map(j=>j.key).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const w=this._coordsDescendingInvStr[v][m.tileID.key];w&&w!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,m=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ps[c]&&(this._prevType&&ps[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!v))return!0;if(ps[this._prevType]||ps[c]&&v){this._prevType=c;const w=this._stacks.length-1,P=this._stacks[w]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(ti(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[w]){const z=this.pool.getObjectForId(j.rtt[w].id);if(z.stamp===j.rtt[w].stamp){this.pool.useObject(z);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),j.rtt[w]={id:R.id,stamp:R.stamp},m.context.bindFramebuffer.set(R.fbo.framebuffer),m.context.clear({color:u.aT.transparent,stencil:0}),m.currentStencilSource=void 0;for(let z=0;z<P.length;z++){const U=m.style._layers[P[z]],q=U.source?this._coordsDescendingInv[U.source][j.tileID.key]:[j.tileID];m.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),m._renderTileClippingMasks(U,q),m.renderLayer(m,m.style.sourceCaches[U.source],U,q),U.source&&(j.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][j.tileID.key])}}return ti(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ps[c]}return!1}}const ln=A,mn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Qa=b=>{b.touchstart=b.dragStart,b.touchmoveWindow=b.dragMove,b.touchend=b.dragEnd},Dc={showCompass:!0,showZoom:!0,visualizePitch:!1};class vu{constructor(r,c,m=!1){this.mousedown=P=>{this.startMouse(u.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),k.mousePos(this.element,P)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,k.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=r.dragRotate._mouseRotate.getClickTolerance(),w=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Ml({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:j,bearingDegreesPerPixelMoved:R=.8})=>{const z=new Th;return new Da({clickTolerance:j,move:(U,q)=>({bearingDelta:(q.x-U.x)*R}),moveStateManager:z,enable:P,assignEvents:Qa})})({clickTolerance:v,enable:!0}),this.map=r,m&&(this.mousePitch=Ta({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:j,pitchDegreesPerPixelMoved:R=-.5})=>{const z=new Th;return new Da({clickTolerance:j,move:(U,q)=>({pitchDelta:(q.y-U.y)*R}),moveStateManager:z,enable:P,assignEvents:Qa})})({clickTolerance:w,enable:!0})),k.addEventListener(c,"mousedown",this.mousedown),k.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),k.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),k.disableDrag()}moveMouse(r,c){const m=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(r,c)||{};if(v&&m.setBearing(m.getBearing()+v),this.mousePitch){const{pitchDelta:w}=this.mousePitch.dragMove(r,c)||{};w&&m.setPitch(m.getPitch()+w)}}moveTouch(r,c){const m=this.map,{bearingDelta:v}=this.touchRotate.dragMove(r,c)||{};if(v&&m.setBearing(m.getBearing()+v),this.touchPitch){const{pitchDelta:w}=this.touchPitch.dragMove(r,c)||{};w&&m.setPitch(m.getPitch()+w)}}off(){const r=this.element;k.removeEventListener(r,"mousedown",this.mousedown),k.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let ji;function yu(b,r,c){if(b=new u.L(b.lng,b.lat),r){const m=new u.L(b.lng-360,b.lat),v=new u.L(b.lng+360,b.lat),w=c.locationPoint(b).distSqr(r);c.locationPoint(m).distSqr(r)<w?b=m:c.locationPoint(v).distSqr(r)<w&&(b=v)}for(;Math.abs(b.lng-c.center.lng)>180;){const m=c.locationPoint(b);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;b.lng>c.center.lng?b.lng-=360:b.lng+=360}return b}const _o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Uf(b,r,c){const m=b.classList;for(const v in _o)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${r}`)}class Ll extends u.E{constructor(r){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=yu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${_o[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${v}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");const c=k.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const w=k.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const P=k.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const j=k.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Te of R){const Oe=k.createNS("http://www.w3.org/2000/svg","ellipse");Oe.setAttributeNS(null,"opacity","0.04"),Oe.setAttributeNS(null,"cx","10.5"),Oe.setAttributeNS(null,"cy","5.80029008"),Oe.setAttributeNS(null,"rx",Te.rx),Oe.setAttributeNS(null,"ry",Te.ry),j.appendChild(Oe)}const z=k.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const U=k.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(U);const q=k.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const X=k.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(X);const ae=k.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");const le=k.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=k.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const oe=k.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),le.appendChild(pe),le.appendChild(oe),P.appendChild(j),P.appendChild(z),P.appendChild(q),P.appendChild(ae),P.appendChild(le),c.appendChild(P),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Uf(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ni={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Rr=0,Tc=!1;const bu={maxWidth:100,unit:"metric"};function wn(b,r,c){const m=c&&c.maxWidth||100,v=b._container.clientHeight/2,w=b.unproject([0,v]),P=b.unproject([m,v]),j=w.distanceTo(P);if(c&&c.unit==="imperial"){const R=3.2808*j;R>5280?wo(r,m,R/5280,b._getUIString("ScaleControl.Miles")):wo(r,m,R,b._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?wo(r,m,j/1852,b._getUIString("ScaleControl.NauticalMiles")):j>=1e3?wo(r,m,j/1e3,b._getUIString("ScaleControl.Kilometers")):wo(r,m,j,b._getUIString("ScaleControl.Meters"))}function wo(b,r,c,m){const v=function(w){const P=Math.pow(10,`${Math.floor(w)}`.length-1);let j=w/P;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(R){const z=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*z)/z}(j),P*j}(c);b.style.width=r*(v/c)+"px",b.innerHTML=`${v}&nbsp;${m}`}const bi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ur=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Co(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,b),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-b),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(b,0),right:new u.P(-b,0)}}if(b instanceof u.P||Array.isArray(b)){const r=u.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(b.center||[0,0]),top:u.P.convert(b.top||[0,0]),"top-left":u.P.convert(b["top-left"]||[0,0]),"top-right":u.P.convert(b["top-right"]||[0,0]),bottom:u.P.convert(b.bottom||[0,0]),"bottom-left":u.P.convert(b["bottom-left"]||[0,0]),"bottom-right":u.P.convert(b["bottom-right"]||[0,0]),left:u.P.convert(b.left||[0,0]),right:u.P.convert(b.right||[0,0])}}return Co(new u.P(0,0))}const Il={extend:(b,...r)=>u.e(b,...r),run(b){b()},logToElement(b,r=!1,c="log"){const m=window.document.getElementById(c);m&&(r&&(m.innerHTML=""),m.innerHTML+=`<br>${b}`)}},bd=A;class cn{static get version(){return bd}static get workerCount(){return Dr.workerCount}static set workerCount(r){Dr.workerCount=r}static get maxParallelImageRequests(){return u.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){u.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return u.c.WORKER_URL}static set workerUrl(r){u.c.WORKER_URL=r}static addProtocol(r,c){u.c.REGISTERED_PROTOCOLS[r]=c}static removeProtocol(r){delete u.c.REGISTERED_PROTOCOLS[r]}}return cn.Map=class extends Bf{constructor(b){if(u.bg.mark(u.bh.create),(b=u.e({},mn,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ud(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),{bearingSnap:b.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=b.interactive,this._cooperativeGestures=b.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=b.maxTileCacheSize,this._maxTileCacheZoomLevels=b.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new vd,this._controls=[],this._mapId=u.a2(),this._locale=u.e({},Rh,b.locale),this._clickTolerance=b.clickTolerance,this._overridePixelRatio=b.pixelRatio,this._maxCanvasSize=b.maxCanvasSize,this.transformCameraUpdate=b.transformCameraUpdate,this._imageQueueHandle=De.addThrottleControl(()=>this.isMoving()),this._requestManager=new we(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const c=kl(m=>{this._trackResize&&!this._removed&&this.resize(m)._update()},50);this._resizeObserver=new ResizeObserver(m=>{r?c(m):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new gu(this,b),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=b.hash&&new du(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,u.e({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,this._validateStyle=b.validateStyle,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new qs({customAttribution:b.customAttribution})),b.maplibreLogo&&this.addControl(new Xr,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=b.onAdd(this);this._controls.push(b);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,r,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,c,m)}resize(b){var r;const c=this._containerDimensions(),m=c[0],v=c[1],w=this._getClampedPixelRatio(m,v);if(this._resizeCanvas(m,v,w),this.painter.resize(m,v,w),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const R=this._getClampedPixelRatio(m,v);this._resizeCanvas(m,v,R),this.painter.resize(m,v,R)}this.transform.resize(m,v),(r=this._requestedCameraState)===null||r===void 0||r.resize(m,v);const P=!this._moving;return P&&(this.stop(),this.fire(new u.k("movestart",b)).fire(new u.k("move",b))),this.fire(new u.k("resize",b)),P&&this.fire(new u.k("moveend",b)),this}_getClampedPixelRatio(b,r){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),w=b*v,P=r*v;return Math.min(w>c?c/w:1,P>m?m/P:1)*v}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(ct.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(b){return this._cooperativeGestures=b,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(b){return this.transform.locationPoint(u.L.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.pointLocation(u.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,c){if(b==="mouseenter"||b==="mouseover"){let m=!1;return{layer:r,listener:c,delegates:{mousemove:w=>{const P=this.getLayer(r)?this.queryRenderedFeatures(w.point,{layers:[r]}):[];P.length?m||(m=!0,c.call(this,new Js(b,this,w.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(b==="mouseleave"||b==="mouseout"){let m=!1;return{layer:r,listener:c,delegates:{mousemove:P=>{(this.getLayer(r)?this.queryRenderedFeatures(P.point,{layers:[r]}):[]).length?m=!0:m&&(m=!1,c.call(this,new Js(b,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,c.call(this,new Js(b,this,P.originalEvent)))}}}}{const m=v=>{const w=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];w.length&&(v.features=w,c.call(this,v),delete v.features)};return{layer:r,listener:c,delegates:{[b]:m}}}}on(b,r,c){if(c===void 0)return super.on(b,r);const m=this._createDelegatedListener(b,r,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(b,r,c){if(c===void 0)return super.once(b,r);const m=this._createDelegatedListener(b,r,c);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(b,r,c){return c===void 0?super.off(b,r):(this._delegatedListeners&&this._delegatedListeners[b]&&(m=>{const v=this._delegatedListeners[b];for(let w=0;w<v.length;w++){const P=v[w];if(P.layer===r&&P.listener===c){for(const j in P.delegates)this.off(j,P.delegates[j]);return v.splice(w,1),this}}})(),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let c;const m=b instanceof u.P||Array.isArray(b),v=m?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:b)||{},v instanceof u.P||typeof v[0]=="number")c=[u.P.convert(v)];else{const w=u.P.convert(v[0]),P=u.P.convert(v[1]);c=[w,new u.P(P.x,w.y),P,new u.P(w.x,P.y),w]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Vi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,c):this.style.loadJSON(b,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Vi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const c=this._requestManager.transformRequest(b,Ae.Style);u.f(c,(m,v)=>{m?this.fire(new u.j(m)):v&&this._updateDiff(v,r)})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===b.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Sc(this.painter,r,b),this.painter.renderToTexture=new Ec(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==b.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const c=b[r]._tiles;for(const m in c){const v=c[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(b,r,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,r,c)}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,r,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:w,stretchY:P,content:j}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:U}=r,q=r;return this.style.addImage(b,{data:new u.R({width:R,height:z},new Uint8Array(U)),pixelRatio:m,stretchX:w,stretchY:P,content:j,sdf:v,version:0,userImage:q}),q.onAdd&&q.onAdd(this,b),this}}{const{width:R,height:z,data:U}=u.h.getImageData(r);this.style.addImage(b,{data:new u.R({width:R,height:z},U),pixelRatio:m,stretchX:w,stretchY:P,content:j,sdf:v,version:0})}}updateImage(b,r){const c=this.style.getImage(b);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||u.a(r)?u.h.getImageData(r):r,{width:v,height:w,data:P}=m;if(v===void 0||w===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||w!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(r instanceof HTMLImageElement||u.a(r));return c.data.replace(P,j),this.style.updateImage(b,c),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,r){De.getImage(this._requestManager.transformRequest(b,Ae.Image),r)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,c){return this.style.setLayerZoomRange(b,r,c),this._update(!0)}setFilter(b,r,c={}){return this.style.setFilter(b,r,c),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,c,m={}){return this.style.setPaintProperty(b,r,c,m),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,c,m={}){return this.style.setLayoutProperty(b,r,c,m),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,c,m=>{m||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,c=>{c||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=k.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=k.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{w[P]=k.create("div",`maplibregl-ctrl-${P} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=k.create("div","maplibregl-cooperative-gesture-screen",this._container);let b=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(b=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${b}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){k.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(b,r,c){this._canvas.width=Math.floor(c*b),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{r={requestedAttributes:b},m&&(r.statusMessage=m.statusMessage,r.type=m.type)},{once:!0});const c=this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b);if(!c){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new Wa(c,this.transform),B.testSupport(c)}_onCooperativeGesture(b,r,c){return!r&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,w=u.h.now();this.style.zoomHistory.update(v,w);const P=new u.a8(v,{now:w,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=P.crossFadingFactor();j===1&&j===this._crossFadingFactor||(c=!0,this._crossFadingFactor=j),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bg.mark(u.bh.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,u.bg.mark(u.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),De.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.bg.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.h.frame(b=>{u.bg.frame(b),this._frame=null,this._render(b)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return ln}getCameraTargetElevation(){return this.transform.elevation}},cn.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);r.title=m,r.setAttribute("aria-label",m)},this.options=u.e({},Dc,b),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const c=k.create("button",b,this._container);return c.type="button",c.addEventListener("click",r),c}},cn.GeolocateControl=class extends u.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new u.L(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,v=this._map.getBearing(),w=u.e({bearing:v},this.options.fitBoundsOptions),P=ct.fromLngLat(c,m);this._map.fitBounds(P,w,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new u.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Tc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ll({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ll({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},ni,b)}onAdd(b){return this._map=b,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,c=!1){ji===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(m=>{ji=m.state!=="denied",r(ji)}).catch(()=>{ji=!!window.navigator.geolocation,r(ji)}):(ji=!!window.navigator.geolocation,r(ji)):r(ji)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rr=0,Tc=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),c=b.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),r=b.getSouthEast(),c=b.getNorthEast(),m=r.distanceTo(c),v=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rr--,Tc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rr++,Rr>1?(b={maximumAge:6e5,timeout:0},Tc=!0):(b=this.options.positionOptions,Tc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},cn.AttributionControl=qs,cn.LogoControl=Xr,cn.ScaleControl=class{constructor(b){this._onMove=()=>{wn(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,wn(this._map,this._container,this.options)},this.options=u.e({},bu,b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},cn.FullscreenControl=class extends u.E{constructor(b={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},cn.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=b}onAdd(b){return this._map=b,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},cn.Popup=class extends u.E{constructor(b){super(),this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const c=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let m=this.options.anchor;const v=Co(this.options.offset);if(!m){const P=this._container.offsetWidth,j=this._container.offsetHeight;let R;R=c.y+v.bottom.y<j?["top"]:c.y>this._map.transform.height-j?["bottom"]:[],c.x<P/2?R.push("left"):c.x>this._map.transform.width-P/2&&R.push("right"),m=R.length===0?"bottom":R.join("-")}const w=c.add(v[m]).round();k.setTransform(this._container,`${_o[m]} translate(${w.x}px,${w.y}px)`),Uf(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(bi),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=u.L.convert(b),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=b;m=c.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){this._container&&this._container.classList.add(b)}removeClassName(b){this._container&&this._container.classList.remove(b)}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(ur);b&&b.focus()}},cn.Marker=Ll,cn.Style=Vi,cn.LngLat=u.L,cn.LngLatBounds=ct,cn.Point=u.P,cn.MercatorCoordinate=u.U,cn.Evented=u.E,cn.AJAXError=u.bi,cn.config=u.c,cn.CanvasSource=rn,cn.GeoJSONSource=Ft,cn.ImageSource=fn,cn.RasterDEMTileSource=Sn,cn.RasterTileSource=hn,cn.VectorTileSource=bt,cn.VideoSource=Bn,cn.setRTLTextPlugin=u.bj,cn.getRTLTextPluginStatus=u.bk,cn.prewarm=function(){Bs().acquire(Ln)},cn.clearPrewarmedResources=function(){const b=oi;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Ln),oi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Il.extend(cn,{isSafari:u.ac,getPerformanceMetrics:u.bg.getPerformanceMetrics}),cn});var x=y;return x})})(Tj);var Bz=Tj.exports;const ho=PP(Bz),Fz=()=>{var Ht;const[l,n]=se.useState(!1),[o,d]=se.useState(!1),[y,E]=se.useState(null),[x,u]=se.useState(null),[A,k]=se.useState(null),[B,O]=se.useState(null),[W,ne]=se.useState(null),[me,ke]=se.useState(0),[De,Ae]=se.useState({email:"",password:""}),[we,fe]=se.useState(null),[Ve,ze]=se.useState(!1),Je=se.useRef(null),Ye=se.useRef(null),ot=se.useRef(null),wt=se.useRef(null),gt=se.useRef(null),sn=se.useRef(null);se.useEffect(()=>{const{data:{subscription:ct}}=si.auth.onAuthStateChange(async(Ie,bt)=>{Ie==="SIGNED_IN"&&bt?await yn(bt.access_token):Ie==="SIGNED_OUT"&&(n(!1),E(null),zt(),st())});return()=>ct.unsubscribe()},[]),se.useEffect(()=>{l&&navigator.geolocation&&(console.log("🔍 Checking location permission on component mount..."),"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(ct=>{console.log("📍 Initial permission state:",ct.state),ct.state==="granted"?console.log("✅ Location permission already granted"):ct.state==="prompt"?console.log("❓ Location permission needs to be requested"):ct.state==="denied"&&(console.log("❌ Location permission denied"),k("Location permission is denied. Please enable it in your browser settings."))}))},[l]),se.useEffect(()=>{(async()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser");return}try{"permissions"in navigator&&(await navigator.permissions.query({name:"geolocation"})).state==="denied"&&k("Location permission denied. Please enable location access in your browser settings.")}catch{console.log("Permission API not supported, will check when user clicks Start Tracking")}})()},[]);const st=()=>{sn.current&&(sn.current.remove(),sn.current=null),wt.current&&(wt.current.remove(),wt.current=null)},vt=(ct,Ie)=>{if(!gt.current||wt.current)return;wt.current=new ho.Map({container:gt.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[Ie,ct],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),wt.current.addControl(new ho.NavigationControl,"top-right"),wt.current.once("load",()=>{console.log("✅ Driver map loaded successfully"),wt.current&&(wt.current.dragRotate.disable(),wt.current.touchZoomRotate.disableRotation(),console.log("🔄 Rotation features disabled"))}),wt.current.on("error",Sn=>{console.error("❌ Driver map error:",Sn)});const bt=document.createElement("div");bt.className="driver-marker",bt.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,sn.current=new ho.Marker({element:bt,anchor:"center"}).setLngLat([Ie,ct]).addTo(wt.current);const hn=new ho.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(y==null?void 0:y.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(y==null?void 0:y.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(y==null?void 0:y.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
        </div>
      `);sn.current.setPopup(hn)},Nt=(ct,Ie)=>{if(!wt.current||!sn.current)return;const bt=[Ie,ct];sn.current.setLngLat(bt),wt.current.flyTo({center:bt,duration:1e3});const hn=new ho.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(y==null?void 0:y.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(y==null?void 0:y.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(y==null?void 0:y.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Coordinates:</strong> ${ct.toFixed(6)}, ${Ie.toFixed(6)}</p>
        </div>
      `);sn.current.setPopup(hn)},on=async ct=>{ct.preventDefault(),ze(!0),fe(null);try{const{data:Ie,error:bt}=await si.auth.signInWithPassword({email:De.email,password:De.password});if(bt){console.error("❌ Login error:",bt),fe(bt.message);return}Ie.user&&Ie.session?(console.log("✅ Login successful:",Ie.user.email),await yn(Ie.session.access_token),Ae({email:"",password:""})):fe("Login failed - no user data received")}catch(Ie){console.error("❌ Login error:",Ie),fe("An unexpected error occurred during login")}finally{ze(!1)}},yn=async ct=>{var Ie,bt,hn,Sn,Ft;try{console.log("🔌 Driver: Connecting to WebSocket..."),await Pn.connect(),(Ie=Pn.socket)==null||Ie.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server"),O(null)}),(bt=Pn.socket)==null||bt.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server"),O("Disconnected from server")}),(hn=Pn.socket)==null||hn.on("error",Bt=>{console.error("❌ Driver: Socket error:",Bt),O(Bt.message||"Socket error occurred")}),(Sn=Pn.socket)==null||Sn.on("driver:authenticated",Bt=>{console.log("✅ Driver: Authentication successful:",Bt),n(!0),E(Bt.busInfo),O(null)}),(Ft=Pn.socket)==null||Ft.on("driver:locationConfirmed",Bt=>{console.log("📍 Driver: Location confirmed:",Bt),ne(new Date().toLocaleTimeString()),ke(fn=>fn+1)}),Je.current=Pn.socket,Pn.authenticateAsDriver(ct)}catch(Bt){console.error("❌ Driver: Authentication error:",Bt),O("Failed to authenticate with server")}},zt=()=>{Pn.disconnect(),Je.current=null},Wt=async()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser");return}const ct=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Ie=navigator.userAgent.includes("Firefox"),bt=navigator.userAgent.includes("Chrome"),hn=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome");console.log(`🌐 Device detected: ${ct?"Mobile":"Desktop"} - ${Ie?"Firefox":bt?"Chrome":hn?"Safari":"Other"}`);const Sn={enableHighAccuracy:!0,timeout:ct?3e4:6e4,maximumAge:0};console.log("📍 Starting location tracking with options:",Sn);try{if("permissions"in navigator){const Ft=await navigator.permissions.query({name:"geolocation"});if(console.log(`🔐 Current permission state: ${Ft.state}`),Ft.state==="denied"){k(ct?`Location permission denied on mobile. Please:
1. Go to your phone Settings
2. Find this browser app
3. Enable Location permission
4. Refresh this page`:"Location permission denied. Please reset location permissions and try again.");return}}}catch{console.log("Permission API not supported, proceeding with geolocation request")}console.log("📍 Requesting location permission..."),k(ct?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(Ft=>{console.log("✅ Initial position obtained:",{latitude:Ft.coords.latitude,longitude:Ft.coords.longitude,accuracy:Ft.coords.accuracy,timestamp:new Date(Ft.timestamp).toLocaleString()}),u(Ft),k(null),vt(Ft.coords.latitude,Ft.coords.longitude),St(Ft)},Ft=>{console.error("❌ Geolocation error:",Ft);let Bt="Location error: ";switch(Ft.code){case Ft.PERMISSION_DENIED:ct?Bt=`Mobile location permission denied. Please:

1. Go to your phone Settings
2. Find this browser app (Chrome/Firefox/Safari)
3. Tap "Permissions" or "Privacy"
4. Enable "Location" permission
5. Return to this page and refresh

Alternative: Try opening this page in a different browser app.`:Ie?Bt+='Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':Bt+="Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case Ft.POSITION_UNAVAILABLE:Bt=ct?`Location unavailable on mobile. Please:
1. Go outdoors or near a window
2. Wait 10-15 seconds
3. Make sure GPS is enabled in phone settings
4. Try again`:"Location information unavailable.";break;case Ft.TIMEOUT:Bt=ct?`Location request timed out on mobile. Please:
1. Go outdoors for better GPS signal
2. Wait 30 seconds and try again
3. Check if GPS is enabled in phone settings`:"Location request timed out. Please try again.";break;default:Bt+=Ft.message}k(Bt)},Sn),ot.current=navigator.geolocation.watchPosition(Ft=>{console.log("📍 Location update received:",{latitude:Ft.coords.latitude,longitude:Ft.coords.longitude,accuracy:Ft.coords.accuracy,timestamp:new Date(Ft.timestamp).toLocaleString()}),u(Ft),k(null),Nt(Ft.coords.latitude,Ft.coords.longitude),St(Ft)},Ft=>{console.error("❌ Geolocation watch error:",Ft);let Bt="Location tracking error: ";switch(Ft.code){case Ft.PERMISSION_DENIED:Bt=ct?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case Ft.POSITION_UNAVAILABLE:Bt=ct?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case Ft.TIMEOUT:Bt=ct?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:Bt+=Ft.message}k(Bt)},Sn),d(!0),console.log("📍 Location tracking started")},dn=()=>{ot.current&&(navigator.geolocation.clearWatch(ot.current),ot.current=null),Ye.current&&(clearInterval(Ye.current),Ye.current=null),d(!1),console.log("📍 Location tracking stopped")},St=ct=>{if(!Je.current||!y)return;const Ie={driverId:y.driver_id,latitude:ct.coords.latitude,longitude:ct.coords.longitude,timestamp:new Date().toISOString(),speed:ct.coords.speed||void 0,heading:ct.coords.heading||void 0};Je.current.emit("driver:locationUpdate",Ie)},Rt=async()=>{try{console.log("🔐 Driver: Starting sign out..."),o&&dn(),zt();const{error:ct}=await si.auth.signOut();ct?console.error("❌ Sign out error:",ct):(console.log("✅ Driver: Sign out successful"),n(!1),E(null),u(null),k(null),O(null),ne(null),ke(0),st())}catch(ct){console.error("❌ Sign out error:",ct)}};return l?_.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("div",{children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",y==null?void 0:y.driver_name," | Bus: ",y==null?void 0:y.bus_number," | Route: ",y==null?void 0:y.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),_.jsxDEV("button",{onClick:Rt,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${B?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-600",children:B?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${o?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-600",children:o?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:me},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),W&&_.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",W]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"space-y-3",children:o?_.jsxDEV("button",{onClick:dn,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):_.jsxDEV(_.Fragment,{children:[_.jsxDEV("button",{onClick:Wt,disabled:!!B,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ct=>{console.log("✅ Manual location permission granted:",ct),k(null),Wt()},ct=>{console.error("❌ Manual location permission denied:",ct),k("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),A&&A.includes("Permission denied")&&_.jsxDEV("button",{onClick:()=>{k(null),Wt()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),_.jsxDEV("div",{ref:gt,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),A&&_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[_.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),_.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[_.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[_.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[_.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>{const ct=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(Ie=>{const bt=`✅ Location Test Successful!

Latitude: ${Ie.coords.latitude}
Longitude: ${Ie.coords.longitude}
Accuracy: ${Ie.coords.accuracy}m
Device: ${ct?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(bt),k(null)},Ie=>{const bt=`❌ Location Test Failed

Error Code: ${Ie.code}
Error Message: ${Ie.message}
Device: ${ct?"Mobile":"Desktop"}

Please check your location permissions.`;alert(bt)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),x?_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),_.jsxDEV("span",{className:"font-mono",children:x.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),_.jsxDEV("span",{className:"font-mono",children:x.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),_.jsxDEV("span",{children:[(Ht=x.coords.accuracy)==null?void 0:Ht.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),x.coords.speed&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),_.jsxDEV("span",{children:[(x.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),x.coords.heading&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),_.jsxDEV("span",{children:[x.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-sm",children:new Date(x.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):_.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[_.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),_.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[_.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),_.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):_.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:_.jsxDEV("div",{className:"max-w-md w-full",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("div",{className:"text-center mb-6",children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),we&&_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:_.jsxDEV("p",{className:"text-red-700 text-sm",children:we},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),_.jsxDEV("form",{onSubmit:on,className:"space-y-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),_.jsxDEV("input",{id:"email",type:"email",required:!0,value:De.email,onChange:ct=>Ae(Ie=>({...Ie,email:ct.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),_.jsxDEV("input",{id:"password",type:"password",required:!0,value:De.password,onChange:ct=>Ae(Ie=>({...Ie,password:ct.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),_.jsxDEV("button",{type:"submit",disabled:Ve,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:Ve?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),_.jsxDEV("div",{className:"mt-4 text-center",children:_.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)},jj=se.createContext({transformPagePoint:l=>l,isStatic:!1,reducedMotion:"never"}),l0=se.createContext({}),c0=se.createContext(null),u0=typeof document<"u",lN=u0?se.useLayoutEffect:se.useEffect,kj=se.createContext({strict:!1}),cN=l=>l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Uz="framerAppearId",Aj="data-"+cN(Uz);function $z(l,n,o,d){const{visualElement:y}=se.useContext(l0),E=se.useContext(kj),x=se.useContext(c0),u=se.useContext(jj).reducedMotion,A=se.useRef();d=d||E.renderer,!A.current&&d&&(A.current=d(l,{visualState:n,parent:y,props:o,presenceContext:x,blockInitialAnimation:x?x.initial===!1:!1,reducedMotionConfig:u}));const k=A.current;se.useInsertionEffect(()=>{k&&k.update(o,x)});const B=se.useRef(!!(o[Aj]&&!window.HandoffComplete));return lN(()=>{k&&(k.render(),B.current&&k.animationState&&k.animationState.animateChanges())}),se.useEffect(()=>{k&&(k.updateFeatures(),!B.current&&k.animationState&&k.animationState.animateChanges(),B.current&&(B.current=!1,window.HandoffComplete=!0))}),k}function op(l){return l&&typeof l=="object"&&Object.prototype.hasOwnProperty.call(l,"current")}function qz(l,n,o){return se.useCallback(d=>{d&&l.mount&&l.mount(d),n&&(d?n.mount(d):n.unmount()),o&&(typeof o=="function"?o(d):op(o)&&(o.current=d))},[n])}function Ov(l){return typeof l=="string"||Array.isArray(l)}function d0(l){return l!==null&&typeof l=="object"&&typeof l.start=="function"}const uN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dN=["initial",...uN];function h0(l){return d0(l.animate)||dN.some(n=>Ov(l[n]))}function Mj(l){return!!(h0(l)||l.variants)}function Hz(l,n){if(h0(l)){const{initial:o,animate:d}=l;return{initial:o===!1||Ov(o)?o:void 0,animate:Ov(d)?d:void 0}}return l.inherit!==!1?n:{}}function Gz(l){const{initial:n,animate:o}=Hz(l,se.useContext(l0));return se.useMemo(()=>({initial:n,animate:o}),[wT(n),wT(o)])}function wT(l){return Array.isArray(l)?l.join(" "):l}const CT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bv={};for(const l in CT)Bv[l]={isEnabled:n=>CT[l].some(o=>!!n[o])};function Wz(l){for(const n in l)Bv[n]={...Bv[n],...l[n]}}const hN=se.createContext({}),Rj=se.createContext({}),Zz=Symbol.for("motionComponentSymbol");function Kz({preloadedFeatures:l,createVisualElement:n,useRender:o,useVisualState:d,Component:y}){l&&Wz(l);function E(u,A){let k;const B={...se.useContext(jj),...u,layoutId:Yz(u)},{isStatic:O}=B,W=Gz(u),ne=d(u,O);if(!O&&u0){W.visualElement=$z(y,ne,B,n);const me=se.useContext(Rj),ke=se.useContext(kj).strict;W.visualElement&&(k=W.visualElement.loadFeatures(B,ke,l,me))}return se.createElement(l0.Provider,{value:W},k&&W.visualElement?se.createElement(k,{visualElement:W.visualElement,...B}):null,o(y,u,qz(ne,W.visualElement,A),ne,O,W.visualElement))}const x=se.forwardRef(E);return x[Zz]=y,x}function Yz({layoutId:l}){const n=se.useContext(hN).id;return n&&l!==void 0?n+"-"+l:l}function Xz(l){function n(d,y={}){return Kz(l(d,y))}if(typeof Proxy>"u")return n;const o=new Map;return new Proxy(n,{get:(d,y)=>(o.has(y)||o.set(y,n(y)),o.get(y))})}const Jz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fN(l){return typeof l!="string"||l.includes("-")?!1:!!(Jz.indexOf(l)>-1||/[A-Z]/.test(l))}const Gx={};function Qz(l){Object.assign(Gx,l)}const Xv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jf=new Set(Xv);function Lj(l,{layout:n,layoutId:o}){return jf.has(l)||l.startsWith("origin")||(n||o!==void 0)&&(!!Gx[l]||l==="opacity")}const pa=l=>!!(l&&l.getVelocity),eO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tO=Xv.length;function nO(l,{enableHardwareAcceleration:n=!0,allowTransformNone:o=!0},d,y){let E="";for(let x=0;x<tO;x++){const u=Xv[x];if(l[u]!==void 0){const A=eO[u]||u;E+=`${A}(${l[u]}) `}}return n&&!l.z&&(E+="translateZ(0)"),E=E.trim(),y?E=y(l,d?"":E):o&&d&&(E="none"),E}const Ij=l=>n=>typeof n=="string"&&n.startsWith(l),Vj=Ij("--"),RC=Ij("var(--"),rO=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,iO=(l,n)=>n&&typeof l=="number"?n.transform(l):l,gh=(l,n,o)=>Math.min(Math.max(o,l),n),kf={test:l=>typeof l=="number",parse:parseFloat,transform:l=>l},Tv={...kf,transform:l=>gh(0,1,l)},Ex={...kf,default:1},Pv=l=>Math.round(l*1e5)/1e5,f0=/(-)?([\d]*\.?[\d])+/g,zj=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,sO=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Jv(l){return typeof l=="string"}const Qv=l=>({test:n=>Jv(n)&&n.endsWith(l)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${l}`}),lh=Qv("deg"),Xc=Qv("%"),Vn=Qv("px"),oO=Qv("vh"),aO=Qv("vw"),NT={...Xc,parse:l=>Xc.parse(l)/100,transform:l=>Xc.transform(l*100)},ST={...kf,transform:Math.round},Oj={borderWidth:Vn,borderTopWidth:Vn,borderRightWidth:Vn,borderBottomWidth:Vn,borderLeftWidth:Vn,borderRadius:Vn,radius:Vn,borderTopLeftRadius:Vn,borderTopRightRadius:Vn,borderBottomRightRadius:Vn,borderBottomLeftRadius:Vn,width:Vn,maxWidth:Vn,height:Vn,maxHeight:Vn,size:Vn,top:Vn,right:Vn,bottom:Vn,left:Vn,padding:Vn,paddingTop:Vn,paddingRight:Vn,paddingBottom:Vn,paddingLeft:Vn,margin:Vn,marginTop:Vn,marginRight:Vn,marginBottom:Vn,marginLeft:Vn,rotate:lh,rotateX:lh,rotateY:lh,rotateZ:lh,scale:Ex,scaleX:Ex,scaleY:Ex,scaleZ:Ex,skew:lh,skewX:lh,skewY:lh,distance:Vn,translateX:Vn,translateY:Vn,translateZ:Vn,x:Vn,y:Vn,z:Vn,perspective:Vn,transformPerspective:Vn,opacity:Tv,originX:NT,originY:NT,originZ:Vn,zIndex:ST,fillOpacity:Tv,strokeOpacity:Tv,numOctaves:ST};function mN(l,n,o,d){const{style:y,vars:E,transform:x,transformOrigin:u}=l;let A=!1,k=!1,B=!0;for(const O in n){const W=n[O];if(Vj(O)){E[O]=W;continue}const ne=Oj[O],me=iO(W,ne);if(jf.has(O)){if(A=!0,x[O]=me,!B)continue;W!==(ne.default||0)&&(B=!1)}else O.startsWith("origin")?(k=!0,u[O]=me):y[O]=me}if(n.transform||(A||d?y.transform=nO(l.transform,o,B,d):y.transform&&(y.transform="none")),k){const{originX:O="50%",originY:W="50%",originZ:ne=0}=u;y.transformOrigin=`${O} ${W} ${ne}`}}const pN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bj(l,n,o){for(const d in n)!pa(n[d])&&!Lj(d,o)&&(l[d]=n[d])}function lO({transformTemplate:l},n,o){return se.useMemo(()=>{const d=pN();return mN(d,n,{enableHardwareAcceleration:!o},l),Object.assign({},d.vars,d.style)},[n])}function cO(l,n,o){const d=l.style||{},y={};return Bj(y,d,l),Object.assign(y,lO(l,n,o)),l.transformValues?l.transformValues(y):y}function uO(l,n,o){const d={},y=cO(l,n,o);return l.drag&&l.dragListener!==!1&&(d.draggable=!1,y.userSelect=y.WebkitUserSelect=y.WebkitTouchCallout="none",y.touchAction=l.drag===!0?"none":`pan-${l.drag==="x"?"y":"x"}`),l.tabIndex===void 0&&(l.onTap||l.onTapStart||l.whileTap)&&(d.tabIndex=0),d.style=y,d}const dO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wx(l){return l.startsWith("while")||l.startsWith("drag")&&l!=="draggable"||l.startsWith("layout")||l.startsWith("onTap")||l.startsWith("onPan")||l.startsWith("onLayout")||dO.has(l)}let Fj=l=>!Wx(l);function hO(l){l&&(Fj=n=>n.startsWith("on")?!Wx(n):l(n))}try{hO(require("@emotion/is-prop-valid").default)}catch{}function fO(l,n,o){const d={};for(const y in l)y==="values"&&typeof l.values=="object"||(Fj(y)||o===!0&&Wx(y)||!n&&!Wx(y)||l.draggable&&y.startsWith("onDrag"))&&(d[y]=l[y]);return d}function ET(l,n,o){return typeof l=="string"?l:Vn.transform(n+o*l)}function mO(l,n,o){const d=ET(n,l.x,l.width),y=ET(o,l.y,l.height);return`${d} ${y}`}const pO={offset:"stroke-dashoffset",array:"stroke-dasharray"},gO={offset:"strokeDashoffset",array:"strokeDasharray"};function vO(l,n,o=1,d=0,y=!0){l.pathLength=1;const E=y?pO:gO;l[E.offset]=Vn.transform(-d);const x=Vn.transform(n),u=Vn.transform(o);l[E.array]=`${x} ${u}`}function gN(l,{attrX:n,attrY:o,attrScale:d,originX:y,originY:E,pathLength:x,pathSpacing:u=1,pathOffset:A=0,...k},B,O,W){if(mN(l,k,B,W),O){l.style.viewBox&&(l.attrs.viewBox=l.style.viewBox);return}l.attrs=l.style,l.style={};const{attrs:ne,style:me,dimensions:ke}=l;ne.transform&&(ke&&(me.transform=ne.transform),delete ne.transform),ke&&(y!==void 0||E!==void 0||me.transform)&&(me.transformOrigin=mO(ke,y!==void 0?y:.5,E!==void 0?E:.5)),n!==void 0&&(ne.x=n),o!==void 0&&(ne.y=o),d!==void 0&&(ne.scale=d),x!==void 0&&vO(ne,x,u,A,!1)}const Uj=()=>({...pN(),attrs:{}}),vN=l=>typeof l=="string"&&l.toLowerCase()==="svg";function yO(l,n,o,d){const y=se.useMemo(()=>{const E=Uj();return gN(E,n,{enableHardwareAcceleration:!1},vN(d),l.transformTemplate),{...E.attrs,style:{...E.style}}},[n]);if(l.style){const E={};Bj(E,l.style,l),y.style={...E,...y.style}}return y}function bO(l=!1){return(o,d,y,{latestValues:E},x)=>{const A=(fN(o)?yO:uO)(d,E,x,o),B={...fO(d,typeof o=="string",l),...A,ref:y},{children:O}=d,W=se.useMemo(()=>pa(O)?O.get():O,[O]);return se.createElement(o,{...B,children:W})}}function $j(l,{style:n,vars:o},d,y){Object.assign(l.style,n,y&&y.getProjectionStyles(d));for(const E in o)l.style.setProperty(E,o[E])}const qj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hj(l,n,o,d){$j(l,n,void 0,d);for(const y in n.attrs)l.setAttribute(qj.has(y)?y:cN(y),n.attrs[y])}function yN(l,n){const{style:o}=l,d={};for(const y in o)(pa(o[y])||n.style&&pa(n.style[y])||Lj(y,l))&&(d[y]=o[y]);return d}function Gj(l,n){const o=yN(l,n);for(const d in l)if(pa(l[d])||pa(n[d])){const y=Xv.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;o[y]=l[d]}return o}function bN(l,n,o,d={},y={}){return typeof n=="function"&&(n=n(o!==void 0?o:l.custom,d,y)),typeof n=="string"&&(n=l.variants&&l.variants[n]),typeof n=="function"&&(n=n(o!==void 0?o:l.custom,d,y)),n}function Wj(l){const n=se.useRef(null);return n.current===null&&(n.current=l()),n.current}const Zx=l=>Array.isArray(l),xO=l=>!!(l&&typeof l=="object"&&l.mix&&l.toValue),_O=l=>Zx(l)?l[l.length-1]||0:l;function Bx(l){const n=pa(l)?l.get():l;return xO(n)?n.toValue():n}function wO({scrapeMotionValuesFromProps:l,createRenderState:n,onMount:o},d,y,E){const x={latestValues:CO(d,y,E,l),renderState:n()};return o&&(x.mount=u=>o(d,u,x)),x}const Zj=l=>(n,o)=>{const d=se.useContext(l0),y=se.useContext(c0),E=()=>wO(l,n,d,y);return o?E():Wj(E)};function CO(l,n,o,d){const y={},E=d(l,{});for(const W in E)y[W]=Bx(E[W]);let{initial:x,animate:u}=l;const A=h0(l),k=Mj(l);n&&k&&!A&&l.inherit!==!1&&(x===void 0&&(x=n.initial),u===void 0&&(u=n.animate));let B=o?o.initial===!1:!1;B=B||x===!1;const O=B?u:x;return O&&typeof O!="boolean"&&!d0(O)&&(Array.isArray(O)?O:[O]).forEach(ne=>{const me=bN(l,ne);if(!me)return;const{transitionEnd:ke,transition:De,...Ae}=me;for(const we in Ae){let fe=Ae[we];if(Array.isArray(fe)){const Ve=B?fe.length-1:0;fe=fe[Ve]}fe!==null&&(y[we]=fe)}for(const we in ke)y[we]=ke[we]}),y}const rs=l=>l;class DT{constructor(){this.order=[],this.scheduled=new Set}add(n){if(!this.scheduled.has(n))return this.scheduled.add(n),this.order.push(n),!0}remove(n){const o=this.order.indexOf(n);o!==-1&&(this.order.splice(o,1),this.scheduled.delete(n))}clear(){this.order.length=0,this.scheduled.clear()}}function NO(l){let n=new DT,o=new DT,d=0,y=!1,E=!1;const x=new WeakSet,u={schedule:(A,k=!1,B=!1)=>{const O=B&&y,W=O?n:o;return k&&x.add(A),W.add(A)&&O&&y&&(d=n.order.length),A},cancel:A=>{o.remove(A),x.delete(A)},process:A=>{if(y){E=!0;return}if(y=!0,[n,o]=[o,n],o.clear(),d=n.order.length,d)for(let k=0;k<d;k++){const B=n.order[k];B(A),x.has(B)&&(u.schedule(B),l())}y=!1,E&&(E=!1,u.process(A))}};return u}const Dx=["prepare","read","update","preRender","render","postRender"],SO=40;function EO(l,n){let o=!1,d=!0;const y={delta:0,timestamp:0,isProcessing:!1},E=Dx.reduce((O,W)=>(O[W]=NO(()=>o=!0),O),{}),x=O=>E[O].process(y),u=()=>{const O=performance.now();o=!1,y.delta=d?1e3/60:Math.max(Math.min(O-y.timestamp,SO),1),y.timestamp=O,y.isProcessing=!0,Dx.forEach(x),y.isProcessing=!1,o&&n&&(d=!1,l(u))},A=()=>{o=!0,d=!0,y.isProcessing||l(u)};return{schedule:Dx.reduce((O,W)=>{const ne=E[W];return O[W]=(me,ke=!1,De=!1)=>(o||A(),ne.schedule(me,ke,De)),O},{}),cancel:O=>Dx.forEach(W=>E[W].cancel(O)),state:y,steps:E}}const{schedule:Di,cancel:ed,state:Io,steps:X1}=EO(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0),DO={useVisualState:Zj({scrapeMotionValuesFromProps:Gj,createRenderState:Uj,onMount:(l,n,{renderState:o,latestValues:d})=>{Di.read(()=>{try{o.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{o.dimensions={x:0,y:0,width:0,height:0}}}),Di.render(()=>{gN(o,d,{enableHardwareAcceleration:!1},vN(n.tagName),l.transformTemplate),Hj(n,o)})}})},TO={useVisualState:Zj({scrapeMotionValuesFromProps:yN,createRenderState:pN})};function PO(l,{forwardMotionProps:n=!1},o,d){return{...fN(l)?DO:TO,preloadedFeatures:o,useRender:bO(n),createVisualElement:d,Component:l}}function Yu(l,n,o,d={passive:!0}){return l.addEventListener(n,o,d),()=>l.removeEventListener(n,o)}const Kj=l=>l.pointerType==="mouse"?typeof l.button!="number"||l.button<=0:l.isPrimary!==!1;function m0(l,n="page"){return{point:{x:l[n+"X"],y:l[n+"Y"]}}}const jO=l=>n=>Kj(n)&&l(n,m0(n));function Ju(l,n,o,d){return Yu(l,n,jO(o),d)}const kO=(l,n)=>o=>n(l(o)),fh=(...l)=>l.reduce(kO);function Yj(l){let n=null;return()=>{const o=()=>{n=null};return n===null?(n=l,o):!1}}const TT=Yj("dragHorizontal"),PT=Yj("dragVertical");function Xj(l){let n=!1;if(l==="y")n=PT();else if(l==="x")n=TT();else{const o=TT(),d=PT();o&&d?n=()=>{o(),d()}:(o&&o(),d&&d())}return n}function Jj(){const l=Xj(!0);return l?(l(),!1):!0}class bh{constructor(n){this.isMounted=!1,this.node=n}update(){}}function jT(l,n){const o="pointer"+(n?"enter":"leave"),d="onHover"+(n?"Start":"End"),y=(E,x)=>{if(E.pointerType==="touch"||Jj())return;const u=l.getProps();l.animationState&&u.whileHover&&l.animationState.setActive("whileHover",n),u[d]&&Di.update(()=>u[d](E,x))};return Ju(l.current,o,y,{passive:!l.getProps()[d]})}class AO extends bh{mount(){this.unmount=fh(jT(this.node,!0),jT(this.node,!1))}unmount(){}}class MO extends bh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fh(Yu(this.node.current,"focus",()=>this.onFocus()),Yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Qj=(l,n)=>n?l===n?!0:Qj(l,n.parentElement):!1;function J1(l,n){if(!n)return;const o=new PointerEvent("pointer"+l);n(o,m0(o))}class RO extends bh{constructor(){super(...arguments),this.removeStartListeners=rs,this.removeEndListeners=rs,this.removeAccessibleListeners=rs,this.startPointerPress=(n,o)=>{if(this.isPressing)return;this.removeEndListeners();const d=this.node.getProps(),E=Ju(window,"pointerup",(u,A)=>{if(!this.checkPressEnd())return;const{onTap:k,onTapCancel:B,globalTapTarget:O}=this.node.getProps();Di.update(()=>{!O&&!Qj(this.node.current,u.target)?B&&B(u,A):k&&k(u,A)})},{passive:!(d.onTap||d.onPointerUp)}),x=Ju(window,"pointercancel",(u,A)=>this.cancelPress(u,A),{passive:!(d.onTapCancel||d.onPointerCancel)});this.removeEndListeners=fh(E,x),this.startPress(n,o)},this.startAccessiblePress=()=>{const n=E=>{if(E.key!=="Enter"||this.isPressing)return;const x=u=>{u.key!=="Enter"||!this.checkPressEnd()||J1("up",(A,k)=>{const{onTap:B}=this.node.getProps();B&&Di.update(()=>B(A,k))})};this.removeEndListeners(),this.removeEndListeners=Yu(this.node.current,"keyup",x),J1("down",(u,A)=>{this.startPress(u,A)})},o=Yu(this.node.current,"keydown",n),d=()=>{this.isPressing&&J1("cancel",(E,x)=>this.cancelPress(E,x))},y=Yu(this.node.current,"blur",d);this.removeAccessibleListeners=fh(o,y)}}startPress(n,o){this.isPressing=!0;const{onTapStart:d,whileTap:y}=this.node.getProps();y&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),d&&Di.update(()=>d(n,o))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Jj()}cancelPress(n,o){if(!this.checkPressEnd())return;const{onTapCancel:d}=this.node.getProps();d&&Di.update(()=>d(n,o))}mount(){const n=this.node.getProps(),o=Ju(n.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(n.onTapStart||n.onPointerStart)}),d=Yu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=fh(o,d)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const LC=new WeakMap,Q1=new WeakMap,LO=l=>{const n=LC.get(l.target);n&&n(l)},IO=l=>{l.forEach(LO)};function VO({root:l,...n}){const o=l||document;Q1.has(o)||Q1.set(o,{});const d=Q1.get(o),y=JSON.stringify(n);return d[y]||(d[y]=new IntersectionObserver(IO,{root:l,...n})),d[y]}function zO(l,n,o){const d=VO(n);return LC.set(l,o),d.observe(l),()=>{LC.delete(l),d.unobserve(l)}}const OO={some:0,all:1};class BO extends bh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:o,margin:d,amount:y="some",once:E}=n,x={root:o?o.current:void 0,rootMargin:d,threshold:typeof y=="number"?y:OO[y]},u=A=>{const{isIntersecting:k}=A;if(this.isInView===k||(this.isInView=k,E&&!k&&this.hasEnteredView))return;k&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",k);const{onViewportEnter:B,onViewportLeave:O}=this.node.getProps(),W=k?B:O;W&&W(A)};return zO(this.node.current,x,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:o}=this.node;["amount","margin","root"].some(FO(n,o))&&this.startObserver()}unmount(){}}function FO({viewport:l={}},{viewport:n={}}={}){return o=>l[o]!==n[o]}const UO={inView:{Feature:BO},tap:{Feature:RO},focus:{Feature:MO},hover:{Feature:AO}};function ek(l,n){if(!Array.isArray(n))return!1;const o=n.length;if(o!==l.length)return!1;for(let d=0;d<o;d++)if(n[d]!==l[d])return!1;return!0}function $O(l){const n={};return l.values.forEach((o,d)=>n[d]=o.get()),n}function qO(l){const n={};return l.values.forEach((o,d)=>n[d]=o.getVelocity()),n}function p0(l,n,o){const d=l.getProps();return bN(d,n,o!==void 0?o:d.custom,$O(l),qO(l))}let ey=rs,bl=rs;ey=(l,n)=>{!l&&typeof console<"u"&&console.warn(n)},bl=(l,n)=>{if(!l)throw new Error(n)};const mh=l=>l*1e3,Qu=l=>l/1e3,HO={current:!1},tk=l=>Array.isArray(l)&&typeof l[0]=="number";function nk(l){return!!(!l||typeof l=="string"&&rk[l]||tk(l)||Array.isArray(l)&&l.every(nk))}const Nv=([l,n,o,d])=>`cubic-bezier(${l}, ${n}, ${o}, ${d})`,rk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nv([0,.65,.55,1]),circOut:Nv([.55,0,1,.45]),backIn:Nv([.31,.01,.66,-.59]),backOut:Nv([.33,1.53,.69,.99])};function ik(l){if(l)return tk(l)?Nv(l):Array.isArray(l)?l.map(ik):rk[l]}function GO(l,n,o,{delay:d=0,duration:y,repeat:E=0,repeatType:x="loop",ease:u,times:A}={}){const k={[n]:o};A&&(k.offset=A);const B=ik(u);return Array.isArray(B)&&(k.easing=B),l.animate(k,{delay:d,duration:y,easing:Array.isArray(B)?"linear":B,fill:"both",iterations:E+1,direction:x==="reverse"?"alternate":"normal"})}function WO(l,{repeat:n,repeatType:o="loop"}){const d=n&&o!=="loop"&&n%2===1?0:l.length-1;return l[d]}const sk=(l,n,o)=>(((1-3*o+3*n)*l+(3*o-6*n))*l+3*n)*l,ZO=1e-7,KO=12;function YO(l,n,o,d,y){let E,x,u=0;do x=n+(o-n)/2,E=sk(x,d,y)-l,E>0?o=x:n=x;while(Math.abs(E)>ZO&&++u<KO);return x}function ty(l,n,o,d){if(l===n&&o===d)return rs;const y=E=>YO(E,0,1,l,o);return E=>E===0||E===1?E:sk(y(E),n,d)}const XO=ty(.42,0,1,1),JO=ty(0,0,.58,1),ok=ty(.42,0,.58,1),QO=l=>Array.isArray(l)&&typeof l[0]!="number",ak=l=>n=>n<=.5?l(2*n)/2:(2-l(2*(1-n)))/2,lk=l=>n=>1-l(1-n),xN=l=>1-Math.sin(Math.acos(l)),ck=lk(xN),e4=ak(xN),uk=ty(.33,1.53,.69,.99),_N=lk(uk),t4=ak(_N),n4=l=>(l*=2)<1?.5*_N(l):.5*(2-Math.pow(2,-10*(l-1))),kT={linear:rs,easeIn:XO,easeInOut:ok,easeOut:JO,circIn:xN,circInOut:e4,circOut:ck,backIn:_N,backInOut:t4,backOut:uk,anticipate:n4},AT=l=>{if(Array.isArray(l)){bl(l.length===4,"Cubic bezier arrays must contain four numerical values.");const[n,o,d,y]=l;return ty(n,o,d,y)}else if(typeof l=="string")return bl(kT[l]!==void 0,`Invalid easing type '${l}'`),kT[l];return l},wN=(l,n)=>o=>!!(Jv(o)&&sO.test(o)&&o.startsWith(l)||n&&Object.prototype.hasOwnProperty.call(o,n)),dk=(l,n,o)=>d=>{if(!Jv(d))return d;const[y,E,x,u]=d.match(f0);return{[l]:parseFloat(y),[n]:parseFloat(E),[o]:parseFloat(x),alpha:u!==void 0?parseFloat(u):1}},r4=l=>gh(0,255,l),eC={...kf,transform:l=>Math.round(r4(l))},Df={test:wN("rgb","red"),parse:dk("red","green","blue"),transform:({red:l,green:n,blue:o,alpha:d=1})=>"rgba("+eC.transform(l)+", "+eC.transform(n)+", "+eC.transform(o)+", "+Pv(Tv.transform(d))+")"};function i4(l){let n="",o="",d="",y="";return l.length>5?(n=l.substring(1,3),o=l.substring(3,5),d=l.substring(5,7),y=l.substring(7,9)):(n=l.substring(1,2),o=l.substring(2,3),d=l.substring(3,4),y=l.substring(4,5),n+=n,o+=o,d+=d,y+=y),{red:parseInt(n,16),green:parseInt(o,16),blue:parseInt(d,16),alpha:y?parseInt(y,16)/255:1}}const IC={test:wN("#"),parse:i4,transform:Df.transform},ap={test:wN("hsl","hue"),parse:dk("hue","saturation","lightness"),transform:({hue:l,saturation:n,lightness:o,alpha:d=1})=>"hsla("+Math.round(l)+", "+Xc.transform(Pv(n))+", "+Xc.transform(Pv(o))+", "+Pv(Tv.transform(d))+")"},Jo={test:l=>Df.test(l)||IC.test(l)||ap.test(l),parse:l=>Df.test(l)?Df.parse(l):ap.test(l)?ap.parse(l):IC.parse(l),transform:l=>Jv(l)?l:l.hasOwnProperty("red")?Df.transform(l):ap.transform(l)},Wi=(l,n,o)=>-o*l+o*n+l;function tC(l,n,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?l+(n-l)*6*o:o<1/2?n:o<2/3?l+(n-l)*(2/3-o)*6:l}function s4({hue:l,saturation:n,lightness:o,alpha:d}){l/=360,n/=100,o/=100;let y=0,E=0,x=0;if(!n)y=E=x=o;else{const u=o<.5?o*(1+n):o+n-o*n,A=2*o-u;y=tC(A,u,l+1/3),E=tC(A,u,l),x=tC(A,u,l-1/3)}return{red:Math.round(y*255),green:Math.round(E*255),blue:Math.round(x*255),alpha:d}}const nC=(l,n,o)=>{const d=l*l;return Math.sqrt(Math.max(0,o*(n*n-d)+d))},o4=[IC,Df,ap],a4=l=>o4.find(n=>n.test(l));function MT(l){const n=a4(l);bl(!!n,`'${l}' is not an animatable color. Use the equivalent color code instead.`);let o=n.parse(l);return n===ap&&(o=s4(o)),o}const hk=(l,n)=>{const o=MT(l),d=MT(n),y={...o};return E=>(y.red=nC(o.red,d.red,E),y.green=nC(o.green,d.green,E),y.blue=nC(o.blue,d.blue,E),y.alpha=Wi(o.alpha,d.alpha,E),Df.transform(y))};function l4(l){var n,o;return isNaN(l)&&Jv(l)&&(((n=l.match(f0))===null||n===void 0?void 0:n.length)||0)+(((o=l.match(zj))===null||o===void 0?void 0:o.length)||0)>0}const fk={regex:rO,countKey:"Vars",token:"${v}",parse:rs},mk={regex:zj,countKey:"Colors",token:"${c}",parse:Jo.parse},pk={regex:f0,countKey:"Numbers",token:"${n}",parse:kf.parse};function rC(l,{regex:n,countKey:o,token:d,parse:y}){const E=l.tokenised.match(n);E&&(l["num"+o]=E.length,l.tokenised=l.tokenised.replace(n,d),l.values.push(...E.map(y)))}function Kx(l){const n=l.toString(),o={value:n,tokenised:n,values:[],numVars:0,numColors:0,numNumbers:0};return o.value.includes("var(--")&&rC(o,fk),rC(o,mk),rC(o,pk),o}function gk(l){return Kx(l).values}function vk(l){const{values:n,numColors:o,numVars:d,tokenised:y}=Kx(l),E=n.length;return x=>{let u=y;for(let A=0;A<E;A++)A<d?u=u.replace(fk.token,x[A]):A<d+o?u=u.replace(mk.token,Jo.transform(x[A])):u=u.replace(pk.token,Pv(x[A]));return u}}const c4=l=>typeof l=="number"?0:l;function u4(l){const n=gk(l);return vk(l)(n.map(c4))}const vh={test:l4,parse:gk,createTransformer:vk,getAnimatableNone:u4},yk=(l,n)=>o=>`${o>0?n:l}`;function bk(l,n){return typeof l=="number"?o=>Wi(l,n,o):Jo.test(l)?hk(l,n):l.startsWith("var(")?yk(l,n):_k(l,n)}const xk=(l,n)=>{const o=[...l],d=o.length,y=l.map((E,x)=>bk(E,n[x]));return E=>{for(let x=0;x<d;x++)o[x]=y[x](E);return o}},d4=(l,n)=>{const o={...l,...n},d={};for(const y in o)l[y]!==void 0&&n[y]!==void 0&&(d[y]=bk(l[y],n[y]));return y=>{for(const E in d)o[E]=d[E](y);return o}},_k=(l,n)=>{const o=vh.createTransformer(n),d=Kx(l),y=Kx(n);return d.numVars===y.numVars&&d.numColors===y.numColors&&d.numNumbers>=y.numNumbers?fh(xk(d.values,y.values),o):(ey(!0,`Complex values '${l}' and '${n}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),yk(l,n))},Fv=(l,n,o)=>{const d=n-l;return d===0?1:(o-l)/d},RT=(l,n)=>o=>Wi(l,n,o);function h4(l){return typeof l=="number"?RT:typeof l=="string"?Jo.test(l)?hk:_k:Array.isArray(l)?xk:typeof l=="object"?d4:RT}function f4(l,n,o){const d=[],y=o||h4(l[0]),E=l.length-1;for(let x=0;x<E;x++){let u=y(l[x],l[x+1]);if(n){const A=Array.isArray(n)?n[x]||rs:n;u=fh(A,u)}d.push(u)}return d}function wk(l,n,{clamp:o=!0,ease:d,mixer:y}={}){const E=l.length;if(bl(E===n.length,"Both input and output ranges must be the same length"),E===1)return()=>n[0];l[0]>l[E-1]&&(l=[...l].reverse(),n=[...n].reverse());const x=f4(n,d,y),u=x.length,A=k=>{let B=0;if(u>1)for(;B<l.length-2&&!(k<l[B+1]);B++);const O=Fv(l[B],l[B+1],k);return x[B](O)};return o?k=>A(gh(l[0],l[E-1],k)):A}function m4(l,n){const o=l[l.length-1];for(let d=1;d<=n;d++){const y=Fv(0,n,d);l.push(Wi(o,1,y))}}function p4(l){const n=[0];return m4(n,l.length-1),n}function g4(l,n){return l.map(o=>o*n)}function v4(l,n){return l.map(()=>n||ok).splice(0,l.length-1)}function Yx({duration:l=300,keyframes:n,times:o,ease:d="easeInOut"}){const y=QO(d)?d.map(AT):AT(d),E={done:!1,value:n[0]},x=g4(o&&o.length===n.length?o:p4(n),l),u=wk(x,n,{ease:Array.isArray(y)?y:v4(n,y)});return{calculatedDuration:l,next:A=>(E.value=u(A),E.done=A>=l,E)}}function Ck(l,n){return n?l*(1e3/n):0}const y4=5;function Nk(l,n,o){const d=Math.max(n-y4,0);return Ck(o-l(d),n-d)}const iC=.001,b4=.01,LT=10,x4=.05,_4=1;function w4({duration:l=800,bounce:n=.25,velocity:o=0,mass:d=1}){let y,E;ey(l<=mh(LT),"Spring duration must be 10 seconds or less");let x=1-n;x=gh(x4,_4,x),l=gh(b4,LT,Qu(l)),x<1?(y=k=>{const B=k*x,O=B*l,W=B-o,ne=VC(k,x),me=Math.exp(-O);return iC-W/ne*me},E=k=>{const O=k*x*l,W=O*o+o,ne=Math.pow(x,2)*Math.pow(k,2)*l,me=Math.exp(-O),ke=VC(Math.pow(k,2),x);return(-y(k)+iC>0?-1:1)*((W-ne)*me)/ke}):(y=k=>{const B=Math.exp(-k*l),O=(k-o)*l+1;return-iC+B*O},E=k=>{const B=Math.exp(-k*l),O=(o-k)*(l*l);return B*O});const u=5/l,A=N4(y,E,u);if(l=mh(l),isNaN(A))return{stiffness:100,damping:10,duration:l};{const k=Math.pow(A,2)*d;return{stiffness:k,damping:x*2*Math.sqrt(d*k),duration:l}}}const C4=12;function N4(l,n,o){let d=o;for(let y=1;y<C4;y++)d=d-l(d)/n(d);return d}function VC(l,n){return l*Math.sqrt(1-n*n)}const S4=["duration","bounce"],E4=["stiffness","damping","mass"];function IT(l,n){return n.some(o=>l[o]!==void 0)}function D4(l){let n={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...l};if(!IT(l,E4)&&IT(l,S4)){const o=w4(l);n={...n,...o,mass:1},n.isResolvedFromDuration=!0}return n}function Sk({keyframes:l,restDelta:n,restSpeed:o,...d}){const y=l[0],E=l[l.length-1],x={done:!1,value:y},{stiffness:u,damping:A,mass:k,duration:B,velocity:O,isResolvedFromDuration:W}=D4({...d,velocity:-Qu(d.velocity||0)}),ne=O||0,me=A/(2*Math.sqrt(u*k)),ke=E-y,De=Qu(Math.sqrt(u/k)),Ae=Math.abs(ke)<5;o||(o=Ae?.01:2),n||(n=Ae?.005:.5);let we;if(me<1){const fe=VC(De,me);we=Ve=>{const ze=Math.exp(-me*De*Ve);return E-ze*((ne+me*De*ke)/fe*Math.sin(fe*Ve)+ke*Math.cos(fe*Ve))}}else if(me===1)we=fe=>E-Math.exp(-De*fe)*(ke+(ne+De*ke)*fe);else{const fe=De*Math.sqrt(me*me-1);we=Ve=>{const ze=Math.exp(-me*De*Ve),Je=Math.min(fe*Ve,300);return E-ze*((ne+me*De*ke)*Math.sinh(Je)+fe*ke*Math.cosh(Je))/fe}}return{calculatedDuration:W&&B||null,next:fe=>{const Ve=we(fe);if(W)x.done=fe>=B;else{let ze=ne;fe!==0&&(me<1?ze=Nk(we,fe,Ve):ze=0);const Je=Math.abs(ze)<=o,Ye=Math.abs(E-Ve)<=n;x.done=Je&&Ye}return x.value=x.done?E:Ve,x}}}function VT({keyframes:l,velocity:n=0,power:o=.8,timeConstant:d=325,bounceDamping:y=10,bounceStiffness:E=500,modifyTarget:x,min:u,max:A,restDelta:k=.5,restSpeed:B}){const O=l[0],W={done:!1,value:O},ne=ot=>u!==void 0&&ot<u||A!==void 0&&ot>A,me=ot=>u===void 0?A:A===void 0||Math.abs(u-ot)<Math.abs(A-ot)?u:A;let ke=o*n;const De=O+ke,Ae=x===void 0?De:x(De);Ae!==De&&(ke=Ae-O);const we=ot=>-ke*Math.exp(-ot/d),fe=ot=>Ae+we(ot),Ve=ot=>{const wt=we(ot),gt=fe(ot);W.done=Math.abs(wt)<=k,W.value=W.done?Ae:gt};let ze,Je;const Ye=ot=>{ne(W.value)&&(ze=ot,Je=Sk({keyframes:[W.value,me(W.value)],velocity:Nk(fe,ot,W.value),damping:y,stiffness:E,restDelta:k,restSpeed:B}))};return Ye(0),{calculatedDuration:null,next:ot=>{let wt=!1;return!Je&&ze===void 0&&(wt=!0,Ve(ot),Ye(ot)),ze!==void 0&&ot>ze?Je.next(ot-ze):(!wt&&Ve(ot),W)}}}const T4=l=>{const n=({timestamp:o})=>l(o);return{start:()=>Di.update(n,!0),stop:()=>ed(n),now:()=>Io.isProcessing?Io.timestamp:performance.now()}},zT=2e4;function OT(l){let n=0;const o=50;let d=l.next(n);for(;!d.done&&n<zT;)n+=o,d=l.next(n);return n>=zT?1/0:n}const P4={decay:VT,inertia:VT,tween:Yx,keyframes:Yx,spring:Sk};function Xx({autoplay:l=!0,delay:n=0,driver:o=T4,keyframes:d,type:y="keyframes",repeat:E=0,repeatDelay:x=0,repeatType:u="loop",onPlay:A,onStop:k,onComplete:B,onUpdate:O,...W}){let ne=1,me=!1,ke,De;const Ae=()=>{De=new Promise(Rt=>{ke=Rt})};Ae();let we;const fe=P4[y]||Yx;let Ve;fe!==Yx&&typeof d[0]!="number"&&(bl(d.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${d}`),Ve=wk([0,100],d,{clamp:!1}),d=[0,100]);const ze=fe({...W,keyframes:d});let Je;u==="mirror"&&(Je=fe({...W,keyframes:[...d].reverse(),velocity:-(W.velocity||0)}));let Ye="idle",ot=null,wt=null,gt=null;ze.calculatedDuration===null&&E&&(ze.calculatedDuration=OT(ze));const{calculatedDuration:sn}=ze;let st=1/0,vt=1/0;sn!==null&&(st=sn+x,vt=st*(E+1)-x);let Nt=0;const on=Rt=>{if(wt===null)return;ne>0&&(wt=Math.min(wt,Rt)),ne<0&&(wt=Math.min(Rt-vt/ne,wt)),ot!==null?Nt=ot:Nt=Math.round(Rt-wt)*ne;const Ht=Nt-n*(ne>=0?1:-1),ct=ne>=0?Ht<0:Ht>vt;Nt=Math.max(Ht,0),Ye==="finished"&&ot===null&&(Nt=vt);let Ie=Nt,bt=ze;if(E){const Bt=Math.min(Nt,vt)/st;let fn=Math.floor(Bt),Bn=Bt%1;!Bn&&Bt>=1&&(Bn=1),Bn===1&&fn--,fn=Math.min(fn,E+1),!!(fn%2)&&(u==="reverse"?(Bn=1-Bn,x&&(Bn-=x/st)):u==="mirror"&&(bt=Je)),Ie=gh(0,1,Bn)*st}const hn=ct?{done:!1,value:d[0]}:bt.next(Ie);Ve&&(hn.value=Ve(hn.value));let{done:Sn}=hn;!ct&&sn!==null&&(Sn=ne>=0?Nt>=vt:Nt<=0);const Ft=ot===null&&(Ye==="finished"||Ye==="running"&&Sn);return O&&O(hn.value),Ft&&Wt(),hn},yn=()=>{we&&we.stop(),we=void 0},zt=()=>{Ye="idle",yn(),ke(),Ae(),wt=gt=null},Wt=()=>{Ye="finished",B&&B(),yn(),ke()},dn=()=>{if(me)return;we||(we=o(on));const Rt=we.now();A&&A(),ot!==null?wt=Rt-ot:(!wt||Ye==="finished")&&(wt=Rt),Ye==="finished"&&Ae(),gt=wt,ot=null,Ye="running",we.start()};l&&dn();const St={then(Rt,Ht){return De.then(Rt,Ht)},get time(){return Qu(Nt)},set time(Rt){Rt=mh(Rt),Nt=Rt,ot!==null||!we||ne===0?ot=Rt:wt=we.now()-Rt/ne},get duration(){const Rt=ze.calculatedDuration===null?OT(ze):ze.calculatedDuration;return Qu(Rt)},get speed(){return ne},set speed(Rt){Rt===ne||!we||(ne=Rt,St.time=Qu(Nt))},get state(){return Ye},play:dn,pause:()=>{Ye="paused",ot=Nt},stop:()=>{me=!0,Ye!=="idle"&&(Ye="idle",k&&k(),zt())},cancel:()=>{gt!==null&&on(gt),zt()},complete:()=>{Ye="finished"},sample:Rt=>(wt=0,on(Rt))};return St}function j4(l){let n;return()=>(n===void 0&&(n=l()),n)}const k4=j4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),A4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Tx=10,M4=2e4,R4=(l,n)=>n.type==="spring"||l==="backgroundColor"||!nk(n.ease);function L4(l,n,{onUpdate:o,onComplete:d,...y}){if(!(k4()&&A4.has(n)&&!y.repeatDelay&&y.repeatType!=="mirror"&&y.damping!==0&&y.type!=="inertia"))return!1;let x=!1,u,A,k=!1;const B=()=>{A=new Promise(fe=>{u=fe})};B();let{keyframes:O,duration:W=300,ease:ne,times:me}=y;if(R4(n,y)){const fe=Xx({...y,repeat:0,delay:0});let Ve={done:!1,value:O[0]};const ze=[];let Je=0;for(;!Ve.done&&Je<M4;)Ve=fe.sample(Je),ze.push(Ve.value),Je+=Tx;me=void 0,O=ze,W=Je-Tx,ne="linear"}const ke=GO(l.owner.current,n,O,{...y,duration:W,ease:ne,times:me}),De=()=>{k=!1,ke.cancel()},Ae=()=>{k=!0,Di.update(De),u(),B()};return ke.onfinish=()=>{k||(l.set(WO(O,y)),d&&d(),Ae())},{then(fe,Ve){return A.then(fe,Ve)},attachTimeline(fe){return ke.timeline=fe,ke.onfinish=null,rs},get time(){return Qu(ke.currentTime||0)},set time(fe){ke.currentTime=mh(fe)},get speed(){return ke.playbackRate},set speed(fe){ke.playbackRate=fe},get duration(){return Qu(W)},play:()=>{x||(ke.play(),ed(De))},pause:()=>ke.pause(),stop:()=>{if(x=!0,ke.playState==="idle")return;const{currentTime:fe}=ke;if(fe){const Ve=Xx({...y,autoplay:!1});l.setWithVelocity(Ve.sample(fe-Tx).value,Ve.sample(fe).value,Tx)}Ae()},complete:()=>{k||ke.finish()},cancel:Ae}}function I4({keyframes:l,delay:n,onUpdate:o,onComplete:d}){const y=()=>(o&&o(l[l.length-1]),d&&d(),{time:0,speed:1,duration:0,play:rs,pause:rs,stop:rs,then:E=>(E(),Promise.resolve()),cancel:rs,complete:rs});return n?Xx({keyframes:[0,1],duration:0,delay:n,onComplete:y}):y()}const V4={type:"spring",stiffness:500,damping:25,restSpeed:10},z4=l=>({type:"spring",stiffness:550,damping:l===0?2*Math.sqrt(550):30,restSpeed:10}),O4={type:"keyframes",duration:.8},B4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},F4=(l,{keyframes:n})=>n.length>2?O4:jf.has(l)?l.startsWith("scale")?z4(n[1]):V4:B4,zC=(l,n)=>l==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(vh.test(n)||n==="0")&&!n.startsWith("url(")),U4=new Set(["brightness","contrast","saturate","opacity"]);function $4(l){const[n,o]=l.slice(0,-1).split("(");if(n==="drop-shadow")return l;const[d]=o.match(f0)||[];if(!d)return l;const y=o.replace(d,"");let E=U4.has(n)?1:0;return d!==o&&(E*=100),n+"("+E+y+")"}const q4=/([a-z-]*)\(.*?\)/g,OC={...vh,getAnimatableNone:l=>{const n=l.match(q4);return n?n.map($4).join(" "):l}},H4={...Oj,color:Jo,backgroundColor:Jo,outlineColor:Jo,fill:Jo,stroke:Jo,borderColor:Jo,borderTopColor:Jo,borderRightColor:Jo,borderBottomColor:Jo,borderLeftColor:Jo,filter:OC,WebkitFilter:OC},CN=l=>H4[l];function Ek(l,n){let o=CN(l);return o!==OC&&(o=vh),o.getAnimatableNone?o.getAnimatableNone(n):void 0}const Dk=l=>/^0[^.\s]+$/.test(l);function G4(l){if(typeof l=="number")return l===0;if(l!==null)return l==="none"||l==="0"||Dk(l)}function W4(l,n,o,d){const y=zC(n,o);let E;Array.isArray(o)?E=[...o]:E=[null,o];const x=d.from!==void 0?d.from:l.get();let u;const A=[];for(let k=0;k<E.length;k++)E[k]===null&&(E[k]=k===0?x:E[k-1]),G4(E[k])&&A.push(k),typeof E[k]=="string"&&E[k]!=="none"&&E[k]!=="0"&&(u=E[k]);if(y&&A.length&&u)for(let k=0;k<A.length;k++){const B=A[k];E[B]=Ek(n,u)}return E}function Z4({when:l,delay:n,delayChildren:o,staggerChildren:d,staggerDirection:y,repeat:E,repeatType:x,repeatDelay:u,from:A,elapsed:k,...B}){return!!Object.keys(B).length}function NN(l,n){return l[n]||l.default||l}const K4={skipAnimations:!1},SN=(l,n,o,d={})=>y=>{const E=NN(d,l)||{},x=E.delay||d.delay||0;let{elapsed:u=0}=d;u=u-mh(x);const A=W4(n,l,o,E),k=A[0],B=A[A.length-1],O=zC(l,k),W=zC(l,B);ey(O===W,`You are trying to animate ${l} from "${k}" to "${B}". ${k} is not an animatable value - to enable this animation set ${k} to a value animatable to ${B} via the \`style\` property.`);let ne={keyframes:A,velocity:n.getVelocity(),ease:"easeOut",...E,delay:-u,onUpdate:me=>{n.set(me),E.onUpdate&&E.onUpdate(me)},onComplete:()=>{y(),E.onComplete&&E.onComplete()}};if(Z4(E)||(ne={...ne,...F4(l,ne)}),ne.duration&&(ne.duration=mh(ne.duration)),ne.repeatDelay&&(ne.repeatDelay=mh(ne.repeatDelay)),!O||!W||HO.current||E.type===!1||K4.skipAnimations)return I4(ne);if(!d.isHandoff&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate){const me=L4(n,l,ne);if(me)return me}return Xx(ne)};function Jx(l){return!!(pa(l)&&l.add)}const Tk=l=>/^\-?\d*\.?\d+$/.test(l);function EN(l,n){l.indexOf(n)===-1&&l.push(n)}function DN(l,n){const o=l.indexOf(n);o>-1&&l.splice(o,1)}class TN{constructor(){this.subscriptions=[]}add(n){return EN(this.subscriptions,n),()=>DN(this.subscriptions,n)}notify(n,o,d){const y=this.subscriptions.length;if(y)if(y===1)this.subscriptions[0](n,o,d);else for(let E=0;E<y;E++){const x=this.subscriptions[E];x&&x(n,o,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const BT=new Set;function PN(l,n,o){l||BT.has(n)||(console.warn(n),BT.add(n))}const Y4=l=>!isNaN(parseFloat(l));class X4{constructor(n,o={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(d,y=!0)=>{this.prev=this.current,this.current=d;const{delta:E,timestamp:x}=Io;this.lastUpdated!==x&&(this.timeDelta=E,this.lastUpdated=x,Di.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),y&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Di.postRender(this.velocityCheck),this.velocityCheck=({timestamp:d})=>{d!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=n,this.canTrackVelocity=Y4(this.current),this.owner=o.owner}onChange(n){return PN(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",n)}on(n,o){this.events[n]||(this.events[n]=new TN);const d=this.events[n].add(o);return n==="change"?()=>{d(),Di.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,o){this.passiveEffect=n,this.stopPassiveEffect=o}set(n,o=!0){!o||!this.passiveEffect?this.updateAndNotify(n,o):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,o,d){this.set(o),this.prev=n,this.timeDelta=d}jump(n){this.updateAndNotify(n),this.prev=n,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ck(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(n){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=n(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mp(l,n){return new X4(l,n)}const Pk=l=>n=>n.test(l),J4={test:l=>l==="auto",parse:l=>l},jk=[kf,Vn,Xc,lh,aO,oO,J4],xv=l=>jk.find(Pk(l)),Q4=[...jk,Jo,vh],eB=l=>Q4.find(Pk(l));function tB(l,n,o){l.hasValue(n)?l.getValue(n).set(o):l.addValue(n,mp(o))}function nB(l,n){const o=p0(l,n);let{transitionEnd:d={},transition:y={},...E}=o?l.makeTargetAnimatable(o,!1):{};E={...E,...d};for(const x in E){const u=_O(E[x]);tB(l,x,u)}}function rB(l,n,o){var d,y;const E=Object.keys(n).filter(u=>!l.hasValue(u)),x=E.length;if(x)for(let u=0;u<x;u++){const A=E[u],k=n[A];let B=null;Array.isArray(k)&&(B=k[0]),B===null&&(B=(y=(d=o[A])!==null&&d!==void 0?d:l.readValue(A))!==null&&y!==void 0?y:n[A]),B!=null&&(typeof B=="string"&&(Tk(B)||Dk(B))?B=parseFloat(B):!eB(B)&&vh.test(k)&&(B=Ek(A,k)),l.addValue(A,mp(B,{owner:l})),o[A]===void 0&&(o[A]=B),B!==null&&l.setBaseTarget(A,B))}}function iB(l,n){return n?(n[l]||n.default||n).from:void 0}function sB(l,n,o){const d={};for(const y in l){const E=iB(y,n);if(E!==void 0)d[y]=E;else{const x=o.getValue(y);x&&(d[y]=x.get())}}return d}function oB({protectedKeys:l,needsAnimating:n},o){const d=l.hasOwnProperty(o)&&n[o]!==!0;return n[o]=!1,d}function aB(l,n){const o=l.get();if(Array.isArray(n)){for(let d=0;d<n.length;d++)if(n[d]!==o)return!0}else return o!==n}function kk(l,n,{delay:o=0,transitionOverride:d,type:y}={}){let{transition:E=l.getDefaultTransition(),transitionEnd:x,...u}=l.makeTargetAnimatable(n);const A=l.getValue("willChange");d&&(E=d);const k=[],B=y&&l.animationState&&l.animationState.getState()[y];for(const O in u){const W=l.getValue(O),ne=u[O];if(!W||ne===void 0||B&&oB(B,O))continue;const me={delay:o,elapsed:0,...NN(E||{},O)};if(window.HandoffAppearAnimations){const Ae=l.getProps()[Aj];if(Ae){const we=window.HandoffAppearAnimations(Ae,O,W,Di);we!==null&&(me.elapsed=we,me.isHandoff=!0)}}let ke=!me.isHandoff&&!aB(W,ne);if(me.type==="spring"&&(W.getVelocity()||me.velocity)&&(ke=!1),W.animation&&(ke=!1),ke)continue;W.start(SN(O,W,ne,l.shouldReduceMotion&&jf.has(O)?{type:!1}:me));const De=W.animation;Jx(A)&&(A.add(O),De.then(()=>A.remove(O))),k.push(De)}return x&&Promise.all(k).then(()=>{x&&nB(l,x)}),k}function BC(l,n,o={}){const d=p0(l,n,o.custom);let{transition:y=l.getDefaultTransition()||{}}=d||{};o.transitionOverride&&(y=o.transitionOverride);const E=d?()=>Promise.all(kk(l,d,o)):()=>Promise.resolve(),x=l.variantChildren&&l.variantChildren.size?(A=0)=>{const{delayChildren:k=0,staggerChildren:B,staggerDirection:O}=y;return lB(l,n,k+A,B,O,o)}:()=>Promise.resolve(),{when:u}=y;if(u){const[A,k]=u==="beforeChildren"?[E,x]:[x,E];return A().then(()=>k())}else return Promise.all([E(),x(o.delay)])}function lB(l,n,o=0,d=0,y=1,E){const x=[],u=(l.variantChildren.size-1)*d,A=y===1?(k=0)=>k*d:(k=0)=>u-k*d;return Array.from(l.variantChildren).sort(cB).forEach((k,B)=>{k.notify("AnimationStart",n),x.push(BC(k,n,{...E,delay:o+A(B)}).then(()=>k.notify("AnimationComplete",n)))}),Promise.all(x)}function cB(l,n){return l.sortNodePosition(n)}function uB(l,n,o={}){l.notify("AnimationStart",n);let d;if(Array.isArray(n)){const y=n.map(E=>BC(l,E,o));d=Promise.all(y)}else if(typeof n=="string")d=BC(l,n,o);else{const y=typeof n=="function"?p0(l,n,o.custom):n;d=Promise.all(kk(l,y,o))}return d.then(()=>l.notify("AnimationComplete",n))}const dB=[...uN].reverse(),hB=uN.length;function fB(l){return n=>Promise.all(n.map(({animation:o,options:d})=>uB(l,o,d)))}function mB(l){let n=fB(l);const o=gB();let d=!0;const y=(A,k)=>{const B=p0(l,k);if(B){const{transition:O,transitionEnd:W,...ne}=B;A={...A,...ne,...W}}return A};function E(A){n=A(l)}function x(A,k){const B=l.getProps(),O=l.getVariantContext(!0)||{},W=[],ne=new Set;let me={},ke=1/0;for(let Ae=0;Ae<hB;Ae++){const we=dB[Ae],fe=o[we],Ve=B[we]!==void 0?B[we]:O[we],ze=Ov(Ve),Je=we===k?fe.isActive:null;Je===!1&&(ke=Ae);let Ye=Ve===O[we]&&Ve!==B[we]&&ze;if(Ye&&d&&l.manuallyAnimateOnMount&&(Ye=!1),fe.protectedKeys={...me},!fe.isActive&&Je===null||!Ve&&!fe.prevProp||d0(Ve)||typeof Ve=="boolean")continue;let wt=pB(fe.prevProp,Ve)||we===k&&fe.isActive&&!Ye&&ze||Ae>ke&&ze,gt=!1;const sn=Array.isArray(Ve)?Ve:[Ve];let st=sn.reduce(y,{});Je===!1&&(st={});const{prevResolvedValues:vt={}}=fe,Nt={...vt,...st},on=yn=>{wt=!0,ne.has(yn)&&(gt=!0,ne.delete(yn)),fe.needsAnimating[yn]=!0};for(const yn in Nt){const zt=st[yn],Wt=vt[yn];if(me.hasOwnProperty(yn))continue;let dn=!1;Zx(zt)&&Zx(Wt)?dn=!ek(zt,Wt):dn=zt!==Wt,dn?zt!==void 0?on(yn):ne.add(yn):zt!==void 0&&ne.has(yn)?on(yn):fe.protectedKeys[yn]=!0}fe.prevProp=Ve,fe.prevResolvedValues=st,fe.isActive&&(me={...me,...st}),d&&l.blockInitialAnimation&&(wt=!1),wt&&(!Ye||gt)&&W.push(...sn.map(yn=>({animation:yn,options:{type:we,...A}})))}if(ne.size){const Ae={};ne.forEach(we=>{const fe=l.getBaseTarget(we);fe!==void 0&&(Ae[we]=fe)}),W.push({animation:Ae})}let De=!!W.length;return d&&(B.initial===!1||B.initial===B.animate)&&!l.manuallyAnimateOnMount&&(De=!1),d=!1,De?n(W):Promise.resolve()}function u(A,k,B){var O;if(o[A].isActive===k)return Promise.resolve();(O=l.variantChildren)===null||O===void 0||O.forEach(ne=>{var me;return(me=ne.animationState)===null||me===void 0?void 0:me.setActive(A,k)}),o[A].isActive=k;const W=x(B,A);for(const ne in o)o[ne].protectedKeys={};return W}return{animateChanges:x,setActive:u,setAnimateFunction:E,getState:()=>o}}function pB(l,n){return typeof n=="string"?n!==l:Array.isArray(n)?!ek(n,l):!1}function xf(l=!1){return{isActive:l,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gB(){return{animate:xf(!0),whileInView:xf(),whileHover:xf(),whileTap:xf(),whileDrag:xf(),whileFocus:xf(),exit:xf()}}class vB extends bh{constructor(n){super(n),n.animationState||(n.animationState=mB(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();this.unmount(),d0(n)&&(this.unmount=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:o}=this.node.prevProps||{};n!==o&&this.updateAnimationControlsSubscription()}unmount(){}}let yB=0;class bB extends bh{constructor(){super(...arguments),this.id=yB++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:o,custom:d}=this.node.presenceContext,{isPresent:y}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===y)return;const E=this.node.animationState.setActive("exit",!n,{custom:d??this.node.getProps().custom});o&&!n&&E.then(()=>o(this.id))}mount(){const{register:n}=this.node.presenceContext||{};n&&(this.unmount=n(this.id))}unmount(){}}const xB={animation:{Feature:vB},exit:{Feature:bB}},FT=(l,n)=>Math.abs(l-n);function _B(l,n){const o=FT(l.x,n.x),d=FT(l.y,n.y);return Math.sqrt(o**2+d**2)}class Ak{constructor(n,o,{transformPagePoint:d,contextWindow:y,dragSnapToOrigin:E=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=oC(this.lastMoveEventInfo,this.history),W=this.startEvent!==null,ne=_B(O.offset,{x:0,y:0})>=3;if(!W&&!ne)return;const{point:me}=O,{timestamp:ke}=Io;this.history.push({...me,timestamp:ke});const{onStart:De,onMove:Ae}=this.handlers;W||(De&&De(this.lastMoveEvent,O),this.startEvent=this.lastMoveEvent),Ae&&Ae(this.lastMoveEvent,O)},this.handlePointerMove=(O,W)=>{this.lastMoveEvent=O,this.lastMoveEventInfo=sC(W,this.transformPagePoint),Di.update(this.updatePoint,!0)},this.handlePointerUp=(O,W)=>{this.end();const{onEnd:ne,onSessionEnd:me,resumeAnimation:ke}=this.handlers;if(this.dragSnapToOrigin&&ke&&ke(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const De=oC(O.type==="pointercancel"?this.lastMoveEventInfo:sC(W,this.transformPagePoint),this.history);this.startEvent&&ne&&ne(O,De),me&&me(O,De)},!Kj(n))return;this.dragSnapToOrigin=E,this.handlers=o,this.transformPagePoint=d,this.contextWindow=y||window;const x=m0(n),u=sC(x,this.transformPagePoint),{point:A}=u,{timestamp:k}=Io;this.history=[{...A,timestamp:k}];const{onSessionStart:B}=o;B&&B(n,oC(u,this.history)),this.removeListeners=fh(Ju(this.contextWindow,"pointermove",this.handlePointerMove),Ju(this.contextWindow,"pointerup",this.handlePointerUp),Ju(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),ed(this.updatePoint)}}function sC(l,n){return n?{point:n(l.point)}:l}function UT(l,n){return{x:l.x-n.x,y:l.y-n.y}}function oC({point:l},n){return{point:l,delta:UT(l,Mk(n)),offset:UT(l,wB(n)),velocity:CB(n,.1)}}function wB(l){return l[0]}function Mk(l){return l[l.length-1]}function CB(l,n){if(l.length<2)return{x:0,y:0};let o=l.length-1,d=null;const y=Mk(l);for(;o>=0&&(d=l[o],!(y.timestamp-d.timestamp>mh(n)));)o--;if(!d)return{x:0,y:0};const E=Qu(y.timestamp-d.timestamp);if(E===0)return{x:0,y:0};const x={x:(y.x-d.x)/E,y:(y.y-d.y)/E};return x.x===1/0&&(x.x=0),x.y===1/0&&(x.y=0),x}function Ba(l){return l.max-l.min}function FC(l,n=0,o=.01){return Math.abs(l-n)<=o}function $T(l,n,o,d=.5){l.origin=d,l.originPoint=Wi(n.min,n.max,l.origin),l.scale=Ba(o)/Ba(n),(FC(l.scale,1,1e-4)||isNaN(l.scale))&&(l.scale=1),l.translate=Wi(o.min,o.max,l.origin)-l.originPoint,(FC(l.translate)||isNaN(l.translate))&&(l.translate=0)}function jv(l,n,o,d){$T(l.x,n.x,o.x,d?d.originX:void 0),$T(l.y,n.y,o.y,d?d.originY:void 0)}function qT(l,n,o){l.min=o.min+n.min,l.max=l.min+Ba(n)}function NB(l,n,o){qT(l.x,n.x,o.x),qT(l.y,n.y,o.y)}function HT(l,n,o){l.min=n.min-o.min,l.max=l.min+Ba(n)}function kv(l,n,o){HT(l.x,n.x,o.x),HT(l.y,n.y,o.y)}function SB(l,{min:n,max:o},d){return n!==void 0&&l<n?l=d?Wi(n,l,d.min):Math.max(l,n):o!==void 0&&l>o&&(l=d?Wi(o,l,d.max):Math.min(l,o)),l}function GT(l,n,o){return{min:n!==void 0?l.min+n:void 0,max:o!==void 0?l.max+o-(l.max-l.min):void 0}}function EB(l,{top:n,left:o,bottom:d,right:y}){return{x:GT(l.x,o,y),y:GT(l.y,n,d)}}function WT(l,n){let o=n.min-l.min,d=n.max-l.max;return n.max-n.min<l.max-l.min&&([o,d]=[d,o]),{min:o,max:d}}function DB(l,n){return{x:WT(l.x,n.x),y:WT(l.y,n.y)}}function TB(l,n){let o=.5;const d=Ba(l),y=Ba(n);return y>d?o=Fv(n.min,n.max-d,l.min):d>y&&(o=Fv(l.min,l.max-y,n.min)),gh(0,1,o)}function PB(l,n){const o={};return n.min!==void 0&&(o.min=n.min-l.min),n.max!==void 0&&(o.max=n.max-l.min),o}const UC=.35;function jB(l=UC){return l===!1?l=0:l===!0&&(l=UC),{x:ZT(l,"left","right"),y:ZT(l,"top","bottom")}}function ZT(l,n,o){return{min:KT(l,n),max:KT(l,o)}}function KT(l,n){return typeof l=="number"?l:l[n]||0}const YT=()=>({translate:0,scale:1,origin:0,originPoint:0}),lp=()=>({x:YT(),y:YT()}),XT=()=>({min:0,max:0}),ws=()=>({x:XT(),y:XT()});function vl(l){return[l("x"),l("y")]}function Rk({top:l,left:n,right:o,bottom:d}){return{x:{min:n,max:o},y:{min:l,max:d}}}function kB({x:l,y:n}){return{top:n.min,right:l.max,bottom:n.max,left:l.min}}function AB(l,n){if(!n)return l;const o=n({x:l.left,y:l.top}),d=n({x:l.right,y:l.bottom});return{top:o.y,left:o.x,bottom:d.y,right:d.x}}function aC(l){return l===void 0||l===1}function $C({scale:l,scaleX:n,scaleY:o}){return!aC(l)||!aC(n)||!aC(o)}function wf(l){return $C(l)||Lk(l)||l.z||l.rotate||l.rotateX||l.rotateY}function Lk(l){return JT(l.x)||JT(l.y)}function JT(l){return l&&l!=="0%"}function Qx(l,n,o){const d=l-o,y=n*d;return o+y}function QT(l,n,o,d,y){return y!==void 0&&(l=Qx(l,y,d)),Qx(l,o,d)+n}function qC(l,n=0,o=1,d,y){l.min=QT(l.min,n,o,d,y),l.max=QT(l.max,n,o,d,y)}function Ik(l,{x:n,y:o}){qC(l.x,n.translate,n.scale,n.originPoint),qC(l.y,o.translate,o.scale,o.originPoint)}function MB(l,n,o,d=!1){const y=o.length;if(!y)return;n.x=n.y=1;let E,x;for(let u=0;u<y;u++){E=o[u],x=E.projectionDelta;const A=E.instance;A&&A.style&&A.style.display==="contents"||(d&&E.options.layoutScroll&&E.scroll&&E!==E.root&&cp(l,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),x&&(n.x*=x.x.scale,n.y*=x.y.scale,Ik(l,x)),d&&wf(E.latestValues)&&cp(l,E.latestValues))}n.x=eP(n.x),n.y=eP(n.y)}function eP(l){return Number.isInteger(l)||l>1.0000000000001||l<.999999999999?l:1}function ch(l,n){l.min=l.min+n,l.max=l.max+n}function tP(l,n,[o,d,y]){const E=n[y]!==void 0?n[y]:.5,x=Wi(l.min,l.max,E);qC(l,n[o],n[d],x,n.scale)}const RB=["x","scaleX","originX"],LB=["y","scaleY","originY"];function cp(l,n){tP(l.x,n,RB),tP(l.y,n,LB)}function Vk(l,n){return Rk(AB(l.getBoundingClientRect(),n))}function IB(l,n,o){const d=Vk(l,o),{scroll:y}=n;return y&&(ch(d.x,y.offset.x),ch(d.y,y.offset.y)),d}const zk=({current:l})=>l?l.ownerDocument.defaultView:null,VB=new WeakMap;class zB{constructor(n){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ws(),this.visualElement=n}start(n,{snapToCursor:o=!1}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const y=B=>{const{dragSnapToOrigin:O}=this.getProps();O?this.pauseAnimation():this.stopAnimation(),o&&this.snapToCursor(m0(B,"page").point)},E=(B,O)=>{const{drag:W,dragPropagation:ne,onDragStart:me}=this.getProps();if(W&&!ne&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Xj(W),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vl(De=>{let Ae=this.getAxisMotionValue(De).get()||0;if(Xc.test(Ae)){const{projection:we}=this.visualElement;if(we&&we.layout){const fe=we.layout.layoutBox[De];fe&&(Ae=Ba(fe)*(parseFloat(Ae)/100))}}this.originPoint[De]=Ae}),me&&Di.update(()=>me(B,O),!1,!0);const{animationState:ke}=this.visualElement;ke&&ke.setActive("whileDrag",!0)},x=(B,O)=>{const{dragPropagation:W,dragDirectionLock:ne,onDirectionLock:me,onDrag:ke}=this.getProps();if(!W&&!this.openGlobalLock)return;const{offset:De}=O;if(ne&&this.currentDirection===null){this.currentDirection=OB(De),this.currentDirection!==null&&me&&me(this.currentDirection);return}this.updateAxis("x",O.point,De),this.updateAxis("y",O.point,De),this.visualElement.render(),ke&&ke(B,O)},u=(B,O)=>this.stop(B,O),A=()=>vl(B=>{var O;return this.getAnimationState(B)==="paused"&&((O=this.getAxisMotionValue(B).animation)===null||O===void 0?void 0:O.play())}),{dragSnapToOrigin:k}=this.getProps();this.panSession=new Ak(n,{onSessionStart:y,onStart:E,onMove:x,onSessionEnd:u,resumeAnimation:A},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:k,contextWindow:zk(this.visualElement)})}stop(n,o){const d=this.isDragging;if(this.cancel(),!d)return;const{velocity:y}=o;this.startAnimation(y);const{onDragEnd:E}=this.getProps();E&&Di.update(()=>E(n,o))}cancel(){this.isDragging=!1;const{projection:n,animationState:o}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),o&&o.setActive("whileDrag",!1)}updateAxis(n,o,d){const{drag:y}=this.getProps();if(!d||!Px(n,y,this.currentDirection))return;const E=this.getAxisMotionValue(n);let x=this.originPoint[n]+d[n];this.constraints&&this.constraints[n]&&(x=SB(x,this.constraints[n],this.elastic[n])),E.set(x)}resolveConstraints(){var n;const{dragConstraints:o,dragElastic:d}=this.getProps(),y=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)===null||n===void 0?void 0:n.layout,E=this.constraints;o&&op(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&y?this.constraints=EB(y.layoutBox,o):this.constraints=!1,this.elastic=jB(d),E!==this.constraints&&y&&this.constraints&&!this.hasMutatedConstraints&&vl(x=>{this.getAxisMotionValue(x)&&(this.constraints[x]=PB(y.layoutBox[x],this.constraints[x]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:o}=this.getProps();if(!n||!op(n))return!1;const d=n.current;bl(d!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:y}=this.visualElement;if(!y||!y.layout)return!1;const E=IB(d,y.root,this.visualElement.getTransformPagePoint());let x=DB(y.layout.layoutBox,E);if(o){const u=o(kB(x));this.hasMutatedConstraints=!!u,u&&(x=Rk(u))}return x}startAnimation(n){const{drag:o,dragMomentum:d,dragElastic:y,dragTransition:E,dragSnapToOrigin:x,onDragTransitionEnd:u}=this.getProps(),A=this.constraints||{},k=vl(B=>{if(!Px(B,o,this.currentDirection))return;let O=A&&A[B]||{};x&&(O={min:0,max:0});const W=y?200:1e6,ne=y?40:1e7,me={type:"inertia",velocity:d?n[B]:0,bounceStiffness:W,bounceDamping:ne,timeConstant:750,restDelta:1,restSpeed:10,...E,...O};return this.startAxisValueAnimation(B,me)});return Promise.all(k).then(u)}startAxisValueAnimation(n,o){const d=this.getAxisMotionValue(n);return d.start(SN(n,d,0,o))}stopAnimation(){vl(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){vl(n=>{var o;return(o=this.getAxisMotionValue(n).animation)===null||o===void 0?void 0:o.pause()})}getAnimationState(n){var o;return(o=this.getAxisMotionValue(n).animation)===null||o===void 0?void 0:o.state}getAxisMotionValue(n){const o="_drag"+n.toUpperCase(),d=this.visualElement.getProps(),y=d[o];return y||this.visualElement.getValue(n,(d.initial?d.initial[n]:void 0)||0)}snapToCursor(n){vl(o=>{const{drag:d}=this.getProps();if(!Px(o,d,this.currentDirection))return;const{projection:y}=this.visualElement,E=this.getAxisMotionValue(o);if(y&&y.layout){const{min:x,max:u}=y.layout.layoutBox[o];E.set(n[o]-Wi(x,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:o}=this.getProps(),{projection:d}=this.visualElement;if(!op(o)||!d||!this.constraints)return;this.stopAnimation();const y={x:0,y:0};vl(x=>{const u=this.getAxisMotionValue(x);if(u){const A=u.get();y[x]=TB({min:A,max:A},this.constraints[x])}});const{transformTemplate:E}=this.visualElement.getProps();this.visualElement.current.style.transform=E?E({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),vl(x=>{if(!Px(x,n,null))return;const u=this.getAxisMotionValue(x),{min:A,max:k}=this.constraints[x];u.set(Wi(A,k,y[x]))})}addListeners(){if(!this.visualElement.current)return;VB.set(this.visualElement,this);const n=this.visualElement.current,o=Ju(n,"pointerdown",A=>{const{drag:k,dragListener:B=!0}=this.getProps();k&&B&&this.start(A)}),d=()=>{const{dragConstraints:A}=this.getProps();op(A)&&(this.constraints=this.resolveRefConstraints())},{projection:y}=this.visualElement,E=y.addEventListener("measure",d);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),d();const x=Yu(window,"resize",()=>this.scalePositionWithinConstraints()),u=y.addEventListener("didUpdate",({delta:A,hasLayoutChanged:k})=>{this.isDragging&&k&&(vl(B=>{const O=this.getAxisMotionValue(B);O&&(this.originPoint[B]+=A[B].translate,O.set(O.get()+A[B].translate))}),this.visualElement.render())});return()=>{x(),o(),E(),u&&u()}}getProps(){const n=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:d=!1,dragPropagation:y=!1,dragConstraints:E=!1,dragElastic:x=UC,dragMomentum:u=!0}=n;return{...n,drag:o,dragDirectionLock:d,dragPropagation:y,dragConstraints:E,dragElastic:x,dragMomentum:u}}}function Px(l,n,o){return(n===!0||n===l)&&(o===null||o===l)}function OB(l,n=10){let o=null;return Math.abs(l.y)>n?o="y":Math.abs(l.x)>n&&(o="x"),o}class BB extends bh{constructor(n){super(n),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new zB(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const nP=l=>(n,o)=>{l&&Di.update(()=>l(n,o))};class FB extends bh{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(n){this.session=new Ak(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zk(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:o,onPan:d,onPanEnd:y}=this.node.getProps();return{onSessionStart:nP(n),onStart:nP(o),onMove:d,onEnd:(E,x)=>{delete this.session,y&&Di.update(()=>y(E,x))}}}mount(){this.removePointerDownListener=Ju(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function UB(){const l=se.useContext(c0);if(l===null)return[!0,null];const{isPresent:n,onExitComplete:o,register:d}=l,y=se.useId();return se.useEffect(()=>d(y),[]),!n&&o?[!1,()=>o&&o(y)]:[!0]}const Fx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rP(l,n){return n.max===n.min?0:l/(n.max-n.min)*100}const _v={correct:(l,n)=>{if(!n.target)return l;if(typeof l=="string")if(Vn.test(l))l=parseFloat(l);else return l;const o=rP(l,n.target.x),d=rP(l,n.target.y);return`${o}% ${d}%`}},$B={correct:(l,{treeScale:n,projectionDelta:o})=>{const d=l,y=vh.parse(l);if(y.length>5)return d;const E=vh.createTransformer(l),x=typeof y[0]!="number"?1:0,u=o.x.scale*n.x,A=o.y.scale*n.y;y[0+x]/=u,y[1+x]/=A;const k=Wi(u,A,.5);return typeof y[2+x]=="number"&&(y[2+x]/=k),typeof y[3+x]=="number"&&(y[3+x]/=k),E(y)}};class qB extends Uv.Component{componentDidMount(){const{visualElement:n,layoutGroup:o,switchLayoutGroup:d,layoutId:y}=this.props,{projection:E}=n;Qz(HB),E&&(o.group&&o.group.add(E),d&&d.register&&y&&d.register(E),E.root.didUpdate(),E.addEventListener("animationComplete",()=>{this.safeToRemove()}),E.setOptions({...E.options,onExitComplete:()=>this.safeToRemove()})),Fx.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:o,visualElement:d,drag:y,isPresent:E}=this.props,x=d.projection;return x&&(x.isPresent=E,y||n.layoutDependency!==o||o===void 0?x.willUpdate():this.safeToRemove(),n.isPresent!==E&&(E?x.promote():x.relegate()||Di.postRender(()=>{const u=x.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),queueMicrotask(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:o,switchLayoutGroup:d}=this.props,{projection:y}=n;y&&(y.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(y),d&&d.deregister&&d.deregister(y))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function Ok(l){const[n,o]=UB(),d=se.useContext(hN);return Uv.createElement(qB,{...l,layoutGroup:d,switchLayoutGroup:se.useContext(Rj),isPresent:n,safeToRemove:o})}const HB={borderRadius:{..._v,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_v,borderTopRightRadius:_v,borderBottomLeftRadius:_v,borderBottomRightRadius:_v,boxShadow:$B},Bk=["TopLeft","TopRight","BottomLeft","BottomRight"],GB=Bk.length,iP=l=>typeof l=="string"?parseFloat(l):l,sP=l=>typeof l=="number"||Vn.test(l);function WB(l,n,o,d,y,E){y?(l.opacity=Wi(0,o.opacity!==void 0?o.opacity:1,ZB(d)),l.opacityExit=Wi(n.opacity!==void 0?n.opacity:1,0,KB(d))):E&&(l.opacity=Wi(n.opacity!==void 0?n.opacity:1,o.opacity!==void 0?o.opacity:1,d));for(let x=0;x<GB;x++){const u=`border${Bk[x]}Radius`;let A=oP(n,u),k=oP(o,u);if(A===void 0&&k===void 0)continue;A||(A=0),k||(k=0),A===0||k===0||sP(A)===sP(k)?(l[u]=Math.max(Wi(iP(A),iP(k),d),0),(Xc.test(k)||Xc.test(A))&&(l[u]+="%")):l[u]=k}(n.rotate||o.rotate)&&(l.rotate=Wi(n.rotate||0,o.rotate||0,d))}function oP(l,n){return l[n]!==void 0?l[n]:l.borderRadius}const ZB=Fk(0,.5,ck),KB=Fk(.5,.95,rs);function Fk(l,n,o){return d=>d<l?0:d>n?1:o(Fv(l,n,d))}function aP(l,n){l.min=n.min,l.max=n.max}function pl(l,n){aP(l.x,n.x),aP(l.y,n.y)}function lP(l,n,o,d,y){return l-=n,l=Qx(l,1/o,d),y!==void 0&&(l=Qx(l,1/y,d)),l}function YB(l,n=0,o=1,d=.5,y,E=l,x=l){if(Xc.test(n)&&(n=parseFloat(n),n=Wi(x.min,x.max,n/100)-x.min),typeof n!="number")return;let u=Wi(E.min,E.max,d);l===E&&(u-=n),l.min=lP(l.min,n,o,u,y),l.max=lP(l.max,n,o,u,y)}function cP(l,n,[o,d,y],E,x){YB(l,n[o],n[d],n[y],n.scale,E,x)}const XB=["x","scaleX","originX"],JB=["y","scaleY","originY"];function uP(l,n,o,d){cP(l.x,n,XB,o?o.x:void 0,d?d.x:void 0),cP(l.y,n,JB,o?o.y:void 0,d?d.y:void 0)}function dP(l){return l.translate===0&&l.scale===1}function Uk(l){return dP(l.x)&&dP(l.y)}function QB(l,n){return l.x.min===n.x.min&&l.x.max===n.x.max&&l.y.min===n.y.min&&l.y.max===n.y.max}function $k(l,n){return Math.round(l.x.min)===Math.round(n.x.min)&&Math.round(l.x.max)===Math.round(n.x.max)&&Math.round(l.y.min)===Math.round(n.y.min)&&Math.round(l.y.max)===Math.round(n.y.max)}function hP(l){return Ba(l.x)/Ba(l.y)}class eF{constructor(){this.members=[]}add(n){EN(this.members,n),n.scheduleRender()}remove(n){if(DN(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const o=this.members[this.members.length-1];o&&this.promote(o)}}relegate(n){const o=this.members.findIndex(y=>n===y);if(o===0)return!1;let d;for(let y=o;y>=0;y--){const E=this.members[y];if(E.isPresent!==!1){d=E;break}}return d?(this.promote(d),!0):!1}promote(n,o){const d=this.lead;if(n!==d&&(this.prevLead=d,this.lead=n,n.show(),d)){d.instance&&d.scheduleRender(),n.scheduleRender(),n.resumeFrom=d,o&&(n.resumeFrom.preserveOpacity=!0),d.snapshot&&(n.snapshot=d.snapshot,n.snapshot.latestValues=d.animationValues||d.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:y}=n.options;y===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:o,resumingFrom:d}=n;o.onExitComplete&&o.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fP(l,n,o){let d="";const y=l.x.translate/n.x,E=l.y.translate/n.y;if((y||E)&&(d=`translate3d(${y}px, ${E}px, 0) `),(n.x!==1||n.y!==1)&&(d+=`scale(${1/n.x}, ${1/n.y}) `),o){const{rotate:A,rotateX:k,rotateY:B}=o;A&&(d+=`rotate(${A}deg) `),k&&(d+=`rotateX(${k}deg) `),B&&(d+=`rotateY(${B}deg) `)}const x=l.x.scale*n.x,u=l.y.scale*n.y;return(x!==1||u!==1)&&(d+=`scale(${x}, ${u})`),d||"none"}const tF=(l,n)=>l.depth-n.depth;class nF{constructor(){this.children=[],this.isDirty=!1}add(n){EN(this.children,n),this.isDirty=!0}remove(n){DN(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(tF),this.isDirty=!1,this.children.forEach(n)}}function rF(l,n){const o=performance.now(),d=({timestamp:y})=>{const E=y-o;E>=n&&(ed(d),l(E-n))};return Di.read(d,!0),()=>ed(d)}function iF(l){window.MotionDebug&&window.MotionDebug.record(l)}function sF(l){return l instanceof SVGElement&&l.tagName!=="svg"}function oF(l,n,o){const d=pa(l)?l:mp(l);return d.start(SN("",d,n,o)),d.animation}const mP=["","X","Y","Z"],aF={visibility:"hidden"},pP=1e3;let lF=0;const Cf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function qk({attachResizeListener:l,defaultParent:n,measureScroll:o,checkIsScrollRoot:d,resetTransform:y}){return class{constructor(x={},u=n==null?void 0:n()){this.id=lF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Cf.totalNodes=Cf.resolvedTargetDeltas=Cf.recalculatedProjection=0,this.nodes.forEach(dF),this.nodes.forEach(gF),this.nodes.forEach(vF),this.nodes.forEach(hF),iF(Cf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=x,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let A=0;A<this.path.length;A++)this.path[A].shouldResetTransform=!0;this.root===this&&(this.nodes=new nF)}addEventListener(x,u){return this.eventHandlers.has(x)||this.eventHandlers.set(x,new TN),this.eventHandlers.get(x).add(u)}notifyListeners(x,...u){const A=this.eventHandlers.get(x);A&&A.notify(...u)}hasListeners(x){return this.eventHandlers.has(x)}mount(x,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sF(x),this.instance=x;const{layoutId:A,layout:k,visualElement:B}=this.options;if(B&&!B.current&&B.mount(x),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(k||A)&&(this.isLayoutDirty=!0),l){let O;const W=()=>this.root.updateBlockedByResize=!1;l(x,()=>{this.root.updateBlockedByResize=!0,O&&O(),O=rF(W,250),Fx.hasAnimatedSinceResize&&(Fx.hasAnimatedSinceResize=!1,this.nodes.forEach(vP))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&B&&(A||k)&&this.addEventListener("didUpdate",({delta:O,hasLayoutChanged:W,hasRelativeTargetChanged:ne,layout:me})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ke=this.options.transition||B.getDefaultTransition()||wF,{onLayoutAnimationStart:De,onLayoutAnimationComplete:Ae}=B.getProps(),we=!this.targetLayout||!$k(this.targetLayout,me)||ne,fe=!W&&ne;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||fe||W&&(we||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(O,fe);const Ve={...NN(ke,"layout"),onPlay:De,onComplete:Ae};(B.shouldReduceMotion||this.options.layoutRoot)&&(Ve.delay=0,Ve.type=!1),this.startAnimation(Ve)}else W||vP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=me})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const x=this.getStack();x&&x.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ed(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yF),this.animationId++)}getTransformTemplate(){const{visualElement:x}=this.options;return x&&x.getProps().transformTemplate}willUpdate(x=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let B=0;B<this.path.length;B++){const O=this.path[B];O.shouldResetTransform=!0,O.updateScroll("snapshot"),O.options.layoutRoot&&O.willUpdate(!1)}const{layoutId:u,layout:A}=this.options;if(u===void 0&&!A)return;const k=this.getTransformTemplate();this.prevTransformTemplateValue=k?k(this.latestValues,""):void 0,this.updateSnapshot(),x&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gP);return}this.isUpdating||this.nodes.forEach(mF),this.isUpdating=!1,this.nodes.forEach(pF),this.nodes.forEach(cF),this.nodes.forEach(uF),this.clearAllSnapshots();const u=performance.now();Io.delta=gh(0,1e3/60,u-Io.timestamp),Io.timestamp=u,Io.isProcessing=!0,X1.update.process(Io),X1.preRender.process(Io),X1.render.process(Io),Io.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(fF),this.sharedNodes.forEach(bF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Di.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Di.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let A=0;A<this.path.length;A++)this.path[A].updateScroll();const x=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ws(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,x?x.layoutBox:void 0)}updateScroll(x="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===x&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:x,isRoot:d(this.instance),offset:o(this.instance)})}resetTransform(){if(!y)return;const x=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!Uk(this.projectionDelta),A=this.getTransformTemplate(),k=A?A(this.latestValues,""):void 0,B=k!==this.prevTransformTemplateValue;x&&(u||wf(this.latestValues)||B)&&(y(this.instance,k),this.shouldResetTransform=!1,this.scheduleRender())}measure(x=!0){const u=this.measurePageBox();let A=this.removeElementScroll(u);return x&&(A=this.removeTransform(A)),CF(A),{animationId:this.root.animationId,measuredBox:u,layoutBox:A,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:x}=this.options;if(!x)return ws();const u=x.measureViewportBox(),{scroll:A}=this.root;return A&&(ch(u.x,A.offset.x),ch(u.y,A.offset.y)),u}removeElementScroll(x){const u=ws();pl(u,x);for(let A=0;A<this.path.length;A++){const k=this.path[A],{scroll:B,options:O}=k;if(k!==this.root&&B&&O.layoutScroll){if(B.isRoot){pl(u,x);const{scroll:W}=this.root;W&&(ch(u.x,-W.offset.x),ch(u.y,-W.offset.y))}ch(u.x,B.offset.x),ch(u.y,B.offset.y)}}return u}applyTransform(x,u=!1){const A=ws();pl(A,x);for(let k=0;k<this.path.length;k++){const B=this.path[k];!u&&B.options.layoutScroll&&B.scroll&&B!==B.root&&cp(A,{x:-B.scroll.offset.x,y:-B.scroll.offset.y}),wf(B.latestValues)&&cp(A,B.latestValues)}return wf(this.latestValues)&&cp(A,this.latestValues),A}removeTransform(x){const u=ws();pl(u,x);for(let A=0;A<this.path.length;A++){const k=this.path[A];if(!k.instance||!wf(k.latestValues))continue;$C(k.latestValues)&&k.updateSnapshot();const B=ws(),O=k.measurePageBox();pl(B,O),uP(u,k.latestValues,k.snapshot?k.snapshot.layoutBox:void 0,B)}return wf(this.latestValues)&&uP(u,this.latestValues),u}setTargetDelta(x){this.targetDelta=x,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(x){this.options={...this.options,...x,crossfade:x.crossfade!==void 0?x.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Io.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(x=!1){var u;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const k=!!this.resumingFrom||this!==A;if(!(x||k&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:O,layoutId:W}=this.options;if(!(!this.layout||!(O||W))){if(this.resolvedRelativeTargetAt=Io.timestamp,!this.targetDelta&&!this.relativeTarget){const ne=this.getClosestProjectingParent();ne&&ne.layout&&this.animationProgress!==1?(this.relativeParent=ne,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ws(),this.relativeTargetOrigin=ws(),kv(this.relativeTargetOrigin,this.layout.layoutBox,ne.layout.layoutBox),pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ws(),this.targetWithTransforms=ws()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),NB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pl(this.target,this.layout.layoutBox),Ik(this.target,this.targetDelta)):pl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const ne=this.getClosestProjectingParent();ne&&!!ne.resumingFrom==!!this.resumingFrom&&!ne.options.layoutScroll&&ne.target&&this.animationProgress!==1?(this.relativeParent=ne,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ws(),this.relativeTargetOrigin=ws(),kv(this.relativeTargetOrigin,this.target,ne.target),pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$C(this.parent.latestValues)||Lk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const u=this.getLead(),A=!!this.resumingFrom||this!==u;let k=!0;if((this.isProjectionDirty||!((x=this.parent)===null||x===void 0)&&x.isProjectionDirty)&&(k=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(k=!1),this.resolvedRelativeTargetAt===Io.timestamp&&(k=!1),k)return;const{layout:B,layoutId:O}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(B||O))return;pl(this.layoutCorrected,this.layout.layoutBox);const W=this.treeScale.x,ne=this.treeScale.y;MB(this.layoutCorrected,this.treeScale,this.path,A),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:me}=u;if(!me){this.projectionTransform&&(this.projectionDelta=lp(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=lp(),this.projectionDeltaWithTransform=lp());const ke=this.projectionTransform;jv(this.projectionDelta,this.layoutCorrected,me,this.latestValues),this.projectionTransform=fP(this.projectionDelta,this.treeScale),(this.projectionTransform!==ke||this.treeScale.x!==W||this.treeScale.y!==ne)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",me)),Cf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(x=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),x){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(x,u=!1){const A=this.snapshot,k=A?A.latestValues:{},B={...this.latestValues},O=lp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const W=ws(),ne=A?A.source:void 0,me=this.layout?this.layout.source:void 0,ke=ne!==me,De=this.getStack(),Ae=!De||De.members.length<=1,we=!!(ke&&!Ae&&this.options.crossfade===!0&&!this.path.some(_F));this.animationProgress=0;let fe;this.mixTargetDelta=Ve=>{const ze=Ve/1e3;yP(O.x,x.x,ze),yP(O.y,x.y,ze),this.setTargetDelta(O),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kv(W,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xF(this.relativeTarget,this.relativeTargetOrigin,W,ze),fe&&QB(this.relativeTarget,fe)&&(this.isProjectionDirty=!1),fe||(fe=ws()),pl(fe,this.relativeTarget)),ke&&(this.animationValues=B,WB(B,k,this.latestValues,ze,we,Ae)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ze},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(x){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ed(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Di.update(()=>{Fx.hasAnimatedSinceResize=!0,this.currentAnimation=oF(0,pP,{...x,onUpdate:u=>{this.mixTargetDelta(u),x.onUpdate&&x.onUpdate(u)},onComplete:()=>{x.onComplete&&x.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const x=this.getStack();x&&x.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const x=this.getLead();let{targetWithTransforms:u,target:A,layout:k,latestValues:B}=x;if(!(!u||!A||!k)){if(this!==x&&this.layout&&k&&Hk(this.options.animationType,this.layout.layoutBox,k.layoutBox)){A=this.target||ws();const O=Ba(this.layout.layoutBox.x);A.x.min=x.target.x.min,A.x.max=A.x.min+O;const W=Ba(this.layout.layoutBox.y);A.y.min=x.target.y.min,A.y.max=A.y.min+W}pl(u,A),cp(u,B),jv(this.projectionDeltaWithTransform,this.layoutCorrected,u,B)}}registerSharedNode(x,u){this.sharedNodes.has(x)||this.sharedNodes.set(x,new eF),this.sharedNodes.get(x).add(u);const k=u.options.initialPromotionConfig;u.promote({transition:k?k.transition:void 0,preserveFollowOpacity:k&&k.shouldPreserveFollowOpacity?k.shouldPreserveFollowOpacity(u):void 0})}isLead(){const x=this.getStack();return x?x.lead===this:!0}getLead(){var x;const{layoutId:u}=this.options;return u?((x=this.getStack())===null||x===void 0?void 0:x.lead)||this:this}getPrevLead(){var x;const{layoutId:u}=this.options;return u?(x=this.getStack())===null||x===void 0?void 0:x.prevLead:void 0}getStack(){const{layoutId:x}=this.options;if(x)return this.root.sharedNodes.get(x)}promote({needsReset:x,transition:u,preserveFollowOpacity:A}={}){const k=this.getStack();k&&k.promote(this,A),x&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const x=this.getStack();return x?x.relegate(this):!1}resetRotation(){const{visualElement:x}=this.options;if(!x)return;let u=!1;const{latestValues:A}=x;if((A.rotate||A.rotateX||A.rotateY||A.rotateZ)&&(u=!0),!u)return;const k={};for(let B=0;B<mP.length;B++){const O="rotate"+mP[B];A[O]&&(k[O]=A[O],x.setStaticValue(O,0))}x.render();for(const B in k)x.setStaticValue(B,k[B]);x.scheduleRender()}getProjectionStyles(x){var u,A;if(!this.instance||this.isSVG)return;if(!this.isVisible)return aF;const k={visibility:""},B=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,k.opacity="",k.pointerEvents=Bx(x==null?void 0:x.pointerEvents)||"",k.transform=B?B(this.latestValues,""):"none",k;const O=this.getLead();if(!this.projectionDelta||!this.layout||!O.target){const ke={};return this.options.layoutId&&(ke.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ke.pointerEvents=Bx(x==null?void 0:x.pointerEvents)||""),this.hasProjected&&!wf(this.latestValues)&&(ke.transform=B?B({},""):"none",this.hasProjected=!1),ke}const W=O.animationValues||O.latestValues;this.applyTransformsToTarget(),k.transform=fP(this.projectionDeltaWithTransform,this.treeScale,W),B&&(k.transform=B(W,k.transform));const{x:ne,y:me}=this.projectionDelta;k.transformOrigin=`${ne.origin*100}% ${me.origin*100}% 0`,O.animationValues?k.opacity=O===this?(A=(u=W.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&A!==void 0?A:1:this.preserveOpacity?this.latestValues.opacity:W.opacityExit:k.opacity=O===this?W.opacity!==void 0?W.opacity:"":W.opacityExit!==void 0?W.opacityExit:0;for(const ke in Gx){if(W[ke]===void 0)continue;const{correct:De,applyTo:Ae}=Gx[ke],we=k.transform==="none"?W[ke]:De(W[ke],O);if(Ae){const fe=Ae.length;for(let Ve=0;Ve<fe;Ve++)k[Ae[Ve]]=we}else k[ke]=we}return this.options.layoutId&&(k.pointerEvents=O===this?Bx(x==null?void 0:x.pointerEvents)||"":"none"),k}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(x=>{var u;return(u=x.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(gP),this.root.sharedNodes.clear()}}}function cF(l){l.updateLayout()}function uF(l){var n;const o=((n=l.resumeFrom)===null||n===void 0?void 0:n.snapshot)||l.snapshot;if(l.isLead()&&l.layout&&o&&l.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:y}=l.layout,{animationType:E}=l.options,x=o.source!==l.layout.source;E==="size"?vl(O=>{const W=x?o.measuredBox[O]:o.layoutBox[O],ne=Ba(W);W.min=d[O].min,W.max=W.min+ne}):Hk(E,o.layoutBox,d)&&vl(O=>{const W=x?o.measuredBox[O]:o.layoutBox[O],ne=Ba(d[O]);W.max=W.min+ne,l.relativeTarget&&!l.currentAnimation&&(l.isProjectionDirty=!0,l.relativeTarget[O].max=l.relativeTarget[O].min+ne)});const u=lp();jv(u,d,o.layoutBox);const A=lp();x?jv(A,l.applyTransform(y,!0),o.measuredBox):jv(A,d,o.layoutBox);const k=!Uk(u);let B=!1;if(!l.resumeFrom){const O=l.getClosestProjectingParent();if(O&&!O.resumeFrom){const{snapshot:W,layout:ne}=O;if(W&&ne){const me=ws();kv(me,o.layoutBox,W.layoutBox);const ke=ws();kv(ke,d,ne.layoutBox),$k(me,ke)||(B=!0),O.options.layoutRoot&&(l.relativeTarget=ke,l.relativeTargetOrigin=me,l.relativeParent=O)}}}l.notifyListeners("didUpdate",{layout:d,snapshot:o,delta:A,layoutDelta:u,hasLayoutChanged:k,hasRelativeTargetChanged:B})}else if(l.isLead()){const{onExitComplete:d}=l.options;d&&d()}l.options.transition=void 0}function dF(l){Cf.totalNodes++,l.parent&&(l.isProjecting()||(l.isProjectionDirty=l.parent.isProjectionDirty),l.isSharedProjectionDirty||(l.isSharedProjectionDirty=!!(l.isProjectionDirty||l.parent.isProjectionDirty||l.parent.isSharedProjectionDirty)),l.isTransformDirty||(l.isTransformDirty=l.parent.isTransformDirty))}function hF(l){l.isProjectionDirty=l.isSharedProjectionDirty=l.isTransformDirty=!1}function fF(l){l.clearSnapshot()}function gP(l){l.clearMeasurements()}function mF(l){l.isLayoutDirty=!1}function pF(l){const{visualElement:n}=l.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),l.resetTransform()}function vP(l){l.finishAnimation(),l.targetDelta=l.relativeTarget=l.target=void 0,l.isProjectionDirty=!0}function gF(l){l.resolveTargetDelta()}function vF(l){l.calcProjection()}function yF(l){l.resetRotation()}function bF(l){l.removeLeadSnapshot()}function yP(l,n,o){l.translate=Wi(n.translate,0,o),l.scale=Wi(n.scale,1,o),l.origin=n.origin,l.originPoint=n.originPoint}function bP(l,n,o,d){l.min=Wi(n.min,o.min,d),l.max=Wi(n.max,o.max,d)}function xF(l,n,o,d){bP(l.x,n.x,o.x,d),bP(l.y,n.y,o.y,d)}function _F(l){return l.animationValues&&l.animationValues.opacityExit!==void 0}const wF={duration:.45,ease:[.4,0,.1,1]},xP=l=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(l),_P=xP("applewebkit/")&&!xP("chrome/")?Math.round:rs;function wP(l){l.min=_P(l.min),l.max=_P(l.max)}function CF(l){wP(l.x),wP(l.y)}function Hk(l,n,o){return l==="position"||l==="preserve-aspect"&&!FC(hP(n),hP(o),.2)}const NF=qk({attachResizeListener:(l,n)=>Yu(l,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lC={current:void 0},Gk=qk({measureScroll:l=>({x:l.scrollLeft,y:l.scrollTop}),defaultParent:()=>{if(!lC.current){const l=new NF({});l.mount(window),l.setOptions({layoutScroll:!0}),lC.current=l}return lC.current},resetTransform:(l,n)=>{l.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:l=>window.getComputedStyle(l).position==="fixed"}),SF={pan:{Feature:FB},drag:{Feature:BB,ProjectionNode:Gk,MeasureLayout:Ok}},EF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function DF(l){const n=EF.exec(l);if(!n)return[,];const[,o,d]=n;return[o,d]}const TF=4;function HC(l,n,o=1){bl(o<=TF,`Max CSS variable fallback depth detected in property "${l}". This may indicate a circular fallback dependency.`);const[d,y]=DF(l);if(!d)return;const E=window.getComputedStyle(n).getPropertyValue(d);if(E){const x=E.trim();return Tk(x)?parseFloat(x):x}else return RC(y)?HC(y,n,o+1):y}function PF(l,{...n},o){const d=l.current;if(!(d instanceof Element))return{target:n,transitionEnd:o};o&&(o={...o}),l.values.forEach(y=>{const E=y.get();if(!RC(E))return;const x=HC(E,d);x&&y.set(x)});for(const y in n){const E=n[y];if(!RC(E))continue;const x=HC(E,d);x&&(n[y]=x,o||(o={}),o[y]===void 0&&(o[y]=E))}return{target:n,transitionEnd:o}}const jF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Wk=l=>jF.has(l),kF=l=>Object.keys(l).some(Wk),jx=l=>l===kf||l===Vn,CP=(l,n)=>parseFloat(l.split(", ")[n]),NP=(l,n)=>(o,{transform:d})=>{if(d==="none"||!d)return 0;const y=d.match(/^matrix3d\((.+)\)$/);if(y)return CP(y[1],n);{const E=d.match(/^matrix\((.+)\)$/);return E?CP(E[1],l):0}},AF=new Set(["x","y","z"]),MF=Xv.filter(l=>!AF.has(l));function RF(l){const n=[];return MF.forEach(o=>{const d=l.getValue(o);d!==void 0&&(n.push([o,d.get()]),d.set(o.startsWith("scale")?1:0))}),n.length&&l.render(),n}const pp={width:({x:l},{paddingLeft:n="0",paddingRight:o="0"})=>l.max-l.min-parseFloat(n)-parseFloat(o),height:({y:l},{paddingTop:n="0",paddingBottom:o="0"})=>l.max-l.min-parseFloat(n)-parseFloat(o),top:(l,{top:n})=>parseFloat(n),left:(l,{left:n})=>parseFloat(n),bottom:({y:l},{top:n})=>parseFloat(n)+(l.max-l.min),right:({x:l},{left:n})=>parseFloat(n)+(l.max-l.min),x:NP(4,13),y:NP(5,14)};pp.translateX=pp.x;pp.translateY=pp.y;const LF=(l,n,o)=>{const d=n.measureViewportBox(),y=n.current,E=getComputedStyle(y),{display:x}=E,u={};x==="none"&&n.setStaticValue("display",l.display||"block"),o.forEach(k=>{u[k]=pp[k](d,E)}),n.render();const A=n.measureViewportBox();return o.forEach(k=>{const B=n.getValue(k);B&&B.jump(u[k]),l[k]=pp[k](A,E)}),l},IF=(l,n,o={},d={})=>{n={...n},d={...d};const y=Object.keys(n).filter(Wk);let E=[],x=!1;const u=[];if(y.forEach(A=>{const k=l.getValue(A);if(!l.hasValue(A))return;let B=o[A],O=xv(B);const W=n[A];let ne;if(Zx(W)){const me=W.length,ke=W[0]===null?1:0;B=W[ke],O=xv(B);for(let De=ke;De<me&&W[De]!==null;De++)ne?bl(xv(W[De])===ne,"All keyframes must be of the same type"):(ne=xv(W[De]),bl(ne===O||jx(O)&&jx(ne),"Keyframes must be of the same dimension as the current value"))}else ne=xv(W);if(O!==ne)if(jx(O)&&jx(ne)){const me=k.get();typeof me=="string"&&k.set(parseFloat(me)),typeof W=="string"?n[A]=parseFloat(W):Array.isArray(W)&&ne===Vn&&(n[A]=W.map(parseFloat))}else O!=null&&O.transform&&(ne!=null&&ne.transform)&&(B===0||W===0)?B===0?k.set(ne.transform(B)):n[A]=O.transform(W):(x||(E=RF(l),x=!0),u.push(A),d[A]=d[A]!==void 0?d[A]:n[A],k.jump(W))}),u.length){const A=u.indexOf("height")>=0?window.pageYOffset:null,k=LF(n,l,u);return E.length&&E.forEach(([B,O])=>{l.getValue(B).set(O)}),l.render(),u0&&A!==null&&window.scrollTo({top:A}),{target:k,transitionEnd:d}}else return{target:n,transitionEnd:d}};function VF(l,n,o,d){return kF(n)?IF(l,n,o,d):{target:n,transitionEnd:d}}const zF=(l,n,o,d)=>{const y=PF(l,n,d);return n=y.target,d=y.transitionEnd,VF(l,n,o,d)},GC={current:null},Zk={current:!1};function OF(){if(Zk.current=!0,!!u0)if(window.matchMedia){const l=window.matchMedia("(prefers-reduced-motion)"),n=()=>GC.current=l.matches;l.addListener(n),n()}else GC.current=!1}function BF(l,n,o){const{willChange:d}=n;for(const y in n){const E=n[y],x=o[y];if(pa(E))l.addValue(y,E),Jx(d)&&d.add(y),PN(E.version==="10.18.0",`Attempting to mix Framer Motion versions ${E.version} with 10.18.0 may not work as expected.`);else if(pa(x))l.addValue(y,mp(E,{owner:l})),Jx(d)&&d.remove(y);else if(x!==E)if(l.hasValue(y)){const u=l.getValue(y);!u.hasAnimated&&u.set(E)}else{const u=l.getStaticValue(y);l.addValue(y,mp(u!==void 0?u:E,{owner:l}))}}for(const y in o)n[y]===void 0&&l.removeValue(y);return n}const SP=new WeakMap,Kk=Object.keys(Bv),FF=Kk.length,EP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],UF=dN.length;class $F{constructor({parent:n,props:o,presenceContext:d,reducedMotionConfig:y,visualState:E},x={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Di.render(this.render,!1,!0);const{latestValues:u,renderState:A}=E;this.latestValues=u,this.baseTarget={...u},this.initialValues=o.initial?{...u}:{},this.renderState=A,this.parent=n,this.props=o,this.presenceContext=d,this.depth=n?n.depth+1:0,this.reducedMotionConfig=y,this.options=x,this.isControllingVariants=h0(o),this.isVariantNode=Mj(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:k,...B}=this.scrapeMotionValuesFromProps(o,{});for(const O in B){const W=B[O];u[O]!==void 0&&pa(W)&&(W.set(u[O],!1),Jx(k)&&k.add(O))}}scrapeMotionValuesFromProps(n,o){return{}}mount(n){this.current=n,SP.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,d)=>this.bindToMotionValue(d,o)),Zk.current||OF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:GC.current,PN(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){SP.delete(this.current),this.projection&&this.projection.unmount(),ed(this.notifyUpdate),ed(this.render),this.valueSubscriptions.forEach(n=>n()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features)this.features[n].unmount();this.current=null}bindToMotionValue(n,o){const d=jf.has(n),y=o.on("change",x=>{this.latestValues[n]=x,this.props.onUpdate&&Di.update(this.notifyUpdate,!1,!0),d&&this.projection&&(this.projection.isTransformDirty=!0)}),E=o.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(n,()=>{y(),E()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}loadFeatures({children:n,...o},d,y,E){let x,u;if(y&&d){const A="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";o.ignoreStrict?ey(!1,A):bl(!1,A)}for(let A=0;A<FF;A++){const k=Kk[A],{isEnabled:B,Feature:O,ProjectionNode:W,MeasureLayout:ne}=Bv[k];W&&(x=W),B(o)&&(!this.features[k]&&O&&(this.features[k]=new O(this)),ne&&(u=ne))}if((this.type==="html"||this.type==="svg")&&!this.projection&&x){this.projection=new x(this.latestValues,this.parent&&this.parent.projection);const{layoutId:A,layout:k,drag:B,dragConstraints:O,layoutScroll:W,layoutRoot:ne}=o;this.projection.setOptions({layoutId:A,layout:k,alwaysMeasureLayout:!!B||O&&op(O),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof k=="string"?k:"both",initialPromotionConfig:E,layoutScroll:W,layoutRoot:ne})}return u}updateFeatures(){for(const n in this.features){const o=this.features[n];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ws()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,o){this.latestValues[n]=o}makeTargetAnimatable(n,o=!0){return this.makeTargetAnimatableFromInstance(n,this.props,o)}update(n,o){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let d=0;d<EP.length;d++){const y=EP[d];this.propEventSubscriptions[y]&&(this.propEventSubscriptions[y](),delete this.propEventSubscriptions[y]);const E=n["on"+y];E&&(this.propEventSubscriptions[y]=this.on(y,E))}this.prevMotionValues=BF(this,this.scrapeMotionValuesFromProps(n,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(n=!1){if(n)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const d=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(d.initial=this.props.initial),d}const o={};for(let d=0;d<UF;d++){const y=dN[d],E=this.props[y];(Ov(E)||E===!1)&&(o[y]=E)}return o}addVariantChild(n){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(n),()=>o.variantChildren.delete(n)}addValue(n,o){o!==this.values.get(n)&&(this.removeValue(n),this.bindToMotionValue(n,o)),this.values.set(n,o),this.latestValues[n]=o.get()}removeValue(n){this.values.delete(n);const o=this.valueSubscriptions.get(n);o&&(o(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,o){if(this.props.values&&this.props.values[n])return this.props.values[n];let d=this.values.get(n);return d===void 0&&o!==void 0&&(d=mp(o,{owner:this}),this.addValue(n,d)),d}readValue(n){var o;return this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(o=this.getBaseTargetFromProps(this.props,n))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,n,this.options)}setBaseTarget(n,o){this.baseTarget[n]=o}getBaseTarget(n){var o;const{initial:d}=this.props,y=typeof d=="string"||typeof d=="object"?(o=bN(this.props,d))===null||o===void 0?void 0:o[n]:void 0;if(d&&y!==void 0)return y;const E=this.getBaseTargetFromProps(this.props,n);return E!==void 0&&!pa(E)?E:this.initialValues[n]!==void 0&&y===void 0?void 0:this.baseTarget[n]}on(n,o){return this.events[n]||(this.events[n]=new TN),this.events[n].add(o)}notify(n,...o){this.events[n]&&this.events[n].notify(...o)}}class Yk extends $F{sortInstanceNodePosition(n,o){return n.compareDocumentPosition(o)&2?1:-1}getBaseTargetFromProps(n,o){return n.style?n.style[o]:void 0}removeValueFromRenderState(n,{vars:o,style:d}){delete o[n],delete d[n]}makeTargetAnimatableFromInstance({transition:n,transitionEnd:o,...d},{transformValues:y},E){let x=sB(d,n||{},this);if(y&&(o&&(o=y(o)),d&&(d=y(d)),x&&(x=y(x))),E){rB(this,d,x);const u=zF(this,d,x,o);o=u.transitionEnd,d=u.target}return{transition:n,transitionEnd:o,...d}}}function qF(l){return window.getComputedStyle(l)}class HF extends Yk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(n,o){if(jf.has(o)){const d=CN(o);return d&&d.default||0}else{const d=qF(n),y=(Vj(o)?d.getPropertyValue(o):d[o])||0;return typeof y=="string"?y.trim():y}}measureInstanceViewportBox(n,{transformPagePoint:o}){return Vk(n,o)}build(n,o,d,y){mN(n,o,d,y.transformTemplate)}scrapeMotionValuesFromProps(n,o){return yN(n,o)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;pa(n)&&(this.childSubscription=n.on("change",o=>{this.current&&(this.current.textContent=`${o}`)}))}renderInstance(n,o,d,y){$j(n,o,d,y)}}class GF extends Yk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(n,o){return n[o]}readValueFromInstance(n,o){if(jf.has(o)){const d=CN(o);return d&&d.default||0}return o=qj.has(o)?o:cN(o),n.getAttribute(o)}measureInstanceViewportBox(){return ws()}scrapeMotionValuesFromProps(n,o){return Gj(n,o)}build(n,o,d,y){gN(n,o,d,this.isSVGTag,y.transformTemplate)}renderInstance(n,o,d,y){Hj(n,o,d,y)}mount(n){this.isSVGTag=vN(n.tagName),super.mount(n)}}const WF=(l,n)=>fN(l)?new GF(n,{enableHardwareAcceleration:!1}):new HF(n,{enableHardwareAcceleration:!0}),ZF={layout:{ProjectionNode:Gk,MeasureLayout:Ok}},KF={...xB,...UO,...SF,...ZF},Qn=Xz((l,n)=>PO(l,n,KF,WF));function Xk(){const l=se.useRef(!1);return lN(()=>(l.current=!0,()=>{l.current=!1}),[]),l}function YF(){const l=Xk(),[n,o]=se.useState(0),d=se.useCallback(()=>{l.current&&o(n+1)},[n]);return[se.useCallback(()=>Di.postRender(d),[d]),n]}class XF extends se.Component{getSnapshotBeforeUpdate(n){const o=this.props.childRef.current;if(o&&n.isPresent&&!this.props.isPresent){const d=this.props.sizeRef.current;d.height=o.offsetHeight||0,d.width=o.offsetWidth||0,d.top=o.offsetTop,d.left=o.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function JF({children:l,isPresent:n}){const o=se.useId(),d=se.useRef(null),y=se.useRef({width:0,height:0,top:0,left:0});return se.useInsertionEffect(()=>{const{width:E,height:x,top:u,left:A}=y.current;if(n||!d.current||!E||!x)return;d.current.dataset.motionPopId=o;const k=document.createElement("style");return document.head.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${E}px !important;
            height: ${x}px !important;
            top: ${u}px !important;
            left: ${A}px !important;
          }
        `),()=>{document.head.removeChild(k)}},[n]),se.createElement(XF,{isPresent:n,childRef:d,sizeRef:y},se.cloneElement(l,{ref:d}))}const cC=({children:l,initial:n,isPresent:o,onExitComplete:d,custom:y,presenceAffectsLayout:E,mode:x})=>{const u=Wj(QF),A=se.useId(),k=se.useMemo(()=>({id:A,initial:n,isPresent:o,custom:y,onExitComplete:B=>{u.set(B,!0);for(const O of u.values())if(!O)return;d&&d()},register:B=>(u.set(B,!1),()=>u.delete(B))}),E?void 0:[o]);return se.useMemo(()=>{u.forEach((B,O)=>u.set(O,!1))},[o]),se.useEffect(()=>{!o&&!u.size&&d&&d()},[o]),x==="popLayout"&&(l=se.createElement(JF,{isPresent:o},l)),se.createElement(c0.Provider,{value:k},l)};function QF(){return new Map}function e6(l){return se.useEffect(()=>()=>l(),[])}const Nf=l=>l.key||"";function t6(l,n){l.forEach(o=>{const d=Nf(o);n.set(d,o)})}function n6(l){const n=[];return se.Children.forEach(l,o=>{se.isValidElement(o)&&n.push(o)}),n}const dp=({children:l,custom:n,initial:o=!0,onExitComplete:d,exitBeforeEnter:y,presenceAffectsLayout:E=!0,mode:x="sync"})=>{bl(!y,"Replace exitBeforeEnter with mode='wait'");const u=se.useContext(hN).forceRender||YF()[0],A=Xk(),k=n6(l);let B=k;const O=se.useRef(new Map).current,W=se.useRef(B),ne=se.useRef(new Map).current,me=se.useRef(!0);if(lN(()=>{me.current=!1,t6(k,ne),W.current=B}),e6(()=>{me.current=!0,ne.clear(),O.clear()}),me.current)return se.createElement(se.Fragment,null,B.map(we=>se.createElement(cC,{key:Nf(we),isPresent:!0,initial:o?void 0:!1,presenceAffectsLayout:E,mode:x},we)));B=[...B];const ke=W.current.map(Nf),De=k.map(Nf),Ae=ke.length;for(let we=0;we<Ae;we++){const fe=ke[we];De.indexOf(fe)===-1&&!O.has(fe)&&O.set(fe,void 0)}return x==="wait"&&O.size&&(B=[]),O.forEach((we,fe)=>{if(De.indexOf(fe)!==-1)return;const Ve=ne.get(fe);if(!Ve)return;const ze=ke.indexOf(fe);let Je=we;if(!Je){const Ye=()=>{O.delete(fe);const ot=Array.from(ne.keys()).filter(wt=>!De.includes(wt));if(ot.forEach(wt=>ne.delete(wt)),W.current=k.filter(wt=>{const gt=Nf(wt);return gt===fe||ot.includes(gt)}),!O.size){if(A.current===!1)return;u(),d&&d()}};Je=se.createElement(cC,{key:Nf(Ve),isPresent:!1,onExitComplete:Ye,custom:n,presenceAffectsLayout:E,mode:x},Ve),O.set(fe,Je)}B.splice(ze,0,Je)}),B=B.map(we=>{const fe=we.key;return O.has(fe)?we:se.createElement(cC,{key:Nf(we),isPresent:!0,presenceAffectsLayout:E,mode:x},we)}),x==="wait"&&B.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`),se.createElement(se.Fragment,null,O.size?B:B.map(we=>se.cloneElement(we)))},Jk=se.createContext(void 0),g0=()=>{const l=se.useContext(Jk);if(!l)throw new Error("useTransition must be used within a TransitionProvider");return l},r6=({children:l})=>{const[n,o]=se.useState("default"),{pathname:d}=Tf();se.useEffect(()=>{d==="/"&&(d.includes("login")||d.includes("admin-login")||d.includes("driver-login"))?o("homepage-to-login"):d==="/"&&(d.includes("student")||d.includes("student-map"))?o("homepage-to-map"):(d.includes("login")||d.includes("admin-login")||d.includes("driver-login"))&&(d.includes("dashboard")||d.includes("admin")||d.includes("driver-dashboard"))?o("login-to-dashboard"):o("default")},[d]);const y=E=>{o(E)};return _.jsxDEV(Jk.Provider,{value:{currentTransition:n,setTransition:y},children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:71,columnNumber:5},void 0)},i6=({children:l,isVisible:n})=>_.jsxDEV(Qn.div,{initial:{opacity:0,y:50},animate:{opacity:n?1:0,y:n?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),s6=({children:l,isVisible:n})=>_.jsxDEV(Qn.div,{initial:{opacity:0,scale:.8},animate:{opacity:n?1:0,scale:n?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:_.jsxDEV(Qn.div,{initial:{opacity:0,y:100},animate:{opacity:n?1:0,y:n?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),o6=({children:l,isVisible:n})=>_.jsxDEV(Qn.div,{initial:{opacity:0,scale:.9},animate:{opacity:n?1:0,scale:n?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:_.jsxDEV(Qn.div,{initial:{opacity:0,y:50},animate:{opacity:n?1:0,y:n?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),a6=({children:l})=>{const{currentTransition:n}=g0(),o=()=>{switch(n){case"homepage-to-login":return _.jsxDEV(i6,{isVisible:!0,children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return _.jsxDEV(s6,{isVisible:!0,children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return _.jsxDEV(o6,{isVisible:!0,children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return l}};return _.jsxDEV(_.Fragment,{children:o()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},l6=()=>{const l=Gv(),{setTransition:n}=g0(),[o,d]=se.useState(!1),[y,E]=se.useState(null),[x,u]=se.useState({email:"",password:""}),[A,k]=se.useState(null),[B,O]=se.useState(!1),[W,ne]=se.useState(!1);se.useEffect(()=>{const Ae=()=>{ne(window.innerWidth<768)};return Ae(),window.addEventListener("resize",Ae),()=>window.removeEventListener("resize",Ae)},[]),se.useEffect(()=>{const{data:{subscription:Ae}}=si.auth.onAuthStateChange(async(we,fe)=>{we==="SIGNED_IN"&&fe?await ke(fe.access_token):we==="SIGNED_OUT"&&(d(!1),E(null),De())});return()=>Ae.unsubscribe()},[]);const me=async Ae=>{Ae.preventDefault(),O(!0),k(null);try{const{data:we,error:fe}=await si.auth.signInWithPassword({email:x.email,password:x.password});if(fe){console.error("❌ Login error:",fe),k(fe.message);return}we.user&&we.session?(console.log("✅ Login successful:",we.user.email),await ke(we.session.access_token),u({email:"",password:""})):k("Login failed - no user data received")}catch(we){console.error("❌ Login error:",we),k("An unexpected error occurred during login")}finally{O(!1)}},ke=async Ae=>{var we,fe,Ve;try{console.log("🔌 Driver: Connecting to WebSocket..."),await Pn.connect();let ze=0;const Je=10;for(;!Pn.isConnected()&&ze<Je;)console.log(`⏳ Waiting for WebSocket connection... (attempt ${ze+1}/${Je})`),await new Promise(gt=>setTimeout(gt,1500)),ze++;if(!Pn.isConnected())throw console.error("❌ WebSocket connection failed after all attempts"),new Error("Failed to establish WebSocket connection. Please check your internet connection and try again.");if(console.log("✅ WebSocket connection established"),(we=Pn.socket)==null||we.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server")}),(fe=Pn.socket)==null||fe.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server")}),(Ve=Pn.socket)==null||Ve.on("error",gt=>{console.error("❌ Driver: Socket error:",gt),k(gt.message||"Socket error occurred")}),await new Promise(gt=>setTimeout(gt,500)),!Pn.isConnected())throw new Error("WebSocket connection failed to establish");const Ye=async gt=>{console.log("✅ Driver: Authentication successful:",gt);try{const sn={driver_id:gt.driverId,bus_id:gt.busId,bus_number:gt.busInfo.bus_number,route_id:gt.busInfo.route_id,route_name:gt.busInfo.route_name,driver_name:gt.busInfo.driver_name};console.log("💾 Storing driver assignment:",sn);const st=await Fr.storeDriverBusAssignment(sn);if(console.log("💾 Assignment stored result:",st),!st){console.error("❌ Failed to store driver assignment in database"),k("Failed to store authentication data");return}console.log("✅ Setting authentication state..."),d(!0),E(gt.busInfo),n("login-to-dashboard"),console.log("🚀 Driver: Navigating to dashboard immediately..."),l("/driver-dashboard"),console.log("✅ Navigation initiated successfully")}catch(sn){console.error("❌ Error storing authentication data:",sn),k("Failed to complete authentication")}},ot=gt=>{console.error("❌ Driver: Authentication failed:",gt),k("Authentication failed: "+(gt.message||"Unknown error"))},wt=setTimeout(()=>{var gt,sn;console.error("❌ Driver: Authentication timeout"),k("Authentication timeout - please try again"),(gt=Pn.socket)==null||gt.off("driver:authenticated",Ye),(sn=Pn.socket)==null||sn.off("driver:authentication_failed",ot)},6e4);if(console.log("🔐 Driver: Sending authentication request..."),!Ae)throw new Error("No authentication token available");Pn.authenticateAsDriver(Ae,{onSuccess:gt=>{clearTimeout(wt),Ye(gt)},onFailure:gt=>{clearTimeout(wt),ot(gt)},onError:gt=>{clearTimeout(wt),console.error("❌ Driver: Authentication error:",gt),k("Authentication error: "+(gt.message||"Unknown error"))}}),console.log("📤 Authentication request sent, waiting for response...")}catch(ze){console.error("❌ Driver: Authentication error:",ze),k("Failed to authenticate with server")}},De=()=>{Pn.disconnect()};return o&&y?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV(Qn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:262,columnNumber:11},void 0),_.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:263,columnNumber:11},void 0),_.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:257,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:256,columnNumber:7},void 0):_.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[_.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:_.jsxDEV(Qn.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:_.jsxDEV(Qn.div,{whileHover:W?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:289,columnNumber:13},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:292,columnNumber:13},void 0),_.jsxDEV("div",{className:"relative z-10 p-8",children:[_.jsxDEV(Qn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[_.jsxDEV("div",{className:"text-6xl mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"1"},children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:303,columnNumber:17},void 0),_.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:304,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:307,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:297,columnNumber:15},void 0),_.jsxDEV(dp,{children:A&&_.jsxDEV(Qn.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:_.jsxDEV("p",{className:"text-red-200 text-sm",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:321,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:315,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:313,columnNumber:15},void 0),_.jsxDEV(Qn.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:me,className:"space-y-6",children:[_.jsxDEV(Qn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:340,columnNumber:19},void 0),_.jsxDEV("input",{id:"email",type:"email",required:!0,value:x.email,onChange:Ae=>u(we=>({...we,email:Ae.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:335,columnNumber:17},void 0),_.jsxDEV(Qn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:368,columnNumber:19},void 0),_.jsxDEV("input",{id:"password",type:"password",required:!0,value:x.password,onChange:Ae=>u(we=>({...we,password:Ae.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:374,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:363,columnNumber:17},void 0),_.jsxDEV(Qn.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:W?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:B,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:B?_.jsxDEV("div",{className:"flex items-center justify-center",children:[_.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:403,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:402,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:391,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:327,columnNumber:15},void 0),_.jsxDEV(Qn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:_.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:419,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:413,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:295,columnNumber:13},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:426,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:283,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:276,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:275,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(W?8:15)].map((Ae,we)=>_.jsxDEV(Qn.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},we,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:434,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:432,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:273,columnNumber:5},void 0)},c6=()=>{var zt;const l=Gv(),[n,o]=se.useState(!1),[d,y]=se.useState(null),[E,x]=se.useState(null),[u,A]=se.useState(null),[k,B]=se.useState(null),[O,W]=se.useState(0),[ne,me]=se.useState(!1),[ke,De]=se.useState("disconnected");se.useEffect(()=>{console.log("🚌 BusInfo state changed:",d)},[d]);const Ae=se.useRef(null),we=se.useRef(null),fe=se.useRef(null),Ve=se.useRef(null),ze=se.useRef(null),Je=se.useRef(!1),Ye=se.useRef(null),ot=se.useRef({});se.useEffect(()=>{if(Je.current){console.log("🔄 Driver Dashboard: Already initialized, skipping...");return}console.log("🚀 Driver Dashboard: Starting initialization..."),Je.current=!0;const Wt=()=>{Pn.isConnected()?De("connected"):Pn.getConnectionState()==="connecting"||Pn.getConnectionState()==="reconnecting"?De("connecting"):De("disconnected")};Wt();const dn=setInterval(Wt,2e3);return(async()=>{var Rt,Ht,ct,Ie,bt,hn,Sn,Ft;try{console.log("🚀 Driver Dashboard: Component mounted, starting initialization...");const{data:{session:Bt}}=await si.auth.getSession();if(console.log("🔑 Session check:",Bt?"Found":"Not found",(Rt=Bt==null?void 0:Bt.user)==null?void 0:Rt.email),Bt!=null&&Bt.user){console.log("🔌 Driver Dashboard: Initializing...");const fn=Fr.getCurrentDriverAssignment();if(console.log("🔍 Checking for existing assignment:",fn?"Found":"Not found"),fn)console.log("✅ Driver Dashboard: Using existing assignment from DriverLogin:",fn),y({bus_id:fn.bus_id,bus_number:fn.bus_number,route_id:fn.route_id,route_name:fn.route_name,driver_id:fn.driver_id,driver_name:fn.driver_name}),me(!0),console.log("✅ Bus info and authentication state set from existing assignment");else{console.log("🔍 No existing assignment, validating driver session...");const{isValid:Un,assignment:er}=await Fr.validateDriverSession();if(console.log("🔍 Validation result:",{isValid:Un,assignment:er?"Found":"Not found"}),Un&&er)console.log("✅ Driver Dashboard: Valid session found with assignment:",er),y({bus_id:er.bus_id,bus_number:er.bus_number,route_id:er.route_id,route_name:er.route_name,driver_id:er.driver_id,driver_name:er.driver_name}),me(!0),console.log("✅ Bus info and authentication state set from validation");else{console.log("❌ Driver Dashboard: Invalid session or no assignment found");return}}if(Pn.isConnected())console.log("✅ WebSocket already connected");else{console.log("🔌 Driver Dashboard: Connecting to WebSocket...");try{await Pn.connect()}catch(Un){console.warn("⚠️ WebSocket connection failed, will use API fallback:",Un)}}(Ht=Pn.socket)==null||Ht.on("connect",()=>{console.log("🔌 Driver Dashboard: Connected to WebSocket server")}),(ct=Pn.socket)==null||ct.on("disconnect",()=>{console.log("🔌 Driver Dashboard: Disconnected from WebSocket server")}),(Ie=Pn.socket)==null||Ie.on("error",Un=>{console.error("❌ Driver Dashboard: Socket error:",Un)}),(bt=Pn.socket)==null||bt.on("driver:authenticated",Un=>{console.log("✅ Driver Dashboard: Authentication successful:",Un),console.log("🚌 Bus Info received:",Un.busInfo),y(Un.busInfo),me(!0)}),(hn=Pn.socket)==null||hn.on("driver:authentication_failed",Un=>{console.error("❌ Driver Dashboard: Authentication failed:",Un)}),(Sn=Pn.socket)==null||Sn.on("driver:locationConfirmed",()=>{console.log("📍 Driver Dashboard: Location confirmed"),B(new Date().toLocaleTimeString()),W(Un=>Un+1)}),Ae.current=Pn.socket;const Bn=Fr.getCurrentDriverAssignment();Bn&&((Ft=Pn.socket)==null||Ft.emit("driver:connected",{driverId:Bn.driver_id,busId:Bn.bus_id,timestamp:new Date().toISOString()}));let rn=0;const Fn=3,Ur=5e3;Ye.current=setInterval(()=>{rn++,!d&&!ne?(console.log(`🔄 Fallback attempt ${rn}/${Fn}: Fetching bus info from API...`),Nt(Bt.user.id).then(Un=>{Un?(console.log("✅ Fallback API call successful"),Ye.current&&(clearInterval(Ye.current),Ye.current=null)):rn>=Fn&&(console.log("❌ Max fallback attempts reached, stopping retries"),Ye.current&&(clearInterval(Ye.current),Ye.current=null))})):(console.log("✅ Bus info already set, canceling fallback timer"),Ye.current&&(clearInterval(Ye.current),Ye.current=null))},Ur)}else console.log("❌ Driver Dashboard: No session found, redirecting to login"),l("/driver-login")}catch(Bt){console.error("❌ Driver Dashboard: Initialization error:",Bt),console.error("Failed to initialize driver data")}})(),()=>{clearInterval(dn),Ye.current&&(clearInterval(Ye.current),Ye.current=null),Je.current=!1,Pn.socket&&(Pn.socket.off("connect"),Pn.socket.off("disconnect"),Pn.socket.off("error"),Pn.socket.off("driver:authenticated"),Pn.socket.off("driver:authentication_failed"),Pn.socket.off("driver:locationConfirmed")),console.log("🧹 Driver Dashboard: Cleanup completed")}},[l]),se.useEffect(()=>(Ve.current&&!fe.current&&(console.log("🗺️ Initializing map..."),wt()),()=>{console.log("🗺️ Cleaning up map..."),vt()}),[]);const wt=()=>{if(!Ve.current)return;const Wt=23.0225,dn=72.5714;fe.current&&(fe.current.remove(),fe.current=null);try{fe.current=new ho.Map({container:Ve.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[dn,Wt],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,antialias:!0,failIfMajorPerformanceCaveat:!1,maxPitch:60,localIdeographFontFamily:"sans-serif",renderWorldCopies:!0});const St=bt=>{console.warn("⚠️ WebGL context lost, attempting to restore..."),bt instanceof WebGLContextEvent&&bt.preventDefault(),setTimeout(()=>{try{fe.current&&(fe.current.resize(),console.log("✅ Attempted map context restoration"))}catch(hn){console.error("❌ Failed to restore map context:",hn)}},1e3)};ot.current.webglcontextlost=St,fe.current.on("webglcontextlost",St);const Rt=()=>{if(console.log("✅ WebGL context restored"),fe.current&&ze.current){fe.current.resize();const bt=ze.current.getLngLat();ze.current.setLngLat(bt)}};ot.current.webglcontextrestored=Rt,fe.current.on("webglcontextrestored",Rt);const Ht=document.createElement("div");Ht.className="driver-marker",Ht.innerHTML=`
        <div class="driver-marker-content">
          <div style="font-size: 16px;">🚌</div>
        </div>
      `,ze.current=new ho.Marker({element:Ht,anchor:"center"}).setLngLat([dn,Wt]).addTo(fe.current);const ct=bt=>{console.error("❌ Map error:",bt)};ot.current.error=ct,fe.current.on("error",ct);const Ie=()=>{console.log("✅ Map loaded successfully")};ot.current.load=Ie,fe.current.on("load",Ie)}catch(St){console.error("❌ Error initializing map:",St);try{if(console.log("🔄 Attempting fallback map initialization..."),Ve.current&&!fe.current){fe.current=new ho.Map({container:Ve.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[dn,Wt],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0});const Rt=document.createElement("div");Rt.className="driver-marker",Rt.innerHTML="<div>🚌</div>",ze.current=new ho.Marker({element:Rt}).setLngLat([dn,Wt]).addTo(fe.current),console.log("✅ Fallback map initialization successful")}}catch(Rt){console.error("❌ Fallback map initialization failed:",Rt)}}},gt=(Wt,dn)=>{if(!fe.current||!ze.current)return;const St=[dn,Wt];ze.current.setLngLat(St),fe.current.flyTo({center:St,duration:1e3})},sn=async()=>{if(!navigator.geolocation){A("Geolocation is not supported by this browser");return}const dn={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{we.current=navigator.geolocation.watchPosition(St=>{if(x(St),A(null),fe.current&&ze.current&&gt(St.coords.latitude,St.coords.longitude),Pn.socket&&Pn.isConnected()){const Rt={driverId:(d==null?void 0:d.driver_id)||"",latitude:St.coords.latitude,longitude:St.coords.longitude,timestamp:new Date().toISOString(),speed:St.coords.speed||void 0,heading:St.coords.heading||void 0};Pn.socket.emit("driver:locationUpdate",Rt),B(new Date().toLocaleTimeString()),W(Ht=>Ht+1)}},St=>{console.error("❌ Location error:",St);let Rt="";switch(St.code){case St.PERMISSION_DENIED:Rt="Location permission denied. Please enable location access.";break;case St.POSITION_UNAVAILABLE:Rt="Location information is unavailable.";break;case St.TIMEOUT:Rt="Location request timed out.";break;default:Rt="An unknown error occurred."}A(Rt),o(!1)},dn),o(!0)}catch(St){console.error("❌ Error starting location tracking:",St),A("Failed to start location tracking")}},st=()=>{we.current&&(navigator.geolocation.clearWatch(we.current),we.current=null),o(!1)},vt=()=>{try{fe.current&&(ot.current.webglcontextlost&&fe.current.off("webglcontextlost",ot.current.webglcontextlost),ot.current.webglcontextrestored&&fe.current.off("webglcontextrestored",ot.current.webglcontextrestored),ot.current.error&&fe.current.off("error",ot.current.error),ot.current.load&&fe.current.off("load",ot.current.load),ot.current={},fe.current.remove(),fe.current=null),ze.current=null,console.log("🗺️ Map cleanup completed")}catch(Wt){console.error("❌ Error during map cleanup:",Wt)}},Nt=async Wt=>{var dn;try{console.log("🔄 Fetching bus info for user:",Wt);const{data:{session:St}}=await si.auth.getSession();if(!(St!=null&&St.access_token))return console.error("❌ No access token available for API call"),!1;const Rt=await fetch(`${fo.api.url}/buses?driver_id=${Wt}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${St.access_token}`},signal:AbortSignal.timeout(1e4)});if(Rt.ok){const Ht=await Rt.json();if(console.log("✅ Bus info from API:",Ht),Ht.success&&Ht.data&&Array.isArray(Ht.data)&&Ht.data.length>0){const ct=Ht.data[0];return y({bus_id:ct.bus_id||ct.id,bus_number:ct.bus_number||ct.number_plate||ct.code,route_id:ct.route_id||"",route_name:ct.route_name||"Route TBD",driver_id:ct.driver_id||ct.assigned_driver_id,driver_name:ct.driver_name||ct.driver_full_name||"Driver TBD"}),me(!0),!0}else return(dn=Ht.data)!=null&&dn.busInfo?(y(Ht.data.busInfo),me(!0),!0):Ht.busInfo?(y(Ht.busInfo),me(!0),!0):(console.error("❌ No bus info in response:",Ht),!1)}else{const Ht=await Rt.text();return console.error("❌ Failed to fetch bus info from API:",Rt.status,Ht),console.error(`API Error: ${Rt.status} - ${Ht}`),!1}}catch(St){return console.error("❌ Error fetching bus info from API:",St),!1}},on=()=>{Pn.disconnect(),Ae.current=null},yn=async()=>{try{st(),on(),vt(),await si.auth.signOut()}catch(Wt){console.error("❌ Sign out error:",Wt)}};return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[_.jsxDEV("div",{className:"card-glass p-6 mb-6",children:_.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[_.jsxDEV("div",{className:"flex-1",children:[_.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:738,columnNumber:15},void 0),_.jsxDEV("div",{className:"space-y-1",children:[_.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:d==null?void 0:d.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:744,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:742,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[_.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:d==null?void 0:d.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:751,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:749,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:d==null?void 0:d.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:757,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:755,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:748,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:741,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:737,columnNumber:13},void 0),_.jsxDEV("div",{className:"flex gap-2",children:[_.jsxDEV("button",{onClick:async()=>{var dn;const{data:{session:Wt}}=await si.auth.getSession();(dn=Wt==null?void 0:Wt.user)!=null&&dn.id&&(console.log("🔄 Manual refresh: Fetching bus info..."),Nt(Wt.user.id))},className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:765,columnNumber:15},void 0),_.jsxDEV("button",{onClick:yn,className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:779,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:764,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:736,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:735,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${ke==="connected"?"bg-green-500":ke==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:794,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:804,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:ke==="connected"?"Connected":ke==="connecting"?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:805,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:803,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:793,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:792,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${n?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:819,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:823,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:n?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:826,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:822,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:817,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:836,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:O},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:837,columnNumber:15},void 0),k&&_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",k]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:839,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:835,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:834,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${u?"bg-red-500":E?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:849,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:853,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:u?"Error":E?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:854,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:852,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:848,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:847,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:790,columnNumber:9},void 0),_.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:868,columnNumber:11},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:n?_.jsxDEV("button",{onClick:st,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:894,columnNumber:15},void 0):_.jsxDEV(_.Fragment,{children:[_.jsxDEV("button",{onClick:sn,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:874,columnNumber:17},void 0),u&&_.jsxDEV("button",{onClick:()=>{A(null),sn()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:882,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:873,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:871,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:867,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:908,columnNumber:13},void 0),_.jsxDEV("div",{ref:Ve,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:911,columnNumber:13},void 0),u&&_.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[_.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:919,columnNumber:17},void 0),_.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[_.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:923,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[_.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:929,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:934,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:933,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:938,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:937,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:942,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:941,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:946,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:945,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:950,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:949,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:954,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:953,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:932,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:928,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[_.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:962,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:967,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:966,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:971,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:970,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:975,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:974,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:965,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:961,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[_.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:981,columnNumber:21},void 0),_.jsxDEV("button",{onClick:()=>{const Wt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(dn=>{const St=`✅ Location Test Successful!

Latitude: ${dn.coords.latitude}
Longitude: ${dn.coords.longitude}
Accuracy: ${dn.coords.accuracy}m
Device: ${Wt?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(St),A(null)},dn=>{const St=`❌ Location Test Failed

Error Code: ${dn.code}
Error Message: ${dn.message}
Device: ${Wt?"Mobile":"Desktop"}

Please check your location permissions.`;alert(St)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:988,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:922,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:918,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:907,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1042,columnNumber:13},void 0),E?_.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[_.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[_.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1049,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1050,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1048,columnNumber:17},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1056,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:E.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1057,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1055,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1062,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:E.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1063,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1061,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1068,columnNumber:21},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(zt=E.coords.accuracy)==null?void 0:zt.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1069,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1067,columnNumber:19},void 0),E.coords.speed&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1075,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(E.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1076,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1074,columnNumber:21},void 0),E.coords.heading&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1083,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[E.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1084,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1082,columnNumber:21},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1090,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:O},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1091,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1089,columnNumber:19},void 0),k&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1097,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-medium text-sm",children:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1096,columnNumber:21},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1106,columnNumber:21},void 0),_.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(E.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1107,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1105,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1054,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1046,columnNumber:15},void 0):_.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[_.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1115,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1116,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1119,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1114,columnNumber:15},void 0),_.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[_.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1126,columnNumber:15},void 0),_.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[_.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1130,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1133,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1134,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1137,columnNumber:17},void 0),_.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1129,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1125,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1041,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:905,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:733,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:732,columnNumber:5},void 0)};class u6{constructor(){mi(this,"buses",{});mi(this,"previousLocations",{})}calculateSpeed(n,o,d,y,E){const u=this.toRadians(d-n),A=this.toRadians(y-o),k=Math.sin(u/2)*Math.sin(u/2)+Math.cos(this.toRadians(n))*Math.cos(this.toRadians(d))*Math.sin(A/2)*Math.sin(A/2),O=6371*(2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))),W=E/(1e3*60*60),ne=O/W;return Math.round(ne*10)/10}toRadians(n){return n*(Math.PI/180)}updateBusLocation(n){var A,k;const{busId:o,latitude:d,longitude:y,timestamp:E}=n,x=this.previousLocations[o];let u;if(x){const B=new Date(E).getTime()-new Date(x.timestamp).getTime();B>0&&(u=this.calculateSpeed(x.latitude,x.longitude,d,y,B))}this.buses[o]?(this.buses[o].currentLocation={...n,speed:u||n.speed},this.buses[o].eta=(k=n.eta)==null?void 0:k.estimated_arrival_minutes):this.buses[o]={busId:o,busNumber:`Bus ${o}`,routeName:"Route TBD",driverName:"Driver TBD",currentLocation:{...n,speed:u||n.speed},eta:(A=n.eta)==null?void 0:A.estimated_arrival_minutes},this.previousLocations[o]={latitude:d,longitude:y,timestamp:E}}getBus(n){return this.buses[n]||null}getAllBuses(){return Object.values(this.buses)}getBusesByRoute(n){return Object.values(this.buses).filter(o=>o.routeName===n)}async syncBusFromAPI(n,o){try{if(!o){const d=await zv.getBusInfo(n);if(d.success&&d.data)o=d.data;else{console.error("❌ Failed to fetch bus data from API for bus:",n);return}}this.buses[n]?this.buses[n]={...this.buses[n],busNumber:o.number_plate||o.code||`Bus ${n}`,routeName:o.route_name||"Route TBD",driverName:o.driver_full_name||"Driver TBD"}:this.buses[n]={busId:n,busNumber:o.number_plate||o.code||`Bus ${n}`,routeName:o.route_name||"Route TBD",driverName:o.driver_full_name||"Driver TBD",currentLocation:{busId:n,driverId:o.assigned_driver_id||"",latitude:0,longitude:0,timestamp:new Date().toISOString()}}}catch(d){console.error("❌ Error syncing bus data from API:",d)}}async syncAllBusesFromAPI(){try{const n=await zv.getAllBuses();n.success&&n.data&&n.data.forEach(o=>{this.syncBusFromAPI(o.id,o)})}catch(n){console.error("❌ Error syncing all buses from API:",n)}}clearBuses(){this.buses={},this.previousLocations={}}getBusStats(){const n=Object.values(this.buses),o={};return n.forEach(d=>{const y=d.routeName;o[y]=(o[y]||0)+1}),{totalBuses:n.length,activeBuses:n.filter(d=>d.currentLocation).length,busesByRoute:o}}getActiveBuses(){const n=new Date(Date.now()-3e5);return Object.values(this.buses).filter(o=>new Date(o.currentLocation.timestamp)>n)}getBusLocationHistory(n){const o=this.buses[n];return o?[o.currentLocation]:[]}updateBusETA(n,o){this.buses[n]&&(this.buses[n].eta=o)}getBusesNearLocation(n,o,d=5){return Object.values(this.buses).filter(y=>{const E=y.currentLocation.latitude,x=y.currentLocation.longitude,u=6371,A=this.toRadians(E-n),k=this.toRadians(x-o),B=Math.sin(A/2)*Math.sin(A/2)+Math.cos(this.toRadians(n))*Math.cos(this.toRadians(E))*Math.sin(k/2)*Math.sin(k/2),O=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return u*O<=d})}}const uC=new u6,Av=({children:l,className:n="",variant:o="default",hover:d=!0,glow:y=!1,onClick:E,delay:x=0})=>{const u="relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable",A={default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"},k=d?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",B=y?"hover:shadow-blue-500/20 hover:shadow-2xl":"",O=E?"cursor-pointer":"";return _.jsxDEV(Qn.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:x,ease:[.4,0,.2,1]},whileHover:d?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:E?{scale:.98}:{},onClick:E,className:`
        ${u}
        ${A[o]}
        ${k}
        ${B}
        ${O}
        ${n}
      `,children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),y&&_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),_.jsxDEV("div",{className:"relative z-10 p-6 space-stable",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)},DP=({className:l=""})=>{const n=se.useRef(null),o=se.useRef(null),d=se.useRef({}),y=se.useRef(!1),E=se.useRef(new Set),[x,u]=se.useState(!1),[A,k]=se.useState(null),[B,O]=se.useState("disconnected"),[W,ne]=se.useState([]),[me,ke]=se.useState([]),[De,Ae]=se.useState("all"),[we,fe]=se.useState(!0),[Ve,ze]=se.useState({}),[Je,Ye]=se.useState(!1),[ot,wt]=se.useState(!0),[gt,sn]=se.useState(!0),st=se.useCallback(async()=>{try{console.log("🔄 Loading routes from backend API...");const Ie=await zv.getRoutes();Ie.success&&Ie.data?(console.log("✅ Routes loaded from backend:",Ie.data.length,"routes"),ke(Ie.data),Ie.data.forEach(bt=>{console.log(`📍 Route: ${bt.name} (ID: ${bt.id}) - Active: ${bt.is_active}`)})):console.error("❌ Failed to load routes:",Ie)}catch(Ie){console.error("❌ Error loading routes:",Ie)}},[]),vt=se.useCallback(()=>{o.current&&me.forEach(Ie=>{const bt=`route-${Ie.id}`;try{o.current.getLayer(bt)&&o.current.removeLayer(bt),o.current.getSource(bt)&&o.current.removeSource(bt),E.current.delete(bt)}catch(hn){console.warn(`⚠️ Error removing route ${Ie.name}:`,hn)}})},[me]),Nt=se.useCallback(()=>{!o.current||me.length===0||(console.log("🗺️ Adding routes to map:",me.length,"routes"),me.forEach((Ie,bt)=>{const hn=`route-${Ie.id}`;if(E.current.has(hn)||o.current.getSource(hn)){console.log(`🗺️ Route ${hn} already exists, skipping...`);return}try{o.current.addSource(hn,{type:"geojson",data:{type:"Feature",properties:{name:Ie.name,description:Ie.description,distance:Ie.distance_km,duration:Ie.estimated_duration_minutes},geometry:Ie.stops}}),o.current.addLayer({id:hn,type:"line",source:hn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":`hsl(${bt*137.5%360}, 70%, 50%)`,"line-width":4,"line-opacity":.8}}),console.log(`🗺️ Added route ${Ie.name} to map`),E.current.add(hn)}catch(Sn){console.warn(`⚠️ Error adding route ${Ie.name}:`,Sn)}}))},[me]),on=se.useCallback(Ie=>{if(!o.current)return;const{busId:bt,latitude:hn,longitude:Sn,speed:Ft}=Ie,Bt=uC.getBus(bt);if(Bt)if(d.current[bt])d.current[bt].setLngLat([Sn,hn]),d.current[bt].getPopup().setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${Bt.busNumber}</h3>
            <div class="bus-status ${x?"online":"offline"}">
              ${x?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${Bt.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${Bt.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${Ft?`${Ft} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(Ie.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);else{const fn=document.createElement("div");fn.className="bus-marker",fn.innerHTML=`
        <div class="bus-marker-pin">
          <div class="bus-marker-icon">🚌</div>
          <div class="bus-marker-pulse"></div>
        </div>
        <div class="bus-marker-content">
          <div class="bus-number">${Bt.busNumber}</div>
          <div class="bus-speed">${Ft?`${Ft} km/h`:"N/A"}</div>
          <div class="bus-eta">${Ie.eta?`ETA: ${Ie.eta.estimated_arrival_minutes} min`:"ETA: N/A"}</div>
        </div>
      `;const Bn=new ho.Marker({element:fn,anchor:"center"}).setLngLat([Sn,hn]).addTo(o.current),rn=new ho.Popup({offset:25,className:"bus-popup-container"}).setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${Bt.busNumber}</h3>
            <div class="bus-status ${x?"online":"offline"}">
              ${x?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${Bt.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${Bt.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${Ft?`${Ft} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(Ie.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);Bn.setPopup(rn),d.current[bt]=Bn}},[x]),yn=se.useCallback(Ie=>{d.current[Ie]&&(d.current[Ie].remove(),delete d.current[Ie])},[]),zt=se.useCallback(()=>{if(!o.current||Object.keys(Ve).length===0)return;const Ie=Object.values(Ve).map(bt=>[bt.longitude,bt.latitude]);if(Ie.length===1)o.current.flyTo({center:Ie[0],zoom:16,duration:2e3});else if(Ie.length>1){const bt=new ho.LngLatBounds;Ie.forEach(hn=>bt.extend(hn)),o.current.fitBounds(bt,{padding:50,duration:2e3})}},[Ve]),Wt=se.useCallback(Ie=>{console.log("📍 Bus location update:",Ie),ze(bt=>({...bt,[Ie.busId]:Ie})),on(Ie)},[on]),dn=se.useCallback(Ie=>{console.log("🚌 Driver connected:",Ie)},[]),St=se.useCallback(Ie=>{console.log("🚌 Driver disconnected:",Ie),yn(Ie.busId)},[yn]),Rt=se.useCallback(Ie=>{console.log("🚌 Bus arriving:",Ie)},[]);se.useEffect(()=>{if(!(y.current||!n.current))return console.log("🗺️ Initializing map..."),y.current=!0,o.current=new ho.Map({container:n.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[72.571,23.025],zoom:12,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),o.current.addControl(new ho.NavigationControl,"top-right"),o.current.once("load",()=>{console.log("🗺️ Map loaded successfully"),fe(!1),st()}),o.current.on("error",Ie=>{console.error("❌ Map error:",Ie)}),()=>{o.current&&(o.current.remove(),o.current=null,y.current=!1,E.current.clear(),d.current={})}},[st]),se.useEffect(()=>{let Ie,bt;const hn=async()=>{var Sn;try{k(null),O("connecting"),Pn.reset(),await Pn.connect(),u(!0),O("connected"),Pn.onBusLocationUpdate(Wt),Pn.onDriverConnected(dn),Pn.onDriverDisconnected(St),(Sn=Pn.socket)==null||Sn.emit("student:connect"),Pn.onStudentConnected(()=>{console.log("✅ Student connected to WebSocket")}),Pn.onBusArriving(Rt),bt=setInterval(()=>{!Pn.getConnectionStatus()&&B==="connected"&&(O("disconnected"),u(!1))},1e4),(async()=>{try{for(;!Fr.isInitialized();)await new Promise(Bn=>setTimeout(Bn,100));const fn=await zv.getAllBuses();if(fn.success&&fn.data){console.log("📊 Initial bus data from API:",fn.data.length,"buses"),fn.data.forEach(rn=>{const Fn=rn.bus_id||rn.id;Fn&&uC.syncBusFromAPI(Fn,rn)});const Bn=uC.getAllBuses();ne(Bn),console.log("✅ Initial buses loaded and synced:",fn.data.length)}}catch(fn){console.error("❌ Error loading initial buses:",fn)}})()}catch(Ft){console.error("❌ WebSocket connection failed:",Ft),k("Failed to connect to real-time updates"),u(!1),O("disconnected"),Ie=setTimeout(()=>{console.log("🔄 Retrying WebSocket connection..."),O("reconnecting"),hn()},5e3)}};return hn(),()=>{Ie&&clearTimeout(Ie),bt&&clearInterval(bt),Pn.disconnect()}},[Rt,Wt,dn,St]);const Ht=se.useMemo(()=>De==="all"?W:W.filter(Ie=>{const bt=me.find(hn=>hn.name===Ie.routeName);return bt&&bt.id===De}),[W,De,me]),ct=se.useMemo(()=>me.map(Ie=>({id:Ie.id,name:Ie.name,description:Ie.description})),[me]);return se.useEffect(()=>(me.length>0&&o.current&&o.current.isStyleLoaded()&&(vt(),Nt()),()=>{o.current&&vt()}),[me,Nt,vt]),_.jsxDEV("div",{className:`relative h-screen ${l}`,children:[we&&_.jsxDEV("div",{className:"loading-overlay",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:525,columnNumber:13},void 0),_.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:526,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:524,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:523,columnNumber:9},void 0),A&&_.jsxDEV("div",{className:"error-overlay",children:_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:542,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:537,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:536,columnNumber:15},void 0),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:550,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-red-700 mt-1",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:553,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:549,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:535,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:534,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:533,columnNumber:9},void 0),_.jsxDEV("div",{ref:n,className:"map-container rounded-lg"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:561,columnNumber:7},void 0),_.jsxDEV(Qn.div,{initial:{x:-400},animate:{x:Je?-350:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-4 left-4 z-30",children:[_.jsxDEV("button",{onClick:()=>Ye(!Je),className:"absolute -right-12 top-0 p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-200 z-40",children:_.jsxDEV("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${Je?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:583,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:575,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:571,columnNumber:9},void 0),_.jsxDEV(Av,{variant:"premium",glow:!0,className:"w-80 max-h-[calc(100vh-2rem)] overflow-hidden",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[_.jsxDEV("div",{className:"flex items-center space-x-3",children:[_.jsxDEV("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:599,columnNumber:15},void 0),_.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"Student Live Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:600,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:598,columnNumber:13},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded",children:"Live Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:604,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:597,columnNumber:11},void 0),_.jsxDEV("div",{className:"p-4 space-y-4 max-h-[calc(100vh-8rem)] overflow-y-auto",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-blue-50/80 rounded-lg border border-blue-200/50",children:[_.jsxDEV("div",{className:"flex items-center space-x-2",children:[_.jsxDEV("div",{className:`w-2 h-2 rounded-full ${x?"bg-green-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:614,columnNumber:17},void 0),_.jsxDEV("span",{className:"text-sm text-gray-800 font-medium",children:x?"Live Connected":"Offline"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:619,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:613,columnNumber:15},void 0),_.jsxDEV("span",{className:"text-xs text-gray-600 bg-white/70 px-2 py-1 rounded",children:[Ht.length," buses"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:623,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:612,columnNumber:13},void 0),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Route Filter"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:631,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>wt(!ot),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:_.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${ot?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:646,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:638,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:634,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:630,columnNumber:15},void 0),_.jsxDEV(dp,{children:ot&&_.jsxDEV(Qn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-3",children:[_.jsxDEV("select",{value:De,onChange:Ie=>Ae(Ie.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200",children:[_.jsxDEV("option",{value:"all",children:["All Routes (",me.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:670,columnNumber:23},void 0),ct.map(Ie=>_.jsxDEV("option",{value:Ie.id,children:Ie.name},Ie.id,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:672,columnNumber:25},void 0))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:665,columnNumber:21},void 0),_.jsxDEV("button",{onClick:zt,disabled:Ht.length===0,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 border border-blue-600 rounded-lg text-white font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["📍 Center on Buses (",Ht.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:678,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:658,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:656,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:629,columnNumber:13},void 0),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:693,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>sn(!gt),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:_.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${gt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:708,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:700,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:696,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:692,columnNumber:15},void 0),_.jsxDEV(dp,{children:gt&&_.jsxDEV(Qn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-2 max-h-64 overflow-y-auto",children:Ht.length===0?_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("div",{className:"text-gray-400 text-2xl mb-2",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:729,columnNumber:25},void 0),_.jsxDEV("p",{className:"text-gray-600 text-sm",children:"No buses tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:730,columnNumber:25},void 0),_.jsxDEV("p",{className:"text-gray-500 text-xs mt-1",children:"Check connection status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:733,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:728,columnNumber:23},void 0):Ht.map(Ie=>{const bt=Ve[Ie.busId];return _.jsxDEV(Qn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 cursor-pointer transition-all duration-200 shadow-sm",onClick:()=>{const hn=Ve[Ie.busId];if(hn&&o.current){o.current.flyTo({center:[hn.longitude,hn.latitude],zoom:16,duration:1e3});const Sn=d.current[Ie.busId];Sn&&Sn.getPopup().addTo(o.current)}},children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[_.jsxDEV("div",{className:"flex items-center space-x-2",children:[_.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:767,columnNumber:33},void 0),_.jsxDEV("span",{className:"font-medium text-sm text-gray-800",children:Ie.busNumber},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:768,columnNumber:33},void 0),_.jsxDEV("span",{className:"text-xs text-blue-600 opacity-75",children:"👆"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:771,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:766,columnNumber:31},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:Ie.eta?`${Ie.eta} min`:"ETA: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:775,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:765,columnNumber:29},void 0),_.jsxDEV("div",{className:"space-y-1",children:[_.jsxDEV("div",{className:"text-xs text-gray-600",children:["📍 Route: ",Ie.routeName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:782,columnNumber:31},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600",children:["👨‍💼 Driver: ",Ie.driverName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:785,columnNumber:31},void 0),bt&&_.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[_.jsxDEV("span",{className:"text-green-600",children:["🕐"," ",new Date(bt.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:790,columnNumber:35},void 0),_.jsxDEV("span",{className:"text-blue-600",children:bt.speed?`${bt.speed} km/h`:"Speed: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:799,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:789,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:781,columnNumber:29},void 0)]},Ie.busId,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:741,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:720,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:718,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:691,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:610,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:591,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:564,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:520,columnNumber:5},void 0)},d6=fo.api.url;class h6{async makeRequest(n,o={}){let d;try{const y=Fr.getAccessToken();if(console.log("🔑 Token check for",n,":",y?"Token exists":"No token"),!y)throw console.error("❌ No access token available for",n),new Error("No access token available");const E=new AbortController;d=setTimeout(()=>E.abort(),15e3);const x=d6||fo.api.url,u=await fetch(`${x}/admin${n}`,{...o,signal:E.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`,...o.headers}}),A=await u.json();if(d&&clearTimeout(d),!u.ok)throw u.status===429?new Error("Rate limit exceeded. Please wait a moment and try again."):u.status===401?new Error("Authentication required. Please log in again."):u.status===403?new Error("Access denied. You do not have permission for this action."):u.status===404?new Error("Resource not found."):u.status===409?new Error(A.message||"Resource already exists"):u.status>=500?new Error("Server error. Please try again later."):new Error(A.message||A.error||"Request failed");return A}catch(y){return d&&clearTimeout(d),console.error(`❌ API request failed for ${n}:`,y),{success:!1,error:y instanceof Error?y.message:"Request failed"}}}async getAnalytics(){return this.makeRequest("/analytics")}async getSystemHealth(){return this.makeRequest("/health")}async getAllBuses(){var o;console.log("🚌 Fetching all buses...");const n=await this.makeRequest("/buses");return console.log("🚌 Buses result:",n.success?`${((o=n.data)==null?void 0:o.length)||0} buses`:n.error),n}async getBusById(n){return this.makeRequest(`/buses/${n}`)}async createBus(n){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(n)})}async updateBus(n,o){return this.makeRequest(`/buses/${n}`,{method:"PUT",body:JSON.stringify(o)})}async deleteBus(n){return this.makeRequest(`/buses/${n}`,{method:"DELETE"})}async getAllDrivers(){var o;console.log("👨‍💼 Fetching all drivers...");const n=await this.makeRequest("/drivers");return console.log("👨‍💼 Drivers result:",n.success?`${((o=n.data)==null?void 0:o.length)||0} drivers`:n.error),n}async getAssignedDrivers(){var o;console.log("🚌 Fetching assigned drivers...");const n=await this.makeRequest("/assigned-drivers");return console.log("🚌 Assigned drivers result:",n.success?`${((o=n.data)==null?void 0:o.length)||0} assigned drivers`:n.error),n}async getDriverById(n){return this.makeRequest(`/drivers/${n}`)}async assignDriverToBus(n,o){return this.makeRequest(`/drivers/${n}/assign-bus`,{method:"POST",body:JSON.stringify({busId:o})})}async unassignDriverFromBus(n){return this.makeRequest(`/drivers/${n}/unassign-bus`,{method:"POST"})}async createDriver(n){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(n)})}async updateDriver(n,o){return this.makeRequest(`/drivers/${n}`,{method:"PUT",body:JSON.stringify(o)})}async deleteDriver(n){return this.makeRequest(`/drivers/${n}`,{method:"DELETE"})}async getAllRoutes(){var o;console.log("🛣️ Fetching all routes...");const n=await this.makeRequest("/routes");return console.log("🛣️ Routes result:",n.success?`${((o=n.data)==null?void 0:o.length)||0} routes`:n.error),n}async getRouteById(n){return this.makeRequest(`/routes/${n}`)}async createRoute(n){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(n)})}async updateRoute(n,o){return this.makeRequest(`/routes/${n}`,{method:"PUT",body:JSON.stringify(o)})}async deleteRoute(n){return this.makeRequest(`/routes/${n}`,{method:"DELETE"})}}const ns=new h6,kx=fo.api.url;class Ax{static async makeRequest(n,o={}){let d=Fr.getAccessToken();if(!d&&Fr.isAuthenticated()){console.log("🔄 No token found but user is authenticated, attempting to refresh session...");const x=await Fr.refreshSession();if(x.success)d=Fr.getAccessToken(),console.log("✅ Session refreshed, new token obtained");else throw console.error("❌ Failed to refresh session:",x.error),new Error("Authentication required")}const y={"Content-Type":"application/json",...d&&{Authorization:`Bearer ${d}`}},E=kx||fo.api.url;return fetch(`${E}/storage${n}`,{...o,headers:{...y,...o.headers}})}static async uploadBusImage(n,o){try{console.log("🔐 Getting access token...");const d=Fr.getAccessToken();if(!d)return console.error("❌ No access token available"),{success:!1,error:"Authentication required"};console.log("✅ Access token obtained");const y=new FormData;y.append("image",o),y.append("busId",n);const E=kx||fo.api.url;console.log("📤 Sending request to:",`${E}/storage/upload/bus-image`),console.log("📋 FormData contents:",{busId:n,fileName:o.name,fileSize:o.size,fileType:o.type});const x=await fetch(`${E}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:y});if(console.log("📥 Response status:",x.status),console.log("📥 Response headers:",Object.fromEntries(x.headers.entries())),!x.ok){const A=await x.json();return console.error("❌ Upload failed:",A),{success:!1,error:A.error||"Upload failed"}}const u=await x.json();return console.log("✅ Upload successful:",u),{success:!0,url:u.url,fileName:u.fileName}}catch(d){return console.error("❌ Upload bus image error:",d),{success:!1,error:"Network error during upload"}}}static async uploadDriverPhoto(n,o){try{const d=Fr.getAccessToken();if(!d)return{success:!1,error:"Authentication required"};const y=new FormData;y.append("photo",o),y.append("driverId",n);const E=kx||fo.api.url,x=await fetch(`${E}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:y});if(!x.ok)return{success:!1,error:(await x.json()).error||"Upload failed"};const u=await x.json();return{success:!0,url:u.url,fileName:u.fileName}}catch(d){return console.error("Upload driver photo error:",d),{success:!1,error:"Network error during upload"}}}static async uploadRouteMap(n,o){try{const d=Fr.getAccessToken();if(!d)return{success:!1,error:"Authentication required"};const y=new FormData;y.append("map",o),y.append("routeId",n);const E=kx||fo.api.url,x=await fetch(`${E}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:y});if(!x.ok)return{success:!1,error:(await x.json()).error||"Upload failed"};const u=await x.json();return{success:!0,url:u.url,fileName:u.fileName}}catch(d){return console.error("Upload route map error:",d),{success:!1,error:"Network error during upload"}}}static async getSignedUrl(n,o){try{const d=await this.makeRequest(`/signed-url/${n}/${o}`);if(!d.ok)return{success:!1,error:(await d.json()).error||"Failed to get signed URL"};const y=await d.json();return{success:!0,signedUrl:y.signedUrl,expiresIn:y.expiresIn}}catch(d){return console.error("Get signed URL error:",d),{success:!1,error:"Network error"}}}static async deleteFile(n,o,d){try{const y=await this.makeRequest(`/delete/${n}/${o}`,{method:"DELETE",body:JSON.stringify({fileUrl:d})});return y.ok?{success:!0}:{success:!1,error:(await y.json()).error||"Delete failed"}}catch(y){return console.error("Delete file error:",y),{success:!1,error:"Network error during deletion"}}}static async getFileInfo(n,o){try{const d=await this.makeRequest(`/info/${n}/${o}`);if(!d.ok)return{success:!1,hasFile:!1,error:(await d.json()).error||"Failed to get file info"};const y=await d.json();return{success:!0,hasFile:y.hasFile,url:y.url,info:y.info}}catch(d){return console.error("Get file info error:",d),{success:!1,hasFile:!1,error:"Network error"}}}static async listFiles(n){try{const o=await this.makeRequest(`/list/${n}`);return o.ok?{success:!0,files:(await o.json()).files}:{success:!1,error:(await o.json()).error||"Failed to list files"}}catch(o){return console.error("List files error:",o),{success:!1,error:"Network error"}}}static validateFile(n,o,d){return n?o.includes(n.type)?n.size>d?{isValid:!1,error:`File too large. Maximum size: ${d/(1024*1024)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${o.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(n){const o=["image/jpeg","image/jpg","image/png","image/webp"];return this.validateFile(n,o,5242880)}static validateDocument(n){const o=["application/pdf","image/jpeg","image/jpg","image/png"];return this.validateFile(n,o,10485760)}}function f6(){const[l,n]=se.useState("bus"),[o,d]=se.useState([]),[y,E]=se.useState([]),[x,u]=se.useState([]),[A,k]=se.useState(!0),[B,O]=se.useState(!1),[W,ne]=se.useState(null),[me,ke]=se.useState(""),[De,Ae]=se.useState(null),[we,fe]=se.useState(null);se.useEffect(()=>{Ve()},[]);const Ve=async()=>{k(!0),Ae(null);try{const[st,vt,Nt]=await Promise.all([ns.getAllBuses(),ns.getAllDrivers(),ns.getAllRoutes()]);if(st.success&&st.data&&d(st.data),vt.success&&vt.data){const on=new Map;vt.data.forEach(zt=>{const Wt=zt.id;if(!on.has(Wt))on.set(Wt,zt);else{const dn=on.get(Wt);(!dn.email&&zt.email||dn.email&&zt.email&&!dn.first_name&&zt.first_name)&&on.set(Wt,zt)}});const yn=Array.from(on.values());E(yn)}Nt.success&&Nt.data&&u(Nt.data)}catch(st){Ae("Failed to load data"),console.error("❌ Data loading error:",st)}finally{k(!1)}},ze=st=>{var Nt;const vt=(Nt=st.target.files)==null?void 0:Nt[0];vt&&(ne(vt),Ae(null))},Je=async()=>{if(!W||!me){Ae("Please select a file and an item");return}console.log("🚀 Starting upload...",{activeTab:l,selectedItem:me,fileName:W.name,fileSize:W.size,fileType:W.type}),O(!0),Ae(null),fe(null);try{let st;switch(l){case"bus":console.log("📤 Uploading bus image..."),st=await Ax.uploadBusImage(me,W);break;case"driver":console.log("📤 Uploading driver photo..."),st=await Ax.uploadDriverPhoto(me,W);break;case"route":console.log("📤 Uploading route map..."),st=await Ax.uploadRouteMap(me,W);break}console.log("📥 Upload result:",st),st.success?(fe("File uploaded successfully!"),ne(null),ke(""),Ve()):(Ae(st.error||"Upload failed"),console.error("❌ Upload failed:",st.error))}catch(st){Ae("Upload failed. Please try again."),console.error("❌ Upload error:",st)}finally{O(!1)}},Ye=async(st,vt)=>{if(confirm("Are you sure you want to delete this file?"))try{const Nt=await Ax.deleteFile(l,st,vt);Nt.success?(fe("File deleted successfully!"),Ve()):Ae(Nt.error||"Delete failed")}catch(Nt){Ae("Delete failed. Please try again."),console.error("❌ Delete error:",Nt)}},ot=()=>{switch(l){case"bus":return o;case"driver":return y;case"route":return x;default:return[]}},wt=st=>{switch(l){case"bus":return st.number_plate;case"driver":{const vt=st;return`${vt.first_name} ${vt.last_name}`}case"route":return st.name;default:return"Unknown"}},gt=st=>{let vt=null;switch(l){case"bus":vt=st.bus_image_url||null;break;case"driver":vt=st.profile_photo_url||null;break;case"route":vt=st.route_map_url||null;break;default:return null}return vt?vt.startsWith("http")?vt:vt.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${vt}`:vt:null},sn=()=>{switch(l){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return A?_.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),_.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):_.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),De&&_.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:_.jsxDEV("p",{className:"text-red-700",children:De},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),we&&_.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:_.jsxDEV("p",{className:"text-green-700",children:we},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),_.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(st=>_.jsxDEV("button",{onClick:()=>n(st.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===st.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:st.name},st.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),_.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",sn()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),_.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),_.jsxDEV("input",{type:"file",onChange:ze,accept:l==="route"?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),W&&_.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",W.name," (",(W.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ",l==="bus"?"Bus":l==="driver"?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),_.jsxDEV("select",{value:me,onChange:st=>ke(st.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[_.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),ot().map(st=>_.jsxDEV("option",{value:st.id||"",children:wt(st)},st.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),_.jsxDEV("div",{className:"flex items-end",children:_.jsxDEV("button",{onClick:Je,disabled:!W||!me||B,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:B?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",sn()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),ot().length===0?_.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):_.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ot().map(st=>{const vt=gt(st),Nt=wt(st);return _.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[_.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:Nt},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),vt?_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"mb-3",children:l!=="route"?_.jsxDEV("img",{src:vt,alt:Nt,className:"w-full h-32 object-cover rounded-md",onError:on=>{on.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):_.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>window.open(vt,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),_.jsxDEV("button",{onClick:()=>st.id&&Ye(st.id,vt),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!st.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),_.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:_.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},st.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const fa={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},m6=({onLocationSelect:l,onClose:n,title:o,defaultCenter:d=fa.coordinates,searchPlaceholder:y="Search for a location..."})=>{const E=Uv.useRef(Math.random().toString(36).substr(2,9)),x=se.useRef(null),u=se.useRef(null),A=se.useRef(null),[k,B]=se.useState(""),[O,W]=se.useState(null),[ne,me]=se.useState(!0),[ke,De]=se.useState(null);se.useEffect(()=>{if(!(!x.current||u.current))return console.log(`🗺️ [${E.current}] Initializing map with center:`,d),console.log(`🗺️ [${E.current}] Ganpat University coordinates:`,fa.coordinates),u.current=new ho.Map({container:x.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:fa.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),u.current.on("load",()=>{var ze;console.log("🗺️ Map loaded, adding controls and marker");try{(ze=u.current)==null||ze.addControl(new ho.NavigationControl),A.current=new ho.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(d).addTo(u.current),u.current.flyTo({center:fa.coordinates,zoom:12,duration:1e3}),W({name:fa.name,coordinates:fa.coordinates,address:fa.address}),A.current.on("dragend",()=>{var Ye;const Je=(Ye=A.current)==null?void 0:Ye.getLngLat();Je&&Ae([Je.lng,Je.lat])}),console.log(`🗺️ [${E.current}] Map centered on ${fa.name}`),me(!1)}catch(Je){console.error("❌ Error setting up map:",Je),De("Failed to initialize map"),me(!1)}}),u.current.on("error",ze=>{console.error("❌ Map error:",ze),De("Map failed to load"),me(!1)}),u.current.on("click",ze=>{var Ye;const Je=[ze.lngLat.lng,ze.lngLat.lat];(Ye=A.current)==null||Ye.setLngLat(Je),Ae(Je)}),u.current.on("webglcontextlost",()=>{console.warn("⚠️ WebGL context lost, attempting to restore...")}),u.current.on("webglcontextrestored",()=>{console.log("✅ WebGL context restored")}),()=>{if(u.current){console.log("🗺️ Cleaning up map instance");try{u.current.off("load",()=>{}),u.current.off("click",()=>{}),u.current.off("error",()=>{}),u.current.off("webglcontextlost",()=>{}),u.current.off("webglcontextrestored",()=>{}),A.current&&A.current.remove(),u.current.remove()}catch(ze){console.warn("⚠️ Error during map cleanup:",ze)}finally{u.current=null,A.current=null}}}},[d]);const Ae=async ze=>{try{const Ye=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ze[1]}&lon=${ze[0]}&zoom=18&addressdetails=1`)).json(),ot={name:Ye.display_name.split(",")[0]||"Selected Location",coordinates:ze,address:Ye.display_name};W(ot)}catch(Je){console.error("Error reverse geocoding:",Je),W({name:"Selected Location",coordinates:ze,address:`${ze[1]}, ${ze[0]}`})}},we=async()=>{var ze;if(!(!k.trim()||!u.current))try{console.log("🔍 Searching for:",k);const Ye=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(k)}&limit=5&countrycodes=in`)).json();if(console.log("🔍 Search results:",Ye),Ye.length>0){const ot=Ye[0],wt=[parseFloat(ot.lon),parseFloat(ot.lat)];console.log("🗺️ Flying to coordinates:",wt),u.current.flyTo({center:wt,zoom:15}),(ze=A.current)==null||ze.setLngLat(wt);const gt={name:ot.display_name.split(",")[0]||k,coordinates:wt,address:ot.display_name};W(gt)}else console.log("🔍 No search results found")}catch(Je){console.error("❌ Error searching location:",Je)}},fe=()=>{O&&(l(O),n())},Ve=ze=>{ze.key==="Enter"&&we()};return _.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),_.jsxDEV("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:_.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),_.jsxDEV("div",{className:"p-4 border-b",children:[_.jsxDEV("div",{className:"flex gap-2 mb-2",children:[_.jsxDEV("input",{type:"text",value:k,onChange:ze=>B(ze.target.value),onKeyPress:Ve,placeholder:y,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),_.jsxDEV("button",{onClick:we,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),_.jsxDEV("div",{className:"flex gap-2",children:_.jsxDEV("button",{onClick:()=>{var ze;u.current&&(console.log("🏫 Resetting to Ganpat University at coordinates:",fa.coordinates),u.current.flyTo({center:fa.coordinates,zoom:12}),(ze=A.current)==null||ze.setLngLat(fa.coordinates),W({name:fa.name,coordinates:fa.coordinates,address:fa.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),_.jsxDEV("div",{className:"flex-1 relative",children:[ne&&_.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),ke&&_.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",ke]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>{De(null),me(!0),u.current&&(u.current.remove(),u.current=null,A.current=null);const ze=x.current;ze&&(ze.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),_.jsxDEV("div",{ref:x,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),O&&_.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-700 font-medium",children:O.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),O.address&&_.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:O.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",O.coordinates[1].toFixed(6),","," ",O.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),_.jsxDEV("div",{className:"flex gap-2",children:[_.jsxDEV("button",{onClick:fe,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),_.jsxDEV("button",{onClick:n,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function p6(){const[l,n]=se.useState("buses"),[o,d]=se.useState(!1),[y,E]=se.useState(null),[x,u]=se.useState(null),[A,k]=se.useState([]),[B,O]=se.useState([]),[W,ne]=se.useState([]),[me,ke]=se.useState([]),[De,Ae]=se.useState(!1),[we,fe]=se.useState(!1),[Ve,ze]=se.useState(!1),[Je,Ye]=se.useState(!1),[ot,wt]=se.useState(!1),[gt,sn]=se.useState(!1),[st,vt]=se.useState(null),[Nt,on]=se.useState(null),[yn,zt]=se.useState(!1),[Wt,dn]=se.useState(!1),[St,Rt]=se.useState({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),[Ht,ct]=se.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[Ie,bt]=se.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[hn,Sn]=se.useState(!1),[Ft,Bt]=se.useState(!1),[fn,Bn]=se.useState(""),[rn,Fn]=se.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[Ur,Un]=se.useState(!1),[er,Ti]=se.useState("destination"),[Gr,Li]=se.useState(null),[qe,xr]=se.useState(null),hr=se.useCallback(async()=>{d(!0),E(null);try{const[I,G,J]=await Promise.all([ns.getAllBuses(),ns.getAllDrivers(),ns.getAllRoutes()]);if(I.success&&I.data&&k(I.data),G.success&&G.data){const ie=new Map;G.data.forEach(Ce=>{const xe=Ce.id;if(!ie.has(xe))ie.set(xe,Ce);else{const ge=ie.get(xe);(!ge.email&&Ce.email||ge.email&&Ce.email&&!ge.first_name&&Ce.first_name)&&ie.set(xe,Ce)}});const de=Array.from(ie.values());O(de)}J.success&&J.data&&ke(J.data),await zn(),(!I.success||!G.success||!J.success)&&E("Failed to load some data")}catch(I){E("An error occurred while loading data"),console.error("❌ Data loading error:",I)}finally{d(!1)}},[]);se.useEffect(()=>{hr()},[hr]);const zn=async()=>{try{const I=await ns.getAssignedDrivers();if(I.success&&I.data){const G=new Map;I.data.forEach(ie=>{const de=ie.driver_id;if(!G.has(de))G.set(de,ie);else{const Ce=G.get(de);(!Ce.driver_email&&ie.driver_email||Ce.driver_email&&ie.driver_email&&!Ce.driver_name&&ie.driver_name)&&G.set(de,ie)}});const J=Array.from(G.values());ne(J)}else console.warn("⚠️ Failed to load assigned drivers:",I.error),ne([])}catch(I){console.warn("⚠️ Failed to load assigned drivers:",I),ne([])}},Ln=async I=>{if(I.preventDefault(),d(!0),E(null),A.find(J=>J.code===St.code||J.number_plate===St.number_plate)){E(`Bus with code '${St.code}' or number plate '${St.number_plate}' already exists`),d(!1);return}try{const J=await ns.createBus(St);J.success&&J.data?(k([...A,J.data]),Rt({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),Ae(!1),u("Bus created successfully!"),setTimeout(()=>u(null),3e3)):E(J.error||"Failed to create bus")}catch{E("An error occurred while creating bus")}finally{d(!1)}},Dr=async I=>{if(confirm("Are you sure you want to delete this bus?")){d(!0),E(null);try{const G=await ns.deleteBus(I);G.success?(k(A.filter(J=>J.id!==I)),u("Bus deleted successfully!"),setTimeout(()=>u(null),3e3)):E(G.error||"Failed to delete bus")}catch{E("An error occurred while deleting bus")}finally{d(!1)}}},pi=async(I,G)=>{d(!0),E(null);try{const J=await ns.updateBus(I,{route_id:G});J.success&&J.data?(k(A.map(ie=>ie.id===I?{...ie,route_id:G}:ie)),u("Route assigned to bus successfully!"),setTimeout(()=>u(null),3e3)):E(J.error||"Failed to assign route to bus")}catch{E("An error occurred while assigning route to bus")}finally{d(!1)}},oi=async I=>{if(I.preventDefault(),d(!0),E(null),!Ie.email||!Ie.first_name||!Ie.last_name||!Ie.password){E("All fields are required: Email, First Name, Last Name, and Password"),d(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ie.email)){E("Please enter a valid email address"),d(!1);return}if(Ie.password!==Ie.confirm_password){E("Passwords do not match"),d(!1);return}if(Ie.password.length<6){E("Password must be at least 6 characters long"),d(!1);return}if(B.find(ie=>ie.email===Ie.email)){E("Driver with this email already exists"),d(!1);return}if(!o)try{const ie={email:Ie.email,first_name:Ie.first_name,last_name:Ie.last_name,phone:Ie.phone,role:"driver",password:Ie.password},de=await ns.createDriver(ie);if(de.success&&de.data){const Ce=await ns.getAllDrivers();if(Ce.success&&Ce.data){const xe=new Map;Ce.data.forEach(Ee=>{const Ke=Ee.id;if(!xe.has(Ke))xe.set(Ke,Ee);else{const te=xe.get(Ke);(!te.email&&Ee.email||te.email&&Ee.email&&!te.first_name&&Ee.first_name)&&xe.set(Ke,Ee)}});const ge=Array.from(xe.values());O(ge)}bt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),Sn(!1),Bt(!1),ze(!1),u(`Driver ${de.data.first_name} ${de.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>u(null),5e3)}else E(de.error||"Failed to create driver")}catch(ie){E("An error occurred while creating driver"),console.error("❌ Error creating driver:",ie)}finally{d(!1)}},Bs=async(I,G)=>{d(!0),E(null);try{const J=await ns.assignDriverToBus(I,G);J.success&&J.data?(await hr(),u("Bus assigned to driver successfully!"),setTimeout(()=>u(null),3e3)):E(J.error||"Failed to assign bus to driver")}catch{E("An error occurred while assigning bus to driver")}finally{d(!1)}},ds=async I=>{if(confirm("Are you sure you want to unassign this driver?")){d(!0),E(null);try{const G=await ns.unassignDriverFromBus(I);G.success?(await hr(),u("Driver unassigned successfully!"),setTimeout(()=>u(null),3e3)):E(G.error||"Failed to unassign driver")}catch{E("An error occurred while unassigning driver")}finally{d(!1)}}},Mt=async(I,G,J)=>{const ie=`${G} ${J}`,de=`Are you sure you want to delete driver "${ie}"?

This action will:
• Remove the driver from all database tables
• Delete their Supabase Auth account
• Unassign them from any buses
• This action cannot be undone!`;if(confirm(de)){d(!0),E(null);try{const Ce=await ns.deleteDriver(I);Ce.success&&Ce.data?(O(B.filter(xe=>xe.id!==I)),ne(W.filter(xe=>xe.driver_id!==I)),u(`Driver "${ie}" deleted successfully from all systems!`),setTimeout(()=>u(null),5e3)):E(Ce.error||`Failed to delete driver "${ie}"`)}catch(Ce){E(`An error occurred while deleting driver "${ie}"`),console.error("❌ Error deleting driver:",Ce)}finally{d(!1)}}},an=async I=>{if(I.preventDefault(),d(!0),E(null),!rn.name.trim()){E("Route name is required"),d(!1);return}if(!rn.city.trim()){E("City is required"),d(!1);return}if(!rn.description.trim()){E("Route description is required"),d(!1);return}try{const G={...rn,distance_km:parseFloat(rn.distance_km)||0,estimated_duration_minutes:parseInt(rn.estimated_duration_minutes)||0,custom_destination:Gr==null?void 0:Gr.name,custom_destination_coordinates:Gr==null?void 0:Gr.coordinates,custom_origin:qe==null?void 0:qe.name,custom_origin_coordinates:qe==null?void 0:qe.coordinates,bus_stops:[]},J=await ns.createRoute(G);J.success&&J.data?(ke([...me,J.data]),Fn({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),Li(null),xr(null),Ye(!1),u("Route created successfully!"),setTimeout(()=>u(null),3e3)):E(J.error||"Failed to create route")}catch{E("An error occurred while creating route")}finally{d(!1)}},Qe=async I=>{if(confirm("Are you sure you want to delete this route?")){d(!0),E(null);try{const G=await ns.deleteRoute(I);G.success?(ke(me.filter(J=>J.id!==I)),u("Route deleted successfully!"),setTimeout(()=>u(null),3e3)):E(G.error||"Failed to delete route")}catch{E("An error occurred while deleting route")}finally{d(!1)}}},Hn=I=>{if(!I)return"Not Assigned";const G=me.find(de=>de.id===I);if(!G)return"Unknown Route";const J=G.city||"Unknown City",ie=G.destination||"Ganpat University";return`${J} → ${ie}`},Tn=I=>{Ti(I),Un(!0)},wr=I=>{er==="destination"?Li(I):xr(I)},pr=I=>{if(!I)return"Not Assigned";const G=B.find(J=>J.id===I);return G?`${G.first_name} ${G.last_name}`:"Unknown Driver"},dt=I=>I.driver_full_name?I.driver_full_name:I.driver_first_name&&I.driver_last_name?`${I.driver_first_name} ${I.driver_last_name}`:I.assigned_driver_id?pr(I.assigned_driver_id):"Not Assigned",tn=I=>{if(!I)return"Not Assigned";const G=A.find(J=>J.id===I);return G?G.number_plate:"Unknown Bus"},Ut=I=>{vt(I),zt(!1),wt(!0)},nr=I=>{vt(I),Rt({code:I.code,number_plate:I.number_plate,capacity:I.capacity,model:I.model||"",year:I.year||new Date().getFullYear(),is_active:I.is_active}),zt(!0),wt(!0)},gi=I=>{on(I),dn(!1),sn(!0)},bn=I=>{on(I),Fn({name:I.name,description:I.description,distance_km:I.distance_km.toString(),estimated_duration_minutes:I.estimated_duration_minutes.toString(),is_active:I.is_active,city:I.city||""}),dn(!0),sn(!0)},vi=async I=>{if(I.preventDefault(),!!(st!=null&&st.id)){d(!0),E(null);try{const G=await ns.updateBus(st.id,St);G.success&&G.data?(k(A.map(J=>J.id===st.id?G.data:J)),wt(!1),zt(!1),vt(null),u("Bus updated successfully!"),setTimeout(()=>u(null),3e3)):E(G.error||"Failed to update bus")}catch{E("An error occurred while updating bus")}finally{d(!1)}}},he=async I=>{if(I.preventDefault(),!!(Nt!=null&&Nt.id)){d(!0),E(null);try{const G={...rn,distance_km:parseFloat(rn.distance_km)||0,estimated_duration_minutes:parseInt(rn.estimated_duration_minutes)||0},J=await ns.updateRoute(Nt.id,G);J.success&&J.data?(ke(me.map(ie=>ie.id===Nt.id?J.data:ie)),sn(!1),dn(!1),on(null),u("Route updated successfully!"),setTimeout(()=>u(null),3e3)):E(J.error||"Failed to update route")}catch{E("An error occurred while updating route")}finally{d(!1)}}};return o?_.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),_.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):_.jsxDEV("div",{className:"space-y-6",children:[_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),_.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),_.jsxDEV("button",{onClick:hr,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),x&&_.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:_.jsxDEV("p",{className:"text-green-800",children:x},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),y&&_.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:_.jsxDEV("p",{className:"text-red-800",children:y},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),_.jsxDEV("div",{className:"border-b border-gray-200",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[_.jsxDEV("button",{onClick:()=>n("buses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="buses"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🚌 Buses (",A.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>n("drivers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="drivers"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["👨‍💼 Drivers (",B.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>n("routes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="routes"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🗺️ Routes (",me.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),l==="buses"&&_.jsxDEV("div",{className:"space-y-6",children:_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:_.jsxDEV("button",{onClick:()=>Ae(!De),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:De?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),De&&_.jsxDEV("form",{onSubmit:Ln,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:St.code,onChange:I=>Rt({...St,code:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:St.number_plate,onChange:I=>Rt({...St,number_plate:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:St.capacity,onChange:I=>Rt({...St,capacity:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),_.jsxDEV("input",{type:"text",value:St.model,onChange:I=>Rt({...St,model:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),_.jsxDEV("input",{type:"number",value:St.year,onChange:I=>Rt({...St,year:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:St.is_active,onChange:I=>Rt({...St,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end",children:_.jsxDEV("button",{type:"submit",disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",I.capacity," | ",I.model," (",I.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:dt(I)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_name||Hn(I.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_id?(()=>{const G=me.find(J=>J.id===I.route_id);return(G==null?void 0:G.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:_.jsxDEV("div",{className:"flex flex-col space-y-2",children:[_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>Ut(I),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),_.jsxDEV("button",{onClick:()=>nr(I),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),_.jsxDEV("button",{onClick:()=>Dr(I.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),_.jsxDEV("select",{onChange:G=>pi(I.id,G.target.value),value:I.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),me.map(G=>_.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.name},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),l==="drivers"&&_.jsxDEV("div",{className:"space-y-6",children:[_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>ze(!Ve),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:Ve?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),_.jsxDEV("button",{onClick:()=>fe(!we),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:we?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),we&&_.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),_.jsxDEV("select",{required:!0,value:fn,onChange:I=>Bn(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),B.map(I=>_.jsxDEV("option",{value:I.id,className:"text-gray-900",children:[I.first_name," ",I.last_name," (",I.email,")"]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),B.length===0&&_.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),_.jsxDEV("select",{required:!0,value:Ht.assigned_bus_id||"",onChange:I=>ct({...Ht,assigned_bus_id:I.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),A.map(I=>_.jsxDEV("option",{value:I.id,className:"text-gray-900",children:[I.number_plate," (",I.model||"Unknown Model",")"]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[_.jsxDEV("button",{type:"button",onClick:()=>{fe(!1),Bn(""),ct({...Ht,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),_.jsxDEV("button",{onClick:()=>Bs(fn,Ht.assigned_bus_id),disabled:o||!fn||!Ht.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),Ve&&_.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),_.jsxDEV("form",{onSubmit:oi,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),_.jsxDEV("input",{type:"email",required:!0,value:Ie.email,onChange:I=>bt({...Ie,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),_.jsxDEV("input",{type:"text",required:!0,value:Ie.first_name,onChange:I=>bt({...Ie,first_name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),_.jsxDEV("input",{type:"text",required:!0,value:Ie.last_name,onChange:I=>bt({...Ie,last_name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),_.jsxDEV("input",{type:"tel",value:Ie.phone,onChange:I=>bt({...Ie,phone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{type:hn?"text":"password",required:!0,value:Ie.password,onChange:I=>{console.log("Password input changed:",I.target.value),bt({...Ie,password:I.target.value})},onFocus:I=>{console.log("Password field focused"),I.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Sn(!hn),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:hn?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",Ie.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{type:Ft?"text":"password",required:!0,value:Ie.confirm_password,onChange:I=>{console.log("Confirm password input changed:",I.target.value),bt({...Ie,confirm_password:I.target.value})},onFocus:I=>{console.log("Confirm password field focused"),I.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Bt(!Ft),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:Ft?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[Ie.password!==Ie.confirm_password&&Ie.confirm_password.length>0&&_.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),Ie.password===Ie.confirm_password&&Ie.confirm_password.length>0&&_.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[_.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),_.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[_.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),_.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),_.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),_.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),_.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-end space-x-2",children:[_.jsxDEV("button",{type:"button",onClick:()=>{ze(!1),bt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),Sn(!1),Bt(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),_.jsxDEV("button",{type:"submit",disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),_.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),_.jsxDEV("button",{onClick:async()=>{try{const I=await ns.getAllDrivers();if(I.success&&I.data){const G=new Map;I.data.forEach(ie=>{const de=ie.id;if(!G.has(de))G.set(de,ie);else{const Ce=G.get(de);(!Ce.email&&ie.email||Ce.email&&ie.email&&!Ce.first_name&&ie.first_name)&&G.set(de,ie)}});const J=Array.from(G.values());O(J)}else console.warn("⚠️ Manual refresh failed:",I.error)}catch(I){console.warn("⚠️ Manual refresh failed:",I)}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),B.length>0?_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:B.map(I=>_.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[_.jsxDEV("div",{className:"font-medium text-gray-900",children:[I.first_name," ",I.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),_.jsxDEV("div",{className:"text-sm text-gray-600",children:I.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",I.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),_.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[I.first_name," ",I.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",I.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:tn(I.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[_.jsxDEV("select",{onChange:G=>Bs(I.id,G.target.value),value:I.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),A.map(G=>_.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.number_plate},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),_.jsxDEV("button",{onClick:()=>Mt(I.id,I.first_name,I.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:[W.length," driver",W.length!==1?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),W.length===0?_.jsxDEV("div",{className:"text-center py-8",children:[_.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),_.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),_.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[_.jsxDEV("button",{onClick:()=>ds(I.driver_id),disabled:o,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>{const G=B.find(J=>J.id===I.driver_id);G&&Mt(G.id,G.first_name,G.last_name)},disabled:o,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},I.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),l==="routes"&&_.jsxDEV("div",{className:"space-y-6",children:_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:_.jsxDEV("button",{onClick:()=>Ye(!Je),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Je?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),Je&&_.jsxDEV("form",{onSubmit:an,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:rn.name,onChange:I=>Fn({...rn,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:rn.city,onChange:I=>Fn({...rn,city:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:rn.distance_km,onChange:I=>Fn({...rn,distance_km:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:rn.estimated_duration_minutes,onChange:I=>Fn({...rn,estimated_duration_minutes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:rn.is_active,onChange:I=>Fn({...rn,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),_.jsxDEV("textarea",{value:rn.description,onChange:I=>Fn({...rn,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-2",children:[_.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),Gr&&_.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[_.jsxDEV("div",{className:"font-medium text-green-800",children:Gr.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-green-600",children:Gr.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Tn("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-2",children:[_.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),qe&&_.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[_.jsxDEV("div",{className:"font-medium text-blue-800",children:qe.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-blue-600",children:qe.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Tn("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end",children:_.jsxDEV("button",{type:"submit",disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[_.jsxDEV("div",{className:"text-sm text-gray-900",children:[I.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:[I.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>gi(I),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>bn(I),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>Qe(I.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),Ur&&_.jsxDEV(m6,{onLocationSelect:wr,onClose:()=>Un(!1),title:er==="destination"?"Select Destination":"Select Origin",searchPlaceholder:er==="destination"?"Search for destination...":"Search for origin..."},`map-selector-${er}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),ot&&st&&_.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:_.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:yn?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),_.jsxDEV("button",{onClick:()=>{wt(!1),zt(!1),vt(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),yn?_.jsxDEV("form",{onSubmit:vi,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:St.code,onChange:I=>Rt({...St,code:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:St.number_plate,onChange:I=>Rt({...St,number_plate:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:St.capacity,onChange:I=>Rt({...St,capacity:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),_.jsxDEV("input",{type:"text",value:St.model,onChange:I=>Rt({...St,model:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),_.jsxDEV("input",{type:"number",value:St.year,onChange:I=>Rt({...St,year:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:St.is_active,onChange:I=>Rt({...St,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[_.jsxDEV("button",{type:"button",onClick:()=>zt(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),_.jsxDEV("button",{type:"submit",disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:st.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:st.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[st.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:st.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:st.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${st.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:st.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:dt(st)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:st.route_name||Hn(st.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:_.jsxDEV("button",{onClick:()=>zt(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),gt&&Nt&&_.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:_.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:Wt?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),_.jsxDEV("button",{onClick:()=>{sn(!1),dn(!1),on(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),Wt?_.jsxDEV("form",{onSubmit:he,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:rn.name,onChange:I=>Fn({...rn,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:rn.city,onChange:I=>Fn({...rn,city:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:rn.distance_km,onChange:I=>Fn({...rn,distance_km:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:rn.estimated_duration_minutes,onChange:I=>Fn({...rn,estimated_duration_minutes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:rn.is_active,onChange:I=>Fn({...rn,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),_.jsxDEV("textarea",{value:rn.description,onChange:I=>Fn({...rn,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[_.jsxDEV("button",{type:"button",onClick:()=>dn(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),_.jsxDEV("button",{type:"submit",disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:Nt.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:Nt.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[Nt.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[Nt.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Nt.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Nt.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:Nt.created_at?new Date(Nt.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),Nt.description&&_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:Nt.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:_.jsxDEV("button",{onClick:()=>dn(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function TP(){const[l,n]=se.useState(null),[o,d]=se.useState(null),[y,E]=se.useState(!0),[x,u]=se.useState(null),[A,k]=se.useState("overview");se.useEffect(()=>{B()},[]);const B=async()=>{E(!0),u(null);try{const[ne,me]=await Promise.all([ns.getAnalytics(),ns.getSystemHealth()]);ne.success&&ne.data&&n(ne.data),me.success&&me.data&&d(me.data),(!ne.success||!me.success)&&u("Failed to load dashboard data")}catch(ne){u("An error occurred while loading dashboard data"),console.error("❌ Dashboard data loading error:",ne)}finally{E(!1)}},O=async()=>{try{await Fr.signOut(),window.location.href="/"}catch(ne){console.error("❌ Sign out error:",ne)}},W=Fr.getCurrentProfile();return y?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),_.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):x?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),_.jsxDEV("p",{className:"text-red-200 mb-4",children:x},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),_.jsxDEV("button",{onClick:B,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[_.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[_.jsxDEV("div",{className:"flex items-center",children:_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),_.jsxDEV("div",{className:"flex items-center space-x-4",children:[_.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(W==null?void 0:W.first_name)||(W==null?void 0:W.full_name)||(W==null?void 0:W.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),_.jsxDEV("button",{onClick:B,className:"btn-primary text-sm",disabled:y,children:y?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),_.jsxDEV("button",{onClick:O,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),_.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"border-b border-white/20",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[_.jsxDEV("button",{onClick:()=>k("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="overview"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>k("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="analytics"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:164,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>k("management"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="management"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:174,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>k("media"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${A==="media"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:151,columnNumber:7},this),_.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[A==="overview"&&_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[_.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:214,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:220,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(o==null?void 0:o.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:219,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:218,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:206,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:242,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:252,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(o==null?void 0:o.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:251,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:234,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:232,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:274,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:280,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(o==null?void 0:o.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:265,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:264,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:302,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:312,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(o==null?void 0:o.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:311,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:310,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:292,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:13},this),l&&_.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:335,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[l.activeBuses,"/",l.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:334,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:343,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[l.activeRoutes,"/",l.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:342,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:351,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[l.activeDrivers,"/",l.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:350,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:329,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:328,columnNumber:17},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:364,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:369,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[l.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:368,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:377,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:376,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:363,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:362,columnNumber:17},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:390,columnNumber:21},this),_.jsxDEV("div",{className:"text-sm text-white/70",children:o!=null&&o.timestamp?new Date(o.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:389,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:201,columnNumber:11},this),A==="analytics"&&l&&_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:_.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:17},this),_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[_.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:l.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:414,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[_.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:423,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:l.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:422,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[_.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:431,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:l.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:430,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[_.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:439,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[l.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:438,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:451,columnNumber:17},this),_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:456,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${l.activeBuses/l.totalBuses*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:461,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:460,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[l.activeBuses,"/",l.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:455,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:474,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${l.activeRoutes/l.totalRoutes*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:478,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[l.activeRoutes,"/",l.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:473,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:492,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${l.activeDrivers/l.totalDrivers*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:497,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:496,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[l.activeDrivers,"/",l.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:406,columnNumber:11},this),A==="management"&&_.jsxDEV(p6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:516,columnNumber:40},this),A==="media"&&_.jsxDEV(f6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:199,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}const g6=({children:l,variant:n="primary",size:o="md",className:d="",onClick:y,disabled:E=!1,loading:x=!1,icon:u,iconPosition:A="left"})=>{const k="relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",B={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},O={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"};return _.jsxDEV(Qn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,disabled:E||x,className:`
        ${k}
        ${B[o]}
        ${O[n]}
        hover:-translate-y-0.5 active:translate-y-0
        ${d}
      `,children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),_.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[x&&_.jsxDEV(Qn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),u&&A==="left"&&!x&&_.jsxDEV("span",{className:"flex-shrink-0",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),_.jsxDEV("span",{children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),u&&A==="right"&&!x&&_.jsxDEV("span",{className:"flex-shrink-0",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0)};function v6({onLoginSuccess:l}){const n=Gv(),{setTransition:o}=g0(),[d,y]=se.useState(!1),[E,x]=se.useState(null),[u,A]=se.useState(""),[k,B]=se.useState(""),[O,W]=se.useState(""),[ne,me]=se.useState(null);se.useEffect(()=>{setTimeout(async()=>{try{for(console.log("🔄 Attempting automatic session recovery...");!Fr.isInitialized();)await new Promise(ze=>setTimeout(ze,100));const Ve=await Fr.recoverSession();Ve.success&&Fr.isAdmin()?(console.log("✅ Session recovered, redirecting to admin panel"),De()):console.log("📝 Session recovery failed or user is not admin:",Ve.error)}catch(Ve){console.log("📝 No valid session to recover:",Ve)}},2e3)},[]);const ke=async fe=>{fe.preventDefault(),y(!0),x(null),me(null);try{const Ve=new Promise((Ye,ot)=>{setTimeout(()=>ot(new Error("Login timeout")),5e3)}),ze=Fr.signIn(u,k),Je=await Promise.race([ze,Ve]);Je.success&&Je.user?Je.user.role==="admin"?(me("Login successful! Loading admin dashboard..."),setTimeout(()=>{De()},500)):(x("Access denied. Admin privileges required."),await Fr.signOut()):x(Je.error||"Login failed. Please check your credentials.")}catch(Ve){console.error("❌ Login error:",Ve),Ve instanceof Error&&Ve.message==="Login timeout"?x("Login timed out. This might be due to slow network or profile loading. Please try again."):Ve instanceof Error&&Ve.message.includes("environment variables")?x("Configuration error. Please check your environment setup."):Ve instanceof Error&&Ve.message.includes("Profile loading timeout")?x("Profile loading is taking longer than expected. Please try again."):x("Network error. Please check your connection and try again.")}finally{y(!1)}},De=()=>{o("login-to-dashboard"),setTimeout(()=>{l?l():n("/admin-dashboard",{replace:!0})},500)},Ae=async()=>{y(!0),x(null);try{(await Fr.recoverSession()).success&&Fr.isAdmin()?(me("Session recovered! Redirecting..."),setTimeout(()=>{De()},1e3)):x("No valid session found. Please log in again.")}catch{x("Session recovery failed. Please log in again.")}finally{y(!1)}},we=async()=>{y(!0),x(null);try{await Fr.forceFreshLogin(),me("Session cleared. Please log in again with your credentials.")}catch{x("Failed to clear session.")}finally{y(!1)}};return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[_.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[_.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:166,columnNumber:9},this),_.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:167,columnNumber:9},this),_.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:165,columnNumber:7},this),_.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((fe,Ve)=>_.jsxDEV(Qn.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*5},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},Ve,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:174,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:172,columnNumber:7},this),_.jsxDEV(Qn.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:_.jsxDEV(Av,{variant:"ultra",glow:!0,className:"p-8 relative",children:[_.jsxDEV(Qn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[_.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:210,columnNumber:15},this),_.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:217,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:209,columnNumber:13},this),_.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:225,columnNumber:13},this),_.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:11},this),_.jsxDEV(Qn.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:ke,className:"space-y-6",children:[_.jsxDEV(Qn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:247,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:u,onChange:fe=>A(fe.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:254,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:242,columnNumber:13},this),_.jsxDEV(Qn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:276,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:k,onChange:fe=>B(fe.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:295,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:13},this),_.jsxDEV(Qn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[_.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",_.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:309,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:305,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:O,onChange:fe=>W(fe.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:312,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:323,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:300,columnNumber:13},this),_.jsxDEV(dp,{children:d&&_.jsxDEV(Qn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:_.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[_.jsxDEV(Qn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:337,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:328,columnNumber:13},this),_.jsxDEV(dp,{children:E&&_.jsxDEV(Qn.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:363,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:362,columnNumber:21},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:23},this),_.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:E},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:361,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:355,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:353,columnNumber:13},this),_.jsxDEV(dp,{children:ne&&_.jsxDEV(Qn.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:396,columnNumber:21},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:410,columnNumber:23},this),_.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:ne},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:413,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:387,columnNumber:13},this),_.jsxDEV(Qn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:_.jsxDEV(g6,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:d,loading:d,icon:_.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:439,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:433,columnNumber:19},this),children:d?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:426,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:421,columnNumber:13},this),_.jsxDEV(Qn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[_.jsxDEV("button",{type:"button",onClick:Ae,disabled:d,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:17},this),_.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:468,columnNumber:17},this),_.jsxDEV("button",{type:"button",onClick:we,disabled:d,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:459,columnNumber:15},this),_.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[_.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:480,columnNumber:17},this),_.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:163,columnNumber:5},this)}const y6=({children:l,className:n=""})=>_.jsxDEV(Qn.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:n,children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),dC=({children:l,className:n=""})=>_.jsxDEV(Qn.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:n,children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),b6=()=>_.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Bus Icon",style:{display:"block",margin:"0 auto"},children:[_.jsxDEV("rect",{x:"4",y:"12",width:"40",height:"20",rx:"2",fill:"#3B82F6",stroke:"#1E40AF",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:20,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:32,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:42,columnNumber:5},void 0),_.jsxDEV("rect",{x:"26",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:52,columnNumber:5},void 0),_.jsxDEV("rect",{x:"36",y:"14",width:"6",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:62,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"22",width:"12",height:"8",rx:"1",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:74,columnNumber:5},void 0),_.jsxDEV("line",{x1:"24",y1:"22",x2:"24",y2:"30",stroke:"#F59E0B",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:84,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:87,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:95,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:96,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:104,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"8",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:107,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:108,columnNumber:5},void 0),_.jsxDEV("rect",{x:"2",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:111,columnNumber:5},void 0),_.jsxDEV("rect",{x:"44",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:112,columnNumber:5},void 0),_.jsxDEV("rect",{x:"28",y:"16",width:"8",height:"3",rx:"0.5",fill:"#FEF3C7",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:115,columnNumber:5},void 0),_.jsxDEV("text",{x:"32",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"GU"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:124,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:10,columnNumber:3},void 0),x6=()=>_.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Map Icon",style:{display:"block",margin:"0 auto"},children:[_.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"2",fill:"#F0FDF4",stroke:"#16A34A",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:148,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"16",x2:"40",y2:"16",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:160,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"24",x2:"40",y2:"24",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:161,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"32",x2:"40",y2:"32",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:162,columnNumber:5},void 0),_.jsxDEV("line",{x1:"16",y1:"12",x2:"16",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:163,columnNumber:5},void 0),_.jsxDEV("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:164,columnNumber:5},void 0),_.jsxDEV("line",{x1:"32",y1:"12",x2:"32",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:5},void 0),_.jsxDEV("rect",{x:"12",y:"20",width:"16",height:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:168,columnNumber:5},void 0),_.jsxDEV("rect",{x:"20",y:"12",width:"2",height:"16",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:177,columnNumber:5},void 0),_.jsxDEV("rect",{x:"10",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:188,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:197,columnNumber:5},void 0),_.jsxDEV("rect",{x:"22",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:206,columnNumber:5},void 0),_.jsxDEV("rect",{x:"28",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:215,columnNumber:5},void 0),_.jsxDEV("rect",{x:"34",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:224,columnNumber:5},void 0),_.jsxDEV("rect",{x:"11",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:235,columnNumber:5},void 0),_.jsxDEV("rect",{x:"13",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:236,columnNumber:5},void 0),_.jsxDEV("rect",{x:"17",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:237,columnNumber:5},void 0),_.jsxDEV("rect",{x:"19",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:238,columnNumber:5},void 0),_.jsxDEV("rect",{x:"23",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:239,columnNumber:5},void 0),_.jsxDEV("rect",{x:"25",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:240,columnNumber:5},void 0),_.jsxDEV("rect",{x:"29",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:241,columnNumber:5},void 0),_.jsxDEV("rect",{x:"31",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:242,columnNumber:5},void 0),_.jsxDEV("rect",{x:"35",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:243,columnNumber:5},void 0),_.jsxDEV("rect",{x:"37",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:244,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"22",r:"2",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:247,columnNumber:5},void 0),_.jsxDEV("path",{d:"M24 24 L26 28 L22 28 Z",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:255,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"22",r:"0.5",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:261,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"16",r:"3",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:264,columnNumber:5},void 0),_.jsxDEV("text",{x:"36",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"N"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:272,columnNumber:5},void 0),_.jsxDEV("text",{x:"36",y:"22",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"S"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:282,columnNumber:5},void 0),_.jsxDEV("text",{x:"33",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"W"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:292,columnNumber:5},void 0),_.jsxDEV("text",{x:"39",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"E"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:302,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:138,columnNumber:3},void 0),_6=()=>_.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Admin Icon",style:{display:"block",margin:"0 auto"},children:[_.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"3",fill:"#F8FAFC",stroke:"#8B5CF6",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:326,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"10",width:"36",height:"4",rx:"1",fill:"#8B5CF6",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:338,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"8",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:347,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"10",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:348,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:349,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"16",width:"8",height:"20",rx:"1",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:352,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"18",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:364,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"22",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:365,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"26",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:366,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"30",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:367,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"16",width:"26",height:"20",rx:"1",fill:"#FFFFFF",stroke:"#DDD6FE",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:370,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:382,columnNumber:5},void 0),_.jsxDEV("rect",{x:"30",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:392,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:402,columnNumber:5},void 0),_.jsxDEV("rect",{x:"30",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:412,columnNumber:5},void 0),_.jsxDEV("path",{d:"M20 22 L22 21 L24 23 L26 20 L28 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:424,columnNumber:5},void 0),_.jsxDEV("path",{d:"M32 22 L34 21 L36 23 L38 20 L40 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:430,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"20",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:438,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"22",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:439,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:440,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"26",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:441,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"28",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:442,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"32",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:443,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"34",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:444,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:445,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"38",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:446,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:447,columnNumber:5},void 0),_.jsxDEV("rect",{x:"20",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:450,columnNumber:5},void 0),_.jsxDEV("rect",{x:"23",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:451,columnNumber:5},void 0),_.jsxDEV("rect",{x:"26",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:452,columnNumber:5},void 0),_.jsxDEV("rect",{x:"29",y:"31",width:"2",height:"1",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:453,columnNumber:5},void 0),_.jsxDEV("rect",{x:"32",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:454,columnNumber:5},void 0),_.jsxDEV("rect",{x:"35",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:455,columnNumber:5},void 0),_.jsxDEV("rect",{x:"38",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:456,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"12",r:"2",fill:"#8B5CF6",stroke:"#7C3AED",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:459,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:467,columnNumber:5},void 0),_.jsxDEV("path",{d:"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12",stroke:"#7C3AED",strokeWidth:"0.5",strokeLinecap:"round"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:468,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:316,columnNumber:3},void 0),w6=()=>{const l=Gv(),[n,o]=se.useState(!1);se.useEffect(()=>{const x=()=>{o(window.innerWidth<768)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const{setTransition:d}=g0(),y=x=>{x.includes("login")?d("homepage-to-login"):x.includes("student")||x.includes("student-map")?d("homepage-to-map"):d("default"),setTimeout(()=>{l(x)},200)},E=n?8:20;return _.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:_.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[_.jsxDEV(Qn.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[_.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:_.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:528,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:527,columnNumber:11},void 0),_.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:532,columnNumber:11},void 0),_.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:535,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:521,columnNumber:9},void 0),_.jsxDEV(y6,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[_.jsxDEV(dC,{children:_.jsxDEV(Qn.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:550,columnNumber:15},void 0),_.jsxDEV(Av,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>y("/driver-login"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:_.jsxDEV(b6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:560,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:559,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:562,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:565,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:558,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:572,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:571,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:552,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:542,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:541,columnNumber:11},void 0),_.jsxDEV(dC,{children:_.jsxDEV(Qn.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:588,columnNumber:15},void 0),_.jsxDEV(Av,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>y("/student-map"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:_.jsxDEV(x6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:598,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:597,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:600,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:603,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:596,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:610,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:609,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:590,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:580,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:579,columnNumber:11},void 0),_.jsxDEV(dC,{children:_.jsxDEV(Qn.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:626,columnNumber:15},void 0),_.jsxDEV(Av,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>y("/admin-login"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:_.jsxDEV(_6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:636,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:635,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:638,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:641,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:634,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:648,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:647,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:628,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:618,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:617,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:539,columnNumber:9},void 0),_.jsxDEV(Qn.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:_.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:662,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:656,columnNumber:9},void 0),_.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(E)].map((x,u)=>_.jsxDEV(Qn.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},u,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:671,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:669,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:519,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:517,columnNumber:5},void 0)};function C6(){console.log("🚀 App component is rendering...");const[l,n]=se.useState(null),[o,d]=se.useState(!0),[y,E]=se.useState(null),[x,u]=se.useState({isAuthenticated:!1,user:null,loading:!0});se.useEffect(()=>{(async()=>{try{for(d(!0);!Fr.isInitialized();)await new Promise(W=>setTimeout(W,100));const O=await zv.getHealth();n(O),E(null)}catch(O){E(O instanceof Error?O.message:"Failed to connect to backend"),n(null)}finally{d(!1)}})()},[]),se.useEffect(()=>{const B=()=>{const O=Fr.getCurrentUser();u({isAuthenticated:!!O,user:O?{id:O.id,email:O.email||"",role:"student",created_at:O.created_at,updated_at:O.updated_at}:null,loading:!1})};return Fr.onAuthStateChange(B),B(),()=>{Fr.removeAuthStateChangeListener()}},[]);const A=()=>{var B,O,W,ne,me,ke,De,Ae,we,fe;return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:_.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:97,columnNumber:11},this),_.jsxDEV("div",{className:"space-y-6",children:[o&&_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:104,columnNumber:17},this),_.jsxDEV("p",{className:"text-white/70 mt-4",children:"Checking backend connection..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:103,columnNumber:15},this),y&&_.jsxDEV("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:120,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:115,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:114,columnNumber:19},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:128,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:y},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:131,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:113,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:112,columnNumber:15},this),l&&_.jsxDEV("div",{className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:146,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:141,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:140,columnNumber:19},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Backend Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:21},this),_.jsxDEV("div",{className:"text-sm text-green-200 mt-1 space-y-1",children:[_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:25},this)," ",l.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Database:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:25},this)," ",((O=(B=l.services)==null?void 0:B.database)==null?void 0:O.status)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:161,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Environment:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:25},this)," ",l.environment]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:165,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:169,columnNumber:25},this)," ",new Date(l.timestamp).toLocaleString()]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:168,columnNumber:23},this),((ne=(W=l.services)==null?void 0:W.database)==null?void 0:ne.details)&&_.jsxDEV("div",{className:"mt-2 text-xs",children:[_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"PostgreSQL:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:175,columnNumber:29},this)," ",((me=l.services.database.details.details)==null?void 0:me.postgresVersion)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:174,columnNumber:27},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Pool Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:29},this)," ",`Total: ${((ke=l.services.database.details.details)==null?void 0:ke.poolSize)||0}, Idle: ${((De=l.services.database.details.details)==null?void 0:De.idleCount)||0}, Waiting: ${((Ae=l.services.database.details.details)==null?void 0:Ae.waitingCount)||0}`]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:179,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:173,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:157,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:153,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:139,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:138,columnNumber:15},this),_.jsxDEV("div",{className:"text-center text-sm text-white/60 mt-6",children:[_.jsxDEV("p",{children:"Phase 5: Admin Panel & Analytics Dashboard ✅"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:192,columnNumber:15},this),_.jsxDEV("p",{className:"mt-1",children:"Role-based access control, analytics charts, and system management"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:193,columnNumber:15},this),x.isAuthenticated&&_.jsxDEV("p",{className:"mt-2 text-green-400",children:["✅ Authenticated as:"," ",((we=x.user)==null?void 0:we.full_name)||((fe=x.user)==null?void 0:fe.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:198,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:191,columnNumber:13},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[_.jsxDEV(Sf,{to:"/driver",className:"btn-primary text-center block",children:"🚌 Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:207,columnNumber:15},this),_.jsxDEV(Sf,{to:"/student",className:"btn-primary text-center block",children:"👨‍🎓 Student Map (Live Tracking)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:211,columnNumber:15},this),_.jsxDEV(Sf,{to:"/admin",className:"btn-primary text-center block",children:"👨‍💼 Admin Panel (Phase 5)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:215,columnNumber:15},this),_.jsxDEV(Sf,{to:"/premium-demo",className:"btn-secondary text-center block",children:"✨ Premium UI Demo"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:96,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:95,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:94,columnNumber:5},this)},k=()=>_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:_.jsxDEV("div",{className:"max-w-md w-full mx-auto text-center",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h1",{className:"text-6xl font-bold gradient-text mb-4",children:"404"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:237,columnNumber:11},this),_.jsxDEV("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Page Not Found"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:238,columnNumber:11},this),_.jsxDEV("p",{className:"text-white/70 mb-6",children:"The page you're looking for doesn't exist."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:241,columnNumber:11},this),_.jsxDEV(Sf,{to:"/",className:"btn-primary inline-block",children:"Go Back Home"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:236,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:235,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:234,columnNumber:5},this);return _.jsxDEV(fV,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:_.jsxDEV(r6,{children:_.jsxDEV(a6,{children:_.jsxDEV(JI,{children:[_.jsxDEV(gl,{path:"/",element:_.jsxDEV(w6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:13},this),_.jsxDEV(gl,{path:"/legacy",element:_.jsxDEV(A,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:13},this),_.jsxDEV(gl,{path:"/driver",element:_.jsxDEV(Fz,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:13},this),_.jsxDEV(gl,{path:"/student",element:_.jsxDEV(DP,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:45},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:13},this),_.jsxDEV(gl,{path:"/admin",element:_.jsxDEV(TP,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:43},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:13},this),_.jsxDEV(gl,{path:"/driver-login",element:_.jsxDEV(l6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:50},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:13},this),_.jsxDEV(gl,{path:"/driver-dashboard",element:_.jsxDEV(c6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:13},this),_.jsxDEV(gl,{path:"/student-map",element:_.jsxDEV(DP,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:13},this),_.jsxDEV(gl,{path:"/admin-login",element:_.jsxDEV(v6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:13},this),_.jsxDEV(gl,{path:"/admin-dashboard",element:_.jsxDEV(TP,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:53},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:13},this),_.jsxDEV(gl,{path:"*",element:_.jsxDEV(k,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:256,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:254,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:253,columnNumber:5},this)}const N6=()=>{{const l=console.warn;console.warn=(...n)=>{const o=n[0];typeof o=="string"&&(o.includes("React Router Future Flag Warning")||o.includes("v7_startTransition")||o.includes("v7_relativeSplatPath"))||typeof o=="string"&&o.includes("WebGL context was lost")||typeof o=="string"&&(o.includes("Firefox can't establish a connection")||o.includes("connection was interrupted while the page was loading"))||l.apply(console,n)}}},S6=window.fetch;window.fetch=async function(l,n){if(typeof l=="string"&&(l.includes(fo.api.url)||l.includes("localhost")))try{let o=Fr.getAccessToken();!o&&Fr.isAuthenticated()&&(console.log("🔄 No token found but user is authenticated, attempting to refresh session..."),(await Fr.refreshSession()).success&&(o=Fr.getAccessToken(),console.log("✅ Session refreshed, new token obtained"))),o&&(n=n||{},n.headers={...n.headers,Authorization:`Bearer ${o}`})}catch{console.log("🔓 Public access - authentication not available")}return S6(l,n)};N6();const v0=document.createElement("link");v0.rel="preconnect";v0.href="https://fonts.gstatic.com";v0.crossOrigin="anonymous";document.head.appendChild(v0);const jN=document.createElement("link");jN.rel="stylesheet";jN.href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap&font-display=swap";document.head.appendChild(jN);fC.createRoot(document.getElementById("root")).render(_.jsxDEV(Uv.StrictMode,{children:_.jsxDEV(C6,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:29,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:28,columnNumber:3},void 0));
//# sourceMappingURL=index-wOfzEouN.js.map
