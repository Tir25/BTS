const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/EnhancedStudentMap-Bu79HgS1.js","assets/js/vendor-react-CyT1AhbS.js","assets/js/vendor-maps-C78ko_py.js","assets/js/vendor-animations-jk_Di6sJ.js","assets/js/vendor-ui-D_U17TOn.js","assets/js/vendor-router-BXLLWNa2.js","assets/js/vendor-state-B-5mdhwp.js","assets/js/vendor-websocket-1HjZlvs3.js","assets/css/EnhancedStudentMap-EoovT-YJ.css","assets/js/EDEL3XIZ-DErQsMl5.js"])))=>i.map(i=>d[i]);
var to=Object.defineProperty;var or=n=>{throw TypeError(n)};var no=(n,t,r)=>t in n?to(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var B=(n,t,r)=>no(n,typeof t!="symbol"?t+"":t,r),sr=(n,t,r)=>t.has(n)||or("Cannot "+r);var be=(n,t,r)=>(sr(n,t,"read from private field"),r?r.call(n):t.get(n)),_e=(n,t,r)=>t.has(n)?or("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,r),Ve=(n,t,r,o)=>(sr(n,t,"write to private field"),o?o.call(n,r):t.set(n,r),r);import{r as h,d as ro,a as er}from"./vendor-react-CyT1AhbS.js";import{c as ir,_ as pr}from"./vendor-ui-D_U17TOn.js";import{u as oo,a as Cn,B as so,R as io,b as ze,L as Ln}from"./vendor-router-BXLLWNa2.js";import{c as lo,u as ao,a as co,o as mo,j as uo,Q as fo,b as go}from"./vendor-state-B-5mdhwp.js";import{l as ho}from"./vendor-websocket-1HjZlvs3.js";import{m as Oe}from"./vendor-maps-C78ko_py.js";import{m as ee,A as un}from"./vendor-animations-jk_Di6sJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var vr={exports:{}},Un={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var n=h,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),y=Symbol.iterator,k="@@iterator";function $(d){if(d===null||typeof d!="object")return null;var N=y&&d[y]||d[k];return typeof N=="function"?N:null}var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function j(d){{for(var N=arguments.length,V=new Array(N>1?N-1:0),H=1;H<N;H++)V[H-1]=arguments[H];v("error",d,V)}}function v(d,N,V){{var H=x.ReactDebugCurrentFrame,se=H.getStackAddendum();se!==""&&(N+="%s",V=V.concat([se]));var ue=V.map(function(re){return String(re)});ue.unshift("Warning: "+N),Function.prototype.apply.call(console[d],console,ue)}}var L=!1,E=!1,U=!1,R=!1,O=!1,Q;Q=Symbol.for("react.module.reference");function M(d){return!!(typeof d=="string"||typeof d=="function"||d===o||d===i||O||d===s||d===u||d===f||R||d===D||L||E||U||typeof d=="object"&&d!==null&&(d.$$typeof===b||d.$$typeof===g||d.$$typeof===a||d.$$typeof===l||d.$$typeof===c||d.$$typeof===Q||d.getModuleId!==void 0))}function T(d,N,V){var H=d.displayName;if(H)return H;var se=N.displayName||N.name||"";return se!==""?V+"("+se+")":V}function C(d){return d.displayName||"Context"}function A(d){if(d==null)return null;if(typeof d.tag=="number"&&j("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case o:return"Fragment";case r:return"Portal";case i:return"Profiler";case s:return"StrictMode";case u:return"Suspense";case f:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case l:var N=d;return C(N)+".Consumer";case a:var V=d;return C(V._context)+".Provider";case c:return T(d,d.render,"ForwardRef");case g:var H=d.displayName||null;return H!==null?H:A(d.type)||"Memo";case b:{var se=d,ue=se._payload,re=se._init;try{return A(re(ue))}catch{return null}}}return null}var I=Object.assign,fe=0,Ie,he,J,Z,S,q,ne;function P(){}P.__reactDisabledLog=!0;function w(){{if(fe===0){Ie=console.log,he=console.info,J=console.warn,Z=console.error,S=console.group,q=console.groupCollapsed,ne=console.groupEnd;var d={configurable:!0,enumerable:!0,value:P,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}fe++}}function G(){{if(fe--,fe===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:I({},d,{value:Ie}),info:I({},d,{value:he}),warn:I({},d,{value:J}),error:I({},d,{value:Z}),group:I({},d,{value:S}),groupCollapsed:I({},d,{value:q}),groupEnd:I({},d,{value:ne})})}fe<0&&j("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var xe=x.ReactCurrentDispatcher,De;function F(d,N,V){{if(De===void 0)try{throw Error()}catch(se){var H=se.stack.trim().match(/\n( *(at )?)/);De=H&&H[1]||""}return`
`+De+d}}var Y=!1,ve;{var Ye=typeof WeakMap=="function"?WeakMap:Map;ve=new Ye}function X(d,N){if(!d||Y)return"";{var V=ve.get(d);if(V!==void 0)return V}var H;Y=!0;var se=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ue;ue=xe.current,xe.current=null,w();try{if(N){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Le){H=Le}Reflect.construct(d,[],re)}else{try{re.call()}catch(Le){H=Le}d.call(re.prototype)}}else{try{throw Error()}catch(Le){H=Le}d()}}catch(Le){if(Le&&H&&typeof Le.stack=="string"){for(var te=Le.stack.split(`
`),Me=H.stack.split(`
`),pe=te.length-1,je=Me.length-1;pe>=1&&je>=0&&te[pe]!==Me[je];)je--;for(;pe>=1&&je>=0;pe--,je--)if(te[pe]!==Me[je]){if(pe!==1||je!==1)do if(pe--,je--,je<0||te[pe]!==Me[je]){var Fe=`
`+te[pe].replace(" at new "," at ");return d.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",d.displayName)),typeof d=="function"&&ve.set(d,Fe),Fe}while(pe>=1&&je>=0);break}}}finally{Y=!1,xe.current=ue,G(),Error.prepareStackTrace=se}var it=d?d.displayName||d.name:"",tt=it?F(it):"";return typeof d=="function"&&ve.set(d,tt),tt}function ye(d,N,V){return X(d,!1)}function pt(d){var N=d.prototype;return!!(N&&N.isReactComponent)}function ge(d,N,V){if(d==null)return"";if(typeof d=="function")return X(d,pt(d));if(typeof d=="string")return F(d);switch(d){case u:return F("Suspense");case f:return F("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case c:return ye(d.render);case g:return ge(d.type,N,V);case b:{var H=d,se=H._payload,ue=H._init;try{return ge(ue(se),N,V)}catch{}}}return""}var Ce=Object.prototype.hasOwnProperty,Ht={},Re=x.ReactDebugCurrentFrame;function Ze(d){if(d){var N=d._owner,V=ge(d.type,d._source,N?N.type:null);Re.setExtraStackFrame(V)}else Re.setExtraStackFrame(null)}function Be(d,N,V,H,se){{var ue=Function.call.bind(Ce);for(var re in d)if(ue(d,re)){var te=void 0;try{if(typeof d[re]!="function"){var Me=Error((H||"React class")+": "+V+" type `"+re+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[re]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Me.name="Invariant Violation",Me}te=d[re](N,re,H,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(pe){te=pe}te&&!(te instanceof Error)&&(Ze(se),j("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",H||"React class",V,re,typeof te),Ze(null)),te instanceof Error&&!(te.message in Ht)&&(Ht[te.message]=!0,Ze(se),j("Failed %s type: %s",V,te.message),Ze(null))}}}var qt=Array.isArray;function He(d){return qt(d)}function Pn(d){{var N=typeof Symbol=="function"&&Symbol.toStringTag,V=N&&d[Symbol.toStringTag]||d.constructor.name||"Object";return V}}function Sn(d){try{return zt(d),!1}catch{return!0}}function zt(d){return""+d}function Wt(d){if(Sn(d))return j("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pn(d)),zt(d)}var Xe=x.ReactCurrentOwner,Gt={key:!0,ref:!0,__self:!0,__source:!0},Yt,vt,Ct;Ct={};function Vn(d){if(Ce.call(d,"ref")){var N=Object.getOwnPropertyDescriptor(d,"ref").get;if(N&&N.isReactWarning)return!1}return d.ref!==void 0}function Kt(d){if(Ce.call(d,"key")){var N=Object.getOwnPropertyDescriptor(d,"key").get;if(N&&N.isReactWarning)return!1}return d.key!==void 0}function Qt(d,N){if(typeof d.ref=="string"&&Xe.current&&N&&Xe.current.stateNode!==N){var V=A(Xe.current.type);Ct[V]||(j('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',A(Xe.current.type),d.ref),Ct[V]=!0)}}function kn(d,N){{var V=function(){Yt||(Yt=!0,j("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",N))};V.isReactWarning=!0,Object.defineProperty(d,"key",{get:V,configurable:!0})}}function An(d,N){{var V=function(){vt||(vt=!0,j("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",N))};V.isReactWarning=!0,Object.defineProperty(d,"ref",{get:V,configurable:!0})}}var Jt=function(d,N,V,H,se,ue,re){var te={$$typeof:t,type:d,key:N,ref:V,props:re,_owner:ue};return te._store={},Object.defineProperty(te._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(te,"_self",{configurable:!1,enumerable:!1,writable:!1,value:H}),Object.defineProperty(te,"_source",{configurable:!1,enumerable:!1,writable:!1,value:se}),Object.freeze&&(Object.freeze(te.props),Object.freeze(te)),te};function Mn(d,N,V,H,se){{var ue,re={},te=null,Me=null;V!==void 0&&(Wt(V),te=""+V),Kt(N)&&(Wt(N.key),te=""+N.key),Vn(N)&&(Me=N.ref,Qt(N,se));for(ue in N)Ce.call(N,ue)&&!Gt.hasOwnProperty(ue)&&(re[ue]=N[ue]);if(d&&d.defaultProps){var pe=d.defaultProps;for(ue in pe)re[ue]===void 0&&(re[ue]=pe[ue])}if(te||Me){var je=typeof d=="function"?d.displayName||d.name||"Unknown":d;te&&kn(re,je),Me&&An(re,je)}return Jt(d,te,Me,se,H,Xe.current,re)}}var jt=x.ReactCurrentOwner,Zt=x.ReactDebugCurrentFrame;function Ke(d){if(d){var N=d._owner,V=ge(d.type,d._source,N?N.type:null);Zt.setExtraStackFrame(V)}else Zt.setExtraStackFrame(null)}var Dt;Dt=!1;function yt(d){return typeof d=="object"&&d!==null&&d.$$typeof===t}function Xt(){{if(jt.current){var d=A(jt.current.type);if(d)return`

Check the render method of \``+d+"`."}return""}}function m(d){{if(d!==void 0){var N=d.fileName.replace(/^.*[\\\/]/,""),V=d.lineNumber;return`

Check your code at `+N+":"+V+"."}return""}}var p={};function _(d){{var N=Xt();if(!N){var V=typeof d=="string"?d:d.displayName||d.name;V&&(N=`

Check the top-level render call using <`+V+">.")}return N}}function z(d,N){{if(!d._store||d._store.validated||d.key!=null)return;d._store.validated=!0;var V=_(N);if(p[V])return;p[V]=!0;var H="";d&&d._owner&&d._owner!==jt.current&&(H=" It was passed a child from "+A(d._owner.type)+"."),Ke(d),j('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',V,H),Ke(null)}}function de(d,N){{if(typeof d!="object")return;if(He(d))for(var V=0;V<d.length;V++){var H=d[V];yt(H)&&z(H,N)}else if(yt(d))d._store&&(d._store.validated=!0);else if(d){var se=$(d);if(typeof se=="function"&&se!==d.entries)for(var ue=se.call(d),re;!(re=ue.next()).done;)yt(re.value)&&z(re.value,N)}}}function me(d){{var N=d.type;if(N==null||typeof N=="string")return;var V;if(typeof N=="function")V=N.propTypes;else if(typeof N=="object"&&(N.$$typeof===c||N.$$typeof===g))V=N.propTypes;else return;if(V){var H=A(N);Be(V,d.props,"prop",H,d)}else if(N.PropTypes!==void 0&&!Dt){Dt=!0;var se=A(N);j("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",se||"Unknown")}typeof N.getDefaultProps=="function"&&!N.getDefaultProps.isReactClassApproved&&j("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ee(d){{for(var N=Object.keys(d.props),V=0;V<N.length;V++){var H=N[V];if(H!=="children"&&H!=="key"){Ke(d),j("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",H),Ke(null);break}}d.ref!==null&&(Ke(d),j("Invalid attribute `ref` supplied to `React.Fragment`."),Ke(null))}}var Qe={};function qe(d,N,V,H,se,ue){{var re=M(d);if(!re){var te="";(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(te+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Me=m(se);Me?te+=Me:te+=Xt();var pe;d===null?pe="null":He(d)?pe="array":d!==void 0&&d.$$typeof===t?(pe="<"+(A(d.type)||"Unknown")+" />",te=" Did you accidentally export a JSX literal instead of a component?"):pe=typeof d,j("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",pe,te)}var je=Mn(d,N,V,se,ue);if(je==null)return je;if(re){var Fe=N.children;if(Fe!==void 0)if(H)if(He(Fe)){for(var it=0;it<Fe.length;it++)de(Fe[it],d);Object.freeze&&Object.freeze(Fe)}else j("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else de(Fe,d)}if(Ce.call(N,"key")){var tt=A(d),Le=Object.keys(N).filter(function(eo){return eo!=="key"}),_n=Le.length>0?"{key: someKey, "+Le.join(": ..., ")+": ...}":"{key: someKey}";if(!Qe[tt+_n]){var Xr=Le.length>0?"{"+Le.join(": ..., ")+": ...}":"{}";j(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,_n,tt,Xr,tt),Qe[tt+_n]=!0}}return d===o?Ee(je):me(je),je}}var et=qe;Un.Fragment=o,Un.jsxDEV=et})();vr.exports=Un;var e=vr.exports,Hn={},Tn=ro;{var en=Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Hn.createRoot=function(n,t){en.usingClientEntryPoint=!0;try{return Tn.createRoot(n,t)}finally{en.usingClientEntryPoint=!1}},Hn.hydrateRoot=function(n,t,r){en.usingClientEntryPoint=!0;try{return Tn.hydrateRoot(n,t,r)}finally{en.usingClientEntryPoint=!1}}}const lr={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!1,VITE_API_URL:"http://localhost:3000",VITE_MAPLIBRE_TOKEN:"",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI",VITE_SUPABASE_URL:"https://gthwmwfwvhyriygpcdlr.supabase.co",VITE_USER_NODE_ENV:"development",VITE_WEBSOCKET_URL:"ws://localhost:3000"},Vt=new Map,tn=n=>{const t=Vt.get(n);return t?Object.fromEntries(Object.entries(t.stores).map(([r,o])=>[r,o.getState()])):{}},bo=(n,t,r)=>{if(n===void 0)return{type:"untracked",connection:t.connect(r)};const o=Vt.get(r.name);if(o)return{type:"tracked",store:n,...o};const s={connection:t.connect(r),stores:{}};return Vt.set(r.name,s),{type:"tracked",store:n,...s}},No=(n,t)=>{if(t===void 0)return;const r=Vt.get(n);r&&(delete r.stores[t],Object.keys(r.stores).length===0&&Vt.delete(n))},xo=n=>{var t,r;if(!n)return;const o=n.split(`
`),s=o.findIndex(a=>a.includes("api.setState"));if(s<0)return;const i=((t=o[s+1])==null?void 0:t.trim())||"";return(r=/.+ (.+) .+/.exec(i))==null?void 0:r[1]},po=(n,t={})=>(r,o,s)=>{const{enabled:i,anonymousActionType:a,store:l,...c}=t;let u;try{u=(i??(lr?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return n(r,o,s);const{connection:f,...g}=bo(l,u,c);let b=!0;s.setState=(k,$,x)=>{const j=r(k,$);if(!b)return j;const v=x===void 0?{type:a||xo(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return l===void 0?(f==null||f.send(v,o()),j):(f==null||f.send({...v,type:`${l}/${v.type}`},{...tn(c.name),[l]:s.getState()}),j)},s.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),No(c.name,l)}};const D=(...k)=>{const $=b;b=!1,r(...k),b=$},y=n(s.setState,o,s);if(g.type==="untracked"?f==null||f.init(y):(g.stores[g.store]=s,f==null||f.init(Object.fromEntries(Object.entries(g.stores).map(([k,$])=>[k,k===g.store?y:$.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let k=!1;const $=s.dispatch;s.dispatch=(...x)=>{(lr?"production":void 0)!=="production"&&x[0].type==="__setState"&&!k&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),k=!0),$(...x)}}return f.subscribe(k=>{var $;switch(k.type){case"ACTION":if(typeof k.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return In(k.payload,x=>{if(x.type==="__setState"){if(l===void 0){D(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const j=x.state[l];if(j==null)return;JSON.stringify(s.getState())!==JSON.stringify(j)&&D(j);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(x)});case"DISPATCH":switch(k.payload.type){case"RESET":return D(y),l===void 0?f==null?void 0:f.init(s.getState()):f==null?void 0:f.init(tn(c.name));case"COMMIT":if(l===void 0){f==null||f.init(s.getState());return}return f==null?void 0:f.init(tn(c.name));case"ROLLBACK":return In(k.state,x=>{if(l===void 0){D(x),f==null||f.init(s.getState());return}D(x[l]),f==null||f.init(tn(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return In(k.state,x=>{if(l===void 0){D(x);return}JSON.stringify(s.getState())!==JSON.stringify(x[l])&&D(x[l])});case"IMPORT_STATE":{const{nextLiftedState:x}=k.payload,j=($=x.computedStates.slice(-1)[0])==null?void 0:$.state;if(!j)return;D(l===void 0?j:j[l]),f==null||f.send(null,x);return}case"PAUSE_RECORDING":return b=!b}return}}),y},vo=po,In=(n,t)=>{let r;try{r=JSON.parse(n)}catch(o){console.error("[zustand devtools middleware] Could not parse the received json",o)}r!==void 0&&t(r)},Co=lo()(vo((n,t)=>({isAuthenticated:!1,user:null,loading:!0,error:null,setAuthState:r=>n(o=>({...o,...r})),setUser:r=>n(()=>({user:r,isAuthenticated:!!r})),setLoading:r=>n({loading:r}),setError:r=>n({error:r}),clearError:()=>n({error:null}),isAdmin:()=>{var o;return((o=t().user)==null?void 0:o.role)==="admin"},isDriver:()=>{var o;return((o=t().user)==null?void 0:o.role)==="driver"},isStudent:()=>{var o;return((o=t().user)==null?void 0:o.role)==="student"}}),{name:"auth-store"})),jo=()=>"http://localhost:3000",Do=()=>"ws://localhost:3000",Pe={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:jo(),websocketUrl:Do()}},isDevelopment:!0,isProduction:!1};console.log("🔧 Environment Configuration:",{supabaseUrl:Pe.supabase.url?"✅ Set":"❌ Missing",supabaseKey:Pe.supabase.anonKey?"✅ Set":"❌ Missing",apiUrl:Pe.api.url,websocketUrl:Pe.api.websocketUrl,currentHost:window.location.hostname,currentProtocol:window.location.protocol,envVar:"http://localhost:3000"});const yo=()=>{const{url:n,anonKey:t}=Pe.supabase;if(console.log("🔧 Validating Supabase configuration:",{url:n?"✅ Set":"❌ Missing",anonKey:t?"✅ Set":"❌ Missing",envVars:{VITE_SUPABASE_URL:"✅ Set",VITE_SUPABASE_ANON_KEY:"✅ Set"}}),!n||n==="your_supabase_project_url"||n==="")throw console.error("❌ Supabase URL validation failed:",{url:n,envVar:"https://gthwmwfwvhyriygpcdlr.supabase.co"}),new Error("Invalid Supabase URL. Please check your environment variables.");if(!t||t==="your_supabase_anon_key_here"||t==="")throw console.error("❌ Supabase anon key validation failed:",{anonKey:t?"SET":"MISSING",envVar:"SET"}),new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(n)}catch(r){throw console.error("❌ Supabase URL format validation failed:",{url:n,error:r}),new Error(`Invalid Supabase URL format: ${n}`)}return console.log("✅ Supabase configuration validated successfully"),{url:n,anonKey:t}},Eo=()=>{try{const n=yo(),t=ir(n.url,n.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Supabase client created successfully"),t}catch(n){console.error("❌ Failed to create Supabase client:",n);{console.log("🔄 Creating fallback Supabase client for development...");const t=ir("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Fallback Supabase client created"),t}}},le=Eo();class wo{constructor(){B(this,"currentUser",null);B(this,"currentSession",null);B(this,"currentProfile",null);B(this,"currentDriverAssignment",null);B(this,"authStateChangeListener",null);B(this,"_isInitialized",!1);this.initializeAuth()}async initializeAuth(){try{const{data:{session:t},error:r}=await le.auth.getSession();if(r){console.error("❌ Error getting session:",r),this._isInitialized=!0;return}t&&(console.log("🔑 Setting initial session for user:",t.user.email),this.currentSession=t,this.currentUser=t.user,console.log("🔑 Session access token:",t.access_token?"Exists":"Missing"),await this.loadUserProfile(t.user.id));const{data:{subscription:o}}=le.auth.onAuthStateChange(async(s,i)=>{var a;console.log("🔄 Auth state changed:",s,(a=i==null?void 0:i.user)==null?void 0:a.email),this.currentSession=i,this.currentUser=(i==null?void 0:i.user)||null,i&&console.log("🔑 Auth state change - Session access token:",i.access_token?"Exists":"Missing"),i!=null&&i.user?await this.loadUserProfile(i.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()});return this._isInitialized=!0,console.log("✅ Auth service initialized"),()=>o.unsubscribe()}catch(t){console.error("❌ Error initializing auth:",t),this._isInitialized=!0}}async loadUserProfile(t){var r,o,s,i,a,l,c,u,f,g,b,D,y;try{const k=(o=(r=this.currentUser)==null?void 0:r.user_metadata)==null?void 0:o.roles;if(k&&Array.isArray(k)&&k.length>1){const U=window.location.pathname;let R="admin";U.includes("/driver")?R="driver":U.includes("/admin")?R="admin":R=["siddharthmali.211@gmail.com"].includes(((i=(s=this.currentUser)==null?void 0:s.email)==null?void 0:i.toLowerCase())||"")?"admin":"driver";const{data:O,error:Q}=await le.from("profiles").select("*").eq("id",t).single();if(Q){console.error("❌ Error loading user profile:",Q),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}this.currentProfile={id:O.id,email:((a=this.currentUser)==null?void 0:a.email)||"",role:R,full_name:O.full_name,first_name:((l=O.full_name)==null?void 0:l.split(" ")[0])||"",last_name:((c=O.full_name)==null?void 0:c.split(" ").slice(1).join(" "))||"",created_at:O.created_at,updated_at:O.updated_at};return}const{data:x,error:j}=await le.from("profiles").select("*").eq("id",t).single();if(j){console.error("❌ Error loading user profile:",j),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}const L=["siddharthmali.211@gmail.com"].includes(((f=(u=this.currentUser)==null?void 0:u.email)==null?void 0:f.toLowerCase())||""),E=L?"admin":x.role;console.log(`🔍 User ${(g=this.currentUser)==null?void 0:g.email} - Database role: ${x.role}, Admin check: ${L}, Final role: ${E}`),this.currentProfile={id:x.id,email:((b=this.currentUser)==null?void 0:b.email)||"",role:E,full_name:x.full_name,first_name:((D=x.full_name)==null?void 0:D.split(" ")[0])||"",last_name:((y=x.full_name)==null?void 0:y.split(" ").slice(1).join(" "))||"",created_at:x.created_at,updated_at:x.updated_at}}catch(k){console.error("❌ Error in loadUserProfile:",k),this.setTemporaryProfileWithRoleCheck(t,this.currentUser)}}setTemporaryProfileWithRoleCheck(t,r){var a,l,c,u,f,g,b,D;console.log("🔄 Setting temporary profile with role check for user login");const i=["siddharthmali.211@gmail.com"].includes(((a=r.email)==null?void 0:a.toLowerCase())||"")?"admin":"student";console.log(`🔍 User ${r.email} assigned role: ${i}`),this.currentProfile={id:t,email:r.email||"",role:i,full_name:((l=r.user_metadata)==null?void 0:l.full_name)||((c=r.email)==null?void 0:c.split("@")[0])||"User",first_name:((f=(u=r.user_metadata)==null?void 0:u.full_name)==null?void 0:f.split(" ")[0])||((g=r.email)==null?void 0:g.split("@")[0])||"User",last_name:((D=(b=r.user_metadata)==null?void 0:b.full_name)==null?void 0:D.split(" ").slice(1).join(" "))||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}async signIn(t,r){var o;try{console.log("🔐 Starting sign in process for:",t);const s=le.auth.signInWithPassword({email:t,password:r}),i=new Promise((c,u)=>{setTimeout(()=>u(new Error("Authentication timeout")),5e3)}),{data:a,error:l}=await Promise.race([s,i]);if(l)return console.error("❌ Sign in error:",l),{success:!1,error:l.message};if(console.log("✅ Supabase authentication successful"),a.user&&a.session){console.log("👤 User data received:",a.user.email),this.currentUser=a.user,this.currentSession=a.session,console.log("📋 Loading user profile...");try{const c=this.loadUserProfile(a.user.id),u=new Promise((f,g)=>{setTimeout(()=>g(new Error("Profile loading timeout")),3e3)});await Promise.race([c,u]),console.log("✅ Profile loaded:",(o=this.currentProfile)==null?void 0:o.role)}catch(c){console.warn("⚠️ Profile loading failed, using temporary profile:",c),this.setTemporaryProfileWithRoleCheck(a.user.id,a.user)}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return console.error("❌ No user or session data received"),{success:!1,error:"Authentication failed"}}catch(s){return console.error("❌ Sign in error:",s),s instanceof Error&&s.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:s instanceof Error&&s.message.includes("timeout")?{success:!1,error:"Login timed out. Please try again."}:{success:!1,error:"Network error during sign in"}}}async signUp(t,r,o){try{const{data:s,error:i}=await le.auth.signUp({email:t,password:r,options:{data:{full_name:o.full_name,role:o.role||"student"}}});if(i)return console.error("❌ Sign up error:",i),{success:!1,error:i.message};if(s.user){const{error:a}=await le.from("profiles").insert({id:s.user.id,full_name:o.full_name||"Unknown User",role:o.role||"student"});return a?(console.error("❌ Error creating profile:",a),{success:!1,error:"Profile creation failed"}):{success:!0}}return{success:!1,error:"Registration failed"}}catch(s){return console.error("❌ Sign up error:",s),{success:!1,error:"Network error during sign up"}}}async signOut(){try{console.log("🔐 Starting sign out process...");const{error:t}=await le.auth.signOut();return t?(console.error("❌ Sign out error:",t),{success:!1,error:t.message}):(console.log("✅ Sign out successful"),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(t){return console.error("❌ Sign out error:",t),{success:!1,error:"Network error during sign out"}}}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(t){var r;return((r=this.currentProfile)==null?void 0:r.role)===t}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var r,o,s;let t=((r=this.currentSession)==null?void 0:r.access_token)||null;if(!t)try{const i=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const a of i){const l=localStorage.getItem(a);if(l){const c=JSON.parse(l);if(t=((o=c==null?void 0:c.currentSession)==null?void 0:o.access_token)||(c==null?void 0:c.access_token)||((s=c==null?void 0:c.session)==null?void 0:s.access_token)||null,t){console.log(`🔑 Retrieved token from localStorage fallback (${a})`);break}}}}catch(i){console.warn("⚠️ Error reading token from localStorage:",i)}return console.log("🔑 getAccessToken called:",t?"Token exists":"No token","Session:",!!this.currentSession),t}async validateTokenForAPI(){let t=this.getAccessToken(),r=!1;if(!t)return{valid:!1,token:null,refreshed:!1};try{const{data:{user:o},error:s}=await le.auth.getUser(t);if(s||!o){console.log("🔄 Token validation failed, attempting refresh:",s==null?void 0:s.message);const i=await this.refreshSession();if(i.success)t=this.getAccessToken(),r=!0,console.log("✅ Token refreshed successfully");else return console.log("❌ Token refresh failed:",i.error),{valid:!1,token:null,refreshed:!1}}if(t){const{data:{user:i},error:a}=await le.auth.getUser(t);return a||!i?(console.log("❌ Final token validation failed:",a==null?void 0:a.message),{valid:!1,token:null,refreshed:r}):{valid:!0,token:t,refreshed:r}}return{valid:!1,token:null,refreshed:r}}catch(o){return console.error("❌ Token validation error:",o),{valid:!1,token:null,refreshed:!1}}}async refreshSession(){try{if(!this.currentSession)return console.log("🔄 No current session to refresh"),{success:!1,error:"No session to refresh"};const{data:t,error:r}=await le.auth.refreshSession();return r?r.message.includes("Auth session missing")?(console.log("🔄 No session to refresh (expected for unauthenticated users)"),{success:!1,error:"No session to refresh"}):(console.error("❌ Session refresh error:",r),{success:!1,error:r.message}):t.session?(this.currentSession=t.session,this.currentUser=t.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(t){return console.error("❌ Session refresh error:",t),{success:!1,error:"Network error during session refresh"}}}async updateProfile(t){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:r}=await le.from("profiles").update(t).eq("id",this.currentUser.id);return r?(console.error("❌ Profile update error:",r),{success:!1,error:r.message}):(await this.loadUserProfile(this.currentUser.id),{success:!0})}catch(r){return console.error("❌ Profile update error:",r),{success:!1,error:"Network error during profile update"}}}onAuthStateChange(t){this.authStateChangeListener=t}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}async forceFreshLogin(){try{console.log("🔄 Forcing fresh login...");const t=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);o&&(o.includes("supabase")||o.includes("auth")||o.includes("sb-"))&&t.push(o)}return t.forEach(r=>{localStorage.removeItem(r),console.log(`🗑️ Removed localStorage key: ${r}`)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,console.log("✅ Fresh login state prepared"),{success:!0}}catch(t){return console.error("❌ Error forcing fresh login:",t),{success:!1,error:"Failed to force fresh login"}}}async recoverSession(){var t,r,o,s;try{console.log("🔄 Attempting to recover session from localStorage...");const i=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let a=null,l=null;for(const b of i){const D=localStorage.getItem(b);if(D){a=D,l=b,console.log(`📝 Found session in localStorage key: ${b}`);break}}if(!a)return console.log("📝 No stored session found in any localStorage key"),{success:!1,error:"No stored session"};let c;try{c=JSON.parse(a)}catch(b){return console.log("❌ Failed to parse stored session:",b),{success:!1,error:"Invalid session format"}}const u=((t=c==null?void 0:c.currentSession)==null?void 0:t.access_token)||(c==null?void 0:c.access_token)||((r=c==null?void 0:c.session)==null?void 0:r.access_token);if(!u)return console.log("🔑 No access token found in stored session structure:",c),{success:!1,error:"No access token in stored session"};console.log("🔑 Found access token, validating...");const{data:{user:f},error:g}=await le.auth.getUser(u);return g||!f?(console.log("❌ Stored token is invalid:",g==null?void 0:g.message),l&&localStorage.removeItem(l),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:u,refresh_token:((o=c==null?void 0:c.currentSession)==null?void 0:o.refresh_token)||(c==null?void 0:c.refresh_token),expires_in:((s=c==null?void 0:c.currentSession)==null?void 0:s.expires_in)||(c==null?void 0:c.expires_in),token_type:"bearer",user:f},this.currentUser=f,await this.loadUserProfile(f.id),console.log("✅ Session recovered successfully for user:",f.email),{success:!0})}catch(i){return console.error("❌ Error recovering session:",i),{success:!1,error:"Failed to recover session"}}}async getDriverBusAssignment(t){try{const{data:r,error:o}=await le.from("buses").select("id, number_plate, route_id").eq("assigned_driver_id",t).eq("is_active",!0).single();if(o||!r)return console.error("❌ Error fetching bus assignment:",o),null;let s="";if(r.route_id){const{data:c,error:u}=await le.from("routes").select("name").eq("id",r.route_id).single();!u&&c&&(s=c.name)}let i="Unknown Driver";const{data:a,error:l}=await le.from("profiles").select("full_name").eq("id",t).single();if(!l&&(a!=null&&a.full_name))i=a.full_name;else{const{data:c,error:u}=await le.from("users").select("first_name, last_name").eq("id",t).single();!u&&c&&(i=`${c.first_name||""} ${c.last_name||""}`.trim()||"Unknown Driver")}return{driver_id:t,bus_id:r.id,bus_number:r.number_plate,route_id:r.route_id||"",route_name:s,driver_name:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(r){return console.error("❌ Error in getDriverBusAssignment:",r),null}}async storeDriverBusAssignment(t){try{return this.currentDriverAssignment={...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},console.log("✅ Driver bus assignment stored in memory successfully"),!0}catch(r){return console.error("❌ Error in storeDriverBusAssignment:",r),!1}}async clearDriverBusAssignment(){try{return this.currentDriverAssignment=null,console.log("✅ Driver bus assignment cleared from memory"),!0}catch(t){return console.error("❌ Error in clearDriverBusAssignment:",t),!1}}getCurrentDriverAssignment(){return this.currentDriverAssignment}async validateSession(){try{const{data:{session:t},error:r}=await le.auth.getSession();if(r)return console.error("❌ Session validation error:",r),!1;if(!t)return console.log("❌ No active session found"),!1;const o=new Date(t.expires_at*1e3),s=new Date;if(o.getTime()-s.getTime()<5*60*1e3){console.log("🔄 Session expiring soon, refreshing...");const{data:{session:a},error:l}=await le.auth.refreshSession();if(l)return console.error("❌ Session refresh error:",l),!1;a&&(this.currentSession=a,this.currentUser=a.user,console.log("✅ Session refreshed successfully"))}return!0}catch(t){return console.error("❌ Error validating session:",t),!1}}async validateDriverSession(){var t;try{if(!await this.validateSession())return{isValid:!1,assignment:null};if(((t=this.currentProfile)==null?void 0:t.role)!=="driver")return console.log("❌ User is not a driver"),{isValid:!1,assignment:null};const o=await this.getDriverBusAssignment(this.currentUser.id);return o?(this.currentDriverAssignment=o,{isValid:!0,assignment:o}):(console.log("❌ No active bus assignment found for driver"),{isValid:!1,assignment:null})}catch(r){return console.error("❌ Error validating driver session:",r),{isValid:!1,assignment:null}}}async logout(){var t;try{this.currentUser&&((t=this.currentProfile)==null?void 0:t.role)==="driver"&&await this.clearDriverBusAssignment(),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.currentDriverAssignment=null;const{error:r}=await le.auth.signOut();r?console.error("❌ Error signing out:",r):console.log("✅ Logged out successfully")}catch(r){console.error("❌ Error in logout:",r)}}}const ie=new wo;class Po{constructor(t,r={failureThreshold:5,recoveryTimeout:6e4,expectedErrors:[],monitorInterval:3e4}){B(this,"state","CLOSED");B(this,"failureCount",0);B(this,"lastFailureTime");B(this,"lastSuccessTime");B(this,"nextAttemptTime");B(this,"totalRequests",0);B(this,"successfulRequests",0);B(this,"failedRequests",0);B(this,"monitorTimer");this.name=t,this.config=r,this.startMonitoring()}async execute(t,r){if(this.totalRequests++,this.state==="OPEN")if(this.shouldAttemptReset())this.transitionToHalfOpen();else{if(console.warn(`🚨 Circuit breaker '${this.name}' is OPEN, using fallback`),r)return r();throw new Error(`Circuit breaker '${this.name}' is OPEN`)}try{const o=await t();return this.onSuccess(),o}catch(o){if(this.onFailure(o),r)return console.log(`🔄 Using fallback for '${this.name}' due to error:`,o),r();throw o}}onSuccess(){this.successfulRequests++,this.lastSuccessTime=Date.now(),this.failureCount=0,this.state==="HALF_OPEN"&&this.transitionToClosed()}onFailure(t){this.failedRequests++,this.lastFailureTime=Date.now();const r=(t==null?void 0:t.message)||(t==null?void 0:t.toString())||"";this.config.expectedErrors.some(s=>r.includes(s))||(this.failureCount++,this.failureCount>=this.config.failureThreshold&&this.transitionToOpen())}transitionToOpen(){this.state!=="OPEN"&&(console.warn(`🚨 Circuit breaker '${this.name}' transitioning to OPEN`),this.state="OPEN",this.nextAttemptTime=Date.now()+this.config.recoveryTimeout)}transitionToHalfOpen(){console.log(`🔄 Circuit breaker '${this.name}' transitioning to HALF_OPEN`),this.state="HALF_OPEN"}transitionToClosed(){console.log(`✅ Circuit breaker '${this.name}' transitioning to CLOSED`),this.state="CLOSED",this.failureCount=0,this.nextAttemptTime=void 0}shouldAttemptReset(){return this.nextAttemptTime!==void 0&&Date.now()>=this.nextAttemptTime}startMonitoring(){this.monitorTimer=setInterval(()=>{this.logMetrics()},this.config.monitorInterval)}logMetrics(){const t=this.getMetrics();console.log(`📊 Circuit Breaker '${this.name}' Metrics:`,{state:t.currentState,successRate:t.totalRequests>0?(t.successfulRequests/t.totalRequests*100).toFixed(2)+"%":"0%",failureCount:t.failureCount,totalRequests:t.totalRequests})}getMetrics(){return{totalRequests:this.totalRequests,successfulRequests:this.successfulRequests,failedRequests:this.failedRequests,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,currentState:this.state,failureCount:this.failureCount}}reset(){console.log(`🔄 Resetting circuit breaker '${this.name}'`),this.transitionToClosed()}destroy(){this.monitorTimer&&clearInterval(this.monitorTimer)}}class So{constructor(){B(this,"breakers",new Map)}create(t,r){if(this.breakers.has(t))return this.breakers.get(t);const o=new Po(t,r);return this.breakers.set(t,o),o}get(t){return this.breakers.get(t)}getAll(){return new Map(this.breakers)}reset(t){const r=this.breakers.get(t);r&&r.reset()}resetAll(){this.breakers.forEach(t=>t.reset())}destroy(){this.breakers.forEach(t=>t.destroy()),this.breakers.clear()}}const tr=new So,Vo=tr.create("api",{failureThreshold:3,recoveryTimeout:3e4,expectedErrors:["401","403","404"],monitorInterval:15e3});tr.create("websocket",{failureThreshold:5,recoveryTimeout:6e4,expectedErrors:[],monitorInterval:3e4});tr.create("supabase",{failureThreshold:3,recoveryTimeout:45e3,expectedErrors:["401","403"],monitorInterval:2e4});class ko{constructor(t={initialDelay:1e3,maxDelay:3e4,multiplier:2,maxAttempts:5,jitter:!0,jitterFactor:.1}){B(this,"attemptCount",0);B(this,"startTime",0);this.config=t}async execute(t,r){for(this.attemptCount=0,this.startTime=Date.now();this.attemptCount<this.config.maxAttempts;)try{return{success:!0,result:await t(),attempts:this.attemptCount+1,totalTime:Date.now()-this.startTime}}catch(o){if(this.attemptCount++,this.attemptCount>=this.config.maxAttempts)return{success:!1,error:o instanceof Error?o:new Error(String(o)),attempts:this.attemptCount,totalTime:Date.now()-this.startTime};const s=this.calculateDelay();r&&r(this.attemptCount,s,o instanceof Error?o:new Error(String(o))),console.log(`🔄 Retry attempt ${this.attemptCount}/${this.config.maxAttempts} in ${s}ms`),await this.sleep(s)}return{success:!1,error:new Error("Max retry attempts exceeded"),attempts:this.attemptCount,totalTime:Date.now()-this.startTime}}calculateDelay(){const t=Math.min(this.config.initialDelay*Math.pow(this.config.multiplier,this.attemptCount-1),this.config.maxDelay);if(!this.config.jitter)return t;const r=t*this.config.jitterFactor,o=(Math.random()-.5)*r;return Math.max(0,t+o)}sleep(t){return new Promise(r=>setTimeout(r,t))}reset(){this.attemptCount=0,this.startTime=0}getAttemptCount(){return this.attemptCount}getRemainingAttempts(){return Math.max(0,this.config.maxAttempts-this.attemptCount)}}const Ao=new ko({initialDelay:1e3,maxDelay:3e4,multiplier:2,maxAttempts:5,jitter:!0,jitterFactor:.15});class Mo{constructor(t={dbName:"BusTrackingOffline",dbVersion:1,maxAge:24*60*60*1e3,maxSize:1e3,syncInterval:3e4}){B(this,"db",null);B(this,"syncTimer",null);B(this,"isOnline",navigator.onLine);this.config=t,this.initializeDB(),this.setupNetworkListeners(),this.startSyncTimer()}async initializeDB(){return new Promise((t,r)=>{const o=indexedDB.open(this.config.dbName,this.config.dbVersion);o.onerror=()=>{console.error("❌ Failed to open IndexedDB:",o.error),r(o.error)},o.onsuccess=()=>{this.db=o.result,console.log("✅ IndexedDB initialized successfully"),t()},o.onupgradeneeded=s=>{const i=s.target.result;if(!i.objectStoreNames.contains("offlineData")){const a=i.createObjectStore("offlineData",{keyPath:"id"});a.createIndex("type","type",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("syncStatus","syncStatus",{unique:!1})}if(!i.objectStoreNames.contains("syncQueue")){const a=i.createObjectStore("syncQueue",{keyPath:"id"});a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("retryCount","retryCount",{unique:!1})}console.log("✅ IndexedDB schema upgraded")}})}setupNetworkListeners(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("🌐 Network connection restored"),this.syncPendingData()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("📴 Network connection lost")})}startSyncTimer(){this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=setInterval(()=>{this.isOnline&&this.syncPendingData()},this.config.syncInterval)}async storeData(t,r,o){if(!this.db)throw new Error("IndexedDB not initialized");const s={id:r,type:t,data:o,timestamp:Date.now(),version:1,syncStatus:"synced"};return new Promise((i,a)=>{const u=this.db.transaction(["offlineData"],"readwrite").objectStore("offlineData").put(s);u.onsuccess=()=>{console.log(`💾 Stored ${t} data offline:`,r),i()},u.onerror=()=>{console.error("❌ Failed to store data offline:",u.error),a(u.error)}})}async getData(t,r){return this.db?new Promise((o,s)=>{const l=this.db.transaction(["offlineData"],"readonly").objectStore("offlineData").get(r);l.onsuccess=()=>{const c=l.result;c&&c.type===t?Date.now()-c.timestamp<this.config.maxAge?o(c.data):(this.removeData(t,r),o(null)):o(null)},l.onerror=()=>{console.error("❌ Failed to get data from offline storage:",l.error),s(l.error)}}):null}async getAllData(t){return this.db?new Promise((r,o)=>{const l=this.db.transaction(["offlineData"],"readonly").objectStore("offlineData").index("type").getAll(t);l.onsuccess=()=>{const u=l.result.filter(f=>Date.now()-f.timestamp<this.config.maxAge).map(f=>f.data);r(u)},l.onerror=()=>{console.error("❌ Failed to get all data from offline storage:",l.error),o(l.error)}}):[]}async removeData(t,r){if(this.db)return new Promise((o,s)=>{const l=this.db.transaction(["offlineData"],"readwrite").objectStore("offlineData").delete(r);l.onsuccess=()=>{console.log(`🗑️ Removed ${t} data from offline storage:`,r),o()},l.onerror=()=>{console.error("❌ Failed to remove data from offline storage:",l.error),s(l.error)}})}async addToSyncQueue(t,r,o){if(!this.db)throw new Error("IndexedDB not initialized");const s={id:`${t}_${Date.now()}_${Math.random()}`,operation:t,endpoint:r,data:o,timestamp:Date.now(),retryCount:0};return new Promise((i,a)=>{const u=this.db.transaction(["syncQueue"],"readwrite").objectStore("syncQueue").put(s);u.onsuccess=()=>{console.log("📋 Added to sync queue:",s.id),i()},u.onerror=()=>{console.error("❌ Failed to add to sync queue:",u.error),a(u.error)}})}async getSyncQueue(){return this.db?new Promise((t,r)=>{const i=this.db.transaction(["syncQueue"],"readonly").objectStore("syncQueue").getAll();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("❌ Failed to get sync queue:",i.error),r(i.error)}}):[]}async removeFromSyncQueue(t){if(this.db)return new Promise((r,o)=>{const a=this.db.transaction(["syncQueue"],"readwrite").objectStore("syncQueue").delete(t);a.onsuccess=()=>{console.log("✅ Removed from sync queue:",t),r()},a.onerror=()=>{console.error("❌ Failed to remove from sync queue:",a.error),o(a.error)}})}async updateRetryCount(t,r){if(this.db)return new Promise((o,s)=>{const a=this.db.transaction(["syncQueue"],"readwrite").objectStore("syncQueue"),l=a.get(t);l.onsuccess=()=>{const c=l.result;if(c){c.retryCount=r;const u=a.put(c);u.onsuccess=()=>o(),u.onerror=()=>s(u.error)}else o()},l.onerror=()=>s(l.error)})}async syncPendingData(){if(!this.isOnline){console.log("📴 Skipping sync - offline");return}const t=await this.getSyncQueue();if(t.length!==0){console.log(`🔄 Syncing ${t.length} pending items...`);for(const r of t)try{const o=await fetch(r.endpoint,{method:r.operation==="delete"?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:r.operation!=="delete"?JSON.stringify(r.data):void 0});if(o.ok)await this.removeFromSyncQueue(r.id),console.log("✅ Synced item:",r.id);else throw new Error(`HTTP ${o.status}`)}catch(o){console.error(`❌ Failed to sync item ${r.id}:`,o);const s=r.retryCount+1;await this.updateRetryCount(r.id,s),s>=5&&(await this.removeFromSyncQueue(r.id),console.log(`🗑️ Removed item ${r.id} after max retries`))}}}async clearAll(){if(this.db)return new Promise((t,r)=>{const o=this.db.transaction(["offlineData","syncQueue"],"readwrite"),s=o.objectStore("offlineData"),i=o.objectStore("syncQueue"),a=s.clear(),l=i.clear();a.onsuccess=()=>{l.onsuccess=()=>{console.log("🗑️ Cleared all offline data"),t()},l.onerror=()=>r(l.error)},a.onerror=()=>r(a.error)})}async getStats(){return this.db?new Promise((t,r)=>{const o=this.db.transaction(["offlineData","syncQueue"],"readonly"),s=o.objectStore("offlineData"),i=o.objectStore("syncQueue"),a=s.getAll(),l=i.getAll();a.onsuccess=()=>{l.onsuccess=()=>{const c=a.result,u=l.result,f={};c.forEach(g=>{f[g.type]=(f[g.type]||0)+1}),t({totalItems:c.length,dataByType:f,queueItems:u.length,totalSize:JSON.stringify(c).length+JSON.stringify(u).length})},l.onerror=()=>r(l.error)},a.onerror=()=>r(a.error)}):{totalItems:0,dataByType:{},queueItems:0,totalSize:0}}destroy(){this.syncTimer&&clearInterval(this.syncTimer)}}const lt=new Mo;class _o{constructor(){B(this,"errorLog",[]);B(this,"maxLogSize",100)}logError(t,r,o="medium"){let s;t instanceof Error?s=t.message:typeof t=="string"?s=t:t instanceof Event?s=`Event error: ${t.type}`:s="Unknown error";let i={};if(typeof navigator<"u"&&"connection"in navigator){const l=navigator.connection;l&&(i={effectiveType:l.effectiveType,downlink:l.downlink,rtt:l.rtt,saveData:l.saveData})}const a={message:s,context:{service:r.service||"api",operation:r.operation||"unknown",timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,networkInfo:i,...r},severity:o,retryable:this.isRetryableError(t),suggestions:this.getSuggestions(t,r)};return this.errorLog.push(a),this.errorLog.length>this.maxLogSize&&this.errorLog.shift(),this.logToConsole(a),a}isRetryableError(t){let r;return t instanceof Error?r=t.message:typeof t=="string"?r=t:t instanceof Event?r=t.type:r="Unknown error",[/network/i,/timeout/i,/connection/i,/cors/i,/fetch/i,/websocket/i,/sse/i,/socket\.io/i,/error/i,/failed/i,/disconnect/i].some(s=>s.test(r))}getSuggestions(t,r){let o;t instanceof Error?o=t.message:typeof t=="string"?o=t:t instanceof Event?o=t.type:o="Unknown error";const s=[];return o.includes("CORS")&&(s.push("Check CORS configuration on the server"),s.push("Verify the API endpoint is accessible")),o.includes("timeout")&&(s.push("Increase connection timeout settings"),s.push("Check network connectivity")),o.includes("websocket")&&(s.push("Verify WebSocket server is running"),s.push("Check WebSocket URL configuration")),o.includes("sse")&&(s.push("Verify SSE endpoint is implemented on server"),s.push("Check SSE URL configuration")),o.includes("supabase")&&(s.push("Verify Supabase configuration"),s.push("Check Supabase service status")),s.length===0&&(s.push("Check network connectivity"),s.push("Verify server is running"),s.push("Check browser console for more details")),s}logToConsole(t){const{message:r,context:o,severity:s,retryable:i,suggestions:a}=t,c={low:"color: #6b7280",medium:"color: #f59e0b",high:"color: #ef4444",critical:"color: #dc2626; font-weight: bold"}[s],u=i?"🔄 Retryable":"❌ Not Retryable";console.group(`%c${s.toUpperCase()} ERROR - ${o.service.toUpperCase()}`,c),console.error(`Message: ${r}`),console.error(`Service: ${o.service}`),console.error(`Operation: ${o.operation}`),console.error(`Status: ${u}`),console.error(`Timestamp: ${o.timestamp}`),a.length>0&&(console.warn("Suggestions:"),a.forEach(f=>console.warn(`  • ${f}`))),console.groupEnd()}getErrorStats(){const t={},r={};return this.errorLog.forEach(o=>{t[o.context.service]=(t[o.context.service]||0)+1,r[o.severity]=(r[o.severity]||0)+1}),{total:this.errorLog.length,byService:t,bySeverity:r,recentErrors:this.errorLog.slice(-10)}}clearLog(){this.errorLog=[]}getErrors(){return[...this.errorLog]}hasCriticalErrors(){return this.errorLog.some(t=>t.severity==="critical")}getRetryableErrors(){return this.errorLog.filter(t=>t.retryable)}}const Lo=new _o,kt=(n,t,r)=>Lo.logError(n,t,r);class To{constructor(t){B(this,"baseUrl");B(this,"defaultTimeout",1e4);this.baseUrl=t||Pe.api.url}async request(t){const{endpoint:r,method:o="GET",data:s,headers:i={},timeout:a=this.defaultTimeout,useOfflineStorage:l=!0,retryOnFailure:c=!0}=t,u=`${this.baseUrl}${r}`,f=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{if(o==="GET"&&l){const b=await this.getFromOfflineStorage(r);if(b)return console.log(`📦 Serving cached data for ${r}`),{success:!0,data:b,fromCache:!0,timestamp:new Date().toISOString()}}const g=await Vo.execute(()=>this.executeRequest(u,o,s,i,a,f),c?()=>this.getFallbackData(r):void 0);return l&&g&&await this.storeInOfflineStorage(r,g),{success:!0,data:g,timestamp:new Date().toISOString()}}catch(g){if(kt(g,{service:"api",operation:`${o.toLowerCase()}-${r}`},"medium"),l){const b=await this.getFromOfflineStorage(r);if(b)return console.log(`📦 Using fallback data for ${r}`),{success:!0,data:b,fromCache:!0,timestamp:new Date().toISOString()}}return o!=="GET"&&l&&await this.queueForSync(o,r,s),{success:!1,error:g instanceof Error?g.message:"Request failed",timestamp:new Date().toISOString()}}}async executeRequest(t,r,o,s,i,a){const l=new AbortController,c=setTimeout(()=>l.abort(),i);try{const u=await fetch(t,{method:r,headers:{"Content-Type":"application/json","X-Request-ID":a,...s},body:o?JSON.stringify(o):void 0,signal:l.signal});if(clearTimeout(c),!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);return await u.json()}catch(u){throw clearTimeout(c),u instanceof Error?u.name==="AbortError"?new Error("Request timeout"):u:new Error("Unknown error occurred")}}async getFallbackData(t){const r=await Ao.execute(async()=>{const o=await this.getFromOfflineStorage(t);if(o)return o;throw new Error("No fallback data available")});if(r.success&&r.result)return r.result;throw new Error("No fallback data available")}async getFromOfflineStorage(t){try{const r=this.getDataTypeFromEndpoint(t),o=this.getStorageId(t);return await lt.getData(r,o)}catch(r){return console.warn("Failed to get data from offline storage:",r),null}}async storeInOfflineStorage(t,r){try{const o=this.getDataTypeFromEndpoint(t),s=this.getStorageId(t);await lt.storeData(o,s,r)}catch(o){console.warn("Failed to store data in offline storage:",o)}}async queueForSync(t,r,o){try{const s=t==="DELETE"?"delete":t==="PUT"?"update":"create";await lt.addToSyncQueue(s,r,o)}catch(s){console.warn("Failed to queue request for sync:",s)}}getDataTypeFromEndpoint(t){return t.includes("/buses")?"bus":t.includes("/routes")?"route":t.includes("/locations")?"location":t.includes("/drivers")?"driver":t.includes("/users")?"user":"bus"}getStorageId(t){return t.split("?")[0].replace(/[^a-zA-Z0-9]/g,"_")}async get(t,r){return this.request({endpoint:t,method:"GET",...r})}async post(t,r,o){return this.request({endpoint:t,method:"POST",data:r,...o})}async put(t,r,o){return this.request({endpoint:t,method:"PUT",data:r,...o})}async delete(t,r){return this.request({endpoint:t,method:"DELETE",...r})}async healthCheck(){return this.get("/health",{timeout:5e3,retryOnFailure:!0,useOfflineStorage:!1})}async getOfflineStats(){return await lt.getStats()}async clearOfflineStorage(){return await lt.clearAll()}async syncPendingData(){return await lt.syncPendingData()}}const nn=new To,Io=Pe.api.url;class Ro{constructor(t){B(this,"baseUrl");this.baseUrl=t}async backendRequest(t,r){const o=(r==null?void 0:r.method)||"GET",s={"Content-Type":"application/json"};try{const i=ie.getAccessToken();i&&(s.Authorization=`Bearer ${i}`)}catch{console.log("🔓 Public access - no authentication token available")}r!=null&&r.headers&&Object.assign(s,r.headers);try{let i;if(o==="GET")i=await nn.get(t,{headers:s});else if(o==="POST"){const a=r!=null&&r.body?JSON.parse(r.body):void 0;i=await nn.post(t,a,{headers:s})}else if(o==="PUT"){const a=r!=null&&r.body?JSON.parse(r.body):void 0;i=await nn.put(t,a,{headers:s})}else if(o==="DELETE")i=await nn.delete(t,{headers:s});else throw new Error(`Unsupported HTTP method: ${o}`);if(!i.success)throw new Error(i.error||"API request failed");return i.data}catch(i){throw kt(i,{service:"api",operation:`${o.toLowerCase()}-${t}`},"medium"),i}}async getHealth(){try{const t=await fetch(`${this.baseUrl}/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const r=await t.json();return console.log("✅ Health check successful:",r),r}catch(t){return console.error("❌ Health check failed:",t),{status:"unhealthy",timestamp:new Date().toISOString(),uptime:process.uptime(),environment:"development",services:{database:{status:"unhealthy",details:{status:"disconnected",details:{currentTime:new Date().toISOString(),postgresVersion:"unknown",poolSize:0,idleCount:0,waitingCount:0}}},api:{status:"down",database:"down"}}}}}async getAllBuses(){try{const t=await this.backendRequest("/buses");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getAllBuses:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusInfo(t){try{const r=await this.backendRequest(`/buses/${t}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getBusInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutes(){try{const t=await this.backendRequest("/routes");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getRoutes:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getRouteInfo(t){try{const r=await this.backendRequest(`/routes/${t}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching route info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getRouteInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getAllDrivers(){try{const t=await this.backendRequest("/admin/drivers");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching drivers from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getAllDrivers:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getDriverInfo(t){try{const r=await this.backendRequest(`/admin/drivers/${t}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching driver info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getDriverInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getLiveLocations(){try{const t=await this.backendRequest("/locations/current");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getLiveLocations:",t),t.message&&t.message.includes("401")?(console.log("ℹ️ Student access - no authentication required for viewing locations"),{success:!0,data:[],timestamp:new Date().toISOString()}):{success:!1,data:[],timestamp:new Date().toISOString()}}}async updateLiveLocation(t,r,o){try{const s=await this.backendRequest("/locations/update",{method:"POST",body:JSON.stringify({busId:t,driverId:r,latitude:o.latitude,longitude:o.longitude,speed:o.speed,heading:o.heading,timestamp:new Date().toISOString()})});return s.success&&s.data?{success:!0,data:s.data,timestamp:new Date().toISOString()}:(console.error("❌ Error updating live location via backend:",s.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(s){return console.error("❌ Error in updateLiveLocation:",s),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutesInViewport(t){try{const[r,o]=t[0],[s,i]=t[1],a=await fetch(`${this.baseUrl}/routes/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=await a.json();return console.log("✅ Routes in viewport fetched successfully:",l),l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getRoutesInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusesInViewport(t){try{const[r,o]=t[0],[s,i]=t[1],a=await fetch(`${this.baseUrl}/buses/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=await a.json();return console.log("✅ Buses in viewport fetched successfully:",l),l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getBusesInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getLiveLocationsInViewport(t){try{const[r,o]=t[0],[s,i]=t[1],a=await fetch(`${this.baseUrl}/locations/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=await a.json();return console.log("✅ Live locations in viewport fetched successfully:",l),l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getLiveLocationsInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusClusters(t,r){try{const[o,s]=t[0],[i,a]=t[1],l=await fetch(`${this.baseUrl}/buses/clusters?minLng=${o}&minLat=${s}&maxLng=${i}&maxLat=${a}&zoom=${r}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const c=await l.json();return console.log("✅ Bus clusters fetched successfully:",c),c.success&&c.data?{success:!0,data:c.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus clusters:",c.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(o){return console.error("❌ Error in getBusClusters:",o),{success:!1,data:[],timestamp:new Date().toISOString()}}}}const Fo=new Ro(Io),Oo={health:["health"]},Bo=()=>ao({queryKey:Oo.health,queryFn:async()=>{const n=await Fo.getHealth();if(!n)throw new Error("Health check returned undefined");return n},staleTime:3e4,refetchInterval:6e4,retry:3});class $o{constructor(){B(this,"socket",null);B(this,"_isConnected",!1);B(this,"connectionState","disconnected");B(this,"reconnectAttempts",0);B(this,"maxReconnectAttempts",10);B(this,"reconnectDelay",1e3);B(this,"maxReconnectDelay",3e4);B(this,"heartbeatInterval",null);B(this,"connectionTimeout",null);B(this,"lastHeartbeat",0);B(this,"isShuttingDown",!1);B(this,"connectionMonitorInterval",null);B(this,"busLocationListeners",[]);B(this,"driverConnectedListeners",[]);B(this,"driverDisconnectedListeners",[]);B(this,"studentConnectedListeners",[]);B(this,"busArrivingListeners",[]);this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.handleReconnect=this.handleReconnect.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this),this.monitorConnection=this.monitorConnection.bind(this)}async connect(){var t;if((t=this.socket)!=null&&t.connected||this.connectionState==="connecting"){console.log("🔌 WebSocket already connected or connecting");return}this.isShuttingDown&&(console.log("🔄 Resetting WebSocket service state for reconnection"),this.isShuttingDown=!1);try{this.connectionState="connecting",console.log("🔌 Connecting to WebSocket server...");const r=Pe.api.websocketUrl;console.log("🔌 WebSocket URL:",r),this.socket=ho(r,{transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:15e3,forceNew:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,autoConnect:!1,query:{clientType:"student",version:"1.0.0",timestamp:Date.now().toString()},extraHeaders:{"User-Agent":"BusTrackingStudent/1.0.0"}}),this.connectionTimeout=setTimeout(()=>{this.connectionState==="connecting"&&(console.error("❌ WebSocket connection timeout"),this.handleError(new Error("Connection timeout")))},15e3),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleError),this.socket.on("error",this.handleError),this.socket.on("reconnect",this.handleReconnect),this.socket.on("reconnect_attempt",o=>{console.log(`🔄 Reconnection attempt ${o}`)}),this.socket.on("reconnect_error",o=>{console.error("❌ Reconnection error:",o)}),this.socket.on("reconnect_failed",()=>{console.error("❌ Reconnection failed after all attempts"),this.isShuttingDown=!1,this.connectionState="disconnected"}),this.socket.connect()}catch(r){console.error("❌ WebSocket connection error:",r),this.handleError(r)}}handleConnect(){var r,o,s,i,a,l;console.log("✅ WebSocket connected"),this._isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.startHeartbeat(),this.startConnectionMonitoring(),(((i=(s=(o=(r=this.socket)==null?void 0:r.io)==null?void 0:o.opts)==null?void 0:s.query)==null?void 0:i.clientType)||"student")==="driver"?(a=this.socket)==null||a.emit("driver:connected",{timestamp:new Date().toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}}):(l=this.socket)==null||l.emit("student:connect",{timestamp:new Date().toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}})}handleDisconnect(t){console.log("❌ WebSocket disconnected:",t),this._isConnected=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!(this.isShuttingDown||t==="io client disconnect")&&this.handleReconnect()}handleError(t){console.error("❌ WebSocket error:",t),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!this.isShuttingDown&&(t.type==="TransportError"||t.type==="TransportOpenError")&&this.handleReconnect()}handleReconnect(){if(this.isShuttingDown||this.connectionState==="reconnecting")return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.connectionState="disconnected";return}this.connectionState="reconnecting",this.reconnectAttempts++,console.log(`🔄 Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);const t=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1)+Math.random()*1e3,this.maxReconnectDelay);setTimeout(()=>{this.isShuttingDown||this.connect()},t)}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{var t;(t=this.socket)!=null&&t.connected&&(this.socket.emit("ping"),this.lastHeartbeat=Date.now())},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startConnectionMonitoring(){this.connectionMonitorInterval&&clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=setInterval(()=>{this.monitorConnection()},1e4)}stopConnectionMonitoring(){this.connectionMonitorInterval&&(clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}monitorConnection(){if(!this.socket){console.log("🔍 Connection monitor: No socket available");return}const t=this.socket.connected,r=Date.now()-this.lastHeartbeat;console.log(`🔍 Connection monitor: Connected=${t}, Last heartbeat=${r}ms ago`),t&&r>6e4&&this.lastHeartbeat>0&&(console.warn("⚠️ Connection monitor: No heartbeat received, forcing reconnection"),this.socket.disconnect(),this.handleReconnect()),this._isConnected!==t&&(console.log(`🔄 Connection state changed: ${this._isConnected} -> ${t}`),this._isConnected=t,this.connectionState=t?"connected":"disconnected")}disconnect(){console.log("🔌 Disconnecting WebSocket..."),this.isShuttingDown=!0,this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}softDisconnect(){console.log("🔌 Soft disconnecting WebSocket..."),this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}isConnected(){var t;return this._isConnected&&((t=this.socket)==null?void 0:t.connected)===!0}getConnectionState(){return this.connectionState}getConnectionStatus(){return this._isConnected}authenticateAsDriver(t,r){console.log("🔐 Driver: Starting authentication process..."),console.log("🔐 Socket connected:",this.isConnected()),console.log("🔐 Socket state:",this.getConnectionState()),this.socket&&this.isConnected()?(console.log("🔐 Driver: Sending authentication request..."),this.socket.off("driver:authenticated"),this.socket.off("driver:authentication_failed"),this.socket.off("error"),this.socket.once("driver:authenticated",o=>{console.log("✅ Driver: Authentication successful:",o),r!=null&&r.onSuccess&&r.onSuccess(o)}),this.socket.once("driver:authentication_failed",o=>{console.error("❌ Driver: Authentication failed:",o),r!=null&&r.onFailure&&r.onFailure(o)}),this.socket.once("error",o=>{console.error("❌ Driver: Socket error during authentication:",o),r!=null&&r.onError&&r.onError(o)}),this.socket.emit("driver:authenticate",{token:t}),console.log("📤 Authentication request sent with token length:",t.length)):(console.error("❌ Driver: Cannot authenticate - socket not connected"),console.error("❌ Socket object:",!!this.socket),console.error("❌ Connection state:",this.getConnectionState()),r!=null&&r.onError&&r.onError(new Error("Socket not connected")))}sendLocationUpdate(t){this.socket&&this.isConnected()?(console.log("📍 Sending location update:",t),this.socket.emit("driver:locationUpdate",t)):console.error("❌ Cannot send location update - socket not connected")}onBusLocationUpdate(t){var r;this.busLocationListeners.push(t),(r=this.socket)==null||r.on("bus:locationUpdate",t)}onDriverConnected(t){var r;this.driverConnectedListeners.push(t),(r=this.socket)==null||r.on("driver:connected",t)}onDriverDisconnected(t){var r;this.driverDisconnectedListeners.push(t),(r=this.socket)==null||r.on("driver:disconnected",t)}onStudentConnected(t){var r;this.studentConnectedListeners.push(t),(r=this.socket)==null||r.on("student:connected",t)}onBusArriving(t){var r;this.busArrivingListeners.push(t),(r=this.socket)==null||r.on("bus:arriving",t)}off(t){var r;(r=this.socket)==null||r.off(t)}getConnectionStats(){return{isConnected:this._isConnected,connectionState:this.connectionState,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHeartbeat:this.lastHeartbeat,uptime:this.lastHeartbeat>0?Date.now()-this.lastHeartbeat:0}}async healthCheck(){var o;const t=this.getConnectionStats();return{healthy:this.isConnected()&&this.connectionState==="connected"&&t.lastHeartbeat>0&&Date.now()-t.lastHeartbeat<6e4,details:{...t,socketExists:!!this.socket,socketConnected:(o=this.socket)==null?void 0:o.connected,isShuttingDown:this.isShuttingDown}}}resetState(){console.log("🔄 Resetting WebSocket service state..."),this.isShuttingDown=!1,this.connectionState="disconnected",this._isConnected=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.lastHeartbeat=0}setClientType(t){var r,o,s;(s=(o=(r=this.socket)==null?void 0:r.io)==null?void 0:o.opts)!=null&&s.query&&(this.socket.io.opts.query.clientType=t),console.log(`🔄 Client type set to: ${t}`)}}const W=new $o,Uo=()=>{var ne;const[n,t]=h.useState(!1),[r,o]=h.useState(!1),[s,i]=h.useState(null),[a,l]=h.useState(null),[c,u]=h.useState(null),[f,g]=h.useState(null),[b,D]=h.useState(null),[y,k]=h.useState(0),[$,x]=h.useState({email:"",password:""}),[j,v]=h.useState(null),[L,E]=h.useState(!1),U=h.useRef(null),R=h.useRef(null),O=h.useRef(null),Q=h.useRef(null),M=h.useRef(null),T=h.useRef(null);h.useEffect(()=>{const{data:{subscription:P}}=le.auth.onAuthStateChange(async(w,G)=>{w==="SIGNED_IN"&&G?await Ie(G.access_token):w==="SIGNED_OUT"&&(t(!1),i(null),he(),C())});return()=>P.unsubscribe()},[]),h.useEffect(()=>{n&&navigator.geolocation&&(console.log("🔍 Checking location permission on component mount..."),"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(P=>{console.log("📍 Initial permission state:",P.state),P.state==="granted"?console.log("✅ Location permission already granted"):P.state==="prompt"?console.log("❓ Location permission needs to be requested"):P.state==="denied"&&(console.log("❌ Location permission denied"),u("Location permission is denied. Please enable it in your browser settings."))}))},[n]),h.useEffect(()=>{(async()=>{if(!navigator.geolocation){u("Geolocation is not supported by this browser");return}try{"permissions"in navigator&&(await navigator.permissions.query({name:"geolocation"})).state==="denied"&&u("Location permission denied. Please enable location access in your browser settings.")}catch{console.log("Permission API not supported, will check when user clicks Start Tracking")}})()},[]);const C=()=>{T.current&&(T.current.remove(),T.current=null),Q.current&&(Q.current.remove(),Q.current=null)},A=(P,w)=>{if(!M.current||Q.current)return;Q.current=new Oe.Map({container:M.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[w,P],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),Q.current.addControl(new Oe.NavigationControl,"top-right"),Q.current.once("load",()=>{console.log("✅ Driver map loaded successfully"),Q.current&&(Q.current.dragRotate.disable(),Q.current.touchZoomRotate.disableRotation(),console.log("🔄 Rotation features disabled"))}),Q.current.on("error",De=>{console.error("❌ Driver map error:",De)});const G=document.createElement("div");G.className="driver-marker",G.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,T.current=new Oe.Marker({element:G,anchor:"center"}).setLngLat([w,P]).addTo(Q.current);const xe=new Oe.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(s==null?void 0:s.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(s==null?void 0:s.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(s==null?void 0:s.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
        </div>
      `);T.current.setPopup(xe)},I=(P,w)=>{if(!Q.current||!T.current)return;const G=[w,P];T.current.setLngLat(G),Q.current.flyTo({center:G,duration:1e3});const xe=new Oe.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(s==null?void 0:s.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(s==null?void 0:s.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(s==null?void 0:s.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Coordinates:</strong> ${P.toFixed(6)}, ${w.toFixed(6)}</p>
        </div>
      `);T.current.setPopup(xe)},fe=async P=>{P.preventDefault(),E(!0),v(null);try{const{data:w,error:G}=await le.auth.signInWithPassword({email:$.email,password:$.password});if(G){console.error("❌ Login error:",G),v(G.message);return}w.user&&w.session?(console.log("✅ Login successful:",w.user.email),await Ie(w.session.access_token),x({email:"",password:""})):v("Login failed - no user data received")}catch(w){console.error("❌ Login error:",w),v("An unexpected error occurred during login")}finally{E(!1)}},Ie=async P=>{var w,G,xe,De,F;try{console.log("🔌 Driver: Connecting to WebSocket..."),await W.connect(),(w=W.socket)==null||w.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server"),g(null)}),(G=W.socket)==null||G.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server"),g("Disconnected from server")}),(xe=W.socket)==null||xe.on("error",Y=>{console.error("❌ Driver: Socket error:",Y),g(Y.message||"Socket error occurred")}),(De=W.socket)==null||De.on("driver:authenticated",Y=>{console.log("✅ Driver: Authentication successful:",Y),t(!0),i(Y.busInfo),g(null)}),(F=W.socket)==null||F.on("driver:locationConfirmed",Y=>{console.log("📍 Driver: Location confirmed:",Y),D(new Date().toLocaleTimeString()),k(ve=>ve+1)}),U.current=W.socket,W.authenticateAsDriver(P)}catch(Y){console.error("❌ Driver: Authentication error:",Y),g("Failed to authenticate with server")}},he=()=>{W.disconnect(),U.current=null},J=async()=>{if(!navigator.geolocation){u("Geolocation is not supported by this browser");return}const P=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),w=navigator.userAgent.includes("Firefox"),G=navigator.userAgent.includes("Chrome"),xe=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome");console.log(`🌐 Device detected: ${P?"Mobile":"Desktop"} - ${w?"Firefox":G?"Chrome":xe?"Safari":"Other"}`);const De={enableHighAccuracy:!0,timeout:P?3e4:6e4,maximumAge:0};console.log("📍 Starting location tracking with options:",De);try{if("permissions"in navigator){const F=await navigator.permissions.query({name:"geolocation"});if(console.log(`🔐 Current permission state: ${F.state}`),F.state==="denied"){u(P?`Location permission denied on mobile. Please:
1. Go to your phone Settings
2. Find this browser app
3. Enable Location permission
4. Refresh this page`:"Location permission denied. Please reset location permissions and try again.");return}}}catch{console.log("Permission API not supported, proceeding with geolocation request")}console.log("📍 Requesting location permission..."),u(P?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(F=>{console.log("✅ Initial position obtained:",{latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,timestamp:new Date(F.timestamp).toLocaleString()}),l(F),u(null),A(F.coords.latitude,F.coords.longitude),S(F)},F=>{console.error("❌ Geolocation error:",F);let Y="Location error: ";switch(F.code){case F.PERMISSION_DENIED:P?Y=`Mobile location permission denied. Please:

1. Go to your phone Settings
2. Find this browser app (Chrome/Firefox/Safari)
3. Tap "Permissions" or "Privacy"
4. Enable "Location" permission
5. Return to this page and refresh

Alternative: Try opening this page in a different browser app.`:w?Y+='Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':Y+="Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case F.POSITION_UNAVAILABLE:Y=P?`Location unavailable on mobile. Please:
1. Go outdoors or near a window
2. Wait 10-15 seconds
3. Make sure GPS is enabled in phone settings
4. Try again`:"Location information unavailable.";break;case F.TIMEOUT:Y=P?`Location request timed out on mobile. Please:
1. Go outdoors for better GPS signal
2. Wait 30 seconds and try again
3. Check if GPS is enabled in phone settings`:"Location request timed out. Please try again.";break;default:Y+=F.message}u(Y)},De),O.current=navigator.geolocation.watchPosition(F=>{console.log("📍 Location update received:",{latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,timestamp:new Date(F.timestamp).toLocaleString()}),l(F),u(null),I(F.coords.latitude,F.coords.longitude),S(F)},F=>{console.error("❌ Geolocation watch error:",F);let Y="Location tracking error: ";switch(F.code){case F.PERMISSION_DENIED:Y=P?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case F.POSITION_UNAVAILABLE:Y=P?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case F.TIMEOUT:Y=P?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:Y+=F.message}u(Y)},De),o(!0),console.log("📍 Location tracking started")},Z=()=>{O.current&&(navigator.geolocation.clearWatch(O.current),O.current=null),R.current&&(clearInterval(R.current),R.current=null),o(!1),console.log("📍 Location tracking stopped")},S=P=>{if(!U.current||!s)return;const w={driverId:s.driver_id,latitude:P.coords.latitude,longitude:P.coords.longitude,timestamp:new Date().toISOString(),speed:P.coords.speed||void 0,heading:P.coords.heading||void 0};U.current.emit("driver:locationUpdate",w)},q=async()=>{try{console.log("🔐 Driver: Starting sign out..."),r&&Z(),he();const{error:P}=await le.auth.signOut();P?console.error("❌ Sign out error:",P):(console.log("✅ Driver: Sign out successful"),t(!1),i(null),l(null),u(null),g(null),D(null),k(0),C())}catch(P){console.error("❌ Sign out error:",P)}};return n?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",s==null?void 0:s.driver_name," | Bus: ",s==null?void 0:s.bus_number," | Route: ",s==null?void 0:s.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),e.jsxDEV("button",{onClick:q,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${f?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:f?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${r?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:r?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:y},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),b&&e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",b]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"space-y-3",children:r?e.jsxDEV("button",{onClick:Z,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:J,disabled:!!f,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(P=>{console.log("✅ Manual location permission granted:",P),u(null),J()},P=>{console.error("❌ Manual location permission denied:",P),u("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),c&&c.includes("Permission denied")&&e.jsxDEV("button",{onClick:()=>{u(null),J()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),e.jsxDEV("div",{ref:M,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),c&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[e.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[e.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[e.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{const P=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(w=>{const G=`✅ Location Test Successful!

Latitude: ${w.coords.latitude}
Longitude: ${w.coords.longitude}
Accuracy: ${w.coords.accuracy}m
Device: ${P?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(G),u(null)},w=>{const G=`❌ Location Test Failed

Error Code: ${w.code}
Error Message: ${w.message}
Device: ${P?"Mobile":"Desktop"}

Please check your location permissions.`;alert(G)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),a?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-mono",children:a.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-mono",children:a.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),e.jsxDEV("span",{children:[(ne=a.coords.accuracy)==null?void 0:ne.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),a.coords.speed&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),e.jsxDEV("span",{children:[(a.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),a.coords.heading&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),e.jsxDEV("span",{children:[a.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:new Date(a.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):e.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),e.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"max-w-md w-full",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),j&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxDEV("p",{className:"text-red-700 text-sm",children:j},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),e.jsxDEV("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),e.jsxDEV("input",{id:"email",type:"email",required:!0,value:$.email,onChange:P=>x(w=>({...w,email:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),e.jsxDEV("input",{id:"password",type:"password",required:!0,value:$.password,onChange:P=>x(w=>({...w,password:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",disabled:L,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:L?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)},Cr=h.createContext(void 0),jn=()=>{const n=h.useContext(Cr);if(!n)throw new Error("useTransition must be used within a TransitionProvider");return n},Ho=({children:n})=>{const[t,r]=h.useState("default"),{pathname:o}=oo();h.useEffect(()=>{o.includes("login")||o.includes("admin-login")||o.includes("driver-login")?r("homepage-to-login"):o.includes("student")||o.includes("student-map")?r("homepage-to-map"):o.includes("dashboard")||o.includes("admin")||o.includes("driver-dashboard")?r("login-to-dashboard"):r("default")},[o]);const s=i=>{r(i)};return e.jsxDEV(Cr.Provider,{value:{currentTransition:t,setTransition:s},children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:67,columnNumber:5},void 0)},qo=({children:n,isVisible:t})=>e.jsxDEV(ee.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),zo=({children:n,isVisible:t})=>e.jsxDEV(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:t?1:0,scale:t?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:e.jsxDEV(ee.div,{initial:{opacity:0,y:100},animate:{opacity:t?1:0,y:t?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),Wo=({children:n,isVisible:t})=>e.jsxDEV(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:t?1:0,scale:t?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:e.jsxDEV(ee.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),Go=({children:n})=>{const{currentTransition:t}=jn(),r=()=>{switch(t){case"homepage-to-login":return e.jsxDEV(qo,{isVisible:!0,children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return e.jsxDEV(zo,{isVisible:!0,children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return e.jsxDEV(Wo,{isVisible:!0,children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return n}};return e.jsxDEV(e.Fragment,{children:r()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},Yo=()=>{const n=Cn(),{setTransition:t}=jn(),[r,o]=h.useState(!1),[s,i]=h.useState(null),[a,l]=h.useState({email:"",password:""}),[c,u]=h.useState(null),[f,g]=h.useState(!1),[b,D]=h.useState(!1);h.useEffect(()=>{const x=()=>{D(window.innerWidth<768)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),h.useEffect(()=>{const{data:{subscription:x}}=le.auth.onAuthStateChange(async(j,v)=>{j==="SIGNED_IN"&&v?await k(v.access_token):j==="SIGNED_OUT"&&(o(!1),i(null),$())});return()=>x.unsubscribe()},[]);const y=async x=>{x.preventDefault(),g(!0),u(null);try{const{data:j,error:v}=await le.auth.signInWithPassword({email:a.email,password:a.password});if(v){console.error("❌ Login error:",v),u(v.message);return}j.user&&j.session?(console.log("✅ Login successful:",j.user.email),await k(j.session.access_token),l({email:"",password:""})):u("Login failed - no user data received")}catch(j){console.error("❌ Login error:",j),u("An unexpected error occurred during login")}finally{g(!1)}},k=async x=>{var j,v,L;try{console.log("🔌 Driver: Connecting to WebSocket..."),await W.connect();let E=0;const U=10;for(;!W.isConnected()&&E<U;)console.log(`⏳ Waiting for WebSocket connection... (attempt ${E+1}/${U})`),await new Promise(M=>setTimeout(M,1500)),E++;if(!W.isConnected())throw console.error("❌ WebSocket connection failed after all attempts"),new Error("Failed to establish WebSocket connection. Please check your internet connection and try again.");if(console.log("✅ WebSocket connection established"),(j=W.socket)==null||j.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server")}),(v=W.socket)==null||v.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server")}),(L=W.socket)==null||L.on("error",M=>{console.error("❌ Driver: Socket error:",M),u(M.message||"Socket error occurred")}),await new Promise(M=>setTimeout(M,500)),!W.isConnected())throw new Error("WebSocket connection failed to establish");const R=async M=>{console.log("✅ Driver: Authentication successful:",M);try{const T={driver_id:M.driverId,bus_id:M.busId,bus_number:M.busInfo.bus_number,route_id:M.busInfo.route_id,route_name:M.busInfo.route_name,driver_name:M.busInfo.driver_name};console.log("💾 Storing driver assignment:",T);const C=await ie.storeDriverBusAssignment(T);if(console.log("💾 Assignment stored result:",C),!C){console.error("❌ Failed to store driver assignment in database"),u("Failed to store authentication data");return}console.log("✅ Setting authentication state..."),o(!0),i(M.busInfo),t("login-to-dashboard"),console.log("🚀 Driver: Navigating to dashboard immediately..."),n("/driver-dashboard"),console.log("✅ Navigation initiated successfully")}catch(T){console.error("❌ Error storing authentication data:",T),u("Failed to complete authentication")}},O=M=>{console.error("❌ Driver: Authentication failed:",M),u("Authentication failed: "+(M.message||"Unknown error"))},Q=setTimeout(()=>{var M,T;console.error("❌ Driver: Authentication timeout"),u("Authentication timeout - please try again"),(M=W.socket)==null||M.off("driver:authenticated",R),(T=W.socket)==null||T.off("driver:authentication_failed",O)},6e4);if(console.log("🔐 Driver: Sending authentication request..."),!x)throw new Error("No authentication token available");W.authenticateAsDriver(x,{onSuccess:M=>{clearTimeout(Q),R(M)},onFailure:M=>{clearTimeout(Q),O(M)},onError:M=>{clearTimeout(Q),console.error("❌ Driver: Authentication error:",M),u("Authentication error: "+(M.message||"Unknown error"))}}),console.log("📤 Authentication request sent, waiting for response...")}catch(E){console.error("❌ Driver: Authentication error:",E),u("Failed to authenticate with server")}},$=()=>{W.disconnect()};return r&&s?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:262,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:263,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:257,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:256,columnNumber:7},void 0):e.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[e.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:e.jsxDEV(ee.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:e.jsxDEV(ee.div,{whileHover:b?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:289,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:292,columnNumber:13},void 0),e.jsxDEV("div",{className:"relative z-10 p-8",children:[e.jsxDEV(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[e.jsxDEV("div",{className:"text-6xl mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"1"},children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:303,columnNumber:17},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:304,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:307,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:297,columnNumber:15},void 0),e.jsxDEV(un,{children:c&&e.jsxDEV(ee.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:e.jsxDEV("p",{className:"text-red-200 text-sm",children:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:321,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:315,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:313,columnNumber:15},void 0),e.jsxDEV(ee.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:y,className:"space-y-6",children:[e.jsxDEV(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:340,columnNumber:19},void 0),e.jsxDEV("input",{id:"email",type:"email",required:!0,value:a.email,onChange:x=>l(j=>({...j,email:x.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:335,columnNumber:17},void 0),e.jsxDEV(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:368,columnNumber:19},void 0),e.jsxDEV("input",{id:"password",type:"password",required:!0,value:a.password,onChange:x=>l(j=>({...j,password:x.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:374,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:363,columnNumber:17},void 0),e.jsxDEV(ee.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:b?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:f?e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:403,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:402,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:391,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:327,columnNumber:15},void 0),e.jsxDEV(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:e.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:419,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:413,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:295,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:426,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:283,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:276,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:275,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(b?8:15)].map((x,j)=>e.jsxDEV(ee.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},j,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:434,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:432,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:273,columnNumber:5},void 0)},Ko=()=>{var he;const n=Cn(),[t,r]=h.useState(!1),[o,s]=h.useState(null),[i,a]=h.useState(null),[l,c]=h.useState(null),[u,f]=h.useState(null),[g,b]=h.useState(0),[D,y]=h.useState(!1),[k,$]=h.useState("disconnected");h.useEffect(()=>{console.log("🚌 BusInfo state changed:",o)},[o]);const x=h.useRef(null),j=h.useRef(null),v=h.useRef(null),L=h.useRef(null),E=h.useRef(null),U=h.useRef(!1),R=h.useRef(null),O=h.useRef({});h.useEffect(()=>{if(U.current){console.log("🔄 Driver Dashboard: Already initialized, skipping...");return}console.log("🚀 Driver Dashboard: Starting initialization..."),U.current=!0;const J=()=>{W.isConnected()?$("connected"):W.getConnectionState()==="connecting"||W.getConnectionState()==="reconnecting"?$("connecting"):$("disconnected")};J();const Z=setInterval(J,2e3);return(async()=>{var q,ne,P,w,G,xe,De,F;try{console.log("🚀 Driver Dashboard: Component mounted, starting initialization...");const{data:{session:Y}}=await le.auth.getSession();if(console.log("🔑 Session check:",Y?"Found":"Not found",(q=Y==null?void 0:Y.user)==null?void 0:q.email),Y!=null&&Y.user){console.log("🔌 Driver Dashboard: Initializing...");const ve=ie.getCurrentDriverAssignment();if(console.log("🔍 Checking for existing assignment:",ve?"Found":"Not found"),ve)console.log("✅ Driver Dashboard: Using existing assignment from DriverLogin:",ve),s({bus_id:ve.bus_id,bus_number:ve.bus_number,route_id:ve.route_id,route_name:ve.route_name,driver_id:ve.driver_id,driver_name:ve.driver_name}),y(!0),console.log("✅ Bus info and authentication state set from existing assignment");else{console.log("🔍 No existing assignment, validating driver session...");const{isValid:ge,assignment:Ce}=await ie.validateDriverSession();if(console.log("🔍 Validation result:",{isValid:ge,assignment:Ce?"Found":"Not found"}),ge&&Ce)console.log("✅ Driver Dashboard: Valid session found with assignment:",Ce),s({bus_id:Ce.bus_id,bus_number:Ce.bus_number,route_id:Ce.route_id,route_name:Ce.route_name,driver_id:Ce.driver_id,driver_name:Ce.driver_name}),y(!0),console.log("✅ Bus info and authentication state set from validation");else{console.log("❌ Driver Dashboard: Invalid session or no assignment found");return}}if(W.isConnected())console.log("✅ WebSocket already connected");else{console.log("🔌 Driver Dashboard: Connecting to WebSocket...");try{await W.connect()}catch(ge){console.warn("⚠️ WebSocket connection failed, will use API fallback:",ge)}}(ne=W.socket)==null||ne.on("connect",()=>{console.log("🔌 Driver Dashboard: Connected to WebSocket server")}),(P=W.socket)==null||P.on("disconnect",()=>{console.log("🔌 Driver Dashboard: Disconnected from WebSocket server")}),(w=W.socket)==null||w.on("error",ge=>{console.error("❌ Driver Dashboard: Socket error:",ge)}),(G=W.socket)==null||G.on("driver:authenticated",ge=>{console.log("✅ Driver Dashboard: Authentication successful:",ge),console.log("🚌 Bus Info received:",ge.busInfo),s(ge.busInfo),y(!0)}),(xe=W.socket)==null||xe.on("driver:authentication_failed",ge=>{console.error("❌ Driver Dashboard: Authentication failed:",ge)}),(De=W.socket)==null||De.on("driver:locationConfirmed",()=>{console.log("📍 Driver Dashboard: Location confirmed"),f(new Date().toLocaleTimeString()),b(ge=>ge+1)}),x.current=W.socket;const Ye=ie.getCurrentDriverAssignment();Ye&&((F=W.socket)==null||F.emit("driver:connected",{driverId:Ye.driver_id,busId:Ye.bus_id,timestamp:new Date().toISOString()}));let X=0;const ye=3,pt=5e3;R.current=setInterval(()=>{X++,!o&&!D?(console.log(`🔄 Fallback attempt ${X}/${ye}: Fetching bus info from API...`),I(Y.user.id).then(ge=>{ge?(console.log("✅ Fallback API call successful"),R.current&&(clearInterval(R.current),R.current=null)):X>=ye&&(console.log("❌ Max fallback attempts reached, stopping retries"),R.current&&(clearInterval(R.current),R.current=null))})):(console.log("✅ Bus info already set, canceling fallback timer"),R.current&&(clearInterval(R.current),R.current=null))},pt)}else console.log("❌ Driver Dashboard: No session found, redirecting to login"),n("/driver-login")}catch(Y){console.error("❌ Driver Dashboard: Initialization error:",Y),console.error("Failed to initialize driver data")}})(),()=>{clearInterval(Z),R.current&&(clearInterval(R.current),R.current=null),U.current=!1,W.socket&&(W.socket.off("connect"),W.socket.off("disconnect"),W.socket.off("error"),W.socket.off("driver:authenticated"),W.socket.off("driver:authentication_failed"),W.socket.off("driver:locationConfirmed")),console.log("🧹 Driver Dashboard: Cleanup completed")}},[n]),h.useEffect(()=>(L.current&&!v.current&&(console.log("🗺️ Initializing map..."),Q()),()=>{console.log("🗺️ Cleaning up map..."),A()}),[]);const Q=()=>{if(!L.current)return;const J=23.0225,Z=72.5714;v.current&&(v.current.remove(),v.current=null);try{v.current=new Oe.Map({container:L.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[Z,J],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,antialias:!0,failIfMajorPerformanceCaveat:!1,maxPitch:60,localIdeographFontFamily:"sans-serif",renderWorldCopies:!0});const S=G=>{console.warn("⚠️ WebGL context lost, attempting to restore..."),G instanceof WebGLContextEvent&&G.preventDefault(),setTimeout(()=>{try{v.current&&(v.current.resize(),console.log("✅ Attempted map context restoration"))}catch(xe){console.error("❌ Failed to restore map context:",xe)}},1e3)};O.current.webglcontextlost=S,v.current.on("webglcontextlost",S);const q=()=>{if(console.log("✅ WebGL context restored"),v.current&&E.current){v.current.resize();const G=E.current.getLngLat();E.current.setLngLat(G)}};O.current.webglcontextrestored=q,v.current.on("webglcontextrestored",q);const ne=document.createElement("div");ne.className="driver-marker",ne.innerHTML=`
        <div class="driver-marker-content">
          <div style="font-size: 16px;">🚌</div>
        </div>
      `,E.current=new Oe.Marker({element:ne,anchor:"center"}).setLngLat([Z,J]).addTo(v.current);const P=G=>{console.error("❌ Map error:",G)};O.current.error=P,v.current.on("error",P);const w=()=>{console.log("✅ Map loaded successfully")};O.current.load=w,v.current.on("load",w)}catch(S){console.error("❌ Error initializing map:",S);try{if(console.log("🔄 Attempting fallback map initialization..."),L.current&&!v.current){v.current=new Oe.Map({container:L.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[Z,J],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0});const q=document.createElement("div");q.className="driver-marker",q.innerHTML="<div>🚌</div>",E.current=new Oe.Marker({element:q}).setLngLat([Z,J]).addTo(v.current),console.log("✅ Fallback map initialization successful")}}catch(q){console.error("❌ Fallback map initialization failed:",q)}}},M=(J,Z)=>{if(!v.current||!E.current)return;const S=[Z,J];E.current.setLngLat(S),v.current.flyTo({center:S,duration:1e3})},T=async()=>{if(!navigator.geolocation){c("Geolocation is not supported by this browser");return}const Z={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{j.current=navigator.geolocation.watchPosition(S=>{if(a(S),c(null),v.current&&E.current&&M(S.coords.latitude,S.coords.longitude),W.socket&&W.isConnected()){const q={driverId:(o==null?void 0:o.driver_id)||"",latitude:S.coords.latitude,longitude:S.coords.longitude,timestamp:new Date().toISOString(),speed:S.coords.speed||void 0,heading:S.coords.heading||void 0};W.socket.emit("driver:locationUpdate",q),f(new Date().toLocaleTimeString()),b(ne=>ne+1)}},S=>{console.error("❌ Location error:",S);let q="";switch(S.code){case S.PERMISSION_DENIED:q="Location permission denied. Please enable location access.";break;case S.POSITION_UNAVAILABLE:q="Location information is unavailable.";break;case S.TIMEOUT:q="Location request timed out.";break;default:q="An unknown error occurred."}c(q),r(!1)},Z),r(!0)}catch(S){console.error("❌ Error starting location tracking:",S),c("Failed to start location tracking")}},C=()=>{j.current&&(navigator.geolocation.clearWatch(j.current),j.current=null),r(!1)},A=()=>{try{v.current&&(O.current.webglcontextlost&&v.current.off("webglcontextlost",O.current.webglcontextlost),O.current.webglcontextrestored&&v.current.off("webglcontextrestored",O.current.webglcontextrestored),O.current.error&&v.current.off("error",O.current.error),O.current.load&&v.current.off("load",O.current.load),O.current={},v.current.remove(),v.current=null),E.current=null,console.log("🗺️ Map cleanup completed")}catch(J){console.error("❌ Error during map cleanup:",J)}},I=async J=>{var Z;try{console.log("🔄 Fetching bus info for user:",J);const{data:{session:S}}=await le.auth.getSession();if(!(S!=null&&S.access_token))return console.error("❌ No access token available for API call"),!1;const q=await fetch(`${Pe.api.url}/buses?driver_id=${J}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},signal:AbortSignal.timeout(1e4)});if(q.ok){const ne=await q.json();if(console.log("✅ Bus info from API:",ne),ne.success&&ne.data&&Array.isArray(ne.data)&&ne.data.length>0){const P=ne.data[0];return s({bus_id:P.bus_id||P.id,bus_number:P.bus_number||P.number_plate||P.code,route_id:P.route_id||"",route_name:P.route_name||"Route TBD",driver_id:P.driver_id||P.assigned_driver_id,driver_name:P.driver_name||P.driver_full_name||"Driver TBD"}),y(!0),!0}else return(Z=ne.data)!=null&&Z.busInfo?(s(ne.data.busInfo),y(!0),!0):ne.busInfo?(s(ne.busInfo),y(!0),!0):(console.error("❌ No bus info in response:",ne),!1)}else{const ne=await q.text();return console.error("❌ Failed to fetch bus info from API:",q.status,ne),console.error(`API Error: ${q.status} - ${ne}`),!1}}catch(S){return console.error("❌ Error fetching bus info from API:",S),!1}},fe=()=>{W.disconnect(),x.current=null},Ie=async()=>{try{C(),fe(),A(),await le.auth.signOut()}catch(J){console.error("❌ Sign out error:",J)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"card-glass p-6 mb-6",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:738,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:744,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:742,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[e.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:751,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:749,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:757,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:755,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:748,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:741,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:737,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:async()=>{var Z;const{data:{session:J}}=await le.auth.getSession();(Z=J==null?void 0:J.user)!=null&&Z.id&&(console.log("🔄 Manual refresh: Fetching bus info..."),I(J.user.id))},className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:765,columnNumber:15},void 0),e.jsxDEV("button",{onClick:Ie,className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:779,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:764,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:736,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:735,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${k==="connected"?"bg-green-500":k==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:794,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:804,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:k==="connected"?"Connected":k==="connecting"?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:805,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:803,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:793,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:792,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${t?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:819,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:823,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:t?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:826,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:822,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:817,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:836,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:837,columnNumber:15},void 0),u&&e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",u]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:839,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:835,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:834,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${l?"bg-red-500":i?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:849,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:853,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:l?"Error":i?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:854,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:852,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:848,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:847,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:790,columnNumber:9},void 0),e.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:868,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:t?e.jsxDEV("button",{onClick:C,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:894,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:T,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:874,columnNumber:17},void 0),l&&e.jsxDEV("button",{onClick:()=>{c(null),T()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:882,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:873,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:871,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:867,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:908,columnNumber:13},void 0),e.jsxDEV("div",{ref:L,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:911,columnNumber:13},void 0),l&&e.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[e.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:919,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:923,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[e.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:929,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:934,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:933,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:938,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:937,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:942,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:941,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:946,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:945,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:950,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:949,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:954,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:953,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:932,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:928,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[e.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:962,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:967,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:966,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:971,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:970,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:975,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:974,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:965,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:961,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:981,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>{const J=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(Z=>{const S=`✅ Location Test Successful!

Latitude: ${Z.coords.latitude}
Longitude: ${Z.coords.longitude}
Accuracy: ${Z.coords.accuracy}m
Device: ${J?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(S),c(null)},Z=>{const S=`❌ Location Test Failed

Error Code: ${Z.code}
Error Message: ${Z.message}
Device: ${J?"Mobile":"Desktop"}

Please check your location permissions.`;alert(S)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:988,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:922,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:918,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:907,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1042,columnNumber:13},void 0),i?e.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1049,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1050,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1048,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1056,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:i.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1057,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1055,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1062,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:i.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1063,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1061,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1068,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(he=i.coords.accuracy)==null?void 0:he.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1069,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1067,columnNumber:19},void 0),i.coords.speed&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1075,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(i.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1076,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1074,columnNumber:21},void 0),i.coords.heading&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1083,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[i.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1084,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1082,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1090,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1091,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1089,columnNumber:19},void 0),u&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1097,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-medium text-sm",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1096,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1106,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(i.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1107,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1105,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1054,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1046,columnNumber:15},void 0):e.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[e.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1115,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1116,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1119,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1114,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1126,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[e.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1130,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1133,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1134,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1137,columnNumber:17},void 0),e.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1129,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1125,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1041,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:905,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:733,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:732,columnNumber:5},void 0)},Qo=Pe.api.url;class Jo{async makeRequest(t,r={}){let o;try{const s=ie.getAccessToken();if(console.log("🔑 Token check for",t,":",s?"Token exists":"No token"),!s)throw console.error("❌ No access token available for",t),new Error("No access token available");const i=new AbortController;o=setTimeout(()=>i.abort(),15e3);const a=Qo||Pe.api.url,l=await fetch(`${a}/admin${t}`,{...r,signal:i.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`,...r.headers}}),c=await l.json();if(o&&clearTimeout(o),!l.ok)throw l.status===429?new Error("Rate limit exceeded. Please wait a moment and try again."):l.status===401?new Error("Authentication required. Please log in again."):l.status===403?new Error("Access denied. You do not have permission for this action."):l.status===404?new Error("Resource not found."):l.status===409?new Error(c.message||"Resource already exists"):l.status>=500?new Error("Server error. Please try again later."):new Error(c.message||c.error||"Request failed");return c}catch(s){return o&&clearTimeout(o),console.error(`❌ API request failed for ${t}:`,s),{success:!1,error:s instanceof Error?s.message:"Request failed"}}}async getAnalytics(){return this.makeRequest("/analytics")}async getSystemHealth(){return this.makeRequest("/health")}async getAllBuses(){var r;console.log("🚌 Fetching all buses...");const t=await this.makeRequest("/buses");return console.log("🚌 Buses result:",t.success?`${((r=t.data)==null?void 0:r.length)||0} buses`:t.error),t}async getBusById(t){return this.makeRequest(`/buses/${t}`)}async createBus(t){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(t)})}async updateBus(t,r){return this.makeRequest(`/buses/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteBus(t){return this.makeRequest(`/buses/${t}`,{method:"DELETE"})}async getAllDrivers(){var r;console.log("👨‍💼 Fetching all drivers...");const t=await this.makeRequest("/drivers");return console.log("👨‍💼 Drivers result:",t.success?`${((r=t.data)==null?void 0:r.length)||0} drivers`:t.error),t}async getAssignedDrivers(){var r;console.log("🚌 Fetching assigned drivers...");const t=await this.makeRequest("/assigned-drivers");return console.log("🚌 Assigned drivers result:",t.success?`${((r=t.data)==null?void 0:r.length)||0} assigned drivers`:t.error),t}async getDriverById(t){return this.makeRequest(`/drivers/${t}`)}async assignDriverToBus(t,r){return this.makeRequest(`/drivers/${t}/assign-bus`,{method:"POST",body:JSON.stringify({busId:r})})}async unassignDriverFromBus(t){return this.makeRequest(`/drivers/${t}/unassign-bus`,{method:"POST"})}async createDriver(t){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(t)})}async updateDriver(t,r){return this.makeRequest(`/drivers/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteDriver(t){return this.makeRequest(`/drivers/${t}`,{method:"DELETE"})}async getAllRoutes(){var r;console.log("🛣️ Fetching all routes...");const t=await this.makeRequest("/routes");return console.log("🛣️ Routes result:",t.success?`${((r=t.data)==null?void 0:r.length)||0} routes`:t.error),t}async getRouteById(t){return this.makeRequest(`/routes/${t}`)}async createRoute(t){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(t)})}async updateRoute(t,r){return this.makeRequest(`/routes/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRoute(t){return this.makeRequest(`/routes/${t}`,{method:"DELETE"})}}const Ne=new Jo,rn=Pe.api.url;class on{static async makeRequest(t,r={}){let o=ie.getAccessToken();if(!o&&ie.isAuthenticated()){console.log("🔄 No token found but user is authenticated, attempting to refresh session...");const a=await ie.refreshSession();if(a.success)o=ie.getAccessToken(),console.log("✅ Session refreshed, new token obtained");else throw console.error("❌ Failed to refresh session:",a.error),new Error("Authentication required")}const s={"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},i=rn||Pe.api.url;return fetch(`${i}/storage${t}`,{...r,headers:{...s,...r.headers}})}static async uploadBusImage(t,r){try{console.log("🔐 Getting access token...");const o=ie.getAccessToken();if(!o)return console.error("❌ No access token available"),{success:!1,error:"Authentication required"};console.log("✅ Access token obtained");const s=new FormData;s.append("image",r),s.append("busId",t);const i=rn||Pe.api.url;console.log("📤 Sending request to:",`${i}/storage/upload/bus-image`),console.log("📋 FormData contents:",{busId:t,fileName:r.name,fileSize:r.size,fileType:r.type});const a=await fetch(`${i}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(console.log("📥 Response status:",a.status),console.log("📥 Response headers:",Object.fromEntries(a.headers.entries())),!a.ok){const c=await a.json();return console.error("❌ Upload failed:",c),{success:!1,error:c.error||"Upload failed"}}const l=await a.json();return console.log("✅ Upload successful:",l),{success:!0,url:l.url,fileName:l.fileName}}catch(o){return console.error("❌ Upload bus image error:",o),{success:!1,error:"Network error during upload"}}}static async uploadDriverPhoto(t,r){try{const o=ie.getAccessToken();if(!o)return{success:!1,error:"Authentication required"};const s=new FormData;s.append("photo",r),s.append("driverId",t);const i=rn||Pe.api.url,a=await fetch(`${i}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(!a.ok)return{success:!1,error:(await a.json()).error||"Upload failed"};const l=await a.json();return{success:!0,url:l.url,fileName:l.fileName}}catch(o){return console.error("Upload driver photo error:",o),{success:!1,error:"Network error during upload"}}}static async uploadRouteMap(t,r){try{const o=ie.getAccessToken();if(!o)return{success:!1,error:"Authentication required"};const s=new FormData;s.append("map",r),s.append("routeId",t);const i=rn||Pe.api.url,a=await fetch(`${i}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(!a.ok)return{success:!1,error:(await a.json()).error||"Upload failed"};const l=await a.json();return{success:!0,url:l.url,fileName:l.fileName}}catch(o){return console.error("Upload route map error:",o),{success:!1,error:"Network error during upload"}}}static async getSignedUrl(t,r){try{const o=await this.makeRequest(`/signed-url/${t}/${r}`);if(!o.ok)return{success:!1,error:(await o.json()).error||"Failed to get signed URL"};const s=await o.json();return{success:!0,signedUrl:s.signedUrl,expiresIn:s.expiresIn}}catch(o){return console.error("Get signed URL error:",o),{success:!1,error:"Network error"}}}static async deleteFile(t,r,o){try{const s=await this.makeRequest(`/delete/${t}/${r}`,{method:"DELETE",body:JSON.stringify({fileUrl:o})});return s.ok?{success:!0}:{success:!1,error:(await s.json()).error||"Delete failed"}}catch(s){return console.error("Delete file error:",s),{success:!1,error:"Network error during deletion"}}}static async getFileInfo(t,r){try{const o=await this.makeRequest(`/info/${t}/${r}`);if(!o.ok)return{success:!1,hasFile:!1,error:(await o.json()).error||"Failed to get file info"};const s=await o.json();return{success:!0,hasFile:s.hasFile,url:s.url,info:s.info}}catch(o){return console.error("Get file info error:",o),{success:!1,hasFile:!1,error:"Network error"}}}static async listFiles(t){try{const r=await this.makeRequest(`/list/${t}`);return r.ok?{success:!0,files:(await r.json()).files}:{success:!1,error:(await r.json()).error||"Failed to list files"}}catch(r){return console.error("List files error:",r),{success:!1,error:"Network error"}}}static validateFile(t,r,o){return t?r.includes(t.type)?t.size>o?{isValid:!1,error:`File too large. Maximum size: ${o/(1024*1024)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${r.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(t){const r=["image/jpeg","image/jpg","image/png","image/webp"];return this.validateFile(t,r,5242880)}static validateDocument(t){const r=["application/pdf","image/jpeg","image/jpg","image/png"];return this.validateFile(t,r,10485760)}}function Zo(){const[n,t]=h.useState("bus"),[r,o]=h.useState([]),[s,i]=h.useState([]),[a,l]=h.useState([]),[c,u]=h.useState(!0),[f,g]=h.useState(!1),[b,D]=h.useState(null),[y,k]=h.useState(""),[$,x]=h.useState(null),[j,v]=h.useState(null);h.useEffect(()=>{L()},[]);const L=async()=>{u(!0),x(null);try{const[C,A,I]=await Promise.all([Ne.getAllBuses(),Ne.getAllDrivers(),Ne.getAllRoutes()]);if(C.success&&C.data&&o(C.data),A.success&&A.data){const fe=new Map;A.data.forEach(he=>{const J=he.id;if(!fe.has(J))fe.set(J,he);else{const Z=fe.get(J);(!Z.email&&he.email||Z.email&&he.email&&!Z.first_name&&he.first_name)&&fe.set(J,he)}});const Ie=Array.from(fe.values());i(Ie)}I.success&&I.data&&l(I.data)}catch(C){x("Failed to load data"),console.error("❌ Data loading error:",C)}finally{u(!1)}},E=C=>{var I;const A=(I=C.target.files)==null?void 0:I[0];A&&(D(A),x(null))},U=async()=>{if(!b||!y){x("Please select a file and an item");return}console.log("🚀 Starting upload...",{activeTab:n,selectedItem:y,fileName:b.name,fileSize:b.size,fileType:b.type}),g(!0),x(null),v(null);try{let C;switch(n){case"bus":console.log("📤 Uploading bus image..."),C=await on.uploadBusImage(y,b);break;case"driver":console.log("📤 Uploading driver photo..."),C=await on.uploadDriverPhoto(y,b);break;case"route":console.log("📤 Uploading route map..."),C=await on.uploadRouteMap(y,b);break}console.log("📥 Upload result:",C),C.success?(v("File uploaded successfully!"),D(null),k(""),L()):(x(C.error||"Upload failed"),console.error("❌ Upload failed:",C.error))}catch(C){x("Upload failed. Please try again."),console.error("❌ Upload error:",C)}finally{g(!1)}},R=async(C,A)=>{if(confirm("Are you sure you want to delete this file?"))try{const I=await on.deleteFile(n,C,A);I.success?(v("File deleted successfully!"),L()):x(I.error||"Delete failed")}catch(I){x("Delete failed. Please try again."),console.error("❌ Delete error:",I)}},O=()=>{switch(n){case"bus":return r;case"driver":return s;case"route":return a;default:return[]}},Q=C=>{switch(n){case"bus":return C.number_plate;case"driver":{const A=C;return`${A.first_name} ${A.last_name}`}case"route":return C.name;default:return"Unknown"}},M=C=>{let A=null;switch(n){case"bus":A=C.bus_image_url||null;break;case"driver":A=C.profile_photo_url||null;break;case"route":A=C.route_map_url||null;break;default:return null}return A?A.startsWith("http")?A:A.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${A}`:A:null},T=()=>{switch(n){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return c?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),e.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),$&&e.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxDEV("p",{className:"text-red-700",children:$},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),j&&e.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxDEV("p",{className:"text-green-700",children:j},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),e.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(C=>e.jsxDEV("button",{onClick:()=>t(C.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${n===C.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:C.name},C.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",T()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),e.jsxDEV("input",{type:"file",onChange:E,accept:n==="route"?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),b&&e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",b.name," (",(b.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ",n==="bus"?"Bus":n==="driver"?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),e.jsxDEV("select",{value:y,onChange:C=>k(C.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[e.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),O().map(C=>e.jsxDEV("option",{value:C.id||"",children:Q(C)},C.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-end",children:e.jsxDEV("button",{onClick:U,disabled:!b||!y||f,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:f?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",T()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),O().length===0?e.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):e.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:O().map(C=>{const A=M(C),I=Q(C);return e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:I},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),A?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"mb-3",children:n!=="route"?e.jsxDEV("img",{src:A,alt:I,className:"w-full h-32 object-cover rounded-md",onError:fe=>{fe.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):e.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>window.open(A,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>C.id&&R(C.id,A),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!C.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):e.jsxDEV("div",{className:"text-center py-4",children:[e.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},C.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const Te={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},Xo=({onLocationSelect:n,onClose:t,title:r,defaultCenter:o=Te.coordinates,searchPlaceholder:s="Search for a location..."})=>{const i=er.useRef(Math.random().toString(36).substr(2,9)),a=h.useRef(null),l=h.useRef(null),c=h.useRef(null),[u,f]=h.useState(""),[g,b]=h.useState(null),[D,y]=h.useState(!0),[k,$]=h.useState(null);h.useEffect(()=>{if(!(!a.current||l.current))return console.log(`🗺️ [${i.current}] Initializing map with center:`,o),console.log(`🗺️ [${i.current}] Ganpat University coordinates:`,Te.coordinates),l.current=new Oe.Map({container:a.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:Te.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),l.current.on("load",()=>{var E;console.log("🗺️ Map loaded, adding controls and marker");try{(E=l.current)==null||E.addControl(new Oe.NavigationControl),c.current=new Oe.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(o).addTo(l.current),l.current.flyTo({center:Te.coordinates,zoom:12,duration:1e3}),b({name:Te.name,coordinates:Te.coordinates,address:Te.address}),c.current.on("dragend",()=>{var R;const U=(R=c.current)==null?void 0:R.getLngLat();U&&x([U.lng,U.lat])}),console.log(`🗺️ [${i.current}] Map centered on ${Te.name}`),y(!1)}catch(U){console.error("❌ Error setting up map:",U),$("Failed to initialize map"),y(!1)}}),l.current.on("error",E=>{console.error("❌ Map error:",E),$("Map failed to load"),y(!1)}),l.current.on("click",E=>{var R;const U=[E.lngLat.lng,E.lngLat.lat];(R=c.current)==null||R.setLngLat(U),x(U)}),l.current.on("webglcontextlost",()=>{console.warn("⚠️ WebGL context lost, attempting to restore...")}),l.current.on("webglcontextrestored",()=>{console.log("✅ WebGL context restored")}),()=>{if(l.current){console.log("🗺️ Cleaning up map instance");try{l.current.off("load",()=>{}),l.current.off("click",()=>{}),l.current.off("error",()=>{}),l.current.off("webglcontextlost",()=>{}),l.current.off("webglcontextrestored",()=>{}),c.current&&c.current.remove(),l.current.remove()}catch(E){console.warn("⚠️ Error during map cleanup:",E)}finally{l.current=null,c.current=null}}}},[o]);const x=async E=>{try{const R=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${E[1]}&lon=${E[0]}&zoom=18&addressdetails=1`)).json(),O={name:R.display_name.split(",")[0]||"Selected Location",coordinates:E,address:R.display_name};b(O)}catch(U){console.error("Error reverse geocoding:",U),b({name:"Selected Location",coordinates:E,address:`${E[1]}, ${E[0]}`})}},j=async()=>{var E;if(!(!u.trim()||!l.current))try{console.log("🔍 Searching for:",u);const R=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(u)}&limit=5&countrycodes=in`)).json();if(console.log("🔍 Search results:",R),R.length>0){const O=R[0],Q=[parseFloat(O.lon),parseFloat(O.lat)];console.log("🗺️ Flying to coordinates:",Q),l.current.flyTo({center:Q,zoom:15}),(E=c.current)==null||E.setLngLat(Q);const M={name:O.display_name.split(",")[0]||u,coordinates:Q,address:O.display_name};b(M)}else console.log("🔍 No search results found")}catch(U){console.error("❌ Error searching location:",U)}},v=()=>{g&&(n(g),t())},L=E=>{E.key==="Enter"&&j()};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:r},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),e.jsxDEV("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-4 border-b",children:[e.jsxDEV("div",{className:"flex gap-2 mb-2",children:[e.jsxDEV("input",{type:"text",value:u,onChange:E=>f(E.target.value),onKeyPress:L,placeholder:s,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex gap-2",children:e.jsxDEV("button",{onClick:()=>{var E;l.current&&(console.log("🏫 Resetting to Ganpat University at coordinates:",Te.coordinates),l.current.flyTo({center:Te.coordinates,zoom:12}),(E=c.current)==null||E.setLngLat(Te.coordinates),b({name:Te.name,coordinates:Te.coordinates,address:Te.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 relative",children:[D&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),k&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",k]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{$(null),y(!0),l.current&&(l.current.remove(),l.current=null,c.current=null);const E=a.current;E&&(E.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),e.jsxDEV("div",{ref:a,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),g&&e.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-700 font-medium",children:g.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),g.address&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:g.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",g.coordinates[1].toFixed(6),","," ",g.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:v,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),e.jsxDEV("button",{onClick:t,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function es(){const[n,t]=h.useState("buses"),[r,o]=h.useState(!1),[s,i]=h.useState(null),[a,l]=h.useState(null),[c,u]=h.useState([]),[f,g]=h.useState([]),[b,D]=h.useState([]),[y,k]=h.useState([]),[$,x]=h.useState(!1),[j,v]=h.useState(!1),[L,E]=h.useState(!1),[U,R]=h.useState(!1),[O,Q]=h.useState(!1),[M,T]=h.useState(!1),[C,A]=h.useState(null),[I,fe]=h.useState(null),[Ie,he]=h.useState(!1),[J,Z]=h.useState(!1),[S,q]=h.useState({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),[ne,P]=h.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[w,G]=h.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[xe,De]=h.useState(!1),[F,Y]=h.useState(!1),[ve,Ye]=h.useState(""),[X,ye]=h.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[pt,ge]=h.useState(!1),[Ce,Ht]=h.useState("destination"),[Re,Ze]=h.useState(null),[Be,qt]=h.useState(null),He=h.useCallback(async()=>{o(!0),i(null);try{const[m,p,_]=await Promise.all([Ne.getAllBuses(),Ne.getAllDrivers(),Ne.getAllRoutes()]);if(m.success&&m.data&&u(m.data),p.success&&p.data){const z=new Map;p.data.forEach(me=>{const Ee=me.id;if(!z.has(Ee))z.set(Ee,me);else{const Qe=z.get(Ee);(!Qe.email&&me.email||Qe.email&&me.email&&!Qe.first_name&&me.first_name)&&z.set(Ee,me)}});const de=Array.from(z.values());g(de)}_.success&&_.data&&k(_.data),await Pn(),(!m.success||!p.success||!_.success)&&i("Failed to load some data")}catch(m){i("An error occurred while loading data"),console.error("❌ Data loading error:",m)}finally{o(!1)}},[]);h.useEffect(()=>{He()},[He]);const Pn=async()=>{try{const m=await Ne.getAssignedDrivers();if(m.success&&m.data){const p=new Map;m.data.forEach(z=>{const de=z.driver_id;if(!p.has(de))p.set(de,z);else{const me=p.get(de);(!me.driver_email&&z.driver_email||me.driver_email&&z.driver_email&&!me.driver_name&&z.driver_name)&&p.set(de,z)}});const _=Array.from(p.values());D(_)}else console.warn("⚠️ Failed to load assigned drivers:",m.error),D([])}catch(m){console.warn("⚠️ Failed to load assigned drivers:",m),D([])}},Sn=async m=>{if(m.preventDefault(),o(!0),i(null),c.find(_=>_.code===S.code||_.number_plate===S.number_plate)){i(`Bus with code '${S.code}' or number plate '${S.number_plate}' already exists`),o(!1);return}try{const _=await Ne.createBus(S);_.success&&_.data?(u([...c,_.data]),q({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),x(!1),l("Bus created successfully!"),setTimeout(()=>l(null),3e3)):i(_.error||"Failed to create bus")}catch{i("An error occurred while creating bus")}finally{o(!1)}},zt=async m=>{if(confirm("Are you sure you want to delete this bus?")){o(!0),i(null);try{const p=await Ne.deleteBus(m);p.success?(u(c.filter(_=>_.id!==m)),l("Bus deleted successfully!"),setTimeout(()=>l(null),3e3)):i(p.error||"Failed to delete bus")}catch{i("An error occurred while deleting bus")}finally{o(!1)}}},Wt=async(m,p)=>{o(!0),i(null);try{const _=await Ne.updateBus(m,{route_id:p});_.success&&_.data?(u(c.map(z=>z.id===m?{...z,route_id:p}:z)),l("Route assigned to bus successfully!"),setTimeout(()=>l(null),3e3)):i(_.error||"Failed to assign route to bus")}catch{i("An error occurred while assigning route to bus")}finally{o(!1)}},Xe=async m=>{if(m.preventDefault(),o(!0),i(null),!w.email||!w.first_name||!w.last_name||!w.password){i("All fields are required: Email, First Name, Last Name, and Password"),o(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)){i("Please enter a valid email address"),o(!1);return}if(w.password!==w.confirm_password){i("Passwords do not match"),o(!1);return}if(w.password.length<6){i("Password must be at least 6 characters long"),o(!1);return}if(f.find(z=>z.email===w.email)){i("Driver with this email already exists"),o(!1);return}if(!r)try{const z={email:w.email,first_name:w.first_name,last_name:w.last_name,phone:w.phone,role:"driver",password:w.password},de=await Ne.createDriver(z);if(de.success&&de.data){const me=await Ne.getAllDrivers();if(me.success&&me.data){const Ee=new Map;me.data.forEach(qe=>{const et=qe.id;if(!Ee.has(et))Ee.set(et,qe);else{const d=Ee.get(et);(!d.email&&qe.email||d.email&&qe.email&&!d.first_name&&qe.first_name)&&Ee.set(et,qe)}});const Qe=Array.from(Ee.values());g(Qe)}G({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),De(!1),Y(!1),E(!1),l(`Driver ${de.data.first_name} ${de.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>l(null),5e3)}else i(de.error||"Failed to create driver")}catch(z){i("An error occurred while creating driver"),console.error("❌ Error creating driver:",z)}finally{o(!1)}},Gt=async(m,p)=>{o(!0),i(null);try{const _=await Ne.assignDriverToBus(m,p);_.success&&_.data?(await He(),l("Bus assigned to driver successfully!"),setTimeout(()=>l(null),3e3)):i(_.error||"Failed to assign bus to driver")}catch{i("An error occurred while assigning bus to driver")}finally{o(!1)}},Yt=async m=>{if(confirm("Are you sure you want to unassign this driver?")){o(!0),i(null);try{const p=await Ne.unassignDriverFromBus(m);p.success?(await He(),l("Driver unassigned successfully!"),setTimeout(()=>l(null),3e3)):i(p.error||"Failed to unassign driver")}catch{i("An error occurred while unassigning driver")}finally{o(!1)}}},vt=async(m,p,_)=>{const z=`${p} ${_}`,de=`Are you sure you want to delete driver "${z}"?

This action will:
• Remove the driver from all database tables
• Delete their Supabase Auth account
• Unassign them from any buses
• This action cannot be undone!`;if(confirm(de)){o(!0),i(null);try{const me=await Ne.deleteDriver(m);me.success&&me.data?(g(f.filter(Ee=>Ee.id!==m)),D(b.filter(Ee=>Ee.driver_id!==m)),l(`Driver "${z}" deleted successfully from all systems!`),setTimeout(()=>l(null),5e3)):i(me.error||`Failed to delete driver "${z}"`)}catch(me){i(`An error occurred while deleting driver "${z}"`),console.error("❌ Error deleting driver:",me)}finally{o(!1)}}},Ct=async m=>{if(m.preventDefault(),o(!0),i(null),!X.name.trim()){i("Route name is required"),o(!1);return}if(!X.city.trim()){i("City is required"),o(!1);return}if(!X.description.trim()){i("Route description is required"),o(!1);return}try{const p={...X,distance_km:parseFloat(X.distance_km)||0,estimated_duration_minutes:parseInt(X.estimated_duration_minutes)||0,custom_destination:Re==null?void 0:Re.name,custom_destination_coordinates:Re==null?void 0:Re.coordinates,custom_origin:Be==null?void 0:Be.name,custom_origin_coordinates:Be==null?void 0:Be.coordinates,bus_stops:[]},_=await Ne.createRoute(p);_.success&&_.data?(k([...y,_.data]),ye({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),Ze(null),qt(null),R(!1),l("Route created successfully!"),setTimeout(()=>l(null),3e3)):i(_.error||"Failed to create route")}catch{i("An error occurred while creating route")}finally{o(!1)}},Vn=async m=>{if(confirm("Are you sure you want to delete this route?")){o(!0),i(null);try{const p=await Ne.deleteRoute(m);p.success?(k(y.filter(_=>_.id!==m)),l("Route deleted successfully!"),setTimeout(()=>l(null),3e3)):i(p.error||"Failed to delete route")}catch{i("An error occurred while deleting route")}finally{o(!1)}}},Kt=m=>{if(!m)return"Not Assigned";const p=y.find(de=>de.id===m);if(!p)return"Unknown Route";const _=p.city||"Unknown City",z=p.destination||"Ganpat University";return`${_} → ${z}`},Qt=m=>{Ht(m),ge(!0)},kn=m=>{Ce==="destination"?Ze(m):qt(m)},An=m=>{if(!m)return"Not Assigned";const p=f.find(_=>_.id===m);return p?`${p.first_name} ${p.last_name}`:"Unknown Driver"},Jt=m=>m.driver_full_name?m.driver_full_name:m.driver_first_name&&m.driver_last_name?`${m.driver_first_name} ${m.driver_last_name}`:m.assigned_driver_id?An(m.assigned_driver_id):"Not Assigned",Mn=m=>{if(!m)return"Not Assigned";const p=c.find(_=>_.id===m);return p?p.number_plate:"Unknown Bus"},jt=m=>{A(m),he(!1),Q(!0)},Zt=m=>{A(m),q({code:m.code,number_plate:m.number_plate,capacity:m.capacity,model:m.model||"",year:m.year||new Date().getFullYear(),is_active:m.is_active}),he(!0),Q(!0)},Ke=m=>{fe(m),Z(!1),T(!0)},Dt=m=>{fe(m),ye({name:m.name,description:m.description,distance_km:m.distance_km.toString(),estimated_duration_minutes:m.estimated_duration_minutes.toString(),is_active:m.is_active,city:m.city||""}),Z(!0),T(!0)},yt=async m=>{if(m.preventDefault(),!!(C!=null&&C.id)){o(!0),i(null);try{const p=await Ne.updateBus(C.id,S);p.success&&p.data?(u(c.map(_=>_.id===C.id?p.data:_)),Q(!1),he(!1),A(null),l("Bus updated successfully!"),setTimeout(()=>l(null),3e3)):i(p.error||"Failed to update bus")}catch{i("An error occurred while updating bus")}finally{o(!1)}}},Xt=async m=>{if(m.preventDefault(),!!(I!=null&&I.id)){o(!0),i(null);try{const p={...X,distance_km:parseFloat(X.distance_km)||0,estimated_duration_minutes:parseInt(X.estimated_duration_minutes)||0},_=await Ne.updateRoute(I.id,p);_.success&&_.data?(k(y.map(z=>z.id===I.id?_.data:z)),T(!1),Z(!1),fe(null),l("Route updated successfully!"),setTimeout(()=>l(null),3e3)):i(_.error||"Failed to update route")}catch{i("An error occurred while updating route")}finally{o(!1)}}};return r?e.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),e.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),e.jsxDEV("button",{onClick:He,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),a&&e.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:e.jsxDEV("p",{className:"text-green-800",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),s&&e.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxDEV("p",{className:"text-red-800",children:s},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[e.jsxDEV("button",{onClick:()=>t("buses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="buses"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🚌 Buses (",c.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>t("drivers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="drivers"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["👨‍💼 Drivers (",f.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>t("routes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="routes"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🗺️ Routes (",y.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),n==="buses"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:e.jsxDEV("button",{onClick:()=>x(!$),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:$?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),$&&e.jsxDEV("form",{onSubmit:Sn,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.code,onChange:m=>q({...S,code:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.number_plate,onChange:m=>q({...S,number_plate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:S.capacity,onChange:m=>q({...S,capacity:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),e.jsxDEV("input",{type:"text",value:S.model,onChange:m=>q({...S,model:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),e.jsxDEV("input",{type:"number",value:S.year,onChange:m=>q({...S,year:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:S.is_active,onChange:m=>q({...S,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",m.capacity," | ",m.model," (",m.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:Jt(m)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_name||Kt(m.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_id?(()=>{const p=y.find(_=>_.id===m.route_id);return(p==null?void 0:p.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>jt(m),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>Zt(m),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>zt(m.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),e.jsxDEV("select",{onChange:p=>Wt(m.id,p.target.value),value:m.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),y.map(p=>e.jsxDEV("option",{value:p.id,className:"text-gray-900",children:p.name},p.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),n==="drivers"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>E(!L),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:L?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>v(!j),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:j?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),j&&e.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),e.jsxDEV("select",{required:!0,value:ve,onChange:m=>Ye(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),f.map(m=>e.jsxDEV("option",{value:m.id,className:"text-gray-900",children:[m.first_name," ",m.last_name," (",m.email,")"]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),f.length===0&&e.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),e.jsxDEV("select",{required:!0,value:ne.assigned_bus_id||"",onChange:m=>P({...ne,assigned_bus_id:m.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),c.map(m=>e.jsxDEV("option",{value:m.id,className:"text-gray-900",children:[m.number_plate," (",m.model||"Unknown Model",")"]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{v(!1),Ye(""),P({...ne,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>Gt(ve,ne.assigned_bus_id),disabled:r||!ve||!ne.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),L&&e.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),e.jsxDEV("form",{onSubmit:Xe,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),e.jsxDEV("input",{type:"email",required:!0,value:w.email,onChange:m=>G({...w,email:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),e.jsxDEV("input",{type:"text",required:!0,value:w.first_name,onChange:m=>G({...w,first_name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),e.jsxDEV("input",{type:"text",required:!0,value:w.last_name,onChange:m=>G({...w,last_name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),e.jsxDEV("input",{type:"tel",value:w.phone,onChange:m=>G({...w,phone:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:xe?"text":"password",required:!0,value:w.password,onChange:m=>{console.log("Password input changed:",m.target.value),G({...w,password:m.target.value})},onFocus:m=>{console.log("Password field focused"),m.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>De(!xe),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:xe?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",w.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:F?"text":"password",required:!0,value:w.confirm_password,onChange:m=>{console.log("Confirm password input changed:",m.target.value),G({...w,confirm_password:m.target.value})},onFocus:m=>{console.log("Confirm password field focused"),m.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>Y(!F),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:F?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[w.password!==w.confirm_password&&w.confirm_password.length>0&&e.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),w.password===w.confirm_password&&w.confirm_password.length>0&&e.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),e.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),e.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),e.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),e.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{E(!1),G({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),De(!1),Y(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),e.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),e.jsxDEV("button",{onClick:async()=>{try{const m=await Ne.getAllDrivers();if(m.success&&m.data){const p=new Map;m.data.forEach(z=>{const de=z.id;if(!p.has(de))p.set(de,z);else{const me=p.get(de);(!me.email&&z.email||me.email&&z.email&&!me.first_name&&z.first_name)&&p.set(de,z)}});const _=Array.from(p.values());g(_)}else console.warn("⚠️ Manual refresh failed:",m.error)}catch(m){console.warn("⚠️ Manual refresh failed:",m)}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),f.length>0?e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.map(m=>e.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[e.jsxDEV("div",{className:"font-medium text-gray-900",children:[m.first_name," ",m.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:m.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",m.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):e.jsxDEV("div",{className:"text-center py-4",children:[e.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[m.first_name," ",m.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",m.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:Mn(m.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxDEV("select",{onChange:p=>Gt(m.id,p.target.value),value:m.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),c.map(p=>e.jsxDEV("option",{value:p.id,className:"text-gray-900",children:p.number_plate},p.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>vt(m.id,m.first_name,m.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:[b.length," driver",b.length!==1?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),b.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxDEV("button",{onClick:()=>Yt(m.driver_id),disabled:r,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>{const p=f.find(_=>_.id===m.driver_id);p&&vt(p.id,p.first_name,p.last_name)},disabled:r,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},m.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),n==="routes"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:e.jsxDEV("button",{onClick:()=>R(!U),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:U?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),U&&e.jsxDEV("form",{onSubmit:Ct,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:X.name,onChange:m=>ye({...X,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:X.city,onChange:m=>ye({...X,city:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:X.distance_km,onChange:m=>ye({...X,distance_km:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:X.estimated_duration_minutes,onChange:m=>ye({...X,estimated_duration_minutes:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:X.is_active,onChange:m=>ye({...X,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),e.jsxDEV("textarea",{value:X.description,onChange:m=>ye({...X,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),Re&&e.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[e.jsxDEV("div",{className:"font-medium text-green-800",children:Re.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-green-600",children:Re.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>Qt("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),Be&&e.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[e.jsxDEV("div",{className:"font-medium text-blue-800",children:Be.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-blue-600",children:Be.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>Qt("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxDEV("div",{className:"text-sm text-gray-900",children:[m.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:[m.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>Ke(m),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>Dt(m),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>Vn(m.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),pt&&e.jsxDEV(Xo,{onLocationSelect:kn,onClose:()=>ge(!1),title:Ce==="destination"?"Select Destination":"Select Origin",searchPlaceholder:Ce==="destination"?"Search for destination...":"Search for origin..."},`map-selector-${Ce}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),O&&C&&e.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:Ie?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{Q(!1),he(!1),A(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),Ie?e.jsxDEV("form",{onSubmit:yt,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.code,onChange:m=>q({...S,code:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.number_plate,onChange:m=>q({...S,number_plate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:S.capacity,onChange:m=>q({...S,capacity:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),e.jsxDEV("input",{type:"text",value:S.model,onChange:m=>q({...S,model:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),e.jsxDEV("input",{type:"number",value:S.year,onChange:m=>q({...S,year:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:S.is_active,onChange:m=>q({...S,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>he(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[C.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:Jt(C)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.route_name||Kt(C.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsxDEV("button",{onClick:()=>he(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),M&&I&&e.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:J?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{T(!1),Z(!1),fe(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),J?e.jsxDEV("form",{onSubmit:Xt,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:X.name,onChange:m=>ye({...X,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:X.city,onChange:m=>ye({...X,city:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:X.distance_km,onChange:m=>ye({...X,distance_km:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:X.estimated_duration_minutes,onChange:m=>ye({...X,estimated_duration_minutes:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:X.is_active,onChange:m=>ye({...X,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),e.jsxDEV("textarea",{value:X.description,onChange:m=>ye({...X,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>Z(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:I.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:I.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[I.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[I.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:I.created_at?new Date(I.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),I.description&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:I.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsxDEV("button",{onClick:()=>Z(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function ts(){const[n,t]=h.useState(null),[r,o]=h.useState(null),[s,i]=h.useState(!0),[a,l]=h.useState(null),[c,u]=h.useState("overview");h.useEffect(()=>{f()},[]);const f=async()=>{i(!0),l(null);try{const[D,y]=await Promise.all([Ne.getAnalytics(),Ne.getSystemHealth()]);D.success&&D.data&&t(D.data),y.success&&y.data&&o(y.data),(!D.success||!y.success)&&l("Failed to load dashboard data")}catch(D){l("An error occurred while loading dashboard data"),console.error("❌ Dashboard data loading error:",D)}finally{i(!1)}},g=async()=>{try{await ie.signOut(),window.location.href="/"}catch(D){console.error("❌ Sign out error:",D)}},b=ie.getCurrentProfile();return s?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):a?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"card-glass p-8",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),e.jsxDEV("p",{className:"text-red-200 mb-4",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),e.jsxDEV("button",{onClick:f,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[e.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(b==null?void 0:b.first_name)||(b==null?void 0:b.full_name)||(b==null?void 0:b.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("button",{onClick:f,className:"btn-primary text-sm",disabled:s,children:s?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV("button",{onClick:g,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"border-b border-white/20",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[e.jsxDEV("button",{onClick:()=>u("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="overview"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="analytics"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("management"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="management"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:174,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("media"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="media"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[c==="overview"&&e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[e.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:214,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:220,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:219,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:218,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:206,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:242,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:252,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:251,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:234,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:232,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:274,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:280,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:265,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:264,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:302,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:312,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:311,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:310,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:292,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:13},this),n&&e.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:335,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[n.activeBuses,"/",n.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:334,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:343,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[n.activeRoutes,"/",n.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:342,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:351,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[n.activeDrivers,"/",n.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:350,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:329,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:364,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:369,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[n.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:368,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:377,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:376,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:363,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:362,columnNumber:17},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:390,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-white/70",children:r!=null&&r.timestamp?new Date(r.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:389,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:201,columnNumber:11},this),c==="analytics"&&n&&e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:e.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[e.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:n.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:414,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[e.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:423,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:n.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:422,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[e.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:431,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:n.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:430,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[e.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:439,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[n.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:438,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:451,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:456,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${n.activeBuses/n.totalBuses*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:461,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:460,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[n.activeBuses,"/",n.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:455,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:474,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${n.activeRoutes/n.totalRoutes*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:478,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[n.activeRoutes,"/",n.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:473,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:492,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${n.activeDrivers/n.totalDrivers*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:497,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:496,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[n.activeDrivers,"/",n.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:406,columnNumber:11},this),c==="management"&&e.jsxDEV(es,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:516,columnNumber:40},this),c==="media"&&e.jsxDEV(Zo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:199,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}const dn=({children:n,className:t="",variant:r="default",hover:o=!0,glow:s=!1,onClick:i,delay:a=0})=>{const l="relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable",c={default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"},u=o?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",f=s?"hover:shadow-blue-500/20 hover:shadow-2xl":"",g=i?"cursor-pointer":"";return e.jsxDEV(ee.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:a,ease:[.4,0,.2,1]},whileHover:o?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:i?{scale:.98}:{},onClick:i,className:`
        ${l}
        ${c[r]}
        ${u}
        ${f}
        ${g}
        ${t}
      `,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),s&&e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative z-10 p-6 space-stable",children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)},ns=({children:n,variant:t="primary",size:r="md",className:o="",onClick:s,disabled:i=!1,loading:a=!1,icon:l,iconPosition:c="left"})=>{const u="relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",f={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},g={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"};return e.jsxDEV(ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,disabled:i||a,className:`
        ${u}
        ${f[r]}
        ${g[t]}
        hover:-translate-y-0.5 active:translate-y-0
        ${o}
      `,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),e.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[a&&e.jsxDEV(ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),l&&c==="left"&&!a&&e.jsxDEV("span",{className:"flex-shrink-0",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV("span",{children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),l&&c==="right"&&!a&&e.jsxDEV("span",{className:"flex-shrink-0",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0)};function rs({onLoginSuccess:n}){const t=Cn(),{setTransition:r}=jn(),[o,s]=h.useState(!1),[i,a]=h.useState(null),[l,c]=h.useState(""),[u,f]=h.useState(""),[g,b]=h.useState(""),[D,y]=h.useState(null);h.useEffect(()=>{setTimeout(async()=>{try{for(console.log("🔄 Attempting automatic session recovery...");!ie.isInitialized();)await new Promise(E=>setTimeout(E,100));const L=await ie.recoverSession();L.success&&ie.isAdmin()?(console.log("✅ Session recovered, redirecting to admin panel"),$()):console.log("📝 Session recovery failed or user is not admin:",L.error)}catch(L){console.log("📝 No valid session to recover:",L)}},2e3)},[]);const k=async v=>{v.preventDefault(),s(!0),a(null),y(null);try{const L=new Promise((R,O)=>{setTimeout(()=>O(new Error("Login timeout")),5e3)}),E=ie.signIn(l,u),U=await Promise.race([E,L]);U.success&&U.user?U.user.role==="admin"?(y("Login successful! Loading admin dashboard..."),setTimeout(()=>{$()},500)):(a("Access denied. Admin privileges required."),await ie.signOut()):a(U.error||"Login failed. Please check your credentials.")}catch(L){console.error("❌ Login error:",L),L instanceof Error&&L.message==="Login timeout"?a("Login timed out. This might be due to slow network or profile loading. Please try again."):L instanceof Error&&L.message.includes("environment variables")?a("Configuration error. Please check your environment setup."):L instanceof Error&&L.message.includes("Profile loading timeout")?a("Profile loading is taking longer than expected. Please try again."):a("Network error. Please check your connection and try again.")}finally{s(!1)}},$=()=>{r("login-to-dashboard"),setTimeout(()=>{n?n():t("/admin-dashboard",{replace:!0})},500)},x=async()=>{s(!0),a(null);try{(await ie.recoverSession()).success&&ie.isAdmin()?(y("Session recovered! Redirecting..."),setTimeout(()=>{$()},1e3)):a("No valid session found. Please log in again.")}catch{a("Session recovery failed. Please log in again.")}finally{s(!1)}},j=async()=>{s(!0),a(null);try{await ie.forceFreshLogin(),y("Session cleared. Please log in again with your credentials.")}catch{a("Failed to clear session.")}finally{s(!1)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:167,columnNumber:9},this),e.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((v,L)=>e.jsxDEV(ee.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*5},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},L,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:174,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:172,columnNumber:7},this),e.jsxDEV(ee.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"p-8 relative",children:[e.jsxDEV(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[e.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:217,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:225,columnNumber:13},this),e.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:11},this),e.jsxDEV(ee.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:k,className:"space-y-6",children:[e.jsxDEV(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l,onChange:v=>c(v.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:254,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:276,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:v=>f(v.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:295,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[e.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",e.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:309,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:305,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:g,onChange:v=>b(v.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:323,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:300,columnNumber:13},this),e.jsxDEV(un,{children:o&&e.jsxDEV(ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:e.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[e.jsxDEV(ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:337,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:328,columnNumber:13},this),e.jsxDEV(un,{children:i&&e.jsxDEV(ee.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:363,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:362,columnNumber:21},this),e.jsxDEV("div",{className:"ml-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:i},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:361,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:355,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV(un,{children:D&&e.jsxDEV(ee.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:396,columnNumber:21},this),e.jsxDEV("div",{className:"ml-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:410,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:D},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:413,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:387,columnNumber:13},this),e.jsxDEV(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:e.jsxDEV(ns,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:o,loading:o,icon:e.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:439,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:433,columnNumber:19},this),children:o?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:426,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:421,columnNumber:13},this),e.jsxDEV(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[e.jsxDEV("button",{type:"button",onClick:x,disabled:o,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:17},this),e.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:468,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:j,disabled:o,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:459,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[e.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:480,columnNumber:17},this),e.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:163,columnNumber:5},this)}const os=({children:n,className:t=""})=>e.jsxDEV(ee.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:t,children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),Rn=({children:n,className:t=""})=>e.jsxDEV(ee.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:t,children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),ss=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Bus Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"12",width:"40",height:"20",rx:"2",fill:"#3B82F6",stroke:"#1E40AF",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:20,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:32,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:42,columnNumber:5},void 0),e.jsxDEV("rect",{x:"26",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:52,columnNumber:5},void 0),e.jsxDEV("rect",{x:"36",y:"14",width:"6",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:62,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"22",width:"12",height:"8",rx:"1",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:74,columnNumber:5},void 0),e.jsxDEV("line",{x1:"24",y1:"22",x2:"24",y2:"30",stroke:"#F59E0B",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:84,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:87,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:95,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:96,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:104,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"8",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:107,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:108,columnNumber:5},void 0),e.jsxDEV("rect",{x:"2",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:111,columnNumber:5},void 0),e.jsxDEV("rect",{x:"44",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:112,columnNumber:5},void 0),e.jsxDEV("rect",{x:"28",y:"16",width:"8",height:"3",rx:"0.5",fill:"#FEF3C7",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:115,columnNumber:5},void 0),e.jsxDEV("text",{x:"32",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"GU"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:124,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:10,columnNumber:3},void 0),is=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Map Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"2",fill:"#F0FDF4",stroke:"#16A34A",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:148,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"16",x2:"40",y2:"16",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:160,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"24",x2:"40",y2:"24",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:161,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"32",x2:"40",y2:"32",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:162,columnNumber:5},void 0),e.jsxDEV("line",{x1:"16",y1:"12",x2:"16",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:163,columnNumber:5},void 0),e.jsxDEV("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:164,columnNumber:5},void 0),e.jsxDEV("line",{x1:"32",y1:"12",x2:"32",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:5},void 0),e.jsxDEV("rect",{x:"12",y:"20",width:"16",height:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:168,columnNumber:5},void 0),e.jsxDEV("rect",{x:"20",y:"12",width:"2",height:"16",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:177,columnNumber:5},void 0),e.jsxDEV("rect",{x:"10",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:188,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:197,columnNumber:5},void 0),e.jsxDEV("rect",{x:"22",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:206,columnNumber:5},void 0),e.jsxDEV("rect",{x:"28",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:215,columnNumber:5},void 0),e.jsxDEV("rect",{x:"34",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:224,columnNumber:5},void 0),e.jsxDEV("rect",{x:"11",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:235,columnNumber:5},void 0),e.jsxDEV("rect",{x:"13",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:236,columnNumber:5},void 0),e.jsxDEV("rect",{x:"17",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:237,columnNumber:5},void 0),e.jsxDEV("rect",{x:"19",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:238,columnNumber:5},void 0),e.jsxDEV("rect",{x:"23",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:239,columnNumber:5},void 0),e.jsxDEV("rect",{x:"25",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:240,columnNumber:5},void 0),e.jsxDEV("rect",{x:"29",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:241,columnNumber:5},void 0),e.jsxDEV("rect",{x:"31",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:242,columnNumber:5},void 0),e.jsxDEV("rect",{x:"35",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:243,columnNumber:5},void 0),e.jsxDEV("rect",{x:"37",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:244,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"22",r:"2",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:247,columnNumber:5},void 0),e.jsxDEV("path",{d:"M24 24 L26 28 L22 28 Z",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:255,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"22",r:"0.5",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:261,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"16",r:"3",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:264,columnNumber:5},void 0),e.jsxDEV("text",{x:"36",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"N"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:272,columnNumber:5},void 0),e.jsxDEV("text",{x:"36",y:"22",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"S"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:282,columnNumber:5},void 0),e.jsxDEV("text",{x:"33",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"W"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:292,columnNumber:5},void 0),e.jsxDEV("text",{x:"39",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"E"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:302,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:138,columnNumber:3},void 0),ls=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Admin Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"3",fill:"#F8FAFC",stroke:"#8B5CF6",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:326,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"10",width:"36",height:"4",rx:"1",fill:"#8B5CF6",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:338,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"8",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:347,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"10",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:348,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:349,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"16",width:"8",height:"20",rx:"1",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:352,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"18",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:364,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"22",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:365,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"26",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:366,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"30",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:367,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"16",width:"26",height:"20",rx:"1",fill:"#FFFFFF",stroke:"#DDD6FE",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:370,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:382,columnNumber:5},void 0),e.jsxDEV("rect",{x:"30",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:392,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:402,columnNumber:5},void 0),e.jsxDEV("rect",{x:"30",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:412,columnNumber:5},void 0),e.jsxDEV("path",{d:"M20 22 L22 21 L24 23 L26 20 L28 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:424,columnNumber:5},void 0),e.jsxDEV("path",{d:"M32 22 L34 21 L36 23 L38 20 L40 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:430,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"20",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:438,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"22",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:439,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:440,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"26",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:441,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"28",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:442,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"32",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:443,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"34",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:444,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:445,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"38",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:446,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:447,columnNumber:5},void 0),e.jsxDEV("rect",{x:"20",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:450,columnNumber:5},void 0),e.jsxDEV("rect",{x:"23",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:451,columnNumber:5},void 0),e.jsxDEV("rect",{x:"26",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:452,columnNumber:5},void 0),e.jsxDEV("rect",{x:"29",y:"31",width:"2",height:"1",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:453,columnNumber:5},void 0),e.jsxDEV("rect",{x:"32",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:454,columnNumber:5},void 0),e.jsxDEV("rect",{x:"35",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:455,columnNumber:5},void 0),e.jsxDEV("rect",{x:"38",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:456,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"12",r:"2",fill:"#8B5CF6",stroke:"#7C3AED",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:459,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:467,columnNumber:5},void 0),e.jsxDEV("path",{d:"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12",stroke:"#7C3AED",strokeWidth:"0.5",strokeLinecap:"round"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:468,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:316,columnNumber:3},void 0),ar=()=>{const n=Cn(),[t,r]=h.useState(!1);h.useEffect(()=>{const a=()=>{r(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const{setTransition:o}=jn(),s=a=>{a.includes("login")?o("homepage-to-login"):a.includes("student")||a.includes("student-map")?o("homepage-to-map"):o("default"),setTimeout(()=>{n(a)},200)},i=t?8:20;return e.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:e.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[e.jsxDEV(ee.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[e.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:528,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:527,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:532,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:535,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:521,columnNumber:9},void 0),e.jsxDEV(os,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[e.jsxDEV(Rn,{children:e.jsxDEV(ee.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:550,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/driver-login"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(ss,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:560,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:559,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:562,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:565,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:558,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:572,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:571,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:552,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:542,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:541,columnNumber:11},void 0),e.jsxDEV(Rn,{children:e.jsxDEV(ee.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:588,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/student-map"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(is,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:598,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:597,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:600,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:603,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:596,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:610,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:609,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:590,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:580,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:579,columnNumber:11},void 0),e.jsxDEV(Rn,{children:e.jsxDEV(ee.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:626,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/admin-login"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(ls,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:636,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:635,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:638,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:641,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:634,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:648,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:647,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:628,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:618,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:617,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:539,columnNumber:9},void 0),e.jsxDEV(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:e.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:662,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:656,columnNumber:9},void 0),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(i)].map((a,l)=>e.jsxDEV(ee.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},l,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:671,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:669,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:519,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:517,columnNumber:5},void 0)};class as extends h.Component{constructor(){super(...arguments);B(this,"state",{hasError:!1,errorId:"",retryCount:0});B(this,"resetError",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,errorId:"",retryCount:this.state.retryCount+1})});B(this,"handleRetry",()=>{this.resetError()});B(this,"handleReportError",()=>{const{error:r,errorInfo:o,errorId:s}=this.state;r&&(console.log("📧 Error Report:",{errorId:s,error:r.message,stack:r.stack,componentStack:o==null?void 0:o.componentStack,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()}),alert("Thank you for reporting this error. We will investigate and fix it."))});B(this,"handleGoHome",()=>{window.location.href="/"})}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(r,o){kt(r,{service:"ui",operation:"component-error"},"high"),this.setState({errorInfo:o}),this.props.onError&&this.props.onError(r,o),console.error("🚨 Error Boundary caught error:",{error:r.message,stack:r.stack,componentStack:o.componentStack,errorId:this.state.errorId})}componentDidUpdate(r){r.resetKey!==this.props.resetKey&&this.state.hasError&&this.resetError()}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:r,errorInfo:o,errorId:s,retryCount:i}=this.state,l=this.props.showDetails!==!1&&!0;return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"max-w-2xl w-full mx-auto",children:e.jsxDEV("div",{className:"bg-white rounded-xl shadow-2xl p-8 border border-red-200",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:121,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:120,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:119,columnNumber:17},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:124,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"We're sorry, but something unexpected happened. Our team has been notified."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:127,columnNumber:17},this),s&&e.jsxDEV("p",{className:"text-sm text-gray-500 mb-4",children:["Error ID: ",e.jsxDEV("code",{className:"bg-gray-100 px-2 py-1 rounded",children:s},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:132,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:131,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:118,columnNumber:15},this),l&&r&&e.jsxDEV("details",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[e.jsxDEV("summary",{className:"cursor-pointer font-medium text-gray-700 mb-2",children:"Error Details (Development)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:140,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{className:"text-red-600",children:"Message:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:145,columnNumber:23},this),e.jsxDEV("pre",{className:"text-sm text-gray-800 mt-1 p-2 bg-white rounded border overflow-x-auto",children:r.message},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:146,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:144,columnNumber:21},this),r.stack&&e.jsxDEV("div",{children:[e.jsxDEV("strong",{className:"text-red-600",children:"Stack Trace:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:152,columnNumber:25},this),e.jsxDEV("pre",{className:"text-xs text-gray-800 mt-1 p-2 bg-white rounded border overflow-x-auto max-h-32",children:r.stack},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:153,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:151,columnNumber:23},this),(o==null?void 0:o.componentStack)&&e.jsxDEV("div",{children:[e.jsxDEV("strong",{className:"text-red-600",children:"Component Stack:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:160,columnNumber:25},this),e.jsxDEV("pre",{className:"text-xs text-gray-800 mt-1 p-2 bg-white rounded border overflow-x-auto max-h-32",children:o.componentStack},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:161,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:159,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:143,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:139,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxDEV("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"🔄 Try Again"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:172,columnNumber:17},this),e.jsxDEV("button",{onClick:this.handleGoHome,className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"🏠 Go Home"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:179,columnNumber:17},this),e.jsxDEV("button",{onClick:this.handleReportError,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors",children:"📧 Report Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:186,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:171,columnNumber:15},this),e.jsxDEV("div",{className:"mt-6 text-center",children:[e.jsxDEV("p",{className:"text-sm text-gray-500 mb-2",children:"If the problem persists, try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:196,columnNumber:17},this),e.jsxDEV("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxDEV("li",{children:"• Refreshing the page"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:200,columnNumber:19},this),e.jsxDEV("li",{children:"• Clearing your browser cache"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:201,columnNumber:19},this),e.jsxDEV("li",{children:"• Checking your internet connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:202,columnNumber:19},this),e.jsxDEV("li",{children:"• Contacting support if the issue continues"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:203,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:199,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:195,columnNumber:15},this),i>0&&e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("p",{className:"text-xs text-gray-400",children:["Retry attempts: ",i]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:210,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:116,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:115,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/ErrorBoundary.tsx",lineNumber:114,columnNumber:9},this)}return this.props.children}}const cs=({showOfflineMessage:n=!0,onNetworkChange:t})=>{const[r,o]=h.useState({isOnline:navigator.onLine}),[s,i]=h.useState(!1),[a,l]=h.useState(Date.now());if(h.useEffect(()=>{const c=()=>{const u=navigator.onLine,f={isOnline:u};if("connection"in navigator){const g=navigator.connection;g&&(f.effectiveType=g.effectiveType,f.downlink=g.downlink,f.rtt=g.rtt,f.saveData=g.saveData)}o(f),u?(l(Date.now()),i(!1),r.isOnline||kt("Network connection restored",{service:"network",operation:"connection-restored"},"low")):(i(!0),r.isOnline&&kt("Network connection lost",{service:"network",operation:"connection-lost"},"medium")),t&&t(u)};if(c(),window.addEventListener("online",c),window.addEventListener("offline",c),"connection"in navigator){const u=navigator.connection;u&&u.addEventListener("change",c)}return()=>{if(window.removeEventListener("online",c),window.removeEventListener("offline",c),"connection"in navigator){const u=navigator.connection;u&&u.removeEventListener("change",c)}}},[t]),h.useEffect(()=>{if(s&&!r.isOnline){const c=setTimeout(()=>{i(!1)},5e3);return()=>clearTimeout(c)}},[s,r.isOnline]),r.isOnline&&!n)return null;if(!r.isOnline&&s){const c=Math.floor((Date.now()-a)/1e3);return e.jsxDEV("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-600 text-white px-4 py-3 shadow-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center space-x-3",children:[e.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2.25a9.75 9.75 0 100 19.5 9.75 9.75 0 000-19.5z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:128,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:127,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"You're offline"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:131,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm opacity-90",children:["Offline for ",c,"s • Some features may be limited"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:130,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:126,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>i(!1),className:"text-white hover:text-red-200 transition-colors",children:e.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:142,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:141,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:137,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:125,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:124,columnNumber:7},void 0)}return r.isOnline&&n?e.jsxDEV("div",{className:"fixed top-4 right-4 z-40",children:e.jsxDEV("div",{className:"bg-green-500 text-white px-3 py-2 rounded-lg shadow-lg flex items-center space-x-2",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:155,columnNumber:11},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:"Online"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:156,columnNumber:11},void 0),r.effectiveType&&e.jsxDEV("span",{className:"text-xs opacity-75",children:["(",r.effectiveType,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:158,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:154,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/error/NetworkStatus.tsx",lineNumber:153,columnNumber:7},void 0):null},ms=er.lazy(()=>pr(()=>import("./EnhancedStudentMap-Bu79HgS1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function us(){console.log("🚀 App component is rendering...");const{loading:n,error:t,setUser:r,setLoading:o,setError:s}=Co(),{data:i,isLoading:a,error:l}=Bo();h.useEffect(()=>{const u=()=>{const f=ie.getCurrentUser();r(f?{id:f.id,email:f.email||"",role:"student",created_at:f.created_at,updated_at:f.updated_at}:null),o(!1)};return ie.onAuthStateChange(u),u(),()=>{ie.removeAuthStateChangeListener()}},[r,o]),h.useEffect(()=>{s(l?"Failed to connect to backend":null)},[l,s]);const c=()=>e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:e.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:e.jsxDEV("div",{className:"card-glass p-8",children:[e.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV(Ln,{to:"/driver-login",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:88,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:84,columnNumber:13},this),e.jsxDEV(Ln,{to:"/student-map",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"🗺️"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:100,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:101,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:96,columnNumber:13},this),e.jsxDEV(Ln,{to:"/admin-login",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"⚙️"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:112,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:113,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:114,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:108,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:82,columnNumber:11},this),i&&e.jsxDEV("div",{className:"mt-8 p-4 bg-green-500/20 border border-green-400/30 rounded-xl",children:e.jsxDEV("p",{className:"text-green-200 text-center",children:["✅ Backend Status: ",i.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:123,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:122,columnNumber:13},this),t&&e.jsxDEV("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-400/30 rounded-xl",children:e.jsxDEV("p",{className:"text-red-200 text-center",children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:131,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:77,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:76,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:75,columnNumber:5},this);return n||a?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:144,columnNumber:11},this),e.jsxDEV("p",{className:"text-white",children:"Loading application..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:143,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:142,columnNumber:7},this):e.jsxDEV(as,{children:e.jsxDEV(so,{children:[e.jsxDEV(cs,{onNetworkChange:u=>{console.log(`🌐 Network status changed: ${u?"Online":"Offline"}`)}},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:9},this),e.jsxDEV(Ho,{children:e.jsxDEV(Go,{children:e.jsxDEV(io,{children:[e.jsxDEV(ze,{path:"/",element:e.jsxDEV(ar,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:161,columnNumber:40},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:161,columnNumber:15},this),e.jsxDEV(ze,{path:"/legacy",element:e.jsxDEV(c,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:46},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:15},this),e.jsxDEV(ze,{path:"/driver-login",element:e.jsxDEV(Yo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:165,columnNumber:52},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:165,columnNumber:15},this),e.jsxDEV(ze,{path:"/driver-dashboard",element:e.jsxDEV(Ko,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:56},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:15},this),e.jsxDEV(ze,{path:"/driver-interface",element:e.jsxDEV(Uo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:167,columnNumber:56},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:167,columnNumber:15},this),e.jsxDEV(ze,{path:"/student-map",element:e.jsxDEV(h.Suspense,{fallback:e.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:176,columnNumber:25},this),e.jsxDEV("p",{className:"text-white text-lg",children:"Loading Student Map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:177,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:175,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:174,columnNumber:21},this),children:e.jsxDEV(ms,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:181,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:173,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:170,columnNumber:15},this),e.jsxDEV(ze,{path:"/admin-login",element:e.jsxDEV(rs,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:187,columnNumber:51},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:187,columnNumber:15},this),e.jsxDEV(ze,{path:"/admin-dashboard",element:e.jsxDEV(ts,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:188,columnNumber:55},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:188,columnNumber:15},this),e.jsxDEV(ze,{path:"*",element:e.jsxDEV(ar,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:191,columnNumber:40},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:153,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:152,columnNumber:5},this)}const ds=()=>{{const n=console.warn;console.warn=(...t)=>{const r=t[0];typeof r=="string"&&(r.includes("React Router Future Flag Warning")||r.includes("v7_startTransition")||r.includes("v7_relativeSplatPath"))||typeof r=="string"&&r.includes("WebGL context was lost")||typeof r=="string"&&(r.includes("Firefox can't establish a connection")||r.includes("connection was interrupted while the page was loading"))||n.apply(console,t)}}},fs=window.fetch;window.fetch=async function(n,t){if(typeof n=="string"&&(n.includes(Pe.api.url)||n.includes("localhost")))try{let r=ie.getAccessToken();!r&&ie.isAuthenticated()&&(console.log("🔄 No token found but user is authenticated, attempting to refresh session..."),(await ie.refreshSession()).success&&(r=ie.getAccessToken(),console.log("✅ Session refreshed, new token obtained"))),r&&(t=t||{},t.headers={...t.headers,Authorization:`Bearer ${r}`})}catch{console.log("🔓 Public access - authentication not available")}return fs(n,t)};var K={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return cr(this.context.count)},getNextContextId(){return cr(this.context.count++)}};function cr(n){const t=String(n),r=t.length-1;return K.context.id+(r?String.fromCharCode(96+r):"")+t}function wt(n){K.context=n}var jr=!1,gs=(n,t)=>n===t,hn=Symbol("solid-proxy"),Dr=typeof Proxy=="function",yr=Symbol("solid-track"),bn={equals:gs},Er=Mr,Ge=1,Nn=2,wr={owned:null,cleanups:null,context:null,owner:null},Fn={},oe=null,On=null,hs=null,ae=null,Ae=null,We=null,Dn=0;function rt(n,t){const r=ae,o=oe,s=n.length===0,i=t===void 0?o:t,a=s?wr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=s?n:()=>n(()=>Se(()=>Mt(a)));oe=a,ae=null;try{return Ue(l,!0)}finally{ae=r,oe=o}}function ke(n,t){t=t?Object.assign({},bn,t):bn;const r={value:n,observers:null,observerSlots:null,comparator:t.equals||void 0},o=s=>(typeof s=="function"&&(s=s(r.value)),Ar(r,s));return[kr.bind(r),o]}function bs(n,t,r){const o=yn(n,t,!0,Ge);xt(o)}function ot(n,t,r){const o=yn(n,t,!1,Ge);xt(o)}function Pr(n,t,r){Er=Es;const o=yn(n,t,!1,Ge);(!r||!r.render)&&(o.user=!0),We?We.push(o):xt(o)}function we(n,t,r){r=r?Object.assign({},bn,r):bn;const o=yn(n,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,xt(o),kr.bind(o)}function Ns(n){return n&&typeof n=="object"&&"then"in n}function xs(n,t,r){let o,s,i;o=!0,s=n,i={};let a=null,l=Fn,c=null,u=!1,f="initialValue"in i,g=typeof o=="function"&&we(o);const b=new Set,[D,y]=(i.storage||ke)(i.initialValue),[k,$]=ke(void 0),[x,j]=ke(void 0,{equals:!1}),[v,L]=ke(f?"ready":"unresolved");K.context&&(c=K.getNextContextId(),i.ssrLoadFrom==="initial"?l=i.initialValue:K.load&&K.has(c)&&(l=K.load(c)));function E(M,T,C,A){return a===M&&(a=null,A!==void 0&&(f=!0),(M===l||T===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:T})),l=Fn,U(T,C)),T}function U(M,T){Ue(()=>{T===void 0&&y(()=>M),L(T!==void 0?"errored":f?"ready":"unresolved"),$(T);for(const C of b.keys())C.decrement();b.clear()},!1)}function R(){const M=js,T=D(),C=k();if(C!==void 0&&!a)throw C;return ae&&ae.user,T}function O(M=!0){if(M!==!1&&u)return;u=!1;const T=g?g():o;if(T==null||T===!1){E(a,Se(D));return}let C;const A=l!==Fn?l:Se(()=>{try{return s(T,{value:D(),refetching:M})}catch(I){C=I}});if(C!==void 0){E(a,void 0,fn(C),T);return}else if(!Ns(A))return E(a,A,void 0,T),A;return a=A,"v"in A?(A.s===1?E(a,A.v,void 0,T):E(a,void 0,fn(A.v),T),A):(u=!0,queueMicrotask(()=>u=!1),Ue(()=>{L(f?"refreshing":"pending"),j()},!1),A.then(I=>E(A,I,void 0,T),I=>E(A,void 0,fn(I),T)))}Object.defineProperties(R,{state:{get:()=>v()},error:{get:()=>k()},loading:{get(){const M=v();return M==="pending"||M==="refreshing"}},latest:{get(){if(!f)return R();const M=k();if(M&&!a)throw M;return D()}}});let Q=oe;return g?bs(()=>(Q=oe,O(!1))):O(!1),[R,{refetch:M=>Sr(Q,()=>O(M)),mutate:y}]}function nl(n){return Ue(n,!1)}function Se(n){if(ae===null)return n();const t=ae;ae=null;try{return n()}finally{ae=t}}function rl(n,t,r){const o=Array.isArray(n);let s,i=r&&r.defer;return a=>{let l;if(o){l=Array(n.length);for(let u=0;u<n.length;u++)l[u]=n[u]()}else l=n();if(i)return i=!1,a;const c=Se(()=>t(l,s,a));return s=l,c}}function ps(n){Pr(()=>Se(n))}function At(n){return oe===null||(oe.cleanups===null?oe.cleanups=[n]:oe.cleanups.push(n)),n}function mr(){return oe}function Sr(n,t){const r=oe,o=ae;oe=n,ae=null;try{return Ue(t,!0)}catch(s){nr(s)}finally{oe=r,ae=o}}function vs(n){const t=ae,r=oe;return Promise.resolve().then(()=>{ae=t,oe=r;let o;return Ue(n,!1),ae=oe=null,o?o.done:void 0})}var[Cs,ol]=ke(!1);function sl(){return[Cs,vs]}function il(n,t){const r=Symbol("context");return{id:r,Provider:ws(r),defaultValue:n}}function ll(n){let t;return oe&&oe.context&&(t=oe.context[n.id])!==void 0?t:n.defaultValue}function Vr(n){const t=we(n),r=we(()=>qn(t()));return r.toArray=()=>{const o=r();return Array.isArray(o)?o:o!=null?[o]:[]},r}var js;function kr(){if(this.sources&&this.state)if(this.state===Ge)xt(this);else{const n=Ae;Ae=null,Ue(()=>pn(this),!1),Ae=n}if(ae){const n=this.observers?this.observers.length:0;ae.sources?(ae.sources.push(this),ae.sourceSlots.push(n)):(ae.sources=[this],ae.sourceSlots=[n]),this.observers?(this.observers.push(ae),this.observerSlots.push(ae.sources.length-1)):(this.observers=[ae],this.observerSlots=[ae.sources.length-1])}return this.value}function Ar(n,t,r){let o=n.value;return(!n.comparator||!n.comparator(o,t))&&(n.value=t,n.observers&&n.observers.length&&Ue(()=>{for(let s=0;s<n.observers.length;s+=1){const i=n.observers[s],a=On&&On.running;a&&On.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?Ae.push(i):We.push(i),i.observers&&_r(i)),a||(i.state=Ge)}if(Ae.length>1e6)throw Ae=[],new Error},!1)),t}function xt(n){if(!n.fn)return;Mt(n);const t=Dn;Ds(n,n.value,t)}function Ds(n,t,r){let o;const s=oe,i=ae;ae=oe=n;try{o=n.fn(t)}catch(a){return n.pure&&(n.state=Ge,n.owned&&n.owned.forEach(Mt),n.owned=null),n.updatedAt=r+1,nr(a)}finally{ae=i,oe=s}(!n.updatedAt||n.updatedAt<=r)&&(n.updatedAt!=null&&"observers"in n?Ar(n,o):n.value=o,n.updatedAt=r)}function yn(n,t,r,o=Ge,s){const i={fn:n,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:oe,context:oe?oe.context:null,pure:r};return oe===null||oe!==wr&&(oe.owned?oe.owned.push(i):oe.owned=[i]),i}function xn(n){if(n.state===0)return;if(n.state===Nn)return pn(n);if(n.suspense&&Se(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Dn);)n.state&&t.push(n);for(let r=t.length-1;r>=0;r--)if(n=t[r],n.state===Ge)xt(n);else if(n.state===Nn){const o=Ae;Ae=null,Ue(()=>pn(n,t[0]),!1),Ae=o}}function Ue(n,t){if(Ae)return n();let r=!1;t||(Ae=[]),We?r=!0:We=[],Dn++;try{const o=n();return ys(r),o}catch(o){r||(We=null),Ae=null,nr(o)}}function ys(n){if(Ae&&(Mr(Ae),Ae=null),n)return;const t=We;We=null,t.length&&Ue(()=>Er(t),!1)}function Mr(n){for(let t=0;t<n.length;t++)xn(n[t])}function Es(n){let t,r=0;for(t=0;t<n.length;t++){const o=n[t];o.user?n[r++]=o:xn(o)}if(K.context){if(K.count){K.effects||(K.effects=[]),K.effects.push(...n.slice(0,r));return}wt()}for(K.effects&&(K.done||!K.count)&&(n=[...K.effects,...n],r+=K.effects.length,delete K.effects),t=0;t<r;t++)xn(n[t])}function pn(n,t){n.state=0;for(let r=0;r<n.sources.length;r+=1){const o=n.sources[r];if(o.sources){const s=o.state;s===Ge?o!==t&&(!o.updatedAt||o.updatedAt<Dn)&&xn(o):s===Nn&&pn(o,t)}}}function _r(n){for(let t=0;t<n.observers.length;t+=1){const r=n.observers[t];r.state||(r.state=Nn,r.pure?Ae.push(r):We.push(r),r.observers&&_r(r))}}function Mt(n){let t;if(n.sources)for(;n.sources.length;){const r=n.sources.pop(),o=n.sourceSlots.pop(),s=r.observers;if(s&&s.length){const i=s.pop(),a=r.observerSlots.pop();o<s.length&&(i.sourceSlots[a]=o,s[o]=i,r.observerSlots[o]=a)}}if(n.tOwned){for(t=n.tOwned.length-1;t>=0;t--)Mt(n.tOwned[t]);delete n.tOwned}if(n.owned){for(t=n.owned.length-1;t>=0;t--)Mt(n.owned[t]);n.owned=null}if(n.cleanups){for(t=n.cleanups.length-1;t>=0;t--)n.cleanups[t]();n.cleanups=null}n.state=0}function fn(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function nr(n,t=oe){throw fn(n)}function qn(n){if(typeof n=="function"&&!n.length)return qn(n());if(Array.isArray(n)){const t=[];for(let r=0;r<n.length;r++){const o=qn(n[r]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return t}return n}function ws(n,t){return function(o){let s;return ot(()=>s=Se(()=>(oe.context={...oe.context,[n]:o.value},Vr(()=>o.children))),void 0),s}}var zn=Symbol("fallback");function vn(n){for(let t=0;t<n.length;t++)n[t]()}function Ps(n,t,r={}){let o=[],s=[],i=[],a=0,l=t.length>1?[]:null;return At(()=>vn(i)),()=>{let c=n()||[],u=c.length,f,g;return c[yr],Se(()=>{let D,y,k,$,x,j,v,L,E;if(u===0)a!==0&&(vn(i),i=[],o=[],s=[],a=0,l&&(l=[])),r.fallback&&(o=[zn],s[0]=rt(U=>(i[0]=U,r.fallback())),a=1);else if(a===0){for(s=new Array(u),g=0;g<u;g++)o[g]=c[g],s[g]=rt(b);a=u}else{for(k=new Array(u),$=new Array(u),l&&(x=new Array(u)),j=0,v=Math.min(a,u);j<v&&o[j]===c[j];j++);for(v=a-1,L=u-1;v>=j&&L>=j&&o[v]===c[L];v--,L--)k[L]=s[v],$[L]=i[v],l&&(x[L]=l[v]);for(D=new Map,y=new Array(L+1),g=L;g>=j;g--)E=c[g],f=D.get(E),y[g]=f===void 0?-1:f,D.set(E,g);for(f=j;f<=v;f++)E=o[f],g=D.get(E),g!==void 0&&g!==-1?(k[g]=s[f],$[g]=i[f],l&&(x[g]=l[f]),g=y[g],D.set(E,g)):i[f]();for(g=j;g<u;g++)g in k?(s[g]=k[g],i[g]=$[g],l&&(l[g]=x[g],l[g](g))):s[g]=rt(b);s=s.slice(0,a=u),o=c.slice(0)}return s});function b(D){if(i[g]=D,l){const[y,k]=ke(g);return l[g]=k,t(c[g],y)}return t(c[g])}}}function Ss(n,t,r={}){let o=[],s=[],i=[],a=[],l=0,c;return At(()=>vn(i)),()=>{const u=n()||[],f=u.length;return u[yr],Se(()=>{if(f===0)return l!==0&&(vn(i),i=[],o=[],s=[],l=0,a=[]),r.fallback&&(o=[zn],s[0]=rt(b=>(i[0]=b,r.fallback())),l=1),s;for(o[0]===zn&&(i[0](),i=[],o=[],s=[],l=0),c=0;c<f;c++)c<o.length&&o[c]!==u[c]?a[c](()=>u[c]):c>=o.length&&(s[c]=rt(g));for(;c<o.length;c++)i[c]();return l=a.length=i.length=f,o=u.slice(0),s=s.slice(0,l)});function g(b){i[c]=b;const[D,y]=ke(u[c]);return a[c]=y,t(D,c)}}}function Vs(n,t){return Se(()=>n(t||{}))}function sn(){return!0}var Wn={get(n,t,r){return t===hn?r:n.get(t)},has(n,t){return t===hn?!0:n.has(t)},set:sn,deleteProperty:sn,getOwnPropertyDescriptor(n,t){return{configurable:!0,enumerable:!0,get(){return n.get(t)},set:sn,deleteProperty:sn}},ownKeys(n){return n.keys()}};function Bn(n){return(n=typeof n=="function"?n():n)?n:{}}function ks(){for(let n=0,t=this.length;n<t;++n){const r=this[n]();if(r!==void 0)return r}}function As(...n){let t=!1;for(let a=0;a<n.length;a++){const l=n[a];t=t||!!l&&hn in l,n[a]=typeof l=="function"?(t=!0,we(l)):l}if(Dr&&t)return new Proxy({get(a){for(let l=n.length-1;l>=0;l--){const c=Bn(n[l])[a];if(c!==void 0)return c}},has(a){for(let l=n.length-1;l>=0;l--)if(a in Bn(n[l]))return!0;return!1},keys(){const a=[];for(let l=0;l<n.length;l++)a.push(...Object.keys(Bn(n[l])));return[...new Set(a)]}},Wn);const r={},o=Object.create(null);for(let a=n.length-1;a>=0;a--){const l=n[a];if(!l)continue;const c=Object.getOwnPropertyNames(l);for(let u=c.length-1;u>=0;u--){const f=c[u];if(f==="__proto__"||f==="constructor")continue;const g=Object.getOwnPropertyDescriptor(l,f);if(!o[f])o[f]=g.get?{enumerable:!0,configurable:!0,get:ks.bind(r[f]=[g.get.bind(l)])}:g.value!==void 0?g:void 0;else{const b=r[f];b&&(g.get?b.push(g.get.bind(l)):g.value!==void 0&&b.push(()=>g.value))}}}const s={},i=Object.keys(o);for(let a=i.length-1;a>=0;a--){const l=i[a],c=o[l];c&&c.get?Object.defineProperty(s,l,c):s[l]=c?c.value:void 0}return s}function Ms(n,...t){if(Dr&&hn in n){const s=new Set(t.length>1?t.flat():t[0]),i=t.map(a=>new Proxy({get(l){return a.includes(l)?n[l]:void 0},has(l){return a.includes(l)&&l in n},keys(){return a.filter(l=>l in n)}},Wn));return i.push(new Proxy({get(a){return s.has(a)?void 0:n[a]},has(a){return s.has(a)?!1:a in n},keys(){return Object.keys(n).filter(a=>!s.has(a))}},Wn)),i}const r={},o=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(n)){const i=Object.getOwnPropertyDescriptor(n,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,c=0;for(const u of t)u.includes(s)&&(l=!0,a?o[c][s]=i.value:Object.defineProperty(o[c],s,i)),++c;l||(a?r[s]=i.value:Object.defineProperty(r,s,i))}return[...o,r]}function _s(n){let t,r;const o=s=>{const i=K.context;if(i){const[l,c]=ke();K.count||(K.count=0),K.count++,(r||(r=n())).then(u=>{!K.done&&wt(i),K.count--,c(()=>u.default),wt()}),t=l}else if(!t){const[l]=xs(()=>(r||(r=n())).then(c=>c.default));t=l}let a;return we(()=>(a=t())?Se(()=>{if(!i||K.done)return a(s);const l=K.context;wt(i);const c=a(s);return wt(l),c}):"")};return o.preload=()=>r||((r=n()).then(s=>t=()=>s.default),r),o}var Ls=0;function al(){return K.context?K.getNextContextId():`cl-${Ls++}`}var Lr=n=>`Stale read from <${n}>.`;function cl(n){const t="fallback"in n&&{fallback:()=>n.fallback};return we(Ps(()=>n.each,n.children,t||void 0))}function ml(n){const t="fallback"in n&&{fallback:()=>n.fallback};return we(Ss(()=>n.each,n.children,t||void 0))}function ul(n){const t=n.keyed,r=we(()=>n.when,void 0,void 0),o=t?r:we(r,void 0,{equals:(s,i)=>!s==!i});return we(()=>{const s=o();if(s){const i=n.children;return typeof i=="function"&&i.length>0?Se(()=>i(t?s:()=>{if(!Se(o))throw Lr("Show");return r()})):i}return n.fallback},void 0,void 0)}function dl(n){const t=Vr(()=>n.children),r=we(()=>{const o=t(),s=Array.isArray(o)?o:[o];let i=()=>{};for(let a=0;a<s.length;a++){const l=a,c=s[a],u=i,f=we(()=>u()?void 0:c.when,void 0,void 0),g=c.keyed?f:we(f,void 0,{equals:(b,D)=>!b==!D});i=()=>u()||(g()?[l,f,c]:void 0)}return i});return we(()=>{const o=r()();if(!o)return n.fallback;const[s,i,a]=o,l=a.children;return typeof l=="function"&&l.length>0?Se(()=>l(a.keyed?i():()=>{var u;if(((u=Se(r)())==null?void 0:u[0])!==s)throw Lr("Match");return i()})):l},void 0,void 0)}function fl(n){return n}var Ts=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Is=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Ts]),Rs=new Set(["innerHTML","textContent","innerText","children"]),Fs=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Os=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Bs(n,t){const r=Os[n];return typeof r=="object"?r[t]?r.$:void 0:r}var $s=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Us=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Hs={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},gl=n=>we(()=>n());function qs(n,t,r){let o=r.length,s=t.length,i=o,a=0,l=0,c=t[s-1].nextSibling,u=null;for(;a<s||l<i;){if(t[a]===r[l]){a++,l++;continue}for(;t[s-1]===r[i-1];)s--,i--;if(s===a){const f=i<o?l?r[l-1].nextSibling:r[i-l]:c;for(;l<i;)n.insertBefore(r[l++],f)}else if(i===l)for(;a<s;)(!u||!u.has(t[a]))&&t[a].remove(),a++;else if(t[a]===r[i-1]&&r[l]===t[s-1]){const f=t[--s].nextSibling;n.insertBefore(r[l++],t[a++].nextSibling),n.insertBefore(r[--i],f),t[s]=r[i]}else{if(!u){u=new Map;let g=l;for(;g<i;)u.set(r[g],g++)}const f=u.get(t[a]);if(f!=null)if(l<f&&f<i){let g=a,b=1,D;for(;++g<s&&g<i&&!((D=u.get(t[g]))==null||D!==f+b);)b++;if(b>f-l){const y=t[a];for(;l<f;)n.insertBefore(r[l++],y)}else n.replaceChild(r[l++],t[a++])}else a++;else t[a++].remove()}}}var Pt="_$DX_DELEGATE";function zs(n,t,r,o={}){let s;return rt(i=>{s=i,t===document?n():Yn(t,n(),t.firstChild?null:void 0,r)},o.owner),()=>{s(),t.textContent=""}}function hl(n,t,r,o){let s;const i=()=>{const l=document.createElement("template");return l.innerHTML=n,l.content.firstChild},a=()=>(s||(s=i())).cloneNode(!0);return a.cloneNode=a,a}function Ws(n,t=window.document){const r=t[Pt]||(t[Pt]=new Set);for(let o=0,s=n.length;o<s;o++){const i=n[o];r.has(i)||(r.add(i),t.addEventListener(i,Tr))}}function bl(n=window.document){if(n[Pt]){for(let t of n[Pt].keys())n.removeEventListener(t,Tr);delete n[Pt]}}function Gn(n,t,r){st(n)||(r==null?n.removeAttribute(t):n.setAttribute(t,r))}function Gs(n,t,r,o){st(n)||(o==null?n.removeAttributeNS(t,r):n.setAttributeNS(t,r,o))}function Ys(n,t,r){st(n)||(r?n.setAttribute(t,""):n.removeAttribute(t))}function Ks(n,t){st(n)||(t==null?n.removeAttribute("class"):n.className=t)}function Qs(n,t,r,o){if(o)Array.isArray(r)?(n[`$$${t}`]=r[0],n[`$$${t}Data`]=r[1]):n[`$$${t}`]=r;else if(Array.isArray(r)){const s=r[0];n.addEventListener(t,r[0]=i=>s.call(n,r[1],i))}else n.addEventListener(t,r,typeof r!="function"&&r)}function Js(n,t,r={}){const o=Object.keys(t||{}),s=Object.keys(r);let i,a;for(i=0,a=s.length;i<a;i++){const l=s[i];!l||l==="undefined"||t[l]||(ur(n,l,!1),delete r[l])}for(i=0,a=o.length;i<a;i++){const l=o[i],c=!!t[l];!l||l==="undefined"||r[l]===c||!c||(ur(n,l,!0),r[l]=c)}return r}function Zs(n,t,r){if(!t)return r?Gn(n,"style"):t;const o=n.style;if(typeof t=="string")return o.cssText=t;typeof r=="string"&&(o.cssText=r=void 0),r||(r={}),t||(t={});let s,i;for(i in r)t[i]==null&&o.removeProperty(i),delete r[i];for(i in t)s=t[i],s!==r[i]&&(o.setProperty(i,s),r[i]=s);return r}function Xs(n,t={},r,o){const s={};return o||ot(()=>s.children=_t(n,t.children,s.children)),ot(()=>typeof t.ref=="function"&&ei(t.ref,n)),ot(()=>ti(n,t,r,!0,s,!0)),s}function ei(n,t,r){return Se(()=>n(t,r))}function Yn(n,t,r,o){if(r!==void 0&&!o&&(o=[]),typeof t!="function")return _t(n,t,o,r);ot(s=>_t(n,t(),s,r),o)}function ti(n,t,r,o,s={},i=!1){t||(t={});for(const a in s)if(!(a in t)){if(a==="children")continue;s[a]=dr(n,a,null,s[a],r,i,t)}for(const a in t){if(a==="children")continue;const l=t[a];s[a]=dr(n,a,l,s[a],r,i,t)}}function ni(n){let t,r;return!st()||!(t=K.registry.get(r=oi()))?n():(K.completed&&K.completed.add(t),K.registry.delete(r),t)}function st(n){return!!K.context&&!K.done&&(!n||n.isConnected)}function ri(n){return n.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function ur(n,t,r){const o=t.trim().split(/\s+/);for(let s=0,i=o.length;s<i;s++)n.classList.toggle(o[s],r)}function dr(n,t,r,o,s,i,a){let l,c,u,f,g;if(t==="style")return Zs(n,r,o);if(t==="classList")return Js(n,r,o);if(r===o)return o;if(t==="ref")i||r(n);else if(t.slice(0,3)==="on:"){const b=t.slice(3);o&&n.removeEventListener(b,o,typeof o!="function"&&o),r&&n.addEventListener(b,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const b=t.slice(10);o&&n.removeEventListener(b,o,!0),r&&n.addEventListener(b,r,!0)}else if(t.slice(0,2)==="on"){const b=t.slice(2).toLowerCase(),D=$s.has(b);if(!D&&o){const y=Array.isArray(o)?o[0]:o;n.removeEventListener(b,y)}(D||r)&&(Qs(n,b,r,D),D&&Ws([b]))}else if(t.slice(0,5)==="attr:")Gn(n,t.slice(5),r);else if(t.slice(0,5)==="bool:")Ys(n,t.slice(5),r);else if((g=t.slice(0,5)==="prop:")||(u=Rs.has(t))||!s&&((f=Bs(t,n.tagName))||(c=Is.has(t)))||(l=n.nodeName.includes("-")||"is"in a)){if(g)t=t.slice(5),c=!0;else if(st(n))return r;t==="class"||t==="className"?Ks(n,r):l&&!c&&!u?n[ri(t)]=r:n[f||t]=r}else{const b=s&&t.indexOf(":")>-1&&Hs[t.split(":")[0]];b?Gs(n,b,t,r):Gn(n,Fs[t]||t,r)}return r}function Tr(n){if(K.registry&&K.events&&K.events.find(([c,u])=>u===n))return;let t=n.target;const r=`$$${n.type}`,o=n.target,s=n.currentTarget,i=c=>Object.defineProperty(n,"target",{configurable:!0,value:c}),a=()=>{const c=t[r];if(c&&!t.disabled){const u=t[`${r}Data`];if(u!==void 0?c.call(t,u,n):c.call(t,n),n.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(n.target)&&i(t.host),!0},l=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}}),K.registry&&!K.done&&(K.done=_$HY.done=!0),n.composedPath){const c=n.composedPath();i(c[0]);for(let u=0;u<c.length-2&&(t=c[u],!!a());u++){if(t._$host){t=t._$host,l();break}if(t.parentNode===s)break}}else l();i(o)}function _t(n,t,r,o,s){const i=st(n);if(i){!r&&(r=[...n.childNodes]);let c=[];for(let u=0;u<r.length;u++){const f=r[u];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():c.push(f)}r=c}for(;typeof r=="function";)r=r();if(t===r)return r;const a=typeof t,l=o!==void 0;if(n=l&&r[0]&&r[0].parentNode||n,a==="string"||a==="number"){if(i||a==="number"&&(t=t.toString(),t===r))return r;if(l){let c=r[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),r=at(n,r,o,c)}else r!==""&&typeof r=="string"?r=n.firstChild.data=t:r=n.textContent=t}else if(t==null||a==="boolean"){if(i)return r;r=at(n,r,o)}else{if(a==="function")return ot(()=>{let c=t();for(;typeof c=="function";)c=c();r=_t(n,c,r,o)}),()=>r;if(Array.isArray(t)){const c=[],u=r&&Array.isArray(r);if(Kn(c,t,r,s))return ot(()=>r=_t(n,c,r,o,!0)),()=>r;if(i){if(!c.length)return r;if(o===void 0)return r=[...n.childNodes];let f=c[0];if(f.parentNode!==n)return r;const g=[f];for(;(f=f.nextSibling)!==o;)g.push(f);return r=g}if(c.length===0){if(r=at(n,r,o),l)return r}else u?r.length===0?fr(n,c,o):qs(n,r,c):(r&&at(n),fr(n,c));r=c}else if(t.nodeType){if(i&&t.parentNode)return r=l?[t]:t;if(Array.isArray(r)){if(l)return r=at(n,r,o,t);at(n,r,null,t)}else r==null||r===""||!n.firstChild?n.appendChild(t):n.replaceChild(t,n.firstChild);r=t}}return r}function Kn(n,t,r,o){let s=!1;for(let i=0,a=t.length;i<a;i++){let l=t[i],c=r&&r[n.length],u;if(!(l==null||l===!0||l===!1))if((u=typeof l)=="object"&&l.nodeType)n.push(l);else if(Array.isArray(l))s=Kn(n,l,c)||s;else if(u==="function")if(o){for(;typeof l=="function";)l=l();s=Kn(n,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||s}else n.push(l),s=!0;else{const f=String(l);c&&c.nodeType===3&&c.data===f?n.push(c):n.push(document.createTextNode(f))}}return s}function fr(n,t,r=null){for(let o=0,s=t.length;o<s;o++)n.insertBefore(t[o],r)}function at(n,t,r,o){if(r===void 0)return n.textContent="";const s=o||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(s!==l){const c=l.parentNode===n;!i&&!a?c?n.replaceChild(s,l):n.insertBefore(s,r):c&&l.remove()}else i=!0}}else n.insertBefore(s,r);return[s]}function oi(){return K.getNextContextId()}var si="http://www.w3.org/2000/svg";function Ir(n,t=!1){return t?document.createElementNS(si,n):document.createElement(n)}function Nl(n){const{useShadow:t}=n,r=document.createTextNode(""),o=()=>n.mount||document.body,s=mr();let i,a=!!K.context;return Pr(()=>{a&&(mr().user=a=!1),i||(i=Sr(s,()=>we(()=>n.children)));const l=o();if(l instanceof HTMLHeadElement){const[c,u]=ke(!1),f=()=>u(!0);rt(g=>Yn(l,()=>c()?g():i(),null)),At(f)}else{const c=Ir(n.isSVG?"g":"div",n.isSVG),u=t&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return r.parentNode},configurable:!0}),Yn(u,i),l.appendChild(c),n.ref&&n.ref(c),At(()=>l.removeChild(c))}},void 0,{render:!a}),r}function ii(n,t){const r=we(n);return we(()=>{const o=r();switch(typeof o){case"function":return Se(()=>o(t));case"string":const s=Us.has(o),i=K.context?ni():Ir(o,s);return Xs(i,t,s),i}})}function xl(n){const[,t]=Ms(n,["component"]);return ii(()=>n.component,t)}var li=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(n,t){this.keyToValue.set(n,t),this.valueToKey.set(t,n)}getByKey(n){return this.keyToValue.get(n)}getByValue(n){return this.valueToKey.get(n)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}},Rr=class{constructor(n){this.generateIdentifier=n,this.kv=new li}register(n,t){this.kv.getByValue(n)||(t||(t=this.generateIdentifier(n)),this.kv.set(t,n))}clear(){this.kv.clear()}getIdentifier(n){return this.kv.getByValue(n)}getValue(n){return this.kv.getByKey(n)}},ai=class extends Rr{constructor(){super(n=>n.name),this.classToAllowedProps=new Map}register(n,t){typeof t=="object"?(t.allowProps&&this.classToAllowedProps.set(n,t.allowProps),super.register(n,t.identifier)):super.register(n,t)}getAllowedProps(n){return this.classToAllowedProps.get(n)}};function ci(n){if("values"in Object)return Object.values(n);const t=[];for(const r in n)n.hasOwnProperty(r)&&t.push(n[r]);return t}function mi(n,t){const r=ci(n);if("find"in r)return r.find(t);const o=r;for(let s=0;s<o.length;s++){const i=o[s];if(t(i))return i}}function Nt(n,t){Object.entries(n).forEach(([r,o])=>t(o,r))}function gn(n,t){return n.indexOf(t)!==-1}function gr(n,t){for(let r=0;r<n.length;r++){const o=n[r];if(t(o))return o}}var ui=class{constructor(){this.transfomers={}}register(n){this.transfomers[n.name]=n}findApplicable(n){return mi(this.transfomers,t=>t.isApplicable(n))}findByName(n){return this.transfomers[n]}},di=n=>Object.prototype.toString.call(n).slice(8,-1),Fr=n=>typeof n>"u",fi=n=>n===null,Lt=n=>typeof n!="object"||n===null||n===Object.prototype?!1:Object.getPrototypeOf(n)===null?!0:Object.getPrototypeOf(n)===Object.prototype,Qn=n=>Lt(n)&&Object.keys(n).length===0,Je=n=>Array.isArray(n),gi=n=>typeof n=="string",hi=n=>typeof n=="number"&&!isNaN(n),bi=n=>typeof n=="boolean",Ni=n=>n instanceof RegExp,Tt=n=>n instanceof Map,It=n=>n instanceof Set,Or=n=>di(n)==="Symbol",xi=n=>n instanceof Date&&!isNaN(n.valueOf()),pi=n=>n instanceof Error,hr=n=>typeof n=="number"&&isNaN(n),vi=n=>bi(n)||fi(n)||Fr(n)||hi(n)||gi(n)||Or(n),Ci=n=>typeof n=="bigint",ji=n=>n===1/0||n===-1/0,Di=n=>ArrayBuffer.isView(n)&&!(n instanceof DataView),yi=n=>n instanceof URL,Br=n=>n.replace(/\./g,"\\."),$n=n=>n.map(String).map(Br).join("."),St=n=>{const t=[];let r="";for(let s=0;s<n.length;s++){let i=n.charAt(s);if(i==="\\"&&n.charAt(s+1)==="."){r+=".",s++;continue}if(i==="."){t.push(r),r="";continue}r+=i}const o=r;return t.push(o),t};function $e(n,t,r,o){return{isApplicable:n,annotation:t,transform:r,untransform:o}}var $r=[$e(Fr,"undefined",()=>null,()=>{}),$e(Ci,"bigint",n=>n.toString(),n=>typeof BigInt<"u"?BigInt(n):(console.error("Please add a BigInt polyfill."),n)),$e(xi,"Date",n=>n.toISOString(),n=>new Date(n)),$e(pi,"Error",(n,t)=>{const r={name:n.name,message:n.message};return t.allowedErrorProps.forEach(o=>{r[o]=n[o]}),r},(n,t)=>{const r=new Error(n.message);return r.name=n.name,r.stack=n.stack,t.allowedErrorProps.forEach(o=>{r[o]=n[o]}),r}),$e(Ni,"regexp",n=>""+n,n=>{const t=n.slice(1,n.lastIndexOf("/")),r=n.slice(n.lastIndexOf("/")+1);return new RegExp(t,r)}),$e(It,"set",n=>[...n.values()],n=>new Set(n)),$e(Tt,"map",n=>[...n.entries()],n=>new Map(n)),$e(n=>hr(n)||ji(n),"number",n=>hr(n)?"NaN":n>0?"Infinity":"-Infinity",Number),$e(n=>n===0&&1/n===-1/0,"number",()=>"-0",Number),$e(yi,"URL",n=>n.toString(),n=>new URL(n))];function En(n,t,r,o){return{isApplicable:n,annotation:t,transform:r,untransform:o}}var Ur=En((n,t)=>Or(n)?!!t.symbolRegistry.getIdentifier(n):!1,(n,t)=>["symbol",t.symbolRegistry.getIdentifier(n)],n=>n.description,(n,t,r)=>{const o=r.symbolRegistry.getValue(t[1]);if(!o)throw new Error("Trying to deserialize unknown symbol");return o}),Ei=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((n,t)=>(n[t.name]=t,n),{}),Hr=En(Di,n=>["typed-array",n.constructor.name],n=>[...n],(n,t)=>{const r=Ei[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(n)});function qr(n,t){return n!=null&&n.constructor?!!t.classRegistry.getIdentifier(n.constructor):!1}var zr=En(qr,(n,t)=>["class",t.classRegistry.getIdentifier(n.constructor)],(n,t)=>{const r=t.classRegistry.getAllowedProps(n.constructor);if(!r)return{...n};const o={};return r.forEach(s=>{o[s]=n[s]}),o},(n,t,r)=>{const o=r.classRegistry.getValue(t[1]);if(!o)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(o.prototype),n)}),Wr=En((n,t)=>!!t.customTransformerRegistry.findApplicable(n),(n,t)=>["custom",t.customTransformerRegistry.findApplicable(n).name],(n,t)=>t.customTransformerRegistry.findApplicable(n).serialize(n),(n,t,r)=>{const o=r.customTransformerRegistry.findByName(t[1]);if(!o)throw new Error("Trying to deserialize unknown custom value");return o.deserialize(n)}),wi=[zr,Ur,Wr,Hr],br=(n,t)=>{const r=gr(wi,s=>s.isApplicable(n,t));if(r)return{value:r.transform(n,t),type:r.annotation(n,t)};const o=gr($r,s=>s.isApplicable(n,t));if(o)return{value:o.transform(n,t),type:o.annotation}},Gr={};$r.forEach(n=>{Gr[n.annotation]=n});var Pi=(n,t,r)=>{if(Je(t))switch(t[0]){case"symbol":return Ur.untransform(n,t,r);case"class":return zr.untransform(n,t,r);case"custom":return Wr.untransform(n,t,r);case"typed-array":return Hr.untransform(n,t,r);default:throw new Error("Unknown transformation: "+t)}else{const o=Gr[t];if(!o)throw new Error("Unknown transformation: "+t);return o.untransform(n,r)}},ct=(n,t)=>{if(t>n.size)throw new Error("index out of bounds");const r=n.keys();for(;t>0;)r.next(),t--;return r.next().value};function Yr(n){if(gn(n,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(gn(n,"prototype"))throw new Error("prototype is not allowed as a property");if(gn(n,"constructor"))throw new Error("constructor is not allowed as a property")}var Si=(n,t)=>{Yr(t);for(let r=0;r<t.length;r++){const o=t[r];if(It(n))n=ct(n,+o);else if(Tt(n)){const s=+o,i=+t[++r]==0?"key":"value",a=ct(n,s);switch(i){case"key":n=a;break;case"value":n=n.get(a);break}}else n=n[o]}return n},Jn=(n,t,r)=>{if(Yr(t),t.length===0)return r(n);let o=n;for(let i=0;i<t.length-1;i++){const a=t[i];if(Je(o)){const l=+a;o=o[l]}else if(Lt(o))o=o[a];else if(It(o)){const l=+a;o=ct(o,l)}else if(Tt(o)){if(i===t.length-2)break;const c=+a,u=+t[++i]==0?"key":"value",f=ct(o,c);switch(u){case"key":o=f;break;case"value":o=o.get(f);break}}}const s=t[t.length-1];if(Je(o)?o[+s]=r(o[+s]):Lt(o)&&(o[s]=r(o[s])),It(o)){const i=ct(o,+s),a=r(i);i!==a&&(o.delete(i),o.add(a))}if(Tt(o)){const i=+t[t.length-2],a=ct(o,i);switch(+s==0?"key":"value"){case"key":{const c=r(a);o.set(c,o.get(a)),c!==a&&o.delete(a);break}case"value":{o.set(a,r(o.get(a)));break}}}return n};function Zn(n,t,r=[]){if(!n)return;if(!Je(n)){Nt(n,(i,a)=>Zn(i,t,[...r,...St(a)]));return}const[o,s]=n;s&&Nt(s,(i,a)=>{Zn(i,t,[...r,...St(a)])}),t(o,r)}function Vi(n,t,r){return Zn(t,(o,s)=>{n=Jn(n,s,i=>Pi(i,o,r))}),n}function ki(n,t){function r(o,s){const i=Si(n,St(s));o.map(St).forEach(a=>{n=Jn(n,a,()=>i)})}if(Je(t)){const[o,s]=t;o.forEach(i=>{n=Jn(n,St(i),()=>n)}),s&&Nt(s,r)}else Nt(t,r);return n}var Ai=(n,t)=>Lt(n)||Je(n)||Tt(n)||It(n)||qr(n,t);function Mi(n,t,r){const o=r.get(n);o?o.push(t):r.set(n,[t])}function _i(n,t){const r={};let o;return n.forEach(s=>{if(s.length<=1)return;t||(s=s.map(l=>l.map(String)).sort((l,c)=>l.length-c.length));const[i,...a]=s;i.length===0?o=a.map($n):r[$n(i)]=a.map($n)}),o?Qn(r)?[o]:[o,r]:Qn(r)?void 0:r}var Kr=(n,t,r,o,s=[],i=[],a=new Map)=>{const l=vi(n);if(!l){Mi(n,s,t);const D=a.get(n);if(D)return o?{transformedValue:null}:D}if(!Ai(n,r)){const D=br(n,r),y=D?{transformedValue:D.value,annotations:[D.type]}:{transformedValue:n};return l||a.set(n,y),y}if(gn(i,n))return{transformedValue:null};const c=br(n,r),u=(c==null?void 0:c.value)??n,f=Je(u)?[]:{},g={};Nt(u,(D,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const k=Kr(D,t,r,o,[...s,y],[...i,n],a);f[y]=k.transformedValue,Je(k.annotations)?g[y]=k.annotations:Lt(k.annotations)&&Nt(k.annotations,($,x)=>{g[Br(y)+"."+x]=$})});const b=Qn(g)?{transformedValue:f,annotations:c?[c.type]:void 0}:{transformedValue:f,annotations:c?[c.type,g]:g};return l||a.set(n,b),b};function Qr(n){return Object.prototype.toString.call(n).slice(8,-1)}function Nr(n){return Qr(n)==="Array"}function Li(n){if(Qr(n)!=="Object")return!1;const t=Object.getPrototypeOf(n);return!!t&&t.constructor===Object&&t===Object.prototype}function Ti(n,t,r,o,s){const i={}.propertyIsEnumerable.call(o,t)?"enumerable":"nonenumerable";i==="enumerable"&&(n[t]=r),s&&i==="nonenumerable"&&Object.defineProperty(n,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function Xn(n,t={}){if(Nr(n))return n.map(s=>Xn(s,t));if(!Li(n))return n;const r=Object.getOwnPropertyNames(n),o=Object.getOwnPropertySymbols(n);return[...r,...o].reduce((s,i)=>{if(Nr(t.props)&&!t.props.includes(i))return s;const a=n[i],l=Xn(a,t);return Ti(s,i,l,n,t.nonenumerable),s},{})}var ce=class{constructor({dedupe:n=!1}={}){this.classRegistry=new ai,this.symbolRegistry=new Rr(t=>t.description??""),this.customTransformerRegistry=new ui,this.allowedErrorProps=[],this.dedupe=n}serialize(n){const t=new Map,r=Kr(n,t,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta={...o.meta,values:r.annotations});const s=_i(t,this.dedupe);return s&&(o.meta={...o.meta,referentialEqualities:s}),o}deserialize(n){const{json:t,meta:r}=n;let o=Xn(t);return r!=null&&r.values&&(o=Vi(o,r.values,this)),r!=null&&r.referentialEqualities&&(o=ki(o,r.referentialEqualities)),o}stringify(n){return JSON.stringify(this.serialize(n))}parse(n){return this.deserialize(JSON.parse(n))}registerClass(n,t){this.classRegistry.register(n,t)}registerSymbol(n,t){this.symbolRegistry.register(n,t)}registerCustom(n,t){this.customTransformerRegistry.register({name:t,...n})}allowErrorProps(...n){this.allowedErrorProps.push(...n)}};ce.defaultInstance=new ce;ce.serialize=ce.defaultInstance.serialize.bind(ce.defaultInstance);ce.deserialize=ce.defaultInstance.deserialize.bind(ce.defaultInstance);ce.stringify=ce.defaultInstance.stringify.bind(ce.defaultInstance);ce.parse=ce.defaultInstance.parse.bind(ce.defaultInstance);ce.registerClass=ce.defaultInstance.registerClass.bind(ce.defaultInstance);ce.registerSymbol=ce.defaultInstance.registerSymbol.bind(ce.defaultInstance);ce.registerCustom=ce.defaultInstance.registerCustom.bind(ce.defaultInstance);ce.allowErrorProps=ce.defaultInstance.allowErrorProps.bind(ce.defaultInstance);var Ii=ce.serialize,pl=ce.stringify;function vl(n){return n.state.fetchStatus==="fetching"?"fetching":n.getObserversCount()?n.state.fetchStatus==="paused"?"paused":n.isStale()?"stale":"fresh":"inactive"}function Cl(n,t){return`${n}${t.charAt(0).toUpperCase()+t.slice(1)}`}function jl({queryState:n,observerCount:t,isStale:r}){return n.fetchStatus==="fetching"?"blue":t?n.fetchStatus==="paused"?"purple":r?"yellow":"green":"gray"}function Dl({status:n,isPaused:t}){return t?"purple":n==="error"?"red":n==="pending"?"yellow":n==="success"?"green":"gray"}function yl(n){return n==="fresh"?"green":n==="stale"?"yellow":n==="paused"?"purple":n==="inactive"?"gray":"blue"}var El=(n,t=!1)=>{const{json:r}=Ii(n);return JSON.stringify(r,null,t?2:void 0)},ln=n=>n.state.fetchStatus!=="idle"?0:n.getObserversCount()?n.isStale()?2:1:3,Ri=(n,t)=>n.queryHash.localeCompare(t.queryHash),Jr=(n,t)=>n.state.dataUpdatedAt<t.state.dataUpdatedAt?1:-1,Fi=(n,t)=>ln(n)===ln(t)?Jr(n,t):ln(n)>ln(t)?1:-1,wl={status:Fi,"query hash":Ri,"last updated":Jr},an=n=>n.state.isPaused?0:n.state.status==="error"?2:n.state.status==="pending"?1:3,Zr=(n,t)=>n.state.submittedAt<t.state.submittedAt?1:-1,Oi=(n,t)=>an(n)===an(t)?Zr(n,t):an(n)>an(t)?1:-1,Pl={status:Oi,"last updated":Zr},Sl=n=>n*parseFloat(getComputedStyle(document.documentElement).fontSize),Vl=()=>{const[n,t]=ke("dark");return ps(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)");t(r.matches?"dark":"light");const o=s=>{t(s.matches?"dark":"light")};r.addEventListener("change",o),At(()=>r.removeEventListener("change",o))}),n},cn=(n,t,r)=>{if(t.length===0)return r;if(n instanceof Map){const o=new Map(n);if(t.length===1)return o.set(t[0],r),o;const[s,...i]=t;return o.set(s,cn(o.get(s),i,r)),o}if(n instanceof Set){const o=cn(Array.from(n),t,r);return new Set(o)}if(Array.isArray(n)){const o=[...n];if(t.length===1)return o[t[0]]=r,o;const[s,...i]=t;return o[s]=cn(o[s],i,r),o}if(n instanceof Object){const o={...n};if(t.length===1)return o[t[0]]=r,o;const[s,...i]=t;return o[s]=cn(o[s],i,r),o}return n},mn=(n,t)=>{if(n instanceof Map){const r=new Map(n);if(t.length===1)return r.delete(t[0]),r;const[o,...s]=t;return r.set(o,mn(r.get(o),s)),r}if(n instanceof Set){const r=mn(Array.from(n),t);return new Set(r)}if(Array.isArray(n)){const r=[...n];if(t.length===1)return r.filter((i,a)=>a.toString()!==t[0]);const[o,...s]=t;return r[o]=mn(r[o],s),r}if(n instanceof Object){const r={...n};if(t.length===1)return delete r[t[0]],r;const[o,...s]=t;return r[o]=mn(r[o],s),r}return n},Bi=(n,t)=>{if(!n||document.querySelector("#_goober")||(t==null?void 0:t.querySelector("#_goober")))return;const o=document.createElement("style"),s=document.createTextNode("");o.appendChild(s),o.id="_goober",o.setAttribute("nonce",n),t?t.appendChild(o):document.head.appendChild(o)},mt,Rt,Ft,Ot,nt,Bt,ut,dt,ft,gt,ht,$t,bt,Ut,xr,$i=(xr=class{constructor(n){_e(this,mt);_e(this,Rt);_e(this,Ft);_e(this,Ot);_e(this,nt,!1);_e(this,Bt);_e(this,ut);_e(this,dt);_e(this,ft);_e(this,gt);_e(this,ht);_e(this,$t);_e(this,bt);_e(this,Ut);const{client:t,queryFlavor:r,version:o,onlineManager:s,buttonPosition:i,position:a,initialIsOpen:l,errorTypes:c,styleNonce:u,shadowDOMTarget:f,hideDisabledQueries:g}=n;Ve(this,mt,ke(t)),Ve(this,Ft,r),Ve(this,Ot,o),Ve(this,Rt,s),Ve(this,Bt,u),Ve(this,ut,f),Ve(this,dt,ke(i)),Ve(this,ft,ke(a)),Ve(this,gt,ke(l)),Ve(this,ht,ke(c)),Ve(this,$t,ke(g))}setButtonPosition(n){be(this,dt)[1](n)}setPosition(n){be(this,ft)[1](n)}setInitialIsOpen(n){be(this,gt)[1](n)}setErrorTypes(n){be(this,ht)[1](n)}setClient(n){be(this,mt)[1](n)}mount(n){if(be(this,nt))throw new Error("Devtools is already mounted");const t=zs(()=>{const r=this,[o]=be(this,dt),[s]=be(this,ft),[i]=be(this,gt),[a]=be(this,ht),[l]=be(this,$t),[c]=be(this,mt);let u;return be(this,bt)?u=be(this,bt):(u=_s(()=>pr(()=>import("./EDEL3XIZ-DErQsMl5.js"),__vite__mapDeps([9,1,4,5,6,7,2,3]))),Ve(this,bt,u)),Bi(be(this,Bt),be(this,ut)),Vs(u,As({get queryFlavor(){return be(r,Ft)},get version(){return be(r,Ot)},get onlineManager(){return be(r,Rt)},get shadowDOMTarget(){return be(r,ut)}},{get client(){return c()},get buttonPosition(){return o()},get position(){return s()},get initialIsOpen(){return i()},get errorTypes(){return a()},get hideDisabledQueries(){return l()}}))},n);Ve(this,nt,!0),Ve(this,Ut,t)}unmount(){var n;if(!be(this,nt))throw new Error("Devtools is not mounted");(n=be(this,Ut))==null||n.call(this),Ve(this,nt,!1)}},mt=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,nt=new WeakMap,Bt=new WeakMap,ut=new WeakMap,dt=new WeakMap,ft=new WeakMap,gt=new WeakMap,ht=new WeakMap,$t=new WeakMap,bt=new WeakMap,Ut=new WeakMap,xr);function Ui(n){const t=co(n.client),r=h.useRef(null),{buttonPosition:o,position:s,initialIsOpen:i,errorTypes:a,styleNonce:l,shadowDOMTarget:c,hideDisabledQueries:u}=n,[f]=h.useState(new $i({client:t,queryFlavor:"React Query",version:"5",onlineManager:mo,buttonPosition:o,position:s,initialIsOpen:i,errorTypes:a,styleNonce:l,shadowDOMTarget:c,hideDisabledQueries:u}));return h.useEffect(()=>{f.setClient(t)},[t,f]),h.useEffect(()=>{o&&f.setButtonPosition(o)},[o,f]),h.useEffect(()=>{s&&f.setPosition(s)},[s,f]),h.useEffect(()=>{f.setInitialIsOpen(i||!1)},[i,f]),h.useEffect(()=>{f.setErrorTypes(a||[])},[a,f]),h.useEffect(()=>(r.current&&f.mount(r.current),()=>{f.unmount()}),[f]),uo.jsx("div",{dir:"ltr",className:"tsqd-parent-container",ref:r})}var Hi=Ui;const qi=new fo({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:(n,t)=>{if(t&&typeof t=="object"&&"status"in t){const r=t.status;if(r>=400&&r<500)return!1}return n<3},refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:1}}}),zi=({children:n})=>e.jsxDEV(go,{client:qi,children:[n,e.jsxDEV(Hi,{initialIsOpen:!1},void 0,!1,{fileName:"C:/College Project/frontend/src/providers/QueryProvider.tsx",lineNumber:39,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/providers/QueryProvider.tsx",lineNumber:36,columnNumber:5},void 0);function Wi(){const n=navigator.userAgent,t=window.location.protocol==="https:",r=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="0.0.0.0";let o="unknown";return n.includes("Firefox")?o="firefox":n.includes("Chrome")?o="chrome":n.includes("Safari")&&!n.includes("Chrome")?o="safari":n.includes("Edge")&&(o="edge"),{supportsServiceWorker:"serviceWorker"in navigator,supportsSecureContext:"isSecureContext"in window,isSecureContext:window.isSecureContext||!1,isHTTPS:t,isLocalhost:r,userAgent:n,browserName:o}}async function Gi(){if("serviceWorker"in navigator)try{const n=await navigator.serviceWorker.getRegistrations();for(const t of n)await t.unregister(),console.log("🔄 Service Worker unregistered:",t.scope);console.log(`✅ Unregistered ${n.length} Service Worker(s)`)}catch(n){console.error("❌ Failed to unregister Service Workers:",n)}}{const n=document.createElement("script");n.src="/clear-sw-cache.js",n.onload=()=>console.log("✅ Service Worker cache clearer loaded"),n.onerror=()=>console.log("⚠️ Service Worker cache clearer not available"),document.head.appendChild(n)}ds();const Et=Wi();console.log("🔍 Browser compatibility check:",{browser:Et.browserName,supportsServiceWorker:Et.supportsServiceWorker,isSecureContext:Et.isSecureContext,isHTTPS:Et.isHTTPS,isLocalhost:Et.isLocalhost});window.addEventListener("load",async()=>{try{await Gi()}catch(n){console.warn("⚠️ Failed to unregister Service Workers in development:",n)}});const wn=document.createElement("link");wn.rel="preconnect";wn.href="https://fonts.gstatic.com";wn.crossOrigin="anonymous";document.head.appendChild(wn);const rr=document.createElement("link");rr.rel="stylesheet";rr.href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap&font-display=swap";document.head.appendChild(rr);Hn.createRoot(document.getElementById("root")).render(e.jsxDEV(er.StrictMode,{children:e.jsxDEV(zi,{children:e.jsxDEV(us,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:72,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:71,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:70,columnNumber:3},void 0));export{yr as $,nl as A,vl as B,Dl as C,jl as D,yl as E,El as F,dn as G,cl as H,Sl as I,Se as J,sl as K,Xs as L,As as M,rt as N,Ii as O,Nl as P,ml as Q,cn as R,ul as S,Qs as T,pl as U,fl as V,dl as W,mn as X,Ms as Y,xl as Z,bs as _,Fo as a,Vl as a0,ie as b,il as c,ke as d,Pr as e,we as f,Vs as g,ot as h,Yn as i,e as j,Ks as k,bl as l,gl as m,Ws as n,ps as o,At as p,Pl as q,rl as r,wl as s,hl as t,ll as u,Gn as v,W as w,Cl as x,ei as y,al as z};
//# sourceMappingURL=index-8uLCGpbZ.js.map
