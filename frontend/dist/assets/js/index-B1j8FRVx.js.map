{"version":3,"mappings":"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Q,CAAC,EACxJE,GAAkC,IAAI,IAAI,CAAC,YAAa,cAAe,YAAa,UAAU,CAAC,EAC/FC,GAA0B,OAAO,OAAuB,OAAO,OAAO,IAAI,EAAG,CAC/E,UAAW,QACX,QAAS,KACX,CAAC,EACGC,GAA8B,OAAO,OAAuB,OAAO,OAAO,IAAI,EAAG,CACnF,MAAO,YACP,WAAY,CACV,EAAG,aACH,KAAM,CACV,EACE,eAAgB,CACd,EAAG,iBACH,OAAQ,EACR,MAAO,CACX,EACE,MAAO,CACL,EAAG,QACH,IAAK,CACT,EACE,SAAU,CACR,EAAG,WACH,OAAQ,CACZ,EACE,YAAa,CACX,EAAG,cACH,MAAO,CACX,EACE,SAAU,CACR,EAAG,WACH,MAAO,EACP,SAAU,CACd,CACA,CAAC,EACD,SAASC,GAAaC,EAAMC,EAAS,CACnC,MAAM3wB,EAAIwwB,GAAYE,CAAI,EAC1B,OAAO,OAAO1wB,GAAM,SAAWA,EAAE2wB,CAAO,EAAI3wB,EAAE,EAAO,OAASA,CAChE,CACA,IAAI4wB,GAAkC,IAAI,IAAI,CAAC,cAAe,QAAS,WAAY,cAAe,UAAW,WAAY,QAAS,UAAW,QAAS,YAAa,YAAa,WAAY,YAAa,UAAW,cAAe,cAAe,aAAc,cAAe,YAAa,WAAY,YAAa,YAAY,CAAC,EAC9TC,GAA8B,IAAI,IAAI,CACxC,WACA,cACA,eACA,UACA,eACA,gBACA,mBACA,SACA,WACA,gBACA,SACA,OACA,OACA,UACA,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,eACA,SACA,OACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,gBACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,MACA,OACA,MACA,SACA,SACA,OACA,WACA,OACA,QACA,MACA,OACA,OACF,CAAC,EACGC,GAAe,CACjB,MAAO,+BACP,IAAK,sCACP,EACIC,GAA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","names":["React","require$$0","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","MAYBE_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","maybeIterator","ReactSharedInternals","error","format","_len2","args","_key2","printWarning","level","ReactDebugCurrentFrame","stack","argsWithFormat","item","enableScopeAPI","enableCacheElement","enableTransitionTracing","enableLegacyHidden","enableDebugTracing","REACT_MODULE_REFERENCE","isValidElementType","type","getWrappedName","outerType","innerType","wrapperName","displayName","functionName","getContextName","getComponentNameFromType","context","provider","outerName","lazyComponent","payload","init","assign","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","disabledLog","disableLogs","props","reenableLogs","ReactCurrentDispatcher","prefix","describeBuiltInComponentFrame","name","source","ownerFn","x","match","reentry","componentFrameCache","PossiblyWeakMap","describeNativeComponentFrame","fn","construct","frame","control","previousPrepareStackTrace","previousDispatcher","Fake","sample","sampleLines","controlLines","s","c","_frame","syntheticFrame","describeFunctionComponentFrame","shouldConstruct","Component","prototype","describeUnknownElementTypeFrameInDEV","hasOwnProperty","loggedTypeFailures","setCurrentlyValidatingElement","element","owner","checkPropTypes","typeSpecs","values","location","componentName","has","typeSpecName","error$1","err","ex","isArrayImpl","isArray","a","typeName","value","hasToStringTag","willCoercionThrow","testStringCoercion","checkKeyStringCoercion","ReactCurrentOwner","RESERVED_PROPS","specialPropKeyWarningShown","specialPropRefWarningShown","didWarnAboutStringRefs","hasValidRef","config","getter","hasValidKey","warnIfStringRefCannotBeAutoConverted","self","defineKeyPropWarningGetter","warnAboutAccessingKey","defineRefPropWarningGetter","warnAboutAccessingRef","ReactElement","key","ref","jsxDEV","maybeKey","propName","defaultProps","ReactCurrentOwner$1","ReactDebugCurrentFrame$1","setCurrentlyValidatingElement$1","propTypesMisspellWarningShown","isValidElement","object","getDeclarationErrorAddendum","getSourceInfoErrorAddendum","fileName","lineNumber","ownerHasKeyUseWarning","getCurrentComponentErrorInfo","parentType","info","parentName","validateExplicitKey","currentComponentErrorInfo","childOwner","validateChildKeys","node","i","child","iteratorFn","iterator","step","validatePropTypes","propTypes","_name","validateFragmentProps","fragment","keys","didWarnAboutKeySpread","jsxWithValidation","isStaticChildren","validType","sourceInfo","typeString","children","k","beforeExample","afterExample","jsxDEV$1","reactJsxDevRuntime_development","jsxDevRuntimeModule","m","o","client","h","trackedConnections","getTrackedConnectionState","api","api2","extractConnectionInformation","store","extensionConnector","options","existingConnection","newConnection","removeStoreFromTrackedConnections","connectionInfo","findCallerName","_a","_b","traceLines","apiSetStateLineIndex","traceLine","callerLine","devtoolsImpl","devtoolsOptions","set","get","enabled","anonymousActionType","__vite_import_meta_env__","connection","connectionInformation","isRecording","state","replace","nameOrAction","r","action","setStateFromDevtools","originalIsRecording","initialState","store2","didWarnAboutReservedActionType","originalDispatch","message","parseJsonThen","stateFromDevtools","nextLiftedState","lastComputedState","devtools","stringified","parsed","e","useAuthStore","create","prev","user","loading","getApiUrl","getWebSocketUrl","environment","validateSupabaseConfig","url","anonKey","createSupabaseClient","createClient","fallbackClient","supabase","AuthService","__publicField","session","subscription","event","userId","authRoles","currentPath","role","_d","_c","profile","_e","isAdmin","_i","_h","_j","_k","_l","_m","_f","_g","email","password","authPromise","timeoutPromise","_","reject","data","profilePromise","profileTimeout","profileError","token","possibleKeys","storedSession","parsedSession","refreshed","refreshResult","validatedUser","validationError","updates","listener","keysToRemove","usedKey","stored","parseError","accessToken","driverId","busData","busError","routeName","routeData","routeError","driverName","profileData","userData","userError","assignment","expiresAt","now","refreshedSession","refreshError","authService","API_BASE_URL","ApiService","baseUrl","endpoint","headers","response","errorData","busId","routeId","bounds","minLng","minLat","maxLng","maxLat","zoom","apiService","queryKeys","id","useHealthCheck","useQuery","useRoutesInViewport","useBusesInViewport","useLiveLocationsInViewport","useBusClusters","WebSocketService","wsUrl","io","attemptNumber","reason","delay","isConnected","timeSinceLastHeartbeat","callbacks","locationData","callback","stats","websocketService","DriverInterface","isAuthenticated","setIsAuthenticated","useState","isTracking","setIsTracking","busInfo","setBusInfo","currentLocation","setCurrentLocation","locationError","setLocationError","socketError","setSocketError","lastUpdateTime","setLastUpdateTime","updateCount","setUpdateCount","loginForm","setLoginForm","loginError","setLoginError","isLoading","setIsLoading","socketRef","useRef","locationIntervalRef","watchIdRef","mapRef","mapContainerRef","markerRef","useEffect","authenticateWithSocket","disconnectSocket","cleanupMap","permission","initializeMap","latitude","longitude","maplibregl","markerElement","popup","updateMapLocation","newLocation","handleLogin","startLocationTracking","isMobile","isFirefox","isChrome","isSafari","position","sendLocationUpdate","errorMessage","stopLocationTracking","handleSignOut","this","Fragment","successMsg","errorMsg","TransitionContext","createContext","useTransition","useContext","TransitionProvider","currentTransition","setCurrentTransition","pathname","useLocation","setTransition","transition","HomepageToLoginTransition","isVisible","motion","HomepageToMapTransition","LoginToDashboardTransition","GlobalTransitionWrapper","renderTransition","DriverLogin","navigate","useNavigate","setIsMobile","checkMobile","connectionAttempts","maxAttempts","resolve","handleAuthenticationSuccess","handleAuthenticationFailed","authTimeout","AnimatePresence","DriverDashboard","connectionStatus","setConnectionStatus","initializationRef","fallbackTimerRef","eventListenersRef","updateConnectionStatus","statusInterval","existingAssignment","isValid","currentAssignment","fallbackAttempt","maxFallbackAttempts","fallbackInterval","fetchBusInfoFromAPI","success","handleContextLost","handleContextRestored","currentLngLat","handleMapError","handleMapLoad","fallbackError","errorText","AdminApiService","timeoutId","controller","result","driverData","adminApiService","StorageService","defaultHeaders","file","formData","fileUrl","folder","allowedTypes","maxSize","MediaManagement","activeTab","setActiveTab","buses","setBuses","drivers","setDrivers","routes","setRoutes","setLoading","uploading","setUploading","selectedFile","setSelectedFile","selectedItem","setSelectedItem","setError","setSuccess","loadData","busesResult","driversResult","routesResult","uniqueDriversMap","driver","idKey","existing","uniqueDrivers","handleFileSelect","handleUpload","handleDelete","itemId","getCurrentItems","getDisplayName","getFileUrl","getTabTitle","tab","GANPAT_UNIVERSITY","MapSelector","onLocationSelect","onClose","title","defaultCenter","searchPlaceholder","instanceId","mapContainer","map","marker","searchQuery","setSearchQuery","selectedLocation","setSelectedLocation","isMapLoading","setIsMapLoading","mapError","setMapError","coordinates","reverseGeocode","searchLocation","firstResult","handleConfirm","handleKeyPress","container","StreamlinedManagement","successMessage","setSuccessMessage","assignedDrivers","setAssignedDrivers","showBusForm","setShowBusForm","showDriverForm","setShowDriverForm","showCreateDriverForm","setShowCreateDriverForm","showRouteForm","setShowRouteForm","showBusDetails","setShowBusDetails","showRouteDetails","setShowRouteDetails","selectedBus","setSelectedBus","selectedRoute","setSelectedRoute","editingBus","setEditingBus","editingRoute","setEditingRoute","busForm","setBusForm","driverForm","setDriverForm","createDriverForm","setCreateDriverForm","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","selectedSupabaseDriver","setSelectedSupabaseDriver","routeForm","setRouteForm","showMapSelector","setShowMapSelector","mapSelectorType","setMapSelectorType","selectedDestination","setSelectedDestination","selectedOrigin","setSelectedOrigin","loadAllData","useCallback","loadAssignedDrivers","uniqueAssignedDriversMap","uniqueAssignedDrivers","handleCreateBus","bus","handleDeleteBus","handleAssignRouteToBus","handleCreateDriver","handleAssignBusToDriver","handleUnassignDriver","handleDeleteDriver","firstName","lastName","confirmMessage","assigned","handleCreateRoute","handleDeleteRoute","route","getRouteName","city","destination","handleMapSelectorOpen","handleLocationSelect","getDriverName","d","getDriverNameFromBus","getBusPlate","b","handleViewBusDetails","handleEditBus","handleViewRouteDetails","handleEditRoute","handleUpdateBus","handleUpdateRoute","assignedDriver","AdminDashboard","analytics","setAnalytics","systemHealth","setSystemHealth","loadDashboardData","analyticsResult","healthResult","currentUser","GlassyCard","className","variant","hover","glow","onClick","baseClasses","variantClasses","hoverClasses","glowClasses","clickableClasses","PremiumButton","size","disabled","icon","iconPosition","sizeClasses","AdminLogin","onLoginSuccess","setEmail","setPassword","twoFactorCode","setTwoFactorCode","handleLoginSuccess","handleSubmit","loginPromise","handleRecoverSession","handleForceFreshLogin","StaggerContainer","StaggerItem","BusIcon","MapIcon","AdminIcon","PremiumHomepage","handleNavigation","path","particleCount","OptimizedStudentMap","__vitePreload","App","authLoading","authError","setUser","health","healthLoading","healthError","updateAuthState","LegacyHomePage","Link","Router","Routes","Route","Suspense","setupConsoleFilter","originalWarn","originalFetch","input","sharedConfig","getContextId","count","num","len","setHydrateContext","IS_DEV","equalFn","$PROXY","SUPPORTS_PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","NO_INIT","Owner","Transition","ExternalSourceConfig","Listener","Updates","Effects","ExecCount","createRoot","detachedOwner","unowned","current","root","updateFn","untrack","cleanNode","runUpdates","createSignal","setter","value2","writeSignal","readSignal","createComputed","createComputation","updateComputation","createRenderEffect","createEffect","runUserEffects","createMemo","isPromise","v","createResource","pSource","pFetcher","pOptions","fetcher","pr","initP","scheduled","resolved","dynamic","contexts","setValue","track","trigger","setState","loadEnd","p","error2","completeLoad","read","SuspenseContext","load","refetching","lookup","fetcherError","castError","runWithOwner","batch","on","deps","isArray3","prevInput","defer","prevValue","onMount","onCleanup","getOwner","prevListener","handleError","startTransition","l","t","transPending","setTransPending","defaultValue","createProvider","children2","memo2","resolveChildren","lookUpstream","sSlot","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","pure","runTop","ancestors","wait","res","completeUpdates","queue","userLength","ignore","index","obs","n","results","FALLBACK","dispose","mapArray","list","mapFn","items","mapped","disposers","indexes","newItems","newLen","j","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","start","end","newEnd","disposer","mapper","indexArray","signals","createComponent","Comp","trueFn","propTraps","property","receiver","resolveSource","resolveSources","length","mergeProps","sources","proxy","sourcesMap","defined","sourceKeys","i2","desc","sources2","target","definedKeys","splitProps","blocked","otherObject","objects","isDefaultDesc","objectIndex","lazy","comp","wrap","ctx","mod","counter","createUniqueId","narrowedError","For","fallback","Index","Show","keyed","conditionValue","condition","Switch","chs","switchFunc","ch","mps","func","mp","prevFunc","sel","Match","booleans","Properties","ChildProperties","Aliases","PropAliases","getPropAlias","prop","tagName","DelegatedEvents","SVGElements","SVGNamespace","memo","reconcileArrays","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","sequence","$$EVENTS","render","code","dispose2","insert","template","html","isImportNode","isSVG","isMathML","delegateEvents","eventNames","document2","eventHandler","clearDelegatedEvents","setAttribute","isHydrating","setAttributeNS","namespace","setBoolAttribute","addEventListener","handler","delegate","handlerFn","classList","classKeys","prevKeys","toggleClassKey","classValue","style","nodeStyle","spread","skipChildren","prevProps","insertExpression","use","arg","parent","accessor","initial","skipRef","assignProp","getNextElement","template2","getHydrationKey","toPropertyName","w","classNames","nameLen","isCE","isProp","isChildProp","propAlias","forceProp","ns","el","ev","oriTarget","oriCurrentTarget","retarget","handleNode","walkUpTree","unwrapArray","hydrating","cleaned","multi","cleanChildren","array","currentArray","normalizeIncomingArray","nodes","appendNodes","normalized","unwrap","replacement","inserted","isParent","SVG_NAMESPACE","createElement","Portal","useShadow","mount","content","clean","setClean","cleanup","renderRoot","createDynamic","component","cached","component2","isSvg","Dynamic","others","DoubleIndexedKV","Registry","generateIdentifier","identifier","ClassRegistry","valuesOfObj","record","find","predicate","valuesNotNever","forEach","run","includes","arr","findArr","CustomTransformerRegistry","transformer","getType","isUndefined","isNull","isPlainObject","isEmptyObject","isString","isNumber","isBoolean","isRegExp","isMap","isSet","isSymbol","isDate","isError","isNaNValue","isPrimitive","isBigint","isInfinite","isTypedArray","isURL","escapeKey","stringifyPath","parsePath","string","segment","char","lastSegment","simpleTransformation","isApplicable","annotation","transform","untransform","simpleRules","superJson","baseError","regex","body","flags","compositeTransformation","symbolRule","constructorToName","obj","ctor","typedArrayRule","isInstanceOfRegisteredClass","potentialClass","classRule","clazz","allowedProps","customRule","compositeRules","transformValue","applicableCompositeRule","rule","applicableSimpleRule","simpleRulesByAnnotation","untransformValue","json","transformation","getNthKey","validatePath","getDeep","row","keyOfRow","setDeep","lastKey","oldValue","newValue","keyToRow","newKey","traverse","tree","walker2","origin","subtree","nodeValue","applyValueAnnotations","plain","annotations","applyReferentialEqualityAnnotations","apply","identicalPaths","identicalObjectPath","other","identicalPath","isDeep","addIdentity","identities","existingSet","generateReferentialEqualityAnnotations","identitites","dedupe","rootEqualityPaths","paths","representativePath","walker","objectsInThisPath","seenObjects","primitive","seen","transformed2","result2","transformationResult","transformed","transformedValue","innerAnnotations","recursiveResult","getType2","isArray2","isPlainObject2","assignProp2","carry","newVal","originalObject","includeNonenumerable","propType","copy","symbols","val","SuperJSON","output","equalityAnnotations","meta","serialize","stringify","getQueryStatusLabel","query","getSidedProp","side","getQueryStatusColor","queryState","observerCount","isStale","getMutationStatusColor","status","isPaused","getQueryStatusColorByLabel","label","displayValue","beautify","getStatusRank","q","queryHashSort","dateSort","statusAndDateSort","sortFns","getMutationStatusRank","mutationDateSort","mutationStatusSort","mutationSortFns","convertRemToPixels","rem","getPreferredColorScheme","colorScheme","setColorScheme","updateNestedDataByPath","oldData","updatePath","newData","head","tail","setAsArray","deleteNestedDataByPath","deletePath","idx","setupStyleSheet","nonce","styleTag","textNode","TanstackQueryDevtools","__privateAdd","_client","_onlineManager","_queryFlavor","_version","_isMounted","_styleNonce","_shadowDOMTarget","_buttonPosition","_position","_initialIsOpen","_errorTypes","_hideDisabledQueries","_Component","_dispose","queryFlavor","version","onlineManager","buttonPosition","initialIsOpen","errorTypes","styleNonce","shadowDOMTarget","hideDisabledQueries","__privateSet","__privateGet","isOpen","_self$","btnPosition","pos","errors","queryClient","Devtools","ReactQueryDevtools","useQueryClient","React.useRef","React.useState","React.useEffect","jsx","ReactQueryDevtools2","Devtools.ReactQueryDevtools","QueryClient","failureCount","QueryProvider","QueryClientProvider","script","registrations","registration","preconnectLink","fontLink","ReactDOM"],"ignoreList":[0,1,2,3,34,35,36,37],"sources":["../../../../node_modules/react/cjs/react-jsx-dev-runtime.development.js","../../../../node_modules/react/jsx-dev-runtime.js","../../../../node_modules/react-dom/client.js","../../../../node_modules/zustand/esm/middleware.mjs","../../../src/stores/useAuthStore.ts","../../../src/config/environment.ts","../../../src/config/supabase.ts","../../../src/services/authService.ts","../../../src/services/api.ts","../../../src/hooks/useApiQueries.ts","../../../src/services/websocket.ts","../../../src/components/DriverInterface.tsx","../../../src/components/transitions/TransitionContext.tsx","../../../src/components/transitions/HomepageToLoginTransition.tsx","../../../src/components/transitions/HomepageToMapTransition.tsx","../../../src/components/transitions/LoginToDashboardTransition.tsx","../../../src/components/transitions/GlobalTransitionWrapper.tsx","../../../src/components/DriverLogin.tsx","../../../src/components/DriverDashboard.tsx","../../../src/services/adminApiService.ts","../../../src/services/storageService.ts","../../../src/components/MediaManagement.tsx","../../../src/utils/coordinates.ts","../../../src/components/MapSelector.tsx","../../../src/components/StreamlinedManagement.tsx","../../../src/components/AdminDashboard.tsx","../../../src/components/ui/GlassyCard.tsx","../../../src/components/ui/PremiumButton.tsx","../../../src/components/AdminLogin.tsx","../../../src/components/PageTransition.tsx","../../../src/components/PremiumHomepage.tsx","../../../src/App.tsx","../../../src/utils/consoleFilter.ts","../../../src/utils/apiInterceptor.ts","../../../../node_modules/@tanstack/query-devtools/build/chunk/CXOMC62J.js","../../../../node_modules/@tanstack/query-devtools/build/dev.js","../../../../node_modules/@tanstack/react-query-devtools/build/modern/ReactQueryDevtools.js","../../../../node_modules/@tanstack/react-query-devtools/build/modern/index.js","../../../src/providers/QueryProvider.tsx","../../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n\nvar jsxDEV$1 =  jsxWithValidation ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsxDEV = jsxDEV$1;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-dev-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-dev-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { create } from 'zustand';\r\nimport { devtools } from 'zustand/middleware';\r\nimport { User } from '../types';\r\n\r\ninterface AuthState {\r\n  // Auth state\r\n  isAuthenticated: boolean;\r\n  user: User | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  \r\n  // Actions\r\n  setAuthState: (state: {\r\n    isAuthenticated?: boolean;\r\n    user?: User | null;\r\n    loading?: boolean;\r\n    error?: string | null;\r\n  }) => void;\r\n  \r\n  setUser: (user: User | null) => void;\r\n  setLoading: (loading: boolean) => void;\r\n  setError: (error: string | null) => void;\r\n  clearError: () => void;\r\n  \r\n  // Computed values\r\n  isAdmin: () => boolean;\r\n  isDriver: () => boolean;\r\n  isStudent: () => boolean;\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  devtools(\r\n    (set, get) => ({\r\n      // Initial state\r\n      isAuthenticated: false,\r\n      user: null,\r\n      loading: true,\r\n      error: null,\r\n      \r\n      // Actions\r\n      setAuthState: (state) =>\r\n        set((prev) => ({\r\n          ...prev,\r\n          ...state,\r\n        })),\r\n      \r\n      setUser: (user) =>\r\n        set(() => ({\r\n          user,\r\n          isAuthenticated: !!user,\r\n        })),\r\n      \r\n      setLoading: (loading) =>\r\n        set({ loading }),\r\n      \r\n      setError: (error) =>\r\n        set({ error }),\r\n      \r\n      clearError: () =>\r\n        set({ error: null }),\r\n      \r\n      // Computed values\r\n      isAdmin: () => {\r\n        const state = get();\r\n        return state.user?.role === 'admin';\r\n      },\r\n      \r\n      isDriver: () => {\r\n        const state = get();\r\n        return state.user?.role === 'driver';\r\n      },\r\n      \r\n      isStudent: () => {\r\n        const state = get();\r\n        return state.user?.role === 'student';\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-store',\r\n    }\r\n  )\r\n);\r\n","// Smart API URL detection for cross-laptop testing and VS Code tunnels - OPTIMIZED\nconst getApiUrl = () => {\n  // PRIORITY 1: Environment variable override (for deployment) - FAST PATH\n  if (import.meta.env.VITE_API_URL) {\n    return import.meta.env.VITE_API_URL;\n  }\n\n  // PRIORITY 2: Production domains - FAST PATH\n  const currentHost = window.location.hostname;\n  const currentProtocol = window.location.protocol;\n\n  // Fast check for production domains\n  if (\n    currentHost.includes('render.com') ||\n    currentHost.includes('vercel.app') ||\n    currentHost.includes('vercel.com')\n  ) {\n    return 'https://bus-tracking-backend-sxh8.onrender.com';\n  }\n\n  // PRIORITY 3: VS Code tunnels - OPTIMIZED\n  if (currentHost.includes('devtunnels.ms')) {\n    const tunnelId = currentHost.split('.')[0];\n    return `${currentProtocol}//${tunnelId}-3000.inc1.devtunnels.ms`;\n  }\n\n  // PRIORITY 4: Network IP (cross-laptop) - OPTIMIZED\n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n    return `http://${currentHost}:3000`;\n  }\n\n  // PRIORITY 5: Localhost - FAST PATH\n  return 'http://localhost:3000';\n};\n\nconst getWebSocketUrl = () => {\n  // PRIORITY 1: Environment variable override (for deployment) - FAST PATH\n  if (import.meta.env.VITE_WEBSOCKET_URL) {\n    return import.meta.env.VITE_WEBSOCKET_URL;\n  }\n\n  // PRIORITY 2: Production domains - FAST PATH\n  const currentHost = window.location.hostname;\n  const currentProtocol = window.location.protocol;\n\n  // Fast check for production domains\n  if (\n    currentHost.includes('render.com') ||\n    currentHost.includes('vercel.app') ||\n    currentHost.includes('vercel.com')\n  ) {\n    return 'wss://bus-tracking-backend-sxh8.onrender.com';\n  }\n\n  // PRIORITY 3: VS Code tunnels - OPTIMIZED\n  if (currentHost.includes('devtunnels.ms')) {\n    const tunnelId = currentHost.split('.')[0];\n    const wsUrl = `${currentProtocol === 'https:' ? 'wss:' : 'ws:'}//${tunnelId}-3000.inc1.devtunnels.ms`;\n    return wsUrl;\n  }\n\n  // PRIORITY 4: Network IP (cross-laptop) - OPTIMIZED\n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n    return `ws://${currentHost}:3000`;\n  }\n\n  // PRIORITY 5: Localhost - FAST PATH\n  return 'ws://localhost:3000';\n};\n\n// Create a dynamic environment object that evaluates URLs at runtime\nexport const environment = {\n  // Supabase Configuration\n  supabase: {\n    url: (() => {\n      const envUrl = import.meta.env.VITE_SUPABASE_URL;\n\n      if (envUrl && envUrl !== 'your_supabase_project_url' && envUrl !== '') {\n        return envUrl;\n      }\n\n      if (import.meta.env.DEV) {\n        console.warn(\n          '⚠️ VITE_SUPABASE_URL not set. Please set it in your environment variables.'\n        );\n        return null;\n      }\n\n      throw new Error(\n        'VITE_SUPABASE_URL is required in production. Please set it in your environment variables.'\n      );\n    })(),\n    anonKey: (() => {\n      const envKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n      if (envKey && envKey !== 'your_supabase_anon_key_here' && envKey !== '') {\n        return envKey;\n      }\n\n      if (import.meta.env.DEV) {\n        console.warn(\n          '⚠️ VITE_SUPABASE_ANON_KEY not set. Please set it in your environment variables.'\n        );\n        return null;\n      }\n\n      throw new Error(\n        'VITE_SUPABASE_ANON_KEY is required in production. Please set it in your environment variables.'\n      );\n    })(),\n  },\n\n  // API Configuration - Use getters to ensure dynamic evaluation\n  get api() {\n    return {\n      url: getApiUrl(),\n      websocketUrl: getWebSocketUrl(),\n    };\n  },\n\n  // Environment\n  isDevelopment: import.meta.env.DEV,\n  isProduction: import.meta.env.PROD,\n};\n\n// Log environment status (only in development)\nif (environment.isDevelopment) {\n  console.log('🔧 Environment Configuration:', {\n    supabaseUrl: environment.supabase.url ? '✅ Set' : '❌ Missing',\n    supabaseKey: environment.supabase.anonKey ? '✅ Set' : '❌ Missing',\n    apiUrl: environment.api.url,\n    websocketUrl: environment.api.websocketUrl,\n    currentHost: window.location.hostname,\n    currentProtocol: window.location.protocol,\n    envVar: import.meta.env.VITE_API_URL || 'NOT SET',\n  });\n}\n\nexport default environment;\n","import { createClient } from '@supabase/supabase-js';\nimport { environment } from './environment';\n\n// Validate Supabase configuration with better error handling\nconst validateSupabaseConfig = () => {\n  const { url, anonKey } = environment.supabase;\n\n  console.log('🔧 Validating Supabase configuration:', {\n    url: url ? '✅ Set' : '❌ Missing',\n    anonKey: anonKey ? '✅ Set' : '❌ Missing',\n    envVars: {\n      VITE_SUPABASE_URL: import.meta.env.VITE_SUPABASE_URL\n        ? '✅ Set'\n        : '❌ Missing',\n      VITE_SUPABASE_ANON_KEY: import.meta.env.VITE_SUPABASE_ANON_KEY\n        ? '✅ Set'\n        : '❌ Missing',\n    },\n  });\n\n  // Check if URL is missing or contains placeholder\n  if (!url || url === 'your_supabase_project_url' || url === '') {\n    console.error('❌ Supabase URL validation failed:', {\n      url,\n      envVar: import.meta.env.VITE_SUPABASE_URL,\n    });\n    throw new Error(\n      'Invalid Supabase URL. Please check your environment variables.'\n    );\n  }\n\n  // Check if anon key is missing or contains placeholder\n  if (!anonKey || anonKey === 'your_supabase_anon_key_here' || anonKey === '') {\n    console.error('❌ Supabase anon key validation failed:', {\n      anonKey: anonKey ? 'SET' : 'MISSING',\n      envVar: import.meta.env.VITE_SUPABASE_ANON_KEY ? 'SET' : 'MISSING',\n    });\n    throw new Error(\n      'Invalid Supabase anon key. Please check your environment variables.'\n    );\n  }\n\n  // Validate URL format\n  try {\n    new URL(url);\n  } catch (error) {\n    console.error('❌ Supabase URL format validation failed:', { url, error });\n    throw new Error(`Invalid Supabase URL format: ${url}`);\n  }\n\n  console.log('✅ Supabase configuration validated successfully');\n  return { url, anonKey };\n};\n\n// Create Supabase client with error handling\nconst createSupabaseClient = () => {\n  try {\n    const config = validateSupabaseConfig();\n\n    const client = createClient(config.url, config.anonKey, {\n      auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: true,\n      },\n      global: {\n        headers: {\n          'X-Client-Info': 'bus-tracking-admin',\n        },\n      },\n      realtime: {\n        params: {\n          eventsPerSecond: 10,\n        },\n      },\n    });\n\n    console.log('✅ Supabase client created successfully');\n    return client;\n  } catch (error) {\n    console.error('❌ Failed to create Supabase client:', error);\n\n    // Create a fallback client with default values for development\n    if (import.meta.env.DEV) {\n      console.log('🔄 Creating fallback Supabase client for development...');\n      const fallbackClient = createClient(\n        'https://gthwmwfwvhyriygpcdlr.supabase.co',\n        '',\n        {\n          auth: {\n            autoRefreshToken: true,\n            persistSession: true,\n            detectSessionInUrl: true,\n          },\n          global: {\n            headers: {\n              'X-Client-Info': 'bus-tracking-admin',\n            },\n          },\n          realtime: {\n            params: {\n              eventsPerSecond: 10,\n            },\n          },\n        }\n      );\n      console.log('✅ Fallback Supabase client created');\n      return fallbackClient;\n    } else {\n      throw error;\n    }\n  }\n};\n\n// Create and export the Supabase client\nexport const supabase = createSupabaseClient();\n\n// Test Supabase connection\nexport const testSupabaseConnection = async () => {\n  try {\n    // Skip test for mock client\n    if (!supabase.from || typeof supabase.from !== 'function') {\n      console.log('🔄 Skipping Supabase connection test (mock client)');\n      return true;\n    }\n\n    // Testing Supabase connection...\n    const { error } = await supabase.from('profiles').select('count').limit(1);\n\n    if (error) {\n      console.error('❌ Supabase connection test failed:', error);\n      return false;\n    }\n\n    // Supabase connection test successful\n    return true;\n  } catch (error) {\n    console.error('❌ Supabase connection test error:', error);\n    return false;\n  }\n};\n\nexport default supabase;\n","import { User, Session } from '@supabase/supabase-js';\nimport { UserProfile } from '../types';\nimport { supabase } from '../config/supabase';\n\nexport interface AuthState {\n  user: User | null;\n  session: Session | null;\n  profile: UserProfile | null;\n  loading: boolean;\n}\n\nexport interface DriverBusAssignment {\n  driver_id: string;\n  bus_id: string;\n  bus_number: string;\n  route_id: string;\n  route_name: string;\n  driver_name: string;\n  created_at: string;\n  updated_at: string;\n}\n\nclass AuthService {\n  private currentUser: User | null = null;\n  private currentSession: Session | null = null;\n  private currentProfile: UserProfile | null = null;\n  private currentDriverAssignment: DriverBusAssignment | null = null;\n  private authStateChangeListener: (() => void) | null = null;\n  private _isInitialized: boolean = false;\n\n  constructor() {\n    this.initializeAuth();\n  }\n\n  private async initializeAuth() {\n    try {\n      // Get initial session\n      const {\n        data: { session },\n        error,\n      } = await supabase.auth.getSession();\n\n      if (error) {\n        console.error('❌ Error getting session:', error);\n        this._isInitialized = true;\n        return;\n      }\n\n      if (session) {\n        console.log('🔑 Setting initial session for user:', session.user.email);\n        this.currentSession = session;\n        this.currentUser = session.user;\n        console.log(\n          '🔑 Session access token:',\n          session.access_token ? 'Exists' : 'Missing'\n        );\n        await this.loadUserProfile(session.user.id);\n      }\n\n      // Listen for auth state changes\n      const {\n        data: { subscription },\n      } = supabase.auth.onAuthStateChange(async (event, session) => {\n        console.log('🔄 Auth state changed:', event, session?.user?.email);\n\n        this.currentSession = session;\n        this.currentUser = session?.user || null;\n\n        if (session) {\n          console.log(\n            '🔑 Auth state change - Session access token:',\n            session.access_token ? 'Exists' : 'Missing'\n          );\n        }\n\n        if (session?.user) {\n          await this.loadUserProfile(session.user.id);\n        } else {\n          this.currentProfile = null;\n        }\n\n        // Notify listeners\n        if (this.authStateChangeListener) {\n          this.authStateChangeListener();\n        }\n      });\n\n      this._isInitialized = true;\n      console.log('✅ Auth service initialized');\n\n      // Cleanup subscription on unmount\n      return () => subscription.unsubscribe();\n    } catch (error) {\n      console.error('❌ Error initializing auth:', error);\n      this._isInitialized = true;\n    }\n  }\n\n  private async loadUserProfile(userId: string): Promise<void> {\n    try {\n      // Check if user has dual roles in auth metadata\n      const authRoles = this.currentUser?.user_metadata?.roles;\n      const isDualRoleUser =\n        authRoles && Array.isArray(authRoles) && authRoles.length > 1;\n\n      if (isDualRoleUser) {\n        // For dual-role users, determine role based on current interface\n        const currentPath = window.location.pathname;\n        let role: 'admin' | 'driver' | 'student' = 'admin'; // Default to admin\n\n        if (currentPath.includes('/driver')) {\n          role = 'driver';\n        } else if (currentPath.includes('/admin')) {\n          role = 'admin';\n        } else {\n          // If not on a specific interface, check if admin email\n          const adminEmails = import.meta.env.VITE_ADMIN_EMAILS?.split(',').map(\n            (email: string) => email.trim().toLowerCase()\n          ) || ['siddharthmali.211@gmail.com'];\n          role = adminEmails.includes(\n            this.currentUser?.email?.toLowerCase() || ''\n          )\n            ? 'admin'\n            : 'driver';\n        }\n\n        // Load profile from database but override role\n        const { data: profile, error } = await supabase\n          .from('profiles')\n          .select('*')\n          .eq('id', userId)\n          .single();\n\n        if (error) {\n          console.error('❌ Error loading user profile:', error);\n          this.setTemporaryProfileWithRoleCheck(userId, this.currentUser);\n          return;\n        }\n\n        this.currentProfile = {\n          id: profile.id,\n          email: this.currentUser?.email || '',\n          role: role, // Use determined role instead of database role\n          full_name: profile.full_name,\n          first_name: profile.full_name?.split(' ')[0] || '',\n          last_name: profile.full_name?.split(' ').slice(1).join(' ') || '',\n          created_at: profile.created_at,\n          updated_at: profile.updated_at,\n        };\n        return;\n      }\n\n      // Regular single-role user handling\n      const { data: profile, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error) {\n        console.error('❌ Error loading user profile:', error);\n        // Set temporary profile with role check\n        this.setTemporaryProfileWithRoleCheck(userId, this.currentUser);\n        return;\n      }\n\n      // Check if this is a known admin user - prioritize admin email over database role\n      const adminEmails = import.meta.env.VITE_ADMIN_EMAILS?.split(',').map(\n        (email: string) => email.trim().toLowerCase()\n      ) || [\n        'siddharthmali.211@gmail.com', // Keep this as fallback for development\n      ];\n\n      const isAdmin = adminEmails.includes(\n        this.currentUser?.email?.toLowerCase() || ''\n      );\n      const role = isAdmin ? 'admin' : profile.role;\n\n      console.log(\n        `🔍 User ${this.currentUser?.email} - Database role: ${profile.role}, Admin check: ${isAdmin}, Final role: ${role}`\n      );\n\n      this.currentProfile = {\n        id: profile.id,\n        email: this.currentUser?.email || '',\n        role: role,\n        full_name: profile.full_name,\n        first_name: profile.full_name?.split(' ')[0] || '',\n        last_name: profile.full_name?.split(' ').slice(1).join(' ') || '',\n        created_at: profile.created_at,\n        updated_at: profile.updated_at,\n      };\n    } catch (error) {\n      console.error('❌ Error in loadUserProfile:', error);\n      // Set temporary profile with role check on any error\n      this.setTemporaryProfileWithRoleCheck(userId, this.currentUser);\n    }\n  }\n\n  // Removed unused setTemporaryProfile function\n\n  private setTemporaryProfileWithRoleCheck(userId: string, user: any): void {\n    console.log('🔄 Setting temporary profile with role check for user login');\n\n    // Check if this is a known admin user - use environment variable\n    const adminEmails = import.meta.env.VITE_ADMIN_EMAILS?.split(',').map(\n      (email: string) => email.trim().toLowerCase()\n    ) || [\n      'siddharthmali.211@gmail.com', // Keep this as fallback for development\n    ];\n\n    const isAdmin = adminEmails.includes(user.email?.toLowerCase() || '');\n    const role = isAdmin ? 'admin' : 'student';\n\n    console.log(`🔍 User ${user.email} assigned role: ${role}`);\n\n    this.currentProfile = {\n      id: userId,\n      email: user.email || '',\n      role: role,\n      full_name:\n        user.user_metadata?.full_name || user.email?.split('@')[0] || 'User',\n      first_name:\n        user.user_metadata?.full_name?.split(' ')[0] ||\n        user.email?.split('@')[0] ||\n        'User',\n      last_name:\n        user.user_metadata?.full_name?.split(' ').slice(1).join(' ') || '',\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n    };\n  }\n\n  // private async createDefaultProfile(userId: string): Promise<void> {\n  //   try {\n  //     const { data: profile, error } = await supabase\n  //       .from('profiles')\n  //       .insert({\n  //         id: userId,\n  //         full_name:\n  //           this.currentUser?.user_metadata?.full_name || 'Unknown User',\n  //         role: 'admin', // Changed to admin for admin login\n  //       })\n  //       .select()\n  //       .single();\n\n  //     if (error) {\n  //       console.error('❌ Error creating default profile:', error);\n  //       return;\n  //     }\n\n  //     this.currentProfile = {\n  //       id: profile.id,\n  //       email: this.currentUser?.email || '',\n  //       role: profile.role,\n  //       full_name: profile.full_name,\n  //       first_name: profile.full_name?.split(' ')[0] || '',\n  //       last_name: profile.full_name?.split(' ').slice(1).join(' ') || '',\n  //       created_at: profile.created_at,\n  //       updated_at: profile.updated_at,\n  //     };\n  //   } catch (error) {\n  //     console.error('❌ Error in createDefaultProfile:', error);\n  //   }\n  // }\n\n  // Sign in with email and password - OPTIMIZED VERSION\n  async signIn(\n    email: string,\n    password: string\n  ): Promise<{ success: boolean; error?: string; user?: UserProfile }> {\n    try {\n      console.log('🔐 Starting sign in process for:', email);\n\n      // Direct authentication with timeout\n      const authPromise = supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      const timeoutPromise = new Promise((_, reject) => {\n        setTimeout(() => reject(new Error('Authentication timeout')), 5000); // 5s timeout\n      });\n\n      const { data, error } = (await Promise.race([\n        authPromise,\n        timeoutPromise,\n      ])) as any;\n\n      if (error) {\n        console.error('❌ Sign in error:', error);\n        return { success: false, error: error.message };\n      }\n\n      console.log('✅ Supabase authentication successful');\n\n      if (data.user && data.session) {\n        console.log('👤 User data received:', data.user.email);\n        this.currentUser = data.user;\n        this.currentSession = data.session;\n\n        console.log('📋 Loading user profile...');\n        try {\n          // Load profile with timeout\n          const profilePromise = this.loadUserProfile(data.user.id);\n          const profileTimeout = new Promise((_, reject) => {\n            setTimeout(\n              () => reject(new Error('Profile loading timeout')),\n              3000 // Reduced from 5s to 3s for better UX\n            );\n          });\n\n          await Promise.race([profilePromise, profileTimeout]);\n          console.log('✅ Profile loaded:', this.currentProfile?.role);\n        } catch (profileError) {\n          console.warn(\n            '⚠️ Profile loading failed, using temporary profile:',\n            profileError\n          );\n\n          // Set temporary profile immediately for faster response\n          this.setTemporaryProfileWithRoleCheck(data.user.id, data.user);\n        }\n\n        // Notify listeners immediately after successful sign in\n        if (this.authStateChangeListener) {\n          this.authStateChangeListener();\n        }\n\n        return {\n          success: true,\n          user: this.currentProfile || undefined,\n        };\n      }\n\n      console.error('❌ No user or session data received');\n      return { success: false, error: 'Authentication failed' };\n    } catch (error) {\n      console.error('❌ Sign in error:', error);\n      if (error instanceof Error && error.message.includes('NetworkError')) {\n        return {\n          success: false,\n          error:\n            'Network connection error. Please check your internet connection and try again.',\n        };\n      }\n      if (error instanceof Error && error.message.includes('timeout')) {\n        return {\n          success: false,\n          error: 'Login timed out. Please try again.',\n        };\n      }\n      return { success: false, error: 'Network error during sign in' };\n    }\n  }\n\n  // Sign up with email and password\n  async signUp(\n    email: string,\n    password: string,\n    profile: Partial<UserProfile>\n  ): Promise<{ success: boolean; error?: string }> {\n    try {\n      const { data, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            full_name: profile.full_name,\n            role: profile.role || 'student',\n          },\n        },\n      });\n\n      if (error) {\n        console.error('❌ Sign up error:', error);\n        return { success: false, error: error.message };\n      }\n\n      if (data.user) {\n        // Create profile in profiles table\n        const { error: profileError } = await supabase.from('profiles').insert({\n          id: data.user.id,\n          full_name: profile.full_name || 'Unknown User',\n          role: profile.role || 'student',\n        });\n\n        if (profileError) {\n          console.error('❌ Error creating profile:', profileError);\n          return { success: false, error: 'Profile creation failed' };\n        }\n\n        return { success: true };\n      }\n\n      return { success: false, error: 'Registration failed' };\n    } catch (error) {\n      console.error('❌ Sign up error:', error);\n      return { success: false, error: 'Network error during sign up' };\n    }\n  }\n\n  // Sign out\n  async signOut(): Promise<{ success: boolean; error?: string }> {\n    try {\n      console.log('🔐 Starting sign out process...');\n\n      const { error } = await supabase.auth.signOut();\n\n      if (error) {\n        console.error('❌ Sign out error:', error);\n        return { success: false, error: error.message };\n      }\n\n      console.log('✅ Sign out successful');\n\n      // Clear all auth state\n      this.currentUser = null;\n      this.currentSession = null;\n      this.currentProfile = null;\n\n      // Notify listeners immediately after sign out\n      if (this.authStateChangeListener) {\n        this.authStateChangeListener();\n      }\n\n      return { success: true };\n    } catch (error) {\n      console.error('❌ Sign out error:', error);\n      return { success: false, error: 'Network error during sign out' };\n    }\n  }\n\n  // Get current user\n  getCurrentUser(): User | null {\n    return this.currentUser;\n  }\n\n  // Get current session\n  getCurrentSession(): Session | null {\n    return this.currentSession;\n  }\n\n  // Get current user profile\n  getCurrentProfile(): UserProfile | null {\n    return this.currentProfile;\n  }\n\n  // Check if auth service is initialized\n  isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  // Check if user is authenticated\n  isAuthenticated(): boolean {\n    return !!this.currentUser && !!this.currentSession;\n  }\n\n  // Check if user has specific role\n  hasRole(role: string): boolean {\n    return this.currentProfile?.role === role;\n  }\n\n  // Check if user is admin\n  isAdmin(): boolean {\n    return this.hasRole('admin');\n  }\n\n  // Check if user is driver\n  isDriver(): boolean {\n    return this.hasRole('driver');\n  }\n\n  // Check if user is student\n  isStudent(): boolean {\n    return this.hasRole('student');\n  }\n\n  // Get access token for API calls\n  getAccessToken(): string | null {\n    // First try to get from current session\n    let token = this.currentSession?.access_token || null;\n\n    // If no token in current session, try to get from localStorage as fallback\n    if (!token) {\n      try {\n        // Try multiple localStorage keys that Supabase might use\n        const possibleKeys = [\n          'supabase.auth.token',\n          'sb-gthwmwfwvhyriygpcdlr-auth-token', // Supabase project-specific key\n          'supabase.auth.session',\n        ];\n\n        for (const key of possibleKeys) {\n          const storedSession = localStorage.getItem(key);\n          if (storedSession) {\n            const parsedSession = JSON.parse(storedSession);\n            token =\n              parsedSession?.currentSession?.access_token ||\n              parsedSession?.access_token ||\n              parsedSession?.session?.access_token ||\n              null;\n\n            if (token) {\n              console.log(\n                `🔑 Retrieved token from localStorage fallback (${key})`\n              );\n              break;\n            }\n          }\n        }\n      } catch (error) {\n        console.warn('⚠️ Error reading token from localStorage:', error);\n      }\n    }\n\n    console.log(\n      '🔑 getAccessToken called:',\n      token ? 'Token exists' : 'No token',\n      'Session:',\n      !!this.currentSession\n    );\n    return token;\n  }\n\n  // Enhanced token validation for API calls with automatic refresh\n  async validateTokenForAPI(): Promise<{\n    valid: boolean;\n    token: string | null;\n    refreshed: boolean;\n  }> {\n    let token = this.getAccessToken();\n    let refreshed = false;\n\n    if (!token) {\n      return { valid: false, token: null, refreshed: false };\n    }\n\n    try {\n      // First, try to validate the current token\n      const {\n        data: { user },\n        error,\n      } = await supabase.auth.getUser(token);\n\n      if (error || !user) {\n        console.log(\n          '🔄 Token validation failed, attempting refresh:',\n          error?.message\n        );\n\n        // Try to refresh the session\n        const refreshResult = await this.refreshSession();\n        if (refreshResult.success) {\n          token = this.getAccessToken();\n          refreshed = true;\n          console.log('✅ Token refreshed successfully');\n        } else {\n          console.log('❌ Token refresh failed:', refreshResult.error);\n          return { valid: false, token: null, refreshed: false };\n        }\n      }\n\n      // Validate the token again (either original or refreshed)\n      if (token) {\n        const {\n          data: { user: validatedUser },\n          error: validationError,\n        } = await supabase.auth.getUser(token);\n\n        if (validationError || !validatedUser) {\n          console.log(\n            '❌ Final token validation failed:',\n            validationError?.message\n          );\n          return { valid: false, token: null, refreshed };\n        }\n\n        return { valid: true, token, refreshed };\n      }\n\n      return { valid: false, token: null, refreshed };\n    } catch (error) {\n      console.error('❌ Token validation error:', error);\n      return { valid: false, token: null, refreshed: false };\n    }\n  }\n\n  // Refresh session\n  async refreshSession(): Promise<{ success: boolean; error?: string }> {\n    try {\n      // Check if we have a current session before attempting refresh\n      if (!this.currentSession) {\n        console.log('🔄 No current session to refresh');\n        return { success: false, error: 'No session to refresh' };\n      }\n\n      const { data, error } = await supabase.auth.refreshSession();\n\n      if (error) {\n        // Don't log AuthSessionMissingError as an error since it's expected when no session exists\n        if (error.message.includes('Auth session missing')) {\n          console.log(\n            '🔄 No session to refresh (expected for unauthenticated users)'\n          );\n          return { success: false, error: 'No session to refresh' };\n        }\n        console.error('❌ Session refresh error:', error);\n        return { success: false, error: error.message };\n      }\n\n      if (data.session) {\n        this.currentSession = data.session;\n        this.currentUser = data.user;\n        return { success: true };\n      }\n\n      return { success: false, error: 'Session refresh failed' };\n    } catch (error) {\n      console.error('❌ Session refresh error:', error);\n      return { success: false, error: 'Network error during session refresh' };\n    }\n  }\n\n  // Update user profile\n  async updateProfile(\n    updates: Partial<UserProfile>\n  ): Promise<{ success: boolean; error?: string }> {\n    if (!this.currentUser) {\n      return { success: false, error: 'No authenticated user' };\n    }\n\n    try {\n      const { error } = await supabase\n        .from('profiles')\n        .update(updates)\n        .eq('id', this.currentUser.id);\n\n      if (error) {\n        console.error('❌ Profile update error:', error);\n        return { success: false, error: error.message };\n      }\n\n      // Reload profile\n      await this.loadUserProfile(this.currentUser.id);\n      return { success: true };\n    } catch (error) {\n      console.error('❌ Profile update error:', error);\n      return { success: false, error: 'Network error during profile update' };\n    }\n  }\n\n  // Set auth state change listener\n  onAuthStateChange(listener: () => void): void {\n    this.authStateChangeListener = listener;\n  }\n\n  // Remove auth state change listener\n  removeAuthStateChangeListener(): void {\n    this.authStateChangeListener = null;\n  }\n\n  // Debug method to get current auth state\n  getAuthState() {\n    return {\n      initialized: this._isInitialized,\n      user: this.currentUser,\n      session: this.currentSession,\n      profile: this.currentProfile,\n      isAuthenticated: this.isAuthenticated(),\n      isAdmin: this.isAdmin(),\n    };\n  }\n\n  // Method to force a fresh login and clear any stale sessions\n  async forceFreshLogin(): Promise<{ success: boolean; error?: string }> {\n    try {\n      console.log('🔄 Forcing fresh login...');\n\n      // Clear all localStorage auth data\n      const keysToRemove = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (\n          key &&\n          (key.includes('supabase') ||\n            key.includes('auth') ||\n            key.includes('sb-'))\n        ) {\n          keysToRemove.push(key);\n        }\n      }\n\n      keysToRemove.forEach((key) => {\n        localStorage.removeItem(key);\n        console.log(`🗑️ Removed localStorage key: ${key}`);\n      });\n\n      // Clear current session\n      this.currentSession = null;\n      this.currentUser = null;\n      this.currentProfile = null;\n\n      console.log('✅ Fresh login state prepared');\n      return { success: true };\n    } catch (error) {\n      console.error('❌ Error forcing fresh login:', error);\n      return { success: false, error: 'Failed to force fresh login' };\n    }\n  }\n\n  // Method to recover session from localStorage for cross-device scenarios\n  async recoverSession(): Promise<{ success: boolean; error?: string }> {\n    try {\n      console.log('🔄 Attempting to recover session from localStorage...');\n\n      // Try multiple localStorage keys that Supabase might use\n      const possibleKeys = [\n        'supabase.auth.token',\n        'sb-gthwmwfwvhyriygpcdlr-auth-token', // Supabase project-specific key\n        'supabase.auth.session',\n      ];\n\n      let storedSession = null;\n      let usedKey = null;\n\n      for (const key of possibleKeys) {\n        const stored = localStorage.getItem(key);\n        if (stored) {\n          storedSession = stored;\n          usedKey = key;\n          console.log(`📝 Found session in localStorage key: ${key}`);\n          break;\n        }\n      }\n\n      if (!storedSession) {\n        console.log('📝 No stored session found in any localStorage key');\n        return { success: false, error: 'No stored session' };\n      }\n\n      let parsedSession;\n      try {\n        parsedSession = JSON.parse(storedSession);\n      } catch (parseError) {\n        console.log('❌ Failed to parse stored session:', parseError);\n        return { success: false, error: 'Invalid session format' };\n      }\n\n      // Try different session structures\n      const accessToken =\n        parsedSession?.currentSession?.access_token ||\n        parsedSession?.access_token ||\n        parsedSession?.session?.access_token;\n\n      if (!accessToken) {\n        console.log(\n          '🔑 No access token found in stored session structure:',\n          parsedSession\n        );\n        return { success: false, error: 'No access token in stored session' };\n      }\n\n      console.log('🔑 Found access token, validating...');\n\n      // Verify the token is still valid\n      const {\n        data: { user },\n        error,\n      } = await supabase.auth.getUser(accessToken);\n\n      if (error || !user) {\n        console.log('❌ Stored token is invalid:', error?.message);\n        if (usedKey) {\n          localStorage.removeItem(usedKey);\n        }\n        return { success: false, error: 'Stored token is invalid' };\n      }\n\n      // Set the recovered session\n      this.currentSession = {\n        access_token: accessToken,\n        refresh_token:\n          parsedSession?.currentSession?.refresh_token ||\n          parsedSession?.refresh_token,\n        expires_in:\n          parsedSession?.currentSession?.expires_in ||\n          parsedSession?.expires_in,\n        token_type: 'bearer',\n        user: user,\n      } as Session;\n\n      this.currentUser = user;\n\n      // Load user profile\n      await this.loadUserProfile(user.id);\n\n      console.log('✅ Session recovered successfully for user:', user.email);\n      return { success: true };\n    } catch (error) {\n      console.error('❌ Error recovering session:', error);\n      return { success: false, error: 'Failed to recover session' };\n    }\n  }\n\n  // New methods for proper authentication state management\n\n  /**\n   * Get driver-bus assignment from database\n   */\n  async getDriverBusAssignment(\n    driverId: string\n  ): Promise<DriverBusAssignment | null> {\n    try {\n      // Get bus assignment directly from buses table (matching backend logic)\n      const { data: busData, error: busError } = await supabase\n        .from('buses')\n        .select('id, number_plate, route_id')\n        .eq('assigned_driver_id', driverId)\n        .eq('is_active', true)\n        .single();\n\n      if (busError || !busData) {\n        console.error('❌ Error fetching bus assignment:', busError);\n        return null;\n      }\n\n      // Get route information\n      let routeName = '';\n      if (busData.route_id) {\n        const { data: routeData, error: routeError } = await supabase\n          .from('routes')\n          .select('name')\n          .eq('id', busData.route_id)\n          .single();\n\n        if (!routeError && routeData) {\n          routeName = routeData.name;\n        }\n      }\n\n      // Get driver name from profiles\n      let driverName = 'Unknown Driver';\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('full_name')\n        .eq('id', driverId)\n        .single();\n\n      if (!profileError && profileData?.full_name) {\n        driverName = profileData.full_name;\n      } else {\n        // Fallback to users table\n        const { data: userData, error: userError } = await supabase\n          .from('users')\n          .select('first_name, last_name')\n          .eq('id', driverId)\n          .single();\n\n        if (!userError && userData) {\n          driverName =\n            `${userData.first_name || ''} ${userData.last_name || ''}`.trim() ||\n            'Unknown Driver';\n        }\n      }\n\n      return {\n        driver_id: driverId,\n        bus_id: busData.id,\n        bus_number: busData.number_plate,\n        route_id: busData.route_id || '',\n        route_name: routeName,\n        driver_name: driverName,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('❌ Error in getDriverBusAssignment:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Store driver-bus assignment in database\n   */\n  async storeDriverBusAssignment(\n    assignment: Omit<DriverBusAssignment, 'created_at' | 'updated_at'>\n  ): Promise<boolean> {\n    try {\n      // Since the backend already has the assignment in the buses table,\n      // we just need to store the assignment in memory for the frontend\n      this.currentDriverAssignment = {\n        ...assignment,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      console.log('✅ Driver bus assignment stored in memory successfully');\n      return true;\n    } catch (error) {\n      console.error('❌ Error in storeDriverBusAssignment:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Clear driver-bus assignment from database\n   */\n  async clearDriverBusAssignment(): Promise<boolean> {\n    try {\n      // Just clear from memory since the backend handles the actual assignment\n      this.currentDriverAssignment = null;\n      console.log('✅ Driver bus assignment cleared from memory');\n      return true;\n    } catch (error) {\n      console.error('❌ Error in clearDriverBusAssignment:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get current driver assignment from memory (cached)\n   */\n  getCurrentDriverAssignment(): DriverBusAssignment | null {\n    return this.currentDriverAssignment;\n  }\n\n  /**\n   * Validate session and refresh if needed\n   */\n  async validateSession(): Promise<boolean> {\n    try {\n      const {\n        data: { session },\n        error,\n      } = await supabase.auth.getSession();\n\n      if (error) {\n        console.error('❌ Session validation error:', error);\n        return false;\n      }\n\n      if (!session) {\n        console.log('❌ No active session found');\n        return false;\n      }\n\n      // Check if session is expired or about to expire\n      const expiresAt = new Date(session.expires_at! * 1000);\n      const now = new Date();\n      const timeUntilExpiry = expiresAt.getTime() - now.getTime();\n\n      // If session expires in less than 5 minutes, refresh it\n      if (timeUntilExpiry < 5 * 60 * 1000) {\n        console.log('🔄 Session expiring soon, refreshing...');\n        const {\n          data: { session: refreshedSession },\n          error: refreshError,\n        } = await supabase.auth.refreshSession();\n\n        if (refreshError) {\n          console.error('❌ Session refresh error:', refreshError);\n          return false;\n        }\n\n        if (refreshedSession) {\n          this.currentSession = refreshedSession;\n          this.currentUser = refreshedSession.user;\n          console.log('✅ Session refreshed successfully');\n        }\n      }\n\n      return true;\n    } catch (error) {\n      console.error('❌ Error validating session:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Check if user has valid driver session\n   */\n  async validateDriverSession(): Promise<{\n    isValid: boolean;\n    assignment: DriverBusAssignment | null;\n  }> {\n    try {\n      // First validate the session\n      const isSessionValid = await this.validateSession();\n      if (!isSessionValid) {\n        return { isValid: false, assignment: null };\n      }\n\n      // Check if user is a driver\n      if (this.currentProfile?.role !== 'driver') {\n        console.log('❌ User is not a driver');\n        return { isValid: false, assignment: null };\n      }\n\n      // Get driver assignment from database\n      const assignment = await this.getDriverBusAssignment(\n        this.currentUser!.id\n      );\n      if (!assignment) {\n        console.log('❌ No active bus assignment found for driver');\n        return { isValid: false, assignment: null };\n      }\n\n      this.currentDriverAssignment = assignment;\n      return { isValid: true, assignment };\n    } catch (error) {\n      console.error('❌ Error validating driver session:', error);\n      return { isValid: false, assignment: null };\n    }\n  }\n\n  /**\n   * Logout and clear all session data\n   */\n  async logout(): Promise<void> {\n    try {\n      // Clear driver assignment if exists\n      if (this.currentUser && this.currentProfile?.role === 'driver') {\n        await this.clearDriverBusAssignment();\n      }\n\n      // Clear current state\n      this.currentUser = null;\n      this.currentSession = null;\n      this.currentProfile = null;\n      this.currentDriverAssignment = null;\n\n      // Sign out from Supabase\n      const { error } = await supabase.auth.signOut();\n      if (error) {\n        console.error('❌ Error signing out:', error);\n      } else {\n        console.log('✅ Logged out successfully');\n      }\n    } catch (error) {\n      console.error('❌ Error in logout:', error);\n    }\n  }\n}\n\n// Export singleton instance\nexport const authService = new AuthService();\nexport default authService;\n","import { authService } from './authService';\nimport { HealthResponse, Bus, Route, Driver, BusLocation } from '../types';\nimport { environment } from '../config/environment';\n\nconst API_BASE_URL = environment.api.url;\n\nimport { IApiService } from './interfaces/IApiService';\n\nclass ApiService implements IApiService {\n  private baseUrl: string;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  // Backend API calls (for business logic)\n  private async backendRequest<T>(\n    endpoint: string,\n    options?: RequestInit\n  ): Promise<T> {\n    // Ensure we're using the correct backend URL for production\n    const baseUrl = this.baseUrl || environment.api.url;\n    const url = `${baseUrl}${endpoint}`;\n\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n    };\n\n    // Try to get token, but don't fail if auth service is not available\n    try {\n      const token = authService.getAccessToken();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.log('🔓 Public access - no authentication token available');\n    }\n\n    if (options?.headers) {\n      Object.assign(headers, options.headers);\n    }\n\n    const response = await fetch(url, {\n      headers,\n      ...options,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(\n        errorData.message ||\n          errorData.error ||\n          `API request failed: ${response.status} ${response.statusText}`\n      );\n    }\n\n    return response.json();\n  }\n\n  // Health check\n  async getHealth(): Promise<HealthResponse> {\n    return this.backendRequest<HealthResponse>('/health');\n  }\n\n  // Bus operations (Backend API)\n  async getAllBuses(): Promise<{\n    success: boolean;\n    data: Bus[];\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Bus[];\n        error?: string;\n        timestamp: string;\n      }>('/buses');\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching buses from backend:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getAllBuses:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getBusInfo(busId: string): Promise<{\n    success: boolean;\n    data: Bus | null;\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Bus;\n        error?: string;\n        timestamp: string;\n      }>(`/buses/${busId}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error fetching bus info from backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: null,\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getBusInfo:', error);\n      return {\n        success: false,\n        data: null,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  // Route operations (Backend API)\n  async getRoutes(): Promise<{\n    success: boolean;\n    data: Route[];\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Route[];\n        error?: string;\n        timestamp: string;\n      }>('/routes');\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching routes from backend:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getRoutes:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getRouteInfo(routeId: string): Promise<{\n    success: boolean;\n    data: Route | null;\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Route;\n        error?: string;\n        timestamp: string;\n      }>(`/routes/${routeId}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error fetching route info from backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: null,\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getRouteInfo:', error);\n      return {\n        success: false,\n        data: null,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  // Driver operations (Backend API)\n  async getAllDrivers(): Promise<{\n    success: boolean;\n    data: Driver[];\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Driver[];\n        error?: string;\n        timestamp: string;\n      }>('/admin/drivers');\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error fetching drivers from backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getAllDrivers:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getDriverInfo(driverId: string): Promise<{\n    success: boolean;\n    data: Driver | null;\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Driver;\n        error?: string;\n        timestamp: string;\n      }>(`/admin/drivers/${driverId}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error fetching driver info from backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: null,\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getDriverInfo:', error);\n      return {\n        success: false,\n        data: null,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  // Live location operations (Backend API)\n  async getLiveLocations(): Promise<{\n    success: boolean;\n    data: BusLocation[];\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: BusLocation[];\n        error?: string;\n        timestamp: string;\n      }>('/locations/current');\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error fetching live locations from backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error: any) {\n      console.error('❌ Error in getLiveLocations:', error);\n      // Handle 401 Unauthorized gracefully for student access\n      if (error.message && error.message.includes('401')) {\n        console.log('ℹ️ Student access - no authentication required for viewing locations');\n        return {\n          success: true,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async updateLiveLocation(\n    busId: string,\n    driverId: string,\n    location: {\n      latitude: number;\n      longitude: number;\n      speed?: number;\n      heading?: number;\n    }\n  ): Promise<{\n    success: boolean;\n    data: BusLocation | null;\n    timestamp: string;\n  }> {\n    try {\n      // Use backend API instead of direct Supabase call\n      const response = await this.backendRequest<{\n        success: boolean;\n        data: BusLocation;\n        error?: string;\n        timestamp: string;\n      }>('/locations/update', {\n        method: 'POST',\n        body: JSON.stringify({\n          busId,\n          driverId,\n          latitude: location.latitude,\n          longitude: location.longitude,\n          speed: location.speed,\n          heading: location.heading,\n          timestamp: new Date().toISOString(),\n        }),\n      });\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error(\n          '❌ Error updating live location via backend:',\n          response.error\n        );\n        return {\n          success: false,\n          data: null,\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in updateLiveLocation:', error);\n      return {\n        success: false,\n        data: null,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  // Spatial optimization methods\n  async getRoutesInViewport(bounds: [[number, number], [number, number]]): Promise<{\n    success: boolean;\n    data: Route[];\n    timestamp: string;\n  }> {\n    try {\n      const [minLng, minLat] = bounds[0];\n      const [maxLng, maxLat] = bounds[1];\n      \n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Route[];\n        error?: string;\n        timestamp: string;\n      }>(`/routes/viewport?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching routes in viewport:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getRoutesInViewport:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getBusesInViewport(bounds: [[number, number], [number, number]]): Promise<{\n    success: boolean;\n    data: Bus[];\n    timestamp: string;\n  }> {\n    try {\n      const [minLng, minLat] = bounds[0];\n      const [maxLng, maxLat] = bounds[1];\n      \n      const response = await this.backendRequest<{\n        success: boolean;\n        data: Bus[];\n        error?: string;\n        timestamp: string;\n      }>(`/buses/viewport?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching buses in viewport:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getBusesInViewport:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getLiveLocationsInViewport(bounds: [[number, number], [number, number]]): Promise<{\n    success: boolean;\n    data: BusLocation[];\n    timestamp: string;\n  }> {\n    try {\n      const [minLng, minLat] = bounds[0];\n      const [maxLng, maxLat] = bounds[1];\n      \n      const response = await this.backendRequest<{\n        success: boolean;\n        data: BusLocation[];\n        error?: string;\n        timestamp: string;\n      }>(`/locations/viewport?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching live locations in viewport:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getLiveLocationsInViewport:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async getBusClusters(bounds: [[number, number], [number, number]], zoom: number): Promise<{\n    success: boolean;\n    data: any[];\n    timestamp: string;\n  }> {\n    try {\n      const [minLng, minLat] = bounds[0];\n      const [maxLng, maxLat] = bounds[1];\n      \n      const response = await this.backendRequest<{\n        success: boolean;\n        data: any[];\n        error?: string;\n        timestamp: string;\n      }>(`/buses/clusters?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}&zoom=${zoom}`);\n\n      if (response.success && response.data) {\n        return {\n          success: true,\n          data: response.data,\n          timestamp: new Date().toISOString(),\n        };\n      } else {\n        console.error('❌ Error fetching bus clusters:', response.error);\n        return {\n          success: false,\n          data: [],\n          timestamp: new Date().toISOString(),\n        };\n      }\n    } catch (error) {\n      console.error('❌ Error in getBusClusters:', error);\n      return {\n        success: false,\n        data: [],\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nexport const apiService = new ApiService(API_BASE_URL);\nexport default apiService;\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiService } from '../services/api';\r\n\r\n// Query keys for consistent caching\r\nexport const queryKeys = {\r\n  health: ['health'],\r\n  routes: ['routes'],\r\n  route: (id: string) => ['route', id],\r\n  routesInViewport: (bounds: [[number, number], [number, number]]) => ['routes', 'viewport', bounds],\r\n  buses: ['buses'],\r\n  bus: (id: string) => ['bus', id],\r\n  busesInViewport: (bounds: [[number, number], [number, number]]) => ['buses', 'viewport', bounds],\r\n  drivers: ['drivers'],\r\n  driver: (id: string) => ['driver', id],\r\n  liveLocations: ['liveLocations'],\r\n  liveLocationsInViewport: (bounds: [[number, number], [number, number]]) => ['liveLocations', 'viewport', bounds],\r\n  busClusters: (bounds: [[number, number], [number, number]], zoom: number) => ['busClusters', bounds, zoom],\r\n} as const;\r\n\r\n// Health check query\r\nexport const useHealthCheck = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.health,\r\n    queryFn: () => apiService.getHealth(),\r\n    staleTime: 30000, // 30 seconds\r\n    refetchInterval: 60000, // 1 minute\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Routes queries\r\nexport const useRoutes = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.routes,\r\n    queryFn: () => apiService.getRoutes(),\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    refetchInterval: 10 * 60 * 1000, // 10 minutes\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Optimized routes query for viewport\r\nexport const useRoutesInViewport = (bounds: [[number, number], [number, number]], enabled = true) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.routesInViewport(bounds),\r\n    queryFn: () => apiService.getRoutesInViewport(bounds),\r\n    enabled: enabled && bounds !== undefined,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes for viewport data\r\n    refetchInterval: 5 * 60 * 1000, // 5 minutes\r\n    retry: 3,\r\n  });\r\n};\r\n\r\nexport const useRoute = (routeId: string) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.route(routeId),\r\n    queryFn: () => apiService.getRouteInfo(routeId),\r\n    enabled: !!routeId,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Buses queries\r\nexport const useBuses = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.buses,\r\n    queryFn: () => apiService.getAllBuses(),\r\n    staleTime: 30 * 1000, // 30 seconds\r\n    refetchInterval: 60 * 1000, // 1 minute\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Optimized buses query for viewport\r\nexport const useBusesInViewport = (bounds: [[number, number], [number, number]], enabled = true) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.busesInViewport(bounds),\r\n    queryFn: () => apiService.getBusesInViewport(bounds),\r\n    enabled: enabled && bounds !== undefined,\r\n    staleTime: 15 * 1000, // 15 seconds for viewport data\r\n    refetchInterval: 30 * 1000, // 30 seconds\r\n    retry: 3,\r\n  });\r\n};\r\n\r\nexport const useBus = (busId: string) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.bus(busId),\r\n    queryFn: () => apiService.getBusInfo(busId),\r\n    enabled: !!busId,\r\n    staleTime: 30 * 1000, // 30 seconds\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Drivers queries\r\nexport const useDrivers = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.drivers,\r\n    queryFn: () => apiService.getAllDrivers(),\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    refetchInterval: 10 * 60 * 1000, // 10 minutes\r\n    retry: 3,\r\n  });\r\n};\r\n\r\nexport const useDriver = (driverId: string) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.driver(driverId),\r\n    queryFn: () => apiService.getDriverInfo(driverId),\r\n    enabled: !!driverId,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Live locations query\r\nexport const useLiveLocations = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.liveLocations,\r\n    queryFn: () => apiService.getLiveLocations(),\r\n    staleTime: 10 * 1000, // 10 seconds\r\n    refetchInterval: 30 * 1000, // 30 seconds\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Optimized live locations query for viewport\r\nexport const useLiveLocationsInViewport = (bounds: [[number, number], [number, number]], enabled = true) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.liveLocationsInViewport(bounds),\r\n    queryFn: () => apiService.getLiveLocationsInViewport(bounds),\r\n    enabled: enabled && bounds !== undefined,\r\n    staleTime: 5 * 1000, // 5 seconds for viewport data\r\n    refetchInterval: 15 * 1000, // 15 seconds\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Bus clusters query\r\nexport const useBusClusters = (bounds: [[number, number], [number, number]], zoom: number, enabled = true) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.busClusters(bounds, zoom),\r\n    queryFn: () => apiService.getBusClusters(bounds, zoom),\r\n    enabled: enabled && bounds !== undefined && zoom !== undefined,\r\n    staleTime: 10 * 1000, // 10 seconds for cluster data\r\n    refetchInterval: 20 * 1000, // 20 seconds\r\n    retry: 3,\r\n  });\r\n};\r\n\r\n// Mutations\r\nexport const useUpdateLiveLocation = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: ({\r\n      busId,\r\n      driverId,\r\n      location,\r\n    }: {\r\n      busId: string;\r\n      driverId: string;\r\n      location: {\r\n        latitude: number;\r\n        longitude: number;\r\n        speed?: number;\r\n        heading?: number;\r\n      };\r\n    }) => apiService.updateLiveLocation(busId, driverId, location),\r\n    \r\n    onSuccess: () => {\r\n      // Invalidate and refetch live locations\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.liveLocations });\r\n    },\r\n    \r\n    onError: (error) => {\r\n      console.error('Failed to update live location:', error);\r\n    },\r\n  });\r\n};\r\n","import { io, Socket } from 'socket.io-client';\nimport { environment } from '../config/environment';\n// import { authService } from './authService'; // Unused import\n\nexport interface BusLocation {\n  busId: string;\n  latitude: number;\n  longitude: number;\n  timestamp: string;\n  speed?: number;\n  heading?: number;\n  eta?: {\n    estimated_arrival_minutes: number;\n    distance_remaining: number;\n    is_near_stop: boolean;\n  };\n}\n\nclass WebSocketService {\n  public socket: Socket | null = null;\n  private _isConnected: boolean = false;\n  private connectionState:\n    | 'disconnected'\n    | 'connecting'\n    | 'connected'\n    | 'reconnecting' = 'disconnected';\n  private reconnectAttempts: number = 0;\n  private maxReconnectAttempts: number = 10;\n  private reconnectDelay: number = 1000;\n  private maxReconnectDelay: number = 30000;\n  private heartbeatInterval: NodeJS.Timeout | null = null;\n  private connectionTimeout: NodeJS.Timeout | null = null;\n  private lastHeartbeat: number = 0;\n  private isShuttingDown: boolean = false;\n  private connectionMonitorInterval: NodeJS.Timeout | null = null;\n\n  // Event listeners\n  private busLocationListeners: ((location: BusLocation) => void)[] = [];\n  private driverConnectedListeners: ((data: any) => void)[] = [];\n  private driverDisconnectedListeners: ((data: any) => void)[] = [];\n  private studentConnectedListeners: (() => void)[] = [];\n  private busArrivingListeners: ((data: any) => void)[] = [];\n\n  constructor() {\n    // Bind methods to preserve context\n    this.handleConnect = this.handleConnect.bind(this);\n    this.handleDisconnect = this.handleDisconnect.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.handleReconnect = this.handleReconnect.bind(this);\n    this.startHeartbeat = this.startHeartbeat.bind(this);\n    this.stopHeartbeat = this.stopHeartbeat.bind(this);\n    this.monitorConnection = this.monitorConnection.bind(this);\n  }\n\n  async connect(): Promise<void> {\n    if (this.socket?.connected || this.connectionState === 'connecting') {\n      console.log('🔌 WebSocket already connected or connecting');\n      return;\n    }\n\n    // Reset shutting down flag when attempting to connect\n    this.isShuttingDown = false;\n\n    try {\n      this.connectionState = 'connecting';\n      console.log('🔌 Connecting to WebSocket server...');\n\n      // Get WebSocket URL with fallback\n      const wsUrl = environment.api.websocketUrl;\n      console.log('🔌 WebSocket URL:', wsUrl);\n\n      // Enhanced Socket.IO configuration for production with improved stability\n      this.socket = io(wsUrl, {\n        transports: ['polling', 'websocket'], // Start with polling, upgrade to WebSocket\n        upgrade: true,\n        rememberUpgrade: true,\n        timeout: 20000, // Increased timeout for better stability\n        forceNew: true,\n        reconnection: true, // Enable automatic reconnection\n        reconnectionAttempts: 10, // More reconnection attempts\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 10000, // Longer max delay\n        autoConnect: false,\n        query: {\n          clientType: 'student',\n          version: '1.0.0',\n          timestamp: Date.now().toString(),\n        },\n        extraHeaders: {\n          'User-Agent': 'BusTrackingStudent/1.0.0',\n        },\n      });\n\n      // Set up connection timeout\n      this.connectionTimeout = setTimeout(() => {\n        if (this.connectionState === 'connecting') {\n          console.error('❌ WebSocket connection timeout');\n          this.handleError(new Error('Connection timeout'));\n        }\n      }, 15000); // 15 seconds timeout\n\n      // Set up event listeners\n      this.socket.on('connect', this.handleConnect);\n      this.socket.on('disconnect', this.handleDisconnect);\n      this.socket.on('connect_error', this.handleError);\n      this.socket.on('error', this.handleError);\n      this.socket.on('reconnect', this.handleReconnect);\n      this.socket.on('reconnect_attempt', (attemptNumber) => {\n        console.log(`🔄 Reconnection attempt ${attemptNumber}`);\n      });\n      this.socket.on('reconnect_error', (error) => {\n        console.error('❌ Reconnection error:', error);\n      });\n      this.socket.on('reconnect_failed', () => {\n        console.error('❌ Reconnection failed after all attempts');\n      });\n\n      // Connect to server\n      this.socket.connect();\n    } catch (error) {\n      console.error('❌ WebSocket connection error:', error);\n      this.handleError(error);\n    }\n  }\n\n  private handleConnect(): void {\n    console.log('✅ WebSocket connected');\n    this._isConnected = true;\n    this.connectionState = 'connected';\n    this.reconnectAttempts = 0;\n    this.reconnectDelay = 1000;\n\n    // Clear connection timeout\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n\n    // Start heartbeat and connection monitoring\n    this.startHeartbeat();\n    this.startConnectionMonitoring();\n\n    // Emit student connection event\n    this.socket?.emit('student:connect', {\n      timestamp: new Date().toISOString(),\n      clientInfo: {\n        userAgent: navigator.userAgent,\n        platform: navigator.platform,\n        language: navigator.language,\n      },\n    });\n  }\n\n  private handleDisconnect(reason: string): void {\n    console.log('❌ WebSocket disconnected:', reason);\n    this._isConnected = false;\n    this.connectionState = 'disconnected';\n    this.stopHeartbeat();\n    this.stopConnectionMonitoring();\n\n    // Clear connection timeout\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n\n    // Don't reconnect if we're shutting down or if it was a manual disconnect\n    if (this.isShuttingDown || reason === 'io client disconnect') {\n      return;\n    }\n\n    // Attempt reconnection\n    this.handleReconnect();\n  }\n\n  private handleError(error: any): void {\n    console.error('❌ WebSocket error:', error);\n\n    // Clear connection timeout\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n\n    // Don't reconnect if we're shutting down\n    if (this.isShuttingDown) {\n      return;\n    }\n\n    // Attempt reconnection for network errors\n    if (\n      error.type === 'TransportError' ||\n      error.type === 'TransportOpenError'\n    ) {\n      this.handleReconnect();\n    }\n  }\n\n  private handleReconnect(): void {\n    if (this.isShuttingDown || this.connectionState === 'reconnecting') {\n      return;\n    }\n\n    if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n      console.error('❌ Max reconnection attempts reached');\n      this.connectionState = 'disconnected';\n      return;\n    }\n\n    this.connectionState = 'reconnecting';\n    this.reconnectAttempts++;\n\n    console.log(\n      `🔄 Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`\n    );\n\n    // Exponential backoff with jitter\n    const delay = Math.min(\n      this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1) +\n        Math.random() * 1000,\n      this.maxReconnectDelay\n    );\n\n    setTimeout(() => {\n      if (!this.isShuttingDown) {\n        this.connect();\n      }\n    }, delay);\n  }\n\n  private startHeartbeat(): void {\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n    }\n\n    this.heartbeatInterval = setInterval(() => {\n      if (this.socket?.connected) {\n        this.socket.emit('ping');\n        this.lastHeartbeat = Date.now();\n      }\n    }, 30000); // Send ping every 30 seconds\n  }\n\n  private stopHeartbeat(): void {\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n  }\n\n  private startConnectionMonitoring(): void {\n    if (this.connectionMonitorInterval) {\n      clearInterval(this.connectionMonitorInterval);\n    }\n\n    this.connectionMonitorInterval = setInterval(() => {\n      this.monitorConnection();\n    }, 10000); // Check connection every 10 seconds\n  }\n\n  private stopConnectionMonitoring(): void {\n    if (this.connectionMonitorInterval) {\n      clearInterval(this.connectionMonitorInterval);\n      this.connectionMonitorInterval = null;\n    }\n  }\n\n  private monitorConnection(): void {\n    if (!this.socket) {\n      console.log('🔍 Connection monitor: No socket available');\n      return;\n    }\n\n    const isConnected = this.socket.connected;\n    const timeSinceLastHeartbeat = Date.now() - this.lastHeartbeat;\n\n    console.log(\n      `🔍 Connection monitor: Connected=${isConnected}, Last heartbeat=${timeSinceLastHeartbeat}ms ago`\n    );\n\n    // If socket thinks it's connected but we haven't received a heartbeat in 60 seconds, consider it disconnected\n    if (\n      isConnected &&\n      timeSinceLastHeartbeat > 60000 &&\n      this.lastHeartbeat > 0\n    ) {\n      console.warn(\n        '⚠️ Connection monitor: No heartbeat received, forcing reconnection'\n      );\n      this.socket.disconnect();\n      this.handleReconnect();\n    }\n\n    // Update internal state\n    if (this._isConnected !== isConnected) {\n      console.log(\n        `🔄 Connection state changed: ${this._isConnected} -> ${isConnected}`\n      );\n      this._isConnected = isConnected;\n      this.connectionState = isConnected ? 'connected' : 'disconnected';\n    }\n  }\n\n  disconnect(): void {\n    console.log('🔌 Disconnecting WebSocket...');\n    this.isShuttingDown = true;\n    this.connectionState = 'disconnected';\n    this._isConnected = false;\n\n    // Stop heartbeat\n    this.stopHeartbeat();\n    this.stopConnectionMonitoring();\n\n    // Clear connection timeout\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n\n    // Disconnect socket\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n\n    // Reset state\n    this.reconnectAttempts = 0;\n    this.reconnectDelay = 1000;\n  }\n\n  // Method to reset the WebSocket service state\n  reset(): void {\n    console.log('🔄 Resetting WebSocket service...');\n    this.isShuttingDown = false;\n    this.connectionState = 'disconnected';\n    this._isConnected = false;\n    this.reconnectAttempts = 0;\n    this.reconnectDelay = 1000;\n\n    // Clear any existing socket\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n\n    // Stop any running timers\n    this.stopHeartbeat();\n    this.stopConnectionMonitoring();\n\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n  }\n\n  isConnected(): boolean {\n    return this._isConnected && this.socket?.connected === true;\n  }\n\n  getConnectionState():\n    | 'disconnected'\n    | 'connecting'\n    | 'connected'\n    | 'reconnecting' {\n    return this.connectionState;\n  }\n\n  getConnectionStatus(): boolean {\n    return this._isConnected;\n  }\n\n  authenticateAsDriver(\n    token: string,\n    callbacks?: {\n      onSuccess?: (data: any) => void;\n      onFailure?: (error: any) => void;\n      onError?: (error: any) => void;\n    }\n  ): void {\n    console.log('🔐 Driver: Starting authentication process...');\n    console.log('🔐 Socket connected:', this.isConnected());\n    console.log('🔐 Socket state:', this.getConnectionState());\n\n    if (this.socket && this.isConnected()) {\n      console.log('🔐 Driver: Sending authentication request...');\n\n      // Remove any existing listeners to prevent duplicates\n      this.socket.off('driver:authenticated');\n      this.socket.off('driver:authentication_failed');\n      this.socket.off('error');\n\n      // Set up authentication response listeners BEFORE sending the request\n      this.socket.once('driver:authenticated', (data) => {\n        console.log('✅ Driver: Authentication successful:', data);\n        if (callbacks?.onSuccess) {\n          callbacks.onSuccess(data);\n        }\n      });\n\n      this.socket.once('driver:authentication_failed', (error) => {\n        console.error('❌ Driver: Authentication failed:', error);\n        if (callbacks?.onFailure) {\n          callbacks.onFailure(error);\n        }\n      });\n\n      this.socket.once('error', (error) => {\n        console.error('❌ Driver: Socket error during authentication:', error);\n        if (callbacks?.onError) {\n          callbacks.onError(error);\n        }\n      });\n\n      // Send the authentication request\n      this.socket.emit('driver:authenticate', { token });\n      console.log(\n        '📤 Authentication request sent with token length:',\n        token.length\n      );\n    } else {\n      console.error('❌ Driver: Cannot authenticate - socket not connected');\n      console.error('❌ Socket object:', !!this.socket);\n      console.error('❌ Connection state:', this.getConnectionState());\n\n      if (callbacks?.onError) {\n        callbacks.onError(new Error('Socket not connected'));\n      }\n    }\n  }\n\n  sendLocationUpdate(locationData: {\n    driverId: string;\n    busId: string;\n    latitude: number;\n    longitude: number;\n    timestamp: string;\n    speed?: number;\n    heading?: number;\n  }): void {\n    if (this.socket && this.isConnected()) {\n      console.log('📍 Sending location update:', locationData);\n      this.socket.emit('driver:locationUpdate', locationData);\n    } else {\n      console.error('❌ Cannot send location update - socket not connected');\n    }\n  }\n\n  // Event listener methods\n  onBusLocationUpdate(callback: (location: BusLocation) => void): void {\n    this.busLocationListeners.push(callback);\n    this.socket?.on('bus:locationUpdate', callback);\n  }\n\n  onDriverConnected(callback: (data: any) => void): void {\n    this.driverConnectedListeners.push(callback);\n    this.socket?.on('driver:connected', callback);\n  }\n\n  onDriverDisconnected(callback: (data: any) => void): void {\n    this.driverDisconnectedListeners.push(callback);\n    this.socket?.on('driver:disconnected', callback);\n  }\n\n  onStudentConnected(callback: () => void): void {\n    this.studentConnectedListeners.push(callback);\n    this.socket?.on('student:connected', callback);\n  }\n\n  onBusArriving(callback: (data: any) => void): void {\n    this.busArrivingListeners.push(callback);\n    this.socket?.on('bus:arriving', callback);\n  }\n\n  off(event: string): void {\n    this.socket?.off(event);\n  }\n\n  // Enhanced method to get connection statistics\n  getConnectionStats(): {\n    isConnected: boolean;\n    connectionState: string;\n    reconnectAttempts: number;\n    maxReconnectAttempts: number;\n    lastHeartbeat: number;\n    uptime: number;\n  } {\n    return {\n      isConnected: this._isConnected,\n      connectionState: this.connectionState,\n      reconnectAttempts: this.reconnectAttempts,\n      maxReconnectAttempts: this.maxReconnectAttempts,\n      lastHeartbeat: this.lastHeartbeat,\n      uptime: this.lastHeartbeat > 0 ? Date.now() - this.lastHeartbeat : 0,\n    };\n  }\n\n  // Health check method\n  async healthCheck(): Promise<{ healthy: boolean; details: any }> {\n    const stats = this.getConnectionStats();\n\n    const healthy =\n      this.isConnected() &&\n      this.connectionState === 'connected' &&\n      stats.lastHeartbeat > 0 &&\n      Date.now() - stats.lastHeartbeat < 60000; // Last heartbeat within 1 minute\n\n    return {\n      healthy,\n      details: {\n        ...stats,\n        socketExists: !!this.socket,\n        socketConnected: this.socket?.connected,\n        isShuttingDown: this.isShuttingDown,\n      },\n    };\n  }\n}\n\nexport const websocketService = new WebSocketService();\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Socket } from 'socket.io-client';\nimport { supabase } from '../config/supabase';\nimport { websocketService } from '../services/websocket';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport './DriverInterface.css';\n\ninterface BusInfo {\n  bus_id: string;\n  bus_number: string;\n  route_id: string;\n  route_name: string;\n  driver_id: string;\n  driver_name: string;\n}\n\ninterface LocationData {\n  driverId: string;\n  latitude: number;\n  longitude: number;\n  timestamp: string;\n  speed?: number;\n  heading?: number;\n}\n\ninterface LoginForm {\n  email: string;\n  password: string;\n}\n\nconst DriverInterface: React.FC = () => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isTracking, setIsTracking] = useState(false);\n  const [busInfo, setBusInfo] = useState<BusInfo | null>(null);\n  const [currentLocation, setCurrentLocation] =\n    useState<GeolocationPosition | null>(null);\n  const [locationError, setLocationError] = useState<string | null>(null);\n  const [socketError, setSocketError] = useState<string | null>(null);\n  const [lastUpdateTime, setLastUpdateTime] = useState<string | null>(null);\n  const [updateCount, setUpdateCount] = useState(0);\n  const [loginForm, setLoginForm] = useState<LoginForm>({\n    email: '',\n    password: '',\n  });\n  const [loginError, setLoginError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const socketRef = useRef<Socket | null>(null);\n  const locationIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const watchIdRef = useRef<number | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n  const mapContainerRef = useRef<HTMLDivElement>(null);\n  const markerRef = useRef<maplibregl.Marker | null>(null);\n\n  // Initialize Supabase auth listener\n  useEffect(() => {\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session) {\n        await authenticateWithSocket(session.access_token);\n      } else if (event === 'SIGNED_OUT') {\n        setIsAuthenticated(false);\n        setBusInfo(null);\n        disconnectSocket();\n        cleanupMap();\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  // Proactively request location permission when component mounts\n  useEffect(() => {\n    if (isAuthenticated && navigator.geolocation) {\n      console.log('🔍 Checking location permission on component mount...');\n\n      // Check current permission state\n      if ('permissions' in navigator) {\n        navigator.permissions\n          .query({ name: 'geolocation' })\n          .then((permission) => {\n            console.log('📍 Initial permission state:', permission.state);\n\n            // If permission is granted, we can proceed\n            if (permission.state === 'granted') {\n              console.log('✅ Location permission already granted');\n            } else if (permission.state === 'prompt') {\n              console.log('❓ Location permission needs to be requested');\n            } else if (permission.state === 'denied') {\n              console.log('❌ Location permission denied');\n              setLocationError(\n                'Location permission is denied. Please enable it in your browser settings.'\n              );\n            }\n          });\n      }\n    }\n  }, [isAuthenticated]);\n\n  // Check location permission on component mount\n  useEffect(() => {\n    const checkLocationPermission = async () => {\n      if (!navigator.geolocation) {\n        setLocationError('Geolocation is not supported by this browser');\n        return;\n      }\n\n      try {\n        // Check if permission is already granted\n        if ('permissions' in navigator) {\n          const permission = await navigator.permissions.query({\n            name: 'geolocation',\n          });\n          if (permission.state === 'denied') {\n            setLocationError(\n              'Location permission denied. Please enable location access in your browser settings.'\n            );\n          }\n        }\n      } catch (error) {\n        console.log(\n          'Permission API not supported, will check when user clicks Start Tracking'\n        );\n      }\n    };\n\n    checkLocationPermission();\n  }, []);\n\n  const cleanupMap = () => {\n    if (markerRef.current) {\n      markerRef.current.remove();\n      markerRef.current = null;\n    }\n    if (mapRef.current) {\n      mapRef.current.remove();\n      mapRef.current = null;\n    }\n  };\n\n  const initializeMap = (latitude: number, longitude: number) => {\n    if (!mapContainerRef.current || mapRef.current) return;\n\n    mapRef.current = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: {\n        version: 8,\n        sources: {\n          osm: {\n            type: 'raster',\n            tiles: [\n              'https://tile.openstreetmap.org/{z}/{x}/{y}.png',\n              'https://a.tile.openstreetmap.org/{z}/{x}/{y}.png',\n              'https://b.tile.openstreetmap.org/{z}/{x}/{y}.png',\n              'https://c.tile.openstreetmap.org/{z}/{x}/{y}.png',\n            ],\n            tileSize: 256,\n            attribution: '© OpenStreetMap contributors',\n            maxzoom: 19,\n          },\n        },\n        layers: [\n          {\n            id: 'osm-tiles',\n            type: 'raster',\n            source: 'osm',\n            minzoom: 0,\n            maxzoom: 19,\n          },\n        ],\n      },\n      center: [longitude, latitude],\n      zoom: 15,\n      bearing: 0,\n      pitch: 0,\n      attributionControl: true,\n      maxZoom: 19,\n      minZoom: 1,\n      preserveDrawingBuffer: false,\n      antialias: true,\n      dragRotate: false,\n    });\n\n    // Add navigation controls\n    mapRef.current.addControl(new maplibregl.NavigationControl(), 'top-right');\n\n    // Handle map load event\n    mapRef.current.once('load', () => {\n      console.log('✅ Driver map loaded successfully');\n\n      // Disable rotation features after map loads\n      if (mapRef.current) {\n        mapRef.current.dragRotate.disable();\n        mapRef.current.touchZoomRotate.disableRotation();\n        console.log('🔄 Rotation features disabled');\n      }\n    });\n\n    // Handle map errors\n    mapRef.current.on('error', (e: unknown) => {\n      console.error('❌ Driver map error:', e);\n    });\n\n    // Create marker for driver location with enhanced styling\n    const markerElement = document.createElement('div');\n    markerElement.className = 'driver-marker';\n    markerElement.innerHTML = `\n      <div class=\"driver-marker-content\">\n        <div style=\"font-size: 16px;\">🚌</div>\n      </div>\n    `;\n\n    markerRef.current = new maplibregl.Marker({\n      element: markerElement,\n      anchor: 'center',\n    })\n      .setLngLat([longitude, latitude])\n      .addTo(mapRef.current);\n\n    // Add popup to marker with enhanced styling\n    const popup = new maplibregl.Popup({\n      offset: 25,\n      className: 'driver-popup',\n    }).setHTML(`\n        <div class=\"driver-popup\">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${busInfo?.bus_number || 'Unknown'}</p>\n          <p><strong>Route:</strong> ${busInfo?.route_name || 'Unknown'}</p>\n          <p><strong>Driver:</strong> ${busInfo?.driver_name || 'Unknown'}</p>\n          <p><strong>Status:</strong> <span style=\"color: #059669;\">Active</span></p>\n        </div>\n      `);\n\n    markerRef.current.setPopup(popup);\n  };\n\n  const updateMapLocation = (latitude: number, longitude: number) => {\n    if (!mapRef.current || !markerRef.current) return;\n\n    const newLocation = [longitude, latitude] as [number, number];\n\n    // Update marker position\n    markerRef.current.setLngLat(newLocation);\n\n    // Smoothly fly to new location\n    mapRef.current.flyTo({\n      center: newLocation,\n      duration: 1000,\n    });\n\n    // Update popup content with enhanced styling\n    const popup = new maplibregl.Popup({\n      offset: 25,\n      className: 'driver-popup',\n    }).setHTML(`\n        <div class=\"driver-popup\">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${busInfo?.bus_number || 'Unknown'}</p>\n          <p><strong>Route:</strong> ${busInfo?.route_name || 'Unknown'}</p>\n          <p><strong>Driver:</strong> ${busInfo?.driver_name || 'Unknown'}</p>\n          <p><strong>Status:</strong> <span style=\"color: #059669;\">Active</span></p>\n          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>\n          <p><strong>Coordinates:</strong> ${latitude.toFixed(6)}, ${longitude.toFixed(6)}</p>\n        </div>\n      `);\n\n    markerRef.current.setPopup(popup);\n  };\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setLoginError(null);\n\n    try {\n      // Driver login attempt\n\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: loginForm.email,\n        password: loginForm.password,\n      });\n\n      if (error) {\n        console.error('❌ Login error:', error);\n        setLoginError(error.message);\n        return;\n      }\n\n      if (data.user && data.session) {\n        console.log('✅ Login successful:', data.user.email);\n\n        // Authenticate with WebSocket immediately\n        await authenticateWithSocket(data.session.access_token);\n\n        // Clear form\n        setLoginForm({ email: '', password: '' });\n      } else {\n        setLoginError('Login failed - no user data received');\n      }\n    } catch (error) {\n      console.error('❌ Login error:', error);\n      setLoginError('An unexpected error occurred during login');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const authenticateWithSocket = async (token: string) => {\n    try {\n      console.log('🔌 Driver: Connecting to WebSocket...');\n\n      // Use the WebSocket service\n      await websocketService.connect();\n\n      // Handle socket events\n      websocketService.socket?.on('connect', () => {\n        console.log('🔌 Driver: Connected to WebSocket server');\n        setSocketError(null);\n      });\n\n      websocketService.socket?.on('disconnect', () => {\n        console.log('🔌 Driver: Disconnected from WebSocket server');\n        setSocketError('Disconnected from server');\n      });\n\n      websocketService.socket?.on('error', (error) => {\n        console.error('❌ Driver: Socket error:', error);\n        setSocketError(error.message || 'Socket error occurred');\n      });\n\n      websocketService.socket?.on(\n        'driver:authenticated',\n        (data: { driverId: string; busId: string; busInfo: BusInfo }) => {\n          console.log('✅ Driver: Authentication successful:', data);\n          setIsAuthenticated(true);\n          setBusInfo(data.busInfo);\n          setSocketError(null);\n        }\n      );\n\n      websocketService.socket?.on('driver:locationConfirmed', (data) => {\n        console.log('📍 Driver: Location confirmed:', data);\n        setLastUpdateTime(new Date().toLocaleTimeString());\n        setUpdateCount((prev) => prev + 1);\n      });\n\n      // Store the socket reference\n      socketRef.current = websocketService.socket;\n\n      // Authenticate with the server\n      websocketService.authenticateAsDriver(token);\n    } catch (error) {\n      console.error('❌ Driver: Authentication error:', error);\n      setSocketError('Failed to authenticate with server');\n    }\n  };\n\n  const disconnectSocket = () => {\n    websocketService.disconnect();\n    socketRef.current = null;\n  };\n\n  const startLocationTracking = async () => {\n    if (!navigator.geolocation) {\n      setLocationError('Geolocation is not supported by this browser');\n      return;\n    }\n\n    // Enhanced mobile detection\n    const isMobile =\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      );\n    const isFirefox = navigator.userAgent.includes('Firefox');\n    const isChrome = navigator.userAgent.includes('Chrome');\n    const isSafari =\n      navigator.userAgent.includes('Safari') &&\n      !navigator.userAgent.includes('Chrome');\n\n    console.log(\n      `🌐 Device detected: ${isMobile ? 'Mobile' : 'Desktop'} - ${isFirefox ? 'Firefox' : isChrome ? 'Chrome' : isSafari ? 'Safari' : 'Other'}`\n    );\n\n    // Mobile-specific location options\n    const options = {\n      enableHighAccuracy: true,\n      timeout: isMobile ? 30000 : 60000, // Shorter timeout for mobile\n      maximumAge: 0, // Force fresh location - no caching\n    };\n\n    console.log('📍 Starting location tracking with options:', options);\n\n    // Force location permission request\n    try {\n      // Clear any cached permissions first\n      if ('permissions' in navigator) {\n        const permission = await navigator.permissions.query({\n          name: 'geolocation',\n        });\n        console.log(`🔐 Current permission state: ${permission.state}`);\n\n        if (permission.state === 'denied') {\n          const mobileError = isMobile\n            ? 'Location permission denied on mobile. Please:\\n1. Go to your phone Settings\\n2. Find this browser app\\n3. Enable Location permission\\n4. Refresh this page'\n            : 'Location permission denied. Please reset location permissions and try again.';\n          setLocationError(mobileError);\n          return;\n        }\n      }\n    } catch (error) {\n      console.log(\n        'Permission API not supported, proceeding with geolocation request'\n      );\n    }\n\n    console.log('📍 Requesting location permission...');\n    setLocationError(\n      isMobile\n        ? 'Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.'\n        : 'Requesting location permission... Please allow when prompted.'\n    );\n\n    // Get initial position with enhanced error handling\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        console.log('✅ Initial position obtained:', {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          timestamp: new Date(position.timestamp).toLocaleString(),\n        });\n        setCurrentLocation(position);\n        setLocationError(null);\n\n        // Initialize map with current location\n        initializeMap(position.coords.latitude, position.coords.longitude);\n\n        sendLocationUpdate(position);\n      },\n      (error) => {\n        console.error('❌ Geolocation error:', error);\n        let errorMessage = 'Location error: ';\n\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            if (isMobile) {\n              errorMessage =\n                'Mobile location permission denied. Please:\\n\\n' +\n                '1. Go to your phone Settings\\n' +\n                '2. Find this browser app (Chrome/Firefox/Safari)\\n' +\n                '3. Tap \"Permissions\" or \"Privacy\"\\n' +\n                '4. Enable \"Location\" permission\\n' +\n                '5. Return to this page and refresh\\n\\n' +\n                'Alternative: Try opening this page in a different browser app.';\n            } else if (isFirefox) {\n              errorMessage +=\n                'Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to \"Allow\" 3) Refresh the page 4) Try again';\n            } else {\n              errorMessage +=\n                'Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.';\n            }\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = isMobile\n              ? 'Location unavailable on mobile. Please:\\n1. Go outdoors or near a window\\n2. Wait 10-15 seconds\\n3. Make sure GPS is enabled in phone settings\\n4. Try again'\n              : 'Location information unavailable.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = isMobile\n              ? 'Location request timed out on mobile. Please:\\n1. Go outdoors for better GPS signal\\n2. Wait 30 seconds and try again\\n3. Check if GPS is enabled in phone settings'\n              : 'Location request timed out. Please try again.';\n            break;\n          default:\n            errorMessage += error.message;\n        }\n\n        setLocationError(errorMessage);\n      },\n      options\n    );\n\n    // Start watching position with same options\n    watchIdRef.current = navigator.geolocation.watchPosition(\n      (position) => {\n        console.log('📍 Location update received:', {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          timestamp: new Date(position.timestamp).toLocaleString(),\n        });\n        setCurrentLocation(position);\n        setLocationError(null);\n\n        // Update map with new location\n        updateMapLocation(position.coords.latitude, position.coords.longitude);\n\n        sendLocationUpdate(position);\n      },\n      (error) => {\n        console.error('❌ Geolocation watch error:', error);\n        let errorMessage = 'Location tracking error: ';\n\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = isMobile\n              ? 'Location permission lost on mobile. Please refresh the page and allow location access again.'\n              : 'Permission denied. Please enable location access in your browser settings.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = isMobile\n              ? 'GPS signal lost on mobile. Please go outdoors or near a window.'\n              : 'Location information unavailable.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = isMobile\n              ? 'GPS timeout on mobile. Please check your location and try again.'\n              : 'Location request timed out. Please try again.';\n            break;\n          default:\n            errorMessage += error.message;\n        }\n\n        setLocationError(errorMessage);\n      },\n      options\n    );\n\n    setIsTracking(true);\n    console.log('📍 Location tracking started');\n  };\n\n  const stopLocationTracking = () => {\n    if (watchIdRef.current) {\n      navigator.geolocation.clearWatch(watchIdRef.current);\n      watchIdRef.current = null;\n    }\n\n    if (locationIntervalRef.current) {\n      clearInterval(locationIntervalRef.current);\n      locationIntervalRef.current = null;\n    }\n\n    setIsTracking(false);\n    console.log('📍 Location tracking stopped');\n  };\n\n  const sendLocationUpdate = (position: GeolocationPosition) => {\n    if (!socketRef.current || !busInfo) return;\n\n    const locationData: LocationData = {\n      driverId: busInfo.driver_id,\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      timestamp: new Date().toISOString(),\n      speed: position.coords.speed || undefined,\n      heading: position.coords.heading || undefined,\n    };\n\n    socketRef.current.emit('driver:locationUpdate', locationData);\n  };\n\n  const handleSignOut = async () => {\n    try {\n      console.log('🔐 Driver: Starting sign out...');\n\n      // Stop tracking if active\n      if (isTracking) {\n        stopLocationTracking();\n      }\n\n      // Disconnect socket\n      disconnectSocket();\n\n      // Sign out from Supabase\n      const { error } = await supabase.auth.signOut();\n\n      if (error) {\n        console.error('❌ Sign out error:', error);\n      } else {\n        console.log('✅ Driver: Sign out successful');\n\n        // Clear local state\n        setIsAuthenticated(false);\n        setBusInfo(null);\n        setCurrentLocation(null);\n        setLocationError(null);\n        setSocketError(null);\n        setLastUpdateTime(null);\n        setUpdateCount(0);\n\n        // Clean up map\n        cleanupMap();\n      }\n    } catch (error) {\n      console.error('❌ Sign out error:', error);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"text-center mb-6\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                🚌 Driver Login\n              </h1>\n              <p className=\"text-gray-600 mt-2\">\n                Sign in to start tracking your bus\n              </p>\n            </div>\n\n            {loginError && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\">\n                <p className=\"text-red-700 text-sm\">{loginError}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              <div>\n                <label\n                  htmlFor=\"email\"\n                  className=\"block text-sm font-medium text-gray-700 mb-1\"\n                >\n                  Email Address\n                </label>\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  required\n                  value={loginForm.email}\n                  onChange={(e) =>\n                    setLoginForm((prev) => ({ ...prev, email: e.target.value }))\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your email\"\n                />\n              </div>\n\n              <div>\n                <label\n                  htmlFor=\"password\"\n                  className=\"block text-sm font-medium text-gray-700 mb-1\"\n                >\n                  Password\n                </label>\n                <input\n                  id=\"password\"\n                  type=\"password\"\n                  required\n                  value={loginForm.password}\n                  onChange={(e) =>\n                    setLoginForm((prev) => ({\n                      ...prev,\n                      password: e.target.value,\n                    }))\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed\"\n              >\n                {isLoading ? 'Signing In...' : 'Sign In'}\n              </button>\n            </form>\n\n            <div className=\"mt-4 text-center\">\n              <p className=\"text-sm text-gray-600\">\n                Please contact your administrator for login credentials\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                🚌 Driver Dashboard\n              </h1>\n              <p className=\"text-gray-600 mt-1\">\n                Welcome, {busInfo?.driver_name} | Bus: {busInfo?.bus_number} |\n                Route: {busInfo?.route_name}\n              </p>\n            </div>\n            <button\n              onClick={handleSignOut}\n              className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\n            >\n              Sign Out\n            </button>\n          </div>\n        </div>\n\n        {/* Status Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n          {/* Connection Status */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center\">\n              <div\n                className={`w-3 h-3 rounded-full mr-3 ${socketError ? 'bg-red-500' : 'bg-green-500'}`}\n              ></div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">Connection</h3>\n                <p className=\"text-sm text-gray-600\">\n                  {socketError ? 'Disconnected' : 'Connected'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Tracking Status */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center\">\n              <div\n                className={`w-3 h-3 rounded-full mr-3 ${isTracking ? 'bg-green-500' : 'bg-gray-400'}`}\n              ></div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">GPS Tracking</h3>\n                <p className=\"text-sm text-gray-600\">\n                  {isTracking ? 'Active' : 'Inactive'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Update Count */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div>\n              <h3 className=\"font-semibold text-gray-900\">Updates Sent</h3>\n              <p className=\"text-2xl font-bold text-blue-600\">{updateCount}</p>\n              {lastUpdateTime && (\n                <p className=\"text-sm text-gray-600\">Last: {lastUpdateTime}</p>\n              )}\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"space-y-3\">\n              {!isTracking ? (\n                <>\n                  <button\n                    onClick={startLocationTracking}\n                    disabled={!!socketError}\n                    className=\"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm\"\n                  >\n                    🚀 Start Tracking\n                  </button>\n\n                  <button\n                    onClick={() => {\n                      // Force location permission request\n                      if (navigator.geolocation) {\n                        navigator.geolocation.getCurrentPosition(\n                          (position) => {\n                            console.log(\n                              '✅ Manual location permission granted:',\n                              position\n                            );\n                            setLocationError(null);\n                            startLocationTracking();\n                          },\n                          (error) => {\n                            console.error(\n                              '❌ Manual location permission denied:',\n                              error\n                            );\n                            setLocationError(\n                              'Location permission denied. Please check your browser settings.'\n                            );\n                          },\n                          {\n                            enableHighAccuracy: true,\n                            timeout: 30000,\n                            maximumAge: 0,\n                          }\n                        );\n                      }\n                    }}\n                    className=\"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n                  >\n                    🔐 Request Location Permission\n                  </button>\n                  {locationError &&\n                    locationError.includes('Permission denied') && (\n                      <button\n                        onClick={() => {\n                          setLocationError(null);\n                          startLocationTracking();\n                        }}\n                        className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2\"\n                      >\n                        🔄 Retry Location Permission\n                      </button>\n                    )}\n                </>\n              ) : (\n                <button\n                  onClick={stopLocationTracking}\n                  className=\"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm\"\n                >\n                  ⏹️ Stop Tracking\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Map */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n              🗺️ Live Location Map\n            </h2>\n\n            <div\n              ref={mapContainerRef}\n              className=\"w-full h-96 rounded-lg border border-gray-200\"\n              style={{ minHeight: '400px' }}\n            />\n\n            {locationError && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mt-4\">\n                <p className=\"text-red-700 text-sm mb-3\">{locationError}</p>\n\n                {/* Enhanced mobile troubleshooting */}\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\n                  <h4 className=\"font-semibold text-yellow-800 mb-2\">\n                    📱 Mobile Location Troubleshooting:\n                  </h4>\n\n                  {/* Mobile-specific instructions */}\n                  <div className=\"bg-blue-50 border border-blue-200 rounded p-2 mb-2\">\n                    <h5 className=\"font-semibold text-blue-800 text-xs mb-1\">\n                      📱 For Mobile Devices:\n                    </h5>\n                    <ul className=\"text-xs text-blue-700 space-y-1\">\n                      <li>\n                        • <strong>Android Chrome:</strong> Settings → Apps →\n                        Chrome → Permissions → Location → Allow\n                      </li>\n                      <li>\n                        • <strong>Android Firefox:</strong> Settings → Apps →\n                        Firefox → Permissions → Location → Allow\n                      </li>\n                      <li>\n                        • <strong>iPhone Safari:</strong> Settings → Safari →\n                        Location → Allow\n                      </li>\n                      <li>\n                        • <strong>iPhone Chrome:</strong> Settings → Chrome →\n                        Location → Allow\n                      </li>\n                      <li>\n                        • <strong>Make sure:</strong> GPS/Location Services are\n                        ON in phone settings\n                      </li>\n                      <li>\n                        • <strong>Try:</strong> Going outdoors or near a window\n                        for better GPS signal\n                      </li>\n                    </ul>\n                  </div>\n\n                  {/* Desktop instructions */}\n                  <div className=\"bg-green-50 border border-green-200 rounded p-2\">\n                    <h5 className=\"font-semibold text-green-800 text-xs mb-1\">\n                      💻 For Desktop Browsers:\n                    </h5>\n                    <ul className=\"text-xs text-green-700 space-y-1\">\n                      <li>\n                        • <strong>Chrome:</strong> Click lock icon → Location →\n                        Allow → Refresh\n                      </li>\n                      <li>\n                        • <strong>Firefox:</strong> Click lock icon → Location →\n                        Allow → Refresh\n                      </li>\n                      <li>\n                        • <strong>Safari:</strong> Safari → Preferences →\n                        Websites → Location → Allow\n                      </li>\n                    </ul>\n                  </div>\n                  <button\n                    onClick={() => window.location.reload()}\n                    className=\"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600\"\n                  >\n                    🔄 Refresh Page & Retry\n                  </button>\n\n                  <button\n                    onClick={() => {\n                      // Test location without starting tracking\n                      const isMobile =\n                        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n                          navigator.userAgent\n                        );\n\n                      if (navigator.geolocation) {\n                        navigator.geolocation.getCurrentPosition(\n                          (position) => {\n                            const successMsg =\n                              `✅ Location Test Successful!\\n\\n` +\n                              `Latitude: ${position.coords.latitude}\\n` +\n                              `Longitude: ${position.coords.longitude}\\n` +\n                              `Accuracy: ${position.coords.accuracy}m\\n` +\n                              `Device: ${isMobile ? 'Mobile' : 'Desktop'}\\n\\n` +\n                              `Location is working! You can now start tracking.`;\n                            alert(successMsg);\n                            setLocationError(null);\n                          },\n                          (error) => {\n                            const errorMsg =\n                              `❌ Location Test Failed\\n\\n` +\n                              `Error Code: ${error.code}\\n` +\n                              `Error Message: ${error.message}\\n` +\n                              `Device: ${isMobile ? 'Mobile' : 'Desktop'}\\n\\n` +\n                              `Please check your location permissions.`;\n                            alert(errorMsg);\n                          },\n                          {\n                            enableHighAccuracy: true,\n                            timeout: 10000,\n                            maximumAge: 0,\n                          }\n                        );\n                      } else {\n                        alert('Geolocation is not supported by this browser.');\n                      }\n                    }}\n                    className=\"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2\"\n                  >\n                    🧪 Test Location\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Location Info */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n              📍 Current Location Details\n            </h2>\n\n            {currentLocation ? (\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Latitude:</span>\n                  <span className=\"font-mono\">\n                    {currentLocation.coords.latitude.toFixed(6)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Longitude:</span>\n                  <span className=\"font-mono\">\n                    {currentLocation.coords.longitude.toFixed(6)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Accuracy:</span>\n                  <span>{currentLocation.coords.accuracy?.toFixed(1)}m</span>\n                </div>\n                {currentLocation.coords.speed && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Speed:</span>\n                    <span>\n                      {(currentLocation.coords.speed * 3.6).toFixed(1)} km/h\n                    </span>\n                  </div>\n                )}\n                {currentLocation.coords.heading && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Heading:</span>\n                    <span>{currentLocation.coords.heading.toFixed(1)}°</span>\n                  </div>\n                )}\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Timestamp:</span>\n                  <span className=\"text-sm\">\n                    {new Date(currentLocation.timestamp).toLocaleTimeString()}\n                  </span>\n                </div>\n              </div>\n            ) : (\n              <p className=\"text-gray-500\">No location data available</p>\n            )}\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">\n                ℹ️ Instructions\n              </h3>\n              <ul className=\"text-sm text-blue-800 space-y-1\">\n                <li>\n                  • Click \"Start Tracking\" to begin sending location updates\n                </li>\n                <li>• Your location will be sent every few seconds</li>\n                <li>\n                  • Students and admin can see your bus location in real-time\n                </li>\n                <li>• Make sure to allow location access when prompted</li>\n                <li>\n                  • The map shows your current position with a blue marker\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DriverInterface;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport type TransitionType =\n  | 'homepage-to-login'\n  | 'homepage-to-map'\n  | 'login-to-dashboard'\n  | 'default';\n\ninterface TransitionContextType {\n  currentTransition: TransitionType;\n  setTransition: (transition: TransitionType) => void;\n}\n\nconst TransitionContext = createContext<TransitionContextType | undefined>(\n  undefined\n);\n\nexport const useTransition = () => {\n  const context = useContext(TransitionContext);\n  if (!context) {\n    throw new Error('useTransition must be used within a TransitionProvider');\n  }\n  return context;\n};\n\ninterface TransitionProviderProps {\n  children: React.ReactNode;\n}\n\nexport const TransitionProvider: React.FC<TransitionProviderProps> = ({\n  children,\n}) => {\n  const [currentTransition, setCurrentTransition] =\n    useState<TransitionType>('default');\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    // Determine transition based on route changes\n    if (\n      pathname.includes('login') ||\n      pathname.includes('admin-login') ||\n      pathname.includes('driver-login')\n    ) {\n      setCurrentTransition('homepage-to-login');\n    } else if (\n      pathname.includes('student') || \n      pathname.includes('student-map')\n    ) {\n      setCurrentTransition('homepage-to-map');\n    } else if (\n      pathname.includes('dashboard') ||\n      pathname.includes('admin') ||\n      pathname.includes('driver-dashboard')\n    ) {\n      setCurrentTransition('login-to-dashboard');\n    } else {\n      setCurrentTransition('default');\n    }\n  }, [pathname]);\n\n  const setTransition = (transition: TransitionType) => {\n    setCurrentTransition(transition);\n  };\n\n  return (\n    <TransitionContext.Provider value={{ currentTransition, setTransition }}>\n      {children}\n    </TransitionContext.Provider>\n  );\n};\n","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface HomepageToLoginTransitionProps {\n  children: React.ReactNode;\n  isVisible: boolean;\n}\n\nexport const HomepageToLoginTransition: React.FC<\n  HomepageToLoginTransitionProps\n> = ({ children, isVisible }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 50 }}\n      animate={{\n        opacity: isVisible ? 1 : 0,\n        y: isVisible ? 0 : 50,\n      }}\n      transition={{\n        duration: 0.8,\n        ease: 'easeInOut',\n      }}\n      className=\"w-full h-full\"\n    >\n      {children}\n    </motion.div>\n  );\n};\n","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface HomepageToMapTransitionProps {\n  children: React.ReactNode;\n  isVisible: boolean;\n}\n\nexport const HomepageToMapTransition: React.FC<\n  HomepageToMapTransitionProps\n> = ({ children, isVisible }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{\n        opacity: isVisible ? 1 : 0,\n        scale: isVisible ? 1 : 0.8,\n      }}\n      transition={{\n        duration: 1.2,\n        ease: 'easeInOut',\n      }}\n      className=\"w-full h-full\"\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 100 }}\n        animate={{\n          opacity: isVisible ? 1 : 0,\n          y: isVisible ? 0 : 100,\n        }}\n        transition={{\n          duration: 0.8,\n          delay: 0.3,\n          ease: 'easeOut',\n        }}\n        className=\"w-full h-full\"\n      >\n        {children}\n      </motion.div>\n    </motion.div>\n  );\n};\n","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface LoginToDashboardTransitionProps {\n  children: React.ReactNode;\n  isVisible: boolean;\n}\n\nexport const LoginToDashboardTransition: React.FC<\n  LoginToDashboardTransitionProps\n> = ({ children, isVisible }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{\n        opacity: isVisible ? 1 : 0,\n        scale: isVisible ? 1 : 0.9,\n      }}\n      transition={{\n        duration: 1.0,\n        ease: 'easeInOut',\n      }}\n      className=\"w-full h-full\"\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 50 }}\n        animate={{\n          opacity: isVisible ? 1 : 0,\n          y: isVisible ? 0 : 50,\n        }}\n        transition={{\n          duration: 0.8,\n          delay: 0.2,\n          ease: 'easeOut',\n        }}\n        className=\"w-full h-full\"\n      >\n        {children}\n      </motion.div>\n    </motion.div>\n  );\n};\n","import React from 'react';\nimport { useTransition } from './TransitionContext';\nimport { HomepageToLoginTransition } from './HomepageToLoginTransition';\nimport { HomepageToMapTransition } from './HomepageToMapTransition';\nimport { LoginToDashboardTransition } from './LoginToDashboardTransition';\n\ninterface GlobalTransitionWrapperProps {\n  children: React.ReactNode;\n}\n\nexport const GlobalTransitionWrapper: React.FC<\n  GlobalTransitionWrapperProps\n> = ({ children }) => {\n  const { currentTransition } = useTransition();\n\n  // Determine which transition to show based on current transition type\n  const renderTransition = () => {\n    switch (currentTransition) {\n      case 'homepage-to-login':\n        return (\n          <HomepageToLoginTransition isVisible={true}>\n            {children}\n          </HomepageToLoginTransition>\n        );\n      case 'homepage-to-map':\n        return (\n          <HomepageToMapTransition isVisible={true}>\n            {children}\n          </HomepageToMapTransition>\n        );\n      case 'login-to-dashboard':\n        return (\n          <LoginToDashboardTransition isVisible={true}>\n            {children}\n          </LoginToDashboardTransition>\n        );\n      default:\n        return children;\n    }\n  };\n\n  return <>{renderTransition()}</>;\n};\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { supabase } from '../config/supabase';\nimport { websocketService } from '../services/websocket';\nimport { authService } from '../services/authService';\nimport { useNavigate } from 'react-router-dom';\nimport { useTransition } from './transitions';\n\ninterface BusInfo {\n  bus_id: string;\n  bus_number: string;\n  route_id: string;\n  route_name: string;\n  driver_id: string;\n  driver_name: string;\n}\n\ninterface LoginForm {\n  email: string;\n  password: string;\n}\n\nconst DriverLogin: React.FC = () => {\n  const navigate = useNavigate();\n  const { setTransition } = useTransition();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [busInfo, setBusInfo] = useState<BusInfo | null>(null);\n  const [loginForm, setLoginForm] = useState<LoginForm>({\n    email: '',\n    password: '',\n  });\n  const [loginError, setLoginError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  // Check if device is mobile\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Initialize Supabase auth listener (same as original)\n  useEffect(() => {\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session) {\n        await authenticateWithSocket(session.access_token);\n      } else if (event === 'SIGNED_OUT') {\n        setIsAuthenticated(false);\n        setBusInfo(null);\n        disconnectSocket();\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setLoginError(null);\n\n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: loginForm.email,\n        password: loginForm.password,\n      });\n\n      if (error) {\n        console.error('❌ Login error:', error);\n        setLoginError(error.message);\n        return;\n      }\n\n      if (data.user && data.session) {\n        console.log('✅ Login successful:', data.user.email);\n        await authenticateWithSocket(data.session.access_token);\n        setLoginForm({ email: '', password: '' });\n      } else {\n        setLoginError('Login failed - no user data received');\n      }\n    } catch (error) {\n      console.error('❌ Login error:', error);\n      setLoginError('An unexpected error occurred during login');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const authenticateWithSocket = async (token: string) => {\n    try {\n      console.log('🔌 Driver: Connecting to WebSocket...');\n      await websocketService.connect();\n\n      // Wait for connection to be established with improved timeout handling\n      let connectionAttempts = 0;\n      const maxAttempts = 10; // Increased attempts for better reliability\n\n      while (\n        !websocketService.isConnected() &&\n        connectionAttempts < maxAttempts\n      ) {\n        console.log(\n          `⏳ Waiting for WebSocket connection... (attempt ${connectionAttempts + 1}/${maxAttempts})`\n        );\n        await new Promise((resolve) => setTimeout(resolve, 1500)); // Increased wait time\n        connectionAttempts++;\n      }\n\n      if (!websocketService.isConnected()) {\n        console.error('❌ WebSocket connection failed after all attempts');\n        throw new Error(\n          'Failed to establish WebSocket connection. Please check your internet connection and try again.'\n        );\n      }\n\n      console.log('✅ WebSocket connection established');\n\n      websocketService.socket?.on('connect', () => {\n        console.log('🔌 Driver: Connected to WebSocket server');\n      });\n\n      websocketService.socket?.on('disconnect', () => {\n        console.log('🔌 Driver: Disconnected from WebSocket server');\n      });\n\n      websocketService.socket?.on('error', (error) => {\n        console.error('❌ Driver: Socket error:', error);\n        setLoginError(error.message || 'Socket error occurred');\n      });\n\n      // Wait a moment for connection to stabilize - REDUCED WAIT TIME\n      await new Promise((resolve) => setTimeout(resolve, 500)); // Reduced from 1s to 500ms\n\n      // Double-check connection status\n      if (!websocketService.isConnected()) {\n        throw new Error('WebSocket connection failed to establish');\n      }\n\n      // Set up authentication response handler\n      const handleAuthenticationSuccess = async (data: {\n        driverId: string;\n        busId: string;\n        busInfo: BusInfo;\n      }) => {\n        console.log('✅ Driver: Authentication successful:', data);\n\n        try {\n          // Store driver-bus assignment in database instead of localStorage\n          const assignment = {\n            driver_id: data.driverId,\n            bus_id: data.busId,\n            bus_number: data.busInfo.bus_number,\n            route_id: data.busInfo.route_id,\n            route_name: data.busInfo.route_name,\n            driver_name: data.busInfo.driver_name,\n          };\n\n          console.log('💾 Storing driver assignment:', assignment);\n          const stored = await authService.storeDriverBusAssignment(assignment);\n          console.log('💾 Assignment stored result:', stored);\n\n          if (!stored) {\n            console.error('❌ Failed to store driver assignment in database');\n            setLoginError('Failed to store authentication data');\n            return;\n          }\n\n          console.log('✅ Setting authentication state...');\n          setIsAuthenticated(true);\n          setBusInfo(data.busInfo);\n\n          // Set transition type for login to dashboard\n          setTransition('login-to-dashboard');\n\n          // Navigate to driver dashboard after successful authentication\n          console.log('🚀 Driver: Navigating to dashboard immediately...');\n          navigate('/driver-dashboard');\n\n          console.log('✅ Navigation initiated successfully');\n        } catch (error) {\n          console.error('❌ Error storing authentication data:', error);\n          setLoginError('Failed to complete authentication');\n        }\n      };\n\n      const handleAuthenticationFailed = (error: any) => {\n        console.error('❌ Driver: Authentication failed:', error);\n        setLoginError(\n          'Authentication failed: ' + (error.message || 'Unknown error')\n        );\n      };\n\n      // Add timeout for authentication (increased to 60 seconds for better reliability)\n      const authTimeout = setTimeout(() => {\n        console.error('❌ Driver: Authentication timeout');\n        setLoginError('Authentication timeout - please try again');\n        // Clean up listeners\n        websocketService.socket?.off(\n          'driver:authenticated',\n          handleAuthenticationSuccess\n        );\n        websocketService.socket?.off(\n          'driver:authentication_failed',\n          handleAuthenticationFailed\n        );\n      }, 60000);\n\n      console.log('🔐 Driver: Sending authentication request...');\n\n      // Ensure we have a valid token\n      if (!token) {\n        throw new Error('No authentication token available');\n      }\n\n      // Send authentication request with callbacks\n      websocketService.authenticateAsDriver(token, {\n        onSuccess: (data) => {\n          clearTimeout(authTimeout);\n          handleAuthenticationSuccess(data);\n        },\n        onFailure: (error) => {\n          clearTimeout(authTimeout);\n          handleAuthenticationFailed(error);\n        },\n        onError: (error) => {\n          clearTimeout(authTimeout);\n          console.error('❌ Driver: Authentication error:', error);\n          setLoginError(\n            'Authentication error: ' + (error.message || 'Unknown error')\n          );\n        },\n      });\n\n      console.log('📤 Authentication request sent, waiting for response...');\n    } catch (error) {\n      console.error('❌ Driver: Authentication error:', error);\n      setLoginError('Failed to authenticate with server');\n    }\n  };\n\n  const disconnectSocket = () => {\n    websocketService.disconnect();\n  };\n\n  // If already authenticated, redirect to dashboard\n  if (isAuthenticated && busInfo) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"text-center\"\n        >\n          <div className=\"loading-spinner mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-white mb-2\">\n            Authentication Successful!\n          </h2>\n          <p className=\"text-white/70\">Redirecting to dashboard...</p>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900\">\n      {/* Main Content */}\n      <div className=\"relative z-10 flex items-center justify-center min-h-screen p-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 50, scale: 0.95 }}\n          animate={{ opacity: 1, y: 0, scale: 1 }}\n          transition={{ duration: 0.8, ease: [0.4, 0.0, 0.2, 1] }}\n          className=\"w-full max-w-md\"\n        >\n          {/* Glassy Login Panel */}\n          <motion.div\n            whileHover={!isMobile ? { scale: 1.02 } : {}}\n            whileTap={{ scale: 0.98 }}\n            className=\"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl\"\n          >\n            {/* Animated background gradient */}\n            <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500\" />\n\n            {/* Glow effect */}\n            <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl\" />\n\n            {/* Content */}\n            <div className=\"relative z-10 p-8\">\n              {/* Header */}\n              <motion.div\n                initial={{ opacity: 0, y: -20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.2 }}\n                className=\"text-center mb-8\"\n              >\n                <div className=\"text-6xl mb-4 animate-pulse icon-container\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', lineHeight: '1' }}>🚌</div>\n                <h1 className=\"text-3xl font-bold text-white mb-2\">\n                  Driver Login\n                </h1>\n                <p className=\"text-white/70\">\n                  Sign in to start tracking your bus\n                </p>\n              </motion.div>\n\n              {/* Error Message */}\n              <AnimatePresence>\n                {loginError && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -10, scale: 0.95 }}\n                    animate={{ opacity: 1, y: 0, scale: 1 }}\n                    exit={{ opacity: 0, y: -10, scale: 0.95 }}\n                    className=\"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6\"\n                  >\n                    <p className=\"text-red-200 text-sm\">{loginError}</p>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {/* Login Form */}\n              <motion.form\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.4 }}\n                onSubmit={handleLogin}\n                className=\"space-y-6\"\n              >\n                {/* Email Input */}\n                <motion.div\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.5, delay: 0.5 }}\n                >\n                  <label\n                    htmlFor=\"email\"\n                    className=\"block text-sm font-medium text-white/90 mb-2\"\n                  >\n                    Email Address\n                  </label>\n                  <input\n                    id=\"email\"\n                    type=\"email\"\n                    required\n                    value={loginForm.email}\n                    onChange={(e) =>\n                      setLoginForm((prev) => ({\n                        ...prev,\n                        email: e.target.value,\n                      }))\n                    }\n                    className=\"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"Enter your email\"\n                  />\n                </motion.div>\n\n                {/* Password Input */}\n                <motion.div\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ duration: 0.5, delay: 0.6 }}\n                >\n                  <label\n                    htmlFor=\"password\"\n                    className=\"block text-sm font-medium text-white/90 mb-2\"\n                  >\n                    Password\n                  </label>\n                  <input\n                    id=\"password\"\n                    type=\"password\"\n                    required\n                    value={loginForm.password}\n                    onChange={(e) =>\n                      setLoginForm((prev) => ({\n                        ...prev,\n                        password: e.target.value,\n                      }))\n                    }\n                    className=\"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"Enter your password\"\n                  />\n                </motion.div>\n\n                {/* Login Button */}\n                <motion.button\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.5, delay: 0.7 }}\n                  whileHover={!isMobile ? { scale: 1.02, y: -2 } : {}}\n                  whileTap={{ scale: 0.98 }}\n                  type=\"submit\"\n                  disabled={isLoading}\n                  className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none\"\n                >\n                  {isLoading ? (\n                    <div className=\"flex items-center justify-center\">\n                      <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2\" />\n                      Signing In...\n                    </div>\n                  ) : (\n                    'Sign In'\n                  )}\n                </motion.button>\n              </motion.form>\n\n              {/* Footer */}\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ duration: 0.6, delay: 0.8 }}\n                className=\"mt-6 text-center\"\n              >\n                <p className=\"text-sm text-white/60\">\n                  Please contact your administrator for login credentials\n                </p>\n              </motion.div>\n            </div>\n\n            {/* Shimmer effect */}\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000\" />\n          </motion.div>\n        </motion.div>\n      </div>\n\n      {/* Floating Particles Effect */}\n      <div className=\"absolute inset-0 pointer-events-none\">\n        {[...Array(isMobile ? 8 : 15)].map((_, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full\"\n            style={{\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n            }}\n            animate={{\n              y: [0, -30, 0],\n              opacity: [0, 1, 0],\n            }}\n            transition={{\n              duration: 3 + Math.random() * 2,\n              repeat: Infinity,\n              delay: Math.random() * 2,\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default DriverLogin;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Socket } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../config/supabase';\nimport { websocketService } from '../services/websocket';\nimport { authService } from '../services/authService';\nimport { environment } from '../config/environment';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport './DriverInterface.css';\nimport './DriverDashboard.css';\n\ninterface BusInfo {\n  bus_id: string;\n  bus_number: string;\n  route_id: string;\n  route_name: string;\n  driver_id: string;\n  driver_name: string;\n}\n\ninterface LocationData {\n  driverId: string;\n  latitude: number;\n  longitude: number;\n  timestamp: string;\n  speed?: number;\n  heading?: number;\n}\n\nconst DriverDashboard: React.FC = () => {\n  const navigate = useNavigate();\n  const [isTracking, setIsTracking] = useState(false);\n  const [busInfo, setBusInfo] = useState<BusInfo | null>(null);\n  const [currentLocation, setCurrentLocation] =\n    useState<GeolocationPosition | null>(null);\n  const [locationError, setLocationError] = useState<string | null>(null);\n\n  const [lastUpdateTime, setLastUpdateTime] = useState<string | null>(null);\n  const [updateCount, setUpdateCount] = useState(0);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState<\n    'connected' | 'disconnected' | 'connecting'\n  >('disconnected');\n\n  // Monitor busInfo changes for debugging\n  useEffect(() => {\n    console.log('🚌 BusInfo state changed:', busInfo);\n  }, [busInfo]);\n\n  const socketRef = useRef<Socket | null>(null);\n  // const locationIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const watchIdRef = useRef<number | null>(null);\n  const mapRef = useRef<maplibregl.Map | null>(null);\n  const mapContainerRef = useRef<HTMLDivElement>(null);\n  const markerRef = useRef<maplibregl.Marker | null>(null);\n  const initializationRef = useRef(false);\n  const fallbackTimerRef = useRef<NodeJS.Timeout | null>(null);\n  \n  // Store event listener references to properly remove them later\n  const eventListenersRef = useRef<{\n    webglcontextlost?: (event: Event) => void;\n    webglcontextrestored?: () => void;\n    error?: (e: any) => void;\n    load?: () => void;\n  }>({});\n\n  // Initialize driver data and WebSocket connection when component mounts\n  useEffect(() => {\n    // Prevent multiple initializations\n    if (initializationRef.current) {\n      console.log('🔄 Driver Dashboard: Already initialized, skipping...');\n      return;\n    }\n\n    console.log('🚀 Driver Dashboard: Starting initialization...');\n    \n    // Set initialization flag immediately to prevent multiple calls\n    initializationRef.current = true;\n\n    // Set up connection status monitoring\n    const updateConnectionStatus = () => {\n      if (websocketService.isConnected()) {\n        setConnectionStatus('connected');\n      } else if (\n        websocketService.getConnectionState() === 'connecting' ||\n        websocketService.getConnectionState() === 'reconnecting'\n      ) {\n        setConnectionStatus('connecting');\n      } else {\n        setConnectionStatus('disconnected');\n      }\n    };\n\n    // Initial status check\n    updateConnectionStatus();\n\n    // Set up periodic status monitoring\n    const statusInterval = setInterval(updateConnectionStatus, 2000);\n\n    const initializeDriverData = async () => {\n      try {\n        console.log(\n          '🚀 Driver Dashboard: Component mounted, starting initialization...'\n        );\n\n        // Get current user session\n        const {\n          data: { session },\n        } = await supabase.auth.getSession();\n\n        console.log(\n          '🔑 Session check:',\n          session ? 'Found' : 'Not found',\n          session?.user?.email\n        );\n\n        if (session?.user) {\n          console.log('🔌 Driver Dashboard: Initializing...');\n\n          // Check for existing bus info first (from DriverLogin)\n          const existingAssignment = authService.getCurrentDriverAssignment();\n          console.log(\n            '🔍 Checking for existing assignment:',\n            existingAssignment ? 'Found' : 'Not found'\n          );\n\n          if (existingAssignment) {\n            console.log(\n              '✅ Driver Dashboard: Using existing assignment from DriverLogin:',\n              existingAssignment\n            );\n            setBusInfo({\n              bus_id: existingAssignment.bus_id,\n              bus_number: existingAssignment.bus_number,\n              route_id: existingAssignment.route_id,\n              route_name: existingAssignment.route_name,\n              driver_id: existingAssignment.driver_id,\n              driver_name: existingAssignment.driver_name,\n            });\n            setIsAuthenticated(true);\n            console.log(\n              '✅ Bus info and authentication state set from existing assignment'\n            );\n          } else {\n            // Validate driver session using auth service as fallback\n            console.log(\n              '🔍 No existing assignment, validating driver session...'\n            );\n            const { isValid, assignment } =\n              await authService.validateDriverSession();\n            console.log('🔍 Validation result:', {\n              isValid,\n              assignment: assignment ? 'Found' : 'Not found',\n            });\n\n            if (isValid && assignment) {\n              console.log(\n                '✅ Driver Dashboard: Valid session found with assignment:',\n                assignment\n              );\n              setBusInfo({\n                bus_id: assignment.bus_id,\n                bus_number: assignment.bus_number,\n                route_id: assignment.route_id,\n                route_name: assignment.route_name,\n                driver_id: assignment.driver_id,\n                driver_name: assignment.driver_name,\n              });\n              setIsAuthenticated(true);\n              console.log(\n                '✅ Bus info and authentication state set from validation'\n              );\n            } else {\n              console.log(\n                '❌ Driver Dashboard: Invalid session or no assignment found'\n              );\n              return;\n            }\n          }\n\n          // Connect to WebSocket only if not already connected\n          if (!websocketService.isConnected()) {\n            console.log('🔌 Driver Dashboard: Connecting to WebSocket...');\n            try {\n              await websocketService.connect();\n            } catch (error) {\n              console.warn('⚠️ WebSocket connection failed, will use API fallback:', error);\n            }\n          } else {\n            console.log('✅ WebSocket already connected');\n          }\n\n          // Set up WebSocket listeners\n          websocketService.socket?.on('connect', () => {\n            console.log('🔌 Driver Dashboard: Connected to WebSocket server');\n          });\n\n          websocketService.socket?.on('disconnect', () => {\n            console.log(\n              '🔌 Driver Dashboard: Disconnected from WebSocket server'\n            );\n          });\n\n          websocketService.socket?.on('error', (error) => {\n            console.error('❌ Driver Dashboard: Socket error:', error);\n          });\n\n          websocketService.socket?.on(\n            'driver:authenticated',\n            (data: { driverId: string; busId: string; busInfo: BusInfo }) => {\n              console.log(\n                '✅ Driver Dashboard: Authentication successful:',\n                data\n              );\n              console.log('🚌 Bus Info received:', data.busInfo);\n              setBusInfo(data.busInfo);\n              setIsAuthenticated(true);\n            }\n          );\n\n          websocketService.socket?.on(\n            'driver:authentication_failed',\n            (error) => {\n              console.error(\n                '❌ Driver Dashboard: Authentication failed:',\n                error\n              );\n            }\n          );\n\n          websocketService.socket?.on('driver:locationConfirmed', () => {\n            console.log('📍 Driver Dashboard: Location confirmed');\n            setLastUpdateTime(new Date().toLocaleTimeString());\n            setUpdateCount((prev) => prev + 1);\n          });\n\n          // Store socket reference\n          socketRef.current = websocketService.socket;\n\n          // Emit driver:connected event to notify the server\n          const currentAssignment = authService.getCurrentDriverAssignment();\n          if (currentAssignment) {\n            websocketService.socket?.emit('driver:connected', {\n              driverId: currentAssignment.driver_id,\n              busId: currentAssignment.bus_id,\n              timestamp: new Date().toISOString(),\n            });\n          }\n\n          // Enhanced fallback mechanism with retry logic\n          let fallbackAttempt = 0;\n          const maxFallbackAttempts = 3;\n          const fallbackInterval = 5000; // 5 seconds between attempts\n          \n          fallbackTimerRef.current = setInterval(() => {\n            fallbackAttempt++;\n            \n            if (!busInfo && !isAuthenticated) {\n              console.log(`🔄 Fallback attempt ${fallbackAttempt}/${maxFallbackAttempts}: Fetching bus info from API...`);\n              fetchBusInfoFromAPI(session.user.id).then(success => {\n                if (success) {\n                  console.log('✅ Fallback API call successful');\n                  if (fallbackTimerRef.current) {\n                    clearInterval(fallbackTimerRef.current);\n                    fallbackTimerRef.current = null;\n                  }\n                } else if (fallbackAttempt >= maxFallbackAttempts) {\n                  console.log('❌ Max fallback attempts reached, stopping retries');\n                  if (fallbackTimerRef.current) {\n                    clearInterval(fallbackTimerRef.current);\n                    fallbackTimerRef.current = null;\n                  }\n                }\n              });\n            } else {\n              console.log('✅ Bus info already set, canceling fallback timer');\n              if (fallbackTimerRef.current) {\n                clearInterval(fallbackTimerRef.current);\n                fallbackTimerRef.current = null;\n              }\n            }\n          }, fallbackInterval);\n        } else {\n          console.log(\n            '❌ Driver Dashboard: No session found, redirecting to login'\n          );\n          // Redirect to login if no session\n          navigate('/driver-login');\n        }\n      } catch (error) {\n        console.error('❌ Driver Dashboard: Initialization error:', error);\n        console.error('Failed to initialize driver data');\n      }\n    };\n\n    initializeDriverData();\n\n    // Cleanup function\n    return () => {\n      clearInterval(statusInterval);\n      \n      // Clear fallback timer if it exists\n      if (fallbackTimerRef.current) {\n        clearInterval(fallbackTimerRef.current);\n        fallbackTimerRef.current = null;\n      }\n      \n      // Reset initialization flag on cleanup\n      initializationRef.current = false;\n      \n      // Clean up WebSocket listeners\n      if (websocketService.socket) {\n        websocketService.socket.off('connect');\n        websocketService.socket.off('disconnect');\n        websocketService.socket.off('error');\n        websocketService.socket.off('driver:authenticated');\n        websocketService.socket.off('driver:authentication_failed');\n        websocketService.socket.off('driver:locationConfirmed');\n      }\n      \n      console.log('🧹 Driver Dashboard: Cleanup completed');\n    };\n  }, [navigate]);\n\n  // Initialize map when component mounts\n  useEffect(() => {\n    if (mapContainerRef.current && !mapRef.current) {\n      console.log('🗺️ Initializing map...');\n      initializeMap();\n    }\n\n    return () => {\n      console.log('🗺️ Cleaning up map...');\n      cleanupMap();\n    };\n  }, []);\n\n  const initializeMap = () => {\n    if (!mapContainerRef.current) return;\n\n    const latitude = 23.0225;\n    const longitude = 72.5714;\n\n    // Clean up existing map if it exists\n    if (mapRef.current) {\n      mapRef.current.remove();\n      mapRef.current = null;\n    }\n\n    try {\n      // Create map with optimized settings to prevent WebGL context loss\n      mapRef.current = new maplibregl.Map({\n        container: mapContainerRef.current,\n        style: {\n          version: 8,\n          sources: {\n            osm: {\n              type: 'raster',\n              tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n              tileSize: 256,\n              attribution: '© OpenStreetMap contributors',\n            },\n          },\n          layers: [\n            {\n              id: 'osm-tiles',\n              type: 'raster',\n              source: 'osm',\n              minzoom: 0,\n              maxzoom: 22,\n            },\n          ],\n        },\n        center: [longitude, latitude],\n        zoom: 15,\n        attributionControl: false,\n        preserveDrawingBuffer: true, // Prevent WebGL context loss\n        antialias: true,\n        failIfMajorPerformanceCaveat: false, // Allow fallback rendering\n        maxPitch: 60, // Limit pitch to improve performance\n        localIdeographFontFamily: 'sans-serif', // Improve font rendering\n        renderWorldCopies: true, // Improve performance at world edges\n      });\n\n      // Handle WebGL context loss\n      const handleContextLost = (event: Event) => {\n        console.warn('⚠️ WebGL context lost, attempting to restore...');\n        // Prevent the default behavior which halts all rendering\n        if (event instanceof WebGLContextEvent) {\n          event.preventDefault();\n        }\n        \n        // Attempt to restore the context after a short delay\n        setTimeout(() => {\n          try {\n            if (mapRef.current) {\n              mapRef.current.resize();\n              console.log('✅ Attempted map context restoration');\n            }\n          } catch (error) {\n            console.error('❌ Failed to restore map context:', error);\n          }\n        }, 1000);\n      };\n      \n      // Store the listener reference\n      eventListenersRef.current.webglcontextlost = handleContextLost;\n      mapRef.current.on('webglcontextlost', handleContextLost);\n\n      const handleContextRestored = () => {\n        console.log('✅ WebGL context restored');\n        // Redraw the map and marker\n        if (mapRef.current && markerRef.current) {\n          mapRef.current.resize();\n          const currentLngLat = markerRef.current.getLngLat();\n          markerRef.current.setLngLat(currentLngLat);\n        }\n      };\n      \n      // Store the listener reference\n      eventListenersRef.current.webglcontextrestored = handleContextRestored;\n      mapRef.current.on('webglcontextrestored', handleContextRestored);\n      \n      // Create marker\n      const markerElement = document.createElement('div');\n      markerElement.className = 'driver-marker';\n      markerElement.innerHTML = `\n        <div class=\"driver-marker-content\">\n          <div style=\"font-size: 16px;\">🚌</div>\n        </div>\n      `;\n\n      markerRef.current = new maplibregl.Marker({\n        element: markerElement,\n        anchor: 'center',\n      })\n        .setLngLat([longitude, latitude])\n        .addTo(mapRef.current);\n        \n      // Add error handling for tile loading\n      const handleMapError = (e: any) => {\n        console.error('❌ Map error:', e);\n      };\n      \n      // Store the listener reference\n      eventListenersRef.current.error = handleMapError;\n      mapRef.current.on('error', handleMapError);\n      \n      // Optimize performance\n      const handleMapLoad = () => {\n        console.log('✅ Map loaded successfully');\n      };\n      \n      // Store the listener reference\n      eventListenersRef.current.load = handleMapLoad;\n      mapRef.current.on('load', handleMapLoad);\n      \n    } catch (error) {\n      console.error('❌ Error initializing map:', error);\n      // Fallback to a simpler map initialization if the first attempt fails\n      try {\n        console.log('🔄 Attempting fallback map initialization...');\n        if (mapContainerRef.current && !mapRef.current) {\n          mapRef.current = new maplibregl.Map({\n            container: mapContainerRef.current,\n            style: {\n              version: 8,\n              sources: {\n                osm: {\n                  type: 'raster',\n                  tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n                  tileSize: 256,\n                },\n              },\n              layers: [\n                {\n                  id: 'osm-tiles',\n                  type: 'raster',\n                  source: 'osm',\n                  minzoom: 0,\n                  maxzoom: 22,\n                },\n              ],\n            },\n            center: [longitude, latitude],\n            zoom: 15,\n            attributionControl: false,\n            preserveDrawingBuffer: true,\n          });\n          \n          // Create simple marker\n          const markerElement = document.createElement('div');\n          markerElement.className = 'driver-marker';\n          markerElement.innerHTML = `<div>🚌</div>`;\n          \n          markerRef.current = new maplibregl.Marker({\n            element: markerElement,\n          })\n            .setLngLat([longitude, latitude])\n            .addTo(mapRef.current);\n            \n          console.log('✅ Fallback map initialization successful');\n        }\n      } catch (fallbackError) {\n        console.error('❌ Fallback map initialization failed:', fallbackError);\n      }\n    }\n  };\n\n  const updateMapLocation = (latitude: number, longitude: number) => {\n    if (!mapRef.current || !markerRef.current) return;\n\n    const newLocation = [longitude, latitude] as [number, number];\n    markerRef.current.setLngLat(newLocation);\n\n    mapRef.current.flyTo({\n      center: newLocation,\n      duration: 1000,\n    });\n  };\n\n  const startLocationTracking = async () => {\n    if (!navigator.geolocation) {\n      setLocationError('Geolocation is not supported by this browser');\n      return;\n    }\n\n    const isMobile =\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      );\n    const options = {\n      enableHighAccuracy: true,\n      timeout: isMobile ? 30000 : 60000,\n      maximumAge: 0,\n    };\n\n    try {\n      watchIdRef.current = navigator.geolocation.watchPosition(\n        (position) => {\n          setCurrentLocation(position);\n          setLocationError(null);\n\n          if (mapRef.current && markerRef.current) {\n            updateMapLocation(\n              position.coords.latitude,\n              position.coords.longitude\n            );\n          }\n\n          if (websocketService.socket && websocketService.isConnected()) {\n            const locationData: LocationData = {\n              driverId: busInfo?.driver_id || '',\n              latitude: position.coords.latitude,\n              longitude: position.coords.longitude,\n              timestamp: new Date().toISOString(),\n              speed: position.coords.speed || undefined,\n              heading: position.coords.heading || undefined,\n            };\n\n            websocketService.socket.emit('driver:locationUpdate', locationData);\n            setLastUpdateTime(new Date().toLocaleTimeString());\n            setUpdateCount((prev) => prev + 1);\n          }\n        },\n        (error) => {\n          console.error('❌ Location error:', error);\n          let errorMessage = '';\n\n          switch (error.code) {\n            case error.PERMISSION_DENIED:\n              errorMessage =\n                'Location permission denied. Please enable location access.';\n              break;\n            case error.POSITION_UNAVAILABLE:\n              errorMessage = 'Location information is unavailable.';\n              break;\n            case error.TIMEOUT:\n              errorMessage = 'Location request timed out.';\n              break;\n            default:\n              errorMessage = 'An unknown error occurred.';\n          }\n\n          setLocationError(errorMessage);\n          setIsTracking(false);\n        },\n        options\n      );\n\n      setIsTracking(true);\n    } catch (error) {\n      console.error('❌ Error starting location tracking:', error);\n      setLocationError('Failed to start location tracking');\n    }\n  };\n\n  const stopLocationTracking = () => {\n    if (watchIdRef.current) {\n      navigator.geolocation.clearWatch(watchIdRef.current);\n      watchIdRef.current = null;\n    }\n    setIsTracking(false);\n  };\n\n  const cleanupMap = () => {\n    try {\n      // Properly remove all event listeners before removing the map\n      if (mapRef.current) {\n        // Remove all event listeners using the stored references\n        if (eventListenersRef.current.webglcontextlost) {\n          mapRef.current.off('webglcontextlost', eventListenersRef.current.webglcontextlost);\n        }\n        if (eventListenersRef.current.webglcontextrestored) {\n          mapRef.current.off('webglcontextrestored', eventListenersRef.current.webglcontextrestored);\n        }\n        if (eventListenersRef.current.error) {\n          mapRef.current.off('error', eventListenersRef.current.error);\n        }\n        if (eventListenersRef.current.load) {\n          mapRef.current.off('load', eventListenersRef.current.load);\n        }\n        \n        // Clear the event listeners\n        eventListenersRef.current = {};\n        \n        // Remove the map\n        mapRef.current.remove();\n        mapRef.current = null;\n      }\n      \n      // Clear marker reference\n      markerRef.current = null;\n      \n      console.log('🗺️ Map cleanup completed');\n    } catch (error) {\n      console.error('❌ Error during map cleanup:', error);\n    }\n  };\n\n  const fetchBusInfoFromAPI = async (userId: string): Promise<boolean> => {\n    try {\n      console.log('🔄 Fetching bus info for user:', userId);\n\n      // Get current session for authentication\n      const {\n        data: { session },\n      } = await supabase.auth.getSession();\n\n      if (!session?.access_token) {\n        console.error('❌ No access token available for API call');\n        return false;\n      }\n\n      // Make API call to get driver bus info - use the correct endpoint without /api prefix\n      const response = await fetch(\n        `${environment.api.url}/buses?driver_id=${userId}`,\n        {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${session.access_token}`,\n          },\n          // Add timeout handling\n          signal: AbortSignal.timeout(10000), // 10 second timeout\n        }\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('✅ Bus info from API:', data);\n\n        // Handle the response format from the buses endpoint\n        if (data.success && data.data && Array.isArray(data.data) && data.data.length > 0) {\n          const busData = data.data[0]; // Get the first bus assigned to this driver\n          setBusInfo({\n            bus_id: busData.bus_id || busData.id,\n            bus_number: busData.bus_number || busData.number_plate || busData.code,\n            route_id: busData.route_id || '',\n            route_name: busData.route_name || 'Route TBD',\n            driver_id: busData.driver_id || busData.assigned_driver_id,\n            driver_name: busData.driver_name || busData.driver_full_name || 'Driver TBD',\n          });\n          setIsAuthenticated(true);\n          return true;\n        } else if (data.data?.busInfo) {\n          setBusInfo(data.data.busInfo);\n          setIsAuthenticated(true);\n          return true;\n        } else if (data.busInfo) {\n          setBusInfo(data.busInfo);\n          setIsAuthenticated(true);\n          return true;\n        } else {\n          console.error('❌ No bus info in response:', data);\n          return false;\n        }\n      } else {\n        const errorText = await response.text();\n        console.error(\n          '❌ Failed to fetch bus info from API:',\n          response.status,\n          errorText\n        );\n        console.error(`API Error: ${response.status} - ${errorText}`);\n        return false;\n      }\n    } catch (error) {\n      console.error('❌ Error fetching bus info from API:', error);\n      return false;\n    }\n  };\n\n  const disconnectSocket = () => {\n    websocketService.disconnect();\n    socketRef.current = null;\n  };\n\n  const handleSignOut = async () => {\n    try {\n      stopLocationTracking();\n      disconnectSocket();\n      cleanupMap();\n      await supabase.auth.signOut();\n    } catch (error) {\n      console.error('❌ Sign out error:', error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"card-glass p-6 mb-6\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div className=\"flex-1\">\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-white mb-2\">\n                🚌 Driver Dashboard\n              </h1>\n              <div className=\"space-y-1\">\n                <p className=\"text-white/80 text-sm sm:text-base\">\n                  Welcome,{' '}\n                  <span className=\"font-semibold text-white\">\n                    {busInfo?.driver_name}\n                  </span>\n                </p>\n                <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm\">\n                  <span className=\"text-blue-300\">\n                    🚌 Bus:{' '}\n                    <span className=\"font-semibold text-white\">\n                      {busInfo?.bus_number}\n                    </span>\n                  </span>\n                  <span className=\"text-green-300\">\n                    🛣️ Route:{' '}\n                    <span className=\"font-semibold text-white\">\n                      {busInfo?.route_name}\n                    </span>\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={async () => {\n                  const {\n                    data: { session },\n                  } = await supabase.auth.getSession();\n                  if (session?.user?.id) {\n                    console.log('🔄 Manual refresh: Fetching bus info...');\n                    fetchBusInfoFromAPI(session.user.id);\n                  }\n                }}\n                className=\"btn-primary w-full sm:w-auto\"\n              >\n                🔄 Refresh\n              </button>\n              <button\n                onClick={handleSignOut}\n                className=\"btn-secondary w-full sm:w-auto\"\n              >\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Status Cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n          {/* Connection Status */}\n          <div className=\"card-glass p-4\">\n            <div className=\"flex items-center\">\n              <div\n                className={`w-3 h-3 rounded-full mr-3 ${\n                  connectionStatus === 'connected'\n                    ? 'bg-green-500'\n                    : connectionStatus === 'connecting'\n                      ? 'bg-yellow-500 animate-pulse'\n                      : 'bg-red-500'\n                }`}\n              ></div>\n              <div className=\"min-w-0 flex-1\">\n                <h3 className=\"font-semibold text-white text-sm\">Connection</h3>\n                <p className=\"text-xs text-white/70 truncate\">\n                  {connectionStatus === 'connected'\n                    ? 'Connected'\n                    : connectionStatus === 'connecting'\n                      ? 'Connecting...'\n                      : 'Disconnected'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Tracking Status */}\n          <div className=\"card-glass p-4\">\n            <div className=\"flex items-center\">\n              <div\n                className={`w-3 h-3 rounded-full mr-3 ${isTracking ? 'bg-green-500' : 'bg-gray-400'}`}\n              ></div>\n              <div className=\"min-w-0 flex-1\">\n                <h3 className=\"font-semibold text-white text-sm\">\n                  GPS Tracking\n                </h3>\n                <p className=\"text-xs text-white/70 truncate\">\n                  {isTracking ? 'Active' : 'Inactive'}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Update Count */}\n          <div className=\"card-glass p-4\">\n            <div>\n              <h3 className=\"font-semibold text-white text-sm\">Updates Sent</h3>\n              <p className=\"text-xl font-bold text-blue-300\">{updateCount}</p>\n              {lastUpdateTime && (\n                <p className=\"text-xs text-white/70 truncate\">\n                  Last: {lastUpdateTime}\n                </p>\n              )}\n            </div>\n          </div>\n\n          {/* Location Status */}\n          <div className=\"card-glass p-4\">\n            <div className=\"flex items-center\">\n              <div\n                className={`w-3 h-3 rounded-full mr-3 ${locationError ? 'bg-red-500' : currentLocation ? 'bg-green-500' : 'bg-gray-400'}`}\n              ></div>\n              <div className=\"min-w-0 flex-1\">\n                <h3 className=\"font-semibold text-white text-sm\">Location</h3>\n                <p className=\"text-xs text-white/70 truncate\">\n                  {locationError\n                    ? 'Error'\n                    : currentLocation\n                      ? 'Available'\n                      : 'Waiting'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Tracking Controls */}\n        <div className=\"card-glass p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold text-white mb-4\">\n            📍 Location Tracking Controls\n          </h2>\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            {!isTracking ? (\n              <>\n                <button\n                  onClick={startLocationTracking}\n                  className=\"btn-primary flex-1 py-3 px-6 text-lg font-semibold\"\n                >\n                  🚀 Start Tracking\n                </button>\n\n                {locationError && (\n                  <button\n                    onClick={() => {\n                      setLocationError(null);\n                      startLocationTracking();\n                    }}\n                    className=\"btn-secondary w-full py-2 px-4 text-sm\"\n                  >\n                    🔄 Retry Location Permission\n                  </button>\n                )}\n              </>\n            ) : (\n              <button\n                onClick={stopLocationTracking}\n                className=\"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold\"\n              >\n                ⏹️ Stop Tracking\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Map */}\n          <div className=\"card-glass p-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">\n              🗺️ Live Location Map\n            </h2>\n            <div\n              ref={mapContainerRef}\n              className=\"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container\"\n              style={{ minHeight: '300px' }}\n            />\n\n            {locationError && (\n              <div className=\"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4\">\n                <p className=\"text-red-200 text-sm mb-3\">{locationError}</p>\n\n                {/* Enhanced mobile troubleshooting */}\n                <div className=\"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3\">\n                  <h4 className=\"font-semibold text-yellow-200 mb-2\">\n                    📱 Mobile Location Troubleshooting:\n                  </h4>\n\n                  {/* Mobile-specific instructions */}\n                  <div className=\"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2\">\n                    <h5 className=\"font-semibold text-blue-200 text-xs mb-1\">\n                      📱 For Mobile Devices:\n                    </h5>\n                    <ul className=\"text-xs text-blue-100 space-y-1\">\n                      <li>\n                        • <strong>Android Chrome:</strong> Settings → Apps →\n                        Chrome → Permissions → Location → Allow\n                      </li>\n                      <li>\n                        • <strong>Android Firefox:</strong> Settings → Apps →\n                        Firefox → Permissions → Location → Allow\n                      </li>\n                      <li>\n                        • <strong>iPhone Safari:</strong> Settings → Safari →\n                        Location → Allow\n                      </li>\n                      <li>\n                        • <strong>iPhone Chrome:</strong> Settings → Chrome →\n                        Location → Allow\n                      </li>\n                      <li>\n                        • <strong>Make sure:</strong> GPS/Location Services are\n                        ON in phone settings\n                      </li>\n                      <li>\n                        • <strong>Try:</strong> Going outdoors or near a window\n                        for better GPS signal\n                      </li>\n                    </ul>\n                  </div>\n\n                  {/* Desktop instructions */}\n                  <div className=\"bg-green-500/20 border border-green-400/30 rounded p-2\">\n                    <h5 className=\"font-semibold text-green-200 text-xs mb-1\">\n                      💻 For Desktop Browsers:\n                    </h5>\n                    <ul className=\"text-xs text-green-100 space-y-1\">\n                      <li>\n                        • <strong>Chrome:</strong> Click lock icon → Location →\n                        Allow → Refresh\n                      </li>\n                      <li>\n                        • <strong>Firefox:</strong> Click lock icon → Location →\n                        Allow → Refresh\n                      </li>\n                      <li>\n                        • <strong>Safari:</strong> Safari → Preferences →\n                        Websites → Location → Allow\n                      </li>\n                    </ul>\n                  </div>\n                  <div className=\"flex flex-col sm:flex-row gap-2 mt-2\">\n                    <button\n                      onClick={() => window.location.reload()}\n                      className=\"btn-secondary text-xs px-3 py-1\"\n                    >\n                      🔄 Refresh Page & Retry\n                    </button>\n\n                    <button\n                      onClick={() => {\n                        // Test location without starting tracking\n                        const isMobile =\n                          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n                            navigator.userAgent\n                          );\n\n                        if (navigator.geolocation) {\n                          navigator.geolocation.getCurrentPosition(\n                            (position) => {\n                              const successMsg =\n                                `✅ Location Test Successful!\\n\\n` +\n                                `Latitude: ${position.coords.latitude}\\n` +\n                                `Longitude: ${position.coords.longitude}\\n` +\n                                `Accuracy: ${position.coords.accuracy}m\\n` +\n                                `Device: ${isMobile ? 'Mobile' : 'Desktop'}\\n\\n` +\n                                `Location is working! You can now start tracking.`;\n                              alert(successMsg);\n                              setLocationError(null);\n                            },\n                            (error) => {\n                              const errorMsg =\n                                `❌ Location Test Failed\\n\\n` +\n                                `Error Code: ${error.code}\\n` +\n                                `Error Message: ${error.message}\\n` +\n                                `Device: ${isMobile ? 'Mobile' : 'Desktop'}\\n\\n` +\n                                `Please check your location permissions.`;\n                              alert(errorMsg);\n                            },\n                            {\n                              enableHighAccuracy: true,\n                              timeout: 10000,\n                              maximumAge: 0,\n                            }\n                          );\n                        } else {\n                          alert(\n                            'Geolocation is not supported by this browser.'\n                          );\n                        }\n                      }}\n                      className=\"btn-primary text-xs px-3 py-1\"\n                    >\n                      🧪 Test Location\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Location Info */}\n          <div className=\"card-glass p-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">\n              📍 Current Location Details\n            </h2>\n            {currentLocation ? (\n              <div className=\"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20\">\n                {/* Live indicator */}\n                <div className=\"flex items-center justify-center mb-2\">\n                  <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2\"></div>\n                  <span className=\"text-sm text-green-300 font-medium\">\n                    📍 Live Location Data\n                  </span>\n                </div>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70 text-sm\">Latitude:</span>\n                    <span className=\"font-mono text-white font-semibold text-sm\">\n                      {currentLocation.coords.latitude.toFixed(6)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70 text-sm\">Longitude:</span>\n                    <span className=\"font-mono text-white font-semibold text-sm\">\n                      {currentLocation.coords.longitude.toFixed(6)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70 text-sm\">Accuracy:</span>\n                    <span className=\"text-white font-semibold text-sm\">\n                      {currentLocation.coords.accuracy?.toFixed(1)}m\n                    </span>\n                  </div>\n                  {currentLocation.coords.speed && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-white/70 text-sm\">Speed:</span>\n                      <span className=\"text-white font-semibold text-sm\">\n                        {(currentLocation.coords.speed * 3.6).toFixed(1)} km/h\n                      </span>\n                    </div>\n                  )}\n                  {currentLocation.coords.heading && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-white/70 text-sm\">Heading:</span>\n                      <span className=\"text-white font-semibold text-sm\">\n                        {currentLocation.coords.heading.toFixed(1)}°\n                      </span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70 text-sm\">Updates Sent:</span>\n                    <span className=\"font-bold text-blue-300 text-sm\">\n                      {updateCount}\n                    </span>\n                  </div>\n                  {lastUpdateTime && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-white/70 text-sm\">\n                        Last Update:\n                      </span>\n                      <span className=\"text-white font-medium text-sm\">\n                        {lastUpdateTime}\n                      </span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70 text-sm\">Timestamp:</span>\n                    <span className=\"text-white font-medium text-sm\">\n                      {new Date(currentLocation.timestamp).toLocaleTimeString()}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center\">\n                <div className=\"text-yellow-300 mb-2 text-2xl\">📍</div>\n                <p className=\"text-yellow-200 font-medium\">\n                  No location data available\n                </p>\n                <p className=\"text-yellow-100 text-sm mt-1\">\n                  Click \"Start Tracking\" to begin location sharing\n                </p>\n              </div>\n            )}\n\n            <div className=\"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6\">\n              <h3 className=\"font-semibold text-blue-200 mb-2\">\n                ℹ️ Instructions\n              </h3>\n              <ul className=\"text-sm text-blue-100 space-y-1\">\n                <li>\n                  • Click \"Start Tracking\" to begin sending location updates\n                </li>\n                <li>• Your location will be sent every few seconds</li>\n                <li>\n                  • Students and admin can see your bus location in real-time\n                </li>\n                <li>• Make sure to allow location access when prompted</li>\n                <li>\n                  • The map shows your current position with a blue marker\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DriverDashboard;\n","import { authService } from './authService';\nimport { environment } from '../config/environment';\n\nconst API_BASE_URL = environment.api.url;\n\ninterface ApiResponse<T = unknown> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  message?: string;\n  timestamp?: string;\n}\n\ninterface BusData {\n  id?: string;\n  code: string;\n  number_plate: string;\n  capacity: number;\n  model?: string;\n  year?: number;\n  is_active: boolean;\n  assigned_driver_id?: string;\n  route_id?: string;\n  driver_full_name?: string;\n  driver_email?: string;\n  driver_first_name?: string;\n  driver_last_name?: string;\n  route_name?: string;\n}\n\ninterface DriverData {\n  id: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone?: string;\n  role: string;\n  assigned_bus_id?: string;\n  assigned_bus_plate?: string;\n}\n\ninterface RouteData {\n  id: string;\n  name: string;\n  description: string;\n  distance_km: number;\n  estimated_duration_minutes: number;\n  is_active: boolean;\n  city: string;\n  custom_destination?: string;\n  custom_origin?: string;\n  destination_coordinates?: {\n    coordinates: [number, number];\n  };\n  origin_coordinates?: {\n    coordinates: [number, number];\n  };\n  bus_stops?: any[];\n  current_eta_minutes?: number;\n  last_eta_calculation?: string;\n  stops?: GeoJSON.LineString;\n}\n\ninterface AnalyticsData {\n  totalBuses: number;\n  activeBuses: number;\n  totalRoutes: number;\n  activeRoutes: number;\n  totalDrivers: number;\n  activeDrivers: number;\n  averageDelay: number;\n  busUsageStats: {\n    date: string;\n    activeBuses: number;\n    totalTrips: number;\n  }[];\n}\n\ninterface SystemHealth {\n  buses: number;\n  routes: number;\n  drivers: number;\n  recentLocations: number;\n  timestamp: string;\n}\n\nclass AdminApiService {\n  private async makeRequest<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<ApiResponse<T>> {\n    let timeoutId: NodeJS.Timeout | undefined;\n\n    try {\n      const token = authService.getAccessToken();\n      console.log(\n        '🔑 Token check for',\n        endpoint,\n        ':',\n        token ? 'Token exists' : 'No token'\n      );\n\n      if (!token) {\n        console.error('❌ No access token available for', endpoint);\n        throw new Error('No access token available');\n      }\n\n      const controller = new AbortController();\n      timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout\n\n      // Ensure we're using the correct backend URL for production\n      const baseUrl = API_BASE_URL || environment.api.url;\n      const response = await fetch(`${baseUrl}/admin${endpoint}`, {\n        ...options,\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n          ...options.headers,\n        },\n      });\n\n      const data = await response.json();\n      if (timeoutId) clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        // Handle specific error cases\n        if (response.status === 429) {\n          throw new Error(\n            'Rate limit exceeded. Please wait a moment and try again.'\n          );\n        } else if (response.status === 401) {\n          throw new Error('Authentication required. Please log in again.');\n        } else if (response.status === 403) {\n          throw new Error(\n            'Access denied. You do not have permission for this action.'\n          );\n        } else if (response.status === 404) {\n          throw new Error('Resource not found.');\n        } else if (response.status === 409) {\n          throw new Error(data.message || 'Resource already exists');\n        } else if (response.status >= 500) {\n          throw new Error('Server error. Please try again later.');\n        } else {\n          throw new Error(data.message || data.error || 'Request failed');\n        }\n      }\n\n      return data;\n    } catch (error) {\n      if (timeoutId) clearTimeout(timeoutId);\n      console.error(`❌ API request failed for ${endpoint}:`, error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Request failed',\n      };\n    }\n  }\n\n  // ===== ANALYTICS ENDPOINTS =====\n\n  async getAnalytics(): Promise<ApiResponse<AnalyticsData>> {\n    return this.makeRequest<AnalyticsData>('/analytics');\n  }\n\n  async getSystemHealth(): Promise<ApiResponse<SystemHealth>> {\n    return this.makeRequest<SystemHealth>('/health');\n  }\n\n  // ===== BUS MANAGEMENT ENDPOINTS =====\n\n  async getAllBuses(): Promise<ApiResponse<BusData[]>> {\n    console.log('🚌 Fetching all buses...');\n    const result = await this.makeRequest<BusData[]>('/buses');\n    console.log(\n      '🚌 Buses result:',\n      result.success ? `${result.data?.length || 0} buses` : result.error\n    );\n    return result;\n  }\n\n  async getBusById(busId: string): Promise<ApiResponse<BusData>> {\n    return this.makeRequest<BusData>(`/buses/${busId}`);\n  }\n\n  async createBus(busData: Omit<BusData, 'id'>): Promise<ApiResponse<BusData>> {\n    return this.makeRequest<BusData>('/buses', {\n      method: 'POST',\n      body: JSON.stringify(busData),\n    });\n  }\n\n  async updateBus(\n    busId: string,\n    busData: Partial<BusData>\n  ): Promise<ApiResponse<BusData>> {\n    return this.makeRequest<BusData>(`/buses/${busId}`, {\n      method: 'PUT',\n      body: JSON.stringify(busData),\n    });\n  }\n\n  async deleteBus(busId: string): Promise<ApiResponse<BusData>> {\n    return this.makeRequest<BusData>(`/buses/${busId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // ===== DRIVER MANAGEMENT ENDPOINTS =====\n\n  async getAllDrivers(): Promise<ApiResponse<DriverData[]>> {\n    console.log('👨‍💼 Fetching all drivers...');\n    const result = await this.makeRequest<DriverData[]>('/drivers');\n    console.log(\n      '👨‍💼 Drivers result:',\n      result.success ? `${result.data?.length || 0} drivers` : result.error\n    );\n    return result;\n  }\n\n  async getAssignedDrivers(): Promise<ApiResponse<any[]>> {\n    console.log('🚌 Fetching assigned drivers...');\n    const result = await this.makeRequest<any[]>('/assigned-drivers');\n    console.log(\n      '🚌 Assigned drivers result:',\n      result.success\n        ? `${result.data?.length || 0} assigned drivers`\n        : result.error\n    );\n    return result;\n  }\n\n  async getDriverById(driverId: string): Promise<ApiResponse<DriverData>> {\n    return this.makeRequest<DriverData>(`/drivers/${driverId}`);\n  }\n\n  async assignDriverToBus(\n    driverId: string,\n    busId: string\n  ): Promise<ApiResponse<BusData>> {\n    return this.makeRequest<BusData>(`/drivers/${driverId}/assign-bus`, {\n      method: 'POST',\n      body: JSON.stringify({ busId }),\n    });\n  }\n\n  async unassignDriverFromBus(\n    driverId: string\n  ): Promise<ApiResponse<BusData[]>> {\n    return this.makeRequest<BusData[]>(`/drivers/${driverId}/unassign-bus`, {\n      method: 'POST',\n    });\n  }\n\n  async createDriver(\n    driverData: Omit<\n      DriverData,\n      'id' | 'assigned_bus_id' | 'assigned_bus_plate'\n    > & {\n      password: string;\n    }\n  ): Promise<ApiResponse<DriverData>> {\n    return this.makeRequest<DriverData>('/drivers', {\n      method: 'POST',\n      body: JSON.stringify(driverData),\n    });\n  }\n\n  async updateDriver(\n    driverId: string,\n    driverData: Partial<DriverData>\n  ): Promise<ApiResponse<DriverData>> {\n    return this.makeRequest<DriverData>(`/drivers/${driverId}`, {\n      method: 'PUT',\n      body: JSON.stringify(driverData),\n    });\n  }\n\n  async deleteDriver(driverId: string): Promise<ApiResponse<DriverData>> {\n    return this.makeRequest<DriverData>(`/drivers/${driverId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // ===== ROUTE MANAGEMENT ENDPOINTS =====\n\n  async getAllRoutes(): Promise<ApiResponse<RouteData[]>> {\n    console.log('🛣️ Fetching all routes...');\n    const result = await this.makeRequest<RouteData[]>('/routes');\n    console.log(\n      '🛣️ Routes result:',\n      result.success ? `${result.data?.length || 0} routes` : result.error\n    );\n    return result;\n  }\n\n  async getRouteById(routeId: string): Promise<ApiResponse<RouteData>> {\n    return this.makeRequest<RouteData>(`/routes/${routeId}`);\n  }\n\n  async createRoute(routeData: {\n    name: string;\n    description: string;\n    distance_km: number;\n    estimated_duration_minutes: number;\n    is_active: boolean;\n    city: string;\n  }): Promise<ApiResponse<RouteData>> {\n    return this.makeRequest<RouteData>('/routes', {\n      method: 'POST',\n      body: JSON.stringify(routeData),\n    });\n  }\n\n  async updateRoute(\n    routeId: string,\n    routeData: Partial<{\n      name: string;\n      description: string;\n      distance_km: number;\n      estimated_duration_minutes: number;\n      is_active: boolean;\n      city: string;\n      custom_destination?: string;\n      custom_destination_coordinates?: [number, number];\n      custom_origin?: string;\n      custom_origin_coordinates?: [number, number];\n      bus_stops?: any[];\n      stops?: GeoJSON.LineString;\n    }>\n  ): Promise<ApiResponse<RouteData>> {\n    return this.makeRequest<RouteData>(`/routes/${routeId}`, {\n      method: 'PUT',\n      body: JSON.stringify(routeData),\n    });\n  }\n\n  async deleteRoute(routeId: string): Promise<ApiResponse<RouteData>> {\n    return this.makeRequest<RouteData>(`/routes/${routeId}`, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport const adminApiService = new AdminApiService();\nexport default adminApiService;\n","import { authService } from './authService';\nimport { environment } from '../config/environment';\n\nconst API_BASE_URL = environment.api.url;\n\nexport interface UploadResult {\n  success: boolean;\n  url?: string;\n  fileName?: string;\n  error?: string;\n}\n\nexport interface FileInfo {\n  success: boolean;\n  hasFile: boolean;\n  url?: string;\n  info?: unknown;\n  error?: string;\n}\n\nexport interface SignedUrlResult {\n  success: boolean;\n  signedUrl?: string;\n  expiresIn?: number;\n  error?: string;\n}\n\nexport class StorageService {\n  // Helper function to make authenticated requests\n  private static async makeRequest(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<Response> {\n    let token = authService.getAccessToken();\n\n    // If no token, only try to refresh if user is authenticated\n    if (!token && authService.isAuthenticated()) {\n      console.log(\n        '🔄 No token found but user is authenticated, attempting to refresh session...'\n      );\n      const refreshResult = await authService.refreshSession();\n      if (refreshResult.success) {\n        token = authService.getAccessToken();\n        console.log('✅ Session refreshed, new token obtained');\n      } else {\n        console.error('❌ Failed to refresh session:', refreshResult.error);\n        throw new Error('Authentication required');\n      }\n    }\n\n    const defaultHeaders = {\n      'Content-Type': 'application/json',\n      ...(token && { Authorization: `Bearer ${token}` }),\n    };\n\n    // Ensure we're using the correct backend URL for production\n    const baseUrl = API_BASE_URL || environment.api.url;\n    return fetch(`${baseUrl}/storage${endpoint}`, {\n      ...options,\n      headers: {\n        ...defaultHeaders,\n        ...options.headers,\n      },\n    });\n  }\n\n  // Upload bus image\n  static async uploadBusImage(\n    busId: string,\n    file: File\n  ): Promise<UploadResult> {\n    try {\n      console.log('🔐 Getting access token...');\n      const token = authService.getAccessToken();\n      if (!token) {\n        console.error('❌ No access token available');\n        return { success: false, error: 'Authentication required' };\n      }\n      console.log('✅ Access token obtained');\n\n      const formData = new FormData();\n      formData.append('image', file);\n      formData.append('busId', busId);\n\n      // Ensure we're using the correct backend URL for production\n      const baseUrl = API_BASE_URL || environment.api.url;\n      console.log(\n        '📤 Sending request to:',\n        `${baseUrl}/storage/upload/bus-image`\n      );\n      console.log('📋 FormData contents:', {\n        busId,\n        fileName: file.name,\n        fileSize: file.size,\n        fileType: file.type,\n      });\n\n      const response = await fetch(`${baseUrl}/storage/upload/bus-image`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: formData,\n      });\n\n      console.log('📥 Response status:', response.status);\n      console.log(\n        '📥 Response headers:',\n        Object.fromEntries(response.headers.entries())\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error('❌ Upload failed:', errorData);\n        return { success: false, error: errorData.error || 'Upload failed' };\n      }\n\n      const data = await response.json();\n      console.log('✅ Upload successful:', data);\n      return {\n        success: true,\n        url: data.url,\n        fileName: data.fileName,\n      };\n    } catch (error) {\n      console.error('❌ Upload bus image error:', error);\n      return { success: false, error: 'Network error during upload' };\n    }\n  }\n\n  // Upload driver photo\n  static async uploadDriverPhoto(\n    driverId: string,\n    file: File\n  ): Promise<UploadResult> {\n    try {\n      const token = authService.getAccessToken();\n      if (!token) {\n        return { success: false, error: 'Authentication required' };\n      }\n\n      const formData = new FormData();\n      formData.append('photo', file);\n      formData.append('driverId', driverId);\n\n      // Ensure we're using the correct backend URL for production\n      const baseUrl = API_BASE_URL || environment.api.url;\n      const response = await fetch(`${baseUrl}/storage/upload/driver-photo`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return { success: false, error: errorData.error || 'Upload failed' };\n      }\n\n      const data = await response.json();\n      return {\n        success: true,\n        url: data.url,\n        fileName: data.fileName,\n      };\n    } catch (error) {\n      console.error('Upload driver photo error:', error);\n      return { success: false, error: 'Network error during upload' };\n    }\n  }\n\n  // Upload route map\n  static async uploadRouteMap(\n    routeId: string,\n    file: File\n  ): Promise<UploadResult> {\n    try {\n      const token = authService.getAccessToken();\n      if (!token) {\n        return { success: false, error: 'Authentication required' };\n      }\n\n      const formData = new FormData();\n      formData.append('map', file);\n      formData.append('routeId', routeId);\n\n      // Ensure we're using the correct backend URL for production\n      const baseUrl = API_BASE_URL || environment.api.url;\n      const response = await fetch(`${baseUrl}/storage/upload/route-map`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return { success: false, error: errorData.error || 'Upload failed' };\n      }\n\n      const data = await response.json();\n      return {\n        success: true,\n        url: data.url,\n        fileName: data.fileName,\n      };\n    } catch (error) {\n      console.error('Upload route map error:', error);\n      return { success: false, error: 'Network error during upload' };\n    }\n  }\n\n  // Get signed URL for file access (for private bucket)\n  static async getSignedUrl(\n    type: 'bus' | 'driver' | 'route',\n    id: string\n  ): Promise<SignedUrlResult> {\n    try {\n      const response = await this.makeRequest(`/signed-url/${type}/${id}`);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return {\n          success: false,\n          error: errorData.error || 'Failed to get signed URL',\n        };\n      }\n\n      const data = await response.json();\n      return {\n        success: true,\n        signedUrl: data.signedUrl,\n        expiresIn: data.expiresIn,\n      };\n    } catch (error) {\n      console.error('Get signed URL error:', error);\n      return { success: false, error: 'Network error' };\n    }\n  }\n\n  // Delete file\n  static async deleteFile(\n    type: 'bus' | 'driver' | 'route',\n    id: string,\n    fileUrl: string\n  ): Promise<{ success: boolean; error?: string }> {\n    try {\n      const response = await this.makeRequest(`/delete/${type}/${id}`, {\n        method: 'DELETE',\n        body: JSON.stringify({ fileUrl }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return { success: false, error: errorData.error || 'Delete failed' };\n      }\n\n      return { success: true };\n    } catch (error) {\n      console.error('Delete file error:', error);\n      return { success: false, error: 'Network error during deletion' };\n    }\n  }\n\n  // Get file info\n  static async getFileInfo(\n    type: 'bus' | 'driver' | 'route',\n    id: string\n  ): Promise<FileInfo> {\n    try {\n      const response = await this.makeRequest(`/info/${type}/${id}`);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return {\n          success: false,\n          hasFile: false,\n          error: errorData.error || 'Failed to get file info',\n        };\n      }\n\n      const data = await response.json();\n      return {\n        success: true,\n        hasFile: data.hasFile,\n        url: data.url,\n        info: data.info,\n      };\n    } catch (error) {\n      console.error('Get file info error:', error);\n      return { success: false, hasFile: false, error: 'Network error' };\n    }\n  }\n\n  // List files in a folder\n  static async listFiles(\n    folder: string\n  ): Promise<{ success: boolean; files?: unknown[]; error?: string }> {\n    try {\n      const response = await this.makeRequest(`/list/${folder}`);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        return {\n          success: false,\n          error: errorData.error || 'Failed to list files',\n        };\n      }\n\n      const data = await response.json();\n      return {\n        success: true,\n        files: data.files,\n      };\n    } catch (error) {\n      console.error('List files error:', error);\n      return { success: false, error: 'Network error' };\n    }\n  }\n\n  // File validation\n  static validateFile(\n    file: File,\n    allowedTypes: string[],\n    maxSize: number\n  ): { isValid: boolean; error?: string } {\n    if (!file) {\n      return { isValid: false, error: 'No file selected' };\n    }\n\n    if (!allowedTypes.includes(file.type)) {\n      return {\n        isValid: false,\n        error: `Invalid file type. Allowed types: ${allowedTypes.join(', ')}`,\n      };\n    }\n\n    if (file.size > maxSize) {\n      return {\n        isValid: false,\n        error: `File too large. Maximum size: ${maxSize / (1024 * 1024)}MB`,\n      };\n    }\n\n    return { isValid: true };\n  }\n\n  // Validate image file\n  static validateImage(file: File): { isValid: boolean; error?: string } {\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    return this.validateFile(file, allowedTypes, maxSize);\n  }\n\n  // Validate document file\n  static validateDocument(file: File): { isValid: boolean; error?: string } {\n    const allowedTypes = [\n      'application/pdf',\n      'image/jpeg',\n      'image/jpg',\n      'image/png',\n    ];\n    const maxSize = 10 * 1024 * 1024; // 10MB\n    return this.validateFile(file, allowedTypes, maxSize);\n  }\n}\n\nexport default StorageService;\n","import { useState, useEffect } from 'react';\nimport { StorageService } from '../services/storageService';\nimport { adminApiService } from '../services/adminApiService';\n\ninterface Bus {\n  id?: string;\n  number_plate: string;\n  bus_image_url?: string;\n}\n\ninterface Driver {\n  id: string;\n  first_name: string;\n  last_name: string;\n  email?: string;\n  profile_photo_url?: string;\n}\n\ninterface Route {\n  id: string;\n  name: string;\n  route_map_url?: string;\n}\n\nexport default function MediaManagement() {\n  const [activeTab, setActiveTab] = useState<'bus' | 'driver' | 'route'>('bus');\n  const [buses, setBuses] = useState<Bus[]>([]);\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n  const [routes, setRoutes] = useState<Route[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [selectedItem, setSelectedItem] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const [busesResult, driversResult, routesResult] = await Promise.all([\n        adminApiService.getAllBuses(),\n        adminApiService.getAllDrivers(),\n        adminApiService.getAllRoutes(),\n      ]);\n\n      if (busesResult.success && busesResult.data) {\n        setBuses(busesResult.data);\n      }\n\n      if (driversResult.success && driversResult.data) {\n        // Additional frontend deduplication as safety measure\n        const uniqueDriversMap = new Map();\n        driversResult.data.forEach((driver: Driver) => {\n          const idKey = driver.id;\n\n          if (!uniqueDriversMap.has(idKey)) {\n            // First time seeing this ID\n            uniqueDriversMap.set(idKey, driver);\n          } else {\n            // We already have this ID, check if we should replace it\n            const existing = uniqueDriversMap.get(idKey);\n\n            // Prefer the entry with email over null email\n            if (!existing.email && driver.email) {\n              uniqueDriversMap.set(idKey, driver);\n            }\n            // If both have emails, prefer the one with more complete data\n            else if (existing.email && driver.email) {\n              // Keep the existing one unless the new one has more complete data\n              if (!existing.first_name && driver.first_name) {\n                uniqueDriversMap.set(idKey, driver);\n              }\n            }\n          }\n        });\n        const uniqueDrivers = Array.from(uniqueDriversMap.values());\n        setDrivers(uniqueDrivers);\n      }\n\n      if (routesResult.success && routesResult.data) {\n        setRoutes(routesResult.data);\n      }\n    } catch (err) {\n      setError('Failed to load data');\n      console.error('❌ Data loading error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      setError(null);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile || !selectedItem) {\n      setError('Please select a file and an item');\n      return;\n    }\n\n    console.log('🚀 Starting upload...', {\n      activeTab,\n      selectedItem,\n      fileName: selectedFile.name,\n      fileSize: selectedFile.size,\n      fileType: selectedFile.type,\n    });\n\n    setUploading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      let result;\n\n      switch (activeTab) {\n        case 'bus':\n          console.log('📤 Uploading bus image...');\n          result = await StorageService.uploadBusImage(\n            selectedItem,\n            selectedFile\n          );\n          break;\n        case 'driver':\n          console.log('📤 Uploading driver photo...');\n          result = await StorageService.uploadDriverPhoto(\n            selectedItem,\n            selectedFile\n          );\n          break;\n        case 'route':\n          console.log('📤 Uploading route map...');\n          result = await StorageService.uploadRouteMap(\n            selectedItem,\n            selectedFile\n          );\n          break;\n      }\n\n      console.log('📥 Upload result:', result);\n\n      if (result.success) {\n        setSuccess('File uploaded successfully!');\n        setSelectedFile(null);\n        setSelectedItem('');\n        loadData(); // Refresh the data\n      } else {\n        setError(result.error || 'Upload failed');\n        console.error('❌ Upload failed:', result.error);\n      }\n    } catch (err) {\n      setError('Upload failed. Please try again.');\n      console.error('❌ Upload error:', err);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDelete = async (itemId: string, fileUrl: string) => {\n    if (!confirm('Are you sure you want to delete this file?')) {\n      return;\n    }\n\n    try {\n      const result = await StorageService.deleteFile(\n        activeTab,\n        itemId,\n        fileUrl\n      );\n      if (result.success) {\n        setSuccess('File deleted successfully!');\n        loadData(); // Refresh the data\n      } else {\n        setError(result.error || 'Delete failed');\n      }\n    } catch (err) {\n      setError('Delete failed. Please try again.');\n      console.error('❌ Delete error:', err);\n    }\n  };\n\n  const getCurrentItems = () => {\n    switch (activeTab) {\n      case 'bus':\n        return buses;\n      case 'driver':\n        return drivers;\n      case 'route':\n        return routes;\n      default:\n        return [];\n    }\n  };\n\n  const getDisplayName = (item: Bus | Driver | Route) => {\n    switch (activeTab) {\n      case 'bus':\n        return (item as Bus).number_plate;\n      case 'driver': {\n        const driver = item as Driver;\n        return `${driver.first_name} ${driver.last_name}`;\n      }\n      case 'route':\n        return (item as Route).name;\n      default:\n        return 'Unknown';\n    }\n  };\n\n  const getFileUrl = (item: Bus | Driver | Route) => {\n    let url: string | null = null;\n\n    switch (activeTab) {\n      case 'bus':\n        url = (item as Bus).bus_image_url || null;\n        break;\n      case 'driver':\n        url = (item as Driver).profile_photo_url || null;\n        break;\n      case 'route':\n        url = (item as Route).route_map_url || null;\n        break;\n      default:\n        return null;\n    }\n\n    // If no URL, return null\n    if (!url) return null;\n\n    // If it's already a full URL, return as is\n    if (url.startsWith('http')) {\n      return url;\n    }\n\n    // If it's a file path, convert to public URL\n    if (url.includes('/')) {\n      const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\n      const bucketName = 'bus-tracking-media';\n      return `${supabaseUrl}/storage/v1/object/public/${bucketName}/${url}`;\n    }\n\n    return url;\n  };\n\n  const getTabTitle = () => {\n    switch (activeTab) {\n      case 'bus':\n        return 'Bus Images';\n      case 'driver':\n        return 'Driver Photos';\n      case 'route':\n        return 'Route Maps';\n      default:\n        return 'Media';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading media management...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"px-4 py-6 sm:px-0\">\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">\n              Media Management\n            </h1>\n\n            {/* Error/Success Messages */}\n            {error && (\n              <div className=\"mb-4 bg-red-50 border border-red-200 rounded-md p-4\">\n                <p className=\"text-red-700\">{error}</p>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"mb-4 bg-green-50 border border-green-200 rounded-md p-4\">\n                <p className=\"text-green-700\">{success}</p>\n              </div>\n            )}\n\n            {/* Tab Navigation */}\n            <div className=\"border-b border-gray-200 mb-6\">\n              <nav className=\"-mb-px flex space-x-8\">\n                {[\n                  { id: 'bus', name: 'Bus Images' },\n                  { id: 'driver', name: 'Driver Photos' },\n                  { id: 'route', name: 'Route Maps' },\n                ].map((tab) => (\n                  <button\n                    key={tab.id}\n                    onClick={() =>\n                      setActiveTab(tab.id as 'bus' | 'driver' | 'route')\n                    }\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                      activeTab === tab.id\n                        ? 'border-purple-500 text-purple-600'\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    {tab.name}\n                  </button>\n                ))}\n              </nav>\n            </div>\n\n            {/* Upload Section */}\n            <div className=\"bg-gray-50 rounded-lg p-6 mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Upload {getTabTitle()}\n              </h3>\n\n              <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\n                {/* File Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Select File\n                  </label>\n                  <input\n                    type=\"file\"\n                    onChange={handleFileSelect}\n                    accept={\n                      activeTab === 'route'\n                        ? '.pdf,.jpg,.jpeg,.png'\n                        : '.jpg,.jpeg,.png,.webp'\n                    }\n                    className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n                  />\n                  {selectedFile && (\n                    <p className=\"mt-1 text-sm text-gray-500\">\n                      Selected: {selectedFile.name} (\n                      {(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\n                    </p>\n                  )}\n                </div>\n\n                {/* Item Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Select{' '}\n                    {activeTab === 'bus'\n                      ? 'Bus'\n                      : activeTab === 'driver'\n                        ? 'Driver'\n                        : 'Route'}\n                  </label>\n                  <select\n                    value={selectedItem}\n                    onChange={(e) => setSelectedItem(e.target.value)}\n                    className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500\"\n                  >\n                    <option value=\"\">Choose...</option>\n                    {getCurrentItems().map((item) => (\n                      <option key={item.id || 'temp'} value={item.id || ''}>\n                        {getDisplayName(item)}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Upload Button */}\n                <div className=\"flex items-end\">\n                  <button\n                    onClick={handleUpload}\n                    disabled={!selectedFile || !selectedItem || uploading}\n                    className=\"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\n                  >\n                    {uploading ? 'Uploading...' : 'Upload'}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Media List */}\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Current {getTabTitle()}\n              </h3>\n\n              {getCurrentItems().length === 0 ? (\n                <p className=\"text-gray-500 text-center py-8\">\n                  No items found.\n                </p>\n              ) : (\n                <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                  {getCurrentItems().map((item) => {\n                    const fileUrl = getFileUrl(item);\n                    const displayName = getDisplayName(item);\n                    return (\n                      <div\n                        key={item.id || 'temp'}\n                        className=\"bg-white border border-gray-200 rounded-lg p-4\"\n                      >\n                        <h4 className=\"font-medium text-gray-900 mb-2\">\n                          {displayName}\n                        </h4>\n\n                        {fileUrl ? (\n                          <div>\n                            <div className=\"mb-3\">\n                              {activeTab !== 'route' ? (\n                                <img\n                                  src={fileUrl}\n                                  alt={displayName}\n                                  className=\"w-full h-32 object-cover rounded-md\"\n                                  onError={(e) => {\n                                    e.currentTarget.src =\n                                      'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4=';\n                                  }}\n                                />\n                              ) : (\n                                <div className=\"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center\">\n                                  <svg\n                                    className=\"w-8 h-8 text-gray-400\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    viewBox=\"0 0 24 24\"\n                                  >\n                                    <path\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                      strokeWidth={2}\n                                      d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                                    />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n\n                            <div className=\"flex space-x-2\">\n                              <button\n                                onClick={() => window.open(fileUrl, '_blank')}\n                                className=\"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors\"\n                              >\n                                View\n                              </button>\n                              <button\n                                onClick={() =>\n                                  item.id && handleDelete(item.id, fileUrl)\n                                }\n                                className=\"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors\"\n                                disabled={!item.id}\n                              >\n                                Delete\n                              </button>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"text-center py-4\">\n                            <p className=\"text-gray-500 text-sm mb-2\">\n                              No file uploaded\n                            </p>\n                            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                              <svg\n                                className=\"w-6 h-6 text-gray-400\"\n                                fill=\"none\"\n                                stroke=\"currentColor\"\n                                viewBox=\"0 0 24 24\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  strokeWidth={2}\n                                  d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n                                />\n                              </svg>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// Coordinate utilities for the bus management system\n\nexport interface Location {\n  name: string;\n  coordinates: [number, number]; // [longitude, latitude]\n  address: string;\n  city: string;\n}\n\n// Ganpat University coordinates (verified from distancesfrom.com)\nexport const GANPAT_UNIVERSITY: Location = {\n  name: 'Ganpat University',\n  coordinates: [72.4563, 23.5295], // [longitude, latitude] - Correct coordinates\n  address: 'Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012',\n  city: 'Mehsana',\n};\n\n// Common cities in Gujarat for reference\nexport const GUJARAT_CITIES: Location[] = [\n  {\n    name: 'Ahmedabad',\n    coordinates: [72.5714, 23.0225],\n    address: 'Ahmedabad, Gujarat, India',\n    city: 'Ahmedabad',\n  },\n  {\n    name: 'Gandhinagar',\n    coordinates: [72.6369, 23.2154], // Gandhinagar coordinates (different from Ganpat University)\n    address: 'Gandhinagar, Gujarat, India',\n    city: 'Gandhinagar',\n  },\n  {\n    name: 'Vadodara',\n    coordinates: [73.1811, 22.3072],\n    address: 'Vadodara, Gujarat, India',\n    city: 'Vadodara',\n  },\n  {\n    name: 'Surat',\n    coordinates: [72.8311, 21.1702],\n    address: 'Surat, Gujarat, India',\n    city: 'Surat',\n  },\n  {\n    name: 'Rajkot',\n    coordinates: [70.8022, 22.3039],\n    address: 'Rajkot, Gujarat, India',\n    city: 'Rajkot',\n  },\n];\n\n// Function to verify coordinates\nexport const verifyCoordinates = (coordinates: [number, number]): boolean => {\n  const [lng, lat] = coordinates;\n\n  // Check if coordinates are within reasonable bounds for Gujarat, India\n  return lng >= 68 && lng <= 75 && lat >= 20 && lat <= 25;\n};\n\n// Function to get distance between two points (Haversine formula)\nexport const calculateDistance = (\n  point1: [number, number],\n  point2: [number, number]\n): number => {\n  const R = 6371; // Earth's radius in km\n  const dLat = ((point2[1] - point1[1]) * Math.PI) / 180;\n  const dLon = ((point2[0] - point1[0]) * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((point1[1] * Math.PI) / 180) *\n      Math.cos((point2[1] * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\n// Function to format coordinates for display\nexport const formatCoordinates = (coordinates: [number, number]): string => {\n  const [lng, lat] = coordinates;\n  return `${lat.toFixed(6)}, ${lng.toFixed(6)}`;\n};\n\n// Function to get location name from coordinates (approximate)\nexport const getLocationName = (coordinates: [number, number]): string => {\n  const [lng, lat] = coordinates;\n\n  // Check if it's Ganpat University (correct coordinates)\n  if (Math.abs(lng - 72.4563) < 0.01 && Math.abs(lat - 23.5295) < 0.01) {\n    return 'Ganpat University';\n  }\n\n  // Check other known locations\n  for (const city of GUJARAT_CITIES) {\n    if (\n      Math.abs(lng - city.coordinates[0]) < 0.1 &&\n      Math.abs(lat - city.coordinates[1]) < 0.1\n    ) {\n      return city.name;\n    }\n  }\n\n  return 'Unknown Location';\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport { GANPAT_UNIVERSITY } from '../utils/coordinates';\n\ninterface MapSelectorProps {\n  onLocationSelect: (location: {\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  }) => void;\n  onClose: () => void;\n  title: string;\n  defaultCenter?: [number, number];\n  searchPlaceholder?: string;\n}\n\nconst MapSelector: React.FC<MapSelectorProps> = ({\n  onLocationSelect,\n  onClose,\n  title,\n  defaultCenter = GANPAT_UNIVERSITY.coordinates, // Ganpat University coordinates\n  searchPlaceholder = 'Search for a location...',\n}) => {\n  // Prevent multiple instances\n  const instanceId = React.useRef(Math.random().toString(36).substr(2, 9));\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<maplibregl.Map | null>(null);\n  const marker = useRef<maplibregl.Marker | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedLocation, setSelectedLocation] = useState<{\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  } | null>(null);\n  const [isMapLoading, setIsMapLoading] = useState(true);\n  const [mapError, setMapError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!mapContainer.current || map.current) return; // Prevent multiple initializations\n\n    console.log(\n      `🗺️ [${instanceId.current}] Initializing map with center:`,\n      defaultCenter\n    );\n    console.log(\n      `🗺️ [${instanceId.current}] Ganpat University coordinates:`,\n      GANPAT_UNIVERSITY.coordinates\n    );\n\n    // Initialize map\n    map.current = new maplibregl.Map({\n      container: mapContainer.current,\n      style: {\n        version: 8,\n        sources: {\n          osm: {\n            type: 'raster',\n            tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n            tileSize: 256,\n            attribution: '© OpenStreetMap contributors',\n          },\n        },\n        layers: [\n          {\n            id: 'osm-tiles',\n            type: 'raster',\n            source: 'osm',\n            minzoom: 0,\n            maxzoom: 22,\n          },\n        ],\n      },\n      center: GANPAT_UNIVERSITY.coordinates, // Ganpat University coordinates\n      zoom: 12,\n      preserveDrawingBuffer: true, // Help with WebGL context stability\n      antialias: false, // Reduce GPU load\n      maxZoom: 18,\n      minZoom: 5,\n      maxPitch: 0, // Disable 3D to reduce GPU load\n      pitch: 0,\n    });\n\n    // Wait for map to load before adding controls and markers\n    map.current.on('load', () => {\n      console.log('🗺️ Map loaded, adding controls and marker');\n\n      try {\n        // Add navigation controls\n        map.current?.addControl(new maplibregl.NavigationControl());\n\n        // Add marker at default center\n        marker.current = new maplibregl.Marker({\n          draggable: true,\n          color: '#3B82F6',\n        })\n          .setLngLat(defaultCenter)\n          .addTo(map.current!);\n\n        // Force center the map on Ganpat University\n        map.current!.flyTo({\n          center: GANPAT_UNIVERSITY.coordinates, // Ganpat University\n          zoom: 12,\n          duration: 1000,\n        });\n\n        // Set initial selected location to Ganpat University\n        setSelectedLocation({\n          name: GANPAT_UNIVERSITY.name,\n          coordinates: GANPAT_UNIVERSITY.coordinates,\n          address: GANPAT_UNIVERSITY.address,\n        });\n\n        // Handle marker drag after marker is created\n        marker.current.on('dragend', () => {\n          const coordinates = marker.current?.getLngLat();\n          if (coordinates) {\n            reverseGeocode([coordinates.lng, coordinates.lat]);\n          }\n        });\n\n        console.log(\n          `🗺️ [${instanceId.current}] Map centered on ${GANPAT_UNIVERSITY.name}`\n        );\n\n        setIsMapLoading(false);\n      } catch (error) {\n        console.error('❌ Error setting up map:', error);\n        setMapError('Failed to initialize map');\n        setIsMapLoading(false);\n      }\n    });\n\n    // Handle map errors\n    map.current.on('error', (e) => {\n      console.error('❌ Map error:', e);\n      setMapError('Map failed to load');\n      setIsMapLoading(false);\n    });\n\n    // Handle map clicks\n    map.current.on('click', (e) => {\n      const coordinates: [number, number] = [e.lngLat.lng, e.lngLat.lat];\n      marker.current?.setLngLat(coordinates);\n\n      // Reverse geocode to get address\n      reverseGeocode(coordinates);\n    });\n\n    // Handle WebGL context loss\n    map.current.on('webglcontextlost', () => {\n      console.warn('⚠️ WebGL context lost, attempting to restore...');\n    });\n\n    map.current.on('webglcontextrestored', () => {\n      console.log('✅ WebGL context restored');\n    });\n\n    return () => {\n      if (map.current) {\n        console.log('🗺️ Cleaning up map instance');\n        try {\n          // Remove all event listeners\n          map.current.off('load', () => {});\n          map.current.off('click', () => {});\n          map.current.off('error', () => {});\n          map.current.off('webglcontextlost', () => {});\n          map.current.off('webglcontextrestored', () => {});\n\n          // Remove marker\n          if (marker.current) {\n            marker.current.remove();\n          }\n\n          // Remove map\n          map.current.remove();\n        } catch (error) {\n          console.warn('⚠️ Error during map cleanup:', error);\n        } finally {\n          map.current = null;\n          marker.current = null;\n        }\n      }\n    };\n  }, [defaultCenter]); // Include defaultCenter dependency\n\n  const reverseGeocode = async (coordinates: [number, number]) => {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${coordinates[1]}&lon=${coordinates[0]}&zoom=18&addressdetails=1`\n      );\n      const data = await response.json();\n\n      const location = {\n        name: data.display_name.split(',')[0] || 'Selected Location',\n        coordinates: coordinates,\n        address: data.display_name,\n      };\n\n      setSelectedLocation(location);\n    } catch (error) {\n      console.error('Error reverse geocoding:', error);\n      setSelectedLocation({\n        name: 'Selected Location',\n        coordinates: coordinates,\n        address: `${coordinates[1]}, ${coordinates[0]}`,\n      });\n    }\n  };\n\n  const searchLocation = async () => {\n    if (!searchQuery.trim() || !map.current) return;\n\n    try {\n      console.log('🔍 Searching for:', searchQuery);\n\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchQuery)}&limit=5&countrycodes=in`\n      );\n      const data = await response.json();\n\n      console.log('🔍 Search results:', data);\n\n      if (data.length > 0) {\n        const firstResult = data[0];\n        const coordinates: [number, number] = [\n          parseFloat(firstResult.lon),\n          parseFloat(firstResult.lat),\n        ];\n\n        console.log('🗺️ Flying to coordinates:', coordinates);\n\n        map.current!.flyTo({\n          center: coordinates,\n          zoom: 15,\n        });\n\n        marker.current?.setLngLat(coordinates);\n\n        const location = {\n          name: firstResult.display_name.split(',')[0] || searchQuery,\n          coordinates: coordinates,\n          address: firstResult.display_name,\n        };\n\n        setSelectedLocation(location);\n      } else {\n        console.log('🔍 No search results found');\n      }\n    } catch (error) {\n      console.error('❌ Error searching location:', error);\n    }\n  };\n\n  const handleConfirm = () => {\n    if (selectedLocation) {\n      onLocationSelect(selectedLocation);\n      onClose();\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      searchLocation();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"p-4 border-b\">\n          <div className=\"flex gap-2 mb-2\">\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder={searchPlaceholder}\n              className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n            <button\n              onClick={searchLocation}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              Search\n            </button>\n          </div>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => {\n                if (map.current) {\n                  console.log(\n                    '🏫 Resetting to Ganpat University at coordinates:',\n                    GANPAT_UNIVERSITY.coordinates\n                  );\n                  map.current!.flyTo({\n                    center: GANPAT_UNIVERSITY.coordinates, // Ganpat University\n                    zoom: 12,\n                  });\n                  marker.current?.setLngLat(GANPAT_UNIVERSITY.coordinates);\n                  setSelectedLocation({\n                    name: GANPAT_UNIVERSITY.name,\n                    coordinates: GANPAT_UNIVERSITY.coordinates,\n                    address: GANPAT_UNIVERSITY.address,\n                  });\n                }\n              }}\n              className=\"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500\"\n            >\n              🏫 Reset to Ganpat University\n            </button>\n          </div>\n        </div>\n\n        {/* Map Container */}\n        <div className=\"flex-1 relative\">\n          {isMapLoading && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 z-10\">\n              <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\n                <p className=\"text-gray-600\">Loading map...</p>\n              </div>\n            </div>\n          )}\n\n          {mapError && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-red-50 z-10\">\n              <div className=\"text-center\">\n                <p className=\"text-red-600 mb-2\">⚠️ {mapError}</p>\n                <button\n                  onClick={() => {\n                    setMapError(null);\n                    setIsMapLoading(true);\n                    // Force re-initialization\n                    if (map.current) {\n                      map.current.remove();\n                      map.current = null;\n                      marker.current = null;\n                    }\n                    // Trigger useEffect again\n                    const container = mapContainer.current;\n                    if (container) {\n                      container.innerHTML = '';\n                    }\n                  }}\n                  className=\"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n                >\n                  Retry\n                </button>\n              </div>\n            </div>\n          )}\n\n          <div ref={mapContainer} className=\"w-full h-full\" />\n        </div>\n\n        {/* Selected Location Info */}\n        {selectedLocation && (\n          <div className=\"p-4 border-t bg-gray-50\">\n            <div className=\"mb-4\">\n              <h3 className=\"font-semibold text-gray-800 mb-2\">\n                Selected Location:\n              </h3>\n              <p className=\"text-gray-700 font-medium\">\n                {selectedLocation.name}\n              </p>\n              {selectedLocation.address && (\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  {selectedLocation.address}\n                </p>\n              )}\n              <p className=\"text-sm text-gray-500 mt-1\">\n                Coordinates: {selectedLocation.coordinates[1].toFixed(6)},{' '}\n                {selectedLocation.coordinates[0].toFixed(6)}\n              </p>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <button\n                onClick={handleConfirm}\n                className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500\"\n              >\n                Confirm Selection\n              </button>\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MapSelector;\n","import { useState, useEffect, useCallback } from 'react';\nimport { adminApiService } from '../services/adminApiService';\n\nimport MapSelector from './MapSelector';\n\ninterface Bus {\n  id?: string;\n  code: string;\n  number_plate: string;\n  capacity: number;\n  model?: string;\n  year?: number;\n  is_active: boolean;\n  assigned_driver_id?: string;\n  route_id?: string;\n  // Driver information from backend join\n  driver_id?: string;\n  driver_full_name?: string;\n  driver_email?: string;\n  driver_first_name?: string;\n  driver_last_name?: string;\n  // Route information from backend join\n  route_name?: string;\n}\n\ninterface Driver {\n  id: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone?: string;\n  role: string;\n  assigned_bus_id?: string;\n}\n\ninterface AssignedDriver {\n  driver_id: string;\n  driver_name: string;\n  driver_email: string;\n  bus_id: string;\n  bus_code: string;\n  number_plate: string;\n  route_name?: string;\n}\n\ninterface Route {\n  id: string;\n  name: string;\n  description: string;\n  distance_km: number;\n  estimated_duration_minutes: number;\n  is_active: boolean;\n  city?: string;\n  origin?: string;\n  destination?: string;\n  custom_destination?: string;\n  custom_origin?: string;\n  destination_coordinates?: {\n    coordinates: [number, number];\n  };\n  origin_coordinates?: {\n    coordinates: [number, number];\n  };\n  bus_stops?: Array<{\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  }>;\n  current_eta_minutes?: number;\n  last_eta_calculation?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport default function StreamlinedManagement() {\n  const [activeTab, setActiveTab] = useState<'buses' | 'drivers' | 'routes'>(\n    'buses'\n  );\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n  const [buses, setBuses] = useState<Bus[]>([]);\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n\n  const [assignedDrivers, setAssignedDrivers] = useState<AssignedDriver[]>([]);\n  const [routes, setRoutes] = useState<Route[]>([]);\n\n  const [showBusForm, setShowBusForm] = useState(false);\n  const [showDriverForm, setShowDriverForm] = useState(false);\n  const [showCreateDriverForm, setShowCreateDriverForm] = useState(false);\n  const [showRouteForm, setShowRouteForm] = useState(false);\n\n  // Modal states for details and editing\n  const [showBusDetails, setShowBusDetails] = useState(false);\n  const [showRouteDetails, setShowRouteDetails] = useState(false);\n  const [selectedBus, setSelectedBus] = useState<Bus | null>(null);\n  const [selectedRoute, setSelectedRoute] = useState<Route | null>(null);\n  const [editingBus, setEditingBus] = useState(false);\n  const [editingRoute, setEditingRoute] = useState(false);\n\n  const [busForm, setBusForm] = useState({\n    code: '',\n    number_plate: '',\n    capacity: 50,\n    model: '',\n    year: new Date().getFullYear(),\n    is_active: true,\n  });\n\n  const [driverForm, setDriverForm] = useState({\n    email: '',\n    first_name: '',\n    last_name: '',\n    phone: '',\n    role: 'driver',\n    assigned_bus_id: '',\n  });\n\n  const [createDriverForm, setCreateDriverForm] = useState({\n    email: '',\n    first_name: '',\n    last_name: '',\n    phone: '',\n    password: '',\n    confirm_password: '',\n  });\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n  const [selectedSupabaseDriver, setSelectedSupabaseDriver] =\n    useState<string>('');\n\n  const [routeForm, setRouteForm] = useState({\n    name: '',\n    description: '',\n    distance_km: '',\n    estimated_duration_minutes: '',\n    is_active: true,\n    city: '',\n  });\n\n  const [showMapSelector, setShowMapSelector] = useState(false);\n  const [mapSelectorType, setMapSelectorType] = useState<\n    'destination' | 'origin'\n  >('destination');\n  const [selectedDestination, setSelectedDestination] = useState<{\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  } | null>(null);\n  const [selectedOrigin, setSelectedOrigin] = useState<{\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  } | null>(null);\n\n  const loadAllData = useCallback(async () => {\n    // console.log('🔄 Starting to load all data...');\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Load core data first\n      const [busesResult, driversResult, routesResult] = await Promise.all([\n        adminApiService.getAllBuses(),\n        adminApiService.getAllDrivers(),\n        adminApiService.getAllRoutes(),\n      ]);\n\n      if (busesResult.success && busesResult.data) setBuses(busesResult.data);\n      if (driversResult.success && driversResult.data) {\n        // Additional frontend deduplication as safety measure\n        const uniqueDriversMap = new Map();\n        driversResult.data.forEach((driver: Driver) => {\n          const idKey = driver.id;\n\n          if (!uniqueDriversMap.has(idKey)) {\n            // First time seeing this ID\n            uniqueDriversMap.set(idKey, driver);\n          } else {\n            // We already have this ID, check if we should replace it\n            const existing = uniqueDriversMap.get(idKey);\n\n            // Prefer the entry with email over null email\n            if (!existing.email && driver.email) {\n              uniqueDriversMap.set(idKey, driver);\n            }\n            // If both have emails, prefer the one with more complete data\n            else if (existing.email && driver.email) {\n              // Keep the existing one unless the new one has more complete data\n              if (!existing.first_name && driver.first_name) {\n                uniqueDriversMap.set(idKey, driver);\n              }\n            }\n          }\n        });\n        const uniqueDrivers = Array.from(uniqueDriversMap.values());\n        setDrivers(uniqueDrivers);\n      }\n      if (routesResult.success && routesResult.data) {\n        // console.log('🔍 Routes loaded:', routesResult.data);\n        // console.log(\n        //   '🔍 Routes with city info:',\n        //   routesResult.data.map((route) => ({\n        //     id: route.id,\n        //     name: route.name,\n        //     city: route.city,\n        //     cityType: typeof route.city,\n        //   }))\n        // );\n        setRoutes(routesResult.data);\n      }\n\n      // console.log('✅ Core data loaded successfully');\n\n      // Backend API already loaded drivers above, no need for separate Supabase loading\n      // console.log('✅ Using backend API drivers data');\n\n      // Load assigned drivers\n      await loadAssignedDrivers();\n\n      if (\n        !busesResult.success ||\n        !driversResult.success ||\n        !routesResult.success\n      ) {\n        setError('Failed to load some data');\n      }\n    } catch (err) {\n      setError('An error occurred while loading data');\n      console.error('❌ Data loading error:', err);\n    } finally {\n      // console.log('🏁 Finished loading data');\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadAllData();\n  }, [loadAllData]);\n\n  const loadAssignedDrivers = async () => {\n    try {\n      const result = await adminApiService.getAssignedDrivers();\n      if (result.success && result.data) {\n        // Additional frontend deduplication as safety measure\n        const uniqueAssignedDriversMap = new Map();\n        result.data.forEach((driver: AssignedDriver) => {\n          const idKey = driver.driver_id;\n\n          if (!uniqueAssignedDriversMap.has(idKey)) {\n            // First time seeing this ID\n            uniqueAssignedDriversMap.set(idKey, driver);\n          } else {\n            // We already have this ID, check if we should replace it\n            const existing = uniqueAssignedDriversMap.get(idKey);\n\n            // Prefer the entry with email over null email\n            if (!existing.driver_email && driver.driver_email) {\n              uniqueAssignedDriversMap.set(idKey, driver);\n            }\n            // If both have emails, prefer the one with more complete data\n            else if (existing.driver_email && driver.driver_email) {\n              // Keep the existing one unless the new one has more complete data\n              if (!existing.driver_name && driver.driver_name) {\n                uniqueAssignedDriversMap.set(idKey, driver);\n              }\n            }\n          }\n        });\n        const uniqueAssignedDrivers = Array.from(\n          uniqueAssignedDriversMap.values()\n        );\n        setAssignedDrivers(uniqueAssignedDrivers);\n        // console.log('✅ Assigned drivers loaded:', uniqueAssignedDrivers.length);\n      } else {\n        console.warn('⚠️ Failed to load assigned drivers:', result.error);\n        setAssignedDrivers([]);\n      }\n    } catch (error) {\n      console.warn('⚠️ Failed to load assigned drivers:', error);\n      setAssignedDrivers([]);\n    }\n  };\n\n  // Bus Management Functions\n  const handleCreateBus = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    // Check for duplicates before submitting\n    const existingBus = buses.find(\n      (bus) =>\n        bus.code === busForm.code || bus.number_plate === busForm.number_plate\n    );\n\n    if (existingBus) {\n      setError(\n        `Bus with code '${busForm.code}' or number plate '${busForm.number_plate}' already exists`\n      );\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const result = await adminApiService.createBus(busForm);\n      if (result.success && result.data) {\n        setBuses([...buses, result.data]);\n        setBusForm({\n          code: '',\n          number_plate: '',\n          capacity: 50,\n          model: '',\n          year: new Date().getFullYear(),\n          is_active: true,\n        });\n        setShowBusForm(false);\n        setSuccessMessage('Bus created successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to create bus');\n      }\n    } catch (err) {\n      setError('An error occurred while creating bus');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteBus = async (busId: string) => {\n    if (!confirm('Are you sure you want to delete this bus?')) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.deleteBus(busId);\n      if (result.success) {\n        setBuses(buses.filter((bus) => bus.id !== busId));\n        setSuccessMessage('Bus deleted successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to delete bus');\n      }\n    } catch (err) {\n      setError('An error occurred while deleting bus');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAssignRouteToBus = async (busId: string, routeId: string) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.updateBus(busId, {\n        route_id: routeId,\n      });\n      if (result.success && result.data) {\n        setBuses(\n          buses.map((bus) =>\n            bus.id === busId ? { ...bus, route_id: routeId } : bus\n          )\n        );\n        setSuccessMessage('Route assigned to bus successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to assign route to bus');\n      }\n    } catch (err) {\n      setError('An error occurred while assigning route to bus');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Driver Management Functions\n\n  const handleCreateDriver = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    // Enhanced validation\n    if (\n      !createDriverForm.email ||\n      !createDriverForm.first_name ||\n      !createDriverForm.last_name ||\n      !createDriverForm.password\n    ) {\n      setError(\n        'All fields are required: Email, First Name, Last Name, and Password'\n      );\n      setLoading(false);\n      return;\n    }\n\n    // Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(createDriverForm.email)) {\n      setError('Please enter a valid email address');\n      setLoading(false);\n      return;\n    }\n\n    // Validate password\n    if (createDriverForm.password !== createDriverForm.confirm_password) {\n      setError('Passwords do not match');\n      setLoading(false);\n      return;\n    }\n\n    if (createDriverForm.password.length < 6) {\n      setError('Password must be at least 6 characters long');\n      setLoading(false);\n      return;\n    }\n\n    // Check if email already exists in current drivers list\n    const existingDriver = drivers.find(\n      (driver) => driver.email === createDriverForm.email\n    );\n\n    if (existingDriver) {\n      setError('Driver with this email already exists');\n      setLoading(false);\n      return;\n    }\n\n    // Prevent duplicate submissions\n    if (loading) {\n      return;\n    }\n\n    try {\n      const driverData = {\n        email: createDriverForm.email,\n        first_name: createDriverForm.first_name,\n        last_name: createDriverForm.last_name,\n        phone: createDriverForm.phone,\n        role: 'driver',\n        password: createDriverForm.password,\n      };\n\n      const result = await adminApiService.createDriver(driverData);\n\n      if (result.success && result.data) {\n        // Refresh the entire driver list to get the latest data\n        const driversResult = await adminApiService.getAllDrivers();\n        if (driversResult.success && driversResult.data) {\n          // Additional frontend deduplication as safety measure\n          const uniqueDriversMap = new Map();\n          driversResult.data.forEach((driver: Driver) => {\n            const idKey = driver.id;\n\n            if (!uniqueDriversMap.has(idKey)) {\n              // First time seeing this ID\n              uniqueDriversMap.set(idKey, driver);\n            } else {\n              // We already have this ID, check if we should replace it\n              const existing = uniqueDriversMap.get(idKey);\n\n              // Prefer the entry with email over null email\n              if (!existing.email && driver.email) {\n                uniqueDriversMap.set(idKey, driver);\n              }\n              // If both have emails, prefer the one with more complete data\n              else if (existing.email && driver.email) {\n                // Keep the existing one unless the new one has more complete data\n                if (!existing.first_name && driver.first_name) {\n                  uniqueDriversMap.set(idKey, driver);\n                }\n              }\n            }\n          });\n          const uniqueDrivers = Array.from(uniqueDriversMap.values());\n          setDrivers(uniqueDrivers);\n        }\n\n        // Reset form\n        setCreateDriverForm({\n          email: '',\n          first_name: '',\n          last_name: '',\n          phone: '',\n          password: '',\n          confirm_password: '',\n        });\n        setShowPassword(false);\n        setShowConfirmPassword(false);\n        setShowCreateDriverForm(false);\n\n        setSuccessMessage(\n          `Driver ${result.data.first_name} ${result.data.last_name} created successfully! They can now login with their credentials.`\n        );\n        setTimeout(() => setSuccessMessage(null), 5000);\n      } else {\n        setError(result.error || 'Failed to create driver');\n      }\n    } catch (err) {\n      setError('An error occurred while creating driver');\n      console.error('❌ Error creating driver:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAssignBusToDriver = async (driverId: string, busId: string) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.assignDriverToBus(driverId, busId);\n      if (result.success && result.data) {\n        // Reload all data to get the updated state from the server\n        await loadAllData();\n        setSuccessMessage('Bus assigned to driver successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to assign bus to driver');\n      }\n    } catch (err) {\n      setError('An error occurred while assigning bus to driver');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUnassignDriver = async (driverId: string) => {\n    if (!confirm('Are you sure you want to unassign this driver?')) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.unassignDriverFromBus(driverId);\n      if (result.success) {\n        // Reload all data to get the updated state from the server\n        await loadAllData();\n        setSuccessMessage('Driver unassigned successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to unassign driver');\n      }\n    } catch (err) {\n      setError('An error occurred while unassigning driver');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteDriver = async (\n    driverId: string,\n    firstName: string,\n    lastName: string\n  ) => {\n    const driverName = `${firstName} ${lastName}`;\n    const confirmMessage = `Are you sure you want to delete driver \"${driverName}\"?\\n\\nThis action will:\\n• Remove the driver from all database tables\\n• Delete their Supabase Auth account\\n• Unassign them from any buses\\n• This action cannot be undone!`;\n\n    if (!confirm(confirmMessage)) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.deleteDriver(driverId);\n      if (result.success && result.data) {\n        // Remove driver from local state\n        setDrivers(drivers.filter((driver) => driver.id !== driverId));\n        setAssignedDrivers(\n          assignedDrivers.filter((assigned) => assigned.driver_id !== driverId)\n        );\n\n        setSuccessMessage(\n          `Driver \"${driverName}\" deleted successfully from all systems!`\n        );\n        setTimeout(() => setSuccessMessage(null), 5000);\n      } else {\n        setError(result.error || `Failed to delete driver \"${driverName}\"`);\n      }\n    } catch (err) {\n      setError(`An error occurred while deleting driver \"${driverName}\"`);\n      console.error('❌ Error deleting driver:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Route Management Functions\n  const handleCreateRoute = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    // Validate required fields\n    if (!routeForm.name.trim()) {\n      setError('Route name is required');\n      setLoading(false);\n      return;\n    }\n    if (!routeForm.city.trim()) {\n      setError('City is required');\n      setLoading(false);\n      return;\n    }\n    if (!routeForm.description.trim()) {\n      setError('Route description is required');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const routeData = {\n        ...routeForm,\n        distance_km: parseFloat(routeForm.distance_km) || 0,\n        estimated_duration_minutes:\n          parseInt(routeForm.estimated_duration_minutes) || 0,\n        custom_destination: selectedDestination?.name,\n        custom_destination_coordinates: selectedDestination?.coordinates,\n        custom_origin: selectedOrigin?.name,\n        custom_origin_coordinates: selectedOrigin?.coordinates,\n        bus_stops: [],\n      };\n\n      const result = await adminApiService.createRoute(routeData);\n      if (result.success && result.data) {\n        setRoutes([...routes, result.data]);\n        setRouteForm({\n          name: '',\n          description: '',\n          distance_km: '',\n          estimated_duration_minutes: '',\n          is_active: true,\n          city: '',\n        });\n        setSelectedDestination(null);\n        setSelectedOrigin(null);\n        setShowRouteForm(false);\n        setSuccessMessage('Route created successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to create route');\n      }\n    } catch (err) {\n      setError('An error occurred while creating route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteRoute = async (routeId: string) => {\n    if (!confirm('Are you sure you want to delete this route?')) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.deleteRoute(routeId);\n      if (result.success) {\n        setRoutes(routes.filter((route) => route.id !== routeId));\n        setSuccessMessage('Route deleted successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to delete route');\n      }\n    } catch (err) {\n      setError('An error occurred while deleting route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getRouteName = (routeId?: string) => {\n    if (!routeId) return 'Not Assigned';\n    const route = routes.find((r) => r.id === routeId);\n    if (!route) return 'Unknown Route';\n\n    // Format: City → Destination\n    const city = route.city || 'Unknown City';\n    const destination = route.destination || 'Ganpat University';\n    return `${city} → ${destination}`;\n  };\n\n  const handleMapSelectorOpen = (type: 'destination' | 'origin') => {\n    setMapSelectorType(type);\n    setShowMapSelector(true);\n  };\n\n  const handleLocationSelect = (location: {\n    name: string;\n    coordinates: [number, number];\n    address?: string;\n  }) => {\n    if (mapSelectorType === 'destination') {\n      setSelectedDestination(location);\n    } else {\n      setSelectedOrigin(location);\n    }\n  };\n\n  const getDriverName = (driverId?: string) => {\n    if (!driverId) return 'Not Assigned';\n    const driver = drivers.find((d) => d.id === driverId);\n    return driver\n      ? `${driver.first_name} ${driver.last_name}`\n      : 'Unknown Driver';\n  };\n\n  const getDriverNameFromBus = (bus: Bus) => {\n    // console.log('🔍 Getting driver name for bus:', {\n    //   driver_full_name: bus.driver_full_name,\n    //   driver_first_name: bus.driver_first_name,\n    //   driver_last_name: bus.driver_last_name,\n    //   assigned_driver_id: bus.assigned_driver_id,\n    // });\n\n    if (bus.driver_full_name) {\n      return bus.driver_full_name;\n    }\n    if (bus.driver_first_name && bus.driver_last_name) {\n      return `${bus.driver_first_name} ${bus.driver_last_name}`;\n    }\n    if (bus.assigned_driver_id) {\n      return getDriverName(bus.assigned_driver_id);\n    }\n    return 'Not Assigned';\n  };\n\n  const getBusPlate = (busId?: string) => {\n    if (!busId) return 'Not Assigned';\n    const bus = buses.find((b) => b.id === busId);\n    return bus ? bus.number_plate : 'Unknown Bus';\n  };\n\n  // Modal and Edit Handlers\n  const handleViewBusDetails = (bus: Bus) => {\n    // console.log('🔍 Bus details for modal:', bus);\n    setSelectedBus(bus);\n    setEditingBus(false);\n    setShowBusDetails(true);\n  };\n\n  const handleEditBus = (bus: Bus) => {\n    setSelectedBus(bus);\n    setBusForm({\n      code: bus.code,\n      number_plate: bus.number_plate,\n      capacity: bus.capacity,\n      model: bus.model || '',\n      year: bus.year || new Date().getFullYear(),\n      is_active: bus.is_active,\n    });\n    setEditingBus(true);\n    setShowBusDetails(true);\n  };\n\n  const handleViewRouteDetails = (route: Route) => {\n    setSelectedRoute(route);\n    setEditingRoute(false);\n    setShowRouteDetails(true);\n  };\n\n  const handleEditRoute = (route: Route) => {\n    setSelectedRoute(route);\n    setRouteForm({\n      name: route.name,\n      description: route.description,\n      distance_km: route.distance_km.toString(),\n      estimated_duration_minutes: route.estimated_duration_minutes.toString(),\n      is_active: route.is_active,\n      city: route.city || '',\n    });\n    setEditingRoute(true);\n    setShowRouteDetails(true);\n  };\n\n  const handleUpdateBus = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedBus?.id) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await adminApiService.updateBus(selectedBus.id, busForm);\n      if (result.success && result.data) {\n        setBuses(\n          buses.map((bus) => (bus.id === selectedBus.id ? result.data! : bus))\n        );\n        setShowBusDetails(false);\n        setEditingBus(false);\n        setSelectedBus(null);\n        setSuccessMessage('Bus updated successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to update bus');\n      }\n    } catch (err) {\n      setError('An error occurred while updating bus');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateRoute = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedRoute?.id) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const routeData = {\n        ...routeForm,\n        distance_km: parseFloat(routeForm.distance_km) || 0,\n        estimated_duration_minutes:\n          parseInt(routeForm.estimated_duration_minutes) || 0,\n      };\n\n      const result = await adminApiService.updateRoute(\n        selectedRoute.id,\n        routeData\n      );\n      if (result.success && result.data) {\n        setRoutes(\n          routes.map((route) =>\n            route.id === selectedRoute.id ? result.data! : route\n          )\n        );\n        setShowRouteDetails(false);\n        setEditingRoute(false);\n        setSelectedRoute(null);\n        setSuccessMessage('Route updated successfully!');\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(result.error || 'Failed to update route');\n      }\n    } catch (err) {\n      setError('An error occurred while updating route');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600\"></div>\n        <span className=\"ml-2 text-gray-600\">Loading management data...</span>\n        <p className=\"text-sm text-gray-500 mt-2\">\n          This may take a few moments\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              🚍 Streamlined System Management\n            </h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Manage buses, drivers, and routes in one unified interface\n            </p>\n          </div>\n          <button\n            onClick={loadAllData}\n            className=\"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors\"\n          >\n            🔄 Refresh Data\n          </button>\n        </div>\n\n        {/* Success/Error Messages */}\n        {successMessage && (\n          <div className=\"mb-4 p-4 bg-green-50 border border-green-200 rounded-md\">\n            <p className=\"text-green-800\">{successMessage}</p>\n          </div>\n        )}\n\n        {error && (\n          <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n            <p className=\"text-red-800\">{error}</p>\n          </div>\n        )}\n\n        {/* Tab Navigation */}\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('buses')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'buses'\n                  ? 'border-purple-500 text-purple-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              🚌 Buses ({buses.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('drivers')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'drivers'\n                  ? 'border-purple-500 text-purple-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              👨‍💼 Drivers ({drivers.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('routes')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'routes'\n                  ? 'border-purple-500 text-purple-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              🗺️ Routes ({routes.length})\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      {/* Bus Management Tab */}\n      {activeTab === 'buses' && (\n        <div className=\"space-y-6\">\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Bus Management\n              </h3>\n              <div className=\"flex space-x-2\">\n                {/* {selectedBuses.size > 0 && (\n                  <button\n                    onClick={handleBulkDeleteBuses}\n                    disabled={loading}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50\"\n                  >\n                    🗑️ Delete Selected ({selectedBuses.size})\n                  </button>\n                )} */}\n                <button\n                  onClick={() => setShowBusForm(!showBusForm)}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\n                >\n                  {showBusForm ? '❌ Cancel' : '➕ Add New Bus'}\n                </button>\n              </div>\n            </div>\n\n            {showBusForm && (\n              <form\n                onSubmit={handleCreateBus}\n                className=\"mb-6 p-4 bg-gray-50 rounded-lg\"\n              >\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Bus Code *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={busForm.code}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, code: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., BUS-2024-001\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Number Plate *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={busForm.number_plate}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, number_plate: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., GJ-01-AB-1234\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Capacity *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      value={busForm.capacity}\n                      onChange={(e) =>\n                        setBusForm({\n                          ...busForm,\n                          capacity: parseInt(e.target.value),\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"1\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Model\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={busForm.model}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, model: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., Mercedes-Benz\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Year\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={busForm.year}\n                      onChange={(e) =>\n                        setBusForm({\n                          ...busForm,\n                          year: parseInt(e.target.value),\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"2000\"\n                      max={new Date().getFullYear() + 1}\n                    />\n                  </div>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={busForm.is_active}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, is_active: e.target.checked })\n                      }\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 text-sm text-gray-700\">Active</label>\n                  </div>\n                </div>\n                <div className=\"mt-4 flex justify-end\">\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                  >\n                    {loading ? 'Creating...' : 'Create Bus'}\n                  </button>\n                </div>\n              </form>\n            )}\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {/* <input\n                        type=\"checkbox\"\n                        checked={selectedBuses.size === buses.length && buses.length > 0}\n                        onChange={() => handleSelectAll('buses')}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      /> */}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Bus Details\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Assigned Driver\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Assigned Route\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      City\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Status\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {buses.map((bus) => (\n                    <tr key={bus.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {/* <input\n                          type=\"checkbox\"\n                          checked={selectedBuses.has(bus.id!)}\n                          onChange={() => handleSelectItem('buses', bus.id!)}\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        /> */}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {bus.number_plate}\n                          </div>\n                          <div className=\"text-sm text-gray-900\">\n                            Capacity: {bus.capacity} | {bus.model} ({bus.year})\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {getDriverNameFromBus(bus)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {bus.route_name || getRouteName(bus.route_id)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {bus.route_id\n                            ? (() => {\n                                const route = routes.find(\n                                  (r) => r.id === bus.route_id\n                                );\n                                return route?.city || 'Not specified';\n                              })()\n                            : 'No route assigned'}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span\n                          className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                            bus.is_active\n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-red-100 text-red-800'\n                          }`}\n                        >\n                          {bus.is_active ? 'Active' : 'Inactive'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                        <div className=\"flex flex-col space-y-2\">\n                          <div className=\"flex space-x-2\">\n                            <button\n                              onClick={() => handleViewBusDetails(bus)}\n                              className=\"text-blue-600 hover:text-blue-900\"\n                              title=\"View details\"\n                            >\n                              👁️ Details\n                            </button>\n                            <button\n                              onClick={() => handleEditBus(bus)}\n                              className=\"text-green-600 hover:text-green-900\"\n                              title=\"Edit bus\"\n                            >\n                              ✏️ Edit\n                            </button>\n                            <button\n                              onClick={() => handleDeleteBus(bus.id!)}\n                              className=\"text-red-600 hover:text-red-900\"\n                              title=\"Delete bus\"\n                            >\n                              🗑️ Delete\n                            </button>\n                          </div>\n                          <select\n                            onChange={(e) =>\n                              handleAssignRouteToBus(bus.id!, e.target.value)\n                            }\n                            value={bus.route_id || ''}\n                            className=\"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white\"\n                          >\n                            <option value=\"\" className=\"text-gray-900\">\n                              Select Route\n                            </option>\n                            {routes.map((route) => (\n                              <option\n                                key={route.id}\n                                value={route.id}\n                                className=\"text-gray-900\"\n                              >\n                                {route.name}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Driver Management Tab */}\n      {activeTab === 'drivers' && (\n        <div className=\"space-y-6\">\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Driver & Bus Assignment Management\n              </h3>\n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={() => setShowCreateDriverForm(!showCreateDriverForm)}\n                  className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors\"\n                >\n                  {showCreateDriverForm ? '❌ Cancel' : '➕ Create New Driver'}\n                </button>\n                <button\n                  onClick={() => setShowDriverForm(!showDriverForm)}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\n                >\n                  {showDriverForm ? '❌ Cancel' : '🚗 Assign Driver to Bus'}\n                </button>\n              </div>\n            </div>\n\n            {showDriverForm && (\n              <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n                <div className=\"mb-4\">\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    Assign Bus to Driver\n                  </h4>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Select a driver from Supabase authentication and assign them\n                    to a bus.\n                  </p>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Select Driver *\n                    </label>\n                    <select\n                      required\n                      value={selectedSupabaseDriver}\n                      onChange={(e) =>\n                        setSelectedSupabaseDriver(e.target.value)\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white\"\n                    >\n                      <option value=\"\" className=\"text-gray-900\">\n                        Choose a driver...\n                      </option>\n                      {drivers.map((driver) => (\n                        <option\n                          key={driver.id}\n                          value={driver.id}\n                          className=\"text-gray-900\"\n                        >\n                          {driver.first_name} {driver.last_name} ({driver.email}\n                          )\n                        </option>\n                      ))}\n                    </select>\n                    {drivers.length === 0 && (\n                      <p className=\"text-sm text-orange-600 mt-1\">\n                        No drivers found. Please create driver accounts first.\n                      </p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Select Bus *\n                    </label>\n                    <select\n                      required\n                      value={driverForm.assigned_bus_id || ''}\n                      onChange={(e) =>\n                        setDriverForm({\n                          ...driverForm,\n                          assigned_bus_id: e.target.value || '',\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white\"\n                    >\n                      <option value=\"\" className=\"text-gray-900\">\n                        Choose a bus...\n                      </option>\n                      {buses.map((bus) => (\n                        <option\n                          key={bus.id}\n                          value={bus.id}\n                          className=\"text-gray-900\"\n                        >\n                          {bus.number_plate} ({bus.model || 'Unknown Model'})\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 flex justify-end space-x-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowDriverForm(false);\n                      setSelectedSupabaseDriver('');\n                      setDriverForm({ ...driverForm, assigned_bus_id: '' });\n                    }}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() =>\n                      handleAssignBusToDriver(\n                        selectedSupabaseDriver,\n                        driverForm.assigned_bus_id\n                      )\n                    }\n                    disabled={\n                      loading ||\n                      !selectedSupabaseDriver ||\n                      !driverForm.assigned_bus_id\n                    }\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                  >\n                    {loading ? 'Assigning...' : 'Assign Driver to Bus'}\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Create New Driver Form */}\n            {showCreateDriverForm && (\n              <div className=\"mb-6 p-4 bg-green-50 rounded-lg border border-green-200\">\n                <div className=\"mb-4\">\n                  <h4 className=\"text-lg font-medium text-green-900 mb-2\">\n                    🆕 Create New Driver Account\n                  </h4>\n                  <p className=\"text-sm text-green-700 mb-4\">\n                    Create a new driver account with Supabase authentication.\n                    The driver will receive login credentials and can\n                    immediately access the driver interface.\n                  </p>\n                </div>\n\n                <form onSubmit={handleCreateDriver} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Email Address *\n                      </label>\n                      <input\n                        type=\"email\"\n                        required\n                        value={createDriverForm.email}\n                        onChange={(e) =>\n                          setCreateDriverForm({\n                            ...createDriverForm,\n                            email: e.target.value,\n                          })\n                        }\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white\"\n                        placeholder=\"driver@university.com\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        First Name *\n                      </label>\n                      <input\n                        type=\"text\"\n                        required\n                        value={createDriverForm.first_name}\n                        onChange={(e) =>\n                          setCreateDriverForm({\n                            ...createDriverForm,\n                            first_name: e.target.value,\n                          })\n                        }\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n                        placeholder=\"John\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Last Name *\n                      </label>\n                      <input\n                        type=\"text\"\n                        required\n                        value={createDriverForm.last_name}\n                        onChange={(e) =>\n                          setCreateDriverForm({\n                            ...createDriverForm,\n                            last_name: e.target.value,\n                          })\n                        }\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n                        placeholder=\"Smith\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Phone Number\n                      </label>\n                      <input\n                        type=\"tel\"\n                        value={createDriverForm.phone}\n                        onChange={(e) =>\n                          setCreateDriverForm({\n                            ...createDriverForm,\n                            phone: e.target.value,\n                          })\n                        }\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white\"\n                        placeholder=\"+91-9876543210\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Password *\n                      </label>\n                      <div className=\"relative\">\n                        <input\n                          type={showPassword ? 'text' : 'password'}\n                          required\n                          value={createDriverForm.password}\n                          onChange={(e) => {\n                            console.log(\n                              'Password input changed:',\n                              e.target.value\n                            );\n                            setCreateDriverForm({\n                              ...createDriverForm,\n                              password: e.target.value,\n                            });\n                          }}\n                          onFocus={(e) => {\n                            console.log('Password field focused');\n                            e.target.select();\n                          }}\n                          className=\"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white\"\n                          placeholder=\"Minimum 6 characters\"\n                          minLength={6}\n                          autoComplete=\"new-password\"\n                          id=\"driver-password-input\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setShowPassword(!showPassword)}\n                          className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600\"\n                        >\n                          {showPassword ? '🙈' : '👁️'}\n                        </button>\n                      </div>\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        Current length: {createDriverForm.password.length}/6\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Confirm Password *\n                      </label>\n                      <div className=\"relative\">\n                        <input\n                          type={showConfirmPassword ? 'text' : 'password'}\n                          required\n                          value={createDriverForm.confirm_password}\n                          onChange={(e) => {\n                            console.log(\n                              'Confirm password input changed:',\n                              e.target.value\n                            );\n                            setCreateDriverForm({\n                              ...createDriverForm,\n                              confirm_password: e.target.value,\n                            });\n                          }}\n                          onFocus={(e) => {\n                            console.log('Confirm password field focused');\n                            e.target.select();\n                          }}\n                          className=\"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white\"\n                          placeholder=\"Confirm password\"\n                          minLength={6}\n                          autoComplete=\"new-password\"\n                          id=\"driver-confirm-password-input\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() =>\n                            setShowConfirmPassword(!showConfirmPassword)\n                          }\n                          className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600\"\n                        >\n                          {showConfirmPassword ? '🙈' : '👁️'}\n                        </button>\n                      </div>\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        {createDriverForm.password !==\n                          createDriverForm.confirm_password &&\n                          createDriverForm.confirm_password.length > 0 && (\n                            <span className=\"text-red-500\">\n                              Passwords do not match\n                            </span>\n                          )}\n                        {createDriverForm.password ===\n                          createDriverForm.confirm_password &&\n                          createDriverForm.confirm_password.length > 0 && (\n                            <span className=\"text-green-500\">\n                              Passwords match ✓\n                            </span>\n                          )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                    <h5 className=\"font-medium text-blue-900 mb-2\">\n                      ℹ️ Important Information:\n                    </h5>\n                    <ul className=\"text-sm text-blue-800 space-y-1\">\n                      <li>• Driver account will be created in Supabase Auth</li>\n                      <li>\n                        • Driver can immediately login with these credentials\n                      </li>\n                      <li>\n                        • Email will be auto-confirmed (no email verification\n                        required)\n                      </li>\n                      <li>\n                        • Driver will have access to the driver interface at\n                        /driver\n                      </li>\n                      <li>• You can assign them to a bus after creation</li>\n                    </ul>\n                  </div>\n\n                  <div className=\"flex justify-end space-x-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCreateDriverForm(false);\n                        setCreateDriverForm({\n                          email: '',\n                          first_name: '',\n                          last_name: '',\n                          phone: '',\n                          password: '',\n                          confirm_password: '',\n                        });\n                        setShowPassword(false);\n                        setShowConfirmPassword(false);\n                      }}\n                      className=\"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700\"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={loading}\n                      className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                    >\n                      {loading ? 'Creating...' : 'Create Driver Account'}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            )}\n\n            {/* Available Drivers Section */}\n            <div className=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"text-lg font-medium text-blue-900\">\n                  🚗 Available Drivers\n                </h4>\n                <button\n                  onClick={async () => {\n                    try {\n                      // console.log('🔄 Manually refreshing drivers...');\n                      const result = await adminApiService.getAllDrivers();\n                      if (result.success && result.data) {\n                        // Additional frontend deduplication as safety measure\n                        const uniqueDriversMap = new Map();\n                        result.data.forEach((driver: Driver) => {\n                          const idKey = driver.id;\n\n                          if (!uniqueDriversMap.has(idKey)) {\n                            // First time seeing this ID\n                            uniqueDriversMap.set(idKey, driver);\n                          } else {\n                            // We already have this ID, check if we should replace it\n                            const existing = uniqueDriversMap.get(idKey);\n\n                            // Prefer the entry with email over null email\n                            if (!existing.email && driver.email) {\n                              uniqueDriversMap.set(idKey, driver);\n                            }\n                            // If both have emails, prefer the one with more complete data\n                            else if (existing.email && driver.email) {\n                              // Keep the existing one unless the new one has more complete data\n                              if (!existing.first_name && driver.first_name) {\n                                uniqueDriversMap.set(idKey, driver);\n                              }\n                            }\n                          }\n                        });\n                        const uniqueDrivers = Array.from(\n                          uniqueDriversMap.values()\n                        );\n                        setDrivers(uniqueDrivers);\n                        // console.log(\n                        //   '✅ Manual refresh successful:',\n                        //   uniqueDrivers.length,\n                        //   'drivers'\n                        // );\n                      } else {\n                        console.warn('⚠️ Manual refresh failed:', result.error);\n                      }\n                    } catch (error) {\n                      console.warn('⚠️ Manual refresh failed:', error);\n                    }\n                  }}\n                  className=\"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200\"\n                >\n                  🔄 Refresh\n                </button>\n              </div>\n              {drivers.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {drivers.map((driver) => (\n                    <div\n                      key={driver.id}\n                      className=\"bg-white p-3 rounded border\"\n                    >\n                      <div className=\"font-medium text-gray-900\">\n                        {driver.first_name} {driver.last_name}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">\n                        {driver.email}\n                      </div>\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        Role: {driver.role}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-gray-600\">No available drivers found.</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Create new driver accounts using the \"Create New Driver\"\n                    button above, or check if drivers exist in the system.\n                  </p>\n                  <p className=\"text-xs text-green-600 mt-2\">\n                    💡 Use the \"Create New Driver\" button to add drivers with\n                    full Supabase Auth integration.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {/* <input\n                        type=\"checkbox\"\n                        checked={selectedDrivers.size === drivers.length && drivers.length > 0}\n                        onChange={() => handleSelectAll('drivers')}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      /> */}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Driver Details\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Contact Info\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Assigned Bus\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {drivers.map((driver) => (\n                    <tr key={driver.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {/* <input\n                          type=\"checkbox\"\n                          checked={selectedDrivers.has(driver.id)}\n                          onChange={() => handleSelectItem('drivers', driver.id)}\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        /> */}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {driver.first_name} {driver.last_name}\n                          </div>\n                          <div className=\"text-sm text-gray-900\">\n                            Role: {driver.role}\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {driver.email}\n                        </div>\n                        <div className=\"text-sm text-gray-900\">\n                          {driver.phone || 'No phone'}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {getBusPlate(driver.assigned_bus_id)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                        <select\n                          onChange={(e) =>\n                            handleAssignBusToDriver(driver.id, e.target.value)\n                          }\n                          value={driver.assigned_bus_id || ''}\n                          className=\"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white\"\n                        >\n                          <option value=\"\" className=\"text-gray-900\">\n                            Select Bus\n                          </option>\n                          {buses.map((bus) => (\n                            <option\n                              key={bus.id}\n                              value={bus.id}\n                              className=\"text-gray-900\"\n                            >\n                              {bus.number_plate}\n                            </option>\n                          ))}\n                        </select>\n                        <button\n                          onClick={() =>\n                            handleDeleteDriver(\n                              driver.id,\n                              driver.first_name,\n                              driver.last_name\n                            )\n                          }\n                          className=\"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors\"\n                          title=\"Delete driver from all systems\"\n                        >\n                          🗑️ Delete\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          {/* Assigned Drivers Section */}\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Currently Assigned Drivers\n              </h3>\n              <div className=\"text-sm text-gray-900\">\n                {assignedDrivers.length} driver\n                {assignedDrivers.length !== 1 ? 's' : ''} assigned\n              </div>\n            </div>\n\n            {assignedDrivers.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-gray-400 text-6xl mb-4\">🚌</div>\n                <h4 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  No Drivers Assigned\n                </h4>\n                <p className=\"text-gray-600\">\n                  No drivers are currently assigned to buses.\n                </p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Driver\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Assigned Bus\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Route\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {assignedDrivers.map((assignedDriver) => (\n                      <tr\n                        key={assignedDriver.driver_id}\n                        className=\"hover:bg-gray-50\"\n                      >\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {assignedDriver.driver_name}\n                            </div>\n                            <div className=\"text-sm text-gray-900\">\n                              {assignedDriver.driver_email}\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div>\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {assignedDriver.bus_code}\n                            </div>\n                            <div className=\"text-sm text-gray-900\">\n                              {assignedDriver.number_plate}\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-sm text-gray-900\">\n                            {assignedDriver.route_name || 'No route assigned'}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                          <button\n                            onClick={() =>\n                              handleUnassignDriver(assignedDriver.driver_id)\n                            }\n                            disabled={loading}\n                            className=\"text-red-600 hover:text-red-900 disabled:opacity-50\"\n                            title=\"Unassign driver from bus\"\n                          >\n                            🚫 Unassign\n                          </button>\n                          <button\n                            onClick={() => {\n                              const driver = drivers.find(\n                                (d) => d.id === assignedDriver.driver_id\n                              );\n                              if (driver) {\n                                handleDeleteDriver(\n                                  driver.id,\n                                  driver.first_name,\n                                  driver.last_name\n                                );\n                              }\n                            }}\n                            disabled={loading}\n                            className=\"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold\"\n                            title=\"Delete driver from all systems\"\n                          >\n                            🗑️ Delete\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Route Management Tab */}\n      {activeTab === 'routes' && (\n        <div className=\"space-y-6\">\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Route Management\n              </h3>\n              <div className=\"flex space-x-2\">\n                {/* {selectedRoutes.size > 0 && (\n                  <button\n                    onClick={handleBulkDeleteRoutes}\n                    disabled={loading}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50\"\n                  >\n                    🗑️ Delete Selected ({selectedRoutes.size})\n                  </button>\n                )} */}\n                <button\n                  onClick={() => setShowRouteForm(!showRouteForm)}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\n                >\n                  {showRouteForm ? '❌ Cancel' : '➕ Add New Route'}\n                </button>\n              </div>\n            </div>\n\n            {showRouteForm && (\n              <form\n                onSubmit={handleCreateRoute}\n                className=\"mb-6 p-4 bg-gray-50 rounded-lg\"\n              >\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Route Name *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={routeForm.name}\n                      onChange={(e) =>\n                        setRouteForm({ ...routeForm, name: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., Downtown Express\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      City *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={routeForm.city}\n                      onChange={(e) =>\n                        setRouteForm({ ...routeForm, city: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., Ahmedabad\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Distance (km) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      step=\"0.1\"\n                      value={routeForm.distance_km}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          distance_km: e.target.value,\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"0\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Duration (minutes) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      value={routeForm.estimated_duration_minutes}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          estimated_duration_minutes: e.target.value,\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"1\"\n                    />\n                  </div>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={routeForm.is_active}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          is_active: e.target.checked,\n                        })\n                      }\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 text-sm text-gray-700\">Active</label>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <textarea\n                    value={routeForm.description}\n                    onChange={(e) =>\n                      setRouteForm({\n                        ...routeForm,\n                        description: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white\"\n                    rows={3}\n                    placeholder=\"Route description...\"\n                  />\n                </div>\n\n                {/* Destination and Origin Selection */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Destination\n                    </label>\n                    <div className=\"space-y-2\">\n                      <div className=\"text-sm text-gray-600\">\n                        Default: Ganpat University\n                      </div>\n                      {selectedDestination && (\n                        <div className=\"p-2 bg-green-50 border border-green-200 rounded\">\n                          <div className=\"font-medium text-green-800\">\n                            {selectedDestination.name}\n                          </div>\n                          <div className=\"text-sm text-green-600\">\n                            {selectedDestination.address}\n                          </div>\n                        </div>\n                      )}\n                      <button\n                        type=\"button\"\n                        onClick={() => handleMapSelectorOpen('destination')}\n                        className=\"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      >\n                        🗺️ Set Custom Destination\n                      </button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Origin (Starting Point)\n                    </label>\n                    <div className=\"space-y-2\">\n                      <div className=\"text-sm text-gray-600\">\n                        Auto: Driver's live location\n                      </div>\n                      {selectedOrigin && (\n                        <div className=\"p-2 bg-blue-50 border border-blue-200 rounded\">\n                          <div className=\"font-medium text-blue-800\">\n                            {selectedOrigin.name}\n                          </div>\n                          <div className=\"text-sm text-blue-600\">\n                            {selectedOrigin.address}\n                          </div>\n                        </div>\n                      )}\n                      <button\n                        type=\"button\"\n                        onClick={() => handleMapSelectorOpen('origin')}\n                        className=\"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n                      >\n                        🗺️ Set Custom Origin (Optional)\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"mt-4 flex justify-end\">\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                  >\n                    {loading ? 'Creating...' : 'Create Route'}\n                  </button>\n                </div>\n              </form>\n            )}\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      {/* <input\n                        type=\"checkbox\"\n                        checked={selectedRoutes.size === routes.length && routes.length > 0}\n                        onChange={() => handleSelectAll('routes')}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      /> */}\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Route Details\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      City\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Distance & Duration\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Status\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {routes.map((route) => (\n                    <tr key={route.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {/* <input\n                          type=\"checkbox\"\n                          checked={selectedRoutes.has(route.id)}\n                          onChange={() => handleSelectItem('routes', route.id)}\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        /> */}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {route.name}\n                          </div>\n                          <div className=\"text-sm text-gray-900\">\n                            {route.description}\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {route.city || 'Not specified'}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {route.distance_km} km\n                        </div>\n                        <div className=\"text-sm text-gray-900\">\n                          {route.estimated_duration_minutes} min\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span\n                          className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                            route.is_active\n                              ? 'bg-green-100 text-green-800'\n                              : 'bg-red-100 text-red-800'\n                          }`}\n                        >\n                          {route.is_active ? 'Active' : 'Inactive'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => handleViewRouteDetails(route)}\n                            className=\"text-blue-600 hover:text-blue-900\"\n                            title=\"View details\"\n                          >\n                            👁️ Details\n                          </button>\n                          <button\n                            onClick={() => handleEditRoute(route)}\n                            className=\"text-green-600 hover:text-green-900\"\n                            title=\"Edit route\"\n                          >\n                            ✏️ Edit\n                          </button>\n                          <button\n                            onClick={() => handleDeleteRoute(route.id)}\n                            className=\"text-red-600 hover:text-red-900\"\n                            title=\"Delete route\"\n                          >\n                            🗑️ Delete\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Map Selector Modal */}\n      {showMapSelector && (\n        <MapSelector\n          key={`map-selector-${mapSelectorType}`} // Add key to prevent re-rendering issues\n          onLocationSelect={handleLocationSelect}\n          onClose={() => setShowMapSelector(false)}\n          title={\n            mapSelectorType === 'destination'\n              ? 'Select Destination'\n              : 'Select Origin'\n          }\n          searchPlaceholder={\n            mapSelectorType === 'destination'\n              ? 'Search for destination...'\n              : 'Search for origin...'\n          }\n        />\n      )}\n\n      {/* Bus Details Modal */}\n      {showBusDetails && selectedBus && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                {editingBus ? 'Edit Bus Details' : 'Bus Details'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowBusDetails(false);\n                  setEditingBus(false);\n                  setSelectedBus(null);\n                }}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                ✕\n              </button>\n            </div>\n\n            {editingBus ? (\n              <form onSubmit={handleUpdateBus} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Bus Code *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={busForm.code}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, code: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Number Plate *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={busForm.number_plate}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, number_plate: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Capacity *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      value={busForm.capacity}\n                      onChange={(e) =>\n                        setBusForm({\n                          ...busForm,\n                          capacity: parseInt(e.target.value),\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"1\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Model\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={busForm.model}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, model: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Year\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={busForm.year}\n                      onChange={(e) =>\n                        setBusForm({\n                          ...busForm,\n                          year: parseInt(e.target.value),\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"2000\"\n                      max={new Date().getFullYear() + 1}\n                    />\n                  </div>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={busForm.is_active}\n                      onChange={(e) =>\n                        setBusForm({ ...busForm, is_active: e.target.checked })\n                      }\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 text-sm text-gray-700\">Active</label>\n                  </div>\n                </div>\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setEditingBus(false)}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                  >\n                    {loading ? 'Updating...' : 'Update Bus'}\n                  </button>\n                </div>\n              </form>\n            ) : (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Bus Code\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">{selectedBus.code}</p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Number Plate\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedBus.number_plate}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Capacity\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedBus.capacity} passengers\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Model\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedBus.model || 'Not specified'}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Year\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedBus.year || 'Not specified'}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Status\n                    </h4>\n                    <span\n                      className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        selectedBus.is_active\n                          ? 'bg-green-100 text-green-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}\n                    >\n                      {selectedBus.is_active ? 'Active' : 'Inactive'}\n                    </span>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Assigned Driver\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {getDriverNameFromBus(selectedBus)}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Assigned Route\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedBus.route_name ||\n                        getRouteName(selectedBus.route_id)}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                  <button\n                    onClick={() => setEditingBus(true)}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n                  >\n                    ✏️ Edit\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Route Details Modal */}\n      {showRouteDetails && selectedRoute && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                {editingRoute ? 'Edit Route Details' : 'Route Details'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowRouteDetails(false);\n                  setEditingRoute(false);\n                  setSelectedRoute(null);\n                }}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                ✕\n              </button>\n            </div>\n\n            {editingRoute ? (\n              <form onSubmit={handleUpdateRoute} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Route Name *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={routeForm.name}\n                      onChange={(e) =>\n                        setRouteForm({ ...routeForm, name: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      City *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={routeForm.city}\n                      onChange={(e) =>\n                        setRouteForm({ ...routeForm, city: e.target.value })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Distance (km) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      step=\"0.1\"\n                      value={routeForm.distance_km}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          distance_km: e.target.value,\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"0\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Duration (minutes) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      value={routeForm.estimated_duration_minutes}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          estimated_duration_minutes: e.target.value,\n                        })\n                      }\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      min=\"1\"\n                    />\n                  </div>\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={routeForm.is_active}\n                      onChange={(e) =>\n                        setRouteForm({\n                          ...routeForm,\n                          is_active: e.target.checked,\n                        })\n                      }\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 text-sm text-gray-700\">Active</label>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <textarea\n                    value={routeForm.description}\n                    onChange={(e) =>\n                      setRouteForm({\n                        ...routeForm,\n                        description: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white\"\n                    rows={3}\n                  />\n                </div>\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setEditingRoute(false)}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50\"\n                  >\n                    {loading ? 'Updating...' : 'Update Route'}\n                  </button>\n                </div>\n              </form>\n            ) : (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Route Name\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.name}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      City\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.city || 'Not specified'}\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Distance\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.distance_km} km\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Duration\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.estimated_duration_minutes} minutes\n                    </p>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Status\n                    </h4>\n                    <span\n                      className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        selectedRoute.is_active\n                          ? 'bg-green-100 text-green-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}\n                    >\n                      {selectedRoute.is_active ? 'Active' : 'Inactive'}\n                    </span>\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Created\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.created_at\n                        ? new Date(\n                            selectedRoute.created_at\n                          ).toLocaleDateString()\n                        : 'Not available'}\n                    </p>\n                  </div>\n                </div>\n                {selectedRoute.description && (\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-500 mb-1\">\n                      Description\n                    </h4>\n                    <p className=\"text-sm text-gray-900\">\n                      {selectedRoute.description}\n                    </p>\n                  </div>\n                )}\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                  <button\n                    onClick={() => setEditingRoute(true)}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n                  >\n                    ✏️ Edit\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { adminApiService } from '../services/adminApiService';\nimport { authService } from '../services/authService';\nimport MediaManagement from './MediaManagement';\nimport StreamlinedManagement from './StreamlinedManagement';\n\ninterface AnalyticsData {\n  totalBuses: number;\n  activeBuses: number;\n  totalRoutes: number;\n  activeRoutes: number;\n  totalDrivers: number;\n  activeDrivers: number;\n  averageDelay: number;\n  busUsageStats: {\n    date: string;\n    activeBuses: number;\n    totalTrips: number;\n  }[];\n}\n\ninterface SystemHealth {\n  buses: number;\n  routes: number;\n  drivers: number;\n  recentLocations: number;\n  timestamp: string;\n}\n\nexport default function AdminDashboard() {\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\n  const [systemHealth, setSystemHealth] = useState<SystemHealth | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<\n    'overview' | 'analytics' | 'management' | 'media'\n  >('overview');\n\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n\n  const loadDashboardData = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const [analyticsResult, healthResult] = await Promise.all([\n        adminApiService.getAnalytics(),\n        adminApiService.getSystemHealth(),\n      ]);\n\n      if (analyticsResult.success && analyticsResult.data) {\n        setAnalytics(analyticsResult.data);\n      }\n\n      if (healthResult.success && healthResult.data) {\n        setSystemHealth(healthResult.data);\n      }\n\n      if (!analyticsResult.success || !healthResult.success) {\n        setError('Failed to load dashboard data');\n      }\n    } catch (err) {\n      setError('An error occurred while loading dashboard data');\n      console.error('❌ Dashboard data loading error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await authService.signOut();\n      window.location.href = '/';\n    } catch (error) {\n      console.error('❌ Sign out error:', error);\n    }\n  };\n\n  const currentUser = authService.getCurrentProfile();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"loading-spinner mx-auto\"></div>\n          <p className=\"mt-4 text-white/70\">Loading admin dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"card-glass p-8\">\n            <h3 className=\"text-lg font-medium text-red-300 mb-2\">\n              Error Loading Dashboard\n            </h3>\n            <p className=\"text-red-200 mb-4\">{error}</p>\n            <button\n              onClick={loadDashboardData}\n              className=\"btn-primary bg-red-600 hover:bg-red-700\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900\">\n      {/* Header */}\n      <header className=\"bg-white/10 backdrop-blur-sm border-b border-white/20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <h1 className=\"text-2xl font-bold text-white\">\n                  🚍 Admin Dashboard\n                </h1>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-sm text-white/80\">\n                Welcome,{' '}\n                {currentUser?.first_name ||\n                  currentUser?.full_name ||\n                  currentUser?.email}\n              </span>\n              <button\n                onClick={loadDashboardData}\n                className=\"btn-primary text-sm\"\n                disabled={loading}\n              >\n                {loading ? 'Refreshing...' : '🔄 Refresh'}\n              </button>\n              <button onClick={handleSignOut} className=\"btn-secondary text-sm\">\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Navigation Tabs */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"border-b border-white/20\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\n                activeTab === 'overview'\n                  ? 'border-blue-400 text-blue-300'\n                  : 'border-transparent text-white/60 hover:text-white/80 hover:border-white/40'\n              }`}\n            >\n              Overview\n            </button>\n            <button\n              onClick={() => setActiveTab('analytics')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\n                activeTab === 'analytics'\n                  ? 'border-blue-400 text-blue-300'\n                  : 'border-transparent text-white/60 hover:text-white/80 hover:border-white/40'\n              }`}\n            >\n              Analytics\n            </button>\n            <button\n              onClick={() => setActiveTab('management')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\n                activeTab === 'management'\n                  ? 'border-blue-400 text-blue-300'\n                  : 'border-transparent text-white/60 hover:text-white/80 hover:border-white/40'\n              }`}\n            >\n              Management\n            </button>\n            <button\n              onClick={() => setActiveTab('media')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\n                activeTab === 'media'\n                  ? 'border-blue-400 text-blue-300'\n                  : 'border-transparent text-white/60 hover:text-white/80 hover:border-white/40'\n              }`}\n            >\n              Media\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n        {activeTab === 'overview' && (\n          <div className=\"px-4 py-6 sm:px-0\">\n            <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n              {/* System Health Cards */}\n              <div className=\"card-glass overflow-hidden\">\n                <div className=\"p-5\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center\">\n                        <svg\n                          className=\"w-5 h-5 text-white\"\n                          fill=\"currentColor\"\n                          viewBox=\"0 0 20 20\"\n                        >\n                          <path d=\"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z\" />\n                        </svg>\n                      </div>\n                    </div>\n                    <div className=\"ml-5 w-0 flex-1\">\n                      <dl>\n                        <dt className=\"text-sm font-medium text-white/70 truncate\">\n                          Total Buses\n                        </dt>\n                        <dd className=\"text-lg font-medium text-white\">\n                          {systemHealth?.buses || 0}\n                        </dd>\n                      </dl>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"card-glass overflow-hidden\">\n                <div className=\"p-5\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center\">\n                        <svg\n                          className=\"w-5 h-5 text-white\"\n                          fill=\"currentColor\"\n                          viewBox=\"0 0 20 20\"\n                        >\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z\"\n                            clipRule=\"evenodd\"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                    <div className=\"ml-5 w-0 flex-1\">\n                      <dl>\n                        <dt className=\"text-sm font-medium text-white/70 truncate\">\n                          Total Routes\n                        </dt>\n                        <dd className=\"text-lg font-medium text-white\">\n                          {systemHealth?.routes || 0}\n                        </dd>\n                      </dl>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"card-glass overflow-hidden\">\n                <div className=\"p-5\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center\">\n                        <svg\n                          className=\"w-5 h-5 text-white\"\n                          fill=\"currentColor\"\n                          viewBox=\"0 0 20 20\"\n                        >\n                          <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z\" />\n                        </svg>\n                      </div>\n                    </div>\n                    <div className=\"ml-5 w-0 flex-1\">\n                      <dl>\n                        <dt className=\"text-sm font-medium text-white/70 truncate\">\n                          Total Drivers\n                        </dt>\n                        <dd className=\"text-lg font-medium text-white\">\n                          {systemHealth?.drivers || 0}\n                        </dd>\n                      </dl>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"card-glass overflow-hidden\">\n                <div className=\"p-5\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center\">\n                        <svg\n                          className=\"w-5 h-5 text-white\"\n                          fill=\"currentColor\"\n                          viewBox=\"0 0 20 20\"\n                        >\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\"\n                            clipRule=\"evenodd\"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                    <div className=\"ml-5 w-0 flex-1\">\n                      <dl>\n                        <dt className=\"text-sm font-medium text-white/70 truncate\">\n                          Recent Locations\n                        </dt>\n                        <dd className=\"text-lg font-medium text-white\">\n                          {systemHealth?.recentLocations || 0}\n                        </dd>\n                      </dl>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Stats */}\n            {analytics && (\n              <div className=\"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3\">\n                <div className=\"card-glass overflow-hidden\">\n                  <div className=\"p-5\">\n                    <h3 className=\"text-lg font-medium text-white mb-4\">\n                      System Status\n                    </h3>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-white/70\">\n                          Active Buses\n                        </span>\n                        <span className=\"text-sm font-medium text-white\">\n                          {analytics.activeBuses}/{analytics.totalBuses}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-white/70\">\n                          Active Routes\n                        </span>\n                        <span className=\"text-sm font-medium text-white\">\n                          {analytics.activeRoutes}/{analytics.totalRoutes}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-white/70\">\n                          Active Drivers\n                        </span>\n                        <span className=\"text-sm font-medium text-white\">\n                          {analytics.activeDrivers}/{analytics.totalDrivers}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card-glass overflow-hidden\">\n                  <div className=\"p-5\">\n                    <h3 className=\"text-lg font-medium text-white mb-4\">\n                      Performance\n                    </h3>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-white/70\">\n                          Average Delay\n                        </span>\n                        <span className=\"text-sm font-medium text-white\">\n                          {analytics.averageDelay.toFixed(1)} min\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-white/70\">\n                          System Health\n                        </span>\n                        <span className=\"text-sm font-medium text-green-400\">\n                          Good\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card-glass overflow-hidden\">\n                  <div className=\"p-5\">\n                    <h3 className=\"text-lg font-medium text-white mb-4\">\n                      Last Updated\n                    </h3>\n                    <div className=\"text-sm text-white/70\">\n                      {systemHealth?.timestamp\n                        ? new Date(systemHealth.timestamp).toLocaleString()\n                        : 'N/A'}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'analytics' && analytics && (\n          <div className=\"px-4 py-6 sm:px-0\">\n            <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2\">\n              {/* System Statistics */}\n              <div className=\"card-glass p-6\">\n                <h3 className=\"text-lg font-medium text-white mb-4\">\n                  System Statistics\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30\">\n                    <span className=\"text-blue-300 font-medium\">\n                      Active Buses\n                    </span>\n                    <span className=\"text-2xl font-bold text-blue-200\">\n                      {analytics.activeBuses}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30\">\n                    <span className=\"text-green-300 font-medium\">\n                      Active Routes\n                    </span>\n                    <span className=\"text-2xl font-bold text-green-200\">\n                      {analytics.activeRoutes}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30\">\n                    <span className=\"text-yellow-300 font-medium\">\n                      Active Drivers\n                    </span>\n                    <span className=\"text-2xl font-bold text-yellow-200\">\n                      {analytics.activeDrivers}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30\">\n                    <span className=\"text-purple-300 font-medium\">\n                      Average Delay\n                    </span>\n                    <span className=\"text-2xl font-bold text-purple-200\">\n                      {analytics.averageDelay.toFixed(1)} min\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* System Distribution */}\n              <div className=\"card-glass p-6\">\n                <h3 className=\"text-lg font-medium text-white mb-4\">\n                  System Distribution\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-white/80\">\n                      Active Buses\n                    </span>\n                    <div className=\"flex items-center\">\n                      <div className=\"w-32 bg-white/20 rounded-full h-2 mr-2\">\n                        <div\n                          className=\"bg-blue-400 h-2 rounded-full\"\n                          style={{\n                            width: `${(analytics.activeBuses / analytics.totalBuses) * 100}%`,\n                          }}\n                        ></div>\n                      </div>\n                      <span className=\"text-sm text-white/70\">\n                        {analytics.activeBuses}/{analytics.totalBuses}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-white/80\">\n                      Active Routes\n                    </span>\n                    <div className=\"flex items-center\">\n                      <div className=\"w-32 bg-white/20 rounded-full h-2 mr-2\">\n                        <div\n                          className=\"bg-green-400 h-2 rounded-full\"\n                          style={{\n                            width: `${(analytics.activeRoutes / analytics.totalRoutes) * 100}%`,\n                          }}\n                        ></div>\n                      </div>\n                      <span className=\"text-sm text-white/70\">\n                        {analytics.activeRoutes}/{analytics.totalRoutes}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-white/80\">\n                      Active Drivers\n                    </span>\n                    <div className=\"flex items-center\">\n                      <div className=\"w-32 bg-white/20 rounded-full h-2 mr-2\">\n                        <div\n                          className=\"bg-yellow-400 h-2 rounded-full\"\n                          style={{\n                            width: `${(analytics.activeDrivers / analytics.totalDrivers) * 100}%`,\n                          }}\n                        ></div>\n                      </div>\n                      <span className=\"text-sm text-white/70\">\n                        {analytics.activeDrivers}/{analytics.totalDrivers}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Management Tab - All bus, driver, and route management */}\n        {activeTab === 'management' && <StreamlinedManagement />}\n\n        {/* Media Management Tab */}\n        {activeTab === 'media' && <MediaManagement />}\n      </main>\n    </div>\n  );\n}\n","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface GlassyCardProps {\n  children: React.ReactNode;\n  className?: string;\n  variant?: 'default' | 'premium' | 'ultra';\n  hover?: boolean;\n  glow?: boolean;\n  onClick?: () => void;\n  delay?: number;\n}\n\nconst GlassyCard: React.FC<GlassyCardProps> = ({\n  children,\n  className = '',\n  variant = 'default',\n  hover = true,\n  glow = false,\n  onClick,\n  delay = 0,\n}) => {\n  const baseClasses =\n    'relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable';\n\n  const variantClasses = {\n    default: 'bg-white/10 backdrop-blur-md border border-white/20 shadow-xl',\n    premium: 'bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl',\n    ultra: 'bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl',\n  };\n\n  const hoverClasses = hover\n    ? 'hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl'\n    : '';\n  const glowClasses = glow ? 'hover:shadow-blue-500/20 hover:shadow-2xl' : '';\n  const clickableClasses = onClick ? 'cursor-pointer' : '';\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20, scale: 0.95 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      transition={{\n        duration: 0.6,\n        delay,\n        ease: [0.4, 0.0, 0.2, 1],\n      }}\n      whileHover={\n        hover\n          ? {\n              y: -8,\n              scale: 1.02,\n              transition: { duration: 0.3 },\n            }\n          : {}\n      }\n      whileTap={onClick ? { scale: 0.98 } : {}}\n      onClick={onClick}\n      className={`\n        ${baseClasses}\n        ${variantClasses[variant]}\n        ${hoverClasses}\n        ${glowClasses}\n        ${clickableClasses}\n        ${className}\n      `}\n    >\n      {/* Animated background gradient */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500\" />\n\n      {/* Glow effect */}\n      {glow && (\n        <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl\" />\n      )}\n\n      {/* Content */}\n      <div className=\"relative z-10 p-6 space-stable\">{children}</div>\n\n      {/* Shimmer effect */}\n      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000\" />\n    </motion.div>\n  );\n};\n\n// Specialized card variants\nexport const InfoCard: React.FC<GlassyCardProps> = (props) => (\n  <GlassyCard variant=\"premium\" glow={true} {...props} />\n);\n\nexport const ActionCard: React.FC<GlassyCardProps> = (props) => (\n  <GlassyCard\n    variant=\"default\"\n    hover={true}\n    onClick={props.onClick}\n    {...props}\n  />\n);\n\nexport const PremiumCard: React.FC<GlassyCardProps> = (props) => (\n  <GlassyCard variant=\"ultra\" glow={true} hover={true} {...props} />\n);\n\n// Floating card with continuous animation\nexport const FloatingCard: React.FC<GlassyCardProps> = ({\n  children,\n  className = '',\n  ...props\n}) => {\n  return (\n    <motion.div\n      animate={{\n        y: [0, -10, 0],\n      }}\n      transition={{\n        duration: 3,\n        repeat: Infinity,\n        ease: 'easeInOut',\n      }}\n    >\n      <GlassyCard className={className} {...props}>\n        {children}\n      </GlassyCard>\n    </motion.div>\n  );\n};\n\n// Interactive card with ripple effect\nexport const InteractiveCard: React.FC<GlassyCardProps> = ({\n  children,\n  className = '',\n  onClick,\n  ...props\n}) => {\n  return (\n    <motion.div\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={onClick}\n      className=\"cursor-pointer\"\n    >\n      <GlassyCard className={className} onClick={onClick} {...props}>\n        {children}\n      </GlassyCard>\n    </motion.div>\n  );\n};\n\nexport default GlassyCard;\n","import React from 'react';\nimport { motion } from 'framer-motion';\n\ninterface PremiumButtonProps {\n  children: React.ReactNode;\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost' | 'gradient';\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  className?: string;\n  onClick?: () => void;\n  disabled?: boolean;\n  loading?: boolean;\n  icon?: React.ReactNode;\n  iconPosition?: 'left' | 'right';\n}\n\nconst PremiumButton: React.FC<PremiumButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  className = '',\n  onClick,\n  disabled = false,\n  loading = false,\n  icon,\n  iconPosition = 'left',\n}) => {\n  const baseClasses =\n    'relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden';\n\n  const sizeClasses = {\n    sm: 'px-4 py-2 text-sm',\n    md: 'px-6 py-3 text-base',\n    lg: 'px-8 py-4 text-lg',\n    xl: 'px-10 py-5 text-xl',\n  };\n\n  const variantClasses = {\n    primary:\n      'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400',\n    secondary:\n      'bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20',\n    danger:\n      'bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400',\n    ghost:\n      'bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20',\n    gradient:\n      'bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400',\n  };\n\n  const hoverEffect = 'hover:-translate-y-0.5 active:translate-y-0';\n\n  return (\n    <motion.button\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={onClick}\n      disabled={disabled || loading}\n      className={`\n        ${baseClasses}\n        ${sizeClasses[size]}\n        ${variantClasses[variant]}\n        ${hoverEffect}\n        ${className}\n      `}\n    >\n      {/* Animated background */}\n      <div className=\"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300\" />\n\n      {/* Shimmer effect */}\n      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700\" />\n\n      {/* Content */}\n      <div className=\"relative z-10 flex items-center gap-2\">\n        {loading && (\n          <motion.div\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n            className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full\"\n          />\n        )}\n\n        {icon && iconPosition === 'left' && !loading && (\n          <span className=\"flex-shrink-0\">{icon}</span>\n        )}\n\n        <span>{children}</span>\n\n        {icon && iconPosition === 'right' && !loading && (\n          <span className=\"flex-shrink-0\">{icon}</span>\n        )}\n      </div>\n    </motion.button>\n  );\n};\n\n// Specialized button variants\nexport const GlowButton: React.FC<PremiumButtonProps> = ({\n  children,\n  className = '',\n  ...props\n}) => (\n  <motion.div whileHover={{ scale: 1.05 }} className=\"relative\">\n    <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl blur-lg opacity-0 hover:opacity-50 transition-opacity duration-300\" />\n    <PremiumButton className={`relative ${className}`} {...props}>\n      {children}\n    </PremiumButton>\n  </motion.div>\n);\n\nexport const FloatingButton: React.FC<PremiumButtonProps> = ({\n  children,\n  className = '',\n  ...props\n}) => (\n  <motion.div\n    animate={{\n      y: [0, -5, 0],\n    }}\n    transition={{\n      duration: 2,\n      repeat: Infinity,\n      ease: 'easeInOut',\n    }}\n  >\n    <PremiumButton className={className} {...props}>\n      {children}\n    </PremiumButton>\n  </motion.div>\n);\n\nexport const IconButton: React.FC<PremiumButtonProps> = ({\n  children,\n  className = '',\n  ...props\n}) => (\n  <PremiumButton\n    size=\"md\"\n    className={`p-3 rounded-full ${className}`}\n    {...props}\n  >\n    {children}\n  </PremiumButton>\n);\n\nexport default PremiumButton;\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { authService } from '../services/authService';\nimport GlassyCard from './ui/GlassyCard';\nimport PremiumButton from './ui/PremiumButton';\nimport { useTransition } from './transitions';\n\ninterface AdminLoginProps {\n  onLoginSuccess?: () => void;\n}\n\nexport default function AdminLogin({ onLoginSuccess }: AdminLoginProps) {\n  const navigate = useNavigate();\n  const { setTransition } = useTransition();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [twoFactorCode, setTwoFactorCode] = useState('');\n  const [success, setSuccess] = useState<string | null>(null);\n\n  // Try to recover session on component mount\n  useEffect(() => {\n    const attemptSessionRecovery = async () => {\n      try {\n        console.log('🔄 Attempting automatic session recovery...');\n\n        // Wait for auth service to be fully initialized\n        while (!authService.isInitialized()) {\n          await new Promise((resolve) => setTimeout(resolve, 100));\n        }\n\n        const result = await authService.recoverSession();\n        if (result.success && authService.isAdmin()) {\n          console.log('✅ Session recovered, redirecting to admin panel');\n          handleLoginSuccess();\n        } else {\n          console.log(\n            '📝 Session recovery failed or user is not admin:',\n            result.error\n          );\n        }\n      } catch (error) {\n        console.log('📝 No valid session to recover:', error);\n      }\n    };\n\n    // Delay the recovery attempt to ensure auth service is fully initialized\n    setTimeout(attemptSessionRecovery, 2000);\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      // Add timeout to prevent infinite loading - REDUCED TIMEOUT\n      const timeoutPromise = new Promise((_, reject) => {\n        setTimeout(() => reject(new Error('Login timeout')), 5000); // Reduced from 8s to 5s\n      });\n\n      const loginPromise = authService.signIn(email, password);\n\n      const result = (await Promise.race([loginPromise, timeoutPromise])) as {\n        success: boolean;\n        user?: { role: string };\n        error?: string;\n      };\n\n      if (result.success && result.user) {\n        if (result.user.role === 'admin') {\n          setSuccess('Login successful! Loading admin dashboard...');\n          setTimeout(() => {\n            handleLoginSuccess();\n          }, 500); // Reduced from 1s to 500ms\n        } else {\n          setError('Access denied. Admin privileges required.');\n          await authService.signOut();\n        }\n      } else {\n        setError(\n          result.error || 'Login failed. Please check your credentials.'\n        );\n      }\n    } catch (err) {\n      console.error('❌ Login error:', err);\n      if (err instanceof Error && err.message === 'Login timeout') {\n        setError(\n          'Login timed out. This might be due to slow network or profile loading. Please try again.'\n        );\n      } else if (\n        err instanceof Error &&\n        err.message.includes('environment variables')\n      ) {\n        setError('Configuration error. Please check your environment setup.');\n      } else if (\n        err instanceof Error &&\n        err.message.includes('Profile loading timeout')\n      ) {\n        setError(\n          'Profile loading is taking longer than expected. Please try again.'\n        );\n      } else {\n        setError('Network error. Please check your connection and try again.');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleLoginSuccess = () => {\n    // Set transition type for login to dashboard\n    setTransition('login-to-dashboard');\n\n    // Add a small delay to ensure session is properly set\n    setTimeout(() => {\n      if (onLoginSuccess) {\n        onLoginSuccess();\n      } else {\n        // Use replace to avoid 404 issues\n        navigate('/admin-dashboard', { replace: true });\n      }\n    }, 500);\n  };\n\n  const handleRecoverSession = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const result = await authService.recoverSession();\n      if (result.success && authService.isAdmin()) {\n        setSuccess('Session recovered! Redirecting...');\n        setTimeout(() => {\n          handleLoginSuccess();\n        }, 1000);\n      } else {\n        setError('No valid session found. Please log in again.');\n      }\n    } catch (error) {\n      setError('Session recovery failed. Please log in again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleForceFreshLogin = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      await authService.forceFreshLogin();\n      setSuccess('Session cleared. Please log in again with your credentials.');\n    } catch (error) {\n      setError('Failed to clear session.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000\"></div>\n        <div className=\"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000\"></div>\n      </div>\n\n      {/* Floating particles */}\n      <div className=\"absolute inset-0\">\n        {[...Array(20)].map((_, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute w-1 h-1 bg-white/30 rounded-full\"\n            animate={{\n              x: [0, 100, 0],\n              y: [0, -100, 0],\n              opacity: [0, 1, 0],\n            }}\n            transition={{\n              duration: Math.random() * 10 + 10,\n              repeat: Infinity,\n              delay: Math.random() * 5,\n            }}\n            style={{\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n            }}\n          />\n        ))}\n      </div>\n\n      <motion.div\n        initial={{ opacity: 0, y: 50, scale: 0.9 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        transition={{ duration: 0.8, ease: [0.4, 0.0, 0.2, 1] }}\n        className=\"w-full max-w-md relative z-10\"\n      >\n        <GlassyCard variant=\"ultra\" glow={true} className=\"p-8 relative\">\n          {/* Header */}\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2, duration: 0.6 }}\n            className=\"text-center mb-8\"\n          >\n            <div className=\"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50\"></div>\n              <svg\n                className=\"h-8 w-8 text-white relative z-10\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n            </div>\n            <h2 className=\"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent\">\n              Admin Login\n            </h2>\n            <p className=\"text-blue-200/80 mt-2 text-sm\">\n              Access the administrative dashboard\n            </p>\n          </motion.div>\n\n          {/* Form */}\n          <motion.form\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.4, duration: 0.6 }}\n            onSubmit={handleSubmit}\n            className=\"space-y-6\"\n          >\n            {/* Email Input */}\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.5, duration: 0.6 }}\n            >\n              <label\n                htmlFor=\"email\"\n                className=\"block text-sm font-medium text-blue-200 mb-2\"\n              >\n                Email Address\n              </label>\n              <div className=\"relative\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"admin@university.edu\"\n                  disabled={isLoading}\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n              </div>\n            </motion.div>\n\n            {/* Password Input */}\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.6, duration: 0.6 }}\n            >\n              <label\n                htmlFor=\"password\"\n                className=\"block text-sm font-medium text-blue-200 mb-2\"\n              >\n                Password\n              </label>\n              <div className=\"relative\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"••••••••\"\n                  disabled={isLoading}\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n              </div>\n            </motion.div>\n\n            {/* 2FA Code Input (Optional) */}\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.7, duration: 0.6 }}\n            >\n              <label\n                htmlFor=\"twoFactorCode\"\n                className=\"block text-sm font-medium text-blue-200/80 mb-2\"\n              >\n                2FA Code <span className=\"text-blue-200/50\">(Optional)</span>\n              </label>\n              <div className=\"relative\">\n                <input\n                  id=\"twoFactorCode\"\n                  name=\"twoFactorCode\"\n                  type=\"text\"\n                  autoComplete=\"one-time-code\"\n                  value={twoFactorCode}\n                  onChange={(e) => setTwoFactorCode(e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"Enter 2FA code if enabled\"\n                  disabled={isLoading}\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n              </div>\n            </motion.div>\n\n            {/* Loading State */}\n            <AnimatePresence>\n              {isLoading && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: 'auto' }}\n                  exit={{ opacity: 0, height: 0 }}\n                  className=\"text-center\"\n                >\n                  <div className=\"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl\">\n                    <motion.div\n                      animate={{ rotate: 360 }}\n                      transition={{\n                        duration: 1,\n                        repeat: Infinity,\n                        ease: 'linear',\n                      }}\n                      className=\"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3\"\n                    />\n                    Signing in and loading profile...\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {/* Error Message */}\n            <AnimatePresence>\n              {error && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10, scale: 0.95 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  exit={{ opacity: 0, y: -10, scale: 0.95 }}\n                  className=\"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4\"\n                >\n                  <div className=\"flex\">\n                    <div className=\"flex-shrink-0\">\n                      <svg\n                        className=\"h-5 w-5 text-red-400\"\n                        viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                          clipRule=\"evenodd\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"ml-3\">\n                      <h3 className=\"text-sm font-medium text-red-300\">\n                        Login Error\n                      </h3>\n                      <p className=\"text-sm text-red-200 mt-1\">{error}</p>\n                    </div>\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {/* Success Message */}\n            <AnimatePresence>\n              {success && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10, scale: 0.95 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  exit={{ opacity: 0, y: -10, scale: 0.95 }}\n                  className=\"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4\"\n                >\n                  <div className=\"flex\">\n                    <div className=\"flex-shrink-0\">\n                      <svg\n                        className=\"h-5 w-5 text-green-400\"\n                        viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                          clipRule=\"evenodd\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"ml-3\">\n                      <h3 className=\"text-sm font-medium text-green-300\">\n                        Success\n                      </h3>\n                      <p className=\"text-sm text-green-200 mt-1\">{success}</p>\n                    </div>\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            {/* Login Button */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.8, duration: 0.6 }}\n            >\n              <PremiumButton\n                variant=\"gradient\"\n                size=\"lg\"\n                className=\"w-full relative group\"\n                disabled={isLoading}\n                loading={isLoading}\n                icon={\n                  <svg\n                    className=\"w-5 h-5 mr-2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                    />\n                  </svg>\n                }\n              >\n                {isLoading ? 'Signing In...' : 'Admin Login'}\n              </PremiumButton>\n            </motion.div>\n\n            {/* Additional Actions */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.9, duration: 0.6 }}\n              className=\"text-center space-y-3\"\n            >\n              <div className=\"flex flex-col sm:flex-row gap-2 justify-center text-xs\">\n                <button\n                  type=\"button\"\n                  onClick={handleRecoverSession}\n                  disabled={isLoading}\n                  className=\"text-blue-300 hover:text-blue-200 underline transition-colors duration-200\"\n                >\n                  Recover Session\n                </button>\n                <span className=\"hidden sm:inline text-blue-200/50\">•</span>\n                <button\n                  type=\"button\"\n                  onClick={handleForceFreshLogin}\n                  disabled={isLoading}\n                  className=\"text-red-300 hover:text-red-200 underline transition-colors duration-200\"\n                >\n                  Force Fresh Login\n                </button>\n              </div>\n\n              <div className=\"text-xs text-blue-200/50 space-y-1\">\n                <p>Enter your admin credentials to access the system</p>\n                <p>Using Supabase Authentication</p>\n              </div>\n            </motion.div>\n          </motion.form>\n        </GlassyCard>\n      </motion.div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface PageTransitionProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nconst PageTransition: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <AnimatePresence mode=\"wait\">\n      <motion.div\n        initial={{ opacity: 0, y: 20, scale: 0.95 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        exit={{ opacity: 0, y: -20, scale: 0.95 }}\n        transition={{\n          duration: 0.5,\n          ease: [0.4, 0.0, 0.2, 1],\n        }}\n        className={className}\n      >\n        {children}\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n// Slide transition for horizontal navigation\nexport const SlideTransition: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <motion.div\n      initial={{ x: 300, opacity: 0 }}\n      animate={{ x: 0, opacity: 1 }}\n      exit={{ x: -300, opacity: 0 }}\n      transition={{\n        duration: 0.4,\n        ease: [0.4, 0.0, 0.2, 1],\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Fade transition for subtle effects\nexport const FadeTransition: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      transition={{\n        duration: 0.3,\n        ease: [0.4, 0.0, 0.2, 1],\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Scale transition for modal-like effects\nexport const ScaleTransition: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <motion.div\n      initial={{ scale: 0.8, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      exit={{ scale: 0.8, opacity: 0 }}\n      transition={{\n        duration: 0.4,\n        ease: [0.4, 0.0, 0.2, 1],\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Stagger transition for lists\nexport const StaggerContainer: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <motion.div\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={{\n        hidden: { opacity: 0 },\n        visible: {\n          opacity: 1,\n          transition: {\n            staggerChildren: 0.1,\n          },\n        },\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport const StaggerItem: React.FC<PageTransitionProps> = ({\n  children,\n  className = '',\n}) => {\n  return (\n    <motion.div\n      variants={{\n        hidden: { opacity: 0, y: 20 },\n        visible: { opacity: 1, y: 0 },\n      }}\n      transition={{\n        duration: 0.4,\n        ease: [0.4, 0.0, 0.2, 1],\n      }}\n      className={className}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport default PageTransition;\n","import React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\nimport { StaggerContainer, StaggerItem } from './PageTransition';\nimport GlassyCard from './ui/GlassyCard';\nimport { useTransition } from './transitions';\n\n// SVG Icon Components - Production Optimized\nconst BusIcon = () => (\n  <svg\n    className=\"w-12 h-12 sm:w-16 sm:h-16 custom-icon\"\n    viewBox=\"0 0 48 48\"\n    width=\"48\"\n    height=\"48\"\n    fill=\"none\"\n    aria-label=\"Bus Icon\"\n    style={{ display: 'block', margin: '0 auto' }}\n  >\n    {/* Bus Body - Main Structure */}\n    <rect\n      x=\"4\"\n      y=\"12\"\n      width=\"40\"\n      height=\"20\"\n      rx=\"2\"\n      fill=\"#3B82F6\"\n      stroke=\"#1E40AF\"\n      strokeWidth=\"1\"\n    />\n\n    {/* Bus Windows */}\n    <rect\n      x=\"6\"\n      y=\"14\"\n      width=\"8\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#E0F2FE\"\n      stroke=\"#0EA5E9\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"16\"\n      y=\"14\"\n      width=\"8\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#E0F2FE\"\n      stroke=\"#0EA5E9\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"26\"\n      y=\"14\"\n      width=\"8\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#E0F2FE\"\n      stroke=\"#0EA5E9\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"36\"\n      y=\"14\"\n      width=\"6\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#E0F2FE\"\n      stroke=\"#0EA5E9\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Bus Door */}\n    <rect\n      x=\"18\"\n      y=\"22\"\n      width=\"12\"\n      height=\"8\"\n      rx=\"1\"\n      fill=\"#FEF3C7\"\n      stroke=\"#F59E0B\"\n      strokeWidth=\"0.5\"\n    />\n    <line x1=\"24\" y1=\"22\" x2=\"24\" y2=\"30\" stroke=\"#F59E0B\" strokeWidth=\"1\" />\n\n    {/* Wheels */}\n    <circle\n      cx=\"12\"\n      cy=\"34\"\n      r=\"3\"\n      fill=\"#374151\"\n      stroke=\"#1F2937\"\n      strokeWidth=\"1\"\n    />\n    <circle cx=\"12\" cy=\"34\" r=\"1.5\" fill=\"#6B7280\" />\n    <circle\n      cx=\"36\"\n      cy=\"34\"\n      r=\"3\"\n      fill=\"#374151\"\n      stroke=\"#1F2937\"\n      strokeWidth=\"1\"\n    />\n    <circle cx=\"36\" cy=\"34\" r=\"1.5\" fill=\"#6B7280\" />\n\n    {/* Headlights */}\n    <circle cx=\"8\" cy=\"16\" r=\"1\" fill=\"#FEF3C7\" />\n    <circle cx=\"40\" cy=\"16\" r=\"1\" fill=\"#FEF3C7\" />\n\n    {/* Side Mirrors */}\n    <rect x=\"2\" y=\"16\" width=\"2\" height=\"4\" rx=\"1\" fill=\"#6B7280\" />\n    <rect x=\"44\" y=\"16\" width=\"2\" height=\"4\" rx=\"1\" fill=\"#6B7280\" />\n\n    {/* Bus Number/Logo Area */}\n    <rect\n      x=\"28\"\n      y=\"16\"\n      width=\"8\"\n      height=\"3\"\n      rx=\"0.5\"\n      fill=\"#FEF3C7\"\n      opacity=\"0.8\"\n    />\n    <text\n      x=\"32\"\n      y=\"18\"\n      textAnchor=\"middle\"\n      fontSize=\"2\"\n      fill=\"#1F2937\"\n      fontFamily=\"Arial, sans-serif\"\n    >\n      GU\n    </text>\n  </svg>\n);\n\nconst MapIcon = () => (\n  <svg\n    className=\"w-12 h-12 sm:w-16 sm:h-16 custom-icon\"\n    viewBox=\"0 0 48 48\"\n    width=\"48\"\n    height=\"48\"\n    fill=\"none\"\n    aria-label=\"Map Icon\"\n    style={{ display: 'block', margin: '0 auto' }}\n  >\n    {/* Map Background */}\n    <rect\n      x=\"4\"\n      y=\"8\"\n      width=\"40\"\n      height=\"32\"\n      rx=\"2\"\n      fill=\"#F0FDF4\"\n      stroke=\"#16A34A\"\n      strokeWidth=\"1\"\n    />\n\n    {/* Map Grid Lines */}\n    <line x1=\"8\" y1=\"16\" x2=\"40\" y2=\"16\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n    <line x1=\"8\" y1=\"24\" x2=\"40\" y2=\"24\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n    <line x1=\"8\" y1=\"32\" x2=\"40\" y2=\"32\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n    <line x1=\"16\" y1=\"12\" x2=\"16\" y2=\"36\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n    <line x1=\"24\" y1=\"12\" x2=\"24\" y2=\"36\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n    <line x1=\"32\" y1=\"12\" x2=\"32\" y2=\"36\" stroke=\"#BBF7D0\" strokeWidth=\"0.5\" />\n\n    {/* Roads */}\n    <rect\n      x=\"12\"\n      y=\"20\"\n      width=\"16\"\n      height=\"2\"\n      fill=\"#FEF3C7\"\n      stroke=\"#F59E0B\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"20\"\n      y=\"12\"\n      width=\"2\"\n      height=\"16\"\n      fill=\"#FEF3C7\"\n      stroke=\"#F59E0B\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Buildings */}\n    <rect\n      x=\"10\"\n      y=\"26\"\n      width=\"4\"\n      height=\"8\"\n      fill=\"#E5E7EB\"\n      stroke=\"#6B7280\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"16\"\n      y=\"28\"\n      width=\"4\"\n      height=\"6\"\n      fill=\"#E5E7EB\"\n      stroke=\"#6B7280\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"22\"\n      y=\"26\"\n      width=\"4\"\n      height=\"8\"\n      fill=\"#E5E7EB\"\n      stroke=\"#6B7280\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"28\"\n      y=\"28\"\n      width=\"4\"\n      height=\"6\"\n      fill=\"#E5E7EB\"\n      stroke=\"#6B7280\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"34\"\n      y=\"26\"\n      width=\"4\"\n      height=\"8\"\n      fill=\"#E5E7EB\"\n      stroke=\"#6B7280\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Windows on Buildings */}\n    <rect x=\"11\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"13\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"17\" y=\"30\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"19\" y=\"30\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"23\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"25\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"29\" y=\"30\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"31\" y=\"30\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"35\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n    <rect x=\"37\" y=\"28\" width=\"1\" height=\"1\" fill=\"#3B82F6\" />\n\n    {/* Location Pin */}\n    <circle\n      cx=\"24\"\n      cy=\"22\"\n      r=\"2\"\n      fill=\"#EF4444\"\n      stroke=\"#DC2626\"\n      strokeWidth=\"0.5\"\n    />\n    <path\n      d=\"M24 24 L26 28 L22 28 Z\"\n      fill=\"#EF4444\"\n      stroke=\"#DC2626\"\n      strokeWidth=\"0.5\"\n    />\n    <circle cx=\"24\" cy=\"22\" r=\"0.5\" fill=\"#FFFFFF\" />\n\n    {/* Compass Rose */}\n    <circle\n      cx=\"36\"\n      cy=\"16\"\n      r=\"3\"\n      fill=\"#FEF3C7\"\n      stroke=\"#F59E0B\"\n      strokeWidth=\"0.5\"\n    />\n    <text\n      x=\"36\"\n      y=\"18\"\n      textAnchor=\"middle\"\n      fontSize=\"2\"\n      fill=\"#1F2937\"\n      fontFamily=\"Arial, sans-serif\"\n    >\n      N\n    </text>\n    <text\n      x=\"36\"\n      y=\"22\"\n      textAnchor=\"middle\"\n      fontSize=\"2\"\n      fill=\"#1F2937\"\n      fontFamily=\"Arial, sans-serif\"\n    >\n      S\n    </text>\n    <text\n      x=\"33\"\n      y=\"20\"\n      textAnchor=\"middle\"\n      fontSize=\"2\"\n      fill=\"#1F2937\"\n      fontFamily=\"Arial, sans-serif\"\n    >\n      W\n    </text>\n    <text\n      x=\"39\"\n      y=\"20\"\n      textAnchor=\"middle\"\n      fontSize=\"2\"\n      fill=\"#1F2937\"\n      fontFamily=\"Arial, sans-serif\"\n    >\n      E\n    </text>\n  </svg>\n);\n\nconst AdminIcon = () => (\n  <svg\n    className=\"w-12 h-12 sm:w-16 sm:h-16 custom-icon\"\n    viewBox=\"0 0 48 48\"\n    width=\"48\"\n    height=\"48\"\n    fill=\"none\"\n    aria-label=\"Admin Icon\"\n    style={{ display: 'block', margin: '0 auto' }}\n  >\n    {/* Dashboard Background */}\n    <rect\n      x=\"4\"\n      y=\"8\"\n      width=\"40\"\n      height=\"32\"\n      rx=\"3\"\n      fill=\"#F8FAFC\"\n      stroke=\"#8B5CF6\"\n      strokeWidth=\"1\"\n    />\n\n    {/* Header Bar */}\n    <rect\n      x=\"6\"\n      y=\"10\"\n      width=\"36\"\n      height=\"4\"\n      rx=\"1\"\n      fill=\"#8B5CF6\"\n      opacity=\"0.8\"\n    />\n    <circle cx=\"8\" cy=\"12\" r=\"1\" fill=\"#FFFFFF\" />\n    <circle cx=\"10\" cy=\"12\" r=\"1\" fill=\"#FFFFFF\" />\n    <circle cx=\"12\" cy=\"12\" r=\"1\" fill=\"#FFFFFF\" />\n\n    {/* Sidebar */}\n    <rect\n      x=\"6\"\n      y=\"16\"\n      width=\"8\"\n      height=\"20\"\n      rx=\"1\"\n      fill=\"#E9D5FF\"\n      stroke=\"#A855F7\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Sidebar Icons */}\n    <rect x=\"8\" y=\"18\" width=\"4\" height=\"2\" rx=\"0.5\" fill=\"#7C3AED\" />\n    <rect x=\"8\" y=\"22\" width=\"4\" height=\"2\" rx=\"0.5\" fill=\"#7C3AED\" />\n    <rect x=\"8\" y=\"26\" width=\"4\" height=\"2\" rx=\"0.5\" fill=\"#7C3AED\" />\n    <rect x=\"8\" y=\"30\" width=\"4\" height=\"2\" rx=\"0.5\" fill=\"#7C3AED\" />\n\n    {/* Main Content Area */}\n    <rect\n      x=\"16\"\n      y=\"16\"\n      width=\"26\"\n      height=\"20\"\n      rx=\"1\"\n      fill=\"#FFFFFF\"\n      stroke=\"#DDD6FE\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Content Grid */}\n    <rect\n      x=\"18\"\n      y=\"18\"\n      width=\"10\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#F3E8FF\"\n      stroke=\"#C084FC\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"30\"\n      y=\"18\"\n      width=\"10\"\n      height=\"6\"\n      rx=\"1\"\n      fill=\"#F3E8FF\"\n      stroke=\"#C084FC\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"18\"\n      y=\"26\"\n      width=\"10\"\n      height=\"8\"\n      rx=\"1\"\n      fill=\"#F3E8FF\"\n      stroke=\"#C084FC\"\n      strokeWidth=\"0.5\"\n    />\n    <rect\n      x=\"30\"\n      y=\"26\"\n      width=\"10\"\n      height=\"8\"\n      rx=\"1\"\n      fill=\"#F3E8FF\"\n      stroke=\"#C084FC\"\n      strokeWidth=\"0.5\"\n    />\n\n    {/* Chart Lines */}\n    <path\n      d=\"M20 22 L22 21 L24 23 L26 20 L28 22\"\n      stroke=\"#8B5CF6\"\n      strokeWidth=\"1\"\n      fill=\"none\"\n    />\n    <path\n      d=\"M32 22 L34 21 L36 23 L38 20 L40 22\"\n      stroke=\"#8B5CF6\"\n      strokeWidth=\"1\"\n      fill=\"none\"\n    />\n\n    {/* Data Points */}\n    <circle cx=\"20\" cy=\"22\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"22\" cy=\"21\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"24\" cy=\"23\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"26\" cy=\"20\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"28\" cy=\"22\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"32\" cy=\"22\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"34\" cy=\"21\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"36\" cy=\"23\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"38\" cy=\"20\" r=\"0.5\" fill=\"#8B5CF6\" />\n    <circle cx=\"40\" cy=\"22\" r=\"0.5\" fill=\"#8B5CF6\" />\n\n    {/* Bar Chart */}\n    <rect x=\"20\" y=\"30\" width=\"2\" height=\"2\" fill=\"#8B5CF6\" />\n    <rect x=\"23\" y=\"29\" width=\"2\" height=\"3\" fill=\"#8B5CF6\" />\n    <rect x=\"26\" y=\"28\" width=\"2\" height=\"4\" fill=\"#8B5CF6\" />\n    <rect x=\"29\" y=\"31\" width=\"2\" height=\"1\" fill=\"#8B5CF6\" />\n    <rect x=\"32\" y=\"30\" width=\"2\" height=\"2\" fill=\"#8B5CF6\" />\n    <rect x=\"35\" y=\"29\" width=\"2\" height=\"3\" fill=\"#8B5CF6\" />\n    <rect x=\"38\" y=\"28\" width=\"2\" height=\"4\" fill=\"#8B5CF6\" />\n\n    {/* Settings Gear */}\n    <circle\n      cx=\"40\"\n      cy=\"12\"\n      r=\"2\"\n      fill=\"#8B5CF6\"\n      stroke=\"#7C3AED\"\n      strokeWidth=\"0.5\"\n    />\n    <circle cx=\"40\" cy=\"12\" r=\"1\" fill=\"#FFFFFF\" />\n    <path\n      d=\"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12\"\n      stroke=\"#7C3AED\"\n      strokeWidth=\"0.5\"\n      strokeLinecap=\"round\"\n    />\n  </svg>\n);\n\nconst PremiumHomepage: React.FC = () => {\n  const navigate = useNavigate();\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    // Check if device is mobile\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  const { setTransition } = useTransition();\n\n  const handleNavigation = (path: string) => {\n    // Set transition type based on destination\n    if (path.includes('login')) {\n      setTransition('homepage-to-login');\n    } else if (path.includes('student') || path.includes('student-map')) {\n      setTransition('homepage-to-map');\n    } else {\n      setTransition('default');\n    }\n\n    // setIsTransitioning(true); // This line was removed as per the new_code\n\n    // Add a small delay for smooth transition\n    setTimeout(() => {\n      navigate(path);\n    }, 200);\n  };\n\n  // Optimize particle count for mobile\n  const particleCount = isMobile ? 8 : 20;\n\n  return (\n    <div className=\"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900\">\n      {/* Main Content */}\n      <div className=\"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6\">\n        {/* Premium Heading */}\n        <motion.div\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"text-center mb-8 sm:mb-16 px-4\"\n        >\n          <h1 className=\"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight\">\n            <span className=\"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent\">\n              Ganpat University\n            </span>\n          </h1>\n          <h2 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight\">\n            Bus Tracker\n          </h2>\n          <div className=\"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full\" />\n        </motion.div>\n\n        {/* Interactive Buttons Container */}\n        <StaggerContainer className=\"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4\">\n          {/* Driver Interface Button */}\n          <StaggerItem>\n            <motion.div\n              whileHover={\n                !isMobile ? { scale: 1.05, rotateY: 5, rotateX: 2 } : {}\n              }\n              whileTap={{ scale: 0.95 }}\n              className=\"relative group w-full sm:w-auto\"\n            >\n              {/* Glow Effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n\n              <GlassyCard\n                variant=\"ultra\"\n                glow={true}\n                className=\"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10\"\n                onClick={() => handleNavigation('/driver-login')}\n              >\n                <div className=\"text-center px-2\">\n                  <div className=\"mb-2 sm:mb-4 animate-pulse icon-container\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    <BusIcon />\n                  </div>\n                  <h3 className=\"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2\">\n                    Driver Interface\n                  </h3>\n                  <p className=\"text-white/70 text-xs sm:text-sm\">\n                    Real-time location sharing & navigation\n                  </p>\n                </div>\n\n                {/* Hover/Touch Indicator */}\n                <div className=\"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                  <div className=\"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                </div>\n              </GlassyCard>\n            </motion.div>\n          </StaggerItem>\n\n          {/* Student Map Button */}\n          <StaggerItem>\n            <motion.div\n              whileHover={\n                !isMobile ? { scale: 1.05, rotateY: 5, rotateX: 2 } : {}\n              }\n              whileTap={{ scale: 0.95 }}\n              className=\"relative group w-full sm:w-auto\"\n            >\n              {/* Glow Effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n\n              <GlassyCard\n                variant=\"ultra\"\n                glow={true}\n                className=\"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10\"\n                onClick={() => handleNavigation('/student-map')}\n              >\n                <div className=\"text-center px-2\">\n                  <div className=\"mb-2 sm:mb-4 animate-pulse icon-container\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    <MapIcon />\n                  </div>\n                  <h3 className=\"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2\">\n                    Student Map\n                  </h3>\n                  <p className=\"text-white/70 text-xs sm:text-sm\">\n                    Live bus tracking & route information\n                  </p>\n                </div>\n\n                {/* Hover/Touch Indicator */}\n                <div className=\"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                  <div className=\"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                </div>\n              </GlassyCard>\n            </motion.div>\n          </StaggerItem>\n\n          {/* Admin Panel Button */}\n          <StaggerItem>\n            <motion.div\n              whileHover={\n                !isMobile ? { scale: 1.05, rotateY: 5, rotateX: 2 } : {}\n              }\n              whileTap={{ scale: 0.95 }}\n              className=\"relative group w-full sm:w-auto\"\n            >\n              {/* Glow Effect */}\n              <div className=\"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n\n              <GlassyCard\n                variant=\"ultra\"\n                glow={true}\n                className=\"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10\"\n                onClick={() => handleNavigation('/admin-login')}\n              >\n                <div className=\"text-center px-2\">\n                  <div className=\"mb-2 sm:mb-4 animate-pulse icon-container\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    <AdminIcon />\n                  </div>\n                  <h3 className=\"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2\">\n                    Admin Panel\n                  </h3>\n                  <p className=\"text-white/70 text-xs sm:text-sm\">\n                    Fleet management & analytics dashboard\n                  </p>\n                </div>\n\n                {/* Hover/Touch Indicator */}\n                <div className=\"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                  <div className=\"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                </div>\n              </GlassyCard>\n            </motion.div>\n          </StaggerItem>\n        </StaggerContainer>\n\n        {/* Footer Info */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ duration: 0.8, delay: 1.2 }}\n          className=\"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4\"\n        >\n          <p className=\"text-white/60 text-xs sm:text-sm\">\n            Powered by cutting-edge technology • Real-time tracking • Premium\n            experience\n          </p>\n        </motion.div>\n\n        {/* Floating Particles Effect - Optimized for mobile */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          {[...Array(particleCount)].map((_, i) => (\n            <motion.div\n              key={i}\n              className=\"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full\"\n              style={{\n                left: `${Math.random() * 100}%`,\n                top: `${Math.random() * 100}%`,\n              }}\n              animate={{\n                y: [0, -50, 0],\n                opacity: [0, 1, 0],\n              }}\n              transition={{\n                duration: 2 + Math.random() * 2,\n                repeat: Infinity,\n                delay: Math.random() * 2,\n              }}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PremiumHomepage;\n","import React, { useEffect, Suspense } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';\nimport { useAuthStore } from './stores/useAuthStore';\nimport { useHealthCheck } from './hooks/useApiQueries';\nimport { authService } from './services/authService';\nimport DriverInterface from './components/DriverInterface';\nimport DriverLogin from './components/DriverLogin';\nimport DriverDashboard from './components/DriverDashboard';\n// Lazy load the optimized student map for better performance\nconst OptimizedStudentMap = React.lazy(() => import('./components/OptimizedStudentMapLazy'));\nimport AdminDashboard from './components/AdminDashboard';\nimport AdminLogin from './components/AdminLogin';\nimport PremiumHomepage from './components/PremiumHomepage';\nimport {\n  TransitionProvider,\n  GlobalTransitionWrapper,\n} from './components/transitions';\n\nfunction App() {\n  console.log('🚀 App component is rendering...');\n\n  // Zustand auth store\n  const {\n    loading: authLoading,\n    error: authError,\n    setUser,\n    setLoading,\n    setError,\n  } = useAuthStore();\n\n  // React Query health check\n  const { data: health, isLoading: healthLoading, error: healthError } = useHealthCheck();\n\n  // Global auth state listener\n  useEffect(() => {\n    const updateAuthState = () => {\n      const currentUser = authService.getCurrentUser();\n\n      setUser(currentUser ? {\n        id: currentUser.id,\n        email: currentUser.email || '',\n        role: 'student' as const,\n        created_at: currentUser.created_at,\n        updated_at: currentUser.updated_at,\n      } : null);\n      \n      setLoading(false);\n    };\n\n    // Set up auth state listener\n    authService.onAuthStateChange(updateAuthState);\n\n    // Initial auth state check\n    updateAuthState();\n\n    return () => {\n      authService.removeAuthStateChangeListener();\n    };\n  }, [setUser, setLoading]);\n\n  // Handle health check errors\n  useEffect(() => {\n    if (healthError) {\n      setError('Failed to connect to backend');\n    } else {\n      setError(null);\n    }\n  }, [healthError, setError]);\n\n  // Legacy Homepage (for backward compatibility)\n  const LegacyHomePage = () => (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6\">\n      <div className=\"max-w-4xl w-full mx-auto\">\n        <div className=\"card-glass p-8\">\n          <h1 className=\"text-4xl font-bold gradient-text mb-6 text-center\">\n            🚍 University Bus Tracking System\n          </h1>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {/* Driver Interface */}\n            <Link\n              to=\"/driver-login\"\n              className=\"card-glass p-6 text-center hover:scale-105 transition-transform duration-300\"\n            >\n              <div className=\"text-4xl mb-4\">🚌</div>\n              <h2 className=\"text-xl font-semibold mb-2\">Driver Interface</h2>\n              <p className=\"text-white/70\">\n                Real-time location sharing & navigation\n              </p>\n            </Link>\n\n            {/* Student Map */}\n            <Link\n              to=\"/student-map\"\n              className=\"card-glass p-6 text-center hover:scale-105 transition-transform duration-300\"\n            >\n              <div className=\"text-4xl mb-4\">🗺️</div>\n              <h2 className=\"text-xl font-semibold mb-2\">Student Map</h2>\n              <p className=\"text-white/70\">\n                Live bus tracking & route information\n              </p>\n            </Link>\n\n            {/* Admin Panel */}\n            <Link\n              to=\"/admin-login\"\n              className=\"card-glass p-6 text-center hover:scale-105 transition-transform duration-300\"\n            >\n              <div className=\"text-4xl mb-4\">⚙️</div>\n              <h2 className=\"text-xl font-semibold mb-2\">Admin Panel</h2>\n              <p className=\"text-white/70\">\n                Fleet management & analytics dashboard\n              </p>\n            </Link>\n          </div>\n\n          {/* Health Status */}\n          {health && (\n            <div className=\"mt-8 p-4 bg-green-500/20 border border-green-400/30 rounded-xl\">\n              <p className=\"text-green-200 text-center\">\n                ✅ Backend Status: {health.status}\n              </p>\n            </div>\n          )}\n\n          {authError && (\n            <div className=\"mt-4 p-4 bg-red-500/20 border border-red-400/30 rounded-xl\">\n              <p className=\"text-red-200 text-center\">{authError}</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  // Loading state\n  if (authLoading || healthLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"loading-spinner mx-auto mb-4\" />\n          <p className=\"text-white\">Loading application...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <TransitionProvider>\n        <GlobalTransitionWrapper>\n          <Routes>\n            {/* Homepage Routes */}\n            <Route path=\"/\" element={<PremiumHomepage />} />\n            <Route path=\"/legacy\" element={<LegacyHomePage />} />\n\n            {/* Driver Routes */}\n            <Route path=\"/driver-login\" element={<DriverLogin />} />\n            <Route path=\"/driver-dashboard\" element={<DriverDashboard />} />\n            <Route path=\"/driver-interface\" element={<DriverInterface />} />\n\n                          {/* Student Routes */}\n              <Route \n                path=\"/student-map\" \n                element={\n                  <Suspense fallback={\n                    <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900\">\n                      <div className=\"text-center\">\n                        <div className=\"loading-spinner mx-auto mb-4\" />\n                        <p className=\"text-white text-lg\">Loading Student Map...</p>\n                      </div>\n                    </div>\n                  }>\n                    <OptimizedStudentMap />\n                  </Suspense>\n                } \n              />\n\n            {/* Admin Routes */}\n            <Route path=\"/admin-login\" element={<AdminLogin />} />\n            <Route path=\"/admin-dashboard\" element={<AdminDashboard />} />\n\n            {/* Fallback */}\n            <Route path=\"*\" element={<PremiumHomepage />} />\n          </Routes>\n        </GlobalTransitionWrapper>\n      </TransitionProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","// Console filter utility to suppress expected warnings in development\nexport const setupConsoleFilter = () => {\n  if (import.meta.env.DEV) {\n    const originalWarn = console.warn;\n    console.warn = (...args) => {\n      const message = args[0];\n\n      // Filter out React Router future flag warnings\n      if (\n        typeof message === 'string' &&\n        (message.includes('React Router Future Flag Warning') ||\n          message.includes('v7_startTransition') ||\n          message.includes('v7_relativeSplatPath'))\n      ) {\n        return; // Suppress these warnings\n      }\n\n      // Filter out WebGL context lost warnings (normal in development)\n      if (\n        typeof message === 'string' &&\n        message.includes('WebGL context was lost')\n      ) {\n        return; // Suppress these warnings\n      }\n\n      // Filter out Firefox WebSocket connection warnings during page load\n      if (\n        typeof message === 'string' &&\n        (message.includes(\"Firefox can't establish a connection\") ||\n          message.includes(\n            'connection was interrupted while the page was loading'\n          ))\n      ) {\n        return; // Suppress these warnings\n      }\n\n      // Log all other warnings normally\n      originalWarn.apply(console, args);\n    };\n  }\n};\n","import { authService } from '../services/authService';\nimport { environment } from '../config/environment';\n\n// Global fetch interceptor to add authorization headers\nconst originalFetch = window.fetch;\n\nwindow.fetch = async function (input: RequestInfo | URL, init?: RequestInit) {\n  // Only add auth headers for your API requests\n  if (\n    typeof input === 'string' &&\n    (input.includes(environment.api.url) || input.includes('localhost'))\n  ) {\n    try {\n      let token = authService.getAccessToken();\n\n      // If no token, only try to refresh if user is authenticated\n      if (!token && authService.isAuthenticated()) {\n        console.log(\n          '🔄 No token found but user is authenticated, attempting to refresh session...'\n        );\n        const refreshResult = await authService.refreshSession();\n        if (refreshResult.success) {\n          token = authService.getAccessToken();\n          console.log('✅ Session refreshed, new token obtained');\n        }\n      }\n\n      if (token) {\n        init = init || {};\n        init.headers = {\n          ...init.headers,\n          Authorization: `Bearer ${token}`,\n        };\n      }\n    } catch (error) {\n      console.log('🔓 Public access - authentication not available');\n    }\n  }\n\n  return originalFetch(input, init);\n};\n","// ../../node_modules/.pnpm/solid-js@1.9.7/node_modules/solid-js/dist/solid.js\nvar sharedConfig = {\n  context: void 0,\n  registry: void 0,\n  effects: void 0,\n  done: false,\n  getContextId() {\n    return getContextId(this.context.count);\n  },\n  getNextContextId() {\n    return getContextId(this.context.count++);\n  }\n};\nfunction getContextId(count) {\n  const num = String(count), len = num.length - 1;\n  return sharedConfig.context.id + (len ? String.fromCharCode(96 + len) : \"\") + num;\n}\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: sharedConfig.getNextContextId(),\n    count: 0\n  };\n}\nvar IS_DEV = false;\nvar equalFn = (a, b) => a === b;\nvar $PROXY = Symbol(\"solid-proxy\");\nvar SUPPORTS_PROXY = typeof Proxy === \"function\";\nvar $TRACK = Symbol(\"solid-track\");\nvar signalOptions = {\n  equals: equalFn\n};\nvar ERROR = null;\nvar runEffects = runQueue;\nvar STALE = 1;\nvar PENDING = 2;\nvar UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nvar NO_INIT = {};\nvar Owner = null;\nvar Transition = null;\nvar Scheduler = null;\nvar ExternalSourceConfig = null;\nvar Listener = null;\nvar Updates = null;\nvar Effects = null;\nvar ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener, owner = Owner, unowned = fn.length === 0, current = detachedOwner === void 0 ? owner : detachedOwner, root = unowned ? UNOWNED : {\n    owned: null,\n    cleanups: null,\n    context: current ? current.context : null,\n    owner: current\n  }, updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || void 0\n  };\n  const setter = (value2) => {\n    if (typeof value2 === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value2 = value2(s.tValue);\n      else value2 = value2(s.value);\n    }\n    return writeSignal(s, value2);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE), s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || void 0;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  {\n    source = true;\n    fetcher = pSource;\n    options = {};\n  }\n  let pr = null, initP = NO_INIT, id = null, loadedUnderTransition = false, scheduled = false, resolved = \"initialValue\" in options, dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = /* @__PURE__ */ new Set(), [value, setValue] = (options.storage || createSignal)(options.initialValue), [error, setError] = createSignal(void 0), [track, trigger] = createSignal(void 0, {\n    equals: false\n  }), [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = sharedConfig.getNextContextId();\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;\n    else if (sharedConfig.load && sharedConfig.has(id)) initP = sharedConfig.load(id);\n  }\n  function loadEnd(p, v, error2, key) {\n    if (pr === p) {\n      pr = null;\n      key !== void 0 && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error2);\n        }, false);\n      } else completeLoad(v, error2);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === void 0) setValue(() => v);\n      setState(err !== void 0 ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext), v = value(), err = error();\n    if (err !== void 0 && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);\n          else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    let error2;\n    const p = initP !== NO_INIT ? initP : untrack(() => {\n      try {\n        return fetcher(lookup, {\n          value: value(),\n          refetching\n        });\n      } catch (fetcherError) {\n        error2 = fetcherError;\n      }\n    });\n    if (error2 !== void 0) {\n      loadEnd(pr, void 0, castError(error2), lookup);\n      return;\n    } else if (!isPromise(p)) {\n      loadEnd(pr, p, void 0, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"v\" in p) {\n      if (p.s === 1) loadEnd(pr, p.v, void 0, lookup);\n      else loadEnd(pr, void 0, castError(p.v), lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then((v) => loadEnd(p, v, void 0, lookup), (e) => loadEnd(p, void 0, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  let owner = Owner;\n  if (dynamic) createComputed(() => (owner = Owner, load(false)));\n  else load(false);\n  return [read, {\n    refetch: (info) => runWithOwner(owner, () => load(info)),\n    mutate: setValue\n  }];\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (!ExternalSourceConfig && Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    if (ExternalSourceConfig) return ExternalSourceConfig.untrack(fn);\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray3 = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return (prevValue) => {\n    let input;\n    if (isArray3) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return prevValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;\n  else if (Owner.cleanups === null) Owner.cleanups = [fn];\n  else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: /* @__PURE__ */ new Set(),\n        effects: [],\n        promises: /* @__PURE__ */ new Set(),\n        disposed: /* @__PURE__ */ new Set(),\n        queue: /* @__PURE__ */ new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise((res) => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : void 0;\n  });\n}\nvar [transPending, setTransPending] = /* @__PURE__ */ createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let value;\n  return Owner && Owner.context && (value = Owner.context[context.id]) !== void 0 ? value : context.defaultValue;\n}\nfunction children(fn) {\n  const children2 = createMemo(fn);\n  const memo2 = createMemo(() => resolveChildren(children2()));\n  memo2.toArray = () => {\n    const c = memo2();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo2;\n}\nvar SuspenseContext;\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);\n    else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);\n            else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;\n          else o.tState = STALE;\n        }\n        if (Updates.length > 1e6) {\n          Updates = [];\n          if (IS_DEV) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner, listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = void 0;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;\n  else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];\n      else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];\n      else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceConfig && c.fn) {\n    const [track, trigger] = createSignal(void 0, {\n      equals: false\n    });\n    const ordinary = ExternalSourceConfig.factory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceConfig.factory(c.fn, triggerInTransition);\n    c.fn = (x) => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node, prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;\n  else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);\n    else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e2 of Effects) {\n        \"tState\" in e2 && (e2.state = e2.tState);\n        delete e2.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i, userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);\n    else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    }\n    setHydrateContext();\n  }\n  if (sharedConfig.effects && (sharedConfig.done || !sharedConfig.count)) {\n    queue = [...sharedConfig.effects, ...queue];\n    userLength += sharedConfig.effects.length;\n    delete sharedConfig.effects;\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;\n  else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;\n      else o.state = PENDING;\n      if (o.pure) Updates.push(o);\n      else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(), index = node.sourceSlots.pop(), obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(), s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (node.tOwned) {\n    for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n    delete node.tOwned;\n  }\n  if (Transition && Transition.running && node.pure) {\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;\n  else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, owner && owner.owner || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(error, fns, owner);\n    },\n    state: STALE\n  });\n  else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children2) {\n  if (typeof children2 === \"function\" && !children2.length) return resolveChildren(children2());\n  if (Array.isArray(children2)) {\n    const results = [];\n    for (let i = 0; i < children2.length; i++) {\n      const result = resolveChildren(children2[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children2;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        ...Owner.context,\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), void 0);\n    return res;\n  };\n}\nvar FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [], mapped = [], disposers = [], len = 0, indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [], newLen = newItems.length, i, j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newIndices, newIndicesNext, temp, tempdisposers, tempIndexes, start, end, newEnd, item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot((disposer) => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      } else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++) ;\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = /* @__PURE__ */ new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === void 0 ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== void 0 && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [], mapped = [], disposers = [], signals = [], len = 0, i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [], newLen = newItems.length;\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot((disposer) => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newLen; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newLen;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\nvar hydrationEnabled = false;\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nvar propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== void 0) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (SUPPORTS_PROXY && proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== void 0) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const sourcesMap = {};\n  const defined = /* @__PURE__ */ Object.create(null);\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i2 = sourceKeys.length - 1; i2 >= 0; i2--) {\n      const key = sourceKeys[i2];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined[key]) {\n        defined[key] = desc.get ? {\n          enumerable: true,\n          configurable: true,\n          get: resolveSources.bind(sourcesMap[key] = [desc.get.bind(source)])\n        } : desc.value !== void 0 ? desc : void 0;\n      } else {\n        const sources2 = sourcesMap[key];\n        if (sources2) {\n          if (desc.get) sources2.push(desc.get.bind(source));\n          else if (desc.value !== void 0) sources2.push(() => desc.value);\n        }\n      }\n    }\n  }\n  const target = {};\n  const definedKeys = Object.keys(defined);\n  for (let i = definedKeys.length - 1; i >= 0; i--) {\n    const key = definedKeys[i], desc = defined[key];\n    if (desc && desc.get) Object.defineProperty(target, key, desc);\n    else target[key] = desc ? desc.value : void 0;\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if (SUPPORTS_PROXY && $PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map((k) => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : void 0;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter((property) => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? void 0 : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter((k) => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc = !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc ? objects[objectIndex][propName] = desc.value : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc ? otherObject[propName] = desc.value : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = (props) => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then((mod) => {\n        !sharedConfig.done && setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then((mod) => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) ? untrack(() => {\n      if (IS_DEV) ;\n      if (!ctx || sharedConfig.done) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }) : \"\");\n  };\n  wrap.preload = () => p || ((p = fn()).then((mod) => comp = () => mod.default), p);\n  return wrap;\n}\nvar counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? sharedConfig.getNextContextId() : `cl-${counter++}`;\n}\nvar narrowedError = (name) => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || void 0));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || void 0));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const conditionValue = createMemo(() => props.when, void 0, void 0);\n  const condition = keyed ? conditionValue : createMemo(conditionValue, void 0, {\n    equals: (a, b) => !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return conditionValue();\n      })) : child;\n    }\n    return props.fallback;\n  }, void 0, void 0);\n}\nfunction Switch(props) {\n  const chs = children(() => props.children);\n  const switchFunc = createMemo(() => {\n    const ch = chs();\n    const mps = Array.isArray(ch) ? ch : [ch];\n    let func = () => void 0;\n    for (let i = 0; i < mps.length; i++) {\n      const index = i;\n      const mp = mps[i];\n      const prevFunc = func;\n      const conditionValue = createMemo(() => prevFunc() ? void 0 : mp.when, void 0, void 0);\n      const condition = mp.keyed ? conditionValue : createMemo(conditionValue, void 0, {\n        equals: (a, b) => !a === !b\n      });\n      func = () => prevFunc() || (condition() ? [index, conditionValue, mp] : void 0);\n    }\n    return func;\n  });\n  return createMemo(() => {\n    const sel = switchFunc()();\n    if (!sel) return props.fallback;\n    const [index, conditionValue, mp] = sel;\n    const child = mp.children;\n    const fn = typeof child === \"function\" && child.length > 0;\n    return fn ? untrack(() => child(mp.keyed ? conditionValue() : () => {\n      if (untrack(switchFunc)()?.[0] !== index) throw narrowedError(\"Match\");\n      return conditionValue();\n    })) : child;\n  }, void 0, void 0);\n}\nfunction Match(props) {\n  return props;\n}\nvar DEV = void 0;\n\n// ../../node_modules/.pnpm/solid-js@1.9.7/node_modules/solid-js/web/dist/web.js\nvar booleans = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"inert\", \"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\"];\nvar Properties = /* @__PURE__ */ new Set([\"className\", \"value\", \"readOnly\", \"noValidate\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", ...booleans]);\nvar ChildProperties = /* @__PURE__ */ new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nvar Aliases = /* @__PURE__ */ Object.assign(/* @__PURE__ */ Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nvar PropAliases = /* @__PURE__ */ Object.assign(/* @__PURE__ */ Object.create(null), {\n  class: \"className\",\n  novalidate: {\n    $: \"noValidate\",\n    FORM: 1\n  },\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : void 0 : a;\n}\nvar DelegatedEvents = /* @__PURE__ */ new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nvar SVGElements = /* @__PURE__ */ new Set([\n  \"altGlyph\",\n  \"altGlyphDef\",\n  \"altGlyphItem\",\n  \"animate\",\n  \"animateColor\",\n  \"animateMotion\",\n  \"animateTransform\",\n  \"circle\",\n  \"clipPath\",\n  \"color-profile\",\n  \"cursor\",\n  \"defs\",\n  \"desc\",\n  \"ellipse\",\n  \"feBlend\",\n  \"feColorMatrix\",\n  \"feComponentTransfer\",\n  \"feComposite\",\n  \"feConvolveMatrix\",\n  \"feDiffuseLighting\",\n  \"feDisplacementMap\",\n  \"feDistantLight\",\n  \"feDropShadow\",\n  \"feFlood\",\n  \"feFuncA\",\n  \"feFuncB\",\n  \"feFuncG\",\n  \"feFuncR\",\n  \"feGaussianBlur\",\n  \"feImage\",\n  \"feMerge\",\n  \"feMergeNode\",\n  \"feMorphology\",\n  \"feOffset\",\n  \"fePointLight\",\n  \"feSpecularLighting\",\n  \"feSpotLight\",\n  \"feTile\",\n  \"feTurbulence\",\n  \"filter\",\n  \"font\",\n  \"font-face\",\n  \"font-face-format\",\n  \"font-face-name\",\n  \"font-face-src\",\n  \"font-face-uri\",\n  \"foreignObject\",\n  \"g\",\n  \"glyph\",\n  \"glyphRef\",\n  \"hkern\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"marker\",\n  \"mask\",\n  \"metadata\",\n  \"missing-glyph\",\n  \"mpath\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"set\",\n  \"stop\",\n  \"svg\",\n  \"switch\",\n  \"symbol\",\n  \"text\",\n  \"textPath\",\n  \"tref\",\n  \"tspan\",\n  \"use\",\n  \"view\",\n  \"vkern\"\n]);\nvar SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nvar memo = (fn) => createMemo(() => fn());\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length, aEnd = a.length, bEnd = bLength, aStart = 0, bStart = 0, after = a[aEnd - 1].nextSibling, map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = /* @__PURE__ */ new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart, sequence = 1, t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\nvar $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot((dispose2) => {\n    disposer = dispose2;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : void 0, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isImportNode, isSVG, isMathML) {\n  let node;\n  const create = () => {\n    const t = isMathML ? document.createElementNS(\"http://www.w3.org/1998/Math/MathML\", \"template\") : document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : isMathML ? t.firstChild : t.content.firstChild;\n  };\n  const fn = isImportNode ? () => untrack(() => document.importNode(node || (node = create()), true)) : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document2 = window.document) {\n  const e = document2[$$EVENTS] || (document2[$$EVENTS] = /* @__PURE__ */ new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document2.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document2 = window.document) {\n  if (document2[$$EVENTS]) {\n    for (let name of document2[$$EVENTS].keys()) document2.removeEventListener(name, eventHandler);\n    delete document2[$$EVENTS];\n  }\n}\nfunction setAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(name);\n  else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttributeNS(namespace, name);\n  else node.setAttributeNS(namespace, name, value);\n}\nfunction setBoolAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  value ? node.setAttribute(name, \"\") : node.removeAttribute(name);\n}\nfunction className(node, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(\"class\");\n  else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = (e) => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler, typeof handler !== \"function\" && handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}), prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i], classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = void 0);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => typeof props.ref === \"function\" && use(props.ref, node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== void 0 && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect((current) => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef, props);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef, props);\n  }\n}\nfunction getNextElement(template2) {\n  let node, key, hydrating = isHydrating();\n  if (!hydrating || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    return template2();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction isHydrating(node) {\n  return !!sharedConfig.context && !sharedConfig.done && (!node || node.isConnected);\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef, props) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev, typeof prev !== \"function\" && prev);\n    value && node.addEventListener(e, value, typeof value !== \"function\" && value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (prop.slice(0, 5) === \"bool:\") {\n    setBoolAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\") || \"is\" in props)) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (isHydrating(node)) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);\n    else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;\n    else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);\n    else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  if (sharedConfig.registry && sharedConfig.events) {\n    if (sharedConfig.events.find(([el, ev]) => ev === e)) return;\n  }\n  let node = e.target;\n  const key = `$$${e.type}`;\n  const oriTarget = e.target;\n  const oriCurrentTarget = e.currentTarget;\n  const retarget = (value) => Object.defineProperty(e, \"target\", {\n    configurable: true,\n    value\n  });\n  const handleNode = () => {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== void 0 ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node.host && typeof node.host !== \"string\" && !node.host._$host && node.contains(e.target) && retarget(node.host);\n    return true;\n  };\n  const walkUpTree = () => {\n    while (handleNode() && (node = node._$host || node.parentNode || node.host)) ;\n  };\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  if (e.composedPath) {\n    const path = e.composedPath();\n    retarget(path[0]);\n    for (let i = 0; i < path.length - 2; i++) {\n      node = path[i];\n      if (!handleNode()) break;\n      if (node._$host) {\n        node = node._$host;\n        walkUpTree();\n        break;\n      }\n      if (node.parentNode === oriCurrentTarget) {\n        break;\n      }\n    }\n  } else walkUpTree();\n  retarget(oriTarget);\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  const hydrating = isHydrating(parent);\n  if (hydrating) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();\n      else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value, multi = marker !== void 0;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (hydrating) return current;\n    if (t === \"number\") {\n      value = value.toString();\n      if (value === current) return current;\n    }\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data !== value && (node.data = value);\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydrating) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (hydrating) {\n      if (!array.length) return current;\n      if (marker === void 0) return current = [...parent.childNodes];\n      let node = array[0];\n      if (node.parentNode !== parent) return current;\n      const nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return current = nodes;\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (hydrating && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else ;\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i], prev = current && current[normalized.length], t;\n    if (item == null || item === true || item === false) ;\n    else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);\n      else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === void 0) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction getHydrationKey() {\n  return sharedConfig.getNextContextId();\n}\nvar isServer = false;\nvar SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nfunction Portal(props) {\n  const {\n    useShadow\n  } = props, marker = document.createTextNode(\"\"), mount = () => props.mount || document.body, owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot((dispose2) => insert(el, () => !clean() ? content() : dispose2(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG), renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n        mode: \"open\"\n      }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, void 0, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction createDynamic(component, props) {\n  const cached = createMemo(component);\n  return createMemo(() => {\n    const component2 = cached();\n    switch (typeof component2) {\n      case \"function\":\n        return untrack(() => component2(props));\n      case \"string\":\n        const isSvg = SVGElements.has(component2);\n        const el = sharedConfig.context ? getNextElement() : createElement(component2, isSvg);\n        spread(el, props, isSvg);\n        return el;\n    }\n  });\n}\nfunction Dynamic(props) {\n  const [, others] = splitProps(props, [\"component\"]);\n  return createDynamic(() => props.component, others);\n}\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/double-indexed-kv.js\nvar DoubleIndexedKV = class {\n  constructor() {\n    this.keyToValue = /* @__PURE__ */ new Map();\n    this.valueToKey = /* @__PURE__ */ new Map();\n  }\n  set(key, value) {\n    this.keyToValue.set(key, value);\n    this.valueToKey.set(value, key);\n  }\n  getByKey(key) {\n    return this.keyToValue.get(key);\n  }\n  getByValue(value) {\n    return this.valueToKey.get(value);\n  }\n  clear() {\n    this.keyToValue.clear();\n    this.valueToKey.clear();\n  }\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/registry.js\nvar Registry = class {\n  constructor(generateIdentifier) {\n    this.generateIdentifier = generateIdentifier;\n    this.kv = new DoubleIndexedKV();\n  }\n  register(value, identifier) {\n    if (this.kv.getByValue(value)) {\n      return;\n    }\n    if (!identifier) {\n      identifier = this.generateIdentifier(value);\n    }\n    this.kv.set(identifier, value);\n  }\n  clear() {\n    this.kv.clear();\n  }\n  getIdentifier(value) {\n    return this.kv.getByValue(value);\n  }\n  getValue(identifier) {\n    return this.kv.getByKey(identifier);\n  }\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/class-registry.js\nvar ClassRegistry = class extends Registry {\n  constructor() {\n    super((c) => c.name);\n    this.classToAllowedProps = /* @__PURE__ */ new Map();\n  }\n  register(value, options) {\n    if (typeof options === \"object\") {\n      if (options.allowProps) {\n        this.classToAllowedProps.set(value, options.allowProps);\n      }\n      super.register(value, options.identifier);\n    } else {\n      super.register(value, options);\n    }\n  }\n  getAllowedProps(value) {\n    return this.classToAllowedProps.get(value);\n  }\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/util.js\nfunction valuesOfObj(record) {\n  if (\"values\" in Object) {\n    return Object.values(record);\n  }\n  const values = [];\n  for (const key in record) {\n    if (record.hasOwnProperty(key)) {\n      values.push(record[key]);\n    }\n  }\n  return values;\n}\nfunction find(record, predicate) {\n  const values = valuesOfObj(record);\n  if (\"find\" in values) {\n    return values.find(predicate);\n  }\n  const valuesNotNever = values;\n  for (let i = 0; i < valuesNotNever.length; i++) {\n    const value = valuesNotNever[i];\n    if (predicate(value)) {\n      return value;\n    }\n  }\n  return void 0;\n}\nfunction forEach(record, run) {\n  Object.entries(record).forEach(([key, value]) => run(value, key));\n}\nfunction includes(arr, value) {\n  return arr.indexOf(value) !== -1;\n}\nfunction findArr(record, predicate) {\n  for (let i = 0; i < record.length; i++) {\n    const value = record[i];\n    if (predicate(value)) {\n      return value;\n    }\n  }\n  return void 0;\n}\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/custom-transformer-registry.js\nvar CustomTransformerRegistry = class {\n  constructor() {\n    this.transfomers = {};\n  }\n  register(transformer) {\n    this.transfomers[transformer.name] = transformer;\n  }\n  findApplicable(v) {\n    return find(this.transfomers, (transformer) => transformer.isApplicable(v));\n  }\n  findByName(name) {\n    return this.transfomers[name];\n  }\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/is.js\nvar getType = (payload) => Object.prototype.toString.call(payload).slice(8, -1);\nvar isUndefined = (payload) => typeof payload === \"undefined\";\nvar isNull = (payload) => payload === null;\nvar isPlainObject = (payload) => {\n  if (typeof payload !== \"object\" || payload === null)\n    return false;\n  if (payload === Object.prototype)\n    return false;\n  if (Object.getPrototypeOf(payload) === null)\n    return true;\n  return Object.getPrototypeOf(payload) === Object.prototype;\n};\nvar isEmptyObject = (payload) => isPlainObject(payload) && Object.keys(payload).length === 0;\nvar isArray = (payload) => Array.isArray(payload);\nvar isString = (payload) => typeof payload === \"string\";\nvar isNumber = (payload) => typeof payload === \"number\" && !isNaN(payload);\nvar isBoolean = (payload) => typeof payload === \"boolean\";\nvar isRegExp = (payload) => payload instanceof RegExp;\nvar isMap = (payload) => payload instanceof Map;\nvar isSet = (payload) => payload instanceof Set;\nvar isSymbol = (payload) => getType(payload) === \"Symbol\";\nvar isDate = (payload) => payload instanceof Date && !isNaN(payload.valueOf());\nvar isError = (payload) => payload instanceof Error;\nvar isNaNValue = (payload) => typeof payload === \"number\" && isNaN(payload);\nvar isPrimitive = (payload) => isBoolean(payload) || isNull(payload) || isUndefined(payload) || isNumber(payload) || isString(payload) || isSymbol(payload);\nvar isBigint = (payload) => typeof payload === \"bigint\";\nvar isInfinite = (payload) => payload === Infinity || payload === -Infinity;\nvar isTypedArray = (payload) => ArrayBuffer.isView(payload) && !(payload instanceof DataView);\nvar isURL = (payload) => payload instanceof URL;\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/pathstringifier.js\nvar escapeKey = (key) => key.replace(/\\./g, \"\\\\.\");\nvar stringifyPath = (path) => path.map(String).map(escapeKey).join(\".\");\nvar parsePath = (string) => {\n  const result = [];\n  let segment = \"\";\n  for (let i = 0; i < string.length; i++) {\n    let char = string.charAt(i);\n    const isEscapedDot = char === \"\\\\\" && string.charAt(i + 1) === \".\";\n    if (isEscapedDot) {\n      segment += \".\";\n      i++;\n      continue;\n    }\n    const isEndOfSegment = char === \".\";\n    if (isEndOfSegment) {\n      result.push(segment);\n      segment = \"\";\n      continue;\n    }\n    segment += char;\n  }\n  const lastSegment = segment;\n  result.push(lastSegment);\n  return result;\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/transformer.js\nfunction simpleTransformation(isApplicable, annotation, transform, untransform) {\n  return {\n    isApplicable,\n    annotation,\n    transform,\n    untransform\n  };\n}\nvar simpleRules = [\n  simpleTransformation(isUndefined, \"undefined\", () => null, () => void 0),\n  simpleTransformation(isBigint, \"bigint\", (v) => v.toString(), (v) => {\n    if (typeof BigInt !== \"undefined\") {\n      return BigInt(v);\n    }\n    console.error(\"Please add a BigInt polyfill.\");\n    return v;\n  }),\n  simpleTransformation(isDate, \"Date\", (v) => v.toISOString(), (v) => new Date(v)),\n  simpleTransformation(isError, \"Error\", (v, superJson) => {\n    const baseError = {\n      name: v.name,\n      message: v.message\n    };\n    superJson.allowedErrorProps.forEach((prop) => {\n      baseError[prop] = v[prop];\n    });\n    return baseError;\n  }, (v, superJson) => {\n    const e = new Error(v.message);\n    e.name = v.name;\n    e.stack = v.stack;\n    superJson.allowedErrorProps.forEach((prop) => {\n      e[prop] = v[prop];\n    });\n    return e;\n  }),\n  simpleTransformation(isRegExp, \"regexp\", (v) => \"\" + v, (regex) => {\n    const body = regex.slice(1, regex.lastIndexOf(\"/\"));\n    const flags = regex.slice(regex.lastIndexOf(\"/\") + 1);\n    return new RegExp(body, flags);\n  }),\n  simpleTransformation(\n    isSet,\n    \"set\",\n    // (sets only exist in es6+)\n    // eslint-disable-next-line es5/no-es6-methods\n    (v) => [...v.values()],\n    (v) => new Set(v)\n  ),\n  simpleTransformation(isMap, \"map\", (v) => [...v.entries()], (v) => new Map(v)),\n  simpleTransformation((v) => isNaNValue(v) || isInfinite(v), \"number\", (v) => {\n    if (isNaNValue(v)) {\n      return \"NaN\";\n    }\n    if (v > 0) {\n      return \"Infinity\";\n    } else {\n      return \"-Infinity\";\n    }\n  }, Number),\n  simpleTransformation((v) => v === 0 && 1 / v === -Infinity, \"number\", () => {\n    return \"-0\";\n  }, Number),\n  simpleTransformation(isURL, \"URL\", (v) => v.toString(), (v) => new URL(v))\n];\nfunction compositeTransformation(isApplicable, annotation, transform, untransform) {\n  return {\n    isApplicable,\n    annotation,\n    transform,\n    untransform\n  };\n}\nvar symbolRule = compositeTransformation((s, superJson) => {\n  if (isSymbol(s)) {\n    const isRegistered = !!superJson.symbolRegistry.getIdentifier(s);\n    return isRegistered;\n  }\n  return false;\n}, (s, superJson) => {\n  const identifier = superJson.symbolRegistry.getIdentifier(s);\n  return [\"symbol\", identifier];\n}, (v) => v.description, (_, a, superJson) => {\n  const value = superJson.symbolRegistry.getValue(a[1]);\n  if (!value) {\n    throw new Error(\"Trying to deserialize unknown symbol\");\n  }\n  return value;\n});\nvar constructorToName = [\n  Int8Array,\n  Uint8Array,\n  Int16Array,\n  Uint16Array,\n  Int32Array,\n  Uint32Array,\n  Float32Array,\n  Float64Array,\n  Uint8ClampedArray\n].reduce((obj, ctor) => {\n  obj[ctor.name] = ctor;\n  return obj;\n}, {});\nvar typedArrayRule = compositeTransformation(isTypedArray, (v) => [\"typed-array\", v.constructor.name], (v) => [...v], (v, a) => {\n  const ctor = constructorToName[a[1]];\n  if (!ctor) {\n    throw new Error(\"Trying to deserialize unknown typed array\");\n  }\n  return new ctor(v);\n});\nfunction isInstanceOfRegisteredClass(potentialClass, superJson) {\n  if (potentialClass?.constructor) {\n    const isRegistered = !!superJson.classRegistry.getIdentifier(potentialClass.constructor);\n    return isRegistered;\n  }\n  return false;\n}\nvar classRule = compositeTransformation(isInstanceOfRegisteredClass, (clazz, superJson) => {\n  const identifier = superJson.classRegistry.getIdentifier(clazz.constructor);\n  return [\"class\", identifier];\n}, (clazz, superJson) => {\n  const allowedProps = superJson.classRegistry.getAllowedProps(clazz.constructor);\n  if (!allowedProps) {\n    return { ...clazz };\n  }\n  const result = {};\n  allowedProps.forEach((prop) => {\n    result[prop] = clazz[prop];\n  });\n  return result;\n}, (v, a, superJson) => {\n  const clazz = superJson.classRegistry.getValue(a[1]);\n  if (!clazz) {\n    throw new Error(`Trying to deserialize unknown class '${a[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);\n  }\n  return Object.assign(Object.create(clazz.prototype), v);\n});\nvar customRule = compositeTransformation((value, superJson) => {\n  return !!superJson.customTransformerRegistry.findApplicable(value);\n}, (value, superJson) => {\n  const transformer = superJson.customTransformerRegistry.findApplicable(value);\n  return [\"custom\", transformer.name];\n}, (value, superJson) => {\n  const transformer = superJson.customTransformerRegistry.findApplicable(value);\n  return transformer.serialize(value);\n}, (v, a, superJson) => {\n  const transformer = superJson.customTransformerRegistry.findByName(a[1]);\n  if (!transformer) {\n    throw new Error(\"Trying to deserialize unknown custom value\");\n  }\n  return transformer.deserialize(v);\n});\nvar compositeRules = [classRule, symbolRule, customRule, typedArrayRule];\nvar transformValue = (value, superJson) => {\n  const applicableCompositeRule = findArr(compositeRules, (rule) => rule.isApplicable(value, superJson));\n  if (applicableCompositeRule) {\n    return {\n      value: applicableCompositeRule.transform(value, superJson),\n      type: applicableCompositeRule.annotation(value, superJson)\n    };\n  }\n  const applicableSimpleRule = findArr(simpleRules, (rule) => rule.isApplicable(value, superJson));\n  if (applicableSimpleRule) {\n    return {\n      value: applicableSimpleRule.transform(value, superJson),\n      type: applicableSimpleRule.annotation\n    };\n  }\n  return void 0;\n};\nvar simpleRulesByAnnotation = {};\nsimpleRules.forEach((rule) => {\n  simpleRulesByAnnotation[rule.annotation] = rule;\n});\nvar untransformValue = (json, type, superJson) => {\n  if (isArray(type)) {\n    switch (type[0]) {\n      case \"symbol\":\n        return symbolRule.untransform(json, type, superJson);\n      case \"class\":\n        return classRule.untransform(json, type, superJson);\n      case \"custom\":\n        return customRule.untransform(json, type, superJson);\n      case \"typed-array\":\n        return typedArrayRule.untransform(json, type, superJson);\n      default:\n        throw new Error(\"Unknown transformation: \" + type);\n    }\n  } else {\n    const transformation = simpleRulesByAnnotation[type];\n    if (!transformation) {\n      throw new Error(\"Unknown transformation: \" + type);\n    }\n    return transformation.untransform(json, superJson);\n  }\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/accessDeep.js\nvar getNthKey = (value, n) => {\n  if (n > value.size)\n    throw new Error(\"index out of bounds\");\n  const keys = value.keys();\n  while (n > 0) {\n    keys.next();\n    n--;\n  }\n  return keys.next().value;\n};\nfunction validatePath(path) {\n  if (includes(path, \"__proto__\")) {\n    throw new Error(\"__proto__ is not allowed as a property\");\n  }\n  if (includes(path, \"prototype\")) {\n    throw new Error(\"prototype is not allowed as a property\");\n  }\n  if (includes(path, \"constructor\")) {\n    throw new Error(\"constructor is not allowed as a property\");\n  }\n}\nvar getDeep = (object, path) => {\n  validatePath(path);\n  for (let i = 0; i < path.length; i++) {\n    const key = path[i];\n    if (isSet(object)) {\n      object = getNthKey(object, +key);\n    } else if (isMap(object)) {\n      const row = +key;\n      const type = +path[++i] === 0 ? \"key\" : \"value\";\n      const keyOfRow = getNthKey(object, row);\n      switch (type) {\n        case \"key\":\n          object = keyOfRow;\n          break;\n        case \"value\":\n          object = object.get(keyOfRow);\n          break;\n      }\n    } else {\n      object = object[key];\n    }\n  }\n  return object;\n};\nvar setDeep = (object, path, mapper) => {\n  validatePath(path);\n  if (path.length === 0) {\n    return mapper(object);\n  }\n  let parent = object;\n  for (let i = 0; i < path.length - 1; i++) {\n    const key = path[i];\n    if (isArray(parent)) {\n      const index = +key;\n      parent = parent[index];\n    } else if (isPlainObject(parent)) {\n      parent = parent[key];\n    } else if (isSet(parent)) {\n      const row = +key;\n      parent = getNthKey(parent, row);\n    } else if (isMap(parent)) {\n      const isEnd = i === path.length - 2;\n      if (isEnd) {\n        break;\n      }\n      const row = +key;\n      const type = +path[++i] === 0 ? \"key\" : \"value\";\n      const keyOfRow = getNthKey(parent, row);\n      switch (type) {\n        case \"key\":\n          parent = keyOfRow;\n          break;\n        case \"value\":\n          parent = parent.get(keyOfRow);\n          break;\n      }\n    }\n  }\n  const lastKey = path[path.length - 1];\n  if (isArray(parent)) {\n    parent[+lastKey] = mapper(parent[+lastKey]);\n  } else if (isPlainObject(parent)) {\n    parent[lastKey] = mapper(parent[lastKey]);\n  }\n  if (isSet(parent)) {\n    const oldValue = getNthKey(parent, +lastKey);\n    const newValue = mapper(oldValue);\n    if (oldValue !== newValue) {\n      parent.delete(oldValue);\n      parent.add(newValue);\n    }\n  }\n  if (isMap(parent)) {\n    const row = +path[path.length - 2];\n    const keyToRow = getNthKey(parent, row);\n    const type = +lastKey === 0 ? \"key\" : \"value\";\n    switch (type) {\n      case \"key\": {\n        const newKey = mapper(keyToRow);\n        parent.set(newKey, parent.get(keyToRow));\n        if (newKey !== keyToRow) {\n          parent.delete(keyToRow);\n        }\n        break;\n      }\n      case \"value\": {\n        parent.set(keyToRow, mapper(parent.get(keyToRow)));\n        break;\n      }\n    }\n  }\n  return object;\n};\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/plainer.js\nfunction traverse(tree, walker2, origin = []) {\n  if (!tree) {\n    return;\n  }\n  if (!isArray(tree)) {\n    forEach(tree, (subtree, key) => traverse(subtree, walker2, [...origin, ...parsePath(key)]));\n    return;\n  }\n  const [nodeValue, children2] = tree;\n  if (children2) {\n    forEach(children2, (child, key) => {\n      traverse(child, walker2, [...origin, ...parsePath(key)]);\n    });\n  }\n  walker2(nodeValue, origin);\n}\nfunction applyValueAnnotations(plain, annotations, superJson) {\n  traverse(annotations, (type, path) => {\n    plain = setDeep(plain, path, (v) => untransformValue(v, type, superJson));\n  });\n  return plain;\n}\nfunction applyReferentialEqualityAnnotations(plain, annotations) {\n  function apply(identicalPaths, path) {\n    const object = getDeep(plain, parsePath(path));\n    identicalPaths.map(parsePath).forEach((identicalObjectPath) => {\n      plain = setDeep(plain, identicalObjectPath, () => object);\n    });\n  }\n  if (isArray(annotations)) {\n    const [root, other] = annotations;\n    root.forEach((identicalPath) => {\n      plain = setDeep(plain, parsePath(identicalPath), () => plain);\n    });\n    if (other) {\n      forEach(other, apply);\n    }\n  } else {\n    forEach(annotations, apply);\n  }\n  return plain;\n}\nvar isDeep = (object, superJson) => isPlainObject(object) || isArray(object) || isMap(object) || isSet(object) || isInstanceOfRegisteredClass(object, superJson);\nfunction addIdentity(object, path, identities) {\n  const existingSet = identities.get(object);\n  if (existingSet) {\n    existingSet.push(path);\n  } else {\n    identities.set(object, [path]);\n  }\n}\nfunction generateReferentialEqualityAnnotations(identitites, dedupe) {\n  const result = {};\n  let rootEqualityPaths = void 0;\n  identitites.forEach((paths) => {\n    if (paths.length <= 1) {\n      return;\n    }\n    if (!dedupe) {\n      paths = paths.map((path) => path.map(String)).sort((a, b) => a.length - b.length);\n    }\n    const [representativePath, ...identicalPaths] = paths;\n    if (representativePath.length === 0) {\n      rootEqualityPaths = identicalPaths.map(stringifyPath);\n    } else {\n      result[stringifyPath(representativePath)] = identicalPaths.map(stringifyPath);\n    }\n  });\n  if (rootEqualityPaths) {\n    if (isEmptyObject(result)) {\n      return [rootEqualityPaths];\n    } else {\n      return [rootEqualityPaths, result];\n    }\n  } else {\n    return isEmptyObject(result) ? void 0 : result;\n  }\n}\nvar walker = (object, identities, superJson, dedupe, path = [], objectsInThisPath = [], seenObjects = /* @__PURE__ */ new Map()) => {\n  const primitive = isPrimitive(object);\n  if (!primitive) {\n    addIdentity(object, path, identities);\n    const seen = seenObjects.get(object);\n    if (seen) {\n      return dedupe ? {\n        transformedValue: null\n      } : seen;\n    }\n  }\n  if (!isDeep(object, superJson)) {\n    const transformed2 = transformValue(object, superJson);\n    const result2 = transformed2 ? {\n      transformedValue: transformed2.value,\n      annotations: [transformed2.type]\n    } : {\n      transformedValue: object\n    };\n    if (!primitive) {\n      seenObjects.set(object, result2);\n    }\n    return result2;\n  }\n  if (includes(objectsInThisPath, object)) {\n    return {\n      transformedValue: null\n    };\n  }\n  const transformationResult = transformValue(object, superJson);\n  const transformed = transformationResult?.value ?? object;\n  const transformedValue = isArray(transformed) ? [] : {};\n  const innerAnnotations = {};\n  forEach(transformed, (value, index) => {\n    if (index === \"__proto__\" || index === \"constructor\" || index === \"prototype\") {\n      throw new Error(`Detected property ${index}. This is a prototype pollution risk, please remove it from your object.`);\n    }\n    const recursiveResult = walker(value, identities, superJson, dedupe, [...path, index], [...objectsInThisPath, object], seenObjects);\n    transformedValue[index] = recursiveResult.transformedValue;\n    if (isArray(recursiveResult.annotations)) {\n      innerAnnotations[index] = recursiveResult.annotations;\n    } else if (isPlainObject(recursiveResult.annotations)) {\n      forEach(recursiveResult.annotations, (tree, key) => {\n        innerAnnotations[escapeKey(index) + \".\" + key] = tree;\n      });\n    }\n  });\n  const result = isEmptyObject(innerAnnotations) ? {\n    transformedValue,\n    annotations: !!transformationResult ? [transformationResult.type] : void 0\n  } : {\n    transformedValue,\n    annotations: !!transformationResult ? [transformationResult.type, innerAnnotations] : innerAnnotations\n  };\n  if (!primitive) {\n    seenObjects.set(object, result);\n  }\n  return result;\n};\n\n// ../../node_modules/.pnpm/is-what@4.1.16/node_modules/is-what/dist/index.js\nfunction getType2(payload) {\n  return Object.prototype.toString.call(payload).slice(8, -1);\n}\nfunction isArray2(payload) {\n  return getType2(payload) === \"Array\";\n}\nfunction isPlainObject2(payload) {\n  if (getType2(payload) !== \"Object\")\n    return false;\n  const prototype = Object.getPrototypeOf(payload);\n  return !!prototype && prototype.constructor === Object && prototype === Object.prototype;\n}\n\n// ../../node_modules/.pnpm/copy-anything@3.0.5/node_modules/copy-anything/dist/index.js\nfunction assignProp2(carry, key, newVal, originalObject, includeNonenumerable) {\n  const propType = {}.propertyIsEnumerable.call(originalObject, key) ? \"enumerable\" : \"nonenumerable\";\n  if (propType === \"enumerable\")\n    carry[key] = newVal;\n  if (includeNonenumerable && propType === \"nonenumerable\") {\n    Object.defineProperty(carry, key, {\n      value: newVal,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nfunction copy(target, options = {}) {\n  if (isArray2(target)) {\n    return target.map((item) => copy(item, options));\n  }\n  if (!isPlainObject2(target)) {\n    return target;\n  }\n  const props = Object.getOwnPropertyNames(target);\n  const symbols = Object.getOwnPropertySymbols(target);\n  return [...props, ...symbols].reduce((carry, key) => {\n    if (isArray2(options.props) && !options.props.includes(key)) {\n      return carry;\n    }\n    const val = target[key];\n    const newVal = copy(val, options);\n    assignProp2(carry, key, newVal, target, options.nonenumerable);\n    return carry;\n  }, {});\n}\n\n// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/index.js\nvar SuperJSON = class {\n  /**\n   * @param dedupeReferentialEqualities  If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.\n   */\n  constructor({ dedupe = false } = {}) {\n    this.classRegistry = new ClassRegistry();\n    this.symbolRegistry = new Registry((s) => s.description ?? \"\");\n    this.customTransformerRegistry = new CustomTransformerRegistry();\n    this.allowedErrorProps = [];\n    this.dedupe = dedupe;\n  }\n  serialize(object) {\n    const identities = /* @__PURE__ */ new Map();\n    const output = walker(object, identities, this, this.dedupe);\n    const res = {\n      json: output.transformedValue\n    };\n    if (output.annotations) {\n      res.meta = {\n        ...res.meta,\n        values: output.annotations\n      };\n    }\n    const equalityAnnotations = generateReferentialEqualityAnnotations(identities, this.dedupe);\n    if (equalityAnnotations) {\n      res.meta = {\n        ...res.meta,\n        referentialEqualities: equalityAnnotations\n      };\n    }\n    return res;\n  }\n  deserialize(payload) {\n    const { json, meta } = payload;\n    let result = copy(json);\n    if (meta?.values) {\n      result = applyValueAnnotations(result, meta.values, this);\n    }\n    if (meta?.referentialEqualities) {\n      result = applyReferentialEqualityAnnotations(result, meta.referentialEqualities);\n    }\n    return result;\n  }\n  stringify(object) {\n    return JSON.stringify(this.serialize(object));\n  }\n  parse(string) {\n    return this.deserialize(JSON.parse(string));\n  }\n  registerClass(v, options) {\n    this.classRegistry.register(v, options);\n  }\n  registerSymbol(v, identifier) {\n    this.symbolRegistry.register(v, identifier);\n  }\n  registerCustom(transformer, name) {\n    this.customTransformerRegistry.register({\n      name,\n      ...transformer\n    });\n  }\n  allowErrorProps(...props) {\n    this.allowedErrorProps.push(...props);\n  }\n};\nSuperJSON.defaultInstance = new SuperJSON();\nSuperJSON.serialize = SuperJSON.defaultInstance.serialize.bind(SuperJSON.defaultInstance);\nSuperJSON.deserialize = SuperJSON.defaultInstance.deserialize.bind(SuperJSON.defaultInstance);\nSuperJSON.stringify = SuperJSON.defaultInstance.stringify.bind(SuperJSON.defaultInstance);\nSuperJSON.parse = SuperJSON.defaultInstance.parse.bind(SuperJSON.defaultInstance);\nSuperJSON.registerClass = SuperJSON.defaultInstance.registerClass.bind(SuperJSON.defaultInstance);\nSuperJSON.registerSymbol = SuperJSON.defaultInstance.registerSymbol.bind(SuperJSON.defaultInstance);\nSuperJSON.registerCustom = SuperJSON.defaultInstance.registerCustom.bind(SuperJSON.defaultInstance);\nSuperJSON.allowErrorProps = SuperJSON.defaultInstance.allowErrorProps.bind(SuperJSON.defaultInstance);\nvar serialize = SuperJSON.serialize;\nSuperJSON.deserialize;\nvar stringify = SuperJSON.stringify;\nSuperJSON.parse;\nSuperJSON.registerClass;\nSuperJSON.registerCustom;\nSuperJSON.registerSymbol;\nSuperJSON.allowErrorProps;\n\n// src/utils.tsx\nfunction getQueryStatusLabel(query) {\n  return query.state.fetchStatus === \"fetching\" ? \"fetching\" : !query.getObserversCount() ? \"inactive\" : query.state.fetchStatus === \"paused\" ? \"paused\" : query.isStale() ? \"stale\" : \"fresh\";\n}\nfunction getSidedProp(prop, side) {\n  return `${prop}${side.charAt(0).toUpperCase() + side.slice(1)}`;\n}\nfunction getQueryStatusColor({\n  queryState,\n  observerCount,\n  isStale\n}) {\n  return queryState.fetchStatus === \"fetching\" ? \"blue\" : !observerCount ? \"gray\" : queryState.fetchStatus === \"paused\" ? \"purple\" : isStale ? \"yellow\" : \"green\";\n}\nfunction getMutationStatusColor({\n  status,\n  isPaused\n}) {\n  return isPaused ? \"purple\" : status === \"error\" ? \"red\" : status === \"pending\" ? \"yellow\" : status === \"success\" ? \"green\" : \"gray\";\n}\nfunction getQueryStatusColorByLabel(label) {\n  return label === \"fresh\" ? \"green\" : label === \"stale\" ? \"yellow\" : label === \"paused\" ? \"purple\" : label === \"inactive\" ? \"gray\" : \"blue\";\n}\nvar displayValue = (value, beautify = false) => {\n  const {\n    json\n  } = serialize(value);\n  return JSON.stringify(json, null, beautify ? 2 : void 0);\n};\nvar getStatusRank = (q) => q.state.fetchStatus !== \"idle\" ? 0 : !q.getObserversCount() ? 3 : q.isStale() ? 2 : 1;\nvar queryHashSort = (a, b) => a.queryHash.localeCompare(b.queryHash);\nvar dateSort = (a, b) => a.state.dataUpdatedAt < b.state.dataUpdatedAt ? 1 : -1;\nvar statusAndDateSort = (a, b) => {\n  if (getStatusRank(a) === getStatusRank(b)) {\n    return dateSort(a, b);\n  }\n  return getStatusRank(a) > getStatusRank(b) ? 1 : -1;\n};\nvar sortFns = {\n  status: statusAndDateSort,\n  \"query hash\": queryHashSort,\n  \"last updated\": dateSort\n};\nvar getMutationStatusRank = (m) => m.state.isPaused ? 0 : m.state.status === \"error\" ? 2 : m.state.status === \"pending\" ? 1 : 3;\nvar mutationDateSort = (a, b) => a.state.submittedAt < b.state.submittedAt ? 1 : -1;\nvar mutationStatusSort = (a, b) => {\n  if (getMutationStatusRank(a) === getMutationStatusRank(b)) {\n    return mutationDateSort(a, b);\n  }\n  return getMutationStatusRank(a) > getMutationStatusRank(b) ? 1 : -1;\n};\nvar mutationSortFns = {\n  status: mutationStatusSort,\n  \"last updated\": mutationDateSort\n};\nvar convertRemToPixels = (rem) => {\n  return rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n};\nvar getPreferredColorScheme = () => {\n  const [colorScheme, setColorScheme] = createSignal(\"dark\");\n  onMount(() => {\n    const query = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    setColorScheme(query.matches ? \"dark\" : \"light\");\n    const listener = (e) => {\n      setColorScheme(e.matches ? \"dark\" : \"light\");\n    };\n    query.addEventListener(\"change\", listener);\n    onCleanup(() => query.removeEventListener(\"change\", listener));\n  });\n  return colorScheme;\n};\nvar updateNestedDataByPath = (oldData, updatePath, value) => {\n  if (updatePath.length === 0) {\n    return value;\n  }\n  if (oldData instanceof Map) {\n    const newData = new Map(oldData);\n    if (updatePath.length === 1) {\n      newData.set(updatePath[0], value);\n      return newData;\n    }\n    const [head, ...tail] = updatePath;\n    newData.set(head, updateNestedDataByPath(newData.get(head), tail, value));\n    return newData;\n  }\n  if (oldData instanceof Set) {\n    const setAsArray = updateNestedDataByPath(Array.from(oldData), updatePath, value);\n    return new Set(setAsArray);\n  }\n  if (Array.isArray(oldData)) {\n    const newData = [...oldData];\n    if (updatePath.length === 1) {\n      newData[updatePath[0]] = value;\n      return newData;\n    }\n    const [head, ...tail] = updatePath;\n    newData[head] = updateNestedDataByPath(newData[head], tail, value);\n    return newData;\n  }\n  if (oldData instanceof Object) {\n    const newData = {\n      ...oldData\n    };\n    if (updatePath.length === 1) {\n      newData[updatePath[0]] = value;\n      return newData;\n    }\n    const [head, ...tail] = updatePath;\n    newData[head] = updateNestedDataByPath(newData[head], tail, value);\n    return newData;\n  }\n  return oldData;\n};\nvar deleteNestedDataByPath = (oldData, deletePath) => {\n  if (oldData instanceof Map) {\n    const newData = new Map(oldData);\n    if (deletePath.length === 1) {\n      newData.delete(deletePath[0]);\n      return newData;\n    }\n    const [head, ...tail] = deletePath;\n    newData.set(head, deleteNestedDataByPath(newData.get(head), tail));\n    return newData;\n  }\n  if (oldData instanceof Set) {\n    const setAsArray = deleteNestedDataByPath(Array.from(oldData), deletePath);\n    return new Set(setAsArray);\n  }\n  if (Array.isArray(oldData)) {\n    const newData = [...oldData];\n    if (deletePath.length === 1) {\n      return newData.filter((_, idx) => idx.toString() !== deletePath[0]);\n    }\n    const [head, ...tail] = deletePath;\n    newData[head] = deleteNestedDataByPath(newData[head], tail);\n    return newData;\n  }\n  if (oldData instanceof Object) {\n    const newData = {\n      ...oldData\n    };\n    if (deletePath.length === 1) {\n      delete newData[deletePath[0]];\n      return newData;\n    }\n    const [head, ...tail] = deletePath;\n    newData[head] = deleteNestedDataByPath(newData[head], tail);\n    return newData;\n  }\n  return oldData;\n};\nvar setupStyleSheet = (nonce, target) => {\n  if (!nonce) return;\n  const styleExists = document.querySelector(\"#_goober\") || target?.querySelector(\"#_goober\");\n  if (styleExists) return;\n  const styleTag = document.createElement(\"style\");\n  const textNode = document.createTextNode(\"\");\n  styleTag.appendChild(textNode);\n  styleTag.id = \"_goober\";\n  styleTag.setAttribute(\"nonce\", nonce);\n  if (target) {\n    target.appendChild(styleTag);\n  } else {\n    document.head.appendChild(styleTag);\n  }\n};\n\nexport { $TRACK, DEV, Dynamic, For, Index, Match, Portal, Show, Switch, addEventListener, batch, className, clearDelegatedEvents, convertRemToPixels, createComponent, createComputed, createContext, createEffect, createMemo, createRenderEffect, createRoot, createSignal, createUniqueId, delegateEvents, deleteNestedDataByPath, displayValue, getMutationStatusColor, getOwner, getPreferredColorScheme, getQueryStatusColor, getQueryStatusColorByLabel, getQueryStatusLabel, getSidedProp, insert, isServer, lazy, memo, mergeProps, mutationSortFns, on, onCleanup, onMount, render, serialize, setAttribute, setupStyleSheet, sortFns, splitProps, spread, stringify, template, untrack, updateNestedDataByPath, use, useContext, useTransition };\n","import { createSignal, render, lazy, setupStyleSheet, createComponent, mergeProps } from './chunk/CXOMC62J.js';\n\n// src/TanstackQueryDevtools.tsx\nvar TanstackQueryDevtools = class {\n  #client;\n  #onlineManager;\n  #queryFlavor;\n  #version;\n  #isMounted = false;\n  #styleNonce;\n  #shadowDOMTarget;\n  #buttonPosition;\n  #position;\n  #initialIsOpen;\n  #errorTypes;\n  #hideDisabledQueries;\n  #Component;\n  #dispose;\n  constructor(config) {\n    const {\n      client,\n      queryFlavor,\n      version,\n      onlineManager,\n      buttonPosition,\n      position,\n      initialIsOpen,\n      errorTypes,\n      styleNonce,\n      shadowDOMTarget,\n      hideDisabledQueries\n    } = config;\n    this.#client = createSignal(client);\n    this.#queryFlavor = queryFlavor;\n    this.#version = version;\n    this.#onlineManager = onlineManager;\n    this.#styleNonce = styleNonce;\n    this.#shadowDOMTarget = shadowDOMTarget;\n    this.#buttonPosition = createSignal(buttonPosition);\n    this.#position = createSignal(position);\n    this.#initialIsOpen = createSignal(initialIsOpen);\n    this.#errorTypes = createSignal(errorTypes);\n    this.#hideDisabledQueries = createSignal(hideDisabledQueries);\n  }\n  setButtonPosition(position) {\n    this.#buttonPosition[1](position);\n  }\n  setPosition(position) {\n    this.#position[1](position);\n  }\n  setInitialIsOpen(isOpen) {\n    this.#initialIsOpen[1](isOpen);\n  }\n  setErrorTypes(errorTypes) {\n    this.#errorTypes[1](errorTypes);\n  }\n  setClient(client) {\n    this.#client[1](client);\n  }\n  mount(el) {\n    if (this.#isMounted) {\n      throw new Error(\"Devtools is already mounted\");\n    }\n    const dispose = render(() => {\n      const _self$ = this;\n      const [btnPosition] = this.#buttonPosition;\n      const [pos] = this.#position;\n      const [isOpen] = this.#initialIsOpen;\n      const [errors] = this.#errorTypes;\n      const [hideDisabledQueries] = this.#hideDisabledQueries;\n      const [queryClient] = this.#client;\n      let Devtools;\n      if (this.#Component) {\n        Devtools = this.#Component;\n      } else {\n        Devtools = lazy(() => import('./DevtoolsComponent/EDEL3XIZ.js'));\n        this.#Component = Devtools;\n      }\n      setupStyleSheet(this.#styleNonce, this.#shadowDOMTarget);\n      return createComponent(Devtools, mergeProps({\n        get queryFlavor() {\n          return _self$.#queryFlavor;\n        },\n        get version() {\n          return _self$.#version;\n        },\n        get onlineManager() {\n          return _self$.#onlineManager;\n        },\n        get shadowDOMTarget() {\n          return _self$.#shadowDOMTarget;\n        }\n      }, {\n        get client() {\n          return queryClient();\n        },\n        get buttonPosition() {\n          return btnPosition();\n        },\n        get position() {\n          return pos();\n        },\n        get initialIsOpen() {\n          return isOpen();\n        },\n        get errorTypes() {\n          return errors();\n        },\n        get hideDisabledQueries() {\n          return hideDisabledQueries();\n        }\n      }));\n    }, el);\n    this.#isMounted = true;\n    this.#dispose = dispose;\n  }\n  unmount() {\n    if (!this.#isMounted) {\n      throw new Error(\"Devtools is not mounted\");\n    }\n    this.#dispose?.();\n    this.#isMounted = false;\n  }\n};\n\n// src/TanstackQueryDevtoolsPanel.tsx\nvar TanstackQueryDevtoolsPanel = class {\n  #client;\n  #onlineManager;\n  #queryFlavor;\n  #version;\n  #isMounted = false;\n  #styleNonce;\n  #shadowDOMTarget;\n  #buttonPosition;\n  #position;\n  #initialIsOpen;\n  #errorTypes;\n  #hideDisabledQueries;\n  #onClose;\n  #Component;\n  #dispose;\n  constructor(config) {\n    const {\n      client,\n      queryFlavor,\n      version,\n      onlineManager,\n      buttonPosition,\n      position,\n      initialIsOpen,\n      errorTypes,\n      styleNonce,\n      shadowDOMTarget,\n      onClose,\n      hideDisabledQueries\n    } = config;\n    this.#client = createSignal(client);\n    this.#queryFlavor = queryFlavor;\n    this.#version = version;\n    this.#onlineManager = onlineManager;\n    this.#styleNonce = styleNonce;\n    this.#shadowDOMTarget = shadowDOMTarget;\n    this.#buttonPosition = createSignal(buttonPosition);\n    this.#position = createSignal(position);\n    this.#initialIsOpen = createSignal(initialIsOpen);\n    this.#errorTypes = createSignal(errorTypes);\n    this.#hideDisabledQueries = createSignal(hideDisabledQueries);\n    this.#onClose = createSignal(onClose);\n  }\n  setButtonPosition(position) {\n    this.#buttonPosition[1](position);\n  }\n  setPosition(position) {\n    this.#position[1](position);\n  }\n  setInitialIsOpen(isOpen) {\n    this.#initialIsOpen[1](isOpen);\n  }\n  setErrorTypes(errorTypes) {\n    this.#errorTypes[1](errorTypes);\n  }\n  setClient(client) {\n    this.#client[1](client);\n  }\n  setOnClose(onClose) {\n    this.#onClose[1](() => onClose);\n  }\n  mount(el) {\n    if (this.#isMounted) {\n      throw new Error(\"Devtools is already mounted\");\n    }\n    const dispose = render(() => {\n      const _self$ = this;\n      const [btnPosition] = this.#buttonPosition;\n      const [pos] = this.#position;\n      const [isOpen] = this.#initialIsOpen;\n      const [errors] = this.#errorTypes;\n      const [hideDisabledQueries] = this.#hideDisabledQueries;\n      const [queryClient] = this.#client;\n      const [onClose] = this.#onClose;\n      let Devtools;\n      if (this.#Component) {\n        Devtools = this.#Component;\n      } else {\n        Devtools = lazy(() => import('./DevtoolsPanelComponent/RN252AT2.js'));\n        this.#Component = Devtools;\n      }\n      setupStyleSheet(this.#styleNonce, this.#shadowDOMTarget);\n      return createComponent(Devtools, mergeProps({\n        get queryFlavor() {\n          return _self$.#queryFlavor;\n        },\n        get version() {\n          return _self$.#version;\n        },\n        get onlineManager() {\n          return _self$.#onlineManager;\n        },\n        get shadowDOMTarget() {\n          return _self$.#shadowDOMTarget;\n        }\n      }, {\n        get client() {\n          return queryClient();\n        },\n        get buttonPosition() {\n          return btnPosition();\n        },\n        get position() {\n          return pos();\n        },\n        get initialIsOpen() {\n          return isOpen();\n        },\n        get errorTypes() {\n          return errors();\n        },\n        get hideDisabledQueries() {\n          return hideDisabledQueries();\n        },\n        get onClose() {\n          return onClose();\n        }\n      }));\n    }, el);\n    this.#isMounted = true;\n    this.#dispose = dispose;\n  }\n  unmount() {\n    if (!this.#isMounted) {\n      throw new Error(\"Devtools is not mounted\");\n    }\n    this.#dispose?.();\n    this.#isMounted = false;\n  }\n};\n\nexport { TanstackQueryDevtools, TanstackQueryDevtoolsPanel };\n","\"use client\";\n\n// src/ReactQueryDevtools.tsx\nimport * as React from \"react\";\nimport { onlineManager, useQueryClient } from \"@tanstack/react-query\";\nimport { TanstackQueryDevtools } from \"@tanstack/query-devtools\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction ReactQueryDevtools(props) {\n  const queryClient = useQueryClient(props.client);\n  const ref = React.useRef(null);\n  const {\n    buttonPosition,\n    position,\n    initialIsOpen,\n    errorTypes,\n    styleNonce,\n    shadowDOMTarget,\n    hideDisabledQueries\n  } = props;\n  const [devtools] = React.useState(\n    new TanstackQueryDevtools({\n      client: queryClient,\n      queryFlavor: \"React Query\",\n      version: \"5\",\n      onlineManager,\n      buttonPosition,\n      position,\n      initialIsOpen,\n      errorTypes,\n      styleNonce,\n      shadowDOMTarget,\n      hideDisabledQueries\n    })\n  );\n  React.useEffect(() => {\n    devtools.setClient(queryClient);\n  }, [queryClient, devtools]);\n  React.useEffect(() => {\n    if (buttonPosition) {\n      devtools.setButtonPosition(buttonPosition);\n    }\n  }, [buttonPosition, devtools]);\n  React.useEffect(() => {\n    if (position) {\n      devtools.setPosition(position);\n    }\n  }, [position, devtools]);\n  React.useEffect(() => {\n    devtools.setInitialIsOpen(initialIsOpen || false);\n  }, [initialIsOpen, devtools]);\n  React.useEffect(() => {\n    devtools.setErrorTypes(errorTypes || []);\n  }, [errorTypes, devtools]);\n  React.useEffect(() => {\n    if (ref.current) {\n      devtools.mount(ref.current);\n    }\n    return () => {\n      devtools.unmount();\n    };\n  }, [devtools]);\n  return /* @__PURE__ */ jsx(\"div\", { dir: \"ltr\", className: \"tsqd-parent-container\", ref });\n}\nexport {\n  ReactQueryDevtools\n};\n//# sourceMappingURL=ReactQueryDevtools.js.map","\"use client\";\n\n// src/index.ts\nimport * as Devtools from \"./ReactQueryDevtools.js\";\nimport * as DevtoolsPanel from \"./ReactQueryDevtoolsPanel.js\";\nvar ReactQueryDevtools2 = process.env.NODE_ENV !== \"development\" ? function() {\n  return null;\n} : Devtools.ReactQueryDevtools;\nvar ReactQueryDevtoolsPanel2 = process.env.NODE_ENV !== \"development\" ? function() {\n  return null;\n} : DevtoolsPanel.ReactQueryDevtoolsPanel;\nexport {\n  ReactQueryDevtools2 as ReactQueryDevtools,\n  ReactQueryDevtoolsPanel2 as ReactQueryDevtoolsPanel\n};\n//# sourceMappingURL=index.js.map","import React from 'react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\r\n\r\n// Create a client\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      staleTime: 5 * 60 * 1000, // 5 minutes\r\n      gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\r\n      retry: (failureCount, error) => {\r\n        // Don't retry on 4xx errors\r\n        if (error && typeof error === 'object' && 'status' in error) {\r\n          const status = (error as any).status;\r\n          if (status >= 400 && status < 500) {\r\n            return false;\r\n          }\r\n        }\r\n        return failureCount < 3;\r\n      },\r\n      refetchOnWindowFocus: false,\r\n      refetchOnReconnect: true,\r\n    },\r\n    mutations: {\r\n      retry: 1,\r\n    },\r\n  },\r\n});\r\n\r\ninterface QueryProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const QueryProvider: React.FC<QueryProviderProps> = ({ children }) => {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <ReactQueryDevtools initialIsOpen={false} />\r\n      )}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App.tsx';\nimport './index.css';\nimport { setupConsoleFilter } from './utils/consoleFilter';\nimport './utils/apiInterceptor';\nimport { QueryProvider } from './providers/QueryProvider';\n\n// Import Service Worker cache clearer for development\nif (import.meta.env.DEV) {\n  // Dynamically load the cache clearer script\n  const script = document.createElement('script');\n  script.src = '/clear-sw-cache.js';\n  script.onload = () => console.log('✅ Service Worker cache clearer loaded');\n  script.onerror = () => console.log('⚠️ Service Worker cache clearer not available');\n  document.head.appendChild(script);\n}\n\n// Setup console filter to suppress expected warnings in development\nsetupConsoleFilter();\n\n// Register service worker for better performance (only in production)\nif ('serviceWorker' in navigator && import.meta.env.PROD) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js', {\n      scope: '/',\n      updateViaCache: 'none'\n    })\n      .then((registration) => {\n        console.log('✅ Service Worker registered successfully:', registration.scope);\n        \n        // Handle service worker updates\n        registration.addEventListener('updatefound', () => {\n          console.log('🔄 Service Worker update found');\n        });\n        \n        // Handle service worker state changes\n        registration.addEventListener('statechange', () => {\n          console.log('🔄 Service Worker state changed:', registration.active?.state);\n        });\n      })\n      .catch((error) => {\n        console.error('❌ Service Worker registration failed:', error);\n      });\n  });\n  \n  // Handle service worker errors\n  navigator.serviceWorker.addEventListener('error', (event) => {\n    console.error('❌ Service Worker error:', event);\n  });\n  \n  // Handle service worker message events\n  navigator.serviceWorker.addEventListener('message', (event) => {\n    console.log('📨 Service Worker message:', event.data);\n  });\n} else if ('serviceWorker' in navigator && import.meta.env.DEV) {\n  // Unregister any existing service workers in development\n  navigator.serviceWorker.getRegistrations().then((registrations) => {\n    for (const registration of registrations) {\n      registration.unregister();\n      console.log('🔄 Service Worker unregistered for development');\n    }\n  });\n}\n\n// Optimize font loading with proper resource hints\n// 1. Preconnect to the domain that will serve the font files\nconst preconnectLink = document.createElement('link');\npreconnectLink.rel = 'preconnect';\npreconnectLink.href = 'https://fonts.gstatic.com';\npreconnectLink.crossOrigin = 'anonymous';\ndocument.head.appendChild(preconnectLink);\n\n// 2. Add the font stylesheet with proper loading strategy\n// Using a direct link element with font-display: swap to prevent FOIT\nconst fontLink = document.createElement('link');\nfontLink.rel = 'stylesheet';\nfontLink.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap&font-display=swap';\ndocument.head.appendChild(fontLink);\n\n// Ensure proper rendering\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <QueryProvider>\n      <App />\n    </QueryProvider>\n  </React.StrictMode>\n);\n"],"file":"assets/js/index-B1j8FRVx.js"}