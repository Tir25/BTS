const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/OptimizedStudentMapLazy-BmbrWh2r.js","assets/js/vendor-ui-D_U17TOn.js","assets/js/vendor-react-CyT1AhbS.js","assets/js/vendor-websocket-TjCxX7sJ.js","assets/js/vendor-state-B-5mdhwp.js","assets/js/vendor-animations-jk_Di6sJ.js","assets/js/vendor-router-BXLLWNa2.js","assets/js/vendor-maps-C78ko_py.js","assets/css/OptimizedStudentMapLazy-EoovT-YJ.css","assets/js/EDEL3XIZ-B_H6kYY3.js"])))=>i.map(i=>d[i]);
var Xr=Object.defineProperty;var nr=t=>{throw TypeError(t)};var eo=(t,n,r)=>n in t?Xr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var ue=(t,n,r)=>eo(t,typeof n!="symbol"?n+"":n,r),rr=(t,n,r)=>n.has(t)||nr("Cannot "+r);var he=(t,n,r)=>(rr(t,n,"read from private field"),r?r.call(t):n.get(t)),_e=(t,n,r)=>n.has(t)?nr("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,r),Ve=(t,n,r,o)=>(rr(t,n,"write to private field"),o?o.call(t,r):n.set(t,r),r);import{r as b,d as to,a as Xn}from"./vendor-react-CyT1AhbS.js";import{c as or,_ as Nr}from"./vendor-ui-D_U17TOn.js";import{u as no,a as vn,B as ro,R as oo,b as qe,L as _n}from"./vendor-router-BXLLWNa2.js";import{c as so,u as Bt,a as io,o as lo,j as ao,Q as co,b as mo}from"./vendor-state-B-5mdhwp.js";import{l as uo}from"./vendor-websocket-TjCxX7sJ.js";import{m as Oe}from"./vendor-maps-C78ko_py.js";import{m as X,A as mn}from"./vendor-animations-jk_Di6sJ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var xr={exports:{}},Un={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=b,n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),y=Symbol.iterator,k="@@iterator";function B(d){if(d===null||typeof d!="object")return null;var N=y&&d[y]||d[k];return typeof N=="function"?N:null}var x=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function j(d){{for(var N=arguments.length,V=new Array(N>1?N-1:0),$=1;$<N;$++)V[$-1]=arguments[$];v("error",d,V)}}function v(d,N,V){{var $=x.ReactDebugCurrentFrame,oe=$.getStackAddendum();oe!==""&&(N+="%s",V=V.concat([oe]));var me=V.map(function(ne){return String(ne)});me.unshift("Warning: "+N),Function.prototype.apply.call(console[d],console,me)}}var L=!1,E=!1,U=!1,T=!1,O=!1,Y;Y=Symbol.for("react.module.reference");function M(d){return!!(typeof d=="string"||typeof d=="function"||d===o||d===i||O||d===s||d===u||d===f||T||d===D||L||E||U||typeof d=="object"&&d!==null&&(d.$$typeof===h||d.$$typeof===g||d.$$typeof===l||d.$$typeof===a||d.$$typeof===c||d.$$typeof===Y||d.getModuleId!==void 0))}function I(d,N,V){var $=d.displayName;if($)return $;var oe=N.displayName||N.name||"";return oe!==""?V+"("+oe+")":V}function C(d){return d.displayName||"Context"}function A(d){if(d==null)return null;if(typeof d.tag=="number"&&j("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case o:return"Fragment";case r:return"Portal";case i:return"Profiler";case s:return"StrictMode";case u:return"Suspense";case f:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case a:var N=d;return C(N)+".Consumer";case l:var V=d;return C(V._context)+".Provider";case c:return I(d,d.render,"ForwardRef");case g:var $=d.displayName||null;return $!==null?$:A(d.type)||"Memo";case h:{var oe=d,me=oe._payload,ne=oe._init;try{return A(ne(me))}catch{return null}}}return null}var R=Object.assign,fe=0,Re,be,J,Q,S,H,te;function w(){}w.__reactDisabledLog=!0;function P(){{if(fe===0){Re=console.log,be=console.info,J=console.warn,Q=console.error,S=console.group,H=console.groupCollapsed,te=console.groupEnd;var d={configurable:!0,enumerable:!0,value:w,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}fe++}}function W(){{if(fe--,fe===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},d,{value:Re}),info:R({},d,{value:be}),warn:R({},d,{value:J}),error:R({},d,{value:Q}),group:R({},d,{value:S}),groupCollapsed:R({},d,{value:H}),groupEnd:R({},d,{value:te})})}fe<0&&j("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var xe=x.ReactCurrentDispatcher,De;function F(d,N,V){{if(De===void 0)try{throw Error()}catch(oe){var $=oe.stack.trim().match(/\n( *(at )?)/);De=$&&$[1]||""}return`
`+De+d}}var G=!1,ve;{var Ke=typeof WeakMap=="function"?WeakMap:Map;ve=new Ke}function Z(d,N){if(!d||G)return"";{var V=ve.get(d);if(V!==void 0)return V}var $;G=!0;var oe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var me;me=xe.current,xe.current=null,P();try{if(N){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Le){$=Le}Reflect.construct(d,[],ne)}else{try{ne.call()}catch(Le){$=Le}d.call(ne.prototype)}}else{try{throw Error()}catch(Le){$=Le}d()}}catch(Le){if(Le&&$&&typeof Le.stack=="string"){for(var ee=Le.stack.split(`
`),Me=$.stack.split(`
`),pe=ee.length-1,je=Me.length-1;pe>=1&&je>=0&&ee[pe]!==Me[je];)je--;for(;pe>=1&&je>=0;pe--,je--)if(ee[pe]!==Me[je]){if(pe!==1||je!==1)do if(pe--,je--,je<0||ee[pe]!==Me[je]){var Fe=`
`+ee[pe].replace(" at new "," at ");return d.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",d.displayName)),typeof d=="function"&&ve.set(d,Fe),Fe}while(pe>=1&&je>=0);break}}}finally{G=!1,xe.current=me,W(),Error.prepareStackTrace=oe}var it=d?d.displayName||d.name:"",tt=it?F(it):"";return typeof d=="function"&&ve.set(d,tt),tt}function ye(d,N,V){return Z(d,!1)}function xt(d){var N=d.prototype;return!!(N&&N.isReactComponent)}function ge(d,N,V){if(d==null)return"";if(typeof d=="function")return Z(d,xt(d));if(typeof d=="string")return F(d);switch(d){case u:return F("Suspense");case f:return F("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case c:return ye(d.render);case g:return ge(d.type,N,V);case h:{var $=d,oe=$._payload,me=$._init;try{return ge(me(oe),N,V)}catch{}}}return""}var Ce=Object.prototype.hasOwnProperty,Ht={},Te=x.ReactDebugCurrentFrame;function Ze(d){if(d){var N=d._owner,V=ge(d.type,d._source,N?N.type:null);Te.setExtraStackFrame(V)}else Te.setExtraStackFrame(null)}function Be(d,N,V,$,oe){{var me=Function.call.bind(Ce);for(var ne in d)if(me(d,ne)){var ee=void 0;try{if(typeof d[ne]!="function"){var Me=Error(($||"React class")+": "+V+" type `"+ne+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[ne]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Me.name="Invariant Violation",Me}ee=d[ne](N,ne,$,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(pe){ee=pe}ee&&!(ee instanceof Error)&&(Ze(oe),j("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",$||"React class",V,ne,typeof ee),Ze(null)),ee instanceof Error&&!(ee.message in Ht)&&(Ht[ee.message]=!0,Ze(oe),j("Failed %s type: %s",V,ee.message),Ze(null))}}}var zt=Array.isArray;function He(d){return zt(d)}function Pn(d){{var N=typeof Symbol=="function"&&Symbol.toStringTag,V=N&&d[Symbol.toStringTag]||d.constructor.name||"Object";return V}}function wn(d){try{return qt(d),!1}catch{return!0}}function qt(d){return""+d}function Wt(d){if(wn(d))return j("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pn(d)),qt(d)}var Xe=x.ReactCurrentOwner,Gt={key:!0,ref:!0,__self:!0,__source:!0},Kt,pt,vt;vt={};function Sn(d){if(Ce.call(d,"ref")){var N=Object.getOwnPropertyDescriptor(d,"ref").get;if(N&&N.isReactWarning)return!1}return d.ref!==void 0}function Yt(d){if(Ce.call(d,"key")){var N=Object.getOwnPropertyDescriptor(d,"key").get;if(N&&N.isReactWarning)return!1}return d.key!==void 0}function Jt(d,N){if(typeof d.ref=="string"&&Xe.current&&N&&Xe.current.stateNode!==N){var V=A(Xe.current.type);vt[V]||(j('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',A(Xe.current.type),d.ref),vt[V]=!0)}}function Vn(d,N){{var V=function(){Kt||(Kt=!0,j("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",N))};V.isReactWarning=!0,Object.defineProperty(d,"key",{get:V,configurable:!0})}}function kn(d,N){{var V=function(){pt||(pt=!0,j("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",N))};V.isReactWarning=!0,Object.defineProperty(d,"ref",{get:V,configurable:!0})}}var Qt=function(d,N,V,$,oe,me,ne){var ee={$$typeof:n,type:d,key:N,ref:V,props:ne,_owner:me};return ee._store={},Object.defineProperty(ee._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ee,"_self",{configurable:!1,enumerable:!1,writable:!1,value:$}),Object.defineProperty(ee,"_source",{configurable:!1,enumerable:!1,writable:!1,value:oe}),Object.freeze&&(Object.freeze(ee.props),Object.freeze(ee)),ee};function An(d,N,V,$,oe){{var me,ne={},ee=null,Me=null;V!==void 0&&(Wt(V),ee=""+V),Yt(N)&&(Wt(N.key),ee=""+N.key),Sn(N)&&(Me=N.ref,Jt(N,oe));for(me in N)Ce.call(N,me)&&!Gt.hasOwnProperty(me)&&(ne[me]=N[me]);if(d&&d.defaultProps){var pe=d.defaultProps;for(me in pe)ne[me]===void 0&&(ne[me]=pe[me])}if(ee||Me){var je=typeof d=="function"?d.displayName||d.name||"Unknown":d;ee&&Vn(ne,je),Me&&kn(ne,je)}return Qt(d,ee,Me,oe,$,Xe.current,ne)}}var Ct=x.ReactCurrentOwner,Zt=x.ReactDebugCurrentFrame;function Ye(d){if(d){var N=d._owner,V=ge(d.type,d._source,N?N.type:null);Zt.setExtraStackFrame(V)}else Zt.setExtraStackFrame(null)}var jt;jt=!1;function Dt(d){return typeof d=="object"&&d!==null&&d.$$typeof===n}function Xt(){{if(Ct.current){var d=A(Ct.current.type);if(d)return`

Check the render method of \``+d+"`."}return""}}function m(d){{if(d!==void 0){var N=d.fileName.replace(/^.*[\\\/]/,""),V=d.lineNumber;return`

Check your code at `+N+":"+V+"."}return""}}var p={};function _(d){{var N=Xt();if(!N){var V=typeof d=="string"?d:d.displayName||d.name;V&&(N=`

Check the top-level render call using <`+V+">.")}return N}}function z(d,N){{if(!d._store||d._store.validated||d.key!=null)return;d._store.validated=!0;var V=_(N);if(p[V])return;p[V]=!0;var $="";d&&d._owner&&d._owner!==Ct.current&&($=" It was passed a child from "+A(d._owner.type)+"."),Ye(d),j('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',V,$),Ye(null)}}function de(d,N){{if(typeof d!="object")return;if(He(d))for(var V=0;V<d.length;V++){var $=d[V];Dt($)&&z($,N)}else if(Dt(d))d._store&&(d._store.validated=!0);else if(d){var oe=B(d);if(typeof oe=="function"&&oe!==d.entries)for(var me=oe.call(d),ne;!(ne=me.next()).done;)Dt(ne.value)&&z(ne.value,N)}}}function ce(d){{var N=d.type;if(N==null||typeof N=="string")return;var V;if(typeof N=="function")V=N.propTypes;else if(typeof N=="object"&&(N.$$typeof===c||N.$$typeof===g))V=N.propTypes;else return;if(V){var $=A(N);Be(V,d.props,"prop",$,d)}else if(N.PropTypes!==void 0&&!jt){jt=!0;var oe=A(N);j("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",oe||"Unknown")}typeof N.getDefaultProps=="function"&&!N.getDefaultProps.isReactClassApproved&&j("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ee(d){{for(var N=Object.keys(d.props),V=0;V<N.length;V++){var $=N[V];if($!=="children"&&$!=="key"){Ye(d),j("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",$),Ye(null);break}}d.ref!==null&&(Ye(d),j("Invalid attribute `ref` supplied to `React.Fragment`."),Ye(null))}}var Je={};function ze(d,N,V,$,oe,me){{var ne=M(d);if(!ne){var ee="";(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(ee+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Me=m(oe);Me?ee+=Me:ee+=Xt();var pe;d===null?pe="null":He(d)?pe="array":d!==void 0&&d.$$typeof===n?(pe="<"+(A(d.type)||"Unknown")+" />",ee=" Did you accidentally export a JSX literal instead of a component?"):pe=typeof d,j("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",pe,ee)}var je=An(d,N,V,oe,me);if(je==null)return je;if(ne){var Fe=N.children;if(Fe!==void 0)if($)if(He(Fe)){for(var it=0;it<Fe.length;it++)de(Fe[it],d);Object.freeze&&Object.freeze(Fe)}else j("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else de(Fe,d)}if(Ce.call(N,"key")){var tt=A(d),Le=Object.keys(N).filter(function(Zr){return Zr!=="key"}),Mn=Le.length>0?"{key: someKey, "+Le.join(": ..., ")+": ...}":"{key: someKey}";if(!Je[tt+Mn]){var Qr=Le.length>0?"{"+Le.join(": ..., ")+": ...}":"{}";j(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Mn,tt,Qr,tt),Je[tt+Mn]=!0}}return d===o?Ee(je):ce(je),je}}var et=ze;Un.Fragment=o,Un.jsxDEV=et})();xr.exports=Un;var e=xr.exports,$n={},Ln=to;{var en=Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;$n.createRoot=function(t,n){en.usingClientEntryPoint=!0;try{return Ln.createRoot(t,n)}finally{en.usingClientEntryPoint=!1}},$n.hydrateRoot=function(t,n,r){en.usingClientEntryPoint=!0;try{return Ln.hydrateRoot(t,n,r)}finally{en.usingClientEntryPoint=!1}}}const sr={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!1,VITE_API_URL:"http://localhost:3000",VITE_MAPLIBRE_TOKEN:"",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI",VITE_SUPABASE_URL:"https://gthwmwfwvhyriygpcdlr.supabase.co",VITE_USER_NODE_ENV:"development",VITE_WEBSOCKET_URL:"ws://localhost:3000"},wt=new Map,tn=t=>{const n=wt.get(t);return n?Object.fromEntries(Object.entries(n.stores).map(([r,o])=>[r,o.getState()])):{}},fo=(t,n,r)=>{if(t===void 0)return{type:"untracked",connection:n.connect(r)};const o=wt.get(r.name);if(o)return{type:"tracked",store:t,...o};const s={connection:n.connect(r),stores:{}};return wt.set(r.name,s),{type:"tracked",store:t,...s}},go=(t,n)=>{if(n===void 0)return;const r=wt.get(t);r&&(delete r.stores[n],Object.keys(r.stores).length===0&&wt.delete(t))},bo=t=>{var n,r;if(!t)return;const o=t.split(`
`),s=o.findIndex(l=>l.includes("api.setState"));if(s<0)return;const i=((n=o[s+1])==null?void 0:n.trim())||"";return(r=/.+ (.+) .+/.exec(i))==null?void 0:r[1]},ho=(t,n={})=>(r,o,s)=>{const{enabled:i,anonymousActionType:l,store:a,...c}=n;let u;try{u=(i??(sr?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(r,o,s);const{connection:f,...g}=fo(a,u,c);let h=!0;s.setState=(k,B,x)=>{const j=r(k,B);if(!h)return j;const v=x===void 0?{type:l||bo(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return a===void 0?(f==null||f.send(v,o()),j):(f==null||f.send({...v,type:`${a}/${v.type}`},{...tn(c.name),[a]:s.getState()}),j)},s.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),go(c.name,a)}};const D=(...k)=>{const B=h;h=!1,r(...k),h=B},y=t(s.setState,o,s);if(g.type==="untracked"?f==null||f.init(y):(g.stores[g.store]=s,f==null||f.init(Object.fromEntries(Object.entries(g.stores).map(([k,B])=>[k,k===g.store?y:B.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let k=!1;const B=s.dispatch;s.dispatch=(...x)=>{(sr?"production":void 0)!=="production"&&x[0].type==="__setState"&&!k&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),k=!0),B(...x)}}return f.subscribe(k=>{var B;switch(k.type){case"ACTION":if(typeof k.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return In(k.payload,x=>{if(x.type==="__setState"){if(a===void 0){D(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const j=x.state[a];if(j==null)return;JSON.stringify(s.getState())!==JSON.stringify(j)&&D(j);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(x)});case"DISPATCH":switch(k.payload.type){case"RESET":return D(y),a===void 0?f==null?void 0:f.init(s.getState()):f==null?void 0:f.init(tn(c.name));case"COMMIT":if(a===void 0){f==null||f.init(s.getState());return}return f==null?void 0:f.init(tn(c.name));case"ROLLBACK":return In(k.state,x=>{if(a===void 0){D(x),f==null||f.init(s.getState());return}D(x[a]),f==null||f.init(tn(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return In(k.state,x=>{if(a===void 0){D(x);return}JSON.stringify(s.getState())!==JSON.stringify(x[a])&&D(x[a])});case"IMPORT_STATE":{const{nextLiftedState:x}=k.payload,j=(B=x.computedStates.slice(-1)[0])==null?void 0:B.state;if(!j)return;D(a===void 0?j:j[a]),f==null||f.send(null,x);return}case"PAUSE_RECORDING":return h=!h}return}}),y},No=ho,In=(t,n)=>{let r;try{r=JSON.parse(t)}catch(o){console.error("[zustand devtools middleware] Could not parse the received json",o)}r!==void 0&&n(r)},xo=so()(No((t,n)=>({isAuthenticated:!1,user:null,loading:!0,error:null,setAuthState:r=>t(o=>({...o,...r})),setUser:r=>t(()=>({user:r,isAuthenticated:!!r})),setLoading:r=>t({loading:r}),setError:r=>t({error:r}),clearError:()=>t({error:null}),isAdmin:()=>{var o;return((o=n().user)==null?void 0:o.role)==="admin"},isDriver:()=>{var o;return((o=n().user)==null?void 0:o.role)==="driver"},isStudent:()=>{var o;return((o=n().user)==null?void 0:o.role)==="student"}}),{name:"auth-store"})),po=()=>"http://localhost:3000",vo=()=>"ws://localhost:3000",we={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:po(),websocketUrl:vo()}},isDevelopment:!0,isProduction:!1};console.log("🔧 Environment Configuration:",{supabaseUrl:we.supabase.url?"✅ Set":"❌ Missing",supabaseKey:we.supabase.anonKey?"✅ Set":"❌ Missing",apiUrl:we.api.url,websocketUrl:we.api.websocketUrl,currentHost:window.location.hostname,currentProtocol:window.location.protocol,envVar:"http://localhost:3000"});const Co=()=>{const{url:t,anonKey:n}=we.supabase;if(console.log("🔧 Validating Supabase configuration:",{url:t?"✅ Set":"❌ Missing",anonKey:n?"✅ Set":"❌ Missing",envVars:{VITE_SUPABASE_URL:"✅ Set",VITE_SUPABASE_ANON_KEY:"✅ Set"}}),!t||t==="your_supabase_project_url"||t==="")throw console.error("❌ Supabase URL validation failed:",{url:t,envVar:"https://gthwmwfwvhyriygpcdlr.supabase.co"}),new Error("Invalid Supabase URL. Please check your environment variables.");if(!n||n==="your_supabase_anon_key_here"||n==="")throw console.error("❌ Supabase anon key validation failed:",{anonKey:n?"SET":"MISSING",envVar:"SET"}),new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(t)}catch(r){throw console.error("❌ Supabase URL format validation failed:",{url:t,error:r}),new Error(`Invalid Supabase URL format: ${t}`)}return console.log("✅ Supabase configuration validated successfully"),{url:t,anonKey:n}},jo=()=>{try{const t=Co(),n=or(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Supabase client created successfully"),n}catch(t){console.error("❌ Failed to create Supabase client:",t);{console.log("🔄 Creating fallback Supabase client for development...");const n=or("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Fallback Supabase client created"),n}}},ie=jo();class Do{constructor(){ue(this,"currentUser",null);ue(this,"currentSession",null);ue(this,"currentProfile",null);ue(this,"currentDriverAssignment",null);ue(this,"authStateChangeListener",null);ue(this,"_isInitialized",!1);this.initializeAuth()}async initializeAuth(){try{const{data:{session:n},error:r}=await ie.auth.getSession();if(r){console.error("❌ Error getting session:",r),this._isInitialized=!0;return}n&&(console.log("🔑 Setting initial session for user:",n.user.email),this.currentSession=n,this.currentUser=n.user,console.log("🔑 Session access token:",n.access_token?"Exists":"Missing"),await this.loadUserProfile(n.user.id));const{data:{subscription:o}}=ie.auth.onAuthStateChange(async(s,i)=>{var l;console.log("🔄 Auth state changed:",s,(l=i==null?void 0:i.user)==null?void 0:l.email),this.currentSession=i,this.currentUser=(i==null?void 0:i.user)||null,i&&console.log("🔑 Auth state change - Session access token:",i.access_token?"Exists":"Missing"),i!=null&&i.user?await this.loadUserProfile(i.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()});return this._isInitialized=!0,console.log("✅ Auth service initialized"),()=>o.unsubscribe()}catch(n){console.error("❌ Error initializing auth:",n),this._isInitialized=!0}}async loadUserProfile(n){var r,o,s,i,l,a,c,u,f,g,h,D,y;try{const k=(o=(r=this.currentUser)==null?void 0:r.user_metadata)==null?void 0:o.roles;if(k&&Array.isArray(k)&&k.length>1){const U=window.location.pathname;let T="admin";U.includes("/driver")?T="driver":U.includes("/admin")?T="admin":T=["siddharthmali.211@gmail.com"].includes(((i=(s=this.currentUser)==null?void 0:s.email)==null?void 0:i.toLowerCase())||"")?"admin":"driver";const{data:O,error:Y}=await ie.from("profiles").select("*").eq("id",n).single();if(Y){console.error("❌ Error loading user profile:",Y),this.setTemporaryProfileWithRoleCheck(n,this.currentUser);return}this.currentProfile={id:O.id,email:((l=this.currentUser)==null?void 0:l.email)||"",role:T,full_name:O.full_name,first_name:((a=O.full_name)==null?void 0:a.split(" ")[0])||"",last_name:((c=O.full_name)==null?void 0:c.split(" ").slice(1).join(" "))||"",created_at:O.created_at,updated_at:O.updated_at};return}const{data:x,error:j}=await ie.from("profiles").select("*").eq("id",n).single();if(j){console.error("❌ Error loading user profile:",j),this.setTemporaryProfileWithRoleCheck(n,this.currentUser);return}const L=["siddharthmali.211@gmail.com"].includes(((f=(u=this.currentUser)==null?void 0:u.email)==null?void 0:f.toLowerCase())||""),E=L?"admin":x.role;console.log(`🔍 User ${(g=this.currentUser)==null?void 0:g.email} - Database role: ${x.role}, Admin check: ${L}, Final role: ${E}`),this.currentProfile={id:x.id,email:((h=this.currentUser)==null?void 0:h.email)||"",role:E,full_name:x.full_name,first_name:((D=x.full_name)==null?void 0:D.split(" ")[0])||"",last_name:((y=x.full_name)==null?void 0:y.split(" ").slice(1).join(" "))||"",created_at:x.created_at,updated_at:x.updated_at}}catch(k){console.error("❌ Error in loadUserProfile:",k),this.setTemporaryProfileWithRoleCheck(n,this.currentUser)}}setTemporaryProfileWithRoleCheck(n,r){var l,a,c,u,f,g,h,D;console.log("🔄 Setting temporary profile with role check for user login");const i=["siddharthmali.211@gmail.com"].includes(((l=r.email)==null?void 0:l.toLowerCase())||"")?"admin":"student";console.log(`🔍 User ${r.email} assigned role: ${i}`),this.currentProfile={id:n,email:r.email||"",role:i,full_name:((a=r.user_metadata)==null?void 0:a.full_name)||((c=r.email)==null?void 0:c.split("@")[0])||"User",first_name:((f=(u=r.user_metadata)==null?void 0:u.full_name)==null?void 0:f.split(" ")[0])||((g=r.email)==null?void 0:g.split("@")[0])||"User",last_name:((D=(h=r.user_metadata)==null?void 0:h.full_name)==null?void 0:D.split(" ").slice(1).join(" "))||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}async signIn(n,r){var o;try{console.log("🔐 Starting sign in process for:",n);const s=ie.auth.signInWithPassword({email:n,password:r}),i=new Promise((c,u)=>{setTimeout(()=>u(new Error("Authentication timeout")),5e3)}),{data:l,error:a}=await Promise.race([s,i]);if(a)return console.error("❌ Sign in error:",a),{success:!1,error:a.message};if(console.log("✅ Supabase authentication successful"),l.user&&l.session){console.log("👤 User data received:",l.user.email),this.currentUser=l.user,this.currentSession=l.session,console.log("📋 Loading user profile...");try{const c=this.loadUserProfile(l.user.id),u=new Promise((f,g)=>{setTimeout(()=>g(new Error("Profile loading timeout")),3e3)});await Promise.race([c,u]),console.log("✅ Profile loaded:",(o=this.currentProfile)==null?void 0:o.role)}catch(c){console.warn("⚠️ Profile loading failed, using temporary profile:",c),this.setTemporaryProfileWithRoleCheck(l.user.id,l.user)}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return console.error("❌ No user or session data received"),{success:!1,error:"Authentication failed"}}catch(s){return console.error("❌ Sign in error:",s),s instanceof Error&&s.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:s instanceof Error&&s.message.includes("timeout")?{success:!1,error:"Login timed out. Please try again."}:{success:!1,error:"Network error during sign in"}}}async signUp(n,r,o){try{const{data:s,error:i}=await ie.auth.signUp({email:n,password:r,options:{data:{full_name:o.full_name,role:o.role||"student"}}});if(i)return console.error("❌ Sign up error:",i),{success:!1,error:i.message};if(s.user){const{error:l}=await ie.from("profiles").insert({id:s.user.id,full_name:o.full_name||"Unknown User",role:o.role||"student"});return l?(console.error("❌ Error creating profile:",l),{success:!1,error:"Profile creation failed"}):{success:!0}}return{success:!1,error:"Registration failed"}}catch(s){return console.error("❌ Sign up error:",s),{success:!1,error:"Network error during sign up"}}}async signOut(){try{console.log("🔐 Starting sign out process...");const{error:n}=await ie.auth.signOut();return n?(console.error("❌ Sign out error:",n),{success:!1,error:n.message}):(console.log("✅ Sign out successful"),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(n){return console.error("❌ Sign out error:",n),{success:!1,error:"Network error during sign out"}}}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(n){var r;return((r=this.currentProfile)==null?void 0:r.role)===n}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var r,o,s;let n=((r=this.currentSession)==null?void 0:r.access_token)||null;if(!n)try{const i=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const l of i){const a=localStorage.getItem(l);if(a){const c=JSON.parse(a);if(n=((o=c==null?void 0:c.currentSession)==null?void 0:o.access_token)||(c==null?void 0:c.access_token)||((s=c==null?void 0:c.session)==null?void 0:s.access_token)||null,n){console.log(`🔑 Retrieved token from localStorage fallback (${l})`);break}}}}catch(i){console.warn("⚠️ Error reading token from localStorage:",i)}return console.log("🔑 getAccessToken called:",n?"Token exists":"No token","Session:",!!this.currentSession),n}async validateTokenForAPI(){let n=this.getAccessToken(),r=!1;if(!n)return{valid:!1,token:null,refreshed:!1};try{const{data:{user:o},error:s}=await ie.auth.getUser(n);if(s||!o){console.log("🔄 Token validation failed, attempting refresh:",s==null?void 0:s.message);const i=await this.refreshSession();if(i.success)n=this.getAccessToken(),r=!0,console.log("✅ Token refreshed successfully");else return console.log("❌ Token refresh failed:",i.error),{valid:!1,token:null,refreshed:!1}}if(n){const{data:{user:i},error:l}=await ie.auth.getUser(n);return l||!i?(console.log("❌ Final token validation failed:",l==null?void 0:l.message),{valid:!1,token:null,refreshed:r}):{valid:!0,token:n,refreshed:r}}return{valid:!1,token:null,refreshed:r}}catch(o){return console.error("❌ Token validation error:",o),{valid:!1,token:null,refreshed:!1}}}async refreshSession(){try{if(!this.currentSession)return console.log("🔄 No current session to refresh"),{success:!1,error:"No session to refresh"};const{data:n,error:r}=await ie.auth.refreshSession();return r?r.message.includes("Auth session missing")?(console.log("🔄 No session to refresh (expected for unauthenticated users)"),{success:!1,error:"No session to refresh"}):(console.error("❌ Session refresh error:",r),{success:!1,error:r.message}):n.session?(this.currentSession=n.session,this.currentUser=n.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(n){return console.error("❌ Session refresh error:",n),{success:!1,error:"Network error during session refresh"}}}async updateProfile(n){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:r}=await ie.from("profiles").update(n).eq("id",this.currentUser.id);return r?(console.error("❌ Profile update error:",r),{success:!1,error:r.message}):(await this.loadUserProfile(this.currentUser.id),{success:!0})}catch(r){return console.error("❌ Profile update error:",r),{success:!1,error:"Network error during profile update"}}}onAuthStateChange(n){this.authStateChangeListener=n}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}async forceFreshLogin(){try{console.log("🔄 Forcing fresh login...");const n=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);o&&(o.includes("supabase")||o.includes("auth")||o.includes("sb-"))&&n.push(o)}return n.forEach(r=>{localStorage.removeItem(r),console.log(`🗑️ Removed localStorage key: ${r}`)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,console.log("✅ Fresh login state prepared"),{success:!0}}catch(n){return console.error("❌ Error forcing fresh login:",n),{success:!1,error:"Failed to force fresh login"}}}async recoverSession(){var n,r,o,s;try{console.log("🔄 Attempting to recover session from localStorage...");const i=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let l=null,a=null;for(const h of i){const D=localStorage.getItem(h);if(D){l=D,a=h,console.log(`📝 Found session in localStorage key: ${h}`);break}}if(!l)return console.log("📝 No stored session found in any localStorage key"),{success:!1,error:"No stored session"};let c;try{c=JSON.parse(l)}catch(h){return console.log("❌ Failed to parse stored session:",h),{success:!1,error:"Invalid session format"}}const u=((n=c==null?void 0:c.currentSession)==null?void 0:n.access_token)||(c==null?void 0:c.access_token)||((r=c==null?void 0:c.session)==null?void 0:r.access_token);if(!u)return console.log("🔑 No access token found in stored session structure:",c),{success:!1,error:"No access token in stored session"};console.log("🔑 Found access token, validating...");const{data:{user:f},error:g}=await ie.auth.getUser(u);return g||!f?(console.log("❌ Stored token is invalid:",g==null?void 0:g.message),a&&localStorage.removeItem(a),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:u,refresh_token:((o=c==null?void 0:c.currentSession)==null?void 0:o.refresh_token)||(c==null?void 0:c.refresh_token),expires_in:((s=c==null?void 0:c.currentSession)==null?void 0:s.expires_in)||(c==null?void 0:c.expires_in),token_type:"bearer",user:f},this.currentUser=f,await this.loadUserProfile(f.id),console.log("✅ Session recovered successfully for user:",f.email),{success:!0})}catch(i){return console.error("❌ Error recovering session:",i),{success:!1,error:"Failed to recover session"}}}async getDriverBusAssignment(n){try{const{data:r,error:o}=await ie.from("buses").select("id, number_plate, route_id").eq("assigned_driver_id",n).eq("is_active",!0).single();if(o||!r)return console.error("❌ Error fetching bus assignment:",o),null;let s="";if(r.route_id){const{data:c,error:u}=await ie.from("routes").select("name").eq("id",r.route_id).single();!u&&c&&(s=c.name)}let i="Unknown Driver";const{data:l,error:a}=await ie.from("profiles").select("full_name").eq("id",n).single();if(!a&&(l!=null&&l.full_name))i=l.full_name;else{const{data:c,error:u}=await ie.from("users").select("first_name, last_name").eq("id",n).single();!u&&c&&(i=`${c.first_name||""} ${c.last_name||""}`.trim()||"Unknown Driver")}return{driver_id:n,bus_id:r.id,bus_number:r.number_plate,route_id:r.route_id||"",route_name:s,driver_name:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(r){return console.error("❌ Error in getDriverBusAssignment:",r),null}}async storeDriverBusAssignment(n){try{return this.currentDriverAssignment={...n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},console.log("✅ Driver bus assignment stored in memory successfully"),!0}catch(r){return console.error("❌ Error in storeDriverBusAssignment:",r),!1}}async clearDriverBusAssignment(){try{return this.currentDriverAssignment=null,console.log("✅ Driver bus assignment cleared from memory"),!0}catch(n){return console.error("❌ Error in clearDriverBusAssignment:",n),!1}}getCurrentDriverAssignment(){return this.currentDriverAssignment}async validateSession(){try{const{data:{session:n},error:r}=await ie.auth.getSession();if(r)return console.error("❌ Session validation error:",r),!1;if(!n)return console.log("❌ No active session found"),!1;const o=new Date(n.expires_at*1e3),s=new Date;if(o.getTime()-s.getTime()<5*60*1e3){console.log("🔄 Session expiring soon, refreshing...");const{data:{session:l},error:a}=await ie.auth.refreshSession();if(a)return console.error("❌ Session refresh error:",a),!1;l&&(this.currentSession=l,this.currentUser=l.user,console.log("✅ Session refreshed successfully"))}return!0}catch(n){return console.error("❌ Error validating session:",n),!1}}async validateDriverSession(){var n;try{if(!await this.validateSession())return{isValid:!1,assignment:null};if(((n=this.currentProfile)==null?void 0:n.role)!=="driver")return console.log("❌ User is not a driver"),{isValid:!1,assignment:null};const o=await this.getDriverBusAssignment(this.currentUser.id);return o?(this.currentDriverAssignment=o,{isValid:!0,assignment:o}):(console.log("❌ No active bus assignment found for driver"),{isValid:!1,assignment:null})}catch(r){return console.error("❌ Error validating driver session:",r),{isValid:!1,assignment:null}}}async logout(){var n;try{this.currentUser&&((n=this.currentProfile)==null?void 0:n.role)==="driver"&&await this.clearDriverBusAssignment(),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.currentDriverAssignment=null;const{error:r}=await ie.auth.signOut();r?console.error("❌ Error signing out:",r):console.log("✅ Logged out successfully")}catch(r){console.error("❌ Error in logout:",r)}}}const se=new Do,yo=we.api.url;class Eo{constructor(n){ue(this,"baseUrl");this.baseUrl=n}async backendRequest(n,r){const s=`${this.baseUrl||we.api.url}${n}`,i={"Content-Type":"application/json"};try{const a=se.getAccessToken();a&&(i.Authorization=`Bearer ${a}`)}catch{console.log("🔓 Public access - no authentication token available")}r!=null&&r.headers&&Object.assign(i,r.headers);const l=await fetch(s,{headers:i,...r});if(!l.ok){const a=await l.json().catch(()=>({}));throw new Error(a.message||a.error||`API request failed: ${l.status} ${l.statusText}`)}return l.json()}async getHealth(){return this.backendRequest("/health")}async getAllBuses(){try{const n=await this.backendRequest("/buses");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getAllBuses:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusInfo(n){try{const r=await this.backendRequest(`/buses/${n}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getBusInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutes(){try{const n=await this.backendRequest("/routes");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getRoutes:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getRouteInfo(n){try{const r=await this.backendRequest(`/routes/${n}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching route info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getRouteInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getAllDrivers(){try{const n=await this.backendRequest("/admin/drivers");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching drivers from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getAllDrivers:",n),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getDriverInfo(n){try{const r=await this.backendRequest(`/admin/drivers/${n}`);return r.success&&r.data?{success:!0,data:r.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching driver info from backend:",r.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getDriverInfo:",r),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getLiveLocations(){try{const n=await this.backendRequest("/locations/current");return n.success&&n.data?{success:!0,data:n.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations from backend:",n.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(n){return console.error("❌ Error in getLiveLocations:",n),n.message&&n.message.includes("401")?(console.log("ℹ️ Student access - no authentication required for viewing locations"),{success:!0,data:[],timestamp:new Date().toISOString()}):{success:!1,data:[],timestamp:new Date().toISOString()}}}async updateLiveLocation(n,r,o){try{const s=await this.backendRequest("/locations/update",{method:"POST",body:JSON.stringify({busId:n,driverId:r,latitude:o.latitude,longitude:o.longitude,speed:o.speed,heading:o.heading,timestamp:new Date().toISOString()})});return s.success&&s.data?{success:!0,data:s.data,timestamp:new Date().toISOString()}:(console.error("❌ Error updating live location via backend:",s.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(s){return console.error("❌ Error in updateLiveLocation:",s),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutesInViewport(n){try{const[r,o]=n[0],[s,i]=n[1],l=await this.backendRequest(`/routes/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`);return l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getRoutesInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusesInViewport(n){try{const[r,o]=n[0],[s,i]=n[1],l=await this.backendRequest(`/buses/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`);return l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getBusesInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getLiveLocationsInViewport(n){try{const[r,o]=n[0],[s,i]=n[1],l=await this.backendRequest(`/locations/viewport?minLng=${r}&minLat=${o}&maxLng=${s}&maxLat=${i}`);return l.success&&l.data?{success:!0,data:l.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations in viewport:",l.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(r){return console.error("❌ Error in getLiveLocationsInViewport:",r),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusClusters(n,r){try{const[o,s]=n[0],[i,l]=n[1],a=await this.backendRequest(`/buses/clusters?minLng=${o}&minLat=${s}&maxLng=${i}&maxLat=${l}&zoom=${r}`);return a.success&&a.data?{success:!0,data:a.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus clusters:",a.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(o){return console.error("❌ Error in getBusClusters:",o),{success:!1,data:[],timestamp:new Date().toISOString()}}}}const Ut=new Eo(yo),$t={health:["health"],routes:["routes"],route:t=>["route",t],routesInViewport:t=>["routes","viewport",t],buses:["buses"],bus:t=>["bus",t],busesInViewport:t=>["buses","viewport",t],drivers:["drivers"],driver:t=>["driver",t],liveLocations:["liveLocations"],liveLocationsInViewport:t=>["liveLocations","viewport",t],busClusters:(t,n)=>["busClusters",t,n]},Po=()=>Bt({queryKey:$t.health,queryFn:()=>Ut.getHealth(),staleTime:3e4,refetchInterval:6e4,retry:3}),Fi=(t,n=!0)=>Bt({queryKey:$t.routesInViewport(t),queryFn:()=>Ut.getRoutesInViewport(t),enabled:n&&t!==void 0,staleTime:2*60*1e3,refetchInterval:5*60*1e3,retry:3}),Oi=(t,n=!0)=>Bt({queryKey:$t.busesInViewport(t),queryFn:()=>Ut.getBusesInViewport(t),enabled:n&&t!==void 0,staleTime:15*1e3,refetchInterval:30*1e3,retry:3}),Bi=(t,n=!0)=>Bt({queryKey:$t.liveLocationsInViewport(t),queryFn:()=>Ut.getLiveLocationsInViewport(t),enabled:n&&t!==void 0,staleTime:5*1e3,refetchInterval:15*1e3,retry:3}),Ui=(t,n,r=!0)=>Bt({queryKey:$t.busClusters(t,n),queryFn:()=>Ut.getBusClusters(t,n),enabled:r&&t!==void 0&&n!==void 0,staleTime:10*1e3,refetchInterval:20*1e3,retry:3});class wo{constructor(){ue(this,"socket",null);ue(this,"_isConnected",!1);ue(this,"connectionState","disconnected");ue(this,"reconnectAttempts",0);ue(this,"maxReconnectAttempts",10);ue(this,"reconnectDelay",1e3);ue(this,"maxReconnectDelay",3e4);ue(this,"heartbeatInterval",null);ue(this,"connectionTimeout",null);ue(this,"lastHeartbeat",0);ue(this,"isShuttingDown",!1);ue(this,"connectionMonitorInterval",null);ue(this,"busLocationListeners",[]);ue(this,"driverConnectedListeners",[]);ue(this,"driverDisconnectedListeners",[]);ue(this,"studentConnectedListeners",[]);ue(this,"busArrivingListeners",[]);this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.handleReconnect=this.handleReconnect.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this),this.monitorConnection=this.monitorConnection.bind(this)}async connect(){var n;if((n=this.socket)!=null&&n.connected||this.connectionState==="connecting"){console.log("🔌 WebSocket already connected or connecting");return}this.isShuttingDown=!1;try{this.connectionState="connecting",console.log("🔌 Connecting to WebSocket server...");const r=we.api.websocketUrl;console.log("🔌 WebSocket URL:",r),this.socket=uo(r,{transports:["polling","websocket"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,reconnectionDelayMax:1e4,autoConnect:!1,query:{clientType:"student",version:"1.0.0",timestamp:Date.now().toString()},extraHeaders:{"User-Agent":"BusTrackingStudent/1.0.0"}}),this.connectionTimeout=setTimeout(()=>{this.connectionState==="connecting"&&(console.error("❌ WebSocket connection timeout"),this.handleError(new Error("Connection timeout")))},15e3),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleError),this.socket.on("error",this.handleError),this.socket.on("reconnect",this.handleReconnect),this.socket.on("reconnect_attempt",o=>{console.log(`🔄 Reconnection attempt ${o}`)}),this.socket.on("reconnect_error",o=>{console.error("❌ Reconnection error:",o)}),this.socket.on("reconnect_failed",()=>{console.error("❌ Reconnection failed after all attempts")}),this.socket.connect()}catch(r){console.error("❌ WebSocket connection error:",r),this.handleError(r)}}handleConnect(){var n;console.log("✅ WebSocket connected"),this._isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.startHeartbeat(),this.startConnectionMonitoring(),(n=this.socket)==null||n.emit("student:connect",{timestamp:new Date().toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}})}handleDisconnect(n){console.log("❌ WebSocket disconnected:",n),this._isConnected=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!(this.isShuttingDown||n==="io client disconnect")&&this.handleReconnect()}handleError(n){console.error("❌ WebSocket error:",n),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!this.isShuttingDown&&(n.type==="TransportError"||n.type==="TransportOpenError")&&this.handleReconnect()}handleReconnect(){if(this.isShuttingDown||this.connectionState==="reconnecting")return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.connectionState="disconnected";return}this.connectionState="reconnecting",this.reconnectAttempts++,console.log(`🔄 Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);const n=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1)+Math.random()*1e3,this.maxReconnectDelay);setTimeout(()=>{this.isShuttingDown||this.connect()},n)}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{var n;(n=this.socket)!=null&&n.connected&&(this.socket.emit("ping"),this.lastHeartbeat=Date.now())},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startConnectionMonitoring(){this.connectionMonitorInterval&&clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=setInterval(()=>{this.monitorConnection()},1e4)}stopConnectionMonitoring(){this.connectionMonitorInterval&&(clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}monitorConnection(){if(!this.socket){console.log("🔍 Connection monitor: No socket available");return}const n=this.socket.connected,r=Date.now()-this.lastHeartbeat;console.log(`🔍 Connection monitor: Connected=${n}, Last heartbeat=${r}ms ago`),n&&r>6e4&&this.lastHeartbeat>0&&(console.warn("⚠️ Connection monitor: No heartbeat received, forcing reconnection"),this.socket.disconnect(),this.handleReconnect()),this._isConnected!==n&&(console.log(`🔄 Connection state changed: ${this._isConnected} -> ${n}`),this._isConnected=n,this.connectionState=n?"connected":"disconnected")}disconnect(){console.log("🔌 Disconnecting WebSocket..."),this.isShuttingDown=!0,this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}reset(){console.log("🔄 Resetting WebSocket service..."),this.isShuttingDown=!1,this.connectionState="disconnected",this._isConnected=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.socket&&(this.socket.disconnect(),this.socket=null),this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}isConnected(){var n;return this._isConnected&&((n=this.socket)==null?void 0:n.connected)===!0}getConnectionState(){return this.connectionState}getConnectionStatus(){return this._isConnected}authenticateAsDriver(n,r){console.log("🔐 Driver: Starting authentication process..."),console.log("🔐 Socket connected:",this.isConnected()),console.log("🔐 Socket state:",this.getConnectionState()),this.socket&&this.isConnected()?(console.log("🔐 Driver: Sending authentication request..."),this.socket.off("driver:authenticated"),this.socket.off("driver:authentication_failed"),this.socket.off("error"),this.socket.once("driver:authenticated",o=>{console.log("✅ Driver: Authentication successful:",o),r!=null&&r.onSuccess&&r.onSuccess(o)}),this.socket.once("driver:authentication_failed",o=>{console.error("❌ Driver: Authentication failed:",o),r!=null&&r.onFailure&&r.onFailure(o)}),this.socket.once("error",o=>{console.error("❌ Driver: Socket error during authentication:",o),r!=null&&r.onError&&r.onError(o)}),this.socket.emit("driver:authenticate",{token:n}),console.log("📤 Authentication request sent with token length:",n.length)):(console.error("❌ Driver: Cannot authenticate - socket not connected"),console.error("❌ Socket object:",!!this.socket),console.error("❌ Connection state:",this.getConnectionState()),r!=null&&r.onError&&r.onError(new Error("Socket not connected")))}sendLocationUpdate(n){this.socket&&this.isConnected()?(console.log("📍 Sending location update:",n),this.socket.emit("driver:locationUpdate",n)):console.error("❌ Cannot send location update - socket not connected")}onBusLocationUpdate(n){var r;this.busLocationListeners.push(n),(r=this.socket)==null||r.on("bus:locationUpdate",n)}onDriverConnected(n){var r;this.driverConnectedListeners.push(n),(r=this.socket)==null||r.on("driver:connected",n)}onDriverDisconnected(n){var r;this.driverDisconnectedListeners.push(n),(r=this.socket)==null||r.on("driver:disconnected",n)}onStudentConnected(n){var r;this.studentConnectedListeners.push(n),(r=this.socket)==null||r.on("student:connected",n)}onBusArriving(n){var r;this.busArrivingListeners.push(n),(r=this.socket)==null||r.on("bus:arriving",n)}off(n){var r;(r=this.socket)==null||r.off(n)}getConnectionStats(){return{isConnected:this._isConnected,connectionState:this.connectionState,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHeartbeat:this.lastHeartbeat,uptime:this.lastHeartbeat>0?Date.now()-this.lastHeartbeat:0}}async healthCheck(){var o;const n=this.getConnectionStats();return{healthy:this.isConnected()&&this.connectionState==="connected"&&n.lastHeartbeat>0&&Date.now()-n.lastHeartbeat<6e4,details:{...n,socketExists:!!this.socket,socketConnected:(o=this.socket)==null?void 0:o.connected,isShuttingDown:this.isShuttingDown}}}}const q=new wo,So=()=>{var te;const[t,n]=b.useState(!1),[r,o]=b.useState(!1),[s,i]=b.useState(null),[l,a]=b.useState(null),[c,u]=b.useState(null),[f,g]=b.useState(null),[h,D]=b.useState(null),[y,k]=b.useState(0),[B,x]=b.useState({email:"",password:""}),[j,v]=b.useState(null),[L,E]=b.useState(!1),U=b.useRef(null),T=b.useRef(null),O=b.useRef(null),Y=b.useRef(null),M=b.useRef(null),I=b.useRef(null);b.useEffect(()=>{const{data:{subscription:w}}=ie.auth.onAuthStateChange(async(P,W)=>{P==="SIGNED_IN"&&W?await Re(W.access_token):P==="SIGNED_OUT"&&(n(!1),i(null),be(),C())});return()=>w.unsubscribe()},[]),b.useEffect(()=>{t&&navigator.geolocation&&(console.log("🔍 Checking location permission on component mount..."),"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(w=>{console.log("📍 Initial permission state:",w.state),w.state==="granted"?console.log("✅ Location permission already granted"):w.state==="prompt"?console.log("❓ Location permission needs to be requested"):w.state==="denied"&&(console.log("❌ Location permission denied"),u("Location permission is denied. Please enable it in your browser settings."))}))},[t]),b.useEffect(()=>{(async()=>{if(!navigator.geolocation){u("Geolocation is not supported by this browser");return}try{"permissions"in navigator&&(await navigator.permissions.query({name:"geolocation"})).state==="denied"&&u("Location permission denied. Please enable location access in your browser settings.")}catch{console.log("Permission API not supported, will check when user clicks Start Tracking")}})()},[]);const C=()=>{I.current&&(I.current.remove(),I.current=null),Y.current&&(Y.current.remove(),Y.current=null)},A=(w,P)=>{if(!M.current||Y.current)return;Y.current=new Oe.Map({container:M.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[P,w],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),Y.current.addControl(new Oe.NavigationControl,"top-right"),Y.current.once("load",()=>{console.log("✅ Driver map loaded successfully"),Y.current&&(Y.current.dragRotate.disable(),Y.current.touchZoomRotate.disableRotation(),console.log("🔄 Rotation features disabled"))}),Y.current.on("error",De=>{console.error("❌ Driver map error:",De)});const W=document.createElement("div");W.className="driver-marker",W.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,I.current=new Oe.Marker({element:W,anchor:"center"}).setLngLat([P,w]).addTo(Y.current);const xe=new Oe.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(s==null?void 0:s.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(s==null?void 0:s.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(s==null?void 0:s.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
        </div>
      `);I.current.setPopup(xe)},R=(w,P)=>{if(!Y.current||!I.current)return;const W=[P,w];I.current.setLngLat(W),Y.current.flyTo({center:W,duration:1e3});const xe=new Oe.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(s==null?void 0:s.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(s==null?void 0:s.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(s==null?void 0:s.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Coordinates:</strong> ${w.toFixed(6)}, ${P.toFixed(6)}</p>
        </div>
      `);I.current.setPopup(xe)},fe=async w=>{w.preventDefault(),E(!0),v(null);try{const{data:P,error:W}=await ie.auth.signInWithPassword({email:B.email,password:B.password});if(W){console.error("❌ Login error:",W),v(W.message);return}P.user&&P.session?(console.log("✅ Login successful:",P.user.email),await Re(P.session.access_token),x({email:"",password:""})):v("Login failed - no user data received")}catch(P){console.error("❌ Login error:",P),v("An unexpected error occurred during login")}finally{E(!1)}},Re=async w=>{var P,W,xe,De,F;try{console.log("🔌 Driver: Connecting to WebSocket..."),await q.connect(),(P=q.socket)==null||P.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server"),g(null)}),(W=q.socket)==null||W.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server"),g("Disconnected from server")}),(xe=q.socket)==null||xe.on("error",G=>{console.error("❌ Driver: Socket error:",G),g(G.message||"Socket error occurred")}),(De=q.socket)==null||De.on("driver:authenticated",G=>{console.log("✅ Driver: Authentication successful:",G),n(!0),i(G.busInfo),g(null)}),(F=q.socket)==null||F.on("driver:locationConfirmed",G=>{console.log("📍 Driver: Location confirmed:",G),D(new Date().toLocaleTimeString()),k(ve=>ve+1)}),U.current=q.socket,q.authenticateAsDriver(w)}catch(G){console.error("❌ Driver: Authentication error:",G),g("Failed to authenticate with server")}},be=()=>{q.disconnect(),U.current=null},J=async()=>{if(!navigator.geolocation){u("Geolocation is not supported by this browser");return}const w=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),P=navigator.userAgent.includes("Firefox"),W=navigator.userAgent.includes("Chrome"),xe=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome");console.log(`🌐 Device detected: ${w?"Mobile":"Desktop"} - ${P?"Firefox":W?"Chrome":xe?"Safari":"Other"}`);const De={enableHighAccuracy:!0,timeout:w?3e4:6e4,maximumAge:0};console.log("📍 Starting location tracking with options:",De);try{if("permissions"in navigator){const F=await navigator.permissions.query({name:"geolocation"});if(console.log(`🔐 Current permission state: ${F.state}`),F.state==="denied"){u(w?`Location permission denied on mobile. Please:
1. Go to your phone Settings
2. Find this browser app
3. Enable Location permission
4. Refresh this page`:"Location permission denied. Please reset location permissions and try again.");return}}}catch{console.log("Permission API not supported, proceeding with geolocation request")}console.log("📍 Requesting location permission..."),u(w?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(F=>{console.log("✅ Initial position obtained:",{latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,timestamp:new Date(F.timestamp).toLocaleString()}),a(F),u(null),A(F.coords.latitude,F.coords.longitude),S(F)},F=>{console.error("❌ Geolocation error:",F);let G="Location error: ";switch(F.code){case F.PERMISSION_DENIED:w?G=`Mobile location permission denied. Please:

1. Go to your phone Settings
2. Find this browser app (Chrome/Firefox/Safari)
3. Tap "Permissions" or "Privacy"
4. Enable "Location" permission
5. Return to this page and refresh

Alternative: Try opening this page in a different browser app.`:P?G+='Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':G+="Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case F.POSITION_UNAVAILABLE:G=w?`Location unavailable on mobile. Please:
1. Go outdoors or near a window
2. Wait 10-15 seconds
3. Make sure GPS is enabled in phone settings
4. Try again`:"Location information unavailable.";break;case F.TIMEOUT:G=w?`Location request timed out on mobile. Please:
1. Go outdoors for better GPS signal
2. Wait 30 seconds and try again
3. Check if GPS is enabled in phone settings`:"Location request timed out. Please try again.";break;default:G+=F.message}u(G)},De),O.current=navigator.geolocation.watchPosition(F=>{console.log("📍 Location update received:",{latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,timestamp:new Date(F.timestamp).toLocaleString()}),a(F),u(null),R(F.coords.latitude,F.coords.longitude),S(F)},F=>{console.error("❌ Geolocation watch error:",F);let G="Location tracking error: ";switch(F.code){case F.PERMISSION_DENIED:G=w?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case F.POSITION_UNAVAILABLE:G=w?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case F.TIMEOUT:G=w?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:G+=F.message}u(G)},De),o(!0),console.log("📍 Location tracking started")},Q=()=>{O.current&&(navigator.geolocation.clearWatch(O.current),O.current=null),T.current&&(clearInterval(T.current),T.current=null),o(!1),console.log("📍 Location tracking stopped")},S=w=>{if(!U.current||!s)return;const P={driverId:s.driver_id,latitude:w.coords.latitude,longitude:w.coords.longitude,timestamp:new Date().toISOString(),speed:w.coords.speed||void 0,heading:w.coords.heading||void 0};U.current.emit("driver:locationUpdate",P)},H=async()=>{try{console.log("🔐 Driver: Starting sign out..."),r&&Q(),be();const{error:w}=await ie.auth.signOut();w?console.error("❌ Sign out error:",w):(console.log("✅ Driver: Sign out successful"),n(!1),i(null),a(null),u(null),g(null),D(null),k(0),C())}catch(w){console.error("❌ Sign out error:",w)}};return t?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",s==null?void 0:s.driver_name," | Bus: ",s==null?void 0:s.bus_number," | Route: ",s==null?void 0:s.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),e.jsxDEV("button",{onClick:H,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${f?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:f?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${r?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600",children:r?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:y},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),h&&e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",h]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxDEV("div",{className:"space-y-3",children:r?e.jsxDEV("button",{onClick:Q,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:J,disabled:!!f,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(w=>{console.log("✅ Manual location permission granted:",w),u(null),J()},w=>{console.error("❌ Manual location permission denied:",w),u("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),c&&c.includes("Permission denied")&&e.jsxDEV("button",{onClick:()=>{u(null),J()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),e.jsxDEV("div",{ref:M,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),c&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[e.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[e.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[e.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>{const w=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(P=>{const W=`✅ Location Test Successful!

Latitude: ${P.coords.latitude}
Longitude: ${P.coords.longitude}
Accuracy: ${P.coords.accuracy}m
Device: ${w?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(W),u(null)},P=>{const W=`❌ Location Test Failed

Error Code: ${P.code}
Error Message: ${P.message}
Device: ${w?"Mobile":"Desktop"}

Please check your location permissions.`;alert(W)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),l?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-mono",children:l.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-mono",children:l.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),e.jsxDEV("span",{children:[(te=l.coords.accuracy)==null?void 0:te.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),l.coords.speed&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),e.jsxDEV("span",{children:[(l.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),l.coords.heading&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),e.jsxDEV("span",{children:[l.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:new Date(l.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):e.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),e.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"max-w-md w-full",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxDEV("div",{className:"text-center mb-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),j&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxDEV("p",{className:"text-red-700 text-sm",children:j},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),e.jsxDEV("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),e.jsxDEV("input",{id:"email",type:"email",required:!0,value:B.email,onChange:w=>x(P=>({...P,email:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),e.jsxDEV("input",{id:"password",type:"password",required:!0,value:B.password,onChange:w=>x(P=>({...P,password:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",disabled:L,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:L?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)},pr=b.createContext(void 0),Cn=()=>{const t=b.useContext(pr);if(!t)throw new Error("useTransition must be used within a TransitionProvider");return t},Vo=({children:t})=>{const[n,r]=b.useState("default"),{pathname:o}=no();b.useEffect(()=>{o.includes("login")||o.includes("admin-login")||o.includes("driver-login")?r("homepage-to-login"):o.includes("student")||o.includes("student-map")?r("homepage-to-map"):o.includes("dashboard")||o.includes("admin")||o.includes("driver-dashboard")?r("login-to-dashboard"):r("default")},[o]);const s=i=>{r(i)};return e.jsxDEV(pr.Provider,{value:{currentTransition:n,setTransition:s},children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:67,columnNumber:5},void 0)},ko=({children:t,isVisible:n})=>e.jsxDEV(X.div,{initial:{opacity:0,y:50},animate:{opacity:n?1:0,y:n?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),Ao=({children:t,isVisible:n})=>e.jsxDEV(X.div,{initial:{opacity:0,scale:.8},animate:{opacity:n?1:0,scale:n?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:e.jsxDEV(X.div,{initial:{opacity:0,y:100},animate:{opacity:n?1:0,y:n?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),Mo=({children:t,isVisible:n})=>e.jsxDEV(X.div,{initial:{opacity:0,scale:.9},animate:{opacity:n?1:0,scale:n?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:e.jsxDEV(X.div,{initial:{opacity:0,y:50},animate:{opacity:n?1:0,y:n?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),_o=({children:t})=>{const{currentTransition:n}=Cn(),r=()=>{switch(n){case"homepage-to-login":return e.jsxDEV(ko,{isVisible:!0,children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return e.jsxDEV(Ao,{isVisible:!0,children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return e.jsxDEV(Mo,{isVisible:!0,children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return t}};return e.jsxDEV(e.Fragment,{children:r()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},Lo=()=>{const t=vn(),{setTransition:n}=Cn(),[r,o]=b.useState(!1),[s,i]=b.useState(null),[l,a]=b.useState({email:"",password:""}),[c,u]=b.useState(null),[f,g]=b.useState(!1),[h,D]=b.useState(!1);b.useEffect(()=>{const x=()=>{D(window.innerWidth<768)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),b.useEffect(()=>{const{data:{subscription:x}}=ie.auth.onAuthStateChange(async(j,v)=>{j==="SIGNED_IN"&&v?await k(v.access_token):j==="SIGNED_OUT"&&(o(!1),i(null),B())});return()=>x.unsubscribe()},[]);const y=async x=>{x.preventDefault(),g(!0),u(null);try{const{data:j,error:v}=await ie.auth.signInWithPassword({email:l.email,password:l.password});if(v){console.error("❌ Login error:",v),u(v.message);return}j.user&&j.session?(console.log("✅ Login successful:",j.user.email),await k(j.session.access_token),a({email:"",password:""})):u("Login failed - no user data received")}catch(j){console.error("❌ Login error:",j),u("An unexpected error occurred during login")}finally{g(!1)}},k=async x=>{var j,v,L;try{console.log("🔌 Driver: Connecting to WebSocket..."),await q.connect();let E=0;const U=10;for(;!q.isConnected()&&E<U;)console.log(`⏳ Waiting for WebSocket connection... (attempt ${E+1}/${U})`),await new Promise(M=>setTimeout(M,1500)),E++;if(!q.isConnected())throw console.error("❌ WebSocket connection failed after all attempts"),new Error("Failed to establish WebSocket connection. Please check your internet connection and try again.");if(console.log("✅ WebSocket connection established"),(j=q.socket)==null||j.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server")}),(v=q.socket)==null||v.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server")}),(L=q.socket)==null||L.on("error",M=>{console.error("❌ Driver: Socket error:",M),u(M.message||"Socket error occurred")}),await new Promise(M=>setTimeout(M,500)),!q.isConnected())throw new Error("WebSocket connection failed to establish");const T=async M=>{console.log("✅ Driver: Authentication successful:",M);try{const I={driver_id:M.driverId,bus_id:M.busId,bus_number:M.busInfo.bus_number,route_id:M.busInfo.route_id,route_name:M.busInfo.route_name,driver_name:M.busInfo.driver_name};console.log("💾 Storing driver assignment:",I);const C=await se.storeDriverBusAssignment(I);if(console.log("💾 Assignment stored result:",C),!C){console.error("❌ Failed to store driver assignment in database"),u("Failed to store authentication data");return}console.log("✅ Setting authentication state..."),o(!0),i(M.busInfo),n("login-to-dashboard"),console.log("🚀 Driver: Navigating to dashboard immediately..."),t("/driver-dashboard"),console.log("✅ Navigation initiated successfully")}catch(I){console.error("❌ Error storing authentication data:",I),u("Failed to complete authentication")}},O=M=>{console.error("❌ Driver: Authentication failed:",M),u("Authentication failed: "+(M.message||"Unknown error"))},Y=setTimeout(()=>{var M,I;console.error("❌ Driver: Authentication timeout"),u("Authentication timeout - please try again"),(M=q.socket)==null||M.off("driver:authenticated",T),(I=q.socket)==null||I.off("driver:authentication_failed",O)},6e4);if(console.log("🔐 Driver: Sending authentication request..."),!x)throw new Error("No authentication token available");q.authenticateAsDriver(x,{onSuccess:M=>{clearTimeout(Y),T(M)},onFailure:M=>{clearTimeout(Y),O(M)},onError:M=>{clearTimeout(Y),console.error("❌ Driver: Authentication error:",M),u("Authentication error: "+(M.message||"Unknown error"))}}),console.log("📤 Authentication request sent, waiting for response...")}catch(E){console.error("❌ Driver: Authentication error:",E),u("Failed to authenticate with server")}},B=()=>{q.disconnect()};return r&&s?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV(X.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:262,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:263,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:257,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:256,columnNumber:7},void 0):e.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[e.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:e.jsxDEV(X.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:e.jsxDEV(X.div,{whileHover:h?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:289,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:292,columnNumber:13},void 0),e.jsxDEV("div",{className:"relative z-10 p-8",children:[e.jsxDEV(X.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[e.jsxDEV("div",{className:"text-6xl mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"1"},children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:303,columnNumber:17},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:304,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:307,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:297,columnNumber:15},void 0),e.jsxDEV(mn,{children:c&&e.jsxDEV(X.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:e.jsxDEV("p",{className:"text-red-200 text-sm",children:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:321,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:315,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:313,columnNumber:15},void 0),e.jsxDEV(X.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:y,className:"space-y-6",children:[e.jsxDEV(X.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:340,columnNumber:19},void 0),e.jsxDEV("input",{id:"email",type:"email",required:!0,value:l.email,onChange:x=>a(j=>({...j,email:x.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:335,columnNumber:17},void 0),e.jsxDEV(X.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:368,columnNumber:19},void 0),e.jsxDEV("input",{id:"password",type:"password",required:!0,value:l.password,onChange:x=>a(j=>({...j,password:x.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:374,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:363,columnNumber:17},void 0),e.jsxDEV(X.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:h?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:f?e.jsxDEV("div",{className:"flex items-center justify-center",children:[e.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:403,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:402,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:391,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:327,columnNumber:15},void 0),e.jsxDEV(X.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:e.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:419,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:413,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:295,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:426,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:283,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:276,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:275,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(h?8:15)].map((x,j)=>e.jsxDEV(X.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},j,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:434,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:432,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:273,columnNumber:5},void 0)},Io=()=>{var be;const t=vn(),[n,r]=b.useState(!1),[o,s]=b.useState(null),[i,l]=b.useState(null),[a,c]=b.useState(null),[u,f]=b.useState(null),[g,h]=b.useState(0),[D,y]=b.useState(!1),[k,B]=b.useState("disconnected");b.useEffect(()=>{console.log("🚌 BusInfo state changed:",o)},[o]);const x=b.useRef(null),j=b.useRef(null),v=b.useRef(null),L=b.useRef(null),E=b.useRef(null),U=b.useRef(!1),T=b.useRef(null),O=b.useRef({});b.useEffect(()=>{if(U.current){console.log("🔄 Driver Dashboard: Already initialized, skipping...");return}console.log("🚀 Driver Dashboard: Starting initialization..."),U.current=!0;const J=()=>{q.isConnected()?B("connected"):q.getConnectionState()==="connecting"||q.getConnectionState()==="reconnecting"?B("connecting"):B("disconnected")};J();const Q=setInterval(J,2e3);return(async()=>{var H,te,w,P,W,xe,De,F;try{console.log("🚀 Driver Dashboard: Component mounted, starting initialization...");const{data:{session:G}}=await ie.auth.getSession();if(console.log("🔑 Session check:",G?"Found":"Not found",(H=G==null?void 0:G.user)==null?void 0:H.email),G!=null&&G.user){console.log("🔌 Driver Dashboard: Initializing...");const ve=se.getCurrentDriverAssignment();if(console.log("🔍 Checking for existing assignment:",ve?"Found":"Not found"),ve)console.log("✅ Driver Dashboard: Using existing assignment from DriverLogin:",ve),s({bus_id:ve.bus_id,bus_number:ve.bus_number,route_id:ve.route_id,route_name:ve.route_name,driver_id:ve.driver_id,driver_name:ve.driver_name}),y(!0),console.log("✅ Bus info and authentication state set from existing assignment");else{console.log("🔍 No existing assignment, validating driver session...");const{isValid:ge,assignment:Ce}=await se.validateDriverSession();if(console.log("🔍 Validation result:",{isValid:ge,assignment:Ce?"Found":"Not found"}),ge&&Ce)console.log("✅ Driver Dashboard: Valid session found with assignment:",Ce),s({bus_id:Ce.bus_id,bus_number:Ce.bus_number,route_id:Ce.route_id,route_name:Ce.route_name,driver_id:Ce.driver_id,driver_name:Ce.driver_name}),y(!0),console.log("✅ Bus info and authentication state set from validation");else{console.log("❌ Driver Dashboard: Invalid session or no assignment found");return}}if(q.isConnected())console.log("✅ WebSocket already connected");else{console.log("🔌 Driver Dashboard: Connecting to WebSocket...");try{await q.connect()}catch(ge){console.warn("⚠️ WebSocket connection failed, will use API fallback:",ge)}}(te=q.socket)==null||te.on("connect",()=>{console.log("🔌 Driver Dashboard: Connected to WebSocket server")}),(w=q.socket)==null||w.on("disconnect",()=>{console.log("🔌 Driver Dashboard: Disconnected from WebSocket server")}),(P=q.socket)==null||P.on("error",ge=>{console.error("❌ Driver Dashboard: Socket error:",ge)}),(W=q.socket)==null||W.on("driver:authenticated",ge=>{console.log("✅ Driver Dashboard: Authentication successful:",ge),console.log("🚌 Bus Info received:",ge.busInfo),s(ge.busInfo),y(!0)}),(xe=q.socket)==null||xe.on("driver:authentication_failed",ge=>{console.error("❌ Driver Dashboard: Authentication failed:",ge)}),(De=q.socket)==null||De.on("driver:locationConfirmed",()=>{console.log("📍 Driver Dashboard: Location confirmed"),f(new Date().toLocaleTimeString()),h(ge=>ge+1)}),x.current=q.socket;const Ke=se.getCurrentDriverAssignment();Ke&&((F=q.socket)==null||F.emit("driver:connected",{driverId:Ke.driver_id,busId:Ke.bus_id,timestamp:new Date().toISOString()}));let Z=0;const ye=3,xt=5e3;T.current=setInterval(()=>{Z++,!o&&!D?(console.log(`🔄 Fallback attempt ${Z}/${ye}: Fetching bus info from API...`),R(G.user.id).then(ge=>{ge?(console.log("✅ Fallback API call successful"),T.current&&(clearInterval(T.current),T.current=null)):Z>=ye&&(console.log("❌ Max fallback attempts reached, stopping retries"),T.current&&(clearInterval(T.current),T.current=null))})):(console.log("✅ Bus info already set, canceling fallback timer"),T.current&&(clearInterval(T.current),T.current=null))},xt)}else console.log("❌ Driver Dashboard: No session found, redirecting to login"),t("/driver-login")}catch(G){console.error("❌ Driver Dashboard: Initialization error:",G),console.error("Failed to initialize driver data")}})(),()=>{clearInterval(Q),T.current&&(clearInterval(T.current),T.current=null),U.current=!1,q.socket&&(q.socket.off("connect"),q.socket.off("disconnect"),q.socket.off("error"),q.socket.off("driver:authenticated"),q.socket.off("driver:authentication_failed"),q.socket.off("driver:locationConfirmed")),console.log("🧹 Driver Dashboard: Cleanup completed")}},[t]),b.useEffect(()=>(L.current&&!v.current&&(console.log("🗺️ Initializing map..."),Y()),()=>{console.log("🗺️ Cleaning up map..."),A()}),[]);const Y=()=>{if(!L.current)return;const J=23.0225,Q=72.5714;v.current&&(v.current.remove(),v.current=null);try{v.current=new Oe.Map({container:L.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[Q,J],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,antialias:!0,failIfMajorPerformanceCaveat:!1,maxPitch:60,localIdeographFontFamily:"sans-serif",renderWorldCopies:!0});const S=W=>{console.warn("⚠️ WebGL context lost, attempting to restore..."),W instanceof WebGLContextEvent&&W.preventDefault(),setTimeout(()=>{try{v.current&&(v.current.resize(),console.log("✅ Attempted map context restoration"))}catch(xe){console.error("❌ Failed to restore map context:",xe)}},1e3)};O.current.webglcontextlost=S,v.current.on("webglcontextlost",S);const H=()=>{if(console.log("✅ WebGL context restored"),v.current&&E.current){v.current.resize();const W=E.current.getLngLat();E.current.setLngLat(W)}};O.current.webglcontextrestored=H,v.current.on("webglcontextrestored",H);const te=document.createElement("div");te.className="driver-marker",te.innerHTML=`
        <div class="driver-marker-content">
          <div style="font-size: 16px;">🚌</div>
        </div>
      `,E.current=new Oe.Marker({element:te,anchor:"center"}).setLngLat([Q,J]).addTo(v.current);const w=W=>{console.error("❌ Map error:",W)};O.current.error=w,v.current.on("error",w);const P=()=>{console.log("✅ Map loaded successfully")};O.current.load=P,v.current.on("load",P)}catch(S){console.error("❌ Error initializing map:",S);try{if(console.log("🔄 Attempting fallback map initialization..."),L.current&&!v.current){v.current=new Oe.Map({container:L.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[Q,J],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0});const H=document.createElement("div");H.className="driver-marker",H.innerHTML="<div>🚌</div>",E.current=new Oe.Marker({element:H}).setLngLat([Q,J]).addTo(v.current),console.log("✅ Fallback map initialization successful")}}catch(H){console.error("❌ Fallback map initialization failed:",H)}}},M=(J,Q)=>{if(!v.current||!E.current)return;const S=[Q,J];E.current.setLngLat(S),v.current.flyTo({center:S,duration:1e3})},I=async()=>{if(!navigator.geolocation){c("Geolocation is not supported by this browser");return}const Q={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{j.current=navigator.geolocation.watchPosition(S=>{if(l(S),c(null),v.current&&E.current&&M(S.coords.latitude,S.coords.longitude),q.socket&&q.isConnected()){const H={driverId:(o==null?void 0:o.driver_id)||"",latitude:S.coords.latitude,longitude:S.coords.longitude,timestamp:new Date().toISOString(),speed:S.coords.speed||void 0,heading:S.coords.heading||void 0};q.socket.emit("driver:locationUpdate",H),f(new Date().toLocaleTimeString()),h(te=>te+1)}},S=>{console.error("❌ Location error:",S);let H="";switch(S.code){case S.PERMISSION_DENIED:H="Location permission denied. Please enable location access.";break;case S.POSITION_UNAVAILABLE:H="Location information is unavailable.";break;case S.TIMEOUT:H="Location request timed out.";break;default:H="An unknown error occurred."}c(H),r(!1)},Q),r(!0)}catch(S){console.error("❌ Error starting location tracking:",S),c("Failed to start location tracking")}},C=()=>{j.current&&(navigator.geolocation.clearWatch(j.current),j.current=null),r(!1)},A=()=>{try{v.current&&(O.current.webglcontextlost&&v.current.off("webglcontextlost",O.current.webglcontextlost),O.current.webglcontextrestored&&v.current.off("webglcontextrestored",O.current.webglcontextrestored),O.current.error&&v.current.off("error",O.current.error),O.current.load&&v.current.off("load",O.current.load),O.current={},v.current.remove(),v.current=null),E.current=null,console.log("🗺️ Map cleanup completed")}catch(J){console.error("❌ Error during map cleanup:",J)}},R=async J=>{var Q;try{console.log("🔄 Fetching bus info for user:",J);const{data:{session:S}}=await ie.auth.getSession();if(!(S!=null&&S.access_token))return console.error("❌ No access token available for API call"),!1;const H=await fetch(`${we.api.url}/buses?driver_id=${J}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},signal:AbortSignal.timeout(1e4)});if(H.ok){const te=await H.json();if(console.log("✅ Bus info from API:",te),te.success&&te.data&&Array.isArray(te.data)&&te.data.length>0){const w=te.data[0];return s({bus_id:w.bus_id||w.id,bus_number:w.bus_number||w.number_plate||w.code,route_id:w.route_id||"",route_name:w.route_name||"Route TBD",driver_id:w.driver_id||w.assigned_driver_id,driver_name:w.driver_name||w.driver_full_name||"Driver TBD"}),y(!0),!0}else return(Q=te.data)!=null&&Q.busInfo?(s(te.data.busInfo),y(!0),!0):te.busInfo?(s(te.busInfo),y(!0),!0):(console.error("❌ No bus info in response:",te),!1)}else{const te=await H.text();return console.error("❌ Failed to fetch bus info from API:",H.status,te),console.error(`API Error: ${H.status} - ${te}`),!1}}catch(S){return console.error("❌ Error fetching bus info from API:",S),!1}},fe=()=>{q.disconnect(),x.current=null},Re=async()=>{try{C(),fe(),A(),await ie.auth.signOut()}catch(J){console.error("❌ Sign out error:",J)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"card-glass p-6 mb-6",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:738,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:744,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:742,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[e.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:751,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:749,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",e.jsxDEV("span",{className:"font-semibold text-white",children:o==null?void 0:o.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:757,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:755,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:748,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:741,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:737,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:async()=>{var Q;const{data:{session:J}}=await ie.auth.getSession();(Q=J==null?void 0:J.user)!=null&&Q.id&&(console.log("🔄 Manual refresh: Fetching bus info..."),R(J.user.id))},className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:765,columnNumber:15},void 0),e.jsxDEV("button",{onClick:Re,className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:779,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:764,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:736,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:735,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${k==="connected"?"bg-green-500":k==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:794,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:804,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:k==="connected"?"Connected":k==="connecting"?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:805,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:803,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:793,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:792,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${n?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:819,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:823,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:n?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:826,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:822,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:817,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:836,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:837,columnNumber:15},void 0),u&&e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",u]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:839,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:835,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:834,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-4",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${a?"bg-red-500":i?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:849,columnNumber:15},void 0),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:853,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:a?"Error":i?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:854,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:852,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:848,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:847,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:790,columnNumber:9},void 0),e.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:868,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:n?e.jsxDEV("button",{onClick:C,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:894,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:I,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:874,columnNumber:17},void 0),a&&e.jsxDEV("button",{onClick:()=>{c(null),I()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:882,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:873,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:871,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:867,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:908,columnNumber:13},void 0),e.jsxDEV("div",{ref:L,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:911,columnNumber:13},void 0),a&&e.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[e.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:919,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:923,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[e.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:929,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:934,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:933,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:938,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:937,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:942,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:941,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:946,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:945,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:950,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:949,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:954,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:953,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:932,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:928,columnNumber:19},void 0),e.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[e.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:962,columnNumber:21},void 0),e.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:967,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:966,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:971,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:970,columnNumber:23},void 0),e.jsxDEV("li",{children:["• ",e.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:975,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:974,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:965,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:961,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[e.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:981,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>{const J=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(Q=>{const S=`✅ Location Test Successful!

Latitude: ${Q.coords.latitude}
Longitude: ${Q.coords.longitude}
Accuracy: ${Q.coords.accuracy}m
Device: ${J?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(S),c(null)},Q=>{const S=`❌ Location Test Failed

Error Code: ${Q.code}
Error Message: ${Q.message}
Device: ${J?"Mobile":"Desktop"}

Please check your location permissions.`;alert(S)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:988,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:922,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:918,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:907,columnNumber:11},void 0),e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1042,columnNumber:13},void 0),i?e.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1049,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1050,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1048,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1056,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:i.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1057,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1055,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1062,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:i.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1063,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1061,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1068,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(be=i.coords.accuracy)==null?void 0:be.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1069,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1067,columnNumber:19},void 0),i.coords.speed&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1075,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(i.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1076,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1074,columnNumber:21},void 0),i.coords.heading&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1083,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[i.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1084,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1082,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1090,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1091,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1089,columnNumber:19},void 0),u&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1097,columnNumber:23},void 0),e.jsxDEV("span",{className:"text-white font-medium text-sm",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1096,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1106,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(i.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1107,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1105,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1054,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1046,columnNumber:15},void 0):e.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[e.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1115,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1116,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1119,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1114,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1126,columnNumber:15},void 0),e.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[e.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1130,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1133,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1134,columnNumber:17},void 0),e.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1137,columnNumber:17},void 0),e.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1129,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1125,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1041,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:905,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:733,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:732,columnNumber:5},void 0)},Ro=we.api.url;class To{async makeRequest(n,r={}){let o;try{const s=se.getAccessToken();if(console.log("🔑 Token check for",n,":",s?"Token exists":"No token"),!s)throw console.error("❌ No access token available for",n),new Error("No access token available");const i=new AbortController;o=setTimeout(()=>i.abort(),15e3);const l=Ro||we.api.url,a=await fetch(`${l}/admin${n}`,{...r,signal:i.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`,...r.headers}}),c=await a.json();if(o&&clearTimeout(o),!a.ok)throw a.status===429?new Error("Rate limit exceeded. Please wait a moment and try again."):a.status===401?new Error("Authentication required. Please log in again."):a.status===403?new Error("Access denied. You do not have permission for this action."):a.status===404?new Error("Resource not found."):a.status===409?new Error(c.message||"Resource already exists"):a.status>=500?new Error("Server error. Please try again later."):new Error(c.message||c.error||"Request failed");return c}catch(s){return o&&clearTimeout(o),console.error(`❌ API request failed for ${n}:`,s),{success:!1,error:s instanceof Error?s.message:"Request failed"}}}async getAnalytics(){return this.makeRequest("/analytics")}async getSystemHealth(){return this.makeRequest("/health")}async getAllBuses(){var r;console.log("🚌 Fetching all buses...");const n=await this.makeRequest("/buses");return console.log("🚌 Buses result:",n.success?`${((r=n.data)==null?void 0:r.length)||0} buses`:n.error),n}async getBusById(n){return this.makeRequest(`/buses/${n}`)}async createBus(n){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(n)})}async updateBus(n,r){return this.makeRequest(`/buses/${n}`,{method:"PUT",body:JSON.stringify(r)})}async deleteBus(n){return this.makeRequest(`/buses/${n}`,{method:"DELETE"})}async getAllDrivers(){var r;console.log("👨‍💼 Fetching all drivers...");const n=await this.makeRequest("/drivers");return console.log("👨‍💼 Drivers result:",n.success?`${((r=n.data)==null?void 0:r.length)||0} drivers`:n.error),n}async getAssignedDrivers(){var r;console.log("🚌 Fetching assigned drivers...");const n=await this.makeRequest("/assigned-drivers");return console.log("🚌 Assigned drivers result:",n.success?`${((r=n.data)==null?void 0:r.length)||0} assigned drivers`:n.error),n}async getDriverById(n){return this.makeRequest(`/drivers/${n}`)}async assignDriverToBus(n,r){return this.makeRequest(`/drivers/${n}/assign-bus`,{method:"POST",body:JSON.stringify({busId:r})})}async unassignDriverFromBus(n){return this.makeRequest(`/drivers/${n}/unassign-bus`,{method:"POST"})}async createDriver(n){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(n)})}async updateDriver(n,r){return this.makeRequest(`/drivers/${n}`,{method:"PUT",body:JSON.stringify(r)})}async deleteDriver(n){return this.makeRequest(`/drivers/${n}`,{method:"DELETE"})}async getAllRoutes(){var r;console.log("🛣️ Fetching all routes...");const n=await this.makeRequest("/routes");return console.log("🛣️ Routes result:",n.success?`${((r=n.data)==null?void 0:r.length)||0} routes`:n.error),n}async getRouteById(n){return this.makeRequest(`/routes/${n}`)}async createRoute(n){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(n)})}async updateRoute(n,r){return this.makeRequest(`/routes/${n}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRoute(n){return this.makeRequest(`/routes/${n}`,{method:"DELETE"})}}const Ne=new To,nn=we.api.url;class rn{static async makeRequest(n,r={}){let o=se.getAccessToken();if(!o&&se.isAuthenticated()){console.log("🔄 No token found but user is authenticated, attempting to refresh session...");const l=await se.refreshSession();if(l.success)o=se.getAccessToken(),console.log("✅ Session refreshed, new token obtained");else throw console.error("❌ Failed to refresh session:",l.error),new Error("Authentication required")}const s={"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},i=nn||we.api.url;return fetch(`${i}/storage${n}`,{...r,headers:{...s,...r.headers}})}static async uploadBusImage(n,r){try{console.log("🔐 Getting access token...");const o=se.getAccessToken();if(!o)return console.error("❌ No access token available"),{success:!1,error:"Authentication required"};console.log("✅ Access token obtained");const s=new FormData;s.append("image",r),s.append("busId",n);const i=nn||we.api.url;console.log("📤 Sending request to:",`${i}/storage/upload/bus-image`),console.log("📋 FormData contents:",{busId:n,fileName:r.name,fileSize:r.size,fileType:r.type});const l=await fetch(`${i}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(console.log("📥 Response status:",l.status),console.log("📥 Response headers:",Object.fromEntries(l.headers.entries())),!l.ok){const c=await l.json();return console.error("❌ Upload failed:",c),{success:!1,error:c.error||"Upload failed"}}const a=await l.json();return console.log("✅ Upload successful:",a),{success:!0,url:a.url,fileName:a.fileName}}catch(o){return console.error("❌ Upload bus image error:",o),{success:!1,error:"Network error during upload"}}}static async uploadDriverPhoto(n,r){try{const o=se.getAccessToken();if(!o)return{success:!1,error:"Authentication required"};const s=new FormData;s.append("photo",r),s.append("driverId",n);const i=nn||we.api.url,l=await fetch(`${i}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(!l.ok)return{success:!1,error:(await l.json()).error||"Upload failed"};const a=await l.json();return{success:!0,url:a.url,fileName:a.fileName}}catch(o){return console.error("Upload driver photo error:",o),{success:!1,error:"Network error during upload"}}}static async uploadRouteMap(n,r){try{const o=se.getAccessToken();if(!o)return{success:!1,error:"Authentication required"};const s=new FormData;s.append("map",r),s.append("routeId",n);const i=nn||we.api.url,l=await fetch(`${i}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(!l.ok)return{success:!1,error:(await l.json()).error||"Upload failed"};const a=await l.json();return{success:!0,url:a.url,fileName:a.fileName}}catch(o){return console.error("Upload route map error:",o),{success:!1,error:"Network error during upload"}}}static async getSignedUrl(n,r){try{const o=await this.makeRequest(`/signed-url/${n}/${r}`);if(!o.ok)return{success:!1,error:(await o.json()).error||"Failed to get signed URL"};const s=await o.json();return{success:!0,signedUrl:s.signedUrl,expiresIn:s.expiresIn}}catch(o){return console.error("Get signed URL error:",o),{success:!1,error:"Network error"}}}static async deleteFile(n,r,o){try{const s=await this.makeRequest(`/delete/${n}/${r}`,{method:"DELETE",body:JSON.stringify({fileUrl:o})});return s.ok?{success:!0}:{success:!1,error:(await s.json()).error||"Delete failed"}}catch(s){return console.error("Delete file error:",s),{success:!1,error:"Network error during deletion"}}}static async getFileInfo(n,r){try{const o=await this.makeRequest(`/info/${n}/${r}`);if(!o.ok)return{success:!1,hasFile:!1,error:(await o.json()).error||"Failed to get file info"};const s=await o.json();return{success:!0,hasFile:s.hasFile,url:s.url,info:s.info}}catch(o){return console.error("Get file info error:",o),{success:!1,hasFile:!1,error:"Network error"}}}static async listFiles(n){try{const r=await this.makeRequest(`/list/${n}`);return r.ok?{success:!0,files:(await r.json()).files}:{success:!1,error:(await r.json()).error||"Failed to list files"}}catch(r){return console.error("List files error:",r),{success:!1,error:"Network error"}}}static validateFile(n,r,o){return n?r.includes(n.type)?n.size>o?{isValid:!1,error:`File too large. Maximum size: ${o/(1024*1024)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${r.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(n){const r=["image/jpeg","image/jpg","image/png","image/webp"];return this.validateFile(n,r,5242880)}static validateDocument(n){const r=["application/pdf","image/jpeg","image/jpg","image/png"];return this.validateFile(n,r,10485760)}}function Fo(){const[t,n]=b.useState("bus"),[r,o]=b.useState([]),[s,i]=b.useState([]),[l,a]=b.useState([]),[c,u]=b.useState(!0),[f,g]=b.useState(!1),[h,D]=b.useState(null),[y,k]=b.useState(""),[B,x]=b.useState(null),[j,v]=b.useState(null);b.useEffect(()=>{L()},[]);const L=async()=>{u(!0),x(null);try{const[C,A,R]=await Promise.all([Ne.getAllBuses(),Ne.getAllDrivers(),Ne.getAllRoutes()]);if(C.success&&C.data&&o(C.data),A.success&&A.data){const fe=new Map;A.data.forEach(be=>{const J=be.id;if(!fe.has(J))fe.set(J,be);else{const Q=fe.get(J);(!Q.email&&be.email||Q.email&&be.email&&!Q.first_name&&be.first_name)&&fe.set(J,be)}});const Re=Array.from(fe.values());i(Re)}R.success&&R.data&&a(R.data)}catch(C){x("Failed to load data"),console.error("❌ Data loading error:",C)}finally{u(!1)}},E=C=>{var R;const A=(R=C.target.files)==null?void 0:R[0];A&&(D(A),x(null))},U=async()=>{if(!h||!y){x("Please select a file and an item");return}console.log("🚀 Starting upload...",{activeTab:t,selectedItem:y,fileName:h.name,fileSize:h.size,fileType:h.type}),g(!0),x(null),v(null);try{let C;switch(t){case"bus":console.log("📤 Uploading bus image..."),C=await rn.uploadBusImage(y,h);break;case"driver":console.log("📤 Uploading driver photo..."),C=await rn.uploadDriverPhoto(y,h);break;case"route":console.log("📤 Uploading route map..."),C=await rn.uploadRouteMap(y,h);break}console.log("📥 Upload result:",C),C.success?(v("File uploaded successfully!"),D(null),k(""),L()):(x(C.error||"Upload failed"),console.error("❌ Upload failed:",C.error))}catch(C){x("Upload failed. Please try again."),console.error("❌ Upload error:",C)}finally{g(!1)}},T=async(C,A)=>{if(confirm("Are you sure you want to delete this file?"))try{const R=await rn.deleteFile(t,C,A);R.success?(v("File deleted successfully!"),L()):x(R.error||"Delete failed")}catch(R){x("Delete failed. Please try again."),console.error("❌ Delete error:",R)}},O=()=>{switch(t){case"bus":return r;case"driver":return s;case"route":return l;default:return[]}},Y=C=>{switch(t){case"bus":return C.number_plate;case"driver":{const A=C;return`${A.first_name} ${A.last_name}`}case"route":return C.name;default:return"Unknown"}},M=C=>{let A=null;switch(t){case"bus":A=C.bus_image_url||null;break;case"driver":A=C.profile_photo_url||null;break;case"route":A=C.route_map_url||null;break;default:return null}return A?A.startsWith("http")?A:A.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${A}`:A:null},I=()=>{switch(t){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return c?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),e.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),B&&e.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxDEV("p",{className:"text-red-700",children:B},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),j&&e.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxDEV("p",{className:"text-green-700",children:j},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),e.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(C=>e.jsxDEV("button",{onClick:()=>n(C.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${t===C.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:C.name},C.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",I()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),e.jsxDEV("input",{type:"file",onChange:E,accept:t==="route"?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),h&&e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",h.name," (",(h.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ",t==="bus"?"Bus":t==="driver"?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),e.jsxDEV("select",{value:y,onChange:C=>k(C.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[e.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),O().map(C=>e.jsxDEV("option",{value:C.id||"",children:Y(C)},C.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-end",children:e.jsxDEV("button",{onClick:U,disabled:!h||!y||f,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:f?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",I()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),O().length===0?e.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):e.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:O().map(C=>{const A=M(C),R=Y(C);return e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:R},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),A?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"mb-3",children:t!=="route"?e.jsxDEV("img",{src:A,alt:R,className:"w-full h-32 object-cover rounded-md",onError:fe=>{fe.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):e.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>window.open(A,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>C.id&&T(C.id,A),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!C.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):e.jsxDEV("div",{className:"text-center py-4",children:[e.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},C.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const Ie={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},Oo=({onLocationSelect:t,onClose:n,title:r,defaultCenter:o=Ie.coordinates,searchPlaceholder:s="Search for a location..."})=>{const i=Xn.useRef(Math.random().toString(36).substr(2,9)),l=b.useRef(null),a=b.useRef(null),c=b.useRef(null),[u,f]=b.useState(""),[g,h]=b.useState(null),[D,y]=b.useState(!0),[k,B]=b.useState(null);b.useEffect(()=>{if(!(!l.current||a.current))return console.log(`🗺️ [${i.current}] Initializing map with center:`,o),console.log(`🗺️ [${i.current}] Ganpat University coordinates:`,Ie.coordinates),a.current=new Oe.Map({container:l.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:Ie.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),a.current.on("load",()=>{var E;console.log("🗺️ Map loaded, adding controls and marker");try{(E=a.current)==null||E.addControl(new Oe.NavigationControl),c.current=new Oe.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(o).addTo(a.current),a.current.flyTo({center:Ie.coordinates,zoom:12,duration:1e3}),h({name:Ie.name,coordinates:Ie.coordinates,address:Ie.address}),c.current.on("dragend",()=>{var T;const U=(T=c.current)==null?void 0:T.getLngLat();U&&x([U.lng,U.lat])}),console.log(`🗺️ [${i.current}] Map centered on ${Ie.name}`),y(!1)}catch(U){console.error("❌ Error setting up map:",U),B("Failed to initialize map"),y(!1)}}),a.current.on("error",E=>{console.error("❌ Map error:",E),B("Map failed to load"),y(!1)}),a.current.on("click",E=>{var T;const U=[E.lngLat.lng,E.lngLat.lat];(T=c.current)==null||T.setLngLat(U),x(U)}),a.current.on("webglcontextlost",()=>{console.warn("⚠️ WebGL context lost, attempting to restore...")}),a.current.on("webglcontextrestored",()=>{console.log("✅ WebGL context restored")}),()=>{if(a.current){console.log("🗺️ Cleaning up map instance");try{a.current.off("load",()=>{}),a.current.off("click",()=>{}),a.current.off("error",()=>{}),a.current.off("webglcontextlost",()=>{}),a.current.off("webglcontextrestored",()=>{}),c.current&&c.current.remove(),a.current.remove()}catch(E){console.warn("⚠️ Error during map cleanup:",E)}finally{a.current=null,c.current=null}}}},[o]);const x=async E=>{try{const T=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${E[1]}&lon=${E[0]}&zoom=18&addressdetails=1`)).json(),O={name:T.display_name.split(",")[0]||"Selected Location",coordinates:E,address:T.display_name};h(O)}catch(U){console.error("Error reverse geocoding:",U),h({name:"Selected Location",coordinates:E,address:`${E[1]}, ${E[0]}`})}},j=async()=>{var E;if(!(!u.trim()||!a.current))try{console.log("🔍 Searching for:",u);const T=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(u)}&limit=5&countrycodes=in`)).json();if(console.log("🔍 Search results:",T),T.length>0){const O=T[0],Y=[parseFloat(O.lon),parseFloat(O.lat)];console.log("🗺️ Flying to coordinates:",Y),a.current.flyTo({center:Y,zoom:15}),(E=c.current)==null||E.setLngLat(Y);const M={name:O.display_name.split(",")[0]||u,coordinates:Y,address:O.display_name};h(M)}else console.log("🔍 No search results found")}catch(U){console.error("❌ Error searching location:",U)}},v=()=>{g&&(t(g),n())},L=E=>{E.key==="Enter"&&j()};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:r},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),e.jsxDEV("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:e.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-4 border-b",children:[e.jsxDEV("div",{className:"flex gap-2 mb-2",children:[e.jsxDEV("input",{type:"text",value:u,onChange:E=>f(E.target.value),onKeyPress:L,placeholder:s,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex gap-2",children:e.jsxDEV("button",{onClick:()=>{var E;a.current&&(console.log("🏫 Resetting to Ganpat University at coordinates:",Ie.coordinates),a.current.flyTo({center:Ie.coordinates,zoom:12}),(E=c.current)==null||E.setLngLat(Ie.coordinates),h({name:Ie.name,coordinates:Ie.coordinates,address:Ie.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 relative",children:[D&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),k&&e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",k]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{B(null),y(!0),a.current&&(a.current.remove(),a.current=null,c.current=null);const E=l.current;E&&(E.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),e.jsxDEV("div",{ref:l,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),g&&e.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-700 font-medium",children:g.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),g.address&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:g.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",g.coordinates[1].toFixed(6),","," ",g.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:v,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),e.jsxDEV("button",{onClick:n,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function Bo(){const[t,n]=b.useState("buses"),[r,o]=b.useState(!1),[s,i]=b.useState(null),[l,a]=b.useState(null),[c,u]=b.useState([]),[f,g]=b.useState([]),[h,D]=b.useState([]),[y,k]=b.useState([]),[B,x]=b.useState(!1),[j,v]=b.useState(!1),[L,E]=b.useState(!1),[U,T]=b.useState(!1),[O,Y]=b.useState(!1),[M,I]=b.useState(!1),[C,A]=b.useState(null),[R,fe]=b.useState(null),[Re,be]=b.useState(!1),[J,Q]=b.useState(!1),[S,H]=b.useState({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),[te,w]=b.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[P,W]=b.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[xe,De]=b.useState(!1),[F,G]=b.useState(!1),[ve,Ke]=b.useState(""),[Z,ye]=b.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[xt,ge]=b.useState(!1),[Ce,Ht]=b.useState("destination"),[Te,Ze]=b.useState(null),[Be,zt]=b.useState(null),He=b.useCallback(async()=>{o(!0),i(null);try{const[m,p,_]=await Promise.all([Ne.getAllBuses(),Ne.getAllDrivers(),Ne.getAllRoutes()]);if(m.success&&m.data&&u(m.data),p.success&&p.data){const z=new Map;p.data.forEach(ce=>{const Ee=ce.id;if(!z.has(Ee))z.set(Ee,ce);else{const Je=z.get(Ee);(!Je.email&&ce.email||Je.email&&ce.email&&!Je.first_name&&ce.first_name)&&z.set(Ee,ce)}});const de=Array.from(z.values());g(de)}_.success&&_.data&&k(_.data),await Pn(),(!m.success||!p.success||!_.success)&&i("Failed to load some data")}catch(m){i("An error occurred while loading data"),console.error("❌ Data loading error:",m)}finally{o(!1)}},[]);b.useEffect(()=>{He()},[He]);const Pn=async()=>{try{const m=await Ne.getAssignedDrivers();if(m.success&&m.data){const p=new Map;m.data.forEach(z=>{const de=z.driver_id;if(!p.has(de))p.set(de,z);else{const ce=p.get(de);(!ce.driver_email&&z.driver_email||ce.driver_email&&z.driver_email&&!ce.driver_name&&z.driver_name)&&p.set(de,z)}});const _=Array.from(p.values());D(_)}else console.warn("⚠️ Failed to load assigned drivers:",m.error),D([])}catch(m){console.warn("⚠️ Failed to load assigned drivers:",m),D([])}},wn=async m=>{if(m.preventDefault(),o(!0),i(null),c.find(_=>_.code===S.code||_.number_plate===S.number_plate)){i(`Bus with code '${S.code}' or number plate '${S.number_plate}' already exists`),o(!1);return}try{const _=await Ne.createBus(S);_.success&&_.data?(u([...c,_.data]),H({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),x(!1),a("Bus created successfully!"),setTimeout(()=>a(null),3e3)):i(_.error||"Failed to create bus")}catch{i("An error occurred while creating bus")}finally{o(!1)}},qt=async m=>{if(confirm("Are you sure you want to delete this bus?")){o(!0),i(null);try{const p=await Ne.deleteBus(m);p.success?(u(c.filter(_=>_.id!==m)),a("Bus deleted successfully!"),setTimeout(()=>a(null),3e3)):i(p.error||"Failed to delete bus")}catch{i("An error occurred while deleting bus")}finally{o(!1)}}},Wt=async(m,p)=>{o(!0),i(null);try{const _=await Ne.updateBus(m,{route_id:p});_.success&&_.data?(u(c.map(z=>z.id===m?{...z,route_id:p}:z)),a("Route assigned to bus successfully!"),setTimeout(()=>a(null),3e3)):i(_.error||"Failed to assign route to bus")}catch{i("An error occurred while assigning route to bus")}finally{o(!1)}},Xe=async m=>{if(m.preventDefault(),o(!0),i(null),!P.email||!P.first_name||!P.last_name||!P.password){i("All fields are required: Email, First Name, Last Name, and Password"),o(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.email)){i("Please enter a valid email address"),o(!1);return}if(P.password!==P.confirm_password){i("Passwords do not match"),o(!1);return}if(P.password.length<6){i("Password must be at least 6 characters long"),o(!1);return}if(f.find(z=>z.email===P.email)){i("Driver with this email already exists"),o(!1);return}if(!r)try{const z={email:P.email,first_name:P.first_name,last_name:P.last_name,phone:P.phone,role:"driver",password:P.password},de=await Ne.createDriver(z);if(de.success&&de.data){const ce=await Ne.getAllDrivers();if(ce.success&&ce.data){const Ee=new Map;ce.data.forEach(ze=>{const et=ze.id;if(!Ee.has(et))Ee.set(et,ze);else{const d=Ee.get(et);(!d.email&&ze.email||d.email&&ze.email&&!d.first_name&&ze.first_name)&&Ee.set(et,ze)}});const Je=Array.from(Ee.values());g(Je)}W({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),De(!1),G(!1),E(!1),a(`Driver ${de.data.first_name} ${de.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>a(null),5e3)}else i(de.error||"Failed to create driver")}catch(z){i("An error occurred while creating driver"),console.error("❌ Error creating driver:",z)}finally{o(!1)}},Gt=async(m,p)=>{o(!0),i(null);try{const _=await Ne.assignDriverToBus(m,p);_.success&&_.data?(await He(),a("Bus assigned to driver successfully!"),setTimeout(()=>a(null),3e3)):i(_.error||"Failed to assign bus to driver")}catch{i("An error occurred while assigning bus to driver")}finally{o(!1)}},Kt=async m=>{if(confirm("Are you sure you want to unassign this driver?")){o(!0),i(null);try{const p=await Ne.unassignDriverFromBus(m);p.success?(await He(),a("Driver unassigned successfully!"),setTimeout(()=>a(null),3e3)):i(p.error||"Failed to unassign driver")}catch{i("An error occurred while unassigning driver")}finally{o(!1)}}},pt=async(m,p,_)=>{const z=`${p} ${_}`,de=`Are you sure you want to delete driver "${z}"?

This action will:
• Remove the driver from all database tables
• Delete their Supabase Auth account
• Unassign them from any buses
• This action cannot be undone!`;if(confirm(de)){o(!0),i(null);try{const ce=await Ne.deleteDriver(m);ce.success&&ce.data?(g(f.filter(Ee=>Ee.id!==m)),D(h.filter(Ee=>Ee.driver_id!==m)),a(`Driver "${z}" deleted successfully from all systems!`),setTimeout(()=>a(null),5e3)):i(ce.error||`Failed to delete driver "${z}"`)}catch(ce){i(`An error occurred while deleting driver "${z}"`),console.error("❌ Error deleting driver:",ce)}finally{o(!1)}}},vt=async m=>{if(m.preventDefault(),o(!0),i(null),!Z.name.trim()){i("Route name is required"),o(!1);return}if(!Z.city.trim()){i("City is required"),o(!1);return}if(!Z.description.trim()){i("Route description is required"),o(!1);return}try{const p={...Z,distance_km:parseFloat(Z.distance_km)||0,estimated_duration_minutes:parseInt(Z.estimated_duration_minutes)||0,custom_destination:Te==null?void 0:Te.name,custom_destination_coordinates:Te==null?void 0:Te.coordinates,custom_origin:Be==null?void 0:Be.name,custom_origin_coordinates:Be==null?void 0:Be.coordinates,bus_stops:[]},_=await Ne.createRoute(p);_.success&&_.data?(k([...y,_.data]),ye({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),Ze(null),zt(null),T(!1),a("Route created successfully!"),setTimeout(()=>a(null),3e3)):i(_.error||"Failed to create route")}catch{i("An error occurred while creating route")}finally{o(!1)}},Sn=async m=>{if(confirm("Are you sure you want to delete this route?")){o(!0),i(null);try{const p=await Ne.deleteRoute(m);p.success?(k(y.filter(_=>_.id!==m)),a("Route deleted successfully!"),setTimeout(()=>a(null),3e3)):i(p.error||"Failed to delete route")}catch{i("An error occurred while deleting route")}finally{o(!1)}}},Yt=m=>{if(!m)return"Not Assigned";const p=y.find(de=>de.id===m);if(!p)return"Unknown Route";const _=p.city||"Unknown City",z=p.destination||"Ganpat University";return`${_} → ${z}`},Jt=m=>{Ht(m),ge(!0)},Vn=m=>{Ce==="destination"?Ze(m):zt(m)},kn=m=>{if(!m)return"Not Assigned";const p=f.find(_=>_.id===m);return p?`${p.first_name} ${p.last_name}`:"Unknown Driver"},Qt=m=>m.driver_full_name?m.driver_full_name:m.driver_first_name&&m.driver_last_name?`${m.driver_first_name} ${m.driver_last_name}`:m.assigned_driver_id?kn(m.assigned_driver_id):"Not Assigned",An=m=>{if(!m)return"Not Assigned";const p=c.find(_=>_.id===m);return p?p.number_plate:"Unknown Bus"},Ct=m=>{A(m),be(!1),Y(!0)},Zt=m=>{A(m),H({code:m.code,number_plate:m.number_plate,capacity:m.capacity,model:m.model||"",year:m.year||new Date().getFullYear(),is_active:m.is_active}),be(!0),Y(!0)},Ye=m=>{fe(m),Q(!1),I(!0)},jt=m=>{fe(m),ye({name:m.name,description:m.description,distance_km:m.distance_km.toString(),estimated_duration_minutes:m.estimated_duration_minutes.toString(),is_active:m.is_active,city:m.city||""}),Q(!0),I(!0)},Dt=async m=>{if(m.preventDefault(),!!(C!=null&&C.id)){o(!0),i(null);try{const p=await Ne.updateBus(C.id,S);p.success&&p.data?(u(c.map(_=>_.id===C.id?p.data:_)),Y(!1),be(!1),A(null),a("Bus updated successfully!"),setTimeout(()=>a(null),3e3)):i(p.error||"Failed to update bus")}catch{i("An error occurred while updating bus")}finally{o(!1)}}},Xt=async m=>{if(m.preventDefault(),!!(R!=null&&R.id)){o(!0),i(null);try{const p={...Z,distance_km:parseFloat(Z.distance_km)||0,estimated_duration_minutes:parseInt(Z.estimated_duration_minutes)||0},_=await Ne.updateRoute(R.id,p);_.success&&_.data?(k(y.map(z=>z.id===R.id?_.data:z)),I(!1),Q(!1),fe(null),a("Route updated successfully!"),setTimeout(()=>a(null),3e3)):i(_.error||"Failed to update route")}catch{i("An error occurred while updating route")}finally{o(!1)}}};return r?e.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),e.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),e.jsxDEV("button",{onClick:He,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),l&&e.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:e.jsxDEV("p",{className:"text-green-800",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),s&&e.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxDEV("p",{className:"text-red-800",children:s},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[e.jsxDEV("button",{onClick:()=>n("buses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="buses"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🚌 Buses (",c.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>n("drivers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="drivers"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["👨‍💼 Drivers (",f.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>n("routes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="routes"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🗺️ Routes (",y.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),t==="buses"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:e.jsxDEV("button",{onClick:()=>x(!B),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:B?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),B&&e.jsxDEV("form",{onSubmit:wn,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.code,onChange:m=>H({...S,code:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.number_plate,onChange:m=>H({...S,number_plate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:S.capacity,onChange:m=>H({...S,capacity:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),e.jsxDEV("input",{type:"text",value:S.model,onChange:m=>H({...S,model:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),e.jsxDEV("input",{type:"number",value:S.year,onChange:m=>H({...S,year:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:S.is_active,onChange:m=>H({...S,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",m.capacity," | ",m.model," (",m.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:Qt(m)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_name||Yt(m.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_id?(()=>{const p=y.find(_=>_.id===m.route_id);return(p==null?void 0:p.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxDEV("div",{className:"flex flex-col space-y-2",children:[e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>Ct(m),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>Zt(m),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>qt(m.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),e.jsxDEV("select",{onChange:p=>Wt(m.id,p.target.value),value:m.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),y.map(p=>e.jsxDEV("option",{value:p.id,className:"text-gray-900",children:p.name},p.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),t==="drivers"&&e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>E(!L),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:L?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>v(!j),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:j?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),j&&e.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),e.jsxDEV("select",{required:!0,value:ve,onChange:m=>Ke(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),f.map(m=>e.jsxDEV("option",{value:m.id,className:"text-gray-900",children:[m.first_name," ",m.last_name," (",m.email,")"]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),f.length===0&&e.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),e.jsxDEV("select",{required:!0,value:te.assigned_bus_id||"",onChange:m=>w({...te,assigned_bus_id:m.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),c.map(m=>e.jsxDEV("option",{value:m.id,className:"text-gray-900",children:[m.number_plate," (",m.model||"Unknown Model",")"]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{v(!1),Ke(""),w({...te,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>Gt(ve,te.assigned_bus_id),disabled:r||!ve||!te.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),L&&e.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),e.jsxDEV("form",{onSubmit:Xe,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),e.jsxDEV("input",{type:"email",required:!0,value:P.email,onChange:m=>W({...P,email:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),e.jsxDEV("input",{type:"text",required:!0,value:P.first_name,onChange:m=>W({...P,first_name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),e.jsxDEV("input",{type:"text",required:!0,value:P.last_name,onChange:m=>W({...P,last_name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),e.jsxDEV("input",{type:"tel",value:P.phone,onChange:m=>W({...P,phone:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:xe?"text":"password",required:!0,value:P.password,onChange:m=>{console.log("Password input changed:",m.target.value),W({...P,password:m.target.value})},onFocus:m=>{console.log("Password field focused"),m.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>De(!xe),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:xe?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",P.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:F?"text":"password",required:!0,value:P.confirm_password,onChange:m=>{console.log("Confirm password input changed:",m.target.value),W({...P,confirm_password:m.target.value})},onFocus:m=>{console.log("Confirm password field focused"),m.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>G(!F),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:F?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[P.password!==P.confirm_password&&P.confirm_password.length>0&&e.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),P.password===P.confirm_password&&P.confirm_password.length>0&&e.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),e.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),e.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),e.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),e.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),e.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{E(!1),W({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),De(!1),G(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),e.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),e.jsxDEV("button",{onClick:async()=>{try{const m=await Ne.getAllDrivers();if(m.success&&m.data){const p=new Map;m.data.forEach(z=>{const de=z.id;if(!p.has(de))p.set(de,z);else{const ce=p.get(de);(!ce.email&&z.email||ce.email&&z.email&&!ce.first_name&&z.first_name)&&p.set(de,z)}});const _=Array.from(p.values());g(_)}else console.warn("⚠️ Manual refresh failed:",m.error)}catch(m){console.warn("⚠️ Manual refresh failed:",m)}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),f.length>0?e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.map(m=>e.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[e.jsxDEV("div",{className:"font-medium text-gray-900",children:[m.first_name," ",m.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),e.jsxDEV("div",{className:"text-sm text-gray-600",children:m.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",m.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):e.jsxDEV("div",{className:"text-center py-4",children:[e.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[m.first_name," ",m.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",m.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:An(m.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxDEV("select",{onChange:p=>Gt(m.id,p.target.value),value:m.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[e.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),c.map(p=>e.jsxDEV("option",{value:p.id,className:"text-gray-900",children:p.number_plate},p.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>pt(m.id,m.first_name,m.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:[h.length," driver",h.length!==1?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),h.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),e.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsxDEV("button",{onClick:()=>Kt(m.driver_id),disabled:r,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>{const p=f.find(_=>_.id===m.driver_id);p&&pt(p.id,p.first_name,p.last_name)},disabled:r,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},m.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),t==="routes"&&e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),e.jsxDEV("div",{className:"flex space-x-2",children:e.jsxDEV("button",{onClick:()=>T(!U),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:U?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),U&&e.jsxDEV("form",{onSubmit:vt,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:Z.name,onChange:m=>ye({...Z,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:Z.city,onChange:m=>ye({...Z,city:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Z.distance_km,onChange:m=>ye({...Z,distance_km:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:Z.estimated_duration_minutes,onChange:m=>ye({...Z,estimated_duration_minutes:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:Z.is_active,onChange:m=>ye({...Z,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),e.jsxDEV("textarea",{value:Z.description,onChange:m=>ye({...Z,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),Te&&e.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[e.jsxDEV("div",{className:"font-medium text-green-800",children:Te.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-green-600",children:Te.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>Jt("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),Be&&e.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[e.jsxDEV("div",{className:"font-medium text-blue-800",children:Be.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-blue-600",children:Be.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),e.jsxDEV("button",{type:"button",onClick:()=>Jt("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(m=>e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:m.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"text-sm text-gray-900",children:m.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxDEV("div",{className:"text-sm text-gray-900",children:[m.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),e.jsxDEV("div",{className:"text-sm text-gray-900",children:[m.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV("button",{onClick:()=>Ye(m),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>jt(m),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>Sn(m.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},m.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),xt&&e.jsxDEV(Oo,{onLocationSelect:Vn,onClose:()=>ge(!1),title:Ce==="destination"?"Select Destination":"Select Origin",searchPlaceholder:Ce==="destination"?"Search for destination...":"Search for origin..."},`map-selector-${Ce}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),O&&C&&e.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:Re?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{Y(!1),be(!1),A(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),Re?e.jsxDEV("form",{onSubmit:Dt,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.code,onChange:m=>H({...S,code:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:S.number_plate,onChange:m=>H({...S,number_plate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:S.capacity,onChange:m=>H({...S,capacity:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),e.jsxDEV("input",{type:"text",value:S.model,onChange:m=>H({...S,model:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),e.jsxDEV("input",{type:"number",value:S.year,onChange:m=>H({...S,year:parseInt(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:S.is_active,onChange:m=>H({...S,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>be(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[C.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:Qt(C)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:C.route_name||Yt(C.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsxDEV("button",{onClick:()=>be(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),M&&R&&e.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:J?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{I(!1),Q(!1),fe(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),J?e.jsxDEV("form",{onSubmit:Xt,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:Z.name,onChange:m=>ye({...Z,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),e.jsxDEV("input",{type:"text",required:!0,value:Z.city,onChange:m=>ye({...Z,city:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Z.distance_km,onChange:m=>ye({...Z,distance_km:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),e.jsxDEV("input",{type:"number",required:!0,value:Z.estimated_duration_minutes,onChange:m=>ye({...Z,estimated_duration_minutes:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("input",{type:"checkbox",checked:Z.is_active,onChange:m=>ye({...Z,is_active:m.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),e.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),e.jsxDEV("textarea",{value:Z.description,onChange:m=>ye({...Z,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxDEV("button",{type:"button",onClick:()=>Q(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),e.jsxDEV("button",{type:"submit",disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:r?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:R.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:R.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[R.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:[R.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:R.created_at?new Date(R.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),R.description&&e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-900",children:R.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsxDEV("button",{onClick:()=>Q(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function Uo(){const[t,n]=b.useState(null),[r,o]=b.useState(null),[s,i]=b.useState(!0),[l,a]=b.useState(null),[c,u]=b.useState("overview");b.useEffect(()=>{f()},[]);const f=async()=>{i(!0),a(null);try{const[D,y]=await Promise.all([Ne.getAnalytics(),Ne.getSystemHealth()]);D.success&&D.data&&n(D.data),y.success&&y.data&&o(y.data),(!D.success||!y.success)&&a("Failed to load dashboard data")}catch(D){a("An error occurred while loading dashboard data"),console.error("❌ Dashboard data loading error:",D)}finally{i(!1)}},g=async()=>{try{await se.signOut(),window.location.href="/"}catch(D){console.error("❌ Sign out error:",D)}},h=se.getCurrentProfile();return s?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),e.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):l?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("div",{className:"card-glass p-8",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),e.jsxDEV("p",{className:"text-red-200 mb-4",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),e.jsxDEV("button",{onClick:f,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[e.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[e.jsxDEV("div",{className:"flex items-center",children:e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(h==null?void 0:h.first_name)||(h==null?void 0:h.full_name)||(h==null?void 0:h.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("button",{onClick:f,className:"btn-primary text-sm",disabled:s,children:s?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),e.jsxDEV("button",{onClick:g,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"border-b border-white/20",children:e.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[e.jsxDEV("button",{onClick:()=>u("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="overview"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="analytics"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("management"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="management"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:174,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>u("media"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="media"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:151,columnNumber:7},this),e.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[c==="overview"&&e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[e.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:214,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:220,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:219,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:218,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:206,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:242,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:252,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:251,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:234,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:232,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:274,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:280,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:265,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:264,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:e.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:302,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:21},this),e.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:e.jsxDEV("dl",{children:[e.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:312,columnNumber:25},this),e.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:311,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:310,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:292,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:13},this),t&&e.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:335,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[t.activeBuses,"/",t.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:334,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:343,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[t.activeRoutes,"/",t.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:342,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:351,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[t.activeDrivers,"/",t.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:350,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:329,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:364,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:369,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-white",children:[t.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:368,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:377,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:376,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:363,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:362,columnNumber:17},this),e.jsxDEV("div",{className:"card-glass overflow-hidden",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:390,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-white/70",children:r!=null&&r.timestamp?new Date(r.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:389,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:201,columnNumber:11},this),c==="analytics"&&t&&e.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:e.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[e.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:t.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:414,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[e.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:423,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:t.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:422,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[e.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:431,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:t.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:430,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[e.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:439,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[t.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:438,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:15},this),e.jsxDEV("div",{className:"card-glass p-6",children:[e.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:451,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:456,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${t.activeBuses/t.totalBuses*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:461,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:460,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[t.activeBuses,"/",t.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:455,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:474,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${t.activeRoutes/t.totalRoutes*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:478,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[t.activeRoutes,"/",t.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:473,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:492,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:e.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${t.activeDrivers/t.totalDrivers*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:497,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:496,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-white/70",children:[t.activeDrivers,"/",t.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:406,columnNumber:11},this),c==="management"&&e.jsxDEV(Bo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:516,columnNumber:40},this),c==="media"&&e.jsxDEV(Fo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:199,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}const dn=({children:t,className:n="",variant:r="default",hover:o=!0,glow:s=!1,onClick:i,delay:l=0})=>{const a="relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable",c={default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"},u=o?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",f=s?"hover:shadow-blue-500/20 hover:shadow-2xl":"",g=i?"cursor-pointer":"";return e.jsxDEV(X.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:l,ease:[.4,0,.2,1]},whileHover:o?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:i?{scale:.98}:{},onClick:i,className:`
        ${a}
        ${c[r]}
        ${u}
        ${f}
        ${g}
        ${n}
      `,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),s&&e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative z-10 p-6 space-stable",children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)},$o=({children:t,variant:n="primary",size:r="md",className:o="",onClick:s,disabled:i=!1,loading:l=!1,icon:a,iconPosition:c="left"})=>{const u="relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",f={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},g={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"};return e.jsxDEV(X.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,disabled:i||l,className:`
        ${u}
        ${f[r]}
        ${g[n]}
        hover:-translate-y-0.5 active:translate-y-0
        ${o}
      `,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),e.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[l&&e.jsxDEV(X.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),a&&c==="left"&&!l&&e.jsxDEV("span",{className:"flex-shrink-0",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV("span",{children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),a&&c==="right"&&!l&&e.jsxDEV("span",{className:"flex-shrink-0",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0)};function Ho({onLoginSuccess:t}){const n=vn(),{setTransition:r}=Cn(),[o,s]=b.useState(!1),[i,l]=b.useState(null),[a,c]=b.useState(""),[u,f]=b.useState(""),[g,h]=b.useState(""),[D,y]=b.useState(null);b.useEffect(()=>{setTimeout(async()=>{try{for(console.log("🔄 Attempting automatic session recovery...");!se.isInitialized();)await new Promise(E=>setTimeout(E,100));const L=await se.recoverSession();L.success&&se.isAdmin()?(console.log("✅ Session recovered, redirecting to admin panel"),B()):console.log("📝 Session recovery failed or user is not admin:",L.error)}catch(L){console.log("📝 No valid session to recover:",L)}},2e3)},[]);const k=async v=>{v.preventDefault(),s(!0),l(null),y(null);try{const L=new Promise((T,O)=>{setTimeout(()=>O(new Error("Login timeout")),5e3)}),E=se.signIn(a,u),U=await Promise.race([E,L]);U.success&&U.user?U.user.role==="admin"?(y("Login successful! Loading admin dashboard..."),setTimeout(()=>{B()},500)):(l("Access denied. Admin privileges required."),await se.signOut()):l(U.error||"Login failed. Please check your credentials.")}catch(L){console.error("❌ Login error:",L),L instanceof Error&&L.message==="Login timeout"?l("Login timed out. This might be due to slow network or profile loading. Please try again."):L instanceof Error&&L.message.includes("environment variables")?l("Configuration error. Please check your environment setup."):L instanceof Error&&L.message.includes("Profile loading timeout")?l("Profile loading is taking longer than expected. Please try again."):l("Network error. Please check your connection and try again.")}finally{s(!1)}},B=()=>{r("login-to-dashboard"),setTimeout(()=>{t?t():n("/admin-dashboard",{replace:!0})},500)},x=async()=>{s(!0),l(null);try{(await se.recoverSession()).success&&se.isAdmin()?(y("Session recovered! Redirecting..."),setTimeout(()=>{B()},1e3)):l("No valid session found. Please log in again.")}catch{l("Session recovery failed. Please log in again.")}finally{s(!1)}},j=async()=>{s(!0),l(null);try{await se.forceFreshLogin(),y("Session cleared. Please log in again with your credentials.")}catch{l("Failed to clear session.")}finally{s(!1)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:167,columnNumber:9},this),e.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((v,L)=>e.jsxDEV(X.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*5},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},L,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:174,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:172,columnNumber:7},this),e.jsxDEV(X.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"p-8 relative",children:[e.jsxDEV(X.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[e.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:217,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:225,columnNumber:13},this),e.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:11},this),e.jsxDEV(X.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:k,className:"space-y-6",children:[e.jsxDEV(X.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[e.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:247,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:v=>c(v.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:254,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV(X.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[e.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:276,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:v=>f(v.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:295,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV(X.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[e.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",e.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:309,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:305,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:g,onChange:v=>h(v.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:323,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:300,columnNumber:13},this),e.jsxDEV(mn,{children:o&&e.jsxDEV(X.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:e.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[e.jsxDEV(X.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:337,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:328,columnNumber:13},this),e.jsxDEV(mn,{children:i&&e.jsxDEV(X.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:363,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:362,columnNumber:21},this),e.jsxDEV("div",{className:"ml-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:i},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:361,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:355,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV(mn,{children:D&&e.jsxDEV(X.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:e.jsxDEV("div",{className:"flex",children:[e.jsxDEV("div",{className:"flex-shrink-0",children:e.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:396,columnNumber:21},this),e.jsxDEV("div",{className:"ml-3",children:[e.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:410,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:D},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:413,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:387,columnNumber:13},this),e.jsxDEV(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:e.jsxDEV($o,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:o,loading:o,icon:e.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:439,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:433,columnNumber:19},this),children:o?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:426,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:421,columnNumber:13},this),e.jsxDEV(X.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[e.jsxDEV("button",{type:"button",onClick:x,disabled:o,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:17},this),e.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:468,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:j,disabled:o,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:459,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[e.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:480,columnNumber:17},this),e.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:163,columnNumber:5},this)}const zo=({children:t,className:n=""})=>e.jsxDEV(X.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:n,children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),Rn=({children:t,className:n=""})=>e.jsxDEV(X.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:n,children:t},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),qo=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Bus Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"12",width:"40",height:"20",rx:"2",fill:"#3B82F6",stroke:"#1E40AF",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:20,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:32,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:42,columnNumber:5},void 0),e.jsxDEV("rect",{x:"26",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:52,columnNumber:5},void 0),e.jsxDEV("rect",{x:"36",y:"14",width:"6",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:62,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"22",width:"12",height:"8",rx:"1",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:74,columnNumber:5},void 0),e.jsxDEV("line",{x1:"24",y1:"22",x2:"24",y2:"30",stroke:"#F59E0B",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:84,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:87,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:95,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:96,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:104,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"8",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:107,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:108,columnNumber:5},void 0),e.jsxDEV("rect",{x:"2",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:111,columnNumber:5},void 0),e.jsxDEV("rect",{x:"44",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:112,columnNumber:5},void 0),e.jsxDEV("rect",{x:"28",y:"16",width:"8",height:"3",rx:"0.5",fill:"#FEF3C7",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:115,columnNumber:5},void 0),e.jsxDEV("text",{x:"32",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"GU"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:124,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:10,columnNumber:3},void 0),Wo=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Map Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"2",fill:"#F0FDF4",stroke:"#16A34A",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:148,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"16",x2:"40",y2:"16",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:160,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"24",x2:"40",y2:"24",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:161,columnNumber:5},void 0),e.jsxDEV("line",{x1:"8",y1:"32",x2:"40",y2:"32",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:162,columnNumber:5},void 0),e.jsxDEV("line",{x1:"16",y1:"12",x2:"16",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:163,columnNumber:5},void 0),e.jsxDEV("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:164,columnNumber:5},void 0),e.jsxDEV("line",{x1:"32",y1:"12",x2:"32",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:5},void 0),e.jsxDEV("rect",{x:"12",y:"20",width:"16",height:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:168,columnNumber:5},void 0),e.jsxDEV("rect",{x:"20",y:"12",width:"2",height:"16",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:177,columnNumber:5},void 0),e.jsxDEV("rect",{x:"10",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:188,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:197,columnNumber:5},void 0),e.jsxDEV("rect",{x:"22",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:206,columnNumber:5},void 0),e.jsxDEV("rect",{x:"28",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:215,columnNumber:5},void 0),e.jsxDEV("rect",{x:"34",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:224,columnNumber:5},void 0),e.jsxDEV("rect",{x:"11",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:235,columnNumber:5},void 0),e.jsxDEV("rect",{x:"13",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:236,columnNumber:5},void 0),e.jsxDEV("rect",{x:"17",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:237,columnNumber:5},void 0),e.jsxDEV("rect",{x:"19",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:238,columnNumber:5},void 0),e.jsxDEV("rect",{x:"23",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:239,columnNumber:5},void 0),e.jsxDEV("rect",{x:"25",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:240,columnNumber:5},void 0),e.jsxDEV("rect",{x:"29",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:241,columnNumber:5},void 0),e.jsxDEV("rect",{x:"31",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:242,columnNumber:5},void 0),e.jsxDEV("rect",{x:"35",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:243,columnNumber:5},void 0),e.jsxDEV("rect",{x:"37",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:244,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"22",r:"2",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:247,columnNumber:5},void 0),e.jsxDEV("path",{d:"M24 24 L26 28 L22 28 Z",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:255,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"22",r:"0.5",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:261,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"16",r:"3",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:264,columnNumber:5},void 0),e.jsxDEV("text",{x:"36",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"N"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:272,columnNumber:5},void 0),e.jsxDEV("text",{x:"36",y:"22",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"S"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:282,columnNumber:5},void 0),e.jsxDEV("text",{x:"33",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"W"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:292,columnNumber:5},void 0),e.jsxDEV("text",{x:"39",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"E"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:302,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:138,columnNumber:3},void 0),Go=()=>e.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Admin Icon",style:{display:"block",margin:"0 auto"},children:[e.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"3",fill:"#F8FAFC",stroke:"#8B5CF6",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:326,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"10",width:"36",height:"4",rx:"1",fill:"#8B5CF6",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:338,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"8",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:347,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"10",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:348,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"12",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:349,columnNumber:5},void 0),e.jsxDEV("rect",{x:"6",y:"16",width:"8",height:"20",rx:"1",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:352,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"18",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:364,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"22",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:365,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"26",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:366,columnNumber:5},void 0),e.jsxDEV("rect",{x:"8",y:"30",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:367,columnNumber:5},void 0),e.jsxDEV("rect",{x:"16",y:"16",width:"26",height:"20",rx:"1",fill:"#FFFFFF",stroke:"#DDD6FE",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:370,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:382,columnNumber:5},void 0),e.jsxDEV("rect",{x:"30",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:392,columnNumber:5},void 0),e.jsxDEV("rect",{x:"18",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:402,columnNumber:5},void 0),e.jsxDEV("rect",{x:"30",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:412,columnNumber:5},void 0),e.jsxDEV("path",{d:"M20 22 L22 21 L24 23 L26 20 L28 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:424,columnNumber:5},void 0),e.jsxDEV("path",{d:"M32 22 L34 21 L36 23 L38 20 L40 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:430,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"20",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:438,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"22",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:439,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"24",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:440,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"26",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:441,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"28",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:442,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"32",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:443,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"34",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:444,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"36",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:445,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"38",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:446,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:447,columnNumber:5},void 0),e.jsxDEV("rect",{x:"20",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:450,columnNumber:5},void 0),e.jsxDEV("rect",{x:"23",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:451,columnNumber:5},void 0),e.jsxDEV("rect",{x:"26",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:452,columnNumber:5},void 0),e.jsxDEV("rect",{x:"29",y:"31",width:"2",height:"1",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:453,columnNumber:5},void 0),e.jsxDEV("rect",{x:"32",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:454,columnNumber:5},void 0),e.jsxDEV("rect",{x:"35",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:455,columnNumber:5},void 0),e.jsxDEV("rect",{x:"38",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:456,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"12",r:"2",fill:"#8B5CF6",stroke:"#7C3AED",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:459,columnNumber:5},void 0),e.jsxDEV("circle",{cx:"40",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:467,columnNumber:5},void 0),e.jsxDEV("path",{d:"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12",stroke:"#7C3AED",strokeWidth:"0.5",strokeLinecap:"round"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:468,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:316,columnNumber:3},void 0),ir=()=>{const t=vn(),[n,r]=b.useState(!1);b.useEffect(()=>{const l=()=>{r(window.innerWidth<768)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const{setTransition:o}=Cn(),s=l=>{l.includes("login")?o("homepage-to-login"):l.includes("student")||l.includes("student-map")?o("homepage-to-map"):o("default"),setTimeout(()=>{t(l)},200)},i=n?8:20;return e.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:e.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[e.jsxDEV(X.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[e.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:528,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:527,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:532,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:535,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:521,columnNumber:9},void 0),e.jsxDEV(zo,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[e.jsxDEV(Rn,{children:e.jsxDEV(X.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:550,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/driver-login"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(qo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:560,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:559,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:562,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:565,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:558,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:572,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:571,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:552,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:542,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:541,columnNumber:11},void 0),e.jsxDEV(Rn,{children:e.jsxDEV(X.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:588,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/student-map"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(Wo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:598,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:597,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:600,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:603,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:596,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:610,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:609,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:590,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:580,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:579,columnNumber:11},void 0),e.jsxDEV(Rn,{children:e.jsxDEV(X.div,{whileHover:n?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:626,columnNumber:15},void 0),e.jsxDEV(dn,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>s("/admin-login"),children:[e.jsxDEV("div",{className:"text-center px-2",children:[e.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxDEV(Go,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:636,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:635,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:638,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:641,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:634,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:648,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:647,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:628,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:618,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:617,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:539,columnNumber:9},void 0),e.jsxDEV(X.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:e.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:662,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:656,columnNumber:9},void 0),e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(i)].map((l,a)=>e.jsxDEV(X.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},a,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:671,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:669,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:519,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:517,columnNumber:5},void 0)},Ko=Xn.lazy(()=>Nr(()=>import("./OptimizedStudentMapLazy-BmbrWh2r.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function Yo(){console.log("🚀 App component is rendering...");const{loading:t,error:n,setUser:r,setLoading:o,setError:s}=xo(),{data:i,isLoading:l,error:a}=Po();b.useEffect(()=>{const u=()=>{const f=se.getCurrentUser();r(f?{id:f.id,email:f.email||"",role:"student",created_at:f.created_at,updated_at:f.updated_at}:null),o(!1)};return se.onAuthStateChange(u),u(),()=>{se.removeAuthStateChangeListener()}},[r,o]),b.useEffect(()=>{s(a?"Failed to connect to backend":null)},[a,s]);const c=()=>e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:e.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:e.jsxDEV("div",{className:"card-glass p-8",children:[e.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV(_n,{to:"/driver-login",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:85,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:86,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV(_n,{to:"/student-map",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"🗺️"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:97,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:98,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:99,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV(_n,{to:"/admin-login",className:"card-glass p-6 text-center hover:scale-105 transition-transform duration-300",children:[e.jsxDEV("div",{className:"text-4xl mb-4",children:"⚙️"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:110,columnNumber:15},this),e.jsxDEV("p",{className:"text-white/70",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:111,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:105,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:79,columnNumber:11},this),i&&e.jsxDEV("div",{className:"mt-8 p-4 bg-green-500/20 border border-green-400/30 rounded-xl",children:e.jsxDEV("p",{className:"text-green-200 text-center",children:["✅ Backend Status: ",i.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:119,columnNumber:13},this),n&&e.jsxDEV("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-400/30 rounded-xl",children:e.jsxDEV("p",{className:"text-red-200 text-center",children:n},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:128,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:127,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:74,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:73,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:72,columnNumber:5},this);return t||l?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:141,columnNumber:11},this),e.jsxDEV("p",{className:"text-white",children:"Loading application..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:140,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:139,columnNumber:7},this):e.jsxDEV(ro,{children:e.jsxDEV(Vo,{children:e.jsxDEV(_o,{children:e.jsxDEV(oo,{children:[e.jsxDEV(qe,{path:"/",element:e.jsxDEV(ir,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV(qe,{path:"/legacy",element:e.jsxDEV(c,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:155,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:155,columnNumber:13},this),e.jsxDEV(qe,{path:"/driver-login",element:e.jsxDEV(Lo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:50},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:13},this),e.jsxDEV(qe,{path:"/driver-dashboard",element:e.jsxDEV(Io,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:13},this),e.jsxDEV(qe,{path:"/driver-interface",element:e.jsxDEV(So,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:160,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:160,columnNumber:13},this),e.jsxDEV(qe,{path:"/student-map",element:e.jsxDEV(b.Suspense,{fallback:e.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:169,columnNumber:25},this),e.jsxDEV("p",{className:"text-white text-lg",children:"Loading Student Map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:170,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:168,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:167,columnNumber:21},this),children:e.jsxDEV(Ko,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:174,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV(qe,{path:"/admin-login",element:e.jsxDEV(Ho,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV(qe,{path:"/admin-dashboard",element:e.jsxDEV(Uo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:181,columnNumber:53},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:181,columnNumber:13},this),e.jsxDEV(qe,{path:"*",element:e.jsxDEV(ir,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:184,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:152,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:151,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:150,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:149,columnNumber:5},this)}const Jo=()=>{{const t=console.warn;console.warn=(...n)=>{const r=n[0];typeof r=="string"&&(r.includes("React Router Future Flag Warning")||r.includes("v7_startTransition")||r.includes("v7_relativeSplatPath"))||typeof r=="string"&&r.includes("WebGL context was lost")||typeof r=="string"&&(r.includes("Firefox can't establish a connection")||r.includes("connection was interrupted while the page was loading"))||t.apply(console,n)}}},Qo=window.fetch;window.fetch=async function(t,n){if(typeof t=="string"&&(t.includes(we.api.url)||t.includes("localhost")))try{let r=se.getAccessToken();!r&&se.isAuthenticated()&&(console.log("🔄 No token found but user is authenticated, attempting to refresh session..."),(await se.refreshSession()).success&&(r=se.getAccessToken(),console.log("✅ Session refreshed, new token obtained"))),r&&(n=n||{},n.headers={...n.headers,Authorization:`Bearer ${r}`})}catch{console.log("🔓 Public access - authentication not available")}return Qo(t,n)};var K={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return lr(this.context.count)},getNextContextId(){return lr(this.context.count++)}};function lr(t){const n=String(t),r=n.length-1;return K.context.id+(r?String.fromCharCode(96+r):"")+n}function yt(t){K.context=t}var vr=!1,Zo=(t,n)=>t===n,gn=Symbol("solid-proxy"),Cr=typeof Proxy=="function",jr=Symbol("solid-track"),bn={equals:Zo},Dr=kr,Ge=1,hn=2,yr={owned:null,cleanups:null,context:null,owner:null},Tn={},re=null,Fn=null,Xo=null,le=null,Ae=null,We=null,jn=0;function rt(t,n){const r=le,o=re,s=t.length===0,i=n===void 0?o:n,l=s?yr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?t:()=>t(()=>Se(()=>Vt(l)));re=l,le=null;try{return $e(a,!0)}finally{le=r,re=o}}function ke(t,n){n=n?Object.assign({},bn,n):bn;const r={value:t,observers:null,observerSlots:null,comparator:n.equals||void 0},o=s=>(typeof s=="function"&&(s=s(r.value)),Vr(r,s));return[Sr.bind(r),o]}function es(t,n,r){const o=Dn(t,n,!0,Ge);Nt(o)}function ot(t,n,r){const o=Dn(t,n,!1,Ge);Nt(o)}function Er(t,n,r){Dr=cs;const o=Dn(t,n,!1,Ge);(!r||!r.render)&&(o.user=!0),We?We.push(o):Nt(o)}function Pe(t,n,r){r=r?Object.assign({},bn,r):bn;const o=Dn(t,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,Nt(o),Sr.bind(o)}function ts(t){return t&&typeof t=="object"&&"then"in t}function ns(t,n,r){let o,s,i;o=!0,s=t,i={};let l=null,a=Tn,c=null,u=!1,f="initialValue"in i,g=typeof o=="function"&&Pe(o);const h=new Set,[D,y]=(i.storage||ke)(i.initialValue),[k,B]=ke(void 0),[x,j]=ke(void 0,{equals:!1}),[v,L]=ke(f?"ready":"unresolved");K.context&&(c=K.getNextContextId(),i.ssrLoadFrom==="initial"?a=i.initialValue:K.load&&K.has(c)&&(a=K.load(c)));function E(M,I,C,A){return l===M&&(l=null,A!==void 0&&(f=!0),(M===a||I===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:I})),a=Tn,U(I,C)),I}function U(M,I){$e(()=>{I===void 0&&y(()=>M),L(I!==void 0?"errored":f?"ready":"unresolved"),B(I);for(const C of h.keys())C.decrement();h.clear()},!1)}function T(){const M=is,I=D(),C=k();if(C!==void 0&&!l)throw C;return le&&le.user,I}function O(M=!0){if(M!==!1&&u)return;u=!1;const I=g?g():o;if(I==null||I===!1){E(l,Se(D));return}let C;const A=a!==Tn?a:Se(()=>{try{return s(I,{value:D(),refetching:M})}catch(R){C=R}});if(C!==void 0){E(l,void 0,un(C),I);return}else if(!ts(A))return E(l,A,void 0,I),A;return l=A,"v"in A?(A.s===1?E(l,A.v,void 0,I):E(l,void 0,un(A.v),I),A):(u=!0,queueMicrotask(()=>u=!1),$e(()=>{L(f?"refreshing":"pending"),j()},!1),A.then(R=>E(A,R,void 0,I),R=>E(A,void 0,un(R),I)))}Object.defineProperties(T,{state:{get:()=>v()},error:{get:()=>k()},loading:{get(){const M=v();return M==="pending"||M==="refreshing"}},latest:{get(){if(!f)return T();const M=k();if(M&&!l)throw M;return D()}}});let Y=re;return g?es(()=>(Y=re,O(!1))):O(!1),[T,{refetch:M=>Pr(Y,()=>O(M)),mutate:y}]}function $i(t){return $e(t,!1)}function Se(t){if(le===null)return t();const n=le;le=null;try{return t()}finally{le=n}}function Hi(t,n,r){const o=Array.isArray(t);let s,i=r&&r.defer;return l=>{let a;if(o){a=Array(t.length);for(let u=0;u<t.length;u++)a[u]=t[u]()}else a=t();if(i)return i=!1,l;const c=Se(()=>n(a,s,l));return s=a,c}}function rs(t){Er(()=>Se(t))}function St(t){return re===null||(re.cleanups===null?re.cleanups=[t]:re.cleanups.push(t)),t}function ar(){return re}function Pr(t,n){const r=re,o=le;re=t,le=null;try{return $e(n,!0)}catch(s){er(s)}finally{re=r,le=o}}function os(t){const n=le,r=re;return Promise.resolve().then(()=>{le=n,re=r;let o;return $e(t,!1),le=re=null,o?o.done:void 0})}var[ss,zi]=ke(!1);function qi(){return[ss,os]}function Wi(t,n){const r=Symbol("context");return{id:r,Provider:ms(r),defaultValue:t}}function Gi(t){let n;return re&&re.context&&(n=re.context[t.id])!==void 0?n:t.defaultValue}function wr(t){const n=Pe(t),r=Pe(()=>Hn(n()));return r.toArray=()=>{const o=r();return Array.isArray(o)?o:o!=null?[o]:[]},r}var is;function Sr(){if(this.sources&&this.state)if(this.state===Ge)Nt(this);else{const t=Ae;Ae=null,$e(()=>xn(this),!1),Ae=t}if(le){const t=this.observers?this.observers.length:0;le.sources?(le.sources.push(this),le.sourceSlots.push(t)):(le.sources=[this],le.sourceSlots=[t]),this.observers?(this.observers.push(le),this.observerSlots.push(le.sources.length-1)):(this.observers=[le],this.observerSlots=[le.sources.length-1])}return this.value}function Vr(t,n,r){let o=t.value;return(!t.comparator||!t.comparator(o,n))&&(t.value=n,t.observers&&t.observers.length&&$e(()=>{for(let s=0;s<t.observers.length;s+=1){const i=t.observers[s],l=Fn&&Fn.running;l&&Fn.disposed.has(i),(l?!i.tState:!i.state)&&(i.pure?Ae.push(i):We.push(i),i.observers&&Ar(i)),l||(i.state=Ge)}if(Ae.length>1e6)throw Ae=[],new Error},!1)),n}function Nt(t){if(!t.fn)return;Vt(t);const n=jn;ls(t,t.value,n)}function ls(t,n,r){let o;const s=re,i=le;le=re=t;try{o=t.fn(n)}catch(l){return t.pure&&(t.state=Ge,t.owned&&t.owned.forEach(Vt),t.owned=null),t.updatedAt=r+1,er(l)}finally{le=i,re=s}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?Vr(t,o):t.value=o,t.updatedAt=r)}function Dn(t,n,r,o=Ge,s){const i={fn:t,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:re,context:re?re.context:null,pure:r};return re===null||re!==yr&&(re.owned?re.owned.push(i):re.owned=[i]),i}function Nn(t){if(t.state===0)return;if(t.state===hn)return xn(t);if(t.suspense&&Se(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<jn);)t.state&&n.push(t);for(let r=n.length-1;r>=0;r--)if(t=n[r],t.state===Ge)Nt(t);else if(t.state===hn){const o=Ae;Ae=null,$e(()=>xn(t,n[0]),!1),Ae=o}}function $e(t,n){if(Ae)return t();let r=!1;n||(Ae=[]),We?r=!0:We=[],jn++;try{const o=t();return as(r),o}catch(o){r||(We=null),Ae=null,er(o)}}function as(t){if(Ae&&(kr(Ae),Ae=null),t)return;const n=We;We=null,n.length&&$e(()=>Dr(n),!1)}function kr(t){for(let n=0;n<t.length;n++)Nn(t[n])}function cs(t){let n,r=0;for(n=0;n<t.length;n++){const o=t[n];o.user?t[r++]=o:Nn(o)}if(K.context){if(K.count){K.effects||(K.effects=[]),K.effects.push(...t.slice(0,r));return}yt()}for(K.effects&&(K.done||!K.count)&&(t=[...K.effects,...t],r+=K.effects.length,delete K.effects),n=0;n<r;n++)Nn(t[n])}function xn(t,n){t.state=0;for(let r=0;r<t.sources.length;r+=1){const o=t.sources[r];if(o.sources){const s=o.state;s===Ge?o!==n&&(!o.updatedAt||o.updatedAt<jn)&&Nn(o):s===hn&&xn(o,n)}}}function Ar(t){for(let n=0;n<t.observers.length;n+=1){const r=t.observers[n];r.state||(r.state=hn,r.pure?Ae.push(r):We.push(r),r.observers&&Ar(r))}}function Vt(t){let n;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),o=t.sourceSlots.pop(),s=r.observers;if(s&&s.length){const i=s.pop(),l=r.observerSlots.pop();o<s.length&&(i.sourceSlots[l]=o,s[o]=i,r.observerSlots[o]=l)}}if(t.tOwned){for(n=t.tOwned.length-1;n>=0;n--)Vt(t.tOwned[n]);delete t.tOwned}if(t.owned){for(n=t.owned.length-1;n>=0;n--)Vt(t.owned[n]);t.owned=null}if(t.cleanups){for(n=t.cleanups.length-1;n>=0;n--)t.cleanups[n]();t.cleanups=null}t.state=0}function un(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function er(t,n=re){throw un(t)}function Hn(t){if(typeof t=="function"&&!t.length)return Hn(t());if(Array.isArray(t)){const n=[];for(let r=0;r<t.length;r++){const o=Hn(t[r]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}return t}function ms(t,n){return function(o){let s;return ot(()=>s=Se(()=>(re.context={...re.context,[t]:o.value},wr(()=>o.children))),void 0),s}}var zn=Symbol("fallback");function pn(t){for(let n=0;n<t.length;n++)t[n]()}function ds(t,n,r={}){let o=[],s=[],i=[],l=0,a=n.length>1?[]:null;return St(()=>pn(i)),()=>{let c=t()||[],u=c.length,f,g;return c[jr],Se(()=>{let D,y,k,B,x,j,v,L,E;if(u===0)l!==0&&(pn(i),i=[],o=[],s=[],l=0,a&&(a=[])),r.fallback&&(o=[zn],s[0]=rt(U=>(i[0]=U,r.fallback())),l=1);else if(l===0){for(s=new Array(u),g=0;g<u;g++)o[g]=c[g],s[g]=rt(h);l=u}else{for(k=new Array(u),B=new Array(u),a&&(x=new Array(u)),j=0,v=Math.min(l,u);j<v&&o[j]===c[j];j++);for(v=l-1,L=u-1;v>=j&&L>=j&&o[v]===c[L];v--,L--)k[L]=s[v],B[L]=i[v],a&&(x[L]=a[v]);for(D=new Map,y=new Array(L+1),g=L;g>=j;g--)E=c[g],f=D.get(E),y[g]=f===void 0?-1:f,D.set(E,g);for(f=j;f<=v;f++)E=o[f],g=D.get(E),g!==void 0&&g!==-1?(k[g]=s[f],B[g]=i[f],a&&(x[g]=a[f]),g=y[g],D.set(E,g)):i[f]();for(g=j;g<u;g++)g in k?(s[g]=k[g],i[g]=B[g],a&&(a[g]=x[g],a[g](g))):s[g]=rt(h);s=s.slice(0,l=u),o=c.slice(0)}return s});function h(D){if(i[g]=D,a){const[y,k]=ke(g);return a[g]=k,n(c[g],y)}return n(c[g])}}}function us(t,n,r={}){let o=[],s=[],i=[],l=[],a=0,c;return St(()=>pn(i)),()=>{const u=t()||[],f=u.length;return u[jr],Se(()=>{if(f===0)return a!==0&&(pn(i),i=[],o=[],s=[],a=0,l=[]),r.fallback&&(o=[zn],s[0]=rt(h=>(i[0]=h,r.fallback())),a=1),s;for(o[0]===zn&&(i[0](),i=[],o=[],s=[],a=0),c=0;c<f;c++)c<o.length&&o[c]!==u[c]?l[c](()=>u[c]):c>=o.length&&(s[c]=rt(g));for(;c<o.length;c++)i[c]();return a=l.length=i.length=f,o=u.slice(0),s=s.slice(0,a)});function g(h){i[c]=h;const[D,y]=ke(u[c]);return l[c]=y,n(D,c)}}}function fs(t,n){return Se(()=>t(n||{}))}function on(){return!0}var qn={get(t,n,r){return n===gn?r:t.get(n)},has(t,n){return n===gn?!0:t.has(n)},set:on,deleteProperty:on,getOwnPropertyDescriptor(t,n){return{configurable:!0,enumerable:!0,get(){return t.get(n)},set:on,deleteProperty:on}},ownKeys(t){return t.keys()}};function On(t){return(t=typeof t=="function"?t():t)?t:{}}function gs(){for(let t=0,n=this.length;t<n;++t){const r=this[t]();if(r!==void 0)return r}}function bs(...t){let n=!1;for(let l=0;l<t.length;l++){const a=t[l];n=n||!!a&&gn in a,t[l]=typeof a=="function"?(n=!0,Pe(a)):a}if(Cr&&n)return new Proxy({get(l){for(let a=t.length-1;a>=0;a--){const c=On(t[a])[l];if(c!==void 0)return c}},has(l){for(let a=t.length-1;a>=0;a--)if(l in On(t[a]))return!0;return!1},keys(){const l=[];for(let a=0;a<t.length;a++)l.push(...Object.keys(On(t[a])));return[...new Set(l)]}},qn);const r={},o=Object.create(null);for(let l=t.length-1;l>=0;l--){const a=t[l];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let u=c.length-1;u>=0;u--){const f=c[u];if(f==="__proto__"||f==="constructor")continue;const g=Object.getOwnPropertyDescriptor(a,f);if(!o[f])o[f]=g.get?{enumerable:!0,configurable:!0,get:gs.bind(r[f]=[g.get.bind(a)])}:g.value!==void 0?g:void 0;else{const h=r[f];h&&(g.get?h.push(g.get.bind(a)):g.value!==void 0&&h.push(()=>g.value))}}}const s={},i=Object.keys(o);for(let l=i.length-1;l>=0;l--){const a=i[l],c=o[a];c&&c.get?Object.defineProperty(s,a,c):s[a]=c?c.value:void 0}return s}function hs(t,...n){if(Cr&&gn in t){const s=new Set(n.length>1?n.flat():n[0]),i=n.map(l=>new Proxy({get(a){return l.includes(a)?t[a]:void 0},has(a){return l.includes(a)&&a in t},keys(){return l.filter(a=>a in t)}},qn));return i.push(new Proxy({get(l){return s.has(l)?void 0:t[l]},has(l){return s.has(l)?!1:l in t},keys(){return Object.keys(t).filter(l=>!s.has(l))}},qn)),i}const r={},o=n.map(()=>({}));for(const s of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,s),l=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,c=0;for(const u of n)u.includes(s)&&(a=!0,l?o[c][s]=i.value:Object.defineProperty(o[c],s,i)),++c;a||(l?r[s]=i.value:Object.defineProperty(r,s,i))}return[...o,r]}function Ns(t){let n,r;const o=s=>{const i=K.context;if(i){const[a,c]=ke();K.count||(K.count=0),K.count++,(r||(r=t())).then(u=>{!K.done&&yt(i),K.count--,c(()=>u.default),yt()}),n=a}else if(!n){const[a]=ns(()=>(r||(r=t())).then(c=>c.default));n=a}let l;return Pe(()=>(l=n())?Se(()=>{if(!i||K.done)return l(s);const a=K.context;yt(i);const c=l(s);return yt(a),c}):"")};return o.preload=()=>r||((r=t()).then(s=>n=()=>s.default),r),o}var xs=0;function Ki(){return K.context?K.getNextContextId():`cl-${xs++}`}var Mr=t=>`Stale read from <${t}>.`;function Yi(t){const n="fallback"in t&&{fallback:()=>t.fallback};return Pe(ds(()=>t.each,t.children,n||void 0))}function Ji(t){const n="fallback"in t&&{fallback:()=>t.fallback};return Pe(us(()=>t.each,t.children,n||void 0))}function Qi(t){const n=t.keyed,r=Pe(()=>t.when,void 0,void 0),o=n?r:Pe(r,void 0,{equals:(s,i)=>!s==!i});return Pe(()=>{const s=o();if(s){const i=t.children;return typeof i=="function"&&i.length>0?Se(()=>i(n?s:()=>{if(!Se(o))throw Mr("Show");return r()})):i}return t.fallback},void 0,void 0)}function Zi(t){const n=wr(()=>t.children),r=Pe(()=>{const o=n(),s=Array.isArray(o)?o:[o];let i=()=>{};for(let l=0;l<s.length;l++){const a=l,c=s[l],u=i,f=Pe(()=>u()?void 0:c.when,void 0,void 0),g=c.keyed?f:Pe(f,void 0,{equals:(h,D)=>!h==!D});i=()=>u()||(g()?[a,f,c]:void 0)}return i});return Pe(()=>{const o=r()();if(!o)return t.fallback;const[s,i,l]=o,a=l.children;return typeof a=="function"&&a.length>0?Se(()=>a(l.keyed?i():()=>{var u;if(((u=Se(r)())==null?void 0:u[0])!==s)throw Mr("Match");return i()})):a},void 0,void 0)}function Xi(t){return t}var ps=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],vs=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...ps]),Cs=new Set(["innerHTML","textContent","innerText","children"]),js=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ds=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function ys(t,n){const r=Ds[t];return typeof r=="object"?r[n]?r.$:void 0:r}var Es=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Ps=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),ws={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},el=t=>Pe(()=>t());function Ss(t,n,r){let o=r.length,s=n.length,i=o,l=0,a=0,c=n[s-1].nextSibling,u=null;for(;l<s||a<i;){if(n[l]===r[a]){l++,a++;continue}for(;n[s-1]===r[i-1];)s--,i--;if(s===l){const f=i<o?a?r[a-1].nextSibling:r[i-a]:c;for(;a<i;)t.insertBefore(r[a++],f)}else if(i===a)for(;l<s;)(!u||!u.has(n[l]))&&n[l].remove(),l++;else if(n[l]===r[i-1]&&r[a]===n[s-1]){const f=n[--s].nextSibling;t.insertBefore(r[a++],n[l++].nextSibling),t.insertBefore(r[--i],f),n[s]=r[i]}else{if(!u){u=new Map;let g=a;for(;g<i;)u.set(r[g],g++)}const f=u.get(n[l]);if(f!=null)if(a<f&&f<i){let g=l,h=1,D;for(;++g<s&&g<i&&!((D=u.get(n[g]))==null||D!==f+h);)h++;if(h>f-a){const y=n[l];for(;a<f;)t.insertBefore(r[a++],y)}else t.replaceChild(r[a++],n[l++])}else l++;else n[l++].remove()}}}var Et="_$DX_DELEGATE";function Vs(t,n,r,o={}){let s;return rt(i=>{s=i,n===document?t():Gn(n,t(),n.firstChild?null:void 0,r)},o.owner),()=>{s(),n.textContent=""}}function tl(t,n,r,o){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=t,a.content.firstChild},l=()=>(s||(s=i())).cloneNode(!0);return l.cloneNode=l,l}function ks(t,n=window.document){const r=n[Et]||(n[Et]=new Set);for(let o=0,s=t.length;o<s;o++){const i=t[o];r.has(i)||(r.add(i),n.addEventListener(i,_r))}}function nl(t=window.document){if(t[Et]){for(let n of t[Et].keys())t.removeEventListener(n,_r);delete t[Et]}}function Wn(t,n,r){st(t)||(r==null?t.removeAttribute(n):t.setAttribute(n,r))}function As(t,n,r,o){st(t)||(o==null?t.removeAttributeNS(n,r):t.setAttributeNS(n,r,o))}function Ms(t,n,r){st(t)||(r?t.setAttribute(n,""):t.removeAttribute(n))}function _s(t,n){st(t)||(n==null?t.removeAttribute("class"):t.className=n)}function Ls(t,n,r,o){if(o)Array.isArray(r)?(t[`$$${n}`]=r[0],t[`$$${n}Data`]=r[1]):t[`$$${n}`]=r;else if(Array.isArray(r)){const s=r[0];t.addEventListener(n,r[0]=i=>s.call(t,r[1],i))}else t.addEventListener(n,r,typeof r!="function"&&r)}function Is(t,n,r={}){const o=Object.keys(n||{}),s=Object.keys(r);let i,l;for(i=0,l=s.length;i<l;i++){const a=s[i];!a||a==="undefined"||n[a]||(cr(t,a,!1),delete r[a])}for(i=0,l=o.length;i<l;i++){const a=o[i],c=!!n[a];!a||a==="undefined"||r[a]===c||!c||(cr(t,a,!0),r[a]=c)}return r}function Rs(t,n,r){if(!n)return r?Wn(t,"style"):n;const o=t.style;if(typeof n=="string")return o.cssText=n;typeof r=="string"&&(o.cssText=r=void 0),r||(r={}),n||(n={});let s,i;for(i in r)n[i]==null&&o.removeProperty(i),delete r[i];for(i in n)s=n[i],s!==r[i]&&(o.setProperty(i,s),r[i]=s);return r}function Ts(t,n={},r,o){const s={};return o||ot(()=>s.children=kt(t,n.children,s.children)),ot(()=>typeof n.ref=="function"&&Fs(n.ref,t)),ot(()=>Os(t,n,r,!0,s,!0)),s}function Fs(t,n,r){return Se(()=>t(n,r))}function Gn(t,n,r,o){if(r!==void 0&&!o&&(o=[]),typeof n!="function")return kt(t,n,o,r);ot(s=>kt(t,n(),s,r),o)}function Os(t,n,r,o,s={},i=!1){n||(n={});for(const l in s)if(!(l in n)){if(l==="children")continue;s[l]=mr(t,l,null,s[l],r,i,n)}for(const l in n){if(l==="children")continue;const a=n[l];s[l]=mr(t,l,a,s[l],r,i,n)}}function Bs(t){let n,r;return!st()||!(n=K.registry.get(r=$s()))?t():(K.completed&&K.completed.add(n),K.registry.delete(r),n)}function st(t){return!!K.context&&!K.done&&(!t||t.isConnected)}function Us(t){return t.toLowerCase().replace(/-([a-z])/g,(n,r)=>r.toUpperCase())}function cr(t,n,r){const o=n.trim().split(/\s+/);for(let s=0,i=o.length;s<i;s++)t.classList.toggle(o[s],r)}function mr(t,n,r,o,s,i,l){let a,c,u,f,g;if(n==="style")return Rs(t,r,o);if(n==="classList")return Is(t,r,o);if(r===o)return o;if(n==="ref")i||r(t);else if(n.slice(0,3)==="on:"){const h=n.slice(3);o&&t.removeEventListener(h,o,typeof o!="function"&&o),r&&t.addEventListener(h,r,typeof r!="function"&&r)}else if(n.slice(0,10)==="oncapture:"){const h=n.slice(10);o&&t.removeEventListener(h,o,!0),r&&t.addEventListener(h,r,!0)}else if(n.slice(0,2)==="on"){const h=n.slice(2).toLowerCase(),D=Es.has(h);if(!D&&o){const y=Array.isArray(o)?o[0]:o;t.removeEventListener(h,y)}(D||r)&&(Ls(t,h,r,D),D&&ks([h]))}else if(n.slice(0,5)==="attr:")Wn(t,n.slice(5),r);else if(n.slice(0,5)==="bool:")Ms(t,n.slice(5),r);else if((g=n.slice(0,5)==="prop:")||(u=Cs.has(n))||!s&&((f=ys(n,t.tagName))||(c=vs.has(n)))||(a=t.nodeName.includes("-")||"is"in l)){if(g)n=n.slice(5),c=!0;else if(st(t))return r;n==="class"||n==="className"?_s(t,r):a&&!c&&!u?t[Us(n)]=r:t[f||n]=r}else{const h=s&&n.indexOf(":")>-1&&ws[n.split(":")[0]];h?As(t,h,n,r):Wn(t,js[n]||n,r)}return r}function _r(t){if(K.registry&&K.events&&K.events.find(([c,u])=>u===t))return;let n=t.target;const r=`$$${t.type}`,o=t.target,s=t.currentTarget,i=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),l=()=>{const c=n[r];if(c&&!n.disabled){const u=n[`${r}Data`];if(u!==void 0?c.call(n,u,t):c.call(n,t),t.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(t.target)&&i(n.host),!0},a=()=>{for(;l()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),K.registry&&!K.done&&(K.done=_$HY.done=!0),t.composedPath){const c=t.composedPath();i(c[0]);for(let u=0;u<c.length-2&&(n=c[u],!!l());u++){if(n._$host){n=n._$host,a();break}if(n.parentNode===s)break}}else a();i(o)}function kt(t,n,r,o,s){const i=st(t);if(i){!r&&(r=[...t.childNodes]);let c=[];for(let u=0;u<r.length;u++){const f=r[u];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():c.push(f)}r=c}for(;typeof r=="function";)r=r();if(n===r)return r;const l=typeof n,a=o!==void 0;if(t=a&&r[0]&&r[0].parentNode||t,l==="string"||l==="number"){if(i||l==="number"&&(n=n.toString(),n===r))return r;if(a){let c=r[0];c&&c.nodeType===3?c.data!==n&&(c.data=n):c=document.createTextNode(n),r=lt(t,r,o,c)}else r!==""&&typeof r=="string"?r=t.firstChild.data=n:r=t.textContent=n}else if(n==null||l==="boolean"){if(i)return r;r=lt(t,r,o)}else{if(l==="function")return ot(()=>{let c=n();for(;typeof c=="function";)c=c();r=kt(t,c,r,o)}),()=>r;if(Array.isArray(n)){const c=[],u=r&&Array.isArray(r);if(Kn(c,n,r,s))return ot(()=>r=kt(t,c,r,o,!0)),()=>r;if(i){if(!c.length)return r;if(o===void 0)return r=[...t.childNodes];let f=c[0];if(f.parentNode!==t)return r;const g=[f];for(;(f=f.nextSibling)!==o;)g.push(f);return r=g}if(c.length===0){if(r=lt(t,r,o),a)return r}else u?r.length===0?dr(t,c,o):Ss(t,r,c):(r&&lt(t),dr(t,c));r=c}else if(n.nodeType){if(i&&n.parentNode)return r=a?[n]:n;if(Array.isArray(r)){if(a)return r=lt(t,r,o,n);lt(t,r,null,n)}else r==null||r===""||!t.firstChild?t.appendChild(n):t.replaceChild(n,t.firstChild);r=n}}return r}function Kn(t,n,r,o){let s=!1;for(let i=0,l=n.length;i<l;i++){let a=n[i],c=r&&r[t.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))s=Kn(t,a,c)||s;else if(u==="function")if(o){for(;typeof a=="function";)a=a();s=Kn(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||s}else t.push(a),s=!0;else{const f=String(a);c&&c.nodeType===3&&c.data===f?t.push(c):t.push(document.createTextNode(f))}}return s}function dr(t,n,r=null){for(let o=0,s=n.length;o<s;o++)t.insertBefore(n[o],r)}function lt(t,n,r,o){if(r===void 0)return t.textContent="";const s=o||document.createTextNode("");if(n.length){let i=!1;for(let l=n.length-1;l>=0;l--){const a=n[l];if(s!==a){const c=a.parentNode===t;!i&&!l?c?t.replaceChild(s,a):t.insertBefore(s,r):c&&a.remove()}else i=!0}}else t.insertBefore(s,r);return[s]}function $s(){return K.getNextContextId()}var Hs="http://www.w3.org/2000/svg";function Lr(t,n=!1){return n?document.createElementNS(Hs,t):document.createElement(t)}function rl(t){const{useShadow:n}=t,r=document.createTextNode(""),o=()=>t.mount||document.body,s=ar();let i,l=!!K.context;return Er(()=>{l&&(ar().user=l=!1),i||(i=Pr(s,()=>Pe(()=>t.children)));const a=o();if(a instanceof HTMLHeadElement){const[c,u]=ke(!1),f=()=>u(!0);rt(g=>Gn(a,()=>c()?g():i(),null)),St(f)}else{const c=Lr(t.isSVG?"g":"div",t.isSVG),u=n&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return r.parentNode},configurable:!0}),Gn(u,i),a.appendChild(c),t.ref&&t.ref(c),St(()=>a.removeChild(c))}},void 0,{render:!l}),r}function zs(t,n){const r=Pe(t);return Pe(()=>{const o=r();switch(typeof o){case"function":return Se(()=>o(n));case"string":const s=Ps.has(o),i=K.context?Bs():Lr(o,s);return Ts(i,n,s),i}})}function ol(t){const[,n]=hs(t,["component"]);return zs(()=>t.component,n)}var qs=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,n){this.keyToValue.set(t,n),this.valueToKey.set(n,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}},Ir=class{constructor(t){this.generateIdentifier=t,this.kv=new qs}register(t,n){this.kv.getByValue(t)||(n||(n=this.generateIdentifier(t)),this.kv.set(n,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}},Ws=class extends Ir{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(t,n.allowProps),super.register(t,n.identifier)):super.register(t,n)}getAllowedProps(t){return this.classToAllowedProps.get(t)}};function Gs(t){if("values"in Object)return Object.values(t);const n=[];for(const r in t)t.hasOwnProperty(r)&&n.push(t[r]);return n}function Ks(t,n){const r=Gs(t);if("find"in r)return r.find(n);const o=r;for(let s=0;s<o.length;s++){const i=o[s];if(n(i))return i}}function ht(t,n){Object.entries(t).forEach(([r,o])=>n(o,r))}function fn(t,n){return t.indexOf(n)!==-1}function ur(t,n){for(let r=0;r<t.length;r++){const o=t[r];if(n(o))return o}}var Ys=class{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return Ks(this.transfomers,n=>n.isApplicable(t))}findByName(t){return this.transfomers[t]}},Js=t=>Object.prototype.toString.call(t).slice(8,-1),Rr=t=>typeof t>"u",Qs=t=>t===null,At=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,Yn=t=>At(t)&&Object.keys(t).length===0,Qe=t=>Array.isArray(t),Zs=t=>typeof t=="string",Xs=t=>typeof t=="number"&&!isNaN(t),ei=t=>typeof t=="boolean",ti=t=>t instanceof RegExp,Mt=t=>t instanceof Map,_t=t=>t instanceof Set,Tr=t=>Js(t)==="Symbol",ni=t=>t instanceof Date&&!isNaN(t.valueOf()),ri=t=>t instanceof Error,fr=t=>typeof t=="number"&&isNaN(t),oi=t=>ei(t)||Qs(t)||Rr(t)||Xs(t)||Zs(t)||Tr(t),si=t=>typeof t=="bigint",ii=t=>t===1/0||t===-1/0,li=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),ai=t=>t instanceof URL,Fr=t=>t.replace(/\./g,"\\."),Bn=t=>t.map(String).map(Fr).join("."),Pt=t=>{const n=[];let r="";for(let s=0;s<t.length;s++){let i=t.charAt(s);if(i==="\\"&&t.charAt(s+1)==="."){r+=".",s++;continue}if(i==="."){n.push(r),r="";continue}r+=i}const o=r;return n.push(o),n};function Ue(t,n,r,o){return{isApplicable:t,annotation:n,transform:r,untransform:o}}var Or=[Ue(Rr,"undefined",()=>null,()=>{}),Ue(si,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),Ue(ni,"Date",t=>t.toISOString(),t=>new Date(t)),Ue(ri,"Error",(t,n)=>{const r={name:t.name,message:t.message};return n.allowedErrorProps.forEach(o=>{r[o]=t[o]}),r},(t,n)=>{const r=new Error(t.message);return r.name=t.name,r.stack=t.stack,n.allowedErrorProps.forEach(o=>{r[o]=t[o]}),r}),Ue(ti,"regexp",t=>""+t,t=>{const n=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(n,r)}),Ue(_t,"set",t=>[...t.values()],t=>new Set(t)),Ue(Mt,"map",t=>[...t.entries()],t=>new Map(t)),Ue(t=>fr(t)||ii(t),"number",t=>fr(t)?"NaN":t>0?"Infinity":"-Infinity",Number),Ue(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),Ue(ai,"URL",t=>t.toString(),t=>new URL(t))];function yn(t,n,r,o){return{isApplicable:t,annotation:n,transform:r,untransform:o}}var Br=yn((t,n)=>Tr(t)?!!n.symbolRegistry.getIdentifier(t):!1,(t,n)=>["symbol",n.symbolRegistry.getIdentifier(t)],t=>t.description,(t,n,r)=>{const o=r.symbolRegistry.getValue(n[1]);if(!o)throw new Error("Trying to deserialize unknown symbol");return o}),ci=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,n)=>(t[n.name]=n,t),{}),Ur=yn(li,t=>["typed-array",t.constructor.name],t=>[...t],(t,n)=>{const r=ci[n[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(t)});function $r(t,n){return t!=null&&t.constructor?!!n.classRegistry.getIdentifier(t.constructor):!1}var Hr=yn($r,(t,n)=>["class",n.classRegistry.getIdentifier(t.constructor)],(t,n)=>{const r=n.classRegistry.getAllowedProps(t.constructor);if(!r)return{...t};const o={};return r.forEach(s=>{o[s]=t[s]}),o},(t,n,r)=>{const o=r.classRegistry.getValue(n[1]);if(!o)throw new Error(`Trying to deserialize unknown class '${n[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(o.prototype),t)}),zr=yn((t,n)=>!!n.customTransformerRegistry.findApplicable(t),(t,n)=>["custom",n.customTransformerRegistry.findApplicable(t).name],(t,n)=>n.customTransformerRegistry.findApplicable(t).serialize(t),(t,n,r)=>{const o=r.customTransformerRegistry.findByName(n[1]);if(!o)throw new Error("Trying to deserialize unknown custom value");return o.deserialize(t)}),mi=[Hr,Br,zr,Ur],gr=(t,n)=>{const r=ur(mi,s=>s.isApplicable(t,n));if(r)return{value:r.transform(t,n),type:r.annotation(t,n)};const o=ur(Or,s=>s.isApplicable(t,n));if(o)return{value:o.transform(t,n),type:o.annotation}},qr={};Or.forEach(t=>{qr[t.annotation]=t});var di=(t,n,r)=>{if(Qe(n))switch(n[0]){case"symbol":return Br.untransform(t,n,r);case"class":return Hr.untransform(t,n,r);case"custom":return zr.untransform(t,n,r);case"typed-array":return Ur.untransform(t,n,r);default:throw new Error("Unknown transformation: "+n)}else{const o=qr[n];if(!o)throw new Error("Unknown transformation: "+n);return o.untransform(t,r)}},at=(t,n)=>{if(n>t.size)throw new Error("index out of bounds");const r=t.keys();for(;n>0;)r.next(),n--;return r.next().value};function Wr(t){if(fn(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(fn(t,"prototype"))throw new Error("prototype is not allowed as a property");if(fn(t,"constructor"))throw new Error("constructor is not allowed as a property")}var ui=(t,n)=>{Wr(n);for(let r=0;r<n.length;r++){const o=n[r];if(_t(t))t=at(t,+o);else if(Mt(t)){const s=+o,i=+n[++r]==0?"key":"value",l=at(t,s);switch(i){case"key":t=l;break;case"value":t=t.get(l);break}}else t=t[o]}return t},Jn=(t,n,r)=>{if(Wr(n),n.length===0)return r(t);let o=t;for(let i=0;i<n.length-1;i++){const l=n[i];if(Qe(o)){const a=+l;o=o[a]}else if(At(o))o=o[l];else if(_t(o)){const a=+l;o=at(o,a)}else if(Mt(o)){if(i===n.length-2)break;const c=+l,u=+n[++i]==0?"key":"value",f=at(o,c);switch(u){case"key":o=f;break;case"value":o=o.get(f);break}}}const s=n[n.length-1];if(Qe(o)?o[+s]=r(o[+s]):At(o)&&(o[s]=r(o[s])),_t(o)){const i=at(o,+s),l=r(i);i!==l&&(o.delete(i),o.add(l))}if(Mt(o)){const i=+n[n.length-2],l=at(o,i);switch(+s==0?"key":"value"){case"key":{const c=r(l);o.set(c,o.get(l)),c!==l&&o.delete(l);break}case"value":{o.set(l,r(o.get(l)));break}}}return t};function Qn(t,n,r=[]){if(!t)return;if(!Qe(t)){ht(t,(i,l)=>Qn(i,n,[...r,...Pt(l)]));return}const[o,s]=t;s&&ht(s,(i,l)=>{Qn(i,n,[...r,...Pt(l)])}),n(o,r)}function fi(t,n,r){return Qn(n,(o,s)=>{t=Jn(t,s,i=>di(i,o,r))}),t}function gi(t,n){function r(o,s){const i=ui(t,Pt(s));o.map(Pt).forEach(l=>{t=Jn(t,l,()=>i)})}if(Qe(n)){const[o,s]=n;o.forEach(i=>{t=Jn(t,Pt(i),()=>t)}),s&&ht(s,r)}else ht(n,r);return t}var bi=(t,n)=>At(t)||Qe(t)||Mt(t)||_t(t)||$r(t,n);function hi(t,n,r){const o=r.get(t);o?o.push(n):r.set(t,[n])}function Ni(t,n){const r={};let o;return t.forEach(s=>{if(s.length<=1)return;n||(s=s.map(a=>a.map(String)).sort((a,c)=>a.length-c.length));const[i,...l]=s;i.length===0?o=l.map(Bn):r[Bn(i)]=l.map(Bn)}),o?Yn(r)?[o]:[o,r]:Yn(r)?void 0:r}var Gr=(t,n,r,o,s=[],i=[],l=new Map)=>{const a=oi(t);if(!a){hi(t,s,n);const D=l.get(t);if(D)return o?{transformedValue:null}:D}if(!bi(t,r)){const D=gr(t,r),y=D?{transformedValue:D.value,annotations:[D.type]}:{transformedValue:t};return a||l.set(t,y),y}if(fn(i,t))return{transformedValue:null};const c=gr(t,r),u=(c==null?void 0:c.value)??t,f=Qe(u)?[]:{},g={};ht(u,(D,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const k=Gr(D,n,r,o,[...s,y],[...i,t],l);f[y]=k.transformedValue,Qe(k.annotations)?g[y]=k.annotations:At(k.annotations)&&ht(k.annotations,(B,x)=>{g[Fr(y)+"."+x]=B})});const h=Yn(g)?{transformedValue:f,annotations:c?[c.type]:void 0}:{transformedValue:f,annotations:c?[c.type,g]:g};return a||l.set(t,h),h};function Kr(t){return Object.prototype.toString.call(t).slice(8,-1)}function br(t){return Kr(t)==="Array"}function xi(t){if(Kr(t)!=="Object")return!1;const n=Object.getPrototypeOf(t);return!!n&&n.constructor===Object&&n===Object.prototype}function pi(t,n,r,o,s){const i={}.propertyIsEnumerable.call(o,n)?"enumerable":"nonenumerable";i==="enumerable"&&(t[n]=r),s&&i==="nonenumerable"&&Object.defineProperty(t,n,{value:r,enumerable:!1,writable:!0,configurable:!0})}function Zn(t,n={}){if(br(t))return t.map(s=>Zn(s,n));if(!xi(t))return t;const r=Object.getOwnPropertyNames(t),o=Object.getOwnPropertySymbols(t);return[...r,...o].reduce((s,i)=>{if(br(n.props)&&!n.props.includes(i))return s;const l=t[i],a=Zn(l,n);return pi(s,i,a,t,n.nonenumerable),s},{})}var ae=class{constructor({dedupe:t=!1}={}){this.classRegistry=new Ws,this.symbolRegistry=new Ir(n=>n.description??""),this.customTransformerRegistry=new Ys,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const n=new Map,r=Gr(t,n,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta={...o.meta,values:r.annotations});const s=Ni(n,this.dedupe);return s&&(o.meta={...o.meta,referentialEqualities:s}),o}deserialize(t){const{json:n,meta:r}=t;let o=Zn(n);return r!=null&&r.values&&(o=fi(o,r.values,this)),r!=null&&r.referentialEqualities&&(o=gi(o,r.referentialEqualities)),o}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t))}registerClass(t,n){this.classRegistry.register(t,n)}registerSymbol(t,n){this.symbolRegistry.register(t,n)}registerCustom(t,n){this.customTransformerRegistry.register({name:n,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}};ae.defaultInstance=new ae;ae.serialize=ae.defaultInstance.serialize.bind(ae.defaultInstance);ae.deserialize=ae.defaultInstance.deserialize.bind(ae.defaultInstance);ae.stringify=ae.defaultInstance.stringify.bind(ae.defaultInstance);ae.parse=ae.defaultInstance.parse.bind(ae.defaultInstance);ae.registerClass=ae.defaultInstance.registerClass.bind(ae.defaultInstance);ae.registerSymbol=ae.defaultInstance.registerSymbol.bind(ae.defaultInstance);ae.registerCustom=ae.defaultInstance.registerCustom.bind(ae.defaultInstance);ae.allowErrorProps=ae.defaultInstance.allowErrorProps.bind(ae.defaultInstance);var vi=ae.serialize,sl=ae.stringify;function il(t){return t.state.fetchStatus==="fetching"?"fetching":t.getObserversCount()?t.state.fetchStatus==="paused"?"paused":t.isStale()?"stale":"fresh":"inactive"}function ll(t,n){return`${t}${n.charAt(0).toUpperCase()+n.slice(1)}`}function al({queryState:t,observerCount:n,isStale:r}){return t.fetchStatus==="fetching"?"blue":n?t.fetchStatus==="paused"?"purple":r?"yellow":"green":"gray"}function cl({status:t,isPaused:n}){return n?"purple":t==="error"?"red":t==="pending"?"yellow":t==="success"?"green":"gray"}function ml(t){return t==="fresh"?"green":t==="stale"?"yellow":t==="paused"?"purple":t==="inactive"?"gray":"blue"}var dl=(t,n=!1)=>{const{json:r}=vi(t);return JSON.stringify(r,null,n?2:void 0)},sn=t=>t.state.fetchStatus!=="idle"?0:t.getObserversCount()?t.isStale()?2:1:3,Ci=(t,n)=>t.queryHash.localeCompare(n.queryHash),Yr=(t,n)=>t.state.dataUpdatedAt<n.state.dataUpdatedAt?1:-1,ji=(t,n)=>sn(t)===sn(n)?Yr(t,n):sn(t)>sn(n)?1:-1,ul={status:ji,"query hash":Ci,"last updated":Yr},ln=t=>t.state.isPaused?0:t.state.status==="error"?2:t.state.status==="pending"?1:3,Jr=(t,n)=>t.state.submittedAt<n.state.submittedAt?1:-1,Di=(t,n)=>ln(t)===ln(n)?Jr(t,n):ln(t)>ln(n)?1:-1,fl={status:Di,"last updated":Jr},gl=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize),bl=()=>{const[t,n]=ke("dark");return rs(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)");n(r.matches?"dark":"light");const o=s=>{n(s.matches?"dark":"light")};r.addEventListener("change",o),St(()=>r.removeEventListener("change",o))}),t},an=(t,n,r)=>{if(n.length===0)return r;if(t instanceof Map){const o=new Map(t);if(n.length===1)return o.set(n[0],r),o;const[s,...i]=n;return o.set(s,an(o.get(s),i,r)),o}if(t instanceof Set){const o=an(Array.from(t),n,r);return new Set(o)}if(Array.isArray(t)){const o=[...t];if(n.length===1)return o[n[0]]=r,o;const[s,...i]=n;return o[s]=an(o[s],i,r),o}if(t instanceof Object){const o={...t};if(n.length===1)return o[n[0]]=r,o;const[s,...i]=n;return o[s]=an(o[s],i,r),o}return t},cn=(t,n)=>{if(t instanceof Map){const r=new Map(t);if(n.length===1)return r.delete(n[0]),r;const[o,...s]=n;return r.set(o,cn(r.get(o),s)),r}if(t instanceof Set){const r=cn(Array.from(t),n);return new Set(r)}if(Array.isArray(t)){const r=[...t];if(n.length===1)return r.filter((i,l)=>l.toString()!==n[0]);const[o,...s]=n;return r[o]=cn(r[o],s),r}if(t instanceof Object){const r={...t};if(n.length===1)return delete r[n[0]],r;const[o,...s]=n;return r[o]=cn(r[o],s),r}return t},yi=(t,n)=>{if(!t||document.querySelector("#_goober")||(n==null?void 0:n.querySelector("#_goober")))return;const o=document.createElement("style"),s=document.createTextNode("");o.appendChild(s),o.id="_goober",o.setAttribute("nonce",t),n?n.appendChild(o):document.head.appendChild(o)},ct,Lt,It,Rt,nt,Tt,mt,dt,ut,ft,gt,Ft,bt,Ot,hr,Ei=(hr=class{constructor(t){_e(this,ct);_e(this,Lt);_e(this,It);_e(this,Rt);_e(this,nt,!1);_e(this,Tt);_e(this,mt);_e(this,dt);_e(this,ut);_e(this,ft);_e(this,gt);_e(this,Ft);_e(this,bt);_e(this,Ot);const{client:n,queryFlavor:r,version:o,onlineManager:s,buttonPosition:i,position:l,initialIsOpen:a,errorTypes:c,styleNonce:u,shadowDOMTarget:f,hideDisabledQueries:g}=t;Ve(this,ct,ke(n)),Ve(this,It,r),Ve(this,Rt,o),Ve(this,Lt,s),Ve(this,Tt,u),Ve(this,mt,f),Ve(this,dt,ke(i)),Ve(this,ut,ke(l)),Ve(this,ft,ke(a)),Ve(this,gt,ke(c)),Ve(this,Ft,ke(g))}setButtonPosition(t){he(this,dt)[1](t)}setPosition(t){he(this,ut)[1](t)}setInitialIsOpen(t){he(this,ft)[1](t)}setErrorTypes(t){he(this,gt)[1](t)}setClient(t){he(this,ct)[1](t)}mount(t){if(he(this,nt))throw new Error("Devtools is already mounted");const n=Vs(()=>{const r=this,[o]=he(this,dt),[s]=he(this,ut),[i]=he(this,ft),[l]=he(this,gt),[a]=he(this,Ft),[c]=he(this,ct);let u;return he(this,bt)?u=he(this,bt):(u=Ns(()=>Nr(()=>import("./EDEL3XIZ-B_H6kYY3.js"),__vite__mapDeps([9,2,1,6,4,3,7,5]))),Ve(this,bt,u)),yi(he(this,Tt),he(this,mt)),fs(u,bs({get queryFlavor(){return he(r,It)},get version(){return he(r,Rt)},get onlineManager(){return he(r,Lt)},get shadowDOMTarget(){return he(r,mt)}},{get client(){return c()},get buttonPosition(){return o()},get position(){return s()},get initialIsOpen(){return i()},get errorTypes(){return l()},get hideDisabledQueries(){return a()}}))},t);Ve(this,nt,!0),Ve(this,Ot,n)}unmount(){var t;if(!he(this,nt))throw new Error("Devtools is not mounted");(t=he(this,Ot))==null||t.call(this),Ve(this,nt,!1)}},ct=new WeakMap,Lt=new WeakMap,It=new WeakMap,Rt=new WeakMap,nt=new WeakMap,Tt=new WeakMap,mt=new WeakMap,dt=new WeakMap,ut=new WeakMap,ft=new WeakMap,gt=new WeakMap,Ft=new WeakMap,bt=new WeakMap,Ot=new WeakMap,hr);function Pi(t){const n=io(t.client),r=b.useRef(null),{buttonPosition:o,position:s,initialIsOpen:i,errorTypes:l,styleNonce:a,shadowDOMTarget:c,hideDisabledQueries:u}=t,[f]=b.useState(new Ei({client:n,queryFlavor:"React Query",version:"5",onlineManager:lo,buttonPosition:o,position:s,initialIsOpen:i,errorTypes:l,styleNonce:a,shadowDOMTarget:c,hideDisabledQueries:u}));return b.useEffect(()=>{f.setClient(n)},[n,f]),b.useEffect(()=>{o&&f.setButtonPosition(o)},[o,f]),b.useEffect(()=>{s&&f.setPosition(s)},[s,f]),b.useEffect(()=>{f.setInitialIsOpen(i||!1)},[i,f]),b.useEffect(()=>{f.setErrorTypes(l||[])},[l,f]),b.useEffect(()=>(r.current&&f.mount(r.current),()=>{f.unmount()}),[f]),ao.jsx("div",{dir:"ltr",className:"tsqd-parent-container",ref:r})}var wi=Pi;const Si=new co({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:(t,n)=>{if(n&&typeof n=="object"&&"status"in n){const r=n.status;if(r>=400&&r<500)return!1}return t<3},refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:1}}}),Vi=({children:t})=>e.jsxDEV(mo,{client:Si,children:[t,e.jsxDEV(wi,{initialIsOpen:!1},void 0,!1,{fileName:"C:/College Project/frontend/src/providers/QueryProvider.tsx",lineNumber:39,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/providers/QueryProvider.tsx",lineNumber:36,columnNumber:5},void 0);{const t=document.createElement("script");t.src="/clear-sw-cache.js",t.onload=()=>console.log("✅ Service Worker cache clearer loaded"),t.onerror=()=>console.log("⚠️ Service Worker cache clearer not available"),document.head.appendChild(t)}Jo();"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(t=>{for(const n of t)n.unregister(),console.log("🔄 Service Worker unregistered for development")});const En=document.createElement("link");En.rel="preconnect";En.href="https://fonts.gstatic.com";En.crossOrigin="anonymous";document.head.appendChild(En);const tr=document.createElement("link");tr.rel="stylesheet";tr.href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap&font-display=swap";document.head.appendChild(tr);$n.createRoot(document.getElementById("root")).render(e.jsxDEV(Xn.StrictMode,{children:e.jsxDEV(Vi,{children:e.jsxDEV(Yo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:85,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:84,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:83,columnNumber:3},void 0));export{jr as $,Hi as A,Wn as B,ll as C,Fs as D,Ki as E,$i as F,dn as G,il as H,cl as I,al as J,ml as K,dl as L,Yi as M,gl as N,Se as O,rl as P,qi as Q,Ts as R,Qi as S,bs as T,rt as U,vi as V,Ji as W,an as X,Ls as Y,sl as Z,Xi as _,Ut as a,Zi as a0,cn as a1,hs as a2,ol as a3,es as a4,bl as a5,Oi as b,Bi as c,No as d,we as e,Ui as f,Wi as g,ke as h,Er as i,e as j,Pe as k,fs as l,el as m,Gn as n,rs as o,ot as p,_s as q,nl as r,ie as s,tl as t,Fi as u,ks as v,Gi as w,St as x,ul as y,fl as z};
//# sourceMappingURL=index-B1j8FRVx.js.map
