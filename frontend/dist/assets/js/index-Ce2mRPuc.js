var HL=Object.defineProperty;var GL=(o,t,a)=>t in o?HL(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var _i=(o,t,a)=>GL(o,typeof t!="symbol"?t+"":t,a);function WL(o,t){for(var a=0;a<t.length;a++){const c=t[a];if(typeof c!="string"&&!Array.isArray(c)){for(const g in c)if(g!=="default"&&!(g in o)){const S=Object.getOwnPropertyDescriptor(c,g);S&&Object.defineProperty(o,g,S.get?S:{enumerable:!0,get:()=>c[g]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))c(g);new MutationObserver(g=>{for(const S of g)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function a(g){const S={};return g.integrity&&(S.integrity=g.integrity),g.referrerPolicy&&(S.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?S.credentials="include":g.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function c(g){if(g.ep)return;g.ep=!0;const S=a(g);fetch(g.href,S)}})();var Fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cj(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ZL(o){if(o.__esModule)return o;var t=o.default;if(typeof t=="function"){var a=function c(){return this instanceof c?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(c){var g=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(a,c,g.get?g:{enumerable:!0,get:function(){return o[c]}})}),a}var uj={exports:{}},gC={},dj={exports:{}},Jx={exports:{}};Jx.exports;(function(o,t){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var a="18.3.1",c=Symbol.for("react.element"),g=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),Pe=Symbol.iterator,Se="@@iterator";function Ce(K){if(K===null||typeof K!="object")return null;var we=Pe&&K[Pe]||K[Se];return typeof we=="function"?we:null}var _e={current:null},Ue={transition:null},Oe={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},Je={current:null},tt={},ut=null;function Tt(K){ut=K}tt.setExtraStackFrame=function(K){ut=K},tt.getCurrentStack=null,tt.getStackAddendum=function(){var K="";ut&&(K+=ut);var we=tt.getCurrentStack;return we&&(K+=we()||""),K};var pt=!1,Yt=!1,ft=!1,bt=!1,It=!1,Lt={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Ue,ReactCurrentOwner:Je};Lt.ReactDebugCurrentFrame=tt,Lt.ReactCurrentActQueue=Oe;function hn(K){{for(var we=arguments.length,Ye=new Array(we>1?we-1:0),rt=1;rt<we;rt++)Ye[rt-1]=arguments[rt];Zt("warn",K,Ye)}}function at(K){{for(var we=arguments.length,Ye=new Array(we>1?we-1:0),rt=1;rt<we;rt++)Ye[rt-1]=arguments[rt];Zt("error",K,Ye)}}function Zt(K,we,Ye){{var rt=Lt.ReactDebugCurrentFrame,At=rt.getStackAddendum();At!==""&&(we+="%s",Ye=Ye.concat([At]));var Nn=Ye.map(function(Xt){return String(Xt)});Nn.unshift("Warning: "+we),Function.prototype.apply.call(console[K],console,Nn)}}var bn={};function ln(K,we){{var Ye=K.constructor,rt=Ye&&(Ye.displayName||Ye.name)||"ReactClass",At=rt+"."+we;if(bn[At])return;at("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",we,rt),bn[At]=!0}}var Bn={isMounted:function(K){return!1},enqueueForceUpdate:function(K,we,Ye){ln(K,"forceUpdate")},enqueueReplaceState:function(K,we,Ye,rt){ln(K,"replaceState")},enqueueSetState:function(K,we,Ye,rt){ln(K,"setState")}},An=Object.assign,wt={};Object.freeze(wt);function ze(K,we,Ye){this.props=K,this.context=we,this.refs=wt,this.updater=Ye||Bn}ze.prototype.isReactComponent={},ze.prototype.setState=function(K,we){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,we,"setState")},ze.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};{var Pt={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},nn=function(K,we){Object.defineProperty(ze.prototype,K,{get:function(){hn("%s(...) is deprecated in plain JavaScript React classes. %s",we[0],we[1])}})};for(var yn in Pt)Pt.hasOwnProperty(yn)&&nn(yn,Pt[yn])}function Ft(){}Ft.prototype=ze.prototype;function zt(K,we,Ye){this.props=K,this.context=we,this.refs=wt,this.updater=Ye||Bn}var mn=zt.prototype=new Ft;mn.constructor=zt,An(mn,ze.prototype),mn.isPureReactComponent=!0;function vr(){var K={current:null};return Object.seal(K),K}var fn=Array.isArray;function Wn(K){return fn(K)}function $r(K){{var we=typeof Symbol=="function"&&Symbol.toStringTag,Ye=we&&K[Symbol.toStringTag]||K.constructor.name||"Object";return Ye}}function Sr(K){try{return ur(K),!1}catch{return!0}}function ur(K){return""+K}function fi(K){if(Sr(K))return at("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",$r(K)),ur(K)}function Rr(K,we,Ye){var rt=K.displayName;if(rt)return rt;var At=we.displayName||we.name||"";return At!==""?Ye+"("+At+")":Ye}function ii(K){return K.displayName||"Context"}function We(K){if(K==null)return null;if(typeof K.tag=="number"&&at("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof K=="function")return K.displayName||K.name||null;if(typeof K=="string")return K;switch(K){case S:return"Fragment";case g:return"Portal";case u:return"Profiler";case b:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList"}if(typeof K=="object")switch(K.$$typeof){case A:var we=K;return ii(we)+".Consumer";case k:var Ye=K;return ii(Ye._context)+".Provider";case O:return Rr(K,K.render,"ForwardRef");case ie:var rt=K.displayName||null;return rt!==null?rt:We(K.type)||"Memo";case pe:{var At=K,Nn=At._payload,Xt=At._init;try{return We(Xt(Nn))}catch{return null}}}return null}var mr=Object.prototype.hasOwnProperty,ir={key:!0,ref:!0,__self:!0,__source:!0},Vn,Rn,yr;yr={};function si(K){if(mr.call(K,"ref")){var we=Object.getOwnPropertyDescriptor(K,"ref").get;if(we&&we.isReactWarning)return!1}return K.ref!==void 0}function qr(K){if(mr.call(K,"key")){var we=Object.getOwnPropertyDescriptor(K,"key").get;if(we&&we.isReactWarning)return!1}return K.key!==void 0}function ms(K,we){var Ye=function(){Vn||(Vn=!0,at("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",we))};Ye.isReactWarning=!0,Object.defineProperty(K,"key",{get:Ye,configurable:!0})}function Ui(K,we){var Ye=function(){Rn||(Rn=!0,at("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",we))};Ye.isReactWarning=!0,Object.defineProperty(K,"ref",{get:Ye,configurable:!0})}function jt(K){if(typeof K.ref=="string"&&Je.current&&K.__self&&Je.current.stateNode!==K.__self){var we=We(Je.current.type);yr[we]||(at('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',we,K.ref),yr[we]=!0)}}var an=function(K,we,Ye,rt,At,Nn,Xt){var In={$$typeof:c,type:K,key:we,ref:Ye,props:Xt,_owner:Nn};return In._store={},Object.defineProperty(In._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(In,"_self",{configurable:!1,enumerable:!1,writable:!1,value:rt}),Object.defineProperty(In,"_source",{configurable:!1,enumerable:!1,writable:!1,value:At}),Object.freeze&&(Object.freeze(In.props),Object.freeze(In)),In};function nt(K,we,Ye){var rt,At={},Nn=null,Xt=null,In=null,lr=null;if(we!=null){si(we)&&(Xt=we.ref,jt(we)),qr(we)&&(fi(we.key),Nn=""+we.key),In=we.__self===void 0?null:we.__self,lr=we.__source===void 0?null:we.__source;for(rt in we)mr.call(we,rt)&&!ir.hasOwnProperty(rt)&&(At[rt]=we[rt])}var jr=arguments.length-2;if(jr===1)At.children=Ye;else if(jr>1){for(var Xr=Array(jr),Jr=0;Jr<jr;Jr++)Xr[Jr]=arguments[Jr+2];Object.freeze&&Object.freeze(Xr),At.children=Xr}if(K&&K.defaultProps){var rr=K.defaultProps;for(rt in rr)At[rt]===void 0&&(At[rt]=rr[rt])}if(Nn||Xt){var Qr=typeof K=="function"?K.displayName||K.name||"Unknown":K;Nn&&ms(At,Qr),Xt&&Ui(At,Qr)}return an(K,Nn,Xt,In,lr,Je.current,At)}function Fn(K,we){var Ye=an(K.type,we,K.ref,K._self,K._source,K._owner,K.props);return Ye}function Dn(K,we,Ye){if(K==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var rt,At=An({},K.props),Nn=K.key,Xt=K.ref,In=K._self,lr=K._source,jr=K._owner;if(we!=null){si(we)&&(Xt=we.ref,jr=Je.current),qr(we)&&(fi(we.key),Nn=""+we.key);var Xr;K.type&&K.type.defaultProps&&(Xr=K.type.defaultProps);for(rt in we)mr.call(we,rt)&&!ir.hasOwnProperty(rt)&&(we[rt]===void 0&&Xr!==void 0?At[rt]=Xr[rt]:At[rt]=we[rt])}var Jr=arguments.length-2;if(Jr===1)At.children=Ye;else if(Jr>1){for(var rr=Array(Jr),Qr=0;Qr<Jr;Qr++)rr[Qr]=arguments[Qr+2];At.children=rr}return an(K.type,Nn,Xt,In,lr,jr,At)}function br(K){return typeof K=="object"&&K!==null&&K.$$typeof===c}var dr=".",gt=":";function Kt(K){var we=/[=:]/g,Ye={"=":"=0",":":"=2"},rt=K.replace(we,function(At){return Ye[At]});return"$"+rt}var $t=!1,zn=/\/+/g;function Kr(K){return K.replace(zn,"$&/")}function pn(K,we){return typeof K=="object"&&K!==null&&K.key!=null?(fi(K.key),Kt(""+K.key)):we.toString(36)}function ai(K,we,Ye,rt,At){var Nn=typeof K;(Nn==="undefined"||Nn==="boolean")&&(K=null);var Xt=!1;if(K===null)Xt=!0;else switch(Nn){case"string":case"number":Xt=!0;break;case"object":switch(K.$$typeof){case c:case g:Xt=!0}}if(Xt){var In=K,lr=At(In),jr=rt===""?dr+pn(In,0):rt;if(Wn(lr)){var Xr="";jr!=null&&(Xr=Kr(jr)+"/"),ai(lr,we,Xr,"",function(cd){return cd})}else lr!=null&&(br(lr)&&(lr.key&&(!In||In.key!==lr.key)&&fi(lr.key),lr=Fn(lr,Ye+(lr.key&&(!In||In.key!==lr.key)?Kr(""+lr.key)+"/":"")+jr)),we.push(lr));return 1}var Jr,rr,Qr=0,yi=rt===""?dr:rt+gt;if(Wn(K))for(var _o=0;_o<K.length;_o++)Jr=K[_o],rr=yi+pn(Jr,_o),Qr+=ai(Jr,we,Ye,rr,At);else{var jl=Ce(K);if(typeof jl=="function"){var Gs=K;jl===Gs.entries&&($t||hn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),$t=!0);for(var _c=jl.call(Gs),wc,lu=0;!(wc=_c.next()).done;)Jr=wc.value,rr=yi+pn(Jr,lu++),Qr+=ai(Jr,we,Ye,rr,At)}else if(Nn==="object"){var ro=String(K);throw new Error("Objects are not valid as a React child (found: "+(ro==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ro)+"). If you meant to render a collection of children, use an array instead.")}}return Qr}function fe(K,we,Ye){if(K==null)return K;var rt=[],At=0;return ai(K,rt,"","",function(Nn){return we.call(Ye,Nn,At++)}),rt}function I(K){var we=0;return fe(K,function(){we++}),we}function G(K,we,Ye){fe(K,function(){we.apply(this,arguments)},Ye)}function J(K){return fe(K,function(we){return we})||[]}function se(K){if(!br(K))throw new Error("React.Children.only expected to receive a single React element child.");return K}function he(K){var we={$$typeof:A,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};we.Provider={$$typeof:k,_context:we};var Ye=!1,rt=!1,At=!1;{var Nn={$$typeof:A,_context:we};Object.defineProperties(Nn,{Provider:{get:function(){return rt||(rt=!0,at("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),we.Provider},set:function(Xt){we.Provider=Xt}},_currentValue:{get:function(){return we._currentValue},set:function(Xt){we._currentValue=Xt}},_currentValue2:{get:function(){return we._currentValue2},set:function(Xt){we._currentValue2=Xt}},_threadCount:{get:function(){return we._threadCount},set:function(Xt){we._threadCount=Xt}},Consumer:{get:function(){return Ye||(Ye=!0,at("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),we.Consumer}},displayName:{get:function(){return we.displayName},set:function(Xt){At||(hn("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Xt),At=!0)}}}),we.Consumer=Nn}return we._currentRenderer=null,we._currentRenderer2=null,we}var Ne=-1,xe=0,ge=1,Te=2;function Qe(K){if(K._status===Ne){var we=K._result,Ye=we();if(Ye.then(function(Nn){if(K._status===xe||K._status===Ne){var Xt=K;Xt._status=ge,Xt._result=Nn}},function(Nn){if(K._status===xe||K._status===Ne){var Xt=K;Xt._status=Te,Xt._result=Nn}}),K._status===Ne){var rt=K;rt._status=xe,rt._result=Ye}}if(K._status===ge){var At=K._result;return At===void 0&&at(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,At),"default"in At||at(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,At),At.default}else throw K._result}function ne(K){var we={_status:Ne,_result:K},Ye={$$typeof:pe,_payload:we,_init:Qe};{var rt,At;Object.defineProperties(Ye,{defaultProps:{configurable:!0,get:function(){return rt},set:function(Nn){at("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),rt=Nn,Object.defineProperty(Ye,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return At},set:function(Nn){at("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),At=Nn,Object.defineProperty(Ye,"propTypes",{enumerable:!0})}}})}return Ye}function Ee(K){K!=null&&K.$$typeof===ie?at("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof K!="function"?at("forwardRef requires a render function but was given %s.",K===null?"null":typeof K):K.length!==0&&K.length!==2&&at("forwardRef render functions accept exactly two parameters: props and ref. %s",K.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),K!=null&&(K.defaultProps!=null||K.propTypes!=null)&&at("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var we={$$typeof:O,render:K};{var Ye;Object.defineProperty(we,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ye},set:function(rt){Ye=rt,!K.name&&!K.displayName&&(K.displayName=rt)}})}return we}var te;te=Symbol.for("react.module.reference");function ke(K){return!!(typeof K=="string"||typeof K=="function"||K===S||K===u||It||K===b||K===B||K===W||bt||K===Ve||pt||Yt||ft||typeof K=="object"&&K!==null&&(K.$$typeof===pe||K.$$typeof===ie||K.$$typeof===k||K.$$typeof===A||K.$$typeof===O||K.$$typeof===te||K.getModuleId!==void 0))}function Be(K,we){ke(K)||at("memo: The first argument must be a component. Instead received: %s",K===null?"null":typeof K);var Ye={$$typeof:ie,type:K,compare:we===void 0?null:we};{var rt;Object.defineProperty(Ye,"displayName",{enumerable:!1,configurable:!0,get:function(){return rt},set:function(At){rt=At,!K.name&&!K.displayName&&(K.displayName=At)}})}return Ye}function Ze(){var K=_e.current;return K===null&&at(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),K}function ct(K){var we=Ze();if(K._context!==void 0){var Ye=K._context;Ye.Consumer===K?at("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Ye.Provider===K&&at("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return we.useContext(K)}function mt(K){var we=Ze();return we.useState(K)}function Ut(K,we,Ye){var rt=Ze();return rt.useReducer(K,we,Ye)}function Ct(K){var we=Ze();return we.useRef(K)}function qt(K,we){var Ye=Ze();return Ye.useEffect(K,we)}function En(K,we){var Ye=Ze();return Ye.useInsertionEffect(K,we)}function _n(K,we){var Ye=Ze();return Ye.useLayoutEffect(K,we)}function qn(K,we){var Ye=Ze();return Ye.useCallback(K,we)}function Zn(K,we){var Ye=Ze();return Ye.useMemo(K,we)}function Yr(K,we,Ye){var rt=Ze();return rt.useImperativeHandle(K,we,Ye)}function Hr(K,we){{var Ye=Ze();return Ye.useDebugValue(K,we)}}function kn(){var K=Ze();return K.useTransition()}function $s(K){var we=Ze();return we.useDeferredValue(K)}function gc(){var K=Ze();return K.useId()}function xr(K,we,Ye){var rt=Ze();return rt.useSyncExternalStore(K,we,Ye)}var eo=0,Uo,Vi,as,su,ps,Oi,_l;function Va(){}Va.__reactDisabledLog=!0;function zr(){{if(eo===0){Uo=console.log,Vi=console.info,as=console.warn,su=console.error,ps=console.group,Oi=console.groupCollapsed,_l=console.groupEnd;var K={configurable:!0,enumerable:!0,value:Va,writable:!0};Object.defineProperties(console,{info:K,log:K,warn:K,error:K,group:K,groupCollapsed:K,groupEnd:K})}eo++}}function Kn(){{if(eo--,eo===0){var K={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:An({},K,{value:Uo}),info:An({},K,{value:Vi}),warn:An({},K,{value:as}),error:An({},K,{value:su}),group:An({},K,{value:ps}),groupCollapsed:An({},K,{value:Oi}),groupEnd:An({},K,{value:_l})})}eo<0&&at("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Qs=Lt.ReactCurrentDispatcher,Pr;function yo(K,we,Ye){{if(Pr===void 0)try{throw Error()}catch(At){var rt=At.stack.trim().match(/\n( *(at )?)/);Pr=rt&&rt[1]||""}return`
`+Pr+K}}var Qi=!1,$o;{var ga=typeof WeakMap=="function"?WeakMap:Map;$o=new ga}function au(K,we){if(!K||Qi)return"";{var Ye=$o.get(K);if(Ye!==void 0)return Ye}var rt;Qi=!0;var At=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Nn;Nn=Qs.current,Qs.current=null,zr();try{if(we){var Xt=function(){throw Error()};if(Object.defineProperty(Xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xt,[])}catch(yi){rt=yi}Reflect.construct(K,[],Xt)}else{try{Xt.call()}catch(yi){rt=yi}K.call(Xt.prototype)}}else{try{throw Error()}catch(yi){rt=yi}K()}}catch(yi){if(yi&&rt&&typeof yi.stack=="string"){for(var In=yi.stack.split(`
`),lr=rt.stack.split(`
`),jr=In.length-1,Xr=lr.length-1;jr>=1&&Xr>=0&&In[jr]!==lr[Xr];)Xr--;for(;jr>=1&&Xr>=0;jr--,Xr--)if(In[jr]!==lr[Xr]){if(jr!==1||Xr!==1)do if(jr--,Xr--,Xr<0||In[jr]!==lr[Xr]){var Jr=`
`+In[jr].replace(" at new "," at ");return K.displayName&&Jr.includes("<anonymous>")&&(Jr=Jr.replace("<anonymous>",K.displayName)),typeof K=="function"&&$o.set(K,Jr),Jr}while(jr>=1&&Xr>=0);break}}}finally{Qi=!1,Qs.current=Nn,Kn(),Error.prepareStackTrace=At}var rr=K?K.displayName||K.name:"",Qr=rr?yo(rr):"";return typeof K=="function"&&$o.set(K,Qr),Qr}function wl(K,we,Ye){return au(K,!1)}function vc(K){var we=K.prototype;return!!(we&&we.isReactComponent)}function to(K,we,Ye){if(K==null)return"";if(typeof K=="function")return au(K,vc(K));if(typeof K=="string")return yo(K);switch(K){case B:return yo("Suspense");case W:return yo("SuspenseList")}if(typeof K=="object")switch(K.$$typeof){case O:return wl(K.render);case ie:return to(K.type,we,Ye);case pe:{var rt=K,At=rt._payload,Nn=rt._init;try{return to(Nn(At),we,Ye)}catch{}}}return""}var Oa={},Cl=Lt.ReactDebugCurrentFrame;function or(K){if(K){var we=K._owner,Ye=to(K.type,K._source,we?we.type:null);Cl.setExtraStackFrame(Ye)}else Cl.setExtraStackFrame(null)}function od(K,we,Ye,rt,At){{var Nn=Function.call.bind(mr);for(var Xt in K)if(Nn(K,Xt)){var In=void 0;try{if(typeof K[Xt]!="function"){var lr=Error((rt||"React class")+": "+Ye+" type `"+Xt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof K[Xt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw lr.name="Invariant Violation",lr}In=K[Xt](we,Xt,rt,Ye,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(jr){In=jr}In&&!(In instanceof Error)&&(or(At),at("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",rt||"React class",Ye,Xt,typeof In),or(null)),In instanceof Error&&!(In.message in Oa)&&(Oa[In.message]=!0,or(At),at("Failed %s type: %s",Ye,In.message),or(null))}}}function bo(K){if(K){var we=K._owner,Ye=to(K.type,K._source,we?we.type:null);Tt(Ye)}else Tt(null)}var Mn;Mn=!1;function Nl(){if(Je.current){var K=We(Je.current.type);if(K)return`

Check the render method of \``+K+"`."}return""}function gs(K){if(K!==void 0){var we=K.fileName.replace(/^.*[\\\/]/,""),Ye=K.lineNumber;return`

Check your code at `+we+":"+Ye+"."}return""}function Sl(K){return K!=null?gs(K.__source):""}var xo={};function ld(K){var we=Nl();if(!we){var Ye=typeof K=="string"?K:K.displayName||K.name;Ye&&(we=`

Check the top-level render call using <`+Ye+">.")}return we}function ki(K,we){if(!(!K._store||K._store.validated||K.key!=null)){K._store.validated=!0;var Ye=ld(we);if(!xo[Ye]){xo[Ye]=!0;var rt="";K&&K._owner&&K._owner!==Je.current&&(rt=" It was passed a child from "+We(K._owner.type)+"."),bo(K),at('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ye,rt),bo(null)}}}function oi(K,we){if(typeof K=="object"){if(Wn(K))for(var Ye=0;Ye<K.length;Ye++){var rt=K[Ye];br(rt)&&ki(rt,we)}else if(br(K))K._store&&(K._store.validated=!0);else if(K){var At=Ce(K);if(typeof At=="function"&&At!==K.entries)for(var Nn=At.call(K),Xt;!(Xt=Nn.next()).done;)br(Xt.value)&&ki(Xt.value,we)}}}function ou(K){{var we=K.type;if(we==null||typeof we=="string")return;var Ye;if(typeof we=="function")Ye=we.propTypes;else if(typeof we=="object"&&(we.$$typeof===O||we.$$typeof===ie))Ye=we.propTypes;else return;if(Ye){var rt=We(we);od(Ye,K.props,"prop",rt,K)}else if(we.PropTypes!==void 0&&!Mn){Mn=!0;var At=We(we);at("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",At||"Unknown")}typeof we.getDefaultProps=="function"&&!we.getDefaultProps.isReactClassApproved&&at("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function qs(K){{for(var we=Object.keys(K.props),Ye=0;Ye<we.length;Ye++){var rt=we[Ye];if(rt!=="children"&&rt!=="key"){bo(K),at("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",rt),bo(null);break}}K.ref!==null&&(bo(K),at("Invalid attribute `ref` supplied to `React.Fragment`."),bo(null))}}function os(K,we,Ye){var rt=ke(K);if(!rt){var At="";(K===void 0||typeof K=="object"&&K!==null&&Object.keys(K).length===0)&&(At+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Nn=Sl(we);Nn?At+=Nn:At+=Nl();var Xt;K===null?Xt="null":Wn(K)?Xt="array":K!==void 0&&K.$$typeof===c?(Xt="<"+(We(K.type)||"Unknown")+" />",At=" Did you accidentally export a JSX literal instead of a component?"):Xt=typeof K,at("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Xt,At)}var In=nt.apply(this,arguments);if(In==null)return In;if(rt)for(var lr=2;lr<arguments.length;lr++)oi(arguments[lr],K);return K===S?qs(In):ou(In),In}var ls=!1;function yc(K){var we=os.bind(null,K);return we.type=K,ls||(ls=!0,hn("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(we,"type",{enumerable:!1,get:function(){return hn("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:K}),K}}),we}function vs(K,we,Ye){for(var rt=Dn.apply(this,arguments),At=2;At<arguments.length;At++)oi(arguments[At],rt.type);return ou(rt),rt}function El(K,we){var Ye=Ue.transition;Ue.transition={};var rt=Ue.transition;Ue.transition._updatedFibers=new Set;try{K()}finally{if(Ue.transition=Ye,Ye===null&&rt._updatedFibers){var At=rt._updatedFibers.size;At>10&&hn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),rt._updatedFibers.clear()}}}var qo=!1,no=null;function bc(K){if(no===null)try{var we=("require"+Math.random()).slice(0,7),Ye=o&&o[we];no=Ye.call(o,"timers").setImmediate}catch{no=function(At){qo===!1&&(qo=!0,typeof MessageChannel>"u"&&at("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Nn=new MessageChannel;Nn.port1.onmessage=At,Nn.port2.postMessage(void 0)}}return no(K)}var ea=0,Hs=!1;function Yn(K){{var we=ea;ea++,Oe.current===null&&(Oe.current=[]);var Ye=Oe.isBatchingLegacy,rt;try{if(Oe.isBatchingLegacy=!0,rt=K(),!Ye&&Oe.didScheduleLegacyUpdate){var At=Oe.current;At!==null&&(Oe.didScheduleLegacyUpdate=!1,Ho(At))}}catch(rr){throw va(we),rr}finally{Oe.isBatchingLegacy=Ye}if(rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var Nn=rt,Xt=!1,In={then:function(rr,Qr){Xt=!0,Nn.then(function(yi){va(we),ea===0?es(yi,rr,Qr):rr(yi)},function(yi){va(we),Qr(yi)})}};return!Hs&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Xt||(Hs=!0,at("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),In}else{var lr=rt;if(va(we),ea===0){var jr=Oe.current;jr!==null&&(Ho(jr),Oe.current=null);var Xr={then:function(rr,Qr){Oe.current===null?(Oe.current=[],es(lr,rr,Qr)):rr(lr)}};return Xr}else{var Jr={then:function(rr,Qr){rr(lr)}};return Jr}}}}function va(K){K!==ea-1&&at("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),ea=K}function es(K,we,Ye){{var rt=Oe.current;if(rt!==null)try{Ho(rt),bc(function(){rt.length===0?(Oe.current=null,we(K)):es(K,we,Ye)})}catch(At){Ye(At)}else we(K)}}var ts=!1;function Ho(K){if(!ts){ts=!0;var we=0;try{for(;we<K.length;we++){var Ye=K[we];do Ye=Ye(!0);while(Ye!==null)}K.length=0}catch(rt){throw K=K.slice(we+1),rt}finally{ts=!1}}}var Dl=os,Tl=vs,Pl=yc,xc={map:fe,forEach:G,count:I,toArray:J,only:se};t.Children=xc,t.Component=ze,t.Fragment=S,t.Profiler=u,t.PureComponent=zt,t.StrictMode=b,t.Suspense=B,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lt,t.act=Yn,t.cloneElement=Tl,t.createContext=he,t.createElement=Dl,t.createFactory=Pl,t.createRef=vr,t.forwardRef=Ee,t.isValidElement=br,t.lazy=ne,t.memo=Be,t.startTransition=El,t.unstable_act=Yn,t.useCallback=qn,t.useContext=ct,t.useDebugValue=Hr,t.useDeferredValue=$s,t.useEffect=qt,t.useId=gc,t.useImperativeHandle=Yr,t.useInsertionEffect=En,t.useLayoutEffect=_n,t.useMemo=Zn,t.useReducer=Ut,t.useRef=Ct,t.useState=mt,t.useSyncExternalStore=xr,t.useTransition=kn,t.version=a,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Jx,Jx.exports);var KL=Jx.exports;dj.exports=KL;var de=dj.exports;const aN=cj(de),YL=WL({__proto__:null,default:aN},[de]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=de,t=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),u=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),pe=Symbol.iterator,Ve="@@iterator";function Pe(ne){if(ne===null||typeof ne!="object")return null;var Ee=pe&&ne[pe]||ne[Ve];return typeof Ee=="function"?Ee:null}var Se=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ce(ne){{for(var Ee=arguments.length,te=new Array(Ee>1?Ee-1:0),ke=1;ke<Ee;ke++)te[ke-1]=arguments[ke];_e("error",ne,te)}}function _e(ne,Ee,te){{var ke=Se.ReactDebugCurrentFrame,Be=ke.getStackAddendum();Be!==""&&(Ee+="%s",te=te.concat([Be]));var Ze=te.map(function(ct){return String(ct)});Ze.unshift("Warning: "+Ee),Function.prototype.apply.call(console[ne],console,Ze)}}var Ue=!1,Oe=!1,Je=!1,tt=!1,ut=!1,Tt;Tt=Symbol.for("react.module.reference");function pt(ne){return!!(typeof ne=="string"||typeof ne=="function"||ne===c||ne===S||ut||ne===g||ne===A||ne===O||tt||ne===ie||Ue||Oe||Je||typeof ne=="object"&&ne!==null&&(ne.$$typeof===W||ne.$$typeof===B||ne.$$typeof===b||ne.$$typeof===u||ne.$$typeof===k||ne.$$typeof===Tt||ne.getModuleId!==void 0))}function Yt(ne,Ee,te){var ke=ne.displayName;if(ke)return ke;var Be=Ee.displayName||Ee.name||"";return Be!==""?te+"("+Be+")":te}function ft(ne){return ne.displayName||"Context"}function bt(ne){if(ne==null)return null;if(typeof ne.tag=="number"&&Ce("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof ne=="function")return ne.displayName||ne.name||null;if(typeof ne=="string")return ne;switch(ne){case c:return"Fragment";case a:return"Portal";case S:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if(typeof ne=="object")switch(ne.$$typeof){case u:var Ee=ne;return ft(Ee)+".Consumer";case b:var te=ne;return ft(te._context)+".Provider";case k:return Yt(ne,ne.render,"ForwardRef");case B:var ke=ne.displayName||null;return ke!==null?ke:bt(ne.type)||"Memo";case W:{var Be=ne,Ze=Be._payload,ct=Be._init;try{return bt(ct(Ze))}catch{return null}}}return null}var It=Object.assign,Lt=0,hn,at,Zt,bn,ln,Bn,An;function wt(){}wt.__reactDisabledLog=!0;function ze(){{if(Lt===0){hn=console.log,at=console.info,Zt=console.warn,bn=console.error,ln=console.group,Bn=console.groupCollapsed,An=console.groupEnd;var ne={configurable:!0,enumerable:!0,value:wt,writable:!0};Object.defineProperties(console,{info:ne,log:ne,warn:ne,error:ne,group:ne,groupCollapsed:ne,groupEnd:ne})}Lt++}}function Pt(){{if(Lt--,Lt===0){var ne={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:It({},ne,{value:hn}),info:It({},ne,{value:at}),warn:It({},ne,{value:Zt}),error:It({},ne,{value:bn}),group:It({},ne,{value:ln}),groupCollapsed:It({},ne,{value:Bn}),groupEnd:It({},ne,{value:An})})}Lt<0&&Ce("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var nn=Se.ReactCurrentDispatcher,yn;function Ft(ne,Ee,te){{if(yn===void 0)try{throw Error()}catch(Be){var ke=Be.stack.trim().match(/\n( *(at )?)/);yn=ke&&ke[1]||""}return`
`+yn+ne}}var zt=!1,mn;{var vr=typeof WeakMap=="function"?WeakMap:Map;mn=new vr}function fn(ne,Ee){if(!ne||zt)return"";{var te=mn.get(ne);if(te!==void 0)return te}var ke;zt=!0;var Be=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ze;Ze=nn.current,nn.current=null,ze();try{if(Ee){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Zn){ke=Zn}Reflect.construct(ne,[],ct)}else{try{ct.call()}catch(Zn){ke=Zn}ne.call(ct.prototype)}}else{try{throw Error()}catch(Zn){ke=Zn}ne()}}catch(Zn){if(Zn&&ke&&typeof Zn.stack=="string"){for(var mt=Zn.stack.split(`
`),Ut=ke.stack.split(`
`),Ct=mt.length-1,qt=Ut.length-1;Ct>=1&&qt>=0&&mt[Ct]!==Ut[qt];)qt--;for(;Ct>=1&&qt>=0;Ct--,qt--)if(mt[Ct]!==Ut[qt]){if(Ct!==1||qt!==1)do if(Ct--,qt--,qt<0||mt[Ct]!==Ut[qt]){var En=`
`+mt[Ct].replace(" at new "," at ");return ne.displayName&&En.includes("<anonymous>")&&(En=En.replace("<anonymous>",ne.displayName)),typeof ne=="function"&&mn.set(ne,En),En}while(Ct>=1&&qt>=0);break}}}finally{zt=!1,nn.current=Ze,Pt(),Error.prepareStackTrace=Be}var _n=ne?ne.displayName||ne.name:"",qn=_n?Ft(_n):"";return typeof ne=="function"&&mn.set(ne,qn),qn}function Wn(ne,Ee,te){return fn(ne,!1)}function $r(ne){var Ee=ne.prototype;return!!(Ee&&Ee.isReactComponent)}function Sr(ne,Ee,te){if(ne==null)return"";if(typeof ne=="function")return fn(ne,$r(ne));if(typeof ne=="string")return Ft(ne);switch(ne){case A:return Ft("Suspense");case O:return Ft("SuspenseList")}if(typeof ne=="object")switch(ne.$$typeof){case k:return Wn(ne.render);case B:return Sr(ne.type,Ee,te);case W:{var ke=ne,Be=ke._payload,Ze=ke._init;try{return Sr(Ze(Be),Ee,te)}catch{}}}return""}var ur=Object.prototype.hasOwnProperty,fi={},Rr=Se.ReactDebugCurrentFrame;function ii(ne){if(ne){var Ee=ne._owner,te=Sr(ne.type,ne._source,Ee?Ee.type:null);Rr.setExtraStackFrame(te)}else Rr.setExtraStackFrame(null)}function We(ne,Ee,te,ke,Be){{var Ze=Function.call.bind(ur);for(var ct in ne)if(Ze(ne,ct)){var mt=void 0;try{if(typeof ne[ct]!="function"){var Ut=Error((ke||"React class")+": "+te+" type `"+ct+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ne[ct]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ut.name="Invariant Violation",Ut}mt=ne[ct](Ee,ct,ke,te,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ct){mt=Ct}mt&&!(mt instanceof Error)&&(ii(Be),Ce("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ke||"React class",te,ct,typeof mt),ii(null)),mt instanceof Error&&!(mt.message in fi)&&(fi[mt.message]=!0,ii(Be),Ce("Failed %s type: %s",te,mt.message),ii(null))}}}var mr=Array.isArray;function ir(ne){return mr(ne)}function Vn(ne){{var Ee=typeof Symbol=="function"&&Symbol.toStringTag,te=Ee&&ne[Symbol.toStringTag]||ne.constructor.name||"Object";return te}}function Rn(ne){try{return yr(ne),!1}catch{return!0}}function yr(ne){return""+ne}function si(ne){if(Rn(ne))return Ce("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Vn(ne)),yr(ne)}var qr=Se.ReactCurrentOwner,ms={key:!0,ref:!0,__self:!0,__source:!0},Ui,jt,an;an={};function nt(ne){if(ur.call(ne,"ref")){var Ee=Object.getOwnPropertyDescriptor(ne,"ref").get;if(Ee&&Ee.isReactWarning)return!1}return ne.ref!==void 0}function Fn(ne){if(ur.call(ne,"key")){var Ee=Object.getOwnPropertyDescriptor(ne,"key").get;if(Ee&&Ee.isReactWarning)return!1}return ne.key!==void 0}function Dn(ne,Ee){if(typeof ne.ref=="string"&&qr.current&&Ee&&qr.current.stateNode!==Ee){var te=bt(qr.current.type);an[te]||(Ce('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',bt(qr.current.type),ne.ref),an[te]=!0)}}function br(ne,Ee){{var te=function(){Ui||(Ui=!0,Ce("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ee))};te.isReactWarning=!0,Object.defineProperty(ne,"key",{get:te,configurable:!0})}}function dr(ne,Ee){{var te=function(){jt||(jt=!0,Ce("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ee))};te.isReactWarning=!0,Object.defineProperty(ne,"ref",{get:te,configurable:!0})}}var gt=function(ne,Ee,te,ke,Be,Ze,ct){var mt={$$typeof:t,type:ne,key:Ee,ref:te,props:ct,_owner:Ze};return mt._store={},Object.defineProperty(mt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(mt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ke}),Object.defineProperty(mt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Be}),Object.freeze&&(Object.freeze(mt.props),Object.freeze(mt)),mt};function Kt(ne,Ee,te,ke,Be){{var Ze,ct={},mt=null,Ut=null;te!==void 0&&(si(te),mt=""+te),Fn(Ee)&&(si(Ee.key),mt=""+Ee.key),nt(Ee)&&(Ut=Ee.ref,Dn(Ee,Be));for(Ze in Ee)ur.call(Ee,Ze)&&!ms.hasOwnProperty(Ze)&&(ct[Ze]=Ee[Ze]);if(ne&&ne.defaultProps){var Ct=ne.defaultProps;for(Ze in Ct)ct[Ze]===void 0&&(ct[Ze]=Ct[Ze])}if(mt||Ut){var qt=typeof ne=="function"?ne.displayName||ne.name||"Unknown":ne;mt&&br(ct,qt),Ut&&dr(ct,qt)}return gt(ne,mt,Ut,Be,ke,qr.current,ct)}}var $t=Se.ReactCurrentOwner,zn=Se.ReactDebugCurrentFrame;function Kr(ne){if(ne){var Ee=ne._owner,te=Sr(ne.type,ne._source,Ee?Ee.type:null);zn.setExtraStackFrame(te)}else zn.setExtraStackFrame(null)}var pn;pn=!1;function ai(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function fe(){{if($t.current){var ne=bt($t.current.type);if(ne)return`

Check the render method of \``+ne+"`."}return""}}function I(ne){{if(ne!==void 0){var Ee=ne.fileName.replace(/^.*[\\\/]/,""),te=ne.lineNumber;return`

Check your code at `+Ee+":"+te+"."}return""}}var G={};function J(ne){{var Ee=fe();if(!Ee){var te=typeof ne=="string"?ne:ne.displayName||ne.name;te&&(Ee=`

Check the top-level render call using <`+te+">.")}return Ee}}function se(ne,Ee){{if(!ne._store||ne._store.validated||ne.key!=null)return;ne._store.validated=!0;var te=J(Ee);if(G[te])return;G[te]=!0;var ke="";ne&&ne._owner&&ne._owner!==$t.current&&(ke=" It was passed a child from "+bt(ne._owner.type)+"."),Kr(ne),Ce('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',te,ke),Kr(null)}}function he(ne,Ee){{if(typeof ne!="object")return;if(ir(ne))for(var te=0;te<ne.length;te++){var ke=ne[te];ai(ke)&&se(ke,Ee)}else if(ai(ne))ne._store&&(ne._store.validated=!0);else if(ne){var Be=Pe(ne);if(typeof Be=="function"&&Be!==ne.entries)for(var Ze=Be.call(ne),ct;!(ct=Ze.next()).done;)ai(ct.value)&&se(ct.value,Ee)}}}function Ne(ne){{var Ee=ne.type;if(Ee==null||typeof Ee=="string")return;var te;if(typeof Ee=="function")te=Ee.propTypes;else if(typeof Ee=="object"&&(Ee.$$typeof===k||Ee.$$typeof===B))te=Ee.propTypes;else return;if(te){var ke=bt(Ee);We(te,ne.props,"prop",ke,ne)}else if(Ee.PropTypes!==void 0&&!pn){pn=!0;var Be=bt(Ee);Ce("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Be||"Unknown")}typeof Ee.getDefaultProps=="function"&&!Ee.getDefaultProps.isReactClassApproved&&Ce("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function xe(ne){{for(var Ee=Object.keys(ne.props),te=0;te<Ee.length;te++){var ke=Ee[te];if(ke!=="children"&&ke!=="key"){Kr(ne),Ce("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ke),Kr(null);break}}ne.ref!==null&&(Kr(ne),Ce("Invalid attribute `ref` supplied to `React.Fragment`."),Kr(null))}}var ge={};function Te(ne,Ee,te,ke,Be,Ze){{var ct=pt(ne);if(!ct){var mt="";(ne===void 0||typeof ne=="object"&&ne!==null&&Object.keys(ne).length===0)&&(mt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ut=I(Be);Ut?mt+=Ut:mt+=fe();var Ct;ne===null?Ct="null":ir(ne)?Ct="array":ne!==void 0&&ne.$$typeof===t?(Ct="<"+(bt(ne.type)||"Unknown")+" />",mt=" Did you accidentally export a JSX literal instead of a component?"):Ct=typeof ne,Ce("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ct,mt)}var qt=Kt(ne,Ee,te,Be,Ze);if(qt==null)return qt;if(ct){var En=Ee.children;if(En!==void 0)if(ke)if(ir(En)){for(var _n=0;_n<En.length;_n++)he(En[_n],ne);Object.freeze&&Object.freeze(En)}else Ce("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else he(En,ne)}if(ur.call(Ee,"key")){var qn=bt(ne),Zn=Object.keys(Ee).filter(function(kn){return kn!=="key"}),Yr=Zn.length>0?"{key: someKey, "+Zn.join(": ..., ")+": ...}":"{key: someKey}";if(!ge[qn+Yr]){var Hr=Zn.length>0?"{"+Zn.join(": ..., ")+": ...}":"{}";Ce(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Yr,qn,Hr,qn),ge[qn+Yr]=!0}}return ne===c?xe(qt):Ne(qt),qt}}var Qe=Te;gC.Fragment=c,gC.jsxDEV=Qe})();uj.exports=gC;var _=uj.exports,vC={},hj={exports:{}},Bo={},fj={exports:{}},mj={};(function(o){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=!1,a=5;function c(jt,an){var nt=jt.length;jt.push(an),b(jt,an,nt)}function g(jt){return jt.length===0?null:jt[0]}function S(jt){if(jt.length===0)return null;var an=jt[0],nt=jt.pop();return nt!==an&&(jt[0]=nt,u(jt,nt,0)),an}function b(jt,an,nt){for(var Fn=nt;Fn>0;){var Dn=Fn-1>>>1,br=jt[Dn];if(k(br,an)>0)jt[Dn]=an,jt[Fn]=br,Fn=Dn;else return}}function u(jt,an,nt){for(var Fn=nt,Dn=jt.length,br=Dn>>>1;Fn<br;){var dr=(Fn+1)*2-1,gt=jt[dr],Kt=dr+1,$t=jt[Kt];if(k(gt,an)<0)Kt<Dn&&k($t,gt)<0?(jt[Fn]=$t,jt[Kt]=an,Fn=Kt):(jt[Fn]=gt,jt[dr]=an,Fn=dr);else if(Kt<Dn&&k($t,an)<0)jt[Fn]=$t,jt[Kt]=an,Fn=Kt;else return}}function k(jt,an){var nt=jt.sortIndex-an.sortIndex;return nt!==0?nt:jt.id-an.id}var A=1,O=2,B=3,W=4,ie=5;function pe(jt,an){}var Ve=typeof performance=="object"&&typeof performance.now=="function";if(Ve){var Pe=performance;o.unstable_now=function(){return Pe.now()}}else{var Se=Date,Ce=Se.now();o.unstable_now=function(){return Se.now()-Ce}}var _e=1073741823,Ue=-1,Oe=250,Je=5e3,tt=1e4,ut=_e,Tt=[],pt=[],Yt=1,ft=null,bt=B,It=!1,Lt=!1,hn=!1,at=typeof setTimeout=="function"?setTimeout:null,Zt=typeof clearTimeout=="function"?clearTimeout:null,bn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ln(jt){for(var an=g(pt);an!==null;){if(an.callback===null)S(pt);else if(an.startTime<=jt)S(pt),an.sortIndex=an.expirationTime,c(Tt,an);else return;an=g(pt)}}function Bn(jt){if(hn=!1,ln(jt),!Lt)if(g(Tt)!==null)Lt=!0,yr(An);else{var an=g(pt);an!==null&&si(Bn,an.startTime-jt)}}function An(jt,an){Lt=!1,hn&&(hn=!1,qr()),It=!0;var nt=bt;try{var Fn;if(!t)return wt(jt,an)}finally{ft=null,bt=nt,It=!1}}function wt(jt,an){var nt=an;for(ln(nt),ft=g(Tt);ft!==null&&!(ft.expirationTime>nt&&(!jt||Rr()));){var Fn=ft.callback;if(typeof Fn=="function"){ft.callback=null,bt=ft.priorityLevel;var Dn=ft.expirationTime<=nt,br=Fn(Dn);nt=o.unstable_now(),typeof br=="function"?ft.callback=br:ft===g(Tt)&&S(Tt),ln(nt)}else S(Tt);ft=g(Tt)}if(ft!==null)return!0;var dr=g(pt);return dr!==null&&si(Bn,dr.startTime-nt),!1}function ze(jt,an){switch(jt){case A:case O:case B:case W:case ie:break;default:jt=B}var nt=bt;bt=jt;try{return an()}finally{bt=nt}}function Pt(jt){var an;switch(bt){case A:case O:case B:an=B;break;default:an=bt;break}var nt=bt;bt=an;try{return jt()}finally{bt=nt}}function nn(jt){var an=bt;return function(){var nt=bt;bt=an;try{return jt.apply(this,arguments)}finally{bt=nt}}}function yn(jt,an,nt){var Fn=o.unstable_now(),Dn;if(typeof nt=="object"&&nt!==null){var br=nt.delay;typeof br=="number"&&br>0?Dn=Fn+br:Dn=Fn}else Dn=Fn;var dr;switch(jt){case A:dr=Ue;break;case O:dr=Oe;break;case ie:dr=ut;break;case W:dr=tt;break;case B:default:dr=Je;break}var gt=Dn+dr,Kt={id:Yt++,callback:an,priorityLevel:jt,startTime:Dn,expirationTime:gt,sortIndex:-1};return Dn>Fn?(Kt.sortIndex=Dn,c(pt,Kt),g(Tt)===null&&Kt===g(pt)&&(hn?qr():hn=!0,si(Bn,Dn-Fn))):(Kt.sortIndex=gt,c(Tt,Kt),!Lt&&!It&&(Lt=!0,yr(An))),Kt}function Ft(){}function zt(){!Lt&&!It&&(Lt=!0,yr(An))}function mn(){return g(Tt)}function vr(jt){jt.callback=null}function fn(){return bt}var Wn=!1,$r=null,Sr=-1,ur=a,fi=-1;function Rr(){var jt=o.unstable_now()-fi;return!(jt<ur)}function ii(){}function We(jt){if(jt<0||jt>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}jt>0?ur=Math.floor(1e3/jt):ur=a}var mr=function(){if($r!==null){var jt=o.unstable_now();fi=jt;var an=!0,nt=!0;try{nt=$r(an,jt)}finally{nt?ir():(Wn=!1,$r=null)}}else Wn=!1},ir;if(typeof bn=="function")ir=function(){bn(mr)};else if(typeof MessageChannel<"u"){var Vn=new MessageChannel,Rn=Vn.port2;Vn.port1.onmessage=mr,ir=function(){Rn.postMessage(null)}}else ir=function(){at(mr,0)};function yr(jt){$r=jt,Wn||(Wn=!0,ir())}function si(jt,an){Sr=at(function(){jt(o.unstable_now())},an)}function qr(){Zt(Sr),Sr=-1}var ms=ii,Ui=null;o.unstable_IdlePriority=ie,o.unstable_ImmediatePriority=A,o.unstable_LowPriority=W,o.unstable_NormalPriority=B,o.unstable_Profiling=Ui,o.unstable_UserBlockingPriority=O,o.unstable_cancelCallback=vr,o.unstable_continueExecution=zt,o.unstable_forceFrameRate=We,o.unstable_getCurrentPriorityLevel=fn,o.unstable_getFirstCallbackNode=mn,o.unstable_next=Pt,o.unstable_pauseExecution=Ft,o.unstable_requestPaint=ms,o.unstable_runWithPriority=ze,o.unstable_scheduleCallback=yn,o.unstable_shouldYield=Rr,o.unstable_wrapCallback=nn,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(mj);fj.exports=mj;var XL=fj.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var o=de,t=XL,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=!1;function g(e){c=e}function S(e){if(!c){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];u("warn",e,h)}}function b(e){if(!c){for(var i=arguments.length,h=new Array(i>1?i-1:0),p=1;p<i;p++)h[p-1]=arguments[p];u("error",e,h)}}function u(e,i,h){{var p=a.ReactDebugCurrentFrame,C=p.getStackAddendum();C!==""&&(i+="%s",h=h.concat([C]));var D=h.map(function(L){return String(L)});D.unshift("Warning: "+i),Function.prototype.apply.call(console[e],console,D)}}var k=0,A=1,O=2,B=3,W=4,ie=5,pe=6,Ve=7,Pe=8,Se=9,Ce=10,_e=11,Ue=12,Oe=13,Je=14,tt=15,ut=16,Tt=17,pt=18,Yt=19,ft=21,bt=22,It=23,Lt=24,hn=25,at=!0,Zt=!1,bn=!1,ln=!1,Bn=!1,An=!0,wt=!0,ze=!0,Pt=!0,nn=new Set,yn={},Ft={};function zt(e,i){mn(e,i),mn(e+"Capture",i)}function mn(e,i){yn[e]&&b("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",e),yn[e]=i;{var h=e.toLowerCase();Ft[h]=e,e==="onDoubleClick"&&(Ft.ondblclick=e)}for(var p=0;p<i.length;p++)nn.add(i[p])}var vr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fn=Object.prototype.hasOwnProperty;function Wn(e){{var i=typeof Symbol=="function"&&Symbol.toStringTag,h=i&&e[Symbol.toStringTag]||e.constructor.name||"Object";return h}}function $r(e){try{return Sr(e),!1}catch{return!0}}function Sr(e){return""+e}function ur(e,i){if($r(e))return b("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Wn(e)),Sr(e)}function fi(e){if($r(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Wn(e)),Sr(e)}function Rr(e,i){if($r(e))return b("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Wn(e)),Sr(e)}function ii(e,i){if($r(e))return b("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",i,Wn(e)),Sr(e)}function We(e){if($r(e))return b("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Wn(e)),Sr(e)}function mr(e){if($r(e))return b("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Wn(e)),Sr(e)}var ir=0,Vn=1,Rn=2,yr=3,si=4,qr=5,ms=6,Ui=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",jt=Ui+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",an=new RegExp("^["+Ui+"]["+jt+"]*$"),nt={},Fn={};function Dn(e){return fn.call(Fn,e)?!0:fn.call(nt,e)?!1:an.test(e)?(Fn[e]=!0,!0):(nt[e]=!0,b("Invalid attribute name: `%s`",e),!1)}function br(e,i,h){return i!==null?i.type===ir:h?!1:e.length>2&&(e[0]==="o"||e[0]==="O")&&(e[1]==="n"||e[1]==="N")}function dr(e,i,h,p){if(h!==null&&h.type===ir)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":{if(p)return!1;if(h!==null)return!h.acceptsBooleans;var C=e.toLowerCase().slice(0,5);return C!=="data-"&&C!=="aria-"}default:return!1}}function gt(e,i,h,p){if(i===null||typeof i>"u"||dr(e,i,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case yr:return!i;case si:return i===!1;case qr:return isNaN(i);case ms:return isNaN(i)||i<1}return!1}function Kt(e){return zn.hasOwnProperty(e)?zn[e]:null}function $t(e,i,h,p,C,D,L){this.acceptsBooleans=i===Rn||i===yr||i===si,this.attributeName=p,this.attributeNamespace=C,this.mustUseProperty=h,this.propertyName=e,this.type=i,this.sanitizeURL=D,this.removeEmptyString=L}var zn={},Kr=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Kr.forEach(function(e){zn[e]=new $t(e,ir,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0],h=e[1];zn[i]=new $t(i,Vn,!1,h,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){zn[e]=new $t(e,Rn,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zn[e]=new $t(e,Rn,!1,e,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){zn[e]=new $t(e,yr,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){zn[e]=new $t(e,yr,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){zn[e]=new $t(e,si,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){zn[e]=new $t(e,ms,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){zn[e]=new $t(e,qr,!1,e.toLowerCase(),null,!1,!1)});var pn=/[\-\:]([a-z])/g,ai=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var i=e.replace(pn,ai);zn[i]=new $t(i,Vn,!1,e,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var i=e.replace(pn,ai);zn[i]=new $t(i,Vn,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(pn,ai);zn[i]=new $t(i,Vn,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){zn[e]=new $t(e,Vn,!1,e.toLowerCase(),null,!1,!1)});var fe="xlinkHref";zn[fe]=new $t("xlinkHref",Vn,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){zn[e]=new $t(e,Vn,!1,e.toLowerCase(),null,!0,!0)});var I=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,G=!1;function J(e){!G&&I.test(e)&&(G=!0,b("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function se(e,i,h,p){if(p.mustUseProperty){var C=p.propertyName;return e[C]}else{ur(h,i),p.sanitizeURL&&J(""+h);var D=p.attributeName,L=null;if(p.type===si){if(e.hasAttribute(D)){var $=e.getAttribute(D);return $===""?!0:gt(i,h,p,!1)?$:$===""+h?h:$}}else if(e.hasAttribute(D)){if(gt(i,h,p,!1))return e.getAttribute(D);if(p.type===yr)return h;L=e.getAttribute(D)}return gt(i,h,p,!1)?L===null?h:L:L===""+h?h:L}}function he(e,i,h,p){{if(!Dn(i))return;if(!e.hasAttribute(i))return h===void 0?void 0:null;var C=e.getAttribute(i);return ur(h,i),C===""+h?h:C}}function Ne(e,i,h,p){var C=Kt(i);if(!br(i,C,p)){if(gt(i,h,C,p)&&(h=null),p||C===null){if(Dn(i)){var D=i;h===null?e.removeAttribute(D):(ur(h,i),e.setAttribute(D,""+h))}return}var L=C.mustUseProperty;if(L){var $=C.propertyName;if(h===null){var Z=C.type;e[$]=Z===yr?!1:""}else e[$]=h;return}var re=C.attributeName,ue=C.attributeNamespace;if(h===null)e.removeAttribute(re);else{var Ie=C.type,Re;Ie===yr||Ie===si&&h===!0?Re="":(ur(h,re),Re=""+h,C.sanitizeURL&&J(Re.toString())),ue?e.setAttributeNS(ue,re,Re):e.setAttribute(re,Re)}}}var xe=Symbol.for("react.element"),ge=Symbol.for("react.portal"),Te=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),te=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),Ut=Symbol.for("react.scope"),Ct=Symbol.for("react.debug_trace_mode"),qt=Symbol.for("react.offscreen"),En=Symbol.for("react.legacy_hidden"),_n=Symbol.for("react.cache"),qn=Symbol.for("react.tracing_marker"),Zn=Symbol.iterator,Yr="@@iterator";function Hr(e){if(e===null||typeof e!="object")return null;var i=Zn&&e[Zn]||e[Yr];return typeof i=="function"?i:null}var kn=Object.assign,$s=0,gc,xr,eo,Uo,Vi,as,su;function ps(){}ps.__reactDisabledLog=!0;function Oi(){{if($s===0){gc=console.log,xr=console.info,eo=console.warn,Uo=console.error,Vi=console.group,as=console.groupCollapsed,su=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ps,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}$s++}}function _l(){{if($s--,$s===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:kn({},e,{value:gc}),info:kn({},e,{value:xr}),warn:kn({},e,{value:eo}),error:kn({},e,{value:Uo}),group:kn({},e,{value:Vi}),groupCollapsed:kn({},e,{value:as}),groupEnd:kn({},e,{value:su})})}$s<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Va=a.ReactCurrentDispatcher,zr;function Kn(e,i,h){{if(zr===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);zr=p&&p[1]||""}return`
`+zr+e}}var Qs=!1,Pr;{var yo=typeof WeakMap=="function"?WeakMap:Map;Pr=new yo}function Qi(e,i){if(!e||Qs)return"";{var h=Pr.get(e);if(h!==void 0)return h}var p;Qs=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=Va.current,Va.current=null,Oi();try{if(i){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(et){p=et}Reflect.construct(e,[],L)}else{try{L.call()}catch(et){p=et}e.call(L.prototype)}}else{try{throw Error()}catch(et){p=et}e()}}catch(et){if(et&&p&&typeof et.stack=="string"){for(var $=et.stack.split(`
`),Z=p.stack.split(`
`),re=$.length-1,ue=Z.length-1;re>=1&&ue>=0&&$[re]!==Z[ue];)ue--;for(;re>=1&&ue>=0;re--,ue--)if($[re]!==Z[ue]){if(re!==1||ue!==1)do if(re--,ue--,ue<0||$[re]!==Z[ue]){var Ie=`
`+$[re].replace(" at new "," at ");return e.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",e.displayName)),typeof e=="function"&&Pr.set(e,Ie),Ie}while(re>=1&&ue>=0);break}}}finally{Qs=!1,Va.current=D,_l(),Error.prepareStackTrace=C}var Re=e?e.displayName||e.name:"",Xe=Re?Kn(Re):"";return typeof e=="function"&&Pr.set(e,Xe),Xe}function $o(e,i,h){return Qi(e,!0)}function ga(e,i,h){return Qi(e,!1)}function au(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function wl(e,i,h){if(e==null)return"";if(typeof e=="function")return Qi(e,au(e));if(typeof e=="string")return Kn(e);switch(e){case Be:return Kn("Suspense");case Ze:return Kn("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case ke:return ga(e.render);case ct:return wl(e.type,i,h);case mt:{var p=e,C=p._payload,D=p._init;try{return wl(D(C),i,h)}catch{}}}return""}function vc(e){switch(e._debugOwner&&e._debugOwner.type,e._debugSource,e.tag){case ie:return Kn(e.type);case ut:return Kn("Lazy");case Oe:return Kn("Suspense");case Yt:return Kn("SuspenseList");case k:case O:case tt:return ga(e.type);case _e:return ga(e.type.render);case A:return $o(e.type);default:return""}}function to(e){try{var i="",h=e;do i+=vc(h),h=h.return;while(h);return i}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Oa(e,i,h){var p=e.displayName;if(p)return p;var C=i.displayName||i.name||"";return C!==""?h+"("+C+")":h}function Cl(e){return e.displayName||"Context"}function or(e){if(e==null)return null;if(typeof e.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Te:return"Fragment";case ge:return"Portal";case ne:return"Profiler";case Qe:return"StrictMode";case Be:return"Suspense";case Ze:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case te:var i=e;return Cl(i)+".Consumer";case Ee:var h=e;return Cl(h._context)+".Provider";case ke:return Oa(e,e.render,"ForwardRef");case ct:var p=e.displayName||null;return p!==null?p:or(e.type)||"Memo";case mt:{var C=e,D=C._payload,L=C._init;try{return or(L(D))}catch{return null}}}return null}function od(e,i,h){var p=i.displayName||i.name||"";return e.displayName||(p!==""?h+"("+p+")":h)}function bo(e){return e.displayName||"Context"}function Mn(e){var i=e.tag,h=e.type;switch(i){case Lt:return"Cache";case Se:var p=h;return bo(p)+".Consumer";case Ce:var C=h;return bo(C._context)+".Provider";case pt:return"DehydratedFragment";case _e:return od(h,h.render,"ForwardRef");case Ve:return"Fragment";case ie:return h;case W:return"Portal";case B:return"Root";case pe:return"Text";case ut:return or(h);case Pe:return h===Qe?"StrictMode":"Mode";case bt:return"Offscreen";case Ue:return"Profiler";case ft:return"Scope";case Oe:return"Suspense";case Yt:return"SuspenseList";case hn:return"TracingMarker";case A:case k:case Tt:case O:case Je:case tt:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;break}return null}var Nl=a.ReactDebugCurrentFrame,gs=null,Sl=!1;function xo(){{if(gs===null)return null;var e=gs._debugOwner;if(e!==null&&typeof e<"u")return Mn(e)}return null}function ld(){return gs===null?"":to(gs)}function ki(){Nl.getCurrentStack=null,gs=null,Sl=!1}function oi(e){Nl.getCurrentStack=e===null?null:ld,gs=e,Sl=!1}function ou(){return gs}function qs(e){Sl=e}function os(e){return""+e}function ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return mr(e),e;default:return""}}var yc={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function vs(e,i){yc[i.type]||i.onChange||i.onInput||i.readOnly||i.disabled||i.value==null||b("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),i.onChange||i.readOnly||i.disabled||i.checked==null||b("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function El(e){var i=e.type,h=e.nodeName;return h&&h.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qo(e){return e._valueTracker}function no(e){e._valueTracker=null}function bc(e){var i="";return e&&(El(e)?i=e.checked?"true":"false":i=e.value),i}function ea(e){var i=El(e)?"checked":"value",h=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);mr(e[i]);var p=""+e[i];if(!(e.hasOwnProperty(i)||typeof h>"u"||typeof h.get!="function"||typeof h.set!="function")){var C=h.get,D=h.set;Object.defineProperty(e,i,{configurable:!0,get:function(){return C.call(this)},set:function($){mr($),p=""+$,D.call(this,$)}}),Object.defineProperty(e,i,{enumerable:h.enumerable});var L={getValue:function(){return p},setValue:function($){mr($),p=""+$},stopTracking:function(){no(e),delete e[i]}};return L}}function Hs(e){qo(e)||(e._valueTracker=ea(e))}function Yn(e){if(!e)return!1;var i=qo(e);if(!i)return!0;var h=i.getValue(),p=bc(e);return p!==h?(i.setValue(p),!0):!1}function va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var es=!1,ts=!1,Ho=!1,Dl=!1;function Tl(e){var i=e.type==="checkbox"||e.type==="radio";return i?e.checked!=null:e.value!=null}function Pl(e,i){var h=e,p=i.checked,C=kn({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??h._wrapperState.initialChecked});return C}function xc(e,i){vs("input",i),i.checked!==void 0&&i.defaultChecked!==void 0&&!ts&&(b("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",xo()||"A component",i.type),ts=!0),i.value!==void 0&&i.defaultValue!==void 0&&!es&&(b("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",xo()||"A component",i.type),es=!0);var h=e,p=i.defaultValue==null?"":i.defaultValue;h._wrapperState={initialChecked:i.checked!=null?i.checked:i.defaultChecked,initialValue:ls(i.value!=null?i.value:p),controlled:Tl(i)}}function K(e,i){var h=e,p=i.checked;p!=null&&Ne(h,"checked",p,!1)}function we(e,i){var h=e;{var p=Tl(i);!h._wrapperState.controlled&&p&&!Dl&&(b("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Dl=!0),h._wrapperState.controlled&&!p&&!Ho&&(b("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Ho=!0)}K(e,i);var C=ls(i.value),D=i.type;if(C!=null)D==="number"?(C===0&&h.value===""||h.value!=C)&&(h.value=os(C)):h.value!==os(C)&&(h.value=os(C));else if(D==="submit"||D==="reset"){h.removeAttribute("value");return}i.hasOwnProperty("value")?Nn(h,i.type,C):i.hasOwnProperty("defaultValue")&&Nn(h,i.type,ls(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(h.defaultChecked=!!i.defaultChecked)}function Ye(e,i,h){var p=e;if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var C=i.type,D=C==="submit"||C==="reset";if(D&&(i.value===void 0||i.value===null))return;var L=os(p._wrapperState.initialValue);h||L!==p.value&&(p.value=L),p.defaultValue=L}var $=p.name;$!==""&&(p.name=""),p.defaultChecked=!p.defaultChecked,p.defaultChecked=!!p._wrapperState.initialChecked,$!==""&&(p.name=$)}function rt(e,i){var h=e;we(h,i),At(h,i)}function At(e,i){var h=i.name;if(i.type==="radio"&&h!=null){for(var p=e;p.parentNode;)p=p.parentNode;ur(h,"name");for(var C=p.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),D=0;D<C.length;D++){var L=C[D];if(!(L===e||L.form!==e.form)){var $=hb(L);if(!$)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Yn(L),we(L,$)}}}}function Nn(e,i,h){(i!=="number"||va(e.ownerDocument)!==e)&&(h==null?e.defaultValue=os(e._wrapperState.initialValue):e.defaultValue!==os(h)&&(e.defaultValue=os(h)))}var Xt=!1,In=!1,lr=!1;function jr(e,i){i.value==null&&(typeof i.children=="object"&&i.children!==null?o.Children.forEach(i.children,function(h){h!=null&&(typeof h=="string"||typeof h=="number"||In||(In=!0,b("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):i.dangerouslySetInnerHTML!=null&&(lr||(lr=!0,b("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),i.selected!=null&&!Xt&&(b("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Xt=!0)}function Xr(e,i){i.value!=null&&e.setAttribute("value",os(ls(i.value)))}var Jr=Array.isArray;function rr(e){return Jr(e)}var Qr;Qr=!1;function yi(){var e=xo();return e?`

Check the render method of \``+e+"`.":""}var _o=["value","defaultValue"];function jl(e){{vs("select",e);for(var i=0;i<_o.length;i++){var h=_o[i];if(e[h]!=null){var p=rr(e[h]);e.multiple&&!p?b("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",h,yi()):!e.multiple&&p&&b("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",h,yi())}}}}function Gs(e,i,h,p){var C=e.options;if(i){for(var D=h,L={},$=0;$<D.length;$++)L["$"+D[$]]=!0;for(var Z=0;Z<C.length;Z++){var re=L.hasOwnProperty("$"+C[Z].value);C[Z].selected!==re&&(C[Z].selected=re),re&&p&&(C[Z].defaultSelected=!0)}}else{for(var ue=os(ls(h)),Ie=null,Re=0;Re<C.length;Re++){if(C[Re].value===ue){C[Re].selected=!0,p&&(C[Re].defaultSelected=!0);return}Ie===null&&!C[Re].disabled&&(Ie=C[Re])}Ie!==null&&(Ie.selected=!0)}}function _c(e,i){return kn({},i,{value:void 0})}function wc(e,i){var h=e;jl(i),h._wrapperState={wasMultiple:!!i.multiple},i.value!==void 0&&i.defaultValue!==void 0&&!Qr&&(b("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Qr=!0)}function lu(e,i){var h=e;h.multiple=!!i.multiple;var p=i.value;p!=null?Gs(h,!!i.multiple,p,!1):i.defaultValue!=null&&Gs(h,!!i.multiple,i.defaultValue,!0)}function ro(e,i){var h=e,p=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Gs(h,!!i.multiple,C,!1):p!==!!i.multiple&&(i.defaultValue!=null?Gs(h,!!i.multiple,i.defaultValue,!0):Gs(h,!!i.multiple,i.multiple?[]:"",!1))}function cd(e,i){var h=e,p=i.value;p!=null&&Gs(h,!!i.multiple,p,!1)}var wo=!1;function Go(e,i){var h=e;if(i.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var p=kn({},i,{value:void 0,defaultValue:void 0,children:os(h._wrapperState.initialValue)});return p}function _h(e,i){var h=e;vs("textarea",i),i.value!==void 0&&i.defaultValue!==void 0&&!wo&&(b("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",xo()||"A component"),wo=!0);var p=i.value;if(p==null){var C=i.children,D=i.defaultValue;if(C!=null){b("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(rr(C)){if(C.length>1)throw new Error("<textarea> can only have at most one child.");C=C[0]}D=C}}D==null&&(D=""),p=D}h._wrapperState={initialValue:ls(p)}}function ud(e,i){var h=e,p=ls(i.value),C=ls(i.defaultValue);if(p!=null){var D=os(p);D!==h.value&&(h.value=D),i.defaultValue==null&&h.defaultValue!==D&&(h.defaultValue=D)}C!=null&&(h.defaultValue=os(C))}function pr(e,i){var h=e,p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function mi(e,i){ud(e,i)}var Co="http://www.w3.org/1999/xhtml",sr="http://www.w3.org/1998/Math/MathML",No="http://www.w3.org/2000/svg";function ei(e){switch(e){case"svg":return No;case"math":return sr;default:return Co}}function Gr(e,i){return e==null||e===Co?ei(i):e===No&&i==="foreignObject"?Co:e}var cu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,h,p,C){MSApp.execUnsafeLocalFunction(function(){return e(i,h,p,C)})}:e},uu,dd=cu(function(e,i){if(e.namespaceURI===No&&!("innerHTML"in e)){uu=uu||document.createElement("div"),uu.innerHTML="<svg>"+i.valueOf().toString()+"</svg>";for(var h=uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;h.firstChild;)e.appendChild(h.firstChild);return}e.innerHTML=i}),cs=1,ya=3,wi=8,ba=9,du=11,Wo=function(e,i){if(i){var h=e.firstChild;if(h&&h===e.lastChild&&h.nodeType===ya){h.nodeValue=i;return}}e.textContent=i},hu={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Dp(e,i){return e+i.charAt(0).toUpperCase()+i.substring(1)}var wh=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(e){wh.forEach(function(i){So[Dp(i,e)]=So[e]})});function Ch(e,i,h){var p=i==null||typeof i=="boolean"||i==="";return p?"":!h&&typeof i=="number"&&i!==0&&!(So.hasOwnProperty(e)&&So[e])?i+"px":(ii(i,e),(""+i).trim())}var Af=/([A-Z])/g,hd=/^ms-/;function Nh(e){return e.replace(Af,"-$1").toLowerCase().replace(hd,"-ms-")}var Sh=function(){};{var Mf=/^(?:webkit|moz|o)[A-Z]/,fu=/^-ms-/,fd=/-(.)/g,mu=/;\s*$/,kl={},li={},Zo=!1,Ds=!1,Cc=function(e){return e.replace(fd,function(i,h){return h.toUpperCase()})},pu=function(e){kl.hasOwnProperty(e)&&kl[e]||(kl[e]=!0,b("Unsupported style property %s. Did you mean %s?",e,Cc(e.replace(fu,"ms-"))))},md=function(e){kl.hasOwnProperty(e)&&kl[e]||(kl[e]=!0,b("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},Al=function(e,i){li.hasOwnProperty(i)&&li[i]||(li[i]=!0,b(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,e,i.replace(mu,"")))},gu=function(e,i){Zo||(Zo=!0,b("`NaN` is an invalid value for the `%s` css style property.",e))},Nc=function(e,i){Ds||(Ds=!0,b("`Infinity` is an invalid value for the `%s` css style property.",e))};Sh=function(e,i){e.indexOf("-")>-1?pu(e):Mf.test(e)?md(e):mu.test(i)&&Al(e,i),typeof i=="number"&&(isNaN(i)?gu(e,i):isFinite(i)||Nc(e,i))}}var Rf=Sh;function If(e){{var i="",h="";for(var p in e)if(e.hasOwnProperty(p)){var C=e[p];if(C!=null){var D=p.indexOf("--")===0;i+=h+(D?p:Nh(p))+":",i+=Ch(p,C,D),h=";"}}return i||null}}function Eh(e,i){var h=e.style;for(var p in i)if(i.hasOwnProperty(p)){var C=p.indexOf("--")===0;C||Rf(p,i[p]);var D=Ch(p,i[p],C);p==="float"&&(p="cssFloat"),C?h.setProperty(p,D):h[p]=D}}function Lf(e){return e==null||typeof e=="boolean"||e===""}function Dh(e){var i={};for(var h in e)for(var p=hu[h]||[h],C=0;C<p.length;C++)i[p[C]]=h;return i}function io(e,i){{if(!i)return;var h=Dh(e),p=Dh(i),C={};for(var D in h){var L=h[D],$=p[D];if($&&L!==$){var Z=L+","+$;if(C[Z])continue;C[Z]=!0,b("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",Lf(e[L])?"Removing":"Updating",L,$)}}}}var vu={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ta=kn({menuitem:!0},vu),yu="__html";function pd(e,i){if(i){if(ta[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw new Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof i.dangerouslySetInnerHTML!="object"||!(yu in i.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!i.suppressContentEditableWarning&&i.contentEditable&&i.children!=null&&b("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),i.style!=null&&typeof i.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Ko(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Eo={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Ml={},xa=new RegExp("^(aria)-["+jt+"]*$"),Do=new RegExp("^(aria)[A-Z]["+jt+"]*$");function gd(e,i){{if(fn.call(Ml,i)&&Ml[i])return!0;if(Do.test(i)){var h="aria-"+i.slice(4).toLowerCase(),p=Eo.hasOwnProperty(h)?h:null;if(p==null)return b("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",i),Ml[i]=!0,!0;if(i!==p)return b("Invalid ARIA attribute `%s`. Did you mean `%s`?",i,p),Ml[i]=!0,!0}if(xa.test(i)){var C=i.toLowerCase(),D=Eo.hasOwnProperty(C)?C:null;if(D==null)return Ml[i]=!0,!1;if(i!==D)return b("Unknown ARIA attribute `%s`. Did you mean `%s`?",i,D),Ml[i]=!0,!0}}return!0}function To(e,i){{var h=[];for(var p in i){var C=gd(e,p);C||h.push(p)}var D=h.map(function(L){return"`"+L+"`"}).join(", ");h.length===1?b("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e):h.length>1&&b("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,e)}}function Po(e,i){Ko(e,i)||To(e,i)}var Vf=!1;function Th(e,i){{if(e!=="input"&&e!=="textarea"&&e!=="select")return;i!=null&&i.value===null&&!Vf&&(Vf=!0,e==="select"&&i.multiple?b("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):b("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}}var Ph=function(){};{var ns={},Rl=/^on./,jo=/^on[^A-Z]/,Gt=new RegExp("^(aria)-["+jt+"]*$"),vd=new RegExp("^(aria)[A-Z]["+jt+"]*$");Ph=function(e,i,h,p){if(fn.call(ns,i)&&ns[i])return!0;var C=i.toLowerCase();if(C==="onfocusin"||C==="onfocusout")return b("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ns[i]=!0,!0;if(p!=null){var D=p.registrationNameDependencies,L=p.possibleRegistrationNames;if(D.hasOwnProperty(i))return!0;var $=L.hasOwnProperty(C)?L[C]:null;if($!=null)return b("Invalid event handler property `%s`. Did you mean `%s`?",i,$),ns[i]=!0,!0;if(Rl.test(i))return b("Unknown event handler property `%s`. It will be ignored.",i),ns[i]=!0,!0}else if(Rl.test(i))return jo.test(i)&&b("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",i),ns[i]=!0,!0;if(Gt.test(i)||vd.test(i))return!0;if(C==="innerhtml")return b("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ns[i]=!0,!0;if(C==="aria")return b("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ns[i]=!0,!0;if(C==="is"&&h!==null&&h!==void 0&&typeof h!="string")return b("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof h),ns[i]=!0,!0;if(typeof h=="number"&&isNaN(h))return b("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",i),ns[i]=!0,!0;var Z=Kt(i),re=Z!==null&&Z.type===ir;if(bu.hasOwnProperty(C)){var ue=bu[C];if(ue!==i)return b("Invalid DOM property `%s`. Did you mean `%s`?",i,ue),ns[i]=!0,!0}else if(!re&&i!==C)return b("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",i,C),ns[i]=!0,!0;return typeof h=="boolean"&&dr(i,h,Z,!1)?(h?b('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',h,i,i,h,i):b('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',h,i,i,h,i,i,i),ns[i]=!0,!0):re?!0:dr(i,h,Z,!1)?(ns[i]=!0,!1):((h==="false"||h==="true")&&Z!==null&&Z.type===yr&&(b("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",h,i,h==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',i,h),ns[i]=!0),!0)}}var Yo=function(e,i,h){{var p=[];for(var C in i){var D=Ph(e,C,i[C],h);D||p.push(C)}var L=p.map(function($){return"`"+$+"`"}).join(", ");p.length===1?b("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",L,e):p.length>1&&b("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",L,e)}};function Sc(e,i,h){Ko(e,i)||Yo(e,i,h)}var jh=1,Vt=2,Il=4,kh=jh|Vt|Il,xu=null;function Ah(e){xu!==null&&b("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),xu=e}function Of(){xu===null&&b("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),xu=null}function zf(e){return e===xu}function yd(e){var i=e.target||e.srcElement||window;return i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===ya?i.parentNode:i}var Mh=null,Xo=null,Jo=null;function bd(e){var i=Zd(e);if(i){if(typeof Mh!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var h=i.stateNode;if(h){var p=hb(h);Mh(i.stateNode,i.type,p)}}}function Rh(e){Mh=e}function Ts(e){Xo?Jo?Jo.push(e):Jo=[e]:Xo=e}function Qo(){return Xo!==null||Jo!==null}function Ec(){if(Xo){var e=Xo,i=Jo;if(Xo=null,Jo=null,bd(e),i)for(var h=0;h<i.length;h++)bd(i[h])}}var xd=function(e,i){return e(i)},Dc=function(){},_u=!1;function Bf(){var e=Qo();e&&(Dc(),Ec())}function Ws(e,i,h){if(_u)return e(i,h);_u=!0;try{return xd(e,i,h)}finally{_u=!1,Bf()}}function ti(e,i,h){xd=e,Dc=h}function _d(e){return e==="button"||e==="input"||e==="select"||e==="textarea"}function Ih(e,i,h){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(h.disabled&&_d(i));default:return!1}}function Tc(e,i){var h=e.stateNode;if(h===null)return null;var p=hb(h);if(p===null)return null;var C=p[i];if(Ih(i,e.type,p))return null;if(C&&typeof C!="function")throw new Error("Expected `"+i+"` listener to be a function, instead got a value of `"+typeof C+"` type.");return C}var wd=!1;if(vr)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{wd=!1}function Ff(e,i,h,p,C,D,L,$,Z){var re=Array.prototype.slice.call(arguments,3);try{i.apply(h,re)}catch(ue){this.onError(ue)}}var ys=Ff;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var jc=document.createElement("react");ys=function(i,h,p,C,D,L,$,Z,re){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var ue=document.createEvent("Event"),Ie=!1,Re=!0,Xe=window.event,et=Object.getOwnPropertyDescriptor(window,"event");function ot(){jc.removeEventListener(lt,Tn,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=Xe)}var Wt=Array.prototype.slice.call(arguments,3);function Tn(){Ie=!0,ot(),h.apply(p,Wt),Re=!1}var wn,wr=!1,fr=!1;function He(Ge){if(wn=Ge.error,wr=!0,wn===null&&Ge.colno===0&&Ge.lineno===0&&(fr=!0),Ge.defaultPrevented&&wn!=null&&typeof wn=="object")try{wn._suppressLogging=!0}catch{}}var lt="react-"+(i||"invokeguardedcallback");if(window.addEventListener("error",He),jc.addEventListener(lt,Tn,!1),ue.initEvent(lt,!1,!1),jc.dispatchEvent(ue),et&&Object.defineProperty(window,"event",et),Ie&&Re&&(wr?fr&&(wn=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):wn=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(wn)),window.removeEventListener("error",He),!Ie)return ot(),Ff.apply(this,arguments)}}var cn=ys,gn=!1,el=null,kc=!1,wu=null,Ai={onError:function(e){gn=!0,el=e}};function Cu(e,i,h,p,C,D,L,$,Z){gn=!1,el=null,cn.apply(Ai,arguments)}function _a(e,i,h,p,C,D,L,$,Z){if(Cu.apply(this,arguments),gn){var re=ci();kc||(kc=!0,wu=re)}}function Uf(){if(kc){var e=wu;throw kc=!1,wu=null,e}}function Ll(){return gn}function ci(){if(gn){var e=el;return gn=!1,el=null,e}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Ir(e){return e._reactInternals}function Ac(e){return e._reactInternals!==void 0}function Nu(e,i){e._reactInternals=i}var Cn=0,wa=1,Ci=2,hr=4,Ca=16,Vl=32,Cd=64,un=128,x=256,r=512,d=1024,m=2048,y=4096,w=8192,P=16384,j=32767,R=32768,z=65536,U=131072,q=1048576,X=2097152,oe=4194304,le=8388608,me=16777216,ae=33554432,je=hr|d|0,Fe=Ci|hr|Ca|Vl|r|y|w,ye=hr|Cd|r|w,Ae=m|Ca,$e=oe|le|X,Ke=a.ReactCurrentOwner;function it(e){var i=e,h=e;if(e.alternate)for(;i.return;)i=i.return;else{var p=i;do i=p,(i.flags&(Ci|y))!==Cn&&(h=i.return),p=i.return;while(p)}return i.tag===B?h:null}function yt(e){if(e.tag===Oe){var i=e.memoizedState;if(i===null){var h=e.alternate;h!==null&&(i=h.memoizedState)}if(i!==null)return i.dehydrated}return null}function dt(e){return e.tag===B?e.stateNode.containerInfo:null}function Nt(e){return it(e)===e}function en(e){{var i=Ke.current;if(i!==null&&i.tag===A){var h=i,p=h.stateNode;p._warnedAboutRefsInRender||b("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Mn(h)||"A component"),p._warnedAboutRefsInRender=!0}}var C=Ir(e);return C?it(C)===C:!1}function Qn(e){if(it(e)!==e)throw new Error("Unable to find node on an unmounted component.")}function Mt(e){var i=e.alternate;if(!i){var h=it(e);if(h===null)throw new Error("Unable to find node on an unmounted component.");return h!==e?null:e}for(var p=e,C=i;;){var D=p.return;if(D===null)break;var L=D.alternate;if(L===null){var $=D.return;if($!==null){p=C=$;continue}break}if(D.child===L.child){for(var Z=D.child;Z;){if(Z===p)return Qn(D),e;if(Z===C)return Qn(D),i;Z=Z.sibling}throw new Error("Unable to find node on an unmounted component.")}if(p.return!==C.return)p=D,C=L;else{for(var re=!1,ue=D.child;ue;){if(ue===p){re=!0,p=D,C=L;break}if(ue===C){re=!0,C=D,p=L;break}ue=ue.sibling}if(!re){for(ue=L.child;ue;){if(ue===p){re=!0,p=L,C=D;break}if(ue===C){re=!0,C=L,p=D;break}ue=ue.sibling}if(!re)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(p.alternate!==C)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(p.tag!==B)throw new Error("Unable to find node on an unmounted component.");return p.stateNode.current===p?e:i}function xn(e){var i=Mt(e);return i!==null?tn(i):null}function tn(e){if(e.tag===ie||e.tag===pe)return e;for(var i=e.child;i!==null;){var h=tn(i);if(h!==null)return h;i=i.sibling}return null}function kr(e){var i=Mt(e);return i!==null?Xn(i):null}function Xn(e){if(e.tag===ie||e.tag===pe)return e;for(var i=e.child;i!==null;){if(i.tag!==W){var h=Xn(i);if(h!==null)return h}i=i.sibling}return null}var On=t.unstable_scheduleCallback,er=t.unstable_cancelCallback,Ni=t.unstable_shouldYield,Wr=t.unstable_requestPaint,gr=t.unstable_now,$i=t.unstable_getCurrentPriorityLevel,pi=t.unstable_ImmediatePriority,Ps=t.unstable_UserBlockingPriority,Nr=t.unstable_NormalPriority,so=t.unstable_LowPriority,Na=t.unstable_IdlePriority,tl=t.unstable_yieldValue,Ol=t.unstable_setDisableYieldValue,za=null,Er=null,kt=null,gi=!1,us=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Si(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled)return!0;if(!i.supportsFiber)return b("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{wt&&(e=kn({},e,{getLaneLabelMap:qf,injectProfilingHooks:$f})),za=i.inject(e),Er=i}catch(h){b("React instrumentation encountered an error: %s.",h)}return!!i.checkDCE}function qi(e,i){if(Er&&typeof Er.onScheduleFiberRoot=="function")try{Er.onScheduleFiberRoot(za,e,i)}catch(h){gi||(gi=!0,b("React instrumentation encountered an error: %s",h))}}function Zs(e,i){if(Er&&typeof Er.onCommitFiberRoot=="function")try{var h=(e.current.flags&un)===un;if(ze){var p;switch(i){case Fa:p=pi;break;case ql:p=Ps;break;case Hl:p=Nr;break;case jd:p=Na;break;default:p=Nr;break}Er.onCommitFiberRoot(za,e,p,h)}}catch(C){gi||(gi=!0,b("React instrumentation encountered an error: %s",C))}}function Ei(e){if(Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(za,e)}catch(i){gi||(gi=!0,b("React instrumentation encountered an error: %s",i))}}function zl(e){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(za,e)}catch(i){gi||(gi=!0,b("React instrumentation encountered an error: %s",i))}}function Mi(e){if(typeof tl=="function"&&(Ol(e),g(e)),Er&&typeof Er.setStrictMode=="function")try{Er.setStrictMode(za,e)}catch(i){gi||(gi=!0,b("React instrumentation encountered an error: %s",i))}}function $f(e){kt=e}function qf(){{for(var e=new Map,i=1,h=0;h<Zf;h++){var p=$p(i);e.set(i,p),i*=2}return e}}function Tp(e){kt!==null&&typeof kt.markCommitStarted=="function"&&kt.markCommitStarted(e)}function Nd(){kt!==null&&typeof kt.markCommitStopped=="function"&&kt.markCommitStopped()}function Ks(e){kt!==null&&typeof kt.markComponentRenderStarted=="function"&&kt.markComponentRenderStarted(e)}function Sa(){kt!==null&&typeof kt.markComponentRenderStopped=="function"&&kt.markComponentRenderStopped()}function ao(e){kt!==null&&typeof kt.markComponentPassiveEffectMountStarted=="function"&&kt.markComponentPassiveEffectMountStarted(e)}function Ea(){kt!==null&&typeof kt.markComponentPassiveEffectMountStopped=="function"&&kt.markComponentPassiveEffectMountStopped()}function oo(e){kt!==null&&typeof kt.markComponentPassiveEffectUnmountStarted=="function"&&kt.markComponentPassiveEffectUnmountStarted(e)}function Lh(){kt!==null&&typeof kt.markComponentPassiveEffectUnmountStopped=="function"&&kt.markComponentPassiveEffectUnmountStopped()}function ko(e){kt!==null&&typeof kt.markComponentLayoutEffectMountStarted=="function"&&kt.markComponentLayoutEffectMountStarted(e)}function x0(){kt!==null&&typeof kt.markComponentLayoutEffectMountStopped=="function"&&kt.markComponentLayoutEffectMountStopped()}function Pp(e){kt!==null&&typeof kt.markComponentLayoutEffectUnmountStarted=="function"&&kt.markComponentLayoutEffectUnmountStarted(e)}function Ri(){kt!==null&&typeof kt.markComponentLayoutEffectUnmountStopped=="function"&&kt.markComponentLayoutEffectUnmountStopped()}function jp(e,i,h){kt!==null&&typeof kt.markComponentErrored=="function"&&kt.markComponentErrored(e,i,h)}function uy(e,i,h){kt!==null&&typeof kt.markComponentSuspended=="function"&&kt.markComponentSuspended(e,i,h)}function Su(e){kt!==null&&typeof kt.markLayoutEffectsStarted=="function"&&kt.markLayoutEffectsStarted(e)}function Eu(){kt!==null&&typeof kt.markLayoutEffectsStopped=="function"&&kt.markLayoutEffectsStopped()}function Hf(e){kt!==null&&typeof kt.markPassiveEffectsStarted=="function"&&kt.markPassiveEffectsStarted(e)}function kp(){kt!==null&&typeof kt.markPassiveEffectsStopped=="function"&&kt.markPassiveEffectsStopped()}function Ap(e){kt!==null&&typeof kt.markRenderStarted=="function"&&kt.markRenderStarted(e)}function _0(){kt!==null&&typeof kt.markRenderYielded=="function"&&kt.markRenderYielded()}function Mp(){kt!==null&&typeof kt.markRenderStopped=="function"&&kt.markRenderStopped()}function w0(e){kt!==null&&typeof kt.markRenderScheduled=="function"&&kt.markRenderScheduled(e)}function Rp(e,i){kt!==null&&typeof kt.markForceUpdateScheduled=="function"&&kt.markForceUpdateScheduled(e,i)}function Ip(e,i){kt!==null&&typeof kt.markStateUpdateScheduled=="function"&&kt.markStateUpdateScheduled(e,i)}var Sn=0,cr=1,Lr=2,ui=8,nl=16,Sd=Math.clz32?Math.clz32:dy,Gf=Math.log,Wf=Math.LN2;function dy(e){var i=e>>>0;return i===0?32:31-(Gf(i)/Wf|0)|0}var Zf=31,xt=0,Dr=0,Pn=1,Mc=2,rl=4,Ao=8,il=16,Rc=32,Ed=4194240,Dd=64,Kf=128,Yf=256,Lp=512,Vh=1024,Xf=2048,Oh=4096,Du=8192,na=16384,Jf=32768,Vp=65536,Qf=131072,Op=262144,zp=524288,Bp=1048576,Fp=2097152,Td=130023424,Bl=4194304,em=8388608,Fl=16777216,Tu=33554432,Up=67108864,hy=Bl,zh=134217728,fy=268435455,Bh=268435456,Pu=536870912,Ba=1073741824;function $p(e){{if(e&Pn)return"Sync";if(e&Mc)return"InputContinuousHydration";if(e&rl)return"InputContinuous";if(e&Ao)return"DefaultHydration";if(e&il)return"Default";if(e&Rc)return"TransitionHydration";if(e&Ed)return"Transition";if(e&Td)return"Retry";if(e&zh)return"SelectiveHydration";if(e&Bh)return"IdleHydration";if(e&Pu)return"Idle";if(e&Ba)return"Offscreen"}}var vi=-1,Ul=Dd,tm=Bl;function di(e){switch(Au(e)){case Pn:return Pn;case Mc:return Mc;case rl:return rl;case Ao:return Ao;case il:return il;case Rc:return Rc;case Dd:case Kf:case Yf:case Lp:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:return e&Ed;case Bl:case em:case Fl:case Tu:case Up:return e&Td;case zh:return zh;case Bh:return Bh;case Pu:return Pu;case Ba:return Ba;default:return b("Should have found matching lanes. This is a bug in React."),e}}function ju(e,i){var h=e.pendingLanes;if(h===xt)return xt;var p=xt,C=e.suspendedLanes,D=e.pingedLanes,L=h&fy;if(L!==xt){var $=L&~C;if($!==xt)p=di($);else{var Z=L&D;Z!==xt&&(p=di(Z))}}else{var re=h&~C;re!==xt?p=di(re):D!==xt&&(p=di(D))}if(p===xt)return xt;if(i!==xt&&i!==p&&(i&C)===xt){var ue=Au(p),Ie=Au(i);if(ue>=Ie||ue===il&&(Ie&Ed)!==xt)return i}(p&rl)!==xt&&(p|=h&il);var Re=e.entangledLanes;if(Re!==xt)for(var Xe=e.entanglements,et=p&Re;et>0;){var ot=$l(et),Wt=1<<ot;p|=Xe[ot],et&=~Wt}return p}function my(e,i){for(var h=e.eventTimes,p=vi;i>0;){var C=$l(i),D=1<<C,L=h[C];L>p&&(p=L),i&=~D}return p}function nm(e,i){switch(e){case Pn:case Mc:case rl:return i+250;case Ao:case il:case Rc:case Dd:case Kf:case Yf:case Lp:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:return i+5e3;case Bl:case em:case Fl:case Tu:case Up:return vi;case zh:case Bh:case Pu:case Ba:return vi;default:return b("Should have found matching lanes. This is a bug in React."),vi}}function rm(e,i){for(var h=e.pendingLanes,p=e.suspendedLanes,C=e.pingedLanes,D=e.expirationTimes,L=h;L>0;){var $=$l(L),Z=1<<$,re=D[$];re===vi?((Z&p)===xt||(Z&C)!==xt)&&(D[$]=nm(Z,i)):re<=i&&(e.expiredLanes|=Z),L&=~Z}}function Fh(e){return di(e.pendingLanes)}function im(e){var i=e.pendingLanes&~Ba;return i!==xt?i:i&Ba?Ba:xt}function py(e){return(e&Pn)!==xt}function ku(e){return(e&fy)!==xt}function sm(e){return(e&Td)===e}function qp(e){var i=Pn|rl|il;return(e&i)===xt}function gy(e){return(e&Ed)===e}function am(e,i){var h=Mc|rl|Ao|il;return(i&h)!==xt}function vy(e,i){return(i&e.expiredLanes)!==xt}function Pd(e){return(e&Ed)!==xt}function yy(){var e=Ul;return Ul<<=1,(Ul&Ed)===xt&&(Ul=Dd),e}function Hp(){var e=tm;return tm<<=1,(tm&Td)===xt&&(tm=Bl),e}function Au(e){return e&-e}function Mu(e){return Au(e)}function $l(e){return 31-Sd(e)}function Uh(e){return $l(e)}function Da(e,i){return(e&i)!==xt}function Ru(e,i){return(e&i)===i}function tr(e,i){return e|i}function om(e,i){return e&~i}function by(e,i){return e&i}function nS(e){return e}function C0(e,i){return e!==Dr&&e<i?e:i}function sl(e){for(var i=[],h=0;h<Zf;h++)i.push(e);return i}function $h(e,i,h){e.pendingLanes|=i,i!==Pu&&(e.suspendedLanes=xt,e.pingedLanes=xt);var p=e.eventTimes,C=Uh(i);p[C]=h}function xy(e,i){e.suspendedLanes|=i,e.pingedLanes&=~i;for(var h=e.expirationTimes,p=i;p>0;){var C=$l(p),D=1<<C;h[C]=vi,p&=~D}}function Iu(e,i,h){e.pingedLanes|=e.suspendedLanes&i}function N0(e,i){var h=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=xt,e.pingedLanes=xt,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i;for(var p=e.entanglements,C=e.eventTimes,D=e.expirationTimes,L=h;L>0;){var $=$l(L),Z=1<<$;p[$]=xt,C[$]=vi,D[$]=vi,L&=~Z}}function Gp(e,i){for(var h=e.entangledLanes|=i,p=e.entanglements,C=h;C;){var D=$l(C),L=1<<D;L&i|p[D]&i&&(p[D]|=i),C&=~L}}function S0(e,i){var h=Au(i),p;switch(h){case rl:p=Mc;break;case il:p=Ao;break;case Dd:case Kf:case Yf:case Lp:case Vh:case Xf:case Oh:case Du:case na:case Jf:case Vp:case Qf:case Op:case zp:case Bp:case Fp:case Bl:case em:case Fl:case Tu:case Up:p=Rc;break;case Pu:p=Bh;break;default:p=Dr;break}return(p&(e.suspendedLanes|i))!==Dr?Dr:p}function Wp(e,i,h){if(us)for(var p=e.pendingUpdatersLaneMap;h>0;){var C=Uh(h),D=1<<C,L=p[C];L.add(i),h&=~D}}function Zp(e,i){if(us)for(var h=e.pendingUpdatersLaneMap,p=e.memoizedUpdaters;i>0;){var C=Uh(i),D=1<<C,L=h[C];L.size>0&&(L.forEach(function($){var Z=$.alternate;(Z===null||!p.has(Z))&&p.add($)}),L.clear()),i&=~D}}function _y(e,i){return null}var Fa=Pn,ql=rl,Hl=il,jd=Pu,Gl=Dr;function Ua(){return Gl}function bs(e){Gl=e}function E0(e,i){var h=Gl;try{return Gl=e,i()}finally{Gl=h}}function wy(e,i){return e!==0&&e<i?e:i}function D0(e,i){return e>i?e:i}function Kp(e,i){return e!==0&&e<i}function kd(e){var i=Au(e);return Kp(Fa,i)?Kp(ql,i)?ku(i)?Hl:jd:ql:Fa}function qh(e){var i=e.current.memoizedState;return i.isDehydrated}var Cy;function T0(e){Cy=e}function P0(e){Cy(e)}var Yp;function j0(e){Yp=e}var Ny;function Sy(e){Ny=e}var lm;function Ey(e){lm=e}var Xp;function Dy(e){Xp=e}var Jp=!1,Lu=[],Ic=null,Wl=null,Lc=null,Hh=new Map,Gh=new Map,Zl=[],k0=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function A0(e){return k0.indexOf(e)>-1}function Wh(e,i,h,p,C){return{blockedOn:e,domEventName:i,eventSystemFlags:h,nativeEvent:C,targetContainers:[p]}}function zi(e,i){switch(e){case"focusin":case"focusout":Ic=null;break;case"dragenter":case"dragleave":Wl=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":{var h=i.pointerId;Hh.delete(h);break}case"gotpointercapture":case"lostpointercapture":{var p=i.pointerId;Gh.delete(p);break}}}function Ad(e,i,h,p,C,D){if(e===null||e.nativeEvent!==D){var L=Wh(i,h,p,C,D);if(i!==null){var $=Zd(i);$!==null&&Yp($)}return L}e.eventSystemFlags|=p;var Z=e.targetContainers;return C!==null&&Z.indexOf(C)===-1&&Z.push(C),e}function Ty(e,i,h,p,C){switch(i){case"focusin":{var D=C;return Ic=Ad(Ic,e,i,h,p,D),!0}case"dragenter":{var L=C;return Wl=Ad(Wl,e,i,h,p,L),!0}case"mouseover":{var $=C;return Lc=Ad(Lc,e,i,h,p,$),!0}case"pointerover":{var Z=C,re=Z.pointerId;return Hh.set(re,Ad(Hh.get(re)||null,e,i,h,p,Z)),!0}case"gotpointercapture":{var ue=C,Ie=ue.pointerId;return Gh.set(Ie,Ad(Gh.get(Ie)||null,e,i,h,p,ue)),!0}}return!1}function Qp(e){var i=nf(e.target);if(i!==null){var h=it(i);if(h!==null){var p=h.tag;if(p===Oe){var C=yt(h);if(C!==null){e.blockedOn=C,Xp(e.priority,function(){Ny(h)});return}}else if(p===B){var D=h.stateNode;if(qh(D)){e.blockedOn=dt(h);return}}}}e.blockedOn=null}function Vr(e){for(var i=lm(),h={blockedOn:null,target:e,priority:i},p=0;p<Zl.length&&Kp(i,Zl[p].priority);p++);Zl.splice(p,0,h),p===0&&Qp(h)}function Md(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;i.length>0;){var h=i[0],p=Rd(e.domEventName,e.eventSystemFlags,h,e.nativeEvent);if(p===null){var C=e.nativeEvent,D=new C.constructor(C.type,C);Ah(D),C.target.dispatchEvent(D),Of()}else{var L=Zd(p);return L!==null&&Yp(L),e.blockedOn=p,!1}i.shift()}return!0}function eg(e,i,h){Md(e)&&h.delete(i)}function Py(){Jp=!1,Ic!==null&&Md(Ic)&&(Ic=null),Wl!==null&&Md(Wl)&&(Wl=null),Lc!==null&&Md(Lc)&&(Lc=null),Hh.forEach(eg),Gh.forEach(eg)}function $a(e,i){e.blockedOn===i&&(e.blockedOn=null,Jp||(Jp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Py)))}function al(e){if(Lu.length>0){$a(Lu[0],e);for(var i=1;i<Lu.length;i++){var h=Lu[i];h.blockedOn===e&&(h.blockedOn=null)}}Ic!==null&&$a(Ic,e),Wl!==null&&$a(Wl,e),Lc!==null&&$a(Lc,e);var p=function($){return $a($,e)};Hh.forEach(p),Gh.forEach(p);for(var C=0;C<Zl.length;C++){var D=Zl[C];D.blockedOn===e&&(D.blockedOn=null)}for(;Zl.length>0;){var L=Zl[0];if(L.blockedOn!==null)break;Qp(L),L.blockedOn===null&&Zl.shift()}}var Vu=a.ReactCurrentBatchConfig,tg=!0;function jy(e){tg=!!e}function M0(){return tg}function R0(e,i,h){var p=Ou(i),C;switch(p){case Fa:C=I0;break;case ql:C=L0;break;case Hl:default:C=ng;break}return C.bind(null,i,h,e)}function I0(e,i,h,p){var C=Ua(),D=Vu.transition;Vu.transition=null;try{bs(Fa),ng(e,i,h,p)}finally{bs(C),Vu.transition=D}}function L0(e,i,h,p){var C=Ua(),D=Vu.transition;Vu.transition=null;try{bs(ql),ng(e,i,h,p)}finally{bs(C),Vu.transition=D}}function ng(e,i,h,p){tg&&V0(e,i,h,p)}function V0(e,i,h,p){var C=Rd(e,i,h,p);if(C===null){Br(e,i,p,cm,h),zi(e,p);return}if(Ty(C,e,i,h,p)){p.stopPropagation();return}if(zi(e,p),i&Il&&A0(e)){for(;C!==null;){var D=Zd(C);D!==null&&P0(D);var L=Rd(e,i,h,p);if(L===null&&Br(e,i,p,cm,h),L===C)break;C=L}C!==null&&p.stopPropagation();return}Br(e,i,p,null,h)}var cm=null;function Rd(e,i,h,p){cm=null;var C=yd(p),D=nf(C);if(D!==null){var L=it(D);if(L===null)D=null;else{var $=L.tag;if($===Oe){var Z=yt(L);if(Z!==null)return Z;D=null}else if($===B){var re=L.stateNode;if(qh(re))return dt(L);D=null}else L!==D&&(D=null)}}return cm=D,null}function Ou(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Fa;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return ql;case"message":{var i=$i();switch(i){case pi:return Fa;case Ps:return ql;case Nr:case so:return Hl;case Na:return jd;default:return Hl}}default:return Hl}}function ky(e,i,h){return e.addEventListener(i,h,!1),h}function rg(e,i,h){return e.addEventListener(i,h,!0),h}function ig(e,i,h,p){return e.addEventListener(i,h,{capture:!0,passive:p}),h}function O0(e,i,h,p){return e.addEventListener(i,h,{passive:p}),h}var Zh=null,sg=null,Id=null;function Ay(e){return Zh=e,sg=ag(),!0}function ra(){Zh=null,sg=null,Id=null}function um(){if(Id)return Id;var e,i=sg,h=i.length,p,C=ag(),D=C.length;for(e=0;e<h&&i[e]===C[e];e++);var L=h-e;for(p=1;p<=L&&i[h-p]===C[D-p];p++);var $=p>1?1-p:void 0;return Id=C.slice(e,$),Id}function ag(){return"value"in Zh?Zh.value:Zh.textContent}function Mo(e){var i,h=e.keyCode;return"charCode"in e?(i=e.charCode,i===0&&h===13&&(i=13)):i=h,i===10&&(i=13),i>=32||i===13?i:0}function Vc(){return!0}function Ld(){return!1}function xs(e){function i(h,p,C,D,L){this._reactName=h,this._targetInst=C,this.type=p,this.nativeEvent=D,this.target=L,this.currentTarget=null;for(var $ in e)if(e.hasOwnProperty($)){var Z=e[$];Z?this[$]=Z(D):this[$]=D[$]}var re=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;return re?this.isDefaultPrevented=Vc:this.isDefaultPrevented=Ld,this.isPropagationStopped=Ld,this}return kn(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),i}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=xs(Kl),Kh=kn({},Kl,{view:0,detail:0}),My=xs(Kh),dm,og,Od;function Ry(e){e!==Od&&(Od&&e.type==="mousemove"?(dm=e.screenX-Od.screenX,og=e.screenY-Od.screenY):(dm=0,og=0),Od=e)}var zd=kn({},Kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(Ry(e),dm)},movementY:function(e){return"movementY"in e?e.movementY:og}}),hm=xs(zd),z0=kn({},zd,{dataTransfer:0}),B0=xs(z0),Iy=kn({},Kh,{relatedTarget:0}),zu=xs(Iy),ol=kn({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),Oc=xs(ol),Ly=kn({},Kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lg=xs(Ly),F0=kn({},Kl,{data:0}),Vy=xs(F0),fm=Vy,cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function ug(e){if(e.key){var i=cg[e.key]||e.key;if(i!=="Unidentified")return i}if(e.type==="keypress"){var h=Mo(e);return h===13?"Enter":String.fromCharCode(h)}return e.type==="keydown"||e.type==="keyup"?U0[e.keyCode]||"Unidentified":""}var dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(e){var i=this,h=i.nativeEvent;if(h.getModifierState)return h.getModifierState(e);var p=dg[e];return p?!!h[p]:!1}function mm(e){return Bd}var Oy=kn({},Kh,{key:ug,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hg=xs(Oy),zy=kn({},zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=xs(zy),By=kn({},Kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),$0=xs(By),q0=kn({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=xs(q0),H0=kn({},zd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=xs(H0),W0=[9,13,27,32],Uy=229,Xh=vr&&"CompositionEvent"in window,lo=null;vr&&"documentMode"in document&&(lo=document.documentMode);var $y=vr&&"TextEvent"in window&&!lo,fg=vr&&(!Xh||lo&&lo>8&&lo<=11),mg=32,pg=String.fromCharCode(mg);function qy(){zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),zt("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),zt("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),zt("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var gg=!1;function vg(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function pm(e){switch(e){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function Hy(e,i){return e==="keydown"&&i.keyCode===Uy}function gm(e,i){switch(e){case"keyup":return W0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==Uy;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yg(e){var i=e.detail;return typeof i=="object"&&"data"in i?i.data:null}function Ta(e){return e.locale==="ko"}var ll=!1;function Gy(e,i,h,p,C){var D,L;if(Xh?D=pm(i):ll?gm(i,p)&&(D="onCompositionEnd"):Hy(i,p)&&(D="onCompositionStart"),!D)return null;fg&&!Ta(p)&&(!ll&&D==="onCompositionStart"?ll=Ay(C):D==="onCompositionEnd"&&ll&&(L=um()));var $=js(h,D);if($.length>0){var Z=new Vy(D,i,null,p,C);if(e.push({event:Z,listeners:$}),L)Z.data=L;else{var re=yg(p);re!==null&&(Z.data=re)}}}function Wy(e,i){switch(e){case"compositionend":return yg(i);case"keypress":var h=i.which;return h!==mg?null:(gg=!0,pg);case"textInput":var p=i.data;return p===pg&&gg?null:p;default:return null}}function Zy(e,i){if(ll){if(e==="compositionend"||!Xh&&gm(e,i)){var h=um();return ra(),ll=!1,h}return null}switch(e){case"paste":return null;case"keypress":if(!vg(i)){if(i.char&&i.char.length>1)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fg&&!Ta(i)?null:i.data;default:return null}}function Ky(e,i,h,p,C){var D;if($y?D=Wy(i,p):D=Zy(i,p),!D)return null;var L=js(h,"onBeforeInput");if(L.length>0){var $=new fm("onBeforeInput","beforeinput",null,p,C);e.push({event:$,listeners:L}),$.data=D}}function Yy(e,i,h,p,C,D,L){Gy(e,i,h,p,C),Ky(e,i,h,p,C)}var Xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Xy[e.type]:i==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Qy(e){if(!vr)return!1;var i="on"+e,h=i in document;if(!h){var p=document.createElement("div");p.setAttribute(i,"return;"),h=typeof p[i]=="function"}return h}function zc(){zt("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function bg(e,i,h,p){Ts(p);var C=js(i,"onChange");if(C.length>0){var D=new Vd("onChange","change",null,h,p);e.push({event:D,listeners:C})}}var Fd=null,Ud=null;function eb(e){var i=e.nodeName&&e.nodeName.toLowerCase();return i==="select"||i==="input"&&e.type==="file"}function Z0(e){var i=[];bg(i,Ud,e,yd(e)),Ws(K0,i)}function K0(e){Rt(e,0)}function Jh(e){var i=Tm(e);if(Yn(i))return e}function $d(e,i){if(e==="change")return i}var xg=!1;vr&&(xg=Qy("input")&&(!document.documentMode||document.documentMode>9));function vm(e,i){Fd=e,Ud=i,Fd.attachEvent("onpropertychange",Qh)}function _g(){Fd&&(Fd.detachEvent("onpropertychange",Qh),Fd=null,Ud=null)}function Qh(e){e.propertyName==="value"&&Jh(Ud)&&Z0(e)}function ym(e,i,h){e==="focusin"?(_g(),vm(i,h)):e==="focusout"&&_g()}function bm(e,i){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jh(Ud)}function Y0(e){var i=e.nodeName;return i&&i.toLowerCase()==="input"&&(e.type==="checkbox"||e.type==="radio")}function X0(e,i){if(e==="click")return Jh(i)}function J0(e,i){if(e==="input"||e==="change")return Jh(i)}function Q0(e){var i=e._wrapperState;!i||!i.controlled||e.type!=="number"||Nn(e,"number",e.value)}function qd(e,i,h,p,C,D,L){var $=h?Tm(h):window,Z,re;if(eb($)?Z=$d:Jy($)?xg?Z=J0:(Z=bm,re=ym):Y0($)&&(Z=X0),Z){var ue=Z(i,h);if(ue){bg(e,ue,p,C);return}}re&&re(i,$,h),i==="focusout"&&Q0($)}function _s(){mn("onMouseEnter",["mouseout","mouseover"]),mn("onMouseLeave",["mouseout","mouseover"]),mn("onPointerEnter",["pointerout","pointerover"]),mn("onPointerLeave",["pointerout","pointerover"])}function Bc(e,i,h,p,C,D,L){var $=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout";if($&&!zf(p)){var re=p.relatedTarget||p.fromElement;if(re&&(nf(re)||zg(re)))return}if(!(!Z&&!$)){var ue;if(C.window===C)ue=C;else{var Ie=C.ownerDocument;Ie?ue=Ie.defaultView||Ie.parentWindow:ue=window}var Re,Xe;if(Z){var et=p.relatedTarget||p.toElement;if(Re=h,Xe=et?nf(et):null,Xe!==null){var ot=it(Xe);(Xe!==ot||Xe.tag!==ie&&Xe.tag!==pe)&&(Xe=null)}}else Re=null,Xe=h;if(Re!==Xe){var Wt=hm,Tn="onMouseLeave",wn="onMouseEnter",wr="mouse";(i==="pointerout"||i==="pointerover")&&(Wt=Yh,Tn="onPointerLeave",wn="onPointerEnter",wr="pointer");var fr=Re==null?ue:Tm(Re),He=Xe==null?ue:Tm(Xe),lt=new Wt(Tn,wr+"leave",Re,p,C);lt.target=fr,lt.relatedTarget=He;var Ge=null,St=nf(C);if(St===h){var on=new Wt(wn,wr+"enter",Xe,p,C);on.target=He,on.relatedTarget=fr,Ge=on}ws(e,lt,Ge,Re,Xe)}}}function wg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Pa=typeof Object.is=="function"?Object.is:wg;function Hd(e,i){if(Pa(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var h=Object.keys(e),p=Object.keys(i);if(h.length!==p.length)return!1;for(var C=0;C<h.length;C++){var D=h[C];if(!fn.call(i,D)||!Pa(e[D],i[D]))return!1}return!0}function xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function e_(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Cg(e,i){for(var h=xm(e),p=0,C=0;h;){if(h.nodeType===ya){if(C=p+h.textContent.length,p<=i&&C>=i)return{node:h,offset:i-p};p=C}h=xm(e_(h))}}function tb(e){var i=e.ownerDocument,h=i&&i.defaultView||window,p=h.getSelection&&h.getSelection();if(!p||p.rangeCount===0)return null;var C=p.anchorNode,D=p.anchorOffset,L=p.focusNode,$=p.focusOffset;try{C.nodeType,L.nodeType}catch{return null}return t_(e,C,D,L,$)}function t_(e,i,h,p,C){var D=0,L=-1,$=-1,Z=0,re=0,ue=e,Ie=null;e:for(;;){for(var Re=null;ue===i&&(h===0||ue.nodeType===ya)&&(L=D+h),ue===p&&(C===0||ue.nodeType===ya)&&($=D+C),ue.nodeType===ya&&(D+=ue.nodeValue.length),(Re=ue.firstChild)!==null;)Ie=ue,ue=Re;for(;;){if(ue===e)break e;if(Ie===i&&++Z===h&&(L=D),Ie===p&&++re===C&&($=D),(Re=ue.nextSibling)!==null)break;ue=Ie,Ie=ue.parentNode}ue=Re}return L===-1||$===-1?null:{start:L,end:$}}function nb(e,i){var h=e.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var C=p.getSelection(),D=e.textContent.length,L=Math.min(i.start,D),$=i.end===void 0?L:Math.min(i.end,D);if(!C.extend&&L>$){var Z=$;$=L,L=Z}var re=Cg(e,L),ue=Cg(e,$);if(re&&ue){if(C.rangeCount===1&&C.anchorNode===re.node&&C.anchorOffset===re.offset&&C.focusNode===ue.node&&C.focusOffset===ue.offset)return;var Ie=h.createRange();Ie.setStart(re.node,re.offset),C.removeAllRanges(),L>$?(C.addRange(Ie),C.extend(ue.node,ue.offset)):(Ie.setEnd(ue.node,ue.offset),C.addRange(Ie))}}}function _m(e){return e&&e.nodeType===ya}function wm(e,i){return!e||!i?!1:e===i?!0:_m(e)?!1:_m(i)?wm(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1}function rb(e){return e&&e.ownerDocument&&wm(e.ownerDocument.documentElement,e)}function ef(e){try{return typeof e.contentWindow.location.href=="string"}catch{return!1}}function Cm(){for(var e=window,i=va();i instanceof e.HTMLIFrameElement;){if(ef(i))e=i.contentWindow;else return i;i=va(e.document)}return i}function Nm(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Ng(){var e=Cm();return{focusedElem:e,selectionRange:Nm(e)?tf(e):null}}function Sm(e){var i=Cm(),h=e.focusedElem,p=e.selectionRange;if(i!==h&&rb(h)){p!==null&&Nm(h)&&Sg(h,p);for(var C=[],D=h;D=D.parentNode;)D.nodeType===cs&&C.push({element:D,left:D.scrollLeft,top:D.scrollTop});typeof h.focus=="function"&&h.focus();for(var L=0;L<C.length;L++){var $=C[L];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}}function tf(e){var i;return"selectionStart"in e?i={start:e.selectionStart,end:e.selectionEnd}:i=tb(e),i||{start:0,end:0}}function Sg(e,i){var h=i.start,p=i.end;p===void 0&&(p=h),"selectionStart"in e?(e.selectionStart=h,e.selectionEnd=Math.min(p,e.value.length)):nb(e,i)}var Eg=vr&&"documentMode"in document&&document.documentMode<=11;function Dg(){zt("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Gd=null,s=null,n=null,l=!1;function f(e){if("selectionStart"in e&&Nm(e))return{start:e.selectionStart,end:e.selectionEnd};var i=e.ownerDocument&&e.ownerDocument.defaultView||window,h=i.getSelection();return{anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}}function v(e){return e.window===e?e.document:e.nodeType===ba?e:e.ownerDocument}function N(e,i,h){var p=v(h);if(!(l||Gd==null||Gd!==va(p))){var C=f(Gd);if(!n||!Hd(n,C)){n=C;var D=js(s,"onSelect");if(D.length>0){var L=new Vd("onSelect","select",null,i,h);e.push({event:L,listeners:D}),L.target=Gd}}}}function E(e,i,h,p,C,D,L){var $=h?Tm(h):window;switch(i){case"focusin":(Jy($)||$.contentEditable==="true")&&(Gd=$,s=h,n=null);break;case"focusout":Gd=null,s=null,n=null;break;case"mousedown":l=!0;break;case"contextmenu":case"mouseup":case"dragend":l=!1,N(e,p,C);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":N(e,p,C)}}function T(e,i){var h={};return h[e.toLowerCase()]=i.toLowerCase(),h["Webkit"+e]="webkit"+i,h["Moz"+e]="moz"+i,h}var M={animationend:T("Animation","AnimationEnd"),animationiteration:T("Animation","AnimationIteration"),animationstart:T("Animation","AnimationStart"),transitionend:T("Transition","TransitionEnd")},V={},F={};vr&&(F=document.createElement("div").style,"AnimationEvent"in window||(delete M.animationend.animation,delete M.animationiteration.animation,delete M.animationstart.animation),"TransitionEvent"in window||delete M.transitionend.transition);function H(e){if(V[e])return V[e];if(!M[e])return e;var i=M[e];for(var h in i)if(i.hasOwnProperty(h)&&h in F)return V[e]=i[h];return e}var Y=H("animationend"),Q=H("animationiteration"),ee=H("animationstart"),ce=H("transitionend"),ve=new Map,be=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Me(e,i){ve.set(e,i),zt(i,[e])}function De(){for(var e=0;e<be.length;e++){var i=be[e],h=i.toLowerCase(),p=i[0].toUpperCase()+i.slice(1);Me(h,"on"+p)}Me(Y,"onAnimationEnd"),Me(Q,"onAnimationIteration"),Me(ee,"onAnimationStart"),Me("dblclick","onDoubleClick"),Me("focusin","onFocus"),Me("focusout","onBlur"),Me(ce,"onTransitionEnd")}function Le(e,i,h,p,C,D,L){var $=ve.get(i);if($!==void 0){var Z=Vd,re=i;switch(i){case"keypress":if(Mo(p)===0)return;case"keydown":case"keyup":Z=hg;break;case"focusin":re="focus",Z=zu;break;case"focusout":re="blur",Z=zu;break;case"beforeblur":case"afterblur":Z=zu;break;case"click":if(p.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=B0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=$0;break;case Y:case Q:case ee:Z=Oc;break;case ce:Z=Fy;break;case"scroll":Z=My;break;case"wheel":Z=G0;break;case"copy":case"cut":case"paste":Z=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Yh;break}var ue=(D&Il)!==0;{var Ie=!ue&&i==="scroll",Re=Hi(h,$,p.type,ue,Ie);if(Re.length>0){var Xe=new Z($,re,null,p,C);e.push({event:Xe,listeners:Re})}}}}De(),_s(),zc(),Dg(),qy();function qe(e,i,h,p,C,D,L){Le(e,i,h,p,C,D);var $=(D&kh)===0;$&&(Bc(e,i,h,p,C),qd(e,i,h,p,C),E(e,i,h,p,C),Yy(e,i,h,p,C))}var st=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Ot=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(st));function Jt(e,i,h){var p=e.type||"unknown-event";e.currentTarget=h,_a(p,i,void 0,e),e.currentTarget=null}function Bt(e,i,h){var p;if(h)for(var C=i.length-1;C>=0;C--){var D=i[C],L=D.instance,$=D.currentTarget,Z=D.listener;if(L!==p&&e.isPropagationStopped())return;Jt(e,Z,$),p=L}else for(var re=0;re<i.length;re++){var ue=i[re],Ie=ue.instance,Re=ue.currentTarget,Xe=ue.listener;if(Ie!==p&&e.isPropagationStopped())return;Jt(e,Xe,Re),p=Ie}}function Rt(e,i){for(var h=(i&Il)!==0,p=0;p<e.length;p++){var C=e[p],D=C.event,L=C.listeners;Bt(D,L,h)}Uf()}function Et(e,i,h,p,C){var D=yd(h),L=[];qe(L,e,p,h,D,i),Rt(L,i)}function _t(e,i){Ot.has(e)||b('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',e);var h=!1,p=Y2(i),C=Ys(e);p.has(C)||(rn(i,e,Vt,h),p.add(C))}function Dt(e,i,h){Ot.has(e)&&!i&&b('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',e);var p=0;i&&(p|=Il),rn(h,e,p,i)}var vt="_reactListening"+Math.random().toString(36).slice(2);function dn(e){if(!e[vt]){e[vt]=!0,nn.forEach(function(h){h!=="selectionchange"&&(Ot.has(h)||Dt(h,!1,e),Dt(h,!0,e))});var i=e.nodeType===ba?e:e.ownerDocument;i!==null&&(i[vt]||(i[vt]=!0,Dt("selectionchange",!1,i)))}}function rn(e,i,h,p,C){var D=R0(e,i,h),L=void 0;wd&&(i==="touchstart"||i==="touchmove"||i==="wheel")&&(L=!0),e=e,p?L!==void 0?ig(e,i,D,L):rg(e,i,D):L!==void 0?O0(e,i,D,L):ky(e,i,D)}function Hn(e,i){return e===i||e.nodeType===wi&&e.parentNode===i}function Br(e,i,h,p,C){var D=p;if(!(i&jh)&&!(i&Vt)){var L=C;if(p!==null){var $=p;e:for(;;){if($===null)return;var Z=$.tag;if(Z===B||Z===W){var re=$.stateNode.containerInfo;if(Hn(re,L))break;if(Z===W)for(var ue=$.return;ue!==null;){var Ie=ue.tag;if(Ie===B||Ie===W){var Re=ue.stateNode.containerInfo;if(Hn(Re,L))return}ue=ue.return}for(;re!==null;){var Xe=nf(re);if(Xe===null)return;var et=Xe.tag;if(et===ie||et===pe){$=D=Xe;continue e}re=re.parentNode}}$=$.return}}}Ws(function(){return Et(e,i,h,D)})}function Or(e,i,h){return{instance:e,listener:i,currentTarget:h}}function Hi(e,i,h,p,C,D){for(var L=i!==null?i+"Capture":null,$=p?L:i,Z=[],re=e,ue=null;re!==null;){var Ie=re,Re=Ie.stateNode,Xe=Ie.tag;if(Xe===ie&&Re!==null&&(ue=Re,$!==null)){var et=Tc(re,$);et!=null&&Z.push(Or(re,et,ue))}if(C)break;re=re.return}return Z}function js(e,i){for(var h=i+"Capture",p=[],C=e;C!==null;){var D=C,L=D.stateNode,$=D.tag;if($===ie&&L!==null){var Z=L,re=Tc(C,h);re!=null&&p.unshift(Or(C,re,Z));var ue=Tc(C,i);ue!=null&&p.push(Or(C,ue,Z))}C=C.return}return p}function Gi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==ie);return e||null}function Bi(e,i){for(var h=e,p=i,C=0,D=h;D;D=Gi(D))C++;for(var L=0,$=p;$;$=Gi($))L++;for(;C-L>0;)h=Gi(h),C--;for(;L-C>0;)p=Gi(p),L--;for(var Z=C;Z--;){if(h===p||p!==null&&h===p.alternate)return h;h=Gi(h),p=Gi(p)}return null}function rs(e,i,h,p,C){for(var D=i._reactName,L=[],$=h;$!==null&&$!==p;){var Z=$,re=Z.alternate,ue=Z.stateNode,Ie=Z.tag;if(re!==null&&re===p)break;if(Ie===ie&&ue!==null){var Re=ue;if(C){var Xe=Tc($,D);Xe!=null&&L.unshift(Or($,Xe,Re))}else if(!C){var et=Tc($,D);et!=null&&L.push(Or($,et,Re))}}$=$.return}L.length!==0&&e.push({event:i,listeners:L})}function ws(e,i,h,p,C){var D=p&&C?Bi(p,C):null;p!==null&&rs(e,i,p,D,!1),C!==null&&h!==null&&rs(e,h,C,D,!0)}function Ys(e,i){return e+"__bubble"}var Zr=!1,bi="dangerouslySetInnerHTML",Di="suppressContentEditableWarning",Ti="suppressHydrationWarning",ks="autoFocus",Ii="children",Wi="style",Cs="__html",Li,Jn,Zi,ds,Pi,qa,co;Li={dialog:!0,webview:!0},Jn=function(e,i){Po(e,i),Th(e,i),Sc(e,i,{registrationNameDependencies:yn,possibleRegistrationNames:Ft})},qa=vr&&!document.documentMode,Zi=function(e,i,h){if(!Zr){var p=ia(h),C=ia(i);C!==p&&(Zr=!0,b("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(C),JSON.stringify(p)))}},ds=function(e){if(!Zr){Zr=!0;var i=[];e.forEach(function(h){i.push(h)}),b("Extra attributes from the server: %s",i)}},Pi=function(e,i){i===!1?b("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):b("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof i)},co=function(e,i){var h=e.namespaceURI===Co?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return h.innerHTML=i,h.innerHTML};var Ro=/\r\n?/g,Yl=/\u0000|\uFFFD/g;function ia(e){We(e);var i=typeof e=="string"?e:""+e;return i.replace(Ro,`
`).replace(Yl,"")}function Xs(e,i,h,p){var C=ia(i),D=ia(e);if(D!==C&&(p&&(Zr||(Zr=!0,b('Text content did not match. Server: "%s" Client: "%s"',D,C))),h&&at))throw new Error("Text content does not match server-rendered HTML.")}function Js(e){return e.nodeType===ba?e:e.ownerDocument}function Xl(){}function Fc(e){e.onclick=Xl}function ib(e,i,h,p,C){for(var D in p)if(p.hasOwnProperty(D)){var L=p[D];if(D===Wi)L&&Object.freeze(L),Eh(i,L);else if(D===bi){var $=L?L[Cs]:void 0;$!=null&&dd(i,$)}else if(D===Ii)if(typeof L=="string"){var Z=e!=="textarea"||L!=="";Z&&Wo(i,L)}else typeof L=="number"&&Wo(i,""+L);else D===Di||D===Ti||D===ks||(yn.hasOwnProperty(D)?L!=null&&(typeof L!="function"&&Pi(D,L),D==="onScroll"&&_t("scroll",i)):L!=null&&Ne(i,D,L,C))}}function Tg(e,i,h,p){for(var C=0;C<i.length;C+=2){var D=i[C],L=i[C+1];D===Wi?Eh(e,L):D===bi?dd(e,L):D===Ii?Wo(e,L):Ne(e,D,L,p)}}function Pg(e,i,h,p){var C,D=Js(h),L,$=p;if($===Co&&($=ei(e)),$===Co){if(C=Ko(e,i),!C&&e!==e.toLowerCase()&&b("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),e==="script"){var Z=D.createElement("div");Z.innerHTML="<script><\/script>";var re=Z.firstChild;L=Z.removeChild(re)}else if(typeof i.is=="string")L=D.createElement(e,{is:i.is});else if(L=D.createElement(e),e==="select"){var ue=L;i.multiple?ue.multiple=!0:i.size&&(ue.size=i.size)}}else L=D.createElementNS($,e);return $===Co&&!C&&Object.prototype.toString.call(L)==="[object HTMLUnknownElement]"&&!fn.call(Li,e)&&(Li[e]=!0,b("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e)),L}function Jl(e,i){return Js(i).createTextNode(e)}function sb(e,i,h,p){var C=Ko(i,h);Jn(i,h);var D;switch(i){case"dialog":_t("cancel",e),_t("close",e),D=h;break;case"iframe":case"object":case"embed":_t("load",e),D=h;break;case"video":case"audio":for(var L=0;L<st.length;L++)_t(st[L],e);D=h;break;case"source":_t("error",e),D=h;break;case"img":case"image":case"link":_t("error",e),_t("load",e),D=h;break;case"details":_t("toggle",e),D=h;break;case"input":xc(e,h),D=Pl(e,h),_t("invalid",e);break;case"option":jr(e,h),D=h;break;case"select":wc(e,h),D=_c(e,h),_t("invalid",e);break;case"textarea":_h(e,h),D=Go(e,h),_t("invalid",e);break;default:D=h}switch(pd(i,D),ib(i,e,p,D,C),i){case"input":Hs(e),Ye(e,h,!1);break;case"textarea":Hs(e),pr(e);break;case"option":Xr(e,h);break;case"select":lu(e,h);break;default:typeof D.onClick=="function"&&Fc(e);break}}function ab(e,i,h,p,C){Jn(i,p);var D=null,L,$;switch(i){case"input":L=Pl(e,h),$=Pl(e,p),D=[];break;case"select":L=_c(e,h),$=_c(e,p),D=[];break;case"textarea":L=Go(e,h),$=Go(e,p),D=[];break;default:L=h,$=p,typeof L.onClick!="function"&&typeof $.onClick=="function"&&Fc(e);break}pd(i,$);var Z,re,ue=null;for(Z in L)if(!($.hasOwnProperty(Z)||!L.hasOwnProperty(Z)||L[Z]==null))if(Z===Wi){var Ie=L[Z];for(re in Ie)Ie.hasOwnProperty(re)&&(ue||(ue={}),ue[re]="")}else Z===bi||Z===Ii||Z===Di||Z===Ti||Z===ks||(yn.hasOwnProperty(Z)?D||(D=[]):(D=D||[]).push(Z,null));for(Z in $){var Re=$[Z],Xe=L!=null?L[Z]:void 0;if(!(!$.hasOwnProperty(Z)||Re===Xe||Re==null&&Xe==null))if(Z===Wi)if(Re&&Object.freeze(Re),Xe){for(re in Xe)Xe.hasOwnProperty(re)&&(!Re||!Re.hasOwnProperty(re))&&(ue||(ue={}),ue[re]="");for(re in Re)Re.hasOwnProperty(re)&&Xe[re]!==Re[re]&&(ue||(ue={}),ue[re]=Re[re])}else ue||(D||(D=[]),D.push(Z,ue)),ue=Re;else if(Z===bi){var et=Re?Re[Cs]:void 0,ot=Xe?Xe[Cs]:void 0;et!=null&&ot!==et&&(D=D||[]).push(Z,et)}else Z===Ii?(typeof Re=="string"||typeof Re=="number")&&(D=D||[]).push(Z,""+Re):Z===Di||Z===Ti||(yn.hasOwnProperty(Z)?(Re!=null&&(typeof Re!="function"&&Pi(Z,Re),Z==="onScroll"&&_t("scroll",e)),!D&&Xe!==Re&&(D=[])):(D=D||[]).push(Z,Re))}return ue&&(io(ue,$[Wi]),(D=D||[]).push(Wi,ue)),D}function n_(e,i,h,p,C){h==="input"&&C.type==="radio"&&C.name!=null&&K(e,C);var D=Ko(h,p),L=Ko(h,C);switch(Tg(e,i,D,L),h){case"input":we(e,C);break;case"textarea":ud(e,C);break;case"select":ro(e,C);break}}function r_(e){{var i=e.toLowerCase();return bu.hasOwnProperty(i)&&bu[i]||null}}function i_(e,i,h,p,C,D,L){var $,Z;switch($=Ko(i,h),Jn(i,h),i){case"dialog":_t("cancel",e),_t("close",e);break;case"iframe":case"object":case"embed":_t("load",e);break;case"video":case"audio":for(var re=0;re<st.length;re++)_t(st[re],e);break;case"source":_t("error",e);break;case"img":case"image":case"link":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"input":xc(e,h),_t("invalid",e);break;case"option":jr(e,h);break;case"select":wc(e,h),_t("invalid",e);break;case"textarea":_h(e,h),_t("invalid",e);break}pd(i,h);{Z=new Set;for(var ue=e.attributes,Ie=0;Ie<ue.length;Ie++){var Re=ue[Ie].name.toLowerCase();switch(Re){case"value":break;case"checked":break;case"selected":break;default:Z.add(ue[Ie].name)}}}var Xe=null;for(var et in h)if(h.hasOwnProperty(et)){var ot=h[et];if(et===Ii)typeof ot=="string"?e.textContent!==ot&&(h[Ti]!==!0&&Xs(e.textContent,ot,D,L),Xe=[Ii,ot]):typeof ot=="number"&&e.textContent!==""+ot&&(h[Ti]!==!0&&Xs(e.textContent,ot,D,L),Xe=[Ii,""+ot]);else if(yn.hasOwnProperty(et))ot!=null&&(typeof ot!="function"&&Pi(et,ot),et==="onScroll"&&_t("scroll",e));else if(L&&typeof $=="boolean"){var Wt=void 0,Tn=Kt(et);if(h[Ti]!==!0){if(!(et===Di||et===Ti||et==="value"||et==="checked"||et==="selected")){if(et===bi){var wn=e.innerHTML,wr=ot?ot[Cs]:void 0;if(wr!=null){var fr=co(e,wr);fr!==wn&&Zi(et,wn,fr)}}else if(et===Wi){if(Z.delete(et),qa){var He=If(ot);Wt=e.getAttribute("style"),He!==Wt&&Zi(et,Wt,He)}}else if($&&!Bn)Z.delete(et.toLowerCase()),Wt=he(e,et,ot),ot!==Wt&&Zi(et,Wt,ot);else if(!br(et,Tn,$)&&!gt(et,ot,Tn,$)){var lt=!1;if(Tn!==null)Z.delete(Tn.attributeName),Wt=se(e,et,ot,Tn);else{var Ge=p;if(Ge===Co&&(Ge=ei(i)),Ge===Co)Z.delete(et.toLowerCase());else{var St=r_(et);St!==null&&St!==et&&(lt=!0,Z.delete(St)),Z.delete(et)}Wt=he(e,et,ot)}var on=Bn;!on&&ot!==Wt&&!lt&&Zi(et,Wt,ot)}}}}}switch(L&&Z.size>0&&h[Ti]!==!0&&ds(Z),i){case"input":Hs(e),Ye(e,h,!0);break;case"textarea":Hs(e),pr(e);break;case"select":case"option":break;default:typeof h.onClick=="function"&&Fc(e);break}return Xe}function s_(e,i,h){var p=e.nodeValue!==i;return p}function jg(e,i){{if(Zr)return;Zr=!0,b("Did not expect server HTML to contain a <%s> in <%s>.",i.nodeName.toLowerCase(),e.nodeName.toLowerCase())}}function kg(e,i){{if(Zr)return;Zr=!0,b('Did not expect server HTML to contain the text node "%s" in <%s>.',i.nodeValue,e.nodeName.toLowerCase())}}function Ag(e,i,h){{if(Zr)return;Zr=!0,b("Expected server HTML to contain a matching <%s> in <%s>.",i,e.nodeName.toLowerCase())}}function Mg(e,i){{if(i===""||Zr)return;Zr=!0,b('Expected server HTML to contain a matching text node for "%s" in <%s>.',i,e.nodeName.toLowerCase())}}function Io(e,i,h){switch(i){case"input":rt(e,h);return;case"textarea":mi(e,h);return;case"select":cd(e,h);return}}var Uc=function(){},Wd=function(){};{var a_=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],ob=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],o_=ob.concat(["button"]),As=["dd","dt","li","option","optgroup","p","rp","rt"],ja={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Wd=function(e,i){var h=kn({},e||ja),p={tag:i};return ob.indexOf(i)!==-1&&(h.aTagInScope=null,h.buttonTagInScope=null,h.nobrTagInScope=null),o_.indexOf(i)!==-1&&(h.pTagInButtonScope=null),a_.indexOf(i)!==-1&&i!=="address"&&i!=="div"&&i!=="p"&&(h.listItemTagAutoclosing=null,h.dlItemTagAutoclosing=null),h.current=p,i==="form"&&(h.formTag=p),i==="a"&&(h.aTagInScope=p),i==="button"&&(h.buttonTagInScope=p),i==="nobr"&&(h.nobrTagInScope=p),i==="p"&&(h.pTagInButtonScope=p),i==="li"&&(h.listItemTagAutoclosing=p),(i==="dd"||i==="dt")&&(h.dlItemTagAutoclosing=p),h};var Bu=function(e,i){switch(i){case"select":return e==="option"||e==="optgroup"||e==="#text";case"optgroup":return e==="option"||e==="#text";case"option":return e==="#text";case"tr":return e==="th"||e==="td"||e==="style"||e==="script"||e==="template";case"tbody":case"thead":case"tfoot":return e==="tr"||e==="style"||e==="script"||e==="template";case"colgroup":return e==="col"||e==="template";case"table":return e==="caption"||e==="colgroup"||e==="tbody"||e==="tfoot"||e==="thead"||e==="style"||e==="script"||e==="template";case"head":return e==="base"||e==="basefont"||e==="bgsound"||e==="link"||e==="meta"||e==="title"||e==="noscript"||e==="noframes"||e==="style"||e==="script"||e==="template";case"html":return e==="head"||e==="body"||e==="frameset";case"frameset":return e==="frame";case"#document":return e==="html"}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i!=="h1"&&i!=="h2"&&i!=="h3"&&i!=="h4"&&i!=="h5"&&i!=="h6";case"rp":case"rt":return As.indexOf(i)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return i==null}return!0},Lo=function(e,i){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return i.pTagInButtonScope;case"form":return i.formTag||i.pTagInButtonScope;case"li":return i.listItemTagAutoclosing;case"dd":case"dt":return i.dlItemTagAutoclosing;case"button":return i.buttonTagInScope;case"a":return i.aTagInScope;case"nobr":return i.nobrTagInScope}return null},$c={};Uc=function(e,i,h){h=h||ja;var p=h.current,C=p&&p.tag;i!=null&&(e!=null&&b("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var D=Bu(e,C)?null:p,L=D?null:Lo(e,h),$=D||L;if($){var Z=$.tag,re=!!D+"|"+e+"|"+Z;if(!$c[re]){$c[re]=!0;var ue=e,Ie="";if(e==="#text"?/\S/.test(i)?ue="Text nodes":(ue="Whitespace text nodes",Ie=" Make sure you don't have any extra whitespace between tags on each line of your source code."):ue="<"+e+">",D){var Re="";Z==="table"&&e==="tr"&&(Re+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),b("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",ue,Z,Ie,Re)}else b("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",ue,Z)}}}}var Ha="suppressHydrationWarning",lb="$",cb="/$",Rg="$?",Ig="$!",qA="style",l_=null,c_=null;function HA(e){var i,h,p=e.nodeType;switch(p){case ba:case du:{i=p===ba?"#document":"#fragment";var C=e.documentElement;h=C?C.namespaceURI:Gr(null,"");break}default:{var D=p===wi?e.parentNode:e,L=D.namespaceURI||null;i=D.tagName,h=Gr(L,i);break}}{var $=i.toLowerCase(),Z=Wd(null,$);return{namespace:h,ancestorInfo:Z}}}function GA(e,i,h){{var p=e,C=Gr(p.namespace,i),D=Wd(p.ancestorInfo,i);return{namespace:C,ancestorInfo:D}}}function IU(e){return e}function WA(e){l_=M0(),c_=Ng();var i=null;return jy(!1),i}function ZA(e){Sm(c_),jy(l_),l_=null,c_=null}function KA(e,i,h,p,C){var D;{var L=p;if(Uc(e,null,L.ancestorInfo),typeof i.children=="string"||typeof i.children=="number"){var $=""+i.children,Z=Wd(L.ancestorInfo,e);Uc(null,$,Z)}D=L.namespace}var re=Pg(e,i,h,D);return Og(C,re),v_(re,i),re}function YA(e,i){e.appendChild(i)}function XA(e,i,h,p,C){switch(sb(e,i,h,p),i){case"button":case"input":case"select":case"textarea":return!!h.autoFocus;case"img":return!0;default:return!1}}function JA(e,i,h,p,C,D){{var L=D;if(typeof p.children!=typeof h.children&&(typeof p.children=="string"||typeof p.children=="number")){var $=""+p.children,Z=Wd(L.ancestorInfo,i);Uc(null,$,Z)}}return ab(e,i,h,p)}function u_(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}function QA(e,i,h,p){{var C=h;Uc(null,e,C.ancestorInfo)}var D=Jl(e,i);return Og(p,D),D}function e2(){var e=window.event;return e===void 0?Hl:Ou(e.type)}var d_=typeof setTimeout=="function"?setTimeout:void 0,t2=typeof clearTimeout=="function"?clearTimeout:void 0,h_=-1,rS=typeof Promise=="function"?Promise:void 0,n2=typeof queueMicrotask=="function"?queueMicrotask:typeof rS<"u"?function(e){return rS.resolve(null).then(e).catch(r2)}:d_;function r2(e){setTimeout(function(){throw e})}function i2(e,i,h,p){switch(i){case"button":case"input":case"select":case"textarea":h.autoFocus&&e.focus();return;case"img":{h.src&&(e.src=h.src);return}}}function s2(e,i,h,p,C,D){n_(e,i,h,p,C),v_(e,C)}function iS(e){Wo(e,"")}function a2(e,i,h){e.nodeValue=h}function o2(e,i){e.appendChild(i)}function l2(e,i){var h;e.nodeType===wi?(h=e.parentNode,h.insertBefore(i,e)):(h=e,h.appendChild(i));var p=e._reactRootContainer;p==null&&h.onclick===null&&Fc(h)}function c2(e,i,h){e.insertBefore(i,h)}function u2(e,i,h){e.nodeType===wi?e.parentNode.insertBefore(i,h):e.insertBefore(i,h)}function d2(e,i){e.removeChild(i)}function h2(e,i){e.nodeType===wi?e.parentNode.removeChild(i):e.removeChild(i)}function f_(e,i){var h=i,p=0;do{var C=h.nextSibling;if(e.removeChild(h),C&&C.nodeType===wi){var D=C.data;if(D===cb)if(p===0){e.removeChild(C),al(i);return}else p--;else(D===lb||D===Rg||D===Ig)&&p++}h=C}while(h);al(i)}function f2(e,i){e.nodeType===wi?f_(e.parentNode,i):e.nodeType===cs&&f_(e,i),al(e)}function m2(e){e=e;var i=e.style;typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"}function p2(e){e.nodeValue=""}function g2(e,i){e=e;var h=i[qA],p=h!=null&&h.hasOwnProperty("display")?h.display:null;e.style.display=Ch("display",p)}function v2(e,i){e.nodeValue=i}function y2(e){e.nodeType===cs?e.textContent="":e.nodeType===ba&&e.documentElement&&e.removeChild(e.documentElement)}function b2(e,i,h){return e.nodeType!==cs||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e}function x2(e,i){return i===""||e.nodeType!==ya?null:e}function _2(e){return e.nodeType!==wi?null:e}function sS(e){return e.data===Rg}function m_(e){return e.data===Ig}function w2(e){var i=e.nextSibling&&e.nextSibling.dataset,h,p,C;return i&&(h=i.dgst,p=i.msg,C=i.stck),{message:p,digest:h,stack:C}}function C2(e,i){e._reactRetry=i}function ub(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===cs||i===ya)break;if(i===wi){var h=e.data;if(h===lb||h===Ig||h===Rg)break;if(h===cb)return null}}return e}function Lg(e){return ub(e.nextSibling)}function N2(e){return ub(e.firstChild)}function S2(e){return ub(e.firstChild)}function E2(e){return ub(e.nextSibling)}function D2(e,i,h,p,C,D,L){Og(D,e),v_(e,h);var $;{var Z=C;$=Z.namespace}var re=(D.mode&cr)!==Sn;return i_(e,i,h,$,p,re,L)}function T2(e,i,h,p){return Og(h,e),h.mode&cr,s_(e,i)}function P2(e,i){Og(i,e)}function j2(e){for(var i=e.nextSibling,h=0;i;){if(i.nodeType===wi){var p=i.data;if(p===cb){if(h===0)return Lg(i);h--}else(p===lb||p===Ig||p===Rg)&&h++}i=i.nextSibling}return null}function aS(e){for(var i=e.previousSibling,h=0;i;){if(i.nodeType===wi){var p=i.data;if(p===lb||p===Ig||p===Rg){if(h===0)return i;h--}else p===cb&&h++}i=i.previousSibling}return null}function k2(e){al(e)}function A2(e){al(e)}function M2(e){return e!=="head"&&e!=="body"}function R2(e,i,h,p){var C=!0;Xs(i.nodeValue,h,p,C)}function I2(e,i,h,p,C,D){if(i[Ha]!==!0){var L=!0;Xs(p.nodeValue,C,D,L)}}function L2(e,i){i.nodeType===cs?jg(e,i):i.nodeType===wi||kg(e,i)}function V2(e,i){{var h=e.parentNode;h!==null&&(i.nodeType===cs?jg(h,i):i.nodeType===wi||kg(h,i))}}function O2(e,i,h,p,C){(C||i[Ha]!==!0)&&(p.nodeType===cs?jg(h,p):p.nodeType===wi||kg(h,p))}function z2(e,i,h){Ag(e,i)}function B2(e,i){Mg(e,i)}function F2(e,i,h){{var p=e.parentNode;p!==null&&Ag(p,i)}}function U2(e,i){{var h=e.parentNode;h!==null&&Mg(h,i)}}function $2(e,i,h,p,C,D){(D||i[Ha]!==!0)&&Ag(h,p)}function q2(e,i,h,p,C){(C||i[Ha]!==!0)&&Mg(h,p)}function H2(e){b("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",e.nodeName.toLowerCase())}function G2(e){dn(e)}var Em=Math.random().toString(36).slice(2),Dm="__reactFiber$"+Em,p_="__reactProps$"+Em,Vg="__reactContainer$"+Em,g_="__reactEvents$"+Em,W2="__reactListeners$"+Em,Z2="__reactHandles$"+Em;function K2(e){delete e[Dm],delete e[p_],delete e[g_],delete e[W2],delete e[Z2]}function Og(e,i){i[Dm]=e}function db(e,i){i[Vg]=e}function oS(e){e[Vg]=null}function zg(e){return!!e[Vg]}function nf(e){var i=e[Dm];if(i)return i;for(var h=e.parentNode;h;){if(i=h[Vg]||h[Dm],i){var p=i.alternate;if(i.child!==null||p!==null&&p.child!==null)for(var C=aS(e);C!==null;){var D=C[Dm];if(D)return D;C=aS(C)}return i}e=h,h=e.parentNode}return null}function Zd(e){var i=e[Dm]||e[Vg];return i&&(i.tag===ie||i.tag===pe||i.tag===Oe||i.tag===B)?i:null}function Tm(e){if(e.tag===ie||e.tag===pe)return e.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function hb(e){return e[p_]||null}function v_(e,i){e[p_]=i}function Y2(e){var i=e[g_];return i===void 0&&(i=e[g_]=new Set),i}var lS={},cS=a.ReactDebugCurrentFrame;function fb(e){if(e){var i=e._owner,h=wl(e.type,e._source,i?i.type:null);cS.setExtraStackFrame(h)}else cS.setExtraStackFrame(null)}function Ql(e,i,h,p,C){{var D=Function.call.bind(fn);for(var L in e)if(D(e,L)){var $=void 0;try{if(typeof e[L]!="function"){var Z=Error((p||"React class")+": "+h+" type `"+L+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[L]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Z.name="Invariant Violation",Z}$=e[L](i,L,p,h,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(re){$=re}$&&!($ instanceof Error)&&(fb(C),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",p||"React class",h,L,typeof $),fb(null)),$ instanceof Error&&!($.message in lS)&&(lS[$.message]=!0,fb(C),b("Failed %s type: %s",h,$.message),fb(null))}}}var y_=[],mb;mb=[];var Fu=-1;function Kd(e){return{current:e}}function ka(e,i){if(Fu<0){b("Unexpected pop.");return}i!==mb[Fu]&&b("Unexpected Fiber popped."),e.current=y_[Fu],y_[Fu]=null,mb[Fu]=null,Fu--}function Aa(e,i,h){Fu++,y_[Fu]=e.current,mb[Fu]=h,e.current=i}var b_;b_={};var Vo={};Object.freeze(Vo);var Uu=Kd(Vo),qc=Kd(!1),x_=Vo;function Pm(e,i,h){return h&&Hc(i)?x_:Uu.current}function uS(e,i,h){{var p=e.stateNode;p.__reactInternalMemoizedUnmaskedChildContext=i,p.__reactInternalMemoizedMaskedChildContext=h}}function jm(e,i){{var h=e.type,p=h.contextTypes;if(!p)return Vo;var C=e.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===i)return C.__reactInternalMemoizedMaskedChildContext;var D={};for(var L in p)D[L]=i[L];{var $=Mn(e)||"Unknown";Ql(p,D,"context",$)}return C&&uS(e,i,D),D}}function pb(){return qc.current}function Hc(e){{var i=e.childContextTypes;return i!=null}}function gb(e){ka(qc,e),ka(Uu,e)}function __(e){ka(qc,e),ka(Uu,e)}function dS(e,i,h){{if(Uu.current!==Vo)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Aa(Uu,i,e),Aa(qc,h,e)}}function hS(e,i,h){{var p=e.stateNode,C=i.childContextTypes;if(typeof p.getChildContext!="function"){{var D=Mn(e)||"Unknown";b_[D]||(b_[D]=!0,b("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D))}return h}var L=p.getChildContext();for(var $ in L)if(!($ in C))throw new Error((Mn(e)||"Unknown")+'.getChildContext(): key "'+$+'" is not defined in childContextTypes.');{var Z=Mn(e)||"Unknown";Ql(C,L,"child context",Z)}return kn({},h,L)}}function vb(e){{var i=e.stateNode,h=i&&i.__reactInternalMemoizedMergedChildContext||Vo;return x_=Uu.current,Aa(Uu,h,e),Aa(qc,qc.current,e),!0}}function fS(e,i,h){{var p=e.stateNode;if(!p)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(h){var C=hS(e,i,x_);p.__reactInternalMemoizedMergedChildContext=C,ka(qc,e),ka(Uu,e),Aa(Uu,C,e),Aa(qc,h,e)}else ka(qc,e),Aa(qc,h,e)}}function X2(e){{if(!Nt(e)||e.tag!==A)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var i=e;do{switch(i.tag){case B:return i.stateNode.context;case A:{var h=i.type;if(Hc(h))return i.stateNode.__reactInternalMemoizedMergedChildContext;break}}i=i.return}while(i!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Yd=0,yb=1,$u=null,w_=!1,C_=!1;function mS(e){$u===null?$u=[e]:$u.push(e)}function J2(e){w_=!0,mS(e)}function pS(){w_&&Xd()}function Xd(){if(!C_&&$u!==null){C_=!0;var e=0,i=Ua();try{var h=!0,p=$u;for(bs(Fa);e<p.length;e++){var C=p[e];do C=C(h);while(C!==null)}$u=null,w_=!1}catch(D){throw $u!==null&&($u=$u.slice(e+1)),On(pi,Xd),D}finally{bs(i),C_=!1}}return null}var km=[],Am=0,bb=null,xb=0,cl=[],ul=0,rf=null,qu=1,Hu="";function Q2(e){return af(),(e.flags&q)!==Cn}function eM(e){return af(),xb}function tM(){var e=Hu,i=qu,h=i&~nM(i);return h.toString(32)+e}function sf(e,i){af(),km[Am++]=xb,km[Am++]=bb,bb=e,xb=i}function gS(e,i,h){af(),cl[ul++]=qu,cl[ul++]=Hu,cl[ul++]=rf,rf=e;var p=qu,C=Hu,D=_b(p)-1,L=p&~(1<<D),$=h+1,Z=_b(i)+D;if(Z>30){var re=D-D%5,ue=(1<<re)-1,Ie=(L&ue).toString(32),Re=L>>re,Xe=D-re,et=_b(i)+Xe,ot=$<<Xe,Wt=ot|Re,Tn=Ie+C;qu=1<<et|Wt,Hu=Tn}else{var wn=$<<D,wr=wn|L,fr=C;qu=1<<Z|wr,Hu=fr}}function N_(e){af();var i=e.return;if(i!==null){var h=1,p=0;sf(e,h),gS(e,h,p)}}function _b(e){return 32-Sd(e)}function nM(e){return 1<<_b(e)-1}function S_(e){for(;e===bb;)bb=km[--Am],km[Am]=null,xb=km[--Am],km[Am]=null;for(;e===rf;)rf=cl[--ul],cl[ul]=null,Hu=cl[--ul],cl[ul]=null,qu=cl[--ul],cl[ul]=null}function rM(){return af(),rf!==null?{id:qu,overflow:Hu}:null}function iM(e,i){af(),cl[ul++]=qu,cl[ul++]=Hu,cl[ul++]=rf,qu=i.id,Hu=i.overflow,rf=e}function af(){aa()||b("Expected to be hydrating. This is a bug in React. Please file an issue.")}var sa=null,dl=null,ec=!1,of=!1,Jd=null;function sM(){ec&&b("We should not be hydrating here. This is a bug in React. Please file a bug.")}function vS(){of=!0}function aM(){return of}function oM(e){var i=e.stateNode.containerInfo;return dl=S2(i),sa=e,ec=!0,Jd=null,of=!1,!0}function lM(e,i,h){return dl=E2(i),sa=e,ec=!0,Jd=null,of=!1,h!==null&&iM(e,h),!0}function yS(e,i){switch(e.tag){case B:{L2(e.stateNode.containerInfo,i);break}case ie:{var h=(e.mode&cr)!==Sn;O2(e.type,e.memoizedProps,e.stateNode,i,h);break}case Oe:{var p=e.memoizedState;p.dehydrated!==null&&V2(p.dehydrated,i);break}}}function bS(e,i){yS(e,i);var h=hL();h.stateNode=i,h.return=e;var p=e.deletions;p===null?(e.deletions=[h],e.flags|=Ca):p.push(h)}function E_(e,i){{if(of)return;switch(e.tag){case B:{var h=e.stateNode.containerInfo;switch(i.tag){case ie:var p=i.type;i.pendingProps,z2(h,p);break;case pe:var C=i.pendingProps;B2(h,C);break}break}case ie:{var D=e.type,L=e.memoizedProps,$=e.stateNode;switch(i.tag){case ie:{var Z=i.type,re=i.pendingProps,ue=(e.mode&cr)!==Sn;$2(D,L,$,Z,re,ue);break}case pe:{var Ie=i.pendingProps,Re=(e.mode&cr)!==Sn;q2(D,L,$,Ie,Re);break}}break}case Oe:{var Xe=e.memoizedState,et=Xe.dehydrated;if(et!==null)switch(i.tag){case ie:var ot=i.type;i.pendingProps,F2(et,ot);break;case pe:var Wt=i.pendingProps;U2(et,Wt);break}break}default:return}}}function xS(e,i){i.flags=i.flags&~y|Ci,E_(e,i)}function _S(e,i){switch(e.tag){case ie:{var h=e.type;e.pendingProps;var p=b2(i,h);return p!==null?(e.stateNode=p,sa=e,dl=N2(p),!0):!1}case pe:{var C=e.pendingProps,D=x2(i,C);return D!==null?(e.stateNode=D,sa=e,dl=null,!0):!1}case Oe:{var L=_2(i);if(L!==null){var $={dehydrated:L,treeContext:rM(),retryLane:Ba};e.memoizedState=$;var Z=fL(L);return Z.return=e,e.child=Z,sa=e,dl=null,!0}return!1}default:return!1}}function D_(e){return(e.mode&cr)!==Sn&&(e.flags&un)===Cn}function T_(e){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function P_(e){if(ec){var i=dl;if(!i){D_(e)&&(E_(sa,e),T_()),xS(sa,e),ec=!1,sa=e;return}var h=i;if(!_S(e,i)){D_(e)&&(E_(sa,e),T_()),i=Lg(h);var p=sa;if(!i||!_S(e,i)){xS(sa,e),ec=!1,sa=e;return}bS(p,h)}}}function cM(e,i,h){var p=e.stateNode,C=!of,D=D2(p,e.type,e.memoizedProps,i,h,e,C);return e.updateQueue=D,D!==null}function uM(e){var i=e.stateNode,h=e.memoizedProps,p=T2(i,h,e);if(p){var C=sa;if(C!==null)switch(C.tag){case B:{var D=C.stateNode.containerInfo,L=(C.mode&cr)!==Sn;R2(D,i,h,L);break}case ie:{var $=C.type,Z=C.memoizedProps,re=C.stateNode,ue=(C.mode&cr)!==Sn;I2($,Z,re,i,h,ue);break}}}return p}function dM(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");P2(h,e)}function hM(e){var i=e.memoizedState,h=i!==null?i.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return j2(h)}function wS(e){for(var i=e.return;i!==null&&i.tag!==ie&&i.tag!==B&&i.tag!==Oe;)i=i.return;sa=i}function wb(e){if(e!==sa)return!1;if(!ec)return wS(e),ec=!0,!1;if(e.tag!==B&&(e.tag!==ie||M2(e.type)&&!u_(e.type,e.memoizedProps))){var i=dl;if(i)if(D_(e))CS(e),T_();else for(;i;)bS(e,i),i=Lg(i)}return wS(e),e.tag===Oe?dl=hM(e):dl=sa?Lg(e.stateNode):null,!0}function fM(){return ec&&dl!==null}function CS(e){for(var i=dl;i;)yS(e,i),i=Lg(i)}function Mm(){sa=null,dl=null,ec=!1,of=!1}function NS(){Jd!==null&&(vD(Jd),Jd=null)}function aa(){return ec}function j_(e){Jd===null?Jd=[e]:Jd.push(e)}var mM=a.ReactCurrentBatchConfig,pM=null;function gM(){return mM.transition}var tc={recordUnsafeLifecycleWarnings:function(e,i){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,i){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var vM=function(e){for(var i=null,h=e;h!==null;)h.mode&ui&&(i=h),h=h.return;return i},lf=function(e){var i=[];return e.forEach(function(h){i.push(h)}),i.sort().join(", ")},Bg=[],Fg=[],Ug=[],$g=[],qg=[],Hg=[],cf=new Set;tc.recordUnsafeLifecycleWarnings=function(e,i){cf.has(e.type)||(typeof i.componentWillMount=="function"&&i.componentWillMount.__suppressDeprecationWarning!==!0&&Bg.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillMount=="function"&&Fg.push(e),typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Ug.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillReceiveProps=="function"&&$g.push(e),typeof i.componentWillUpdate=="function"&&i.componentWillUpdate.__suppressDeprecationWarning!==!0&&qg.push(e),e.mode&ui&&typeof i.UNSAFE_componentWillUpdate=="function"&&Hg.push(e))},tc.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Bg.length>0&&(Bg.forEach(function(Re){e.add(Mn(Re)||"Component"),cf.add(Re.type)}),Bg=[]);var i=new Set;Fg.length>0&&(Fg.forEach(function(Re){i.add(Mn(Re)||"Component"),cf.add(Re.type)}),Fg=[]);var h=new Set;Ug.length>0&&(Ug.forEach(function(Re){h.add(Mn(Re)||"Component"),cf.add(Re.type)}),Ug=[]);var p=new Set;$g.length>0&&($g.forEach(function(Re){p.add(Mn(Re)||"Component"),cf.add(Re.type)}),$g=[]);var C=new Set;qg.length>0&&(qg.forEach(function(Re){C.add(Mn(Re)||"Component"),cf.add(Re.type)}),qg=[]);var D=new Set;if(Hg.length>0&&(Hg.forEach(function(Re){D.add(Mn(Re)||"Component"),cf.add(Re.type)}),Hg=[]),i.size>0){var L=lf(i);b(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,L)}if(p.size>0){var $=lf(p);b(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,$)}if(D.size>0){var Z=lf(D);b(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,Z)}if(e.size>0){var re=lf(e);S(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,re)}if(h.size>0){var ue=lf(h);S(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,ue)}if(C.size>0){var Ie=lf(C);S(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Ie)}};var Cb=new Map,SS=new Set;tc.recordLegacyContextWarning=function(e,i){var h=vM(e);if(h===null){b("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!SS.has(e.type)){var p=Cb.get(h);(e.type.contextTypes!=null||e.type.childContextTypes!=null||i!==null&&typeof i.getChildContext=="function")&&(p===void 0&&(p=[],Cb.set(h,p)),p.push(e))}},tc.flushLegacyContextWarning=function(){Cb.forEach(function(e,i){if(e.length!==0){var h=e[0],p=new Set;e.forEach(function(D){p.add(Mn(D)||"Component"),SS.add(D.type)});var C=lf(p);try{oi(h),b(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)}finally{ki()}}})},tc.discardPendingWarnings=function(){Bg=[],Fg=[],Ug=[],$g=[],qg=[],Hg=[],Cb=new Map}}var k_,A_,M_,R_,I_,ES=function(e,i){};k_=!1,A_=!1,M_={},R_={},I_={},ES=function(e,i){if(!(e===null||typeof e!="object")&&!(!e._store||e._store.validated||e.key!=null)){if(typeof e._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var h=Mn(i)||"Component";R_[h]||(R_[h]=!0,b('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function yM(e){return e.prototype&&e.prototype.isReactComponent}function Gg(e,i,h){var p=h.ref;if(p!==null&&typeof p!="function"&&typeof p!="object"){if((e.mode&ui||An)&&!(h._owner&&h._self&&h._owner.stateNode!==h._self)&&!(h._owner&&h._owner.tag!==A)&&!(typeof h.type=="function"&&!yM(h.type))&&h._owner){var C=Mn(e)||"Component";M_[C]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',C,p),M_[C]=!0)}if(h._owner){var D=h._owner,L;if(D){var $=D;if($.tag!==A)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");L=$.stateNode}if(!L)throw new Error("Missing owner for string ref "+p+". This error is likely caused by a bug in React. Please file an issue.");var Z=L;Rr(p,"ref");var re=""+p;if(i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===re)return i.ref;var ue=function(Ie){var Re=Z.refs;Ie===null?delete Re[re]:Re[re]=Ie};return ue._stringRef=re,ue}else{if(typeof p!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!h._owner)throw new Error("Element ref was specified as a string ("+p+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return p}function Nb(e,i){var h=Object.prototype.toString.call(i);throw new Error("Objects are not valid as a React child (found: "+(h==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":h)+"). If you meant to render a collection of children, use an array instead.")}function Sb(e){{var i=Mn(e)||"Component";if(I_[i])return;I_[i]=!0,b("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function DS(e){var i=e._payload,h=e._init;return h(i)}function TS(e){function i(He,lt){if(e){var Ge=He.deletions;Ge===null?(He.deletions=[lt],He.flags|=Ca):Ge.push(lt)}}function h(He,lt){if(!e)return null;for(var Ge=lt;Ge!==null;)i(He,Ge),Ge=Ge.sibling;return null}function p(He,lt){for(var Ge=new Map,St=lt;St!==null;)St.key!==null?Ge.set(St.key,St):Ge.set(St.index,St),St=St.sibling;return Ge}function C(He,lt){var Ge=yf(He,lt);return Ge.index=0,Ge.sibling=null,Ge}function D(He,lt,Ge){if(He.index=Ge,!e)return He.flags|=q,lt;var St=He.alternate;if(St!==null){var on=St.index;return on<lt?(He.flags|=Ci,lt):on}else return He.flags|=Ci,lt}function L(He){return e&&He.alternate===null&&(He.flags|=Ci),He}function $(He,lt,Ge,St){if(lt===null||lt.tag!==pe){var on=j1(Ge,He.mode,St);return on.return=He,on}else{var Qt=C(lt,Ge);return Qt.return=He,Qt}}function Z(He,lt,Ge,St){var on=Ge.type;if(on===Te)return ue(He,lt,Ge.props.children,St,Ge.key);if(lt!==null&&(lt.elementType===on||MD(lt,Ge)||typeof on=="object"&&on!==null&&on.$$typeof===mt&&DS(on)===lt.type)){var Qt=C(lt,Ge.props);return Qt.ref=Gg(He,lt,Ge),Qt.return=He,Qt._debugSource=Ge._source,Qt._debugOwner=Ge._owner,Qt}var Ln=P1(Ge,He.mode,St);return Ln.ref=Gg(He,lt,Ge),Ln.return=He,Ln}function re(He,lt,Ge,St){if(lt===null||lt.tag!==W||lt.stateNode.containerInfo!==Ge.containerInfo||lt.stateNode.implementation!==Ge.implementation){var on=k1(Ge,He.mode,St);return on.return=He,on}else{var Qt=C(lt,Ge.children||[]);return Qt.return=He,Qt}}function ue(He,lt,Ge,St,on){if(lt===null||lt.tag!==Ve){var Qt=ch(Ge,He.mode,St,on);return Qt.return=He,Qt}else{var Ln=C(lt,Ge);return Ln.return=He,Ln}}function Ie(He,lt,Ge){if(typeof lt=="string"&&lt!==""||typeof lt=="number"){var St=j1(""+lt,He.mode,Ge);return St.return=He,St}if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case xe:{var on=P1(lt,He.mode,Ge);return on.ref=Gg(He,null,lt),on.return=He,on}case ge:{var Qt=k1(lt,He.mode,Ge);return Qt.return=He,Qt}case mt:{var Ln=lt._payload,Gn=lt._init;return Ie(He,Gn(Ln),Ge)}}if(rr(lt)||Hr(lt)){var ri=ch(lt,He.mode,Ge,null);return ri.return=He,ri}Nb(He,lt)}return typeof lt=="function"&&Sb(He),null}function Re(He,lt,Ge,St){var on=lt!==null?lt.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return on!==null?null:$(He,lt,""+Ge,St);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case xe:return Ge.key===on?Z(He,lt,Ge,St):null;case ge:return Ge.key===on?re(He,lt,Ge,St):null;case mt:{var Qt=Ge._payload,Ln=Ge._init;return Re(He,lt,Ln(Qt),St)}}if(rr(Ge)||Hr(Ge))return on!==null?null:ue(He,lt,Ge,St,null);Nb(He,Ge)}return typeof Ge=="function"&&Sb(He),null}function Xe(He,lt,Ge,St,on){if(typeof St=="string"&&St!==""||typeof St=="number"){var Qt=He.get(Ge)||null;return $(lt,Qt,""+St,on)}if(typeof St=="object"&&St!==null){switch(St.$$typeof){case xe:{var Ln=He.get(St.key===null?Ge:St.key)||null;return Z(lt,Ln,St,on)}case ge:{var Gn=He.get(St.key===null?Ge:St.key)||null;return re(lt,Gn,St,on)}case mt:var ri=St._payload,Ar=St._init;return Xe(He,lt,Ge,Ar(ri),on)}if(rr(St)||Hr(St)){var hs=He.get(Ge)||null;return ue(lt,hs,St,on,null)}Nb(lt,St)}return typeof St=="function"&&Sb(lt),null}function et(He,lt,Ge){{if(typeof He!="object"||He===null)return lt;switch(He.$$typeof){case xe:case ge:ES(He,Ge);var St=He.key;if(typeof St!="string")break;if(lt===null){lt=new Set,lt.add(St);break}if(!lt.has(St)){lt.add(St);break}b("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",St);break;case mt:var on=He._payload,Qt=He._init;et(Qt(on),lt,Ge);break}}return lt}function ot(He,lt,Ge,St){for(var on=null,Qt=0;Qt<Ge.length;Qt++){var Ln=Ge[Qt];on=et(Ln,on,He)}for(var Gn=null,ri=null,Ar=lt,hs=0,Mr=0,is=null;Ar!==null&&Mr<Ge.length;Mr++){Ar.index>Mr?(is=Ar,Ar=null):is=Ar.sibling;var Ra=Re(He,Ar,Ge[Mr],St);if(Ra===null){Ar===null&&(Ar=is);break}e&&Ar&&Ra.alternate===null&&i(He,Ar),hs=D(Ra,hs,Mr),ri===null?Gn=Ra:ri.sibling=Ra,ri=Ra,Ar=is}if(Mr===Ge.length){if(h(He,Ar),aa()){var fa=Mr;sf(He,fa)}return Gn}if(Ar===null){for(;Mr<Ge.length;Mr++){var zo=Ie(He,Ge[Mr],St);zo!==null&&(hs=D(zo,hs,Mr),ri===null?Gn=zo:ri.sibling=zo,ri=zo)}if(aa()){var Ka=Mr;sf(He,Ka)}return Gn}for(var Ya=p(He,Ar);Mr<Ge.length;Mr++){var Ia=Xe(Ya,He,Mr,Ge[Mr],St);Ia!==null&&(e&&Ia.alternate!==null&&Ya.delete(Ia.key===null?Mr:Ia.key),hs=D(Ia,hs,Mr),ri===null?Gn=Ia:ri.sibling=Ia,ri=Ia)}if(e&&Ya.forEach(function(Jm){return i(He,Jm)}),aa()){var Ju=Mr;sf(He,Ju)}return Gn}function Wt(He,lt,Ge,St){var on=Hr(Ge);if(typeof on!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&Ge[Symbol.toStringTag]==="Generator"&&(A_||b("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),A_=!0),Ge.entries===on&&(k_||b("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),k_=!0);var Qt=on.call(Ge);if(Qt)for(var Ln=null,Gn=Qt.next();!Gn.done;Gn=Qt.next()){var ri=Gn.value;Ln=et(ri,Ln,He)}}var Ar=on.call(Ge);if(Ar==null)throw new Error("An iterable object provided no iterator.");for(var hs=null,Mr=null,is=lt,Ra=0,fa=0,zo=null,Ka=Ar.next();is!==null&&!Ka.done;fa++,Ka=Ar.next()){is.index>fa?(zo=is,is=null):zo=is.sibling;var Ya=Re(He,is,Ka.value,St);if(Ya===null){is===null&&(is=zo);break}e&&is&&Ya.alternate===null&&i(He,is),Ra=D(Ya,Ra,fa),Mr===null?hs=Ya:Mr.sibling=Ya,Mr=Ya,is=zo}if(Ka.done){if(h(He,is),aa()){var Ia=fa;sf(He,Ia)}return hs}if(is===null){for(;!Ka.done;fa++,Ka=Ar.next()){var Ju=Ie(He,Ka.value,St);Ju!==null&&(Ra=D(Ju,Ra,fa),Mr===null?hs=Ju:Mr.sibling=Ju,Mr=Ju)}if(aa()){var Jm=fa;sf(He,Jm)}return hs}for(var Nv=p(He,is);!Ka.done;fa++,Ka=Ar.next()){var Qc=Xe(Nv,He,fa,Ka.value,St);Qc!==null&&(e&&Qc.alternate!==null&&Nv.delete(Qc.key===null?fa:Qc.key),Ra=D(Qc,Ra,fa),Mr===null?hs=Qc:Mr.sibling=Qc,Mr=Qc)}if(e&&Nv.forEach(function(qL){return i(He,qL)}),aa()){var $L=fa;sf(He,$L)}return hs}function Tn(He,lt,Ge,St){if(lt!==null&&lt.tag===pe){h(He,lt.sibling);var on=C(lt,Ge);return on.return=He,on}h(He,lt);var Qt=j1(Ge,He.mode,St);return Qt.return=He,Qt}function wn(He,lt,Ge,St){for(var on=Ge.key,Qt=lt;Qt!==null;){if(Qt.key===on){var Ln=Ge.type;if(Ln===Te){if(Qt.tag===Ve){h(He,Qt.sibling);var Gn=C(Qt,Ge.props.children);return Gn.return=He,Gn._debugSource=Ge._source,Gn._debugOwner=Ge._owner,Gn}}else if(Qt.elementType===Ln||MD(Qt,Ge)||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===mt&&DS(Ln)===Qt.type){h(He,Qt.sibling);var ri=C(Qt,Ge.props);return ri.ref=Gg(He,Qt,Ge),ri.return=He,ri._debugSource=Ge._source,ri._debugOwner=Ge._owner,ri}h(He,Qt);break}else i(He,Qt);Qt=Qt.sibling}if(Ge.type===Te){var Ar=ch(Ge.props.children,He.mode,St,Ge.key);return Ar.return=He,Ar}else{var hs=P1(Ge,He.mode,St);return hs.ref=Gg(He,lt,Ge),hs.return=He,hs}}function wr(He,lt,Ge,St){for(var on=Ge.key,Qt=lt;Qt!==null;){if(Qt.key===on)if(Qt.tag===W&&Qt.stateNode.containerInfo===Ge.containerInfo&&Qt.stateNode.implementation===Ge.implementation){h(He,Qt.sibling);var Ln=C(Qt,Ge.children||[]);return Ln.return=He,Ln}else{h(He,Qt);break}else i(He,Qt);Qt=Qt.sibling}var Gn=k1(Ge,He.mode,St);return Gn.return=He,Gn}function fr(He,lt,Ge,St){var on=typeof Ge=="object"&&Ge!==null&&Ge.type===Te&&Ge.key===null;if(on&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case xe:return L(wn(He,lt,Ge,St));case ge:return L(wr(He,lt,Ge,St));case mt:var Qt=Ge._payload,Ln=Ge._init;return fr(He,lt,Ln(Qt),St)}if(rr(Ge))return ot(He,lt,Ge,St);if(Hr(Ge))return Wt(He,lt,Ge,St);Nb(He,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?L(Tn(He,lt,""+Ge,St)):(typeof Ge=="function"&&Sb(He),h(He,lt))}return fr}var Rm=TS(!0),PS=TS(!1);function bM(e,i){if(e!==null&&i.child!==e.child)throw new Error("Resuming work not yet implemented.");if(i.child!==null){var h=i.child,p=yf(h,h.pendingProps);for(i.child=p,p.return=i;h.sibling!==null;)h=h.sibling,p=p.sibling=yf(h,h.pendingProps),p.return=i;p.sibling=null}}function xM(e,i){for(var h=e.child;h!==null;)oL(h,i),h=h.sibling}var L_=Kd(null),V_;V_={};var Eb=null,Im=null,O_=null,Db=!1;function Tb(){Eb=null,Im=null,O_=null,Db=!1}function jS(){Db=!0}function kS(){Db=!1}function AS(e,i,h){Aa(L_,i._currentValue,e),i._currentValue=h,i._currentRenderer!==void 0&&i._currentRenderer!==null&&i._currentRenderer!==V_&&b("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),i._currentRenderer=V_}function z_(e,i){var h=L_.current;ka(L_,i),e._currentValue=h}function B_(e,i,h){for(var p=e;p!==null;){var C=p.alternate;if(Ru(p.childLanes,i)?C!==null&&!Ru(C.childLanes,i)&&(C.childLanes=tr(C.childLanes,i)):(p.childLanes=tr(p.childLanes,i),C!==null&&(C.childLanes=tr(C.childLanes,i))),p===h)break;p=p.return}p!==h&&b("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function _M(e,i,h){wM(e,i,h)}function wM(e,i,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var C=void 0,D=p.dependencies;if(D!==null){C=p.child;for(var L=D.firstContext;L!==null;){if(L.context===i){if(p.tag===A){var $=Mu(h),Z=Gu(vi,$);Z.tag=jb;var re=p.updateQueue;if(re!==null){var ue=re.shared,Ie=ue.pending;Ie===null?Z.next=Z:(Z.next=Ie.next,Ie.next=Z),ue.pending=Z}}p.lanes=tr(p.lanes,h);var Re=p.alternate;Re!==null&&(Re.lanes=tr(Re.lanes,h)),B_(p.return,h,e),D.lanes=tr(D.lanes,h);break}L=L.next}}else if(p.tag===Ce)C=p.type===e.type?null:p.child;else if(p.tag===pt){var Xe=p.return;if(Xe===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");Xe.lanes=tr(Xe.lanes,h);var et=Xe.alternate;et!==null&&(et.lanes=tr(et.lanes,h)),B_(Xe,h,e),C=p.sibling}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===e){C=null;break}var ot=C.sibling;if(ot!==null){ot.return=C.return,C=ot;break}C=C.return}p=C}}function Lm(e,i){Eb=e,Im=null,O_=null;var h=e.dependencies;if(h!==null){var p=h.firstContext;p!==null&&(Da(h.lanes,i)&&ov(),h.firstContext=null)}}function Ns(e){Db&&b("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var i=e._currentValue;if(O_!==e){var h={context:e,memoizedValue:i,next:null};if(Im===null){if(Eb===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Im=h,Eb.dependencies={lanes:xt,firstContext:h}}else Im=Im.next=h}return i}var uf=null;function F_(e){uf===null?uf=[e]:uf.push(e)}function CM(){if(uf!==null){for(var e=0;e<uf.length;e++){var i=uf[e],h=i.interleaved;if(h!==null){i.interleaved=null;var p=h.next,C=i.pending;if(C!==null){var D=C.next;C.next=p,h.next=D}i.pending=h}}uf=null}}function MS(e,i,h,p){var C=i.interleaved;return C===null?(h.next=h,F_(i)):(h.next=C.next,C.next=h),i.interleaved=h,Pb(e,p)}function NM(e,i,h,p){var C=i.interleaved;C===null?(h.next=h,F_(i)):(h.next=C.next,C.next=h),i.interleaved=h}function SM(e,i,h,p){var C=i.interleaved;return C===null?(h.next=h,F_(i)):(h.next=C.next,C.next=h),i.interleaved=h,Pb(e,p)}function uo(e,i){return Pb(e,i)}var EM=Pb;function Pb(e,i){e.lanes=tr(e.lanes,i);var h=e.alternate;h!==null&&(h.lanes=tr(h.lanes,i)),h===null&&(e.flags&(Ci|y))!==Cn&&PD(e);for(var p=e,C=e.return;C!==null;)C.childLanes=tr(C.childLanes,i),h=C.alternate,h!==null?h.childLanes=tr(h.childLanes,i):(C.flags&(Ci|y))!==Cn&&PD(e),p=C,C=C.return;if(p.tag===B){var D=p.stateNode;return D}else return null}var RS=0,IS=1,jb=2,U_=3,kb=!1,$_,Ab;$_=!1,Ab=null;function q_(e){var i={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:xt},effects:null};e.updateQueue=i}function LS(e,i){var h=i.updateQueue,p=e.updateQueue;if(h===p){var C={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects};i.updateQueue=C}}function Gu(e,i){var h={eventTime:e,lane:i,tag:RS,payload:null,callback:null,next:null};return h}function Qd(e,i,h){var p=e.updateQueue;if(p===null)return null;var C=p.shared;if(Ab===C&&!$_&&(b("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),$_=!0),NI()){var D=C.pending;return D===null?i.next=i:(i.next=D.next,D.next=i),C.pending=i,EM(e,h)}else return SM(e,C,i,h)}function Mb(e,i,h){var p=i.updateQueue;if(p!==null){var C=p.shared;if(Pd(h)){var D=C.lanes;D=by(D,e.pendingLanes);var L=tr(D,h);C.lanes=L,Gp(e,L)}}}function H_(e,i){var h=e.updateQueue,p=e.alternate;if(p!==null){var C=p.updateQueue;if(h===C){var D=null,L=null,$=h.firstBaseUpdate;if($!==null){var Z=$;do{var re={eventTime:Z.eventTime,lane:Z.lane,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null};L===null?D=L=re:(L.next=re,L=re),Z=Z.next}while(Z!==null);L===null?D=L=i:(L.next=i,L=i)}else D=L=i;h={baseState:C.baseState,firstBaseUpdate:D,lastBaseUpdate:L,shared:C.shared,effects:C.effects},e.updateQueue=h;return}}var ue=h.lastBaseUpdate;ue===null?h.firstBaseUpdate=i:ue.next=i,h.lastBaseUpdate=i}function DM(e,i,h,p,C,D){switch(h.tag){case IS:{var L=h.payload;if(typeof L=="function"){jS();var $=L.call(D,p,C);{if(e.mode&ui){Mi(!0);try{L.call(D,p,C)}finally{Mi(!1)}}kS()}return $}return L}case U_:e.flags=e.flags&~z|un;case RS:{var Z=h.payload,re;if(typeof Z=="function"){jS(),re=Z.call(D,p,C);{if(e.mode&ui){Mi(!0);try{Z.call(D,p,C)}finally{Mi(!1)}}kS()}}else re=Z;return re==null?p:kn({},p,re)}case jb:return kb=!0,p}return p}function Rb(e,i,h,p){var C=e.updateQueue;kb=!1,Ab=C.shared;var D=C.firstBaseUpdate,L=C.lastBaseUpdate,$=C.shared.pending;if($!==null){C.shared.pending=null;var Z=$,re=Z.next;Z.next=null,L===null?D=re:L.next=re,L=Z;var ue=e.alternate;if(ue!==null){var Ie=ue.updateQueue,Re=Ie.lastBaseUpdate;Re!==L&&(Re===null?Ie.firstBaseUpdate=re:Re.next=re,Ie.lastBaseUpdate=Z)}}if(D!==null){var Xe=C.baseState,et=xt,ot=null,Wt=null,Tn=null,wn=D;do{var wr=wn.lane,fr=wn.eventTime;if(Ru(p,wr)){if(Tn!==null){var lt={eventTime:fr,lane:Dr,tag:wn.tag,payload:wn.payload,callback:wn.callback,next:null};Tn=Tn.next=lt}Xe=DM(e,C,wn,Xe,i,h);var Ge=wn.callback;if(Ge!==null&&wn.lane!==Dr){e.flags|=Cd;var St=C.effects;St===null?C.effects=[wn]:St.push(wn)}}else{var He={eventTime:fr,lane:wr,tag:wn.tag,payload:wn.payload,callback:wn.callback,next:null};Tn===null?(Wt=Tn=He,ot=Xe):Tn=Tn.next=He,et=tr(et,wr)}if(wn=wn.next,wn===null){if($=C.shared.pending,$===null)break;var on=$,Qt=on.next;on.next=null,wn=Qt,C.lastBaseUpdate=on,C.shared.pending=null}}while(!0);Tn===null&&(ot=Xe),C.baseState=ot,C.firstBaseUpdate=Wt,C.lastBaseUpdate=Tn;var Ln=C.shared.interleaved;if(Ln!==null){var Gn=Ln;do et=tr(et,Gn.lane),Gn=Gn.next;while(Gn!==Ln)}else D===null&&(C.shared.lanes=xt);bv(et),e.lanes=et,e.memoizedState=Xe}Ab=null}function TM(e,i){if(typeof e!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+e));e.call(i)}function VS(){kb=!1}function Ib(){return kb}function OS(e,i,h){var p=i.effects;if(i.effects=null,p!==null)for(var C=0;C<p.length;C++){var D=p[C],L=D.callback;L!==null&&(D.callback=null,TM(L,h))}}var Wg={},eh=Kd(Wg),Zg=Kd(Wg),Lb=Kd(Wg);function Vb(e){if(e===Wg)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function zS(){var e=Vb(Lb.current);return e}function G_(e,i){Aa(Lb,i,e),Aa(Zg,e,e),Aa(eh,Wg,e);var h=HA(i);ka(eh,e),Aa(eh,h,e)}function Vm(e){ka(eh,e),ka(Zg,e),ka(Lb,e)}function W_(){var e=Vb(eh.current);return e}function BS(e){Vb(Lb.current);var i=Vb(eh.current),h=GA(i,e.type);i!==h&&(Aa(Zg,e,e),Aa(eh,h,e))}function Z_(e){Zg.current===e&&(ka(eh,e),ka(Zg,e))}var PM=0,FS=1,US=1,Kg=2,nc=Kd(PM);function K_(e,i){return(e&i)!==0}function Om(e){return e&FS}function Y_(e,i){return e&FS|i}function jM(e,i){return e|i}function th(e,i){Aa(nc,i,e)}function zm(e){ka(nc,e)}function kM(e,i){var h=e.memoizedState;return h!==null?h.dehydrated!==null:(e.memoizedProps,!0)}function Ob(e){for(var i=e;i!==null;){if(i.tag===Oe){var h=i.memoizedState;if(h!==null){var p=h.dehydrated;if(p===null||sS(p)||m_(p))return i}}else if(i.tag===Yt&&i.memoizedProps.revealOrder!==void 0){var C=(i.flags&un)!==Cn;if(C)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)return null;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ho=0,Ms=1,Gc=2,Rs=4,oa=8,X_=[];function J_(){for(var e=0;e<X_.length;e++){var i=X_[e];i._workInProgressVersionPrimary=null}X_.length=0}function AM(e,i){var h=i._getVersion,p=h(i._source);e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,p]:e.mutableSourceEagerHydrationData.push(i,p)}var sn=a.ReactCurrentDispatcher,Yg=a.ReactCurrentBatchConfig,Q_,Bm;Q_=new Set;var df=xt,ni=null,Is=null,Ls=null,zb=!1,Xg=!1,Jg=0,MM=0,RM=25,ht=null,hl=null,nh=-1,ew=!1;function Fr(){{var e=ht;hl===null?hl=[e]:hl.push(e)}}function Ht(){{var e=ht;hl!==null&&(nh++,hl[nh]!==e&&IM(e))}}function Fm(e){e!=null&&!rr(e)&&b("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",ht,typeof e)}function IM(e){{var i=Mn(ni);if(!Q_.has(i)&&(Q_.add(i),hl!==null)){for(var h="",p=30,C=0;C<=nh;C++){for(var D=hl[C],L=C===nh?e:D,$=C+1+". "+D;$.length<p;)$+=" ";$+=L+`
`,h+=$}b(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,i,h)}}}function Ma(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function tw(e,i){if(ew)return!1;if(i===null)return b("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",ht),!1;e.length!==i.length&&b(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,ht,"["+i.join(", ")+"]","["+e.join(", ")+"]");for(var h=0;h<i.length&&h<e.length;h++)if(!Pa(e[h],i[h]))return!1;return!0}function Um(e,i,h,p,C,D){df=D,ni=i,hl=e!==null?e._debugHookTypes:null,nh=-1,ew=e!==null&&e.type!==i.type,i.memoizedState=null,i.updateQueue=null,i.lanes=xt,e!==null&&e.memoizedState!==null?sn.current=uE:hl!==null?sn.current=cE:sn.current=lE;var L=h(p,C);if(Xg){var $=0;do{if(Xg=!1,Jg=0,$>=RM)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");$+=1,ew=!1,Is=null,Ls=null,i.updateQueue=null,nh=-1,sn.current=dE,L=h(p,C)}while(Xg)}sn.current=Jb,i._debugHookTypes=hl;var Z=Is!==null&&Is.next!==null;if(df=xt,ni=null,Is=null,Ls=null,ht=null,hl=null,nh=-1,e!==null&&(e.flags&$e)!==(i.flags&$e)&&(e.mode&cr)!==Sn&&b("Internal React error: Expected static flag was missing. Please notify the React team."),zb=!1,Z)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return L}function $m(){var e=Jg!==0;return Jg=0,e}function $S(e,i,h){i.updateQueue=e.updateQueue,(i.mode&nl)!==Sn?i.flags&=-50333701:i.flags&=-2053,e.lanes=om(e.lanes,h)}function qS(){if(sn.current=Jb,zb){for(var e=ni.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}zb=!1}df=xt,ni=null,Is=null,Ls=null,hl=null,nh=-1,ht=null,rE=!1,Xg=!1,Jg=0}function Wc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?ni.memoizedState=Ls=e:Ls=Ls.next=e,Ls}function fl(){var e;if(Is===null){var i=ni.alternate;i!==null?e=i.memoizedState:e=null}else e=Is.next;var h;if(Ls===null?h=ni.memoizedState:h=Ls.next,h!==null)Ls=h,h=Ls.next,Is=e;else{if(e===null)throw new Error("Rendered more hooks than during the previous render.");Is=e;var p={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null};Ls===null?ni.memoizedState=Ls=p:Ls=Ls.next=p}return Ls}function HS(){return{lastEffect:null,stores:null}}function nw(e,i){return typeof i=="function"?i(e):i}function rw(e,i,h){var p=Wc(),C;h!==void 0?C=h(i):C=i,p.memoizedState=p.baseState=C;var D={pending:null,interleaved:null,lanes:xt,dispatch:null,lastRenderedReducer:e,lastRenderedState:C};p.queue=D;var L=D.dispatch=zM.bind(null,ni,D);return[p.memoizedState,L]}function iw(e,i,h){var p=fl(),C=p.queue;if(C===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");C.lastRenderedReducer=e;var D=Is,L=D.baseQueue,$=C.pending;if($!==null){if(L!==null){var Z=L.next,re=$.next;L.next=re,$.next=Z}D.baseQueue!==L&&b("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),D.baseQueue=L=$,C.pending=null}if(L!==null){var ue=L.next,Ie=D.baseState,Re=null,Xe=null,et=null,ot=ue;do{var Wt=ot.lane;if(Ru(df,Wt)){if(et!==null){var wn={lane:Dr,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};et=et.next=wn}if(ot.hasEagerState)Ie=ot.eagerState;else{var wr=ot.action;Ie=e(Ie,wr)}}else{var Tn={lane:Wt,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};et===null?(Xe=et=Tn,Re=Ie):et=et.next=Tn,ni.lanes=tr(ni.lanes,Wt),bv(Wt)}ot=ot.next}while(ot!==null&&ot!==ue);et===null?Re=Ie:et.next=Xe,Pa(Ie,p.memoizedState)||ov(),p.memoizedState=Ie,p.baseState=Re,p.baseQueue=et,C.lastRenderedState=Ie}var fr=C.interleaved;if(fr!==null){var He=fr;do{var lt=He.lane;ni.lanes=tr(ni.lanes,lt),bv(lt),He=He.next}while(He!==fr)}else L===null&&(C.lanes=xt);var Ge=C.dispatch;return[p.memoizedState,Ge]}function sw(e,i,h){var p=fl(),C=p.queue;if(C===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");C.lastRenderedReducer=e;var D=C.dispatch,L=C.pending,$=p.memoizedState;if(L!==null){C.pending=null;var Z=L.next,re=Z;do{var ue=re.action;$=e($,ue),re=re.next}while(re!==Z);Pa($,p.memoizedState)||ov(),p.memoizedState=$,p.baseQueue===null&&(p.baseState=$),C.lastRenderedState=$}return[$,D]}function LU(e,i,h){}function VU(e,i,h){}function aw(e,i,h){var p=ni,C=Wc(),D,L=aa();if(L){if(h===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");D=h(),Bm||D!==h()&&(b("The result of getServerSnapshot should be cached to avoid an infinite loop"),Bm=!0)}else{if(D=i(),!Bm){var $=i();Pa(D,$)||(b("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var Z=vx();if(Z===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");am(Z,df)||GS(p,i,D)}C.memoizedState=D;var re={value:D,getSnapshot:i};return C.queue=re,qb(ZS.bind(null,p,re,e),[e]),p.flags|=m,Qg(Ms|oa,WS.bind(null,p,re,D,i),void 0,null),D}function Bb(e,i,h){var p=ni,C=fl(),D=i();if(!Bm){var L=i();Pa(D,L)||(b("The result of getSnapshot should be cached to avoid an infinite loop"),Bm=!0)}var $=C.memoizedState,Z=!Pa($,D);Z&&(C.memoizedState=D,ov());var re=C.queue;if(tv(ZS.bind(null,p,re,e),[e]),re.getSnapshot!==i||Z||Ls!==null&&Ls.memoizedState.tag&Ms){p.flags|=m,Qg(Ms|oa,WS.bind(null,p,re,D,i),void 0,null);var ue=vx();if(ue===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");am(ue,df)||GS(p,i,D)}return D}function GS(e,i,h){e.flags|=P;var p={getSnapshot:i,value:h},C=ni.updateQueue;if(C===null)C=HS(),ni.updateQueue=C,C.stores=[p];else{var D=C.stores;D===null?C.stores=[p]:D.push(p)}}function WS(e,i,h,p){i.value=h,i.getSnapshot=p,KS(i)&&YS(e)}function ZS(e,i,h){var p=function(){KS(i)&&YS(e)};return h(p)}function KS(e){var i=e.getSnapshot,h=e.value;try{var p=i();return!Pa(h,p)}catch{return!0}}function YS(e){var i=uo(e,Pn);i!==null&&Bs(i,e,Pn,vi)}function Fb(e){var i=Wc();typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e;var h={pending:null,interleaved:null,lanes:xt,dispatch:null,lastRenderedReducer:nw,lastRenderedState:e};i.queue=h;var p=h.dispatch=BM.bind(null,ni,h);return[i.memoizedState,p]}function ow(e){return iw(nw)}function lw(e){return sw(nw)}function Qg(e,i,h,p){var C={tag:e,create:i,destroy:h,deps:p,next:null},D=ni.updateQueue;if(D===null)D=HS(),ni.updateQueue=D,D.lastEffect=C.next=C;else{var L=D.lastEffect;if(L===null)D.lastEffect=C.next=C;else{var $=L.next;L.next=C,C.next=$,D.lastEffect=C}}return C}function cw(e){var i=Wc();{var h={current:e};return i.memoizedState=h,h}}function Ub(e){var i=fl();return i.memoizedState}function ev(e,i,h,p){var C=Wc(),D=p===void 0?null:p;ni.flags|=e,C.memoizedState=Qg(Ms|i,h,void 0,D)}function $b(e,i,h,p){var C=fl(),D=p===void 0?null:p,L=void 0;if(Is!==null){var $=Is.memoizedState;if(L=$.destroy,D!==null){var Z=$.deps;if(tw(D,Z)){C.memoizedState=Qg(i,h,L,D);return}}}ni.flags|=e,C.memoizedState=Qg(Ms|i,h,L,D)}function qb(e,i){return(ni.mode&nl)!==Sn?ev(ae|m|le,oa,e,i):ev(m|le,oa,e,i)}function tv(e,i){return $b(m,oa,e,i)}function uw(e,i){return ev(hr,Gc,e,i)}function Hb(e,i){return $b(hr,Gc,e,i)}function dw(e,i){var h=hr;return h|=oe,(ni.mode&nl)!==Sn&&(h|=me),ev(h,Rs,e,i)}function Gb(e,i){return $b(hr,Rs,e,i)}function XS(e,i){if(typeof i=="function"){var h=i,p=e();return h(p),function(){h(null)}}else if(i!=null){var C=i;C.hasOwnProperty("current")||b("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(C).join(", ")+"}");var D=e();return C.current=D,function(){C.current=null}}}function hw(e,i,h){typeof i!="function"&&b("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null,C=hr;return C|=oe,(ni.mode&nl)!==Sn&&(C|=me),ev(C,Rs,XS.bind(null,i,e),p)}function Wb(e,i,h){typeof i!="function"&&b("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",i!==null?typeof i:"null");var p=h!=null?h.concat([e]):null;return $b(hr,Rs,XS.bind(null,i,e),p)}function LM(e,i){}var Zb=LM;function fw(e,i){var h=Wc(),p=i===void 0?null:i;return h.memoizedState=[e,p],e}function Kb(e,i){var h=fl(),p=i===void 0?null:i,C=h.memoizedState;if(C!==null&&p!==null){var D=C[1];if(tw(p,D))return C[0]}return h.memoizedState=[e,p],e}function mw(e,i){var h=Wc(),p=i===void 0?null:i,C=e();return h.memoizedState=[C,p],C}function Yb(e,i){var h=fl(),p=i===void 0?null:i,C=h.memoizedState;if(C!==null&&p!==null){var D=C[1];if(tw(p,D))return C[0]}var L=e();return h.memoizedState=[L,p],L}function pw(e){var i=Wc();return i.memoizedState=e,e}function JS(e){var i=fl(),h=Is,p=h.memoizedState;return eE(i,p,e)}function QS(e){var i=fl();if(Is===null)return i.memoizedState=e,e;var h=Is.memoizedState;return eE(i,h,e)}function eE(e,i,h){var p=!qp(df);if(p){if(!Pa(h,i)){var C=yy();ni.lanes=tr(ni.lanes,C),bv(C),e.baseState=!0}return i}else return e.baseState&&(e.baseState=!1,ov()),e.memoizedState=h,h}function VM(e,i,h){var p=Ua();bs(wy(p,ql)),e(!0);var C=Yg.transition;Yg.transition={};var D=Yg.transition;Yg.transition._updatedFibers=new Set;try{e(!1),i()}finally{if(bs(p),Yg.transition=C,C===null&&D._updatedFibers){var L=D._updatedFibers.size;L>10&&S("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),D._updatedFibers.clear()}}}function gw(){var e=Fb(!1),i=e[0],h=e[1],p=VM.bind(null,h),C=Wc();return C.memoizedState=p,[i,p]}function tE(){var e=ow(),i=e[0],h=fl(),p=h.memoizedState;return[i,p]}function nE(){var e=lw(),i=e[0],h=fl(),p=h.memoizedState;return[i,p]}var rE=!1;function OM(){return rE}function vw(){var e=Wc(),i=vx(),h=i.identifierPrefix,p;if(aa()){var C=tM();p=":"+h+"R"+C;var D=Jg++;D>0&&(p+="H"+D.toString(32)),p+=":"}else{var L=MM++;p=":"+h+"r"+L.toString(32)+":"}return e.memoizedState=p,p}function Xb(){var e=fl(),i=e.memoizedState;return i}function zM(e,i,h){typeof arguments[3]=="function"&&b("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=oh(e),C={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(iE(e))sE(i,C);else{var D=MS(e,i,C,p);if(D!==null){var L=Za();Bs(D,e,p,L),aE(D,i,p)}}oE(e,p)}function BM(e,i,h){typeof arguments[3]=="function"&&b("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var p=oh(e),C={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(iE(e))sE(i,C);else{var D=e.alternate;if(e.lanes===xt&&(D===null||D.lanes===xt)){var L=i.lastRenderedReducer;if(L!==null){var $;$=sn.current,sn.current=rc;try{var Z=i.lastRenderedState,re=L(Z,h);if(C.hasEagerState=!0,C.eagerState=re,Pa(re,Z)){NM(e,i,C,p);return}}catch{}finally{sn.current=$}}}var ue=MS(e,i,C,p);if(ue!==null){var Ie=Za();Bs(ue,e,p,Ie),aE(ue,i,p)}}oE(e,p)}function iE(e){var i=e.alternate;return e===ni||i!==null&&i===ni}function sE(e,i){Xg=zb=!0;var h=e.pending;h===null?i.next=i:(i.next=h.next,h.next=i),e.pending=i}function aE(e,i,h){if(Pd(h)){var p=i.lanes;p=by(p,e.pendingLanes);var C=tr(p,h);i.lanes=C,Gp(e,C)}}function oE(e,i,h){Ip(e,i)}var Jb={readContext:Ns,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useInsertionEffect:Ma,useLayoutEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useMutableSource:Ma,useSyncExternalStore:Ma,useId:Ma,unstable_isNewReconciler:Zt},lE=null,cE=null,uE=null,dE=null,Zc=null,rc=null,Qb=null;{var yw=function(){b("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},Un=function(){b("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};lE={readContext:function(e){return Ns(e)},useCallback:function(e,i){return ht="useCallback",Fr(),Fm(i),fw(e,i)},useContext:function(e){return ht="useContext",Fr(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Fr(),Fm(i),qb(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Fr(),Fm(h),hw(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Fr(),Fm(i),uw(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Fr(),Fm(i),dw(e,i)},useMemo:function(e,i){ht="useMemo",Fr(),Fm(i);var h=sn.current;sn.current=Zc;try{return mw(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Fr();var p=sn.current;sn.current=Zc;try{return rw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Fr(),cw(e)},useState:function(e){ht="useState",Fr();var i=sn.current;sn.current=Zc;try{return Fb(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Fr(),void 0},useDeferredValue:function(e){return ht="useDeferredValue",Fr(),pw(e)},useTransition:function(){return ht="useTransition",Fr(),gw()},useMutableSource:function(e,i,h){return ht="useMutableSource",Fr(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Fr(),aw(e,i,h)},useId:function(){return ht="useId",Fr(),vw()},unstable_isNewReconciler:Zt},cE={readContext:function(e){return Ns(e)},useCallback:function(e,i){return ht="useCallback",Ht(),fw(e,i)},useContext:function(e){return ht="useContext",Ht(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Ht(),qb(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Ht(),hw(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Ht(),uw(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Ht(),dw(e,i)},useMemo:function(e,i){ht="useMemo",Ht();var h=sn.current;sn.current=Zc;try{return mw(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Ht();var p=sn.current;sn.current=Zc;try{return rw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Ht(),cw(e)},useState:function(e){ht="useState",Ht();var i=sn.current;sn.current=Zc;try{return Fb(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Ht(),void 0},useDeferredValue:function(e){return ht="useDeferredValue",Ht(),pw(e)},useTransition:function(){return ht="useTransition",Ht(),gw()},useMutableSource:function(e,i,h){return ht="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Ht(),aw(e,i,h)},useId:function(){return ht="useId",Ht(),vw()},unstable_isNewReconciler:Zt},uE={readContext:function(e){return Ns(e)},useCallback:function(e,i){return ht="useCallback",Ht(),Kb(e,i)},useContext:function(e){return ht="useContext",Ht(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Ht(),Wb(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Ht(),Hb(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Ht(),Gb(e,i)},useMemo:function(e,i){ht="useMemo",Ht();var h=sn.current;sn.current=rc;try{return Yb(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Ht();var p=sn.current;sn.current=rc;try{return iw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Ht(),Ub()},useState:function(e){ht="useState",Ht();var i=sn.current;sn.current=rc;try{return ow(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Ht(),Zb()},useDeferredValue:function(e){return ht="useDeferredValue",Ht(),JS(e)},useTransition:function(){return ht="useTransition",Ht(),tE()},useMutableSource:function(e,i,h){return ht="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Ht(),Bb(e,i)},useId:function(){return ht="useId",Ht(),Xb()},unstable_isNewReconciler:Zt},dE={readContext:function(e){return Ns(e)},useCallback:function(e,i){return ht="useCallback",Ht(),Kb(e,i)},useContext:function(e){return ht="useContext",Ht(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Ht(),Wb(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Ht(),Hb(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Ht(),Gb(e,i)},useMemo:function(e,i){ht="useMemo",Ht();var h=sn.current;sn.current=Qb;try{return Yb(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Ht();var p=sn.current;sn.current=Qb;try{return sw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Ht(),Ub()},useState:function(e){ht="useState",Ht();var i=sn.current;sn.current=Qb;try{return lw(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Ht(),Zb()},useDeferredValue:function(e){return ht="useDeferredValue",Ht(),QS(e)},useTransition:function(){return ht="useTransition",Ht(),nE()},useMutableSource:function(e,i,h){return ht="useMutableSource",Ht(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Ht(),Bb(e,i)},useId:function(){return ht="useId",Ht(),Xb()},unstable_isNewReconciler:Zt},Zc={readContext:function(e){return yw(),Ns(e)},useCallback:function(e,i){return ht="useCallback",Un(),Fr(),fw(e,i)},useContext:function(e){return ht="useContext",Un(),Fr(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Un(),Fr(),qb(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Un(),Fr(),hw(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Un(),Fr(),uw(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Un(),Fr(),dw(e,i)},useMemo:function(e,i){ht="useMemo",Un(),Fr();var h=sn.current;sn.current=Zc;try{return mw(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Un(),Fr();var p=sn.current;sn.current=Zc;try{return rw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Un(),Fr(),cw(e)},useState:function(e){ht="useState",Un(),Fr();var i=sn.current;sn.current=Zc;try{return Fb(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Un(),Fr(),void 0},useDeferredValue:function(e){return ht="useDeferredValue",Un(),Fr(),pw(e)},useTransition:function(){return ht="useTransition",Un(),Fr(),gw()},useMutableSource:function(e,i,h){return ht="useMutableSource",Un(),Fr(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Un(),Fr(),aw(e,i,h)},useId:function(){return ht="useId",Un(),Fr(),vw()},unstable_isNewReconciler:Zt},rc={readContext:function(e){return yw(),Ns(e)},useCallback:function(e,i){return ht="useCallback",Un(),Ht(),Kb(e,i)},useContext:function(e){return ht="useContext",Un(),Ht(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Un(),Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Un(),Ht(),Wb(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Un(),Ht(),Hb(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Un(),Ht(),Gb(e,i)},useMemo:function(e,i){ht="useMemo",Un(),Ht();var h=sn.current;sn.current=rc;try{return Yb(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Un(),Ht();var p=sn.current;sn.current=rc;try{return iw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Un(),Ht(),Ub()},useState:function(e){ht="useState",Un(),Ht();var i=sn.current;sn.current=rc;try{return ow(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Un(),Ht(),Zb()},useDeferredValue:function(e){return ht="useDeferredValue",Un(),Ht(),JS(e)},useTransition:function(){return ht="useTransition",Un(),Ht(),tE()},useMutableSource:function(e,i,h){return ht="useMutableSource",Un(),Ht(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Un(),Ht(),Bb(e,i)},useId:function(){return ht="useId",Un(),Ht(),Xb()},unstable_isNewReconciler:Zt},Qb={readContext:function(e){return yw(),Ns(e)},useCallback:function(e,i){return ht="useCallback",Un(),Ht(),Kb(e,i)},useContext:function(e){return ht="useContext",Un(),Ht(),Ns(e)},useEffect:function(e,i){return ht="useEffect",Un(),Ht(),tv(e,i)},useImperativeHandle:function(e,i,h){return ht="useImperativeHandle",Un(),Ht(),Wb(e,i,h)},useInsertionEffect:function(e,i){return ht="useInsertionEffect",Un(),Ht(),Hb(e,i)},useLayoutEffect:function(e,i){return ht="useLayoutEffect",Un(),Ht(),Gb(e,i)},useMemo:function(e,i){ht="useMemo",Un(),Ht();var h=sn.current;sn.current=rc;try{return Yb(e,i)}finally{sn.current=h}},useReducer:function(e,i,h){ht="useReducer",Un(),Ht();var p=sn.current;sn.current=rc;try{return sw(e,i,h)}finally{sn.current=p}},useRef:function(e){return ht="useRef",Un(),Ht(),Ub()},useState:function(e){ht="useState",Un(),Ht();var i=sn.current;sn.current=rc;try{return lw(e)}finally{sn.current=i}},useDebugValue:function(e,i){return ht="useDebugValue",Un(),Ht(),Zb()},useDeferredValue:function(e){return ht="useDeferredValue",Un(),Ht(),QS(e)},useTransition:function(){return ht="useTransition",Un(),Ht(),nE()},useMutableSource:function(e,i,h){return ht="useMutableSource",Un(),Ht(),void 0},useSyncExternalStore:function(e,i,h){return ht="useSyncExternalStore",Un(),Ht(),Bb(e,i)},useId:function(){return ht="useId",Un(),Ht(),Xb()},unstable_isNewReconciler:Zt}}var rh=t.unstable_now,hE=0,ex=-1,nv=-1,tx=-1,bw=!1,nx=!1;function fE(){return bw}function FM(){nx=!0}function UM(){bw=!1,nx=!1}function $M(){bw=nx,nx=!1}function mE(){return hE}function pE(){hE=rh()}function xw(e){nv=rh(),e.actualStartTime<0&&(e.actualStartTime=rh())}function gE(e){nv=-1}function rx(e,i){if(nv>=0){var h=rh()-nv;e.actualDuration+=h,i&&(e.selfBaseDuration=h),nv=-1}}function Kc(e){if(ex>=0){var i=rh()-ex;ex=-1;for(var h=e.return;h!==null;){switch(h.tag){case B:var p=h.stateNode;p.effectDuration+=i;return;case Ue:var C=h.stateNode;C.effectDuration+=i;return}h=h.return}}}function _w(e){if(tx>=0){var i=rh()-tx;tx=-1;for(var h=e.return;h!==null;){switch(h.tag){case B:var p=h.stateNode;p!==null&&(p.passiveEffectDuration+=i);return;case Ue:var C=h.stateNode;C!==null&&(C.passiveEffectDuration+=i);return}h=h.return}}}function Yc(){ex=rh()}function ww(){tx=rh()}function Cw(e){for(var i=e.child;i;)e.actualDuration+=i.actualDuration,i=i.sibling}function ic(e,i){if(e&&e.defaultProps){var h=kn({},i),p=e.defaultProps;for(var C in p)h[C]===void 0&&(h[C]=p[C]);return h}return i}var Nw={},Sw,Ew,Dw,Tw,Pw,vE,ix,jw,kw,Aw,rv;{Sw=new Set,Ew=new Set,Dw=new Set,Tw=new Set,jw=new Set,Pw=new Set,kw=new Set,Aw=new Set,rv=new Set;var yE=new Set;ix=function(e,i){if(!(e===null||typeof e=="function")){var h=i+"_"+e;yE.has(h)||(yE.add(h),b("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e))}},vE=function(e,i){if(i===void 0){var h=or(e)||"Component";Pw.has(h)||(Pw.add(h),b("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",h))}},Object.defineProperty(Nw,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Nw)}function Mw(e,i,h,p){var C=e.memoizedState,D=h(p,C);{if(e.mode&ui){Mi(!0);try{D=h(p,C)}finally{Mi(!1)}}vE(i,D)}var L=D==null?C:kn({},C,D);if(e.memoizedState=L,e.lanes===xt){var $=e.updateQueue;$.baseState=L}}var Rw={isMounted:en,enqueueSetState:function(e,i,h){var p=Ir(e),C=Za(),D=oh(p),L=Gu(C,D);L.payload=i,h!=null&&(ix(h,"setState"),L.callback=h);var $=Qd(p,L,D);$!==null&&(Bs($,p,D,C),Mb($,p,D)),Ip(p,D)},enqueueReplaceState:function(e,i,h){var p=Ir(e),C=Za(),D=oh(p),L=Gu(C,D);L.tag=IS,L.payload=i,h!=null&&(ix(h,"replaceState"),L.callback=h);var $=Qd(p,L,D);$!==null&&(Bs($,p,D,C),Mb($,p,D)),Ip(p,D)},enqueueForceUpdate:function(e,i){var h=Ir(e),p=Za(),C=oh(h),D=Gu(p,C);D.tag=jb,i!=null&&(ix(i,"forceUpdate"),D.callback=i);var L=Qd(h,D,C);L!==null&&(Bs(L,h,C,p),Mb(L,h,C)),Rp(h,C)}};function bE(e,i,h,p,C,D,L){var $=e.stateNode;if(typeof $.shouldComponentUpdate=="function"){var Z=$.shouldComponentUpdate(p,D,L);{if(e.mode&ui){Mi(!0);try{Z=$.shouldComponentUpdate(p,D,L)}finally{Mi(!1)}}Z===void 0&&b("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",or(i)||"Component")}return Z}return i.prototype&&i.prototype.isPureReactComponent?!Hd(h,p)||!Hd(C,D):!0}function qM(e,i,h){var p=e.stateNode;{var C=or(i)||"Component",D=p.render;D||(i.prototype&&typeof i.prototype.render=="function"?b("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",C):b("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",C)),p.getInitialState&&!p.getInitialState.isReactClassApproved&&!p.state&&b("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",C),p.getDefaultProps&&!p.getDefaultProps.isReactClassApproved&&b("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",C),p.propTypes&&b("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",C),p.contextType&&b("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",C),i.childContextTypes&&!rv.has(i)&&(e.mode&ui)===Sn&&(rv.add(i),b(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)),i.contextTypes&&!rv.has(i)&&(e.mode&ui)===Sn&&(rv.add(i),b(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,C)),p.contextTypes&&b("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",C),i.contextType&&i.contextTypes&&!kw.has(i)&&(kw.add(i),b("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",C)),typeof p.componentShouldUpdate=="function"&&b("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",C),i.prototype&&i.prototype.isPureReactComponent&&typeof p.shouldComponentUpdate<"u"&&b("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",or(i)||"A pure component"),typeof p.componentDidUnmount=="function"&&b("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",C),typeof p.componentDidReceiveProps=="function"&&b("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",C),typeof p.componentWillRecieveProps=="function"&&b("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",C),typeof p.UNSAFE_componentWillRecieveProps=="function"&&b("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",C);var L=p.props!==h;p.props!==void 0&&L&&b("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",C,C),p.defaultProps&&b("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",C,C),typeof p.getSnapshotBeforeUpdate=="function"&&typeof p.componentDidUpdate!="function"&&!Dw.has(i)&&(Dw.add(i),b("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",or(i))),typeof p.getDerivedStateFromProps=="function"&&b("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",C),typeof p.getDerivedStateFromError=="function"&&b("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",C),typeof i.getSnapshotBeforeUpdate=="function"&&b("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",C);var $=p.state;$&&(typeof $!="object"||rr($))&&b("%s.state: must be set to an object or null",C),typeof p.getChildContext=="function"&&typeof i.childContextTypes!="object"&&b("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",C)}}function xE(e,i){i.updater=Rw,e.stateNode=i,Nu(i,e),i._reactInternalInstance=Nw}function _E(e,i,h){var p=!1,C=Vo,D=Vo,L=i.contextType;if("contextType"in i){var $=L===null||L!==void 0&&L.$$typeof===te&&L._context===void 0;if(!$&&!Aw.has(i)){Aw.add(i);var Z="";L===void 0?Z=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof L!="object"?Z=" However, it is set to a "+typeof L+".":L.$$typeof===Ee?Z=" Did you accidentally pass the Context.Provider instead?":L._context!==void 0?Z=" Did you accidentally pass the Context.Consumer instead?":Z=" However, it is set to an object with keys {"+Object.keys(L).join(", ")+"}.",b("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",or(i)||"Component",Z)}}if(typeof L=="object"&&L!==null)D=Ns(L);else{C=Pm(e,i,!0);var re=i.contextTypes;p=re!=null,D=p?jm(e,C):Vo}var ue=new i(h,D);if(e.mode&ui){Mi(!0);try{ue=new i(h,D)}finally{Mi(!1)}}var Ie=e.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null;xE(e,ue);{if(typeof i.getDerivedStateFromProps=="function"&&Ie===null){var Re=or(i)||"Component";Ew.has(Re)||(Ew.add(Re),b("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Re,ue.state===null?"null":"undefined",Re))}if(typeof i.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"){var Xe=null,et=null,ot=null;if(typeof ue.componentWillMount=="function"&&ue.componentWillMount.__suppressDeprecationWarning!==!0?Xe="componentWillMount":typeof ue.UNSAFE_componentWillMount=="function"&&(Xe="UNSAFE_componentWillMount"),typeof ue.componentWillReceiveProps=="function"&&ue.componentWillReceiveProps.__suppressDeprecationWarning!==!0?et="componentWillReceiveProps":typeof ue.UNSAFE_componentWillReceiveProps=="function"&&(et="UNSAFE_componentWillReceiveProps"),typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate.__suppressDeprecationWarning!==!0?ot="componentWillUpdate":typeof ue.UNSAFE_componentWillUpdate=="function"&&(ot="UNSAFE_componentWillUpdate"),Xe!==null||et!==null||ot!==null){var Wt=or(i)||"Component",Tn=typeof i.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Tw.has(Wt)||(Tw.add(Wt),b(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,Wt,Tn,Xe!==null?`
  `+Xe:"",et!==null?`
  `+et:"",ot!==null?`
  `+ot:""))}}}return p&&uS(e,C,D),ue}function HM(e,i){var h=i.state;typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),h!==i.state&&(b("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Mn(e)||"Component"),Rw.enqueueReplaceState(i,i.state,null))}function wE(e,i,h,p){var C=i.state;if(typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(h,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(h,p),i.state!==C){{var D=Mn(e)||"Component";Sw.has(D)||(Sw.add(D),b("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D))}Rw.enqueueReplaceState(i,i.state,null)}}function Iw(e,i,h,p){qM(e,i,h);var C=e.stateNode;C.props=h,C.state=e.memoizedState,C.refs={},q_(e);var D=i.contextType;if(typeof D=="object"&&D!==null)C.context=Ns(D);else{var L=Pm(e,i,!0);C.context=jm(e,L)}{if(C.state===h){var $=or(i)||"Component";jw.has($)||(jw.add($),b("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",$))}e.mode&ui&&tc.recordLegacyContextWarning(e,C),tc.recordUnsafeLifecycleWarnings(e,C)}C.state=e.memoizedState;var Z=i.getDerivedStateFromProps;if(typeof Z=="function"&&(Mw(e,i,Z,h),C.state=e.memoizedState),typeof i.getDerivedStateFromProps!="function"&&typeof C.getSnapshotBeforeUpdate!="function"&&(typeof C.UNSAFE_componentWillMount=="function"||typeof C.componentWillMount=="function")&&(HM(e,C),Rb(e,h,C,p),C.state=e.memoizedState),typeof C.componentDidMount=="function"){var re=hr;re|=oe,(e.mode&nl)!==Sn&&(re|=me),e.flags|=re}}function GM(e,i,h,p){var C=e.stateNode,D=e.memoizedProps;C.props=D;var L=C.context,$=i.contextType,Z=Vo;if(typeof $=="object"&&$!==null)Z=Ns($);else{var re=Pm(e,i,!0);Z=jm(e,re)}var ue=i.getDerivedStateFromProps,Ie=typeof ue=="function"||typeof C.getSnapshotBeforeUpdate=="function";!Ie&&(typeof C.UNSAFE_componentWillReceiveProps=="function"||typeof C.componentWillReceiveProps=="function")&&(D!==h||L!==Z)&&wE(e,C,h,Z),VS();var Re=e.memoizedState,Xe=C.state=Re;if(Rb(e,h,C,p),Xe=e.memoizedState,D===h&&Re===Xe&&!pb()&&!Ib()){if(typeof C.componentDidMount=="function"){var et=hr;et|=oe,(e.mode&nl)!==Sn&&(et|=me),e.flags|=et}return!1}typeof ue=="function"&&(Mw(e,i,ue,h),Xe=e.memoizedState);var ot=Ib()||bE(e,i,D,h,Re,Xe,Z);if(ot){if(!Ie&&(typeof C.UNSAFE_componentWillMount=="function"||typeof C.componentWillMount=="function")&&(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"){var Wt=hr;Wt|=oe,(e.mode&nl)!==Sn&&(Wt|=me),e.flags|=Wt}}else{if(typeof C.componentDidMount=="function"){var Tn=hr;Tn|=oe,(e.mode&nl)!==Sn&&(Tn|=me),e.flags|=Tn}e.memoizedProps=h,e.memoizedState=Xe}return C.props=h,C.state=Xe,C.context=Z,ot}function WM(e,i,h,p,C){var D=i.stateNode;LS(e,i);var L=i.memoizedProps,$=i.type===i.elementType?L:ic(i.type,L);D.props=$;var Z=i.pendingProps,re=D.context,ue=h.contextType,Ie=Vo;if(typeof ue=="object"&&ue!==null)Ie=Ns(ue);else{var Re=Pm(i,h,!0);Ie=jm(i,Re)}var Xe=h.getDerivedStateFromProps,et=typeof Xe=="function"||typeof D.getSnapshotBeforeUpdate=="function";!et&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&(L!==Z||re!==Ie)&&wE(i,D,p,Ie),VS();var ot=i.memoizedState,Wt=D.state=ot;if(Rb(i,p,D,C),Wt=i.memoizedState,L===Z&&ot===Wt&&!pb()&&!Ib()&&!bn)return typeof D.componentDidUpdate=="function"&&(L!==e.memoizedProps||ot!==e.memoizedState)&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(L!==e.memoizedProps||ot!==e.memoizedState)&&(i.flags|=d),!1;typeof Xe=="function"&&(Mw(i,h,Xe,p),Wt=i.memoizedState);var Tn=Ib()||bE(i,h,$,p,ot,Wt,Ie)||bn;return Tn?(!et&&(typeof D.UNSAFE_componentWillUpdate=="function"||typeof D.componentWillUpdate=="function")&&(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,Wt,Ie),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,Wt,Ie)),typeof D.componentDidUpdate=="function"&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=d)):(typeof D.componentDidUpdate=="function"&&(L!==e.memoizedProps||ot!==e.memoizedState)&&(i.flags|=hr),typeof D.getSnapshotBeforeUpdate=="function"&&(L!==e.memoizedProps||ot!==e.memoizedState)&&(i.flags|=d),i.memoizedProps=p,i.memoizedState=Wt),D.props=p,D.state=Wt,D.context=Ie,Tn}function hf(e,i){return{value:e,source:i,stack:to(i),digest:null}}function Lw(e,i,h){return{value:e,source:null,stack:h??null,digest:i??null}}function ZM(e,i){return!0}function Vw(e,i){try{var h=ZM(e,i);if(h===!1)return;var p=i.value,C=i.source,D=i.stack,L=D!==null?D:"";if(p!=null&&p._suppressLogging){if(e.tag===A)return;console.error(p)}var $=C?Mn(C):null,Z=$?"The above error occurred in the <"+$+"> component:":"The above error occurred in one of your React components:",re;if(e.tag===B)re=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var ue=Mn(e)||"Anonymous";re="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+ue+".")}var Ie=Z+`
`+L+`

`+(""+re);console.error(Ie)}catch(Re){setTimeout(function(){throw Re})}}var KM=typeof WeakMap=="function"?WeakMap:Map;function CE(e,i,h){var p=Gu(vi,h);p.tag=U_,p.payload={element:null};var C=i.value;return p.callback=function(){FI(C),Vw(e,i)},p}function Ow(e,i,h){var p=Gu(vi,h);p.tag=U_;var C=e.type.getDerivedStateFromError;if(typeof C=="function"){var D=i.value;p.payload=function(){return C(D)},p.callback=function(){RD(e),Vw(e,i)}}var L=e.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(p.callback=function(){RD(e),Vw(e,i),typeof C!="function"&&zI(this);var Z=i.value,re=i.stack;this.componentDidCatch(Z,{componentStack:re!==null?re:""}),typeof C!="function"&&(Da(e.lanes,Pn)||b("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Mn(e)||"Unknown"))}),p}function NE(e,i,h){var p=e.pingCache,C;if(p===null?(p=e.pingCache=new KM,C=new Set,p.set(i,C)):(C=p.get(i),C===void 0&&(C=new Set,p.set(i,C))),!C.has(h)){C.add(h);var D=UI.bind(null,e,i,h);us&&xv(e,h),i.then(D,D)}}function YM(e,i,h,p){var C=e.updateQueue;if(C===null){var D=new Set;D.add(h),e.updateQueue=D}else C.add(h)}function XM(e,i){var h=e.tag;if((e.mode&cr)===Sn&&(h===k||h===_e||h===tt)){var p=e.alternate;p?(e.updateQueue=p.updateQueue,e.memoizedState=p.memoizedState,e.lanes=p.lanes):(e.updateQueue=null,e.memoizedState=null)}}function SE(e){var i=e;do{if(i.tag===Oe&&kM(i))return i;i=i.return}while(i!==null);return null}function EE(e,i,h,p,C){if((e.mode&cr)===Sn){if(e===i)e.flags|=z;else{if(e.flags|=un,h.flags|=U,h.flags&=-52805,h.tag===A){var D=h.alternate;if(D===null)h.tag=Tt;else{var L=Gu(vi,Pn);L.tag=jb,Qd(h,L,Pn)}}h.lanes=tr(h.lanes,Pn)}return e}return e.flags|=z,e.lanes=C,e}function JM(e,i,h,p,C){if(h.flags|=R,us&&xv(e,C),p!==null&&typeof p=="object"&&typeof p.then=="function"){var D=p;XM(h),aa()&&h.mode&cr&&vS();var L=SE(i);if(L!==null){L.flags&=~x,EE(L,i,h,e,C),L.mode&cr&&NE(e,D,C),YM(L,e,D);return}else{if(!py(C)){NE(e,D,C),v1();return}var $=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");p=$}}else if(aa()&&h.mode&cr){vS();var Z=SE(i);if(Z!==null){(Z.flags&z)===Cn&&(Z.flags|=x),EE(Z,i,h,e,C),j_(hf(p,h));return}}p=hf(p,h),kI(p);var re=i;do{switch(re.tag){case B:{var ue=p;re.flags|=z;var Ie=Mu(C);re.lanes=tr(re.lanes,Ie);var Re=CE(re,ue,Ie);H_(re,Re);return}case A:var Xe=p,et=re.type,ot=re.stateNode;if((re.flags&un)===Cn&&(typeof et.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&!SD(ot))){re.flags|=z;var Wt=Mu(C);re.lanes=tr(re.lanes,Wt);var Tn=Ow(re,Xe,Wt);H_(re,Tn);return}break}re=re.return}while(re!==null)}function QM(){return null}var iv=a.ReactCurrentOwner,sc=!1,zw,sv,Bw,Fw,Uw,ff,$w,sx,av;zw={},sv={},Bw={},Fw={},Uw={},ff=!1,$w={},sx={},av={};function Ga(e,i,h,p){e===null?i.child=PS(i,null,h,p):i.child=Rm(i,e.child,h,p)}function eR(e,i,h,p){i.child=Rm(i,e.child,null,p),i.child=Rm(i,null,h,p)}function DE(e,i,h,p,C){if(i.type!==i.elementType){var D=h.propTypes;D&&Ql(D,p,"prop",or(h))}var L=h.render,$=i.ref,Z,re;Lm(i,C),Ks(i);{if(iv.current=i,qs(!0),Z=Um(e,i,L,p,$,C),re=$m(),i.mode&ui){Mi(!0);try{Z=Um(e,i,L,p,$,C),re=$m()}finally{Mi(!1)}}qs(!1)}return Sa(),e!==null&&!sc?($S(e,i,C),Wu(e,i,C)):(aa()&&re&&N_(i),i.flags|=wa,Ga(e,i,Z,C),i.child)}function TE(e,i,h,p,C){if(e===null){var D=h.type;if(sL(D)&&h.compare===null&&h.defaultProps===void 0){var L=D;return L=Xm(D),i.tag=tt,i.type=L,Gw(i,D),PE(e,i,L,p,C)}{var $=D.propTypes;if($&&Ql($,p,"prop",or(D)),h.defaultProps!==void 0){var Z=or(D)||"Unknown";av[Z]||(b("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",Z),av[Z]=!0)}}var re=T1(h.type,null,p,i,i.mode,C);return re.ref=i.ref,re.return=i,i.child=re,re}{var ue=h.type,Ie=ue.propTypes;Ie&&Ql(Ie,p,"prop",or(ue))}var Re=e.child,Xe=Jw(e,C);if(!Xe){var et=Re.memoizedProps,ot=h.compare;if(ot=ot!==null?ot:Hd,ot(et,p)&&e.ref===i.ref)return Wu(e,i,C)}i.flags|=wa;var Wt=yf(Re,p);return Wt.ref=i.ref,Wt.return=i,i.child=Wt,Wt}function PE(e,i,h,p,C){if(i.type!==i.elementType){var D=i.elementType;if(D.$$typeof===mt){var L=D,$=L._payload,Z=L._init;try{D=Z($)}catch{D=null}var re=D&&D.propTypes;re&&Ql(re,p,"prop",or(D))}}if(e!==null){var ue=e.memoizedProps;if(Hd(ue,p)&&e.ref===i.ref&&i.type===e.type)if(sc=!1,i.pendingProps=p=ue,Jw(e,C))(e.flags&U)!==Cn&&(sc=!0);else return i.lanes=e.lanes,Wu(e,i,C)}return qw(e,i,h,p,C)}function jE(e,i,h){var p=i.pendingProps,C=p.children,D=e!==null?e.memoizedState:null;if(p.mode==="hidden"||ln)if((i.mode&cr)===Sn){var L={baseLanes:xt,cachePool:null,transitions:null};i.memoizedState=L,yx(i,h)}else if(Da(h,Ba)){var Ie={baseLanes:xt,cachePool:null,transitions:null};i.memoizedState=Ie;var Re=D!==null?D.baseLanes:h;yx(i,Re)}else{var $=null,Z;if(D!==null){var re=D.baseLanes;Z=tr(re,h)}else Z=h;i.lanes=i.childLanes=Ba;var ue={baseLanes:Z,cachePool:$,transitions:null};return i.memoizedState=ue,i.updateQueue=null,yx(i,Z),null}else{var Xe;D!==null?(Xe=tr(D.baseLanes,h),i.memoizedState=null):Xe=h,yx(i,Xe)}return Ga(e,i,C,h),i.child}function tR(e,i,h){var p=i.pendingProps;return Ga(e,i,p,h),i.child}function nR(e,i,h){var p=i.pendingProps.children;return Ga(e,i,p,h),i.child}function rR(e,i,h){{i.flags|=hr;{var p=i.stateNode;p.effectDuration=0,p.passiveEffectDuration=0}}var C=i.pendingProps,D=C.children;return Ga(e,i,D,h),i.child}function kE(e,i){var h=i.ref;(e===null&&h!==null||e!==null&&e.ref!==h)&&(i.flags|=r,i.flags|=X)}function qw(e,i,h,p,C){if(i.type!==i.elementType){var D=h.propTypes;D&&Ql(D,p,"prop",or(h))}var L;{var $=Pm(i,h,!0);L=jm(i,$)}var Z,re;Lm(i,C),Ks(i);{if(iv.current=i,qs(!0),Z=Um(e,i,h,p,L,C),re=$m(),i.mode&ui){Mi(!0);try{Z=Um(e,i,h,p,L,C),re=$m()}finally{Mi(!1)}}qs(!1)}return Sa(),e!==null&&!sc?($S(e,i,C),Wu(e,i,C)):(aa()&&re&&N_(i),i.flags|=wa,Ga(e,i,Z,C),i.child)}function AE(e,i,h,p,C){{switch(xL(i)){case!1:{var D=i.stateNode,L=i.type,$=new L(i.memoizedProps,D.context),Z=$.state;D.updater.enqueueSetState(D,Z,null);break}case!0:{i.flags|=un,i.flags|=z;var re=new Error("Simulated error coming from DevTools"),ue=Mu(C);i.lanes=tr(i.lanes,ue);var Ie=Ow(i,hf(re,i),ue);H_(i,Ie);break}}if(i.type!==i.elementType){var Re=h.propTypes;Re&&Ql(Re,p,"prop",or(h))}}var Xe;Hc(h)?(Xe=!0,vb(i)):Xe=!1,Lm(i,C);var et=i.stateNode,ot;et===null?(ox(e,i),_E(i,h,p),Iw(i,h,p,C),ot=!0):e===null?ot=GM(i,h,p,C):ot=WM(e,i,h,p,C);var Wt=Hw(e,i,h,ot,Xe,C);{var Tn=i.stateNode;ot&&Tn.props!==p&&(ff||b("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Mn(i)||"a component"),ff=!0)}return Wt}function Hw(e,i,h,p,C,D){kE(e,i);var L=(i.flags&un)!==Cn;if(!p&&!L)return C&&fS(i,h,!1),Wu(e,i,D);var $=i.stateNode;iv.current=i;var Z;if(L&&typeof h.getDerivedStateFromError!="function")Z=null,gE();else{Ks(i);{if(qs(!0),Z=$.render(),i.mode&ui){Mi(!0);try{$.render()}finally{Mi(!1)}}qs(!1)}Sa()}return i.flags|=wa,e!==null&&L?eR(e,i,Z,D):Ga(e,i,Z,D),i.memoizedState=$.state,C&&fS(i,h,!0),i.child}function ME(e){var i=e.stateNode;i.pendingContext?dS(e,i.pendingContext,i.pendingContext!==i.context):i.context&&dS(e,i.context,!1),G_(e,i.containerInfo)}function iR(e,i,h){if(ME(i),e===null)throw new Error("Should have a current fiber. This is a bug in React.");var p=i.pendingProps,C=i.memoizedState,D=C.element;LS(e,i),Rb(i,p,null,h);var L=i.memoizedState;i.stateNode;var $=L.element;if(C.isDehydrated){var Z={element:$,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},re=i.updateQueue;if(re.baseState=Z,i.memoizedState=Z,i.flags&x){var ue=hf(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),i);return RE(e,i,$,h,ue)}else if($!==D){var Ie=hf(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),i);return RE(e,i,$,h,Ie)}else{oM(i);var Re=PS(i,null,$,h);i.child=Re;for(var Xe=Re;Xe;)Xe.flags=Xe.flags&~Ci|y,Xe=Xe.sibling}}else{if(Mm(),$===D)return Wu(e,i,h);Ga(e,i,$,h)}return i.child}function RE(e,i,h,p,C){return Mm(),j_(C),i.flags|=x,Ga(e,i,h,p),i.child}function sR(e,i,h){BS(i),e===null&&P_(i);var p=i.type,C=i.pendingProps,D=e!==null?e.memoizedProps:null,L=C.children,$=u_(p,C);return $?L=null:D!==null&&u_(p,D)&&(i.flags|=Vl),kE(e,i),Ga(e,i,L,h),i.child}function aR(e,i){return e===null&&P_(i),null}function oR(e,i,h,p){ox(e,i);var C=i.pendingProps,D=h,L=D._payload,$=D._init,Z=$(L);i.type=Z;var re=i.tag=aL(Z),ue=ic(Z,C),Ie;switch(re){case k:return Gw(i,Z),i.type=Z=Xm(Z),Ie=qw(null,i,Z,ue,p),Ie;case A:return i.type=Z=w1(Z),Ie=AE(null,i,Z,ue,p),Ie;case _e:return i.type=Z=C1(Z),Ie=DE(null,i,Z,ue,p),Ie;case Je:{if(i.type!==i.elementType){var Re=Z.propTypes;Re&&Ql(Re,ue,"prop",or(Z))}return Ie=TE(null,i,Z,ic(Z.type,ue),p),Ie}}var Xe="";throw Z!==null&&typeof Z=="object"&&Z.$$typeof===mt&&(Xe=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+Z+". "+("Lazy element type must resolve to a class or function."+Xe))}function lR(e,i,h,p,C){ox(e,i),i.tag=A;var D;return Hc(h)?(D=!0,vb(i)):D=!1,Lm(i,C),_E(i,h,p),Iw(i,h,p,C),Hw(null,i,h,!0,D,C)}function cR(e,i,h,p){ox(e,i);var C=i.pendingProps,D;{var L=Pm(i,h,!1);D=jm(i,L)}Lm(i,p);var $,Z;Ks(i);{if(h.prototype&&typeof h.prototype.render=="function"){var re=or(h)||"Unknown";zw[re]||(b("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",re,re),zw[re]=!0)}i.mode&ui&&tc.recordLegacyContextWarning(i,null),qs(!0),iv.current=i,$=Um(null,i,h,C,D,p),Z=$m(),qs(!1)}if(Sa(),i.flags|=wa,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){var ue=or(h)||"Unknown";sv[ue]||(b("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ue,ue,ue),sv[ue]=!0)}if(typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){{var Ie=or(h)||"Unknown";sv[Ie]||(b("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Ie,Ie,Ie),sv[Ie]=!0)}i.tag=A,i.memoizedState=null,i.updateQueue=null;var Re=!1;return Hc(h)?(Re=!0,vb(i)):Re=!1,i.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,q_(i),xE(i,$),Iw(i,h,C,p),Hw(null,i,h,!0,Re,p)}else{if(i.tag=k,i.mode&ui){Mi(!0);try{$=Um(null,i,h,C,D,p),Z=$m()}finally{Mi(!1)}}return aa()&&Z&&N_(i),Ga(null,i,$,p),Gw(i,h),i.child}}function Gw(e,i){{if(i&&i.childContextTypes&&b("%s(...): childContextTypes cannot be defined on a function component.",i.displayName||i.name||"Component"),e.ref!==null){var h="",p=xo();p&&(h+=`

Check the render method of \``+p+"`.");var C=p||"",D=e._debugSource;D&&(C=D.fileName+":"+D.lineNumber),Uw[C]||(Uw[C]=!0,b("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",h))}if(i.defaultProps!==void 0){var L=or(i)||"Unknown";av[L]||(b("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",L),av[L]=!0)}if(typeof i.getDerivedStateFromProps=="function"){var $=or(i)||"Unknown";Fw[$]||(b("%s: Function components do not support getDerivedStateFromProps.",$),Fw[$]=!0)}if(typeof i.contextType=="object"&&i.contextType!==null){var Z=or(i)||"Unknown";Bw[Z]||(b("%s: Function components do not support contextType.",Z),Bw[Z]=!0)}}}var Ww={dehydrated:null,treeContext:null,retryLane:Dr};function Zw(e){return{baseLanes:e,cachePool:QM(),transitions:null}}function uR(e,i){var h=null;return{baseLanes:tr(e.baseLanes,i),cachePool:h,transitions:e.transitions}}function dR(e,i,h,p){if(i!==null){var C=i.memoizedState;if(C===null)return!1}return K_(e,Kg)}function hR(e,i){return om(e.childLanes,i)}function IE(e,i,h){var p=i.pendingProps;_L(i)&&(i.flags|=un);var C=nc.current,D=!1,L=(i.flags&un)!==Cn;if(L||dR(C,e)?(D=!0,i.flags&=~un):(e===null||e.memoizedState!==null)&&(C=jM(C,US)),C=Om(C),th(i,C),e===null){P_(i);var $=i.memoizedState;if($!==null){var Z=$.dehydrated;if(Z!==null)return vR(i,Z)}var re=p.children,ue=p.fallback;if(D){var Ie=fR(i,re,ue,h),Re=i.child;return Re.memoizedState=Zw(h),i.memoizedState=Ww,Ie}else return Kw(i,re)}else{var Xe=e.memoizedState;if(Xe!==null){var et=Xe.dehydrated;if(et!==null)return yR(e,i,L,p,et,Xe,h)}if(D){var ot=p.fallback,Wt=p.children,Tn=pR(e,i,Wt,ot,h),wn=i.child,wr=e.child.memoizedState;return wn.memoizedState=wr===null?Zw(h):uR(wr,h),wn.childLanes=hR(e,h),i.memoizedState=Ww,Tn}else{var fr=p.children,He=mR(e,i,fr,h);return i.memoizedState=null,He}}}function Kw(e,i,h){var p=e.mode,C={mode:"visible",children:i},D=Yw(C,p);return D.return=e,e.child=D,D}function fR(e,i,h,p){var C=e.mode,D=e.child,L={mode:"hidden",children:i},$,Z;return(C&cr)===Sn&&D!==null?($=D,$.childLanes=xt,$.pendingProps=L,e.mode&Lr&&($.actualDuration=0,$.actualStartTime=-1,$.selfBaseDuration=0,$.treeBaseDuration=0),Z=ch(h,C,p,null)):($=Yw(L,C),Z=ch(h,C,p,null)),$.return=e,Z.return=e,$.sibling=Z,e.child=$,Z}function Yw(e,i,h){return LD(e,i,xt,null)}function LE(e,i){return yf(e,i)}function mR(e,i,h,p){var C=e.child,D=C.sibling,L=LE(C,{mode:"visible",children:h});if((i.mode&cr)===Sn&&(L.lanes=p),L.return=i,L.sibling=null,D!==null){var $=i.deletions;$===null?(i.deletions=[D],i.flags|=Ca):$.push(D)}return i.child=L,L}function pR(e,i,h,p,C){var D=i.mode,L=e.child,$=L.sibling,Z={mode:"hidden",children:h},re;if((D&cr)===Sn&&i.child!==L){var ue=i.child;re=ue,re.childLanes=xt,re.pendingProps=Z,i.mode&Lr&&(re.actualDuration=0,re.actualStartTime=-1,re.selfBaseDuration=L.selfBaseDuration,re.treeBaseDuration=L.treeBaseDuration),i.deletions=null}else re=LE(L,Z),re.subtreeFlags=L.subtreeFlags&$e;var Ie;return $!==null?Ie=yf($,p):(Ie=ch(p,D,C,null),Ie.flags|=Ci),Ie.return=i,re.return=i,re.sibling=Ie,i.child=re,Ie}function ax(e,i,h,p){p!==null&&j_(p),Rm(i,e.child,null,h);var C=i.pendingProps,D=C.children,L=Kw(i,D);return L.flags|=Ci,i.memoizedState=null,L}function gR(e,i,h,p,C){var D=i.mode,L={mode:"visible",children:h},$=Yw(L,D),Z=ch(p,D,C,null);return Z.flags|=Ci,$.return=i,Z.return=i,$.sibling=Z,i.child=$,(i.mode&cr)!==Sn&&Rm(i,e.child,null,C),Z}function vR(e,i,h){return(e.mode&cr)===Sn?(b("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),e.lanes=Pn):m_(i)?e.lanes=Ao:e.lanes=Ba,null}function yR(e,i,h,p,C,D,L){if(h)if(i.flags&x){i.flags&=~x;var He=Lw(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return ax(e,i,L,He)}else{if(i.memoizedState!==null)return i.child=e.child,i.flags|=un,null;var lt=p.children,Ge=p.fallback,St=gR(e,i,lt,Ge,L),on=i.child;return on.memoizedState=Zw(L),i.memoizedState=Ww,St}else{if(sM(),(i.mode&cr)===Sn)return ax(e,i,L,null);if(m_(C)){var $,Z,re;{var ue=w2(C);$=ue.digest,Z=ue.message,re=ue.stack}var Ie;Z?Ie=new Error(Z):Ie=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Re=Lw(Ie,$,re);return ax(e,i,L,Re)}var Xe=Da(L,e.childLanes);if(sc||Xe){var et=vx();if(et!==null){var ot=S0(et,L);if(ot!==Dr&&ot!==D.retryLane){D.retryLane=ot;var Wt=vi;uo(e,ot),Bs(et,e,ot,Wt)}}v1();var Tn=Lw(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return ax(e,i,L,Tn)}else if(sS(C)){i.flags|=un,i.child=e.child;var wn=$I.bind(null,e);return C2(C,wn),null}else{lM(i,C,D.treeContext);var wr=p.children,fr=Kw(i,wr);return fr.flags|=y,fr}}}function VE(e,i,h){e.lanes=tr(e.lanes,i);var p=e.alternate;p!==null&&(p.lanes=tr(p.lanes,i)),B_(e.return,i,h)}function bR(e,i,h){for(var p=i;p!==null;){if(p.tag===Oe){var C=p.memoizedState;C!==null&&VE(p,h,e)}else if(p.tag===Yt)VE(p,h,e);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function xR(e){for(var i=e,h=null;i!==null;){var p=i.alternate;p!==null&&Ob(p)===null&&(h=i),i=i.sibling}return h}function _R(e){if(e!==void 0&&e!=="forwards"&&e!=="backwards"&&e!=="together"&&!$w[e])if($w[e]=!0,typeof e=="string")switch(e.toLowerCase()){case"together":case"forwards":case"backwards":{b('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break}case"forward":case"backward":{b('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break}default:b('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e);break}else b('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}function wR(e,i){e!==void 0&&!sx[e]&&(e!=="collapsed"&&e!=="hidden"?(sx[e]=!0,b('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):i!=="forwards"&&i!=="backwards"&&(sx[e]=!0,b('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}function OE(e,i){{var h=rr(e),p=!h&&typeof Hr(e)=="function";if(h||p){var C=h?"array":"iterable";return b("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",C,i,C),!1}}return!0}function CR(e,i){if((i==="forwards"||i==="backwards")&&e!==void 0&&e!==null&&e!==!1)if(rr(e)){for(var h=0;h<e.length;h++)if(!OE(e[h],h))return}else{var p=Hr(e);if(typeof p=="function"){var C=p.call(e);if(C)for(var D=C.next(),L=0;!D.done;D=C.next()){if(!OE(D.value,L))return;L++}}else b('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',i)}}function Xw(e,i,h,p,C){var D=e.memoizedState;D===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:C}:(D.isBackwards=i,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=h,D.tailMode=C)}function zE(e,i,h){var p=i.pendingProps,C=p.revealOrder,D=p.tail,L=p.children;_R(C),wR(D,C),CR(L,C),Ga(e,i,L,h);var $=nc.current,Z=K_($,Kg);if(Z)$=Y_($,Kg),i.flags|=un;else{var re=e!==null&&(e.flags&un)!==Cn;re&&bR(i,i.child,h),$=Om($)}if(th(i,$),(i.mode&cr)===Sn)i.memoizedState=null;else switch(C){case"forwards":{var ue=xR(i.child),Ie;ue===null?(Ie=i.child,i.child=null):(Ie=ue.sibling,ue.sibling=null),Xw(i,!1,Ie,ue,D);break}case"backwards":{var Re=null,Xe=i.child;for(i.child=null;Xe!==null;){var et=Xe.alternate;if(et!==null&&Ob(et)===null){i.child=Xe;break}var ot=Xe.sibling;Xe.sibling=Re,Re=Xe,Xe=ot}Xw(i,!0,Re,null,D);break}case"together":{Xw(i,!1,null,null,void 0);break}default:i.memoizedState=null}return i.child}function NR(e,i,h){G_(i,i.stateNode.containerInfo);var p=i.pendingProps;return e===null?i.child=Rm(i,null,p,h):Ga(e,i,p,h),i.child}var BE=!1;function SR(e,i,h){var p=i.type,C=p._context,D=i.pendingProps,L=i.memoizedProps,$=D.value;{"value"in D||BE||(BE=!0,b("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var Z=i.type.propTypes;Z&&Ql(Z,D,"prop","Context.Provider")}if(AS(i,C,$),L!==null){var re=L.value;if(Pa(re,$)){if(L.children===D.children&&!pb())return Wu(e,i,h)}else _M(i,C,h)}var ue=D.children;return Ga(e,i,ue,h),i.child}var FE=!1;function ER(e,i,h){var p=i.type;p._context===void 0?p!==p.Consumer&&(FE||(FE=!0,b("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):p=p._context;var C=i.pendingProps,D=C.children;typeof D!="function"&&b("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Lm(i,h);var L=Ns(p);Ks(i);var $;return iv.current=i,qs(!0),$=D(L),qs(!1),Sa(),i.flags|=wa,Ga(e,i,$,h),i.child}function ov(){sc=!0}function ox(e,i){(i.mode&cr)===Sn&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=Ci)}function Wu(e,i,h){return e!==null&&(i.dependencies=e.dependencies),gE(),bv(i.lanes),Da(h,i.childLanes)?(bM(e,i),i.child):null}function DR(e,i,h){{var p=i.return;if(p===null)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,i.alternate=null,h.index=i.index,h.sibling=i.sibling,h.return=i.return,h.ref=i.ref,i===p.child)p.child=h;else{var C=p.child;if(C===null)throw new Error("Expected parent to have a child.");for(;C.sibling!==i;)if(C=C.sibling,C===null)throw new Error("Expected to find the previous sibling.");C.sibling=h}var D=p.deletions;return D===null?(p.deletions=[e],p.flags|=Ca):D.push(e),h.flags|=Ci,h}}function Jw(e,i){var h=e.lanes;return!!Da(h,i)}function TR(e,i,h){switch(i.tag){case B:ME(i),i.stateNode,Mm();break;case ie:BS(i);break;case A:{var p=i.type;Hc(p)&&vb(i);break}case W:G_(i,i.stateNode.containerInfo);break;case Ce:{var C=i.memoizedProps.value,D=i.type._context;AS(i,D,C);break}case Ue:{var L=Da(h,i.childLanes);L&&(i.flags|=hr);{var $=i.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}}break;case Oe:{var Z=i.memoizedState;if(Z!==null){if(Z.dehydrated!==null)return th(i,Om(nc.current)),i.flags|=un,null;var re=i.child,ue=re.childLanes;if(Da(h,ue))return IE(e,i,h);th(i,Om(nc.current));var Ie=Wu(e,i,h);return Ie!==null?Ie.sibling:null}else th(i,Om(nc.current));break}case Yt:{var Re=(e.flags&un)!==Cn,Xe=Da(h,i.childLanes);if(Re){if(Xe)return zE(e,i,h);i.flags|=un}var et=i.memoizedState;if(et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),th(i,nc.current),Xe)break;return null}case bt:case It:return i.lanes=xt,jE(e,i,h)}return Wu(e,i,h)}function UE(e,i,h){if(i._debugNeedsRemount&&e!==null)return DR(e,i,T1(i.type,i.key,i.pendingProps,i._debugOwner||null,i.mode,i.lanes));if(e!==null){var p=e.memoizedProps,C=i.pendingProps;if(p!==C||pb()||i.type!==e.type)sc=!0;else{var D=Jw(e,h);if(!D&&(i.flags&un)===Cn)return sc=!1,TR(e,i,h);(e.flags&U)!==Cn?sc=!0:sc=!1}}else if(sc=!1,aa()&&Q2(i)){var L=i.index,$=eM();gS(i,$,L)}switch(i.lanes=xt,i.tag){case O:return cR(e,i,i.type,h);case ut:{var Z=i.elementType;return oR(e,i,Z,h)}case k:{var re=i.type,ue=i.pendingProps,Ie=i.elementType===re?ue:ic(re,ue);return qw(e,i,re,Ie,h)}case A:{var Re=i.type,Xe=i.pendingProps,et=i.elementType===Re?Xe:ic(Re,Xe);return AE(e,i,Re,et,h)}case B:return iR(e,i,h);case ie:return sR(e,i,h);case pe:return aR(e,i);case Oe:return IE(e,i,h);case W:return NR(e,i,h);case _e:{var ot=i.type,Wt=i.pendingProps,Tn=i.elementType===ot?Wt:ic(ot,Wt);return DE(e,i,ot,Tn,h)}case Ve:return tR(e,i,h);case Pe:return nR(e,i,h);case Ue:return rR(e,i,h);case Ce:return SR(e,i,h);case Se:return ER(e,i,h);case Je:{var wn=i.type,wr=i.pendingProps,fr=ic(wn,wr);if(i.type!==i.elementType){var He=wn.propTypes;He&&Ql(He,fr,"prop",or(wn))}return fr=ic(wn.type,fr),TE(e,i,wn,fr,h)}case tt:return PE(e,i,i.type,i.pendingProps,h);case Tt:{var lt=i.type,Ge=i.pendingProps,St=i.elementType===lt?Ge:ic(lt,Ge);return lR(e,i,lt,St,h)}case Yt:return zE(e,i,h);case ft:break;case bt:return jE(e,i,h)}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function qm(e){e.flags|=hr}function $E(e){e.flags|=r,e.flags|=X}var qE,Qw,HE,GE;qE=function(e,i,h,p){for(var C=i.child;C!==null;){if(C.tag===ie||C.tag===pe)YA(e,C.stateNode);else if(C.tag!==W){if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===i)return;for(;C.sibling===null;){if(C.return===null||C.return===i)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Qw=function(e,i){},HE=function(e,i,h,p,C){var D=e.memoizedProps;if(D!==p){var L=i.stateNode,$=W_(),Z=JA(L,h,D,p,C,$);i.updateQueue=Z,Z&&qm(i)}},GE=function(e,i,h,p){h!==p&&qm(i)};function lv(e,i){if(!aa())switch(e.tailMode){case"hidden":{for(var h=e.tail,p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?e.tail=null:p.sibling=null;break}case"collapsed":{for(var C=e.tail,D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?!i&&e.tail!==null?e.tail.sibling=null:e.tail=null:D.sibling=null;break}}}function la(e){var i=e.alternate!==null&&e.alternate.child===e.child,h=xt,p=Cn;if(i){if((e.mode&Lr)!==Sn){for(var Z=e.selfBaseDuration,re=e.child;re!==null;)h=tr(h,tr(re.lanes,re.childLanes)),p|=re.subtreeFlags&$e,p|=re.flags&$e,Z+=re.treeBaseDuration,re=re.sibling;e.treeBaseDuration=Z}else for(var ue=e.child;ue!==null;)h=tr(h,tr(ue.lanes,ue.childLanes)),p|=ue.subtreeFlags&$e,p|=ue.flags&$e,ue.return=e,ue=ue.sibling;e.subtreeFlags|=p}else{if((e.mode&Lr)!==Sn){for(var C=e.actualDuration,D=e.selfBaseDuration,L=e.child;L!==null;)h=tr(h,tr(L.lanes,L.childLanes)),p|=L.subtreeFlags,p|=L.flags,C+=L.actualDuration,D+=L.treeBaseDuration,L=L.sibling;e.actualDuration=C,e.treeBaseDuration=D}else for(var $=e.child;$!==null;)h=tr(h,tr($.lanes,$.childLanes)),p|=$.subtreeFlags,p|=$.flags,$.return=e,$=$.sibling;e.subtreeFlags|=p}return e.childLanes=h,i}function PR(e,i,h){if(fM()&&(i.mode&cr)!==Sn&&(i.flags&un)===Cn)return CS(i),Mm(),i.flags|=x|R|z,!1;var p=wb(i);if(h!==null&&h.dehydrated!==null)if(e===null){if(!p)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(dM(i),la(i),(i.mode&Lr)!==Sn){var C=h!==null;if(C){var D=i.child;D!==null&&(i.treeBaseDuration-=D.treeBaseDuration)}}return!1}else{if(Mm(),(i.flags&un)===Cn&&(i.memoizedState=null),i.flags|=hr,la(i),(i.mode&Lr)!==Sn){var L=h!==null;if(L){var $=i.child;$!==null&&(i.treeBaseDuration-=$.treeBaseDuration)}}return!1}else return NS(),!0}function WE(e,i,h){var p=i.pendingProps;switch(S_(i),i.tag){case O:case ut:case tt:case k:case _e:case Ve:case Pe:case Ue:case Se:case Je:return la(i),null;case A:{var C=i.type;return Hc(C)&&gb(i),la(i),null}case B:{var D=i.stateNode;if(Vm(i),__(i),J_(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),e===null||e.child===null){var L=wb(i);if(L)qm(i);else if(e!==null){var $=e.memoizedState;(!$.isDehydrated||(i.flags&x)!==Cn)&&(i.flags|=d,NS())}}return Qw(e,i),la(i),null}case ie:{Z_(i);var Z=zS(),re=i.type;if(e!==null&&i.stateNode!=null)HE(e,i,re,p,Z),e.ref!==i.ref&&$E(i);else{if(!p){if(i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return la(i),null}var ue=W_(),Ie=wb(i);if(Ie)cM(i,Z,ue)&&qm(i);else{var Re=KA(re,p,Z,ue,i);qE(Re,i,!1,!1),i.stateNode=Re,XA(Re,re,p,Z)&&qm(i)}i.ref!==null&&$E(i)}return la(i),null}case pe:{var Xe=p;if(e&&i.stateNode!=null){var et=e.memoizedProps;GE(e,i,et,Xe)}else{if(typeof Xe!="string"&&i.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var ot=zS(),Wt=W_(),Tn=wb(i);Tn?uM(i)&&qm(i):i.stateNode=QA(Xe,ot,Wt,i)}return la(i),null}case Oe:{zm(i);var wn=i.memoizedState;if(e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){var wr=PR(e,i,wn);if(!wr)return i.flags&z?i:null}if((i.flags&un)!==Cn)return i.lanes=h,(i.mode&Lr)!==Sn&&Cw(i),i;var fr=wn!==null,He=e!==null&&e.memoizedState!==null;if(fr!==He&&fr){var lt=i.child;if(lt.flags|=w,(i.mode&cr)!==Sn){var Ge=e===null&&(i.memoizedProps.unstable_avoidThisFallback!==!0||!0);Ge||K_(nc.current,US)?jI():v1()}}var St=i.updateQueue;if(St!==null&&(i.flags|=hr),la(i),(i.mode&Lr)!==Sn&&fr){var on=i.child;on!==null&&(i.treeBaseDuration-=on.treeBaseDuration)}return null}case W:return Vm(i),Qw(e,i),e===null&&G2(i.stateNode.containerInfo),la(i),null;case Ce:var Qt=i.type._context;return z_(Qt,i),la(i),null;case Tt:{var Ln=i.type;return Hc(Ln)&&gb(i),la(i),null}case Yt:{zm(i);var Gn=i.memoizedState;if(Gn===null)return la(i),null;var ri=(i.flags&un)!==Cn,Ar=Gn.rendering;if(Ar===null)if(ri)lv(Gn,!1);else{var hs=AI()&&(e===null||(e.flags&un)===Cn);if(!hs)for(var Mr=i.child;Mr!==null;){var is=Ob(Mr);if(is!==null){ri=!0,i.flags|=un,lv(Gn,!1);var Ra=is.updateQueue;return Ra!==null&&(i.updateQueue=Ra,i.flags|=hr),i.subtreeFlags=Cn,xM(i,h),th(i,Y_(nc.current,Kg)),i.child}Mr=Mr.sibling}Gn.tail!==null&&gr()>mD()&&(i.flags|=un,ri=!0,lv(Gn,!1),i.lanes=hy)}else{if(!ri){var fa=Ob(Ar);if(fa!==null){i.flags|=un,ri=!0;var zo=fa.updateQueue;if(zo!==null&&(i.updateQueue=zo,i.flags|=hr),lv(Gn,!0),Gn.tail===null&&Gn.tailMode==="hidden"&&!Ar.alternate&&!aa())return la(i),null}else gr()*2-Gn.renderingStartTime>mD()&&h!==Ba&&(i.flags|=un,ri=!0,lv(Gn,!1),i.lanes=hy)}if(Gn.isBackwards)Ar.sibling=i.child,i.child=Ar;else{var Ka=Gn.last;Ka!==null?Ka.sibling=Ar:i.child=Ar,Gn.last=Ar}}if(Gn.tail!==null){var Ya=Gn.tail;Gn.rendering=Ya,Gn.tail=Ya.sibling,Gn.renderingStartTime=gr(),Ya.sibling=null;var Ia=nc.current;return ri?Ia=Y_(Ia,Kg):Ia=Om(Ia),th(i,Ia),Ya}return la(i),null}case ft:break;case bt:case It:{g1(i);var Ju=i.memoizedState,Jm=Ju!==null;if(e!==null){var Nv=e.memoizedState,Qc=Nv!==null;Qc!==Jm&&!ln&&(i.flags|=w)}return!Jm||(i.mode&cr)===Sn?la(i):Da(Jc,Ba)&&(la(i),i.subtreeFlags&(Ci|hr)&&(i.flags|=w)),null}case Lt:return null;case hn:return null}throw new Error("Unknown unit of work tag ("+i.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function jR(e,i,h){switch(S_(i),i.tag){case A:{var p=i.type;Hc(p)&&gb(i);var C=i.flags;return C&z?(i.flags=C&~z|un,(i.mode&Lr)!==Sn&&Cw(i),i):null}case B:{i.stateNode,Vm(i),__(i),J_();var D=i.flags;return(D&z)!==Cn&&(D&un)===Cn?(i.flags=D&~z|un,i):null}case ie:return Z_(i),null;case Oe:{zm(i);var L=i.memoizedState;if(L!==null&&L.dehydrated!==null){if(i.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Mm()}var $=i.flags;return $&z?(i.flags=$&~z|un,(i.mode&Lr)!==Sn&&Cw(i),i):null}case Yt:return zm(i),null;case W:return Vm(i),null;case Ce:var Z=i.type._context;return z_(Z,i),null;case bt:case It:return g1(i),null;case Lt:return null;default:return null}}function ZE(e,i,h){switch(S_(i),i.tag){case A:{var p=i.type.childContextTypes;p!=null&&gb(i);break}case B:{i.stateNode,Vm(i),__(i),J_();break}case ie:{Z_(i);break}case W:Vm(i);break;case Oe:zm(i);break;case Yt:zm(i);break;case Ce:var C=i.type._context;z_(C,i);break;case bt:case It:g1(i);break}}var KE=null;KE=new Set;var lx=!1,ca=!1,kR=typeof WeakSet=="function"?WeakSet:Set,vn=null,Hm=null,Gm=null;function AR(e){Cu(null,function(){throw e}),ci()}var MR=function(e,i){if(i.props=e.memoizedProps,i.state=e.memoizedState,e.mode&Lr)try{Yc(),i.componentWillUnmount()}finally{Kc(e)}else i.componentWillUnmount()};function YE(e,i){try{ih(Rs,e)}catch(h){xi(e,i,h)}}function e1(e,i,h){try{MR(e,h)}catch(p){xi(e,i,p)}}function RR(e,i,h){try{h.componentDidMount()}catch(p){xi(e,i,p)}}function XE(e,i){try{QE(e)}catch(h){xi(e,i,h)}}function Wm(e,i){var h=e.ref;if(h!==null)if(typeof h=="function"){var p;try{if(ze&&Pt&&e.mode&Lr)try{Yc(),p=h(null)}finally{Kc(e)}else p=h(null)}catch(C){xi(e,i,C)}typeof p=="function"&&b("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Mn(e))}else h.current=null}function cx(e,i,h){try{h()}catch(p){xi(e,i,p)}}var JE=!1;function IR(e,i){WA(e.containerInfo),vn=i,LR();var h=JE;return JE=!1,h}function LR(){for(;vn!==null;){var e=vn,i=e.child;(e.subtreeFlags&je)!==Cn&&i!==null?(i.return=e,vn=i):VR()}}function VR(){for(;vn!==null;){var e=vn;oi(e);try{OR(e)}catch(h){xi(e,e.return,h)}ki();var i=e.sibling;if(i!==null){i.return=e.return,vn=i;return}vn=e.return}}function OR(e){var i=e.alternate,h=e.flags;if((h&d)!==Cn){switch(oi(e),e.tag){case k:case _e:case tt:break;case A:{if(i!==null){var p=i.memoizedProps,C=i.memoizedState,D=e.stateNode;e.type===e.elementType&&!ff&&(D.props!==e.memoizedProps&&b("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Mn(e)||"instance"),D.state!==e.memoizedState&&b("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Mn(e)||"instance"));var L=D.getSnapshotBeforeUpdate(e.elementType===e.type?p:ic(e.type,p),C);{var $=KE;L===void 0&&!$.has(e.type)&&($.add(e.type),b("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Mn(e)))}D.__reactInternalSnapshotBeforeUpdate=L}break}case B:{{var Z=e.stateNode;y2(Z.containerInfo)}break}case ie:case pe:case W:case Tt:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ki()}}function ac(e,i,h){var p=i.updateQueue,C=p!==null?p.lastEffect:null;if(C!==null){var D=C.next,L=D;do{if((L.tag&e)===e){var $=L.destroy;L.destroy=void 0,$!==void 0&&((e&oa)!==ho?oo(i):(e&Rs)!==ho&&Pp(i),(e&Gc)!==ho&&_v(!0),cx(i,h,$),(e&Gc)!==ho&&_v(!1),(e&oa)!==ho?Lh():(e&Rs)!==ho&&Ri())}L=L.next}while(L!==D)}}function ih(e,i){var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var C=p.next,D=C;do{if((D.tag&e)===e){(e&oa)!==ho?ao(i):(e&Rs)!==ho&&ko(i);var L=D.create;(e&Gc)!==ho&&_v(!0),D.destroy=L(),(e&Gc)!==ho&&_v(!1),(e&oa)!==ho?Ea():(e&Rs)!==ho&&x0();{var $=D.destroy;if($!==void 0&&typeof $!="function"){var Z=void 0;(D.tag&Rs)!==Cn?Z="useLayoutEffect":(D.tag&Gc)!==Cn?Z="useInsertionEffect":Z="useEffect";var re=void 0;$===null?re=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof $.then=="function"?re=`

It looks like you wrote `+Z+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+Z+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:re=" You returned: "+$,b("%s must not return anything besides a function, which is used for clean-up.%s",Z,re)}}}D=D.next}while(D!==C)}}function zR(e,i){if((i.flags&hr)!==Cn)switch(i.tag){case Ue:{var h=i.stateNode.passiveEffectDuration,p=i.memoizedProps,C=p.id,D=p.onPostCommit,L=mE(),$=i.alternate===null?"mount":"update";fE()&&($="nested-update"),typeof D=="function"&&D(C,$,h,L);var Z=i.return;e:for(;Z!==null;){switch(Z.tag){case B:var re=Z.stateNode;re.passiveEffectDuration+=h;break e;case Ue:var ue=Z.stateNode;ue.passiveEffectDuration+=h;break e}Z=Z.return}break}}}function BR(e,i,h,p){if((h.flags&ye)!==Cn)switch(h.tag){case k:case _e:case tt:{if(!ca)if(h.mode&Lr)try{Yc(),ih(Rs|Ms,h)}finally{Kc(h)}else ih(Rs|Ms,h);break}case A:{var C=h.stateNode;if(h.flags&hr&&!ca)if(i===null)if(h.type===h.elementType&&!ff&&(C.props!==h.memoizedProps&&b("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Mn(h)||"instance"),C.state!==h.memoizedState&&b("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Mn(h)||"instance")),h.mode&Lr)try{Yc(),C.componentDidMount()}finally{Kc(h)}else C.componentDidMount();else{var D=h.elementType===h.type?i.memoizedProps:ic(h.type,i.memoizedProps),L=i.memoizedState;if(h.type===h.elementType&&!ff&&(C.props!==h.memoizedProps&&b("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Mn(h)||"instance"),C.state!==h.memoizedState&&b("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Mn(h)||"instance")),h.mode&Lr)try{Yc(),C.componentDidUpdate(D,L,C.__reactInternalSnapshotBeforeUpdate)}finally{Kc(h)}else C.componentDidUpdate(D,L,C.__reactInternalSnapshotBeforeUpdate)}var $=h.updateQueue;$!==null&&(h.type===h.elementType&&!ff&&(C.props!==h.memoizedProps&&b("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Mn(h)||"instance"),C.state!==h.memoizedState&&b("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Mn(h)||"instance")),OS(h,$,C));break}case B:{var Z=h.updateQueue;if(Z!==null){var re=null;if(h.child!==null)switch(h.child.tag){case ie:re=h.child.stateNode;break;case A:re=h.child.stateNode;break}OS(h,Z,re)}break}case ie:{var ue=h.stateNode;if(i===null&&h.flags&hr){var Ie=h.type,Re=h.memoizedProps;i2(ue,Ie,Re)}break}case pe:break;case W:break;case Ue:{{var Xe=h.memoizedProps,et=Xe.onCommit,ot=Xe.onRender,Wt=h.stateNode.effectDuration,Tn=mE(),wn=i===null?"mount":"update";fE()&&(wn="nested-update"),typeof ot=="function"&&ot(h.memoizedProps.id,wn,h.actualDuration,h.treeBaseDuration,h.actualStartTime,Tn);{typeof et=="function"&&et(h.memoizedProps.id,wn,Wt,Tn),VI(h);var wr=h.return;e:for(;wr!==null;){switch(wr.tag){case B:var fr=wr.stateNode;fr.effectDuration+=Wt;break e;case Ue:var He=wr.stateNode;He.effectDuration+=Wt;break e}wr=wr.return}}}break}case Oe:{ZR(e,h);break}case Yt:case Tt:case ft:case bt:case It:case hn:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ca||h.flags&r&&QE(h)}function FR(e){switch(e.tag){case k:case _e:case tt:{if(e.mode&Lr)try{Yc(),YE(e,e.return)}finally{Kc(e)}else YE(e,e.return);break}case A:{var i=e.stateNode;typeof i.componentDidMount=="function"&&RR(e,e.return,i),XE(e,e.return);break}case ie:{XE(e,e.return);break}}}function UR(e,i){for(var h=null,p=e;;){if(p.tag===ie){if(h===null){h=p;try{var C=p.stateNode;i?m2(C):g2(p.stateNode,p.memoizedProps)}catch(L){xi(e,e.return,L)}}}else if(p.tag===pe){if(h===null)try{var D=p.stateNode;i?p2(D):v2(D,p.memoizedProps)}catch(L){xi(e,e.return,L)}}else if(!((p.tag===bt||p.tag===It)&&p.memoizedState!==null&&p!==e)){if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===e)return;for(;p.sibling===null;){if(p.return===null||p.return===e)return;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}function QE(e){var i=e.ref;if(i!==null){var h=e.stateNode,p;switch(e.tag){case ie:p=h;break;default:p=h}if(typeof i=="function"){var C;if(e.mode&Lr)try{Yc(),C=i(p)}finally{Kc(e)}else C=i(p);typeof C=="function"&&b("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Mn(e))}else i.hasOwnProperty("current")||b("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Mn(e)),i.current=p}}function $R(e){var i=e.alternate;i!==null&&(i.return=null),e.return=null}function eD(e){var i=e.alternate;i!==null&&(e.alternate=null,eD(i));{if(e.child=null,e.deletions=null,e.sibling=null,e.tag===ie){var h=e.stateNode;h!==null&&K2(h)}e.stateNode=null,e._debugOwner=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}}function qR(e){for(var i=e.return;i!==null;){if(tD(i))return i;i=i.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function tD(e){return e.tag===ie||e.tag===B||e.tag===W}function nD(e){var i=e;e:for(;;){for(;i.sibling===null;){if(i.return===null||tD(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==ie&&i.tag!==pe&&i.tag!==pt;){if(i.flags&Ci||i.child===null||i.tag===W)continue e;i.child.return=i,i=i.child}if(!(i.flags&Ci))return i.stateNode}}function HR(e){var i=qR(e);switch(i.tag){case ie:{var h=i.stateNode;i.flags&Vl&&(iS(h),i.flags&=~Vl);var p=nD(e);n1(e,p,h);break}case B:case W:{var C=i.stateNode.containerInfo,D=nD(e);t1(e,D,C);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function t1(e,i,h){var p=e.tag,C=p===ie||p===pe;if(C){var D=e.stateNode;i?u2(h,D,i):l2(h,D)}else if(p!==W){var L=e.child;if(L!==null){t1(L,i,h);for(var $=L.sibling;$!==null;)t1($,i,h),$=$.sibling}}}function n1(e,i,h){var p=e.tag,C=p===ie||p===pe;if(C){var D=e.stateNode;i?c2(h,D,i):o2(h,D)}else if(p!==W){var L=e.child;if(L!==null){n1(L,i,h);for(var $=L.sibling;$!==null;)n1($,i,h),$=$.sibling}}}var ua=null,oc=!1;function GR(e,i,h){{var p=i;e:for(;p!==null;){switch(p.tag){case ie:{ua=p.stateNode,oc=!1;break e}case B:{ua=p.stateNode.containerInfo,oc=!0;break e}case W:{ua=p.stateNode.containerInfo,oc=!0;break e}}p=p.return}if(ua===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");rD(e,i,h),ua=null,oc=!1}$R(h)}function sh(e,i,h){for(var p=h.child;p!==null;)rD(e,i,p),p=p.sibling}function rD(e,i,h){switch(zl(h),h.tag){case ie:ca||Wm(h,i);case pe:{{var p=ua,C=oc;ua=null,sh(e,i,h),ua=p,oc=C,ua!==null&&(oc?h2(ua,h.stateNode):d2(ua,h.stateNode))}return}case pt:{ua!==null&&(oc?f2(ua,h.stateNode):f_(ua,h.stateNode));return}case W:{{var D=ua,L=oc;ua=h.stateNode.containerInfo,oc=!0,sh(e,i,h),ua=D,oc=L}return}case k:case _e:case Je:case tt:{if(!ca){var $=h.updateQueue;if($!==null){var Z=$.lastEffect;if(Z!==null){var re=Z.next,ue=re;do{var Ie=ue,Re=Ie.destroy,Xe=Ie.tag;Re!==void 0&&((Xe&Gc)!==ho?cx(h,i,Re):(Xe&Rs)!==ho&&(Pp(h),h.mode&Lr?(Yc(),cx(h,i,Re),Kc(h)):cx(h,i,Re),Ri())),ue=ue.next}while(ue!==re)}}}sh(e,i,h);return}case A:{if(!ca){Wm(h,i);var et=h.stateNode;typeof et.componentWillUnmount=="function"&&e1(h,i,et)}sh(e,i,h);return}case ft:{sh(e,i,h);return}case bt:{if(h.mode&cr){var ot=ca;ca=ot||h.memoizedState!==null,sh(e,i,h),ca=ot}else sh(e,i,h);break}default:{sh(e,i,h);return}}}function WR(e){e.memoizedState}function ZR(e,i){var h=i.memoizedState;if(h===null){var p=i.alternate;if(p!==null){var C=p.memoizedState;if(C!==null){var D=C.dehydrated;D!==null&&A2(D)}}}}function iD(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var h=e.stateNode;h===null&&(h=e.stateNode=new kR),i.forEach(function(p){var C=qI.bind(null,e,p);if(!h.has(p)){if(h.add(p),us)if(Hm!==null&&Gm!==null)xv(Gm,Hm);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");p.then(C,C)}})}}function KR(e,i,h){Hm=h,Gm=e,oi(i),sD(i,e),oi(i),Hm=null,Gm=null}function lc(e,i,h){var p=i.deletions;if(p!==null)for(var C=0;C<p.length;C++){var D=p[C];try{GR(e,i,D)}catch(Z){xi(D,i,Z)}}var L=ou();if(i.subtreeFlags&Fe)for(var $=i.child;$!==null;)oi($),sD($,e),$=$.sibling;oi(L)}function sD(e,i,h){var p=e.alternate,C=e.flags;switch(e.tag){case k:case _e:case Je:case tt:{if(lc(i,e),Xc(e),C&hr){try{ac(Gc|Ms,e,e.return),ih(Gc|Ms,e)}catch(Ln){xi(e,e.return,Ln)}if(e.mode&Lr){try{Yc(),ac(Rs|Ms,e,e.return)}catch(Ln){xi(e,e.return,Ln)}Kc(e)}else try{ac(Rs|Ms,e,e.return)}catch(Ln){xi(e,e.return,Ln)}}return}case A:{lc(i,e),Xc(e),C&r&&p!==null&&Wm(p,p.return);return}case ie:{lc(i,e),Xc(e),C&r&&p!==null&&Wm(p,p.return);{if(e.flags&Vl){var D=e.stateNode;try{iS(D)}catch(Ln){xi(e,e.return,Ln)}}if(C&hr){var L=e.stateNode;if(L!=null){var $=e.memoizedProps,Z=p!==null?p.memoizedProps:$,re=e.type,ue=e.updateQueue;if(e.updateQueue=null,ue!==null)try{s2(L,ue,re,Z,$,e)}catch(Ln){xi(e,e.return,Ln)}}}}return}case pe:{if(lc(i,e),Xc(e),C&hr){if(e.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var Ie=e.stateNode,Re=e.memoizedProps,Xe=p!==null?p.memoizedProps:Re;try{a2(Ie,Xe,Re)}catch(Ln){xi(e,e.return,Ln)}}return}case B:{if(lc(i,e),Xc(e),C&hr&&p!==null){var et=p.memoizedState;if(et.isDehydrated)try{k2(i.containerInfo)}catch(Ln){xi(e,e.return,Ln)}}return}case W:{lc(i,e),Xc(e);return}case Oe:{lc(i,e),Xc(e);var ot=e.child;if(ot.flags&w){var Wt=ot.stateNode,Tn=ot.memoizedState,wn=Tn!==null;if(Wt.isHidden=wn,wn){var wr=ot.alternate!==null&&ot.alternate.memoizedState!==null;wr||PI()}}if(C&hr){try{WR(e)}catch(Ln){xi(e,e.return,Ln)}iD(e)}return}case bt:{var fr=p!==null&&p.memoizedState!==null;if(e.mode&cr){var He=ca;ca=He||fr,lc(i,e),ca=He}else lc(i,e);if(Xc(e),C&w){var lt=e.stateNode,Ge=e.memoizedState,St=Ge!==null,on=e;if(lt.isHidden=St,St&&!fr&&(on.mode&cr)!==Sn){vn=on;for(var Qt=on.child;Qt!==null;)vn=Qt,XR(Qt),Qt=Qt.sibling}UR(on,St)}return}case Yt:{lc(i,e),Xc(e),C&hr&&iD(e);return}case ft:return;default:{lc(i,e),Xc(e);return}}}function Xc(e){var i=e.flags;if(i&Ci){try{HR(e)}catch(h){xi(e,e.return,h)}e.flags&=~Ci}i&y&&(e.flags&=~y)}function YR(e,i,h){Hm=h,Gm=i,vn=e,aD(e,i,h),Hm=null,Gm=null}function aD(e,i,h){for(var p=(e.mode&cr)!==Sn;vn!==null;){var C=vn,D=C.child;if(C.tag===bt&&p){var L=C.memoizedState!==null,$=L||lx;if($){r1(e,i,h);continue}else{var Z=C.alternate,re=Z!==null&&Z.memoizedState!==null,ue=re||ca,Ie=lx,Re=ca;lx=$,ca=ue,ca&&!Re&&(vn=C,JR(C));for(var Xe=D;Xe!==null;)vn=Xe,aD(Xe,i,h),Xe=Xe.sibling;vn=C,lx=Ie,ca=Re,r1(e,i,h);continue}}(C.subtreeFlags&ye)!==Cn&&D!==null?(D.return=C,vn=D):r1(e,i,h)}}function r1(e,i,h){for(;vn!==null;){var p=vn;if((p.flags&ye)!==Cn){var C=p.alternate;oi(p);try{BR(i,C,p,h)}catch(L){xi(p,p.return,L)}ki()}if(p===e){vn=null;return}var D=p.sibling;if(D!==null){D.return=p.return,vn=D;return}vn=p.return}}function XR(e){for(;vn!==null;){var i=vn,h=i.child;switch(i.tag){case k:case _e:case Je:case tt:{if(i.mode&Lr)try{Yc(),ac(Rs,i,i.return)}finally{Kc(i)}else ac(Rs,i,i.return);break}case A:{Wm(i,i.return);var p=i.stateNode;typeof p.componentWillUnmount=="function"&&e1(i,i.return,p);break}case ie:{Wm(i,i.return);break}case bt:{var C=i.memoizedState!==null;if(C){oD(e);continue}break}}h!==null?(h.return=i,vn=h):oD(e)}}function oD(e){for(;vn!==null;){var i=vn;if(i===e){vn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,vn=h;return}vn=i.return}}function JR(e){for(;vn!==null;){var i=vn,h=i.child;if(i.tag===bt){var p=i.memoizedState!==null;if(p){lD(e);continue}}h!==null?(h.return=i,vn=h):lD(e)}}function lD(e){for(;vn!==null;){var i=vn;oi(i);try{FR(i)}catch(p){xi(i,i.return,p)}if(ki(),i===e){vn=null;return}var h=i.sibling;if(h!==null){h.return=i.return,vn=h;return}vn=i.return}}function QR(e,i,h,p){vn=i,eI(i,e,h,p)}function eI(e,i,h,p){for(;vn!==null;){var C=vn,D=C.child;(C.subtreeFlags&Ae)!==Cn&&D!==null?(D.return=C,vn=D):tI(e,i,h,p)}}function tI(e,i,h,p){for(;vn!==null;){var C=vn;if((C.flags&m)!==Cn){oi(C);try{nI(i,C,h,p)}catch(L){xi(C,C.return,L)}ki()}if(C===e){vn=null;return}var D=C.sibling;if(D!==null){D.return=C.return,vn=D;return}vn=C.return}}function nI(e,i,h,p){switch(i.tag){case k:case _e:case tt:{if(i.mode&Lr){ww();try{ih(oa|Ms,i)}finally{_w(i)}}else ih(oa|Ms,i);break}}}function rI(e){vn=e,iI()}function iI(){for(;vn!==null;){var e=vn,i=e.child;if((vn.flags&Ca)!==Cn){var h=e.deletions;if(h!==null){for(var p=0;p<h.length;p++){var C=h[p];vn=C,oI(C,e)}{var D=e.alternate;if(D!==null){var L=D.child;if(L!==null){D.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}}vn=e}}(e.subtreeFlags&Ae)!==Cn&&i!==null?(i.return=e,vn=i):sI()}}function sI(){for(;vn!==null;){var e=vn;(e.flags&m)!==Cn&&(oi(e),aI(e),ki());var i=e.sibling;if(i!==null){i.return=e.return,vn=i;return}vn=e.return}}function aI(e){switch(e.tag){case k:case _e:case tt:{e.mode&Lr?(ww(),ac(oa|Ms,e,e.return),_w(e)):ac(oa|Ms,e,e.return);break}}}function oI(e,i){for(;vn!==null;){var h=vn;oi(h),cI(h,i),ki();var p=h.child;p!==null?(p.return=h,vn=p):lI(e)}}function lI(e){for(;vn!==null;){var i=vn,h=i.sibling,p=i.return;if(eD(i),i===e){vn=null;return}if(h!==null){h.return=p,vn=h;return}vn=p}}function cI(e,i){switch(e.tag){case k:case _e:case tt:{e.mode&Lr?(ww(),ac(oa,e,i),_w(e)):ac(oa,e,i);break}}}function uI(e){switch(e.tag){case k:case _e:case tt:{try{ih(Rs|Ms,e)}catch(h){xi(e,e.return,h)}break}case A:{var i=e.stateNode;try{i.componentDidMount()}catch(h){xi(e,e.return,h)}break}}}function dI(e){switch(e.tag){case k:case _e:case tt:{try{ih(oa|Ms,e)}catch(i){xi(e,e.return,i)}break}}}function hI(e){switch(e.tag){case k:case _e:case tt:{try{ac(Rs|Ms,e,e.return)}catch(h){xi(e,e.return,h)}break}case A:{var i=e.stateNode;typeof i.componentWillUnmount=="function"&&e1(e,e.return,i);break}}}function fI(e){switch(e.tag){case k:case _e:case tt:try{ac(oa|Ms,e,e.return)}catch(i){xi(e,e.return,i)}}}if(typeof Symbol=="function"&&Symbol.for){var cv=Symbol.for;cv("selector.component"),cv("selector.has_pseudo_class"),cv("selector.role"),cv("selector.test_id"),cv("selector.text")}var mI=[];function pI(){mI.forEach(function(e){return e()})}var gI=a.ReactCurrentActQueue;function vI(e){{var i=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,h=typeof jest<"u";return h&&i!==!1}}function cD(){{var e=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!e&&gI.current!==null&&b("The current testing environment is not configured to support act(...)"),e}}var yI=Math.ceil,i1=a.ReactCurrentDispatcher,s1=a.ReactCurrentOwner,da=a.ReactCurrentBatchConfig,cc=a.ReactCurrentActQueue,Vs=0,uD=1,ha=2,ml=4,Zu=0,uv=1,mf=2,ux=3,dv=4,dD=5,a1=6,_r=Vs,Wa=null,Ki=null,Os=xt,Jc=xt,o1=Kd(xt),zs=Zu,hv=null,dx=xt,fv=xt,hx=xt,mv=null,fo=null,l1=0,hD=500,fD=1/0,bI=500,Ku=null;function pv(){fD=gr()+bI}function mD(){return fD}var fx=!1,c1=null,Zm=null,pf=!1,ah=null,gv=xt,u1=[],d1=null,xI=50,vv=0,h1=null,f1=!1,mx=!1,_I=50,Km=0,px=null,yv=vi,gx=xt,pD=!1;function vx(){return Wa}function Za(){return(_r&(ha|ml))!==Vs?gr():(yv!==vi||(yv=gr()),yv)}function oh(e){var i=e.mode;if((i&cr)===Sn)return Pn;if((_r&ha)!==Vs&&Os!==xt)return Mu(Os);var h=gM()!==pM;if(h){if(da.transition!==null){var p=da.transition;p._updatedFibers||(p._updatedFibers=new Set),p._updatedFibers.add(e)}return gx===Dr&&(gx=yy()),gx}var C=Ua();if(C!==Dr)return C;var D=e2();return D}function wI(e){var i=e.mode;return(i&cr)===Sn?Pn:Hp()}function Bs(e,i,h,p){GI(),pD&&b("useInsertionEffect must not schedule updates."),f1&&(mx=!0),$h(e,h,p),(_r&ha)!==xt&&e===Wa?KI(i):(us&&Wp(e,i,h),YI(i),e===Wa&&((_r&ha)===Vs&&(fv=tr(fv,h)),zs===dv&&lh(e,Os)),mo(e,p),h===Pn&&_r===Vs&&(i.mode&cr)===Sn&&!cc.isBatchingLegacy&&(pv(),pS()))}function CI(e,i,h){var p=e.current;p.lanes=i,$h(e,i,h),mo(e,h)}function NI(e){return(_r&ha)!==Vs}function mo(e,i){var h=e.callbackNode;rm(e,i);var p=ju(e,e===Wa?Os:xt);if(p===xt){h!==null&&kD(h),e.callbackNode=null,e.callbackPriority=Dr;return}var C=Au(p),D=e.callbackPriority;if(D===C&&!(cc.current!==null&&h!==x1)){h==null&&D!==Pn&&b("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}h!=null&&kD(h);var L;if(C===Pn)e.tag===Yd?(cc.isBatchingLegacy!==null&&(cc.didScheduleLegacyUpdate=!0),J2(yD.bind(null,e))):mS(yD.bind(null,e)),cc.current!==null?cc.current.push(Xd):n2(function(){(_r&(ha|ml))===Vs&&Xd()}),L=null;else{var $;switch(kd(p)){case Fa:$=pi;break;case ql:$=Ps;break;case Hl:$=Nr;break;case jd:$=Na;break;default:$=Nr;break}L=_1($,gD.bind(null,e))}e.callbackPriority=C,e.callbackNode=L}function gD(e,i){if(UM(),yv=vi,gx=xt,(_r&(ha|ml))!==Vs)throw new Error("Should not already be working.");var h=e.callbackNode,p=Xu();if(p&&e.callbackNode!==h)return null;var C=ju(e,e===Wa?Os:xt);if(C===xt)return null;var D=!am(e,C)&&!vy(e,C)&&!i,L=D?RI(e,C):bx(e,C);if(L!==Zu){if(L===mf){var $=im(e);$!==xt&&(C=$,L=m1(e,$))}if(L===uv){var Z=hv;throw gf(e,xt),lh(e,C),mo(e,gr()),Z}if(L===a1)lh(e,C);else{var re=!am(e,C),ue=e.current.alternate;if(re&&!EI(ue)){if(L=bx(e,C),L===mf){var Ie=im(e);Ie!==xt&&(C=Ie,L=m1(e,Ie))}if(L===uv){var Re=hv;throw gf(e,xt),lh(e,C),mo(e,gr()),Re}}e.finishedWork=ue,e.finishedLanes=C,SI(e,L,C)}}return mo(e,gr()),e.callbackNode===h?gD.bind(null,e):null}function m1(e,i){var h=mv;if(qh(e)){var p=gf(e,i);p.flags|=x,H2(e.containerInfo)}var C=bx(e,i);if(C!==mf){var D=fo;fo=h,D!==null&&vD(D)}return C}function vD(e){fo===null?fo=e:fo.push.apply(fo,e)}function SI(e,i,h){switch(i){case Zu:case uv:throw new Error("Root did not complete. This is a bug in React.");case mf:{vf(e,fo,Ku);break}case ux:{if(lh(e,h),sm(h)&&!AD()){var p=l1+hD-gr();if(p>10){var C=ju(e,xt);if(C!==xt)break;var D=e.suspendedLanes;if(!Ru(D,h)){Za(),Iu(e,D);break}e.timeoutHandle=d_(vf.bind(null,e,fo,Ku),p);break}}vf(e,fo,Ku);break}case dv:{if(lh(e,h),gy(h))break;if(!AD()){var L=my(e,h),$=L,Z=gr()-$,re=HI(Z)-Z;if(re>10){e.timeoutHandle=d_(vf.bind(null,e,fo,Ku),re);break}}vf(e,fo,Ku);break}case dD:{vf(e,fo,Ku);break}default:throw new Error("Unknown root exit status.")}}function EI(e){for(var i=e;;){if(i.flags&P){var h=i.updateQueue;if(h!==null){var p=h.stores;if(p!==null)for(var C=0;C<p.length;C++){var D=p[C],L=D.getSnapshot,$=D.value;try{if(!Pa(L(),$))return!1}catch{return!1}}}}var Z=i.child;if(i.subtreeFlags&P&&Z!==null){Z.return=i,i=Z;continue}if(i===e)return!0;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}return!0}function lh(e,i){i=om(i,hx),i=om(i,fv),xy(e,i)}function yD(e){if($M(),(_r&(ha|ml))!==Vs)throw new Error("Should not already be working.");Xu();var i=ju(e,xt);if(!Da(i,Pn))return mo(e,gr()),null;var h=bx(e,i);if(e.tag!==Yd&&h===mf){var p=im(e);p!==xt&&(i=p,h=m1(e,p))}if(h===uv){var C=hv;throw gf(e,xt),lh(e,i),mo(e,gr()),C}if(h===a1)throw new Error("Root did not complete. This is a bug in React.");var D=e.current.alternate;return e.finishedWork=D,e.finishedLanes=i,vf(e,fo,Ku),mo(e,gr()),null}function DI(e,i){i!==xt&&(Gp(e,tr(i,Pn)),mo(e,gr()),(_r&(ha|ml))===Vs&&(pv(),Xd()))}function p1(e,i){var h=_r;_r|=uD;try{return e(i)}finally{_r=h,_r===Vs&&!cc.isBatchingLegacy&&(pv(),pS())}}function TI(e,i,h,p,C){var D=Ua(),L=da.transition;try{return da.transition=null,bs(Fa),e(i,h,p,C)}finally{bs(D),da.transition=L,_r===Vs&&pv()}}function Yu(e){ah!==null&&ah.tag===Yd&&(_r&(ha|ml))===Vs&&Xu();var i=_r;_r|=uD;var h=da.transition,p=Ua();try{return da.transition=null,bs(Fa),e?e():void 0}finally{bs(p),da.transition=h,_r=i,(_r&(ha|ml))===Vs&&Xd()}}function bD(){return(_r&(ha|ml))!==Vs}function yx(e,i){Aa(o1,Jc,e),Jc=tr(Jc,i)}function g1(e){Jc=o1.current,ka(o1,e)}function gf(e,i){e.finishedWork=null,e.finishedLanes=xt;var h=e.timeoutHandle;if(h!==h_&&(e.timeoutHandle=h_,t2(h)),Ki!==null)for(var p=Ki.return;p!==null;){var C=p.alternate;ZE(C,p),p=p.return}Wa=e;var D=yf(e.current,null);return Ki=D,Os=Jc=i,zs=Zu,hv=null,dx=xt,fv=xt,hx=xt,mv=null,fo=null,CM(),tc.discardPendingWarnings(),D}function xD(e,i){do{var h=Ki;try{if(Tb(),qS(),ki(),s1.current=null,h===null||h.return===null){zs=uv,hv=i,Ki=null;return}if(ze&&h.mode&Lr&&rx(h,!0),wt)if(Sa(),i!==null&&typeof i=="object"&&typeof i.then=="function"){var p=i;uy(h,p,Os)}else jp(h,i,Os);JM(e,h.return,h,i,Os),ND(h)}catch(C){i=C,Ki===h&&h!==null?(h=h.return,Ki=h):h=Ki;continue}return}while(!0)}function _D(){var e=i1.current;return i1.current=Jb,e===null?Jb:e}function wD(e){i1.current=e}function PI(){l1=gr()}function bv(e){dx=tr(e,dx)}function jI(){zs===Zu&&(zs=ux)}function v1(){(zs===Zu||zs===ux||zs===mf)&&(zs=dv),Wa!==null&&(ku(dx)||ku(fv))&&lh(Wa,Os)}function kI(e){zs!==dv&&(zs=mf),mv===null?mv=[e]:mv.push(e)}function AI(){return zs===Zu}function bx(e,i){var h=_r;_r|=ha;var p=_D();if(Wa!==e||Os!==i){if(us){var C=e.memoizedUpdaters;C.size>0&&(xv(e,Os),C.clear()),Zp(e,i)}Ku=_y(),gf(e,i)}Ap(i);do try{MI();break}catch(D){xD(e,D)}while(!0);if(Tb(),_r=h,wD(p),Ki!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Mp(),Wa=null,Os=xt,zs}function MI(){for(;Ki!==null;)CD(Ki)}function RI(e,i){var h=_r;_r|=ha;var p=_D();if(Wa!==e||Os!==i){if(us){var C=e.memoizedUpdaters;C.size>0&&(xv(e,Os),C.clear()),Zp(e,i)}Ku=_y(),pv(),gf(e,i)}Ap(i);do try{II();break}catch(D){xD(e,D)}while(!0);return Tb(),wD(p),_r=h,Ki!==null?(_0(),Zu):(Mp(),Wa=null,Os=xt,zs)}function II(){for(;Ki!==null&&!Ni();)CD(Ki)}function CD(e){var i=e.alternate;oi(e);var h;(e.mode&Lr)!==Sn?(xw(e),h=y1(i,e,Jc),rx(e,!0)):h=y1(i,e,Jc),ki(),e.memoizedProps=e.pendingProps,h===null?ND(e):Ki=h,s1.current=null}function ND(e){var i=e;do{var h=i.alternate,p=i.return;if((i.flags&R)===Cn){oi(i);var C=void 0;if((i.mode&Lr)===Sn?C=WE(h,i,Jc):(xw(i),C=WE(h,i,Jc),rx(i,!1)),ki(),C!==null){Ki=C;return}}else{var D=jR(h,i);if(D!==null){D.flags&=j,Ki=D;return}if((i.mode&Lr)!==Sn){rx(i,!1);for(var L=i.actualDuration,$=i.child;$!==null;)L+=$.actualDuration,$=$.sibling;i.actualDuration=L}if(p!==null)p.flags|=R,p.subtreeFlags=Cn,p.deletions=null;else{zs=a1,Ki=null;return}}var Z=i.sibling;if(Z!==null){Ki=Z;return}i=p,Ki=i}while(i!==null);zs===Zu&&(zs=dD)}function vf(e,i,h){var p=Ua(),C=da.transition;try{da.transition=null,bs(Fa),LI(e,i,h,p)}finally{da.transition=C,bs(p)}return null}function LI(e,i,h,p){do Xu();while(ah!==null);if(WI(),(_r&(ha|ml))!==Vs)throw new Error("Should not already be working.");var C=e.finishedWork,D=e.finishedLanes;if(Tp(D),C===null)return Nd(),null;if(D===xt&&b("root.finishedLanes should not be empty during a commit. This is a bug in React."),e.finishedWork=null,e.finishedLanes=xt,C===e.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackPriority=Dr;var L=tr(C.lanes,C.childLanes);N0(e,L),e===Wa&&(Wa=null,Ki=null,Os=xt),((C.subtreeFlags&Ae)!==Cn||(C.flags&Ae)!==Cn)&&(pf||(pf=!0,d1=h,_1(Nr,function(){return Xu(),null})));var $=(C.subtreeFlags&(je|Fe|ye|Ae))!==Cn,Z=(C.flags&(je|Fe|ye|Ae))!==Cn;if($||Z){var re=da.transition;da.transition=null;var ue=Ua();bs(Fa);var Ie=_r;_r|=ml,s1.current=null,IR(e,C),pE(),KR(e,C,D),ZA(e.containerInfo),e.current=C,Su(D),YR(C,e,D),Eu(),Wr(),_r=Ie,bs(ue),da.transition=re}else e.current=C,pE();var Re=pf;if(pf?(pf=!1,ah=e,gv=D):(Km=0,px=null),L=e.pendingLanes,L===xt&&(Zm=null),Re||TD(e.current,!1),Zs(C.stateNode,p),us&&e.memoizedUpdaters.clear(),pI(),mo(e,gr()),i!==null)for(var Xe=e.onRecoverableError,et=0;et<i.length;et++){var ot=i[et],Wt=ot.stack,Tn=ot.digest;Xe(ot.value,{componentStack:Wt,digest:Tn})}if(fx){fx=!1;var wn=c1;throw c1=null,wn}return Da(gv,Pn)&&e.tag!==Yd&&Xu(),L=e.pendingLanes,Da(L,Pn)?(FM(),e===h1?vv++:(vv=0,h1=e)):vv=0,Xd(),Nd(),null}function Xu(){if(ah!==null){var e=kd(gv),i=D0(Hl,e),h=da.transition,p=Ua();try{return da.transition=null,bs(i),OI()}finally{bs(p),da.transition=h}}return!1}function VI(e){u1.push(e),pf||(pf=!0,_1(Nr,function(){return Xu(),null}))}function OI(){if(ah===null)return!1;var e=d1;d1=null;var i=ah,h=gv;if(ah=null,gv=xt,(_r&(ha|ml))!==Vs)throw new Error("Cannot flush passive effects while already rendering.");f1=!0,mx=!1,Hf(h);var p=_r;_r|=ml,rI(i.current),QR(i,i.current,h,e);{var C=u1;u1=[];for(var D=0;D<C.length;D++){var L=C[D];zR(i,L)}}kp(),TD(i.current,!0),_r=p,Xd(),mx?i===px?Km++:(Km=0,px=i):Km=0,f1=!1,mx=!1,Ei(i);{var $=i.current.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}return!0}function SD(e){return Zm!==null&&Zm.has(e)}function zI(e){Zm===null?Zm=new Set([e]):Zm.add(e)}function BI(e){fx||(fx=!0,c1=e)}var FI=BI;function ED(e,i,h){var p=hf(h,i),C=CE(e,p,Pn),D=Qd(e,C,Pn),L=Za();D!==null&&($h(D,Pn,L),mo(D,L))}function xi(e,i,h){if(AR(h),_v(!1),e.tag===B){ED(e,e,h);return}var p=null;for(p=i;p!==null;){if(p.tag===B){ED(p,e,h);return}else if(p.tag===A){var C=p.type,D=p.stateNode;if(typeof C.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&!SD(D)){var L=hf(h,e),$=Ow(p,L,Pn),Z=Qd(p,$,Pn),re=Za();Z!==null&&($h(Z,Pn,re),mo(Z,re));return}}p=p.return}b(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,h)}function UI(e,i,h){var p=e.pingCache;p!==null&&p.delete(i);var C=Za();Iu(e,h),XI(e),Wa===e&&Ru(Os,h)&&(zs===dv||zs===ux&&sm(Os)&&gr()-l1<hD?gf(e,xt):hx=tr(hx,h)),mo(e,C)}function DD(e,i){i===Dr&&(i=wI(e));var h=Za(),p=uo(e,i);p!==null&&($h(p,i,h),mo(p,h))}function $I(e){var i=e.memoizedState,h=Dr;i!==null&&(h=i.retryLane),DD(e,h)}function qI(e,i){var h=Dr,p;switch(e.tag){case Oe:p=e.stateNode;var C=e.memoizedState;C!==null&&(h=C.retryLane);break;case Yt:p=e.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}p!==null&&p.delete(i),DD(e,h)}function HI(e){return e<120?120:e<480?480:e<1080?1080:e<1920?1920:e<3e3?3e3:e<4320?4320:yI(e/1960)*1960}function GI(){if(vv>xI)throw vv=0,h1=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Km>_I&&(Km=0,px=null,b("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function WI(){tc.flushLegacyContextWarning(),tc.flushPendingUnsafeLifecycleWarnings()}function TD(e,i){oi(e),xx(e,me,hI),i&&xx(e,ae,fI),xx(e,me,uI),i&&xx(e,ae,dI),ki()}function xx(e,i,h){for(var p=e,C=null;p!==null;){var D=p.subtreeFlags&i;p!==C&&p.child!==null&&D!==Cn?p=p.child:((p.flags&i)!==Cn&&h(p),p.sibling!==null?p=p.sibling:p=C=p.return)}}var _x=null;function PD(e){{if((_r&ha)!==Vs||!(e.mode&cr))return;var i=e.tag;if(i!==O&&i!==B&&i!==A&&i!==k&&i!==_e&&i!==Je&&i!==tt)return;var h=Mn(e)||"ReactComponent";if(_x!==null){if(_x.has(h))return;_x.add(h)}else _x=new Set([h]);var p=gs;try{oi(e),b("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{p?oi(e):ki()}}}var y1;{var ZI=null;y1=function(e,i,h){var p=VD(ZI,i);try{return UE(e,i,h)}catch(D){if(aM()||D!==null&&typeof D=="object"&&typeof D.then=="function")throw D;if(Tb(),qS(),ZE(e,i),VD(i,p),i.mode&Lr&&xw(i),Cu(null,UE,null,e,i,h),Ll()){var C=ci();typeof C=="object"&&C!==null&&C._suppressLogging&&typeof D=="object"&&D!==null&&!D._suppressLogging&&(D._suppressLogging=!0)}throw D}}}var jD=!1,b1;b1=new Set;function KI(e){if(Sl&&!OM())switch(e.tag){case k:case _e:case tt:{var i=Ki&&Mn(Ki)||"Unknown",h=i;if(!b1.has(h)){b1.add(h);var p=Mn(e)||"Unknown";b("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",p,i,i)}break}case A:{jD||(b("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),jD=!0);break}}}function xv(e,i){if(us){var h=e.memoizedUpdaters;h.forEach(function(p){Wp(e,p,i)})}}var x1={};function _1(e,i){{var h=cc.current;return h!==null?(h.push(i),x1):On(e,i)}}function kD(e){if(e!==x1)return er(e)}function AD(){return cc.current!==null}function YI(e){{if(e.mode&cr){if(!cD())return}else if(!vI()||_r!==Vs||e.tag!==k&&e.tag!==_e&&e.tag!==tt)return;if(cc.current===null){var i=gs;try{oi(e),b(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,Mn(e))}finally{i?oi(e):ki()}}}}function XI(e){e.tag!==Yd&&cD()&&cc.current===null&&b(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function _v(e){pD=e}var pl=null,Ym=null,JI=function(e){pl=e};function Xm(e){{if(pl===null)return e;var i=pl(e);return i===void 0?e:i.current}}function w1(e){return Xm(e)}function C1(e){{if(pl===null)return e;var i=pl(e);if(i===void 0){if(e!=null&&typeof e.render=="function"){var h=Xm(e.render);if(e.render!==h){var p={$$typeof:ke,render:h};return e.displayName!==void 0&&(p.displayName=e.displayName),p}}return e}return i.current}}function MD(e,i){{if(pl===null)return!1;var h=e.elementType,p=i.type,C=!1,D=typeof p=="object"&&p!==null?p.$$typeof:null;switch(e.tag){case A:{typeof p=="function"&&(C=!0);break}case k:{(typeof p=="function"||D===mt)&&(C=!0);break}case _e:{(D===ke||D===mt)&&(C=!0);break}case Je:case tt:{(D===ct||D===mt)&&(C=!0);break}default:return!1}if(C){var L=pl(h);if(L!==void 0&&L===pl(p))return!0}return!1}}function RD(e){{if(pl===null||typeof WeakSet!="function")return;Ym===null&&(Ym=new WeakSet),Ym.add(e)}}var QI=function(e,i){{if(pl===null)return;var h=i.staleFamilies,p=i.updatedFamilies;Xu(),Yu(function(){N1(e.current,p,h)})}},eL=function(e,i){{if(e.context!==Vo)return;Xu(),Yu(function(){wv(i,e,null,null)})}};function N1(e,i,h){{var p=e.alternate,C=e.child,D=e.sibling,L=e.tag,$=e.type,Z=null;switch(L){case k:case tt:case A:Z=$;break;case _e:Z=$.render;break}if(pl===null)throw new Error("Expected resolveFamily to be set during hot reload.");var re=!1,ue=!1;if(Z!==null){var Ie=pl(Z);Ie!==void 0&&(h.has(Ie)?ue=!0:i.has(Ie)&&(L===A?ue=!0:re=!0))}if(Ym!==null&&(Ym.has(e)||p!==null&&Ym.has(p))&&(ue=!0),ue&&(e._debugNeedsRemount=!0),ue||re){var Re=uo(e,Pn);Re!==null&&Bs(Re,e,Pn,vi)}C!==null&&!ue&&N1(C,i,h),D!==null&&N1(D,i,h)}}var tL=function(e,i){{var h=new Set,p=new Set(i.map(function(C){return C.current}));return S1(e.current,p,h),h}};function S1(e,i,h){{var p=e.child,C=e.sibling,D=e.tag,L=e.type,$=null;switch(D){case k:case tt:case A:$=L;break;case _e:$=L.render;break}var Z=!1;$!==null&&i.has($)&&(Z=!0),Z?nL(e,h):p!==null&&S1(p,i,h),C!==null&&S1(C,i,h)}}function nL(e,i){{var h=rL(e,i);if(h)return;for(var p=e;;){switch(p.tag){case ie:i.add(p.stateNode);return;case W:i.add(p.stateNode.containerInfo);return;case B:i.add(p.stateNode.containerInfo);return}if(p.return===null)throw new Error("Expected to reach root first.");p=p.return}}}function rL(e,i){for(var h=e,p=!1;;){if(h.tag===ie)p=!0,i.add(h.stateNode);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)return p;for(;h.sibling===null;){if(h.return===null||h.return===e)return p;h=h.return}h.sibling.return=h.return,h=h.sibling}return!1}var E1;{E1=!1;try{var ID=Object.preventExtensions({})}catch{E1=!0}}function iL(e,i,h,p){this.tag=e,this.key=h,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=i,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=p,this.flags=Cn,this.subtreeFlags=Cn,this.deletions=null,this.lanes=xt,this.childLanes=xt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!E1&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var Oo=function(e,i,h,p){return new iL(e,i,h,p)};function D1(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function sL(e){return typeof e=="function"&&!D1(e)&&e.defaultProps===void 0}function aL(e){if(typeof e=="function")return D1(e)?A:k;if(e!=null){var i=e.$$typeof;if(i===ke)return _e;if(i===ct)return Je}return O}function yf(e,i){var h=e.alternate;h===null?(h=Oo(e.tag,i,e.key,e.mode),h.elementType=e.elementType,h.type=e.type,h.stateNode=e.stateNode,h._debugSource=e._debugSource,h._debugOwner=e._debugOwner,h._debugHookTypes=e._debugHookTypes,h.alternate=e,e.alternate=h):(h.pendingProps=i,h.type=e.type,h.flags=Cn,h.subtreeFlags=Cn,h.deletions=null,h.actualDuration=0,h.actualStartTime=-1),h.flags=e.flags&$e,h.childLanes=e.childLanes,h.lanes=e.lanes,h.child=e.child,h.memoizedProps=e.memoizedProps,h.memoizedState=e.memoizedState,h.updateQueue=e.updateQueue;var p=e.dependencies;switch(h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},h.sibling=e.sibling,h.index=e.index,h.ref=e.ref,h.selfBaseDuration=e.selfBaseDuration,h.treeBaseDuration=e.treeBaseDuration,h._debugNeedsRemount=e._debugNeedsRemount,h.tag){case O:case k:case tt:h.type=Xm(e.type);break;case A:h.type=w1(e.type);break;case _e:h.type=C1(e.type);break}return h}function oL(e,i){e.flags&=$e|Ci;var h=e.alternate;if(h===null)e.childLanes=xt,e.lanes=i,e.child=null,e.subtreeFlags=Cn,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childLanes=h.childLanes,e.lanes=h.lanes,e.child=h.child,e.subtreeFlags=Cn,e.deletions=null,e.memoizedProps=h.memoizedProps,e.memoizedState=h.memoizedState,e.updateQueue=h.updateQueue,e.type=h.type;var p=h.dependencies;e.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},e.selfBaseDuration=h.selfBaseDuration,e.treeBaseDuration=h.treeBaseDuration}return e}function lL(e,i,h){var p;return e===yb?(p=cr,i===!0&&(p|=ui,p|=nl)):p=Sn,us&&(p|=Lr),Oo(B,null,null,p)}function T1(e,i,h,p,C,D){var L=O,$=e;if(typeof e=="function")D1(e)?(L=A,$=w1($)):$=Xm($);else if(typeof e=="string")L=ie;else e:switch(e){case Te:return ch(h.children,C,D,i);case Qe:L=Pe,C|=ui,(C&cr)!==Sn&&(C|=nl);break;case ne:return cL(h,C,D,i);case Be:return uL(h,C,D,i);case Ze:return dL(h,C,D,i);case qt:return LD(h,C,D,i);case En:case Ut:case _n:case qn:case Ct:default:{if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ee:L=Ce;break e;case te:L=Se;break e;case ke:L=_e,$=C1($);break e;case ct:L=Je;break e;case mt:L=ut,$=null;break e}var Z="";{(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(Z+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var re=p?Mn(p):null;re&&(Z+=`

Check the render method of \``+re+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(e==null?e:typeof e)+"."+Z))}}var ue=Oo(L,h,i,C);return ue.elementType=e,ue.type=$,ue.lanes=D,ue._debugOwner=p,ue}function P1(e,i,h){var p=null;p=e._owner;var C=e.type,D=e.key,L=e.props,$=T1(C,D,L,p,i,h);return $._debugSource=e._source,$._debugOwner=e._owner,$}function ch(e,i,h,p){var C=Oo(Ve,e,p,i);return C.lanes=h,C}function cL(e,i,h,p){typeof e.id!="string"&&b('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof e.id);var C=Oo(Ue,e,p,i|Lr);return C.elementType=ne,C.lanes=h,C.stateNode={effectDuration:0,passiveEffectDuration:0},C}function uL(e,i,h,p){var C=Oo(Oe,e,p,i);return C.elementType=Be,C.lanes=h,C}function dL(e,i,h,p){var C=Oo(Yt,e,p,i);return C.elementType=Ze,C.lanes=h,C}function LD(e,i,h,p){var C=Oo(bt,e,p,i);C.elementType=qt,C.lanes=h;var D={isHidden:!1};return C.stateNode=D,C}function j1(e,i,h){var p=Oo(pe,e,null,i);return p.lanes=h,p}function hL(){var e=Oo(ie,null,null,Sn);return e.elementType="DELETED",e}function fL(e){var i=Oo(pt,null,null,Sn);return i.stateNode=e,i}function k1(e,i,h){var p=e.children!==null?e.children:[],C=Oo(W,p,e.key,i);return C.lanes=h,C.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},C}function VD(e,i){return e===null&&(e=Oo(O,null,null,Sn)),e.tag=i.tag,e.key=i.key,e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.return=i.return,e.child=i.child,e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e.pendingProps=i.pendingProps,e.memoizedProps=i.memoizedProps,e.updateQueue=i.updateQueue,e.memoizedState=i.memoizedState,e.dependencies=i.dependencies,e.mode=i.mode,e.flags=i.flags,e.subtreeFlags=i.subtreeFlags,e.deletions=i.deletions,e.lanes=i.lanes,e.childLanes=i.childLanes,e.alternate=i.alternate,e.actualDuration=i.actualDuration,e.actualStartTime=i.actualStartTime,e.selfBaseDuration=i.selfBaseDuration,e.treeBaseDuration=i.treeBaseDuration,e._debugSource=i._debugSource,e._debugOwner=i._debugOwner,e._debugNeedsRemount=i._debugNeedsRemount,e._debugHookTypes=i._debugHookTypes,e}function mL(e,i,h,p,C){this.tag=i,this.containerInfo=e,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=h_,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Dr,this.eventTimes=sl(xt),this.expirationTimes=sl(vi),this.pendingLanes=xt,this.suspendedLanes=xt,this.pingedLanes=xt,this.expiredLanes=xt,this.mutableReadLanes=xt,this.finishedLanes=xt,this.entangledLanes=xt,this.entanglements=sl(xt),this.identifierPrefix=p,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var D=this.pendingUpdatersLaneMap=[],L=0;L<Zf;L++)D.push(new Set)}switch(i){case yb:this._debugRootType=h?"hydrateRoot()":"createRoot()";break;case Yd:this._debugRootType=h?"hydrate()":"render()";break}}function OD(e,i,h,p,C,D,L,$,Z,re){var ue=new mL(e,i,h,$,Z),Ie=lL(i,D);ue.current=Ie,Ie.stateNode=ue;{var Re={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null};Ie.memoizedState=Re}return q_(Ie),ue}var A1="18.3.1";function pL(e,i,h){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return fi(p),{$$typeof:ge,key:p==null?null:""+p,children:e,containerInfo:i,implementation:h}}var M1,R1;M1=!1,R1={};function zD(e){if(!e)return Vo;var i=Ir(e),h=X2(i);if(i.tag===A){var p=i.type;if(Hc(p))return hS(i,p,h)}return h}function gL(e,i){{var h=Ir(e);if(h===void 0){if(typeof e.render=="function")throw new Error("Unable to find node on an unmounted component.");var p=Object.keys(e).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+p)}var C=xn(h);if(C===null)return null;if(C.mode&ui){var D=Mn(h)||"Component";if(!R1[D]){R1[D]=!0;var L=gs;try{oi(C),h.mode&ui?b("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D):b("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",i,i,D)}finally{L?oi(L):ki()}}}return C.stateNode}}function BD(e,i,h,p,C,D,L,$){var Z=!1,re=null;return OD(e,i,Z,re,h,p,C,D,L)}function FD(e,i,h,p,C,D,L,$,Z,re){var ue=!0,Ie=OD(h,p,ue,e,C,D,L,$,Z);Ie.context=zD(null);var Re=Ie.current,Xe=Za(),et=oh(Re),ot=Gu(Xe,et);return ot.callback=i??null,Qd(Re,ot,et),CI(Ie,et,Xe),Ie}function wv(e,i,h,p){qi(i,e);var C=i.current,D=Za(),L=oh(C);w0(L);var $=zD(h);i.context===null?i.context=$:i.pendingContext=$,Sl&&gs!==null&&!M1&&(M1=!0,b(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,Mn(gs)||"Unknown"));var Z=Gu(D,L);Z.payload={element:e},p=p===void 0?null:p,p!==null&&(typeof p!="function"&&b("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",p),Z.callback=p);var re=Qd(C,Z,L);return re!==null&&(Bs(re,C,L,D),Mb(re,C,L)),L}function wx(e){var i=e.current;if(!i.child)return null;switch(i.child.tag){case ie:return i.child.stateNode;default:return i.child.stateNode}}function vL(e){switch(e.tag){case B:{var i=e.stateNode;if(qh(i)){var h=Fh(i);DI(i,h)}break}case Oe:{Yu(function(){var C=uo(e,Pn);if(C!==null){var D=Za();Bs(C,e,Pn,D)}});var p=Pn;I1(e,p);break}}}function UD(e,i){var h=e.memoizedState;h!==null&&h.dehydrated!==null&&(h.retryLane=C0(h.retryLane,i))}function I1(e,i){UD(e,i);var h=e.alternate;h&&UD(h,i)}function yL(e){if(e.tag===Oe){var i=zh,h=uo(e,i);if(h!==null){var p=Za();Bs(h,e,i,p)}I1(e,i)}}function bL(e){if(e.tag===Oe){var i=oh(e),h=uo(e,i);if(h!==null){var p=Za();Bs(h,e,i,p)}I1(e,i)}}function $D(e){var i=kr(e);return i===null?null:i.stateNode}var qD=function(e){return null};function xL(e){return qD(e)}var HD=function(e){return!1};function _L(e){return HD(e)}var GD=null,WD=null,ZD=null,KD=null,YD=null,XD=null,JD=null,QD=null,eT=null;{var tT=function(e,i,h){var p=i[h],C=rr(e)?e.slice():kn({},e);return h+1===i.length?(rr(C)?C.splice(p,1):delete C[p],C):(C[p]=tT(e[p],i,h+1),C)},nT=function(e,i){return tT(e,i,0)},rT=function(e,i,h,p){var C=i[p],D=rr(e)?e.slice():kn({},e);if(p+1===i.length){var L=h[p];D[L]=D[C],rr(D)?D.splice(C,1):delete D[C]}else D[C]=rT(e[C],i,h,p+1);return D},iT=function(e,i,h){if(i.length!==h.length){S("copyWithRename() expects paths of the same length");return}else for(var p=0;p<h.length-1;p++)if(i[p]!==h[p]){S("copyWithRename() expects paths to be the same except for the deepest key");return}return rT(e,i,h,0)},sT=function(e,i,h,p){if(h>=i.length)return p;var C=i[h],D=rr(e)?e.slice():kn({},e);return D[C]=sT(e[C],i,h+1,p),D},aT=function(e,i,h){return sT(e,i,0,h)},L1=function(e,i){for(var h=e.memoizedState;h!==null&&i>0;)h=h.next,i--;return h};GD=function(e,i,h,p){var C=L1(e,i);if(C!==null){var D=aT(C.memoizedState,h,p);C.memoizedState=D,C.baseState=D,e.memoizedProps=kn({},e.memoizedProps);var L=uo(e,Pn);L!==null&&Bs(L,e,Pn,vi)}},WD=function(e,i,h){var p=L1(e,i);if(p!==null){var C=nT(p.memoizedState,h);p.memoizedState=C,p.baseState=C,e.memoizedProps=kn({},e.memoizedProps);var D=uo(e,Pn);D!==null&&Bs(D,e,Pn,vi)}},ZD=function(e,i,h,p){var C=L1(e,i);if(C!==null){var D=iT(C.memoizedState,h,p);C.memoizedState=D,C.baseState=D,e.memoizedProps=kn({},e.memoizedProps);var L=uo(e,Pn);L!==null&&Bs(L,e,Pn,vi)}},KD=function(e,i,h){e.pendingProps=aT(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=uo(e,Pn);p!==null&&Bs(p,e,Pn,vi)},YD=function(e,i){e.pendingProps=nT(e.memoizedProps,i),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var h=uo(e,Pn);h!==null&&Bs(h,e,Pn,vi)},XD=function(e,i,h){e.pendingProps=iT(e.memoizedProps,i,h),e.alternate&&(e.alternate.pendingProps=e.pendingProps);var p=uo(e,Pn);p!==null&&Bs(p,e,Pn,vi)},JD=function(e){var i=uo(e,Pn);i!==null&&Bs(i,e,Pn,vi)},QD=function(e){qD=e},eT=function(e){HD=e}}function wL(e){var i=xn(e);return i===null?null:i.stateNode}function CL(e){return null}function NL(){return gs}function SL(e){var i=e.findFiberByHostInstance,h=a.ReactCurrentDispatcher;return Si({bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:GD,overrideHookStateDeletePath:WD,overrideHookStateRenamePath:ZD,overrideProps:KD,overridePropsDeletePath:YD,overridePropsRenamePath:XD,setErrorHandler:QD,setSuspenseHandler:eT,scheduleUpdate:JD,currentDispatcherRef:h,findHostInstanceByFiber:wL,findFiberByHostInstance:i||CL,findHostInstancesForRefresh:tL,scheduleRefresh:QI,scheduleRoot:eL,setRefreshHandler:JI,getCurrentFiber:NL,reconcilerVersion:A1})}var oT=typeof reportError=="function"?reportError:function(e){console.error(e)};function V1(e){this._internalRoot=e}Cx.prototype.render=V1.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?b("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):Nx(arguments[1])?b("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&b("You passed a second argument to root.render(...) but it only accepts one argument.");var h=i.containerInfo;if(h.nodeType!==wi){var p=$D(i.current);p&&p.parentNode!==h&&b("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}wv(e,i,null,null)},Cx.prototype.unmount=V1.prototype.unmount=function(){typeof arguments[0]=="function"&&b("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;bD()&&b("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Yu(function(){wv(null,e,null,null)}),oS(i)}};function EL(e,i){if(!Nx(e))throw new Error("createRoot(...): Target container is not a DOM element.");lT(e);var h=!1,p=!1,C="",D=oT;i!=null&&(i.hydrate?S("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof i=="object"&&i!==null&&i.$$typeof===xe&&b(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(C=i.identifierPrefix),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.transitionCallbacks!==void 0&&i.transitionCallbacks);var L=BD(e,yb,null,h,p,C,D);db(L.current,e);var $=e.nodeType===wi?e.parentNode:e;return dn($),new V1(L)}function Cx(e){this._internalRoot=e}function DL(e){e&&Vr(e)}Cx.prototype.unstable_scheduleHydration=DL;function TL(e,i,h){if(!Nx(e))throw new Error("hydrateRoot(...): Target container is not a DOM element.");lT(e),i===void 0&&b("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var p=h??null,C=h!=null&&h.hydratedSources||null,D=!1,L=!1,$="",Z=oT;h!=null&&(h.unstable_strictMode===!0&&(D=!0),h.identifierPrefix!==void 0&&($=h.identifierPrefix),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError));var re=FD(i,null,e,yb,p,D,L,$,Z);if(db(re.current,e),dn(e),C)for(var ue=0;ue<C.length;ue++){var Ie=C[ue];AM(re,Ie)}return new Cx(re)}function Nx(e){return!!(e&&(e.nodeType===cs||e.nodeType===ba||e.nodeType===du))}function Cv(e){return!!(e&&(e.nodeType===cs||e.nodeType===ba||e.nodeType===du||e.nodeType===wi&&e.nodeValue===" react-mount-point-unstable "))}function lT(e){e.nodeType===cs&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&b("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),zg(e)&&(e._reactRootContainer?b("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):b("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var PL=a.ReactCurrentOwner,cT;cT=function(e){if(e._reactRootContainer&&e.nodeType!==wi){var i=$D(e._reactRootContainer.current);i&&i.parentNode!==e&&b("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var h=!!e._reactRootContainer,p=O1(e),C=!!(p&&Zd(p));C&&!h&&b("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===cs&&e.tagName&&e.tagName.toUpperCase()==="BODY"&&b("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function O1(e){return e?e.nodeType===ba?e.documentElement:e.firstChild:null}function uT(){}function jL(e,i,h,p,C){if(C){if(typeof p=="function"){var D=p;p=function(){var Re=wx(L);D.call(Re)}}var L=FD(i,p,e,Yd,null,!1,!1,"",uT);e._reactRootContainer=L,db(L.current,e);var $=e.nodeType===wi?e.parentNode:e;return dn($),Yu(),L}else{for(var Z;Z=e.lastChild;)e.removeChild(Z);if(typeof p=="function"){var re=p;p=function(){var Re=wx(ue);re.call(Re)}}var ue=BD(e,Yd,null,!1,!1,"",uT);e._reactRootContainer=ue,db(ue.current,e);var Ie=e.nodeType===wi?e.parentNode:e;return dn(Ie),Yu(function(){wv(i,ue,h,p)}),ue}}function kL(e,i){e!==null&&typeof e!="function"&&b("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",i,e)}function Sx(e,i,h,p,C){cT(h),kL(C===void 0?null:C,"render");var D=h._reactRootContainer,L;if(!D)L=jL(h,i,e,C,p);else{if(L=D,typeof C=="function"){var $=C;C=function(){var Z=wx(L);$.call(Z)}}wv(i,L,e,C)}return wx(L)}var dT=!1;function AL(e){{dT||(dT=!0,b("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var i=PL.current;if(i!==null&&i.stateNode!==null){var h=i.stateNode._warnedAboutRefsInRender;h||b("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",or(i.type)||"A component"),i.stateNode._warnedAboutRefsInRender=!0}}return e==null?null:e.nodeType===cs?e:gL(e,"findDOMNode")}function ML(e,i,h){if(b("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(i))throw new Error("Target container is not a DOM element.");{var p=zg(i)&&i._reactRootContainer===void 0;p&&b("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return Sx(null,e,i,!0,h)}function RL(e,i,h){if(b("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(i))throw new Error("Target container is not a DOM element.");{var p=zg(i)&&i._reactRootContainer===void 0;p&&b("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return Sx(null,e,i,!1,h)}function IL(e,i,h,p){if(b("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Cv(h))throw new Error("Target container is not a DOM element.");if(e==null||!Ac(e))throw new Error("parentComponent must be a valid React Component");return Sx(e,i,h,!1,p)}var hT=!1;function LL(e){if(hT||(hT=!0,b("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!Cv(e))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var i=zg(e)&&e._reactRootContainer===void 0;i&&b("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(e._reactRootContainer){{var h=O1(e),p=h&&!Zd(h);p&&b("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Yu(function(){Sx(null,null,e,!1,function(){e._reactRootContainer=null,oS(e)})}),!0}else{{var C=O1(e),D=!!(C&&Zd(C)),L=e.nodeType===cs&&Cv(e.parentNode)&&!!e.parentNode._reactRootContainer;D&&b("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",L?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}T0(vL),j0(yL),Sy(bL),Ey(Ua),Dy(E0),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&b("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Rh(Io),ti(p1,TI,Yu);function VL(e,i){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Nx(i))throw new Error("Target container is not a DOM element.");return pL(e,i,null,h)}function OL(e,i,h,p){return IL(e,i,h,p)}var z1={usingClientEntryPoint:!1,Events:[Zd,Tm,hb,Ts,Ec,p1]};function zL(e,i){return z1.usingClientEntryPoint||b('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),EL(e,i)}function BL(e,i,h){return z1.usingClientEntryPoint||b('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),TL(e,i,h)}function FL(e){return bD()&&b("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Yu(e)}var UL=SL({findFiberByHostInstance:nf,bundleType:1,version:A1,rendererPackageName:"react-dom"});if(!UL&&vr&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var fT=window.location.protocol;/^(https?|file):$/.test(fT)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(fT==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}Bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z1,Bo.createPortal=VL,Bo.createRoot=zL,Bo.findDOMNode=AL,Bo.flushSync=FL,Bo.hydrate=ML,Bo.hydrateRoot=BL,Bo.render=RL,Bo.unmountComponentAtNode=LL,Bo.unstable_batchedUpdates=p1,Bo.unstable_renderSubtreeIntoContainer=OL,Bo.version=A1,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();hj.exports=Bo;var JL=hj.exports,B1=JL;{var Ex=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;vC.createRoot=function(o,t){Ex.usingClientEntryPoint=!0;try{return B1.createRoot(o,t)}finally{Ex.usingClientEntryPoint=!1}},vC.hydrateRoot=function(o,t,a){Ex.usingClientEntryPoint=!0;try{return B1.hydrateRoot(o,t,a)}finally{Ex.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zv(){return zv=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},zv.apply(this,arguments)}var mh;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(mh||(mh={}));const mT="popstate";function QL(o){o===void 0&&(o={});function t(c,g){let{pathname:S,search:b,hash:u}=c.location;return yC("",{pathname:S,search:b,hash:u},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function a(c,g){return typeof g=="string"?g:Bv(g)}return tV(t,a,null,o)}function Ji(o,t){if(o===!1||o===null||typeof o>"u")throw new Error(t)}function ru(o,t){if(!o){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function eV(){return Math.random().toString(36).substr(2,8)}function pT(o,t){return{usr:o.state,key:o.key,idx:t}}function yC(o,t,a,c){return a===void 0&&(a=null),zv({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof t=="string"?bp(t):t,{state:a,key:t&&t.key||c||eV()})}function Bv(o){let{pathname:t="/",search:a="",hash:c=""}=o;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),c&&c!=="#"&&(t+=c.charAt(0)==="#"?c:"#"+c),t}function bp(o){let t={};if(o){let a=o.indexOf("#");a>=0&&(t.hash=o.substr(a),o=o.substr(0,a));let c=o.indexOf("?");c>=0&&(t.search=o.substr(c),o=o.substr(0,c)),o&&(t.pathname=o)}return t}function tV(o,t,a,c){c===void 0&&(c={});let{window:g=document.defaultView,v5Compat:S=!1}=c,b=g.history,u=mh.Pop,k=null,A=O();A==null&&(A=0,b.replaceState(zv({},b.state,{idx:A}),""));function O(){return(b.state||{idx:null}).idx}function B(){u=mh.Pop;let Pe=O(),Se=Pe==null?null:Pe-A;A=Pe,k&&k({action:u,location:Ve.location,delta:Se})}function W(Pe,Se){u=mh.Push;let Ce=yC(Ve.location,Pe,Se);A=O()+1;let _e=pT(Ce,A),Ue=Ve.createHref(Ce);try{b.pushState(_e,"",Ue)}catch(Oe){if(Oe instanceof DOMException&&Oe.name==="DataCloneError")throw Oe;g.location.assign(Ue)}S&&k&&k({action:u,location:Ve.location,delta:1})}function ie(Pe,Se){u=mh.Replace;let Ce=yC(Ve.location,Pe,Se);A=O();let _e=pT(Ce,A),Ue=Ve.createHref(Ce);b.replaceState(_e,"",Ue),S&&k&&k({action:u,location:Ve.location,delta:0})}function pe(Pe){let Se=g.location.origin!=="null"?g.location.origin:g.location.href,Ce=typeof Pe=="string"?Pe:Bv(Pe);return Ce=Ce.replace(/ $/,"%20"),Ji(Se,"No window.location.(origin|href) available to create URL for href: "+Ce),new URL(Ce,Se)}let Ve={get action(){return u},get location(){return o(g,b)},listen(Pe){if(k)throw new Error("A history only accepts one active listener");return g.addEventListener(mT,B),k=Pe,()=>{g.removeEventListener(mT,B),k=null}},createHref(Pe){return t(g,Pe)},createURL:pe,encodeLocation(Pe){let Se=pe(Pe);return{pathname:Se.pathname,search:Se.search,hash:Se.hash}},push:W,replace:ie,go(Pe){return b.go(Pe)}};return Ve}var gT;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(gT||(gT={}));function nV(o,t,a){return a===void 0&&(a="/"),rV(o,t,a)}function rV(o,t,a,c){let g=typeof t=="string"?bp(t):t,S=gh(g.pathname||"/",a);if(S==null)return null;let b=pj(o);iV(b);let u=null;for(let k=0;u==null&&k<b.length;++k){let A=pV(S);u=fV(b[k],A)}return u}function pj(o,t,a,c){t===void 0&&(t=[]),a===void 0&&(a=[]),c===void 0&&(c="");let g=(S,b,u)=>{let k={relativePath:u===void 0?S.path||"":u,caseSensitive:S.caseSensitive===!0,childrenIndex:b,route:S};k.relativePath.startsWith("/")&&(Ji(k.relativePath.startsWith(c),'Absolute route path "'+k.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),k.relativePath=k.relativePath.slice(c.length));let A=td([c,k.relativePath]),O=a.concat(k);S.children&&S.children.length>0&&(Ji(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),pj(S.children,t,O,A)),!(S.path==null&&!S.index)&&t.push({path:A,score:dV(A,S.index),routesMeta:O})};return o.forEach((S,b)=>{var u;if(S.path===""||!((u=S.path)!=null&&u.includes("?")))g(S,b);else for(let k of gj(S.path))g(S,b,k)}),t}function gj(o){let t=o.split("/");if(t.length===0)return[];let[a,...c]=t,g=a.endsWith("?"),S=a.replace(/\?$/,"");if(c.length===0)return g?[S,""]:[S];let b=gj(c.join("/")),u=[];return u.push(...b.map(k=>k===""?S:[S,k].join("/"))),g&&u.push(...b),u.map(k=>o.startsWith("/")&&k===""?"/":k)}function iV(o){o.sort((t,a)=>t.score!==a.score?a.score-t.score:hV(t.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}const sV=/^:[\w-]+$/,aV=3,oV=2,lV=1,cV=10,uV=-2,vT=o=>o==="*";function dV(o,t){let a=o.split("/"),c=a.length;return a.some(vT)&&(c+=uV),t&&(c+=oV),a.filter(g=>!vT(g)).reduce((g,S)=>g+(sV.test(S)?aV:S===""?lV:cV),c)}function hV(o,t){return o.length===t.length&&o.slice(0,-1).every((c,g)=>c===t[g])?o[o.length-1]-t[t.length-1]:0}function fV(o,t,a){let{routesMeta:c}=o,g={},S="/",b=[];for(let u=0;u<c.length;++u){let k=c[u],A=u===c.length-1,O=S==="/"?t:t.slice(S.length)||"/",B=bC({path:k.relativePath,caseSensitive:k.caseSensitive,end:A},O),W=k.route;if(!B)return null;Object.assign(g,B.params),b.push({params:g,pathname:td([S,B.pathname]),pathnameBase:bV(td([S,B.pathnameBase])),route:W}),B.pathnameBase!=="/"&&(S=td([S,B.pathnameBase]))}return b}function bC(o,t){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[a,c]=mV(o.path,o.caseSensitive,o.end),g=t.match(a);if(!g)return null;let S=g[0],b=S.replace(/(.)\/+$/,"$1"),u=g.slice(1);return{params:c.reduce((A,O,B)=>{let{paramName:W,isOptional:ie}=O;if(W==="*"){let Ve=u[B]||"";b=S.slice(0,S.length-Ve.length).replace(/(.)\/+$/,"$1")}const pe=u[B];return ie&&!pe?A[W]=void 0:A[W]=(pe||"").replace(/%2F/g,"/"),A},{}),pathname:S,pathnameBase:b,pattern:o}}function mV(o,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),ru(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let c=[],g="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,u,k)=>(c.push({paramName:u,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(c.push({paramName:"*"}),g+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?g+="\\/*$":o!==""&&o!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,t?void 0:"i"),c]}function pV(o){try{return o.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ru(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),o}}function gh(o,t){if(t==="/")return o;if(!o.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,c=o.charAt(a);return c&&c!=="/"?null:o.slice(a)||"/"}function gV(o,t){t===void 0&&(t="/");let{pathname:a,search:c="",hash:g=""}=typeof o=="string"?bp(o):o;return{pathname:a?a.startsWith("/")?a:vV(a,t):t,search:xV(c),hash:_V(g)}}function vV(o,t){let a=t.replace(/\/+$/,"").split("/");return o.split("/").forEach(g=>{g===".."?a.length>1&&a.pop():g!=="."&&a.push(g)}),a.length>1?a.join("/"):"/"}function F1(o,t,a,c){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yV(o){return o.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function vj(o,t){let a=yV(o);return t?a.map((c,g)=>g===a.length-1?c.pathname:c.pathnameBase):a.map(c=>c.pathnameBase)}function yj(o,t,a,c){c===void 0&&(c=!1);let g;typeof o=="string"?g=bp(o):(g=zv({},o),Ji(!g.pathname||!g.pathname.includes("?"),F1("?","pathname","search",g)),Ji(!g.pathname||!g.pathname.includes("#"),F1("#","pathname","hash",g)),Ji(!g.search||!g.search.includes("#"),F1("#","search","hash",g)));let S=o===""||g.pathname==="",b=S?"/":g.pathname,u;if(b==null)u=a;else{let B=t.length-1;if(!c&&b.startsWith("..")){let W=b.split("/");for(;W[0]==="..";)W.shift(),B-=1;g.pathname=W.join("/")}u=B>=0?t[B]:"/"}let k=gV(g,u),A=b&&b!=="/"&&b.endsWith("/"),O=(S||b===".")&&a.endsWith("/");return!k.pathname.endsWith("/")&&(A||O)&&(k.pathname+="/"),k}const td=o=>o.join("/").replace(/\/\/+/g,"/"),bV=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),xV=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,_V=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function wV(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const bj=["post","put","patch","delete"];new Set(bj);const CV=["get",...bj];new Set(CV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fv(){return Fv=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},Fv.apply(this,arguments)}const Xv=de.createContext(null);Xv.displayName="DataRouter";const oN=de.createContext(null);oN.displayName="DataRouterState";const NV=de.createContext(null);NV.displayName="Await";const pc=de.createContext(null);pc.displayName="Navigation";const Jv=de.createContext(null);Jv.displayName="Location";const ad=de.createContext({outlet:null,matches:[],isDataRoute:!1});ad.displayName="Route";const lN=de.createContext(null);lN.displayName="RouteError";function SV(o,t){let{relative:a}=t===void 0?{}:t;Qv()||Ji(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:g}=de.useContext(pc),{hash:S,pathname:b,search:u}=ty(o,{relative:a}),k=b;return c!=="/"&&(k=b==="/"?c:td([c,b])),g.createHref({pathname:k,search:u,hash:S})}function Qv(){return de.useContext(Jv)!=null}function jf(){return Qv()||Ji(!1,"useLocation() may be used only in the context of a <Router> component."),de.useContext(Jv).location}const xj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _j(o){de.useContext(pc).static||de.useLayoutEffect(o)}function ey(){let{isDataRoute:o}=de.useContext(ad);return o?zV():EV()}function EV(){Qv()||Ji(!1,"useNavigate() may be used only in the context of a <Router> component.");let o=de.useContext(Xv),{basename:t,future:a,navigator:c}=de.useContext(pc),{matches:g}=de.useContext(ad),{pathname:S}=jf(),b=JSON.stringify(vj(g,a.v7_relativeSplatPath)),u=de.useRef(!1);return _j(()=>{u.current=!0}),de.useCallback(function(A,O){if(O===void 0&&(O={}),ru(u.current,xj),!u.current)return;if(typeof A=="number"){c.go(A);return}let B=yj(A,JSON.parse(b),S,O.relative==="path");o==null&&t!=="/"&&(B.pathname=B.pathname==="/"?t:td([t,B.pathname])),(O.replace?c.replace:c.push)(B,O.state,O)},[t,c,b,S,o])}function ty(o,t){let{relative:a}=t===void 0?{}:t,{future:c}=de.useContext(pc),{matches:g}=de.useContext(ad),{pathname:S}=jf(),b=JSON.stringify(vj(g,c.v7_relativeSplatPath));return de.useMemo(()=>yj(o,JSON.parse(b),S,a==="path"),[o,b,S,a])}function DV(o,t){return TV(o,t)}function TV(o,t,a,c){Qv()||Ji(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=de.useContext(pc),{matches:S}=de.useContext(ad),b=S[S.length-1],u=b?b.params:{},k=b?b.pathname:"/",A=b?b.pathnameBase:"/",O=b&&b.route;{let Ce=O&&O.path||"";Cj(k,!O||Ce.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+k+'" (under <Route path="'+Ce+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+Ce+'"> to <Route ')+('path="'+(Ce==="/"?"*":Ce+"/*")+'">.'))}let B=jf(),W;if(t){var ie;let Ce=typeof t=="string"?bp(t):t;A==="/"||(ie=Ce.pathname)!=null&&ie.startsWith(A)||Ji(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+A+'" ')+('but pathname "'+Ce.pathname+'" was given in the `location` prop.')),W=Ce}else W=B;let pe=W.pathname||"/",Ve=pe;if(A!=="/"){let Ce=A.replace(/^\//,"").split("/");Ve="/"+pe.replace(/^\//,"").split("/").slice(Ce.length).join("/")}let Pe=nV(o,{pathname:Ve});ru(O||Pe!=null,'No routes matched location "'+W.pathname+W.search+W.hash+'" '),ru(Pe==null||Pe[Pe.length-1].route.element!==void 0||Pe[Pe.length-1].route.Component!==void 0||Pe[Pe.length-1].route.lazy!==void 0,'Matched leaf route at location "'+W.pathname+W.search+W.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let Se=MV(Pe&&Pe.map(Ce=>Object.assign({},Ce,{params:Object.assign({},u,Ce.params),pathname:td([A,g.encodeLocation?g.encodeLocation(Ce.pathname).pathname:Ce.pathname]),pathnameBase:Ce.pathnameBase==="/"?A:td([A,g.encodeLocation?g.encodeLocation(Ce.pathnameBase).pathname:Ce.pathnameBase])})),S,a,c);return t&&Se?de.createElement(Jv.Provider,{value:{location:Fv({pathname:"/",search:"",hash:"",state:null,key:"default"},W),navigationType:mh.Pop}},Se):Se}function PV(){let o=OV(),t=wV(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),a=o instanceof Error?o.stack:null,c="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:c},S={padding:"2px 4px",backgroundColor:c},b=null;return console.error("Error handled by React Router default ErrorBoundary:",o),b=de.createElement(de.Fragment,null,de.createElement("p",null,"💿 Hey developer 👋"),de.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",de.createElement("code",{style:S},"ErrorBoundary")," or"," ",de.createElement("code",{style:S},"errorElement")," prop on your route.")),de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},t),a?de.createElement("pre",{style:g},a):null,b)}const jV=de.createElement(PV,null);class kV extends de.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?de.createElement(ad.Provider,{value:this.props.routeContext},de.createElement(lN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AV(o){let{routeContext:t,match:a,children:c}=o,g=de.useContext(Xv);return g&&g.static&&g.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=a.route.id),de.createElement(ad.Provider,{value:t},c)}function MV(o,t,a,c){var g;if(t===void 0&&(t=[]),a===void 0&&(a=null),c===void 0&&(c=null),o==null){var S;if(!a)return null;if(a.errors)o=a.matches;else if((S=c)!=null&&S.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)o=a.matches;else return null}let b=o,u=(g=a)==null?void 0:g.errors;if(u!=null){let O=b.findIndex(B=>B.route.id&&(u==null?void 0:u[B.route.id])!==void 0);O>=0||Ji(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(u).join(",")),b=b.slice(0,Math.min(b.length,O+1))}let k=!1,A=-1;if(a&&c&&c.v7_partialHydration)for(let O=0;O<b.length;O++){let B=b[O];if((B.route.HydrateFallback||B.route.hydrateFallbackElement)&&(A=O),B.route.id){let{loaderData:W,errors:ie}=a,pe=B.route.loader&&W[B.route.id]===void 0&&(!ie||ie[B.route.id]===void 0);if(B.route.lazy||pe){k=!0,A>=0?b=b.slice(0,A+1):b=[b[0]];break}}}return b.reduceRight((O,B,W)=>{let ie,pe=!1,Ve=null,Pe=null;a&&(ie=u&&B.route.id?u[B.route.id]:void 0,Ve=B.route.errorElement||jV,k&&(A<0&&W===0?(Cj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),pe=!0,Pe=null):A===W&&(pe=!0,Pe=B.route.hydrateFallbackElement||null)));let Se=t.concat(b.slice(0,W+1)),Ce=()=>{let _e;return ie?_e=Ve:pe?_e=Pe:B.route.Component?_e=de.createElement(B.route.Component,null):B.route.element?_e=B.route.element:_e=O,de.createElement(AV,{match:B,routeContext:{outlet:O,matches:Se,isDataRoute:a!=null},children:_e})};return a&&(B.route.ErrorBoundary||B.route.errorElement||W===0)?de.createElement(kV,{location:a.location,revalidation:a.revalidation,component:Ve,error:ie,children:Ce(),routeContext:{outlet:null,matches:Se,isDataRoute:!0}}):Ce()},null)}var wj=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(wj||{}),Uv=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(Uv||{});function cN(o){return o+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function RV(o){let t=de.useContext(Xv);return t||Ji(!1,cN(o)),t}function IV(o){let t=de.useContext(oN);return t||Ji(!1,cN(o)),t}function LV(o){let t=de.useContext(ad);return t||Ji(!1,cN(o)),t}function uN(o){let t=LV(o),a=t.matches[t.matches.length-1];return a.route.id||Ji(!1,o+' can only be used on routes that contain a unique "id"'),a.route.id}function VV(){return uN(Uv.UseRouteId)}function OV(){var o;let t=de.useContext(lN),a=IV(Uv.UseRouteError),c=uN(Uv.UseRouteError);return t!==void 0?t:(o=a.errors)==null?void 0:o[c]}function zV(){let{router:o}=RV(wj.UseNavigateStable),t=uN(Uv.UseNavigateStable),a=de.useRef(!1);return _j(()=>{a.current=!0}),de.useCallback(function(g,S){S===void 0&&(S={}),ru(a.current,xj),a.current&&(typeof g=="number"?o.navigate(g):o.navigate(g,Fv({fromRouteId:t},S)))},[o,t])}const yT={};function Cj(o,t,a){!t&&!yT[o]&&(yT[o]=!0,ru(!1,a))}const bT={};function BV(o,t){bT[t]||(bT[t]=!0,console.warn(t))}const xT=(o,t,a)=>BV(o,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+o+"` future flag to opt-in early. ")+("For more information, see "+a+"."));function FV(o,t){(o==null?void 0:o.v7_startTransition)===void 0&&xT("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(o==null?void 0:o.v7_relativeSplatPath)===void 0&&xT("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function vl(o){Ji(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UV(o){let{basename:t="/",children:a=null,location:c,navigationType:g=mh.Pop,navigator:S,static:b=!1,future:u}=o;Qv()&&Ji(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let k=t.replace(/^\/*/,"/"),A=de.useMemo(()=>({basename:k,navigator:S,static:b,future:Fv({v7_relativeSplatPath:!1},u)}),[k,u,S,b]);typeof c=="string"&&(c=bp(c));let{pathname:O="/",search:B="",hash:W="",state:ie=null,key:pe="default"}=c,Ve=de.useMemo(()=>{let Pe=gh(O,k);return Pe==null?null:{location:{pathname:Pe,search:B,hash:W,state:ie,key:pe},navigationType:g}},[k,O,B,W,ie,pe,g]);return ru(Ve!=null,'<Router basename="'+k+'"> is not able to match the URL '+('"'+O+B+W+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),Ve==null?null:de.createElement(pc.Provider,{value:A},de.createElement(Jv.Provider,{children:a,value:Ve}))}function $V(o){let{children:t,location:a}=o;return DV(xC(t),a)}new Promise(()=>{});function xC(o,t){t===void 0&&(t=[]);let a=[];return de.Children.forEach(o,(c,g)=>{if(!de.isValidElement(c))return;let S=[...t,g];if(c.type===de.Fragment){a.push.apply(a,xC(c.props.children,S));return}c.type!==vl&&Ji(!1,"["+(typeof c.type=="string"?c.type:c.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!c.props.index||!c.props.children||Ji(!1,"An index route cannot have child routes.");let b={id:c.props.id||S.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(b.children=xC(c.props.children,S)),a.push(b)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},pp.apply(this,arguments)}function dN(o,t){if(o==null)return{};var a={},c=Object.keys(o),g,S;for(S=0;S<c.length;S++)g=c[S],!(t.indexOf(g)>=0)&&(a[g]=o[g]);return a}const Bx="get",Fx="application/x-www-form-urlencoded";function o0(o){return o!=null&&typeof o.tagName=="string"}function qV(o){return o0(o)&&o.tagName.toLowerCase()==="button"}function HV(o){return o0(o)&&o.tagName.toLowerCase()==="form"}function GV(o){return o0(o)&&o.tagName.toLowerCase()==="input"}function WV(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function ZV(o,t){return o.button===0&&(!t||t==="_self")&&!WV(o)}let Dx=null;function KV(){if(Dx===null)try{new FormData(document.createElement("form"),0),Dx=!1}catch{Dx=!0}return Dx}const YV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function U1(o){return o!=null&&!YV.has(o)?(ru(!1,'"'+o+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+Fx+'"')),null):o}function XV(o,t){let a,c,g,S,b;if(HV(o)){let u=o.getAttribute("action");c=u?gh(u,t):null,a=o.getAttribute("method")||Bx,g=U1(o.getAttribute("enctype"))||Fx,S=new FormData(o)}else if(qV(o)||GV(o)&&(o.type==="submit"||o.type==="image")){let u=o.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let k=o.getAttribute("formaction")||u.getAttribute("action");if(c=k?gh(k,t):null,a=o.getAttribute("formmethod")||u.getAttribute("method")||Bx,g=U1(o.getAttribute("formenctype"))||U1(u.getAttribute("enctype"))||Fx,S=new FormData(u,o),!KV()){let{name:A,type:O,value:B}=o;if(O==="image"){let W=A?A+".":"";S.append(W+"x","0"),S.append(W+"y","0")}else A&&S.append(A,B)}}else{if(o0(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Bx,c=null,g=Fx,b=o}return S&&g==="text/plain"&&(b=S,S=void 0),{action:c,method:a.toLowerCase(),encType:g,formData:S,body:b}}const JV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],e3=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],t3="6";try{window.__reactRouterVersion=t3}catch{}const Nj=de.createContext({isTransitioning:!1});Nj.displayName="ViewTransition";const n3=de.createContext(new Map);n3.displayName="Fetchers";const r3="startTransition",_T=YL[r3];function i3(o){let{basename:t,children:a,future:c,window:g}=o,S=de.useRef();S.current==null&&(S.current=QL({window:g,v5Compat:!0}));let b=S.current,[u,k]=de.useState({action:b.action,location:b.location}),{v7_startTransition:A}=c||{},O=de.useCallback(B=>{A&&_T?_T(()=>k(B)):k(B)},[k,A]);return de.useLayoutEffect(()=>b.listen(O),[b,O]),de.useEffect(()=>FV(c),[c]),de.createElement(UV,{basename:t,children:a,location:u.location,navigationType:u.action,navigator:b,future:c})}const s3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nf=de.forwardRef(function(t,a){let{onClick:c,relative:g,reloadDocument:S,replace:b,state:u,target:k,to:A,preventScrollReset:O,viewTransition:B}=t,W=dN(t,JV),{basename:ie}=de.useContext(pc),pe,Ve=!1;if(typeof A=="string"&&a3.test(A)&&(pe=A,s3))try{let _e=new URL(window.location.href),Ue=A.startsWith("//")?new URL(_e.protocol+A):new URL(A),Oe=gh(Ue.pathname,ie);Ue.origin===_e.origin&&Oe!=null?A=Oe+Ue.search+Ue.hash:Ve=!0}catch{ru(!1,'<Link to="'+A+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let Pe=SV(A,{relative:g}),Se=u3(A,{replace:b,state:u,target:k,preventScrollReset:O,relative:g,viewTransition:B});function Ce(_e){c&&c(_e),_e.defaultPrevented||Se(_e)}return de.createElement("a",pp({},W,{href:pe||Pe,onClick:Ve||S?c:Ce,ref:a,target:k}))});Nf.displayName="Link";const o3=de.forwardRef(function(t,a){let{"aria-current":c="page",caseSensitive:g=!1,className:S="",end:b=!1,style:u,to:k,viewTransition:A,children:O}=t,B=dN(t,QV),W=ty(k,{relative:B.relative}),ie=jf(),pe=de.useContext(oN),{navigator:Ve,basename:Pe}=de.useContext(pc),Se=pe!=null&&g3(W)&&A===!0,Ce=Ve.encodeLocation?Ve.encodeLocation(W).pathname:W.pathname,_e=ie.pathname,Ue=pe&&pe.navigation&&pe.navigation.location?pe.navigation.location.pathname:null;g||(_e=_e.toLowerCase(),Ue=Ue?Ue.toLowerCase():null,Ce=Ce.toLowerCase()),Ue&&Pe&&(Ue=gh(Ue,Pe)||Ue);const Oe=Ce!=="/"&&Ce.endsWith("/")?Ce.length-1:Ce.length;let Je=_e===Ce||!b&&_e.startsWith(Ce)&&_e.charAt(Oe)==="/",tt=Ue!=null&&(Ue===Ce||!b&&Ue.startsWith(Ce)&&Ue.charAt(Ce.length)==="/"),ut={isActive:Je,isPending:tt,isTransitioning:Se},Tt=Je?c:void 0,pt;typeof S=="function"?pt=S(ut):pt=[S,Je?"active":null,tt?"pending":null,Se?"transitioning":null].filter(Boolean).join(" ");let Yt=typeof u=="function"?u(ut):u;return de.createElement(Nf,pp({},B,{"aria-current":Tt,className:pt,ref:a,style:Yt,to:k,viewTransition:A}),typeof O=="function"?O(ut):O)});o3.displayName="NavLink";const l3=de.forwardRef((o,t)=>{let{fetcherKey:a,navigate:c,reloadDocument:g,replace:S,state:b,method:u=Bx,action:k,onSubmit:A,relative:O,preventScrollReset:B,viewTransition:W}=o,ie=dN(o,e3),pe=m3(),Ve=p3(k,{relative:O}),Pe=u.toLowerCase()==="get"?"get":"post",Se=Ce=>{if(A&&A(Ce),Ce.defaultPrevented)return;Ce.preventDefault();let _e=Ce.nativeEvent.submitter,Ue=(_e==null?void 0:_e.getAttribute("formmethod"))||u;pe(_e||Ce.currentTarget,{fetcherKey:a,method:Ue,navigate:c,replace:S,state:b,relative:O,preventScrollReset:B,viewTransition:W})};return de.createElement("form",pp({ref:t,method:Pe,action:Ve,onSubmit:g?A:Se},ie))});l3.displayName="Form";var Qx;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Qx||(Qx={}));var wT;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(wT||(wT={}));function c3(o){return o+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function Sj(o){let t=de.useContext(Xv);return t||Ji(!1,c3(o)),t}function u3(o,t){let{target:a,replace:c,state:g,preventScrollReset:S,relative:b,viewTransition:u}=t===void 0?{}:t,k=ey(),A=jf(),O=ty(o,{relative:b});return de.useCallback(B=>{if(ZV(B,a)){B.preventDefault();let W=c!==void 0?c:Bv(A)===Bv(O);k(o,{replace:W,state:g,preventScrollReset:S,relative:b,viewTransition:u})}},[A,k,O,c,g,a,o,S,b,u])}function d3(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let h3=0,f3=()=>"__"+String(++h3)+"__";function m3(){let{router:o}=Sj(Qx.UseSubmit),{basename:t}=de.useContext(pc),a=VV();return de.useCallback(function(c,g){g===void 0&&(g={}),d3();let{action:S,method:b,encType:u,formData:k,body:A}=XV(c,t);if(g.navigate===!1){let O=g.fetcherKey||f3();o.fetch(O,a,g.action||S,{preventScrollReset:g.preventScrollReset,formData:k,body:A,formMethod:g.method||b,formEncType:g.encType||u,flushSync:g.flushSync})}else o.navigate(g.action||S,{preventScrollReset:g.preventScrollReset,formData:k,body:A,formMethod:g.method||b,formEncType:g.encType||u,replace:g.replace,state:g.state,fromRouteId:a,flushSync:g.flushSync,viewTransition:g.viewTransition})},[o,t,a])}function p3(o,t){let{relative:a}=t===void 0?{}:t,{basename:c}=de.useContext(pc),g=de.useContext(ad);g||Ji(!1,"useFormAction must be used inside a RouteContext");let[S]=g.matches.slice(-1),b=pp({},ty(o||".",{relative:a})),u=jf();if(o==null){b.search=u.search;let k=new URLSearchParams(b.search),A=k.getAll("index");if(A.some(B=>B==="")){k.delete("index"),A.filter(W=>W).forEach(W=>k.append("index",W));let B=k.toString();b.search=B?"?"+B:""}}return(!o||o===".")&&S.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(b.pathname=b.pathname==="/"?c:td([c,b.pathname])),Bv(b)}function g3(o,t){t===void 0&&(t={});let a=de.useContext(Nj);a==null&&Ji(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Sj(Qx.useViewTransitionState),g=ty(o,{relative:t.relative});if(!a.isTransitioning)return!1;let S=gh(a.currentLocation.pathname,c)||a.currentLocation.pathname,b=gh(a.nextLocation.pathname,c)||a.nextLocation.pathname;return bC(g.pathname,b)!=null||bC(g.pathname,S)!=null}const v3="modulepreload",y3=function(o){return"/"+o},CT={},ny=function(t,a,c){let g=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),u=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));g=Promise.allSettled(a.map(k=>{if(k=y3(k),k in CT)return;CT[k]=!0;const A=k.endsWith(".css"),O=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${O}`))return;const B=document.createElement("link");if(B.rel=A?"stylesheet":v3,A||(B.as="script"),B.crossOrigin="",B.href=k,u&&B.setAttribute("nonce",u),document.head.appendChild(B),A)return new Promise((W,ie)=>{B.addEventListener("load",W),B.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${k}`)))})}))}function S(b){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=b,window.dispatchEvent(u),!u.defaultPrevented)throw b}return g.then(b=>{for(const u of b||[])u.status==="rejected"&&S(u.reason);return t().catch(S)})},b3=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ny(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)};class hN extends Error{constructor(t,a="FunctionsError",c){super(t),this.name=a,this.context=c}}class x3 extends hN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class NT extends hN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ST extends hN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _C;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(_C||(_C={}));var _3=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};class w3{constructor(t,{headers:a={},customFetch:c,region:g=_C.Any}={}){this.url=t,this.headers=a,this.region=g,this.fetch=b3(c)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var c;return _3(this,void 0,void 0,function*(){try{const{headers:g,method:S,body:b}=a;let u={},{region:k}=a;k||(k=this.region);const A=new URL(`${this.url}/${t}`);k&&k!=="any"&&(u["x-region"]=k,A.searchParams.set("forceFunctionRegion",k));let O;b&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)&&(typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",O=b):typeof b=="string"?(u["Content-Type"]="text/plain",O=b):typeof FormData<"u"&&b instanceof FormData?O=b:(u["Content-Type"]="application/json",O=JSON.stringify(b)));const B=yield this.fetch(A.toString(),{method:S||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),g),body:O}).catch(Ve=>{throw new x3(Ve)}),W=B.headers.get("x-relay-error");if(W&&W==="true")throw new NT(B);if(!B.ok)throw new ST(B);let ie=((c=B.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),pe;return ie==="application/json"?pe=yield B.json():ie==="application/octet-stream"?pe=yield B.blob():ie==="text/event-stream"?pe=B:ie==="multipart/form-data"?pe=yield B.formData():pe=yield B.text(),{data:pe,error:null,response:B}}catch(g){return{data:null,error:g,response:g instanceof ST||g instanceof NT?g.context:void 0}}})}}var go={},fN={},l0={},ry={},c0={},u0={},C3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gp=C3();const N3=gp.fetch,Ej=gp.fetch.bind(gp),Dj=gp.Headers,S3=gp.Request,E3=gp.Response,xp=Object.freeze(Object.defineProperty({__proto__:null,Headers:Dj,Request:S3,Response:E3,default:Ej,fetch:N3},Symbol.toStringTag,{value:"Module"})),D3=ZL(xp);var d0={};Object.defineProperty(d0,"__esModule",{value:!0});let T3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};d0.default=T3;var Tj=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(u0,"__esModule",{value:!0});const P3=Tj(D3),j3=Tj(d0);let k3=class{constructor(t){var a,c;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(a=t.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=t.signal,this.isMaybeSingle=(c=t.isMaybeSingle)!==null&&c!==void 0?c:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=P3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=new Headers(this.headers),this.headers.set(t,a),this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let g=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async S=>{var b,u,k,A;let O=null,B=null,W=null,ie=S.status,pe=S.statusText;if(S.ok){if(this.method!=="HEAD"){const Ce=await S.text();Ce===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?B=Ce:B=JSON.parse(Ce))}const Pe=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),Se=(k=S.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");Pe&&Se&&Se.length>1&&(W=parseInt(Se[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(O={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,W=null,ie=406,pe="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const Pe=await S.text();try{O=JSON.parse(Pe),Array.isArray(O)&&S.status===404&&(B=[],O=null,ie=200,pe="OK")}catch{S.status===404&&Pe===""?(ie=204,pe="No Content"):O={message:Pe}}if(O&&this.isMaybeSingle&&(!((A=O==null?void 0:O.details)===null||A===void 0)&&A.includes("0 rows"))&&(O=null,ie=200,pe="OK"),O&&this.shouldThrowOnError)throw new j3.default(O)}return{error:O,data:B,count:W,status:ie,statusText:pe}});return this.shouldThrowOnError||(g=g.catch(S=>{var b,u,k;return{error:{message:`${(b=S==null?void 0:S.name)!==null&&b!==void 0?b:"FetchError"}: ${S==null?void 0:S.message}`,details:`${(u=S==null?void 0:S.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(k=S==null?void 0:S.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),g.then(t,a)}returns(){return this}overrideTypes(){return this}};u0.default=k3;var A3=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(c0,"__esModule",{value:!0});const M3=A3(u0);let R3=class extends M3.default{select(t){let a=!1;const c=(t??"*").split("").map(g=>/\s/.test(g)&&!a?"":(g==='"'&&(a=!a),g)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:a=!0,nullsFirst:c,foreignTable:g,referencedTable:S=g}={}){const b=S?`${S}.order`:"order",u=this.url.searchParams.get(b);return this.url.searchParams.set(b,`${u?`${u},`:""}${t}.${a?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:c=a}={}){const g=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(g,`${t}`),this}range(t,a,{foreignTable:c,referencedTable:g=c}={}){const S=typeof g>"u"?"offset":`${g}.offset`,b=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(S,`${t}`),this.url.searchParams.set(b,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:a=!1,settings:c=!1,buffers:g=!1,wal:S=!1,format:b="text"}={}){var u;const k=[t?"analyze":null,a?"verbose":null,c?"settings":null,g?"buffers":null,S?"wal":null].filter(Boolean).join("|"),A=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${b}; for="${A}"; options=${k};`),b==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};c0.default=R3;var I3=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ry,"__esModule",{value:!0});const L3=I3(c0);let V3=class extends L3.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const c=Array.from(new Set(a)).map(g=>typeof g=="string"&&new RegExp("[,()]").test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(t,`in.(${c})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:c,type:g}={}){let S="";g==="plain"?S="pl":g==="phrase"?S="ph":g==="websearch"&&(S="w");const b=c===void 0?"":`(${c})`;return this.url.searchParams.append(t,`${S}fts${b}.${a}`),this}match(t){return Object.entries(t).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(t,a,c){return this.url.searchParams.append(t,`not.${a}.${c}`),this}or(t,{foreignTable:a,referencedTable:c=a}={}){const g=c?`${c}.or`:"or";return this.url.searchParams.append(g,`(${t})`),this}filter(t,a,c){return this.url.searchParams.append(t,`${a}.${c}`),this}};ry.default=V3;var O3=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l0,"__esModule",{value:!0});const Sv=O3(ry);let z3=class{constructor(t,{headers:a={},schema:c,fetch:g}){this.url=t,this.headers=new Headers(a),this.schema=c,this.fetch=g}select(t,{head:a=!1,count:c}={}){const g=a?"HEAD":"GET";let S=!1;const b=(t??"*").split("").map(u=>/\s/.test(u)&&!S?"":(u==='"'&&(S=!S),u)).join("");return this.url.searchParams.set("select",b),c&&this.headers.append("Prefer",`count=${c}`),new Sv.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:a,defaultToNull:c=!0}={}){var g;const S="POST";if(a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const b=t.reduce((u,k)=>u.concat(Object.keys(k)),[]);if(b.length>0){const u=[...new Set(b)].map(k=>`"${k}"`);this.url.searchParams.set("columns",u.join(","))}}return new Sv.default({method:S,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(t,{onConflict:a,ignoreDuplicates:c=!1,count:g,defaultToNull:S=!0}={}){var b;const u="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),g&&this.headers.append("Prefer",`count=${g}`),S||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const k=t.reduce((A,O)=>A.concat(Object.keys(O)),[]);if(k.length>0){const A=[...new Set(k)].map(O=>`"${O}"`);this.url.searchParams.set("columns",A.join(","))}}return new Sv.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}update(t,{count:a}={}){var c;const g="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new Sv.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:t}={}){var a;const c="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Sv.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};l0.default=z3;var Pj=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(fN,"__esModule",{value:!0});const B3=Pj(l0),F3=Pj(ry);let U3=class jj{constructor(t,{headers:a={},schema:c,fetch:g}={}){this.url=t,this.headers=new Headers(a),this.schemaName=c,this.fetch=g}from(t){const a=new URL(`${this.url}/${t}`);return new B3.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jj(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:c=!1,get:g=!1,count:S}={}){var b;let u;const k=new URL(`${this.url}/rpc/${t}`);let A;c||g?(u=c?"HEAD":"GET",Object.entries(a).filter(([B,W])=>W!==void 0).map(([B,W])=>[B,Array.isArray(W)?`{${W.join(",")}}`:`${W}`]).forEach(([B,W])=>{k.searchParams.append(B,W)})):(u="POST",A=a);const O=new Headers(this.headers);return S&&O.set("Prefer",`count=${S}`),new F3.default({method:u,url:k,headers:O,schema:this.schemaName,body:A,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};fN.default=U3;var _p=Fo&&Fo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(go,"__esModule",{value:!0});go.PostgrestError=go.PostgrestBuilder=go.PostgrestTransformBuilder=go.PostgrestFilterBuilder=go.PostgrestQueryBuilder=go.PostgrestClient=void 0;const kj=_p(fN);go.PostgrestClient=kj.default;const Aj=_p(l0);go.PostgrestQueryBuilder=Aj.default;const Mj=_p(ry);go.PostgrestFilterBuilder=Mj.default;const Rj=_p(c0);go.PostgrestTransformBuilder=Rj.default;const Ij=_p(u0);go.PostgrestBuilder=Ij.default;const Lj=_p(d0);go.PostgrestError=Lj.default;var $3=go.default={PostgrestClient:kj.default,PostgrestQueryBuilder:Aj.default,PostgrestFilterBuilder:Mj.default,PostgrestTransformBuilder:Rj.default,PostgrestBuilder:Ij.default,PostgrestError:Lj.default};const{PostgrestClient:q3,PostgrestQueryBuilder:qU,PostgrestFilterBuilder:HU,PostgrestTransformBuilder:GU,PostgrestBuilder:WU,PostgrestError:ZU}=$3;class H3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const a=parseInt(process.versions.node.split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const c=this.getWebSocketConstructor();return new c(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const G3="2.15.1",W3=`realtime-js/${G3}`,Z3="1.0.0",wC=1e4,K3=1e3,Y3=100;var kv;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(kv||(kv={}));var Fs;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Fs||(Fs={}));var hc;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(hc||(hc={}));var CC;(function(o){o.websocket="websocket"})(CC||(CC={}));var Sf;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Sf||(Sf={}));class X3{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),c=new TextDecoder;return this._decodeBroadcast(t,a,c)}_decodeBroadcast(t,a,c){const g=a.getUint8(1),S=a.getUint8(2);let b=this.HEADER_LENGTH+2;const u=c.decode(t.slice(b,b+g));b=b+g;const k=c.decode(t.slice(b,b+S));b=b+S;const A=JSON.parse(c.decode(t.slice(b,t.byteLength)));return{ref:null,topic:u,event:k,payload:A}}}class Vj{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ji;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(ji||(ji={}));const ET=(o,t,a={})=>{var c;const g=(c=a.skipTypes)!==null&&c!==void 0?c:[];return Object.keys(t).reduce((S,b)=>(S[b]=J3(b,o,t,g),S),{})},J3=(o,t,a,c)=>{const g=t.find(u=>u.name===o),S=g==null?void 0:g.type,b=a[o];return S&&!c.includes(S)?Oj(S,b):NC(b)},Oj=(o,t)=>{if(o.charAt(0)==="_"){const a=o.slice(1,o.length);return n5(t,a)}switch(o){case ji.bool:return Q3(t);case ji.float4:case ji.float8:case ji.int2:case ji.int4:case ji.int8:case ji.numeric:case ji.oid:return e5(t);case ji.json:case ji.jsonb:return t5(t);case ji.timestamp:return r5(t);case ji.abstime:case ji.date:case ji.daterange:case ji.int4range:case ji.int8range:case ji.money:case ji.reltime:case ji.text:case ji.time:case ji.timestamptz:case ji.timetz:case ji.tsrange:case ji.tstzrange:return NC(t);default:return NC(t)}},NC=o=>o,Q3=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},e5=o=>{if(typeof o=="string"){const t=parseFloat(o);if(!Number.isNaN(t))return t}return o},t5=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(t){return console.log(`JSON parse error: ${t}`),o}return o},n5=(o,t)=>{if(typeof o!="string")return o;const a=o.length-1,c=o[a];if(o[0]==="{"&&c==="}"){let S;const b=o.slice(1,a);try{S=JSON.parse("["+b+"]")}catch{S=b?b.split(","):[]}return S.map(u=>Oj(t,u))}return o},r5=o=>typeof o=="string"?o.replace(" ","T"):o,zj=o=>{let t=o;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class $1{constructor(t,a,c={},g=wC){this.channel=t,this.event=a,this.payload=c,this.timeout=g,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var c;return this._hasReceived(t)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(c=>c.status===t).forEach(c=>c.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var DT;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(DT||(DT={}));class Av{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},g=>{const{onJoin:S,onLeave:b,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Av.syncState(this.state,g,S,b),this.pendingDiffs.forEach(k=>{this.state=Av.syncDiff(this.state,k,S,b)}),this.pendingDiffs=[],u()}),this.channel._on(c.diff,{},g=>{const{onJoin:S,onLeave:b,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(g):(this.state=Av.syncDiff(this.state,g,S,b),u())}),this.onJoin((g,S,b)=>{this.channel._trigger("presence",{event:"join",key:g,currentPresences:S,newPresences:b})}),this.onLeave((g,S,b)=>{this.channel._trigger("presence",{event:"leave",key:g,currentPresences:S,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,c,g){const S=this.cloneDeep(t),b=this.transformState(a),u={},k={};return this.map(S,(A,O)=>{b[A]||(k[A]=O)}),this.map(b,(A,O)=>{const B=S[A];if(B){const W=O.map(Pe=>Pe.presence_ref),ie=B.map(Pe=>Pe.presence_ref),pe=O.filter(Pe=>ie.indexOf(Pe.presence_ref)<0),Ve=B.filter(Pe=>W.indexOf(Pe.presence_ref)<0);pe.length>0&&(u[A]=pe),Ve.length>0&&(k[A]=Ve)}else u[A]=O}),this.syncDiff(S,{joins:u,leaves:k},c,g)}static syncDiff(t,a,c,g){const{joins:S,leaves:b}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),g||(g=()=>{}),this.map(S,(u,k)=>{var A;const O=(A=t[u])!==null&&A!==void 0?A:[];if(t[u]=this.cloneDeep(k),O.length>0){const B=t[u].map(ie=>ie.presence_ref),W=O.filter(ie=>B.indexOf(ie.presence_ref)<0);t[u].unshift(...W)}c(u,O,k)}),this.map(b,(u,k)=>{let A=t[u];if(!A)return;const O=k.map(B=>B.presence_ref);A=A.filter(B=>O.indexOf(B.presence_ref)<0),t[u]=A,g(u,A,k),A.length===0&&delete t[u]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(c=>a(c,t[c]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,c)=>{const g=t[c];return"metas"in g?a[c]=g.metas.map(S=>(S.presence_ref=S.phx_ref,delete S.phx_ref,delete S.phx_ref_prev,S)):a[c]=g,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var TT;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(TT||(TT={}));var Mv;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Mv||(Mv={}));var ed;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ed||(ed={}));class mN{constructor(t,a={config:{}},c){this.topic=t,this.params=a,this.socket=c,this.bindings={},this.state=Fs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new $1(this,hc.join,this.params,this.timeout),this.rejoinTimer=new Vj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fs.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hc.reply,{},(g,S)=>{this._trigger(this._replyEventName(S),g)}),this.presence=new Av(this),this.broadcastEndpointURL=zj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var c,g;if(this.socket.isConnected()||this.socket.connect(),this.state==Fs.closed){const{config:{broadcast:S,presence:b,private:u}}=this.params,k=(g=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(W=>W.filter))!==null&&g!==void 0?g:[],A=!!this.bindings[Mv.PRESENCE]&&this.bindings[Mv.PRESENCE].length>0,O={},B={broadcast:S,presence:Object.assign(Object.assign({},b),{enabled:A}),postgres_changes:k,private:u};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(W=>t==null?void 0:t(ed.CHANNEL_ERROR,W)),this._onClose(()=>t==null?void 0:t(ed.CLOSED)),this.updateJoinPayload(Object.assign({config:B},O)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:W})=>{var ie;if(this.socket.setAuth(),W===void 0){t==null||t(ed.SUBSCRIBED);return}else{const pe=this.bindings.postgres_changes,Ve=(ie=pe==null?void 0:pe.length)!==null&&ie!==void 0?ie:0,Pe=[];for(let Se=0;Se<Ve;Se++){const Ce=pe[Se],{filter:{event:_e,schema:Ue,table:Oe,filter:Je}}=Ce,tt=W&&W[Se];if(tt&&tt.event===_e&&tt.schema===Ue&&tt.table===Oe&&tt.filter===Je)Pe.push(Object.assign(Object.assign({},Ce),{id:tt.id}));else{this.unsubscribe(),this.state=Fs.errored,t==null||t(ed.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Pe,t&&t(ed.SUBSCRIBED);return}}).receive("error",W=>{this.state=Fs.errored,t==null||t(ed.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(W).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ed.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,c){return this.state===Fs.joined&&t===Mv.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,c)}async send(t,a={}){var c,g;if(!this._canPush()&&t.type==="broadcast"){const{event:S,payload:b}=t,k={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:S,payload:b,private:this.private}]})};try{const A=await this._fetchWithTimeout(this.broadcastEndpointURL,k,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((g=A.body)===null||g===void 0?void 0:g.cancel()),A.ok?"ok":"error"}catch(A){return A.name==="AbortError"?"timed out":"error"}}else return new Promise(S=>{var b,u,k;const A=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((k=(u=(b=this.params)===null||b===void 0?void 0:b.config)===null||u===void 0?void 0:u.broadcast)===null||k===void 0)&&k.ack)&&S("ok"),A.receive("ok",()=>S("ok")),A.receive("error",()=>S("error")),A.receive("timeout",()=>S("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fs.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hc.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(g=>{c=new $1(this,hc.leave,{},t),c.receive("ok",()=>{a(),g("ok")}).receive("timeout",()=>{a(),g("timed out")}).receive("error",()=>{g("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c==null||c.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fs.closed,this.bindings={}}async _fetchWithTimeout(t,a,c){const g=new AbortController,S=setTimeout(()=>g.abort(),c),b=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:g.signal}));return clearTimeout(S),b}_push(t,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let g=new $1(this,t,a,c);return this._canPush()?g.send():this._addToPushBuffer(g),g}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Y3){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,c){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,c){var g,S;const b=t.toLocaleLowerCase(),{close:u,error:k,leave:A,join:O}=hc;if(c&&[u,k,A,O].indexOf(b)>=0&&c!==this._joinRef())return;let W=this._onMessage(b,a,c);if(a&&!W)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(g=this.bindings.postgres_changes)===null||g===void 0||g.filter(ie=>{var pe,Ve,Pe;return((pe=ie.filter)===null||pe===void 0?void 0:pe.event)==="*"||((Pe=(Ve=ie.filter)===null||Ve===void 0?void 0:Ve.event)===null||Pe===void 0?void 0:Pe.toLocaleLowerCase())===b}).map(ie=>ie.callback(W,c)):(S=this.bindings[b])===null||S===void 0||S.filter(ie=>{var pe,Ve,Pe,Se,Ce,_e;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in ie){const Ue=ie.id,Oe=(pe=ie.filter)===null||pe===void 0?void 0:pe.event;return Ue&&((Ve=a.ids)===null||Ve===void 0?void 0:Ve.includes(Ue))&&(Oe==="*"||(Oe==null?void 0:Oe.toLocaleLowerCase())===((Pe=a.data)===null||Pe===void 0?void 0:Pe.type.toLocaleLowerCase()))}else{const Ue=(Ce=(Se=ie==null?void 0:ie.filter)===null||Se===void 0?void 0:Se.event)===null||Ce===void 0?void 0:Ce.toLocaleLowerCase();return Ue==="*"||Ue===((_e=a==null?void 0:a.event)===null||_e===void 0?void 0:_e.toLocaleLowerCase())}else return ie.type.toLocaleLowerCase()===b}).map(ie=>{if(typeof W=="object"&&"ids"in W){const pe=W.data,{schema:Ve,table:Pe,commit_timestamp:Se,type:Ce,errors:_e}=pe;W=Object.assign(Object.assign({},{schema:Ve,table:Pe,commit_timestamp:Se,eventType:Ce,new:{},old:{},errors:_e}),this._getPayloadRecords(pe))}ie.callback(W,c)})}_isClosed(){return this.state===Fs.closed}_isJoined(){return this.state===Fs.joined}_isJoining(){return this.state===Fs.joining}_isLeaving(){return this.state===Fs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,c){const g=t.toLocaleLowerCase(),S={type:g,filter:a,callback:c};return this.bindings[g]?this.bindings[g].push(S):this.bindings[g]=[S],this}_off(t,a){const c=t.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(g=>{var S;return!(((S=g.type)===null||S===void 0?void 0:S.toLocaleLowerCase())===c&&mN.isEqual(g.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const c in t)if(t[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(hc.close,{},t)}_onError(t){this._on(hc.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=ET(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=ET(t.columns,t.old_record)),a}}const PT=()=>{},Tx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i5=[1e3,2e3,5e3,1e4],s5=1e4,a5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o5{constructor(t,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wC,this.transport=null,this.heartbeatIntervalMs=Tx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=PT,this.ref=0,this.reconnectTimer=null,this.logger=PT,this.conn=null,this.sendBuffer=[],this.serializer=new X3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=g=>{let S;return g?S=g:typeof fetch>"u"?S=(...b)=>ny(async()=>{const{default:u}=await Promise.resolve().then(()=>xp);return{default:u}},void 0).then(({default:u})=>u(...b)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):S=fetch,(...b)=>S(...b)},!(!((c=a==null?void 0:a.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${CC.websocket}`,this.httpEndpoint=zj(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=H3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Z3}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},t?this.conn.close(t,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,c){this.logger(t,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case kv.connecting:return Sf.Connecting;case kv.open:return Sf.Open;case kv.closing:return Sf.Closing;default:return Sf.Closed}}isConnected(){return this.connectionState()===Sf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const c=`realtime:${t}`,g=this.getChannels().find(S=>S.topic===c);if(g)return g;{const S=new mN(`realtime:${t}`,a,this);return this.channels.push(S),S}}push(t){const{topic:a,event:c,payload:g,ref:S}=t,b=()=>{this.encode(t,u=>{var k;(k=this.conn)===null||k===void 0||k.send(u)})};this.log("push",`${a} ${c} (${S})`,g),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(K3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Tx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(c=>c.topic===t&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{a.topic==="phoenix"&&a.event==="phx_reply"&&this.heartbeatCallback(a.payload.status==="ok"?"ok":"error"),a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:g,payload:S,ref:b}=a,u=b?`(${b})`:"",k=S.status||"";this.log("receive",`${k} ${c} ${g} ${u}`.trim(),S),this.channels.filter(A=>A._isMember(c)).forEach(A=>A._trigger(g,S,b)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(hc.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const c=t.match(/\?/)?"&":"?",g=new URLSearchParams(a);return`${t}${c}${g}`}_workerObjectUrl(t){let a;if(t)a=t;else{const c=new Blob([a5],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const g={access_token:a,version:W3};a&&c.updateJoinPayload(g),c.joinedOnce&&c._isJoined()&&c._push(hc.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(c=>{try{c(a)}catch(g){this.log("error",`error in ${t} callback`,g)}})}catch(c){this.log("error",`error triggering ${t} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new Vj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,c,g,S,b,u,k,A;if(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(c=t==null?void 0:t.timeout)!==null&&c!==void 0?c:wC,this.heartbeatIntervalMs=(g=t==null?void 0:t.heartbeatIntervalMs)!==null&&g!==void 0?g:Tx.HEARTBEAT_INTERVAL,this.worker=(S=t==null?void 0:t.worker)!==null&&S!==void 0?S:!1,this.accessToken=(b=t==null?void 0:t.accessToken)!==null&&b!==void 0?b:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:O=>i5[O-1]||s5,this.encode=(k=t==null?void 0:t.encode)!==null&&k!==void 0?k:(O,B)=>B(JSON.stringify(O)),this.decode=(A=t==null?void 0:t.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class pN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Us(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class l5 extends pN{constructor(t,a,c){super(t),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class SC extends pN{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var c5=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};const Bj=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ny(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)},u5=()=>c5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ny(()=>Promise.resolve().then(()=>xp),void 0)).Response:Response}),EC=o=>{if(Array.isArray(o))return o.map(a=>EC(a));if(typeof o=="function"||o!==Object(o))return o;const t={};return Object.entries(o).forEach(([a,c])=>{const g=a.replace(/([-_][a-z])/gi,S=>S.toUpperCase().replace(/[-_]/g,""));t[g]=EC(c)}),t},d5=o=>{if(typeof o!="object"||o===null)return!1;const t=Object.getPrototypeOf(o);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var kf=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};const q1=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),h5=(o,t,a)=>kf(void 0,void 0,void 0,function*(){const c=yield u5();o instanceof c&&!(a!=null&&a.noResolveJson)?o.json().then(g=>{const S=o.status||500,b=(g==null?void 0:g.statusCode)||S+"";t(new l5(q1(g),S,b))}).catch(g=>{t(new SC(q1(g),g))}):t(new SC(q1(o),o))}),f5=(o,t,a,c)=>{const g={method:o,headers:(t==null?void 0:t.headers)||{}};return o==="GET"||!c?g:(d5(c)?(g.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),g.body=JSON.stringify(c)):g.body=c,t!=null&&t.duplex&&(g.duplex=t.duplex),Object.assign(Object.assign({},g),a))};function iy(o,t,a,c,g,S){return kf(this,void 0,void 0,function*(){return new Promise((b,u)=>{o(a,f5(t,c,g,S)).then(k=>{if(!k.ok)throw k;return c!=null&&c.noResolveJson?k:k.json()}).then(k=>b(k)).catch(k=>h5(k,u,c))})})}function e0(o,t,a,c){return kf(this,void 0,void 0,function*(){return iy(o,"GET",t,a,c)})}function eu(o,t,a,c,g){return kf(this,void 0,void 0,function*(){return iy(o,"POST",t,c,g,a)})}function DC(o,t,a,c,g){return kf(this,void 0,void 0,function*(){return iy(o,"PUT",t,c,g,a)})}function m5(o,t,a,c){return kf(this,void 0,void 0,function*(){return iy(o,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function Fj(o,t,a,c,g){return kf(this,void 0,void 0,function*(){return iy(o,"DELETE",t,c,g,a)})}var Xa=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};const p5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g5{constructor(t,a={},c,g){this.url=t,this.headers=a,this.bucketId=c,this.fetch=Bj(g)}uploadOrUpdate(t,a,c,g){return Xa(this,void 0,void 0,function*(){try{let S;const b=Object.assign(Object.assign({},jT),g);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(b.upsert)});const k=b.metadata;typeof Blob<"u"&&c instanceof Blob?(S=new FormData,S.append("cacheControl",b.cacheControl),k&&S.append("metadata",this.encodeMetadata(k)),S.append("",c)):typeof FormData<"u"&&c instanceof FormData?(S=c,S.append("cacheControl",b.cacheControl),k&&S.append("metadata",this.encodeMetadata(k))):(S=c,u["cache-control"]=`max-age=${b.cacheControl}`,u["content-type"]=b.contentType,k&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(k)))),g!=null&&g.headers&&(u=Object.assign(Object.assign({},u),g.headers));const A=this._removeEmptyFolders(a),O=this._getFinalPath(A),B=yield(t=="PUT"?DC:eu)(this.fetch,`${this.url}/object/${O}`,S,Object.assign({headers:u},b!=null&&b.duplex?{duplex:b.duplex}:{}));return{data:{path:A,id:B.Id,fullPath:B.Key},error:null}}catch(S){if(Us(S))return{data:null,error:S};throw S}})}upload(t,a,c){return Xa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,c)})}uploadToSignedUrl(t,a,c,g){return Xa(this,void 0,void 0,function*(){const S=this._removeEmptyFolders(t),b=this._getFinalPath(S),u=new URL(this.url+`/object/upload/sign/${b}`);u.searchParams.set("token",a);try{let k;const A=Object.assign({upsert:jT.upsert},g),O=Object.assign(Object.assign({},this.headers),{"x-upsert":String(A.upsert)});typeof Blob<"u"&&c instanceof Blob?(k=new FormData,k.append("cacheControl",A.cacheControl),k.append("",c)):typeof FormData<"u"&&c instanceof FormData?(k=c,k.append("cacheControl",A.cacheControl)):(k=c,O["cache-control"]=`max-age=${A.cacheControl}`,O["content-type"]=A.contentType);const B=yield DC(this.fetch,u.toString(),k,{headers:O});return{data:{path:S,fullPath:B.Key},error:null}}catch(k){if(Us(k))return{data:null,error:k};throw k}})}createSignedUploadUrl(t,a){return Xa(this,void 0,void 0,function*(){try{let c=this._getFinalPath(t);const g=Object.assign({},this.headers);a!=null&&a.upsert&&(g["x-upsert"]="true");const S=yield eu(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:g}),b=new URL(this.url+S.url),u=b.searchParams.get("token");if(!u)throw new pN("No token returned by API");return{data:{signedUrl:b.toString(),path:t,token:u},error:null}}catch(c){if(Us(c))return{data:null,error:c};throw c}})}update(t,a,c){return Xa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,c)})}move(t,a,c){return Xa(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(g){if(Us(g))return{data:null,error:g};throw g}})}copy(t,a,c){return Xa(this,void 0,void 0,function*(){try{return{data:{path:(yield eu(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(g){if(Us(g))return{data:null,error:g};throw g}})}createSignedUrl(t,a,c){return Xa(this,void 0,void 0,function*(){try{let g=this._getFinalPath(t),S=yield eu(this.fetch,`${this.url}/object/sign/${g}`,Object.assign({expiresIn:a},c!=null&&c.transform?{transform:c.transform}:{}),{headers:this.headers});const b=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return S={signedUrl:encodeURI(`${this.url}${S.signedURL}${b}`)},{data:S,error:null}}catch(g){if(Us(g))return{data:null,error:g};throw g}})}createSignedUrls(t,a,c){return Xa(this,void 0,void 0,function*(){try{const g=yield eu(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),S=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return{data:g.map(b=>Object.assign(Object.assign({},b),{signedUrl:b.signedURL?encodeURI(`${this.url}${b.signedURL}${S}`):null})),error:null}}catch(g){if(Us(g))return{data:null,error:g};throw g}})}download(t,a){return Xa(this,void 0,void 0,function*(){const g=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",S=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),b=S?`?${S}`:"";try{const u=this._getFinalPath(t);return{data:yield(yield e0(this.fetch,`${this.url}/${g}/${u}${b}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Us(u))return{data:null,error:u};throw u}})}info(t){return Xa(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const c=yield e0(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:EC(c),error:null}}catch(c){if(Us(c))return{data:null,error:c};throw c}})}exists(t){return Xa(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield m5(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(Us(c)&&c instanceof SC){const g=c.originalError;if([400,404].includes(g==null?void 0:g.status))return{data:!1,error:c}}throw c}})}getPublicUrl(t,a){const c=this._getFinalPath(t),g=[],S=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";S!==""&&g.push(S);const u=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",k=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});k!==""&&g.push(k);let A=g.join("&");return A!==""&&(A=`?${A}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${c}${A}`)}}}remove(t){return Xa(this,void 0,void 0,function*(){try{return{data:yield Fj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(Us(a))return{data:null,error:a};throw a}})}list(t,a,c){return Xa(this,void 0,void 0,function*(){try{const g=Object.assign(Object.assign(Object.assign({},p5),a),{prefix:t||""});return{data:yield eu(this.fetch,`${this.url}/object/list/${this.bucketId}`,g,{headers:this.headers},c),error:null}}catch(g){if(Us(g))return{data:null,error:g};throw g}})}listV2(t,a){return Xa(this,void 0,void 0,function*(){try{const c=Object.assign({},t);return{data:yield eu(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(Us(c))return{data:null,error:c};throw c}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const v5="2.11.0",y5={"X-Client-Info":`storage-js/${v5}`};var Qm=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};class b5{constructor(t,a={},c,g){const S=new URL(t);g!=null&&g.useNewHostname&&/supabase\.(co|in|red)$/.test(S.hostname)&&!S.hostname.includes("storage.supabase.")&&(S.hostname=S.hostname.replace("supabase.","storage.supabase.")),this.url=S.href,this.headers=Object.assign(Object.assign({},y5),a),this.fetch=Bj(c)}listBuckets(){return Qm(this,void 0,void 0,function*(){try{return{data:yield e0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Us(t))return{data:null,error:t};throw t}})}getBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield e0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(Us(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return Qm(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Us(c))return{data:null,error:c};throw c}})}updateBucket(t,a){return Qm(this,void 0,void 0,function*(){try{return{data:yield DC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Us(c))return{data:null,error:c};throw c}})}emptyBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(Us(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Qm(this,void 0,void 0,function*(){try{return{data:yield Fj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(Us(a))return{data:null,error:a};throw a}})}}class x5 extends b5{constructor(t,a={},c,g){super(t,a,c,g)}from(t){return new g5(this.url,this.headers,t,this.fetch)}}const _5="2.56.0";let Tv="";typeof Deno<"u"?Tv="deno":typeof document<"u"?Tv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tv="react-native":Tv="node";const w5={"X-Client-Info":`supabase-js-${Tv}/${_5}`},C5={headers:w5},N5={schema:"public"},S5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},E5={};var D5=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};const T5=o=>{let t;return o?t=o:typeof fetch>"u"?t=Ej:t=fetch,(...a)=>t(...a)},P5=()=>typeof Headers>"u"?Dj:Headers,j5=(o,t,a)=>{const c=T5(a),g=P5();return(S,b)=>D5(void 0,void 0,void 0,function*(){var u;const k=(u=yield t())!==null&&u!==void 0?u:o;let A=new g(b==null?void 0:b.headers);return A.has("apikey")||A.set("apikey",o),A.has("Authorization")||A.set("Authorization",`Bearer ${k}`),c(S,Object.assign(Object.assign({},b),{headers:A}))})};var k5=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};function A5(o){return o.endsWith("/")?o:o+"/"}function M5(o,t){var a,c;const{db:g,auth:S,realtime:b,global:u}=o,{db:k,auth:A,realtime:O,global:B}=t,W={db:Object.assign(Object.assign({},k),g),auth:Object.assign(Object.assign({},A),S),realtime:Object.assign(Object.assign({},O),b),storage:{},global:Object.assign(Object.assign(Object.assign({},B),u),{headers:Object.assign(Object.assign({},(a=B==null?void 0:B.headers)!==null&&a!==void 0?a:{}),(c=u==null?void 0:u.headers)!==null&&c!==void 0?c:{})}),accessToken:()=>k5(this,void 0,void 0,function*(){return""})};return o.accessToken?W.accessToken=o.accessToken:delete W.accessToken,W}const Uj="2.71.1",ip=30*1e3,TC=3,H1=TC*ip,R5="http://localhost:9999",I5="supabase.auth.token",L5={"X-Client-Info":`gotrue-js/${Uj}`},PC="X-Supabase-Api-Version",$j={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},V5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O5=10*60*1e3;class gN extends Error{constructor(t,a,c){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function ar(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class z5 extends gN{constructor(t,a,c){super(t,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function B5(o){return ar(o)&&o.name==="AuthApiError"}class qj extends gN{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class bh extends gN{constructor(t,a,c,g){super(t,c,g),this.name=a,this.status=c}}class dh extends bh{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F5(o){return ar(o)&&o.name==="AuthSessionMissingError"}class Px extends bh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jx extends bh{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class kx extends bh{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U5(o){return ar(o)&&o.name==="AuthImplicitGrantRedirectError"}class kT extends bh{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jC extends bh{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function G1(o){return ar(o)&&o.name==="AuthRetryableFetchError"}class AT extends bh{constructor(t,a,c){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class kC extends bh{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const t0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),MT=` 	
\r=`.split(""),$5=(()=>{const o=new Array(128);for(let t=0;t<o.length;t+=1)o[t]=-1;for(let t=0;t<MT.length;t+=1)o[MT[t].charCodeAt(0)]=-2;for(let t=0;t<t0.length;t+=1)o[t0[t].charCodeAt(0)]=t;return o})();function RT(o,t,a){if(o!==null)for(t.queue=t.queue<<8|o,t.queuedBits+=8;t.queuedBits>=6;){const c=t.queue>>t.queuedBits-6&63;a(t0[c]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const c=t.queue>>t.queuedBits-6&63;a(t0[c]),t.queuedBits-=6}}function Hj(o,t,a){const c=$5[o];if(c>-1)for(t.queue=t.queue<<6|c,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function IT(o){const t=[],a=b=>{t.push(String.fromCodePoint(b))},c={utf8seq:0,codepoint:0},g={queue:0,queuedBits:0},S=b=>{G5(b,c,a)};for(let b=0;b<o.length;b+=1)Hj(o.charCodeAt(b),g,S);return t.join("")}function q5(o,t){if(o<=127){t(o);return}else if(o<=2047){t(192|o>>6),t(128|o&63);return}else if(o<=65535){t(224|o>>12),t(128|o>>6&63),t(128|o&63);return}else if(o<=1114111){t(240|o>>18),t(128|o>>12&63),t(128|o>>6&63),t(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function H5(o,t){for(let a=0;a<o.length;a+=1){let c=o.charCodeAt(a);if(c>55295&&c<=56319){const g=(c-55296)*1024&65535;c=(o.charCodeAt(a+1)-56320&65535|g)+65536,a+=1}q5(c,t)}}function G5(o,t,a){if(t.utf8seq===0){if(o<=127){a(o);return}for(let c=1;c<6;c+=1)if(!(o>>7-c&1)){t.utf8seq=c;break}if(t.utf8seq===2)t.codepoint=o&31;else if(t.utf8seq===3)t.codepoint=o&15;else if(t.utf8seq===4)t.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|o&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function W5(o){const t=[],a={queue:0,queuedBits:0},c=g=>{t.push(g)};for(let g=0;g<o.length;g+=1)Hj(o.charCodeAt(g),a,c);return new Uint8Array(t)}function Z5(o){const t=[];return H5(o,a=>t.push(a)),new Uint8Array(t)}function K5(o){const t=[],a={queue:0,queuedBits:0},c=g=>{t.push(g)};return o.forEach(g=>RT(g,a,c)),RT(null,a,c),t.join("")}function Y5(o){return Math.round(Date.now()/1e3)+o}function X5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const t=Math.random()*16|0;return(o=="x"?t:t&3|8).toString(16)})}const uc=()=>typeof window<"u"&&typeof document<"u",bf={tested:!1,writable:!1},Gj=()=>{if(!uc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bf.tested)return bf.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),bf.tested=!0,bf.writable=!0}catch{bf.tested=!0,bf.writable=!1}return bf.writable};function J5(o){const t={},a=new URL(o);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((g,S)=>{t[S]=g})}catch{}return a.searchParams.forEach((c,g)=>{t[g]=c}),t}const Wj=o=>{let t;return o?t=o:typeof fetch>"u"?t=(...a)=>ny(async()=>{const{default:c}=await Promise.resolve().then(()=>xp);return{default:c}},void 0).then(({default:c})=>c(...a)):t=fetch,(...a)=>t(...a)},Q5=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",sp=async(o,t,a)=>{await o.setItem(t,JSON.stringify(a))},xf=async(o,t)=>{const a=await o.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},uh=async(o,t)=>{await o.removeItem(t)};class h0{constructor(){this.promise=new h0.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}h0.promiseConstructor=Promise;function W1(o){const t=o.split(".");if(t.length!==3)throw new kC("Invalid JWT structure");for(let c=0;c<t.length;c++)if(!V5.test(t[c]))throw new kC("JWT not in base64url format");return{header:JSON.parse(IT(t[0])),payload:JSON.parse(IT(t[1])),signature:W5(t[2]),raw:{header:t[0],payload:t[1]}}}async function eO(o){return await new Promise(t=>{setTimeout(()=>t(null),o)})}function tO(o,t){return new Promise((c,g)=>{(async()=>{for(let S=0;S<1/0;S++)try{const b=await o(S);if(!t(S,null,b)){c(b);return}}catch(b){if(!t(S,b)){g(b);return}}})()})}function nO(o){return("0"+o.toString(16)).substr(-2)}function rO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let g="";for(let S=0;S<56;S++)g+=a.charAt(Math.floor(Math.random()*c));return g}return crypto.getRandomValues(t),Array.from(t,nO).join("")}async function iO(o){const a=new TextEncoder().encode(o),c=await crypto.subtle.digest("SHA-256",a),g=new Uint8Array(c);return Array.from(g).map(S=>String.fromCharCode(S)).join("")}async function sO(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const a=await iO(o);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ep(o,t,a=!1){const c=rO();let g=c;a&&(g+="/PASSWORD_RECOVERY"),await sp(o,`${t}-code-verifier`,g);const S=await sO(c);return[S,c===S?"plain":"s256"]}const aO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oO(o){const t=o.headers.get(PC);if(!t||!t.match(aO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function lO(o){if(!o)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(o<=t)throw new Error("JWT has expired")}function cO(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tp(o){if(!uO.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Z1(){const o={};return new Proxy(o,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LT(o){return JSON.parse(JSON.stringify(o))}var dO=function(o,t){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(o);g<c.length;g++)t.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(o,c[g])&&(a[c[g]]=o[c[g]]);return a};const wf=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),hO=[502,503,504];async function VT(o){var t;if(!Q5(o))throw new jC(wf(o),0);if(hO.includes(o.status))throw new jC(wf(o),o.status);let a;try{a=await o.json()}catch(S){throw new qj(wf(S),S)}let c;const g=oO(o);if(g&&g.getTime()>=$j["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new AT(wf(a),o.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(c==="session_not_found")throw new dh}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((S,b)=>S&&typeof b=="string",!0))throw new AT(wf(a),o.status,a.weak_password.reasons);throw new z5(wf(a),o.status||500,c)}const fO=(o,t,a,c)=>{const g={method:o,headers:(t==null?void 0:t.headers)||{}};return o==="GET"?g:(g.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),g.body=JSON.stringify(c),Object.assign(Object.assign({},g),a))};async function Cr(o,t,a,c){var g;const S=Object.assign({},c==null?void 0:c.headers);S[PC]||(S[PC]=$j["2024-01-01"].name),c!=null&&c.jwt&&(S.Authorization=`Bearer ${c.jwt}`);const b=(g=c==null?void 0:c.query)!==null&&g!==void 0?g:{};c!=null&&c.redirectTo&&(b.redirect_to=c.redirectTo);const u=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",k=await mO(o,t,a+u,{headers:S,noResolveJson:c==null?void 0:c.noResolveJson},{},c==null?void 0:c.body);return c!=null&&c.xform?c==null?void 0:c.xform(k):{data:Object.assign({},k),error:null}}async function mO(o,t,a,c,g,S){const b=fO(t,c,g,S);let u;try{u=await o(a,Object.assign({},b))}catch(k){throw console.error(k),new jC(wf(k),0)}if(u.ok||await VT(u),c!=null&&c.noResolveJson)return u;try{return await u.json()}catch(k){await VT(k)}}function Qu(o){var t;let a=null;yO(o)&&(a=Object.assign({},o),o.expires_at||(a.expires_at=Y5(o.expires_in)));const c=(t=o.user)!==null&&t!==void 0?t:o;return{data:{session:a,user:c},error:null}}function OT(o){const t=Qu(o);return!t.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(t.data.weak_password=o.weak_password),t}function fh(o){var t;return{data:{user:(t=o.user)!==null&&t!==void 0?t:o},error:null}}function pO(o){return{data:o,error:null}}function gO(o){const{action_link:t,email_otp:a,hashed_token:c,redirect_to:g,verification_type:S}=o,b=dO(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:a,hashed_token:c,redirect_to:g,verification_type:S},k=Object.assign({},b);return{data:{properties:u,user:k},error:null}}function vO(o){return o}function yO(o){return o.access_token&&o.refresh_token&&o.expires_in}const K1=["global","local","others"];var bO=function(o,t){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(o);g<c.length;g++)t.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(o,c[g])&&(a[c[g]]=o[c[g]]);return a};class xO{constructor({url:t="",headers:a={},fetch:c}){this.url=t,this.headers=a,this.fetch=Wj(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=K1[0]){if(K1.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${K1.join(", ")}`);try{return await Cr(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(c){if(ar(c))return{data:null,error:c};throw c}}async inviteUserByEmail(t,a={}){try{return await Cr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:fh})}catch(c){if(ar(c))return{data:{user:null},error:c};throw c}}async generateLink(t){try{const{options:a}=t,c=bO(t,["options"]),g=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(g.new_email=c==null?void 0:c.newEmail,delete g.newEmail),await Cr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:g,headers:this.headers,xform:gO,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(ar(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await Cr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fh})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,c,g,S,b,u,k;try{const A={nextPage:null,lastPage:0,total:0},O=await Cr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(S=(g=t==null?void 0:t.perPage)===null||g===void 0?void 0:g.toString())!==null&&S!==void 0?S:""},xform:vO});if(O.error)throw O.error;const B=await O.json(),W=(b=O.headers.get("x-total-count"))!==null&&b!==void 0?b:0,ie=(k=(u=O.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&k!==void 0?k:[];return ie.length>0&&(ie.forEach(pe=>{const Ve=parseInt(pe.split(";")[0].split("=")[1].substring(0,1)),Pe=JSON.parse(pe.split(";")[1].split("=")[1]);A[`${Pe}Page`]=Ve}),A.total=parseInt(W)),{data:Object.assign(Object.assign({},B),A),error:null}}catch(A){if(ar(A))return{data:{users:[]},error:A};throw A}}async getUserById(t){tp(t);try{return await Cr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fh})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){tp(t);try{return await Cr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:fh})}catch(c){if(ar(c))return{data:{user:null},error:c};throw c}}async deleteUser(t,a=!1){tp(t);try{return await Cr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:fh})}catch(c){if(ar(c))return{data:{user:null},error:c};throw c}}async _listFactors(t){tp(t.userId);try{const{data:a,error:c}=await Cr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:g=>({data:{factors:g},error:null})});return{data:a,error:c}}catch(a){if(ar(a))return{data:null,error:a};throw a}}async _deleteFactor(t){tp(t.userId),tp(t.id);try{return{data:await Cr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}}}function zT(o={}){return{getItem:t=>o[t]||null,setItem:(t,a)=>{o[t]=a},removeItem:t=>{delete o[t]}}}function _O(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const np={debug:!!(globalThis&&Gj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wO extends Zj{}async function CO(o,t,a){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,t);const c=new globalThis.AbortController;return t>0&&setTimeout(()=>{c.abort(),np.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async g=>{if(g){np.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,g.name);try{return await a()}finally{np.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,g.name)}}else{if(t===0)throw np.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new wO(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(np.debug)try{const S=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(S,null,"  "))}catch(S){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",S)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}_O();const NO={url:R5,storageKey:I5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:L5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function BT(o,t,a){return await a()}const rp={};class $v{constructor(t){var a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$v.nextInstanceID,$v.nextInstanceID+=1,this.instanceID>0&&uc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const g=Object.assign(Object.assign({},NO),t);if(this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.persistSession=g.persistSession,this.storageKey=g.storageKey,this.autoRefreshToken=g.autoRefreshToken,this.admin=new xO({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=Wj(g.fetch),this.lock=g.lock||BT,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,g.lock?this.lock=g.lock:uc()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=CO:this.lock=BT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:Gj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zT(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=zT(this.memoryStorage)),uc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(S){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",S)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async S=>{this._debug("received broadcast notification from other tab or client",S),await this._notifyAllSubscribers(S.data.event,S.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=rp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=rp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rp[this.storageKey]=Object.assign(Object.assign({},rp[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Uj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=J5(window.location.href);let c="none";if(this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce"),uc()&&this.detectSessionInUrl&&c!=="none"){const{data:g,error:S}=await this._getSessionFromURL(a,c);if(S){if(this._debug("#_initialize()","error detecting session from URL",S),U5(S)){const k=(t=S.details)===null||t===void 0?void 0:t.code;if(k==="identity_already_exists"||k==="identity_not_found"||k==="single_identity_not_deletable")return{error:S}}return await this._removeSession(),{error:S}}const{session:b,redirectType:u}=g;return this._debug("#_initialize()","detected session in URL",b,"redirect type",u),await this._saveSession(b),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return ar(a)?{error:a}:{error:new qj("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,c,g;try{const S=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(g=t==null?void 0:t.options)===null||g===void 0?void 0:g.captchaToken}},xform:Qu}),{data:b,error:u}=S;if(u||!b)return{data:{user:null,session:null},error:u};const k=b.session,A=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",k)),{data:{user:A,session:k},error:null}}catch(S){if(ar(S))return{data:{user:null,session:null},error:S};throw S}}async signUp(t){var a,c,g;try{let S;if("email"in t){const{email:O,password:B,options:W}=t;let ie=null,pe=null;this.flowType==="pkce"&&([ie,pe]=await ep(this.storage,this.storageKey)),S=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:W==null?void 0:W.emailRedirectTo,body:{email:O,password:B,data:(a=W==null?void 0:W.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken},code_challenge:ie,code_challenge_method:pe},xform:Qu})}else if("phone"in t){const{phone:O,password:B,options:W}=t;S=await Cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:O,password:B,data:(c=W==null?void 0:W.data)!==null&&c!==void 0?c:{},channel:(g=W==null?void 0:W.channel)!==null&&g!==void 0?g:"sms",gotrue_meta_security:{captcha_token:W==null?void 0:W.captchaToken}},xform:Qu})}else throw new jx("You must provide either an email or phone number and a password");const{data:b,error:u}=S;if(u||!b)return{data:{user:null,session:null},error:u};const k=b.session,A=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",k)),{data:{user:A,session:k},error:null}}catch(S){if(ar(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithPassword(t){try{let a;if("email"in t){const{email:S,password:b,options:u}=t;a=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:S,password:b,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:OT})}else if("phone"in t){const{phone:S,password:b,options:u}=t;a=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:S,password:b,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:OT})}else throw new jx("You must provide either an email or phone number and a password");const{data:c,error:g}=a;return g?{data:{user:null,session:null},error:g}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Px}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:g})}catch(a){if(ar(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,c,g,S;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(g=t.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:(S=t.options)===null||S===void 0?void 0:S.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,c,g,S,b,u,k,A,O,B,W,ie;let pe,Ve;if("message"in t)pe=t.message,Ve=t.signature;else{const{chain:Pe,wallet:Se,statement:Ce,options:_e}=t;let Ue;if(uc())if(typeof Se=="object")Ue=Se;else{const Je=window;if("solana"in Je&&typeof Je.solana=="object"&&("signIn"in Je.solana&&typeof Je.solana.signIn=="function"||"signMessage"in Je.solana&&typeof Je.solana.signMessage=="function"))Ue=Je.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Se!="object"||!(_e!=null&&_e.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Ue=Se}const Oe=new URL((a=_e==null?void 0:_e.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in Ue&&Ue.signIn){const Je=await Ue.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_e==null?void 0:_e.signInWithSolana),{version:"1",domain:Oe.host,uri:Oe.href}),Ce?{statement:Ce}:null));let tt;if(Array.isArray(Je)&&Je[0]&&typeof Je[0]=="object")tt=Je[0];else if(Je&&typeof Je=="object"&&"signedMessage"in Je&&"signature"in Je)tt=Je;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in tt&&"signature"in tt&&(typeof tt.signedMessage=="string"||tt.signedMessage instanceof Uint8Array)&&tt.signature instanceof Uint8Array)pe=typeof tt.signedMessage=="string"?tt.signedMessage:new TextDecoder().decode(tt.signedMessage),Ve=tt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Ue)||typeof Ue.signMessage!="function"||!("publicKey"in Ue)||typeof Ue!="object"||!Ue.publicKey||!("toBase58"in Ue.publicKey)||typeof Ue.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");pe=[`${Oe.host} wants you to sign in with your Solana account:`,Ue.publicKey.toBase58(),...Ce?["",Ce,""]:[""],"Version: 1",`URI: ${Oe.href}`,`Issued At: ${(g=(c=_e==null?void 0:_e.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&g!==void 0?g:new Date().toISOString()}`,...!((S=_e==null?void 0:_e.signInWithSolana)===null||S===void 0)&&S.notBefore?[`Not Before: ${_e.signInWithSolana.notBefore}`]:[],...!((b=_e==null?void 0:_e.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${_e.signInWithSolana.expirationTime}`]:[],...!((u=_e==null?void 0:_e.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${_e.signInWithSolana.chainId}`]:[],...!((k=_e==null?void 0:_e.signInWithSolana)===null||k===void 0)&&k.nonce?[`Nonce: ${_e.signInWithSolana.nonce}`]:[],...!((A=_e==null?void 0:_e.signInWithSolana)===null||A===void 0)&&A.requestId?[`Request ID: ${_e.signInWithSolana.requestId}`]:[],...!((B=(O=_e==null?void 0:_e.signInWithSolana)===null||O===void 0?void 0:O.resources)===null||B===void 0)&&B.length?["Resources",..._e.signInWithSolana.resources.map(tt=>`- ${tt}`)]:[]].join(`
`);const Je=await Ue.signMessage(new TextEncoder().encode(pe),"utf8");if(!Je||!(Je instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");Ve=Je}}try{const{data:Pe,error:Se}=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:pe,signature:K5(Ve)},!((W=t.options)===null||W===void 0)&&W.captchaToken?{gotrue_meta_security:{captcha_token:(ie=t.options)===null||ie===void 0?void 0:ie.captchaToken}}:null),xform:Qu});if(Se)throw Se;return!Pe||!Pe.session||!Pe.user?{data:{user:null,session:null},error:new Px}:(Pe.session&&(await this._saveSession(Pe.session),await this._notifyAllSubscribers("SIGNED_IN",Pe.session)),{data:Object.assign({},Pe),error:Se})}catch(Pe){if(ar(Pe))return{data:{user:null,session:null},error:Pe};throw Pe}}async _exchangeCodeForSession(t){const a=await xf(this.storage,`${this.storageKey}-code-verifier`),[c,g]=(a??"").split("/");try{const{data:S,error:b}=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:c},xform:Qu});if(await uh(this.storage,`${this.storageKey}-code-verifier`),b)throw b;return!S||!S.session||!S.user?{data:{user:null,session:null,redirectType:null},error:new Px}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign(Object.assign({},S),{redirectType:g??null}),error:b})}catch(S){if(ar(S))return{data:{user:null,session:null,redirectType:null},error:S};throw S}}async signInWithIdToken(t){try{const{options:a,provider:c,token:g,access_token:S,nonce:b}=t,u=await Cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:g,access_token:S,nonce:b,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qu}),{data:k,error:A}=u;return A?{data:{user:null,session:null},error:A}:!k||!k.session||!k.user?{data:{user:null,session:null},error:new Px}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:k,error:A})}catch(a){if(ar(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,c,g,S,b;try{if("email"in t){const{email:u,options:k}=t;let A=null,O=null;this.flowType==="pkce"&&([A,O]=await ep(this.storage,this.storageKey));const{error:B}=await Cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(a=k==null?void 0:k.data)!==null&&a!==void 0?a:{},create_user:(c=k==null?void 0:k.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken},code_challenge:A,code_challenge_method:O},redirectTo:k==null?void 0:k.emailRedirectTo});return{data:{user:null,session:null},error:B}}if("phone"in t){const{phone:u,options:k}=t,{data:A,error:O}=await Cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(g=k==null?void 0:k.data)!==null&&g!==void 0?g:{},create_user:(S=k==null?void 0:k.shouldCreateUser)!==null&&S!==void 0?S:!0,gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken},channel:(b=k==null?void 0:k.channel)!==null&&b!==void 0?b:"sms"}});return{data:{user:null,session:null,messageId:A==null?void 0:A.message_id},error:O}}throw new jx("You must provide either an email or phone number.")}catch(u){if(ar(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var a,c;try{let g,S;"options"in t&&(g=(a=t.options)===null||a===void 0?void 0:a.redirectTo,S=(c=t.options)===null||c===void 0?void 0:c.captchaToken);const{data:b,error:u}=await Cr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:S}}),redirectTo:g,xform:Qu});if(u)throw u;if(!b)throw new Error("An error occurred on token verification.");const k=b.session,A=b.user;return k!=null&&k.access_token&&(await this._saveSession(k),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",k)),{data:{user:A,session:k},error:null}}catch(g){if(ar(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSSO(t){var a,c,g;try{let S=null,b=null;return this.flowType==="pkce"&&([S,b]=await ep(this.storage,this.storageKey)),await Cr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(c=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((g=t==null?void 0:t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:S,code_challenge_method:b}),headers:this.headers,xform:pO})}catch(S){if(ar(S))return{data:null,error:S};throw S}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:c}=t;if(c)throw c;if(!a)throw new dh;const{error:g}=await Cr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:g}})}catch(t){if(ar(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:c,type:g,options:S}=t,{error:b}=await Cr(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:g,gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},redirectTo:S==null?void 0:S.emailRedirectTo});return{data:{user:null,session:null},error:b}}else if("phone"in t){const{phone:c,type:g,options:S}=t,{data:b,error:u}=await Cr(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:g,gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:u}}throw new jx("You must provide either an email or phone number and a type")}catch(a){if(ar(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),g=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await g}catch{}})()),g}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const g=[...this.pendingInLock];await Promise.all(g),this.pendingInLock.splice(0,g.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await xf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const c=t.expires_at?t.expires_at*1e3-Date.now()<H1:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",t.expires_at),!c){if(this.userStorage){const b=await xf(this.userStorage,this.storageKey+"-user");b!=null&&b.user?t.user=b.user:t.user=Z1()}if(this.storage.isServer&&t.user){let b=this.suppressGetSessionWarning;t=new Proxy(t,{get:(k,A,O)=>(!b&&A==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(k,A,O))})}return{data:{session:t},error:null}}const{session:g,error:S}=await this._callRefreshToken(t.refresh_token);return S?{data:{session:null},error:S}:{data:{session:g},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fh}):await this._useSession(async a=>{var c,g,S;const{data:b,error:u}=a;if(u)throw u;return!(!((c=b.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dh}:await Cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(S=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&S!==void 0?S:void 0,xform:fh})})}catch(a){if(ar(a))return F5(a)&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async c=>{const{data:g,error:S}=c;if(S)throw S;if(!g.session)throw new dh;const b=g.session;let u=null,k=null;this.flowType==="pkce"&&t.email!=null&&([u,k]=await ep(this.storage,this.storageKey));const{data:A,error:O}=await Cr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:k}),jwt:b.access_token,xform:fh});if(O)throw O;return b.user=A.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),{data:{user:b.user},error:null}})}catch(c){if(ar(c))return{data:{user:null},error:c};throw c}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new dh;const a=Date.now()/1e3;let c=a,g=!0,S=null;const{payload:b}=W1(t.access_token);if(b.exp&&(c=b.exp,g=c<=a),g){const{session:u,error:k}=await this._callRefreshToken(t.refresh_token);if(k)return{data:{user:null,session:null},error:k};if(!u)return{data:{user:null,session:null},error:null};S=u}else{const{data:u,error:k}=await this._getUser(t.access_token);if(k)throw k;S={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(S),await this._notifyAllSubscribers("SIGNED_IN",S)}return{data:{user:S.user,session:S},error:null}}catch(a){if(ar(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var c;if(!t){const{data:b,error:u}=a;if(u)throw u;t=(c=b.session)!==null&&c!==void 0?c:void 0}if(!(t!=null&&t.refresh_token))throw new dh;const{session:g,error:S}=await this._callRefreshToken(t.refresh_token);return S?{data:{user:null,session:null},error:S}:g?{data:{user:g.user,session:g},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(ar(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!uc())throw new kx("No browser detected.");if(t.error||t.error_description||t.error_code)throw new kx(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new kT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kx("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new kT("No code detected.");const{data:Ce,error:_e}=await this._exchangeCodeForSession(t.code);if(_e)throw _e;const Ue=new URL(window.location.href);return Ue.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Ue.toString()),{data:{session:Ce.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:g,access_token:S,refresh_token:b,expires_in:u,expires_at:k,token_type:A}=t;if(!S||!u||!b||!A)throw new kx("No session defined in URL");const O=Math.round(Date.now()/1e3),B=parseInt(u);let W=O+B;k&&(W=parseInt(k));const ie=W-O;ie*1e3<=ip&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${ie}s, should have been closer to ${B}s`);const pe=W-B;O-pe>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",pe,W,O):O-pe<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",pe,W,O);const{data:Ve,error:Pe}=await this._getUser(S);if(Pe)throw Pe;const Se={provider_token:c,provider_refresh_token:g,access_token:S,expires_in:B,expires_at:W,refresh_token:b,token_type:A,user:Ve.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Se,redirectType:t.type},error:null}}catch(c){if(ar(c))return{data:{session:null,redirectType:null},error:c};throw c}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await xf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:g,error:S}=a;if(S)return{error:S};const b=(c=g.session)===null||c===void 0?void 0:c.access_token;if(b){const{error:u}=await this.admin.signOut(b,t);if(u&&!(B5(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=X5(),c={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(t){return await this._useSession(async a=>{var c,g;try{const{data:{session:S},error:b}=a;if(b)throw b;await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",S)),this._debug("INITIAL_SESSION","callback id",t,"session",S)}catch(S){await((g=this.stateChangeEmitters.get(t))===null||g===void 0?void 0:g.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",S),console.error(S)}})}async resetPasswordForEmail(t,a={}){let c=null,g=null;this.flowType==="pkce"&&([c,g]=await ep(this.storage,this.storageKey,!0));try{return await Cr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:c,code_challenge_method:g,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(S){if(ar(S))return{data:null,error:S};throw S}}async getUserIdentities(){var t;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:c,error:g}=await this._useSession(async S=>{var b,u,k,A,O;const{data:B,error:W}=S;if(W)throw W;const ie=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(b=t.options)===null||b===void 0?void 0:b.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(k=t.options)===null||k===void 0?void 0:k.queryParams,skipBrowserRedirect:!0});return await Cr(this.fetch,"GET",ie,{headers:this.headers,jwt:(O=(A=B.session)===null||A===void 0?void 0:A.access_token)!==null&&O!==void 0?O:void 0})});if(g)throw g;return uc()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c==null?void 0:c.url),{data:{provider:t.provider,url:c==null?void 0:c.url},error:null}}catch(c){if(ar(c))return{data:{provider:t.provider,url:null},error:c};throw c}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var c,g;const{data:S,error:b}=a;if(b)throw b;return await Cr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(g=(c=S.session)===null||c===void 0?void 0:c.access_token)!==null&&g!==void 0?g:void 0})})}catch(a){if(ar(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await tO(async g=>(g>0&&await eO(200*Math.pow(2,g-1)),this._debug(a,"refreshing attempt",g),await Cr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qu})),(g,S)=>{const b=200*Math.pow(2,g);return S&&G1(S)&&Date.now()+b-c<ip})}catch(c){if(this._debug(a,"error",c),ar(c))return{data:{session:null,user:null},error:c};throw c}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",c),uc()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:t,url:c},error:null}}async _recoverAndRefresh(){var t,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const g=await xf(this.storage,this.storageKey);if(g&&this.userStorage){let b=await xf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:g.user},await sp(this.userStorage,this.storageKey+"-user",b)),g.user=(t=b==null?void 0:b.user)!==null&&t!==void 0?t:Z1()}else if(g&&!g.user&&!g.user){const b=await xf(this.storage,this.storageKey+"-user");b&&(b!=null&&b.user)?(g.user=b.user,await uh(this.storage,this.storageKey+"-user"),await sp(this.storage,this.storageKey,g)):g.user=Z1()}if(this._debug(c,"session from storage",g),!this._isValidSession(g)){this._debug(c,"session is not valid"),g!==null&&await this._removeSession();return}const S=((a=g.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<H1;if(this._debug(c,`session has${S?"":" not"} expired with margin of ${H1}s`),S){if(this.autoRefreshToken&&g.refresh_token){const{error:b}=await this._callRefreshToken(g.refresh_token);b&&(console.error(b),G1(b)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(g.user&&g.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:u}=await this._getUser(g.access_token);!u&&(b!=null&&b.user)?(g.user=b.user,await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(c,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",g)}catch(g){this._debug(c,"error",g),console.error(g);return}finally{this._debug(c,"end")}}async _callRefreshToken(t){var a,c;if(!t)throw new dh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const g=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(g,"begin");try{this.refreshingDeferred=new h0;const{data:S,error:b}=await this._refreshAccessToken(t);if(b)throw b;if(!S.session)throw new dh;await this._saveSession(S.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",S.session);const u={session:S.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(S){if(this._debug(g,"error",S),ar(S)){const b={session:null,error:S};return G1(S)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(b),b}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(S),S}finally{this.refreshingDeferred=null,this._debug(g,"end")}}async _notifyAllSubscribers(t,a,c=!0){const g=`#_notifyAllSubscribers(${t})`;this._debug(g,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:t,session:a});const S=[],b=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,a)}catch(k){S.push(k)}});if(await Promise.all(b),S.length>0){for(let u=0;u<S.length;u+=1)console.error(S[u]);throw S[0]}}finally{this._debug(g,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await sp(this.userStorage,this.storageKey+"-user",{user:a.user});const g=Object.assign({},a);delete g.user;const S=LT(g);await sp(this.storage,this.storageKey,S)}else{const g=LT(a);await sp(this.storage,this.storageKey,g)}}async _removeSession(){this._debug("#_removeSession()"),await uh(this.storage,this.storageKey),await uh(this.storage,this.storageKey+"-code-verifier"),await uh(this.storage,this.storageKey+"-user"),this.userStorage&&await uh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&uc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ip);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const g=Math.floor((c.expires_at*1e3-t)/ip);this._debug("#_autoRefreshTokenTick()",`access token expires in ${g} ticks, a tick lasts ${ip}ms, refresh threshold is ${TC} ticks`),g<=TC&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!uc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,c){const g=[`provider=${encodeURIComponent(a)}`];if(c!=null&&c.redirectTo&&g.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c!=null&&c.scopes&&g.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[S,b]=await ep(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(S)}`,code_challenge_method:`${encodeURIComponent(b)}`});g.push(u.toString())}if(c!=null&&c.queryParams){const S=new URLSearchParams(c.queryParams);g.push(S.toString())}return c!=null&&c.skipBrowserRedirect&&g.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${t}?${g.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var c;const{data:g,error:S}=a;return S?{data:null,error:S}:await Cr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(ar(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var c,g;const{data:S,error:b}=a;if(b)return{data:null,error:b};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:k,error:A}=await Cr(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(c=S==null?void 0:S.session)===null||c===void 0?void 0:c.access_token});return A?{data:null,error:A}:(t.factorType==="totp"&&(!((g=k==null?void 0:k.totp)===null||g===void 0)&&g.qr_code)&&(k.totp.qr_code=`data:image/svg+xml;utf-8,${k.totp.qr_code}`),{data:k,error:null})})}catch(a){if(ar(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:g,error:S}=a;if(S)return{data:null,error:S};const{data:b,error:u}=await Cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),{data:b,error:u})})}catch(a){if(ar(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:g,error:S}=a;return S?{data:null,error:S}:await Cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(ar(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:c}=await this._challenge({factorId:t.factorId});return c?{data:null,error:c}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const c=(t==null?void 0:t.factors)||[],g=c.filter(b=>b.factor_type==="totp"&&b.status==="verified"),S=c.filter(b=>b.factor_type==="phone"&&b.status==="verified");return{data:{all:c,totp:g,phone:S},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,c;const{data:{session:g},error:S}=t;if(S)return{data:null,error:S};if(!g)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:b}=W1(g.access_token);let u=null;b.aal&&(u=b.aal);let k=u;((c=(a=g.user.factors)===null||a===void 0?void 0:a.filter(B=>B.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(k="aal2");const O=b.amr||[];return{data:{currentLevel:u,nextLevel:k,currentAuthenticationMethods:O},error:null}}))}async fetchJwk(t,a={keys:[]}){let c=a.keys.find(u=>u.kid===t);if(c)return c;const g=Date.now();if(c=this.jwks.keys.find(u=>u.kid===t),c&&this.jwks_cached_at+O5>g)return c;const{data:S,error:b}=await Cr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!S.keys||S.keys.length===0||(this.jwks=S,this.jwks_cached_at=g,c=S.keys.find(u=>u.kid===t),!c)?null:c}async getClaims(t,a={}){try{let c=t;if(!c){const{data:ie,error:pe}=await this.getSession();if(pe||!ie.session)return{data:null,error:pe};c=ie.session.access_token}const{header:g,payload:S,signature:b,raw:{header:u,payload:k}}=W1(c);a!=null&&a.allowExpired||lO(S.exp);const A=!g.alg||g.alg.startsWith("HS")||!g.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(g.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!A){const{error:ie}=await this.getUser(c);if(ie)throw ie;return{data:{claims:S,header:g,signature:b},error:null}}const O=cO(g.alg),B=await crypto.subtle.importKey("jwk",A,O,!0,["verify"]);if(!await crypto.subtle.verify(O,B,b,Z5(`${u}.${k}`)))throw new kC("Invalid JWT signature");return{data:{claims:S,header:g,signature:b},error:null}}catch(c){if(ar(c))return{data:null,error:c};throw c}}}$v.nextInstanceID=0;const SO=$v;class EO extends SO{constructor(t){super(t)}}var DO=function(o,t,a,c){function g(S){return S instanceof a?S:new a(function(b){b(S)})}return new(a||(a=Promise))(function(S,b){function u(O){try{A(c.next(O))}catch(B){b(B)}}function k(O){try{A(c.throw(O))}catch(B){b(B)}}function A(O){O.done?S(O.value):g(O.value).then(u,k)}A((c=c.apply(o,t||[])).next())})};class TO{constructor(t,a,c){var g,S,b;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const u=A5(t),k=new URL(u);this.realtimeUrl=new URL("realtime/v1",k),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",k),this.storageUrl=new URL("storage/v1",k),this.functionsUrl=new URL("functions/v1",k);const A=`sb-${k.hostname.split(".")[0]}-auth-token`,O={db:N5,realtime:E5,auth:Object.assign(Object.assign({},S5),{storageKey:A}),global:C5},B=M5(c??{},O);this.storageKey=(g=B.auth.storageKey)!==null&&g!==void 0?g:"",this.headers=(S=B.global.headers)!==null&&S!==void 0?S:{},B.accessToken?(this.accessToken=B.accessToken,this.auth=new Proxy({},{get:(W,ie)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(ie)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((b=B.auth)!==null&&b!==void 0?b:{},this.headers,B.global.fetch),this.fetch=j5(a,this._getAccessToken.bind(this),B.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},B.realtime)),this.rest=new q3(new URL("rest/v1",k).href,{headers:this.headers,schema:B.db.schema,fetch:this.fetch}),this.storage=new x5(this.storageUrl.href,this.headers,this.fetch,c==null?void 0:c.storage),B.accessToken||this._listenForAuthEvents()}get functions(){return new w3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},c={}){return this.rest.rpc(t,a,c)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return DO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:c}=yield this.auth.getSession();return(a=(t=c.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:c,storage:g,storageKey:S,flowType:b,lock:u,debug:k},A,O){const B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new EO({url:this.authUrl.href,headers:Object.assign(Object.assign({},B),A),storageKey:S,autoRefreshToken:t,persistSession:a,detectSessionInUrl:c,storage:g,flowType:b,lock:u,debug:k,fetch:O,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new o5(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c==null?void 0:c.access_token)})}_handleTokenChanged(t,a,c){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==c?this.changedAccessToken=c:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FT=(o,t,a)=>new TO(o,t,a);function PO(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const t=o.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}PO()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jO=()=>"http://localhost:3000",kO=()=>"ws://localhost:3000",pa={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:jO(),websocketUrl:kO()}},isDevelopment:!0,isProduction:!1};console.log("🔧 Environment Configuration:",{supabaseUrl:pa.supabase.url?"✅ Set":"❌ Missing",supabaseKey:pa.supabase.anonKey?"✅ Set":"❌ Missing",apiUrl:pa.api.url,websocketUrl:pa.api.websocketUrl,currentHost:window.location.hostname,currentProtocol:window.location.protocol,envVar:"http://localhost:3000"});const AO=()=>{const{url:o,anonKey:t}=pa.supabase;if(console.log("🔧 Validating Supabase configuration:",{url:o?"✅ Set":"❌ Missing",anonKey:t?"✅ Set":"❌ Missing",envVars:{VITE_SUPABASE_URL:"✅ Set",VITE_SUPABASE_ANON_KEY:"✅ Set"}}),!o||o==="your_supabase_project_url"||o==="")throw console.error("❌ Supabase URL validation failed:",{url:o,envVar:"https://gthwmwfwvhyriygpcdlr.supabase.co"}),new Error("Invalid Supabase URL. Please check your environment variables.");if(!t||t==="your_supabase_anon_key_here"||t==="")throw console.error("❌ Supabase anon key validation failed:",{anonKey:t?"SET":"MISSING",envVar:"SET"}),new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(o)}catch(a){throw console.error("❌ Supabase URL format validation failed:",{url:o,error:a}),new Error(`Invalid Supabase URL format: ${o}`)}return console.log("✅ Supabase configuration validated successfully"),{url:o,anonKey:t}},MO=()=>{try{const o=AO(),t=FT(o.url,o.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Supabase client created successfully"),t}catch(o){console.error("❌ Failed to create Supabase client:",o);{console.log("🔄 Creating fallback Supabase client for development...");const t=FT("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}});return console.log("✅ Fallback Supabase client created"),t}}},hi=MO();class RO{constructor(){_i(this,"currentUser",null);_i(this,"currentSession",null);_i(this,"currentProfile",null);_i(this,"currentDriverAssignment",null);_i(this,"authStateChangeListener",null);_i(this,"_isInitialized",!1);this.initializeAuth()}async initializeAuth(){try{const{data:{session:t},error:a}=await hi.auth.getSession();if(a){console.error("❌ Error getting session:",a),this._isInitialized=!0;return}t&&(console.log("🔑 Setting initial session for user:",t.user.email),this.currentSession=t,this.currentUser=t.user,console.log("🔑 Session access token:",t.access_token?"Exists":"Missing"),await this.loadUserProfile(t.user.id));const{data:{subscription:c}}=hi.auth.onAuthStateChange(async(g,S)=>{var b;console.log("🔄 Auth state changed:",g,(b=S==null?void 0:S.user)==null?void 0:b.email),this.currentSession=S,this.currentUser=(S==null?void 0:S.user)||null,S&&console.log("🔑 Auth state change - Session access token:",S.access_token?"Exists":"Missing"),S!=null&&S.user?await this.loadUserProfile(S.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()});return this._isInitialized=!0,console.log("✅ Auth service initialized"),()=>c.unsubscribe()}catch(t){console.error("❌ Error initializing auth:",t),this._isInitialized=!0}}async loadUserProfile(t){var a,c,g,S,b,u,k,A,O,B,W,ie,pe;try{const Ve=(c=(a=this.currentUser)==null?void 0:a.user_metadata)==null?void 0:c.roles;if(Ve&&Array.isArray(Ve)&&Ve.length>1){const Je=window.location.pathname;let tt="admin";Je.includes("/driver")?tt="driver":Je.includes("/admin")?tt="admin":tt=["siddharthmali.211@gmail.com"].includes(((S=(g=this.currentUser)==null?void 0:g.email)==null?void 0:S.toLowerCase())||"")?"admin":"driver";const{data:ut,error:Tt}=await hi.from("profiles").select("*").eq("id",t).single();if(Tt){console.error("❌ Error loading user profile:",Tt),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}this.currentProfile={id:ut.id,email:((b=this.currentUser)==null?void 0:b.email)||"",role:tt,full_name:ut.full_name,first_name:((u=ut.full_name)==null?void 0:u.split(" ")[0])||"",last_name:((k=ut.full_name)==null?void 0:k.split(" ").slice(1).join(" "))||"",created_at:ut.created_at,updated_at:ut.updated_at};return}const{data:Se,error:Ce}=await hi.from("profiles").select("*").eq("id",t).single();if(Ce){console.error("❌ Error loading user profile:",Ce),this.setTemporaryProfileWithRoleCheck(t,this.currentUser);return}const Ue=["siddharthmali.211@gmail.com"].includes(((O=(A=this.currentUser)==null?void 0:A.email)==null?void 0:O.toLowerCase())||""),Oe=Ue?"admin":Se.role;console.log(`🔍 User ${(B=this.currentUser)==null?void 0:B.email} - Database role: ${Se.role}, Admin check: ${Ue}, Final role: ${Oe}`),this.currentProfile={id:Se.id,email:((W=this.currentUser)==null?void 0:W.email)||"",role:Oe,full_name:Se.full_name,first_name:((ie=Se.full_name)==null?void 0:ie.split(" ")[0])||"",last_name:((pe=Se.full_name)==null?void 0:pe.split(" ").slice(1).join(" "))||"",created_at:Se.created_at,updated_at:Se.updated_at}}catch(Ve){console.error("❌ Error in loadUserProfile:",Ve),this.setTemporaryProfileWithRoleCheck(t,this.currentUser)}}setTemporaryProfileWithRoleCheck(t,a){var b,u,k,A,O,B,W,ie;console.log("🔄 Setting temporary profile with role check for user login");const S=["siddharthmali.211@gmail.com"].includes(((b=a.email)==null?void 0:b.toLowerCase())||"")?"admin":"student";console.log(`🔍 User ${a.email} assigned role: ${S}`),this.currentProfile={id:t,email:a.email||"",role:S,full_name:((u=a.user_metadata)==null?void 0:u.full_name)||((k=a.email)==null?void 0:k.split("@")[0])||"User",first_name:((O=(A=a.user_metadata)==null?void 0:A.full_name)==null?void 0:O.split(" ")[0])||((B=a.email)==null?void 0:B.split("@")[0])||"User",last_name:((ie=(W=a.user_metadata)==null?void 0:W.full_name)==null?void 0:ie.split(" ").slice(1).join(" "))||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}async signIn(t,a){var c;try{console.log("🔐 Starting sign in process for:",t);const g=hi.auth.signInWithPassword({email:t,password:a}),S=new Promise((k,A)=>{setTimeout(()=>A(new Error("Authentication timeout")),5e3)}),{data:b,error:u}=await Promise.race([g,S]);if(u)return console.error("❌ Sign in error:",u),{success:!1,error:u.message};if(console.log("✅ Supabase authentication successful"),b.user&&b.session){console.log("👤 User data received:",b.user.email),this.currentUser=b.user,this.currentSession=b.session,console.log("📋 Loading user profile...");try{const k=this.loadUserProfile(b.user.id),A=new Promise((O,B)=>{setTimeout(()=>B(new Error("Profile loading timeout")),3e3)});await Promise.race([k,A]),console.log("✅ Profile loaded:",(c=this.currentProfile)==null?void 0:c.role)}catch(k){console.warn("⚠️ Profile loading failed, using temporary profile:",k),this.setTemporaryProfileWithRoleCheck(b.user.id,b.user)}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return console.error("❌ No user or session data received"),{success:!1,error:"Authentication failed"}}catch(g){return console.error("❌ Sign in error:",g),g instanceof Error&&g.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:g instanceof Error&&g.message.includes("timeout")?{success:!1,error:"Login timed out. Please try again."}:{success:!1,error:"Network error during sign in"}}}async signUp(t,a,c){try{const{data:g,error:S}=await hi.auth.signUp({email:t,password:a,options:{data:{full_name:c.full_name,role:c.role||"student"}}});if(S)return console.error("❌ Sign up error:",S),{success:!1,error:S.message};if(g.user){const{error:b}=await hi.from("profiles").insert({id:g.user.id,full_name:c.full_name||"Unknown User",role:c.role||"student"});return b?(console.error("❌ Error creating profile:",b),{success:!1,error:"Profile creation failed"}):{success:!0}}return{success:!1,error:"Registration failed"}}catch(g){return console.error("❌ Sign up error:",g),{success:!1,error:"Network error during sign up"}}}async signOut(){try{console.log("🔐 Starting sign out process...");const{error:t}=await hi.auth.signOut();return t?(console.error("❌ Sign out error:",t),{success:!1,error:t.message}):(console.log("✅ Sign out successful"),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(t){return console.error("❌ Sign out error:",t),{success:!1,error:"Network error during sign out"}}}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(t){var a;return((a=this.currentProfile)==null?void 0:a.role)===t}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var a,c,g;let t=((a=this.currentSession)==null?void 0:a.access_token)||null;if(!t)try{const S=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const b of S){const u=localStorage.getItem(b);if(u){const k=JSON.parse(u);if(t=((c=k==null?void 0:k.currentSession)==null?void 0:c.access_token)||(k==null?void 0:k.access_token)||((g=k==null?void 0:k.session)==null?void 0:g.access_token)||null,t){console.log(`🔑 Retrieved token from localStorage fallback (${b})`);break}}}}catch(S){console.warn("⚠️ Error reading token from localStorage:",S)}return console.log("🔑 getAccessToken called:",t?"Token exists":"No token","Session:",!!this.currentSession),t}async validateTokenForAPI(){let t=this.getAccessToken(),a=!1;if(!t)return{valid:!1,token:null,refreshed:!1};try{const{data:{user:c},error:g}=await hi.auth.getUser(t);if(g||!c){console.log("🔄 Token validation failed, attempting refresh:",g==null?void 0:g.message);const S=await this.refreshSession();if(S.success)t=this.getAccessToken(),a=!0,console.log("✅ Token refreshed successfully");else return console.log("❌ Token refresh failed:",S.error),{valid:!1,token:null,refreshed:!1}}if(t){const{data:{user:S},error:b}=await hi.auth.getUser(t);return b||!S?(console.log("❌ Final token validation failed:",b==null?void 0:b.message),{valid:!1,token:null,refreshed:a}):{valid:!0,token:t,refreshed:a}}return{valid:!1,token:null,refreshed:a}}catch(c){return console.error("❌ Token validation error:",c),{valid:!1,token:null,refreshed:!1}}}async refreshSession(){try{if(!this.currentSession)return console.log("🔄 No current session to refresh"),{success:!1,error:"No session to refresh"};const{data:t,error:a}=await hi.auth.refreshSession();return a?a.message.includes("Auth session missing")?(console.log("🔄 No session to refresh (expected for unauthenticated users)"),{success:!1,error:"No session to refresh"}):(console.error("❌ Session refresh error:",a),{success:!1,error:a.message}):t.session?(this.currentSession=t.session,this.currentUser=t.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(t){return console.error("❌ Session refresh error:",t),{success:!1,error:"Network error during session refresh"}}}async updateProfile(t){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:a}=await hi.from("profiles").update(t).eq("id",this.currentUser.id);return a?(console.error("❌ Profile update error:",a),{success:!1,error:a.message}):(await this.loadUserProfile(this.currentUser.id),{success:!0})}catch(a){return console.error("❌ Profile update error:",a),{success:!1,error:"Network error during profile update"}}}onAuthStateChange(t){this.authStateChangeListener=t}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}async forceFreshLogin(){try{console.log("🔄 Forcing fresh login...");const t=[];for(let a=0;a<localStorage.length;a++){const c=localStorage.key(a);c&&(c.includes("supabase")||c.includes("auth")||c.includes("sb-"))&&t.push(c)}return t.forEach(a=>{localStorage.removeItem(a),console.log(`🗑️ Removed localStorage key: ${a}`)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,console.log("✅ Fresh login state prepared"),{success:!0}}catch(t){return console.error("❌ Error forcing fresh login:",t),{success:!1,error:"Failed to force fresh login"}}}async recoverSession(){var t,a,c,g;try{console.log("🔄 Attempting to recover session from localStorage...");const S=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let b=null,u=null;for(const W of S){const ie=localStorage.getItem(W);if(ie){b=ie,u=W,console.log(`📝 Found session in localStorage key: ${W}`);break}}if(!b)return console.log("📝 No stored session found in any localStorage key"),{success:!1,error:"No stored session"};let k;try{k=JSON.parse(b)}catch(W){return console.log("❌ Failed to parse stored session:",W),{success:!1,error:"Invalid session format"}}const A=((t=k==null?void 0:k.currentSession)==null?void 0:t.access_token)||(k==null?void 0:k.access_token)||((a=k==null?void 0:k.session)==null?void 0:a.access_token);if(!A)return console.log("🔑 No access token found in stored session structure:",k),{success:!1,error:"No access token in stored session"};console.log("🔑 Found access token, validating...");const{data:{user:O},error:B}=await hi.auth.getUser(A);return B||!O?(console.log("❌ Stored token is invalid:",B==null?void 0:B.message),u&&localStorage.removeItem(u),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:A,refresh_token:((c=k==null?void 0:k.currentSession)==null?void 0:c.refresh_token)||(k==null?void 0:k.refresh_token),expires_in:((g=k==null?void 0:k.currentSession)==null?void 0:g.expires_in)||(k==null?void 0:k.expires_in),token_type:"bearer",user:O},this.currentUser=O,await this.loadUserProfile(O.id),console.log("✅ Session recovered successfully for user:",O.email),{success:!0})}catch(S){return console.error("❌ Error recovering session:",S),{success:!1,error:"Failed to recover session"}}}async getDriverBusAssignment(t){try{const{data:a,error:c}=await hi.from("buses").select("id, number_plate, route_id").eq("assigned_driver_id",t).eq("is_active",!0).single();if(c||!a)return console.error("❌ Error fetching bus assignment:",c),null;let g="";if(a.route_id){const{data:k,error:A}=await hi.from("routes").select("name").eq("id",a.route_id).single();!A&&k&&(g=k.name)}let S="Unknown Driver";const{data:b,error:u}=await hi.from("profiles").select("full_name").eq("id",t).single();if(!u&&(b!=null&&b.full_name))S=b.full_name;else{const{data:k,error:A}=await hi.from("users").select("first_name, last_name").eq("id",t).single();!A&&k&&(S=`${k.first_name||""} ${k.last_name||""}`.trim()||"Unknown Driver")}return{driver_id:t,bus_id:a.id,bus_number:a.number_plate,route_id:a.route_id||"",route_name:g,driver_name:S,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(a){return console.error("❌ Error in getDriverBusAssignment:",a),null}}async storeDriverBusAssignment(t){try{return this.currentDriverAssignment={...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},console.log("✅ Driver bus assignment stored in memory successfully"),!0}catch(a){return console.error("❌ Error in storeDriverBusAssignment:",a),!1}}async clearDriverBusAssignment(){try{return this.currentDriverAssignment=null,console.log("✅ Driver bus assignment cleared from memory"),!0}catch(t){return console.error("❌ Error in clearDriverBusAssignment:",t),!1}}getCurrentDriverAssignment(){return this.currentDriverAssignment}async validateSession(){try{const{data:{session:t},error:a}=await hi.auth.getSession();if(a)return console.error("❌ Session validation error:",a),!1;if(!t)return console.log("❌ No active session found"),!1;const c=new Date(t.expires_at*1e3),g=new Date;if(c.getTime()-g.getTime()<5*60*1e3){console.log("🔄 Session expiring soon, refreshing...");const{data:{session:b},error:u}=await hi.auth.refreshSession();if(u)return console.error("❌ Session refresh error:",u),!1;b&&(this.currentSession=b,this.currentUser=b.user,console.log("✅ Session refreshed successfully"))}return!0}catch(t){return console.error("❌ Error validating session:",t),!1}}async validateDriverSession(){var t;try{if(!await this.validateSession())return{isValid:!1,assignment:null};if(((t=this.currentProfile)==null?void 0:t.role)!=="driver")return console.log("❌ User is not a driver"),{isValid:!1,assignment:null};const c=await this.getDriverBusAssignment(this.currentUser.id);return c?(this.currentDriverAssignment=c,{isValid:!0,assignment:c}):(console.log("❌ No active bus assignment found for driver"),{isValid:!1,assignment:null})}catch(a){return console.error("❌ Error validating driver session:",a),{isValid:!1,assignment:null}}}async logout(){var t;try{this.currentUser&&((t=this.currentProfile)==null?void 0:t.role)==="driver"&&await this.clearDriverBusAssignment(),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.currentDriverAssignment=null;const{error:a}=await hi.auth.signOut();a?console.error("❌ Error signing out:",a):console.log("✅ Logged out successfully")}catch(a){console.error("❌ Error in logout:",a)}}}const Ur=new RO,IO=pa.api.url;class LO{constructor(t){_i(this,"baseUrl");this.baseUrl=t}async backendRequest(t,a){const g=`${this.baseUrl||pa.api.url}${t}`,S={"Content-Type":"application/json"};try{const u=Ur.getAccessToken();u&&(S.Authorization=`Bearer ${u}`)}catch{console.log("🔓 Public access - no authentication token available")}a!=null&&a.headers&&Object.assign(S,a.headers);const b=await fetch(g,{headers:S,...a});if(!b.ok){const u=await b.json().catch(()=>({}));throw new Error(u.message||u.error||`API request failed: ${b.status} ${b.statusText}`)}return b.json()}async getHealth(){return this.backendRequest("/health")}async getAllBuses(){try{const t=await this.backendRequest("/buses");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching buses from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getAllBuses:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getBusInfo(t){try{const a=await this.backendRequest(`/buses/${t}`);return a.success&&a.data?{success:!0,data:a.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching bus info from backend:",a.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(a){return console.error("❌ Error in getBusInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getRoutes(){try{const t=await this.backendRequest("/routes");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching routes from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getRoutes:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getRouteInfo(t){try{const a=await this.backendRequest(`/routes/${t}`);return a.success&&a.data?{success:!0,data:a.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching route info from backend:",a.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(a){return console.error("❌ Error in getRouteInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getAllDrivers(){try{const t=await this.backendRequest("/admin/drivers");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching drivers from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getAllDrivers:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async getDriverInfo(t){try{const a=await this.backendRequest(`/admin/drivers/${t}`);return a.success&&a.data?{success:!0,data:a.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching driver info from backend:",a.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(a){return console.error("❌ Error in getDriverInfo:",a),{success:!1,data:null,timestamp:new Date().toISOString()}}}async getLiveLocations(){try{const t=await this.backendRequest("/locations/current");return t.success&&t.data?{success:!0,data:t.data,timestamp:new Date().toISOString()}:(console.error("❌ Error fetching live locations from backend:",t.error),{success:!1,data:[],timestamp:new Date().toISOString()})}catch(t){return console.error("❌ Error in getLiveLocations:",t),{success:!1,data:[],timestamp:new Date().toISOString()}}}async updateLiveLocation(t,a,c){try{const g=await this.backendRequest("/locations/update",{method:"POST",body:JSON.stringify({busId:t,driverId:a,latitude:c.latitude,longitude:c.longitude,speed:c.speed,heading:c.heading,timestamp:new Date().toISOString()})});return g.success&&g.data?{success:!0,data:g.data,timestamp:new Date().toISOString()}:(console.error("❌ Error updating live location via backend:",g.error),{success:!1,data:null,timestamp:new Date().toISOString()})}catch(g){return console.error("❌ Error in updateLiveLocation:",g),{success:!1,data:null,timestamp:new Date().toISOString()}}}}const qv=new LO(IO),iu=Object.create(null);iu.open="0";iu.close="1";iu.ping="2";iu.pong="3";iu.message="4";iu.upgrade="5";iu.noop="6";const Ux=Object.create(null);Object.keys(iu).forEach(o=>{Ux[iu[o]]=o});const AC={type:"error",data:"parser error"},Kj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Yj=typeof ArrayBuffer=="function",Xj=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,vN=({type:o,data:t},a,c)=>Kj&&t instanceof Blob?a?c(t):UT(t,c):Yj&&(t instanceof ArrayBuffer||Xj(t))?a?c(t):UT(new Blob([t]),c):c(iu[o]+(t||"")),UT=(o,t)=>{const a=new FileReader;return a.onload=function(){const c=a.result.split(",")[1];t("b"+(c||""))},a.readAsDataURL(o)};function $T(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}let Y1;function VO(o,t){if(Kj&&o.data instanceof Blob)return o.data.arrayBuffer().then($T).then(t);if(Yj&&(o.data instanceof ArrayBuffer||Xj(o.data)))return t($T(o.data));vN(o,!1,a=>{Y1||(Y1=new TextEncoder),t(Y1.encode(a))})}const qT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<qT.length;o++)Pv[qT.charCodeAt(o)]=o;const OO=o=>{let t=o.length*.75,a=o.length,c,g=0,S,b,u,k;o[o.length-1]==="="&&(t--,o[o.length-2]==="="&&t--);const A=new ArrayBuffer(t),O=new Uint8Array(A);for(c=0;c<a;c+=4)S=Pv[o.charCodeAt(c)],b=Pv[o.charCodeAt(c+1)],u=Pv[o.charCodeAt(c+2)],k=Pv[o.charCodeAt(c+3)],O[g++]=S<<2|b>>4,O[g++]=(b&15)<<4|u>>2,O[g++]=(u&3)<<6|k&63;return A},zO=typeof ArrayBuffer=="function",yN=(o,t)=>{if(typeof o!="string")return{type:"message",data:Jj(o,t)};const a=o.charAt(0);return a==="b"?{type:"message",data:BO(o.substring(1),t)}:Ux[a]?o.length>1?{type:Ux[a],data:o.substring(1)}:{type:Ux[a]}:AC},BO=(o,t)=>{if(zO){const a=OO(o);return Jj(a,t)}else return{base64:!0,data:o}},Jj=(o,t)=>{switch(t){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}},Qj="",FO=(o,t)=>{const a=o.length,c=new Array(a);let g=0;o.forEach((S,b)=>{vN(S,!1,u=>{c[b]=u,++g===a&&t(c.join(Qj))})})},UO=(o,t)=>{const a=o.split(Qj),c=[];for(let g=0;g<a.length;g++){const S=yN(a[g],t);if(c.push(S),S.type==="error")break}return c};function $O(){return new TransformStream({transform(o,t){VO(o,a=>{const c=a.length;let g;if(c<126)g=new Uint8Array(1),new DataView(g.buffer).setUint8(0,c);else if(c<65536){g=new Uint8Array(3);const S=new DataView(g.buffer);S.setUint8(0,126),S.setUint16(1,c)}else{g=new Uint8Array(9);const S=new DataView(g.buffer);S.setUint8(0,127),S.setBigUint64(1,BigInt(c))}o.data&&typeof o.data!="string"&&(g[0]|=128),t.enqueue(g),t.enqueue(a)})}})}let X1;function Ax(o){return o.reduce((t,a)=>t+a.length,0)}function Mx(o,t){if(o[0].length===t)return o.shift();const a=new Uint8Array(t);let c=0;for(let g=0;g<t;g++)a[g]=o[0][c++],c===o[0].length&&(o.shift(),c=0);return o.length&&c<o[0].length&&(o[0]=o[0].slice(c)),a}function qO(o,t){X1||(X1=new TextDecoder);const a=[];let c=0,g=-1,S=!1;return new TransformStream({transform(b,u){for(a.push(b);;){if(c===0){if(Ax(a)<1)break;const k=Mx(a,1);S=(k[0]&128)===128,g=k[0]&127,g<126?c=3:g===126?c=1:c=2}else if(c===1){if(Ax(a)<2)break;const k=Mx(a,2);g=new DataView(k.buffer,k.byteOffset,k.length).getUint16(0),c=3}else if(c===2){if(Ax(a)<8)break;const k=Mx(a,8),A=new DataView(k.buffer,k.byteOffset,k.length),O=A.getUint32(0);if(O>Math.pow(2,21)-1){u.enqueue(AC);break}g=O*Math.pow(2,32)+A.getUint32(4),c=3}else{if(Ax(a)<g)break;const k=Mx(a,g);u.enqueue(yN(S?k:X1.decode(k),t)),c=0}if(g===0||g>o){u.enqueue(AC);break}}}})}const ek=4;function Es(o){if(o)return HO(o)}function HO(o){for(var t in Es.prototype)o[t]=Es.prototype[t];return o}Es.prototype.on=Es.prototype.addEventListener=function(o,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(t),this};Es.prototype.once=function(o,t){function a(){this.off(o,a),t.apply(this,arguments)}return a.fn=t,this.on(o,a),this};Es.prototype.off=Es.prototype.removeListener=Es.prototype.removeAllListeners=Es.prototype.removeEventListener=function(o,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+o];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var c,g=0;g<a.length;g++)if(c=a[g],c===t||c.fn===t){a.splice(g,1);break}return a.length===0&&delete this._callbacks["$"+o],this};Es.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+o],c=1;c<arguments.length;c++)t[c-1]=arguments[c];if(a){a=a.slice(0);for(var c=0,g=a.length;c<g;++c)a[c].apply(this,t)}return this};Es.prototype.emitReserved=Es.prototype.emit;Es.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};Es.prototype.hasListeners=function(o){return!!this.listeners(o).length};const f0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0),bl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),GO="arraybuffer";function tk(o,...t){return t.reduce((a,c)=>(o.hasOwnProperty(c)&&(a[c]=o[c]),a),{})}const WO=bl.setTimeout,ZO=bl.clearTimeout;function m0(o,t){t.useNativeTimers?(o.setTimeoutFn=WO.bind(bl),o.clearTimeoutFn=ZO.bind(bl)):(o.setTimeoutFn=bl.setTimeout.bind(bl),o.clearTimeoutFn=bl.clearTimeout.bind(bl))}const KO=1.33;function YO(o){return typeof o=="string"?XO(o):Math.ceil((o.byteLength||o.size)*KO)}function XO(o){let t=0,a=0;for(let c=0,g=o.length;c<g;c++)t=o.charCodeAt(c),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(c++,a+=4);return a}function nk(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function JO(o){let t="";for(let a in o)o.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(o[a]));return t}function QO(o){let t={},a=o.split("&");for(let c=0,g=a.length;c<g;c++){let S=a[c].split("=");t[decodeURIComponent(S[0])]=decodeURIComponent(S[1])}return t}class ez extends Error{constructor(t,a,c){super(t),this.description=a,this.context=c,this.type="TransportError"}}class bN extends Es{constructor(t){super(),this.writable=!1,m0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,c){return super.emitReserved("error",new ez(t,a,c)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=yN(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=JO(t);return a.length?"?"+a:""}}class tz extends bN{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let c=0;this._polling&&(c++,this.once("pollComplete",function(){--c||a()})),this.writable||(c++,this.once("drain",function(){--c||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=c=>{if(this.readyState==="opening"&&c.type==="open"&&this.onOpen(),c.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(c)};UO(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,FO(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=nk()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let rk=!1;try{rk=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const nz=rk;function rz(){}class iz extends tz{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let c=location.port;c||(c=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||c!==t.port}}doWrite(t,a){const c=this.request({method:"POST",data:t});c.on("success",a),c.on("error",(g,S)=>{this.onError("xhr post error",g,S)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,c)=>{this.onError("xhr poll error",a,c)}),this.pollXhr=t}}let hp=class $x extends Es{constructor(t,a,c){super(),this.createRequest=t,m0(this,c),this._opts=c,this._method=c.method||"GET",this._uri=a,this._data=c.data!==void 0?c.data:null,this._create()}_create(){var t;const a=tk(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const c=this._xhr=this.createRequest(a);try{c.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(let g in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(g)&&c.setRequestHeader(g,this._opts.extraHeaders[g])}}catch{}if(this._method==="POST")try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{c.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(c),"withCredentials"in c&&(c.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(c.timeout=this._opts.requestTimeout),c.onreadystatechange=()=>{var g;c.readyState===3&&((g=this._opts.cookieJar)===null||g===void 0||g.parseCookies(c.getResponseHeader("set-cookie"))),c.readyState===4&&(c.status===200||c.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof c.status=="number"?c.status:0)},0))},c.send(this._data)}catch(g){this.setTimeoutFn(()=>{this._onError(g)},0);return}typeof document<"u"&&(this._index=$x.requestsCount++,$x.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=rz,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $x.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};hp.requestsCount=0;hp.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",HT);else if(typeof addEventListener=="function"){const o="onpagehide"in bl?"pagehide":"unload";addEventListener(o,HT,!1)}}function HT(){for(let o in hp.requests)hp.requests.hasOwnProperty(o)&&hp.requests[o].abort()}const sz=function(){const o=ik({xdomain:!1});return o&&o.responseType!==null}();class az extends iz{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=sz&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new hp(ik,this.uri(),t)}}function ik(o){const t=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||nz))return new XMLHttpRequest}catch{}if(!t)try{return new bl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const sk=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oz extends bN{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,c=sk?{}:tk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,c)}catch(g){return this.emitReserved("error",g)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const c=t[a],g=a===t.length-1;vN(c,this.supportsBinary,S=>{try{this.doWrite(c,S)}catch{}g&&f0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=nk()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const J1=bl.WebSocket||bl.MozWebSocket;class lz extends oz{createSocket(t,a,c){return sk?new J1(t,a,c):a?new J1(t,a):new J1(t)}doWrite(t,a){this.ws.send(a)}}class cz extends bN{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=qO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),c=t.readable.pipeThrough(a).getReader(),g=$O();g.readable.pipeTo(t.writable),this._writer=g.writable.getWriter();const S=()=>{c.read().then(({done:u,value:k})=>{u||(this.onPacket(k),S())}).catch(u=>{})};S();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const c=t[a],g=a===t.length-1;this._writer.write(c).then(()=>{g&&f0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const uz={websocket:lz,webtransport:cz,polling:az},dz=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function MC(o){if(o.length>8e3)throw"URI too long";const t=o,a=o.indexOf("["),c=o.indexOf("]");a!=-1&&c!=-1&&(o=o.substring(0,a)+o.substring(a,c).replace(/:/g,";")+o.substring(c,o.length));let g=dz.exec(o||""),S={},b=14;for(;b--;)S[hz[b]]=g[b]||"";return a!=-1&&c!=-1&&(S.source=t,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,":"),S.authority=S.authority.replace("[","").replace("]","").replace(/;/g,":"),S.ipv6uri=!0),S.pathNames=fz(S,S.path),S.queryKey=mz(S,S.query),S}function fz(o,t){const a=/\/{2,9}/g,c=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&c.splice(0,1),t.slice(-1)=="/"&&c.splice(c.length-1,1),c}function mz(o,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(c,g,S){g&&(a[g]=S)}),a}const RC=typeof addEventListener=="function"&&typeof removeEventListener=="function",qx=[];RC&&addEventListener("offline",()=>{qx.forEach(o=>o())},!1);class ph extends Es{constructor(t,a){if(super(),this.binaryType=GO,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const c=MC(t);a.hostname=c.host,a.secure=c.protocol==="https"||c.protocol==="wss",a.port=c.port,c.query&&(a.query=c.query)}else a.host&&(a.hostname=MC(a.host).host);m0(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(c=>{const g=c.prototype.name;this.transports.push(g),this._transportsByName[g]=c}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=QO(this.opts.query)),RC&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},qx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=ek,a.transport=t,this.id&&(a.sid=this.id);const c=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](c)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ph.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",ph.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let c=0;c<this.writeBuffer.length;c++){const g=this.writeBuffer[c].data;if(g&&(a+=YO(g)),c>0&&a>this._maxPayload)return this.writeBuffer.slice(0,c);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,f0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,c){return this._sendPacket("message",t,a,c),this}send(t,a,c){return this._sendPacket("message",t,a,c),this}_sendPacket(t,a,c,g){if(typeof a=="function"&&(g=a,a=void 0),typeof c=="function"&&(g=c,c=null),this.readyState==="closing"||this.readyState==="closed")return;c=c||{},c.compress=c.compress!==!1;const S={type:t,data:a,options:c};this.emitReserved("packetCreate",S),this.writeBuffer.push(S),g&&this.once("flush",g),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},c=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():t()}):this.upgrading?c():t()),this}_onError(t){if(ph.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),RC&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const c=qx.indexOf(this._offlineEventListener);c!==-1&&qx.splice(c,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}ph.protocol=ek;class pz extends ph{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),c=!1;ph.priorWebsocketSuccess=!1;const g=()=>{c||(a.send([{type:"ping",data:"probe"}]),a.once("packet",B=>{if(!c)if(B.type==="pong"&&B.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;ph.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{c||this.readyState!=="closed"&&(O(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const W=new Error("probe error");W.transport=a.name,this.emitReserved("upgradeError",W)}}))};function S(){c||(c=!0,O(),a.close(),a=null)}const b=B=>{const W=new Error("probe error: "+B);W.transport=a.name,S(),this.emitReserved("upgradeError",W)};function u(){b("transport closed")}function k(){b("socket closed")}function A(B){a&&B.name!==a.name&&S()}const O=()=>{a.removeListener("open",g),a.removeListener("error",b),a.removeListener("close",u),this.off("close",k),this.off("upgrading",A)};a.once("open",g),a.once("error",b),a.once("close",u),this.once("close",k),this.once("upgrading",A),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{c||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let c=0;c<t.length;c++)~this.transports.indexOf(t[c])&&a.push(t[c]);return a}}let gz=class extends pz{constructor(t,a={}){const c=typeof t=="object"?t:a;(!c.transports||c.transports&&typeof c.transports[0]=="string")&&(c.transports=(c.transports||["polling","websocket","webtransport"]).map(g=>uz[g]).filter(g=>!!g)),super(t,c)}};function vz(o,t="",a){let c=o;a=a||typeof location<"u"&&location,o==null&&(o=a.protocol+"//"+a.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=a.protocol+o:o=a.host+o),/^(https?|wss?):\/\//.test(o)||(typeof a<"u"?o=a.protocol+"//"+o:o="https://"+o),c=MC(o)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/";const S=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host;return c.id=c.protocol+"://"+S+":"+c.port+t,c.href=c.protocol+"://"+S+(a&&a.port===c.port?"":":"+c.port),c}const yz=typeof ArrayBuffer=="function",bz=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,ak=Object.prototype.toString,xz=typeof Blob=="function"||typeof Blob<"u"&&ak.call(Blob)==="[object BlobConstructor]",_z=typeof File=="function"||typeof File<"u"&&ak.call(File)==="[object FileConstructor]";function xN(o){return yz&&(o instanceof ArrayBuffer||bz(o))||xz&&o instanceof Blob||_z&&o instanceof File}function Hx(o,t){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let a=0,c=o.length;a<c;a++)if(Hx(o[a]))return!0;return!1}if(xN(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return Hx(o.toJSON(),!0);for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&Hx(o[a]))return!0;return!1}function wz(o){const t=[],a=o.data,c=o;return c.data=IC(a,t),c.attachments=t.length,{packet:c,buffers:t}}function IC(o,t){if(!o)return o;if(xN(o)){const a={_placeholder:!0,num:t.length};return t.push(o),a}else if(Array.isArray(o)){const a=new Array(o.length);for(let c=0;c<o.length;c++)a[c]=IC(o[c],t);return a}else if(typeof o=="object"&&!(o instanceof Date)){const a={};for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=IC(o[c],t));return a}return o}function Cz(o,t){return o.data=LC(o.data,t),delete o.attachments,o}function LC(o,t){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<t.length)return t[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let a=0;a<o.length;a++)o[a]=LC(o[a],t);else if(typeof o=="object")for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(o[a]=LC(o[a],t));return o}const Nz=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Sz=5;var Tr;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(Tr||(Tr={}));class Ez{constructor(t){this.replacer=t}encode(t){return(t.type===Tr.EVENT||t.type===Tr.ACK)&&Hx(t)?this.encodeAsBinary({type:t.type===Tr.EVENT?Tr.BINARY_EVENT:Tr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===Tr.BINARY_EVENT||t.type===Tr.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=wz(t),c=this.encodeAsString(a.packet),g=a.buffers;return g.unshift(c),g}}function GT(o){return Object.prototype.toString.call(o)==="[object Object]"}class _N extends Es{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const c=a.type===Tr.BINARY_EVENT;c||a.type===Tr.BINARY_ACK?(a.type=c?Tr.EVENT:Tr.ACK,this.reconstructor=new Dz(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(xN(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const c={type:Number(t.charAt(0))};if(Tr[c.type]===void 0)throw new Error("unknown packet type "+c.type);if(c.type===Tr.BINARY_EVENT||c.type===Tr.BINARY_ACK){const S=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const b=t.substring(S,a);if(b!=Number(b)||t.charAt(a)!=="-")throw new Error("Illegal attachments");c.attachments=Number(b)}if(t.charAt(a+1)==="/"){const S=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););c.nsp=t.substring(S,a)}else c.nsp="/";const g=t.charAt(a+1);if(g!==""&&Number(g)==g){const S=a+1;for(;++a;){const b=t.charAt(a);if(b==null||Number(b)!=b){--a;break}if(a===t.length)break}c.id=Number(t.substring(S,a+1))}if(t.charAt(++a)){const S=this.tryParse(t.substr(a));if(_N.isPayloadValid(c.type,S))c.data=S;else throw new Error("invalid payload")}return c}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case Tr.CONNECT:return GT(a);case Tr.DISCONNECT:return a===void 0;case Tr.CONNECT_ERROR:return typeof a=="string"||GT(a);case Tr.EVENT:case Tr.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Nz.indexOf(a[0])===-1);case Tr.ACK:case Tr.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Dz{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=Cz(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Tz=Object.freeze(Object.defineProperty({__proto__:null,Decoder:_N,Encoder:Ez,get PacketType(){return Tr},protocol:Sz},Symbol.toStringTag,{value:"Module"}));function fc(o,t,a){return o.on(t,a),function(){o.off(t,a)}}const Pz=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ok extends Es{constructor(t,a,c){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,c&&c.auth&&(this.auth=c.auth),this._opts=Object.assign({},c),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[fc(t,"open",this.onopen.bind(this)),fc(t,"packet",this.onpacket.bind(this)),fc(t,"error",this.onerror.bind(this)),fc(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var c,g,S;if(Pz.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const b={type:Tr.EVENT,data:a};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const O=this.ids++,B=a.pop();this._registerAckCallback(O,B),b.id=O}const u=(g=(c=this.io.engine)===null||c===void 0?void 0:c.transport)===null||g===void 0?void 0:g.writable,k=this.connected&&!(!((S=this.io.engine)===null||S===void 0)&&S._hasPingExpired());return this.flags.volatile&&!u||(k?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(t,a){var c;const g=(c=this.flags.timeout)!==null&&c!==void 0?c:this._opts.ackTimeout;if(g===void 0){this.acks[t]=a;return}const S=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);a.call(this,new Error("operation has timed out"))},g),b=(...u)=>{this.io.clearTimeoutFn(S),a.apply(this,u)};b.withError=!0,this.acks[t]=b}emitWithAck(t,...a){return new Promise((c,g)=>{const S=(b,u)=>b?g(b):c(u);S.withError=!0,a.push(S),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const c={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((g,...S)=>c!==this._queue[0]?void 0:(g!==null?c.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(g)):(this._queue.shift(),a&&a(null,...S)),c.pending=!1,this._drainQueue())),this._queue.push(c),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Tr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(c=>String(c.id)===t)){const c=this.acks[t];delete this.acks[t],c.withError&&c.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Tr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tr.EVENT:case Tr.BINARY_EVENT:this.onevent(t);break;case Tr.ACK:case Tr.BINARY_ACK:this.onack(t);break;case Tr.DISCONNECT:this.ondisconnect();break;case Tr.CONNECT_ERROR:this.destroy();const c=new Error(t.data.message);c.data=t.data.data,this.emitReserved("connect_error",c);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const c of a)c.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let c=!1;return function(...g){c||(c=!0,a.packet({type:Tr.ACK,id:t,data:g}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let c=0;c<a.length;c++)if(t===a[c])return a.splice(c,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let c=0;c<a.length;c++)if(t===a[c])return a.splice(c,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const c of a)c.apply(this,t.data)}}}function wp(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}wp.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*o);o=Math.floor(t*10)&1?o+a:o-a}return Math.min(o,this.max)|0};wp.prototype.reset=function(){this.attempts=0};wp.prototype.setMin=function(o){this.ms=o};wp.prototype.setMax=function(o){this.max=o};wp.prototype.setJitter=function(o){this.jitter=o};class VC extends Es{constructor(t,a){var c;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,m0(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((c=a.randomizationFactor)!==null&&c!==void 0?c:.5),this.backoff=new wp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const g=a.parser||Tz;this.encoder=new g.Encoder,this.decoder=new g.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new gz(this.uri,this.opts);const a=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;const g=fc(a,"open",function(){c.onopen(),t&&t()}),S=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},b=fc(a,"error",S);if(this._timeout!==!1){const u=this._timeout,k=this.setTimeoutFn(()=>{g(),S(new Error("timeout")),a.close()},u);this.opts.autoUnref&&k.unref(),this.subs.push(()=>{this.clearTimeoutFn(k)})}return this.subs.push(g),this.subs.push(b),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(fc(t,"ping",this.onping.bind(this)),fc(t,"data",this.ondata.bind(this)),fc(t,"error",this.onerror.bind(this)),fc(t,"close",this.onclose.bind(this)),fc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){f0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let c=this.nsps[t];return c?this._autoConnect&&!c.active&&c.connect():(c=new ok(this,t,a),this.nsps[t]=c),c}_destroy(t){const a=Object.keys(this.nsps);for(const c of a)if(this.nsps[c].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let c=0;c<a.length;c++)this.engine.write(a[c],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var c;this.cleanup(),(c=this.engine)===null||c===void 0||c.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const c=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(g=>{g?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",g)):t.onreconnect()}))},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ev={};function Gx(o,t){typeof o=="object"&&(t=o,o=void 0),t=t||{};const a=vz(o,t.path||"/socket.io"),c=a.source,g=a.id,S=a.path,b=Ev[g]&&S in Ev[g].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||b;let k;return u?k=new VC(c,t):(Ev[g]||(Ev[g]=new VC(c,t)),k=Ev[g]),a.query&&!t.query&&(t.query=a.queryKey),k.socket(a.path,t)}Object.assign(Gx,{Manager:VC,Socket:ok,io:Gx,connect:Gx});class jz{constructor(){_i(this,"socket",null);_i(this,"_isConnected",!1);_i(this,"connectionState","disconnected");_i(this,"reconnectAttempts",0);_i(this,"maxReconnectAttempts",10);_i(this,"reconnectDelay",1e3);_i(this,"maxReconnectDelay",3e4);_i(this,"heartbeatInterval",null);_i(this,"connectionTimeout",null);_i(this,"lastHeartbeat",0);_i(this,"isShuttingDown",!1);_i(this,"connectionMonitorInterval",null);_i(this,"busLocationListeners",[]);_i(this,"driverConnectedListeners",[]);_i(this,"driverDisconnectedListeners",[]);_i(this,"studentConnectedListeners",[]);_i(this,"busArrivingListeners",[]);this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.handleReconnect=this.handleReconnect.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this),this.monitorConnection=this.monitorConnection.bind(this)}async connect(){var t;if((t=this.socket)!=null&&t.connected||this.connectionState==="connecting"){console.log("🔌 WebSocket already connected or connecting");return}this.isShuttingDown=!1;try{this.connectionState="connecting",console.log("🔌 Connecting to WebSocket server...");const a=pa.api.websocketUrl;console.log("🔌 WebSocket URL:",a),this.socket=Gx(a,{transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:15e3,forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,autoConnect:!1,query:{clientType:"driver",version:"1.0.0",timestamp:Date.now().toString()},extraHeaders:{"User-Agent":"BusTrackingDriver/1.0.0"}}),this.connectionTimeout=setTimeout(()=>{this.connectionState==="connecting"&&(console.error("❌ WebSocket connection timeout"),this.handleError(new Error("Connection timeout")))},15e3),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",this.handleError),this.socket.on("error",this.handleError),this.socket.on("reconnect",this.handleReconnect),this.socket.on("reconnect_attempt",c=>{console.log(`🔄 Reconnection attempt ${c}`)}),this.socket.on("reconnect_error",c=>{console.error("❌ Reconnection error:",c)}),this.socket.on("reconnect_failed",()=>{console.error("❌ Reconnection failed after all attempts")}),this.socket.connect()}catch(a){console.error("❌ WebSocket connection error:",a),this.handleError(a)}}handleConnect(){var t;console.log("✅ WebSocket connected"),this._isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.startHeartbeat(),this.startConnectionMonitoring(),(t=this.socket)==null||t.emit("driver:connected",{timestamp:new Date().toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}})}handleDisconnect(t){console.log("❌ WebSocket disconnected:",t),this._isConnected=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!(this.isShuttingDown||t==="io client disconnect")&&this.handleReconnect()}handleError(t){console.error("❌ WebSocket error:",t),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),!this.isShuttingDown&&(t.type==="TransportError"||t.type==="TransportOpenError")&&this.handleReconnect()}handleReconnect(){if(this.isShuttingDown||this.connectionState==="reconnecting")return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.connectionState="disconnected";return}this.connectionState="reconnecting",this.reconnectAttempts++,console.log(`🔄 Attempting to reconnect... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);const t=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1)+Math.random()*1e3,this.maxReconnectDelay);setTimeout(()=>{this.isShuttingDown||this.connect()},t)}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{var t;(t=this.socket)!=null&&t.connected&&(this.socket.emit("ping"),this.lastHeartbeat=Date.now())},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startConnectionMonitoring(){this.connectionMonitorInterval&&clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=setInterval(()=>{this.monitorConnection()},1e4)}stopConnectionMonitoring(){this.connectionMonitorInterval&&(clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}monitorConnection(){if(!this.socket){console.log("🔍 Connection monitor: No socket available");return}const t=this.socket.connected,a=Date.now()-this.lastHeartbeat;console.log(`🔍 Connection monitor: Connected=${t}, Last heartbeat=${a}ms ago`),t&&a>6e4&&this.lastHeartbeat>0&&(console.warn("⚠️ Connection monitor: No heartbeat received, forcing reconnection"),this.socket.disconnect(),this.handleReconnect()),this._isConnected!==t&&(console.log(`🔄 Connection state changed: ${this._isConnected} -> ${t}`),this._isConnected=t,this.connectionState=t?"connected":"disconnected")}disconnect(){console.log("🔌 Disconnecting WebSocket..."),this.isShuttingDown=!0,this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}reset(){console.log("🔄 Resetting WebSocket service..."),this.isShuttingDown=!1,this.connectionState="disconnected",this._isConnected=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.socket&&(this.socket.disconnect(),this.socket=null),this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}isConnected(){var t;return this._isConnected&&((t=this.socket)==null?void 0:t.connected)===!0}getConnectionState(){return this.connectionState}getConnectionStatus(){return this._isConnected}authenticateAsDriver(t,a){console.log("🔐 Driver: Starting authentication process..."),console.log("🔐 Socket connected:",this.isConnected()),console.log("🔐 Socket state:",this.getConnectionState()),this.socket&&this.isConnected()?(console.log("🔐 Driver: Sending authentication request..."),this.socket.off("driver:authenticated"),this.socket.off("driver:authentication_failed"),this.socket.off("error"),this.socket.once("driver:authenticated",c=>{console.log("✅ Driver: Authentication successful:",c),a!=null&&a.onSuccess&&a.onSuccess(c)}),this.socket.once("driver:authentication_failed",c=>{console.error("❌ Driver: Authentication failed:",c),a!=null&&a.onFailure&&a.onFailure(c)}),this.socket.once("error",c=>{console.error("❌ Driver: Socket error during authentication:",c),a!=null&&a.onError&&a.onError(c)}),this.socket.emit("driver:authenticate",{token:t}),console.log("📤 Authentication request sent with token length:",t.length)):(console.error("❌ Driver: Cannot authenticate - socket not connected"),console.error("❌ Socket object:",!!this.socket),console.error("❌ Connection state:",this.getConnectionState()),a!=null&&a.onError&&a.onError(new Error("Socket not connected")))}sendLocationUpdate(t){this.socket&&this.isConnected()?(console.log("📍 Sending location update:",t),this.socket.emit("driver:locationUpdate",t)):console.error("❌ Cannot send location update - socket not connected")}onBusLocationUpdate(t){var a;this.busLocationListeners.push(t),(a=this.socket)==null||a.on("bus:locationUpdate",t)}onDriverConnected(t){var a;this.driverConnectedListeners.push(t),(a=this.socket)==null||a.on("driver:connected",t)}onDriverDisconnected(t){var a;this.driverDisconnectedListeners.push(t),(a=this.socket)==null||a.on("driver:disconnected",t)}onStudentConnected(t){var a;this.studentConnectedListeners.push(t),(a=this.socket)==null||a.on("student:connected",t)}onBusArriving(t){var a;this.busArrivingListeners.push(t),(a=this.socket)==null||a.on("bus:arriving",t)}off(t){var a;(a=this.socket)==null||a.off(t)}getConnectionStats(){return{isConnected:this._isConnected,connectionState:this.connectionState,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHeartbeat:this.lastHeartbeat,uptime:this.lastHeartbeat>0?Date.now()-this.lastHeartbeat:0}}async healthCheck(){var c;const t=this.getConnectionStats();return{healthy:this.isConnected()&&this.connectionState==="connected"&&t.lastHeartbeat>0&&Date.now()-t.lastHeartbeat<6e4,details:{...t,socketExists:!!this.socket,socketConnected:(c=this.socket)==null?void 0:c.connected,isShuttingDown:this.isShuttingDown}}}}const jn=new jz;var lk={exports:{}};(function(o,t){(function(a,c){o.exports=c()})(Fo,function(){var a,c,g;function S(u,k){if(!a)a=k;else if(!c)c=k;else{var A="var sharedChunk = {}; ("+a+")(sharedChunk); ("+c+")(sharedChunk);",O={};a(O),g=k(O),typeof window<"u"&&(g.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}S(["exports"],function(u){function k(s,n,l,f){return new(l||(l=Promise))(function(v,N){function E(V){try{M(f.next(V))}catch(F){N(F)}}function T(V){try{M(f.throw(V))}catch(F){N(F)}}function M(V){var F;V.done?v(V.value):(F=V.value,F instanceof l?F:new l(function(H){H(F)})).then(E,T)}M((f=f.apply(s,n||[])).next())})}function A(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var O=B;function B(s,n){this.x=s,this.y=n}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,l=s.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),l=Math.sin(s),f=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=f,this},_rotateAround:function(s,n){var l=Math.cos(s),f=Math.sin(s),v=n.y+f*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(s){return s instanceof B?s:Array.isArray(s)?new B(s[0],s[1]):s};var W=A(O),ie=pe;function pe(s,n,l,f){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=l,this.p2y=f}pe.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,f=0;f<8;f++){var v=this.sampleCurveX(l)-s;if(Math.abs(v)<n)return l;var N=this.sampleCurveDerivativeX(l);if(Math.abs(N)<1e-6)break;l-=v/N}var E=0,T=1;for(l=s,f=0;f<20&&(v=this.sampleCurveX(l),!(Math.abs(v-s)<n));f++)s>v?E=l:T=l,l=.5*(T-E)+E;return l},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var Ve=A(ie);let Pe,Se;function Ce(){return Pe==null&&(Pe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Pe}function _e(){if(Se==null&&(Se=!1,Ce())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<5*5;f++){const v=4*f;n.fillStyle=`rgb(${v},${v+1},${v+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const l=n.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){Se=!0;break}}}return Se||!1}function Ue(s,n,l,f){const v=new Ve(s,n,l,f);return function(N){return v.solve(N)}}const Oe=Ue(.25,.1,.25,1);function Je(s,n,l){return Math.min(l,Math.max(n,s))}function tt(s,n,l){const f=l-n,v=((s-n)%f+f)%f+n;return v===n?l:v}function ut(s,...n){for(const l of n)for(const f in l)s[f]=l[f];return s}let Tt=1;function pt(s,n,l){const f={};for(const v in s)f[v]=n.call(l||this,s[v],v,s);return f}function Yt(s,n,l){const f={};for(const v in s)n.call(l||this,s[v],v,s)&&(f[v]=s[v]);return f}function ft(s){return Array.isArray(s)?s.map(ft):typeof s=="object"&&s?pt(s,ft):s}const bt={};function It(s){bt[s]||(typeof console<"u"&&console.warn(s),bt[s]=!0)}function Lt(s,n,l){return(l.y-s.y)*(n.x-s.x)>(n.y-s.y)*(l.x-s.x)}function hn(s){let n=0;for(let l,f,v=0,N=s.length,E=N-1;v<N;E=v++)l=s[v],f=s[E],n+=(f.x-l.x)*(l.y+f.y);return n}function at(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Zt=null;function bn(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Bn(s,n,l,f,v){return k(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const N=new VideoFrame(s,{timestamp:0});try{const E=N==null?void 0:N.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const T=E.startsWith("BGR"),M=new Uint8ClampedArray(f*v*4);if(yield N.copyTo(M,function(V,F,H,Y,Q){const ee=4*Math.max(-F,0),ce=(Math.max(0,H)-H)*Y*4+ee,ve=4*Y,be=Math.max(0,F),Me=Math.max(0,H);return{rect:{x:be,y:Me,width:Math.min(V.width,F+Y)-be,height:Math.min(V.height,H+Q)-Me},layout:[{offset:ce,stride:ve}]}}(s,n,l,f,v)),T)for(let V=0;V<M.length;V+=4){const F=M[V];M[V]=M[V+2],M[V+2]=F}return M}finally{N.close()}})}let An,wt,ze,Pt;const nn={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,l.drawImage(s,0,0,s.width,s.height),l},resolveURL:s=>(ze||(ze=document.createElement("a")),ze.href=s,ze.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Pt==null&&(Pt=matchMedia("(prefers-reduced-motion: reduce)")),Pt.matches)}},yn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ft extends Error{constructor(n,l,f,v){super(`AJAXError: ${l} (${n}): ${f}`),this.status=n,this.statusText=l,this.url=f,this.body=v}}const zt=at()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,mn=s=>yn.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function vr(s,n){const l=new AbortController,f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:zt(),signal:l.signal});let v=!1,N=!1;return s.type==="json"&&f.headers.set("Accept","application/json"),N||fetch(f).then(E=>E.ok?(T=>{(s.type==="arrayBuffer"||s.type==="image"?T.arrayBuffer():s.type==="json"?T.json():T.text()).then(M=>{N||(v=!0,n(null,M,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(M=>{N||n(new Error(M.message))})})(E):E.blob().then(T=>n(new Ft(E.status,E.statusText,s.url,T)))).catch(E=>{E.code!==20&&n(new Error(E.message))}),{cancel:()=>{N=!0,v||l.abort()}}}const fn=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(at()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!at())return(mn(s.url)||vr)(s,n)}if(!(/^file:/.test(l=s.url)||/^file:/.test(zt())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return vr(s,n);if(at()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var l;return function(f,v){const N=new XMLHttpRequest;N.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(N.responseType="arraybuffer");for(const E in f.headers)N.setRequestHeader(E,f.headers[E]);return f.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=f.credentials==="include",N.onerror=()=>{v(new Error(N.statusText))},N.onload=()=>{if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let E=N.response;if(f.type==="json")try{E=JSON.parse(N.response)}catch(T){return v(T)}v(null,E,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else{const E=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});v(new Ft(N.status,N.statusText,f.url,E))}},N.send(f.body),{cancel:()=>N.abort()}}(s,n)},Wn=function(s,n){return fn(ut(s,{type:"arrayBuffer"}),n)};function $r(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function Sr(s,n,l){l[s]&&l[s].indexOf(n)!==-1||(l[s]=l[s]||[],l[s].push(n))}function ur(s,n,l){if(l&&l[s]){const f=l[s].indexOf(n);f!==-1&&l[s].splice(f,1)}}class fi{constructor(n,l={}){ut(this,l),this.type=n}}class Rr extends fi{constructor(n,l={}){super("error",ut({error:n},l))}}class ii{on(n,l){return this._listeners=this._listeners||{},Sr(n,l,this._listeners),this}off(n,l){return ur(n,l,this._listeners),ur(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Sr(n,l,this._oneTimeListeners),this):new Promise(f=>this.once(n,f))}fire(n,l){typeof n=="string"&&(n=new fi(n,l||{}));const f=n.type;if(this.listens(f)){n.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of v)T.call(this,n);const N=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of N)ur(f,T,this._oneTimeListeners),T.call(this,n);const E=this._eventedParent;E&&(ut(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(n))}else n instanceof Rr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(s,n){const l={};for(const f in s)f!=="ref"&&(l[f]=s[f]);return mr.forEach(f=>{f in n&&(l[f]=n[f])}),l}function Vn(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let l=0;l<s.length;l++)if(!Vn(s[l],n[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const l in s)if(!Vn(s[l],n[l]))return!1;return!0}return s===n}const Rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yr(s,n,l){l.push({command:Rn.addSource,args:[s,n[s]]})}function si(s,n,l){n.push({command:Rn.removeSource,args:[s]}),l[s]=!0}function qr(s,n,l,f){si(s,l,f),yr(s,n,l)}function ms(s,n,l){let f;for(f in s[l])if(Object.prototype.hasOwnProperty.call(s[l],f)&&f!=="data"&&!Vn(s[l][f],n[l][f]))return!1;for(f in n[l])if(Object.prototype.hasOwnProperty.call(n[l],f)&&f!=="data"&&!Vn(s[l][f],n[l][f]))return!1;return!0}function Ui(s,n,l,f,v,N){let E;for(E in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,E)&&(Vn(s[E],n[E])||l.push({command:N,args:[f,E,n[E],v]}));for(E in n)Object.prototype.hasOwnProperty.call(n,E)&&!Object.prototype.hasOwnProperty.call(s,E)&&(Vn(s[E],n[E])||l.push({command:N,args:[f,E,n[E],v]}))}function jt(s){return s.id}function an(s,n){return s[n.id]=n,s}class nt{constructor(n,l,f,v){this.message=(n?`${n}: `:"")+f,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function Fn(s,...n){for(const l of n)for(const f in l)s[f]=l[f];return s}class Dn extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class br{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[f,v]of l)this.bindings[f]=v}concat(n){return new br(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const dr={kind:"null"},gt={kind:"number"},Kt={kind:"string"},$t={kind:"boolean"},zn={kind:"color"},Kr={kind:"object"},pn={kind:"value"},ai={kind:"collator"},fe={kind:"formatted"},I={kind:"padding"},G={kind:"resolvedImage"},J={kind:"variableAnchorOffsetCollection"};function se(s,n){return{kind:"array",itemType:s,N:n}}function he(s){if(s.kind==="array"){const n=he(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const Ne=[dr,gt,Kt,$t,zn,fe,Kr,se(pn),I,G,J];function xe(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!xe(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const l of Ne)if(!xe(l,n))return null}}return`Expected ${he(s)} but found ${he(n)} instead.`}function ge(s,n){return n.some(l=>l.kind===s.kind)}function Te(s,n){return n.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function Qe(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const ne=.96422,Ee=.82521,te=4/29,ke=6/29,Be=3*ke*ke,Ze=ke*ke*ke,ct=Math.PI/180,mt=180/Math.PI;function Ut(s){return(s%=360)<0&&(s+=360),s}function Ct([s,n,l,f]){let v,N;const E=En((.2225045*(s=qt(s))+.7168786*(n=qt(n))+.0606169*(l=qt(l)))/1);s===n&&n===l?v=N=E:(v=En((.4360747*s+.3850649*n+.1430804*l)/ne),N=En((.0139322*s+.0971045*n+.7141733*l)/Ee));const T=116*E-16;return[T<0?0:T,500*(v-E),200*(E-N),f]}function qt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function En(s){return s>Ze?Math.pow(s,1/3):s/Be+te}function _n([s,n,l,f]){let v=(s+16)/116,N=isNaN(n)?v:v+n/500,E=isNaN(l)?v:v-l/200;return v=1*Zn(v),N=ne*Zn(N),E=Ee*Zn(E),[qn(3.1338561*N-1.6168667*v-.4906146*E),qn(-.9787684*N+1.9161415*v+.033454*E),qn(.0719453*N-.2289914*v+1.4052427*E),f]}function qn(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Zn(s){return s>ke?s*s*s:Be*(s-te)}function Yr(s){return parseInt(s.padEnd(2,s),16)/255}function Hr(s,n){return kn(n?s/100:s,0,1)}function kn(s,n,l){return Math.min(Math.max(n,s),l)}function $s(s){return!s.some(Number.isNaN)}const gc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class xr{constructor(n,l,f,v=1,N=!0){this.r=n,this.g=l,this.b=f,this.a=v,N||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[n,l,f,v]))}static parse(n){if(n instanceof xr)return n;if(typeof n!="string")return;const l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=gc[f];if(v){const[E,T,M]=v;return[E/255,T/255,M/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const E=f.length<6?1:2;let T=1;return[Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+=E)),Yr(f.slice(T,T+E)||"ff")]}if(f.startsWith("rgb")){const E=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[T,M,V,F,H,Y,Q,ee,ce,ve,be,Me]=E,De=[F||" ",Q||" ",ve].join("");if(De==="  "||De==="  /"||De===",,"||De===",,,"){const Le=[V,Y,ce].join(""),qe=Le==="%%%"?100:Le===""?255:0;if(qe){const st=[kn(+M/qe,0,1),kn(+H/qe,0,1),kn(+ee/qe,0,1),be?Hr(+be,Me):1];if($s(st))return st}}return}}const N=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[E,T,M,V,F,H,Y,Q,ee]=N,ce=[M||" ",F||" ",Y].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ve=[+T,kn(+V,0,100),kn(+H,0,100),Q?Hr(+Q,ee):1];if($s(ve))return function([be,Me,De,Le]){function qe(st){const Ot=(st+be/30)%12,Jt=Me*Math.min(De,1-De);return De-Jt*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return be=Ut(be),Me/=100,De/=100,[qe(0),qe(8),qe(4),Le]}(ve)}}}(n);return l?new xr(...l,!1):void 0}get rgb(){const{r:n,g:l,b:f,a:v}=this,N=v||1/0;return this.overwriteGetter("rgb",[n/N,l/N,f/N,v])}get hcl(){return this.overwriteGetter("hcl",function(n){const[l,f,v,N]=Ct(n),E=Math.sqrt(f*f+v*v);return[Math.round(1e4*E)?Ut(Math.atan2(v,f)*mt):NaN,E,l,N]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ct(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){const[n,l,f,v]=this.rgb;return`rgba(${[n,l,f].map(N=>Math.round(255*N)).join(",")},${v})`}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class eo{constructor(n,l,f){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Uo{constructor(n,l,f,v,N){this.text=n,this.image=l,this.scale=f,this.fontStack=v,this.textColor=N}}class Vi{constructor(n){this.sections=n}static fromString(n){return new Vi([new Uo(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Vi?n:Vi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class as{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof as)return n;if(typeof n=="number")return new as([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new as(n)}}toString(){return JSON.stringify(this.values)}}const su=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ps{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ps)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){const f=n[l],v=n[l+1];if(typeof f!="string"||!su.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new ps(n)}}toString(){return JSON.stringify(this.values)}}class Oi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Oi({name:n,available:!1}):null}}function _l(s,n,l,f){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,n,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,n,l,f]:[s,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Va(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof xr||s instanceof eo||s instanceof Vi||s instanceof as||s instanceof ps||s instanceof Oi)return!0;if(Array.isArray(s)){for(const n of s)if(!Va(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Va(s[n]))return!1;return!0}return!1}function zr(s){if(s===null)return dr;if(typeof s=="string")return Kt;if(typeof s=="boolean")return $t;if(typeof s=="number")return gt;if(s instanceof xr)return zn;if(s instanceof eo)return ai;if(s instanceof Vi)return fe;if(s instanceof as)return I;if(s instanceof ps)return J;if(s instanceof Oi)return G;if(Array.isArray(s)){const n=s.length;let l;for(const f of s){const v=zr(f);if(l){if(l===v)continue;l=pn;break}l=v}return se(l||pn,n)}return Kr}function Kn(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof xr||s instanceof Vi||s instanceof as||s instanceof ps||s instanceof Oi?s.toString():JSON.stringify(s)}class Qs{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Va(n[1]))return l.error("invalid value");const f=n[1];let v=zr(f);const N=l.expectedType;return v.kind!=="array"||v.N!==0||!N||N.kind!=="array"||typeof N.N=="number"&&N.N!==0||(v=N),new Qs(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Pr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const yo={string:Kt,number:gt,boolean:$t,object:Kr};class Qi{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let f,v=1;const N=n[0];if(N==="array"){let T,M;if(n.length>2){const V=n[1];if(typeof V!="string"||!(V in yo)||V==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);T=yo[V],v++}else T=pn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);M=n[2],v++}f=se(T,M)}else{if(!yo[N])throw new Error(`Types doesn't contain name = ${N}`);f=yo[N]}const E=[];for(;v<n.length;v++){const T=l.parse(n[v],v,pn);if(!T)return null;E.push(T)}return new Qi(f,E)}evaluate(n){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(n);if(!xe(this.type,zr(f)))return f;if(l===this.args.length-1)throw new Pr(`Expected value to be of type ${he(this.type)}, but found ${he(zr(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const $o={"to-boolean":$t,"to-color":zn,"to-number":gt,"to-string":Kt};class ga{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const f=n[0];if(!$o[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return l.error("Expected one argument.");const v=$o[f],N=[];for(let E=1;E<n.length;E++){const T=l.parse(n[E],E,pn);if(!T)return null;N.push(T)}return new ga(v,N)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,f;for(const v of this.args){if(l=v.evaluate(n),f=null,l instanceof xr)return l;if(typeof l=="string"){const N=n.parseColor(l);if(N)return N}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:_l(l[0],l[1],l[2],l[3]),!f))return new xr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Pr(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(n);const v=as.parse(l);if(v)return v}throw new Pr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(n);const v=ps.parse(l);if(v)return v}throw new Pr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(n),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new Pr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Vi.fromString(Kn(this.args[0].evaluate(n)));case"resolvedImage":return Oi.fromString(Kn(this.args[0].evaluate(n)));default:return Kn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const au=["Unknown","Point","LineString","Polygon"];class wl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=xr.parse(n)),l}}class vc{constructor(n,l,f=[],v,N=new br,E=[]){this.registry=n,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=N,this.errors=E,this.expectedType=v,this._isConstant=l}parse(n,l,f,v,N={}){return l?this.concat(l,f,v)._parse(n,N):this._parse(n,N)}_parse(n,l){function f(v,N,E){return E==="assert"?new Qi(N,[v]):E==="coerce"?new ga(N,[v]):v}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const N=this.registry[v];if(N){let E=N.parse(n,this);if(!E)return null;if(this.expectedType){const T=this.expectedType,M=E.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(T.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||M.kind!=="value"&&M.kind!=="array"){if(this.checkSubtype(T,M))return null}else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"coerce");else E=f(E,T,l.typeAnnotation||"assert")}if(!(E instanceof Qs)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const T=new wl;try{E=new Qs(E.type,E.evaluate(T))}catch(M){return this.error(M.message),null}}return E}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,f){const v=typeof n=="number"?this.path.concat(n):this.path,N=f?this.scope.concat(f):this.scope;return new vc(this.registry,this._isConstant,v,l||null,N,this.errors)}error(n,...l){const f=`${this.key}${l.map(v=>`[${v}]`).join("")}`;this.errors.push(new Dn(f,n))}checkSubtype(n,l){const f=xe(n,l);return f&&this.error(f),f}}class to{constructor(n,l,f){this.type=ai,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const v=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,$t);if(!v)return null;const N=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,$t);if(!N)return null;let E=null;return f.locale&&(E=l.parse(f.locale,1,Kt),!E)?null:new to(v,N,E)}evaluate(n){return new eo(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Oa=8192;function Cl(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function or(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function od(s,n){const l=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(l*v*Oa),Math.round(f*v*Oa)]}function bo(s,n,l){const f=s[0]-n[0],v=s[1]-n[1],N=s[0]-l[0],E=s[1]-l[1];return f*E-N*v==0&&f*N<=0&&v*E<=0}function Mn(s,n){let l=!1;for(let E=0,T=n.length;E<T;E++){const M=n[E];for(let V=0,F=M.length;V<F-1;V++){if(bo(s,M[V],M[V+1]))return!1;(v=M[V])[1]>(f=s)[1]!=(N=M[V+1])[1]>f[1]&&f[0]<(N[0]-v[0])*(f[1]-v[1])/(N[1]-v[1])+v[0]&&(l=!l)}}var f,v,N;return l}function Nl(s,n){for(let l=0;l<n.length;l++)if(Mn(s,n[l]))return!0;return!1}function gs(s,n,l,f){const v=f[0]-l[0],N=f[1]-l[1],E=(s[0]-l[0])*N-v*(s[1]-l[1]),T=(n[0]-l[0])*N-v*(n[1]-l[1]);return E>0&&T<0||E<0&&T>0}function Sl(s,n,l){for(const V of l)for(let F=0;F<V.length-1;++F)if((T=[(E=V[F+1])[0]-(N=V[F])[0],E[1]-N[1]])[0]*(M=[(v=n)[0]-(f=s)[0],v[1]-f[1]])[1]-T[1]*M[0]!=0&&gs(f,v,N,E)&&gs(N,E,f,v))return!0;var f,v,N,E,T,M;return!1}function xo(s,n){for(let l=0;l<s.length;++l)if(!Mn(s[l],n))return!1;for(let l=0;l<s.length-1;++l)if(Sl(s[l],s[l+1],n))return!1;return!0}function ld(s,n){for(let l=0;l<n.length;l++)if(xo(s,n[l]))return!0;return!1}function ki(s,n,l){const f=[];for(let v=0;v<s.length;v++){const N=[];for(let E=0;E<s[v].length;E++){const T=od(s[v][E],l);Cl(n,T),N.push(T)}f.push(N)}return f}function oi(s,n,l){const f=[];for(let v=0;v<s.length;v++){const N=ki(s[v],n,l);f.push(N)}return f}function ou(s,n,l,f){if(s[0]<l[0]||s[0]>l[2]){const v=.5*f;let N=s[0]-l[0]>v?-f:l[0]-s[0]>v?f:0;N===0&&(N=s[0]-l[2]>v?-f:l[2]-s[0]>v?f:0),s[0]+=N}Cl(n,s)}function qs(s,n,l,f){const v=Math.pow(2,f.z)*Oa,N=[f.x*Oa,f.y*Oa],E=[];for(const T of s)for(const M of T){const V=[M.x+N[0],M.y+N[1]];ou(V,n,l,v),E.push(V)}return E}function os(s,n,l,f){const v=Math.pow(2,f.z)*Oa,N=[f.x*Oa,f.y*Oa],E=[];for(const M of s){const V=[];for(const F of M){const H=[F.x+N[0],F.y+N[1]];Cl(n,H),V.push(H)}E.push(V)}if(n[2]-n[0]<=v/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of E)for(const V of M)ou(V,n,l,v)}var T;return E}class ls{constructor(n,l){this.type=$t,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Va(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let v=0;v<f.features.length;++v){const N=f.features[v].geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new ls(f,f.features[v].geometry)}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ls(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ls(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,f){const v=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if(f.type==="Polygon"){const T=ki(f.coordinates,N,E),M=qs(l.geometry(),v,N,E);if(!or(v,N))return!1;for(const V of M)if(!Mn(V,T))return!1}if(f.type==="MultiPolygon"){const T=oi(f.coordinates,N,E),M=qs(l.geometry(),v,N,E);if(!or(v,N))return!1;for(const V of M)if(!Nl(V,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,f){const v=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],E=l.canonicalID();if(f.type==="Polygon"){const T=ki(f.coordinates,N,E),M=os(l.geometry(),v,N,E);if(!or(v,N))return!1;for(const V of M)if(!xo(V,T))return!1}if(f.type==="MultiPolygon"){const T=oi(f.coordinates,N,E),M=os(l.geometry(),v,N,E);if(!or(v,N))return!1;for(const V of M)if(!ld(V,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yc{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=n[1];return l.scope.has(f)?new yc(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class vs{constructor(n,l,f,v){this.name=n,this.type=l,this._evaluate=f,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){const f=n[0],v=vs.definitions[f];if(!v)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const N=Array.isArray(v)?v[0]:v.type,E=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,T=E.filter(([V])=>!Array.isArray(V)||V.length===n.length-1);let M=null;for(const[V,F]of T){M=new vc(l.registry,El,l.path,null,l.scope);const H=[];let Y=!1;for(let Q=1;Q<n.length;Q++){const ee=n[Q],ce=Array.isArray(V)?V[Q-1]:V.type,ve=M.parse(ee,1+H.length,ce);if(!ve){Y=!0;break}H.push(ve)}if(!Y)if(Array.isArray(V)&&V.length!==H.length)M.error(`Expected ${V.length} arguments, but found ${H.length} instead.`);else{for(let Q=0;Q<H.length;Q++){const ee=Array.isArray(V)?V[Q]:V.type,ce=H[Q];M.concat(Q+1).checkSubtype(ee,ce.type)}if(M.errors.length===0)return new vs(f,N,F,H)}}if(T.length===1)l.errors.push(...M.errors);else{const V=(T.length?T:E).map(([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(he).join(", ")})`:`(${he(Y.type)}...)`;var Y}).join(" | "),F=[];for(let H=1;H<n.length;H++){const Y=l.parse(n[H],1+F.length);if(!Y)return null;F.push(he(Y.type))}l.error(`Expected arguments of type ${V}, but found (${F.join(", ")}) instead.`)}return null}static register(n,l){vs.definitions=l;for(const f in l)n[f]=vs}}function El(s){if(s instanceof yc)return El(s.boundExpression);if(s instanceof vs&&s.name==="error"||s instanceof to||s instanceof ls)return!1;const n=s instanceof ga||s instanceof Qi;let l=!0;return s.eachChild(f=>{l=n?l&&El(f):l&&f instanceof Qs}),!!l&&qo(s)&&bc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function qo(s){if(s instanceof vs&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ls)return!1;let n=!0;return s.eachChild(l=>{n&&!qo(l)&&(n=!1)}),n}function no(s){if(s instanceof vs&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(l=>{n&&!no(l)&&(n=!1)}),n}function bc(s,n){if(s instanceof vs&&n.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(f=>{l&&!bc(f,n)&&(l=!1)}),l}function ea(s,n){const l=s.length-1;let f,v,N=0,E=l,T=0;for(;N<=E;)if(T=Math.floor((N+E)/2),f=s[T],v=s[T+1],f<=n){if(T===l||n<v)return T;N=T+1}else{if(!(f>n))throw new Pr("Input is not a number.");E=T-1}return 0}class Hs{constructor(n,l,f){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[v,N]of f)this.labels.push(v),this.outputs.push(N)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(n[1],1,gt);if(!f)return null;const v=[];let N=null;l.expectedType&&l.expectedType.kind!=="value"&&(N=l.expectedType);for(let E=1;E<n.length;E+=2){const T=E===1?-1/0:n[E],M=n[E+1],V=E,F=E+1;if(typeof T!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=T)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const H=l.parse(M,F,N);if(!H)return null;N=N||H.type,v.push([T,H])}return new Hs(N,f,v)}evaluate(n){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=l[0])return f[0].evaluate(n);const N=l.length;return v>=l[N-1]?f[N-1].evaluate(n):f[ea(l,v)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Yn(s,n,l){return s+l*(n-s)}function va(s,n,l){return s.map((f,v)=>Yn(f,n[v],l))}const es={number:Yn,color:function(s,n,l,f="rgb"){switch(f){case"rgb":{const[v,N,E,T]=va(s.rgb,n.rgb,l);return new xr(v,N,E,T,!1)}case"hcl":{const[v,N,E,T]=s.hcl,[M,V,F,H]=n.hcl;let Y,Q;if(isNaN(v)||isNaN(M))isNaN(v)?isNaN(M)?Y=NaN:(Y=M,E!==1&&E!==0||(Q=V)):(Y=v,F!==1&&F!==0||(Q=N));else{let Me=M-v;M>v&&Me>180?Me-=360:M<v&&v-M>180&&(Me+=360),Y=v+l*Me}const[ee,ce,ve,be]=function([Me,De,Le,qe]){return Me=isNaN(Me)?0:Me*ct,_n([Le,Math.cos(Me)*De,Math.sin(Me)*De,qe])}([Y,Q??Yn(N,V,l),Yn(E,F,l),Yn(T,H,l)]);return new xr(ee,ce,ve,be,!1)}case"lab":{const[v,N,E,T]=_n(va(s.lab,n.lab,l));return new xr(v,N,E,T,!1)}}},array:va,padding:function(s,n,l){return new as(va(s.values,n.values,l))},variableAnchorOffsetCollection:function(s,n,l){const f=s.values,v=n.values;if(f.length!==v.length)throw new Pr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const N=[];for(let E=0;E<f.length;E+=2){if(f[E]!==v[E])throw new Pr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${f[E]}, to[${E}]: ${v[E]}`);N.push(f[E]);const[T,M]=f[E+1],[V,F]=v[E+1];N.push([Yn(T,V,l),Yn(M,F,l)])}return new ps(N)}};class ts{constructor(n,l,f,v,N){this.type=n,this.operator=l,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[E,T]of N)this.labels.push(E),this.outputs.push(T)}static interpolationFactor(n,l,f,v){let N=0;if(n.name==="exponential")N=Ho(l,n.base,f,v);else if(n.name==="linear")N=Ho(l,1,f,v);else if(n.name==="cubic-bezier"){const E=n.controlPoints;N=new Ve(E[0],E[1],E[2],E[3]).solve(Ho(l,1,f,v))}return N}static parse(n,l){let[f,v,N,...E]=n;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some(F=>typeof F!="number"||F<0||F>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(N=l.parse(N,2,gt),!N)return null;const T=[];let M=null;f==="interpolate-hcl"||f==="interpolate-lab"?M=zn:l.expectedType&&l.expectedType.kind!=="value"&&(M=l.expectedType);for(let V=0;V<E.length;V+=2){const F=E[V],H=E[V+1],Y=V+3,Q=V+4;if(typeof F!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=F)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ee=l.parse(H,Q,M);if(!ee)return null;M=M||ee.type,T.push([F,ee])}return Qe(M,gt)||Qe(M,zn)||Qe(M,I)||Qe(M,J)||Qe(M,se(gt))?new ts(M,f,v,N,T):l.error(`Type ${he(M)} is not interpolatable.`)}evaluate(n){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(n);const v=this.input.evaluate(n);if(v<=l[0])return f[0].evaluate(n);const N=l.length;if(v>=l[N-1])return f[N-1].evaluate(n);const E=ea(l,v),T=ts.interpolationFactor(this.interpolation,v,l[E],l[E+1]),M=f[E].evaluate(n),V=f[E+1].evaluate(n);switch(this.operator){case"interpolate":return es[this.type.kind](M,V,T);case"interpolate-hcl":return es.color(M,V,T,"hcl");case"interpolate-lab":return es.color(M,V,T,"lab")}}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Ho(s,n,l,f){const v=f-l,N=s-l;return v===0?0:n===1?N/v:(Math.pow(n,N)-1)/(Math.pow(n,v)-1)}class Dl{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let f=null;const v=l.expectedType;v&&v.kind!=="value"&&(f=v);const N=[];for(const T of n.slice(1)){const M=l.parse(T,1+N.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,N.push(M)}if(!f)throw new Error("No output type");const E=v&&N.some(T=>xe(v,T.type));return new Dl(E?pn:f,N)}evaluate(n){let l,f=null,v=0;for(const N of this.args)if(v++,f=N.evaluate(n),f&&f instanceof Oi&&!f.available&&(l||(l=f.name),f=null,v===this.args.length&&(f=l)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Tl{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let N=1;N<n.length-1;N+=2){const E=n[N];if(typeof E!="string")return l.error(`Expected string, but found ${typeof E} instead.`,N);if(/[^a-zA-Z0-9_]/.test(E))return l.error("Variable names must contain only alphanumeric characters or '_'.",N);const T=l.parse(n[N+1],N+1);if(!T)return null;f.push([E,T])}const v=l.parse(n[n.length-1],n.length-1,l.expectedType,f);return v?new Tl(f,v):null}outputDefined(){return this.result.outputDefined()}}class Pl{constructor(n,l,f){this.type=n,this.index=l,this.input=f}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,gt),v=l.parse(n[2],2,se(l.expectedType||pn));return f&&v?new Pl(v.type.itemType,f,v):null}evaluate(n){const l=this.index.evaluate(n),f=this.input.evaluate(n);if(l<0)throw new Pr(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new Pr(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new Pr(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class xc{constructor(n,l){this.type=$t,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,pn),v=l.parse(n[2],2,pn);return f&&v?ge(f.type,[$t,Kt,gt,dr,pn])?new xc(f,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(f.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Te(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${he(zr(l))} instead.`);if(!Te(f,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${he(zr(f))} instead.`);return f.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class K{constructor(n,l,f){this.type=gt,this.needle=n,this.haystack=l,this.fromIndex=f}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,pn),v=l.parse(n[2],2,pn);if(!f||!v)return null;if(!ge(f.type,[$t,Kt,gt,dr,pn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(f.type)} instead`);if(n.length===4){const N=l.parse(n[3],3,gt);return N?new K(f,v,N):null}return new K(f,v)}evaluate(n){const l=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Te(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${he(zr(l))} instead.`);if(!Te(f,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${he(zr(f))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(n);return f.indexOf(l,v)}return f.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class we{constructor(n,l,f,v,N,E){this.inputType=n,this.type=l,this.input=f,this.cases=v,this.outputs=N,this.otherwise=E}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let f,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const N={},E=[];for(let V=2;V<n.length-1;V+=2){let F=n[V];const H=n[V+1];Array.isArray(F)||(F=[F]);const Y=l.concat(V);if(F.length===0)return Y.error("Expected at least one branch label.");for(const ee of F){if(typeof ee!="number"&&typeof ee!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Y.error("Numeric branch labels must be integer values.");if(f){if(Y.checkSubtype(f,zr(ee)))return null}else f=zr(ee);if(N[String(ee)]!==void 0)return Y.error("Branch labels must be unique.");N[String(ee)]=E.length}const Q=l.parse(H,V,v);if(!Q)return null;v=v||Q.type,E.push(Q)}const T=l.parse(n[1],1,pn);if(!T)return null;const M=l.parse(n[n.length-1],n.length-1,v);return M?T.type.kind!=="value"&&l.concat(1).checkSubtype(f,T.type)?null:new we(f,v,T,N,E,M):null}evaluate(n){const l=this.input.evaluate(n);return(zr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Ye{constructor(n,l,f){this.type=n,this.branches=l,this.otherwise=f}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const v=[];for(let E=1;E<n.length-1;E+=2){const T=l.parse(n[E],E,$t);if(!T)return null;const M=l.parse(n[E+1],E+1,f);if(!M)return null;v.push([T,M]),f=f||M.type}const N=l.parse(n[n.length-1],n.length-1,f);if(!N)return null;if(!f)throw new Error("Can't infer output type");return new Ye(f,v,N)}evaluate(n){for(const[l,f]of this.branches)if(l.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,f]of this.branches)n(l),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class rt{constructor(n,l,f,v){this.type=n,this.input=l,this.beginIndex=f,this.endIndex=v}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=l.parse(n[1],1,pn),v=l.parse(n[2],2,gt);if(!f||!v)return null;if(!ge(f.type,[se(pn),Kt,pn]))return l.error(`Expected first argument to be of type array or string, but found ${he(f.type)} instead`);if(n.length===4){const N=l.parse(n[3],3,gt);return N?new rt(f.type,f,v,N):null}return new rt(f.type,f,v)}evaluate(n){const l=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!Te(l,["string","array"]))throw new Pr(`Expected first argument to be of type array or string, but found ${he(zr(l))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(n);return l.slice(f,v)}return l.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function At(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Nn(s,n,l,f){return f.compare(n,l)===0}function Xt(s,n,l){const f=s!=="=="&&s!=="!=";return class ck{constructor(N,E,T){this.type=$t,this.lhs=N,this.rhs=E,this.collator=T,this.hasUntypedArgument=N.type.kind==="value"||E.type.kind==="value"}static parse(N,E){if(N.length!==3&&N.length!==4)return E.error("Expected two or three arguments.");const T=N[0];let M=E.parse(N[1],1,pn);if(!M)return null;if(!At(T,M.type))return E.concat(1).error(`"${T}" comparisons are not supported for type '${he(M.type)}'.`);let V=E.parse(N[2],2,pn);if(!V)return null;if(!At(T,V.type))return E.concat(2).error(`"${T}" comparisons are not supported for type '${he(V.type)}'.`);if(M.type.kind!==V.type.kind&&M.type.kind!=="value"&&V.type.kind!=="value")return E.error(`Cannot compare types '${he(M.type)}' and '${he(V.type)}'.`);f&&(M.type.kind==="value"&&V.type.kind!=="value"?M=new Qi(V.type,[M]):M.type.kind!=="value"&&V.type.kind==="value"&&(V=new Qi(M.type,[V])));let F=null;if(N.length===4){if(M.type.kind!=="string"&&V.type.kind!=="string"&&M.type.kind!=="value"&&V.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(F=E.parse(N[3],3,ai),!F)return null}return new ck(M,V,F)}evaluate(N){const E=this.lhs.evaluate(N),T=this.rhs.evaluate(N);if(f&&this.hasUntypedArgument){const M=zr(E),V=zr(T);if(M.kind!==V.kind||M.kind!=="string"&&M.kind!=="number")throw new Pr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${M.kind}, ${V.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=zr(E),V=zr(T);if(M.kind!=="string"||V.kind!=="string")return n(N,E,T)}return this.collator?l(N,E,T,this.collator.evaluate(N)):n(N,E,T)}eachChild(N){N(this.lhs),N(this.rhs),this.collator&&N(this.collator)}outputDefined(){return!0}}}const In=Xt("==",function(s,n,l){return n===l},Nn),lr=Xt("!=",function(s,n,l){return n!==l},function(s,n,l,f){return!Nn(0,n,l,f)}),jr=Xt("<",function(s,n,l){return n<l},function(s,n,l,f){return f.compare(n,l)<0}),Xr=Xt(">",function(s,n,l){return n>l},function(s,n,l,f){return f.compare(n,l)>0}),Jr=Xt("<=",function(s,n,l){return n<=l},function(s,n,l,f){return f.compare(n,l)<=0}),rr=Xt(">=",function(s,n,l){return n>=l},function(s,n,l,f){return f.compare(n,l)>=0});class Qr{constructor(n,l,f,v,N){this.type=Kt,this.number=n,this.locale=l,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=N}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const f=l.parse(n[1],1,gt);if(!f)return null;const v=n[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let N=null;if(v.locale&&(N=l.parse(v.locale,1,Kt),!N))return null;let E=null;if(v.currency&&(E=l.parse(v.currency,1,Kt),!E))return null;let T=null;if(v["min-fraction-digits"]&&(T=l.parse(v["min-fraction-digits"],1,gt),!T))return null;let M=null;return v["max-fraction-digits"]&&(M=l.parse(v["max-fraction-digits"],1,gt),!M)?null:new Qr(f,N,E,T,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class yi{constructor(n){this.type=fe,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const v=[];let N=!1;for(let E=1;E<=n.length-1;++E){const T=n[E];if(N&&typeof T=="object"&&!Array.isArray(T)){N=!1;let M=null;if(T["font-scale"]&&(M=l.parse(T["font-scale"],1,gt),!M))return null;let V=null;if(T["text-font"]&&(V=l.parse(T["text-font"],1,se(Kt)),!V))return null;let F=null;if(T["text-color"]&&(F=l.parse(T["text-color"],1,zn),!F))return null;const H=v[v.length-1];H.scale=M,H.font=V,H.textColor=F}else{const M=l.parse(n[E],1,pn);if(!M)return null;const V=M.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");N=!0,v.push({content:M,scale:null,font:null,textColor:null})}}return new yi(v)}evaluate(n){return new Vi(this.sections.map(l=>{const f=l.content.evaluate(n);return zr(f)===G?new Uo("",f,null,null,null):new Uo(Kn(f),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class _o{constructor(n){this.type=G,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const f=l.parse(n[1],1,Kt);return f?new _o(f):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),f=Oi.fromString(l);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(l)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class jl{constructor(n){this.type=gt,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=l.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${he(f.type)} instead.`):new jl(f):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Pr(`Expected value to be of type string or array, but found ${he(zr(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Gs={"==":In,"!=":lr,">":Xr,"<":jr,">=":rr,"<=":Jr,array:Qi,at:Pl,boolean:Qi,case:Ye,coalesce:Dl,collator:to,format:yi,image:_o,in:xc,"index-of":K,interpolate:ts,"interpolate-hcl":ts,"interpolate-lab":ts,length:jl,let:Tl,literal:Qs,match:we,number:Qi,"number-format":Qr,object:Qi,slice:rt,step:Hs,string:Qi,"to-boolean":ga,"to-color":ga,"to-number":ga,"to-string":ga,var:yc,within:ls};function _c(s,[n,l,f,v]){n=n.evaluate(s),l=l.evaluate(s),f=f.evaluate(s);const N=v?v.evaluate(s):1,E=_l(n,l,f,N);if(E)throw new Pr(E);return new xr(n/255,l/255,f/255,N,!1)}function wc(s,n){return s in n}function lu(s,n){const l=n[s];return l===void 0?null:l}function ro(s){return{type:s}}function cd(s){return{result:"success",value:s}}function wo(s){return{result:"error",value:s}}function Go(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function _h(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ud(s){return!!s.expression&&s.expression.interpolated}function pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function mi(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Co(s){return s}function sr(s,n){const l=n.type==="color",f=s.stops&&typeof s.stops[0][0]=="object",v=f||!(f||s.property!==void 0),N=s.type||(ud(n)?"exponential":"interval");if(l||n.type==="padding"){const F=l?xr.parse:as.parse;(s=Fn({},s)).stops&&(s.stops=s.stops.map(H=>[H[0],F(H[1])])),s.default=F(s.default?s.default:n.default)}if(s.colorSpace&&(E=s.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var E;let T,M,V;if(N==="exponential")T=cu;else if(N==="interval")T=Gr;else if(N==="categorical"){T=ei,M=Object.create(null);for(const F of s.stops)M[F[0]]=F[1];V=typeof s.stops[0][0]}else{if(N!=="identity")throw new Error(`Unknown function type "${N}"`);T=uu}if(f){const F={},H=[];for(let ee=0;ee<s.stops.length;ee++){const ce=s.stops[ee],ve=ce[0].zoom;F[ve]===void 0&&(F[ve]={zoom:ve,type:s.type,property:s.property,default:s.default,stops:[]},H.push(ve)),F[ve].stops.push([ce[0].value,ce[1]])}const Y=[];for(const ee of H)Y.push([F[ee].zoom,sr(F[ee],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:ts.interpolationFactor.bind(void 0,Q),zoomStops:Y.map(ee=>ee[0]),evaluate:({zoom:ee},ce)=>cu({stops:Y,base:s.base},n,ee).evaluate(ee,ce)}}if(v){const F=N==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:ts.interpolationFactor.bind(void 0,F),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(s,n,H,M,V)}}return{kind:"source",evaluate(F,H){const Y=H&&H.properties?H.properties[s.property]:void 0;return Y===void 0?No(s.default,n.default):T(s,n,Y,M,V)}}}function No(s,n,l){return s!==void 0?s:n!==void 0?n:l!==void 0?l:void 0}function ei(s,n,l,f,v){return No(typeof l===v?f[l]:void 0,s.default,n.default)}function Gr(s,n,l){if(pr(l)!=="number")return No(s.default,n.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const v=ea(s.stops.map(N=>N[0]),l);return s.stops[v][1]}function cu(s,n,l){const f=s.base!==void 0?s.base:1;if(pr(l)!=="number")return No(s.default,n.default);const v=s.stops.length;if(v===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[v-1][0])return s.stops[v-1][1];const N=ea(s.stops.map(F=>F[0]),l),E=function(F,H,Y,Q){const ee=Q-Y,ce=F-Y;return ee===0?0:H===1?ce/ee:(Math.pow(H,ce)-1)/(Math.pow(H,ee)-1)}(l,f,s.stops[N][0],s.stops[N+1][0]),T=s.stops[N][1],M=s.stops[N+1][1],V=es[n.type]||Co;return typeof T.evaluate=="function"?{evaluate(...F){const H=T.evaluate.apply(void 0,F),Y=M.evaluate.apply(void 0,F);if(H!==void 0&&Y!==void 0)return V(H,Y,E,s.colorSpace)}}:V(T,M,E,s.colorSpace)}function uu(s,n,l){switch(n.type){case"color":l=xr.parse(l);break;case"formatted":l=Vi.fromString(l.toString());break;case"resolvedImage":l=Oi.fromString(l.toString());break;case"padding":l=as.parse(l);break;default:pr(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return No(l,s.default,n.default)}vs.register(Gs,{error:[{kind:"error"},[Kt],(s,[n])=>{throw new Pr(n.evaluate(s))}],typeof:[Kt,[pn],(s,[n])=>he(zr(n.evaluate(s)))],"to-rgba":[se(gt,4),[zn],(s,[n])=>{const[l,f,v,N]=n.evaluate(s).rgb;return[255*l,255*f,255*v,N]}],rgb:[zn,[gt,gt,gt],_c],rgba:[zn,[gt,gt,gt,gt],_c],has:{type:$t,overloads:[[[Kt],(s,[n])=>wc(n.evaluate(s),s.properties())],[[Kt,Kr],(s,[n,l])=>wc(n.evaluate(s),l.evaluate(s))]]},get:{type:pn,overloads:[[[Kt],(s,[n])=>lu(n.evaluate(s),s.properties())],[[Kt,Kr],(s,[n,l])=>lu(n.evaluate(s),l.evaluate(s))]]},"feature-state":[pn,[Kt],(s,[n])=>lu(n.evaluate(s),s.featureState||{})],properties:[Kr,[],s=>s.properties()],"geometry-type":[Kt,[],s=>s.geometryType()],id:[pn,[],s=>s.id()],zoom:[gt,[],s=>s.globals.zoom],"heatmap-density":[gt,[],s=>s.globals.heatmapDensity||0],"line-progress":[gt,[],s=>s.globals.lineProgress||0],accumulated:[pn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[gt,ro(gt),(s,n)=>{let l=0;for(const f of n)l+=f.evaluate(s);return l}],"*":[gt,ro(gt),(s,n)=>{let l=1;for(const f of n)l*=f.evaluate(s);return l}],"-":{type:gt,overloads:[[[gt,gt],(s,[n,l])=>n.evaluate(s)-l.evaluate(s)],[[gt],(s,[n])=>-n.evaluate(s)]]},"/":[gt,[gt,gt],(s,[n,l])=>n.evaluate(s)/l.evaluate(s)],"%":[gt,[gt,gt],(s,[n,l])=>n.evaluate(s)%l.evaluate(s)],ln2:[gt,[],()=>Math.LN2],pi:[gt,[],()=>Math.PI],e:[gt,[],()=>Math.E],"^":[gt,[gt,gt],(s,[n,l])=>Math.pow(n.evaluate(s),l.evaluate(s))],sqrt:[gt,[gt],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))],log2:[gt,[gt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[gt,[gt],(s,[n])=>Math.sin(n.evaluate(s))],cos:[gt,[gt],(s,[n])=>Math.cos(n.evaluate(s))],tan:[gt,[gt],(s,[n])=>Math.tan(n.evaluate(s))],asin:[gt,[gt],(s,[n])=>Math.asin(n.evaluate(s))],acos:[gt,[gt],(s,[n])=>Math.acos(n.evaluate(s))],atan:[gt,[gt],(s,[n])=>Math.atan(n.evaluate(s))],min:[gt,ro(gt),(s,n)=>Math.min(...n.map(l=>l.evaluate(s)))],max:[gt,ro(gt),(s,n)=>Math.max(...n.map(l=>l.evaluate(s)))],abs:[gt,[gt],(s,[n])=>Math.abs(n.evaluate(s))],round:[gt,[gt],(s,[n])=>{const l=n.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[gt,[gt],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[gt,[gt],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[$t,[Kt,pn],(s,[n,l])=>s.properties()[n.value]===l.value],"filter-id-==":[$t,[pn],(s,[n])=>s.id()===n.value],"filter-type-==":[$t,[Kt],(s,[n])=>s.geometryType()===n.value],"filter-<":[$t,[Kt,pn],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f<v}],"filter-id-<":[$t,[pn],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l<f}],"filter->":[$t,[Kt,pn],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f>v}],"filter-id->":[$t,[pn],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l>f}],"filter-<=":[$t,[Kt,pn],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[$t,[pn],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l<=f}],"filter->=":[$t,[Kt,pn],(s,[n,l])=>{const f=s.properties()[n.value],v=l.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[$t,[pn],(s,[n])=>{const l=s.id(),f=n.value;return typeof l==typeof f&&l>=f}],"filter-has":[$t,[pn],(s,[n])=>n.value in s.properties()],"filter-has-id":[$t,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[$t,[se(Kt)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[$t,[se(pn)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[$t,[Kt,se(pn)],(s,[n,l])=>l.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[$t,[Kt,se(pn)],(s,[n,l])=>function(f,v,N,E){for(;N<=E;){const T=N+E>>1;if(v[T]===f)return!0;v[T]>f?E=T-1:N=T+1}return!1}(s.properties()[n.value],l.value,0,l.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(s,[n,l])=>n.evaluate(s)&&l.evaluate(s)],[ro($t),(s,n)=>{for(const l of n)if(!l.evaluate(s))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(s,[n,l])=>n.evaluate(s)||l.evaluate(s)],[ro($t),(s,n)=>{for(const l of n)if(l.evaluate(s))return!0;return!1}]]},"!":[$t,[$t],(s,[n])=>!n.evaluate(s)],"is-supported-script":[$t,[Kt],(s,[n])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(n.evaluate(s))}],upcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Kt,[Kt],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Kt,ro(pn),(s,n)=>n.map(l=>Kn(l.evaluate(s))).join("")],"resolved-locale":[Kt,[ai],(s,[n])=>n.evaluate(s).resolvedLocale()]});class dd{constructor(n,l){var f;this.expression=n,this._warningHistory={},this._evaluator=new wl,this._defaultValue=l?(f=l).type==="color"&&mi(f.default)?new xr(0,0,0,0):f.type==="color"?xr.parse(f.default)||null:f.type==="padding"?as.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?ps.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,f,v,N,E){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(n,l,f,v,N,E){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=E||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function cs(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Gs}function ya(s,n){const l=new vc(Gs,El,[],n?function(v){const N={color:zn,string:Kt,number:gt,enum:Kt,boolean:$t,formatted:fe,padding:I,resolvedImage:G,variableAnchorOffsetCollection:J};return v.type==="array"?se(N[v.value]||pn,v.length):N[v.type]}(n):void 0),f=l.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?cd(new dd(f,n)):wo(l.errors)}class wi{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!no(l.expression)}evaluateWithoutErrorHandling(n,l,f,v,N,E){return this._styleExpression.evaluateWithoutErrorHandling(n,l,f,v,N,E)}evaluate(n,l,f,v,N,E){return this._styleExpression.evaluate(n,l,f,v,N,E)}}class ba{constructor(n,l,f,v){this.kind=n,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!no(l.expression),this.interpolationType=v}evaluateWithoutErrorHandling(n,l,f,v,N,E){return this._styleExpression.evaluateWithoutErrorHandling(n,l,f,v,N,E)}evaluate(n,l,f,v,N,E){return this._styleExpression.evaluate(n,l,f,v,N,E)}interpolationFactor(n,l,f){return this.interpolationType?ts.interpolationFactor(this.interpolationType,n,l,f):0}}function du(s,n){const l=ya(s,n);if(l.result==="error")return l;const f=l.value.expression,v=qo(f);if(!v&&!Go(n))return wo([new Dn("","data expressions not supported")]);const N=bc(f,["zoom"]);if(!N&&!_h(n))return wo([new Dn("","zoom expressions not supported")]);const E=hu(f);return E||N?E instanceof Dn?wo([E]):E instanceof ts&&!ud(n)?wo([new Dn("",'"interpolate" expressions cannot be used with this property')]):cd(E?new ba(v?"camera":"composite",l.value,E.labels,E instanceof ts?E.interpolation:void 0):new wi(v?"constant":"source",l.value)):wo([new Dn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wo{constructor(n,l){this._parameters=n,this._specification=l,Fn(this,sr(this._parameters,this._specification))}static deserialize(n){return new Wo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function hu(s){let n=null;if(s instanceof Tl)n=hu(s.result);else if(s instanceof Dl){for(const l of s.args)if(n=hu(l),n)break}else(s instanceof Hs||s instanceof ts)&&s.input instanceof vs&&s.input.name==="zoom"&&(n=s);return n instanceof Dn||s.eachChild(l=>{const f=hu(l);f instanceof Dn?n=f:!n&&f?n=new Dn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Dn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function So(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!So(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Dp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wh(s){if(s==null)return{filter:()=>!0,needGeometry:!1};So(s)||(s=hd(s));const n=ya(s,Dp);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,v)=>n.value.evaluate(l,f,{},v),needGeometry:Af(s)}}function Ch(s,n){return s<n?-1:s>n?1:0}function Af(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(Af(s[n]))return!0;return!1}function hd(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Nh(s[1],s[2],"=="):n==="!="?fu(Nh(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Nh(s[1],s[2],n):n==="any"?(l=s.slice(1),["any"].concat(l.map(hd))):n==="all"?["all"].concat(s.slice(1).map(hd)):n==="none"?["all"].concat(s.slice(1).map(hd).map(fu)):n==="in"?Sh(s[1],s.slice(2)):n==="!in"?fu(Sh(s[1],s.slice(2))):n==="has"?Mf(s[1]):n==="!has"?fu(Mf(s[1])):n!=="within"||s;var l}function Nh(s,n,l){switch(s){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,s,n]}}function Sh(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",s,["literal",n.sort(Ch)]]:["filter-in-small",s,["literal",n]]}}function Mf(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function fu(s){return["!",s]}function fd(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let v="[";for(const N of s)v+=`${fd(N)},`;return`${v}]`}const l=Object.keys(s).sort();let f="{";for(let v=0;v<l.length;v++)f+=`${JSON.stringify(l[v])}:${fd(s[l[v]])},`;return`${f}}`}function mu(s){let n="";for(const l of mr)n+=`/${fd(s[l])}`;return n}function kl(s){const n=s.value;return n?[new nt(s.key,n,"constants have been deprecated as of v8")]:[]}function li(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Zo(s){if(Array.isArray(s))return s.map(Zo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const l in s)n[l]=Zo(s[l]);return n}return li(s)}function Ds(s){const n=s.key,l=s.value,f=s.valueSpec||{},v=s.objectElementValidators||{},N=s.style,E=s.styleSpec,T=s.validateSpec;let M=[];const V=pr(l);if(V!=="object")return[new nt(n,l,`object expected, ${V} found`)];for(const F in l){const H=F.split(".")[0],Y=f[H]||f["*"];let Q;if(v[H])Q=v[H];else if(f[H])Q=T;else if(v["*"])Q=v["*"];else{if(!f["*"]){M.push(new nt(n,l[F],`unknown property "${F}"`));continue}Q=T}M=M.concat(Q({key:(n&&`${n}.`)+F,value:l[F],valueSpec:Y,style:N,styleSpec:E,object:l,objectKey:F,validateSpec:T},l))}for(const F in f)v[F]||f[F].required&&f[F].default===void 0&&l[F]===void 0&&M.push(new nt(n,l,`missing required property "${F}"`));return M}function Cc(s){const n=s.value,l=s.valueSpec,f=s.style,v=s.styleSpec,N=s.key,E=s.arrayElementValidator||s.validateSpec;if(pr(n)!=="array")return[new nt(N,n,`array expected, ${pr(n)} found`)];if(l.length&&n.length!==l.length)return[new nt(N,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new nt(N,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let T={type:l.value,values:l.values};v.$version<7&&(T.function=l.function),pr(l.value)==="object"&&(T=l.value);let M=[];for(let V=0;V<n.length;V++)M=M.concat(E({array:n,arrayIndex:V,value:n[V],valueSpec:T,validateSpec:s.validateSpec,style:f,styleSpec:v,key:`${N}[${V}]`}));return M}function pu(s){const n=s.key,l=s.value,f=s.valueSpec;let v=pr(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new nt(n,l,`number expected, ${v} found`)]:"minimum"in f&&l<f.minimum?[new nt(n,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new nt(n,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function md(s){const n=s.valueSpec,l=li(s.value.type);let f,v,N,E={};const T=l!=="categorical"&&s.value.property===void 0,M=!T,V=pr(s.value.stops)==="array"&&pr(s.value.stops[0])==="array"&&pr(s.value.stops[0][0])==="object",F=Ds({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Q){if(l==="identity")return[new nt(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const ce=Q.value;return ee=ee.concat(Cc({key:Q.key,value:ce,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:H})),pr(ce)==="array"&&ce.length===0&&ee.push(new nt(Q.key,ce,"array must have at least one stop")),ee},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return l==="identity"&&T&&F.push(new nt(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||F.push(new nt(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!ud(s.valueSpec)&&F.push(new nt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(M&&!Go(s.valueSpec)?F.push(new nt(s.key,s.value,"property functions not supported")):T&&!_h(s.valueSpec)&&F.push(new nt(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!V||s.value.property!==void 0||F.push(new nt(s.key,s.value,'"property" property is required')),F;function H(Q){let ee=[];const ce=Q.value,ve=Q.key;if(pr(ce)!=="array")return[new nt(ve,ce,`array expected, ${pr(ce)} found`)];if(ce.length!==2)return[new nt(ve,ce,`array length 2 expected, length ${ce.length} found`)];if(V){if(pr(ce[0])!=="object")return[new nt(ve,ce,`object expected, ${pr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new nt(ve,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new nt(ve,ce,"object stop key must have value")];if(N&&N>li(ce[0].zoom))return[new nt(ve,ce[0].zoom,"stop zoom values must appear in ascending order")];li(ce[0].zoom)!==N&&(N=li(ce[0].zoom),v=void 0,E={}),ee=ee.concat(Ds({key:`${ve}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:pu,value:Y}}))}else ee=ee.concat(Y({key:`${ve}[0]`,value:ce[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},ce));return cs(Zo(ce[1]))?ee.concat([new nt(`${ve}[1]`,ce[1],"expressions are not allowed in function stops.")]):ee.concat(Q.validateSpec({key:`${ve}[1]`,value:ce[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,ee){const ce=pr(Q.value),ve=li(Q.value),be=Q.value!==null?Q.value:ee;if(f){if(ce!==f)return[new nt(Q.key,be,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new nt(Q.key,be,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&l!=="categorical"){let Me=`number expected, ${ce} found`;return Go(n)&&l===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(Q.key,be,Me)]}return l!=="categorical"||ce!=="number"||isFinite(ve)&&Math.floor(ve)===ve?l!=="categorical"&&ce==="number"&&v!==void 0&&ve<v?[new nt(Q.key,be,"stop domain values must appear in ascending order")]:(v=ve,l==="categorical"&&ve in E?[new nt(Q.key,be,"stop domain values must be unique")]:(E[ve]=!0,[])):[new nt(Q.key,be,`integer expected, found ${ve}`)]}}function Al(s){const n=(s.expressionContext==="property"?du:ya)(Zo(s.value),s.valueSpec);if(n.result==="error")return n.value.map(f=>new nt(`${s.key}${f.key}`,s.value,f.message));const l=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new nt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!no(l))return[new nt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!no(l))return[new nt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!bc(l,["zoom","feature-state"]))return[new nt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!qo(l))return[new nt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gu(s){const n=s.key,l=s.value,f=s.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(li(l))===-1&&v.push(new nt(n,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(li(l))===-1&&v.push(new nt(n,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function Nc(s){return So(Zo(s.value))?Al(Fn({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rf(s)}function Rf(s){const n=s.value,l=s.key;if(pr(n)!=="array")return[new nt(l,n,`array expected, ${pr(n)} found`)];const f=s.styleSpec;let v,N=[];if(n.length<1)return[new nt(l,n,"filter array must have at least 1 element")];switch(N=N.concat(gu({key:`${l}[0]`,value:n[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),li(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&li(n[1])==="$type"&&N.push(new nt(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&N.push(new nt(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=pr(n[1]),v!=="string"&&N.push(new nt(`${l}[1]`,n[1],`string expected, ${v} found`)));for(let E=2;E<n.length;E++)v=pr(n[E]),li(n[1])==="$type"?N=N.concat(gu({key:`${l}[${E}]`,value:n[E],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&N.push(new nt(`${l}[${E}]`,n[E],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let E=1;E<n.length;E++)N=N.concat(Rf({key:`${l}[${E}]`,value:n[E],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":v=pr(n[1]),n.length!==2?N.push(new nt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&N.push(new nt(`${l}[1]`,n[1],`string expected, ${v} found`));break;case"within":v=pr(n[1]),n.length!==2?N.push(new nt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="object"&&N.push(new nt(`${l}[1]`,n[1],`object expected, ${v} found`))}return N}function If(s,n){const l=s.key,f=s.validateSpec,v=s.style,N=s.styleSpec,E=s.value,T=s.objectKey,M=N[`${n}_${s.layerType}`];if(!M)return[];const V=T.match(/^(.*)-transition$/);if(n==="paint"&&V&&M[V[1]]&&M[V[1]].transition)return f({key:l,value:E,valueSpec:N.transition,style:v,styleSpec:N});const F=s.valueSpec||M[T];if(!F)return[new nt(l,E,`unknown property "${T}"`)];let H;if(pr(E)==="string"&&Go(F)&&!F.tokens&&(H=/^{([^}]+)}$/.exec(E)))return[new nt(l,E,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const Y=[];return s.layerType==="symbol"&&(T==="text-field"&&v&&!v.glyphs&&Y.push(new nt(l,E,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&mi(Zo(E))&&li(E.type)==="identity"&&Y.push(new nt(l,E,'"text-font" does not support identity functions'))),Y.concat(f({key:s.key,value:E,valueSpec:F,style:v,styleSpec:N,expressionContext:"property",propertyType:n,propertyKey:T}))}function Eh(s){return If(s,"paint")}function Lf(s){return If(s,"layout")}function Dh(s){let n=[];const l=s.value,f=s.key,v=s.style,N=s.styleSpec;l.type||l.ref||n.push(new nt(f,l,'either "type" or "ref" is required'));let E=li(l.type);const T=li(l.ref);if(l.id){const M=li(l.id);for(let V=0;V<s.arrayIndex;V++){const F=v.layers[V];li(F.id)===M&&n.push(new nt(f,l.id,`duplicate layer id "${l.id}", previously used at line ${F.id.__line__}`))}}if("ref"in l){let M;["type","source","source-layer","filter","layout"].forEach(V=>{V in l&&n.push(new nt(f,l[V],`"${V}" is prohibited for ref layers`))}),v.layers.forEach(V=>{li(V.id)===T&&(M=V)}),M?M.ref?n.push(new nt(f,l.ref,"ref cannot reference another ref layer")):E=li(M.type):n.push(new nt(f,l.ref,`ref layer "${T}" not found`))}else if(E!=="background")if(l.source){const M=v.sources&&v.sources[l.source],V=M&&li(M.type);M?V==="vector"&&E==="raster"?n.push(new nt(f,l.source,`layer "${l.id}" requires a raster source`)):V!=="raster-dem"&&E==="hillshade"?n.push(new nt(f,l.source,`layer "${l.id}" requires a raster-dem source`)):V==="raster"&&E!=="raster"?n.push(new nt(f,l.source,`layer "${l.id}" requires a vector source`)):V!=="vector"||l["source-layer"]?V==="raster-dem"&&E!=="hillshade"?n.push(new nt(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!l.paint||!l.paint["line-gradient"]||V==="geojson"&&M.lineMetrics||n.push(new nt(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new nt(f,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new nt(f,l.source,`source "${l.source}" not found`))}else n.push(new nt(f,l,'missing required property "source"'));return n=n.concat(Ds({key:f,value:l,valueSpec:N.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:l.type,valueSpec:N.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:Nc,layout:M=>Ds({layer:l,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>Lf(Fn({layerType:E},V))}}),paint:M=>Ds({layer:l,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":V=>Eh(Fn({layerType:E},V))}})}})),n}function io(s){const n=s.value,l=s.key,f=pr(n);return f!=="string"?[new nt(l,n,`string expected, ${f} found`)]:[]}const vu={promoteId:function({key:s,value:n}){if(pr(n)==="string")return io({key:s,value:n});{const l=[];for(const f in n)l.push(...io({key:`${s}.${f}`,value:n[f]}));return l}}};function ta(s){const n=s.value,l=s.key,f=s.styleSpec,v=s.style,N=s.validateSpec;if(!n.type)return[new nt(l,n,'"type" is required')];const E=li(n.type);let T;switch(E){case"vector":case"raster":return T=Ds({key:l,value:n,valueSpec:f[`source_${E.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:vu,validateSpec:N}),T;case"raster-dem":return T=function(M){var V;const F=(V=M.sourceName)!==null&&V!==void 0?V:"",H=M.value,Y=M.styleSpec,Q=Y.source_raster_dem,ee=M.style;let ce=[];const ve=pr(H);if(H===void 0)return ce;if(ve!=="object")return ce.push(new nt("source_raster_dem",H,`object expected, ${ve} found`)),ce;const be=li(H.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],De=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const Le in H)!be&&Me.includes(Le)?ce.push(new nt(Le,H[Le],`In "${F}": "${Le}" is only valid when "encoding" is set to "custom". ${De} encoding found`)):Q[Le]?ce=ce.concat(M.validateSpec({key:Le,value:H[Le],valueSpec:Q[Le],validateSpec:M.validateSpec,style:ee,styleSpec:Y})):ce.push(new nt(Le,H[Le],`unknown property "${Le}"`));return ce}({sourceName:l,value:n,style:s.style,styleSpec:f,validateSpec:N}),T;case"geojson":if(T=Ds({key:l,value:n,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:N,objectElementValidators:vu}),n.cluster)for(const M in n.clusterProperties){const[V,F]=n.clusterProperties[M],H=typeof V=="string"?[V,["accumulated"],["get",M]]:V;T.push(...Al({key:`${l}.${M}.map`,value:F,expressionContext:"cluster-map"})),T.push(...Al({key:`${l}.${M}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return T;case"video":return Ds({key:l,value:n,valueSpec:f.source_video,style:v,validateSpec:N,styleSpec:f});case"image":return Ds({key:l,value:n,valueSpec:f.source_image,style:v,validateSpec:N,styleSpec:f});case"canvas":return[new nt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gu({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function yu(s){const n=s.value,l=s.styleSpec,f=l.light,v=s.style;let N=[];const E=pr(n);if(n===void 0)return N;if(E!=="object")return N=N.concat([new nt("light",n,`object expected, ${E} found`)]),N;for(const T in n){const M=T.match(/^(.*)-transition$/);N=N.concat(M&&f[M[1]]&&f[M[1]].transition?s.validateSpec({key:T,value:n[T],valueSpec:l.transition,validateSpec:s.validateSpec,style:v,styleSpec:l}):f[T]?s.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:s.validateSpec,style:v,styleSpec:l}):[new nt(T,n[T],`unknown property "${T}"`)])}return N}function pd(s){const n=s.value,l=s.styleSpec,f=l.terrain,v=s.style;let N=[];const E=pr(n);if(n===void 0)return N;if(E!=="object")return N=N.concat([new nt("terrain",n,`object expected, ${E} found`)]),N;for(const T in n)N=N.concat(f[T]?s.validateSpec({key:T,value:n[T],valueSpec:f[T],validateSpec:s.validateSpec,style:v,styleSpec:l}):[new nt(T,n[T],`unknown property "${T}"`)]);return N}function Ko(s){let n=[];const l=s.value,f=s.key;if(Array.isArray(l)){const v=[],N=[];for(const E in l)l[E].id&&v.includes(l[E].id)&&n.push(new nt(f,l,`all the sprites' ids must be unique, but ${l[E].id} is duplicated`)),v.push(l[E].id),l[E].url&&N.includes(l[E].url)&&n.push(new nt(f,l,`all the sprites' URLs must be unique, but ${l[E].url} is duplicated`)),N.push(l[E].url),n=n.concat(Ds({key:`${f}[${E}]`,value:l[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return io({key:f,value:l})}const bu={"*":()=>[],array:Cc,boolean:function(s){const n=s.value,l=s.key,f=pr(n);return f!=="boolean"?[new nt(l,n,`boolean expected, ${f} found`)]:[]},number:pu,color:function(s){const n=s.key,l=s.value,f=pr(l);return f!=="string"?[new nt(n,l,`color expected, ${f} found`)]:xr.parse(String(l))?[]:[new nt(n,l,`color expected, "${l}" found`)]},constants:kl,enum:gu,filter:Nc,function:md,layer:Dh,object:Ds,source:ta,light:yu,terrain:pd,string:io,formatted:function(s){return io(s).length===0?[]:Al(s)},resolvedImage:function(s){return io(s).length===0?[]:Al(s)},padding:function(s){const n=s.key,l=s.value;if(pr(l)==="array"){if(l.length<1||l.length>4)return[new nt(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let v=[];for(let N=0;N<l.length;N++)v=v.concat(s.validateSpec({key:`${n}[${N}]`,value:l[N],validateSpec:s.validateSpec,valueSpec:f}));return v}return pu({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,l=s.value,f=pr(l),v=s.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new nt(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let N=[];for(let E=0;E<l.length;E+=2)N=N.concat(gu({key:`${n}[${E}]`,value:l[E],valueSpec:v.layout_symbol["text-anchor"]})),N=N.concat(Cc({key:`${n}[${E+1}]`,value:l[E+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:v}));return N},sprite:Ko};function Eo(s){const n=s.value,l=s.valueSpec,f=s.styleSpec;return s.validateSpec=Eo,l.expression&&mi(li(n))?md(s):l.expression&&cs(Zo(n))?Al(s):l.type&&bu[l.type]?bu[l.type](s):Ds(Fn({},s,{valueSpec:l.type?f[l.type]:l}))}function Ml(s){const n=s.value,l=s.key,f=io(s);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new nt(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new nt(l,n,'"glyphs" url must include a "{range}" token'))),f}function xa(s,n=We){let l=[];return l=l.concat(Eo({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Eo,objectElementValidators:{glyphs:Ml,"*":()=>[]}})),s.constants&&(l=l.concat(kl({key:"constants",value:s.constants}))),gd(l)}function Do(s){return function(n){return s({...n,validateSpec:Eo})}}function gd(s){return[].concat(s).sort((n,l)=>n.line-l.line)}function To(s){return function(...n){return gd(s.apply(this,n))}}xa.source=To(Do(ta)),xa.sprite=To(Do(Ko)),xa.glyphs=To(Do(Ml)),xa.light=To(Do(yu)),xa.terrain=To(Do(pd)),xa.layer=To(Do(Dh)),xa.filter=To(Do(Nc)),xa.paintProperty=To(Do(Eh)),xa.layoutProperty=To(Do(Lf));const Po=xa,Vf=Po.light,Th=Po.paintProperty,Ph=Po.layoutProperty;function ns(s,n){let l=!1;if(n&&n.length)for(const f of n)s.fire(new Rr(new Error(f.message))),l=!0;return l}class Rl{constructor(n,l,f){const v=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const E=new Int32Array(this.arrayBuffer);n=E[0],this.d=(l=E[1])+2*(f=E[2]);for(let M=0;M<this.d*this.d;M++){const V=E[3+M],F=E[3+M+1];v.push(V===F?null:E.subarray(V,F))}const T=E[3+v.length+1];this.keys=E.subarray(E[3+v.length],T),this.bboxes=E.subarray(T),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let E=0;E<this.d*this.d;E++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=f,this.scale=l/n,this.uid=0;const N=f/l*n;this.min=-N,this.max=n+N}insert(n,l,f,v,N){this._forEachCell(l,f,v,N,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(N)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,f,v,N,E){this.cells[N].push(E)}query(n,l,f,v,N){const E=this.min,T=this.max;if(n<=E&&l<=E&&T<=f&&T<=v&&!N)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,l,f,v,this._queryCell,M,{},N),M}}_queryCell(n,l,f,v,N,E,T,M){const V=this.cells[N];if(V!==null){const F=this.keys,H=this.bboxes;for(let Y=0;Y<V.length;Y++){const Q=V[Y];if(T[Q]===void 0){const ee=4*Q;(M?M(H[ee+0],H[ee+1],H[ee+2],H[ee+3]):n<=H[ee+2]&&l<=H[ee+3]&&f>=H[ee+0]&&v>=H[ee+1])?(T[Q]=!0,E.push(F[Q])):T[Q]=!1}}}}_forEachCell(n,l,f,v,N,E,T,M){const V=this._convertToCellCoord(n),F=this._convertToCellCoord(l),H=this._convertToCellCoord(f),Y=this._convertToCellCoord(v);for(let Q=V;Q<=H;Q++)for(let ee=F;ee<=Y;ee++){const ce=this.d*ee+Q;if((!M||M(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&N.call(this,n,l,f,v,ce,E,T,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,l=3+this.cells.length+1+1;let f=0;for(let E=0;E<this.cells.length;E++)f+=this.cells[E].length;const v=new Int32Array(l+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let N=l;for(let E=0;E<n.length;E++){const T=n[E];v[3+E]=N,v.set(T,N),N+=T.length}return v[3+n.length]=N,v.set(this.keys,N),N+=this.keys.length,v[3+n.length+1]=N,v.set(this.bboxes,N),N+=this.bboxes.length,v.buffer}static serialize(n,l){const f=n.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(n){return new Rl(n.buffer)}}const jo={};function Gt(s,n,l={}){if(jo[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),jo[s]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}Gt("Object",Object),Gt("TransferableGridIndex",Rl),Gt("Color",xr),Gt("Error",Error),Gt("AJAXError",Ft),Gt("ResolvedImage",Oi),Gt("StylePropertyFunction",Wo),Gt("StyleExpression",dd,{omit:["_evaluator"]}),Gt("ZoomDependentExpression",ba),Gt("ZoomConstantExpression",wi),Gt("CompoundExpression",vs,{omit:["_evaluate"]});for(const s in Gs)Gs[s]._classRegistryKey||Gt(`Expression_${s}`,Gs[s]);function vd(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Yo(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(vd(s)||bn(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return n&&n.push(l.buffer),l}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const f of s)l.push(Yo(f,n));return l}if(typeof s=="object"){const l=s.constructor,f=l._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!jo[f])throw new Error(`${f} is not registered.`);const v=l.serialize?l.serialize(s,n):{};if(l.serialize){if(n&&v===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const N in s){if(!s.hasOwnProperty(N)||jo[f].omit.indexOf(N)>=0)continue;const E=s[N];v[N]=jo[f].shallow.indexOf(N)>=0?E:Yo(E,n)}s instanceof Error&&(v.message=s.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(v.$name=f),v}throw new Error("can't serialize object of type "+typeof s)}function Sc(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||vd(s)||bn(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(Sc);if(typeof s=="object"){const n=s.$name||"Object";if(!jo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:l}=jo[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(s);const f=Object.create(l.prototype);for(const v of Object.keys(s)){if(v==="$name")continue;const N=s[v];f[v]=jo[n].shallow.indexOf(v)>=0?N:Sc(N)}return f}throw new Error("can't deserialize object of type "+typeof s)}class jh{constructor(){this.first=!0}update(n,l){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const Vt={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Il(s){for(const n of s)if(Ah(n.charCodeAt(0)))return!0;return!1}function kh(s){for(const n of s)if(!xu(n.charCodeAt(0)))return!1;return!0}function xu(s){return!(Vt.Arabic(s)||Vt["Arabic Supplement"](s)||Vt["Arabic Extended-A"](s)||Vt["Arabic Presentation Forms-A"](s)||Vt["Arabic Presentation Forms-B"](s))}function Ah(s){return!(s!==746&&s!==747&&(s<4352||!(Vt["Bopomofo Extended"](s)||Vt.Bopomofo(s)||Vt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Vt["CJK Compatibility Ideographs"](s)||Vt["CJK Compatibility"](s)||Vt["CJK Radicals Supplement"](s)||Vt["CJK Strokes"](s)||!(!Vt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Vt["CJK Unified Ideographs Extension A"](s)||Vt["CJK Unified Ideographs"](s)||Vt["Enclosed CJK Letters and Months"](s)||Vt["Hangul Compatibility Jamo"](s)||Vt["Hangul Jamo Extended-A"](s)||Vt["Hangul Jamo Extended-B"](s)||Vt["Hangul Jamo"](s)||Vt["Hangul Syllables"](s)||Vt.Hiragana(s)||Vt["Ideographic Description Characters"](s)||Vt.Kanbun(s)||Vt["Kangxi Radicals"](s)||Vt["Katakana Phonetic Extensions"](s)||Vt.Katakana(s)&&s!==12540||!(!Vt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Vt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Vt["Unified Canadian Aboriginal Syllabics"](s)||Vt["Unified Canadian Aboriginal Syllabics Extended"](s)||Vt["Vertical Forms"](s)||Vt["Yijing Hexagram Symbols"](s)||Vt["Yi Syllables"](s)||Vt["Yi Radicals"](s))))}function Of(s){return!(Ah(s)||function(n){return!!(Vt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Vt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Vt["Letterlike Symbols"](n)||Vt["Number Forms"](n)||Vt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Vt["Control Pictures"](n)&&n!==9251||Vt["Optical Character Recognition"](n)||Vt["Enclosed Alphanumerics"](n)||Vt["Geometric Shapes"](n)||Vt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Vt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Vt["CJK Symbols and Punctuation"](n)||Vt.Katakana(n)||Vt["Private Use Area"](n)||Vt["CJK Compatibility Forms"](n)||Vt["Small Form Variants"](n)||Vt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function zf(s){return s>=1424&&s<=2303||Vt["Arabic Presentation Forms-A"](s)||Vt["Arabic Presentation Forms-B"](s)}function yd(s,n){return!(!n&&zf(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Vt.Khmer(s))}function Mh(s){for(const n of s)if(zf(n.charCodeAt(0)))return!0;return!1}const Xo="deferred",Jo="loading",bd="loaded";let Rh=null,Ts="unavailable",Qo=null;const Ec=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Ts="error"),Rh&&Rh(s)};function xd(){Dc.fire(new fi("pluginStateChange",{pluginStatus:Ts,pluginURL:Qo}))}const Dc=new ii,_u=function(){return Ts},Bf=function(){if(Ts!==Xo||!Qo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ts=Jo,xd(),Qo&&Wn({url:Qo},s=>{s?Ec(s):(Ts=bd,xd())})},Ws={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ts===bd||Ws.applyArabicShaping!=null,isLoading:()=>Ts===Jo,setState(s){if(!at())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ts=s.pluginStatus,Qo=s.pluginURL},isParsed(){if(!at())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ws.applyArabicShaping!=null&&Ws.processBidirectionalText!=null&&Ws.processStyledBidirectionalText!=null},getPluginURL(){if(!at())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Qo}};class ti{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jh,this.transition={})}isSupportedScript(n){return function(l,f){for(const v of l)if(!yd(v.charCodeAt(0),f))return!1;return!0}(n,Ws.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class _d{constructor(n,l){this.property=n,this.value=l,this.expression=function(f,v){if(mi(f))return new Wo(f,v);if(cs(f)){const N=du(f,v);if(N.result==="error")throw new Error(N.value.map(E=>`${E.key}: ${E.message}`).join(", "));return N.value}{let N=f;return v.type==="color"&&typeof f=="string"?N=xr.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(N=ps.parse(f)):N=as.parse(f),{kind:"constant",evaluate:()=>N}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,f){return this.property.possiblyEvaluate(this,n,l,f)}}class Ih{constructor(n){this.property=n,this.value=new _d(n,void 0)}transitioned(n,l){return new wd(this.property,this.value,l,ut({},n.transition,this.transition),n.now)}untransitioned(){return new wd(this.property,this.value,null,{},0)}}class Tc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ft(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ih(this._values[n].property)),this._values[n].value=new _d(this._values[n].property,l===null?void 0:ft(l))}getTransition(n){return ft(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ih(this._values[n].property)),this._values[n].transition=ft(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(n[l]=f);const v=this.getTransition(l);v!==void 0&&(n[`${l}-transition`]=v)}return n}transitioned(n,l){const f=new Pc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(n,l._values[v]);return f}untransitioned(){const n=new Pc(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class wd{constructor(n,l,f,v,N){this.property=n,this.value=l,this.begin=N+v.delay||0,this.end=this.begin+v.duration||0,n.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(n,l,f){const v=n.now||0,N=this.value.possiblyEvaluate(n,l,f),E=this.prior;if(E){if(v>this.end)return this.prior=null,N;if(this.value.isDataDriven())return this.prior=null,N;if(v<this.begin)return E.possiblyEvaluate(n,l,f);{const T=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(n,l,f),N,function(M){if(M<=0)return 0;if(M>=1)return 1;const V=M*M,F=V*M;return 4*(M<.5?F:3*(M-V)+F-.75)}(T))}}return N}}class Pc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,f){const v=new jc(this._properties);for(const N of Object.keys(this._values))v._values[N]=this._values[N].possiblyEvaluate(n,l,f);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Ff{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ft(this._values[n].value)}setValue(n,l){this._values[n]=new _d(this._values[n].property,l===null?void 0:ft(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(n[l]=f)}return n}possiblyEvaluate(n,l,f){const v=new jc(this._properties);for(const N of Object.keys(this._values))v._values[N]=this._values[N].possiblyEvaluate(n,l,f);return v}}class ys{constructor(n,l,f){this.property=n,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,f,v){return this.property.evaluate(this.value,this.parameters,n,l,f,v)}}class jc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class cn{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,f){const v=es[this.specification.type];return v?v(n,l,f):n}}class gn{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,f,v){return new ys(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},f,v)}:n.expression,l)}interpolate(n,l,f){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new ys(this,{kind:"constant",value:void 0},n.parameters);const v=es[this.specification.type];if(v){const N=v(n.value.value,l.value.value,f);return new ys(this,{kind:"constant",value:N},n.parameters)}return n}evaluate(n,l,f,v,N,E){return n.kind==="constant"?n.value:n.evaluate(l,f,v,N,E)}}class el extends gn{possiblyEvaluate(n,l,f,v){if(n.value===void 0)return new ys(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const N=n.expression.evaluate(l,null,{},f,v),E=n.property.specification.type==="resolvedImage"&&typeof N!="string"?N.name:N,T=this._calculate(E,E,E,l);return new ys(this,{kind:"constant",value:T},l)}if(n.expression.kind==="camera"){const N=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new ys(this,{kind:"constant",value:N},l)}return new ys(this,n.expression,l)}evaluate(n,l,f,v,N,E){if(n.kind==="source"){const T=n.evaluate(l,f,v,N,E);return this._calculate(T,T,T,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},f,v),n.evaluate({zoom:Math.floor(l.zoom)},f,v),n.evaluate({zoom:Math.floor(l.zoom)+1},f,v),l):n.value}_calculate(n,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:f,to:l}}interpolate(n){return n}}class kc{constructor(n){this.specification=n}possiblyEvaluate(n,l,f,v){if(n.value!==void 0){if(n.expression.kind==="constant"){const N=n.expression.evaluate(l,null,{},f,v);return this._calculate(N,N,N,l)}return this._calculate(n.expression.evaluate(new ti(Math.floor(l.zoom-1),l)),n.expression.evaluate(new ti(Math.floor(l.zoom),l)),n.expression.evaluate(new ti(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:f,to:l}}interpolate(n){return n}}class wu{constructor(n){this.specification=n}possiblyEvaluate(n,l,f,v){return!!n.expression.evaluate(l,null,{},f,v)}interpolate(){return!1}}class Ai{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in n){const f=n[l];f.specification.overridable&&this.overridableProperties.push(l);const v=this.defaultPropertyValues[l]=new _d(f,void 0),N=this.defaultTransitionablePropertyValues[l]=new Ih(f);this.defaultTransitioningPropertyValues[l]=N.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}Gt("DataDrivenProperty",gn),Gt("DataConstantProperty",cn),Gt("CrossFadedDataDrivenProperty",el),Gt("CrossFadedProperty",kc),Gt("ColorRampProperty",wu);const Cu="-transition";class _a extends ii{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new Ff(l.layout)),l.paint)){this._transitionablePaint=new Tc(l.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jc(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,f={}){l!=null&&this._validate(Ph,`layers.${this.id}.layout.${n}`,n,l,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(Cu)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,f={}){if(l!=null&&this._validate(Th,`layers.${this.id}.paint.${n}`,n,l,f))return!1;if(n.endsWith(Cu))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{const v=this._transitionablePaint._values[n],N=v.property.specification["property-type"]==="cross-faded-data-driven",E=v.value.isDataDriven(),T=v.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||E||N||this._handleOverridablePaintPropertyUpdate(n,T,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Yt(n,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(n,l,f,v,N={}){return(!N||N.validate!==!1)&&ns(this,n.call(Po,{key:l,layerType:this.type,objectKey:f,value:v,styleSpec:We,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof ys&&Go(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Uf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ll{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ir(s,n=1){let l=0,f=0;return{members:s.map(v=>{const N=Uf[v.type].BYTES_PER_ELEMENT,E=l=Ac(l,Math.max(n,N)),T=v.components||1;return f=Math.max(f,N),l+=N*T,{name:v.name,type:v.type,components:T,offset:E}}),size:Ac(l,Math.max(f,n)),alignment:n}}function Ac(s,n){return Math.ceil(s/n)*n}class Nu extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.int16[v+0]=l,this.int16[v+1]=f,n}}Nu.prototype.bytesPerElement=4,Gt("StructArrayLayout2i4",Nu);class Cn extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const N=3*n;return this.int16[N+0]=l,this.int16[N+1]=f,this.int16[N+2]=v,n}}Cn.prototype.bytesPerElement=6,Gt("StructArrayLayout3i6",Cn);class wa extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,f,v)}emplace(n,l,f,v,N){const E=4*n;return this.int16[E+0]=l,this.int16[E+1]=f,this.int16[E+2]=v,this.int16[E+3]=N,n}}wa.prototype.bytesPerElement=8,Gt("StructArrayLayout4i8",wa);class Ci extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,N,E)}emplace(n,l,f,v,N,E,T){const M=6*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=N,this.int16[M+4]=E,this.int16[M+5]=T,n}}Ci.prototype.bytesPerElement=12,Gt("StructArrayLayout2i4i12",Ci);class hr extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,N,E)}emplace(n,l,f,v,N,E,T){const M=4*n,V=8*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.uint8[V+4]=v,this.uint8[V+5]=N,this.uint8[V+6]=E,this.uint8[V+7]=T,n}}hr.prototype.bytesPerElement=8,Gt("StructArrayLayout2i4ub8",hr);class Ca extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.float32[v+0]=l,this.float32[v+1]=f,n}}Ca.prototype.bytesPerElement=8,Gt("StructArrayLayout2f8",Ca);class Vl extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E,T,M,V,F){const H=this.length;return this.resize(H+1),this.emplace(H,n,l,f,v,N,E,T,M,V,F)}emplace(n,l,f,v,N,E,T,M,V,F,H){const Y=10*n;return this.uint16[Y+0]=l,this.uint16[Y+1]=f,this.uint16[Y+2]=v,this.uint16[Y+3]=N,this.uint16[Y+4]=E,this.uint16[Y+5]=T,this.uint16[Y+6]=M,this.uint16[Y+7]=V,this.uint16[Y+8]=F,this.uint16[Y+9]=H,n}}Vl.prototype.bytesPerElement=20,Gt("StructArrayLayout10ui20",Vl);class Cd extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E,T,M,V,F,H,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,l,f,v,N,E,T,M,V,F,H,Y)}emplace(n,l,f,v,N,E,T,M,V,F,H,Y,Q){const ee=12*n;return this.int16[ee+0]=l,this.int16[ee+1]=f,this.int16[ee+2]=v,this.int16[ee+3]=N,this.uint16[ee+4]=E,this.uint16[ee+5]=T,this.uint16[ee+6]=M,this.uint16[ee+7]=V,this.int16[ee+8]=F,this.int16[ee+9]=H,this.int16[ee+10]=Y,this.int16[ee+11]=Q,n}}Cd.prototype.bytesPerElement=24,Gt("StructArrayLayout4i4ui4i24",Cd);class un extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const N=3*n;return this.float32[N+0]=l,this.float32[N+1]=f,this.float32[N+2]=v,n}}un.prototype.bytesPerElement=12,Gt("StructArrayLayout3f12",un);class x extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}x.prototype.bytesPerElement=4,Gt("StructArrayLayout1ul4",x);class r extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E,T,M,V){const F=this.length;return this.resize(F+1),this.emplace(F,n,l,f,v,N,E,T,M,V)}emplace(n,l,f,v,N,E,T,M,V,F){const H=10*n,Y=5*n;return this.int16[H+0]=l,this.int16[H+1]=f,this.int16[H+2]=v,this.int16[H+3]=N,this.int16[H+4]=E,this.int16[H+5]=T,this.uint32[Y+3]=M,this.uint16[H+8]=V,this.uint16[H+9]=F,n}}r.prototype.bytesPerElement=20,Gt("StructArrayLayout6i1ul2ui20",r);class d extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,f,v,N,E)}emplace(n,l,f,v,N,E,T){const M=6*n;return this.int16[M+0]=l,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=N,this.int16[M+4]=E,this.int16[M+5]=T,n}}d.prototype.bytesPerElement=12,Gt("StructArrayLayout2i2i2i12",d);class m extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N){const E=this.length;return this.resize(E+1),this.emplace(E,n,l,f,v,N)}emplace(n,l,f,v,N,E){const T=4*n,M=8*n;return this.float32[T+0]=l,this.float32[T+1]=f,this.float32[T+2]=v,this.int16[M+6]=N,this.int16[M+7]=E,n}}m.prototype.bytesPerElement=16,Gt("StructArrayLayout2f1f2i16",m);class y extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,f,v)}emplace(n,l,f,v,N){const E=12*n,T=3*n;return this.uint8[E+0]=l,this.uint8[E+1]=f,this.float32[T+1]=v,this.float32[T+2]=N,n}}y.prototype.bytesPerElement=12,Gt("StructArrayLayout2ub2f12",y);class w extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const N=3*n;return this.uint16[N+0]=l,this.uint16[N+1]=f,this.uint16[N+2]=v,n}}w.prototype.bytesPerElement=6,Gt("StructArrayLayout3ui6",w);class P extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be){const Me=this.length;return this.resize(Me+1),this.emplace(Me,n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be)}emplace(n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be,Me){const De=24*n,Le=12*n,qe=48*n;return this.int16[De+0]=l,this.int16[De+1]=f,this.uint16[De+2]=v,this.uint16[De+3]=N,this.uint32[Le+2]=E,this.uint32[Le+3]=T,this.uint32[Le+4]=M,this.uint16[De+10]=V,this.uint16[De+11]=F,this.uint16[De+12]=H,this.float32[Le+7]=Y,this.float32[Le+8]=Q,this.uint8[qe+36]=ee,this.uint8[qe+37]=ce,this.uint8[qe+38]=ve,this.uint32[Le+10]=be,this.int16[De+22]=Me,n}}P.prototype.bytesPerElement=48,Gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",P);class j extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be,Me,De,Le,qe,st,Ot,Jt,Bt,Rt,Et,_t){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be,Me,De,Le,qe,st,Ot,Jt,Bt,Rt,Et,_t)}emplace(n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce,ve,be,Me,De,Le,qe,st,Ot,Jt,Bt,Rt,Et,_t,Dt){const vt=32*n,dn=16*n;return this.int16[vt+0]=l,this.int16[vt+1]=f,this.int16[vt+2]=v,this.int16[vt+3]=N,this.int16[vt+4]=E,this.int16[vt+5]=T,this.int16[vt+6]=M,this.int16[vt+7]=V,this.uint16[vt+8]=F,this.uint16[vt+9]=H,this.uint16[vt+10]=Y,this.uint16[vt+11]=Q,this.uint16[vt+12]=ee,this.uint16[vt+13]=ce,this.uint16[vt+14]=ve,this.uint16[vt+15]=be,this.uint16[vt+16]=Me,this.uint16[vt+17]=De,this.uint16[vt+18]=Le,this.uint16[vt+19]=qe,this.uint16[vt+20]=st,this.uint16[vt+21]=Ot,this.uint16[vt+22]=Jt,this.uint32[dn+12]=Bt,this.float32[dn+13]=Rt,this.float32[dn+14]=Et,this.uint16[vt+30]=_t,this.uint16[vt+31]=Dt,n}}j.prototype.bytesPerElement=64,Gt("StructArrayLayout8i15ui1ul2f2ui64",j);class R extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}R.prototype.bytesPerElement=4,Gt("StructArrayLayout1f4",R);class z extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const N=3*n;return this.uint16[6*n+0]=l,this.float32[N+1]=f,this.float32[N+2]=v,n}}z.prototype.bytesPerElement=12,Gt("StructArrayLayout1ui2f12",z);class U extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,f)}emplace(n,l,f,v){const N=4*n;return this.uint32[2*n+0]=l,this.uint16[N+2]=f,this.uint16[N+3]=v,n}}U.prototype.bytesPerElement=8,Gt("StructArrayLayout1ul2ui8",U);class q extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const f=this.length;return this.resize(f+1),this.emplace(f,n,l)}emplace(n,l,f){const v=2*n;return this.uint16[v+0]=l,this.uint16[v+1]=f,n}}q.prototype.bytesPerElement=4,Gt("StructArrayLayout2ui4",q);class X extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}X.prototype.bytesPerElement=2,Gt("StructArrayLayout1ui2",X);class oe extends ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,f,v){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,f,v)}emplace(n,l,f,v,N){const E=4*n;return this.float32[E+0]=l,this.float32[E+1]=f,this.float32[E+2]=v,this.float32[E+3]=N,n}}oe.prototype.bytesPerElement=16,Gt("StructArrayLayout4f16",oe);class le extends Ll{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new W(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class me extends r{get(n){return new le(this,n)}}Gt("CollisionBoxArray",me);class ae extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class je extends P{get(n){return new ae(this,n)}}Gt("PlacedSymbolArray",je);class Fe extends Ll{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Fe.prototype.size=64;class ye extends j{get(n){return new Fe(this,n)}}Gt("SymbolInstanceArray",ye);class Ae extends R{getoffsetX(n){return this.float32[1*n+0]}}Gt("GlyphOffsetArray",Ae);class $e extends Cn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Gt("SymbolLineVertexArray",$e);class Ke extends Ll{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ke.prototype.size=12;class it extends z{get(n){return new Ke(this,n)}}Gt("TextAnchorOffsetArray",it);class yt extends Ll{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}yt.prototype.size=8;class dt extends U{get(n){return new yt(this,n)}}Gt("FeatureIndexArray",dt);class Nt extends Nu{}class en extends Nu{}class Qn extends Nu{}class Mt extends Ci{}class xn extends hr{}class tn extends Ca{}class kr extends Vl{}class Xn extends Cd{}class On extends un{}class er extends x{}class Ni extends d{}class Wr extends y{}class gr extends w{}class $i extends q{}const pi=Ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ps}=pi;class Nr{constructor(n=[]){this.segments=n}prepareSegment(n,l,f,v){let N=this.segments[this.segments.length-1];return n>Nr.MAX_VERTEX_ARRAY_LENGTH&&It(`Max vertices per segment is ${Nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!N||N.vertexLength+n>Nr.MAX_VERTEX_ARRAY_LENGTH||N.sortKey!==v)&&(N={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},v!==void 0&&(N.sortKey=v),this.segments.push(N)),N}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,f,v){return new Nr([{vertexOffset:n,primitiveOffset:l,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function so(s,n){return 256*(s=Je(Math.floor(s),0,255))+Je(Math.floor(n),0,255)}Nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt("SegmentVector",Nr);const Na=Ir([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var tl={exports:{}},Ol={exports:{}};Ol.exports=function(s,n){var l,f,v,N,E,T,M,V;for(f=s.length-(l=3&s.length),v=n,E=3432918353,T=461845907,V=0;V<f;)M=255&s.charCodeAt(V)|(255&s.charCodeAt(++V))<<8|(255&s.charCodeAt(++V))<<16|(255&s.charCodeAt(++V))<<24,++V,v=27492+(65535&(N=5*(65535&(v=(v^=M=(65535&(M=(M=(65535&M)*E+(((M>>>16)*E&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(M=0,l){case 3:M^=(255&s.charCodeAt(V+2))<<16;case 2:M^=(255&s.charCodeAt(V+1))<<8;case 1:v^=M=(65535&(M=(M=(65535&(M^=255&s.charCodeAt(V)))*E+(((M>>>16)*E&65535)<<16)&4294967295)<<15|M>>>17))*T+(((M>>>16)*T&65535)<<16)&4294967295}return v^=s.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var za=Ol.exports,Er={exports:{}};Er.exports=function(s,n){for(var l,f=s.length,v=n^f,N=0;f>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(N)|(255&s.charCodeAt(++N))<<8|(255&s.charCodeAt(++N))<<16|(255&s.charCodeAt(++N))<<24))+((1540483477*(l>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++N;switch(f){case 3:v^=(255&s.charCodeAt(N+2))<<16;case 2:v^=(255&s.charCodeAt(N+1))<<8;case 1:v=1540483477*(65535&(v^=255&s.charCodeAt(N)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var kt=za,gi=Er.exports;tl.exports=kt,tl.exports.murmur3=kt,tl.exports.murmur2=gi;var us=A(tl.exports);class Si{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,f,v){this.ids.push(qi(n)),this.positions.push(l,f,v)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=qi(n);let f=0,v=this.ids.length-1;for(;f<v;){const E=f+v>>1;this.ids[E]>=l?v=E:f=E+1}const N=[];for(;this.ids[f]===l;)N.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return N}static serialize(n,l){const f=new Float64Array(n.ids),v=new Uint32Array(n.positions);return Zs(f,v,0,f.length-1),l&&l.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(n){const l=new Si;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function qi(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:us(String(s))}function Zs(s,n,l,f){for(;l<f;){const v=s[l+f>>1];let N=l-1,E=f+1;for(;;){do N++;while(s[N]<v);do E--;while(s[E]>v);if(N>=E)break;Ei(s,N,E),Ei(n,3*N,3*E),Ei(n,3*N+1,3*E+1),Ei(n,3*N+2,3*E+2)}E-l<f-E?(Zs(s,n,l,E),l=E+1):(Zs(s,n,E+1,f),f=E)}}function Ei(s,n,l){const f=s[n];s[n]=s[l],s[l]=f}Gt("FeaturePositionMap",Si);class zl{constructor(n,l){this.gl=n.gl,this.location=l}}class Mi extends zl{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class $f extends zl{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class qf extends zl{constructor(n,l){super(n,l),this.current=xr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Tp=new Float32Array(16);function Nd(s){return[so(255*s.r,255*s.g),so(255*s.b,255*s.a)]}class Ks{constructor(n,l,f){this.value=n,this.uniformNames=l.map(v=>`u_${v}`),this.type=f}setUniform(n,l,f){n.set(f.constantOr(this.value))}getBinding(n,l,f){return this.type==="color"?new qf(n,l):new Mi(n,l)}}class Sa{constructor(n,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,f,v){const N=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;N&&n.set(N)}getBinding(n,l,f){return f.substr(0,9)==="u_pattern"?new $f(n,l):new Mi(n,l)}}class ao{constructor(n,l,f,v){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(N=>({name:`a_${N}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,l,f,v,N){const E=this.paintVertexArray.length,T=this.expression.evaluate(new ti(0),l,{},v,[],N);this.paintVertexArray.resize(n),this._setPaintValue(E,n,T)}updatePaintArray(n,l,f,v){const N=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(n,l,N)}_setPaintValue(n,l,f){if(this.type==="color"){const v=Nd(f);for(let N=n;N<l;N++)this.paintVertexArray.emplace(N,v[0],v[1])}else{for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ea{constructor(n,l,f,v,N,E){this.expression=n,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=N,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(n,l,f,v,N){const E=this.expression.evaluate(new ti(this.zoom),l,{},v,[],N),T=this.expression.evaluate(new ti(this.zoom+1),l,{},v,[],N),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,E,T)}updatePaintArray(n,l,f,v){const N=this.expression.evaluate({zoom:this.zoom},f,v),E=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(n,l,N,E)}_setPaintValue(n,l,f,v){if(this.type==="color"){const N=Nd(f),E=Nd(v);for(let T=n;T<l;T++)this.paintVertexArray.emplace(T,N[0],N[1],E[0],E[1])}else{for(let N=n;N<l;N++)this.paintVertexArray.emplace(N,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=Je(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(v)}getBinding(n,l,f){return new Mi(n,l)}}class oo{constructor(n,l,f,v,N,E){this.expression=n,this.type=l,this.useIntegerZoom=f,this.zoom=v,this.layerId=E,this.zoomInPaintVertexArray=new N,this.zoomOutPaintVertexArray=new N}populatePaintArray(n,l,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(v,n,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(n,l,f,v,N){this._setPaintValues(n,l,f.patterns&&f.patterns[this.layerId],N)}_setPaintValues(n,l,f,v){if(!v||!f)return;const{min:N,mid:E,max:T}=f,M=v[N],V=v[E],F=v[T];if(M&&V&&F)for(let H=n;H<l;H++)this.zoomInPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],V.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,V.tl[0],V.tl[1],V.br[0],V.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],V.pixelRatio,F.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Na.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Na.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lh{constructor(n,l,f){this.binders={},this._buffers=[];const v=[];for(const N in n.paint._values){if(!f(N))continue;const E=n.paint.get(N);if(!(E instanceof ys&&Go(E.property.specification)))continue;const T=x0(N,n.type),M=E.value,V=E.property.specification.type,F=E.property.useIntegerZoom,H=E.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(M.kind==="constant")this.binders[N]=Y?new Sa(M.value,T):new Ks(M.value,T,V),v.push(`/u_${N}`);else if(M.kind==="source"||Y){const Q=Pp(N,V,"source");this.binders[N]=Y?new oo(M,V,F,l,Q,n.id):new ao(M,T,V,Q),v.push(`/a_${N}`)}else{const Q=Pp(N,V,"composite");this.binders[N]=new Ea(M,T,V,F,l,Q),v.push(`/z_${N}`)}}this.cacheKey=v.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof ao||l instanceof Ea?l.maxValue:0}populatePaintArrays(n,l,f,v,N){for(const E in this.binders){const T=this.binders[E];(T instanceof ao||T instanceof Ea||T instanceof oo)&&T.populatePaintArray(n,l,f,v,N)}}setConstantPatternPositions(n,l){for(const f in this.binders){const v=this.binders[f];v instanceof Sa&&v.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,f,v,N){let E=!1;for(const T in n){const M=l.getPositions(T);for(const V of M){const F=f.feature(V.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof ao||Y instanceof Ea||Y instanceof oo)&&Y.expression.isStateDependent===!0){const Q=v.paint.get(H);Y.expression=Q.value,Y.updatePaintArray(V.start,V.end,F,n[T],N),E=!0}}}}return E}defines(){const n=[];for(const l in this.binders){const f=this.binders[l];(f instanceof Ks||f instanceof Sa)&&n.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof ao||f instanceof Ea)for(let v=0;v<f.paintVertexAttributes.length;v++)n.push(f.paintVertexAttributes[v].name);else if(f instanceof oo)for(let v=0;v<Na.members.length;v++)n.push(Na.members[v].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Ks||f instanceof Sa||f instanceof Ea)for(const v of f.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const f=[];for(const v in this.binders){const N=this.binders[v];if(N instanceof Ks||N instanceof Sa||N instanceof Ea){for(const E of N.uniformNames)if(l[E]){const T=N.getBinding(n,l[E],E);f.push({name:E,property:v,binding:T})}}}return f}setUniforms(n,l,f,v){for(const{name:N,property:E,binding:T}of l)this.binders[E].setUniform(T,v,f.get(E),N)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(n&&f instanceof oo){const v=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof ao||f instanceof Ea)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const l in this.binders){const f=this.binders[l];(f instanceof ao||f instanceof Ea||f instanceof oo)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof ao||l instanceof Ea||l instanceof oo)&&l.destroy()}}}class ko{constructor(n,l,f=()=>!0){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Lh(v,l,f);this.needsUpload=!1,this._featureMap=new Si,this._bufferOffset=0}populatePaintArrays(n,l,f,v,N,E){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,l,v,N,E);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,f,v){for(const N of f)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(n,this._featureMap,l,N,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function x0(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function Pp(s,n,l){const f={color:{source:Ca,composite:oe},number:{source:R,composite:Ca}},v=function(N){return{"line-pattern":{source:kr,composite:kr},"fill-pattern":{source:kr,composite:kr},"fill-extrusion-pattern":{source:kr,composite:kr}}[N]}(s);return v&&v[l]||f[n][l]}Gt("ConstantBinder",Ks),Gt("CrossFadedConstantBinder",Sa),Gt("SourceExpressionBinder",ao),Gt("CrossFadedCompositeBinder",oo),Gt("CompositeExpressionBinder",Ea),Gt("ProgramConfiguration",Lh,{omit:["_buffers"]}),Gt("ProgramConfigurationSet",ko);const Ri=8192,jp=Math.pow(2,14)-1,uy=-jp-1;function Su(s){const n=Ri/s.extent,l=s.loadGeometry();for(let f=0;f<l.length;f++){const v=l[f];for(let N=0;N<v.length;N++){const E=v[N],T=Math.round(E.x*n),M=Math.round(E.y*n);E.x=Je(T,uy,jp),E.y=Je(M,uy,jp),(T<E.x||T>E.x+1||M<E.y||M>E.y+1)&&It("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Eu(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Su(s):[]}}function Hf(s,n,l,f,v){s.emplaceBack(2*n+(f+1)/2,2*l+(v+1)/2)}class kp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new en,this.indexArray=new gr,this.segments=new Nr,this.programConfigurations=new ko(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){const v=this.layers[0],N=[];let E=null,T=!1;v.type==="circle"&&(E=v.layout.get("circle-sort-key"),T=!E.isConstant());for(const{feature:M,id:V,index:F,sourceLayerIndex:H}of n){const Y=this.layers[0]._featureFilter.needGeometry,Q=Eu(M,Y);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Q,f))continue;const ee=T?E.evaluate(Q,{},f):void 0,ce={id:V,properties:M.properties,type:M.type,sourceLayerIndex:H,index:F,geometry:Y?Q.geometry:Su(M),patterns:{},sortKey:ee};N.push(ce)}T&&N.sort((M,V)=>M.sortKey-V.sortKey);for(const M of N){const{geometry:V,index:F,sourceLayerIndex:H}=M,Y=n[F].feature;this.addFeature(M,V,F,f),l.featureIndex.insert(Y,V,F,H,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ps),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,f,v){for(const N of l)for(const E of N){const T=E.x,M=E.y;if(T<0||T>=Ri||M<0||M>=Ri)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),F=V.vertexLength;Hf(this.layoutVertexArray,T,M,-1,-1),Hf(this.layoutVertexArray,T,M,1,-1),Hf(this.layoutVertexArray,T,M,1,1),Hf(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},v)}}function Ap(s,n){for(let l=0;l<s.length;l++)if(ui(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(ui(s,n[l]))return!0;return!!Rp(s,n)}function _0(s,n,l){return!!ui(s,n)||!!Sn(n,s,l)}function Mp(s,n){if(s.length===1)return Lr(n,s[0]);for(let l=0;l<n.length;l++){const f=n[l];for(let v=0;v<f.length;v++)if(ui(s,f[v]))return!0}for(let l=0;l<s.length;l++)if(Lr(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(Rp(s,n[l]))return!0;return!1}function w0(s,n,l){if(s.length>1){if(Rp(s,n))return!0;for(let f=0;f<n.length;f++)if(Sn(n[f],s,l))return!0}for(let f=0;f<s.length;f++)if(Sn(s[f],n,l))return!0;return!1}function Rp(s,n){if(s.length===0||n.length===0)return!1;for(let l=0;l<s.length-1;l++){const f=s[l],v=s[l+1];for(let N=0;N<n.length-1;N++)if(Ip(f,v,n[N],n[N+1]))return!0}return!1}function Ip(s,n,l,f){return Lt(s,l,f)!==Lt(n,l,f)&&Lt(s,n,l)!==Lt(s,n,f)}function Sn(s,n,l){const f=l*l;if(n.length===1)return s.distSqr(n[0])<f;for(let v=1;v<n.length;v++)if(cr(s,n[v-1],n[v])<f)return!0;return!1}function cr(s,n,l){const f=n.distSqr(l);if(f===0)return s.distSqr(n);const v=((s.x-n.x)*(l.x-n.x)+(s.y-n.y)*(l.y-n.y))/f;return s.distSqr(v<0?n:v>1?l:l.sub(n)._mult(v)._add(n))}function Lr(s,n){let l,f,v,N=!1;for(let E=0;E<s.length;E++){l=s[E];for(let T=0,M=l.length-1;T<l.length;M=T++)f=l[T],v=l[M],f.y>n.y!=v.y>n.y&&n.x<(v.x-f.x)*(n.y-f.y)/(v.y-f.y)+f.x&&(N=!N)}return N}function ui(s,n){let l=!1;for(let f=0,v=s.length-1;f<s.length;v=f++){const N=s[f],E=s[v];N.y>n.y!=E.y>n.y&&n.x<(E.x-N.x)*(n.y-N.y)/(E.y-N.y)+N.x&&(l=!l)}return l}function nl(s,n,l){const f=l[0],v=l[2];if(s.x<f.x&&n.x<f.x||s.x>v.x&&n.x>v.x||s.y<f.y&&n.y<f.y||s.y>v.y&&n.y>v.y)return!1;const N=Lt(s,n,l[0]);return N!==Lt(s,n,l[1])||N!==Lt(s,n,l[2])||N!==Lt(s,n,l[3])}function Sd(s,n,l){const f=n.paint.get(s).value;return f.kind==="constant"?f.value:l.programConfigurations.get(n.id).getMaxValue(s)}function Gf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wf(s,n,l,f,v){if(!n[0]&&!n[1])return s;const N=W.convert(n)._mult(v);l==="viewport"&&N._rotate(-f);const E=[];for(let T=0;T<s.length;T++)E.push(s[T].sub(N));return E}let dy,Zf;Gt("CircleBucket",kp,{omit:["layers"]});var xt={get paint(){return Zf=Zf||new Ai({"circle-radius":new gn(We.paint_circle["circle-radius"]),"circle-color":new gn(We.paint_circle["circle-color"]),"circle-blur":new gn(We.paint_circle["circle-blur"]),"circle-opacity":new gn(We.paint_circle["circle-opacity"]),"circle-translate":new cn(We.paint_circle["circle-translate"]),"circle-translate-anchor":new cn(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cn(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cn(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gn(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gn(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gn(We.paint_circle["circle-stroke-opacity"])})},get layout(){return dy=dy||new Ai({"circle-sort-key":new gn(We.layout_circle["circle-sort-key"])})}},Dr=1e-6,Pn=typeof Float32Array<"u"?Float32Array:Array;function Mc(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function rl(s,n,l){var f=n[0],v=n[1],N=n[2],E=n[3],T=n[4],M=n[5],V=n[6],F=n[7],H=n[8],Y=n[9],Q=n[10],ee=n[11],ce=n[12],ve=n[13],be=n[14],Me=n[15],De=l[0],Le=l[1],qe=l[2],st=l[3];return s[0]=De*f+Le*T+qe*H+st*ce,s[1]=De*v+Le*M+qe*Y+st*ve,s[2]=De*N+Le*V+qe*Q+st*be,s[3]=De*E+Le*F+qe*ee+st*Me,s[4]=(De=l[4])*f+(Le=l[5])*T+(qe=l[6])*H+(st=l[7])*ce,s[5]=De*v+Le*M+qe*Y+st*ve,s[6]=De*N+Le*V+qe*Q+st*be,s[7]=De*E+Le*F+qe*ee+st*Me,s[8]=(De=l[8])*f+(Le=l[9])*T+(qe=l[10])*H+(st=l[11])*ce,s[9]=De*v+Le*M+qe*Y+st*ve,s[10]=De*N+Le*V+qe*Q+st*be,s[11]=De*E+Le*F+qe*ee+st*Me,s[12]=(De=l[12])*f+(Le=l[13])*T+(qe=l[14])*H+(st=l[15])*ce,s[13]=De*v+Le*M+qe*Y+st*ve,s[14]=De*N+Le*V+qe*Q+st*be,s[15]=De*E+Le*F+qe*ee+st*Me,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var Ao,il=rl;function Rc(s,n,l){var f=n[0],v=n[1],N=n[2],E=n[3];return s[0]=l[0]*f+l[4]*v+l[8]*N+l[12]*E,s[1]=l[1]*f+l[5]*v+l[9]*N+l[13]*E,s[2]=l[2]*f+l[6]*v+l[10]*N+l[14]*E,s[3]=l[3]*f+l[7]*v+l[11]*N+l[15]*E,s}Ao=new Pn(4),Pn!=Float32Array&&(Ao[0]=0,Ao[1]=0,Ao[2]=0,Ao[3]=0);class Ed extends _a{constructor(n){super(n,xt)}createBucket(n){return new kp(n)}queryRadius(n){const l=n;return Sd("circle-radius",this,l)+Sd("circle-stroke-width",this,l)+Gf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,f,v,N,E,T,M){const V=Wf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),F=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),H=this.paint.get("circle-pitch-alignment")==="map",Y=H?V:function(ee,ce){return ee.map(ve=>Dd(ve,ce))}(V,M),Q=H?F*T:F;for(const ee of v)for(const ce of ee){const ve=H?ce:Dd(ce,M);let be=Q;const Me=Rc([],[ce.x,ce.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Me[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=E.cameraToCenterDistance/Me[3]),_0(Y,ve,be))return!0}return!1}}function Dd(s,n){const l=Rc([],[s.x,s.y,0,1],n);return new W(l[0]/l[3],l[1]/l[3])}class Kf extends kp{}let Yf;Gt("HeatmapBucket",Kf,{omit:["layers"]});var Lp={get paint(){return Yf=Yf||new Ai({"heatmap-radius":new gn(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gn(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cn(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wu(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cn(We.paint_heatmap["heatmap-opacity"])})}};function Vh(s,{width:n,height:l},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*l*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${n*l*f}`)}else v=new Uint8Array(n*l*f);return s.width=n,s.height=l,s.data=v,s}function Xf(s,{width:n,height:l},f){if(n===s.width&&l===s.height)return;const v=Vh({},{width:n,height:l},f);Oh(s,v,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,l)},f),s.width=n,s.height=l,s.data=v.data}function Oh(s,n,l,f,v,N){if(v.width===0||v.height===0)return n;if(v.width>s.width||v.height>s.height||l.x>s.width-v.width||l.y>s.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||f.x>n.width-v.width||f.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const E=s.data,T=n.data;if(E===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<v.height;M++){const V=((l.y+M)*s.width+l.x)*N,F=((f.y+M)*n.width+f.x)*N;for(let H=0;H<v.width*N;H++)T[F+H]=E[V+H]}return n}class Du{constructor(n,l){Vh(this,n,1,l)}resize(n){Xf(this,n,1)}clone(){return new Du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,f,v,N){Oh(n,l,f,v,N,1)}}class na{constructor(n,l){Vh(this,n,4,l)}resize(n){Xf(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,f,v,N){Oh(n,l,f,v,N,4)}}function Jf(s){const n={},l=s.resolution||256,f=s.clips?s.clips.length:1,v=s.image||new na({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const N=(E,T,M)=>{n[s.evaluationKey]=M;const V=s.expression.evaluate(n);v.data[E+T+0]=Math.floor(255*V.r/V.a),v.data[E+T+1]=Math.floor(255*V.g/V.a),v.data[E+T+2]=Math.floor(255*V.b/V.a),v.data[E+T+3]=Math.floor(255*V.a)};if(s.clips)for(let E=0,T=0;E<f;++E,T+=4*l)for(let M=0,V=0;M<l;M++,V+=4){const F=M/(l-1),{start:H,end:Y}=s.clips[E];N(T,V,H*(1-F)+Y*F)}else for(let E=0,T=0;E<l;E++,T+=4)N(0,T,E/(l-1));return v}Gt("AlphaImage",Du),Gt("RGBAImage",na);class Vp extends _a{createBucket(n){return new Kf(n)}constructor(n){super(n,Lp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Jf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qf;var Op={get paint(){return Qf=Qf||new Ai({"hillshade-illumination-direction":new cn(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cn(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cn(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cn(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cn(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cn(We.paint_hillshade["hillshade-accent-color"])})}};class zp extends _a{constructor(n){super(n,Op)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Bp=Ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fp}=Bp;var Td={exports:{}};function Bl(s,n,l){l=l||2;var f,v,N,E,T,M,V,F=n&&n.length,H=F?n[0]*l:s.length,Y=em(s,0,H,l,!0),Q=[];if(!Y||Y.next===Y.prev)return Q;if(F&&(Y=function(ce,ve,be,Me){var De,Le,qe,st=[];for(De=0,Le=ve.length;De<Le;De++)(qe=em(ce,ve[De]*Me,De<Le-1?ve[De+1]*Me:ce.length,Me,!1))===qe.next&&(qe.steiner=!0),st.push(vi(qe));for(st.sort(Bh),De=0;De<st.length;De++)be=Pu(st[De],be);return be}(s,n,Y,l)),s.length>80*l){f=N=s[0],v=E=s[1];for(var ee=l;ee<H;ee+=l)(T=s[ee])<f&&(f=T),(M=s[ee+1])<v&&(v=M),T>N&&(N=T),M>E&&(E=M);V=(V=Math.max(N-f,E-v))!==0?32767/V:0}return Tu(Y,Q,l,f,v,V,0),Q}function em(s,n,l,f,v){var N,E;if(v===qp(s,n,l,f)>0)for(N=n;N<l;N+=f)E=py(N,s[N],s[N+1],E);else for(N=l-f;N>=n;N-=f)E=py(N,s[N],s[N+1],E);return E&&ju(E,E.next)&&(ku(E),E=E.next),E}function Fl(s,n){if(!s)return s;n||(n=s);var l,f=s;do if(l=!1,f.steiner||!ju(f,f.next)&&di(f.prev,f,f.next)!==0)f=f.next;else{if(ku(f),(f=n=f.prev)===f.next)break;l=!0}while(l||f!==n);return n}function Tu(s,n,l,f,v,N,E){if(s){!E&&N&&function(F,H,Y,Q){var ee=F;do ee.z===0&&(ee.z=$p(ee.x,ee.y,H,Y,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==F);ee.prevZ.nextZ=null,ee.prevZ=null,function(ce){var ve,be,Me,De,Le,qe,st,Ot,Jt=1;do{for(be=ce,ce=null,Le=null,qe=0;be;){for(qe++,Me=be,st=0,ve=0;ve<Jt&&(st++,Me=Me.nextZ);ve++);for(Ot=Jt;st>0||Ot>0&&Me;)st!==0&&(Ot===0||!Me||be.z<=Me.z)?(De=be,be=be.nextZ,st--):(De=Me,Me=Me.nextZ,Ot--),Le?Le.nextZ=De:ce=De,De.prevZ=Le,Le=De;be=Me}Le.nextZ=null,Jt*=2}while(qe>1)}(ee)}(s,f,v,N);for(var T,M,V=s;s.prev!==s.next;)if(T=s.prev,M=s.next,N?hy(s,f,v,N):Up(s))n.push(T.i/l|0),n.push(s.i/l|0),n.push(M.i/l|0),ku(s),s=M.next,V=M.next;else if((s=M)===V){E?E===1?Tu(s=zh(Fl(s),n,l),n,l,f,v,N,2):E===2&&fy(s,n,l,f,v,N):Tu(Fl(s),n,l,f,v,N,1);break}}}function Up(s){var n=s.prev,l=s,f=s.next;if(di(n,l,f)>=0)return!1;for(var v=n.x,N=l.x,E=f.x,T=n.y,M=l.y,V=f.y,F=v<N?v<E?v:E:N<E?N:E,H=T<M?T<V?T:V:M<V?M:V,Y=v>N?v>E?v:E:N>E?N:E,Q=T>M?T>V?T:V:M>V?M:V,ee=f.next;ee!==n;){if(ee.x>=F&&ee.x<=Y&&ee.y>=H&&ee.y<=Q&&Ul(v,T,N,M,E,V,ee.x,ee.y)&&di(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function hy(s,n,l,f){var v=s.prev,N=s,E=s.next;if(di(v,N,E)>=0)return!1;for(var T=v.x,M=N.x,V=E.x,F=v.y,H=N.y,Y=E.y,Q=T<M?T<V?T:V:M<V?M:V,ee=F<H?F<Y?F:Y:H<Y?H:Y,ce=T>M?T>V?T:V:M>V?M:V,ve=F>H?F>Y?F:Y:H>Y?H:Y,be=$p(Q,ee,n,l,f),Me=$p(ce,ve,n,l,f),De=s.prevZ,Le=s.nextZ;De&&De.z>=be&&Le&&Le.z<=Me;){if(De.x>=Q&&De.x<=ce&&De.y>=ee&&De.y<=ve&&De!==v&&De!==E&&Ul(T,F,M,H,V,Y,De.x,De.y)&&di(De.prev,De,De.next)>=0||(De=De.prevZ,Le.x>=Q&&Le.x<=ce&&Le.y>=ee&&Le.y<=ve&&Le!==v&&Le!==E&&Ul(T,F,M,H,V,Y,Le.x,Le.y)&&di(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;De&&De.z>=be;){if(De.x>=Q&&De.x<=ce&&De.y>=ee&&De.y<=ve&&De!==v&&De!==E&&Ul(T,F,M,H,V,Y,De.x,De.y)&&di(De.prev,De,De.next)>=0)return!1;De=De.prevZ}for(;Le&&Le.z<=Me;){if(Le.x>=Q&&Le.x<=ce&&Le.y>=ee&&Le.y<=ve&&Le!==v&&Le!==E&&Ul(T,F,M,H,V,Y,Le.x,Le.y)&&di(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function zh(s,n,l){var f=s;do{var v=f.prev,N=f.next.next;!ju(v,N)&&my(v,f,f.next,N)&&Fh(v,N)&&Fh(N,v)&&(n.push(v.i/l|0),n.push(f.i/l|0),n.push(N.i/l|0),ku(f),ku(f.next),f=s=N),f=f.next}while(f!==s);return Fl(f)}function fy(s,n,l,f,v,N){var E=s;do{for(var T=E.next.next;T!==E.prev;){if(E.i!==T.i&&tm(E,T)){var M=im(E,T);return E=Fl(E,E.next),M=Fl(M,M.next),Tu(E,n,l,f,v,N,0),void Tu(M,n,l,f,v,N,0)}T=T.next}E=E.next}while(E!==s)}function Bh(s,n){return s.x-n.x}function Pu(s,n){var l=function(v,N){var E,T=N,M=v.x,V=v.y,F=-1/0;do{if(V<=T.y&&V>=T.next.y&&T.next.y!==T.y){var H=T.x+(V-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=M&&H>F&&(F=H,E=T.x<T.next.x?T:T.next,H===M))return E}T=T.next}while(T!==N);if(!E)return null;var Y,Q=E,ee=E.x,ce=E.y,ve=1/0;T=E;do M>=T.x&&T.x>=ee&&M!==T.x&&Ul(V<ce?M:F,V,ee,ce,V<ce?F:M,V,T.x,T.y)&&(Y=Math.abs(V-T.y)/(M-T.x),Fh(T,v)&&(Y<ve||Y===ve&&(T.x>E.x||T.x===E.x&&Ba(E,T)))&&(E=T,ve=Y)),T=T.next;while(T!==Q);return E}(s,n);if(!l)return n;var f=im(l,s);return Fl(f,f.next),Fl(l,l.next)}function Ba(s,n){return di(s.prev,s,n.prev)<0&&di(n.next,s,s.next)<0}function $p(s,n,l,f,v){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*v|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function vi(s){var n=s,l=s;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==s);return l}function Ul(s,n,l,f,v,N,E,T){return(v-E)*(n-T)>=(s-E)*(N-T)&&(s-E)*(f-T)>=(l-E)*(n-T)&&(l-E)*(N-T)>=(v-E)*(f-T)}function tm(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(l,f){var v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==f.i&&v.next.i!==f.i&&my(v,v.next,l,f))return!0;v=v.next}while(v!==l);return!1}(s,n)&&(Fh(s,n)&&Fh(n,s)&&function(l,f){var v=l,N=!1,E=(l.x+f.x)/2,T=(l.y+f.y)/2;do v.y>T!=v.next.y>T&&v.next.y!==v.y&&E<(v.next.x-v.x)*(T-v.y)/(v.next.y-v.y)+v.x&&(N=!N),v=v.next;while(v!==l);return N}(s,n)&&(di(s.prev,s,n.prev)||di(s,n.prev,n))||ju(s,n)&&di(s.prev,s,s.next)>0&&di(n.prev,n,n.next)>0)}function di(s,n,l){return(n.y-s.y)*(l.x-n.x)-(n.x-s.x)*(l.y-n.y)}function ju(s,n){return s.x===n.x&&s.y===n.y}function my(s,n,l,f){var v=rm(di(s,n,l)),N=rm(di(s,n,f)),E=rm(di(l,f,s)),T=rm(di(l,f,n));return v!==N&&E!==T||!(v!==0||!nm(s,l,n))||!(N!==0||!nm(s,f,n))||!(E!==0||!nm(l,s,f))||!(T!==0||!nm(l,n,f))}function nm(s,n,l){return n.x<=Math.max(s.x,l.x)&&n.x>=Math.min(s.x,l.x)&&n.y<=Math.max(s.y,l.y)&&n.y>=Math.min(s.y,l.y)}function rm(s){return s>0?1:s<0?-1:0}function Fh(s,n){return di(s.prev,s,s.next)<0?di(s,n,s.next)>=0&&di(s,s.prev,n)>=0:di(s,n,s.prev)<0||di(s,s.next,n)<0}function im(s,n){var l=new sm(s.i,s.x,s.y),f=new sm(n.i,n.x,n.y),v=s.next,N=n.prev;return s.next=n,n.prev=s,l.next=v,v.prev=l,f.next=l,l.prev=f,N.next=f,f.prev=N,f}function py(s,n,l,f){var v=new sm(s,n,l);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function ku(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function sm(s,n,l){this.i=s,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qp(s,n,l,f){for(var v=0,N=n,E=l-f;N<l;N+=f)v+=(s[E]-s[N])*(s[N+1]+s[E+1]),E=N;return v}Td.exports=Bl,Td.exports.default=Bl,Bl.deviation=function(s,n,l,f){var v=n&&n.length,N=Math.abs(qp(s,0,v?n[0]*l:s.length,l));if(v)for(var E=0,T=n.length;E<T;E++)N-=Math.abs(qp(s,n[E]*l,E<T-1?n[E+1]*l:s.length,l));var M=0;for(E=0;E<f.length;E+=3){var V=f[E]*l,F=f[E+1]*l,H=f[E+2]*l;M+=Math.abs((s[V]-s[H])*(s[F+1]-s[V+1])-(s[V]-s[F])*(s[H+1]-s[V+1]))}return N===0&&M===0?0:Math.abs((M-N)/N)},Bl.flatten=function(s){for(var n=s[0][0].length,l={vertices:[],holes:[],dimensions:n},f=0,v=0;v<s.length;v++){for(var N=0;N<s[v].length;N++)for(var E=0;E<n;E++)l.vertices.push(s[v][N][E]);v>0&&l.holes.push(f+=s[v-1].length)}return l};var gy=A(Td.exports);function am(s,n,l,f,v){vy(s,n,l,f||s.length-1,v||yy)}function vy(s,n,l,f,v){for(;f>l;){if(f-l>600){var N=f-l+1,E=n-l+1,T=Math.log(N),M=.5*Math.exp(2*T/3),V=.5*Math.sqrt(T*M*(N-M)/N)*(E-N/2<0?-1:1);vy(s,n,Math.max(l,Math.floor(n-E*M/N+V)),Math.min(f,Math.floor(n+(N-E)*M/N+V)),v)}var F=s[n],H=l,Y=f;for(Pd(s,l,n),v(s[f],F)>0&&Pd(s,l,f);H<Y;){for(Pd(s,H,Y),H++,Y--;v(s[H],F)<0;)H++;for(;v(s[Y],F)>0;)Y--}v(s[l],F)===0?Pd(s,l,Y):Pd(s,++Y,f),Y<=n&&(l=Y+1),n<=Y&&(f=Y-1)}}function Pd(s,n,l){var f=s[n];s[n]=s[l],s[l]=f}function yy(s,n){return s<n?-1:s>n?1:0}function Hp(s,n){const l=s.length;if(l<=1)return[s];const f=[];let v,N;for(let E=0;E<l;E++){const T=hn(s[E]);T!==0&&(s[E].area=Math.abs(T),N===void 0&&(N=T<0),N===T<0?(v&&f.push(v),v=[s[E]]):v.push(s[E]))}if(v&&f.push(v),n>1)for(let E=0;E<f.length;E++)f[E].length<=n||(am(f[E],n,1,f[E].length-1,Au),f[E]=f[E].slice(0,n));return f}function Au(s,n){return n.area-s.area}function Mu(s,n,l){const f=l.patternDependencies;let v=!1;for(const N of n){const E=N.paint.get(`${s}-pattern`);E.isConstant()||(v=!0);const T=E.constantOr(null);T&&(v=!0,f[T.to]=!0,f[T.from]=!0)}return v}function $l(s,n,l,f,v){const N=v.patternDependencies;for(const E of n){const T=E.paint.get(`${s}-pattern`).value;if(T.kind!=="constant"){let M=T.evaluate({zoom:f-1},l,{},v.availableImages),V=T.evaluate({zoom:f},l,{},v.availableImages),F=T.evaluate({zoom:f+1},l,{},v.availableImages);M=M&&M.name?M.name:M,V=V&&V.name?V.name:V,F=F&&F.name?F.name:F,N[M]=!0,N[V]=!0,N[F]=!0,l.patterns[E.id]={min:M,mid:V,max:F}}}return l}class Uh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qn,this.indexArray=new gr,this.indexArray2=new $i,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Nr,this.segments2=new Nr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.hasPattern=Mu("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),N=!v.isConstant(),E=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of n){const H=this.layers[0]._featureFilter.needGeometry,Y=Eu(T,H);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Y,f))continue;const Q=N?v.evaluate(Y,{},f,l.availableImages):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:Su(T),patterns:{},sortKey:Q};E.push(ee)}N&&E.sort((T,M)=>T.sortKey-M.sortKey);for(const T of E){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=$l("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});l.featureIndex.insert(n[V].feature,M,V,F,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}addFeatures(n,l,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Fp),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,f,v,N){for(const E of Hp(l,500)){let T=0;for(const Q of E)T+=Q.length;const M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),V=M.vertexLength,F=[],H=[];for(const Q of E){if(Q.length===0)continue;Q!==E[0]&&H.push(F.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ce=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ce+Q.length-1,ce),F.push(Q[0].x),F.push(Q[0].y);for(let ve=1;ve<Q.length;ve++)this.layoutVertexArray.emplaceBack(Q[ve].x,Q[ve].y),this.indexArray2.emplaceBack(ce+ve-1,ce+ve),F.push(Q[ve].x),F.push(Q[ve].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const Y=gy(F,H);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(V+Y[Q],V+Y[Q+1],V+Y[Q+2]);M.vertexLength+=T,M.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,N,v)}}let Da,Ru;Gt("FillBucket",Uh,{omit:["layers","patternFeatures"]});var tr={get paint(){return Ru=Ru||new Ai({"fill-antialias":new cn(We.paint_fill["fill-antialias"]),"fill-opacity":new gn(We.paint_fill["fill-opacity"]),"fill-color":new gn(We.paint_fill["fill-color"]),"fill-outline-color":new gn(We.paint_fill["fill-outline-color"]),"fill-translate":new cn(We.paint_fill["fill-translate"]),"fill-translate-anchor":new cn(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new el(We.paint_fill["fill-pattern"])})},get layout(){return Da=Da||new Ai({"fill-sort-key":new gn(We.layout_fill["fill-sort-key"])})}};class om extends _a{constructor(n){super(n,tr)}recalculate(n,l){super.recalculate(n,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Uh(n)}queryRadius(){return Gf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,f,v,N,E,T){return Mp(Wf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),v)}isTileClipped(){return!0}}const by=Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nS=Ir([{name:"a_centroid",components:2,type:"Int16"}],4),{members:C0}=by;var sl={},$h=O,xy=Iu;function Iu(s,n,l,f,v){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=f,this._values=v,s.readFields(N0,this,n)}function N0(s,n,l){s==1?n.id=l.readVarint():s==2?function(f,v){for(var N=f.readVarint()+f.pos;f.pos<N;){var E=v._keys[f.readVarint()],T=v._values[f.readVarint()];v.properties[E]=T}}(l,n):s==3?n.type=l.readVarint():s==4&&(n._geometry=l.pos)}function Gp(s){for(var n,l,f=0,v=0,N=s.length,E=N-1;v<N;E=v++)f+=((l=s[E]).x-(n=s[v]).x)*(n.y+l.y);return f}Iu.types=["Unknown","Point","LineString","Polygon"],Iu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,l=s.readVarint()+s.pos,f=1,v=0,N=0,E=0,T=[];s.pos<l;){if(v<=0){var M=s.readVarint();f=7&M,v=M>>3}if(v--,f===1||f===2)N+=s.readSVarint(),E+=s.readSVarint(),f===1&&(n&&T.push(n),n=[]),n.push(new $h(N,E));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&T.push(n),T},Iu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,l=1,f=0,v=0,N=0,E=1/0,T=-1/0,M=1/0,V=-1/0;s.pos<n;){if(f<=0){var F=s.readVarint();l=7&F,f=F>>3}if(f--,l===1||l===2)(v+=s.readSVarint())<E&&(E=v),v>T&&(T=v),(N+=s.readSVarint())<M&&(M=N),N>V&&(V=N);else if(l!==7)throw new Error("unknown command "+l)}return[E,M,T,V]},Iu.prototype.toGeoJSON=function(s,n,l){var f,v,N=this.extent*Math.pow(2,l),E=this.extent*s,T=this.extent*n,M=this.loadGeometry(),V=Iu.types[this.type];function F(Q){for(var ee=0;ee<Q.length;ee++){var ce=Q[ee];Q[ee]=[360*(ce.x+E)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+T)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(f=0;f<M.length;f++)H[f]=M[f][0];F(M=H);break;case 2:for(f=0;f<M.length;f++)F(M[f]);break;case 3:for(M=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var ce,ve,be=[],Me=0;Me<ee;Me++){var De=Gp(Q[Me]);De!==0&&(ve===void 0&&(ve=De<0),ve===De<0?(ce&&be.push(ce),ce=[Q[Me]]):ce.push(Q[Me]))}return ce&&be.push(ce),be}(M),f=0;f<M.length;f++)for(v=0;v<M[f].length;v++)F(M[f][v])}M.length===1?M=M[0]:V="Multi"+V;var Y={type:"Feature",geometry:{type:V,coordinates:M},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var S0=xy,Wp=Zp;function Zp(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(_y,this,n),this.length=this._features.length}function _y(s,n,l){s===15?n.version=l.readVarint():s===1?n.name=l.readString():s===5?n.extent=l.readVarint():s===2?n._features.push(l.pos):s===3?n._keys.push(l.readString()):s===4&&n._values.push(function(f){for(var v=null,N=f.readVarint()+f.pos;f.pos<N;){var E=f.readVarint()>>3;v=E===1?f.readString():E===2?f.readFloat():E===3?f.readDouble():E===4?f.readVarint64():E===5?f.readVarint():E===6?f.readSVarint():E===7?f.readBoolean():null}return v}(l))}Zp.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new S0(this._pbf,n,this.extent,this._keys,this._values)};var Fa=Wp;function ql(s,n,l){if(s===3){var f=new Fa(l,l.readVarint()+l.pos);f.length&&(n[f.name]=f)}}sl.VectorTile=function(s,n){this.layers=s.readFields(ql,{},n)},sl.VectorTileFeature=xy,sl.VectorTileLayer=Wp;const Hl=sl.VectorTileFeature.types,jd=Math.pow(2,13);function Gl(s,n,l,f,v,N,E,T){s.emplaceBack(n,l,2*Math.floor(f*jd)+E,v*jd*2,N*jd*2,Math.round(T))}class Ua{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Mt,this.centroidVertexArray=new Nt,this.indexArray=new gr,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Nr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.features=[],this.hasPattern=Mu("fill-extrusion",this.layers,l);for(const{feature:v,id:N,index:E,sourceLayerIndex:T}of n){const M=this.layers[0]._featureFilter.needGeometry,V=Eu(v,M);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),V,f))continue;const F={id:N,sourceLayerIndex:T,index:E,geometry:M?V.geometry:Su(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push($l("fill-extrusion",this.layers,F,this.zoom,l)):this.addFeature(F,F.geometry,E,f,{}),l.featureIndex.insert(v,F.geometry,E,T,this.index,!0)}}addFeatures(n,l,f){for(const v of this.features){const{geometry:N}=v;this.addFeature(v,N,v.index,l,f)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,C0),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,nS.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,f,v,N){const E={x:0,y:0,vertexCount:0};for(const T of Hp(l,500)){let M=0;for(const ee of T)M+=ee.length;let V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of T){if(ee.length===0||E0(ee))continue;let ce=0;for(let ve=0;ve<ee.length;ve++){const be=ee[ve];if(ve>=1){const Me=ee[ve-1];if(!bs(be,Me)){V.vertexLength+4>Nr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const De=be.sub(Me)._perp()._unit(),Le=Me.dist(be);ce+Le>32768&&(ce=0),Gl(this.layoutVertexArray,be.x,be.y,De.x,De.y,0,0,ce),Gl(this.layoutVertexArray,be.x,be.y,De.x,De.y,0,1,ce),E.x+=2*be.x,E.y+=2*be.y,E.vertexCount+=2,ce+=Le,Gl(this.layoutVertexArray,Me.x,Me.y,De.x,De.y,0,0,ce),Gl(this.layoutVertexArray,Me.x,Me.y,De.x,De.y,0,1,ce),E.x+=2*Me.x,E.y+=2*Me.y,E.vertexCount+=2;const qe=V.vertexLength;this.indexArray.emplaceBack(qe,qe+2,qe+1),this.indexArray.emplaceBack(qe+1,qe+2,qe+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+M>Nr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),Hl[n.type]!=="Polygon")continue;const F=[],H=[],Y=V.vertexLength;for(const ee of T)if(ee.length!==0){ee!==T[0]&&H.push(F.length/2);for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];Gl(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),E.x+=ve.x,E.y+=ve.y,E.vertexCount+=1,F.push(ve.x),F.push(ve.y)}}const Q=gy(F,H);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(Y+Q[ee],Y+Q[ee+2],Y+Q[ee+1]);V.primitiveLength+=Q.length/3,V.vertexLength+=M}for(let T=0;T<E.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(E.x/E.vertexCount),Math.floor(E.y/E.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,N,v)}}function bs(s,n){return s.x===n.x&&(s.x<0||s.x>Ri)||s.y===n.y&&(s.y<0||s.y>Ri)}function E0(s){return s.every(n=>n.x<0)||s.every(n=>n.x>Ri)||s.every(n=>n.y<0)||s.every(n=>n.y>Ri)}let wy;Gt("FillExtrusionBucket",Ua,{omit:["layers","features"]});var D0={get paint(){return wy=wy||new Ai({"fill-extrusion-opacity":new cn(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gn(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cn(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cn(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new el(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gn(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gn(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cn(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kp extends _a{constructor(n){super(n,D0)}createBucket(n){return new Ua(n)}queryRadius(){return Gf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,f,v,N,E,T,M){const V=Wf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),F=this.paint.get("fill-extrusion-height").evaluate(l,f),H=this.paint.get("fill-extrusion-base").evaluate(l,f),Y=function(ee,ce,ve,be){const Me=[];for(const De of ee){const Le=[De.x,De.y,0,1];Rc(Le,Le,ce),Me.push(new W(Le[0]/Le[3],Le[1]/Le[3]))}return Me}(V,M),Q=function(ee,ce,ve,be){const Me=[],De=[],Le=be[8]*ce,qe=be[9]*ce,st=be[10]*ce,Ot=be[11]*ce,Jt=be[8]*ve,Bt=be[9]*ve,Rt=be[10]*ve,Et=be[11]*ve;for(const _t of ee){const Dt=[],vt=[];for(const dn of _t){const rn=dn.x,Hn=dn.y,Br=be[0]*rn+be[4]*Hn+be[12],Or=be[1]*rn+be[5]*Hn+be[13],Hi=be[2]*rn+be[6]*Hn+be[14],js=be[3]*rn+be[7]*Hn+be[15],Gi=Hi+st,Bi=js+Ot,rs=Br+Jt,ws=Or+Bt,Ys=Hi+Rt,Zr=js+Et,bi=new W((Br+Le)/Bi,(Or+qe)/Bi);bi.z=Gi/Bi,Dt.push(bi);const Di=new W(rs/Zr,ws/Zr);Di.z=Ys/Zr,vt.push(Di)}Me.push(Dt),De.push(vt)}return[Me,De]}(v,H,F,M);return function(ee,ce,ve){let be=1/0;Mp(ve,ce)&&(be=qh(ve,ce[0]));for(let Me=0;Me<ce.length;Me++){const De=ce[Me],Le=ee[Me];for(let qe=0;qe<De.length-1;qe++){const st=De[qe],Ot=[st,De[qe+1],Le[qe+1],Le[qe],st];Ap(ve,Ot)&&(be=Math.min(be,qh(ve,Ot)))}}return be!==1/0&&be}(Q[0],Q[1],Y)}}function kd(s,n){return s.x*n.x+s.y*n.y}function qh(s,n){if(s.length===1){let l=0;const f=n[l++];let v;for(;!v||f.equals(v);)if(v=n[l++],!v)return 1/0;for(;l<n.length;l++){const N=n[l],E=s[0],T=v.sub(f),M=N.sub(f),V=E.sub(f),F=kd(T,T),H=kd(T,M),Y=kd(M,M),Q=kd(V,T),ee=kd(V,M),ce=F*Y-H*H,ve=(Y*Q-H*ee)/ce,be=(F*ee-H*Q)/ce,Me=f.z*(1-ve-be)+v.z*ve+N.z*be;if(isFinite(Me))return Me}return 1/0}{let l=1/0;for(const f of n)l=Math.min(l,f.z);return l}}const Cy=Ir([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:T0}=Cy,P0=Ir([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yp}=P0,j0=sl.VectorTileFeature.types,Ny=Math.cos(Math.PI/180*37.5),Sy=Math.pow(2,14)/.5;class lm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new xn,this.layoutVertexArray2=new tn,this.indexArray=new gr,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,f){this.hasPattern=Mu("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),N=!v.isConstant(),E=[];for(const{feature:T,id:M,index:V,sourceLayerIndex:F}of n){const H=this.layers[0]._featureFilter.needGeometry,Y=Eu(T,H);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),Y,f))continue;const Q=N?v.evaluate(Y,{},f):void 0,ee={id:M,properties:T.properties,type:T.type,sourceLayerIndex:F,index:V,geometry:H?Y.geometry:Su(T),patterns:{},sortKey:Q};E.push(ee)}N&&E.sort((T,M)=>T.sortKey-M.sortKey);for(const T of E){const{geometry:M,index:V,sourceLayerIndex:F}=T;if(this.hasPattern){const H=$l("line",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,M,V,f,{});l.featureIndex.insert(n[V].feature,M,V,F,this.index)}}update(n,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,f)}addFeatures(n,l,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Yp)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,T0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,f,v,N){const E=this.layers[0].layout,T=E.get("line-join").evaluate(n,{}),M=E.get("line-cap"),V=E.get("line-miter-limit"),F=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const H of l)this.addLine(H,n,T,M,V,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,N,v)}addLine(n,l,f,v,N,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<n.length-1;be++)this.totalDistance+=n[be].dist(n[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=j0[l.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let V=0;for(;V<M-1&&n[V].equals(n[V+1]);)V++;if(M<(T?3:2))return;f==="bevel"&&(N=1.05);const F=this.overscaling<=16?15*Ri/(512*this.overscaling):0,H=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let Y,Q,ee,ce,ve;this.e1=this.e2=-1,T&&(Y=n[M-2],ve=n[V].sub(Y)._unit()._perp());for(let be=V;be<M;be++){if(ee=be===M-1?T?n[V+1]:void 0:n[be+1],ee&&n[be].equals(ee))continue;ve&&(ce=ve),Y&&(Q=Y),Y=n[be],ve=ee?ee.sub(Y)._unit()._perp():ce,ce=ce||ve;let Me=ce.add(ve);Me.x===0&&Me.y===0||Me._unit();const De=ce.x*ve.x+ce.y*ve.y,Le=Me.x*ve.x+Me.y*ve.y,qe=Le!==0?1/Le:1/0,st=2*Math.sqrt(2-2*Le),Ot=Le<Ny&&Q&&ee,Jt=ce.x*ve.y-ce.y*ve.x>0;if(Ot&&be>V){const Et=Y.dist(Q);if(Et>2*F){const _t=Y.sub(Y.sub(Q)._mult(F/Et)._round());this.updateDistance(Q,_t),this.addCurrentVertex(_t,ce,0,0,H),Q=_t}}const Bt=Q&&ee;let Rt=Bt?f:T?"butt":v;if(Bt&&Rt==="round"&&(qe<E?Rt="miter":qe<=2&&(Rt="fakeround")),Rt==="miter"&&qe>N&&(Rt="bevel"),Rt==="bevel"&&(qe>2&&(Rt="flipbevel"),qe<N&&(Rt="miter")),Q&&this.updateDistance(Q,Y),Rt==="miter")Me._mult(qe),this.addCurrentVertex(Y,Me,0,0,H);else if(Rt==="flipbevel"){if(qe>100)Me=ve.mult(-1);else{const Et=qe*ce.add(ve).mag()/ce.sub(ve).mag();Me._perp()._mult(Et*(Jt?-1:1))}this.addCurrentVertex(Y,Me,0,0,H),this.addCurrentVertex(Y,Me.mult(-1),0,0,H)}else if(Rt==="bevel"||Rt==="fakeround"){const Et=-Math.sqrt(qe*qe-1),_t=Jt?Et:0,Dt=Jt?0:Et;if(Q&&this.addCurrentVertex(Y,ce,_t,Dt,H),Rt==="fakeround"){const vt=Math.round(180*st/Math.PI/20);for(let dn=1;dn<vt;dn++){let rn=dn/vt;if(rn!==.5){const Br=rn-.5;rn+=rn*Br*(rn-1)*((1.0904+De*(De*(3.55645-1.43519*De)-3.2452))*Br*Br+(.848013+De*(.215638*De-1.06021)))}const Hn=ve.sub(ce)._mult(rn)._add(ce)._unit()._mult(Jt?-1:1);this.addHalfVertex(Y,Hn.x,Hn.y,!1,Jt,0,H)}}ee&&this.addCurrentVertex(Y,ve,-_t,-Dt,H)}else if(Rt==="butt")this.addCurrentVertex(Y,Me,0,0,H);else if(Rt==="square"){const Et=Q?1:-1;this.addCurrentVertex(Y,Me,Et,Et,H)}else Rt==="round"&&(Q&&(this.addCurrentVertex(Y,ce,0,0,H),this.addCurrentVertex(Y,ce,1,1,H,!0)),ee&&(this.addCurrentVertex(Y,ve,-1,-1,H,!0),this.addCurrentVertex(Y,ve,0,0,H)));if(Ot&&be<M-1){const Et=Y.dist(ee);if(Et>2*F){const _t=Y.add(ee.sub(Y)._mult(F/Et)._round());this.updateDistance(Y,_t),this.addCurrentVertex(_t,ve,0,0,H),Y=_t}}}}addCurrentVertex(n,l,f,v,N,E=!1){const T=l.y*v-l.x,M=-l.y-l.x*v;this.addHalfVertex(n,l.x+l.y*f,l.y-l.x*f,E,!1,f,N),this.addHalfVertex(n,T,M,E,!0,-v,N),this.distance>Sy/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,f,v,N,E))}addHalfVertex({x:n,y:l},f,v,N,E,T,M){const V=.5*(this.lineClips?this.scaledDistance*(Sy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(N?1:0),(l<<1)+(E?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(T===0?0:T<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),M.primitiveLength++),E?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let Ey,Xp;Gt("LineBucket",lm,{omit:["layers","patternFeatures"]});var Dy={get paint(){return Xp=Xp||new Ai({"line-opacity":new gn(We.paint_line["line-opacity"]),"line-color":new gn(We.paint_line["line-color"]),"line-translate":new cn(We.paint_line["line-translate"]),"line-translate-anchor":new cn(We.paint_line["line-translate-anchor"]),"line-width":new gn(We.paint_line["line-width"]),"line-gap-width":new gn(We.paint_line["line-gap-width"]),"line-offset":new gn(We.paint_line["line-offset"]),"line-blur":new gn(We.paint_line["line-blur"]),"line-dasharray":new kc(We.paint_line["line-dasharray"]),"line-pattern":new el(We.paint_line["line-pattern"]),"line-gradient":new wu(We.paint_line["line-gradient"])})},get layout(){return Ey=Ey||new Ai({"line-cap":new cn(We.layout_line["line-cap"]),"line-join":new gn(We.layout_line["line-join"]),"line-miter-limit":new cn(We.layout_line["line-miter-limit"]),"line-round-limit":new cn(We.layout_line["line-round-limit"]),"line-sort-key":new gn(We.layout_line["line-sort-key"])})}};class Jp extends gn{possiblyEvaluate(n,l){return l=new ti(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,f,v){return l=ut({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,f,v)}}let Lu;class Ic extends _a{constructor(n){super(n,Dy),this.gradientVersion=0,Lu||(Lu=new Jp(Dy.paint.properties["line-width"].specification),Lu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Hs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Lu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new lm(n)}queryRadius(n){const l=n,f=Wl(Sd("line-width",this,l),Sd("line-gap-width",this,l)),v=Sd("line-offset",this,l);return f/2+Math.abs(v)+Gf(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,f,v,N,E,T){const M=Wf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),V=T/2*Wl(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),F=this.paint.get("line-offset").evaluate(l,f);return F&&(v=function(H,Y){const Q=[];for(let ee=0;ee<H.length;ee++){const ce=H[ee],ve=[];for(let be=0;be<ce.length;be++){const Me=ce[be-1],De=ce[be],Le=ce[be+1],qe=be===0?new W(0,0):De.sub(Me)._unit()._perp(),st=be===ce.length-1?new W(0,0):Le.sub(De)._unit()._perp(),Ot=qe._add(st)._unit(),Jt=Ot.x*st.x+Ot.y*st.y;Jt!==0&&Ot._mult(1/Jt),ve.push(Ot._mult(Y)._add(De))}Q.push(ve)}return Q}(v,F*T)),function(H,Y,Q){for(let ee=0;ee<Y.length;ee++){const ce=Y[ee];if(H.length>=3){for(let ve=0;ve<ce.length;ve++)if(ui(H,ce[ve]))return!0}if(w0(H,ce,Q))return!0}return!1}(M,v,V)}isTileClipped(){return!0}}function Wl(s,n){return n>0?n+2*s:s}const Lc=Ir([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hh=Ir([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ir([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Gh=Ir([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ir([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zl=Ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),k0=Ir([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function A0(s,n,l){return s.sections.forEach(f=>{f.text=function(v,N,E){const T=N.layout.get("text-transform").evaluate(E,{});return T==="uppercase"?v=v.toLocaleUpperCase():T==="lowercase"&&(v=v.toLocaleLowerCase()),Ws.applyArabicShaping&&(v=Ws.applyArabicShaping(v)),v}(f.text,n,l)}),s}Ir([{name:"triangle",components:3,type:"Uint16"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ir([{type:"Float32",name:"offsetX"}]),Ir([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ir([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var zi=24,Ad=Vr,Ty=function(s,n,l,f,v){var N,E,T=8*v-f-1,M=(1<<T)-1,V=M>>1,F=-7,H=v-1,Y=-1,Q=s[n+H];for(H+=Y,N=Q&(1<<-F)-1,Q>>=-F,F+=T;F>0;N=256*N+s[n+H],H+=Y,F-=8);for(E=N&(1<<-F)-1,N>>=-F,F+=f;F>0;E=256*E+s[n+H],H+=Y,F-=8);if(N===0)N=1-V;else{if(N===M)return E?NaN:1/0*(Q?-1:1);E+=Math.pow(2,f),N-=V}return(Q?-1:1)*E*Math.pow(2,N-f)},Qp=function(s,n,l,f,v,N){var E,T,M,V=8*N-v-1,F=(1<<V)-1,H=F>>1,Y=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,ee=1,ce=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,E=F):(E=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-E))<1&&(E--,M*=2),(n+=E+H>=1?Y/M:Y*Math.pow(2,1-H))*M>=2&&(E++,M/=2),E+H>=F?(T=0,E=F):E+H>=1?(T=(n*M-1)*Math.pow(2,v),E+=H):(T=n*Math.pow(2,H-1)*Math.pow(2,v),E=0));v>=8;s[l+Q]=255&T,Q+=ee,T/=256,v-=8);for(E=E<<v|T,V+=v;V>0;s[l+Q]=255&E,Q+=ee,E/=256,V-=8);s[l+Q-ee]|=128*ce};function Vr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Md=4294967296,eg=1/Md,Py=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $a(s){return s.type===Vr.Bytes?s.readVarint()+s.pos:s.pos+1}function al(s,n,l){return l?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function Vu(s,n,l){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(f);for(var v=l.pos-1;v>=s;v--)l.buf[v+f]=l.buf[v]}function tg(s,n){for(var l=0;l<s.length;l++)n.writeVarint(s[l])}function jy(s,n){for(var l=0;l<s.length;l++)n.writeSVarint(s[l])}function M0(s,n){for(var l=0;l<s.length;l++)n.writeFloat(s[l])}function R0(s,n){for(var l=0;l<s.length;l++)n.writeDouble(s[l])}function I0(s,n){for(var l=0;l<s.length;l++)n.writeBoolean(s[l])}function L0(s,n){for(var l=0;l<s.length;l++)n.writeFixed32(s[l])}function ng(s,n){for(var l=0;l<s.length;l++)n.writeSFixed32(s[l])}function V0(s,n){for(var l=0;l<s.length;l++)n.writeFixed64(s[l])}function cm(s,n){for(var l=0;l<s.length;l++)n.writeSFixed64(s[l])}function Rd(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function Ou(s,n,l){s[l]=n,s[l+1]=n>>>8,s[l+2]=n>>>16,s[l+3]=n>>>24}function ky(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}Vr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),v=f>>3,N=this.pos;this.type=7&f,s(v,n,this),this.pos===N&&this.skip(f)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=Rd(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=ky(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Rd(this.buf,this.pos)+Rd(this.buf,this.pos+4)*Md;return this.pos+=8,s},readSFixed64:function(){var s=Rd(this.buf,this.pos)+ky(this.buf,this.pos+4)*Md;return this.pos+=8,s},readFloat:function(){var s=Ty(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Ty(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,l,f=this.buf;return n=127&(l=f[this.pos++]),l<128?n:(n|=(127&(l=f[this.pos++]))<<7,l<128?n:(n|=(127&(l=f[this.pos++]))<<14,l<128?n:(n|=(127&(l=f[this.pos++]))<<21,l<128?n:function(v,N,E){var T,M,V=E.buf;if(T=(112&(M=V[E.pos++]))>>4,M<128||(T|=(127&(M=V[E.pos++]))<<3,M<128)||(T|=(127&(M=V[E.pos++]))<<10,M<128)||(T|=(127&(M=V[E.pos++]))<<17,M<128)||(T|=(127&(M=V[E.pos++]))<<24,M<128)||(T|=(1&(M=V[E.pos++]))<<31,M<128))return al(v,T,N);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=f[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&Py?function(l,f,v){return Py.decode(l.subarray(f,v))}(this.buf,n,s):function(l,f,v){for(var N="",E=f;E<v;){var T,M,V,F=l[E],H=null,Y=F>239?4:F>223?3:F>191?2:1;if(E+Y>v)break;Y===1?F<128&&(H=F):Y===2?(192&(T=l[E+1]))==128&&(H=(31&F)<<6|63&T)<=127&&(H=null):Y===3?(M=l[E+2],(192&(T=l[E+1]))==128&&(192&M)==128&&((H=(15&F)<<12|(63&T)<<6|63&M)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(M=l[E+2],V=l[E+3],(192&(T=l[E+1]))==128&&(192&M)==128&&(192&V)==128&&((H=(15&F)<<18|(63&T)<<12|(63&M)<<6|63&V)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,N+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),N+=String.fromCharCode(H),E+=Y}return N}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==Vr.Bytes)return s.push(this.readVarint(n));var l=$a(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSVarint());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Vr.Bytes)return s.push(this.readBoolean());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFloat());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Vr.Bytes)return s.push(this.readDouble());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFixed32());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSFixed32());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Vr.Bytes)return s.push(this.readFixed64());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Vr.Bytes)return s.push(this.readSFixed64());var n=$a(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Vr.Fixed32)this.pos+=4;else{if(n!==Vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Ou(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Ou(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Ou(this.buf,-1&s,this.pos),Ou(this.buf,Math.floor(s*eg),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Ou(this.buf,-1&s,this.pos),Ou(this.buf,Math.floor(s*eg),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,l){var f,v;if(n>=0?(f=n%4294967296|0,v=n/4294967296|0):(v=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,v=v+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(N,E,T){T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,N>>>=7,T.buf[T.pos++]=127&N|128,T.buf[T.pos]=127&(N>>>=7)}(f,0,l),function(N,E){var T=(7&N)<<4;E.buf[E.pos++]|=T|((N>>>=3)?128:0),N&&(E.buf[E.pos++]=127&N|((N>>>=7)?128:0),N&&(E.buf[E.pos++]=127&N|((N>>>=7)?128:0),N&&(E.buf[E.pos++]=127&N|((N>>>=7)?128:0),N&&(E.buf[E.pos++]=127&N|((N>>>=7)?128:0),N&&(E.buf[E.pos++]=127&N)))))}(v,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(f,v,N){for(var E,T,M=0;M<v.length;M++){if((E=v.charCodeAt(M))>55295&&E<57344){if(!T){E>56319||M+1===v.length?(f[N++]=239,f[N++]=191,f[N++]=189):T=E;continue}if(E<56320){f[N++]=239,f[N++]=191,f[N++]=189,T=E;continue}E=T-55296<<10|E-56320|65536,T=null}else T&&(f[N++]=239,f[N++]=191,f[N++]=189,T=null);E<128?f[N++]=E:(E<2048?f[N++]=E>>6|192:(E<65536?f[N++]=E>>12|224:(f[N++]=E>>18|240,f[N++]=E>>12&63|128),f[N++]=E>>6&63|128),f[N++]=63&E|128)}return N}(this.buf,s,this.pos);var l=this.pos-n;l>=128&&Vu(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),Qp(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Qp(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,n){this.pos++;var l=this.pos;s(n,this);var f=this.pos-l;f>=128&&Vu(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(s,n,l){this.writeTag(s,Vr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,tg,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,jy,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,I0,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,M0,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,R0,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,L0,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,ng,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,V0,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,cm,n)},writeBytesField:function(s,n){this.writeTag(s,Vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,Vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,Vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,Vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,Vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,Vr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,Vr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,Vr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,Vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,Vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var rg=A(Ad);const ig=3;function O0(s,n,l){s===1&&l.readMessage(Zh,n)}function Zh(s,n,l){if(s===3){const{id:f,bitmap:v,width:N,height:E,left:T,top:M,advance:V}=l.readMessage(sg,{});n.push({id:f,bitmap:new Du({width:N+2*ig,height:E+2*ig},v),metrics:{width:N,height:E,left:T,top:M,advance:V}})}}function sg(s,n,l){s===1?n.id=l.readVarint():s===2?n.bitmap=l.readBytes():s===3?n.width=l.readVarint():s===4?n.height=l.readVarint():s===5?n.left=l.readSVarint():s===6?n.top=l.readSVarint():s===7&&(n.advance=l.readVarint())}const Id=ig;function Ay(s){let n=0,l=0;for(const E of s)n+=E.w*E.h,l=Math.max(l,E.w);s.sort((E,T)=>T.h-E.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let v=0,N=0;for(const E of s)for(let T=f.length-1;T>=0;T--){const M=f[T];if(!(E.w>M.w||E.h>M.h)){if(E.x=M.x,E.y=M.y,N=Math.max(N,E.y+E.h),v=Math.max(v,E.x+E.w),E.w===M.w&&E.h===M.h){const V=f.pop();T<f.length&&(f[T]=V)}else E.h===M.h?(M.x+=E.w,M.w-=E.w):E.w===M.w?(M.y+=E.h,M.h-=E.h):(f.push({x:M.x+E.w,y:M.y,w:M.w-E.w,h:E.h}),M.y+=E.h,M.h-=E.h);break}}return{w:v,h:N,fill:n/(v*N)||0}}const ra=1;class um{constructor(n,{pixelRatio:l,version:f,stretchX:v,stretchY:N,content:E}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=v,this.stretchY=N,this.content=E,this.version=f}get tl(){return[this.paddedRect.x+ra,this.paddedRect.y+ra]}get br(){return[this.paddedRect.x+this.paddedRect.w-ra,this.paddedRect.y+this.paddedRect.h-ra]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ra)/this.pixelRatio,(this.paddedRect.h-2*ra)/this.pixelRatio]}}class ag{constructor(n,l){const f={},v={};this.haveRenderCallbacks=[];const N=[];this.addImages(n,f,N),this.addImages(l,v,N);const{w:E,h:T}=Ay(N),M=new na({width:E||1,height:T||1});for(const V in n){const F=n[V],H=f[V].paddedRect;na.copy(F.data,M,{x:0,y:0},{x:H.x+ra,y:H.y+ra},F.data)}for(const V in l){const F=l[V],H=v[V].paddedRect,Y=H.x+ra,Q=H.y+ra,ee=F.data.width,ce=F.data.height;na.copy(F.data,M,{x:0,y:0},{x:Y,y:Q},F.data),na.copy(F.data,M,{x:0,y:ce-1},{x:Y,y:Q-1},{width:ee,height:1}),na.copy(F.data,M,{x:0,y:0},{x:Y,y:Q+ce},{width:ee,height:1}),na.copy(F.data,M,{x:ee-1,y:0},{x:Y-1,y:Q},{width:1,height:ce}),na.copy(F.data,M,{x:0,y:0},{x:Y+ee,y:Q},{width:1,height:ce})}this.image=M,this.iconPositions=f,this.patternPositions=v}addImages(n,l,f){for(const v in n){const N=n[v],E={x:0,y:0,w:N.data.width+2*ra,h:N.data.height+2*ra};f.push(E),l[v]=new um(E,N),N.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),l)}patchUpdatedImage(n,l,f){if(!n||!l||n.version===l.version)return;n.version=l.version;const[v,N]=n.tl;f.update(l.data,void 0,{x:v,y:N})}}var Mo;Gt("ImagePosition",um),Gt("ImageAtlas",ag),u.ai=void 0,(Mo=u.ai||(u.ai={}))[Mo.none=0]="none",Mo[Mo.horizontal=1]="horizontal",Mo[Mo.vertical=2]="vertical",Mo[Mo.horizontalOnly=3]="horizontalOnly";const Vc=-17;class Ld{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const f=new Ld;return f.scale=n||1,f.fontStack=l,f}static forImage(n){const l=new Ld;return l.imageName=n,l}}class xs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const f=new xs;for(let v=0;v<n.sections.length;v++){const N=n.sections[v];N.image?f.addImageSection(N):f.addTextSection(N,l)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let f=0;f<n.length;f++){const v=n.charCodeAt(f+1)||null,N=n.charCodeAt(f-1)||null;l+=v&&Of(v)&&!Wh[n[f+1]]||N&&Of(N)&&!Wh[n[f-1]]||!Wh[n[f]]?n[f]:Wh[n[f]]}return l}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Vd[this.text.charCodeAt(f)];f++)n++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Vd[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const f=new xs;return f.text=this.text.substring(n,l),f.sectionIndex=this.sectionIndex.slice(n,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(Ld.forText(n.scale,n.fontStack||l));const f=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(f)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void It("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Ld.forImage(l)),this.sectionIndex.push(this.sections.length-1)):It("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Kl(s,n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee,ce){const ve=xs.fromFeature(s,v);let be;H===u.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Me,processStyledBidirectionalText:De}=Ws;if(Me&&ve.sections.length===1){be=[];const st=Me(ve.toString(),zd(ve,V,N,n,f,Q,ee));for(const Ot of st){const Jt=new xs;Jt.text=Ot,Jt.sections=ve.sections;for(let Bt=0;Bt<Ot.length;Bt++)Jt.sectionIndex.push(0);be.push(Jt)}}else if(De){be=[];const st=De(ve.text,ve.sectionIndex,zd(ve,V,N,n,f,Q,ee));for(const Ot of st){const Jt=new xs;Jt.text=Ot[0],Jt.sectionIndex=Ot[1],Jt.sections=ve.sections,be.push(Jt)}}else be=function(st,Ot){const Jt=[],Bt=st.text;let Rt=0;for(const Et of Ot)Jt.push(st.substring(Rt,Et)),Rt=Et;return Rt<Bt.length&&Jt.push(st.substring(Rt,Bt.length)),Jt}(ve,zd(ve,V,N,n,f,Q,ee));const Le=[],qe={positionedLines:Le,text:ve.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(st,Ot,Jt,Bt,Rt,Et,_t,Dt,vt,dn,rn,Hn){let Br=0,Or=Vc,Hi=0,js=0;const Gi=Dt==="right"?1:Dt==="left"?0:.5;let Bi=0;for(const bi of Rt){bi.trim();const Di=bi.getMaxScale(),Ti=(Di-1)*zi,ks={positionedGlyphs:[],lineOffset:0};st.positionedLines[Bi]=ks;const Ii=ks.positionedGlyphs;let Wi=0;if(!bi.length()){Or+=Et,++Bi;continue}for(let Li=0;Li<bi.length();Li++){const Jn=bi.getSection(Li),Zi=bi.getSectionIndex(Li),ds=bi.getCharCode(Li);let Pi=0,qa=null,co=null,Ro=null,Yl=zi;const ia=!(vt===u.ai.horizontal||!rn&&!Ah(ds)||rn&&(Vd[ds]||(rs=ds,Vt.Arabic(rs)||Vt["Arabic Supplement"](rs)||Vt["Arabic Extended-A"](rs)||Vt["Arabic Presentation Forms-A"](rs)||Vt["Arabic Presentation Forms-B"](rs))));if(Jn.imageName){const Xs=Bt[Jn.imageName];if(!Xs)continue;Ro=Jn.imageName,st.iconsInText=st.iconsInText||!0,co=Xs.paddedRect;const Js=Xs.displaySize;Jn.scale=Jn.scale*zi/Hn,qa={width:Js[0],height:Js[1],left:ra,top:-Id,advance:ia?Js[1]:Js[0]},Pi=Ti+(zi-Js[1]*Jn.scale),Yl=qa.advance;const Xl=ia?Js[0]*Jn.scale-zi*Di:Js[1]*Jn.scale-zi*Di;Xl>0&&Xl>Wi&&(Wi=Xl)}else{const Xs=Jt[Jn.fontStack],Js=Xs&&Xs[ds];if(Js&&Js.rect)co=Js.rect,qa=Js.metrics;else{const Xl=Ot[Jn.fontStack],Fc=Xl&&Xl[ds];if(!Fc)continue;qa=Fc.metrics}Pi=(Di-Jn.scale)*zi}ia?(st.verticalizable=!0,Ii.push({glyph:ds,imageName:Ro,x:Br,y:Or+Pi,vertical:ia,scale:Jn.scale,fontStack:Jn.fontStack,sectionIndex:Zi,metrics:qa,rect:co}),Br+=Yl*Jn.scale+dn):(Ii.push({glyph:ds,imageName:Ro,x:Br,y:Or+Pi,vertical:ia,scale:Jn.scale,fontStack:Jn.fontStack,sectionIndex:Zi,metrics:qa,rect:co}),Br+=qa.advance*Jn.scale+dn)}Ii.length!==0&&(Hi=Math.max(Br-dn,Hi),z0(Ii,0,Ii.length-1,Gi,Wi)),Br=0;const Cs=Et*Di+Wi;ks.lineOffset=Math.max(Wi,Ti),Or+=Cs,js=Math.max(Cs,js),++Bi}var rs;const ws=Or-Vc,{horizontalAlign:Ys,verticalAlign:Zr}=hm(_t);(function(bi,Di,Ti,ks,Ii,Wi,Cs,Li,Jn){const Zi=(Di-Ti)*Ii;let ds=0;ds=Wi!==Cs?-Li*ks-Vc:(-ks*Jn+.5)*Cs;for(const Pi of bi)for(const qa of Pi.positionedGlyphs)qa.x+=Zi,qa.y+=ds})(st.positionedLines,Gi,Ys,Zr,Hi,js,Et,ws,Rt.length),st.top+=-Zr*ws,st.bottom=st.top+ws,st.left+=-Ys*Hi,st.right=st.left+Hi}(qe,n,l,f,be,E,T,M,H,V,Y,ce),!function(st){for(const Ot of st)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Le)&&qe}const Vd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function My(s,n,l,f,v,N){if(n.imageName){const E=f[n.imageName];return E?E.displaySize[0]*n.scale*zi/N+v:0}{const E=l[n.fontStack],T=E&&E[s];return T?T.metrics.advance*n.scale+v:0}}function dm(s,n,l,f){const v=Math.pow(s-n,2);return f?s<n?v/2:2*v:v+Math.abs(l)*l}function og(s,n,l){let f=0;return s===10&&(f-=1e4),l&&(f+=150),s!==40&&s!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Od(s,n,l,f,v,N){let E=null,T=dm(n,l,v,N);for(const M of f){const V=dm(n-M.x,l,v,N)+M.badness;V<=T&&(E=M,T=V)}return{index:s,x:n,priorBreak:E,badness:T}}function Ry(s){return s?Ry(s.priorBreak).concat(s.index):[]}function zd(s,n,l,f,v,N,E){if(N!=="point")return[];if(!s)return[];const T=[],M=function(Y,Q,ee,ce,ve,be){let Me=0;for(let De=0;De<Y.length();De++){const Le=Y.getSection(De);Me+=My(Y.getCharCode(De),Le,ce,ve,Q,be)}return Me/Math.max(1,Math.ceil(Me/ee))}(s,n,l,f,v,E),V=s.text.indexOf("​")>=0;let F=0;for(let Y=0;Y<s.length();Y++){const Q=s.getSection(Y),ee=s.getCharCode(Y);if(Vd[ee]||(F+=My(ee,Q,f,v,n,E)),Y<s.length()-1){const ce=!((H=ee)<11904||!(Vt["Bopomofo Extended"](H)||Vt.Bopomofo(H)||Vt["CJK Compatibility Forms"](H)||Vt["CJK Compatibility Ideographs"](H)||Vt["CJK Compatibility"](H)||Vt["CJK Radicals Supplement"](H)||Vt["CJK Strokes"](H)||Vt["CJK Symbols and Punctuation"](H)||Vt["CJK Unified Ideographs Extension A"](H)||Vt["CJK Unified Ideographs"](H)||Vt["Enclosed CJK Letters and Months"](H)||Vt["Halfwidth and Fullwidth Forms"](H)||Vt.Hiragana(H)||Vt["Ideographic Description Characters"](H)||Vt["Kangxi Radicals"](H)||Vt["Katakana Phonetic Extensions"](H)||Vt.Katakana(H)||Vt["Vertical Forms"](H)||Vt["Yi Radicals"](H)||Vt["Yi Syllables"](H)));(Kh[ee]||ce||Q.imageName)&&T.push(Od(Y+1,F,M,T,og(ee,s.getCharCode(Y+1),ce&&V),!1))}}var H;return Ry(Od(s.length(),F,M,T,0,!0))}function hm(s){let n=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function z0(s,n,l,f,v){if(!f&&!v)return;const N=s[l],E=(s[l].x+N.metrics.advance*N.scale)*f;for(let T=n;T<=l;T++)s[T].x-=E,s[T].y+=v}function B0(s,n,l){const{horizontalAlign:f,verticalAlign:v}=hm(l),N=n[0]-s.displaySize[0]*f,E=n[1]-s.displaySize[1]*v;return{image:s,top:E,bottom:E+s.displaySize[1],left:N,right:N+s.displaySize[0]}}function Iy(s,n,l,f,v,N){const E=s.image;let T;if(E.content){const ve=E.content,be=E.pixelRatio||1;T=[ve[0]/be,ve[1]/be,E.displaySize[0]-ve[2]/be,E.displaySize[1]-ve[3]/be]}const M=n.left*N,V=n.right*N;let F,H,Y,Q;l==="width"||l==="both"?(Q=v[0]+M-f[3],H=v[0]+V+f[1]):(Q=v[0]+(M+V-E.displaySize[0])/2,H=Q+E.displaySize[0]);const ee=n.top*N,ce=n.bottom*N;return l==="height"||l==="both"?(F=v[1]+ee-f[0],Y=v[1]+ce+f[2]):(F=v[1]+(ee+ce-E.displaySize[1])/2,Y=F+E.displaySize[1]),{image:E,top:F,right:H,bottom:Y,left:Q,collisionPadding:T}}const zu=255,ol=128,Oc=zu*ol;function Ly(s,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ti(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=l;let N=0;for(;N<f.length&&f[N]<=s;)N++;N=Math.max(0,N-1);let E=N;for(;E<f.length&&f[E]<s+1;)E++;E=Math.min(f.length-1,E);const T=f[N],M=f[E];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:v}:{kind:"camera",minZoom:T,maxZoom:M,minSize:l.evaluate(new ti(T)),maxSize:l.evaluate(new ti(M)),interpolationType:v}}}function lg(s,n,l){let f="never";const v=s.get(n);return v?f=v:s.get(l)&&(f="always"),f}const F0=sl.VectorTileFeature.types,Vy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fm(s,n,l,f,v,N,E,T,M,V,F,H,Y){const Q=T?Math.min(Oc,Math.round(T[0])):0,ee=T?Math.min(Oc,Math.round(T[1])):0;s.emplaceBack(n,l,Math.round(32*f),Math.round(32*v),N,E,(Q<<1)+(M?1:0),ee,16*V,16*F,256*H,256*Y)}function cg(s,n,l){s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l)}function U0(s){for(const n of s.sections)if(Mh(n.text))return!0;return!1}class ug{constructor(n){this.layoutVertexArray=new Xn,this.indexArray=new gr,this.programConfigurations=n,this.segments=new Nr,this.dynamicLayoutVertexArray=new On,this.opacityVertexArray=new er,this.hasVisibleVertices=!1,this.placedSymbolArray=new je}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Lc.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Hh.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Vy,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gt("SymbolBuffers",ug);class dg{constructor(n,l,f){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Nr,this.collisionVertexArray=new Wr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Gh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Gt("CollisionBuffers",dg);class Bd{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(E=>E.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mc([]),this.placementViewportMatrix=Mc([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ly(this.zoom,l["text-size"]),this.iconSizeData=Ly(this.zoom,l["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),N=f.get("symbol-z-order");this.canOverlap=lg(f,"text-overlap","text-allow-overlap")!=="never"||lg(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=N!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(N==="viewport-y"||N==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(E=>u.ai[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=n.sourceID}createArrays(){this.text=new ug(new ko(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new ug(new ko(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ae,this.lineVertexArray=new $e,this.symbolInstances=new ye,this.textAnchorOffsets=new it}calculateGlyphDependencies(n,l,f,v,N){for(let E=0;E<n.length;E++)if(l[n.charCodeAt(E)]=!0,(f||v)&&N){const T=Wh[n.charAt(E)];T&&(l[T.charCodeAt(0)]=!0)}}populate(n,l,f){const v=this.layers[0],N=v.layout,E=N.get("text-font"),T=N.get("text-field"),M=N.get("icon-image"),V=(T.value.kind!=="constant"||T.value.value instanceof Vi&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),F=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,H=N.get("symbol-sort-key");if(this.features=[],!V&&!F)return;const Y=l.iconDependencies,Q=l.glyphDependencies,ee=l.availableImages,ce=new ti(this.zoom);for(const{feature:ve,id:be,index:Me,sourceLayerIndex:De}of n){const Le=v._featureFilter.needGeometry,qe=Eu(ve,Le);if(!v._featureFilter.filter(ce,qe,f))continue;let st,Ot;if(Le||(qe.geometry=Su(ve)),V){const Bt=v.getValueAndResolveTokens("text-field",qe,f,ee),Rt=Vi.factory(Bt);U0(Rt)&&(this.hasRTLText=!0),(!this.hasRTLText||_u()==="unavailable"||this.hasRTLText&&Ws.isParsed())&&(st=A0(Rt,v,qe))}if(F){const Bt=v.getValueAndResolveTokens("icon-image",qe,f,ee);Ot=Bt instanceof Oi?Bt:Oi.fromString(Bt)}if(!st&&!Ot)continue;const Jt=this.sortFeaturesByKey?H.evaluate(qe,{},f):void 0;if(this.features.push({id:be,text:st,icon:Ot,index:Me,sourceLayerIndex:De,geometry:qe.geometry,properties:ve.properties,type:F0[ve.type],sortKey:Jt}),Ot&&(Y[Ot.name]=!0),st){const Bt=E.evaluate(qe,{},f).join(","),Rt=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ai.vertical)>=0;for(const Et of st.sections)if(Et.image)Y[Et.image.name]=!0;else{const _t=Il(st.toString()),Dt=Et.fontStack||Bt,vt=Q[Dt]=Q[Dt]||{};this.calculateGlyphDependencies(Et.text,vt,Rt,this.allowVerticalPlacement,_t)}}}N.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},Me={},De=[];let Le=0;function qe(Bt){De.push(ve[Bt]),Le++}function st(Bt,Rt,Et){const _t=Me[Bt];return delete Me[Bt],Me[Rt]=_t,De[_t].geometry[0].pop(),De[_t].geometry[0]=De[_t].geometry[0].concat(Et[0]),_t}function Ot(Bt,Rt,Et){const _t=be[Rt];return delete be[Rt],be[Bt]=_t,De[_t].geometry[0].shift(),De[_t].geometry[0]=Et[0].concat(De[_t].geometry[0]),_t}function Jt(Bt,Rt,Et){const _t=Et?Rt[0][Rt[0].length-1]:Rt[0][0];return`${Bt}:${_t.x}:${_t.y}`}for(let Bt=0;Bt<ve.length;Bt++){const Rt=ve[Bt],Et=Rt.geometry,_t=Rt.text?Rt.text.toString():null;if(!_t){qe(Bt);continue}const Dt=Jt(_t,Et),vt=Jt(_t,Et,!0);if(Dt in Me&&vt in be&&Me[Dt]!==be[vt]){const dn=Ot(Dt,vt,Et),rn=st(Dt,vt,De[dn].geometry);delete be[Dt],delete Me[vt],Me[Jt(_t,De[rn].geometry,!0)]=rn,De[dn].geometry=null}else Dt in Me?st(Dt,vt,Et):vt in be?Ot(Dt,vt,Et):(qe(Bt),be[Dt]=Le-1,Me[vt]=Le-1)}return De.filter(Bt=>Bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(n,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const f=this.lineVertexArray.length;if(n.segment!==void 0){let v=n.dist(l[n.segment+1]),N=n.dist(l[n.segment]);const E={};for(let T=n.segment+1;T<l.length;T++)E[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:v},T<l.length-1&&(v+=l[T+1].dist(l[T]));for(let T=n.segment||0;T>=0;T--)E[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:N},T>0&&(N+=l[T-1].dist(l[T]));for(let T=0;T<l.length;T++){const M=E[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,l,f,v,N,E,T,M,V,F,H,Y){const Q=n.indexArray,ee=n.layoutVertexArray,ce=n.segments.prepareSegment(4*l.length,ee,Q,this.canOverlap?E.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ce.vertexLength,Me=this.allowVerticalPlacement&&T===u.ai.vertical?Math.PI/2:0,De=E.text&&E.text.sections;for(let Le=0;Le<l.length;Le++){const{tl:qe,tr:st,bl:Ot,br:Jt,tex:Bt,pixelOffsetTL:Rt,pixelOffsetBR:Et,minFontScaleX:_t,minFontScaleY:Dt,glyphOffset:vt,isSDF:dn,sectionIndex:rn}=l[Le],Hn=ce.vertexLength,Br=vt[1];fm(ee,M.x,M.y,qe.x,Br+qe.y,Bt.x,Bt.y,f,dn,Rt.x,Rt.y,_t,Dt),fm(ee,M.x,M.y,st.x,Br+st.y,Bt.x+Bt.w,Bt.y,f,dn,Et.x,Rt.y,_t,Dt),fm(ee,M.x,M.y,Ot.x,Br+Ot.y,Bt.x,Bt.y+Bt.h,f,dn,Rt.x,Et.y,_t,Dt),fm(ee,M.x,M.y,Jt.x,Br+Jt.y,Bt.x+Bt.w,Bt.y+Bt.h,f,dn,Et.x,Et.y,_t,Dt),cg(n.dynamicLayoutVertexArray,M,Me),Q.emplaceBack(Hn,Hn+1,Hn+2),Q.emplaceBack(Hn+1,Hn+2,Hn+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vt[0]),Le!==l.length-1&&rn===l[Le+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,E,E.index,{},Y,De&&De[rn])}n.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,be,V,F,M.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],T,0,!1,0,H)}_addCollisionDebugVertex(n,l,f,v,N,E){return l.emplaceBack(0,0),n.emplaceBack(f.x,f.y,v,N,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(n,l,f,v,N,E,T){const M=N.segments.prepareSegment(4,N.layoutVertexArray,N.indexArray),V=M.vertexLength,F=N.layoutVertexArray,H=N.collisionVertexArray,Y=T.anchorX,Q=T.anchorY;this._addCollisionDebugVertex(F,H,E,Y,Q,new W(n,l)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(f,l)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(f,v)),this._addCollisionDebugVertex(F,H,E,Y,Q,new W(n,v)),M.vertexLength+=4;const ee=N.indexArray;ee.emplaceBack(V,V+1),ee.emplaceBack(V+1,V+2),ee.emplaceBack(V+2,V+3),ee.emplaceBack(V+3,V),M.primitiveLength+=4}addDebugCollisionBoxes(n,l,f,v){for(let N=n;N<l;N++){const E=this.collisionBoxArray.get(N);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,v?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dg(Ni,Zl.members,$i),this.iconCollisionBox=new dg(Ni,Zl.members,$i);for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,f,v,N,E,T,M,V){const F={};for(let H=l;H<f;H++){const Y=n.get(H);F.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.textFeatureIndex=Y.featureIndex;break}for(let H=v;H<N;H++){const Y=n.get(H);F.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=E;H<T;H++){const Y=n.get(H);F.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.iconFeatureIndex=Y.featureIndex;break}for(let H=M;H<V;H++){const Y=n.get(H);F.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},F.verticalIconFeatureIndex=Y.featureIndex;break}return F}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const f=n.placedSymbolArray.get(l),v=f.vertexStartIndex+4*f.numGlyphs;for(let N=f.vertexStartIndex;N<v;N+=4)n.indexArray.emplaceBack(N,N+1,N+2),n.indexArray.emplaceBack(N+1,N+2,N+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),f=Math.cos(n),v=[],N=[],E=[];for(let T=0;T<this.symbolInstances.length;++T){E.push(T);const M=this.symbolInstances.get(T);v.push(0|Math.round(l*M.anchorX+f*M.anchorY)),N.push(M.featureIndex)}return E.sort((T,M)=>v[T]-v[M]||N[M]-N[T]),E}addToSortKeyRanges(n,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,N,E)=>{v>=0&&E.indexOf(v)===N&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mm,Oy;Gt("SymbolBucket",Bd,{omit:["layers","collisionBoxArray","features","compareText"]}),Bd.MAX_GLYPHS=65535,Bd.addDynamicAttributes=cg;var hg={get paint(){return Oy=Oy||new Ai({"icon-opacity":new gn(We.paint_symbol["icon-opacity"]),"icon-color":new gn(We.paint_symbol["icon-color"]),"icon-halo-color":new gn(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new gn(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gn(We.paint_symbol["icon-halo-blur"]),"icon-translate":new cn(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new cn(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new gn(We.paint_symbol["text-opacity"]),"text-color":new gn(We.paint_symbol["text-color"],{runtimeType:zn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new gn(We.paint_symbol["text-halo-color"]),"text-halo-width":new gn(We.paint_symbol["text-halo-width"]),"text-halo-blur":new gn(We.paint_symbol["text-halo-blur"]),"text-translate":new cn(We.paint_symbol["text-translate"]),"text-translate-anchor":new cn(We.paint_symbol["text-translate-anchor"])})},get layout(){return mm=mm||new Ai({"symbol-placement":new cn(We.layout_symbol["symbol-placement"]),"symbol-spacing":new cn(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cn(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gn(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cn(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cn(We.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cn(We.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cn(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new cn(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cn(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new gn(We.layout_symbol["icon-size"]),"icon-text-fit":new cn(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cn(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new gn(We.layout_symbol["icon-image"]),"icon-rotate":new gn(We.layout_symbol["icon-rotate"]),"icon-padding":new gn(We.layout_symbol["icon-padding"]),"icon-keep-upright":new cn(We.layout_symbol["icon-keep-upright"]),"icon-offset":new gn(We.layout_symbol["icon-offset"]),"icon-anchor":new gn(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cn(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cn(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cn(We.layout_symbol["text-rotation-alignment"]),"text-field":new gn(We.layout_symbol["text-field"]),"text-font":new gn(We.layout_symbol["text-font"]),"text-size":new gn(We.layout_symbol["text-size"]),"text-max-width":new gn(We.layout_symbol["text-max-width"]),"text-line-height":new cn(We.layout_symbol["text-line-height"]),"text-letter-spacing":new gn(We.layout_symbol["text-letter-spacing"]),"text-justify":new gn(We.layout_symbol["text-justify"]),"text-radial-offset":new gn(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cn(We.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gn(We.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gn(We.layout_symbol["text-anchor"]),"text-max-angle":new cn(We.layout_symbol["text-max-angle"]),"text-writing-mode":new cn(We.layout_symbol["text-writing-mode"]),"text-rotate":new gn(We.layout_symbol["text-rotate"]),"text-padding":new cn(We.layout_symbol["text-padding"]),"text-keep-upright":new cn(We.layout_symbol["text-keep-upright"]),"text-transform":new gn(We.layout_symbol["text-transform"]),"text-offset":new gn(We.layout_symbol["text-offset"]),"text-allow-overlap":new cn(We.layout_symbol["text-allow-overlap"]),"text-overlap":new cn(We.layout_symbol["text-overlap"]),"text-ignore-placement":new cn(We.layout_symbol["text-ignore-placement"]),"text-optional":new cn(We.layout_symbol["text-optional"])})}};class zy{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:dr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gt("FormatSectionOverride",zy,{omit:["defaultValue"]});class Yh extends _a{constructor(n){super(n,hg)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const N of f)v.indexOf(N)<0&&v.push(N);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,f,v){const N=this.layout.get(n).evaluate(l,{},f,v),E=this._unevaluatedLayout._values[n];return E.isDataDriven()||cs(E.value)||!N?N:function(T,M){return M.replace(/{([^{}]+)}/g,(V,F)=>T&&F in T?String(T[F]):"")}(l.properties,N)}createBucket(n){return new Bd(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of hg.paint.overridableProperties){if(!Yh.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),f=new zy(l),v=new dd(f,l.property.specification);let N=null;N=l.value.kind==="constant"||l.value.kind==="source"?new wi("source",v):new ba("composite",v,l.value.zoomStops),this.paint._values[n]=new ys(l.property,N,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&Yh.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const f=n.get("text-field"),v=hg.paint.properties[l];let N=!1;const E=T=>{for(const M of T)if(v.overrides&&v.overrides.hasOverride(M))return void(N=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Vi)E(f.value.value.sections);else if(f.value.kind==="source"){const T=V=>{N||(V instanceof Qs&&zr(V.value)===fe?E(V.value.sections):V instanceof yi?E(V.sections):V.eachChild(T))},M=f.value;M._styleExpression&&T(M._styleExpression.expression)}return N}}let By;var $0={get paint(){return By=By||new Ai({"background-color":new cn(We.paint_background["background-color"]),"background-pattern":new kc(We.paint_background["background-pattern"]),"background-opacity":new cn(We.paint_background["background-opacity"])})}};class q0 extends _a{constructor(n){super(n,$0)}}let Fy;var H0={get paint(){return Fy=Fy||new Ai({"raster-opacity":new cn(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new cn(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cn(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cn(We.paint_raster["raster-brightness-max"]),"raster-saturation":new cn(We.paint_raster["raster-saturation"]),"raster-contrast":new cn(We.paint_raster["raster-contrast"]),"raster-resampling":new cn(We.paint_raster["raster-resampling"]),"raster-fade-duration":new cn(We.paint_raster["raster-fade-duration"])})}};class G0 extends _a{constructor(n){super(n,H0)}}class W0 extends _a{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Uy{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Xh=63710088e-1;class lo{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new lo(tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,f=this.lat*l,v=n.lat*l,N=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((n.lng-this.lng)*l);return Xh*Math.acos(Math.min(N,1))}static convert(n){if(n instanceof lo)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new lo(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new lo(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const $y=2*Math.PI*Xh;function fg(s){return $y*Math.cos(s*Math.PI/180)}function mg(s){return(180+s)/360}function pg(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function qy(s,n){return s/fg(n)}function gg(s){return 360*s-180}function vg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class pm{constructor(n,l,f=0){this.x=+n,this.y=+l,this.z=+f}static fromLngLat(n,l=0){const f=lo.convert(n);return new pm(mg(f.lng),pg(f.lat),qy(l,f.lat))}toLngLat(){return new lo(gg(this.x),vg(this.y))}toAltitude(){return this.z*fg(vg(this.y))}meterInMercatorCoordinateUnits(){return 1/$y*(n=vg(this.y),1/Math.cos(n*Math.PI/180));var n}}function Hy(s,n,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[s*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class gm{constructor(n,l,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||l<0||l>=Math.pow(2,n))throw new Error(`x=${l}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=f,this.key=ll(0,n,n,l,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,f){const v=(E=this.y,T=this.z,M=Hy(256*(N=this.x),256*(E=Math.pow(2,T)-E-1),T),V=Hy(256*(N+1),256*(E+1),T),M[0]+","+M[1]+","+V[0]+","+V[1]);var N,E,T,M,V;const F=function(H,Y,Q){let ee,ce="";for(let ve=H;ve>0;ve--)ee=1<<ve-1,ce+=(Y&ee?1:0)+(Q&ee?2:0);return ce}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,v)}isChildOf(n){const l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){const l=Math.pow(2,this.z);return new W((n.x*l-this.x)*Ri,(n.y*l-this.y)*Ri)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yg{constructor(n,l){this.wrap=n,this.canonical=l,this.key=ll(n,l.z,l.z,l.x,l.y)}}class Ta{constructor(n,l,f,v,N){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=l,this.canonical=new gm(f,+v,+N),this.key=ll(l,n,f,v,N)}clone(){return new Ta(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-n;return n>this.canonical.z?new Ta(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ta(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?ll(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):ll(this.wrap*+l,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Ta(l,this.wrap,l,f,v),new Ta(l,this.wrap,l,f+1,v),new Ta(l,this.wrap,l,f,v+1),new Ta(l,this.wrap,l,f+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ta(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new pm(n.x-this.wrap,n.y))}}function ll(s,n,l,f,v){(s*=2)<0&&(s=-1*s-1);const N=1<<l;return(N*N*s+N*v+f).toString(36)+l.toString(36)+n.toString(36)}Gt("CanonicalTileID",gm),Gt("OverscaledTileID",Ta,{omit:["posMatrix"]});class Gy{constructor(n,l,f,v=1,N=1,E=1,T=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void It(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const M=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=N,this.blueFactor=E,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<M;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(M,V)]=this.data[this._idx(M-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,M)]=this.data[this._idx(V,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<M;V++)for(let F=0;F<M;F++){const H=this.get(V,F);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(n,l){const f=new Uint8Array(this.data.buffer),v=4*this._idx(n,l);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,f){return n*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,N=l*this.dim+this.dim,E=f*this.dim,T=f*this.dim+this.dim;switch(l){case-1:v=N-1;break;case 1:N=v+1}switch(f){case-1:E=T-1;break;case 1:T=E+1}const M=-l*this.dim,V=-f*this.dim;for(let F=E;F<T;F++)for(let H=v;H<N;H++)this.data[this._idx(H,F)]=n.data[this._idx(H+M,F+V)]}}Gt("DEMData",Gy);class Wy{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const f=n[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Zy{constructor(n,l,f,v,N){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=f,n._y=v,this.properties=n.properties,this.id=N}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class Ky{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Rl(Ri,16,0),this.grid3D=new Rl(Ri,16,0),this.featureIndexArray=new dt,this.promoteId=l}insert(n,l,f,v,N,E){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,N);const M=E?this.grid3D:this.grid;for(let V=0;V<l.length;V++){const F=l[V],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<F.length;Y++){const Q=F[Y];H[0]=Math.min(H[0],Q.x),H[1]=Math.min(H[1],Q.y),H[2]=Math.max(H[2],Q.x),H[3]=Math.max(H[3],Q.y)}H[0]<Ri&&H[1]<Ri&&H[2]>=0&&H[3]>=0&&M.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sl.VectorTile(new rg(this.rawTileData)).layers,this.sourceLayerCoder=new Wy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,f,v){this.loadVTLayers();const N=n.params||{},E=Ri/n.tileSize/n.scale,T=wh(N.filter),M=n.queryGeometry,V=n.queryPadding*E,F=Xy(M),H=this.grid.query(F.minX-V,F.minY-V,F.maxX+V,F.maxY+V),Y=Xy(n.cameraQueryGeometry),Q=this.grid3D.query(Y.minX-V,Y.minY-V,Y.maxX+V,Y.maxY+V,(ve,be,Me,De)=>function(Le,qe,st,Ot,Jt){for(const Rt of Le)if(qe<=Rt.x&&st<=Rt.y&&Ot>=Rt.x&&Jt>=Rt.y)return!0;const Bt=[new W(qe,st),new W(qe,Jt),new W(Ot,Jt),new W(Ot,st)];if(Le.length>2){for(const Rt of Bt)if(ui(Le,Rt))return!0}for(let Rt=0;Rt<Le.length-1;Rt++)if(nl(Le[Rt],Le[Rt+1],Bt))return!0;return!1}(n.cameraQueryGeometry,ve-V,be-V,Me+V,De+V));for(const ve of Q)H.push(ve);H.sort(Jy);const ee={};let ce;for(let ve=0;ve<H.length;ve++){const be=H[ve];if(be===ce)continue;ce=be;const Me=this.featureIndexArray.get(be);let De=null;this.loadMatchingFeature(ee,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,T,N.layers,N.availableImages,l,f,v,(Le,qe,st)=>(De||(De=Su(Le)),qe.queryIntersectsFeature(M,Le,st,De,this.z,n.transform,E,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,l,f,v,N,E,T,M,V,F,H){const Y=this.bucketLayerIDs[l];if(E&&!function(ve,be){for(let Me=0;Me<ve.length;Me++)if(be.indexOf(ve[Me])>=0)return!0;return!1}(E,Y))return;const Q=this.sourceLayerCoder.decode(f),ee=this.vtLayers[Q].feature(v);if(N.needGeometry){const ve=Eu(ee,!0);if(!N.filter(new ti(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!N.filter(new ti(this.tileID.overscaledZ),ee))return;const ce=this.getId(ee,Q);for(let ve=0;ve<Y.length;ve++){const be=Y[ve];if(E&&E.indexOf(be)<0)continue;const Me=M[be];if(!Me)continue;let De={};ce&&F&&(De=F.getState(Me.sourceLayer||"_geojsonTileLayer",ce));const Le=ut({},V[be]);Le.paint=Yy(Le.paint,Me.paint,ee,De,T),Le.layout=Yy(Le.layout,Me.layout,ee,De,T);const qe=!H||H(ee,Me,De);if(!qe)continue;const st=new Zy(ee,this.z,this.x,this.y,ce);st.layer=Le;let Ot=n[be];Ot===void 0&&(Ot=n[be]=[]),Ot.push({featureIndex:v,feature:st,intersectionZ:qe})}}lookupSymbolFeatures(n,l,f,v,N,E,T,M){const V={};this.loadVTLayers();const F=wh(N);for(const H of n)this.loadMatchingFeature(V,f,v,H,F,E,T,M,l);return V}hasLayer(n){for(const l of this.bucketLayerIDs)for(const f of l)if(n===f)return!0;return!1}getId(n,l){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function Yy(s,n,l,f,v){return pt(s,(N,E)=>{const T=n instanceof jc?n.get(E):null;return T&&T.evaluate?T.evaluate(l,f,v):T})}function Xy(s){let n=1/0,l=1/0,f=-1/0,v=-1/0;for(const N of s)n=Math.min(n,N.x),l=Math.min(l,N.y),f=Math.max(f,N.x),v=Math.max(v,N.y);return{minX:n,minY:l,maxX:f,maxY:v}}function Jy(s,n){return n-s}function Qy(s,n,l,f,v){const N=[];for(let E=0;E<s.length;E++){const T=s[E];let M;for(let V=0;V<T.length-1;V++){let F=T[V],H=T[V+1];F.x<n&&H.x<n||(F.x<n?F=new W(n,F.y+(n-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x<n&&(H=new W(n,F.y+(n-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y<l&&H.y<l||(F.y<l?F=new W(F.x+(l-F.y)/(H.y-F.y)*(H.x-F.x),l)._round():H.y<l&&(H=new W(F.x+(l-F.y)/(H.y-F.y)*(H.x-F.x),l)._round()),F.x>=f&&H.x>=f||(F.x>=f?F=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round():H.x>=f&&(H=new W(f,F.y+(f-F.x)/(H.x-F.x)*(H.y-F.y))._round()),F.y>=v&&H.y>=v||(F.y>=v?F=new W(F.x+(v-F.y)/(H.y-F.y)*(H.x-F.x),v)._round():H.y>=v&&(H=new W(F.x+(v-F.y)/(H.y-F.y)*(H.x-F.x),v)._round()),M&&F.equals(M[M.length-1])||(M=[F],N.push(M)),M.push(H)))))}}return N}Gt("FeatureIndex",Ky,{omit:["rawTileData","sourceLayerCoder"]});class zc extends W{constructor(n,l,f,v){super(n,l),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new zc(this.x,this.y,this.angle,this.segment)}}function bg(s,n,l,f,v){if(n.segment===void 0||l===0)return!0;let N=n,E=n.segment+1,T=0;for(;T>-l/2;){if(E--,E<0)return!1;T-=s[E].dist(N),N=s[E]}T+=s[E].dist(s[E+1]),E++;const M=[];let V=0;for(;T<l/2;){const F=s[E],H=s[E+1];if(!H)return!1;let Y=s[E-1].angleTo(F)-F.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:Y}),V+=Y;T-M[0].distance>f;)V-=M.shift().angleDelta;if(V>v)return!1;E++,T+=F.dist(H)}return!0}function Fd(s){let n=0;for(let l=0;l<s.length-1;l++)n+=s[l].dist(s[l+1]);return n}function Ud(s,n,l){return s?.6*n*l:0}function eb(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function Z0(s,n,l,f,v,N){const E=Ud(l,v,N),T=eb(l,f)*N;let M=0;const V=Fd(s)/2;for(let F=0;F<s.length-1;F++){const H=s[F],Y=s[F+1],Q=H.dist(Y);if(M+Q>V){const ee=(V-M)/Q,ce=es.number(H.x,Y.x,ee),ve=es.number(H.y,Y.y,ee),be=new zc(ce,ve,Y.angleTo(H),F);return be._round(),!E||bg(s,be,T,E,n)?be:void 0}M+=Q}}function K0(s,n,l,f,v,N,E,T,M){const V=Ud(f,N,E),F=eb(f,v),H=F*E,Y=s[0].x===0||s[0].x===M||s[0].y===0||s[0].y===M;return n-H<n/4&&(n=H+n/4),Jh(s,Y?n/2*T%n:(F/2+2*N)*E*T%n,n,V,l,H,Y,!1,M)}function Jh(s,n,l,f,v,N,E,T,M){const V=N/2,F=Fd(s);let H=0,Y=n-l,Q=[];for(let ee=0;ee<s.length-1;ee++){const ce=s[ee],ve=s[ee+1],be=ce.dist(ve),Me=ve.angleTo(ce);for(;Y+l<H+be;){Y+=l;const De=(Y-H)/be,Le=es.number(ce.x,ve.x,De),qe=es.number(ce.y,ve.y,De);if(Le>=0&&Le<M&&qe>=0&&qe<M&&Y-V>=0&&Y+V<=F){const st=new zc(Le,qe,Me,ee);st._round(),f&&!bg(s,st,N,f,v)||Q.push(st)}}H+=be}return T||Q.length||E||(Q=Jh(s,H/2,l,f,v,N,E,!0,M)),Q}Gt("Anchor",zc);const $d=ra;function xg(s,n,l,f){const v=[],N=s.image,E=N.pixelRatio,T=N.paddedRect.w-2*$d,M=N.paddedRect.h-2*$d,V=s.right-s.left,F=s.bottom-s.top,H=N.stretchX||[[0,T]],Y=N.stretchY||[[0,M]],Q=(Et,_t)=>Et+_t[1]-_t[0],ee=H.reduce(Q,0),ce=Y.reduce(Q,0),ve=T-ee,be=M-ce;let Me=0,De=ee,Le=0,qe=ce,st=0,Ot=ve,Jt=0,Bt=be;if(N.content&&f){const Et=N.content;Me=vm(H,0,Et[0]),Le=vm(Y,0,Et[1]),De=vm(H,Et[0],Et[2]),qe=vm(Y,Et[1],Et[3]),st=Et[0]-Me,Jt=Et[1]-Le,Ot=Et[2]-Et[0]-De,Bt=Et[3]-Et[1]-qe}const Rt=(Et,_t,Dt,vt)=>{const dn=Qh(Et.stretch-Me,De,V,s.left),rn=ym(Et.fixed-st,Ot,Et.stretch,ee),Hn=Qh(_t.stretch-Le,qe,F,s.top),Br=ym(_t.fixed-Jt,Bt,_t.stretch,ce),Or=Qh(Dt.stretch-Me,De,V,s.left),Hi=ym(Dt.fixed-st,Ot,Dt.stretch,ee),js=Qh(vt.stretch-Le,qe,F,s.top),Gi=ym(vt.fixed-Jt,Bt,vt.stretch,ce),Bi=new W(dn,Hn),rs=new W(Or,Hn),ws=new W(Or,js),Ys=new W(dn,js),Zr=new W(rn/E,Br/E),bi=new W(Hi/E,Gi/E),Di=n*Math.PI/180;if(Di){const Ii=Math.sin(Di),Wi=Math.cos(Di),Cs=[Wi,-Ii,Ii,Wi];Bi._matMult(Cs),rs._matMult(Cs),Ys._matMult(Cs),ws._matMult(Cs)}const Ti=Et.stretch+Et.fixed,ks=_t.stretch+_t.fixed;return{tl:Bi,tr:rs,bl:Ys,br:ws,tex:{x:N.paddedRect.x+$d+Ti,y:N.paddedRect.y+$d+ks,w:Dt.stretch+Dt.fixed-Ti,h:vt.stretch+vt.fixed-ks},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:bi,minFontScaleX:Ot/E/V,minFontScaleY:Bt/E/F,isSDF:l}};if(f&&(N.stretchX||N.stretchY)){const Et=_g(H,ve,ee),_t=_g(Y,be,ce);for(let Dt=0;Dt<Et.length-1;Dt++){const vt=Et[Dt],dn=Et[Dt+1];for(let rn=0;rn<_t.length-1;rn++)v.push(Rt(vt,_t[rn],dn,_t[rn+1]))}}else v.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return v}function vm(s,n,l){let f=0;for(const v of s)f+=Math.max(n,Math.min(l,v[1]))-Math.max(n,Math.min(l,v[0]));return f}function _g(s,n,l){const f=[{fixed:-$d,stretch:0}];for(const[v,N]of s){const E=f[f.length-1];f.push({fixed:v-E.stretch,stretch:E.stretch}),f.push({fixed:v-E.stretch,stretch:E.stretch+(N-v)})}return f.push({fixed:n+$d,stretch:l}),f}function Qh(s,n,l,f){return s/n*l+f}function ym(s,n,l,f){return s-n*l/f}class bm{constructor(n,l,f,v,N,E,T,M,V,F){if(this.boxStartIndex=n.length,V){let H=E.top,Y=E.bottom;const Q=E.collisionPadding;Q&&(H-=Q[1],Y+=Q[3]);let ee=Y-H;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let H=E.top*T-M[0],Y=E.bottom*T+M[2],Q=E.left*T-M[3],ee=E.right*T+M[1];const ce=E.collisionPadding;if(ce&&(Q-=ce[0]*T,H-=ce[1]*T,ee+=ce[2]*T,Y+=ce[3]*T),F){const ve=new W(Q,H),be=new W(ee,H),Me=new W(Q,Y),De=new W(ee,Y),Le=F*Math.PI/180;ve._rotate(Le),be._rotate(Le),Me._rotate(Le),De._rotate(Le),Q=Math.min(ve.x,be.x,Me.x,De.x),ee=Math.max(ve.x,be.x,Me.x,De.x),H=Math.min(ve.y,be.y,Me.y,De.y),Y=Math.max(ve.y,be.y,Me.y,De.y)}n.emplaceBack(l.x,l.y,Q,H,ee,Y,f,v,N)}this.boxEndIndex=n.length}}class Y0{constructor(n=[],l=X0){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:f}=this,v=l[n];for(;n>0;){const N=n-1>>1,E=l[N];if(f(v,E)>=0)break;l[n]=E,n=N}l[n]=v}_down(n){const{data:l,compare:f}=this,v=this.length>>1,N=l[n];for(;n<v;){let E=1+(n<<1),T=l[E];const M=E+1;if(M<this.length&&f(l[M],T)<0&&(E=M,T=l[M]),f(T,N)>=0)break;l[n]=T,n=E}l[n]=N}}function X0(s,n){return s<n?-1:s>n?1:0}function J0(s,n=1,l=!1){let f=1/0,v=1/0,N=-1/0,E=-1/0;const T=s[0];for(let Q=0;Q<T.length;Q++){const ee=T[Q];(!Q||ee.x<f)&&(f=ee.x),(!Q||ee.y<v)&&(v=ee.y),(!Q||ee.x>N)&&(N=ee.x),(!Q||ee.y>E)&&(E=ee.y)}const M=Math.min(N-f,E-v);let V=M/2;const F=new Y0([],Q0);if(M===0)return new W(f,v);for(let Q=f;Q<N;Q+=M)for(let ee=v;ee<E;ee+=M)F.push(new qd(Q+V,ee+V,V,s));let H=function(Q){let ee=0,ce=0,ve=0;const be=Q[0];for(let Me=0,De=be.length,Le=De-1;Me<De;Le=Me++){const qe=be[Me],st=be[Le],Ot=qe.x*st.y-st.x*qe.y;ce+=(qe.x+st.x)*Ot,ve+=(qe.y+st.y)*Ot,ee+=3*Ot}return new qd(ce/ee,ve/ee,0,Q)}(s),Y=F.length;for(;F.length;){const Q=F.pop();(Q.d>H.d||!H.d)&&(H=Q,l&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Y)),Q.max-H.d<=n||(V=Q.h/2,F.push(new qd(Q.p.x-V,Q.p.y-V,V,s)),F.push(new qd(Q.p.x+V,Q.p.y-V,V,s)),F.push(new qd(Q.p.x-V,Q.p.y+V,V,s)),F.push(new qd(Q.p.x+V,Q.p.y+V,V,s)),Y+=4)}return l&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function Q0(s,n){return n.max-s.max}function qd(s,n,l,f){this.p=new W(s,n),this.h=l,this.d=function(v,N){let E=!1,T=1/0;for(let M=0;M<N.length;M++){const V=N[M];for(let F=0,H=V.length,Y=H-1;F<H;Y=F++){const Q=V[F],ee=V[Y];Q.y>v.y!=ee.y>v.y&&v.x<(ee.x-Q.x)*(v.y-Q.y)/(ee.y-Q.y)+Q.x&&(E=!E),T=Math.min(T,cr(v,Q,ee))}}return(E?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var _s;u.aq=void 0,(_s=u.aq||(u.aq={}))[_s.center=1]="center",_s[_s.left=2]="left",_s[_s.right=3]="right",_s[_s.top=4]="top",_s[_s.bottom=5]="bottom",_s[_s["top-left"]=6]="top-left",_s[_s["top-right"]=7]="top-right",_s[_s["bottom-left"]=8]="bottom-left",_s[_s["bottom-right"]=9]="bottom-right";const Bc=7,wg=Number.POSITIVE_INFINITY;function Pa(s,n){return n[1]!==wg?function(l,f,v){let N=0,E=0;switch(f=Math.abs(f),v=Math.abs(v),l){case"top-right":case"top-left":case"top":E=v-Bc;break;case"bottom-right":case"bottom-left":case"bottom":E=-v+Bc}switch(l){case"top-right":case"bottom-right":case"right":N=-f;break;case"top-left":case"bottom-left":case"left":N=f}return[N,E]}(s,n[0],n[1]):function(l,f){let v=0,N=0;f<0&&(f=0);const E=f/Math.SQRT2;switch(l){case"top-right":case"top-left":N=E-Bc;break;case"bottom-right":case"bottom-left":N=-E+Bc;break;case"bottom":N=-f+Bc;break;case"top":N=f-Bc}switch(l){case"top-right":case"bottom-right":v=-E;break;case"top-left":case"bottom-left":v=E;break;case"left":v=f;break;case"right":v=-f}return[v,N]}(s,n[0])}function Hd(s,n,l){var f;const v=s.layout,N=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},l);if(N){const T=N.values,M=[];for(let V=0;V<T.length;V+=2){const F=M[V]=T[V],H=T[V+1].map(Y=>Y*zi);F.startsWith("top")?H[1]-=Bc:F.startsWith("bottom")&&(H[1]+=Bc),M[V+1]=H}return new ps(M)}const E=v.get("text-variable-anchor");if(E){let T;T=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(n,{},l)*zi,wg]:v.get("text-offset").evaluate(n,{},l).map(V=>V*zi);const M=[];for(const V of E)M.push(V,Pa(V,T));return new ps(M)}return null}function xm(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function e_(s,n,l,f,v,N,E,T,M,V,F){let H=N.textMaxSize.evaluate(n,{});H===void 0&&(H=E);const Y=s.layers[0].layout,Q=Y.get("icon-offset").evaluate(n,{},F),ee=tb(l.horizontal),ce=E/24,ve=s.tilePixelRatio*ce,be=s.tilePixelRatio*H/24,Me=s.tilePixelRatio*T,De=s.tilePixelRatio*Y.get("symbol-spacing"),Le=Y.get("text-padding")*s.tilePixelRatio,qe=function(vt,dn,rn,Hn=1){const Br=vt.get("icon-padding").evaluate(dn,{},rn),Or=Br&&Br.values;return[Or[0]*Hn,Or[1]*Hn,Or[2]*Hn,Or[3]*Hn]}(Y,n,F,s.tilePixelRatio),st=Y.get("text-max-angle")/180*Math.PI,Ot=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Jt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Bt=Y.get("symbol-placement"),Rt=De/2,Et=Y.get("icon-text-fit");let _t;f&&Et!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(_t=Iy(f,l.vertical,Et,Y.get("icon-text-fit-padding"),Q,ce)),ee&&(f=Iy(f,ee,Et,Y.get("icon-text-fit-padding"),Q,ce)));const Dt=(vt,dn)=>{dn.x<0||dn.x>=Ri||dn.y<0||dn.y>=Ri||function(rn,Hn,Br,Or,Hi,js,Gi,Bi,rs,ws,Ys,Zr,bi,Di,Ti,ks,Ii,Wi,Cs,Li,Jn,Zi,ds,Pi,qa){const co=rn.addToLineVertexArray(Hn,Br);let Ro,Yl,ia,Xs,Js=0,Xl=0,Fc=0,ib=0,Tg=-1,Pg=-1;const Jl={};let sb=us("");if(rn.allowVerticalPlacement&&Or.vertical){const As=Bi.layout.get("text-rotate").evaluate(Jn,{},Pi)+90;ia=new bm(rs,Hn,ws,Ys,Zr,Or.vertical,bi,Di,Ti,As),Gi&&(Xs=new bm(rs,Hn,ws,Ys,Zr,Gi,Ii,Wi,Ti,As))}if(Hi){const As=Bi.layout.get("icon-rotate").evaluate(Jn,{}),ja=Bi.layout.get("icon-text-fit")!=="none",Bu=xg(Hi,As,ds,ja),Lo=Gi?xg(Gi,As,ds,ja):void 0;Yl=new bm(rs,Hn,ws,Ys,Zr,Hi,Ii,Wi,!1,As),Js=4*Bu.length;const $c=rn.iconSizeData;let Ha=null;$c.kind==="source"?(Ha=[ol*Bi.layout.get("icon-size").evaluate(Jn,{})],Ha[0]>Oc&&It(`${rn.layerIds[0]}: Value for "icon-size" is >= ${zu}. Reduce your "icon-size".`)):$c.kind==="composite"&&(Ha=[ol*Zi.compositeIconSizes[0].evaluate(Jn,{},Pi),ol*Zi.compositeIconSizes[1].evaluate(Jn,{},Pi)],(Ha[0]>Oc||Ha[1]>Oc)&&It(`${rn.layerIds[0]}: Value for "icon-size" is >= ${zu}. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,Bu,Ha,Li,Cs,Jn,u.ai.none,Hn,co.lineStartIndex,co.lineLength,-1,Pi),Tg=rn.icon.placedSymbolArray.length-1,Lo&&(Xl=4*Lo.length,rn.addSymbols(rn.icon,Lo,Ha,Li,Cs,Jn,u.ai.vertical,Hn,co.lineStartIndex,co.lineLength,-1,Pi),Pg=rn.icon.placedSymbolArray.length-1)}const ab=Object.keys(Or.horizontal);for(const As of ab){const ja=Or.horizontal[As];if(!Ro){sb=us(ja.text);const Lo=Bi.layout.get("text-rotate").evaluate(Jn,{},Pi);Ro=new bm(rs,Hn,ws,Ys,Zr,ja,bi,Di,Ti,Lo)}const Bu=ja.positionedLines.length===1;if(Fc+=Cg(rn,Hn,ja,js,Bi,Ti,Jn,ks,co,Or.vertical?u.ai.horizontal:u.ai.horizontalOnly,Bu?ab:[As],Jl,Tg,Zi,Pi),Bu)break}Or.vertical&&(ib+=Cg(rn,Hn,Or.vertical,js,Bi,Ti,Jn,ks,co,u.ai.vertical,["vertical"],Jl,Pg,Zi,Pi));const n_=Ro?Ro.boxStartIndex:rn.collisionBoxArray.length,r_=Ro?Ro.boxEndIndex:rn.collisionBoxArray.length,i_=ia?ia.boxStartIndex:rn.collisionBoxArray.length,s_=ia?ia.boxEndIndex:rn.collisionBoxArray.length,jg=Yl?Yl.boxStartIndex:rn.collisionBoxArray.length,kg=Yl?Yl.boxEndIndex:rn.collisionBoxArray.length,Ag=Xs?Xs.boxStartIndex:rn.collisionBoxArray.length,Mg=Xs?Xs.boxEndIndex:rn.collisionBoxArray.length;let Io=-1;const Uc=(As,ja)=>As&&As.circleDiameter?Math.max(As.circleDiameter,ja):ja;Io=Uc(Ro,Io),Io=Uc(ia,Io),Io=Uc(Yl,Io),Io=Uc(Xs,Io);const Wd=Io>-1?1:0;Wd&&(Io*=qa/zi),rn.glyphOffsetArray.length>=Bd.MAX_GLYPHS&&It("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,Jn.sortKey);const a_=Hd(Bi,Jn,Pi),[ob,o_]=function(As,ja){const Bu=As.length,Lo=ja==null?void 0:ja.values;if((Lo==null?void 0:Lo.length)>0)for(let $c=0;$c<Lo.length;$c+=2){const Ha=Lo[$c+1];As.emplaceBack(u.aq[Lo[$c]],Ha[0],Ha[1])}return[Bu,As.length]}(rn.textAnchorOffsets,a_);rn.symbolInstances.emplaceBack(Hn.x,Hn.y,Jl.right>=0?Jl.right:-1,Jl.center>=0?Jl.center:-1,Jl.left>=0?Jl.left:-1,Jl.vertical||-1,Tg,Pg,sb,n_,r_,i_,s_,jg,kg,Ag,Mg,ws,Fc,ib,Js,Xl,Wd,0,bi,Io,ob,o_)}(s,dn,vt,l,f,v,_t,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ve,[Le,Le,Le,Le],Ot,M,Me,qe,Jt,Q,n,N,V,F,E)};if(Bt==="line")for(const vt of Qy(n.geometry,0,0,Ri,Ri)){const dn=K0(vt,De,st,l.vertical||ee,f,24,be,s.overscaling,Ri);for(const rn of dn)ee&&t_(s,ee.text,Rt,rn)||Dt(vt,rn)}else if(Bt==="line-center"){for(const vt of n.geometry)if(vt.length>1){const dn=Z0(vt,st,l.vertical||ee,f,24,be);dn&&Dt(vt,dn)}}else if(n.type==="Polygon")for(const vt of Hp(n.geometry,0)){const dn=J0(vt,16);Dt(vt[0],new zc(dn.x,dn.y,0))}else if(n.type==="LineString")for(const vt of n.geometry)Dt(vt,new zc(vt[0].x,vt[0].y,0));else if(n.type==="Point")for(const vt of n.geometry)for(const dn of vt)Dt([dn],new zc(dn.x,dn.y,0))}function Cg(s,n,l,f,v,N,E,T,M,V,F,H,Y,Q,ee){const ce=function(Me,De,Le,qe,st,Ot,Jt,Bt){const Rt=qe.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Et=[];for(const _t of De.positionedLines)for(const Dt of _t.positionedGlyphs){if(!Dt.rect)continue;const vt=Dt.rect||{};let dn=Id+1,rn=!0,Hn=1,Br=0;const Or=(st||Bt)&&Dt.vertical,Hi=Dt.metrics.advance*Dt.scale/2;if(Bt&&De.verticalizable&&(Br=_t.lineOffset/2-(Dt.imageName?-(zi-Dt.metrics.width*Dt.scale)/2:(Dt.scale-1)*zi)),Dt.imageName){const Li=Jt[Dt.imageName];rn=Li.sdf,Hn=Li.pixelRatio,dn=ra/Hn}const js=st?[Dt.x+Hi,Dt.y]:[0,0];let Gi=st?[0,0]:[Dt.x+Hi+Le[0],Dt.y+Le[1]-Br],Bi=[0,0];Or&&(Bi=Gi,Gi=[0,0]);const rs=Dt.metrics.isDoubleResolution?2:1,ws=(Dt.metrics.left-dn)*Dt.scale-Hi+Gi[0],Ys=(-Dt.metrics.top-dn)*Dt.scale+Gi[1],Zr=ws+vt.w/rs*Dt.scale/Hn,bi=Ys+vt.h/rs*Dt.scale/Hn,Di=new W(ws,Ys),Ti=new W(Zr,Ys),ks=new W(ws,bi),Ii=new W(Zr,bi);if(Or){const Li=new W(-Hi,Hi-Vc),Jn=-Math.PI/2,Zi=zi/2-Hi,ds=new W(5-Vc-Zi,-(Dt.imageName?Zi:0)),Pi=new W(...Bi);Di._rotateAround(Jn,Li)._add(ds)._add(Pi),Ti._rotateAround(Jn,Li)._add(ds)._add(Pi),ks._rotateAround(Jn,Li)._add(ds)._add(Pi),Ii._rotateAround(Jn,Li)._add(ds)._add(Pi)}if(Rt){const Li=Math.sin(Rt),Jn=Math.cos(Rt),Zi=[Jn,-Li,Li,Jn];Di._matMult(Zi),Ti._matMult(Zi),ks._matMult(Zi),Ii._matMult(Zi)}const Wi=new W(0,0),Cs=new W(0,0);Et.push({tl:Di,tr:Ti,bl:ks,br:Ii,tex:vt,writingMode:De.writingMode,glyphOffset:js,sectionIndex:Dt.sectionIndex,isSDF:rn,pixelOffsetTL:Wi,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}return Et}(0,l,T,v,N,E,f,s.allowVerticalPlacement),ve=s.textSizeData;let be=null;ve.kind==="source"?(be=[ol*v.layout.get("text-size").evaluate(E,{})],be[0]>Oc&&It(`${s.layerIds[0]}: Value for "text-size" is >= ${zu}. Reduce your "text-size".`)):ve.kind==="composite"&&(be=[ol*Q.compositeTextSizes[0].evaluate(E,{},ee),ol*Q.compositeTextSizes[1].evaluate(E,{},ee)],(be[0]>Oc||be[1]>Oc)&&It(`${s.layerIds[0]}: Value for "text-size" is >= ${zu}. Reduce your "text-size".`)),s.addSymbols(s.text,ce,be,T,N,E,V,n,M.lineStartIndex,M.lineLength,Y,ee);for(const Me of F)H[Me]=s.text.placedSymbolArray.length-1;return 4*ce.length}function tb(s){for(const n in s)return s[n];return null}function t_(s,n,l,f){const v=s.compareText;if(n in v){const N=v[n];for(let E=N.length-1;E>=0;E--)if(f.dist(N[E])<l)return!0}else v[n]=[];return v[n].push(f),!1}const nb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _m{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const N=nb[15&f];if(!N)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new _m(T,E,N,n)}constructor(n,l=64,f=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const N=nb.indexOf(this.ArrayType),E=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(N<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+M,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+E+T+M),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+M,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+N]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=l,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:N,coords:E,nodeSize:T}=this,M=[0,N.length-1,0],V=[];for(;M.length;){const F=M.pop()||0,H=M.pop()||0,Y=M.pop()||0;if(H-Y<=T){for(let ve=Y;ve<=H;ve++){const be=E[2*ve],Me=E[2*ve+1];be>=n&&be<=f&&Me>=l&&Me<=v&&V.push(N[ve])}continue}const Q=Y+H>>1,ee=E[2*Q],ce=E[2*Q+1];ee>=n&&ee<=f&&ce>=l&&ce<=v&&V.push(N[Q]),(F===0?n<=ee:l<=ce)&&(M.push(Y),M.push(Q-1),M.push(1-F)),(F===0?f>=ee:v>=ce)&&(M.push(Q+1),M.push(H),M.push(1-F))}return V}within(n,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:N,nodeSize:E}=this,T=[0,v.length-1,0],M=[],V=f*f;for(;T.length;){const F=T.pop()||0,H=T.pop()||0,Y=T.pop()||0;if(H-Y<=E){for(let ve=Y;ve<=H;ve++)Nm(N[2*ve],N[2*ve+1],n,l)<=V&&M.push(v[ve]);continue}const Q=Y+H>>1,ee=N[2*Q],ce=N[2*Q+1];Nm(ee,ce,n,l)<=V&&M.push(v[Q]),(F===0?n-f<=ee:l-f<=ce)&&(T.push(Y),T.push(Q-1),T.push(1-F)),(F===0?n+f>=ee:l+f>=ce)&&(T.push(Q+1),T.push(H),T.push(1-F))}return M}}function wm(s,n,l,f,v,N){if(v-f<=l)return;const E=f+v>>1;rb(s,n,E,f,v,N),wm(s,n,l,f,E-1,1-N),wm(s,n,l,E+1,v,1-N)}function rb(s,n,l,f,v,N){for(;v>f;){if(v-f>600){const V=v-f+1,F=l-f+1,H=Math.log(V),Y=.5*Math.exp(2*H/3),Q=.5*Math.sqrt(H*Y*(V-Y)/V)*(F-V/2<0?-1:1);rb(s,n,l,Math.max(f,Math.floor(l-F*Y/V+Q)),Math.min(v,Math.floor(l+(V-F)*Y/V+Q)),N)}const E=n[2*l+N];let T=f,M=v;for(ef(s,n,f,l),n[2*v+N]>E&&ef(s,n,f,v);T<M;){for(ef(s,n,T,M),T++,M--;n[2*T+N]<E;)T++;for(;n[2*M+N]>E;)M--}n[2*f+N]===E?ef(s,n,f,M):(M++,ef(s,n,M,v)),M<=l&&(f=M+1),l<=M&&(v=M-1)}}function ef(s,n,l,f){Cm(s,l,f),Cm(n,2*l,2*f),Cm(n,2*l+1,2*f+1)}function Cm(s,n,l){const f=s[n];s[n]=s[l],s[l]=f}function Nm(s,n,l,f){const v=s-l,N=n-f;return v*v+N*N}var Ng;u.bh=void 0,(Ng=u.bh||(u.bh={})).create="create",Ng.load="load",Ng.fullLoad="fullLoad";let Sm=null,tf=[];const Sg=1e3/60,Eg="loadTime",Dg="fullLoadTime",Gd={mark(s){performance.mark(s)},frame(s){const n=s;Sm!=null&&tf.push(n-Sm),Sm=n},clearMetrics(){Sm=null,tf=[],performance.clearMeasures(Eg),performance.clearMeasures(Dg);for(const s in u.bh)performance.clearMarks(u.bh[s])},getPerformanceMetrics(){performance.measure(Eg,u.bh.create,u.bh.load),performance.measure(Dg,u.bh.create,u.bh.fullLoad);const s=performance.getEntriesByName(Eg)[0].duration,n=performance.getEntriesByName(Dg)[0].duration,l=tf.length,f=1/(tf.reduce((N,E)=>N+E,0)/l/1e3),v=tf.filter(N=>N>Sg).reduce((N,E)=>N+(E-Sg)/Sg,0);return{loadTime:s,fullLoadTime:n,fps:f,percentDroppedFrames:v/(l+v)*100,totalFrames:l}}};u.$=function(s,n,l){var f,v,N,E,T,M,V,F,H,Y,Q,ee,ce=l[0],ve=l[1],be=l[2];return n===s?(s[12]=n[0]*ce+n[4]*ve+n[8]*be+n[12],s[13]=n[1]*ce+n[5]*ve+n[9]*be+n[13],s[14]=n[2]*ce+n[6]*ve+n[10]*be+n[14],s[15]=n[3]*ce+n[7]*ve+n[11]*be+n[15]):(v=n[1],N=n[2],E=n[3],T=n[4],M=n[5],V=n[6],F=n[7],H=n[8],Y=n[9],Q=n[10],ee=n[11],s[0]=f=n[0],s[1]=v,s[2]=N,s[3]=E,s[4]=T,s[5]=M,s[6]=V,s[7]=F,s[8]=H,s[9]=Y,s[10]=Q,s[11]=ee,s[12]=f*ce+T*ve+H*be+n[12],s[13]=v*ce+M*ve+Y*be+n[13],s[14]=N*ce+V*ve+Q*be+n[14],s[15]=E*ce+F*ve+ee*be+n[15]),s},u.A=Pn,u.B=es,u.C=class{constructor(s,n,l){this.receive=f=>{const v=f.data,N=v.id;if(N&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[N];const E=this.cancelCallbacks[N];delete this.cancelCallbacks[N],E&&E()}else at()||v.mustQueue?(this.tasks[N]=v,this.taskQueue.push(N),this.invoker.trigger()):this.processTask(N,v)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),v=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(f,v)},this.target=s,this.parent=n,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Uy(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=at()?s:window}send(s,n,l,f,v=!1){const N=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[N]=l);const E=[],T={id:N,type:s,hasCallback:!!l,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:Yo(n,E)};return this.target.postMessage(T,{transfer:E}),{cancel:()=>{l&&delete this.callbacks[N],this.target.postMessage({id:N,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(n.error?l(Sc(n.error)):l(null,Sc(n.data)))}else{let l=!1;const f=[],v=n.hasCallback?(T,M)=>{l=!0,delete this.cancelCallbacks[s];const V={id:s,type:"<response>",sourceMapId:this.mapId,error:T?Yo(T):null,data:Yo(M,f)};this.target.postMessage(V,{transfer:f})}:T=>{l=!0};let N=null;const E=Sc(n.data);if(this.parent[n.type])N=this.parent[n.type](n.sourceMapId,E,v);else if("getWorkerSource"in this.parent){const T=n.type.split(".");N=this.parent.getWorkerSource(n.sourceMapId,T[0],E.source)[T[1]](E,v)}else v(new Error(`Could not find function ${n.type}`));!l&&N&&N.cancel&&(this.cancelCallbacks[s]=N.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.D=cn,u.E=ii,u.F=function(s,n){const l={};for(let f=0;f<n.length;f++){const v=n[f];v in s&&(l[v]=s[v])}return l},u.G=mg,u.H=pg,u.I=um,u.J=Ce,u.K=_e,u.L=lo,u.M=Bn,u.N=Ri,u.O=Ta,u.P=W,u.Q=Ir,u.R=na,u.S=Nr,u.T=Tc,u.U=pm,u.V=class extends wa{},u.W=gm,u.X=function(s,n){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let f=0;f<s.length;f++){const v=window.document.createElement("source");$r(s[f])||(l.crossOrigin="Anonymous"),v.src=s[f],l.appendChild(v)}return{cancel:()=>{}}},u.Y=nt,u.Z=function(){var s=new Pn(16);return Pn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},u._=k,u.a=bn,u.a$=class extends X{},u.a0=function(s,n,l){var f=l[0],v=l[1],N=l[2];return s[0]=n[0]*f,s[1]=n[1]*f,s[2]=n[2]*f,s[3]=n[3]*f,s[4]=n[4]*v,s[5]=n[5]*v,s[6]=n[6]*v,s[7]=n[7]*v,s[8]=n[8]*N,s[9]=n[9]*N,s[10]=n[10]*N,s[11]=n[11]*N,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},u.a1=rl,u.a2=function(){return Tt++},u.a3=me,u.a4=Bd,u.a5=function(){Ws.isLoading()||Ws.isLoaded()||_u()!=="deferred"||Bf()},u.a6=wh,u.a7=Eu,u.a8=ti,u.a9=Zy,u.aA=Ec,u.aB=function(s){s=s.slice();const n=Object.create(null);for(let l=0;l<s.length;l++)n[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=ir(s[l],n[s[l].ref]));return s},u.aC=function(s){if(s.type==="custom")return new W0(s);switch(s.type){case"background":return new q0(s);case"circle":return new Ed(s);case"fill":return new om(s);case"fill-extrusion":return new Kp(s);case"heatmap":return new Vp(s);case"hillshade":return new zp(s);case"line":return new Ic(s);case"raster":return new G0(s);case"symbol":return new Yh(s)}},u.aD=ft,u.aE=function(s,n){if(!s)return[{command:Rn.setStyle,args:[n]}];let l=[];try{if(!Vn(s.version,n.version))return[{command:Rn.setStyle,args:[n]}];Vn(s.center,n.center)||l.push({command:Rn.setCenter,args:[n.center]}),Vn(s.zoom,n.zoom)||l.push({command:Rn.setZoom,args:[n.zoom]}),Vn(s.bearing,n.bearing)||l.push({command:Rn.setBearing,args:[n.bearing]}),Vn(s.pitch,n.pitch)||l.push({command:Rn.setPitch,args:[n.pitch]}),Vn(s.sprite,n.sprite)||l.push({command:Rn.setSprite,args:[n.sprite]}),Vn(s.glyphs,n.glyphs)||l.push({command:Rn.setGlyphs,args:[n.glyphs]}),Vn(s.transition,n.transition)||l.push({command:Rn.setTransition,args:[n.transition]}),Vn(s.light,n.light)||l.push({command:Rn.setLight,args:[n.light]});const f={},v=[];(function(E,T,M,V){let F;for(F in T=T||{},E=E||{})Object.prototype.hasOwnProperty.call(E,F)&&(Object.prototype.hasOwnProperty.call(T,F)||si(F,M,V));for(F in T)Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(E,F)?Vn(E[F],T[F])||(E[F].type==="geojson"&&T[F].type==="geojson"&&ms(E,T,F)?M.push({command:Rn.setGeoJSONSourceData,args:[F,T[F].data]}):qr(F,T,M,V)):yr(F,T,M))})(s.sources,n.sources,v,f);const N=[];s.layers&&s.layers.forEach(E=>{f[E.source]?l.push({command:Rn.removeLayer,args:[E.id]}):N.push(E)}),l=l.concat(v),function(E,T,M){T=T||[];const V=(E=E||[]).map(jt),F=T.map(jt),H=E.reduce(an,{}),Y=T.reduce(an,{}),Q=V.slice(),ee=Object.create(null);let ce,ve,be,Me,De,Le,qe;for(ce=0,ve=0;ce<V.length;ce++)be=V[ce],Object.prototype.hasOwnProperty.call(Y,be)?ve++:(M.push({command:Rn.removeLayer,args:[be]}),Q.splice(Q.indexOf(be,ve),1));for(ce=0,ve=0;ce<F.length;ce++)be=F[F.length-1-ce],Q[Q.length-1-ce]!==be&&(Object.prototype.hasOwnProperty.call(H,be)?(M.push({command:Rn.removeLayer,args:[be]}),Q.splice(Q.lastIndexOf(be,Q.length-ve),1)):ve++,Le=Q[Q.length-ce],M.push({command:Rn.addLayer,args:[Y[be],Le]}),Q.splice(Q.length-ce,0,be),ee[be]=!0);for(ce=0;ce<F.length;ce++)if(be=F[ce],Me=H[be],De=Y[be],!ee[be]&&!Vn(Me,De))if(Vn(Me.source,De.source)&&Vn(Me["source-layer"],De["source-layer"])&&Vn(Me.type,De.type)){for(qe in Ui(Me.layout,De.layout,M,be,null,Rn.setLayoutProperty),Ui(Me.paint,De.paint,M,be,null,Rn.setPaintProperty),Vn(Me.filter,De.filter)||M.push({command:Rn.setFilter,args:[be,De.filter]}),Vn(Me.minzoom,De.minzoom)&&Vn(Me.maxzoom,De.maxzoom)||M.push({command:Rn.setLayerZoomRange,args:[be,De.minzoom,De.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?Ui(Me[qe],De[qe],M,be,qe.slice(6),Rn.setPaintProperty):Vn(Me[qe],De[qe])||M.push({command:Rn.setLayerProperty,args:[be,qe,De[qe]]}));for(qe in De)Object.prototype.hasOwnProperty.call(De,qe)&&!Object.prototype.hasOwnProperty.call(Me,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?Ui(Me[qe],De[qe],M,be,qe.slice(6),Rn.setPaintProperty):Vn(Me[qe],De[qe])||M.push({command:Rn.setLayerProperty,args:[be,qe,De[qe]]}))}else M.push({command:Rn.removeLayer,args:[be]}),Le=Q[Q.lastIndexOf(be)+1],M.push({command:Rn.addLayer,args:[De,Le]})}(N,n.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:Rn.setStyle,args:[n]}]}return l},u.aF=function(s){const n=[],l=s.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},u.aG=function s(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let f=0;f<n.length;f++)if(!s(n[f],l[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(const f in n)if(!s(n[f],l[f]))return!1;return!0}return n===l},u.aH=pt,u.aI=Yt,u.aJ=Dc,u.aK=function(s){return s({pluginStatus:Ts,pluginURL:Qo}),Dc.on("pluginStateChange",s),s},u.aL=class extends zl{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},u.aM=Mi,u.aN=class extends zl{constructor(s,n){super(s,n),this.current=Tp}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},u.aO=$f,u.aP=class extends zl{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},u.aQ=class extends zl{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},u.aR=qf,u.aS=function(s,n,l,f,v,N,E){var T=1/(n-l),M=1/(f-v),V=1/(N-E);return s[0]=-2*T,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*M,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*V,s[11]=0,s[12]=(n+l)*T,s[13]=(v+f)*M,s[14]=(E+N)*V,s[15]=1,s},u.aT=xr,u.aU=il,u.aV=class extends m{},u.aW=k0,u.aX=class extends w{},u.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},u.aZ=Jf,u.a_=Nt,u.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,v,N)=>{const E=v||N;return n[f]=!E||E.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},u.ab=function(s,n){const l=[];for(const f in s)f in n||l.push(f);return l},u.ac=function(s){if(Zt==null){const n=s.navigator?s.navigator.userAgent:null;Zt=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Zt},u.ad=Je,u.ae=function(s,n,l){var f=Math.sin(l),v=Math.cos(l),N=n[0],E=n[1],T=n[2],M=n[3],V=n[4],F=n[5],H=n[6],Y=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=N*v+V*f,s[1]=E*v+F*f,s[2]=T*v+H*f,s[3]=M*v+Y*f,s[4]=V*v-N*f,s[5]=F*v-E*f,s[6]=H*v-T*f,s[7]=Y*v-M*f,s},u.af=function(s){var n=new Pn(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},u.ag=Rc,u.ah=function(s,n){let l=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:v,minZoom:N,maxZoom:E}=s,T=v?Je(ts.interpolationFactor(v,n,N,E),0,1):0;s.kind==="camera"?f=es.number(s.minSize,s.maxSize,T):l=T}return{uSizeT:l,uSize:f}},u.aj=function(s,{uSize:n,uSizeT:l},{lowerSize:f,upperSize:v}){return s.kind==="source"?f/ol:s.kind==="composite"?es.number(f/ol,v/ol,l):n},u.ak=cg,u.al=function(s,n,l,f){const v=n.y-s.y,N=n.x-s.x,E=f.y-l.y,T=f.x-l.x,M=E*N-T*v;if(M===0)return null;const V=(T*(s.y-l.y)-E*(s.x-l.x))/M;return new W(s.x+V*N,s.y+V*v)},u.am=Qy,u.an=Ap,u.ao=Mc,u.ap=zi,u.ar=lg,u.as=function(s,n){var l=n[0],f=n[1],v=n[2],N=n[3],E=n[4],T=n[5],M=n[6],V=n[7],F=n[8],H=n[9],Y=n[10],Q=n[11],ee=n[12],ce=n[13],ve=n[14],be=n[15],Me=l*T-f*E,De=l*M-v*E,Le=l*V-N*E,qe=f*M-v*T,st=f*V-N*T,Ot=v*V-N*M,Jt=F*ce-H*ee,Bt=F*ve-Y*ee,Rt=F*be-Q*ee,Et=H*ve-Y*ce,_t=H*be-Q*ce,Dt=Y*be-Q*ve,vt=Me*Dt-De*_t+Le*Et+qe*Rt-st*Bt+Ot*Jt;return vt?(s[0]=(T*Dt-M*_t+V*Et)*(vt=1/vt),s[1]=(v*_t-f*Dt-N*Et)*vt,s[2]=(ce*Ot-ve*st+be*qe)*vt,s[3]=(Y*st-H*Ot-Q*qe)*vt,s[4]=(M*Rt-E*Dt-V*Bt)*vt,s[5]=(l*Dt-v*Rt+N*Bt)*vt,s[6]=(ve*Le-ee*Ot-be*De)*vt,s[7]=(F*Ot-Y*Le+Q*De)*vt,s[8]=(E*_t-T*Rt+V*Jt)*vt,s[9]=(f*Rt-l*_t-N*Jt)*vt,s[10]=(ee*st-ce*Le+be*Me)*vt,s[11]=(H*Le-F*st-Q*Me)*vt,s[12]=(T*Bt-E*Et-M*Jt)*vt,s[13]=(l*Et-f*Bt+v*Jt)*vt,s[14]=(ce*De-ee*qe-ve*Me)*vt,s[15]=(F*qe-H*De+Y*Me)*vt,s):null},u.at=xm,u.au=hm,u.av=_m,u.aw=function(){const s={},n=We.$version;for(const l in We.$root){const f=We.$root[l];if(f.required){let v=null;v=l==="version"?n:f.type==="array"?[]:{},v!=null&&(s[l]=v)}}return s},u.ax=Rn,u.ay=jh,u.az=zt,u.b=function(s,n){const l=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(l).then(f=>{n(null,f)}).catch(f=>{n(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.b0=gr,u.b1=function(s,n){var l=s[0],f=s[1],v=s[2],N=s[3],E=s[4],T=s[5],M=s[6],V=s[7],F=s[8],H=s[9],Y=s[10],Q=s[11],ee=s[12],ce=s[13],ve=s[14],be=s[15],Me=n[0],De=n[1],Le=n[2],qe=n[3],st=n[4],Ot=n[5],Jt=n[6],Bt=n[7],Rt=n[8],Et=n[9],_t=n[10],Dt=n[11],vt=n[12],dn=n[13],rn=n[14],Hn=n[15];return Math.abs(l-Me)<=Dr*Math.max(1,Math.abs(l),Math.abs(Me))&&Math.abs(f-De)<=Dr*Math.max(1,Math.abs(f),Math.abs(De))&&Math.abs(v-Le)<=Dr*Math.max(1,Math.abs(v),Math.abs(Le))&&Math.abs(N-qe)<=Dr*Math.max(1,Math.abs(N),Math.abs(qe))&&Math.abs(E-st)<=Dr*Math.max(1,Math.abs(E),Math.abs(st))&&Math.abs(T-Ot)<=Dr*Math.max(1,Math.abs(T),Math.abs(Ot))&&Math.abs(M-Jt)<=Dr*Math.max(1,Math.abs(M),Math.abs(Jt))&&Math.abs(V-Bt)<=Dr*Math.max(1,Math.abs(V),Math.abs(Bt))&&Math.abs(F-Rt)<=Dr*Math.max(1,Math.abs(F),Math.abs(Rt))&&Math.abs(H-Et)<=Dr*Math.max(1,Math.abs(H),Math.abs(Et))&&Math.abs(Y-_t)<=Dr*Math.max(1,Math.abs(Y),Math.abs(_t))&&Math.abs(Q-Dt)<=Dr*Math.max(1,Math.abs(Q),Math.abs(Dt))&&Math.abs(ee-vt)<=Dr*Math.max(1,Math.abs(ee),Math.abs(vt))&&Math.abs(ce-dn)<=Dr*Math.max(1,Math.abs(ce),Math.abs(dn))&&Math.abs(ve-rn)<=Dr*Math.max(1,Math.abs(ve),Math.abs(rn))&&Math.abs(be-Hn)<=Dr*Math.max(1,Math.abs(be),Math.abs(Hn))},u.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},u.b3=function(s,n,l){return s[0]=n[0]*l[0],s[1]=n[1]*l[1],s[2]=n[2]*l[2],s[3]=n[3]*l[3],s},u.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},u.b5=tt,u.b6=yg,u.b7=qy,u.b8=function(s,n,l,f,v){var N,E=1/Math.tan(n/2);return s[0]=E/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,v!=null&&v!==1/0?(s[10]=(v+f)*(N=1/(f-v)),s[14]=2*v*f*N):(s[10]=-1,s[14]=-2*f),s},u.b9=function(s,n,l){var f=Math.sin(l),v=Math.cos(l),N=n[4],E=n[5],T=n[6],M=n[7],V=n[8],F=n[9],H=n[10],Y=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=N*v+V*f,s[5]=E*v+F*f,s[6]=T*v+H*f,s[7]=M*v+Y*f,s[8]=V*v-N*f,s[9]=F*v-E*f,s[10]=H*v-T*f,s[11]=Y*v-M*f,s},u.bA=O,u.bB=Ad,u.bC=ya,u.bD=Ws,u.ba=Ue,u.bb=Oe,u.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},u.bd=class extends Cn{},u.be=Xh,u.bf=gg,u.bg=Gd,u.bi=Ft,u.bj=function(s,n,l=!1){if(Ts===Xo||Ts===Jo||Ts===bd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qo=nn.resolveURL(s),Ts=Xo,Rh=n,xd(),l||Bf()},u.bk=_u,u.bl=function(s,n){const l={};for(let v=0;v<s.length;v++){const N=n&&n[s[v].id]||mu(s[v]);n&&(n[s[v].id]=N);let E=l[N];E||(E=l[N]=[]),E.push(s[v])}const f=[];for(const v in l)f.push(l[v]);return f},u.bm=Gt,u.bn=Wy,u.bo=Ky,u.bp=ag,u.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Ri/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],l=n.layout,f=n._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new ti(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new ti(V),s.canonical),f["text-size"].possiblyEvaluate(new ti(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:F}=s.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new ti(V),s.canonical),f["icon-size"].possiblyEvaluate(new ti(F),s.canonical)]}const N=l.get("text-line-height")*zi,E=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",T=l.get("text-keep-upright"),M=l.get("text-size");for(const V of s.bucket.features){const F=l.get("text-font").evaluate(V,{},s.canonical).join(","),H=M.evaluate(V,{},s.canonical),Y=v.layoutTextSize.evaluate(V,{},s.canonical),Q=v.layoutIconSize.evaluate(V,{},s.canonical),ee={horizontal:{},vertical:void 0},ce=V.text;let ve,be=[0,0];if(ce){const Le=ce.toString(),qe=l.get("text-letter-spacing").evaluate(V,{},s.canonical)*zi,st=kh(Le)?qe:0,Ot=l.get("text-anchor").evaluate(V,{},s.canonical),Jt=Hd(n,V,s.canonical);if(!Jt){const Dt=l.get("text-radial-offset").evaluate(V,{},s.canonical);be=Dt?Pa(Ot,[Dt*zi,wg]):l.get("text-offset").evaluate(V,{},s.canonical).map(vt=>vt*zi)}let Bt=E?"center":l.get("text-justify").evaluate(V,{},s.canonical);const Rt=l.get("symbol-placement"),Et=Rt==="point"?l.get("text-max-width").evaluate(V,{},s.canonical)*zi:0,_t=()=>{s.bucket.allowVerticalPlacement&&Il(Le)&&(ee.vertical=Kl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Ot,"left",st,be,u.ai.vertical,!0,Rt,Y,H))};if(!E&&Jt){const Dt=new Set;if(Bt==="auto")for(let dn=0;dn<Jt.values.length;dn+=2)Dt.add(xm(Jt.values[dn]));else Dt.add(Bt);let vt=!1;for(const dn of Dt)if(!ee.horizontal[dn])if(vt)ee.horizontal[dn]=ee.horizontal[0];else{const rn=Kl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,"center",dn,st,be,u.ai.horizontal,!1,Rt,Y,H);rn&&(ee.horizontal[dn]=rn,vt=rn.positionedLines.length===1)}_t()}else{Bt==="auto"&&(Bt=xm(Ot));const Dt=Kl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Ot,Bt,st,be,u.ai.horizontal,!1,Rt,Y,H);Dt&&(ee.horizontal[Bt]=Dt),_t(),Il(Le)&&E&&T&&(ee.vertical=Kl(ce,s.glyphMap,s.glyphPositions,s.imagePositions,F,Et,N,Ot,Bt,st,be,u.ai.vertical,!1,Rt,Y,H))}}let Me=!1;if(V.icon&&V.icon.name){const Le=s.imageMap[V.icon.name];Le&&(ve=B0(s.imagePositions[V.icon.name],l.get("icon-offset").evaluate(V,{},s.canonical),l.get("icon-anchor").evaluate(V,{},s.canonical)),Me=!!Le.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Me:s.bucket.sdfIcons!==Me&&It("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const De=tb(ee.horizontal)||ee.vertical;s.bucket.iconsInText=!!De&&De.iconsInText,(De||ve)&&e_(s.bucket,V,ee,ve,s.imageMap,v,Y,Q,be,Me,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},u.br=lm,u.bs=Uh,u.bt=Ua,u.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},u.bv=rg,u.bw=sl,u.bx=function(s,n,l,f,v){return k(this,void 0,void 0,function*(){if(_e())try{return yield Bn(s,n,l,f,v)}catch{}return function(N,E,T,M,V){const F=N.width,H=N.height;An&&wt||(An=new OffscreenCanvas(F,H),wt=An.getContext("2d",{willReadFrequently:!0})),An.width=F,An.height=H,wt.drawImage(N,0,0,F,H);const Y=wt.getImageData(E,T,M,V);return wt.clearRect(0,0,F,H),Y.data}(s,n,l,f,v)})},u.by=Gy,u.bz=A,u.c=yn,u.d=function(s,n){const l=new Image;l.onload=()=>{n(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=ln})},l.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});l.src=s.byteLength?URL.createObjectURL(f):ln},u.e=ut,u.f=function(s,n){return fn(ut(s,{type:"json"}),n)},u.g=mn,u.h=nn,u.i=at,u.j=Rr,u.k=fi,u.l=Wn,u.m=fn,u.n=function(s){return new rg(s).readFields(O0,[])},u.o=function(s,n,l){if(!s.length)return l(null,[]);let f=s.length;const v=new Array(s.length);let N=null;s.forEach((E,T)=>{n(E,(M,V)=>{M&&(N=M),v[T]=V,--f==0&&l(N,v)})})},u.p=Ay,u.q=Du,u.r=Ai,u.s=$r,u.t=Vf,u.u=Vt,u.v=We,u.w=It,u.x=ns,u.y=Po,u.z=function([s,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(l),y:s*Math.sin(n)*Math.sin(l),z:s*Math.cos(l)}}}),S(["./shared"],function(u){class k{constructor(I){this.keyCache={},I&&this.replace(I)}replace(I){this._layerConfigs={},this._layers={},this.update(I,[])}update(I,G){for(const se of I){this._layerConfigs[se.id]=se;const he=this._layers[se.id]=u.aC(se);he._featureFilter=u.a6(he.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of G)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const J=u.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of J){const he=se.map(ne=>this._layers[ne.id]),Ne=he[0];if(Ne.visibility==="none")continue;const xe=Ne.source||"";let ge=this.familiesBySource[xe];ge||(ge=this.familiesBySource[xe]={});const Te=Ne.sourceLayer||"_geojsonTileLayer";let Qe=ge[Te];Qe||(Qe=ge[Te]=[]),Qe.push(he)}}}class A{constructor(I){const G={},J=[];for(const xe in I){const ge=I[xe],Te=G[xe]={};for(const Qe in ge){const ne=ge[+Qe];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const Ee={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};J.push(Ee),Te[Qe]={rect:Ee,metrics:ne.metrics}}}const{w:se,h:he}=u.p(J),Ne=new u.q({width:se||1,height:he||1});for(const xe in I){const ge=I[xe];for(const Te in ge){const Qe=ge[+Te];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const ne=G[xe][Te].rect;u.q.copy(Qe.bitmap,Ne,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Qe.bitmap)}}this.image=Ne,this.positions=G}}u.bm("GlyphAtlas",A);class O{constructor(I){this.tileID=new u.O(I.tileID.overscaledZ,I.tileID.wrap,I.tileID.canonical.z,I.tileID.canonical.x,I.tileID.canonical.y),this.uid=I.uid,this.zoom=I.zoom,this.pixelRatio=I.pixelRatio,this.tileSize=I.tileSize,this.source=I.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=I.showCollisionBoxes,this.collectResourceTiming=!!I.collectResourceTiming,this.returnDependencies=!!I.returnDependencies,this.promoteId=I.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(I,G,J,se,he){this.status="parsing",this.data=I,this.collisionBoxArray=new u.a3;const Ne=new u.bn(Object.keys(I.layers).sort()),xe=new u.bo(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const ge={},Te={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Qe=G.familiesBySource[this.source];for(const Ct in Qe){const qt=I.layers[Ct];if(!qt)continue;qt.version===1&&u.w(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const En=Ne.encode(Ct),_n=[];for(let qn=0;qn<qt.length;qn++){const Zn=qt.feature(qn),Yr=xe.getId(Zn,Ct);_n.push({feature:Zn,id:Yr,index:qn,sourceLayerIndex:En})}for(const qn of Qe[Ct]){const Zn=qn[0];Zn.source!==this.source&&u.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.minzoom&&this.zoom<Math.floor(Zn.minzoom)||Zn.maxzoom&&this.zoom>=Zn.maxzoom||Zn.visibility!=="none"&&(B(qn,this.zoom,J),(ge[Zn.id]=Zn.createBucket({index:xe.bucketLayerIDs.length,layers:qn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:En,sourceID:this.source})).populate(_n,Te,this.tileID.canonical),xe.bucketLayerIDs.push(qn.map(Yr=>Yr.id)))}}let ne,Ee,te,ke;const Be=u.aH(Te.glyphDependencies,Ct=>Object.keys(Ct).map(Number));this.inFlightDependencies.forEach(Ct=>Ct==null?void 0:Ct.cancel()),this.inFlightDependencies=[];const Ze=++this.dependencySentinel;Object.keys(Be).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:Be,source:this.source,tileID:this.tileID,type:"glyphs"},(Ct,qt)=>{Ze===this.dependencySentinel&&(ne||(ne=Ct,Ee=qt,Ut.call(this)))})):Ee={};const ct=Object.keys(Te.iconDependencies);ct.length?this.inFlightDependencies.push(se.send("getImages",{icons:ct,source:this.source,tileID:this.tileID,type:"icons"},(Ct,qt)=>{Ze===this.dependencySentinel&&(ne||(ne=Ct,te=qt,Ut.call(this)))})):te={};const mt=Object.keys(Te.patternDependencies);function Ut(){if(ne)return he(ne);if(Ee&&te&&ke){const Ct=new A(Ee),qt=new u.bp(te,ke);for(const En in ge){const _n=ge[En];_n instanceof u.a4?(B(_n.layers,this.zoom,J),u.bq({bucket:_n,glyphMap:Ee,glyphPositions:Ct.positions,imageMap:te,imagePositions:qt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):_n.hasPattern&&(_n instanceof u.br||_n instanceof u.bs||_n instanceof u.bt)&&(B(_n.layers,this.zoom,J),_n.addFeatures(Te,this.tileID.canonical,qt.patternPositions))}this.status="done",he(null,{buckets:Object.values(ge).filter(En=>!En.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:qt,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?te:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}mt.length?this.inFlightDependencies.push(se.send("getImages",{icons:mt,source:this.source,tileID:this.tileID,type:"patterns"},(Ct,qt)=>{Ze===this.dependencySentinel&&(ne||(ne=Ct,ke=qt,Ut.call(this)))})):ke={},Ut.call(this)}}function B(fe,I,G){const J=new u.a8(I);for(const se of fe)se.recalculate(J,G)}function W(fe,I){const G=u.l(fe.request,(J,se,he,Ne)=>{if(J)I(J);else if(se)try{const xe=new u.bw.VectorTile(new u.bv(se));I(null,{vectorTile:xe,rawData:se,cacheControl:he,expires:Ne})}catch(xe){const ge=new Uint8Array(se);let Te=`Unable to parse the tile at ${fe.request.url}, `;Te+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${xe.messge}`,I(new Error(Te))}});return()=>{G.cancel(),I()}}class ie{constructor(I,G,J,se){this.actor=I,this.layerIndex=G,this.availableImages=J,this.loadVectorData=se||W,this.fetching={},this.loading={},this.loaded={}}loadTile(I,G){const J=I.uid;this.loading||(this.loading={});const se=!!(I&&I.request&&I.request.collectResourceTiming)&&new u.bu(I.request),he=this.loading[J]=new O(I);he.abort=this.loadVectorData(I,(Ne,xe)=>{if(delete this.loading[J],Ne||!xe)return he.status="done",this.loaded[J]=he,G(Ne);const ge=xe.rawData,Te={};xe.expires&&(Te.expires=xe.expires),xe.cacheControl&&(Te.cacheControl=xe.cacheControl);const Qe={};if(se){const ne=se.finish();ne&&(Qe.resourceTiming=JSON.parse(JSON.stringify(ne)))}he.vectorTile=xe.vectorTile,he.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,Ee)=>{if(delete this.fetching[J],ne||!Ee)return G(ne);G(null,u.e({rawTileData:ge.slice(0)},Ee,Te,Qe))}),this.loaded=this.loaded||{},this.loaded[J]=he,this.fetching[J]={rawTileData:ge,cacheControl:Te,resourceTiming:Qe}})}reloadTile(I,G){const J=this.loaded,se=I.uid;if(J&&J[se]){const he=J[se];he.showCollisionBoxes=I.showCollisionBoxes,he.status==="parsing"?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ne,xe)=>{if(Ne||!xe)return G(Ne,xe);let ge;if(this.fetching[se]){const{rawTileData:Te,cacheControl:Qe,resourceTiming:ne}=this.fetching[se];delete this.fetching[se],ge=u.e({rawTileData:Te.slice(0)},xe,Qe,ne)}else ge=xe;G(null,ge)}):he.status==="done"&&(he.vectorTile?he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(I,G){const J=this.loading,se=I.uid;J&&J[se]&&J[se].abort&&(J[se].abort(),delete J[se]),G()}removeTile(I,G){const J=this.loaded,se=I.uid;J&&J[se]&&delete J[se],G()}}class pe{constructor(){this.loaded={}}loadTile(I,G){return u._(this,void 0,void 0,function*(){const{uid:J,encoding:se,rawImageData:he,redFactor:Ne,greenFactor:xe,blueFactor:ge,baseShift:Te}=I,Qe=he.width+2,ne=he.height+2,Ee=u.a(he)?new u.R({width:Qe,height:ne},yield u.bx(he,-1,-1,Qe,ne)):he,te=new u.by(J,Ee,se,Ne,xe,ge,Te);this.loaded=this.loaded||{},this.loaded[J]=te,G(null,te)})}removeTile(I){const G=this.loaded,J=I.uid;G&&G[J]&&delete G[J]}}function Ve(fe,I){if(fe.length!==0){Pe(fe[0],I);for(var G=1;G<fe.length;G++)Pe(fe[G],!I)}}function Pe(fe,I){for(var G=0,J=0,se=0,he=fe.length,Ne=he-1;se<he;Ne=se++){var xe=(fe[se][0]-fe[Ne][0])*(fe[Ne][1]+fe[se][1]),ge=G+xe;J+=Math.abs(G)>=Math.abs(xe)?G-ge+xe:xe-ge+G,G=ge}G+J>=0!=!!I&&fe.reverse()}var Se=u.bz(function fe(I,G){var J,se=I&&I.type;if(se==="FeatureCollection")for(J=0;J<I.features.length;J++)fe(I.features[J],G);else if(se==="GeometryCollection")for(J=0;J<I.geometries.length;J++)fe(I.geometries[J],G);else if(se==="Feature")fe(I.geometry,G);else if(se==="Polygon")Ve(I.coordinates,G);else if(se==="MultiPolygon")for(J=0;J<I.coordinates.length;J++)Ve(I.coordinates[J],G);return I});const Ce=u.bw.VectorTileFeature.prototype.toGeoJSON;var _e={exports:{}},Ue=u.bA,Oe=u.bw.VectorTileFeature,Je=tt;function tt(fe,I){this.options=I||{},this.features=fe,this.length=fe.length}function ut(fe,I){this.id=typeof fe.id=="number"?fe.id:void 0,this.type=fe.type,this.rawGeometry=fe.type===1?[fe.geometry]:fe.geometry,this.properties=fe.tags,this.extent=I||4096}tt.prototype.feature=function(fe){return new ut(this.features[fe],this.options.extent)},ut.prototype.loadGeometry=function(){var fe=this.rawGeometry;this.geometry=[];for(var I=0;I<fe.length;I++){for(var G=fe[I],J=[],se=0;se<G.length;se++)J.push(new Ue(G[se][0],G[se][1]));this.geometry.push(J)}return this.geometry},ut.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fe=this.geometry,I=1/0,G=-1/0,J=1/0,se=-1/0,he=0;he<fe.length;he++)for(var Ne=fe[he],xe=0;xe<Ne.length;xe++){var ge=Ne[xe];I=Math.min(I,ge.x),G=Math.max(G,ge.x),J=Math.min(J,ge.y),se=Math.max(se,ge.y)}return[I,J,G,se]},ut.prototype.toGeoJSON=Oe.prototype.toGeoJSON;var Tt=u.bB,pt=Je;function Yt(fe){var I=new Tt;return function(G,J){for(var se in G.layers)J.writeMessage(3,ft,G.layers[se])}(fe,I),I.finish()}function ft(fe,I){var G;I.writeVarintField(15,fe.version||1),I.writeStringField(1,fe.name||""),I.writeVarintField(5,fe.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<fe.length;G++)J.feature=fe.feature(G),I.writeMessage(2,bt,J);var se=J.keys;for(G=0;G<se.length;G++)I.writeStringField(3,se[G]);var he=J.values;for(G=0;G<he.length;G++)I.writeMessage(4,Zt,he[G])}function bt(fe,I){var G=fe.feature;G.id!==void 0&&I.writeVarintField(1,G.id),I.writeMessage(2,It,fe),I.writeVarintField(3,G.type),I.writeMessage(4,at,G)}function It(fe,I){var G=fe.feature,J=fe.keys,se=fe.values,he=fe.keycache,Ne=fe.valuecache;for(var xe in G.properties){var ge=G.properties[xe],Te=he[xe];if(ge!==null){Te===void 0&&(J.push(xe),he[xe]=Te=J.length-1),I.writeVarint(Te);var Qe=typeof ge;Qe!=="string"&&Qe!=="boolean"&&Qe!=="number"&&(ge=JSON.stringify(ge));var ne=Qe+":"+ge,Ee=Ne[ne];Ee===void 0&&(se.push(ge),Ne[ne]=Ee=se.length-1),I.writeVarint(Ee)}}}function Lt(fe,I){return(I<<3)+(7&fe)}function hn(fe){return fe<<1^fe>>31}function at(fe,I){for(var G=fe.loadGeometry(),J=fe.type,se=0,he=0,Ne=G.length,xe=0;xe<Ne;xe++){var ge=G[xe],Te=1;J===1&&(Te=ge.length),I.writeVarint(Lt(1,Te));for(var Qe=J===3?ge.length-1:ge.length,ne=0;ne<Qe;ne++){ne===1&&J!==1&&I.writeVarint(Lt(2,Qe-1));var Ee=ge[ne].x-se,te=ge[ne].y-he;I.writeVarint(hn(Ee)),I.writeVarint(hn(te)),se+=Ee,he+=te}J===3&&I.writeVarint(Lt(7,1))}}function Zt(fe,I){var G=typeof fe;G==="string"?I.writeStringField(1,fe):G==="boolean"?I.writeBooleanField(7,fe):G==="number"&&(fe%1!=0?I.writeDoubleField(3,fe):fe<0?I.writeSVarintField(6,fe):I.writeVarintField(5,fe))}_e.exports=Yt,_e.exports.fromVectorTileJs=Yt,_e.exports.fromGeojsonVt=function(fe,I){I=I||{};var G={};for(var J in fe)G[J]=new pt(fe[J].features,I),G[J].name=J,G[J].version=I.version,G[J].extent=I.extent;return Yt({layers:G})},_e.exports.GeoJSONWrapper=pt;var bn=u.bz(_e.exports);const ln={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fe=>fe},Bn=Math.fround||(An=new Float32Array(1),fe=>(An[0]=+fe,An[0]));var An;const wt=3,ze=5,Pt=6;class nn{constructor(I){this.options=Object.assign(Object.create(ln),I),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(I){const{log:G,minZoom:J,maxZoom:se}=this.options;G&&console.time("total time");const he=`prepare ${I.length} points`;G&&console.time(he),this.points=I;const Ne=[];for(let ge=0;ge<I.length;ge++){const Te=I[ge];if(!Te.geometry)continue;const[Qe,ne]=Te.geometry.coordinates,Ee=Bn(zt(Qe)),te=Bn(mn(ne));Ne.push(Ee,te,1/0,ge,-1,1),this.options.reduce&&Ne.push(0)}let xe=this.trees[se+1]=this._createTree(Ne);G&&console.timeEnd(he);for(let ge=se;ge>=J;ge--){const Te=+Date.now();xe=this.trees[ge]=this._createTree(this._cluster(xe,ge)),G&&console.log("z%d: %d clusters in %dms",ge,xe.numItems,+Date.now()-Te)}return G&&console.timeEnd("total time"),this}getClusters(I,G){let J=((I[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,I[1]));let he=I[2]===180?180:((I[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,I[3]));if(I[2]-I[0]>=360)J=-180,he=180;else if(J>he){const ne=this.getClusters([J,se,180,Ne],G),Ee=this.getClusters([-180,se,he,Ne],G);return ne.concat(Ee)}const xe=this.trees[this._limitZoom(G)],ge=xe.range(zt(J),mn(Ne),zt(he),mn(se)),Te=xe.data,Qe=[];for(const ne of ge){const Ee=this.stride*ne;Qe.push(Te[Ee+ze]>1?yn(Te,Ee,this.clusterProps):this.points[Te[Ee+wt]])}return Qe}getChildren(I){const G=this._getOriginId(I),J=this._getOriginZoom(I),se="No cluster with the specified id.",he=this.trees[J];if(!he)throw new Error(se);const Ne=he.data;if(G*this.stride>=Ne.length)throw new Error(se);const xe=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ge=he.within(Ne[G*this.stride],Ne[G*this.stride+1],xe),Te=[];for(const Qe of ge){const ne=Qe*this.stride;Ne[ne+4]===I&&Te.push(Ne[ne+ze]>1?yn(Ne,ne,this.clusterProps):this.points[Ne[ne+wt]])}if(Te.length===0)throw new Error(se);return Te}getLeaves(I,G,J){const se=[];return this._appendLeaves(se,I,G=G||10,J=J||0,0),se}getTile(I,G,J){const se=this.trees[this._limitZoom(I)],he=Math.pow(2,I),{extent:Ne,radius:xe}=this.options,ge=xe/Ne,Te=(J-ge)/he,Qe=(J+1+ge)/he,ne={features:[]};return this._addTileFeatures(se.range((G-ge)/he,Te,(G+1+ge)/he,Qe),se.data,G,J,he,ne),G===0&&this._addTileFeatures(se.range(1-ge/he,Te,1,Qe),se.data,he,J,he,ne),G===he-1&&this._addTileFeatures(se.range(0,Te,ge/he,Qe),se.data,-1,J,he,ne),ne.features.length?ne:null}getClusterExpansionZoom(I){let G=this._getOriginZoom(I)-1;for(;G<=this.options.maxZoom;){const J=this.getChildren(I);if(G++,J.length!==1)break;I=J[0].properties.cluster_id}return G}_appendLeaves(I,G,J,se,he){const Ne=this.getChildren(G);for(const xe of Ne){const ge=xe.properties;if(ge&&ge.cluster?he+ge.point_count<=se?he+=ge.point_count:he=this._appendLeaves(I,ge.cluster_id,J,se,he):he<se?he++:I.push(xe),I.length===J)break}return he}_createTree(I){const G=new u.av(I.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<I.length;J+=this.stride)G.add(I[J],I[J+1]);return G.finish(),G.data=I,G}_addTileFeatures(I,G,J,se,he,Ne){for(const xe of I){const ge=xe*this.stride,Te=G[ge+ze]>1;let Qe,ne,Ee;if(Te)Qe=Ft(G,ge,this.clusterProps),ne=G[ge],Ee=G[ge+1];else{const Be=this.points[G[ge+wt]];Qe=Be.properties;const[Ze,ct]=Be.geometry.coordinates;ne=zt(Ze),Ee=mn(ct)}const te={type:1,geometry:[[Math.round(this.options.extent*(ne*he-J)),Math.round(this.options.extent*(Ee*he-se))]],tags:Qe};let ke;ke=Te||this.options.generateId?G[ge+wt]:this.points[G[ge+wt]].id,ke!==void 0&&(te.id=ke),Ne.features.push(te)}}_limitZoom(I){return Math.max(this.options.minZoom,Math.min(Math.floor(+I),this.options.maxZoom+1))}_cluster(I,G){const{radius:J,extent:se,reduce:he,minPoints:Ne}=this.options,xe=J/(se*Math.pow(2,G)),ge=I.data,Te=[],Qe=this.stride;for(let ne=0;ne<ge.length;ne+=Qe){if(ge[ne+2]<=G)continue;ge[ne+2]=G;const Ee=ge[ne],te=ge[ne+1],ke=I.within(ge[ne],ge[ne+1],xe),Be=ge[ne+ze];let Ze=Be;for(const ct of ke){const mt=ct*Qe;ge[mt+2]>G&&(Ze+=ge[mt+ze])}if(Ze>Be&&Ze>=Ne){let ct,mt=Ee*Be,Ut=te*Be,Ct=-1;const qt=((ne/Qe|0)<<5)+(G+1)+this.points.length;for(const En of ke){const _n=En*Qe;if(ge[_n+2]<=G)continue;ge[_n+2]=G;const qn=ge[_n+ze];mt+=ge[_n]*qn,Ut+=ge[_n+1]*qn,ge[_n+4]=qt,he&&(ct||(ct=this._map(ge,ne,!0),Ct=this.clusterProps.length,this.clusterProps.push(ct)),he(ct,this._map(ge,_n)))}ge[ne+4]=qt,Te.push(mt/Ze,Ut/Ze,1/0,qt,-1,Ze),he&&Te.push(Ct)}else{for(let ct=0;ct<Qe;ct++)Te.push(ge[ne+ct]);if(Ze>1)for(const ct of ke){const mt=ct*Qe;if(!(ge[mt+2]<=G)){ge[mt+2]=G;for(let Ut=0;Ut<Qe;Ut++)Te.push(ge[mt+Ut])}}}}return Te}_getOriginId(I){return I-this.points.length>>5}_getOriginZoom(I){return(I-this.points.length)%32}_map(I,G,J){if(I[G+ze]>1){const Ne=this.clusterProps[I[G+Pt]];return J?Object.assign({},Ne):Ne}const se=this.points[I[G+wt]].properties,he=this.options.map(se);return J&&he===se?Object.assign({},he):he}}function yn(fe,I,G){return{type:"Feature",id:fe[I+wt],properties:Ft(fe,I,G),geometry:{type:"Point",coordinates:[(J=fe[I],360*(J-.5)),vr(fe[I+1])]}};var J}function Ft(fe,I,G){const J=fe[I+ze],se=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,he=fe[I+Pt],Ne=he===-1?{}:Object.assign({},G[he]);return Object.assign(Ne,{cluster:!0,cluster_id:fe[I+wt],point_count:J,point_count_abbreviated:se})}function zt(fe){return fe/360+.5}function mn(fe){const I=Math.sin(fe*Math.PI/180),G=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return G<0?0:G>1?1:G}function vr(fe){const I=(180-360*fe)*Math.PI/180;return 360*Math.atan(Math.exp(I))/Math.PI-90}function fn(fe,I,G,J){for(var se,he=J,Ne=G-I>>1,xe=G-I,ge=fe[I],Te=fe[I+1],Qe=fe[G],ne=fe[G+1],Ee=I+3;Ee<G;Ee+=3){var te=Wn(fe[Ee],fe[Ee+1],ge,Te,Qe,ne);if(te>he)se=Ee,he=te;else if(te===he){var ke=Math.abs(Ee-Ne);ke<xe&&(se=Ee,xe=ke)}}he>J&&(se-I>3&&fn(fe,I,se,J),fe[se+2]=he,G-se>3&&fn(fe,se,G,J))}function Wn(fe,I,G,J,se,he){var Ne=se-G,xe=he-J;if(Ne!==0||xe!==0){var ge=((fe-G)*Ne+(I-J)*xe)/(Ne*Ne+xe*xe);ge>1?(G=se,J=he):ge>0&&(G+=Ne*ge,J+=xe*ge)}return(Ne=fe-G)*Ne+(xe=I-J)*xe}function $r(fe,I,G,J){var se={id:fe===void 0?null:fe,type:I,geometry:G,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(he){var Ne=he.geometry,xe=he.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Sr(he,Ne);else if(xe==="Polygon"||xe==="MultiLineString")for(var ge=0;ge<Ne.length;ge++)Sr(he,Ne[ge]);else if(xe==="MultiPolygon")for(ge=0;ge<Ne.length;ge++)for(var Te=0;Te<Ne[ge].length;Te++)Sr(he,Ne[ge][Te])}(se),se}function Sr(fe,I){for(var G=0;G<I.length;G+=3)fe.minX=Math.min(fe.minX,I[G]),fe.minY=Math.min(fe.minY,I[G+1]),fe.maxX=Math.max(fe.maxX,I[G]),fe.maxY=Math.max(fe.maxY,I[G+1])}function ur(fe,I,G,J){if(I.geometry){var se=I.geometry.coordinates,he=I.geometry.type,Ne=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),xe=[],ge=I.id;if(G.promoteId?ge=I.properties[G.promoteId]:G.generateId&&(ge=J||0),he==="Point")fi(se,xe);else if(he==="MultiPoint")for(var Te=0;Te<se.length;Te++)fi(se[Te],xe);else if(he==="LineString")Rr(se,xe,Ne,!1);else if(he==="MultiLineString"){if(G.lineMetrics){for(Te=0;Te<se.length;Te++)Rr(se[Te],xe=[],Ne,!1),fe.push($r(ge,"LineString",xe,I.properties));return}ii(se,xe,Ne,!1)}else if(he==="Polygon")ii(se,xe,Ne,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(Te=0;Te<I.geometry.geometries.length;Te++)ur(fe,{id:ge,geometry:I.geometry.geometries[Te],properties:I.properties},G,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Te=0;Te<se.length;Te++){var Qe=[];ii(se[Te],Qe,Ne,!0),xe.push(Qe)}}fe.push($r(ge,he,xe,I.properties))}}function fi(fe,I){I.push(We(fe[0])),I.push(mr(fe[1])),I.push(0)}function Rr(fe,I,G,J){for(var se,he,Ne=0,xe=0;xe<fe.length;xe++){var ge=We(fe[xe][0]),Te=mr(fe[xe][1]);I.push(ge),I.push(Te),I.push(0),xe>0&&(Ne+=J?(se*Te-ge*he)/2:Math.sqrt(Math.pow(ge-se,2)+Math.pow(Te-he,2))),se=ge,he=Te}var Qe=I.length-3;I[2]=1,fn(I,0,Qe,G),I[Qe+2]=1,I.size=Math.abs(Ne),I.start=0,I.end=I.size}function ii(fe,I,G,J){for(var se=0;se<fe.length;se++){var he=[];Rr(fe[se],he,G,J),I.push(he)}}function We(fe){return fe/360+.5}function mr(fe){var I=Math.sin(fe*Math.PI/180),G=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return G<0?0:G>1?1:G}function ir(fe,I,G,J,se,he,Ne,xe){if(J/=I,he>=(G/=I)&&Ne<J)return fe;if(Ne<G||he>=J)return null;for(var ge=[],Te=0;Te<fe.length;Te++){var Qe=fe[Te],ne=Qe.geometry,Ee=Qe.type,te=se===0?Qe.minX:Qe.minY,ke=se===0?Qe.maxX:Qe.maxY;if(te>=G&&ke<J)ge.push(Qe);else if(!(ke<G||te>=J)){var Be=[];if(Ee==="Point"||Ee==="MultiPoint")Vn(ne,Be,G,J,se);else if(Ee==="LineString")Rn(ne,Be,G,J,se,!1,xe.lineMetrics);else if(Ee==="MultiLineString")si(ne,Be,G,J,se,!1);else if(Ee==="Polygon")si(ne,Be,G,J,se,!0);else if(Ee==="MultiPolygon")for(var Ze=0;Ze<ne.length;Ze++){var ct=[];si(ne[Ze],ct,G,J,se,!0),ct.length&&Be.push(ct)}if(Be.length){if(xe.lineMetrics&&Ee==="LineString"){for(Ze=0;Ze<Be.length;Ze++)ge.push($r(Qe.id,Ee,Be[Ze],Qe.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(Be.length===1?(Ee="LineString",Be=Be[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=Be.length===3?"Point":"MultiPoint"),ge.push($r(Qe.id,Ee,Be,Qe.tags))}}}return ge.length?ge:null}function Vn(fe,I,G,J,se){for(var he=0;he<fe.length;he+=3){var Ne=fe[he+se];Ne>=G&&Ne<=J&&(I.push(fe[he]),I.push(fe[he+1]),I.push(fe[he+2]))}}function Rn(fe,I,G,J,se,he,Ne){for(var xe,ge,Te=yr(fe),Qe=se===0?ms:Ui,ne=fe.start,Ee=0;Ee<fe.length-3;Ee+=3){var te=fe[Ee],ke=fe[Ee+1],Be=fe[Ee+2],Ze=fe[Ee+3],ct=fe[Ee+4],mt=se===0?te:ke,Ut=se===0?Ze:ct,Ct=!1;Ne&&(xe=Math.sqrt(Math.pow(te-Ze,2)+Math.pow(ke-ct,2))),mt<G?Ut>G&&(ge=Qe(Te,te,ke,Ze,ct,G),Ne&&(Te.start=ne+xe*ge)):mt>J?Ut<J&&(ge=Qe(Te,te,ke,Ze,ct,J),Ne&&(Te.start=ne+xe*ge)):qr(Te,te,ke,Be),Ut<G&&mt>=G&&(ge=Qe(Te,te,ke,Ze,ct,G),Ct=!0),Ut>J&&mt<=J&&(ge=Qe(Te,te,ke,Ze,ct,J),Ct=!0),!he&&Ct&&(Ne&&(Te.end=ne+xe*ge),I.push(Te),Te=yr(fe)),Ne&&(ne+=xe)}var qt=fe.length-3;te=fe[qt],ke=fe[qt+1],Be=fe[qt+2],(mt=se===0?te:ke)>=G&&mt<=J&&qr(Te,te,ke,Be),qt=Te.length-3,he&&qt>=3&&(Te[qt]!==Te[0]||Te[qt+1]!==Te[1])&&qr(Te,Te[0],Te[1],Te[2]),Te.length&&I.push(Te)}function yr(fe){var I=[];return I.size=fe.size,I.start=fe.start,I.end=fe.end,I}function si(fe,I,G,J,se,he){for(var Ne=0;Ne<fe.length;Ne++)Rn(fe[Ne],I,G,J,se,he,!1)}function qr(fe,I,G,J){fe.push(I),fe.push(G),fe.push(J)}function ms(fe,I,G,J,se,he){var Ne=(he-I)/(J-I);return fe.push(he),fe.push(G+(se-G)*Ne),fe.push(1),Ne}function Ui(fe,I,G,J,se,he){var Ne=(he-G)/(se-G);return fe.push(I+(J-I)*Ne),fe.push(he),fe.push(1),Ne}function jt(fe,I){for(var G=[],J=0;J<fe.length;J++){var se,he=fe[J],Ne=he.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")se=an(he.geometry,I);else if(Ne==="MultiLineString"||Ne==="Polygon"){se=[];for(var xe=0;xe<he.geometry.length;xe++)se.push(an(he.geometry[xe],I))}else if(Ne==="MultiPolygon")for(se=[],xe=0;xe<he.geometry.length;xe++){for(var ge=[],Te=0;Te<he.geometry[xe].length;Te++)ge.push(an(he.geometry[xe][Te],I));se.push(ge)}G.push($r(he.id,Ne,se,he.tags))}return G}function an(fe,I){var G=[];G.size=fe.size,fe.start!==void 0&&(G.start=fe.start,G.end=fe.end);for(var J=0;J<fe.length;J+=3)G.push(fe[J]+I,fe[J+1],fe[J+2]);return G}function nt(fe,I){if(fe.transformed)return fe;var G,J,se,he=1<<fe.z,Ne=fe.x,xe=fe.y;for(G=0;G<fe.features.length;G++){var ge=fe.features[G],Te=ge.geometry,Qe=ge.type;if(ge.geometry=[],Qe===1)for(J=0;J<Te.length;J+=2)ge.geometry.push(Fn(Te[J],Te[J+1],I,he,Ne,xe));else for(J=0;J<Te.length;J++){var ne=[];for(se=0;se<Te[J].length;se+=2)ne.push(Fn(Te[J][se],Te[J][se+1],I,he,Ne,xe));ge.geometry.push(ne)}}return fe.transformed=!0,fe}function Fn(fe,I,G,J,se,he){return[Math.round(G*(fe*J-se)),Math.round(G*(I*J-he))]}function Dn(fe,I,G,J,se){for(var he=I===se.maxZoom?0:se.tolerance/((1<<I)*se.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:J,z:I,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<fe.length;xe++){Ne.numFeatures++,br(Ne,fe[xe],he,se);var ge=fe[xe].minX,Te=fe[xe].minY,Qe=fe[xe].maxX,ne=fe[xe].maxY;ge<Ne.minX&&(Ne.minX=ge),Te<Ne.minY&&(Ne.minY=Te),Qe>Ne.maxX&&(Ne.maxX=Qe),ne>Ne.maxY&&(Ne.maxY=ne)}return Ne}function br(fe,I,G,J){var se=I.geometry,he=I.type,Ne=[];if(he==="Point"||he==="MultiPoint")for(var xe=0;xe<se.length;xe+=3)Ne.push(se[xe]),Ne.push(se[xe+1]),fe.numPoints++,fe.numSimplified++;else if(he==="LineString")dr(Ne,se,fe,G,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(xe=0;xe<se.length;xe++)dr(Ne,se[xe],fe,G,he==="Polygon",xe===0);else if(he==="MultiPolygon")for(var ge=0;ge<se.length;ge++){var Te=se[ge];for(xe=0;xe<Te.length;xe++)dr(Ne,Te[xe],fe,G,!0,xe===0)}if(Ne.length){var Qe=I.tags||null;if(he==="LineString"&&J.lineMetrics){for(var ne in Qe={},I.tags)Qe[ne]=I.tags[ne];Qe.mapbox_clip_start=se.start/se.size,Qe.mapbox_clip_end=se.end/se.size}var Ee={geometry:Ne,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Qe};I.id!==null&&(Ee.id=I.id),fe.features.push(Ee)}}function dr(fe,I,G,J,se,he){var Ne=J*J;if(J>0&&I.size<(se?Ne:J))G.numPoints+=I.length/3;else{for(var xe=[],ge=0;ge<I.length;ge+=3)(J===0||I[ge+2]>Ne)&&(G.numSimplified++,xe.push(I[ge]),xe.push(I[ge+1])),G.numPoints++;se&&function(Te,Qe){for(var ne=0,Ee=0,te=Te.length,ke=te-2;Ee<te;ke=Ee,Ee+=2)ne+=(Te[Ee]-Te[ke])*(Te[Ee+1]+Te[ke+1]);if(ne>0===Qe)for(Ee=0,te=Te.length;Ee<te/2;Ee+=2){var Be=Te[Ee],Ze=Te[Ee+1];Te[Ee]=Te[te-2-Ee],Te[Ee+1]=Te[te-1-Ee],Te[te-2-Ee]=Be,Te[te-1-Ee]=Ze}}(xe,he),fe.push(xe)}}function gt(fe,I){var G=(I=this.options=function(se,he){for(var Ne in he)se[Ne]=he[Ne];return se}(Object.create(this.options),I)).debug;if(G&&console.time("preprocess data"),I.maxZoom<0||I.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(I.promoteId&&I.generateId)throw new Error("promoteId and generateId cannot be used together.");var J=function(se,he){var Ne=[];if(se.type==="FeatureCollection")for(var xe=0;xe<se.features.length;xe++)ur(Ne,se.features[xe],he,xe);else ur(Ne,se.type==="Feature"?se:{geometry:se},he);return Ne}(fe,I);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",I.indexMaxZoom,I.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(se,he){var Ne=he.buffer/he.extent,xe=se,ge=ir(se,1,-1-Ne,Ne,0,-1,2,he),Te=ir(se,1,1-Ne,2+Ne,0,-1,2,he);return(ge||Te)&&(xe=ir(se,1,-Ne,1+Ne,0,-1,2,he)||[],ge&&(xe=jt(ge,1).concat(xe)),Te&&(xe=xe.concat(jt(Te,-1)))),xe}(J,I),J.length&&this.splitTile(J,0,0,0),G&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kt(fe,I,G){return 32*((1<<fe)*G+I)+fe}function $t(fe,I){return I?fe.properties[I]:fe.id}function zn(fe,I){if(fe==null)return!0;if(fe.type==="Feature")return $t(fe,I)!=null;if(fe.type==="FeatureCollection"){const G=new Set;for(const J of fe.features){const se=$t(J,I);if(se==null||G.has(se))return!1;G.add(se)}return!0}return!1}function Kr(fe,I){const G=new Map;if(fe!=null)if(fe.type==="Feature")G.set($t(fe,I),fe);else for(const J of fe.features)G.set($t(J,I),J);return G}gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(fe,I,G,J,se,he,Ne){for(var xe=[fe,I,G,J],ge=this.options,Te=ge.debug;xe.length;){J=xe.pop(),G=xe.pop(),I=xe.pop(),fe=xe.pop();var Qe=1<<I,ne=Kt(I,G,J),Ee=this.tiles[ne];if(!Ee&&(Te>1&&console.time("creation"),Ee=this.tiles[ne]=Dn(fe,I,G,J,ge),this.tileCoords.push({z:I,x:G,y:J}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",I,G,J,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));var te="z"+I;this.stats[te]=(this.stats[te]||0)+1,this.total++}if(Ee.source=fe,se){if(I===ge.maxZoom||I===se)continue;var ke=1<<se-I;if(G!==Math.floor(he/ke)||J!==Math.floor(Ne/ke))continue}else if(I===ge.indexMaxZoom||Ee.numPoints<=ge.indexMaxPoints)continue;if(Ee.source=null,fe.length!==0){Te>1&&console.time("clipping");var Be,Ze,ct,mt,Ut,Ct,qt=.5*ge.buffer/ge.extent,En=.5-qt,_n=.5+qt,qn=1+qt;Be=Ze=ct=mt=null,Ut=ir(fe,Qe,G-qt,G+_n,0,Ee.minX,Ee.maxX,ge),Ct=ir(fe,Qe,G+En,G+qn,0,Ee.minX,Ee.maxX,ge),fe=null,Ut&&(Be=ir(Ut,Qe,J-qt,J+_n,1,Ee.minY,Ee.maxY,ge),Ze=ir(Ut,Qe,J+En,J+qn,1,Ee.minY,Ee.maxY,ge),Ut=null),Ct&&(ct=ir(Ct,Qe,J-qt,J+_n,1,Ee.minY,Ee.maxY,ge),mt=ir(Ct,Qe,J+En,J+qn,1,Ee.minY,Ee.maxY,ge),Ct=null),Te>1&&console.timeEnd("clipping"),xe.push(Be||[],I+1,2*G,2*J),xe.push(Ze||[],I+1,2*G,2*J+1),xe.push(ct||[],I+1,2*G+1,2*J),xe.push(mt||[],I+1,2*G+1,2*J+1)}}},gt.prototype.getTile=function(fe,I,G){var J=this.options,se=J.extent,he=J.debug;if(fe<0||fe>24)return null;var Ne=1<<fe,xe=Kt(fe,I=(I%Ne+Ne)%Ne,G);if(this.tiles[xe])return nt(this.tiles[xe],se);he>1&&console.log("drilling down to z%d-%d-%d",fe,I,G);for(var ge,Te=fe,Qe=I,ne=G;!ge&&Te>0;)Te--,Qe=Math.floor(Qe/2),ne=Math.floor(ne/2),ge=this.tiles[Kt(Te,Qe,ne)];return ge&&ge.source?(he>1&&console.log("found parent tile z%d-%d-%d",Te,Qe,ne),he>1&&console.time("drilling down"),this.splitTile(ge.source,Te,Qe,ne,fe,I,G),he>1&&console.timeEnd("drilling down"),this.tiles[xe]?nt(this.tiles[xe],se):null):null};class pn extends ie{constructor(I,G,J,se){super(I,G,J),this._dataUpdateable=new Map,this.loadGeoJSON=(he,Ne)=>{const{promoteId:xe}=he;if(he.request)return u.f(he.request,(ge,Te,Qe,ne)=>{this._dataUpdateable=zn(Te,xe)?Kr(Te,xe):void 0,Ne(ge,Te,Qe,ne)});if(typeof he.data=="string")try{const ge=JSON.parse(he.data);this._dataUpdateable=zn(ge,xe)?Kr(ge,xe):void 0,Ne(null,ge)}catch{Ne(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`))}else he.dataDiff?this._dataUpdateable?(function(ge,Te,Qe){var ne,Ee,te,ke;if(Te.removeAll&&ge.clear(),Te.remove)for(const Be of Te.remove)ge.delete(Be);if(Te.add)for(const Be of Te.add){const Ze=$t(Be,Qe);Ze!=null&&ge.set(Ze,Be)}if(Te.update)for(const Be of Te.update){let Ze=ge.get(Be.id);if(Ze==null)continue;const ct=!Be.removeAllProperties&&(((ne=Be.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((Ee=Be.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((Be.newGeometry||Be.removeAllProperties||ct)&&(Ze=Object.assign({},Ze),ge.set(Be.id,Ze),ct&&(Ze.properties=Object.assign({},Ze.properties))),Be.newGeometry&&(Ze.geometry=Be.newGeometry),Be.removeAllProperties)Ze.properties={};else if(((te=Be.removeProperties)===null||te===void 0?void 0:te.length)>0)for(const mt of Be.removeProperties)Object.prototype.hasOwnProperty.call(Ze.properties,mt)&&delete Ze.properties[mt];if(((ke=Be.addOrUpdateProperties)===null||ke===void 0?void 0:ke.length)>0)for(const{key:mt,value:Ut}of Be.addOrUpdateProperties)Ze.properties[mt]=Ut}}(this._dataUpdateable,he.dataDiff,xe),Ne(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ne(new Error(`Cannot update existing geojson data in ${he.source}`)):Ne(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile(I,G){const J=I.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const se=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!se)return G(null,null);const he=new class{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.N,this.length=xe.length,this._features=xe}feature(xe){return new class{constructor(ge){this._feature=ge,this.extent=u.N,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))}loadGeometry(){if(this._feature.type===1){const ge=[];for(const Te of this._feature.geometry)ge.push([new u.P(Te[0],Te[1])]);return ge}{const ge=[];for(const Te of this._feature.geometry){const Qe=[];for(const ne of Te)Qe.push(new u.P(ne[0],ne[1]));ge.push(Qe)}return ge}}toGeoJSON(ge,Te,Qe){return Ce.call(this,ge,Te,Qe)}}(this._features[xe])}}(se.features);let Ne=bn(he);Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),G(null,{vectorTile:he,rawData:Ne.buffer})}loadData(I,G){var J;(J=this._pendingRequest)===null||J===void 0||J.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(I&&I.request&&I.request.collectResourceTiming)&&new u.bu(I.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(I,(he,Ne)=>{if(delete this._pendingCallback,delete this._pendingRequest,he||!Ne)return G(he);if(typeof Ne!="object")return G(new Error(`Input data given to '${I.source}' is not a valid GeoJSON object.`));{Se(Ne,!0);try{if(I.filter){const ge=u.bC(I.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));Ne={type:"FeatureCollection",features:Ne.features.filter(Qe=>ge.value.evaluate({zoom:0},Qe))}}this._geoJSONIndex=I.cluster?new nn(function({superclusterOptions:ge,clusterProperties:Te}){if(!Te||!ge)return ge;const Qe={},ne={},Ee={accumulated:null,zoom:0},te={properties:null},ke=Object.keys(Te);for(const Be of ke){const[Ze,ct]=Te[Be],mt=u.bC(ct),Ut=u.bC(typeof Ze=="string"?[Ze,["accumulated"],["get",Be]]:Ze);Qe[Be]=mt.value,ne[Be]=Ut.value}return ge.map=Be=>{te.properties=Be;const Ze={};for(const ct of ke)Ze[ct]=Qe[ct].evaluate(Ee,te);return Ze},ge.reduce=(Be,Ze)=>{te.properties=Ze;for(const ct of ke)Ee.accumulated=Be[ct],Be[ct]=ne[ct].evaluate(Ee,te)},ge}(I)).load(Ne.features):function(ge,Te){return new gt(ge,Te)}(Ne,I.geojsonVtOptions)}catch(ge){return G(ge)}this.loaded={};const xe={};if(se){const ge=se.finish();ge&&(xe.resourceTiming={},xe.resourceTiming[I.source]=JSON.parse(JSON.stringify(ge)))}G(null,xe)}})}reloadTile(I,G){const J=this.loaded;return J&&J[I.uid]?super.reloadTile(I,G):this.loadTile(I,G)}removeSource(I,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(I,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(I.clusterId))}catch(J){G(J)}}getClusterChildren(I,G){try{G(null,this._geoJSONIndex.getChildren(I.clusterId))}catch(J){G(J)}}getClusterLeaves(I,G){try{G(null,this._geoJSONIndex.getLeaves(I.clusterId,I.limit,I.offset))}catch(J){G(J)}}}class ai{constructor(I){this.self=I,this.actor=new u.C(I,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ie,geojson:pn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,J)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=J},this.self.registerRTLTextPlugin=G=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.applyArabicShaping=G.applyArabicShaping,u.bD.processBidirectionalText=G.processBidirectionalText,u.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(I,G){this.referrer=G}setImages(I,G,J){this.availableImages[I]=G;for(const se in this.workerSources[I]){const he=this.workerSources[I][se];for(const Ne in he)he[Ne].availableImages=G}J()}setLayers(I,G,J){this.getLayerIndex(I).replace(G),J()}updateLayers(I,G,J){this.getLayerIndex(I).update(G.layers,G.removedIds),J()}loadTile(I,G,J){this.getWorkerSource(I,G.type,G.source).loadTile(G,J)}loadDEMTile(I,G,J){this.getDEMWorkerSource(I,G.source).loadTile(G,J)}reloadTile(I,G,J){this.getWorkerSource(I,G.type,G.source).reloadTile(G,J)}abortTile(I,G,J){this.getWorkerSource(I,G.type,G.source).abortTile(G,J)}removeTile(I,G,J){this.getWorkerSource(I,G.type,G.source).removeTile(G,J)}removeDEMTile(I,G){this.getDEMWorkerSource(I,G.source).removeTile(G)}removeSource(I,G,J){if(!this.workerSources[I]||!this.workerSources[I][G.type]||!this.workerSources[I][G.type][G.source])return;const se=this.workerSources[I][G.type][G.source];delete this.workerSources[I][G.type][G.source],se.removeSource!==void 0?se.removeSource(G,J):J()}loadWorkerSource(I,G,J){try{this.self.importScripts(G.url),J()}catch(se){J(se.toString())}}syncRTLPluginState(I,G,J){try{u.bD.setState(G);const se=u.bD.getPluginURL();if(u.bD.isLoaded()&&!u.bD.isParsed()&&se!=null){this.self.importScripts(se);const he=u.bD.isParsed();J(he?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),he)}}catch(se){J(se.toString())}}getAvailableImages(I){let G=this.availableImages[I];return G||(G=[]),G}getLayerIndex(I){let G=this.layerIndexes[I];return G||(G=this.layerIndexes[I]=new k),G}getWorkerSource(I,G,J){return this.workerSources[I]||(this.workerSources[I]={}),this.workerSources[I][G]||(this.workerSources[I][G]={}),this.workerSources[I][G][J]||(this.workerSources[I][G][J]=new this.workerSourceTypes[G]({send:(se,he,Ne)=>{this.actor.send(se,he,Ne,I)}},this.getLayerIndex(I),this.getAvailableImages(I))),this.workerSources[I][G][J]}getDEMWorkerSource(I,G){return this.demWorkerSources[I]||(this.demWorkerSources[I]={}),this.demWorkerSources[I][G]||(this.demWorkerSources[I][G]=new pe),this.demWorkerSources[I][G]}}return u.i()&&(self.worker=new ai(self)),ai}),S(["./shared"],function(u){var k="3.6.2";class A{static testProp(r){if(!A.docStyle)return r[0];for(let d=0;d<r.length;d++)if(r[d]in A.docStyle)return r[d];return r[0]}static create(r,d,m){const y=window.document.createElement(r);return d!==void 0&&(y.className=d),m&&m.appendChild(y),y}static createNS(r,d){return window.document.createElementNS(r,d)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(r,d){r.style[A.transformProp]=d}static addEventListener(r,d,m,y={}){r.addEventListener(d,m,"passive"in y?y:y.capture)}static removeEventListener(r,d,m,y={}){r.removeEventListener(d,m,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static mousePos(r,d){const m=r.getBoundingClientRect();return new u.P(d.clientX-m.left-r.clientLeft,d.clientY-m.top-r.clientTop)}static touchPos(r,d){const m=r.getBoundingClientRect(),y=[];for(let w=0;w<d.length;w++)y.push(new u.P(d[w].clientX-m.left-r.clientLeft,d[w].clientY-m.top-r.clientTop));return y}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(x){!ie&&W&&(pe?Ve(x):B=x)}};let B,W,ie=!1,pe=!1;function Ve(x){const r=x.createTexture();x.bindTexture(x.TEXTURE_2D,r);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,W),x.isContextLost())return;O.supported=!0}catch{}x.deleteTexture(r),ie=!0}var Pe,Se;typeof document<"u"&&(W=document.createElement("img"),W.onload=function(){B&&Ve(B),B=null,pe=!0},W.onerror=function(){ie=!0,B=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(x){let r,d,m,y;x.resetRequestQueue=()=>{r=[],d=0,m=0,y={}},x.addThrottleControl=z=>{const U=m++;return y[U]=z,U},x.removeThrottleControl=z=>{delete y[z],j()},x.getImage=(z,U,q=!0)=>{O.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*");const X={requestParameters:z,supportImageRefresh:q,callback:U,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),d--),j())}};return r.push(X),j(),X};const w=z=>{const{requestParameters:U,supportImageRefresh:q,callback:X}=z;return u.e(U,{type:"image"}),(q!==!1||u.i()||u.g(U.url)||U.headers&&!Object.keys(U.headers).reduce((oe,le)=>oe&&le==="accept",!0)?u.m:R)(U,(oe,le,me,ae)=>{P(z,X,oe,le,me,ae)})},P=(z,U,q,X,oe,le)=>{q?U(q):X instanceof HTMLImageElement||u.a(X)?U(null,X):X&&((me,ae)=>{typeof createImageBitmap=="function"?u.b(me,ae):u.d(me,ae)})(X,(me,ae)=>{me!=null?U(me):ae!=null&&U(null,ae,{cacheControl:oe,expires:le})}),z.cancelled||(z.completed=!0,d--,j())},j=()=>{const z=(()=>{const U=Object.keys(y);let q=!1;if(U.length>0){for(const X of U)if(q=y[X](),q)break}return q})()?u.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=d;U<z&&r.length>0;U++){const q=r.shift();if(q.cancelled){U--;continue}const X=w(q);d++,q.innerRequest=X}},R=(z,U)=>{const q=new Image,X=z.url;let oe=!1;const le=z.credentials;return le&&le==="include"?q.crossOrigin="use-credentials":(le&&le==="same-origin"||!u.s(X))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{U(null,q),q.onerror=q.onload=null},q.onerror=()=>{oe||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=X,{cancel:()=>{oe=!0,q.src=""}}}}(Pe||(Pe={})),Pe.resetRequestQueue(),function(x){x.Glyphs="Glyphs",x.Image="Image",x.Source="Source",x.SpriteImage="SpriteImage",x.SpriteJSON="SpriteJSON",x.Style="Style",x.Tile="Tile",x.Unknown="Unknown"}(Se||(Se={}));class Ce{constructor(r){this._transformRequestFn=r}transformRequest(r,d){return this._transformRequestFn&&this._transformRequestFn(r,d)||{url:r}}normalizeSpriteURL(r,d,m){const y=function(w){const P=w.match(_e);if(!P)throw new Error(`Unable to parse URL "${w}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(r);return y.path+=`${d}${m}`,function(w){const P=w.params.length?`?${w.params.join("&")}`:"";return`${w.protocol}://${w.authority}${w.path}${P}`}(y)}setTransformRequest(r){this._transformRequestFn=r}}const _e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(x){var r=new u.A(3);return r[0]=x[0],r[1]=x[1],r[2]=x[2],r}var Oe,Je=function(x,r,d){return x[0]=r[0]-d[0],x[1]=r[1]-d[1],x[2]=r[2]-d[2],x};Oe=new u.A(3),u.A!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0);var tt=function(x){var r=x[0],d=x[1];return r*r+d*d};function ut(x){const r=[];if(typeof x=="string")r.push({id:"default",url:x});else if(x&&x.length>0){const d=[];for(const{id:m,url:y}of x){const w=`${m}${y}`;d.indexOf(w)===-1&&(d.push(w),r.push({id:m,url:y}))}}return r}function Tt(x,r,d,m,y){if(m)return void x(m);if(y!==Object.values(r).length||y!==Object.values(d).length)return;const w={};for(const P in r){w[P]={};const j=u.h.getImageCanvasContext(d[P]),R=r[P];for(const z in R){const{width:U,height:q,x:X,y:oe,sdf:le,pixelRatio:me,stretchX:ae,stretchY:je,content:Fe}=R[z];w[P][z]={data:null,pixelRatio:me,sdf:le,stretchX:ae,stretchY:je,content:Fe,spriteData:{width:U,height:q,x:X,y:oe,context:j}}}}x(null,w)}(function(){var x=new u.A(2);u.A!=Float32Array&&(x[0]=0,x[1]=0)})();class pt{constructor(r,d,m,y){this.context=r,this.format=m,this.texture=r.gl.createTexture(),this.update(d,y)}update(r,d,m){const{width:y,height:w}=r,P=!(this.size&&this.size[0]===y&&this.size[1]===w||m),{context:j}=this,{gl:R}=j;if(this.useMipmap=!!(d&&d.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!d||d.premultiply!==!1)),P)this.size=[y,w],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,y,w,0,this.format,R.UNSIGNED_BYTE,r.data);else{const{x:z,y:U}=m||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?R.texSubImage2D(R.TEXTURE_2D,0,z,U,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,z,U,y,w,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(r,d,m){const{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),m!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=w.LINEAR),r!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,r),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,m||r),this.filter=r),d!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,d),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Yt(x){const{userImage:r}=x;return!!(r&&r.render&&r.render())&&(x.data.replace(new Uint8Array(r.data.buffer)),!0)}class ft extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:d,callback:m}of this.requestors)this._notify(d,m);this.requestors=[]}}getImage(r){const d=this.images[r];if(d&&!d.data&&d.spriteData){const m=d.spriteData;d.data=new u.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),d.spriteData=null}return d}addImage(r,d){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,d)&&(this.images[r]=d)}_validate(r,d){let m=!0;const y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(d.content,d)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,d){if(!r)return!0;let m=0;for(const y of r){if(y[0]<m||y[1]<y[0]||d<y[1])return!1;m=y[1]}return!0}_validateContent(r,d){if(!r)return!0;if(r.length!==4)return!1;const m=d.spriteData,y=m&&m.width||d.data.width,w=m&&m.height||d.data.height;return!(r[0]<0||y<r[0]||r[1]<0||w<r[1]||r[2]<0||y<r[2]||r[3]<0||w<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,d,m=!0){const y=this.getImage(r);if(m&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[r]=d,this.updatedImages[r]=!0}removeImage(r){const d=this.images[r];delete this.images[r],delete this.patterns[r],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,d){let m=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(m=!1);this.isLoaded()||m?this._notify(r,d):this.requestors.push({ids:r,callback:d})}_notify(r,d){const m={};for(const y of r){let w=this.getImage(y);w||(this.fire(new u.k("styleimagemissing",{id:y})),w=this.getImage(y)),w?m[y]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:u.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,m)}getPixelSize(){const{width:r,height:d}=this.atlasImage;return{width:r,height:d}}getPattern(r){const d=this.patterns[r],m=this.getImage(r);if(!m)return null;if(d&&d.position.version===m.version)return d.position;if(d)d.position.version=m.version;else{const y={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new u.I(y,m);this.patterns[r]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const d=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new pt(r,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const w in this.patterns)r.push(this.patterns[w].bin);const{w:d,h:m}=u.p(r),y=this.atlasImage;y.resize({width:d||1,height:m||1});for(const w in this.patterns){const{bin:P}=this.patterns[w],j=P.x+1,R=P.y+1,z=this.getImage(w).data,U=z.width,q=z.height;u.R.copy(z,y,{x:0,y:0},{x:j,y:R},{width:U,height:q}),u.R.copy(z,y,{x:0,y:q-1},{x:j,y:R-1},{width:U,height:1}),u.R.copy(z,y,{x:0,y:0},{x:j,y:R+q},{width:U,height:1}),u.R.copy(z,y,{x:U-1,y:0},{x:j-1,y:R},{width:1,height:q}),u.R.copy(z,y,{x:0,y:0},{x:j+U,y:R},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const d of r){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const m=this.getImage(d);m||u.w(`Image with ID: "${d}" was not found`),Yt(m)&&this.updateImage(d,m)}}}const bt=1e20;function It(x,r,d,m,y,w,P,j,R){for(let z=r;z<r+m;z++)Lt(x,d*w+z,w,y,P,j,R);for(let z=d;z<d+y;z++)Lt(x,z*w+r,1,m,P,j,R)}function Lt(x,r,d,m,y,w,P){w[0]=0,P[0]=-bt,P[1]=bt,y[0]=x[r];for(let j=1,R=0,z=0;j<m;j++){y[j]=x[r+j*d];const U=j*j;do{const q=w[R];z=(y[j]-y[q]+U-q*q)/(j-q)/2}while(z<=P[R]&&--R>-1);R++,w[R]=j,P[R]=z,P[R+1]=bt}for(let j=0,R=0;j<m;j++){for(;P[R+1]<j;)R++;const z=w[R],U=j-z;x[r+j*d]=y[z]+U*U}}class hn{constructor(r,d){this.requestManager=r,this.localIdeographFontFamily=d,this.entries={}}setURL(r){this.url=r}getGlyphs(r,d){const m=[];for(const y in r)for(const w of r[y])m.push({stack:y,id:w});u.o(m,({stack:y,id:w},P)=>{let j=this.entries[y];j||(j=this.entries[y]={glyphs:{},requests:{},ranges:{}});let R=j.glyphs[w];if(R!==void 0)return void P(null,{stack:y,id:w,glyph:R});if(R=this._tinySDF(j,y,w),R)return j.glyphs[w]=R,void P(null,{stack:y,id:w,glyph:R});const z=Math.floor(w/256);if(256*z>65535)return void P(new Error("glyphs > 65535 not supported"));if(j.ranges[z])return void P(null,{stack:y,id:w,glyph:R});if(!this.url)return void P(new Error("glyphsUrl is not set"));let U=j.requests[z];U||(U=j.requests[z]=[],hn.loadGlyphRange(y,z,this.url,this.requestManager,(q,X)=>{if(X){for(const oe in X)this._doesCharSupportLocalGlyph(+oe)||(j.glyphs[+oe]=X[+oe]);j.ranges[z]=!0}for(const oe of U)oe(q,X);delete j.requests[z]})),U.push((q,X)=>{q?P(q):X&&P(null,{stack:y,id:w,glyph:X[w]||null})})},(y,w)=>{if(y)d(y);else if(w){const P={};for(const{stack:j,id:R,glyph:z}of w)(P[j]||(P[j]={}))[R]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};d(null,P)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,d,m){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(m))return;let w=r.tinySDF;if(!w){let j="400";/bold/i.test(d)?j="900":/medium/i.test(d)?j="500":/light/i.test(d)&&(j="200"),w=r.tinySDF=new hn.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:j})}const P=w.draw(String.fromCharCode(m));return{id:m,bitmap:new u.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}hn.loadGlyphRange=function(x,r,d,m,y){const w=256*r,P=w+255,j=m.transformRequest(d.replace("{fontstack}",x).replace("{range}",`${w}-${P}`),Se.Glyphs);u.l(j,(R,z)=>{if(R)y(R);else if(z){const U={};for(const q of u.n(z))U[q.id]=q;y(null,U)}})},hn.TinySDF=class{constructor({fontSize:x=24,buffer:r=3,radius:d=8,cutoff:m=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:P="normal"}={}){this.buffer=r,this.cutoff=m,this.radius=d;const j=this.size=x+4*r,R=this._createCanvas(j),z=this.ctx=R.getContext("2d",{willReadFrequently:!0});z.font=`${P} ${w} ${x}px ${y}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(x){const r=document.createElement("canvas");return r.width=r.height=x,r}draw(x){const{width:r,actualBoundingBoxAscent:d,actualBoundingBoxDescent:m,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(x),P=Math.ceil(d),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),R=Math.min(this.size-this.buffer,P+Math.ceil(m)),z=j+2*this.buffer,U=R+2*this.buffer,q=Math.max(z*U,0),X=new Uint8ClampedArray(q),oe={data:X,width:z,height:U,glyphWidth:j,glyphHeight:R,glyphTop:P,glyphLeft:0,glyphAdvance:r};if(j===0||R===0)return oe;const{ctx:le,buffer:me,gridInner:ae,gridOuter:je}=this;le.clearRect(me,me,j,R),le.fillText(x,me,me+P);const Fe=le.getImageData(me,me,j,R);je.fill(bt,0,q),ae.fill(0,0,q);for(let ye=0;ye<R;ye++)for(let Ae=0;Ae<j;Ae++){const $e=Fe.data[4*(ye*j+Ae)+3]/255;if($e===0)continue;const Ke=(ye+me)*z+Ae+me;if($e===1)je[Ke]=0,ae[Ke]=bt;else{const it=.5-$e;je[Ke]=it>0?it*it:0,ae[Ke]=it<0?it*it:0}}It(je,0,0,z,U,z,this.f,this.v,this.z),It(ae,me,me,j,R,z,this.f,this.v,this.z);for(let ye=0;ye<q;ye++){const Ae=Math.sqrt(je[ye])-Math.sqrt(ae[ye]);X[ye]=Math.round(255-255*(Ae/this.radius+this.cutoff))}return oe}};class at{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,d){return u.z(r.expression.evaluate(d))}interpolate(r,d,m){return{x:u.B.number(r.x,d.x,m),y:u.B.number(r.y,d.y,m),z:u.B.number(r.z,d.z,m)}}}let Zt;class bn extends u.E{constructor(r){super(),Zt=Zt||new u.r({anchor:new u.D(u.v.light.anchor),position:new at,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Zt),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,d={}){if(!this._validate(u.t,r,d))for(const m in r){const y=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),y):this._transitionable.setValue(m,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,m){return(!m||m.validate!==!1)&&u.x(this,r.call(u.y,u.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}}class ln{constructor(r,d){this.width=r,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,d){const m=r.join(",")+String(d);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,d)),this.dashEntry[m]}getDashRanges(r,d,m){const y=[];let w=r.length%2==1?-r[r.length-1]*m:0,P=r[0]*m,j=!0;y.push({left:w,right:P,isDash:j,zeroLength:r[0]===0});let R=r[0];for(let z=1;z<r.length;z++){j=!j;const U=r[z];w=R*m,R+=U,P=R*m,y.push({left:w,right:P,isDash:j,zeroLength:U===0})}return y}addRoundDash(r,d,m){const y=d/2;for(let w=-m;w<=m;w++){const P=this.width*(this.nextRow+m+w);let j=0,R=r[j];for(let z=0;z<this.width;z++){z/R.right>1&&(R=r[++j]);const U=Math.abs(z-R.left),q=Math.abs(z-R.right),X=Math.min(U,q);let oe;const le=w/m*(y+1);if(R.isDash){const me=y-Math.abs(le);oe=Math.sqrt(X*X+me*me)}else oe=y-Math.sqrt(X*X+le*le);this.data[P+z]=Math.max(0,Math.min(255,oe+128))}}}addRegularDash(r){for(let j=r.length-1;j>=0;--j){const R=r[j],z=r[j+1];R.zeroLength?r.splice(j,1):z&&z.isDash===R.isDash&&(z.left=R.left,r.splice(j,1))}const d=r[0],m=r[r.length-1];d.isDash===m.isDash&&(d.left=m.left-this.width,m.right=d.right+this.width);const y=this.width*this.nextRow;let w=0,P=r[w];for(let j=0;j<this.width;j++){j/P.right>1&&(P=r[++w]);const R=Math.abs(j-P.left),z=Math.abs(j-P.right),U=Math.min(R,z);this.data[y+j]=Math.max(0,Math.min(255,(P.isDash?U:-U)+128))}}addDash(r,d){const m=d?7:0,y=2*m+1;if(this.nextRow+y>this.height)return u.w("LineAtlas out of space"),null;let w=0;for(let j=0;j<r.length;j++)w+=r[j];if(w!==0){const j=this.width/w,R=this.getDashRanges(r,this.width,j);d?this.addRoundDash(R,j,m):this.addRegularDash(R)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:w};return this.nextRow+=y,this.dirty=!0,P}bind(r){const d=r.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class Bn{constructor(r,d,m){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=m;const y=this.workerPool.acquire(m);for(let w=0;w<y.length;w++){const P=new u.C(y[w],d,m);P.name=`Worker ${w}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,d,m){u.o(this.actors,(y,w)=>{y.send(r,d,w)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function An(x,r,d){const m=function(y,w){if(y)return d(y);if(w){const P=u.F(u.e(w,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(P.vectorLayers=w.vector_layers,P.vectorLayerIds=P.vectorLayers.map(j=>j.id)),d(null,P)}};return x.url?u.f(r.transformRequest(x.url,Se.Source),m):u.h.frame(()=>m(null,x))}class wt{constructor(r,d){r&&(d?this.setSouthWest(r).setNorthEast(d):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}extend(r){const d=this._sw,m=this._ne;let y,w;if(r instanceof u.L)y=r,w=r;else{if(!(r instanceof wt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(wt.convert(r)):this.extend(u.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.L.convert(r)):this;if(y=r._sw,w=r._ne,!y||!w)return this}return d||m?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new u.L(y.lng,y.lat),this._ne=new u.L(w.lng,w.lat)),this}getCenter(){return new u.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.L(this.getWest(),this.getNorth())}getSouthEast(){return new u.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:d,lat:m}=u.L.convert(r);let y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&y}static convert(r){return r instanceof wt?r:r&&new wt(r)}static fromLngLat(r,d=0){const m=360*d/40075017,y=m/Math.cos(Math.PI/180*r.lat);return new wt(new u.L(r.lng-y,r.lat-m),new u.L(r.lng+y,r.lat+m))}}class ze{constructor(r,d,m){this.bounds=wt.convert(this.validateBounds(r)),this.minzoom=d||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const d=Math.pow(2,r.z),m=Math.floor(u.G(this.bounds.getWest())*d),y=Math.floor(u.H(this.bounds.getNorth())*d),w=Math.ceil(u.G(this.bounds.getEast())*d),P=Math.ceil(u.H(this.bounds.getSouth())*d);return r.x>=m&&r.x<w&&r.y>=y&&r.y<P}}class Pt extends u.E{constructor(r,d,m,y){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,(w,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),w?this.fire(new u.j(w)):P&&(u.e(this,P),P.bounds&&(this.tileBounds=new ze(P.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.e({},this._options),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.F(d,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,d){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(m,Se.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(P,j){return delete r.request,r.aborted?d(null):P&&P.status!==404?d(P):(j&&j.resourceTiming&&(r.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&r.setExpiryData(j),r.loadVectorData(j,this.map.painter),d(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=d:r.request=r.actor.send("reloadTile",y,w.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",y,w.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class nn extends u.E{constructor(r,d,m,y){super(),this.id=r,this.dispatcher=m,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},d),u.e(this,u.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=An(this._options,this.map._requestManager,(r,d)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new u.j(r)):d&&(u.e(this,d),d.bounds&&(this.tileBounds=new ze(d.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,d){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=Pe.getImage(this.map._requestManager.transformRequest(m,Se.Tile),(y,w,P)=>{if(delete r.request,r.aborted)r.state="unloaded",d(null);else if(y)r.state="errored",d(y);else if(w){this.map._refreshExpiredTiles&&P&&r.setExpiryData(P);const j=this.map.painter.context,R=j.gl;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new pt(j,w,R.RGBA,{useMipmap:!0}),r.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),r.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(r,d){r.request&&(r.request.cancel(),delete r.request),d()}unloadTile(r,d){r.texture&&this.map.painter.saveTileTexture(r.texture),d()}hasTransition(){return!1}}class yn extends nn{constructor(r,d,m,y){super(r,d,m,y),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(r,d){const m=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(m,Se.Tile);function w(P,j){P&&(r.state="errored",d(P)),j&&(r.dem=j,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",d(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=Pe.getImage(y,(P,j,R)=>u._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",d(null);else if(P)r.state="errored",d(P);else if(j){this.map._refreshExpiredTiles&&r.setExpiryData(R);const z=u.a(j)&&u.J()?j:yield function(q){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.K()){const X=q.width+2,oe=q.height+2;try{return new u.R({width:X,height:oe},yield u.M(q,-1,-1,X,oe))}catch{}}return u.h.getImageData(q,1)})}(j),U={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",U,w))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const d=r.canonical,m=Math.pow(2,d.z),y=(d.x-1+m)%m,w=d.x===0?r.wrap-1:r.wrap,P=(d.x+1+m)%m,j=d.x+1===m?r.wrap+1:r.wrap,R={};return R[new u.O(r.overscaledZ,w,d.z,y,d.y).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,d.z,P,d.y).key]={backfilled:!1},d.y>0&&(R[new u.O(r.overscaledZ,w,d.z,y,d.y-1).key]={backfilled:!1},R[new u.O(r.overscaledZ,r.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,d.z,P,d.y-1).key]={backfilled:!1}),d.y+1<m&&(R[new u.O(r.overscaledZ,w,d.z,y,d.y+1).key]={backfilled:!1},R[new u.O(r.overscaledZ,r.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new u.O(r.overscaledZ,j,d.z,P,d.y+1).key]={backfilled:!1}),R}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class Ft extends u.E{constructor(r,d,m,y){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(y),this._data=d.data,this._options=u.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const w=u.N/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*w,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*w,extent:u.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:u.N,radius:(d.clusterRadius||50)*w,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},d),this}getClusterChildren(r,d){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},d),this}getClusterLeaves(r,d,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:d,offset:m},y),this}_updateWorkerData(r){const d=u.e({},this.workerOptions);r?d.dataDiff=r:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(u.h.resolveURL(this._data),Se.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(m,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let w=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(w=y.resourceTiming[this.id].slice(0)),m)return void this.fire(new u.j(m));const P={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&u.e(P,{resourceTiming:w}),this.fire(new u.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,d){const m=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const y={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(m,y,(w,P)=>(delete r.request,r.unloadVectorData(),r.aborted?d(null):w?d(w):(r.loadVectorData(P,this.map.painter,m==="reloadTile"),d(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var zt=u.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mn extends u.E{constructor(r,d,m,y){super(),this.load=(w,P)=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Pe.getImage(this.map._requestManager.transformRequest(this.url,Se.Image),(j,R)=>{this._request=null,this._loaded=!0,j?this.fire(new u.j(j)):R&&(this.image=R,w&&(this.coordinates=w),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,zt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new pt(w,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=m,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const d=r.map(u.U.fromLngLat);this.tileID=function(y){let w=1/0,P=1/0,j=-1/0,R=-1/0;for(const X of y)w=Math.min(w,X.x),P=Math.min(P,X.y),j=Math.max(j,X.x),R=Math.max(R,X.y);const z=Math.max(j-w,R-P),U=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),q=Math.pow(2,U);return new u.W(U,Math.floor((w+j)/2*q),Math.floor((P+R)/2*q))}(d),this.minzoom=this.maxzoom=this.tileID.z;const m=d.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new u.V,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,u.N,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,u.N),this._boundsArray.emplaceBack(m[2].x,m[2].y,u.N,u.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,d){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},d(null)):(r.state="errored",d(null))}hasTransition(){return!1}}class vr extends mn{constructor(r,d,m,y){super(r,d,m,y),this.load=()=>{this._loaded=!1;const w=this.options;this.urls=[];for(const P of w.urls)this.urls.push(this.map._requestManager.transformRequest(P,Se.Source).url);u.X(this.urls,(P,j)=>{this._loaded=!0,P?this.fire(new u.j(P)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const w=this.map.painter.context,P=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,zt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new pt(w,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let j=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,j=!0)}j&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const d=this.video.seekable;r<d.start(0)||r>d.end(0)?this.fire(new u.j(new u.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class fn extends mn{constructor(r,d,m,y){super(r,d,m,y),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,j=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,zt.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new pt(P,this.canvas,j.RGBA,{premultiply:!0});let R=!1;for(const z in this.tiles){const U=this.tiles[z];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,R=!0)}R&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(P=>typeof P!="number"))||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new u.j(new u.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Wn={},$r=x=>{switch(x){case"geojson":return Ft;case"image":return mn;case"raster":return nn;case"raster-dem":return yn;case"vector":return Pt;case"video":return vr;case"canvas":return fn}return Wn[x]};function Sr(x,r){const d=u.Z();return u.$(d,d,[1,1,0]),u.a0(d,d,[.5*x.width,.5*x.height,1]),u.a1(d,d,x.calculatePosMatrix(r.toUnwrapped()))}function ur(x,r,d,m,y,w){const P=function(q,X,oe){if(q)for(const le of q){const me=X[le];if(me&&me.source===oe&&me.type==="fill-extrusion")return!0}else for(const le in X){const me=X[le];if(me.source===oe&&me.type==="fill-extrusion")return!0}return!1}(y&&y.layers,r,x.id),j=w.maxPitchScaleFactor(),R=x.tilesIn(m,j,P);R.sort(fi);const z=[];for(const q of R)z.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,d,x._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,y,w,j,Sr(x.transform,q.tileID))});const U=function(q){const X={},oe={};for(const le of q){const me=le.queryResults,ae=le.wrappedTileID,je=oe[ae]=oe[ae]||{};for(const Fe in me){const ye=me[Fe],Ae=je[Fe]=je[Fe]||{},$e=X[Fe]=X[Fe]||[];for(const Ke of ye)Ae[Ke.featureIndex]||(Ae[Ke.featureIndex]=!0,$e.push(Ke))}}return X}(z);for(const q in U)U[q].forEach(X=>{const oe=X.feature,le=x.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=le});return U}function fi(x,r){const d=x.tileID,m=r.tileID;return d.overscaledZ-m.overscaledZ||d.canonical.y-m.canonical.y||d.wrap-m.wrap||d.canonical.x-m.canonical.x}class Rr{constructor(r,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const d=r+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,d,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,w){const P={};if(!w)return P;for(const j of y){const R=j.layerIds.map(z=>w.getLayer(z)).filter(Boolean);if(R.length!==0){j.layers=R,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(z=>R.filter(U=>U.id===z)[0]));for(const z of R)P[z.id]=j}}return P}(r.buckets,d.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const w=this.buckets[y];if(w instanceof u.a4){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const w=this.buckets[y];if(w instanceof u.a4&&w.hasRTLText){this.hasRTLText=!0,u.a5();break}}this.queryPadding=0;for(const y in this.buckets){const w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(w))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const y=this.buckets[m];y.uploadPending()&&y.upload(r)}const d=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new pt(r,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new pt(r,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,d,m,y,w,P,j,R,z,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:P,tileSize:this.tileSize,pixelPosMatrix:U,transform:R,params:j,queryPadding:this.queryPadding*z},r,d,m):{}}querySourceFeatures(r,d){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const y=m.loadVTLayers(),w=d&&d.sourceLayer?d.sourceLayer:"",P=y._geojsonTileLayer||y[w];if(!P)return;const j=u.a6(d&&d.filter),{z:R,x:z,y:U}=this.tileID.canonical,q={z:R,x:z,y:U};for(let X=0;X<P.length;X++){const oe=P.feature(X);if(j.needGeometry){const ae=u.a7(oe,!0);if(!j.filter(new u.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!j.filter(new u.a8(this.tileID.overscaledZ),oe))continue;const le=m.getId(oe,w),me=new u.a9(oe,R,z,U,le);me.tile=q,r.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const d=this.expirationTime;if(r.cacheControl){const m=u.aa(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let y=!1;if(this.expirationTime>m)y=!1;else if(d)if(this.expirationTime<d)y=!0;else{const w=this.expirationTime-d;w?this.expirationTime=m+Math.max(w,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!d.style.hasLayer(y))continue;const w=this.buckets[y],P=w.layers[0].sourceLayer||"_geojsonTileLayer",j=m[P],R=r[P];if(!j||!R||Object.keys(R).length===0)continue;w.update(R,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=d&&d.style&&d.style.getLayer(y);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=u.h.now()+r}setDependencies(r,d){const m={};for(const y of d)m[y]=!0;this.dependencies[r]=m}hasDependency(r,d){for(const m of r){const y=this.dependencies[m];if(y){for(const w of d)if(y[w])return!0}}return!1}}class ii{constructor(r,d){this.max=r,this.onRemove=d,this.reset()}reset(){for(const r in this.data)for(const d of this.data[r])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(r,d,m){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const w={value:d,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(r,w)},m)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const d=this.data[r].shift();return d.timeout&&clearTimeout(d.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),d.value}getByKey(r){const d=this.data[r];return d?d[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,d){if(!this.has(r))return this;const m=r.wrapped().key,y=d===void 0?0:this.data[m].indexOf(d),w=this.data[m][y];return this.data[m].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(r){const d=[];for(const m in this.data)for(const y of this.data[m])r(y.value)||d.push(y);for(const m of d)this.remove(m.value.tileID,m)}}class We{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,d,m){const y=String(d);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},u.e(this.stateChanges[r][y],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const w in this.state[r])w!==y&&(this.deletedStates[r][w]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const w in this.state[r][y])m[w]||(this.deletedStates[r][y][w]=null)}else for(const w in m)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][w]===null&&delete this.deletedStates[r][y][w]}removeFeatureState(r,d,m){if(this.deletedStates[r]===null)return;const y=String(d);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&d!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][m]=null);else if(d!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(m in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][m]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,d){const m=String(d),y=u.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const w=this.deletedStates[r][d];if(w===null)return{};for(const P in w)delete y[P]}return y}initializeTileState(r,d){r.setFeatureState(this.state,d)}coalesceChanges(r,d){const m={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const w={};for(const P in this.stateChanges[y])this.state[y][P]||(this.state[y][P]={}),u.e(this.state[y][P],this.stateChanges[y][P]),w[P]=this.state[y][P];m[y]=w}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const w={};if(this.deletedStates[y]===null)for(const P in this.state[y])w[P]={},this.state[y][P]={};else for(const P in this.deletedStates[y]){if(this.deletedStates[y][P]===null)this.state[y][P]={};else for(const j of Object.keys(this.deletedStates[y][P]))delete this.state[y][P][j];w[P]=this.state[y][P]}m[y]=m[y]||{},u.e(m[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const y in r)r[y].setFeatureState(m,d)}}class mr extends u.E{constructor(r,d,m){super(),this.id=r,this.dispatcher=m,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,P,j)=>{const R=new($r(w.type))(y,w,P,j);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(r,d,m,this),this._tiles={},this._cache=new ii(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new We,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const d=this._tiles[r];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,d){return this._source.loadTile(r,d)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const m=this._tiles[d];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ir).map(r=>r.key)}getRenderableIds(r){const d=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&d.push(this._tiles[m]);return r?d.sort((m,y)=>{const w=m.tileID,P=y.tileID,j=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),R=new u.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-P.overscaledZ||R.y-j.y||R.x-j.x}).map(m=>m.tileID.key):d.map(m=>m.tileID).sort(ir).map(m=>m.key)}hasRenderableParent(r){const d=this.findLoadedParent(r,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(r,d){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(d||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,d){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=d),this._loadTile(m,this._tileLoaded.bind(this,m,r,d)))}_tileLoaded(r,d,m,y){if(y)return r.state="errored",void(y.status!==404?this._source.fire(new u.j(y,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=u.h.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(d,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const d=this.getRenderableIds();for(let y=0;y<d.length;y++){const w=d[y];if(r.neighboringTiles&&r.neighboringTiles[w]){const P=this.getTileByID(w);m(r,P),m(P,r)}}function m(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let P=w.tileID.canonical.x-y.tileID.canonical.x;const j=w.tileID.canonical.y-y.tileID.canonical.y,R=Math.pow(2,y.tileID.canonical.z),z=w.tileID.key;P===0&&j===0||Math.abs(j)>1||(Math.abs(P)>1&&(Math.abs(P+R)===1?P+=R:Math.abs(P-R)===1&&(P-=R)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,P,j),y.neighboringTiles&&y.neighboringTiles[z]&&(y.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,d,m,y){for(const w in this._tiles){let P=this._tiles[w];if(y[w]||!P.hasData()||P.tileID.overscaledZ<=d||P.tileID.overscaledZ>m)continue;let j=P.tileID;for(;P&&P.tileID.overscaledZ>d+1;){const z=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[z.key],P&&P.hasData()&&(j=z)}let R=j;for(;R.overscaledZ>d;)if(R=R.scaledTo(R.overscaledZ-1),r[R.key]){y[j.key]=j;break}}}findLoadedParent(r,d){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=d?m:null}for(let m=r.overscaledZ-1;m>=d;m--){const y=r.scaledTo(m),w=this._getLoadedTile(y);if(w)return w}}_getLoadedTile(r){const d=this._tiles[r.key];return d&&d.hasData()?d:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const d=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(d*m*(this._maxTileCacheZoomLevels===null?u.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(r){const d=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,d){const m={};for(const y in this._tiles){const w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),m[w.tileID.key]=w}this._tiles=m;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(r,d){if(this.transform=r,this.terrain=d,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new u.O(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(m=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(m=m.filter(U=>this._source.hasTile(U)))):m=[];const y=r.coveringZoomLevel(this._source),w=Math.max(y-mr.maxOverzooming,this._source.minzoom),P=Math.max(y+mr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const q of m)if(q.canonical.z>this._source.minzoom){const X=q.scaledTo(q.canonical.z-1);U[X.key]=X;const oe=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));U[oe.key]=oe}m=m.concat(Object.values(U))}const j=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(m,y);if(Vn(this._source.type)){const U={},q={},X=Object.keys(R),oe=u.h.now();for(const le of X){const me=R[le],ae=this._tiles[le];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=oe)continue;const je=this.findLoadedParent(me,w);je&&(this._addTile(je.tileID),U[je.tileID.key]=je.tileID),q[le]=me}this._retainLoadedChildren(q,y,P,R);for(const le in U)R[le]||(this._coveredTiles[le]=!0,R[le]=U[le]);if(d){const le={},me={};for(const ae of m)this._tiles[ae.key].hasData()?le[ae.key]=ae:me[ae.key]=ae;for(const ae in me){const je=me[ae].children(this._source.maxzoom);this._tiles[je[0].key]&&this._tiles[je[1].key]&&this._tiles[je[2].key]&&this._tiles[je[3].key]&&(le[je[0].key]=R[je[0].key]=je[0],le[je[1].key]=R[je[1].key]=je[1],le[je[2].key]=R[je[2].key]=je[2],le[je[3].key]=R[je[3].key]=je[3],delete me[ae])}for(const ae in me){const je=this.findLoadedParent(me[ae],this._source.minzoom);if(je){le[je.tileID.key]=R[je.tileID.key]=je.tileID;for(const Fe in le)le[Fe].isChildOf(je.tileID)&&delete le[Fe]}}for(const ae in this._tiles)le[ae]||(this._coveredTiles[ae]=!0)}}for(const U in R)this._tiles[U].clearFadeHold();const z=u.ab(this._tiles,R);for(const U of z){const q=this._tiles[U];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,d){const m={},y={},w=Math.max(d-mr.maxOverzooming,this._source.minzoom),P=Math.max(d+mr.maxUnderzooming,this._source.minzoom),j={};for(const R of r){const z=this._addTile(R);m[R.key]=R,z.hasData()||d<this._source.maxzoom&&(j[R.key]=R)}this._retainLoadedChildren(j,d,P,m);for(const R of r){let z=this._tiles[R.key];if(z.hasData())continue;if(d+1>this._source.maxzoom){const q=R.children(this._source.maxzoom)[0],X=this.getTile(q);if(X&&X.hasData()){m[q.key]=q;continue}}else{const q=R.children(this._source.maxzoom);if(m[q[0].key]&&m[q[1].key]&&m[q[2].key]&&m[q[3].key])continue}let U=z.wasRequested();for(let q=R.overscaledZ-1;q>=w;--q){const X=R.scaledTo(q);if(y[X.key])break;if(y[X.key]=!0,z=this.getTile(X),!z&&U&&(z=this._addTile(X)),z){const oe=z.hasData();if((U||oe)&&(m[X.key]=X),U=z.wasRequested(),oe)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const d=[];let m,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){m=this._loadedParentTiles[y.key];break}d.push(y.key);const w=y.scaledTo(y.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;y=w}for(const w of d)this._loadedParentTiles[w]=m}}_addTile(r){let d=this._tiles[r.key];if(d)return d;d=this._cache.getAndRemove(r),d&&(this._setTileReloadTimer(r.key,d),d.tileID=r,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,d)));const m=d;return d||(d=new Rr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,r.key,d.state))),d.uses++,this._tiles[r.key]=d,m||this._source.fire(new u.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(r,d){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=d.getExpiryTimeout();m&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},m))}_removeTile(r){const d=this._tiles[r];d&&(d.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,d,m){const y=[],w=this.transform;if(!w)return y;const P=m?w.getCameraQueryGeometry(r):r,j=r.map(le=>w.pointCoordinate(le,this.terrain)),R=P.map(le=>w.pointCoordinate(le,this.terrain)),z=this.getIds();let U=1/0,q=1/0,X=-1/0,oe=-1/0;for(const le of R)U=Math.min(U,le.x),q=Math.min(q,le.y),X=Math.max(X,le.x),oe=Math.max(oe,le.y);for(let le=0;le<z.length;le++){const me=this._tiles[z[le]];if(me.holdingForFade())continue;const ae=me.tileID,je=Math.pow(2,w.zoom-me.tileID.overscaledZ),Fe=d*me.queryPadding*u.N/me.tileSize/je,ye=[ae.getTilePoint(new u.U(U,q)),ae.getTilePoint(new u.U(X,oe))];if(ye[0].x-Fe<u.N&&ye[0].y-Fe<u.N&&ye[1].x+Fe>=0&&ye[1].y+Fe>=0){const Ae=j.map(Ke=>ae.getTilePoint(Ke)),$e=R.map(Ke=>ae.getTilePoint(Ke));y.push({tile:me,tileID:ae,queryGeometry:Ae,cameraQueryGeometry:$e,scale:je})}}return y}getVisibleCoordinates(r){const d=this.getRenderableIds(r).map(m=>this._tiles[m].tileID);for(const m of d)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Vn(this._source.type)){const r=u.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=r)return!0}return!1}setFeatureState(r,d,m){this._state.updateState(r=r||"_geojsonTileLayer",d,m)}removeFeatureState(r,d,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",d,m)}getFeatureState(r,d){return this._state.getState(r=r||"_geojsonTileLayer",d)}setDependencies(r,d,m){const y=this._tiles[r];y&&y.setDependencies(d,m)}reloadTilesForDependencies(r,d){for(const m in this._tiles)this._tiles[m].hasDependency(r,d)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(r,d))}}function ir(x,r){const d=Math.abs(2*x.wrap)-+(x.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return x.overscaledZ-r.overscaledZ||m-d||r.canonical.y-x.canonical.y||r.canonical.x-x.canonical.x}function Vn(x){return x==="raster"||x==="image"||x==="video"}mr.maxOverzooming=10,mr.maxUnderzooming=3;const Rn="mapboxgl_preloaded_worker_pool";class yr{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<yr.workerCount;)this.workers.push(new Worker(u.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rn]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(u.h.hardwareConcurrency/2);let qr;function ms(){return qr||(qr=new yr),qr}yr.workerCount=u.ac(globalThis)?Math.max(Math.min(si,3),1):1;class Ui{constructor(r,d){this.reset(r,d)}reset(r,d){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ad(r,0,1);let d=1,m=this._distances[d];const y=r*this.paddedLength+this.padding;for(;m<y&&d<this._distances.length;)m=this._distances[++d];const w=d-1,P=this._distances[w],j=m-P,R=j>0?(y-P)/j:0;return this.points[w].mult(1-R).add(this.points[d].mult(R))}}function jt(x,r){let d=!0;return x==="always"||x!=="never"&&r!=="never"||(d=!1),d}class an{constructor(r,d,m){const y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(d/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=d,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,d,m,y,w){this._forEachCell(d,m,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(r,d,m,y){this._forEachCell(d-y,m-y,d+y,m+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(d),this.circles.push(m),this.circles.push(y)}_insertBoxCell(r,d,m,y,w,P){this.boxCells[w].push(P)}_insertCircleCell(r,d,m,y,w,P){this.circleCells[w].push(P)}_query(r,d,m,y,w,P,j){if(m<0||r>this.width||y<0||d>this.height)return[];const R=[];if(r<=0&&d<=0&&this.width<=m&&this.height<=y){if(w)return[{key:null,x1:r,y1:d,x2:m,y2:y}];for(let z=0;z<this.boxKeys.length;z++)R.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const U=this.circles[3*z],q=this.circles[3*z+1],X=this.circles[3*z+2];R.push({key:this.circleKeys[z],x1:U-X,y1:q-X,x2:U+X,y2:q+X})}}else this._forEachCell(r,d,m,y,this._queryCell,R,{hitTest:w,overlapMode:P,seenUids:{box:{},circle:{}}},j);return R}query(r,d,m,y){return this._query(r,d,m,y,!1,null)}hitTest(r,d,m,y,w,P){return this._query(r,d,m,y,!0,w,P).length>0}hitTestCircle(r,d,m,y,w){const P=r-m,j=r+m,R=d-m,z=d+m;if(j<0||P>this.width||z<0||R>this.height)return!1;const U=[];return this._forEachCell(P,R,j,z,this._queryCellCircle,U,{hitTest:!0,overlapMode:y,circle:{x:r,y:d,radius:m},seenUids:{box:{},circle:{}}},w),U.length>0}_queryCell(r,d,m,y,w,P,j,R){const{seenUids:z,hitTest:U,overlapMode:q}=j,X=this.boxCells[w];if(X!==null){const le=this.bboxes;for(const me of X)if(!z.box[me]){z.box[me]=!0;const ae=4*me,je=this.boxKeys[me];if(r<=le[ae+2]&&d<=le[ae+3]&&m>=le[ae+0]&&y>=le[ae+1]&&(!R||R(je))&&(!U||!jt(q,je.overlapMode))&&(P.push({key:je,x1:le[ae],y1:le[ae+1],x2:le[ae+2],y2:le[ae+3]}),U))return!0}}const oe=this.circleCells[w];if(oe!==null){const le=this.circles;for(const me of oe)if(!z.circle[me]){z.circle[me]=!0;const ae=3*me,je=this.circleKeys[me];if(this._circleAndRectCollide(le[ae],le[ae+1],le[ae+2],r,d,m,y)&&(!R||R(je))&&(!U||!jt(q,je.overlapMode))){const Fe=le[ae],ye=le[ae+1],Ae=le[ae+2];if(P.push({key:je,x1:Fe-Ae,y1:ye-Ae,x2:Fe+Ae,y2:ye+Ae}),U)return!0}}}return!1}_queryCellCircle(r,d,m,y,w,P,j,R){const{circle:z,seenUids:U,overlapMode:q}=j,X=this.boxCells[w];if(X!==null){const le=this.bboxes;for(const me of X)if(!U.box[me]){U.box[me]=!0;const ae=4*me,je=this.boxKeys[me];if(this._circleAndRectCollide(z.x,z.y,z.radius,le[ae+0],le[ae+1],le[ae+2],le[ae+3])&&(!R||R(je))&&!jt(q,je.overlapMode))return P.push(!0),!0}}const oe=this.circleCells[w];if(oe!==null){const le=this.circles;for(const me of oe)if(!U.circle[me]){U.circle[me]=!0;const ae=3*me,je=this.circleKeys[me];if(this._circlesCollide(le[ae],le[ae+1],le[ae+2],z.x,z.y,z.radius)&&(!R||R(je))&&!jt(q,je.overlapMode))return P.push(!0),!0}}}_forEachCell(r,d,m,y,w,P,j,R){const z=this._convertToXCellCoord(r),U=this._convertToYCellCoord(d),q=this._convertToXCellCoord(m),X=this._convertToYCellCoord(y);for(let oe=z;oe<=q;oe++)for(let le=U;le<=X;le++)if(w.call(this,r,d,m,y,this.xCellCount*le+oe,P,j,R))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,d,m,y,w,P){const j=y-r,R=w-d,z=m+P;return z*z>j*j+R*R}_circleAndRectCollide(r,d,m,y,w,P,j){const R=(P-y)/2,z=Math.abs(r-(y+R));if(z>R+m)return!1;const U=(j-w)/2,q=Math.abs(d-(w+U));if(q>U+m)return!1;if(z<=R||q<=U)return!0;const X=z-R,oe=q-U;return X*X+oe*oe<=m*m}}function nt(x,r,d,m,y){const w=u.Z();return r?(u.a0(w,w,[1/y,1/y,1]),d||u.ae(w,w,m.angle)):u.a1(w,m.labelPlaneMatrix,x),w}function Fn(x,r,d,m,y){if(r){const w=u.af(x);return u.a0(w,w,[y,y,1]),d||u.ae(w,w,-m.angle),w}return m.glCoordMatrix}function Dn(x,r,d){let m;d?(m=[x.x,x.y,d(x.x,x.y),1],u.ag(m,m,r)):(m=[x.x,x.y,0,1],se(m,m,r));const y=m[3];return{point:new u.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y}}function br(x,r){return .5+x/r*.5}function dr(x,r){const d=x[0]/x[3],m=x[1]/x[3];return d>=-r[0]&&d<=r[0]&&m>=-r[1]&&m<=r[1]}function gt(x,r,d,m,y,w,P,j,R,z){const U=m?x.textSizeData:x.iconSizeData,q=u.ah(U,d.transform.zoom),X=[256/d.width*2+1,256/d.height*2+1],oe=m?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;oe.clear();const le=x.lineVertexArray,me=m?x.text.placedSymbolArray:x.icon.placedSymbolArray,ae=d.transform.width/d.transform.height;let je=!1;for(let Fe=0;Fe<me.length;Fe++){const ye=me.get(Fe);if(ye.hidden||ye.writingMode===u.ai.vertical&&!je){J(ye.numGlyphs,oe);continue}let Ae;if(je=!1,z?(Ae=[ye.anchorX,ye.anchorY,z(ye.anchorX,ye.anchorY),1],u.ag(Ae,Ae,r)):(Ae=[ye.anchorX,ye.anchorY,0,1],se(Ae,Ae,r)),!dr(Ae,X)){J(ye.numGlyphs,oe);continue}const $e=br(d.transform.cameraToCenterDistance,Ae[3]),Ke=u.aj(U,q,ye),it=P?Ke/$e:Ke*$e,yt=new u.P(ye.anchorX,ye.anchorY),dt=Dn(yt,y,z).point,Nt={projections:{},offsets:{}},en=zn(ye,it,!1,j,r,y,w,x.glyphOffsetArray,le,oe,dt,yt,Nt,ae,R,z);je=en.useVertical,(en.notEnoughRoom||je||en.needsFlipping&&zn(ye,it,!0,j,r,y,w,x.glyphOffsetArray,le,oe,dt,yt,Nt,ae,R,z).notEnoughRoom)&&J(ye.numGlyphs,oe)}m?x.text.dynamicLayoutVertexBuffer.updateData(oe):x.icon.dynamicLayoutVertexBuffer.updateData(oe)}function Kt(x,r,d,m,y,w,P,j,R,z,U,q,X){const oe=j.glyphStartIndex+j.numGlyphs,le=j.lineStartIndex,me=j.lineStartIndex+j.lineLength,ae=r.getoffsetX(j.glyphStartIndex),je=r.getoffsetX(oe-1),Fe=I(x*ae,d,m,y,w,P,j.segment,le,me,R,z,U,q,X);if(!Fe)return null;const ye=I(x*je,d,m,y,w,P,j.segment,le,me,R,z,U,q,X);return ye?{first:Fe,last:ye}:null}function $t(x,r,d,m){return x===u.ai.horizontal&&Math.abs(d.y-r.y)>Math.abs(d.x-r.x)*m?{useVertical:!0}:(x===u.ai.vertical?r.y<d.y:r.x>d.x)?{needsFlipping:!0}:null}function zn(x,r,d,m,y,w,P,j,R,z,U,q,X,oe,le,me){const ae=r/24,je=x.lineOffsetX*ae,Fe=x.lineOffsetY*ae;let ye;if(x.numGlyphs>1){const Ae=x.glyphStartIndex+x.numGlyphs,$e=x.lineStartIndex,Ke=x.lineStartIndex+x.lineLength,it=Kt(ae,j,je,Fe,d,U,q,x,R,w,X,le,me);if(!it)return{notEnoughRoom:!0};const yt=Dn(it.first.point,P,me).point,dt=Dn(it.last.point,P,me).point;if(m&&!d){const Nt=$t(x.writingMode,yt,dt,oe);if(Nt)return Nt}ye=[it.first];for(let Nt=x.glyphStartIndex+1;Nt<Ae-1;Nt++)ye.push(I(ae*j.getoffsetX(Nt),je,Fe,d,U,q,x.segment,$e,Ke,R,w,X,le,me));ye.push(it.last)}else{if(m&&!d){const $e=Dn(q,y,me).point,Ke=x.lineStartIndex+x.segment+1,it=new u.P(R.getx(Ke),R.gety(Ke)),yt=Dn(it,y,me),dt=yt.signedDistanceFromCamera>0?yt.point:Kr(q,it,$e,1,y,me),Nt=$t(x.writingMode,$e,dt,oe);if(Nt)return Nt}const Ae=I(ae*j.getoffsetX(x.glyphStartIndex),je,Fe,d,U,q,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,R,w,X,le,me);if(!Ae)return{notEnoughRoom:!0};ye=[Ae]}for(const Ae of ye)u.ak(z,Ae.point,Ae.angle);return{}}function Kr(x,r,d,m,y,w){const P=Dn(x.add(x.sub(r)._unit()),y,w).point,j=d.sub(P);return d.add(j._mult(m/j.mag()))}function pn(x,r){const{projectionCache:d,lineVertexArray:m,labelPlaneMatrix:y,tileAnchorPoint:w,distanceFromAnchor:P,getElevation:j,previousVertex:R,direction:z,absOffsetX:U}=r;if(d.projections[x])return d.projections[x];const q=new u.P(m.getx(x),m.gety(x)),X=Dn(q,y,j);if(X.signedDistanceFromCamera>0)return d.projections[x]=X.point,X.point;const oe=x-z;return Kr(P===0?w:new u.P(m.getx(oe),m.gety(oe)),q,R,U-P+1,y,j)}function ai(x,r,d){return x._unit()._perp()._mult(r*d)}function fe(x,r,d,m,y,w,P,j){const{projectionCache:R,direction:z}=j;if(R.offsets[x])return R.offsets[x];const U=d.add(r);if(x+z<m||x+z>=y)return R.offsets[x]=U,U;const q=pn(x+z,j),X=ai(q.sub(d),P,z),oe=d.add(X),le=q.add(X);return R.offsets[x]=u.al(w,U,oe,le)||U,R.offsets[x]}function I(x,r,d,m,y,w,P,j,R,z,U,q,X,oe){const le=m?x-r:x+r;let me=le>0?1:-1,ae=0;m&&(me*=-1,ae=Math.PI),me<0&&(ae+=Math.PI);let je,Fe,ye=me>0?j+P:j+P+1,Ae=y,$e=y,Ke=0,it=0;const yt=Math.abs(le),dt=[];let Nt;for(;Ke+it<=yt;){if(ye+=me,ye<j||ye>=R)return null;Ke+=it,$e=Ae,Fe=je;const Mt={projectionCache:q,lineVertexArray:z,labelPlaneMatrix:U,tileAnchorPoint:w,distanceFromAnchor:Ke,getElevation:oe,previousVertex:$e,direction:me,absOffsetX:yt};if(Ae=pn(ye,Mt),d===0)dt.push($e),Nt=Ae.sub($e);else{let xn;const tn=Ae.sub($e);xn=tn.mag()===0?ai(pn(ye+me,Mt).sub(Ae),d,me):ai(tn,d,me),Fe||(Fe=$e.add(xn)),je=fe(ye,xn,Ae,j,R,Fe,d,Mt),dt.push(Fe),Nt=je.sub(Fe)}it=Nt.mag()}const en=Nt._mult((yt-Ke)/it)._add(Fe||$e),Qn=ae+Math.atan2(Ae.y-$e.y,Ae.x-$e.x);return dt.push(en),{point:en,angle:X?Qn:0,path:dt}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function J(x,r){for(let d=0;d<x;d++){const m=r.length;r.resize(m+4),r.float32.set(G,3*m)}}function se(x,r,d){const m=r[0],y=r[1];return x[0]=d[0]*m+d[4]*y+d[12],x[1]=d[1]*m+d[5]*y+d[13],x[3]=d[3]*m+d[7]*y+d[15],x}const he=100;class Ne{constructor(r,d=new an(r.width+200,r.height+200,25),m=new an(r.width+200,r.height+200,25)){this.transform=r,this.grid=d,this.ignoredGrid=m,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+he,this.screenBottomBoundary=r.height+he,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,d,m,y,w,P){const j=this.projectAndGetPerspectiveRatio(y,r.anchorPointX,r.anchorPointY,P),R=m*j.perspectiveRatio,z=r.x1*R+j.point.x,U=r.y1*R+j.point.y,q=r.x2*R+j.point.x,X=r.y2*R+j.point.y;return!this.isInsideGrid(z,U,q,X)||d!=="always"&&this.grid.hitTest(z,U,q,X,d,w)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,U,q,X],offscreen:this.isOffscreen(z,U,q,X)}}placeCollisionCircles(r,d,m,y,w,P,j,R,z,U,q,X,oe,le){const me=[],ae=new u.P(d.anchorX,d.anchorY),je=Dn(ae,P,le),Fe=br(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),ye=(U?w/Fe:w*Fe)/u.ap,Ae=Dn(ae,j,le).point,$e=Kt(ye,y,d.lineOffsetX*ye,d.lineOffsetY*ye,!1,Ae,ae,d,m,j,{projections:{},offsets:{}},!1,le);let Ke=!1,it=!1,yt=!0;if($e){const dt=.5*X*Fe+oe,Nt=new u.P(-100,-100),en=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Qn=new Ui,Mt=$e.first,xn=$e.last;let tn=[];for(let On=Mt.path.length-1;On>=1;On--)tn.push(Mt.path[On]);for(let On=1;On<xn.path.length;On++)tn.push(xn.path[On]);const kr=2.5*dt;if(R){const On=tn.map(er=>Dn(er,R,le));tn=On.some(er=>er.signedDistanceFromCamera<=0)?[]:On.map(er=>er.point)}let Xn=[];if(tn.length>0){const On=tn[0].clone(),er=tn[0].clone();for(let Ni=1;Ni<tn.length;Ni++)On.x=Math.min(On.x,tn[Ni].x),On.y=Math.min(On.y,tn[Ni].y),er.x=Math.max(er.x,tn[Ni].x),er.y=Math.max(er.y,tn[Ni].y);Xn=On.x>=Nt.x&&er.x<=en.x&&On.y>=Nt.y&&er.y<=en.y?[tn]:er.x<Nt.x||On.x>en.x||er.y<Nt.y||On.y>en.y?[]:u.am([tn],Nt.x,Nt.y,en.x,en.y)}for(const On of Xn){Qn.reset(On,.25*dt);let er=0;er=Qn.length<=.5*dt?1:Math.ceil(Qn.paddedLength/kr)+1;for(let Ni=0;Ni<er;Ni++){const Wr=Ni/Math.max(er-1,1),gr=Qn.lerp(Wr),$i=gr.x+he,pi=gr.y+he;me.push($i,pi,dt,0);const Ps=$i-dt,Nr=pi-dt,so=$i+dt,Na=pi+dt;if(yt=yt&&this.isOffscreen(Ps,Nr,so,Na),it=it||this.isInsideGrid(Ps,Nr,so,Na),r!=="always"&&this.grid.hitTestCircle($i,pi,dt,r,q)&&(Ke=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!z&&Ke||!it||Fe<this.perspectiveRatioCutoff?[]:me,offscreen:yt,collisionDetected:Ke}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let m=1/0,y=1/0,w=-1/0,P=-1/0;for(const U of r){const q=new u.P(U.x+he,U.y+he);m=Math.min(m,q.x),y=Math.min(y,q.y),w=Math.max(w,q.x),P=Math.max(P,q.y),d.push(q)}const j=this.grid.query(m,y,w,P).concat(this.ignoredGrid.query(m,y,w,P)),R={},z={};for(const U of j){const q=U.key;if(R[q.bucketInstanceId]===void 0&&(R[q.bucketInstanceId]={}),R[q.bucketInstanceId][q.featureIndex])continue;const X=[new u.P(U.x1,U.y1),new u.P(U.x2,U.y1),new u.P(U.x2,U.y2),new u.P(U.x1,U.y2)];u.an(d,X)&&(R[q.bucketInstanceId][q.featureIndex]=!0,z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]=[]),z[q.bucketInstanceId].push(q.featureIndex))}return z}insertCollisionBox(r,d,m,y,w,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:P,overlapMode:d},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,d,m,y,w,P){const j=m?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:w,collisionGroupID:P,overlapMode:d};for(let z=0;z<r.length;z+=4)j.insertCircle(R,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,d,m,y){let w;return y?(w=[d,m,y(d,m),1],u.ag(w,w,r)):(w=[d,m,0,1],se(w,w,r)),{point:new u.P((w[0]/w[3]+1)/2*this.transform.width+he,(-w[1]/w[3]+1)/2*this.transform.height+he),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}}isOffscreen(r,d,m,y){return m<he||r>=this.screenRightBoundary||y<he||d>this.screenBottomBoundary}isInsideGrid(r,d,m,y){return m>=0&&r<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const r=u.ao([]);return u.$(r,r,[-100,-100,0]),r}}function xe(x,r,d){return r*(u.N/(x.tileSize*Math.pow(2,d-x.tileID.overscaledZ)))}class ge{constructor(r,d,m,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?d:-d))):y&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Te{constructor(r,d,m,y,w){this.text=new ge(r?r.text:null,d,m,w),this.icon=new ge(r?r.icon:null,d,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qe{constructor(r,d,m){this.text=r,this.icon=d,this.skipFade=m}}class ne{constructor(){this.invProjMatrix=u.Z(),this.viewportMatrix=u.Z(),this.circles=[]}}class Ee{constructor(r,d,m,y,w){this.bucketInstanceId=r,this.featureIndex=d,this.sourceLayerIndex=m,this.bucketIndex=y,this.tileID=w}}class te{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const d=++this.maxGroupID;this.collisionGroups[r]={ID:d,predicate:m=>m.collisionGroupID===d}}return this.collisionGroups[r]}}function ke(x,r,d,m,y){const{horizontalAlign:w,verticalAlign:P}=u.au(x);return new u.P(-(w-.5)*r+m[0]*y,-(P-.5)*d+m[1]*y)}function Be(x,r,d,m,y,w){const{x1:P,x2:j,y1:R,y2:z,anchorPointX:U,anchorPointY:q}=x,X=new u.P(r,d);return m&&X._rotate(y?w:-w),{x1:P+X.x,y1:R+X.y,x2:j+X.x,y2:z+X.y,anchorPointX:U,anchorPointY:q}}class Ze{constructor(r,d,m,y,w){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new Ne(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new te(y),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,d,m,y){const w=m.getBucket(d),P=m.latestFeatureIndex;if(!w||!P||d.id!==w.layerIds[0])return;const j=m.collisionBoxArray,R=w.layers[0].layout,z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/u.N,q=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),X=R.get("text-pitch-alignment")==="map",oe=R.get("text-rotation-alignment")==="map",le=xe(m,1,this.transform.zoom),me=nt(q,X,oe,this.transform,le);let ae=null;if(X){const Fe=Fn(q,X,oe,this.transform,le);ae=u.a1([],this.transform.labelPlaneMatrix,Fe)}this.retainedQueryData[w.bucketInstanceId]=new Ee(w.bucketInstanceId,P,w.sourceLayerIndex,w.index,m.tileID);const je={bucket:w,layout:R,posMatrix:q,textLabelPlaneMatrix:me,labelToScreenMatrix:ae,scale:z,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:u.ah(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(const Fe of w.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Ae,symbolInstanceEnd:$e}=Fe;r.push({sortKey:ye,symbolInstanceStart:Ae,symbolInstanceEnd:$e,parameters:je})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:je})}attemptAnchorPlacement(r,d,m,y,w,P,j,R,z,U,q,X,oe,le,me,ae){const je=u.aq[r.textAnchor],Fe=[r.textOffset0,r.textOffset1],ye=ke(je,m,y,Fe,w),Ae=this.collisionIndex.placeCollisionBox(Be(d,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,ae);if((!me||this.collisionIndex.placeCollisionBox(Be(me,ye.x,ye.y,P,j,this.transform.angle),q,R,z,U.predicate,ae).box.length!==0)&&Ae.box.length>0){let $e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&($e=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Fe,width:m,height:y,anchor:je,textBoxScale:w,prevAnchor:$e},this.markUsedJustification(oe,je,X,le),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,le,X),this.placedOrientations[X.crossTileID]=le),{shift:ye,placedGlyphBoxes:Ae}}}placeLayerBucketPart(r,d,m){const{bucket:y,layout:w,posMatrix:P,textLabelPlaneMatrix:j,labelToScreenMatrix:R,textPixelRatio:z,holdingForFade:U,collisionBoxArray:q,partiallyEvaluatedTextSize:X,collisionGroup:oe}=r.parameters,le=w.get("text-optional"),me=w.get("icon-optional"),ae=u.ar(w,"text-overlap","text-allow-overlap"),je=ae==="always",Fe=u.ar(w,"icon-overlap","icon-allow-overlap"),ye=Fe==="always",Ae=w.get("text-rotation-alignment")==="map",$e=w.get("text-pitch-alignment")==="map",Ke=w.get("icon-text-fit")!=="none",it=w.get("symbol-z-order")==="viewport-y",yt=je&&(ye||!y.hasIconData()||me),dt=ye&&(je||!y.hasTextData()||le);!y.collisionArrays&&q&&y.deserializeCollisionBoxes(q);const Nt=this.retainedQueryData[y.bucketInstanceId].tileID,en=this.terrain?(Mt,xn)=>this.terrain.getElevation(Nt,Mt,xn):null,Qn=(Mt,xn)=>{var tn,kr;if(d[Mt.crossTileID])return;if(U)return void(this.placements[Mt.crossTileID]=new Qe(!1,!1,!1));let Xn=!1,On=!1,er=!0,Ni=null,Wr={box:null,offscreen:null},gr={box:null},$i=null,pi=null,Ps=null,Nr=0,so=0,Na=0;xn.textFeatureIndex?Nr=xn.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Nr=Mt.featureIndex),xn.verticalTextFeatureIndex&&(so=xn.verticalTextFeatureIndex);const tl=xn.textBox;if(tl){const Er=Si=>{let qi=u.ai.horizontal;if(y.allowVerticalPlacement&&!Si&&this.prevPlacement){const Zs=this.prevPlacement.placedOrientations[Mt.crossTileID];Zs&&(this.placedOrientations[Mt.crossTileID]=Zs,qi=Zs,this.markUsedOrientation(y,qi,Mt))}return qi},kt=(Si,qi)=>{if(y.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&xn.verticalTextBox){for(const Zs of y.writingModes)if(Zs===u.ai.vertical?(Wr=qi(),gr=Wr):Wr=Si(),Wr&&Wr.box&&Wr.box.length)break}else Wr=Si()},gi=Mt.textAnchorOffsetStartIndex,us=Mt.textAnchorOffsetEndIndex;if(us===gi){const Si=(qi,Zs)=>{const Ei=this.collisionIndex.placeCollisionBox(qi,ae,z,P,oe.predicate,en);return Ei&&Ei.box&&Ei.box.length&&(this.markUsedOrientation(y,Zs,Mt),this.placedOrientations[Mt.crossTileID]=Zs),Ei};kt(()=>Si(tl,u.ai.horizontal),()=>{const qi=xn.verticalTextBox;return y.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&qi?Si(qi,u.ai.vertical):{box:null,offscreen:null}}),Er(Wr&&Wr.box&&Wr.box.length)}else{let Si=u.aq[(kr=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[Mt.crossTileID])===null||kr===void 0?void 0:kr.anchor];const qi=(Ei,zl,Mi)=>{const $f=Ei.x2-Ei.x1,qf=Ei.y2-Ei.y1,Tp=Mt.textBoxScale,Nd=Ke&&Fe==="never"?zl:null;let Ks={box:[],offscreen:!1},Sa=ae==="never"?1:2,ao="never";Si&&Sa++;for(let Ea=0;Ea<Sa;Ea++){for(let oo=gi;oo<us;oo++){const Lh=y.textAnchorOffsets.get(oo);if(Si&&Lh.textAnchor!==Si)continue;const ko=this.attemptAnchorPlacement(Lh,Ei,$f,qf,Tp,Ae,$e,z,P,oe,ao,Mt,y,Mi,Nd,en);if(ko&&(Ks=ko.placedGlyphBoxes,Ks&&Ks.box&&Ks.box.length))return Xn=!0,Ni=ko.shift,Ks}Si?Si=null:ao=ae}return Ks};kt(()=>qi(tl,xn.iconBox,u.ai.horizontal),()=>{const Ei=xn.verticalTextBox;return y.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&Mt.numVerticalGlyphVertices>0&&Ei?qi(Ei,xn.verticalIconBox,u.ai.vertical):{box:null,offscreen:null}}),Wr&&(Xn=Wr.box,er=Wr.offscreen);const Zs=Er(Wr&&Wr.box);if(!Xn&&this.prevPlacement){const Ei=this.prevPlacement.variableOffsets[Mt.crossTileID];Ei&&(this.variableOffsets[Mt.crossTileID]=Ei,this.markUsedJustification(y,Ei.anchor,Mt,Zs))}}}if($i=Wr,Xn=$i&&$i.box&&$i.box.length>0,er=$i&&$i.offscreen,Mt.useRuntimeCollisionCircles){const Er=y.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),kt=u.aj(y.textSizeData,X,Er),gi=w.get("text-padding");pi=this.collisionIndex.placeCollisionCircles(ae,Er,y.lineVertexArray,y.glyphOffsetArray,kt,P,j,R,m,$e,oe.predicate,Mt.collisionCircleDiameter,gi,en),pi.circles.length&&pi.collisionDetected&&!m&&u.w("Collisions detected, but collision boxes are not shown"),Xn=je||pi.circles.length>0&&!pi.collisionDetected,er=er&&pi.offscreen}if(xn.iconFeatureIndex&&(Na=xn.iconFeatureIndex),xn.iconBox){const Er=kt=>{const gi=Ke&&Ni?Be(kt,Ni.x,Ni.y,Ae,$e,this.transform.angle):kt;return this.collisionIndex.placeCollisionBox(gi,Fe,z,P,oe.predicate,en)};gr&&gr.box&&gr.box.length&&xn.verticalIconBox?(Ps=Er(xn.verticalIconBox),On=Ps.box.length>0):(Ps=Er(xn.iconBox),On=Ps.box.length>0),er=er&&Ps.offscreen}const Ol=le||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,za=me||Mt.numIconVertices===0;if(Ol||za?za?Ol||(On=On&&Xn):Xn=On&&Xn:On=Xn=On&&Xn,Xn&&$i&&$i.box&&this.collisionIndex.insertCollisionBox($i.box,ae,w.get("text-ignore-placement"),y.bucketInstanceId,gr&&gr.box&&so?so:Nr,oe.ID),On&&Ps&&this.collisionIndex.insertCollisionBox(Ps.box,Fe,w.get("icon-ignore-placement"),y.bucketInstanceId,Na,oe.ID),pi&&(Xn&&this.collisionIndex.insertCollisionCircles(pi.circles,ae,w.get("text-ignore-placement"),y.bucketInstanceId,Nr,oe.ID),m)){const Er=y.bucketInstanceId;let kt=this.collisionCircleArrays[Er];kt===void 0&&(kt=this.collisionCircleArrays[Er]=new ne);for(let gi=0;gi<pi.circles.length;gi+=4)kt.circles.push(pi.circles[gi+0]),kt.circles.push(pi.circles[gi+1]),kt.circles.push(pi.circles[gi+2]),kt.circles.push(pi.collisionDetected?1:0)}if(Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new Qe(Xn||yt,On||dt,er||y.justReloaded),d[Mt.crossTileID]=!0};if(it){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=y.getSortedSymbolIndexes(this.transform.angle);for(let xn=Mt.length-1;xn>=0;--xn){const tn=Mt[xn];Qn(y.symbolInstances.get(tn),y.collisionArrays[tn])}}else for(let Mt=r.symbolInstanceStart;Mt<r.symbolInstanceEnd;Mt++)Qn(y.symbolInstances.get(Mt),y.collisionArrays[Mt]);if(m&&y.bucketInstanceId in this.collisionCircleArrays){const Mt=this.collisionCircleArrays[y.bucketInstanceId];u.as(Mt.invProjMatrix,P),Mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(r,d,m,y){let w;w=y===u.ai.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[u.at(d)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const j of P)j>=0&&(r.text.placedSymbolArray.get(j).crossTileID=w>=0&&j!==w?0:m.crossTileID)}markUsedOrientation(r,d,m){const y=d===u.ai.horizontal||d===u.ai.horizontalOnly?d:0,w=d===u.ai.vertical?d:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const j of P)r.text.placedSymbolArray.get(j).placedOrientation=y;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let m=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const y=d?d.symbolFadeChange(r):1,w=d?d.opacities:{},P=d?d.variableOffsets:{},j=d?d.placedOrientations:{};for(const R in this.placements){const z=this.placements[R],U=w[R];U?(this.opacities[R]=new Te(U,y,z.text,z.icon),m=m||z.text!==U.text.placed||z.icon!==U.icon.placed):(this.opacities[R]=new Te(null,y,z.text,z.icon,z.skipFade),m=m||z.text||z.icon)}for(const R in w){const z=w[R];if(!this.opacities[R]){const U=new Te(z,y,!1,!1);U.isHidden()||(this.opacities[R]=U,m=m||z.text.placed||z.icon.placed)}}for(const R in P)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=P[R]);for(const R in j)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=j[R]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:r)}updateLayerOpacities(r,d){const m={};for(const y of d){const w=y.getBucket(r);w&&y.latestFeatureIndex&&r.id===w.layerIds[0]&&this.updateBucketOpacities(w,m,y.collisionBoxArray)}}updateBucketOpacities(r,d,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],w=y.layout,P=new Te(null,0,!1,!1,!0),j=w.get("text-allow-overlap"),R=w.get("icon-allow-overlap"),z=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=w.get("text-rotation-alignment")==="map",q=w.get("text-pitch-alignment")==="map",X=w.get("icon-text-fit")!=="none",oe=new Te(null,0,j&&(R||!r.hasIconData()||w.get("icon-optional")),R&&(j||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const le=(me,ae,je)=>{for(let Fe=0;Fe<ae/4;Fe++)me.opacityVertexArray.emplaceBack(je);me.hasVisibleVertices=me.hasVisibleVertices||je!==Yr};for(let me=0;me<r.symbolInstances.length;me++){const ae=r.symbolInstances.get(me),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:Fe,crossTileID:ye}=ae;let Ae=this.opacities[ye];d[ye]?Ae=P:Ae||(Ae=oe,this.opacities[ye]=Ae),d[ye]=!0;const $e=ae.numIconVertices>0,Ke=this.placedOrientations[ae.crossTileID],it=Ke===u.ai.vertical,yt=Ke===u.ai.horizontal||Ke===u.ai.horizontalOnly;if(je>0||Fe>0){const dt=Zn(Ae.text);le(r.text,je,it?Yr:dt),le(r.text,Fe,yt?Yr:dt);const Nt=Ae.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(Mt=>{Mt>=0&&(r.text.placedSymbolArray.get(Mt).hidden=Nt||it?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=Nt||yt?1:0);const en=this.variableOffsets[ae.crossTileID];en&&this.markUsedJustification(r,en.anchor,ae,Ke);const Qn=this.placedOrientations[ae.crossTileID];Qn&&(this.markUsedJustification(r,"left",ae,Qn),this.markUsedOrientation(r,Qn,ae))}if($e){const dt=Zn(Ae.icon),Nt=!(X&&ae.verticalPlacedIconSymbolIndex&&it);ae.placedIconSymbolIndex>=0&&(le(r.icon,ae.numIconVertices,Nt?dt:Yr),r.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=Ae.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(le(r.icon,ae.numVerticalIconVertices,Nt?Yr:dt),r.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=Ae.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const dt=r.collisionArrays[me];if(dt){let Nt=new u.P(0,0);if(dt.textBox||dt.verticalTextBox){let Qn=!0;if(z){const Mt=this.variableOffsets[ye];Mt?(Nt=ke(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textBoxScale),U&&Nt._rotate(q?this.transform.angle:-this.transform.angle)):Qn=!1}dt.textBox&&ct(r.textCollisionBox.collisionVertexArray,Ae.text.placed,!Qn||it,Nt.x,Nt.y),dt.verticalTextBox&&ct(r.textCollisionBox.collisionVertexArray,Ae.text.placed,!Qn||yt,Nt.x,Nt.y)}const en=!!(!yt&&dt.verticalIconBox);dt.iconBox&&ct(r.iconCollisionBox.collisionVertexArray,Ae.icon.placed,en,X?Nt.x:0,X?Nt.y:0),dt.verticalIconBox&&ct(r.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!en,X?Nt.x:0,X?Nt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=me.invProjMatrix,r.placementViewportMatrix=me.viewportMatrix,r.collisionCircleArray=me.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,d){const m=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function ct(x,r,d,m,y){x.emplaceBack(r?1:0,d?1:0,m||0,y||0),x.emplaceBack(r?1:0,d?1:0,m||0,y||0),x.emplaceBack(r?1:0,d?1:0,m||0,y||0),x.emplaceBack(r?1:0,d?1:0,m||0,y||0)}const mt=Math.pow(2,25),Ut=Math.pow(2,24),Ct=Math.pow(2,17),qt=Math.pow(2,16),En=Math.pow(2,9),_n=Math.pow(2,8),qn=Math.pow(2,1);function Zn(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const r=x.placed?1:0,d=Math.floor(127*x.opacity);return d*mt+r*Ut+d*Ct+r*qt+d*En+r*_n+d*qn+r}const Yr=0;class Hr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,d,m,y,w){const P=this._bucketParts;for(;this._currentTileIndex<r.length;)if(d.getBucketParts(P,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((j,R)=>j.sortKey-R.sortKey));this._currentPartIndex<P.length;)if(d.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class kn{constructor(r,d,m,y,w,P,j,R){this.placement=new Ze(r,d,P,j,R),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(r,d,m){const y=u.h.now(),w=()=>!this._forceFullPlacement&&u.h.now()-y>2;for(;this._currentPlacementIndex>=0;){const P=d[r[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=j)&&(!P.maxzoom||P.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Hr(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const $s=512/u.N/2;class gc{constructor(r,d,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const y=new Map;for(let w=0;w<d.length;w++){const P=d.get(w),j=P.key,R=y.get(j);R?R.push(P):y.set(j,[P])}for(const[w,P]of y){const j={positions:P.map(R=>({x:Math.floor(R.anchorX*$s),y:Math.floor(R.anchorY*$s)})),crossTileIDs:P.map(R=>R.crossTileID)};if(j.positions.length>128){const R=new u.av(j.positions.length,16,Uint16Array);for(const{x:z,y:U}of j.positions)R.add(z,U);R.finish(),delete j.positions,j.index=R}this._symbolsByKey[w]=j}}getScaledCoordinates(r,d){const{x:m,y,z:w}=this.tileID.canonical,{x:P,y:j,z:R}=d.canonical,z=$s/Math.pow(2,R-w),U=(j*u.N+r.anchorY)*z,q=y*u.N*$s;return{x:Math.floor((P*u.N+r.anchorX)*z-m*u.N*$s),y:Math.floor(U-q)}}findMatches(r,d,m){const y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let w=0;w<r.length;w++){const P=r.get(w);if(P.crossTileID)continue;const j=this._symbolsByKey[P.key];if(!j)continue;const R=this.getScaledCoordinates(P,d);if(j.index){const z=j.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(const U of z){const q=j.crossTileIDs[U];if(!m[q]){m[q]=!0,P.crossTileID=q;break}}}else if(j.positions)for(let z=0;z<j.positions.length;z++){const U=j.positions[z],q=j.crossTileIDs[z];if(Math.abs(U.x-R.x)<=y&&Math.abs(U.y-R.y)<=y&&!m[q]){m[q]=!0,P.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class xr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class eo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const d=Math.round((r-this.lng)/360);if(d!==0)for(const m in this.indexes){const y=this.indexes[m],w={};for(const P in y){const j=y[P];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+d),w[j.tileID.key]=j}this.indexes[m]=w}this.lng=r}addBucket(r,d,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let w=0;w<d.symbolInstances.length;w++)d.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const w in this.indexes){const P=this.indexes[w];if(Number(w)>r.overscaledZ)for(const j in P){const R=P[j];R.tileID.isChildOf(r)&&R.findMatches(d.symbolInstances,r,y)}else{const j=P[r.scaledTo(Number(w)).key];j&&j.findMatches(d.symbolInstances,r,y)}}for(let w=0;w<d.symbolInstances.length;w++){const P=d.symbolInstances.get(w);P.crossTileID||(P.crossTileID=m.generate(),y[P.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new gc(r,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(r,d){for(const m of d.getCrossTileIDsLists())for(const y of m)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let d=!1;for(const m in this.indexes){const y=this.indexes[m];for(const w in y)r[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,y[w]),delete y[w],d=!0)}return d}}class Uo{constructor(){this.layerIndexes={},this.crossTileIDs=new xr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,d,m){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new eo);let w=!1;const P={};y.handleWrapJump(m);for(const j of d){const R=j.getBucket(r);R&&r.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(j.tileID,R,this.crossTileIDs)&&(w=!0),P[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(P)&&(w=!0),w}pruneUnusedLayers(r){const d={};r.forEach(m=>{d[m]=!0});for(const m in this.layerIndexes)d[m]||delete this.layerIndexes[m]}}const Vi=(x,r)=>u.x(x,r&&r.filter(d=>d.identifier!=="source.canvas")),as=u.F(u.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),su=u.F(u.ax,["setCenter","setZoom","setBearing","setPitch"]),ps=u.aw();class Oi extends u.E{constructor(r,d={}){super(),this.map=r,this.dispatcher=new Bn(ms(),this,r._getMapId()),this.imageManager=new ft,this.imageManager.setEventedParent(this),this.glyphManager=new hn(r._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ln(256,512),this.crossTileSymbolIndex=new Uo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.az());const m=this;this._rtlTextPluginCallback=Oi.registerForPluginStateChange(y=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(w,P)=>{if(u.aA(w),P&&P.every(j=>j))for(const j in m.sourceCaches){const R=m.sourceCaches[j].getSource().type;R!=="vector"&&R!=="geojson"||m.sourceCaches[j].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const w=this.sourceCaches[y.sourceId];if(!w)return;const P=w.getSource();if(P&&P.vectorLayerIds)for(const j in this._layers){const R=this._layers[j];R.source===P.id&&this._validateLayer(R)}})}loadURL(r,d={},m){this.fire(new u.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const y=this.map._requestManager.transformRequest(r,Se.Style);this._request=u.f(y,(w,P)=>{this._request=null,w?this.fire(new u.j(w)):P&&this._load(P,d,m)})}loadJSON(r,d={},m){this.fire(new u.k("dataloading",{dataType:"style"})),this._request=u.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(r,d,m)})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(ps,{validate:!1})}_load(r,d,m){var y;const w=d.transformStyle?d.transformStyle(m,r):r;if(!d.validate||!Vi(this,u.y(w))){this._loaded=!0,this.stylesheet=w;for(const P in w.sources)this.addSource(P,w.sources[P],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new bn(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of r){const m=u.aC(d);m.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=m}}_loadSprite(r,d=!1,m=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(y,w,P,j){const R=ut(y),z=R.length,U=P>1?"@2x":"",q={},X={},oe={};for(const{id:le,url:me}of R){const ae=w.transformRequest(w.normalizeSpriteURL(me,U,".json"),Se.SpriteJSON),je=`${le}_${ae.url}`;q[je]=u.f(ae,(Ae,$e)=>{delete q[je],X[le]=$e,Tt(j,X,oe,Ae,z)});const Fe=w.transformRequest(w.normalizeSpriteURL(me,U,".png"),Se.SpriteImage),ye=`${le}_${Fe.url}`;q[ye]=Pe.getImage(Fe,(Ae,$e)=>{delete q[ye],oe[le]=$e,Tt(j,X,oe,Ae,z)})}return{cancel(){for(const le of Object.values(q))le.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(y,w)=>{if(this._spriteRequest=null,y)this.fire(new u.j(y));else if(w)for(const P in w){this._spritesImagesIds[P]=[];const j=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(R=>!(R in w)):[];for(const R of j)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in w[P]){const z=P==="default"?R:`${P}:${R}`;this._spritesImagesIds[P].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,w[P][R],!1):this.imageManager.addImage(z,w[P][R]),d&&(this._changedImages[z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),m&&m(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const d=this.sourceCaches[r.source];if(!d)return;const m=r.sourceLayer;if(!m)return;const y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(m)===-1)&&this.fire(new u.j(new Error(`Source layer "${m}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(d);const m=[];for(const y of r)d[y]&&m.push(d[y]);return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const d=Object.keys(this._layers);for(const m of d){const y=this._layers[m];y.type!=="custom"&&(r[m]=y.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const d=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(const P in this._updatedSources){const j=this._updatedSources[P];if(j==="reload")this._reloadSource(P);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const m={};for(const y in this.sourceCaches){const w=this.sourceCaches[y];m[y]=w.used,w.used=!1}for(const y of this._order){const w=this._layers[y];w.recalculate(r,this._availableImages),!w.isHidden(r.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const y in m){const w=this.sourceCaches[y];m[y]!==w.used&&w.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.z=r.zoom,d&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,d={}){this._checkLoaded();const m=this.serialize();if(r=d.transformStyle?d.transformStyle(m,r):r,Vi(this,u.y(r)))return!1;(r=u.aD(r)).layers=u.aB(r.layers);const y=u.aE(m,r).filter(P=>!(P.command in su));if(y.length===0)return!1;const w=y.filter(P=>!(P.command in as));if(w.length>0)throw new Error(`Unimplemented: ${w.map(P=>P.command).join(", ")}.`);for(const P of y)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,d){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,d),this._afterImageUpdated(r)}updateImage(r,d){this.imageManager.updateImage(r,d)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,d,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(u.y.source,`sources.${r}`,d,null,m))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const y=this.sourceCaches[r]=new mr(r,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const d=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],d.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,d){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(d),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,d,m={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new u.j(new Error(`Layer "${y}" already exists on this map.`)));let w;if(r.type==="custom"){if(Vi(this,u.aF(r)))return;w=u.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=u.aD(r),r=u.e(r,{source:y})),this._validate(u.y.layer,`layers.${y}`,r,{arrayIndex:-1},m))return;w=u.aC(r),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}const P=d?this._order.indexOf(d):this._order.length;if(d&&P===-1)this.fire(new u.j(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(P,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){const j=this._removedLayers[y];delete this._removedLayers[y],j.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(r,d){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===d)return;const m=this._order.indexOf(r);this._order.splice(m,1);const y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${d}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const d=this._layers[r];if(!d)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));d.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=d,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],d.onRemove&&d.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,d,m){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===d&&y.maxzoom===m||(d!=null&&(y.minzoom=d),m!=null&&(y.maxzoom=m),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,d,m={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!u.aG(y.filter,d))return d==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(u.y.filter,`layers.${y.id}.filter`,d,null,m)||(y.filter=u.aD(d),this._updateLayer(y)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aD(this.getLayer(r).filter)}setLayoutProperty(r,d,m,y={}){this._checkLoaded();const w=this.getLayer(r);w?u.aG(w.getLayoutProperty(d),m)||(w.setLayoutProperty(d,m,y),this._updateLayer(w)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,d){const m=this.getLayer(r);if(m)return m.getLayoutProperty(d);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,d,m,y={}){this._checkLoaded();const w=this.getLayer(r);w?u.aG(w.getPaintProperty(d),m)||(w.setPaintProperty(d,m,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,d){return this.getLayer(r).getPaintProperty(d)}setFeatureState(r,d){this._checkLoaded();const m=r.source,y=r.sourceLayer,w=this.sourceCaches[m];if(w===void 0)return void this.fire(new u.j(new Error(`The source '${m}' does not exist in the map's style.`)));const P=w.getSource().type;P==="geojson"&&y?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||y?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,r.id,d)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,d){this._checkLoaded();const m=r.source,y=this.sourceCaches[m];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${m}' does not exist in the map's style.`)));const w=y.getSource().type,P=w==="vector"?r.sourceLayer:void 0;w!=="vector"||P?d&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(P,r.id,d):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const d=r.source,m=r.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(m,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aH(this.sourceCaches,w=>w.serialize()),d=this._serializeByIds(this._order),m=this.map.getTerrain()||void 0,y=this.stylesheet;return u.aI({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:r,layers:d,terrain:m},w=>w!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const d=P=>this._layers[P].type==="fill-extrusion",m={},y=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(d(j)){m[j]=P;for(const R of r){const z=R[j];if(z)for(const U of z)y.push(U)}}}y.sort((P,j)=>j.intersectionZ-P.intersectionZ);const w=[];for(let P=this._order.length-1;P>=0;P--){const j=this._order[P];if(d(j))for(let R=y.length-1;R>=0;R--){const z=y[R].feature;if(m[z.layer.id]<P)break;w.push(z),y.pop()}else for(const R of r){const z=R[j];if(z)for(const U of z)w.push(U.feature)}}return w}queryRenderedFeatures(r,d,m){d&&d.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const j of d.layers){const R=this._layers[j];if(!R)return this.fire(new u.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[R.source]=!0}}const w=[];d.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const j in this.sourceCaches)d.layers&&!y[j]||w.push(ur(this.sourceCaches[j],this._layers,P,r,d,m));return this.placement&&w.push(function(j,R,z,U,q,X,oe){const le={},me=X.queryRenderedSymbols(U),ae=[];for(const je of Object.keys(me).map(Number))ae.push(oe[je]);ae.sort(fi);for(const je of ae){const Fe=je.featureIndex.lookupSymbolFeatures(me[je.bucketInstanceId],R,je.bucketIndex,je.sourceLayerIndex,q.filter,q.layers,q.availableImages,j);for(const ye in Fe){const Ae=le[ye]=le[ye]||[],$e=Fe[ye];$e.sort((Ke,it)=>{const yt=je.featureSortOrder;if(yt){const dt=yt.indexOf(Ke.featureIndex);return yt.indexOf(it.featureIndex)-dt}return it.featureIndex-Ke.featureIndex});for(const Ke of $e)Ae.push(Ke)}}for(const je in le)le[je].forEach(Fe=>{const ye=Fe.feature,Ae=z[j[je].source].getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=Ae});return le}(this._layers,P,this.sourceCaches,r,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(r,d){d&&d.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",d.filter,null,d);const m=this.sourceCaches[r];return m?function(y,w){const P=y.getRenderableIds().map(z=>y.getTileByID(z)),j=[],R={};for(let z=0;z<P.length;z++){const U=P[z],q=U.tileID.canonical.key;R[q]||(R[q]=!0,U.querySourceFeatures(j,w))}return j}(m,d):[]}addSourceType(r,d,m){return $r(r)?m(new Error(`A source type called "${r}" already exists.`)):(((y,w)=>{Wn[y]=w})(r,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:d.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(r,d={}){this._checkLoaded();const m=this.light.getLight();let y=!1;for(const P in r)if(!u.aG(r[P],m[P])){y=!0;break}if(!y)return;const w={now:u.h.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,d),this.light.updateTransitions(w)}_validate(r,d,m,y,w={}){return(!w||w.validate!==!1)&&Vi(this,r.call(u.y,u.e({key:d,style:this.serialize(),value:m,styleSpec:u.v},y)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const m=this.sourceCaches[d];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const d in this.sourceCaches)this.sourceCaches[d].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,d,m,y,w=!1){let P=!1,j=!1;const R={};for(const z of this._order){const U=this._layers[z];if(U.type!=="symbol")continue;if(!R[U.source]){const X=this.sourceCaches[U.source];R[U.source]=X.getRenderableIds(!0).map(oe=>X.getTileByID(oe)).sort((oe,le)=>le.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(le.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(U,R[U.source],r.center.lng);P=P||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.h.now(),r.zoom))&&(this.pauseablePlacement=new kn(r,this.map.terrain,this._order,w,d,m,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.h.now()),j=!0),P&&this.pauseablePlacement.placement.setStale()),j||P)for(const z of this._order){const U=this._layers[z];U.type==="symbol"&&this.placement.updateLayerOpacities(U,R[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,d,m){this.imageManager.getImages(d.icons,m),this._updateTilesForChangedImages();const y=this.sourceCaches[d.source];y&&y.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(r,d,m){this.glyphManager.getGlyphs(d.stacks,m);const y=this.sourceCaches[d.source];y&&y.setDependencies(d.tileID.key,d.type,[""])}getResource(r,d,m){return u.m(d,m)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,d={}){this._checkLoaded(),r&&this._validate(u.y.glyphs,"glyphs",r,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,d,m={},y){this._checkLoaded();const w=[{id:r,url:d}],P=[...ut(this.stylesheet.sprite),...w];this._validate(u.y.sprite,"sprite",P,null,m)||(this.stylesheet.sprite=P,this._loadSprite(w,!0,y))}removeSprite(r){this._checkLoaded();const d=ut(this.stylesheet.sprite);if(d.find(m=>m.id===r)){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;d.splice(d.findIndex(m=>m.id===r),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ut(this.stylesheet.sprite)}setSprite(r,d={},m){this._checkLoaded(),r&&this._validate(u.y.sprite,"sprite",r,null,d)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}Oi.registerForPluginStateChange=u.aK;var _l=u.Q([{name:"a_pos",type:"Int16",components:2}]),Va="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const zr={prelude:Kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Va),terrainDepth:Kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Va),terrainCoords:Kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Va)};function Kn(x,r){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/attribute ([\w]+) ([\w]+)/g),y=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=w?w.concat(y):y,j={};return{fragmentSource:x=x.replace(d,(R,z,U,q,X)=>(j[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = u_${X};
#endif
`)),vertexSource:r=r.replace(d,(R,z,U,q,X)=>{const oe=q==="float"?"vec2":"vec4",le=X.match(/color/)?"color":oe;return j[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${oe} a_${X};
varying ${U} ${q} ${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${U} ${oe} a_${X};
#else
uniform ${U} ${q} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = a_${X};
#else
    ${U} ${q} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${U} ${q} ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${U} ${q} ${X} = u_${X};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Qs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,d,m,y,w,P,j,R,z){this.context=r;let U=this.boundPaintVertexBuffers.length!==y.length;for(let q=0;!U&&q<y.length;q++)this.boundPaintVertexBuffers[q]!==y[q]&&(U=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==m||U||this.boundIndexBuffer!==w||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==z?this.freshBind(d,m,y,w,P,j,R,z):(r.bindVertexArray.set(this.vao),j&&j.bind(),w&&w.dynamicDraw&&w.bind(),R&&R.bind(),z&&z.bind())}freshBind(r,d,m,y,w,P,j,R){const z=r.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=R,d.enableAttributes(q,r);for(const X of m)X.enableAttributes(q,r);P&&P.enableAttributes(q,r),j&&j.enableAttributes(q,r),R&&R.enableAttributes(q,r),d.bind(),d.setVertexAttribPointers(q,r,w);for(const X of m)X.bind(),X.setVertexAttribPointers(q,r,w);P&&(P.bind(),P.setVertexAttribPointers(q,r,w)),y&&y.bind(),j&&(j.bind(),j.setVertexAttribPointers(q,r,w)),R&&(R.bind(),R.setVertexAttribPointers(q,r,w)),U.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Pr(x){const r=[];for(let d=0;d<x.length;d++){if(x[d]===null)continue;const m=x[d].split(" ");r.push(m.pop())}return r}class yo{constructor(r,d,m,y,w,P){const j=r.gl;this.program=j.createProgram();const R=Pr(d.staticAttributes),z=m?m.getBinderAttributes():[],U=R.concat(z),q=zr.prelude.staticUniforms?Pr(zr.prelude.staticUniforms):[],X=d.staticUniforms?Pr(d.staticUniforms):[],oe=m?m.getBinderUniforms():[],le=q.concat(X).concat(oe),me=[];for(const Ke of le)me.indexOf(Ke)<0&&me.push(Ke);const ae=m?m.defines():[];w&&ae.push("#define OVERDRAW_INSPECTOR;"),P&&ae.push("#define TERRAIN3D;");const je=ae.concat(zr.prelude.fragmentSource,d.fragmentSource).join(`
`),Fe=ae.concat(zr.prelude.vertexSource,d.vertexSource).join(`
`),ye=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ye,je),j.compileShader(ye),!j.getShaderParameter(ye,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(ye)}`);j.attachShader(this.program,ye);const Ae=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Ae,Fe),j.compileShader(Ae),!j.getShaderParameter(Ae,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Ae)}`);j.attachShader(this.program,Ae),this.attributes={};const $e={};this.numAttributes=U.length;for(let Ke=0;Ke<this.numAttributes;Ke++)U[Ke]&&(j.bindAttribLocation(this.program,Ke,U[Ke]),this.attributes[U[Ke]]=Ke);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Ae),j.deleteShader(ye);for(let Ke=0;Ke<me.length;Ke++){const it=me[Ke];if(it&&!$e[it]){const yt=j.getUniformLocation(this.program,it);yt&&($e[it]=yt)}}this.fixedUniforms=y(r,$e),this.terrainUniforms=((Ke,it)=>({u_depth:new u.aL(Ke,it.u_depth),u_terrain:new u.aL(Ke,it.u_terrain),u_terrain_dim:new u.aM(Ke,it.u_terrain_dim),u_terrain_matrix:new u.aN(Ke,it.u_terrain_matrix),u_terrain_unpack:new u.aO(Ke,it.u_terrain_unpack),u_terrain_exaggeration:new u.aM(Ke,it.u_terrain_exaggeration)}))(r,$e),this.binderUniforms=m?m.getUniforms(r,$e):[]}draw(r,d,m,y,w,P,j,R,z,U,q,X,oe,le,me,ae,je,Fe){const ye=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(y),r.setColorMode(w),r.setCullFace(P),R){r.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,R.depthTexture),r.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,R.texture);for(const $e in this.terrainUniforms)this.terrainUniforms[$e].set(R[$e])}for(const $e in this.fixedUniforms)this.fixedUniforms[$e].set(j[$e]);me&&me.setUniforms(r,this.binderUniforms,oe,{zoom:le});let Ae=0;switch(d){case ye.LINES:Ae=2;break;case ye.TRIANGLES:Ae=3;break;case ye.LINE_STRIP:Ae=1}for(const $e of X.get()){const Ke=$e.vaos||($e.vaos={});(Ke[z]||(Ke[z]=new Qs)).bind(r,this,U,me?me.getPaintVertexBuffers():[],q,$e.vertexOffset,ae,je,Fe),ye.drawElements(d,$e.primitiveLength*Ae,ye.UNSIGNED_SHORT,$e.primitiveOffset*Ae*2)}}}function Qi(x,r,d){const m=1/xe(d,1,r.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),w=d.tileSize*Math.pow(2,r.transform.tileZoom)/y,P=w*(d.tileID.canonical.x+d.tileID.wrap*y),j=w*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[m,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[P>>16,j>>16],u_pixel_coord_lower:[65535&P,65535&j]}}const $o=(x,r,d,m)=>{const y=r.style.light,w=y.properties.get("position"),P=[w.x,w.y,w.z],j=function(){var z=new u.A(9);return u.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();y.properties.get("anchor")==="viewport"&&function(z,U){var q=Math.sin(U),X=Math.cos(U);z[0]=X,z[1]=q,z[2]=0,z[3]=-q,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(j,-r.transform.angle),function(z,U,q){var X=U[0],oe=U[1],le=U[2];z[0]=X*q[0]+oe*q[3]+le*q[6],z[1]=X*q[1]+oe*q[4]+le*q[7],z[2]=X*q[2]+oe*q[5]+le*q[8]}(P,P,j);const R=y.properties.get("color");return{u_matrix:x,u_lightpos:P,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+d,u_opacity:m}},ga=(x,r,d,m,y,w,P)=>u.e($o(x,r,d,m),Qi(w,r,P),{u_height_factor:-Math.pow(2,y.overscaledZ)/P.tileSize/8}),au=x=>({u_matrix:x}),wl=(x,r,d,m)=>u.e(au(x),Qi(d,r,m)),vc=(x,r)=>({u_matrix:x,u_world:r}),to=(x,r,d,m,y)=>u.e(wl(x,r,d,m),{u_world:y}),Oa=(x,r,d,m)=>{const y=x.transform;let w,P;if(m.paint.get("circle-pitch-alignment")==="map"){const j=xe(d,1,y.zoom);w=!0,P=[j,j]}else w=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(r.posMatrix,d,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:P}},Cl=(x,r,d)=>{const m=xe(d,1,r.zoom),y=Math.pow(2,r.zoom-d.tileID.overscaledZ),w=d.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[r.pixelsToGLUnits[0]/(m*y),r.pixelsToGLUnits[1]/(m*y)],u_overscale_factor:w}},or=(x,r,d=1)=>({u_matrix:x,u_color:r,u_overlay:0,u_overlay_scale:d}),od=x=>({u_matrix:x}),bo=(x,r,d,m)=>({u_matrix:x,u_extrude_scale:xe(r,1,d),u_intensity:m});function Mn(x,r){const d=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new u.U(0,m/d).toLngLat().lat,new u.U(0,(m+1)/d).toLngLat().lat]}const Nl=(x,r,d,m)=>{const y=x.transform;return{u_matrix:ki(x,r,d,m),u_ratio:1/xe(r,1,y.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},gs=(x,r,d,m,y)=>u.e(Nl(x,r,d,y),{u_image:0,u_image_height:m}),Sl=(x,r,d,m,y)=>{const w=x.transform,P=ld(r,w);return{u_matrix:ki(x,r,d,y),u_texsize:r.imageAtlasTexture.size,u_ratio:1/xe(r,1,w.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},xo=(x,r,d,m,y,w)=>{const P=x.lineAtlas,j=ld(r,x.transform),R=d.layout.get("line-cap")==="round",z=P.getDash(m.from,R),U=P.getDash(m.to,R),q=z.width*y.fromScale,X=U.width*y.toScale;return u.e(Nl(x,r,d,w),{u_patternscale_a:[j/q,-z.height/2],u_patternscale_b:[j/X,-U.height/2],u_sdfgamma:P.width/(256*Math.min(q,X)*x.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:U.y,u_mix:y.t})};function ld(x,r){return 1/xe(x,1,r.tileZoom)}function ki(x,r,d,m){return x.translatePosMatrix(m?m.posMatrix:r.tileID.posMatrix,r,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const oi=(x,r,d,m,y)=>{return{u_matrix:x,u_tl_parent:r,u_scale_parent:d,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:ou(y.paint.get("raster-hue-rotate"))};var w,P};function ou(x){x*=Math.PI/180;const r=Math.sin(x),d=Math.cos(x);return[(2*d+1)/3,(-Math.sqrt(3)*r-d+1)/3,(Math.sqrt(3)*r-d+1)/3]}const qs=(x,r,d,m,y,w,P,j,R,z)=>{const U=y.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:U.width/U.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:P,u_coord_matrix:j,u_is_text:+R,u_pitch_with_map:+m,u_texsize:z,u_texture:0}},os=(x,r,d,m,y,w,P,j,R,z,U)=>{const q=y.transform;return u.e(qs(x,r,d,m,y,w,P,j,R,z),{u_gamma_scale:m?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:1})},ls=(x,r,d,m,y,w,P,j,R,z)=>u.e(os(x,r,d,m,y,w,P,j,!0,R),{u_texsize_icon:z,u_texture_icon:1}),yc=(x,r,d)=>({u_matrix:x,u_opacity:r,u_color:d}),vs=(x,r,d,m,y,w)=>u.e(function(P,j,R,z){const U=R.imageManager.getPattern(P.from.toString()),q=R.imageManager.getPattern(P.to.toString()),{width:X,height:oe}=R.imageManager.getPixelSize(),le=Math.pow(2,z.tileID.overscaledZ),me=z.tileSize*Math.pow(2,R.transform.tileZoom)/le,ae=me*(z.tileID.canonical.x+z.tileID.wrap*le),je=me*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[X,oe],u_mix:j.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/xe(z,1,R.transform.tileZoom),u_pixel_coord_upper:[ae>>16,je>>16],u_pixel_coord_lower:[65535&ae,65535&je]}}(m,w,d,y),{u_matrix:x,u_opacity:r}),El={fillExtrusion:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_lightpos:new u.aP(x,r.u_lightpos),u_lightintensity:new u.aM(x,r.u_lightintensity),u_lightcolor:new u.aP(x,r.u_lightcolor),u_vertical_gradient:new u.aM(x,r.u_vertical_gradient),u_opacity:new u.aM(x,r.u_opacity)}),fillExtrusionPattern:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_lightpos:new u.aP(x,r.u_lightpos),u_lightintensity:new u.aM(x,r.u_lightintensity),u_lightcolor:new u.aP(x,r.u_lightcolor),u_vertical_gradient:new u.aM(x,r.u_vertical_gradient),u_height_factor:new u.aM(x,r.u_height_factor),u_image:new u.aL(x,r.u_image),u_texsize:new u.aQ(x,r.u_texsize),u_pixel_coord_upper:new u.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(x,r.u_pixel_coord_lower),u_scale:new u.aP(x,r.u_scale),u_fade:new u.aM(x,r.u_fade),u_opacity:new u.aM(x,r.u_opacity)}),fill:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix)}),fillPattern:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_image:new u.aL(x,r.u_image),u_texsize:new u.aQ(x,r.u_texsize),u_pixel_coord_upper:new u.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(x,r.u_pixel_coord_lower),u_scale:new u.aP(x,r.u_scale),u_fade:new u.aM(x,r.u_fade)}),fillOutline:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_world:new u.aQ(x,r.u_world)}),fillOutlinePattern:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_world:new u.aQ(x,r.u_world),u_image:new u.aL(x,r.u_image),u_texsize:new u.aQ(x,r.u_texsize),u_pixel_coord_upper:new u.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(x,r.u_pixel_coord_lower),u_scale:new u.aP(x,r.u_scale),u_fade:new u.aM(x,r.u_fade)}),circle:(x,r)=>({u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_scale_with_map:new u.aL(x,r.u_scale_with_map),u_pitch_with_map:new u.aL(x,r.u_pitch_with_map),u_extrude_scale:new u.aQ(x,r.u_extrude_scale),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_matrix:new u.aN(x,r.u_matrix)}),collisionBox:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aM(x,r.u_pixels_to_tile_units),u_extrude_scale:new u.aQ(x,r.u_extrude_scale),u_overscale_factor:new u.aM(x,r.u_overscale_factor)}),collisionCircle:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_inv_matrix:new u.aN(x,r.u_inv_matrix),u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_viewport_size:new u.aQ(x,r.u_viewport_size)}),debug:(x,r)=>({u_color:new u.aR(x,r.u_color),u_matrix:new u.aN(x,r.u_matrix),u_overlay:new u.aL(x,r.u_overlay),u_overlay_scale:new u.aM(x,r.u_overlay_scale)}),clippingMask:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix)}),heatmap:(x,r)=>({u_extrude_scale:new u.aM(x,r.u_extrude_scale),u_intensity:new u.aM(x,r.u_intensity),u_matrix:new u.aN(x,r.u_matrix)}),heatmapTexture:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_world:new u.aQ(x,r.u_world),u_image:new u.aL(x,r.u_image),u_color_ramp:new u.aL(x,r.u_color_ramp),u_opacity:new u.aM(x,r.u_opacity)}),hillshade:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_image:new u.aL(x,r.u_image),u_latrange:new u.aQ(x,r.u_latrange),u_light:new u.aQ(x,r.u_light),u_shadow:new u.aR(x,r.u_shadow),u_highlight:new u.aR(x,r.u_highlight),u_accent:new u.aR(x,r.u_accent)}),hillshadePrepare:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_image:new u.aL(x,r.u_image),u_dimension:new u.aQ(x,r.u_dimension),u_zoom:new u.aM(x,r.u_zoom),u_unpack:new u.aO(x,r.u_unpack)}),line:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_ratio:new u.aM(x,r.u_ratio),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(x,r.u_units_to_pixels)}),lineGradient:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_ratio:new u.aM(x,r.u_ratio),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(x,r.u_units_to_pixels),u_image:new u.aL(x,r.u_image),u_image_height:new u.aM(x,r.u_image_height)}),linePattern:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_texsize:new u.aQ(x,r.u_texsize),u_ratio:new u.aM(x,r.u_ratio),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_image:new u.aL(x,r.u_image),u_units_to_pixels:new u.aQ(x,r.u_units_to_pixels),u_scale:new u.aP(x,r.u_scale),u_fade:new u.aM(x,r.u_fade)}),lineSDF:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_ratio:new u.aM(x,r.u_ratio),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(x,r.u_units_to_pixels),u_patternscale_a:new u.aQ(x,r.u_patternscale_a),u_patternscale_b:new u.aQ(x,r.u_patternscale_b),u_sdfgamma:new u.aM(x,r.u_sdfgamma),u_image:new u.aL(x,r.u_image),u_tex_y_a:new u.aM(x,r.u_tex_y_a),u_tex_y_b:new u.aM(x,r.u_tex_y_b),u_mix:new u.aM(x,r.u_mix)}),raster:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_tl_parent:new u.aQ(x,r.u_tl_parent),u_scale_parent:new u.aM(x,r.u_scale_parent),u_buffer_scale:new u.aM(x,r.u_buffer_scale),u_fade_t:new u.aM(x,r.u_fade_t),u_opacity:new u.aM(x,r.u_opacity),u_image0:new u.aL(x,r.u_image0),u_image1:new u.aL(x,r.u_image1),u_brightness_low:new u.aM(x,r.u_brightness_low),u_brightness_high:new u.aM(x,r.u_brightness_high),u_saturation_factor:new u.aM(x,r.u_saturation_factor),u_contrast_factor:new u.aM(x,r.u_contrast_factor),u_spin_weights:new u.aP(x,r.u_spin_weights)}),symbolIcon:(x,r)=>({u_is_size_zoom_constant:new u.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(x,r.u_is_size_feature_constant),u_size_t:new u.aM(x,r.u_size_t),u_size:new u.aM(x,r.u_size),u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_pitch:new u.aM(x,r.u_pitch),u_rotate_symbol:new u.aL(x,r.u_rotate_symbol),u_aspect_ratio:new u.aM(x,r.u_aspect_ratio),u_fade_change:new u.aM(x,r.u_fade_change),u_matrix:new u.aN(x,r.u_matrix),u_label_plane_matrix:new u.aN(x,r.u_label_plane_matrix),u_coord_matrix:new u.aN(x,r.u_coord_matrix),u_is_text:new u.aL(x,r.u_is_text),u_pitch_with_map:new u.aL(x,r.u_pitch_with_map),u_texsize:new u.aQ(x,r.u_texsize),u_texture:new u.aL(x,r.u_texture)}),symbolSDF:(x,r)=>({u_is_size_zoom_constant:new u.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(x,r.u_is_size_feature_constant),u_size_t:new u.aM(x,r.u_size_t),u_size:new u.aM(x,r.u_size),u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_pitch:new u.aM(x,r.u_pitch),u_rotate_symbol:new u.aL(x,r.u_rotate_symbol),u_aspect_ratio:new u.aM(x,r.u_aspect_ratio),u_fade_change:new u.aM(x,r.u_fade_change),u_matrix:new u.aN(x,r.u_matrix),u_label_plane_matrix:new u.aN(x,r.u_label_plane_matrix),u_coord_matrix:new u.aN(x,r.u_coord_matrix),u_is_text:new u.aL(x,r.u_is_text),u_pitch_with_map:new u.aL(x,r.u_pitch_with_map),u_texsize:new u.aQ(x,r.u_texsize),u_texture:new u.aL(x,r.u_texture),u_gamma_scale:new u.aM(x,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_is_halo:new u.aL(x,r.u_is_halo)}),symbolTextAndIcon:(x,r)=>({u_is_size_zoom_constant:new u.aL(x,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(x,r.u_is_size_feature_constant),u_size_t:new u.aM(x,r.u_size_t),u_size:new u.aM(x,r.u_size),u_camera_to_center_distance:new u.aM(x,r.u_camera_to_center_distance),u_pitch:new u.aM(x,r.u_pitch),u_rotate_symbol:new u.aL(x,r.u_rotate_symbol),u_aspect_ratio:new u.aM(x,r.u_aspect_ratio),u_fade_change:new u.aM(x,r.u_fade_change),u_matrix:new u.aN(x,r.u_matrix),u_label_plane_matrix:new u.aN(x,r.u_label_plane_matrix),u_coord_matrix:new u.aN(x,r.u_coord_matrix),u_is_text:new u.aL(x,r.u_is_text),u_pitch_with_map:new u.aL(x,r.u_pitch_with_map),u_texsize:new u.aQ(x,r.u_texsize),u_texsize_icon:new u.aQ(x,r.u_texsize_icon),u_texture:new u.aL(x,r.u_texture),u_texture_icon:new u.aL(x,r.u_texture_icon),u_gamma_scale:new u.aM(x,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(x,r.u_device_pixel_ratio),u_is_halo:new u.aL(x,r.u_is_halo)}),background:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_opacity:new u.aM(x,r.u_opacity),u_color:new u.aR(x,r.u_color)}),backgroundPattern:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_opacity:new u.aM(x,r.u_opacity),u_image:new u.aL(x,r.u_image),u_pattern_tl_a:new u.aQ(x,r.u_pattern_tl_a),u_pattern_br_a:new u.aQ(x,r.u_pattern_br_a),u_pattern_tl_b:new u.aQ(x,r.u_pattern_tl_b),u_pattern_br_b:new u.aQ(x,r.u_pattern_br_b),u_texsize:new u.aQ(x,r.u_texsize),u_mix:new u.aM(x,r.u_mix),u_pattern_size_a:new u.aQ(x,r.u_pattern_size_a),u_pattern_size_b:new u.aQ(x,r.u_pattern_size_b),u_scale_a:new u.aM(x,r.u_scale_a),u_scale_b:new u.aM(x,r.u_scale_b),u_pixel_coord_upper:new u.aQ(x,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(x,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aM(x,r.u_tile_units_to_pixels)}),terrain:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_texture:new u.aL(x,r.u_texture),u_ele_delta:new u.aM(x,r.u_ele_delta)}),terrainDepth:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_ele_delta:new u.aM(x,r.u_ele_delta)}),terrainCoords:(x,r)=>({u_matrix:new u.aN(x,r.u_matrix),u_texture:new u.aL(x,r.u_texture),u_terrain_coords_id:new u.aM(x,r.u_terrain_coords_id),u_ele_delta:new u.aM(x,r.u_ele_delta)})};class qo{constructor(r,d,m){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const no={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bc{constructor(r,d,m,y){this.length=d.length,this.attributes=m,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=r;const w=r.gl;this.buffer=w.createBuffer(),r.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,d){for(let m=0;m<this.attributes.length;m++){const y=d.attributes[this.attributes[m].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,d,m){for(let y=0;y<this.attributes.length;y++){const w=this.attributes[y],P=d.attributes[w.name];P!==void 0&&r.vertexAttribPointer(P,w.components,r[no[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ea=new WeakMap;function Hs(x){var r;if(ea.has(x))return ea.get(x);{const d=(r=x.getParameter(x.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ea.set(x,d),d}}class Yn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class va extends Yn{getDefault(){return u.aT.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class es extends Yn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ts extends Yn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Ho extends Yn{getDefault(){return[!0,!0,!0,!0]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Dl extends Yn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Tl extends Yn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Pl extends Yn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const d=this.current;(r.func!==d.func||r.ref!==d.ref||r.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class xc extends Yn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class K extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=r,this.dirty=!1}}class we extends Yn{getDefault(){return[0,1]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ye extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=r,this.dirty=!1}}class rt extends Yn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class At extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.BLEND):d.disable(d.BLEND),this.current=r,this.dirty=!1}}class Nn extends Yn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Xt extends Yn{getDefault(){return u.aT.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class In extends Yn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class lr extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=r,this.dirty=!1}}class jr extends Yn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Xr extends Yn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Jr extends Yn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class rr extends Yn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Qr extends Yn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class yi extends Yn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class _o extends Yn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class jl extends Yn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Gs extends Yn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class _c extends Yn{getDefault(){return null}set(r){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class wc extends Yn{getDefault(){return null}set(r){var d;if(r===this.current&&!this.dirty)return;const m=this.gl;Hs(m)?m.bindVertexArray(r):(d=m.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class lu extends Yn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ro extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class cd extends Yn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class wo extends Yn{constructor(r,d){super(r),this.context=r,this.parent=d}getDefault(){return null}}class Go extends wo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class _h extends wo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ud extends wo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class pr{constructor(r,d,m,y,w){this.context=r,this.width=d,this.height=m;const P=r.gl,j=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Go(r,j),y)this.depthAttachment=w?new ud(r,j):new _h(r,j);else if(w)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,d=this.colorAttachment.get();if(d&&r.deleteTexture(d),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class mi{constructor(r,d,m){this.blendFunction=r,this.blendColor=d,this.mask=m}}mi.Replace=[1,0],mi.disabled=new mi(mi.Replace,u.aT.transparent,[!1,!1,!1,!1]),mi.unblended=new mi(mi.Replace,u.aT.transparent,[!0,!0,!0,!0]),mi.alphaBlended=new mi([1,771],u.aT.transparent,[!0,!0,!0,!0]);class Co{constructor(r){var d,m;if(this.gl=r,this.clearColor=new va(this),this.clearDepth=new es(this),this.clearStencil=new ts(this),this.colorMask=new Ho(this),this.depthMask=new Dl(this),this.stencilMask=new Tl(this),this.stencilFunc=new Pl(this),this.stencilOp=new xc(this),this.stencilTest=new K(this),this.depthRange=new we(this),this.depthTest=new Ye(this),this.depthFunc=new rt(this),this.blend=new At(this),this.blendFunc=new Nn(this),this.blendColor=new Xt(this),this.blendEquation=new In(this),this.cullFace=new lr(this),this.cullFaceSide=new jr(this),this.frontFace=new Xr(this),this.program=new Jr(this),this.activeTexture=new rr(this),this.viewport=new Qr(this),this.bindFramebuffer=new yi(this),this.bindRenderbuffer=new _o(this),this.bindTexture=new jl(this),this.bindVertexBuffer=new Gs(this),this.bindElementBuffer=new _c(this),this.bindVertexArray=new wc(this),this.pixelStoreUnpack=new lu(this),this.pixelStoreUnpackPremultiplyAlpha=new ro(this),this.pixelStoreUnpackFlipY=new cd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Hs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=r.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:y==null?void 0:y.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,d){return new qo(this,r,d)}createVertexBuffer(r,d,m){return new bc(this,r,d,m)}createRenderbuffer(r,d,m){const y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,r,d,m),this.bindRenderbuffer.set(null),w}createFramebuffer(r,d,m,y){return new pr(this,r,d,m,y)}clear({color:r,depth:d,stencil:m}){const y=this.gl;let w=0;r&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),m!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),y.clear(w)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aG(r.blendFunction,mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Hs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var d;return Hs(this.gl)?this.gl.deleteVertexArray(r):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class sr{constructor(r,d,m){this.func=r,this.mask=d,this.range=m}}sr.ReadOnly=!1,sr.ReadWrite=!0,sr.disabled=new sr(519,sr.ReadOnly,[0,1]);const No=7680;class ei{constructor(r,d,m,y,w,P){this.test=r,this.ref=d,this.mask=m,this.fail=y,this.depthFail=w,this.pass=P}}ei.disabled=new ei({func:519,mask:0},0,0,No,No,No);class Gr{constructor(r,d,m){this.enable=r,this.mode=d,this.frontFace=m}}let cu;function uu(x,r,d,m,y,w,P){const j=x.context,R=j.gl,z=x.useProgram("collisionBox"),U=[];let q=0,X=0;for(let ye=0;ye<m.length;ye++){const Ae=m[ye],$e=r.getTile(Ae),Ke=$e.getBucket(d);if(!Ke)continue;let it=Ae.posMatrix;y[0]===0&&y[1]===0||(it=x.translatePosMatrix(Ae.posMatrix,$e,y,w));const yt=P?Ke.textCollisionBox:Ke.iconCollisionBox,dt=Ke.collisionCircleArray;if(dt.length>0){const Nt=u.Z(),en=it;u.aU(Nt,Ke.placementInvProjMatrix,x.transform.glCoordMatrix),u.aU(Nt,Nt,Ke.placementViewportMatrix),U.push({circleArray:dt,circleOffset:X,transform:en,invTransform:Nt,coord:Ae}),q+=dt.length/4,X=q}yt&&z.draw(j,R.LINES,sr.disabled,ei.disabled,x.colorModeForRenderPass(),Gr.disabled,Cl(it,x.transform,$e),x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ae),d.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,null,x.transform.zoom,null,null,yt.collisionVertexBuffer)}if(!P||!U.length)return;const oe=x.useProgram("collisionCircle"),le=new u.aV;le.resize(4*q),le._trim();let me=0;for(const ye of U)for(let Ae=0;Ae<ye.circleArray.length/4;Ae++){const $e=4*Ae,Ke=ye.circleArray[$e+0],it=ye.circleArray[$e+1],yt=ye.circleArray[$e+2],dt=ye.circleArray[$e+3];le.emplace(me++,Ke,it,yt,dt,0),le.emplace(me++,Ke,it,yt,dt,1),le.emplace(me++,Ke,it,yt,dt,2),le.emplace(me++,Ke,it,yt,dt,3)}(!cu||cu.length<2*q)&&(cu=function(ye){const Ae=2*ye,$e=new u.aX;$e.resize(Ae),$e._trim();for(let Ke=0;Ke<Ae;Ke++){const it=6*Ke;$e.uint16[it+0]=4*Ke+0,$e.uint16[it+1]=4*Ke+1,$e.uint16[it+2]=4*Ke+2,$e.uint16[it+3]=4*Ke+2,$e.uint16[it+4]=4*Ke+3,$e.uint16[it+5]=4*Ke+0}return $e}(q));const ae=j.createIndexBuffer(cu,!0),je=j.createVertexBuffer(le,u.aW.members,!0);for(const ye of U){const Ae={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(Fe=x.transform).cameraToCenterDistance,u_viewport_size:[Fe.width,Fe.height]};oe.draw(j,R.TRIANGLES,sr.disabled,ei.disabled,x.colorModeForRenderPass(),Gr.disabled,Ae,x.style.map.terrain&&x.style.map.terrain.getTerrainData(ye.coord),d.id,je,ae,u.S.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,x.transform.zoom,null,null,null)}var Fe;je.destroy(),ae.destroy()}Gr.disabled=new Gr(!1,1029,2305),Gr.backCCW=new Gr(!0,1029,2305);const dd=u.ao(new Float32Array(16));function cs(x,r,d,m,y,w){const{horizontalAlign:P,verticalAlign:j}=u.au(x);return new u.P((-(P-.5)*r/y+m[0])*w,(-(j-.5)*d/y+m[1])*w)}function ya(x,r,d,m,y,w,P,j,R,z,U){const q=x.text.placedSymbolArray,X=x.text.dynamicLayoutVertexArray,oe=x.icon.dynamicLayoutVertexArray,le={};X.clear();for(let me=0;me<q.length;me++){const ae=q.get(me),je=ae.hidden||!ae.crossTileID||x.allowVerticalPlacement&&!ae.placedOrientation?null:m[ae.crossTileID];if(je){const Fe=new u.P(ae.anchorX,ae.anchorY),ye=Dn(Fe,d?P:w,U),Ae=br(y.cameraToCenterDistance,ye.signedDistanceFromCamera);let $e=u.aj(x.textSizeData,R,ae)*Ae/u.ap;d&&($e*=x.tilePixelRatio/j);const{width:Ke,height:it,anchor:yt,textOffset:dt,textBoxScale:Nt}=je,en=cs(yt,Ke,it,dt,Nt,$e),Qn=d?Dn(Fe.add(en),w,U).point:ye.point.add(r?en.rotate(-y.angle):en),Mt=x.allowVerticalPlacement&&ae.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let xn=0;xn<ae.numGlyphs;xn++)u.ak(X,Qn,Mt);z&&ae.associatedIconIndex>=0&&(le[ae.associatedIconIndex]={shiftedAnchor:Qn,angle:Mt})}else J(ae.numGlyphs,X)}if(z){oe.clear();const me=x.icon.placedSymbolArray;for(let ae=0;ae<me.length;ae++){const je=me.get(ae);if(je.hidden)J(je.numGlyphs,oe);else{const Fe=le[ae];if(Fe)for(let ye=0;ye<je.numGlyphs;ye++)u.ak(oe,Fe.shiftedAnchor,Fe.angle);else J(je.numGlyphs,oe)}}x.icon.dynamicLayoutVertexBuffer.updateData(oe)}x.text.dynamicLayoutVertexBuffer.updateData(X)}function wi(x,r,d){return d.iconsInText&&r?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function ba(x,r,d,m,y,w,P,j,R,z,U,q){const X=x.context,oe=X.gl,le=x.transform,me=j==="map",ae=R==="map",je=j!=="viewport"&&d.layout.get("symbol-placement")!=="point",Fe=me&&!ae&&!je,ye=!d.layout.get("symbol-sort-key").isConstant();let Ae=!1;const $e=x.depthModeForSublayer(0,sr.ReadOnly),Ke=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[];for(const yt of m){const dt=r.getTile(yt),Nt=dt.getBucket(d);if(!Nt)continue;const en=y?Nt.text:Nt.icon;if(!en||!en.segments.get().length||!en.hasVisibleVertices)continue;const Qn=en.programConfigurations.get(d.id),Mt=y||Nt.sdfIcons,xn=y?Nt.textSizeData:Nt.iconSizeData,tn=ae||le.pitch!==0,kr=x.useProgram(wi(Mt,y,Nt),Qn),Xn=u.ah(xn,le.zoom),On=x.style.map.terrain&&x.style.map.terrain.getTerrainData(yt);let er,Ni,Wr,gr,$i=[0,0],pi=null;if(y)Ni=dt.glyphAtlasTexture,Wr=oe.LINEAR,er=dt.glyphAtlasTexture.size,Nt.iconsInText&&($i=dt.imageAtlasTexture.size,pi=dt.imageAtlasTexture,gr=tn||x.options.rotating||x.options.zooming||xn.kind==="composite"||xn.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const Si=d.layout.get("icon-size").constantOr(0)!==1||Nt.iconsNeedLinear;Ni=dt.imageAtlasTexture,Wr=Mt||x.options.rotating||x.options.zooming||Si||tn?oe.LINEAR:oe.NEAREST,er=dt.imageAtlasTexture.size}const Ps=xe(dt,1,x.transform.zoom),Nr=nt(yt.posMatrix,ae,me,x.transform,Ps),so=Fn(yt.posMatrix,ae,me,x.transform,Ps),Na=Ke&&Nt.hasTextData(),tl=d.layout.get("icon-text-fit")!=="none"&&Na&&Nt.hasIconData();if(je){const Si=x.style.map.terrain?(Zs,Ei)=>x.style.map.terrain.getElevation(yt,Zs,Ei):null,qi=d.layout.get("text-rotation-alignment")==="map";gt(Nt,yt.posMatrix,x,y,Nr,so,ae,z,qi,Si)}const Ol=x.translatePosMatrix(yt.posMatrix,dt,w,P),za=je||y&&Ke||tl?dd:Nr,Er=x.translatePosMatrix(so,dt,w,P,!0),kt=Mt&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let gi;gi=Mt?Nt.iconsInText?ls(xn.kind,Xn,Fe,ae,x,Ol,za,Er,er,$i):os(xn.kind,Xn,Fe,ae,x,Ol,za,Er,y,er):qs(xn.kind,Xn,Fe,ae,x,Ol,za,Er,y,er);const us={program:kr,buffers:en,uniformValues:gi,atlasTexture:Ni,atlasTextureIcon:pi,atlasInterpolation:Wr,atlasInterpolationIcon:gr,isSDF:Mt,hasHalo:kt};if(ye&&Nt.canOverlap){Ae=!0;const Si=en.segments.get();for(const qi of Si)it.push({segments:new u.S([qi]),sortKey:qi.sortKey,state:us,terrainData:On})}else it.push({segments:en.segments,sortKey:0,state:us,terrainData:On})}Ae&&it.sort((yt,dt)=>yt.sortKey-dt.sortKey);for(const yt of it){const dt=yt.state;if(X.activeTexture.set(oe.TEXTURE0),dt.atlasTexture.bind(dt.atlasInterpolation,oe.CLAMP_TO_EDGE),dt.atlasTextureIcon&&(X.activeTexture.set(oe.TEXTURE1),dt.atlasTextureIcon&&dt.atlasTextureIcon.bind(dt.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),dt.isSDF){const Nt=dt.uniformValues;dt.hasHalo&&(Nt.u_is_halo=1,du(dt.buffers,yt.segments,d,x,dt.program,$e,U,q,Nt,yt.terrainData)),Nt.u_is_halo=0}du(dt.buffers,yt.segments,d,x,dt.program,$e,U,q,dt.uniformValues,yt.terrainData)}}function du(x,r,d,m,y,w,P,j,R,z){const U=m.context;y.draw(U,U.gl.TRIANGLES,w,P,j,Gr.disabled,R,z,d.id,x.layoutVertexBuffer,x.indexBuffer,r,d.paint,m.transform.zoom,x.programConfigurations.get(d.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Wo(x,r,d,m,y){if(!d||!m||!m.imageAtlas)return;const w=m.imageAtlas.patternPositions;let P=w[d.to.toString()],j=w[d.from.toString()];if(!P&&j&&(P=j),!j&&P&&(j=P),!P||!j){const R=y.getPaintProperty(r);P=w[R],j=w[R]}P&&j&&x.setConstantPatternPositions(P,j)}function hu(x,r,d,m,y,w,P){const j=x.context.gl,R="fill-pattern",z=d.paint.get(R),U=z&&z.constantOr(1),q=d.getCrossfadeParameters();let X,oe,le,me,ae;P?(oe=U&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=j.LINES):(oe=U?"fillPattern":"fill",X=j.TRIANGLES);const je=z.constantOr(null);for(const Fe of m){const ye=r.getTile(Fe);if(U&&!ye.patternsLoaded())continue;const Ae=ye.getBucket(d);if(!Ae)continue;const $e=Ae.programConfigurations.get(d.id),Ke=x.useProgram(oe,$e),it=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Fe);U&&(x.context.activeTexture.set(j.TEXTURE0),ye.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),$e.updatePaintBuffers(q)),Wo($e,R,je,ye,d);const yt=it?Fe:null,dt=x.translatePosMatrix(yt?yt.posMatrix:Fe.posMatrix,ye,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(P){me=Ae.indexBuffer2,ae=Ae.segments2;const Nt=[j.drawingBufferWidth,j.drawingBufferHeight];le=oe==="fillOutlinePattern"&&U?to(dt,x,q,ye,Nt):vc(dt,Nt)}else me=Ae.indexBuffer,ae=Ae.segments,le=U?wl(dt,x,q,ye):au(dt);Ke.draw(x.context,X,y,x.stencilModeForClipping(Fe),w,Gr.disabled,le,it,d.id,Ae.layoutVertexBuffer,me,ae,d.paint,x.transform.zoom,$e)}}function So(x,r,d,m,y,w,P){const j=x.context,R=j.gl,z="fill-extrusion-pattern",U=d.paint.get(z),q=U.constantOr(1),X=d.getCrossfadeParameters(),oe=d.paint.get("fill-extrusion-opacity"),le=U.constantOr(null);for(const me of m){const ae=r.getTile(me),je=ae.getBucket(d);if(!je)continue;const Fe=x.style.map.terrain&&x.style.map.terrain.getTerrainData(me),ye=je.programConfigurations.get(d.id),Ae=x.useProgram(q?"fillExtrusionPattern":"fillExtrusion",ye);q&&(x.context.activeTexture.set(R.TEXTURE0),ae.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ye.updatePaintBuffers(X)),Wo(ye,z,le,ae,d);const $e=x.translatePosMatrix(me.posMatrix,ae,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ke=d.paint.get("fill-extrusion-vertical-gradient"),it=q?ga($e,x,Ke,oe,me,X,ae):$o($e,x,Ke,oe);Ae.draw(j,j.gl.TRIANGLES,y,w,P,Gr.backCCW,it,Fe,d.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,d.paint,x.transform.zoom,ye,x.style.map.terrain&&je.centroidVertexBuffer)}}function Dp(x,r,d,m,y,w,P){const j=x.context,R=j.gl,z=d.fbo;if(!z)return;const U=x.useProgram("hillshade"),q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(r);j.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,z.colorAttachment.get()),U.draw(j,R.TRIANGLES,y,w,P,Gr.disabled,((X,oe,le,me)=>{const ae=le.paint.get("hillshade-shadow-color"),je=le.paint.get("hillshade-highlight-color"),Fe=le.paint.get("hillshade-accent-color");let ye=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=X.transform.angle);const Ae=!X.options.moving;return{u_matrix:me?me.posMatrix:X.transform.calculatePosMatrix(oe.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:Mn(0,oe.tileID),u_light:[le.paint.get("hillshade-exaggeration"),ye],u_shadow:ae,u_highlight:je,u_accent:Fe}})(x,d,m,q?r:null),q,m.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}function wh(x,r,d,m,y,w){const P=x.context,j=P.gl,R=r.dem;if(R&&R.data){const z=R.dim,U=R.stride,q=R.getPixels();if(P.activeTexture.set(j.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||x.getTileTexture(U),r.demTexture){const oe=r.demTexture;oe.update(q,{premultiply:!1}),oe.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else r.demTexture=new pt(P,q,j.RGBA,{premultiply:!1}),r.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);P.activeTexture.set(j.TEXTURE0);let X=r.fbo;if(!X){const oe=new pt(P,{width:z,height:z,data:null},j.RGBA);oe.bind(j.LINEAR,j.CLAMP_TO_EDGE),X=r.fbo=P.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(oe.texture)}P.bindFramebuffer.set(X.framebuffer),P.viewport.set([0,0,z,z]),x.useProgram("hillshadePrepare").draw(P,j.TRIANGLES,m,y,w,Gr.disabled,((oe,le)=>{const me=le.stride,ae=u.Z();return u.aS(ae,0,u.N,-u.N,0,0,1),u.$(ae,ae,[0,-u.N,0]),{u_matrix:ae,u_image:1,u_dimension:[me,me],u_zoom:oe.overscaledZ,u_unpack:le.getUnpackVector()}})(r.tileID,R),null,d.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ch(x,r,d,m,y,w){const P=m.paint.get("raster-fade-duration");if(!w&&P>0){const j=u.h.now(),R=(j-x.timeAdded)/P,z=r?(j-r.timeAdded)/P:-1,U=d.getSource(),q=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),X=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(x.tileID.overscaledZ-q),oe=X&&x.refreshedUponExpiration?1:u.ad(X?R:1-z,0,1);return x.refreshedUponExpiration&&R>=1&&(x.refreshedUponExpiration=!1),r?{opacity:1,mix:1-oe}:{opacity:oe,mix:0}}return{opacity:1,mix:0}}const Af=new u.aT(1,0,0,1),hd=new u.aT(0,1,0,1),Nh=new u.aT(0,0,1,1),Sh=new u.aT(1,0,1,1),Mf=new u.aT(0,1,1,1);function fu(x,r,d,m){mu(x,0,r+d/2,x.transform.width,d,m)}function fd(x,r,d,m){mu(x,r-d/2,0,d,x.transform.height,m)}function mu(x,r,d,m,y,w){const P=x.context,j=P.gl;j.enable(j.SCISSOR_TEST),j.scissor(r*x.pixelRatio,d*x.pixelRatio,m*x.pixelRatio,y*x.pixelRatio),P.clear({color:w}),j.disable(j.SCISSOR_TEST)}function kl(x,r,d){const m=x.context,y=m.gl,w=d.posMatrix,P=x.useProgram("debug"),j=sr.disabled,R=ei.disabled,z=x.colorModeForRenderPass(),U="$debug",q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(d);m.activeTexture.set(y.TEXTURE0);const X=r.getTileByID(d.key).latestRawTileData,oe=Math.floor((X&&X.byteLength||0)/1024),le=r.getTile(d).tileSize,me=512/Math.min(le,512)*(d.overscaledZ/x.transform.zoom)*.5;let ae=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ae+=` => ${d.overscaledZ}`),function(je,Fe){je.initDebugOverlayCanvas();const ye=je.debugOverlayCanvas,Ae=je.context.gl,$e=je.debugOverlayCanvas.getContext("2d");$e.clearRect(0,0,ye.width,ye.height),$e.shadowColor="white",$e.shadowBlur=2,$e.lineWidth=1.5,$e.strokeStyle="white",$e.textBaseline="top",$e.font="bold 36px Open Sans, sans-serif",$e.fillText(Fe,5,5),$e.strokeText(Fe,5,5),je.debugOverlayTexture.update(ye),je.debugOverlayTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}(x,`${ae} ${oe}kB`),P.draw(m,y.TRIANGLES,j,R,mi.alphaBlended,Gr.disabled,or(w,u.aT.transparent,me),null,U,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),P.draw(m,y.LINE_STRIP,j,R,z,Gr.disabled,or(w,u.aT.red),q,U,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function li(x,r,d){const m=x.context,y=m.gl,w=x.colorModeForRenderPass(),P=new sr(y.LEQUAL,sr.ReadWrite,x.depthRangeFor3D),j=x.useProgram("terrain"),R=r.getTerrainMesh();m.bindFramebuffer.set(null),m.viewport.set([0,0,x.width,x.height]);for(const z of d){const U=x.renderToTexture.getTexture(z),q=r.getTerrainData(z.tileID);m.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,U.texture);const X={u_matrix:x.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(x.transform.zoom)};j.draw(m,y.TRIANGLES,P,ei.disabled,w,Gr.backCCW,X,q,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class Zo{constructor(r,d){this.context=new Co(r),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.Z(),renderTime:0},this.setup(),this.numSublayers=mr.maxUnderzooming+mr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Uo}resize(r,d,m){if(this.width=Math.floor(r*m),this.height=Math.floor(d*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,d=new u.a_;d.emplaceBack(0,0),d.emplaceBack(u.N,0),d.emplaceBack(0,u.N),d.emplaceBack(u.N,u.N),this.tileExtentBuffer=r.createVertexBuffer(d,_l.members),this.tileExtentSegments=u.S.simpleSegment(0,0,4,2);const m=new u.a_;m.emplaceBack(0,0),m.emplaceBack(u.N,0),m.emplaceBack(0,u.N),m.emplaceBack(u.N,u.N),this.debugBuffer=r.createVertexBuffer(m,_l.members),this.debugSegments=u.S.simpleSegment(0,0,4,5);const y=new u.V;y.emplaceBack(0,0,0,0),y.emplaceBack(u.N,0,u.N,0),y.emplaceBack(0,u.N,0,u.N),y.emplaceBack(u.N,u.N,u.N,u.N),this.rasterBoundsBuffer=r.createVertexBuffer(y,zt.members),this.rasterBoundsSegments=u.S.simpleSegment(0,0,4,2);const w=new u.a_;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(w,_l.members),this.viewportSegments=u.S.simpleSegment(0,0,4,2);const P=new u.a$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(P);const j=new u.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(j);const R=this.context.gl;this.stencilClearMode=new ei({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const r=this.context,d=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=u.Z();u.aS(m,0,this.width,this.height,0,0,1),u.a0(m,m,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,d.TRIANGLES,sr.disabled,this.stencilClearMode,mi.disabled,Gr.disabled,od(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!d||!d.length)return;this.currentStencilSource=r.source;const m=this.context,y=m.gl;this.nextStencilID+d.length>256&&this.clearStencil(),m.setColorMode(mi.disabled),m.setDepthMode(sr.disabled);const w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of d){const j=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);w.draw(m,y.TRIANGLES,sr.disabled,new ei({func:y.ALWAYS,mask:0},j,255,y.KEEP,y.KEEP,y.REPLACE),mi.disabled,Gr.disabled,od(P.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,d=this.context.gl;return new ei({func:d.NOTEQUAL,mask:255},r,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(r){const d=this.context.gl;return new ei({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(r){const d=this.context.gl,m=r.sort((P,j)=>j.overscaledZ-P.overscaledZ),y=m[m.length-1].overscaledZ,w=m[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const P={};for(let j=0;j<w;j++)P[j+y]=new ei({func:d.GEQUAL,mask:255},j+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=w,[P,m]}return[{[y]:ei.disabled},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new mi([r.CONSTANT_COLOR,r.ONE],new u.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mi.unblended:mi.alphaBlended}depthModeForSublayer(r,d,m){if(!this.opaquePassEnabledForLayer())return sr.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new sr(m||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,d){this.style=r,this.options=d,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(u.h.now()),this.imageManager.beginFrame();const m=this.style._order,y=this.style.sourceCaches,w={},P={},j={};for(const R in y){const z=y[R];z.used&&z.prepare(this.context),w[R]=z.getVisibleCoordinates(),P[R]=w[R].slice().reverse(),j[R]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<m.length;R++)if(this.style._layers[m[R]].is3D()){this.opaquePassCutoff=R;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const R=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||R.length)&&(u.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,U){const q=z.context,X=q.gl,oe=mi.unblended,le=new sr(X.LEQUAL,sr.ReadWrite,[0,1]),me=U.getTerrainMesh(),ae=U.sourceCache.getRenderableTiles(),je=z.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:u.aT.transparent,depth:1});for(const Fe of ae){const ye=U.getTerrainData(Fe.tileID),Ae={u_matrix:z.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};je.draw(q,X.TRIANGLES,le,ei.disabled,oe,Gr.backCCW,Ae,ye,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain),function(z,U){const q=z.context,X=q.gl,oe=mi.unblended,le=new sr(X.LEQUAL,sr.ReadWrite,[0,1]),me=U.getTerrainMesh(),ae=U.getCoordsTexture(),je=U.sourceCache.getRenderableTiles(),Fe=z.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),q.clear({color:u.aT.transparent,depth:1}),U.coordsIndex=[];for(const ye of je){const Ae=U.getTerrainData(ye.tileID);q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ae.texture);const $e={u_matrix:z.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(z.transform.zoom)};Fe.draw(q,X.TRIANGLES,le,ei.disabled,oe,Gr.backCCW,$e,Ae,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),U.coordsIndex.push(ye.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const R of m){const z=this.style._layers[R];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const U=P[z.source];(z.type==="custom"||U.length)&&this.renderLayer(this,y[z.source],z,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?u.aT.black:u.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[m[this.currentLayer]],z=y[R.source],U=w[R.source];this._renderTileClippingMasks(R,U),this.renderLayer(this,z,R,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const R=this.style._layers[m[this.currentLayer]],z=y[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const U=(R.type==="symbol"?j:P)[R.source];this._renderTileClippingMasks(R,w[R.source]),this.renderLayer(this,z,R,U)}if(this.options.showTileBoundaries){const R=function(z,U){let q=null;const X=Object.values(z._layers).flatMap(ae=>ae.source&&!ae.isHidden(U)?[z.sourceCaches[ae.source]]:[]),oe=X.filter(ae=>ae.getSource().type==="vector"),le=X.filter(ae=>ae.getSource().type!=="vector"),me=ae=>{(!q||q.getSource().maxzoom<ae.getSource().maxzoom)&&(q=ae)};return oe.forEach(ae=>me(ae)),q||le.forEach(ae=>me(ae)),q}(this.style,this.transform.zoom);R&&function(z,U,q){for(let X=0;X<q.length;X++)kl(z,U,q[X])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const z=R.transform.padding;fu(R,R.transform.height-(z.top||0),3,Af),fu(R,z.bottom||0,3,hd),fd(R,z.left||0,3,Nh),fd(R,R.transform.width-(z.right||0),3,Sh);const U=R.transform.centerPoint;(function(q,X,oe,le){mu(q,X-1,oe-10,2,20,le),mu(q,X-10,oe-1,20,2,le)})(R,U.x,R.transform.height-U.y,Mf)}(this),this.context.setDefault()}renderLayer(r,d,m,y){if(!m.isHidden(this.transform.zoom)&&(m.type==="background"||m.type==="custom"||(y||[]).length))switch(this.id=m.id,m.type){case"symbol":(function(w,P,j,R,z){if(w.renderPass!=="translucent")return;const U=ei.disabled,q=w.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,oe,le,me,ae,je,Fe){const ye=oe.transform,Ae=ae==="map",$e=je==="map";for(const Ke of X){const it=me.getTile(Ke),yt=it.getBucket(le);if(!yt||!yt.text||!yt.text.segments.get().length)continue;const dt=u.ah(yt.textSizeData,ye.zoom),Nt=xe(it,1,oe.transform.zoom),en=nt(Ke.posMatrix,$e,Ae,oe.transform,Nt),Qn=le.layout.get("icon-text-fit")!=="none"&&yt.hasIconData();if(dt){const Mt=Math.pow(2,ye.zoom-it.tileID.overscaledZ);ya(yt,Ae,$e,Fe,ye,en,Ke.posMatrix,Mt,dt,Qn,oe.style.map.terrain?(xn,tn)=>oe.style.map.terrain.getElevation(Ke,xn,tn):null)}}}(R,w,j,P,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),z),j.paint.get("icon-opacity").constantOr(1)!==0&&ba(w,P,j,R,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),U,q),j.paint.get("text-opacity").constantOr(1)!==0&&ba(w,P,j,R,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),U,q),P.map.showCollisionBoxes&&(uu(w,P,j,R,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),uu(w,P,j,R,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(r,d,m,y,this.style.placement.variableOffsets);break;case"circle":(function(w,P,j,R){if(w.renderPass!=="translucent")return;const z=j.paint.get("circle-opacity"),U=j.paint.get("circle-stroke-width"),q=j.paint.get("circle-stroke-opacity"),X=!j.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(U.constantOr(1)===0||q.constantOr(1)===0))return;const oe=w.context,le=oe.gl,me=w.depthModeForSublayer(0,sr.ReadOnly),ae=ei.disabled,je=w.colorModeForRenderPass(),Fe=[];for(let ye=0;ye<R.length;ye++){const Ae=R[ye],$e=P.getTile(Ae),Ke=$e.getBucket(j);if(!Ke)continue;const it=Ke.programConfigurations.get(j.id),yt=w.useProgram("circle",it),dt=Ke.layoutVertexBuffer,Nt=Ke.indexBuffer,en=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ae),Qn={programConfiguration:it,program:yt,layoutVertexBuffer:dt,indexBuffer:Nt,uniformValues:Oa(w,Ae,$e,j),terrainData:en};if(X){const Mt=Ke.segments.get();for(const xn of Mt)Fe.push({segments:new u.S([xn]),sortKey:xn.sortKey,state:Qn})}else Fe.push({segments:Ke.segments,sortKey:0,state:Qn})}X&&Fe.sort((ye,Ae)=>ye.sortKey-Ae.sortKey);for(const ye of Fe){const{programConfiguration:Ae,program:$e,layoutVertexBuffer:Ke,indexBuffer:it,uniformValues:yt,terrainData:dt}=ye.state;$e.draw(oe,le.TRIANGLES,me,ae,je,Gr.disabled,yt,dt,j.id,Ke,it,ye.segments,j.paint,w.transform.zoom,Ae)}})(r,d,m,y);break;case"heatmap":(function(w,P,j,R){if(j.paint.get("heatmap-opacity")!==0)if(w.renderPass==="offscreen"){const z=w.context,U=z.gl,q=ei.disabled,X=new mi([U.ONE,U.ONE],u.aT.transparent,[!0,!0,!0,!0]);(function(oe,le,me){const ae=oe.gl;oe.activeTexture.set(ae.TEXTURE1),oe.viewport.set([0,0,le.width/4,le.height/4]);let je=me.heatmapFbo;if(je)ae.bindTexture(ae.TEXTURE_2D,je.colorAttachment.get()),oe.bindFramebuffer.set(je.framebuffer);else{const Fe=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Fe),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),je=me.heatmapFbo=oe.createFramebuffer(le.width/4,le.height/4,!1,!1),function(ye,Ae,$e,Ke){var it,yt;const dt=ye.gl,Nt=(it=ye.HALF_FLOAT)!==null&&it!==void 0?it:dt.UNSIGNED_BYTE,en=(yt=ye.RGBA16F)!==null&&yt!==void 0?yt:dt.RGBA;dt.texImage2D(dt.TEXTURE_2D,0,en,Ae.width/4,Ae.height/4,0,dt.RGBA,Nt,null),Ke.colorAttachment.set($e)}(oe,le,Fe,je)}})(z,w,j),z.clear({color:u.aT.transparent});for(let oe=0;oe<R.length;oe++){const le=R[oe];if(P.hasRenderableParent(le))continue;const me=P.getTile(le),ae=me.getBucket(j);if(!ae)continue;const je=ae.programConfigurations.get(j.id),Fe=w.useProgram("heatmap",je),{zoom:ye}=w.transform;Fe.draw(z,U.TRIANGLES,sr.disabled,q,X,Gr.disabled,bo(le.posMatrix,me,ye,j.paint.get("heatmap-intensity")),null,j.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,j.paint,w.transform.zoom,je)}z.viewport.set([0,0,w.width,w.height])}else w.renderPass==="translucent"&&(w.context.setColorMode(w.colorModeForRenderPass()),function(z,U){const q=z.context,X=q.gl,oe=U.heatmapFbo;if(!oe)return;q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,oe.colorAttachment.get()),q.activeTexture.set(X.TEXTURE1);let le=U.colorRampTexture;le||(le=U.colorRampTexture=new pt(q,U.colorRamp,X.RGBA)),le.bind(X.LINEAR,X.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(q,X.TRIANGLES,sr.disabled,ei.disabled,z.colorModeForRenderPass(),Gr.disabled,((me,ae,je,Fe)=>{const ye=u.Z();u.aS(ye,0,me.width,me.height,0,0,1);const Ae=me.context.gl;return{u_matrix:ye,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(z,U),null,U.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,U.paint,z.transform.zoom)}(w,j))})(r,d,m,y);break;case"line":(function(w,P,j,R){if(w.renderPass!=="translucent")return;const z=j.paint.get("line-opacity"),U=j.paint.get("line-width");if(z.constantOr(1)===0||U.constantOr(1)===0)return;const q=w.depthModeForSublayer(0,sr.ReadOnly),X=w.colorModeForRenderPass(),oe=j.paint.get("line-dasharray"),le=j.paint.get("line-pattern"),me=le.constantOr(1),ae=j.paint.get("line-gradient"),je=j.getCrossfadeParameters(),Fe=me?"linePattern":oe?"lineSDF":ae?"lineGradient":"line",ye=w.context,Ae=ye.gl;let $e=!0;for(const Ke of R){const it=P.getTile(Ke);if(me&&!it.patternsLoaded())continue;const yt=it.getBucket(j);if(!yt)continue;const dt=yt.programConfigurations.get(j.id),Nt=w.context.program.get(),en=w.useProgram(Fe,dt),Qn=$e||en.program!==Nt,Mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),xn=le.constantOr(null);if(xn&&it.imageAtlas){const Xn=it.imageAtlas,On=Xn.patternPositions[xn.to.toString()],er=Xn.patternPositions[xn.from.toString()];On&&er&&dt.setConstantPatternPositions(On,er)}const tn=Mt?Ke:null,kr=me?Sl(w,it,j,je,tn):oe?xo(w,it,j,oe,je,tn):ae?gs(w,it,j,yt.lineClipsArray.length,tn):Nl(w,it,j,tn);if(me)ye.activeTexture.set(Ae.TEXTURE0),it.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),dt.updatePaintBuffers(je);else if(oe&&(Qn||w.lineAtlas.dirty))ye.activeTexture.set(Ae.TEXTURE0),w.lineAtlas.bind(ye);else if(ae){const Xn=yt.gradients[j.id];let On=Xn.texture;if(j.gradientVersion!==Xn.version){let er=256;if(j.stepInterpolant){const Ni=P.getSource().maxzoom,Wr=Ke.canonical.z===Ni?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;er=u.ad(u.aY(yt.maxLineLength/u.N*1024*Wr),256,ye.maxTextureSize)}Xn.gradient=u.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:er,image:Xn.gradient||void 0,clips:yt.lineClipsArray}),Xn.texture?Xn.texture.update(Xn.gradient):Xn.texture=new pt(ye,Xn.gradient,Ae.RGBA),Xn.version=j.gradientVersion,On=Xn.texture}ye.activeTexture.set(Ae.TEXTURE0),On.bind(j.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}en.draw(ye,Ae.TRIANGLES,q,w.stencilModeForClipping(Ke),X,Gr.disabled,kr,Mt,j.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,j.paint,w.transform.zoom,dt,yt.layoutVertexBuffer2),$e=!1}})(r,d,m,y);break;case"fill":(function(w,P,j,R){const z=j.paint.get("fill-color"),U=j.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const q=w.colorModeForRenderPass(),X=j.paint.get("fill-pattern"),oe=w.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(u.aT.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===oe){const le=w.depthModeForSublayer(1,w.renderPass==="opaque"?sr.ReadWrite:sr.ReadOnly);hu(w,P,j,R,le,q,!1)}if(w.renderPass==="translucent"&&j.paint.get("fill-antialias")){const le=w.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,sr.ReadOnly);hu(w,P,j,R,le,q,!0)}})(r,d,m,y);break;case"fill-extrusion":(function(w,P,j,R){const z=j.paint.get("fill-extrusion-opacity");if(z!==0&&w.renderPass==="translucent"){const U=new sr(w.context.gl.LEQUAL,sr.ReadWrite,w.depthRangeFor3D);if(z!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))So(w,P,j,R,U,ei.disabled,mi.disabled),So(w,P,j,R,U,w.stencilModeFor3D(),w.colorModeForRenderPass());else{const q=w.colorModeForRenderPass();So(w,P,j,R,U,ei.disabled,q)}}})(r,d,m,y);break;case"hillshade":(function(w,P,j,R){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const z=w.context,U=w.depthModeForSublayer(0,sr.ReadOnly),q=w.colorModeForRenderPass(),[X,oe]=w.renderPass==="translucent"?w.stencilConfigForOverlap(R):[{},R];for(const le of oe){const me=P.getTile(le);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&w.renderPass==="offscreen"?wh(w,me,j,U,ei.disabled,q):w.renderPass==="translucent"&&Dp(w,le,me,j,U,X[le.overscaledZ],q)}z.viewport.set([0,0,w.width,w.height])})(r,d,m,y);break;case"raster":(function(w,P,j,R){if(w.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!R.length)return;const z=w.context,U=z.gl,q=P.getSource(),X=w.useProgram("raster"),oe=w.colorModeForRenderPass(),[le,me]=q instanceof mn?[{},R]:w.stencilConfigForOverlap(R),ae=me[me.length-1].overscaledZ,je=!w.options.moving;for(const Fe of me){const ye=w.depthModeForSublayer(Fe.overscaledZ-ae,j.paint.get("raster-opacity")===1?sr.ReadWrite:sr.ReadOnly,U.LESS),Ae=P.getTile(Fe);Ae.registerFadeDuration(j.paint.get("raster-fade-duration"));const $e=P.findLoadedParent(Fe,0),Ke=Ch(Ae,$e,P,j,w.transform,w.style.map.terrain);let it,yt;const dt=j.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;z.activeTexture.set(U.TEXTURE0),Ae.texture.bind(dt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(U.TEXTURE1),$e?($e.texture.bind(dt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),it=Math.pow(2,$e.tileID.overscaledZ-Ae.tileID.overscaledZ),yt=[Ae.tileID.canonical.x*it%1,Ae.tileID.canonical.y*it%1]):Ae.texture.bind(dt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Nt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe),en=Nt?Fe:null,Qn=en?en.posMatrix:w.transform.calculatePosMatrix(Fe.toUnwrapped(),je),Mt=oi(Qn,yt||[0,0],it||1,Ke,j);q instanceof mn?X.draw(z,U.TRIANGLES,ye,ei.disabled,oe,Gr.disabled,Mt,Nt,j.id,q.boundsBuffer,w.quadTriangleIndexBuffer,q.boundsSegments):X.draw(z,U.TRIANGLES,ye,le[Fe.overscaledZ],oe,Gr.disabled,Mt,Nt,j.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(r,d,m,y);break;case"background":(function(w,P,j,R){const z=j.paint.get("background-color"),U=j.paint.get("background-opacity");if(U===0)return;const q=w.context,X=q.gl,oe=w.transform,le=oe.tileSize,me=j.paint.get("background-pattern");if(w.isPatternMissing(me))return;const ae=!me&&z.a===1&&U===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ae)return;const je=ei.disabled,Fe=w.depthModeForSublayer(0,ae==="opaque"?sr.ReadWrite:sr.ReadOnly),ye=w.colorModeForRenderPass(),Ae=w.useProgram(me?"backgroundPattern":"background"),$e=R||oe.coveringTiles({tileSize:le,terrain:w.style.map.terrain});me&&(q.activeTexture.set(X.TEXTURE0),w.imageManager.bind(w.context));const Ke=j.getCrossfadeParameters();for(const it of $e){const yt=R?it.posMatrix:w.transform.calculatePosMatrix(it.toUnwrapped()),dt=me?vs(yt,U,w,me,{tileID:it,tileSize:le},Ke):yc(yt,U,z),Nt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(it);Ae.draw(q,X.TRIANGLES,Fe,je,ye,Gr.disabled,dt,Nt,j.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(r,0,m,y);break;case"custom":(function(w,P,j){const R=w.context,z=j.implementation;if(w.renderPass==="offscreen"){const U=z.prerender;U&&(w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),U.call(z,R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),R.setStencilMode(ei.disabled);const U=z.renderingMode==="3d"?new sr(w.context.gl.LEQUAL,sr.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,sr.ReadOnly);R.setDepthMode(U),z.render(R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState(),R.bindFramebuffer.set(null)}})(r,0,m)}}translatePosMatrix(r,d,m,y,w){if(!m[0]&&!m[1])return r;const P=w?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(P){const z=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*z,m[0]*z+m[1]*U]}const j=[w?m[0]:xe(d,m[0],this.transform.zoom),w?m[1]:xe(d,m[1],this.transform.zoom),0],R=new Float32Array(16);return u.$(R,r,j),R}saveTileTexture(r){const d=this._tileTextures[r.size[0]];d?d.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const d=this._tileTextures[r];return d&&d.length>0?d.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const d=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!d||!m}useProgram(r,d){this.cache=this.cache||{};const m=r+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new yo(this.context,zr[r],d,El[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new pt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:d}=this.context.gl;return this.width!==r||this.height!==d}}class Ds{constructor(r,d){this.points=r,this.planes=d}static fromInvProjectionMatrix(r,d,m){const y=Math.pow(2,m),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const R=1/(j=u.ag([],j,r))[3]/d*y;return u.b3(j,j,[R,R,1/j[3],R])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const R=function(X,oe){var le=oe[0],me=oe[1],ae=oe[2],je=le*le+me*me+ae*ae;return je>0&&(je=1/Math.sqrt(je)),X[0]=oe[0]*je,X[1]=oe[1]*je,X[2]=oe[2]*je,X}([],function(X,oe,le){var me=oe[0],ae=oe[1],je=oe[2],Fe=le[0],ye=le[1],Ae=le[2];return X[0]=ae*Ae-je*ye,X[1]=je*Fe-me*Ae,X[2]=me*ye-ae*Fe,X}([],Je([],w[j[0]],w[j[1]]),Je([],w[j[2]],w[j[1]]))),z=-((U=R)[0]*(q=w[j[1]])[0]+U[1]*q[1]+U[2]*q[2]);var U,q;return R.concat(z)});return new Ds(w,P)}}class Cc{constructor(r,d){this.min=r,this.max=d,this.center=function(m,y,w){return m[0]=.5*y[0],m[1]=.5*y[1],m[2]=.5*y[2],m}([],function(m,y,w){return m[0]=y[0]+w[0],m[1]=y[1]+w[1],m[2]=y[2]+w[2],m}([],this.min,this.max))}quadrant(r){const d=[r%2==0,r<2],m=Ue(this.min),y=Ue(this.max);for(let w=0;w<d.length;w++)m[w]=d[w]?this.min[w]:this.center[w],y[w]=d[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new Cc(m,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let y=0;y<r.planes.length;y++){const w=r.planes[y];let P=0;for(let j=0;j<d.length;j++)u.b4(w,d[j])>=0&&P++;if(P===0)return 0;P!==d.length&&(m=!1)}if(m)return 2;for(let y=0;y<3;y++){let w=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let j=0;j<r.points.length;j++){const R=r.points[j][y]-this.min[y];w=Math.min(w,R),P=Math.max(P,R)}if(P<0||w>this.max[y]-this.min[y])return 0}return 1}}class pu{constructor(r=0,d=0,m=0,y=0){if(isNaN(r)||r<0||isNaN(d)||d<0||isNaN(m)||m<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=d,this.left=m,this.right=y}interpolate(r,d,m){return d.top!=null&&r.top!=null&&(this.top=u.B.number(r.top,d.top,m)),d.bottom!=null&&r.bottom!=null&&(this.bottom=u.B.number(r.bottom,d.bottom,m)),d.left!=null&&r.left!=null&&(this.left=u.B.number(r.left,d.left,m)),d.right!=null&&r.right!=null&&(this.right=u.B.number(r.right,d.right,m)),this}getCenter(r,d){const m=u.ad((this.left+r-this.right)/2,0,r),y=u.ad((this.top+d-this.bottom)/2,0,d);return new u.P(m,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new pu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class md{constructor(r,d,m,y,w){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=w===void 0||!!w,this._minZoom=r||0,this._maxZoom=d||22,this._minPitch=m??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pu,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new md(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const d=-u.b5(r,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var m=new u.A(4);return u.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}(),function(m,y,w){var P=y[0],j=y[1],R=y[2],z=y[3],U=Math.sin(w),q=Math.cos(w);m[0]=P*q+R*U,m[1]=j*q+z*U,m[2]=P*-U+R*q,m[3]=j*-U+z*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const d=u.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const d=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,d,m){this._unmodified=!1,this._edgeInsets.interpolate(r,d,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const d=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(r){const d=[new u.b6(0,r)];if(this._renderWorldCopies){const m=this.pointCoordinate(new u.P(0,0)),y=this.pointCoordinate(new u.P(this.width,0)),w=this.pointCoordinate(new u.P(this.width,this.height)),P=this.pointCoordinate(new u.P(0,this.height)),j=Math.floor(Math.min(m.x,y.x,w.x,P.x)),R=Math.floor(Math.max(m.x,y.x,w.x,P.x)),z=1;for(let U=j-z;U<=R+z;U++)U!==0&&d.push(new u.b6(U,r))}return d}coveringTiles(r){var d,m;let y=this.coveringZoomLevel(r);const w=y;if(r.minzoom!==void 0&&y<r.minzoom)return[];r.maxzoom!==void 0&&y>r.maxzoom&&(y=r.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),j=u.U.fromLngLat(this.center),R=Math.pow(2,y),z=[R*P.x,R*P.y,0],U=[R*j.x,R*j.y,0],q=Ds.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let X=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=y);const oe=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,le=ye=>({aabb:new Cc([ye*R,0,0],[(ye+1)*R,R,0]),zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),me=[],ae=[],je=y,Fe=r.reparseOverscaled?w:y;if(this._renderWorldCopies)for(let ye=1;ye<=3;ye++)me.push(le(-ye)),me.push(le(ye));for(me.push(le(0));me.length>0;){const ye=me.pop(),Ae=ye.x,$e=ye.y;let Ke=ye.fullyVisible;if(!Ke){const en=ye.aabb.intersects(q);if(en===0)continue;Ke=en===2}const it=r.terrain?z:U,yt=ye.aabb.distanceX(it),dt=ye.aabb.distanceY(it),Nt=Math.max(Math.abs(yt),Math.abs(dt));if(ye.zoom===je||Nt>oe+(1<<je-ye.zoom)-2&&ye.zoom>=X){const en=je-ye.zoom,Qn=z[0]-.5-(Ae<<en),Mt=z[1]-.5-($e<<en);ae.push({tileID:new u.O(ye.zoom===je?Fe:ye.zoom,ye.wrap,ye.zoom,Ae,$e),distanceSq:tt([U[0]-.5-Ae,U[1]-.5-$e]),tileDistanceToCamera:Math.sqrt(Qn*Qn+Mt*Mt)})}else for(let en=0;en<4;en++){const Qn=(Ae<<1)+en%2,Mt=($e<<1)+(en>>1),xn=ye.zoom+1;let tn=ye.aabb.quadrant(en);if(r.terrain){const kr=new u.O(xn,ye.wrap,xn,Qn,Mt),Xn=r.terrain.getMinMaxElevation(kr),On=(d=Xn.minElevation)!==null&&d!==void 0?d:this.elevation,er=(m=Xn.maxElevation)!==null&&m!==void 0?m:this.elevation;tn=new Cc([tn.min[0],tn.min[1],On],[tn.max[0],tn.max[1],er])}me.push({aabb:tn,zoom:xn,x:Qn,y:Mt,wrap:ye.wrap,fullyVisible:Ke})}}return ae.sort((ye,Ae)=>ye.distanceSq-Ae.distanceSq).map(ye=>ye.tileID)}resize(r,d){this.width=r,this.height=d,this.pixelsToGLUnits=[2/r,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const d=u.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.P(u.G(r.lng)*this.worldSize,u.H(d)*this.worldSize)}unproject(r){return new u.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const d=this.pointLocation(this.centerPoint,r),m=r.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-m))return;const y=this.getCameraPosition(),w=u.U.fromLngLat(y.lngLat,y.altitude),P=u.U.fromLngLat(d,m),j=w.x-P.x,R=w.y-P.y,z=w.z-P.z,U=Math.sqrt(j*j+R*R+z*z),q=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=m,this._center=d,this.zoom=q}setLocationAtPoint(r,d){const m=this.pointCoordinate(d),y=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(r),P=new u.U(w.x-(m.x-y.x),w.y-(m.y-y.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,d){return d?this.coordinatePoint(this.locationCoordinate(r),d.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,d){return this.coordinateLocation(this.pointCoordinate(r,d))}locationCoordinate(r){return u.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,d){if(d){const X=d.pointCoordinate(r);if(X!=null)return X}const m=[r.x,r.y,0,1],y=[r.x,r.y,1,1];u.ag(m,m,this.pixelMatrixInverse),u.ag(y,y,this.pixelMatrixInverse);const w=m[3],P=y[3],j=m[1]/w,R=y[1]/P,z=m[2]/w,U=y[2]/P,q=z===U?0:(0-z)/(U-z);return new u.U(u.B.number(m[0]/w,y[0]/P,q)/this.worldSize,u.B.number(j,R,q)/this.worldSize)}coordinatePoint(r,d=0,m=this.pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,d,1];return u.ag(y,y,m),new u.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new wt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new wt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,d=!1){const m=r.key,y=d?this._alignedPosMatrixCache:this._posMatrixCache;if(y[m])return y[m];const w=r.canonical,P=this.worldSize/this.zoomScale(w.z),j=w.x+Math.pow(2,w.z)*r.wrap,R=u.ao(new Float64Array(16));return u.$(R,R,[j*P,w.y*P,0]),u.a0(R,R,[P/u.N,P/u.N,1]),u.a1(R,d?this.alignedProjMatrix:this.projMatrix,R),y[m]=new Float32Array(R),y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,d,m,y,w=-90,P=90,j=-180,R=180;const z=this.size,U=this._unmodified;if(this.latRange){const oe=this.latRange;w=u.H(oe[1])*this.worldSize,P=u.H(oe[0])*this.worldSize,r=P-w<z.y?z.y/(P-w):0}if(this.lngRange){const oe=this.lngRange;j=u.b5(u.G(oe[0])*this.worldSize,0,this.worldSize),R=u.b5(u.G(oe[1])*this.worldSize,0,this.worldSize),R<j&&(R+=this.worldSize),d=R-j<z.x?z.x/(R-j):0}const q=this.point,X=Math.max(d||0,r||0);if(X)return this.center=this.unproject(new u.P(d?(R+j)/2:q.x,r?(P+w)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const oe=q.y,le=z.y/2;oe-le<w&&(y=w+le),oe+le>P&&(y=P-le)}if(this.lngRange){const oe=(j+R)/2,le=u.b5(q.x,oe-this.worldSize/2,oe+this.worldSize/2),me=z.x/2;le-me<j&&(m=j+me),le+me>R&&(m=R-me)}m===void 0&&y===void 0||(this.center=this.unproject(new u.P(m!==void 0?m:q.x,y!==void 0?y:q.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,d=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b7(1,this.center.lat)*this.worldSize;let y=u.ao(new Float64Array(16));u.a0(y,y,[this.width/2,-this.height/2,1]),u.$(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=u.ao(new Float64Array(16)),u.a0(y,y,[1,-1,1]),u.$(y,y,[-1,-1,0]),u.a0(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),j=w-P*this._pixelPerMeter/Math.cos(this._pitch),R=P<0?j:w,z=Math.PI/2+this._pitch,U=this._fov*(.5+r.y/this.height),q=Math.sin(U)*R/Math.sin(u.ad(Math.PI-z-U,.01,Math.PI-.01)),X=this.getHorizon(),oe=2*Math.atan(X/this.cameraToCenterDistance)*(.5+r.y/(2*X)),le=Math.sin(oe)*R/Math.sin(u.ad(Math.PI-z-oe,.01,Math.PI-.01)),me=Math.min(q,le),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*me+R),je=this.height/50;y=new Float64Array(16),u.b8(y,this._fov,this.width/this.height,je,ae),y[8]=2*-r.x/this.width,y[9]=2*r.y/this.height,u.a0(y,y,[1,-1,1]),u.$(y,y,[0,0,-this.cameraToCenterDistance]),u.b9(y,y,this._pitch),u.ae(y,y,this.angle),u.$(y,y,[-d,-m,0]),this.mercatorMatrix=u.a0([],y,[this.worldSize,this.worldSize,this.worldSize]),u.a0(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.a1(new Float64Array(16),this.labelPlaneMatrix,y),u.$(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=u.as([],y),this.pixelMatrix3D=u.a1(new Float64Array(16),this.labelPlaneMatrix,y);const Fe=this.width%2/2,ye=this.height%2/2,Ae=Math.cos(this.angle),$e=Math.sin(this.angle),Ke=d-Math.round(d)+Ae*Fe+$e*ye,it=m-Math.round(m)+Ae*ye+$e*Fe,yt=new Float64Array(y);if(u.$(yt,yt,[Ke>.5?Ke-1:Ke,it>.5?it-1:it,0]),this.alignedProjMatrix=yt,y=u.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),d=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const d=this.getCameraPoint();if(r.length===1)return[r[0],d];{let m=d.x,y=d.y,w=d.x,P=d.y;for(const j of r)m=Math.min(m,j.x),y=Math.min(y,j.y),w=Math.max(w,j.x),P=Math.max(P,j.y);return[new u.P(m,y),new u.P(w,y),new u.P(w,P),new u.P(m,P),new u.P(m,y)]}}}function Al(x,r){let d,m=!1,y=null,w=null;const P=()=>{y=null,m&&(x.apply(w,d),y=setTimeout(P,r),m=!1)};return(...j)=>(m=!0,w=this,d=j,y||P(),y)}class gu{constructor(r){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let m;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(m=y)}),(m&&m[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(m=>isNaN(m))){const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:m,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Al(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const d=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,y=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),P=Math.round(d.lng*w)/w,j=Math.round(d.lat*w)/w,R=this._map.getBearing(),z=this._map.getPitch();let U="";if(U+=r?`/${P}/${j}/${m}`:`${m}/${j}/${P}`,(R||z)&&(U+="/"+Math.round(10*R)/10),z&&(U+=`/${Math.round(z)}`),this._hashName){const q=this._hashName;let X=!1;const oe=window.location.hash.slice(1).split("&").map(le=>{const me=le.split("=")[0];return me===q?(X=!0,`${me}=${U}`):le}).filter(le=>le);return X||oe.push(`${q}=${U}`),`#${oe.join("&")}`}return`#${U}`}}const Nc={linearity:.3,easing:u.ba(0,0,.3,1)},Rf=u.e({deceleration:2500,maxSpeed:1400},Nc),If=u.e({deceleration:20,maxSpeed:1400},Nc),Eh=u.e({deceleration:1e3,maxSpeed:360},Nc),Lf=u.e({deceleration:1e3,maxSpeed:90},Nc);class Dh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,d=u.h.now();for(;r.length>0&&d-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)d.zoom+=w.zoomDelta||0,d.bearing+=w.bearingDelta||0,d.pitch+=w.pitchDelta||0,w.panDelta&&d.pan._add(w.panDelta),w.around&&(d.around=w.around),w.pinchAround&&(d.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){const w=vu(d.pan.mag(),m,u.e({},Rf,r||{}));y.offset=d.pan.mult(w.amount/d.pan.mag()),y.center=this._map.transform.center,io(y,w)}if(d.zoom){const w=vu(d.zoom,m,If);y.zoom=this._map.transform.zoom+w.amount,io(y,w)}if(d.bearing){const w=vu(d.bearing,m,Eh);y.bearing=this._map.transform.bearing+u.ad(w.amount,-179,179),io(y,w)}if(d.pitch){const w=vu(d.pitch,m,Lf);y.pitch=this._map.transform.pitch+w.amount,io(y,w)}if(y.zoom||y.bearing){const w=d.pinchAround===void 0?d.around:d.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),u.e(y,{noMoveStart:!0})}}function io(x,r){(!x.duration||x.duration<r.duration)&&(x.duration=r.duration,x.easing=r.easing)}function vu(x,r,d){const{maxSpeed:m,linearity:y,deceleration:w}=d,P=u.ad(x*y/(r/1e3),-m,m),j=Math.abs(P)/(w*y);return{easing:d.easing,duration:1e3*j,amount:P*(j/2)}}class ta extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,m,y={}){const w=A.mousePos(d.getCanvasContainer(),m),P=d.unproject(w);super(r,u.e({point:w,lngLat:P,originalEvent:m},y)),this._defaultPrevented=!1,this.target=d}}class yu extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,m){const y=r==="touchend"?m.changedTouches:m.touches,w=A.touchPos(d.getCanvasContainer(),y),P=w.map(R=>d.unproject(R)),j=w.reduce((R,z,U,q)=>R.add(z.div(q.length)),new u.P(0,0));super(r,{points:w,point:j,lngLats:P,lngLat:d.unproject(j),originalEvent:m}),this._defaultPrevented=!1}}class pd extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class Ko{constructor(r,d){this._map=r,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new pd(r.type,this._map,r))}mousedown(r,d){return this._mousedownPos=d,this._firePreventable(new ta(r.type,this._map,r))}mouseup(r){this._map.fire(new ta(r.type,this._map,r))}click(r,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new ta(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ta(r.type,this._map,r))}mouseover(r){this._map.fire(new ta(r.type,this._map,r))}mouseout(r){this._map.fire(new ta(r.type,this._map,r))}touchstart(r){return this._firePreventable(new yu(r.type,this._map,r))}touchmove(r){this._map.fire(new yu(r.type,this._map,r))}touchend(r){this._map.fire(new yu(r.type,this._map,r))}touchcancel(r){this._map.fire(new yu(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ta(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ta("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ta(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eo{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Ml{constructor(r,d){this._map=r,this._tr=new Eo(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,d){this.isEnabled()&&r.shiftKey&&r.button===0&&(A.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(r,d){if(!this._active)return;const m=d;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=m,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const w=Math.min(y.x,m.x),P=Math.max(y.x,m.x),j=Math.min(y.y,m.y),R=Math.max(y.y,m.y);A.setTransform(this._box,`translate(${w}px,${j}px)`),this._box.style.width=P-w+"px",this._box.style.height=R-j+"px"}mouseupWindow(r,d){if(!this._active||r.button!==0)return;const m=this._startPos,y=d;if(this.reset(),A.suppressClick(),m.x!==y.x||m.y!==y.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:w=>w.fitScreenCoordinates(m,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,d){return this._map.fire(new u.k(r,{originalEvent:d}))}}function xa(x,r){if(x.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${r.length}`);const d={};for(let m=0;m<x.length;m++)d[x[m].identifier]=r[m];return d}class Do{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,d,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=function(y){const w=new u.P(0,0);for(const P of y)w._add(P);return w.div(y.length)}(d),this.touches=xa(m,d)))}touchmove(r,d,m){if(this.aborted||!this.centroid)return;const y=xa(m,d);for(const w in this.touches){const P=y[w];(!P||P.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(r,d,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class gd{constructor(r){this.singleTap=new Do(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,d,m){this.singleTap.touchstart(r,d,m)}touchmove(r,d,m){this.singleTap.touchmove(r,d,m)}touchend(r,d,m){const y=this.singleTap.touchend(r,d,m);if(y){const w=r.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(y)<30;if(w&&P||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class To{constructor(r){this._tr=new Eo(r),this._zoomIn=new gd({numTouches:1,numTaps:2}),this._zoomOut=new gd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,d,m){this._zoomIn.touchstart(r,d,m),this._zoomOut.touchstart(r,d,m)}touchmove(r,d,m){this._zoomIn.touchmove(r,d,m),this._zoomOut.touchmove(r,d,m)}touchend(r,d,m){const y=this._zoomIn.touchend(r,d,m),w=this._zoomOut.touchend(r,d,m),P=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(y)},{originalEvent:r})}):w?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(w)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Po{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const d=this._moveFunction(...r);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(r,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,d){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=d.length?d[0]:d;return!this._moved&&y.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(m,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&A.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vf={0:1,2:2};class Th{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const d=A.mouseButton(r);this._eventButton=d}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(d,m){const y=Vf[m];return d.buttons===void 0||(d.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return A.mouseButton(r)===this._eventButton}}class Ph{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const ns=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=function(r){r.preventDefault()}},Rl=({enable:x,clickTolerance:r,bearingDegreesPerPixelMoved:d=.8})=>{const m=new Th({checkCorrectEvent:y=>A.mouseButton(y)===0&&y.ctrlKey||A.mouseButton(y)===2});return new Po({clickTolerance:r,move:(y,w)=>({bearingDelta:(w.x-y.x)*d}),moveStateManager:m,enable:x,assignEvents:ns})},jo=({enable:x,clickTolerance:r,pitchDegreesPerPixelMoved:d=-.5})=>{const m=new Th({checkCorrectEvent:y=>A.mouseButton(y)===0&&y.ctrlKey||A.mouseButton(y)===2});return new Po({clickTolerance:r,move:(y,w)=>({pitchDelta:(w.y-y.y)*d}),moveStateManager:m,enable:x,assignEvents:ns})};class Gt{constructor(r,d){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,d,m){return this._calculateTransform(r,d,m)}touchmove(r,d,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,d,m)}touchend(r,d,m){this._calculateTransform(r,d,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,d,m){m.length>0&&(this._active=!0);const y=xa(m,d),w=new u.P(0,0),P=new u.P(0,0);let j=0;for(const z in y){const U=y[z],q=this._touches[z];q&&(w._add(U),P._add(U.sub(q)),j++,y[z]=U)}if(this._touches=y,j<this._minTouches||!P.mag())return;const R=P.div(j);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(j),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,d,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([d[0],d[1]]))}touchmove(r,d,m){if(!this._firstTwoTouches)return;r.preventDefault();const[y,w]=this._firstTwoTouches,P=Yo(m,d,y),j=Yo(m,d,w);if(!P||!j)return;const R=this._aroundCenter?null:P.add(j).div(2);return this._move([P,j],R,r)}touchend(r,d,m){if(!this._firstTwoTouches)return;const[y,w]=this._firstTwoTouches,P=Yo(m,d,y),j=Yo(m,d,w);P&&j||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Yo(x,r,d){for(let m=0;m<x.length;m++)if(x[m].identifier===d)return r[m]}function Sc(x,r){return Math.log(x/r)/Math.LN2}class jh extends vd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,d){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sc(this._distance,m),pinchAround:d}}}function Vt(x,r){return 180*x.angleWith(r)/Math.PI}class Il extends vd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,d){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vt(this._vector,m),pinchAround:d}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const d=25/(Math.PI*this._minDiameter)*360,m=Vt(r,this._startVector);return Math.abs(m)<d}}function kh(x){return Math.abs(x.y)>Math.abs(x.x)}class xu extends vd{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,d,m){super.touchstart(r,d,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,kh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,d,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),w=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(r,d,m){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,w=d.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=r.y>0==d.y>0;return kh(r)&&kh(d)&&P}}const Ah={panStep:100,bearingStep:15,pitchStep:10};class Of{constructor(r){this._tr=new Eo(r);const d=Ah;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let d=0,m=0,y=0,w=0,P=0;switch(r.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),w=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),w=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),P=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,y=0),{cameraAnimation:j=>{const R=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:zf,zoom:d?Math.round(R.zoom)+d*(r.shiftKey?2:1):R.zoom,bearing:R.bearing+m*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-w*this._panStep,-P*this._panStep],center:R.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zf(x){return x*(2-x)}const yd=4.000244140625;class Mh{constructor(r,d){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new Eo(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let d=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=u.h.now(),y=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,d!==0&&d%yd==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),r.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=r,this._delta-=d,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=A.mousePos(this._el,r),m=this._tr;this._around=u.L.convert(this._aroundCenter?m.center:m.unproject(d)),this._aroundPoint=m.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>yd?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&R!==0&&(R=1/R);const z=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(z*R))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,m=this._startZoom,y=this._easing;let w,P=!1;if(this._type==="wheel"&&m&&y){const j=Math.min((u.h.now()-this._lastWheelEventTime)/200,1),R=y(j);w=u.B.number(m,d,R),j<1?this._frameId||(this._frameId=!0):P=!0}else w=d,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:w-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let d=u.bb;if(this._prevEase){const m=this._prevEase,y=(u.h.now()-m.start)/m.duration,w=m.easing(y+.01)-m.easing(y),P=.27/Math.sqrt(w*w+1e-4)*.01,j=Math.sqrt(.0729-P*P);d=u.ba(P,j,.25,1)}return this._prevEase={start:u.h.now(),duration:r,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xo{constructor(r,d){this._clickZoom=r,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jo{constructor(r){this._tr=new Eo(r),this.reset()}reset(){this._active=!1}dblclick(r,d){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bd{constructor(){this._tap=new gd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,d,m){if(!this._swipePoint)if(this._tapTime){const y=d[0],w=r.timeStamp-this._tapTime<500,P=this._tapPoint.dist(y)<30;w&&P?m.length>0&&(this._swipePoint=y,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,d,m)}touchmove(r,d,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const y=d[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(r,d,m)}touchend(r,d,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const y=this._tap.touchend(r,d,m);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(r,d,m){this._el=r,this._mousePan=d,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ts{constructor(r,d,m){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=d,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qo{constructor(r,d,m,y){this._el=r,this._touchZoom=d,this._touchRotate=m,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ec=x=>x.zoom||x.drag||x.pitch||x.rotate;class xd extends u.k{}function Dc(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class _u{constructor(r,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=y.type==="renderFrame"?void 0:y,j={needsRenderFrame:!1},R={},z={},U=y.touches,q=U?this._getMapTouches(U):void 0,X=q?A.touchPos(this._el,q):A.mousePos(this._el,y);for(const{handlerName:me,handler:ae,allowed:je}of this._handlers){if(!ae.isEnabled())continue;let Fe;this._blockedByActive(z,je,me)?ae.reset():ae[w||y.type]&&(Fe=ae[w||y.type](y,X,q),this.mergeHandlerResult(j,R,Fe,me,P),Fe&&Fe.needsRenderFrame&&this._triggerRenderFrame()),(Fe||ae.isActive())&&(z[me]=ae)}const oe={};for(const me in this._previousActiveHandlers)z[me]||(oe[me]=P);this._previousActiveHandlers=z,(Object.keys(oe).length||Dc(j))&&(this._changes.push([j,R,oe]),this._triggerRenderFrame()),(Object.keys(z).length||Dc(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=j;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Dh(r),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,w,P]of this._listeners)A.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[r,d,m]of this._listeners)A.removeEventListener(r,d,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const d=this._map,m=d.getCanvasContainer();this._add("mapEvent",new Ko(d,r));const y=d.boxZoom=new Ml(d,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const w=new To(d),P=new Jo(d);d.doubleClickZoom=new Xo(P,w),this._add("tapZoom",w),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&d.doubleClickZoom.enable();const j=new bd;this._add("tapDragZoom",j);const R=d.touchPitch=new xu(d);this._add("touchPitch",R),r.interactive&&r.touchPitch&&d.touchPitch.enable(r.touchPitch);const z=Rl(r),U=jo(r);d.dragRotate=new Ts(r,z,U),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),r.interactive&&r.dragRotate&&d.dragRotate.enable();const q=(({enable:je,clickTolerance:Fe})=>{const ye=new Th({checkCorrectEvent:Ae=>A.mouseButton(Ae)===0&&!Ae.ctrlKey});return new Po({clickTolerance:Fe,move:(Ae,$e)=>({around:$e,panDelta:$e.sub(Ae)}),activateOnStart:!0,moveStateManager:ye,enable:je,assignEvents:ns})})(r),X=new Gt(r,d);d.dragPan=new Rh(m,q,X),this._add("mousePan",q),this._add("touchPan",X,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&d.dragPan.enable(r.dragPan);const oe=new Il,le=new jh;d.touchZoomRotate=new Qo(m,le,oe,j),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&d.touchZoomRotate.enable(r.touchZoomRotate);const me=d.scrollZoom=new Mh(d,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),r.interactive&&r.scrollZoom&&d.scrollZoom.enable(r.scrollZoom);const ae=d.keyboard=new Of(d);this._add("keyboard",ae),r.interactive&&r.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new bu(d))}_add(r,d,m){this._handlers.push({handlerName:r,handler:d,allowed:m}),this._handlersById[r]=d}stop(r){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ec(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,d,m){for(const y in r)if(y!==m&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const d=[];for(const m of r)this._el.contains(m.target)&&d.push(m);return d}mergeHandlerResult(r,d,m,y,w){if(!m)return;u.e(r,m);const P={handlerName:y,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(d.zoom=P),m.panDelta!==void 0&&(d.drag=P),m.pitchDelta!==void 0&&(d.pitch=P),m.bearingDelta!==void 0&&(d.rotate=P)}_applyChanges(){const r={},d={},m={};for(const[y,w,P]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),u.e(d,w),u.e(m,P);this._updateMapTransform(r,d,m),this._changes=[]}_updateMapTransform(r,d,m){const y=this._map,w=y._getTransformForUpdate(),P=y.terrain;if(!(Dc(r)||P&&this._terrainMovement))return this._fireEvents(d,m,!0);let{panDelta:j,zoomDelta:R,bearingDelta:z,pitchDelta:U,around:q,pinchAround:X}=r;X!==void 0&&(q=X),y._stop(!0),q=q||y.transform.centerPoint;const oe=w.pointLocation(j?q.sub(j):q);z&&(w.bearing+=z),U&&(w.pitch+=U),R&&(w.zoom+=R),P?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(j)):w.setLocationAtPoint(oe,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(oe,q),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,w.recalculateZoom(y.terrain)})):w.setLocationAtPoint(oe,q),y._applyUpdatedTransform(w),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(d,m,!0)}_fireEvents(r,d,m){const y=Ec(this._eventsInProgress),w=Ec(r),P={};for(const U in r){const{originalEvent:q}=r[U];this._eventsInProgress[U]||(P[`${U}start`]=q),this._eventsInProgress[U]=r[U]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in P)this._fireEvent(U,P[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in r){const{originalEvent:q}=r[U];this._fireEvent(U,q)}const j={};let R;for(const U in this._eventsInProgress){const{handlerName:q,originalEvent:X}=this._eventsInProgress[U];this._handlersById[q].isActive()||(delete this._eventsInProgress[U],R=d[q]||X,j[`${U}end`]=R)}for(const U in j)this._fireEvent(U,j[U]);const z=Ec(this._eventsInProgress);if(m&&(y||w)&&!z){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!U||!U.essential&&u.h.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:R})),q(this._map.getBearing())&&this._map.resetNorth()):(q(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(r,d){this._map.fire(new u.k(r,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new xd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Bf extends u.E{constructor(r,d){super(),this._renderFrameCallback=()=>{const m=Math.min((u.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,d){return this.jumpTo({center:r},d)}panBy(r,d,m){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},d),m)}panTo(r,d,m){return this.easeTo(u.e({center:r},d),m)}getZoom(){return this.transform.zoom}setZoom(r,d){return this.jumpTo({zoom:r},d),this}zoomTo(r,d,m){return this.easeTo(u.e({zoom:r},d),m)}zoomIn(r,d){return this.zoomTo(this.getZoom()+1,r,d),this}zoomOut(r,d){return this.zoomTo(this.getZoom()-1,r,d),this}getBearing(){return this.transform.bearing}setBearing(r,d){return this.jumpTo({bearing:r},d),this}getPadding(){return this.transform.padding}setPadding(r,d){return this.jumpTo({padding:r},d),this}rotateTo(r,d,m){return this.easeTo(u.e({bearing:r},d),m)}resetNorth(r,d){return this.rotateTo(0,u.e({duration:1e3},r),d),this}resetNorthPitch(r,d){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),d),this}snapToNorth(r,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,d):this}getPitch(){return this.transform.pitch}setPitch(r,d){return this.jumpTo({pitch:r},d),this}cameraForBounds(r,d){r=wt.convert(r);const m=d&&d.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,d)}_cameraForBoxAndBearing(r,d,m,y){const w={top:0,bottom:0,right:0,left:0};if(typeof(y=u.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const $e=y.padding;y.padding={top:$e,bottom:$e,right:$e,left:$e}}y.padding=u.e(w,y.padding);const P=this.transform,j=P.padding,R=P.project(u.L.convert(r)),z=P.project(u.L.convert(d)),U=R.rotate(-m*Math.PI/180),q=z.rotate(-m*Math.PI/180),X=new u.P(Math.max(U.x,q.x),Math.max(U.y,q.y)),oe=new u.P(Math.min(U.x,q.x),Math.min(U.y,q.y)),le=X.sub(oe),me=(P.width-(j.left+j.right+y.padding.left+y.padding.right))/le.x,ae=(P.height-(j.top+j.bottom+y.padding.top+y.padding.bottom))/le.y;if(ae<0||me<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const je=Math.min(P.scaleZoom(P.scale*Math.min(me,ae)),y.maxZoom),Fe=u.P.convert(y.offset),ye=new u.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(m*Math.PI/180),Ae=Fe.add(ye).mult(P.scale/P.zoomScale(je));return{center:P.unproject(R.add(z).div(2).sub(Ae)),zoom:je,bearing:m}}fitBounds(r,d,m){return this._fitInternal(this.cameraForBounds(r,d),d,m)}fitScreenCoordinates(r,d,m,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(d)),m,y),y,w)}_fitInternal(r,d,m){return r?(delete(d=u.e(r,d)).padding,d.linear?this.easeTo(d,m):this.flyTo(d,m)):this}jumpTo(r,d){this.stop();const m=this._getTransformForUpdate();let y=!1,w=!1,P=!1;return"zoom"in r&&m.zoom!==+r.zoom&&(y=!0,m.zoom=+r.zoom),r.center!==void 0&&(m.center=u.L.convert(r.center)),"bearing"in r&&m.bearing!==+r.bearing&&(w=!0,m.bearing=+r.bearing),"pitch"in r&&m.pitch!==+r.pitch&&(P=!0,m.pitch=+r.pitch),r.padding==null||m.isPaddingEqual(r.padding)||(m.padding=r.padding),this._applyUpdatedTransform(m),this.fire(new u.k("movestart",d)).fire(new u.k("move",d)),y&&this.fire(new u.k("zoomstart",d)).fire(new u.k("zoom",d)).fire(new u.k("zoomend",d)),w&&this.fire(new u.k("rotatestart",d)).fire(new u.k("rotate",d)).fire(new u.k("rotateend",d)),P&&this.fire(new u.k("pitchstart",d)).fire(new u.k("pitch",d)).fire(new u.k("pitchend",d)),this.fire(new u.k("moveend",d))}calculateCameraOptionsFromTo(r,d,m,y=0){const w=u.U.fromLngLat(r,d),P=u.U.fromLngLat(m,y),j=P.x-w.x,R=P.y-w.y,z=P.z-w.z,U=Math.hypot(j,R,z);if(U===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(j,R),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),oe=180*Math.atan2(j,-R)/Math.PI;let le=180*Math.acos(q/U)/Math.PI;return le=z<0?90-le:90+le,{center:P.toLngLat(),zoom:X,pitch:le,bearing:oe}}easeTo(r,d){this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.bb},r)).animate===!1||!r.essential&&u.h.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),y=this.getZoom(),w=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?+r.zoom:y,z="bearing"in r?this._normalizeBearing(r.bearing,w):w,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=u.P.convert(r.offset);let oe=m.centerPoint.add(X);const le=m.pointLocation(oe),me=u.L.convert(r.center||le);this._normalizeCenter(me);const ae=m.project(le),je=m.project(me).sub(ae),Fe=m.zoomScale(R-y);let ye,Ae;r.around&&(ye=u.L.convert(r.around),Ae=m.locationPoint(ye));const $e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||R!==y,this._rotating=this._rotating||w!==z,this._pitching=this._pitching||U!==P,this._padding=!m.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(d,r.noMoveStart,$e),this.terrain&&this._prepareElevation(me),this._ease(Ke=>{if(this._zooming&&(m.zoom=u.B.number(y,R,Ke)),this._rotating&&(m.bearing=u.B.number(w,z,Ke)),this._pitching&&(m.pitch=u.B.number(P,U,Ke)),this._padding&&(m.interpolatePadding(j,q,Ke),oe=m.centerPoint.add(X)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ke),ye)m.setLocationAtPoint(ye,Ae);else{const it=m.zoomScale(m.zoom-y),yt=R>y?Math.min(2,Fe):Math.max(.5,Fe),dt=Math.pow(yt,1-Ke),Nt=m.unproject(ae.add(je.mult(Ke*dt)).mult(it));m.setLocationAtPoint(m.renderWorldCopies?Nt.wrap():Nt,oe)}this._applyUpdatedTransform(m),this._fireMoveEvents(d)},Ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Ke)},r),this}_prepareEase(r,d,m={}){this._moving=!0,d||m.moving||this.fire(new u.k("movestart",r)),this._zooming&&!m.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&d!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(d-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=d}this.transform.elevation=u.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const d=r.clone(),{center:m,zoom:y,pitch:w,bearing:P,elevation:j}=this.transformCameraUpdate(d);m&&(d.center=m),y!==void 0&&(d.zoom=y),w!==void 0&&(d.pitch=w),P!==void 0&&(d.bearing=P),j!==void 0&&(d.elevation=j),this.transform.apply(d)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const m=this._zooming,y=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new u.k("zoomend",r)),y&&this.fire(new u.k("rotateend",r)),w&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,d){if(!r.essential&&u.h.prefersReducedMotion){const tn=u.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(tn,d)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.bb},r);const m=this._getTransformForUpdate(),y=this.getZoom(),w=this.getBearing(),P=this.getPitch(),j=this.getPadding(),R="zoom"in r?u.ad(+r.zoom,m.minZoom,m.maxZoom):y,z="bearing"in r?this._normalizeBearing(r.bearing,w):w,U="pitch"in r?+r.pitch:P,q="padding"in r?r.padding:m.padding,X=m.zoomScale(R-y),oe=u.P.convert(r.offset);let le=m.centerPoint.add(oe);const me=m.pointLocation(le),ae=u.L.convert(r.center||me);this._normalizeCenter(ae);const je=m.project(me),Fe=m.project(ae).sub(je);let ye=r.curve;const Ae=Math.max(m.width,m.height),$e=Ae/X,Ke=Fe.mag();if("minZoom"in r){const tn=u.ad(Math.min(r.minZoom,y,R),m.minZoom,m.maxZoom),kr=Ae/m.zoomScale(tn-y);ye=Math.sqrt(kr/Ke*2)}const it=ye*ye;function yt(tn){const kr=($e*$e-Ae*Ae+(tn?-1:1)*it*it*Ke*Ke)/(2*(tn?$e:Ae)*it*Ke);return Math.log(Math.sqrt(kr*kr+1)-kr)}function dt(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function Nt(tn){return(Math.exp(tn)+Math.exp(-tn))/2}const en=yt(!1);let Qn=function(tn){return Nt(en)/Nt(en+ye*tn)},Mt=function(tn){return Ae*((Nt(en)*(dt(kr=en+ye*tn)/Nt(kr))-dt(en))/it)/Ke;var kr},xn=(yt(!0)-en)/ye;if(Math.abs(Ke)<1e-6||!isFinite(xn)){if(Math.abs(Ae-$e)<1e-6)return this.easeTo(r,d);const tn=$e<Ae?-1:1;xn=Math.abs(Math.log($e/Ae))/ye,Mt=function(){return 0},Qn=function(kr){return Math.exp(tn*ye*kr)}}return r.duration="duration"in r?+r.duration:1e3*xn/("screenSpeed"in r?+r.screenSpeed/ye:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==z,this._pitching=U!==P,this._padding=!m.isPaddingEqual(q),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(ae),this._ease(tn=>{const kr=tn*xn,Xn=1/Qn(kr);m.zoom=tn===1?R:y+m.scaleZoom(Xn),this._rotating&&(m.bearing=u.B.number(w,z,tn)),this._pitching&&(m.pitch=u.B.number(P,U,tn)),this._padding&&(m.interpolatePadding(j,q,tn),le=m.centerPoint.add(oe)),this.terrain&&!r.freezeElevation&&this._updateElevation(tn);const On=tn===1?ae:m.unproject(je.add(Fe.mult(Mt(kr))).mult(Xn));m.setLocationAtPoint(m.renderWorldCopies?On.wrap():On,le),this._applyUpdatedTransform(m),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,d)}if(!r){const m=this.handlers;m&&m.stop(!1)}return this}_ease(r,d,m){m.animate===!1||m.duration===0?(r(1),d()):(this._easeStart=u.h.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,d){r=u.b5(r,-180,180);const m=Math.abs(r-d);return Math.abs(r-360-d)<m&&(r-=360),Math.abs(r+360-d)<m&&(r+=360),r}_normalizeCenter(r){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const m=r.lng-d.center.lng;r.lng+=m>180?-360:m<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Ws{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,d){const m=this._map._getUIString(`AttributionControl.${d}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const d=this._map.style.sourceCaches;for(const y in d){const w=d[y];if(w.used||w.usedForTerrain){const P=w.getSource();P.attribution&&r.indexOf(P.attribution)<0&&r.push(P.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,w)=>y.length-w.length),r=r.filter((y,w)=>{for(let P=w+1;P<r.length;P++)if(r[P].indexOf(y)>=0)return!1;return!0});const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ti{constructor(r={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const m=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const d=A.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _d{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const d=++this._id;return this._queue.push({callback:r,id:d,cancelled:!1}),d}remove(r){const d=this._currentlyRunning,m=d?this._queue.concat(d):this._queue;for(const y of m)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const m of d)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ih={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Tc=u.Q([{name:"a_pos3d",type:"Int16",components:3}]);class wd extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,d){this.sourceCache.update(r,d),this._renderableTilesKeys=[];const m={};for(const y of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))m[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),u.aS(y.posMatrix,0,u.N,0,u.N,0,1),this._tiles[y.key]=new Rr(y,this.tileSize));for(const y in this._tiles)m[y]||delete this._tiles[y]}freeRtt(r){for(const d in this._tiles){const m=this._tiles[d];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const d={};for(const m of this._renderableTilesKeys){const y=this._tiles[m].tileID;if(y.canonical.equals(r.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16),u.aS(w.posMatrix,0,u.N,0,u.N,0,1),d[m]=w}else if(y.canonical.isChildOf(r.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16);const P=y.canonical.z-r.canonical.z,j=y.canonical.x-(y.canonical.x>>P<<P),R=y.canonical.y-(y.canonical.y>>P<<P),z=u.N>>P;u.aS(w.posMatrix,0,z,0,z,0,1),u.$(w.posMatrix,w.posMatrix,[-j*z,-R*z,0]),d[m]=w}else if(r.canonical.isChildOf(y.canonical)){const w=r.clone();w.posMatrix=new Float64Array(16);const P=r.canonical.z-y.canonical.z,j=r.canonical.x-(r.canonical.x>>P<<P),R=r.canonical.y-(r.canonical.y>>P<<P),z=u.N>>P;u.aS(w.posMatrix,0,u.N,0,u.N,0,1),u.$(w.posMatrix,w.posMatrix,[j*z,R*z,0]),u.a0(w.posMatrix,w.posMatrix,[1/2**P,1/2**P,0]),d[m]=w}}return d}getSourceTile(r,d){const m=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>m.maxzoom&&(y=m.maxzoom),y<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!w||!w.dem)&&d)for(;y>=m.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(r.scaledTo(y--).key);return w}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=r)}}class Pc{constructor(r,d,m){this.painter=r,this.sourceCache=new wd(d),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,d,m,y=u.N){var w;if(!(d>=0&&d<y&&m>=0&&m<y))return 0;const P=this.getTerrainData(r),j=(w=P.tile)===null||w===void 0?void 0:w.dem;if(!j)return 0;const R=function(le,me,ae){var je=me[0],Fe=me[1];return le[0]=ae[0]*je+ae[4]*Fe+ae[12],le[1]=ae[1]*je+ae[5]*Fe+ae[13],le}([],[d/y*u.N,m/y*u.N],P.u_terrain_matrix),z=[R[0]*j.dim,R[1]*j.dim],U=Math.floor(z[0]),q=Math.floor(z[1]),X=z[0]-U,oe=z[1]-q;return j.get(U,q)*(1-X)*(1-oe)+j.get(U+1,q)*X*(1-oe)+j.get(U,q+1)*(1-X)*oe+j.get(U+1,q+1)*X*oe}getElevationForLngLatZoom(r,d){const{tileID:m,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(r,d);return this.getElevation(m,y%u.N,w%u.N,u.N)}getElevation(r,d,m,y=u.N){return this.getDEMElevation(r,d,m,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,w=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new pt(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new pt(y,new u.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const d=this.sourceCache.getSourceTile(r,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new pt(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const m=d&&d+d.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const y=this.sourceCache.sourceCache._source.maxzoom;let w=r.canonical.z-d.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?w=r.canonical.z-y:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=r.canonical.x-(r.canonical.x>>w<<w),j=r.canonical.y-(r.canonical.y>>w<<w),R=u.bc(new Float64Array(16),[1/(u.N<<w),1/(u.N<<w),0]);u.$(R,R,[P*u.N,j*u.N,0]),this._demMatrixCache[r.key]={matrix:R,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(r){const d=this.painter,m=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new pt(d.context,{width:m,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new pt(d.context,{width:m,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(m,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,m,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,P=0;w<this._coordsTextureSize;w++)for(let j=0;j<this._coordsTextureSize;j++,P+=4)d[P+0]=255&j,d[P+1]=255&w,d[P+2]=j>>8<<4|w>>8,d[P+3]=0;const m=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new pt(r,m,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){const d=new Uint8Array(4),m=this.painter.context,y=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),m.bindFramebuffer.set(null);const w=d[0]+(d[2]>>4<<8),P=d[1]+((15&d[2])<<8),j=this.coordsIndex[255-d[3]],R=j&&this.sourceCache.getTileByID(j);if(!R)return null;const z=this._coordsTextureSize,U=(1<<R.tileID.canonical.z)*z;return new u.U(this._allowMercatorOverflow(r,(R.tileID.canonical.x*z+w)/U),(R.tileID.canonical.y*z+P)/U,this.getElevation(R.tileID,w,P,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,d=new u.bd,m=new u.b0,y=this.meshSize,w=u.N/y,P=y*y;for(let q=0;q<=y;q++)for(let X=0;X<=y;X++)d.emplaceBack(X*w,q*w,0);for(let q=0;q<P;q+=y+1)for(let X=0;X<y;X++)m.emplaceBack(X+q,y+X+q+1,y+X+q+2),m.emplaceBack(X+q,y+X+q+2,X+q+1);const j=d.length,R=j+2*(y+1);for(const q of[0,1])for(let X=0;X<=y;X++)for(const oe of[0,1])d.emplaceBack(X*w,q*u.N,oe);for(let q=0;q<2*y;q+=2)m.emplaceBack(R+q,R+q+1,R+q+3),m.emplaceBack(R+q,R+q+3,R+q+2),m.emplaceBack(j+q,j+q+3,j+q+1),m.emplaceBack(j+q,j+q+2,j+q+3);const z=d.length,U=z+2*(y+1);for(const q of[0,1])for(let X=0;X<=y;X++)for(const oe of[0,1])d.emplaceBack(q*u.N,X*w,oe);for(let q=0;q<2*y;q+=2)m.emplaceBack(z+q,z+q+1,z+q+3),m.emplaceBack(z+q,z+q+3,z+q+2),m.emplaceBack(U+q,U+q+3,U+q+1),m.emplaceBack(U+q,U+q+2,U+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(m),vertexBuffer:r.createVertexBuffer(d,Tc.members),segments:u.S.simpleSegment(0,0,d.length,m.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,d){var m;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,d);return(m=this.getMinMaxElevation(y).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const d=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return d&&d.dem&&(m.minElevation=d.dem.min*this.exaggeration,m.maxElevation=d.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,d){const m=u.U.fromLngLat(r.wrap()),y=(1<<d)*u.N,w=m.x*y,P=m.y*y,j=Math.floor(w/u.N),R=Math.floor(P/u.N);return{tileID:new u.O(d,0,d,j,R),mercatorX:w,mercatorY:P}}_allowMercatorOverflow(r,d){const m=r.x<this.painter.width/2;let y=u.bf(d);const w=this.painter.transform.center.lng;return m&&Math.sign(y)>0&&Math.sign(w)<0||!m&&Math.sign(y)<0&&Math.sign(w)>0?(y=360*Math.sign(w)+y,u.G(y)):d}}class Ff{constructor(r,d,m){this._context=r,this._size=d,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new pt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(m.texture),{id:r,fbo:d,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>r.id!==d),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ys={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class jc{constructor(r,d){this.painter=r,this.terrain=d,this.pool=new Ff(r.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(m=>!r._layers[m].isHidden(d)),this._coordsDescendingInv={};for(const m in r.sourceCaches){this._coordsDescendingInv[m]={};const y=r.sourceCaches[m].getVisibleCoordinates();for(const w of y){const P=this.terrain.sourceCache.getTerrainCoords(w);for(const j in P)this._coordsDescendingInv[m][j]||(this._coordsDescendingInv[m][j]=[]),this._coordsDescendingInv[m][j].push(P[j])}}this._coordsDescendingInvStr={};for(const m of r._order){const y=r._layers[m],w=y.source;if(ys[y.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(const P in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][P]=this._coordsDescendingInv[w][P].map(j=>j.key).sort().join()}}for(const m of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const w=this._coordsDescendingInvStr[y][m.tileID.key];w&&w!==m.rttCoords[y]&&(m.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const d=r.type,m=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ys[d]&&(this._prevType&&ys[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(r.id),!y))return!0;if(ys[this._prevType]||ys[d]&&y){this._prevType=d;const w=this._stacks.length-1,P=this._stacks[w]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(li(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[w]){const z=this.pool.getObjectForId(j.rtt[w].id);if(z.stamp===j.rtt[w].stamp){this.pool.useObject(z);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),j.rtt[w]={id:R.id,stamp:R.stamp},m.context.bindFramebuffer.set(R.fbo.framebuffer),m.context.clear({color:u.aT.transparent,stencil:0}),m.currentStencilSource=void 0;for(let z=0;z<P.length;z++){const U=m.style._layers[P[z]],q=U.source?this._coordsDescendingInv[U.source][j.tileID.key]:[j.tileID];m.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),m._renderTileClippingMasks(U,q),m.renderLayer(m,m.style.sourceCaches[U.source],U,q),U.source&&(j.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][j.tileID.key])}}return li(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ys[d]}return!1}}const cn=k,gn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},el=x=>{x.touchstart=x.dragStart,x.touchmoveWindow=x.dragMove,x.touchend=x.dragEnd},kc={showCompass:!0,showZoom:!0,visualizePitch:!1};class wu{constructor(r,d,m=!1){this.mousedown=P=>{this.startMouse(u.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),A.mousePos(this.element,P)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,A.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=r.dragRotate._mouseRotate.getClickTolerance(),w=r.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Rl({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:j,bearingDegreesPerPixelMoved:R=.8})=>{const z=new Ph;return new Po({clickTolerance:j,move:(U,q)=>({bearingDelta:(q.x-U.x)*R}),moveStateManager:z,enable:P,assignEvents:el})})({clickTolerance:y,enable:!0}),this.map=r,m&&(this.mousePitch=jo({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:j,pitchDegreesPerPixelMoved:R=-.5})=>{const z=new Ph;return new Po({clickTolerance:j,move:(U,q)=>({pitchDelta:(q.y-U.y)*R}),moveStateManager:z,enable:P,assignEvents:el})})({clickTolerance:w,enable:!0})),A.addEventListener(d,"mousedown",this.mousedown),A.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(d,"touchcancel",this.reset)}startMouse(r,d){this.mouseRotate.dragStart(r,d),this.mousePitch&&this.mousePitch.dragStart(r,d),A.disableDrag()}startTouch(r,d){this.touchRotate.dragStart(r,d),this.touchPitch&&this.touchPitch.dragStart(r,d),A.disableDrag()}moveMouse(r,d){const m=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(r,d)||{};if(y&&m.setBearing(m.getBearing()+y),this.mousePitch){const{pitchDelta:w}=this.mousePitch.dragMove(r,d)||{};w&&m.setPitch(m.getPitch()+w)}}moveTouch(r,d){const m=this.map,{bearingDelta:y}=this.touchRotate.dragMove(r,d)||{};if(y&&m.setBearing(m.getBearing()+y),this.touchPitch){const{pitchDelta:w}=this.touchPitch.dragMove(r,d)||{};w&&m.setPitch(m.getPitch()+w)}}off(){const r=this.element;A.removeEventListener(r,"mousedown",this.mousedown),A.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let Ai;function Cu(x,r,d){if(x=new u.L(x.lng,x.lat),r){const m=new u.L(x.lng-360,x.lat),y=new u.L(x.lng+360,x.lat),w=d.locationPoint(x).distSqr(r);d.locationPoint(m).distSqr(r)<w?x=m:d.locationPoint(y).distSqr(r)<w&&(x=y)}for(;Math.abs(x.lng-d.center.lng)>180;){const m=d.locationPoint(x);if(m.x>=0&&m.y>=0&&m.x<=d.width&&m.y<=d.height)break;x.lng>d.center.lng?x.lng-=360:x.lng+=360}return x}const _a={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Uf(x,r,d){const m=x.classList;for(const y in _a)m.remove(`maplibregl-${d}-anchor-${y}`);m.add(`maplibregl-${d}-anchor-${r}`)}class Ll extends u.E{constructor(r){if(super(),this._onKeyPress=d=>{const m=d.code,y=d.charCode||d.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{const m=d.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!m)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${_a[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");const d=A.createNS("http://www.w3.org/2000/svg","svg"),m=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${m}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${m}`);const w=A.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const P=A.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const j=A.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const je of R){const Fe=A.createNS("http://www.w3.org/2000/svg","ellipse");Fe.setAttributeNS(null,"opacity","0.04"),Fe.setAttributeNS(null,"cx","10.5"),Fe.setAttributeNS(null,"cy","5.80029008"),Fe.setAttributeNS(null,"rx",je.rx),Fe.setAttributeNS(null,"ry",je.ry),j.appendChild(Fe)}const z=A.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const U=A.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(U);const q=A.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const X=A.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(X);const oe=A.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const le=A.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=A.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const ae=A.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),le.appendChild(me),le.appendChild(ae),P.appendChild(j),P.appendChild(z),P.appendChild(q),P.appendChild(oe),P.appendChild(le),d.appendChild(P),d.setAttributeNS(null,"height",m*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Uf(this._element,this._anchor,"marker"),r&&r.className)for(const d of r.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ci={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ir=0,Ac=!1;const Nu={maxWidth:100,unit:"metric"};function Cn(x,r,d){const m=d&&d.maxWidth||100,y=x._container.clientHeight/2,w=x.unproject([0,y]),P=x.unproject([m,y]),j=w.distanceTo(P);if(d&&d.unit==="imperial"){const R=3.2808*j;R>5280?wa(r,m,R/5280,x._getUIString("ScaleControl.Miles")):wa(r,m,R,x._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?wa(r,m,j/1852,x._getUIString("ScaleControl.NauticalMiles")):j>=1e3?wa(r,m,j/1e3,x._getUIString("ScaleControl.Kilometers")):wa(r,m,j,x._getUIString("ScaleControl.Meters"))}function wa(x,r,d,m){const y=function(w){const P=Math.pow(10,`${Math.floor(w)}`.length-1);let j=w/P;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(R){const z=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*z)/z}(j),P*j}(d);x.style.width=r*(y/d)+"px",x.innerHTML=`${y}&nbsp;${m}`}const Ci={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ca(x){if(x){if(typeof x=="number"){const r=Math.round(Math.abs(x)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,x),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-x),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(x,0),right:new u.P(-x,0)}}if(x instanceof u.P||Array.isArray(x)){const r=u.P.convert(x);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(x.center||[0,0]),top:u.P.convert(x.top||[0,0]),"top-left":u.P.convert(x["top-left"]||[0,0]),"top-right":u.P.convert(x["top-right"]||[0,0]),bottom:u.P.convert(x.bottom||[0,0]),"bottom-left":u.P.convert(x["bottom-left"]||[0,0]),"bottom-right":u.P.convert(x["bottom-right"]||[0,0]),left:u.P.convert(x.left||[0,0]),right:u.P.convert(x.right||[0,0])}}return Ca(new u.P(0,0))}const Vl={extend:(x,...r)=>u.e(x,...r),run(x){x()},logToElement(x,r=!1,d="log"){const m=window.document.getElementById(d);m&&(r&&(m.innerHTML=""),m.innerHTML+=`<br>${x}`)}},Cd=k;class un{static get version(){return Cd}static get workerCount(){return yr.workerCount}static set workerCount(r){yr.workerCount=r}static get maxParallelImageRequests(){return u.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){u.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return u.c.WORKER_URL}static set workerUrl(r){u.c.WORKER_URL=r}static addProtocol(r,d){u.c.REGISTERED_PROTOCOLS[r]=d}static removeProtocol(r){delete u.c.REGISTERED_PROTOCOLS[r]}}return un.Map=class extends Bf{constructor(x){if(u.bg.mark(u.bh.create),(x=u.e({},gn,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new md(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._cooperativeGestures=x.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new _d,this._controls=[],this._mapId=u.a2(),this._locale=u.e({},Ih,x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this._imageQueueHandle=Pe.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ce(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const d=Al(m=>{this._trackResize&&!this._removed&&this.resize(m)._update()},50);this._resizeObserver=new ResizeObserver(m=>{r?d(m):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _u(this,x),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=x.hash&&new gu(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,u.e({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new Ws({customAttribution:x.customAttribution})),x.maplibreLogo&&this.addControl(new ti,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(x,r){if(r===void 0&&(r=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=x.onAdd(this);this._controls.push(x);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(d,m.firstChild):m.appendChild(d),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(x);return r>-1&&this._controls.splice(r,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}calculateCameraOptionsFromTo(x,r,d,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(x,r,d,m)}resize(x){var r;const d=this._containerDimensions(),m=d[0],y=d[1],w=this._getClampedPixelRatio(m,y);if(this._resizeCanvas(m,y,w),this.painter.resize(m,y,w),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const R=this._getClampedPixelRatio(m,y);this._resizeCanvas(m,y,R),this.painter.resize(m,y,R)}this.transform.resize(m,y),(r=this._requestedCameraState)===null||r===void 0||r.resize(m,y);const P=!this._moving;return P&&(this.stop(),this.fire(new u.k("movestart",x)).fire(new u.k("move",x))),this.fire(new u.k("resize",x)),P&&this.fire(new u.k("moveend",x)),this}_getClampedPixelRatio(x,r){const{0:d,1:m}=this._maxCanvasSize,y=this.getPixelRatio(),w=x*y,P=r*y;return Math.min(w>d?d/w:1,P>m?m/P:1)*y}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(wt.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(x){return this._cooperativeGestures=x,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(x){return this.transform.locationPoint(u.L.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.pointLocation(u.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,r,d){if(x==="mouseenter"||x==="mouseover"){let m=!1;return{layer:r,listener:d,delegates:{mousemove:w=>{const P=this.getLayer(r)?this.queryRenderedFeatures(w.point,{layers:[r]}):[];P.length?m||(m=!0,d.call(this,new ta(x,this,w.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(x==="mouseleave"||x==="mouseout"){let m=!1;return{layer:r,listener:d,delegates:{mousemove:P=>{(this.getLayer(r)?this.queryRenderedFeatures(P.point,{layers:[r]}):[]).length?m=!0:m&&(m=!1,d.call(this,new ta(x,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,d.call(this,new ta(x,this,P.originalEvent)))}}}}{const m=y=>{const w=this.getLayer(r)?this.queryRenderedFeatures(y.point,{layers:[r]}):[];w.length&&(y.features=w,d.call(this,y),delete y.features)};return{layer:r,listener:d,delegates:{[x]:m}}}}on(x,r,d){if(d===void 0)return super.on(x,r);const m=this._createDelegatedListener(x,r,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(m);for(const y in m.delegates)this.on(y,m.delegates[y]);return this}once(x,r,d){if(d===void 0)return super.once(x,r);const m=this._createDelegatedListener(x,r,d);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(x,r,d){return d===void 0?super.off(x,r):(this._delegatedListeners&&this._delegatedListeners[x]&&(m=>{const y=this._delegatedListeners[x];for(let w=0;w<y.length;w++){const P=y[w];if(P.layer===r&&P.listener===d){for(const j in P.delegates)this.off(j,P.delegates[j]);return y.splice(w,1),this}}})(),this)}queryRenderedFeatures(x,r){if(!this.style)return[];let d;const m=x instanceof u.P||Array.isArray(x),y=m?x:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:x)||{},y instanceof u.P||typeof y[0]=="number")d=[u.P.convert(y)];else{const w=u.P.convert(y[0]),P=u.P.convert(y[1]);d=[w,new u.P(P.x,w.y),P,new u.P(w.x,P.y),w]}return this.style.queryRenderedFeatures(d,r,this.transform)}querySourceFeatures(x,r){return this.style.querySourceFeatures(x,r)}setStyle(x,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(x,r))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const r=this._locale[x];if(r==null)throw new Error(`Missing UI string '${x}'`);return r}_updateStyle(x,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(x,r));const d=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new Oi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,r,d):this.style.loadJSON(x,r,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Oi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,r){if(typeof x=="string"){const d=this._requestManager.transformRequest(x,Se.Style);u.f(d,(m,y)=>{m?this.fire(new u.j(m)):y&&this._updateDiff(y,r)})}else typeof x=="object"&&this._updateDiff(x,r)}_updateDiff(x,r){try{this.style.setState(x,r)&&this._update(!0)}catch(d){u.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(x,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(x,r){return this._lazyInitEmptyStyle(),this.style.addSource(x,r),this._update(!0)}isSourceLoaded(x){const r=this.style&&this.style.sourceCaches[x];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const r=this.style.sourceCaches[x.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);for(const d in this.style._layers){const m=this.style._layers[d];m.type==="hillshade"&&m.source===x.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Pc(this.painter,r,x),this.painter.renderToTexture=new jc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==x.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:x})),this}getTerrain(){var x,r;return(r=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const r in x){const d=x[r]._tiles;for(const m in d){const y=d[m];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(x,r,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,r,d)}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,r,d={}){const{pixelRatio:m=1,sdf:y=!1,stretchX:w,stretchY:P,content:j}=d;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:U}=r,q=r;return this.style.addImage(x,{data:new u.R({width:R,height:z},new Uint8Array(U)),pixelRatio:m,stretchX:w,stretchY:P,content:j,sdf:y,version:0,userImage:q}),q.onAdd&&q.onAdd(this,x),this}}{const{width:R,height:z,data:U}=u.h.getImageData(r);this.style.addImage(x,{data:new u.R({width:R,height:z},U),pixelRatio:m,stretchX:w,stretchY:P,content:j,sdf:y,version:0})}}updateImage(x,r){const d=this.style.getImage(x);if(!d)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||u.a(r)?u.h.getImageData(r):r,{width:y,height:w,data:P}=m;if(y===void 0||w===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||w!==d.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(r instanceof HTMLImageElement||u.a(r));return d.data.replace(P,j),this.style.updateImage(x,d),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,r){Pe.getImage(this._requestManager.transformRequest(x,Se.Image),r)}listImages(){return this.style.listImages()}addLayer(x,r){return this._lazyInitEmptyStyle(),this.style.addLayer(x,r),this._update(!0)}moveLayer(x,r){return this.style.moveLayer(x,r),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,r,d){return this.style.setLayerZoomRange(x,r,d),this._update(!0)}setFilter(x,r,d={}){return this.style.setFilter(x,r,d),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,r,d,m={}){return this.style.setPaintProperty(x,r,d,m),this._update(!0)}getPaintProperty(x,r){return this.style.getPaintProperty(x,r)}setLayoutProperty(x,r,d,m={}){return this.style.setLayoutProperty(x,r,d,m),this._update(!0)}getLayoutProperty(x,r){return this.style.getLayoutProperty(x,r)}setGlyphs(x,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,r,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,r,d,m=>{m||this._update(!0)}),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,r,d=>{d||this._update(!0)}),this}setLight(x,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,r){return this.style.setFeatureState(x,r),this._update()}removeFeatureState(x,r){return this.style.removeFeatureState(x,r),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,r=0;return this._container&&(x=this._container.clientWidth||400,r=this._container.clientHeight||300),[x,r]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const r=this._canvasContainer=A.create("div","maplibregl-canvas-container",x);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),m=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],m);const y=this._controlContainer=A.create("div","maplibregl-control-container",x),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{w[P]=A.create("div",`maplibregl-ctrl-${P} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=A.create("div","maplibregl-cooperative-gesture-screen",this._container);let x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(x=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${x}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){A.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(x,r,d){this._canvas.width=Math.floor(d*x),this._canvas.height=Math.floor(d*r),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const x={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{r={requestedAttributes:x},m&&(r.statusMessage=m.statusMessage,r.type=m.type)},{once:!0});const d=this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x);if(!d){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new Zo(d,this.transform),O.testSupport(d)}_onCooperativeGesture(x,r,d){return!r&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,w=u.h.now();this.style.zoomHistory.update(y,w);const P=new u.a8(y,{now:w,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=P.crossFadingFactor();j===1&&j===this._crossFadingFactor||(d=!0,this._crossFadingFactor=j),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bg.mark(u.bh.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const m=this._sourcesDirty||this._styleDirty||this._placementDirty;return m||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,u.bg.mark(u.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Pe.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.bg.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.h.frame(x=>{u.bg.frame(x),this._frame=null,this._render(x)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return cn}getCameraTargetElevation(){return this.transform.elevation}},un.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const r=this._map.getZoom(),d=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,d)=>{const m=this._map._getUIString(`NavigationControl.${d}`);r.title=m,r.setAttribute("aria-label",m)},this.options=u.e({},kc,x),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,r){const d=A.create("button",x,this._container);return d.type="button",d.addEventListener("click",r),d}},un.GeolocateControl=class extends u.E{constructor(x){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const d=new u.L(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,y=this._map.getBearing(),w=u.e({bearing:y},this.options.fitBoundsOptions),P=wt.fromLngLat(d,m);this._map.fitBounds(P,w,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const d=new u.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ac)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ll({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ll({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},ci,x)}onAdd(x){return this._map=x,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,d=!1){Ai===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(m=>{Ai=m.state!=="denied",r(Ai)}).catch(()=>{Ai=!!window.navigator.geolocation,r(Ai)}):(Ai=!!window.navigator.geolocation,r(Ai)):r(Ai)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ir=0,Ac=!1}_isOutOfMapMaxBounds(x){const r=this._map.getMaxBounds(),d=x.coords;return r&&(d.longitude<r.getWest()||d.longitude>r.getEast()||d.latitude<r.getSouth()||d.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const x=this._map.getBounds(),r=x.getSouthEast(),d=x.getNorthEast(),m=r.distanceTo(d),y=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ir--,Ac=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ir++,Ir>1?(x={maximumAge:6e5,timeout:0},Ac=!0):(x=this.options.positionOptions,Ac=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},un.AttributionControl=Ws,un.LogoControl=ti,un.ScaleControl=class{constructor(x){this._onMove=()=>{Cn(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Cn(this._map,this._container,this.options)},this.options=u.e({},Nu,x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},un.FullscreenControl=class extends u.E{constructor(x={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},un.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=x}onAdd(x){return this._map=x,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},un.Popup=class extends u.E{constructor(x){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const d=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let m=this.options.anchor;const y=Ca(this.options.offset);if(!m){const P=this._container.offsetWidth,j=this._container.offsetHeight;let R;R=d.y+y.bottom.y<j?["top"]:d.y>this._map.transform.height-j?["bottom"]:[],d.x<P/2?R.push("left"):d.x>this._map.transform.width-P/2&&R.push("right"),m=R.length===0?"bottom":R.join("-")}const w=d.add(y[m]).round();A.setTransform(this._container,`${_a[m]} translate(${w.x}px,${w.y}px)`),Uf(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Ci),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=u.L.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const r=document.createDocumentFragment(),d=document.createElement("body");let m;for(d.innerHTML=x;m=d.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){this._container&&this._container.classList.add(x)}removeClassName(x){this._container&&this._container.classList.remove(x)}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(hr);x&&x.focus()}},un.Marker=Ll,un.Style=Oi,un.LngLat=u.L,un.LngLatBounds=wt,un.Point=u.P,un.MercatorCoordinate=u.U,un.Evented=u.E,un.AJAXError=u.bi,un.config=u.c,un.CanvasSource=fn,un.GeoJSONSource=Ft,un.ImageSource=mn,un.RasterDEMTileSource=yn,un.RasterTileSource=nn,un.VectorTileSource=Pt,un.VideoSource=vr,un.setRTLTextPlugin=u.bj,un.getRTLTextPluginStatus=u.bk,un.prewarm=function(){ms().acquire(Rn)},un.clearPrewarmedResources=function(){const x=qr;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(Rn),qr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Vl.extend(un,{isSafari:u.ac,getPerformanceMetrics:u.bg.getPerformanceMetrics}),un});var b=g;return b})})(lk);var kz=lk.exports;const Ja=cj(kz),Az=()=>{var An;const[o,t]=de.useState(!1),[a,c]=de.useState(!1),[g,S]=de.useState(null),[b,u]=de.useState(null),[k,A]=de.useState(null),[O,B]=de.useState(null),[W,ie]=de.useState(null),[pe,Ve]=de.useState(0),[Pe,Se]=de.useState({email:"",password:""}),[Ce,_e]=de.useState(null),[Ue,Oe]=de.useState(!1),Je=de.useRef(null),tt=de.useRef(null),ut=de.useRef(null),Tt=de.useRef(null),pt=de.useRef(null),Yt=de.useRef(null);de.useEffect(()=>{const{data:{subscription:wt}}=hi.auth.onAuthStateChange(async(ze,Pt)=>{ze==="SIGNED_IN"&&Pt?await hn(Pt.access_token):ze==="SIGNED_OUT"&&(t(!1),S(null),at(),ft())});return()=>wt.unsubscribe()},[]),de.useEffect(()=>{o&&navigator.geolocation&&(console.log("🔍 Checking location permission on component mount..."),"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(wt=>{console.log("📍 Initial permission state:",wt.state),wt.state==="granted"?console.log("✅ Location permission already granted"):wt.state==="prompt"?console.log("❓ Location permission needs to be requested"):wt.state==="denied"&&(console.log("❌ Location permission denied"),A("Location permission is denied. Please enable it in your browser settings."))}))},[o]),de.useEffect(()=>{(async()=>{if(!navigator.geolocation){A("Geolocation is not supported by this browser");return}try{"permissions"in navigator&&(await navigator.permissions.query({name:"geolocation"})).state==="denied"&&A("Location permission denied. Please enable location access in your browser settings.")}catch{console.log("Permission API not supported, will check when user clicks Start Tracking")}})()},[]);const ft=()=>{Yt.current&&(Yt.current.remove(),Yt.current=null),Tt.current&&(Tt.current.remove(),Tt.current=null)},bt=(wt,ze)=>{if(!pt.current||Tt.current)return;Tt.current=new Ja.Map({container:pt.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[ze,wt],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),Tt.current.addControl(new Ja.NavigationControl,"top-right"),Tt.current.once("load",()=>{console.log("✅ Driver map loaded successfully"),Tt.current&&(Tt.current.dragRotate.disable(),Tt.current.touchZoomRotate.disableRotation(),console.log("🔄 Rotation features disabled"))}),Tt.current.on("error",yn=>{console.error("❌ Driver map error:",yn)});const Pt=document.createElement("div");Pt.className="driver-marker",Pt.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,Yt.current=new Ja.Marker({element:Pt,anchor:"center"}).setLngLat([ze,wt]).addTo(Tt.current);const nn=new Ja.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(g==null?void 0:g.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(g==null?void 0:g.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(g==null?void 0:g.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
        </div>
      `);Yt.current.setPopup(nn)},It=(wt,ze)=>{if(!Tt.current||!Yt.current)return;const Pt=[ze,wt];Yt.current.setLngLat(Pt),Tt.current.flyTo({center:Pt,duration:1e3});const nn=new Ja.Popup({offset:25,className:"driver-popup"}).setHTML(`
        <div class="driver-popup">
          <h3>🚌 Driver Location</h3>
          <p><strong>Bus:</strong> ${(g==null?void 0:g.bus_number)||"Unknown"}</p>
          <p><strong>Route:</strong> ${(g==null?void 0:g.route_name)||"Unknown"}</p>
          <p><strong>Driver:</strong> ${(g==null?void 0:g.driver_name)||"Unknown"}</p>
          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>
          <p><strong>Updated:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Coordinates:</strong> ${wt.toFixed(6)}, ${ze.toFixed(6)}</p>
        </div>
      `);Yt.current.setPopup(nn)},Lt=async wt=>{wt.preventDefault(),Oe(!0),_e(null);try{const{data:ze,error:Pt}=await hi.auth.signInWithPassword({email:Pe.email,password:Pe.password});if(Pt){console.error("❌ Login error:",Pt),_e(Pt.message);return}ze.user&&ze.session?(console.log("✅ Login successful:",ze.user.email),await hn(ze.session.access_token),Se({email:"",password:""})):_e("Login failed - no user data received")}catch(ze){console.error("❌ Login error:",ze),_e("An unexpected error occurred during login")}finally{Oe(!1)}},hn=async wt=>{var ze,Pt,nn,yn,Ft;try{console.log("🔌 Driver: Connecting to WebSocket..."),await jn.connect(),(ze=jn.socket)==null||ze.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server"),B(null)}),(Pt=jn.socket)==null||Pt.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server"),B("Disconnected from server")}),(nn=jn.socket)==null||nn.on("error",zt=>{console.error("❌ Driver: Socket error:",zt),B(zt.message||"Socket error occurred")}),(yn=jn.socket)==null||yn.on("driver:authenticated",zt=>{console.log("✅ Driver: Authentication successful:",zt),t(!0),S(zt.busInfo),B(null)}),(Ft=jn.socket)==null||Ft.on("driver:locationConfirmed",zt=>{console.log("📍 Driver: Location confirmed:",zt),ie(new Date().toLocaleTimeString()),Ve(mn=>mn+1)}),Je.current=jn.socket,jn.authenticateAsDriver(wt)}catch(zt){console.error("❌ Driver: Authentication error:",zt),B("Failed to authenticate with server")}},at=()=>{jn.disconnect(),Je.current=null},Zt=async()=>{if(!navigator.geolocation){A("Geolocation is not supported by this browser");return}const wt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ze=navigator.userAgent.includes("Firefox"),Pt=navigator.userAgent.includes("Chrome"),nn=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome");console.log(`🌐 Device detected: ${wt?"Mobile":"Desktop"} - ${ze?"Firefox":Pt?"Chrome":nn?"Safari":"Other"}`);const yn={enableHighAccuracy:!0,timeout:wt?3e4:6e4,maximumAge:0};console.log("📍 Starting location tracking with options:",yn);try{if("permissions"in navigator){const Ft=await navigator.permissions.query({name:"geolocation"});if(console.log(`🔐 Current permission state: ${Ft.state}`),Ft.state==="denied"){A(wt?`Location permission denied on mobile. Please:
1. Go to your phone Settings
2. Find this browser app
3. Enable Location permission
4. Refresh this page`:"Location permission denied. Please reset location permissions and try again.");return}}}catch{console.log("Permission API not supported, proceeding with geolocation request")}console.log("📍 Requesting location permission..."),A(wt?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(Ft=>{console.log("✅ Initial position obtained:",{latitude:Ft.coords.latitude,longitude:Ft.coords.longitude,accuracy:Ft.coords.accuracy,timestamp:new Date(Ft.timestamp).toLocaleString()}),u(Ft),A(null),bt(Ft.coords.latitude,Ft.coords.longitude),ln(Ft)},Ft=>{console.error("❌ Geolocation error:",Ft);let zt="Location error: ";switch(Ft.code){case Ft.PERMISSION_DENIED:wt?zt=`Mobile location permission denied. Please:

1. Go to your phone Settings
2. Find this browser app (Chrome/Firefox/Safari)
3. Tap "Permissions" or "Privacy"
4. Enable "Location" permission
5. Return to this page and refresh

Alternative: Try opening this page in a different browser app.`:ze?zt+='Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':zt+="Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case Ft.POSITION_UNAVAILABLE:zt=wt?`Location unavailable on mobile. Please:
1. Go outdoors or near a window
2. Wait 10-15 seconds
3. Make sure GPS is enabled in phone settings
4. Try again`:"Location information unavailable.";break;case Ft.TIMEOUT:zt=wt?`Location request timed out on mobile. Please:
1. Go outdoors for better GPS signal
2. Wait 30 seconds and try again
3. Check if GPS is enabled in phone settings`:"Location request timed out. Please try again.";break;default:zt+=Ft.message}A(zt)},yn),ut.current=navigator.geolocation.watchPosition(Ft=>{console.log("📍 Location update received:",{latitude:Ft.coords.latitude,longitude:Ft.coords.longitude,accuracy:Ft.coords.accuracy,timestamp:new Date(Ft.timestamp).toLocaleString()}),u(Ft),A(null),It(Ft.coords.latitude,Ft.coords.longitude),ln(Ft)},Ft=>{console.error("❌ Geolocation watch error:",Ft);let zt="Location tracking error: ";switch(Ft.code){case Ft.PERMISSION_DENIED:zt=wt?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case Ft.POSITION_UNAVAILABLE:zt=wt?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case Ft.TIMEOUT:zt=wt?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:zt+=Ft.message}A(zt)},yn),c(!0),console.log("📍 Location tracking started")},bn=()=>{ut.current&&(navigator.geolocation.clearWatch(ut.current),ut.current=null),tt.current&&(clearInterval(tt.current),tt.current=null),c(!1),console.log("📍 Location tracking stopped")},ln=wt=>{if(!Je.current||!g)return;const ze={driverId:g.driver_id,latitude:wt.coords.latitude,longitude:wt.coords.longitude,timestamp:new Date().toISOString(),speed:wt.coords.speed||void 0,heading:wt.coords.heading||void 0};Je.current.emit("driver:locationUpdate",ze)},Bn=async()=>{try{console.log("🔐 Driver: Starting sign out..."),a&&bn(),at();const{error:wt}=await hi.auth.signOut();wt?console.error("❌ Sign out error:",wt):(console.log("✅ Driver: Sign out successful"),t(!1),S(null),u(null),A(null),B(null),ie(null),Ve(0),ft())}catch(wt){console.error("❌ Sign out error:",wt)}};return o?_.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("div",{children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",g==null?void 0:g.driver_name," | Bus: ",g==null?void 0:g.bus_number," | Route: ",g==null?void 0:g.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),_.jsxDEV("button",{onClick:Bn,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${O?"bg-red-500":"bg-green-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-600",children:O?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${a?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-600",children:a?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:pe},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),W&&_.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",W]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:_.jsxDEV("div",{className:"space-y-3",children:a?_.jsxDEV("button",{onClick:bn,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):_.jsxDEV(_.Fragment,{children:[_.jsxDEV("button",{onClick:Zt,disabled:!!O,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(wt=>{console.log("✅ Manual location permission granted:",wt),A(null),Zt()},wt=>{console.error("❌ Manual location permission denied:",wt),A("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),k&&k.includes("Permission denied")&&_.jsxDEV("button",{onClick:()=>{A(null),Zt()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),_.jsxDEV("div",{ref:pt,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),k&&_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[_.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),_.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[_.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[_.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[_.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),_.jsxDEV("button",{onClick:()=>{const wt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(ze=>{const Pt=`✅ Location Test Successful!

Latitude: ${ze.coords.latitude}
Longitude: ${ze.coords.longitude}
Accuracy: ${ze.coords.accuracy}m
Device: ${wt?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(Pt),A(null)},ze=>{const Pt=`❌ Location Test Failed

Error Code: ${ze.code}
Error Message: ${ze.message}
Device: ${wt?"Mobile":"Desktop"}

Please check your location permissions.`;alert(Pt)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),b?_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),_.jsxDEV("span",{className:"font-mono",children:b.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),_.jsxDEV("span",{className:"font-mono",children:b.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),_.jsxDEV("span",{children:[(An=b.coords.accuracy)==null?void 0:An.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),b.coords.speed&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),_.jsxDEV("span",{children:[(b.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),b.coords.heading&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),_.jsxDEV("span",{children:[b.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-sm",children:new Date(b.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):_.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[_.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),_.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[_.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),_.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):_.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:_.jsxDEV("div",{className:"max-w-md w-full",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[_.jsxDEV("div",{className:"text-center mb-6",children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),Ce&&_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:_.jsxDEV("p",{className:"text-red-700 text-sm",children:Ce},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),_.jsxDEV("form",{onSubmit:Lt,className:"space-y-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),_.jsxDEV("input",{id:"email",type:"email",required:!0,value:Pe.email,onChange:wt=>Se(ze=>({...ze,email:wt.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),_.jsxDEV("div",{children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),_.jsxDEV("input",{id:"password",type:"password",required:!0,value:Pe.password,onChange:wt=>Se(ze=>({...ze,password:wt.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),_.jsxDEV("button",{type:"submit",disabled:Ue,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:Ue?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),_.jsxDEV("div",{className:"mt-4 text-center",children:_.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)};var uk={exports:{}},Wx={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=de,t=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),u=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),pe=Symbol.iterator,Ve="@@iterator";function Pe(te){if(te===null||typeof te!="object")return null;var ke=pe&&te[pe]||te[Ve];return typeof ke=="function"?ke:null}var Se=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ce(te){{for(var ke=arguments.length,Be=new Array(ke>1?ke-1:0),Ze=1;Ze<ke;Ze++)Be[Ze-1]=arguments[Ze];_e("error",te,Be)}}function _e(te,ke,Be){{var Ze=Se.ReactDebugCurrentFrame,ct=Ze.getStackAddendum();ct!==""&&(ke+="%s",Be=Be.concat([ct]));var mt=Be.map(function(Ut){return String(Ut)});mt.unshift("Warning: "+ke),Function.prototype.apply.call(console[te],console,mt)}}var Ue=!1,Oe=!1,Je=!1,tt=!1,ut=!1,Tt;Tt=Symbol.for("react.module.reference");function pt(te){return!!(typeof te=="string"||typeof te=="function"||te===c||te===S||ut||te===g||te===A||te===O||tt||te===ie||Ue||Oe||Je||typeof te=="object"&&te!==null&&(te.$$typeof===W||te.$$typeof===B||te.$$typeof===b||te.$$typeof===u||te.$$typeof===k||te.$$typeof===Tt||te.getModuleId!==void 0))}function Yt(te,ke,Be){var Ze=te.displayName;if(Ze)return Ze;var ct=ke.displayName||ke.name||"";return ct!==""?Be+"("+ct+")":Be}function ft(te){return te.displayName||"Context"}function bt(te){if(te==null)return null;if(typeof te.tag=="number"&&Ce("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof te=="function")return te.displayName||te.name||null;if(typeof te=="string")return te;switch(te){case c:return"Fragment";case a:return"Portal";case S:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if(typeof te=="object")switch(te.$$typeof){case u:var ke=te;return ft(ke)+".Consumer";case b:var Be=te;return ft(Be._context)+".Provider";case k:return Yt(te,te.render,"ForwardRef");case B:var Ze=te.displayName||null;return Ze!==null?Ze:bt(te.type)||"Memo";case W:{var ct=te,mt=ct._payload,Ut=ct._init;try{return bt(Ut(mt))}catch{return null}}}return null}var It=Object.assign,Lt=0,hn,at,Zt,bn,ln,Bn,An;function wt(){}wt.__reactDisabledLog=!0;function ze(){{if(Lt===0){hn=console.log,at=console.info,Zt=console.warn,bn=console.error,ln=console.group,Bn=console.groupCollapsed,An=console.groupEnd;var te={configurable:!0,enumerable:!0,value:wt,writable:!0};Object.defineProperties(console,{info:te,log:te,warn:te,error:te,group:te,groupCollapsed:te,groupEnd:te})}Lt++}}function Pt(){{if(Lt--,Lt===0){var te={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:It({},te,{value:hn}),info:It({},te,{value:at}),warn:It({},te,{value:Zt}),error:It({},te,{value:bn}),group:It({},te,{value:ln}),groupCollapsed:It({},te,{value:Bn}),groupEnd:It({},te,{value:An})})}Lt<0&&Ce("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var nn=Se.ReactCurrentDispatcher,yn;function Ft(te,ke,Be){{if(yn===void 0)try{throw Error()}catch(ct){var Ze=ct.stack.trim().match(/\n( *(at )?)/);yn=Ze&&Ze[1]||""}return`
`+yn+te}}var zt=!1,mn;{var vr=typeof WeakMap=="function"?WeakMap:Map;mn=new vr}function fn(te,ke){if(!te||zt)return"";{var Be=mn.get(te);if(Be!==void 0)return Be}var Ze;zt=!0;var ct=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var mt;mt=nn.current,nn.current=null,ze();try{if(ke){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(Hr){Ze=Hr}Reflect.construct(te,[],Ut)}else{try{Ut.call()}catch(Hr){Ze=Hr}te.call(Ut.prototype)}}else{try{throw Error()}catch(Hr){Ze=Hr}te()}}catch(Hr){if(Hr&&Ze&&typeof Hr.stack=="string"){for(var Ct=Hr.stack.split(`
`),qt=Ze.stack.split(`
`),En=Ct.length-1,_n=qt.length-1;En>=1&&_n>=0&&Ct[En]!==qt[_n];)_n--;for(;En>=1&&_n>=0;En--,_n--)if(Ct[En]!==qt[_n]){if(En!==1||_n!==1)do if(En--,_n--,_n<0||Ct[En]!==qt[_n]){var qn=`
`+Ct[En].replace(" at new "," at ");return te.displayName&&qn.includes("<anonymous>")&&(qn=qn.replace("<anonymous>",te.displayName)),typeof te=="function"&&mn.set(te,qn),qn}while(En>=1&&_n>=0);break}}}finally{zt=!1,nn.current=mt,Pt(),Error.prepareStackTrace=ct}var Zn=te?te.displayName||te.name:"",Yr=Zn?Ft(Zn):"";return typeof te=="function"&&mn.set(te,Yr),Yr}function Wn(te,ke,Be){return fn(te,!1)}function $r(te){var ke=te.prototype;return!!(ke&&ke.isReactComponent)}function Sr(te,ke,Be){if(te==null)return"";if(typeof te=="function")return fn(te,$r(te));if(typeof te=="string")return Ft(te);switch(te){case A:return Ft("Suspense");case O:return Ft("SuspenseList")}if(typeof te=="object")switch(te.$$typeof){case k:return Wn(te.render);case B:return Sr(te.type,ke,Be);case W:{var Ze=te,ct=Ze._payload,mt=Ze._init;try{return Sr(mt(ct),ke,Be)}catch{}}}return""}var ur=Object.prototype.hasOwnProperty,fi={},Rr=Se.ReactDebugCurrentFrame;function ii(te){if(te){var ke=te._owner,Be=Sr(te.type,te._source,ke?ke.type:null);Rr.setExtraStackFrame(Be)}else Rr.setExtraStackFrame(null)}function We(te,ke,Be,Ze,ct){{var mt=Function.call.bind(ur);for(var Ut in te)if(mt(te,Ut)){var Ct=void 0;try{if(typeof te[Ut]!="function"){var qt=Error((Ze||"React class")+": "+Be+" type `"+Ut+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof te[Ut]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw qt.name="Invariant Violation",qt}Ct=te[Ut](ke,Ut,Ze,Be,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(En){Ct=En}Ct&&!(Ct instanceof Error)&&(ii(ct),Ce("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ze||"React class",Be,Ut,typeof Ct),ii(null)),Ct instanceof Error&&!(Ct.message in fi)&&(fi[Ct.message]=!0,ii(ct),Ce("Failed %s type: %s",Be,Ct.message),ii(null))}}}var mr=Array.isArray;function ir(te){return mr(te)}function Vn(te){{var ke=typeof Symbol=="function"&&Symbol.toStringTag,Be=ke&&te[Symbol.toStringTag]||te.constructor.name||"Object";return Be}}function Rn(te){try{return yr(te),!1}catch{return!0}}function yr(te){return""+te}function si(te){if(Rn(te))return Ce("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Vn(te)),yr(te)}var qr=Se.ReactCurrentOwner,ms={key:!0,ref:!0,__self:!0,__source:!0},Ui,jt;function an(te){if(ur.call(te,"ref")){var ke=Object.getOwnPropertyDescriptor(te,"ref").get;if(ke&&ke.isReactWarning)return!1}return te.ref!==void 0}function nt(te){if(ur.call(te,"key")){var ke=Object.getOwnPropertyDescriptor(te,"key").get;if(ke&&ke.isReactWarning)return!1}return te.key!==void 0}function Fn(te,ke){typeof te.ref=="string"&&qr.current}function Dn(te,ke){{var Be=function(){Ui||(Ui=!0,Ce("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ke))};Be.isReactWarning=!0,Object.defineProperty(te,"key",{get:Be,configurable:!0})}}function br(te,ke){{var Be=function(){jt||(jt=!0,Ce("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ke))};Be.isReactWarning=!0,Object.defineProperty(te,"ref",{get:Be,configurable:!0})}}var dr=function(te,ke,Be,Ze,ct,mt,Ut){var Ct={$$typeof:t,type:te,key:ke,ref:Be,props:Ut,_owner:mt};return Ct._store={},Object.defineProperty(Ct._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ct,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ze}),Object.defineProperty(Ct,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ct}),Object.freeze&&(Object.freeze(Ct.props),Object.freeze(Ct)),Ct};function gt(te,ke,Be,Ze,ct){{var mt,Ut={},Ct=null,qt=null;Be!==void 0&&(si(Be),Ct=""+Be),nt(ke)&&(si(ke.key),Ct=""+ke.key),an(ke)&&(qt=ke.ref,Fn(ke,ct));for(mt in ke)ur.call(ke,mt)&&!ms.hasOwnProperty(mt)&&(Ut[mt]=ke[mt]);if(te&&te.defaultProps){var En=te.defaultProps;for(mt in En)Ut[mt]===void 0&&(Ut[mt]=En[mt])}if(Ct||qt){var _n=typeof te=="function"?te.displayName||te.name||"Unknown":te;Ct&&Dn(Ut,_n),qt&&br(Ut,_n)}return dr(te,Ct,qt,ct,Ze,qr.current,Ut)}}var Kt=Se.ReactCurrentOwner,$t=Se.ReactDebugCurrentFrame;function zn(te){if(te){var ke=te._owner,Be=Sr(te.type,te._source,ke?ke.type:null);$t.setExtraStackFrame(Be)}else $t.setExtraStackFrame(null)}var Kr;Kr=!1;function pn(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function ai(){{if(Kt.current){var te=bt(Kt.current.type);if(te)return`

Check the render method of \``+te+"`."}return""}}function fe(te){return""}var I={};function G(te){{var ke=ai();if(!ke){var Be=typeof te=="string"?te:te.displayName||te.name;Be&&(ke=`

Check the top-level render call using <`+Be+">.")}return ke}}function J(te,ke){{if(!te._store||te._store.validated||te.key!=null)return;te._store.validated=!0;var Be=G(ke);if(I[Be])return;I[Be]=!0;var Ze="";te&&te._owner&&te._owner!==Kt.current&&(Ze=" It was passed a child from "+bt(te._owner.type)+"."),zn(te),Ce('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Be,Ze),zn(null)}}function se(te,ke){{if(typeof te!="object")return;if(ir(te))for(var Be=0;Be<te.length;Be++){var Ze=te[Be];pn(Ze)&&J(Ze,ke)}else if(pn(te))te._store&&(te._store.validated=!0);else if(te){var ct=Pe(te);if(typeof ct=="function"&&ct!==te.entries)for(var mt=ct.call(te),Ut;!(Ut=mt.next()).done;)pn(Ut.value)&&J(Ut.value,ke)}}}function he(te){{var ke=te.type;if(ke==null||typeof ke=="string")return;var Be;if(typeof ke=="function")Be=ke.propTypes;else if(typeof ke=="object"&&(ke.$$typeof===k||ke.$$typeof===B))Be=ke.propTypes;else return;if(Be){var Ze=bt(ke);We(Be,te.props,"prop",Ze,te)}else if(ke.PropTypes!==void 0&&!Kr){Kr=!0;var ct=bt(ke);Ce("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ct||"Unknown")}typeof ke.getDefaultProps=="function"&&!ke.getDefaultProps.isReactClassApproved&&Ce("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ne(te){{for(var ke=Object.keys(te.props),Be=0;Be<ke.length;Be++){var Ze=ke[Be];if(Ze!=="children"&&Ze!=="key"){zn(te),Ce("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ze),zn(null);break}}te.ref!==null&&(zn(te),Ce("Invalid attribute `ref` supplied to `React.Fragment`."),zn(null))}}var xe={};function ge(te,ke,Be,Ze,ct,mt){{var Ut=pt(te);if(!Ut){var Ct="";(te===void 0||typeof te=="object"&&te!==null&&Object.keys(te).length===0)&&(Ct+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var qt=fe();qt?Ct+=qt:Ct+=ai();var En;te===null?En="null":ir(te)?En="array":te!==void 0&&te.$$typeof===t?(En="<"+(bt(te.type)||"Unknown")+" />",Ct=" Did you accidentally export a JSX literal instead of a component?"):En=typeof te,Ce("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",En,Ct)}var _n=gt(te,ke,Be,ct,mt);if(_n==null)return _n;if(Ut){var qn=ke.children;if(qn!==void 0)if(Ze)if(ir(qn)){for(var Zn=0;Zn<qn.length;Zn++)se(qn[Zn],te);Object.freeze&&Object.freeze(qn)}else Ce("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(qn,te)}if(ur.call(ke,"key")){var Yr=bt(te),Hr=Object.keys(ke).filter(function(gc){return gc!=="key"}),kn=Hr.length>0?"{key: someKey, "+Hr.join(": ..., ")+": ...}":"{key: someKey}";if(!xe[Yr+kn]){var $s=Hr.length>0?"{"+Hr.join(": ..., ")+": ...}":"{}";Ce(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,kn,Yr,$s,Yr),xe[Yr+kn]=!0}}return te===c?Ne(_n):he(_n),_n}}function Te(te,ke,Be){return ge(te,ke,Be,!0)}function Qe(te,ke,Be){return ge(te,ke,Be,!1)}var ne=Qe,Ee=Te;Wx.Fragment=c,Wx.jsx=ne,Wx.jsxs=Ee})();uk.exports=Wx;var nd=uk.exports;const wN=de.createContext({});function CN(o){const t=de.useRef(null);return t.current===null&&(t.current=o()),t.current}const NN=typeof window<"u",dk=NN?de.useLayoutEffect:de.useEffect,p0=de.createContext(null);function SN(o,t){o.indexOf(t)===-1&&o.push(t)}function EN(o,t){const a=o.indexOf(t);a>-1&&o.splice(a,1)}const rd=(o,t,a)=>a>t?t:a<o?o:a;function OC(o,t){return t?`${o}. For more information and steps for solving, visit https://motion.dev/troubleshooting/${t}`:o}let Cp=()=>{},id=()=>{};Cp=(o,t,a)=>{!o&&typeof console<"u"&&console.warn(OC(t,a))},id=(o,t,a)=>{if(!o)throw new Error(OC(t,a))};const sd={},hk=o=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(o);function fk(o){return typeof o=="object"&&o!==null}const mk=o=>/^0[^.\s]+$/u.test(o);function DN(o){let t;return()=>(t===void 0&&(t=o()),t)}const xl=o=>o,Mz=(o,t)=>a=>t(o(a)),sy=(...o)=>o.reduce(Mz),Hv=(o,t,a)=>{const c=t-o;return c===0?1:(a-o)/c};class TN{constructor(){this.subscriptions=[]}add(t){return SN(this.subscriptions,t),()=>EN(this.subscriptions,t)}notify(t,a,c){const g=this.subscriptions.length;if(g)if(g===1)this.subscriptions[0](t,a,c);else for(let S=0;S<g;S++){const b=this.subscriptions[S];b&&b(t,a,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mc=o=>o*1e3,tu=o=>o/1e3;function pk(o,t){return t?o*(1e3/t):0}const WT=new Set;function PN(o,t,a){o||WT.has(t)||(console.warn(OC(t,a)),WT.add(t))}const gk=(o,t,a)=>(((1-3*a+3*t)*o+(3*a-6*t))*o+3*t)*o,Rz=1e-7,Iz=12;function Lz(o,t,a,c,g){let S,b,u=0;do b=t+(a-t)/2,S=gk(b,c,g)-o,S>0?a=b:t=b;while(Math.abs(S)>Rz&&++u<Iz);return b}function ay(o,t,a,c){if(o===t&&a===c)return xl;const g=S=>Lz(S,0,1,o,a);return S=>S===0||S===1?S:gk(g(S),t,c)}const vk=o=>t=>t<=.5?o(2*t)/2:(2-o(2*(1-t)))/2,yk=o=>t=>1-o(1-t),bk=ay(.33,1.53,.69,.99),jN=yk(bk),xk=vk(jN),_k=o=>(o*=2)<1?.5*jN(o):.5*(2-Math.pow(2,-10*(o-1))),kN=o=>1-Math.sin(Math.acos(o)),wk=yk(kN),Ck=vk(kN),Vz=ay(.42,0,1,1),Oz=ay(0,0,.58,1),Nk=ay(.42,0,.58,1),zz=o=>Array.isArray(o)&&typeof o[0]!="number",Sk=o=>Array.isArray(o)&&typeof o[0]=="number",ZT={linear:xl,easeIn:Vz,easeInOut:Nk,easeOut:Oz,circIn:kN,circInOut:Ck,circOut:wk,backIn:jN,backInOut:xk,backOut:bk,anticipate:_k},Bz=o=>typeof o=="string",KT=o=>{if(Sk(o)){id(o.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,a,c,g]=o;return ay(t,a,c,g)}else if(Bz(o))return id(ZT[o]!==void 0,`Invalid easing type '${o}'`,"invalid-easing-type"),ZT[o];return o},Rx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Fz(o,t){let a=new Set,c=new Set,g=!1,S=!1;const b=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function k(O){b.has(O)&&(A.schedule(O),o()),O(u)}const A={schedule:(O,B=!1,W=!1)=>{const pe=W&&g?a:c;return B&&b.add(O),pe.has(O)||pe.add(O),O},cancel:O=>{c.delete(O),b.delete(O)},process:O=>{if(u=O,g){S=!0;return}g=!0,[a,c]=[c,a],a.forEach(k),a.clear(),g=!1,S&&(S=!1,A.process(O))}};return A}const Uz=40;function Ek(o,t){let a=!1,c=!0;const g={delta:0,timestamp:0,isProcessing:!1},S=()=>a=!0,b=Rx.reduce((_e,Ue)=>(_e[Ue]=Fz(S),_e),{}),{setup:u,read:k,resolveKeyframes:A,preUpdate:O,update:B,preRender:W,render:ie,postRender:pe}=b,Ve=()=>{const _e=sd.useManualTiming?g.timestamp:performance.now();a=!1,sd.useManualTiming||(g.delta=c?1e3/60:Math.max(Math.min(_e-g.timestamp,Uz),1)),g.timestamp=_e,g.isProcessing=!0,u.process(g),k.process(g),A.process(g),O.process(g),B.process(g),W.process(g),ie.process(g),pe.process(g),g.isProcessing=!1,a&&t&&(c=!1,o(Ve))},Pe=()=>{a=!0,c=!0,g.isProcessing||o(Ve)};return{schedule:Rx.reduce((_e,Ue)=>{const Oe=b[Ue];return _e[Ue]=(Je,tt=!1,ut=!1)=>(a||Pe(),Oe.schedule(Je,tt,ut)),_e},{}),cancel:_e=>{for(let Ue=0;Ue<Rx.length;Ue++)b[Rx[Ue]].cancel(_e)},state:g,steps:b}}const{schedule:Fi,cancel:vh,state:ma,steps:Q1}=Ek(typeof requestAnimationFrame<"u"?requestAnimationFrame:xl,!0);let Zx;function $z(){Zx=void 0}const vo={now:()=>(Zx===void 0&&vo.set(ma.isProcessing||sd.useManualTiming?ma.timestamp:performance.now()),Zx),set:o=>{Zx=o,queueMicrotask($z)}},Dk=o=>t=>typeof t=="string"&&t.startsWith(o),AN=Dk("--"),qz=Dk("var(--"),MN=o=>qz(o)?Hz.test(o.split("/*")[0].trim()):!1,Hz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Np={test:o=>typeof o=="number",parse:parseFloat,transform:o=>o},Gv={...Np,transform:o=>rd(0,1,o)},Ix={...Np,default:1},Rv=o=>Math.round(o*1e5)/1e5,RN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gz(o){return o==null}const Wz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,IN=(o,t)=>a=>!!(typeof a=="string"&&Wz.test(a)&&a.startsWith(o)||t&&!Gz(a)&&Object.prototype.hasOwnProperty.call(a,t)),Tk=(o,t,a)=>c=>{if(typeof c!="string")return c;const[g,S,b,u]=c.match(RN);return{[o]:parseFloat(g),[t]:parseFloat(S),[a]:parseFloat(b),alpha:u!==void 0?parseFloat(u):1}},Zz=o=>rd(0,255,o),eC={...Np,transform:o=>Math.round(Zz(o))},Ef={test:IN("rgb","red"),parse:Tk("red","green","blue"),transform:({red:o,green:t,blue:a,alpha:c=1})=>"rgba("+eC.transform(o)+", "+eC.transform(t)+", "+eC.transform(a)+", "+Rv(Gv.transform(c))+")"};function Kz(o){let t="",a="",c="",g="";return o.length>5?(t=o.substring(1,3),a=o.substring(3,5),c=o.substring(5,7),g=o.substring(7,9)):(t=o.substring(1,2),a=o.substring(2,3),c=o.substring(3,4),g=o.substring(4,5),t+=t,a+=a,c+=c,g+=g),{red:parseInt(t,16),green:parseInt(a,16),blue:parseInt(c,16),alpha:g?parseInt(g,16)/255:1}}const zC={test:IN("#"),parse:Kz,transform:Ef.transform},oy=o=>({test:t=>typeof t=="string"&&t.endsWith(o)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${o}`}),hh=oy("deg"),nu=oy("%"),$n=oy("px"),Yz=oy("vh"),Xz=oy("vw"),YT={...nu,parse:o=>nu.parse(o)/100,transform:o=>nu.transform(o*100)},ap={test:IN("hsl","hue"),parse:Tk("hue","saturation","lightness"),transform:({hue:o,saturation:t,lightness:a,alpha:c=1})=>"hsla("+Math.round(o)+", "+nu.transform(Rv(t))+", "+nu.transform(Rv(a))+", "+Rv(Gv.transform(c))+")"},Ss={test:o=>Ef.test(o)||zC.test(o)||ap.test(o),parse:o=>Ef.test(o)?Ef.parse(o):ap.test(o)?ap.parse(o):zC.parse(o),transform:o=>typeof o=="string"?o:o.hasOwnProperty("red")?Ef.transform(o):ap.transform(o),getAnimatableNone:o=>{const t=Ss.parse(o);return t.alpha=0,Ss.transform(t)}},Jz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qz(o){var t,a;return isNaN(o)&&typeof o=="string"&&(((t=o.match(RN))==null?void 0:t.length)||0)+(((a=o.match(Jz))==null?void 0:a.length)||0)>0}const Pk="number",jk="color",e4="var",t4="var(",XT="${}",n4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wv(o){const t=o.toString(),a=[],c={color:[],number:[],var:[]},g=[];let S=0;const u=t.replace(n4,k=>(Ss.test(k)?(c.color.push(S),g.push(jk),a.push(Ss.parse(k))):k.startsWith(t4)?(c.var.push(S),g.push(e4),a.push(k)):(c.number.push(S),g.push(Pk),a.push(parseFloat(k))),++S,XT)).split(XT);return{values:a,split:u,indexes:c,types:g}}function kk(o){return Wv(o).values}function Ak(o){const{split:t,types:a}=Wv(o),c=t.length;return g=>{let S="";for(let b=0;b<c;b++)if(S+=t[b],g[b]!==void 0){const u=a[b];u===Pk?S+=Rv(g[b]):u===jk?S+=Ss.transform(g[b]):S+=g[b]}return S}}const r4=o=>typeof o=="number"?0:Ss.test(o)?Ss.getAnimatableNone(o):o;function i4(o){const t=kk(o);return Ak(o)(t.map(r4))}const yh={test:Qz,parse:kk,createTransformer:Ak,getAnimatableNone:i4};function tC(o,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?o+(t-o)*6*a:a<1/2?t:a<2/3?o+(t-o)*(2/3-a)*6:o}function s4({hue:o,saturation:t,lightness:a,alpha:c}){o/=360,t/=100,a/=100;let g=0,S=0,b=0;if(!t)g=S=b=a;else{const u=a<.5?a*(1+t):a+t-a*t,k=2*a-u;g=tC(k,u,o+1/3),S=tC(k,u,o),b=tC(k,u,o-1/3)}return{red:Math.round(g*255),green:Math.round(S*255),blue:Math.round(b*255),alpha:c}}function n0(o,t){return a=>a>0?t:o}const Xi=(o,t,a)=>o+(t-o)*a,nC=(o,t,a)=>{const c=o*o,g=a*(t*t-c)+c;return g<0?0:Math.sqrt(g)},a4=[zC,Ef,ap],o4=o=>a4.find(t=>t.test(o));function JT(o){const t=o4(o);if(Cp(!!t,`'${o}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let a=t.parse(o);return t===ap&&(a=s4(a)),a}const QT=(o,t)=>{const a=JT(o),c=JT(t);if(!a||!c)return n0(o,t);const g={...a};return S=>(g.red=nC(a.red,c.red,S),g.green=nC(a.green,c.green,S),g.blue=nC(a.blue,c.blue,S),g.alpha=Xi(a.alpha,c.alpha,S),Ef.transform(g))},BC=new Set(["none","hidden"]);function l4(o,t){return BC.has(o)?a=>a<=0?o:t:a=>a>=1?t:o}function c4(o,t){return a=>Xi(o,t,a)}function LN(o){return typeof o=="number"?c4:typeof o=="string"?MN(o)?n0:Ss.test(o)?QT:h4:Array.isArray(o)?Mk:typeof o=="object"?Ss.test(o)?QT:u4:n0}function Mk(o,t){const a=[...o],c=a.length,g=o.map((S,b)=>LN(S)(S,t[b]));return S=>{for(let b=0;b<c;b++)a[b]=g[b](S);return a}}function u4(o,t){const a={...o,...t},c={};for(const g in a)o[g]!==void 0&&t[g]!==void 0&&(c[g]=LN(o[g])(o[g],t[g]));return g=>{for(const S in c)a[S]=c[S](g);return a}}function d4(o,t){const a=[],c={color:0,var:0,number:0};for(let g=0;g<t.values.length;g++){const S=t.types[g],b=o.indexes[S][c[S]],u=o.values[b]??0;a[g]=u,c[S]++}return a}const h4=(o,t)=>{const a=yh.createTransformer(t),c=Wv(o),g=Wv(t);return c.indexes.var.length===g.indexes.var.length&&c.indexes.color.length===g.indexes.color.length&&c.indexes.number.length>=g.indexes.number.length?BC.has(o)&&!g.values.length||BC.has(t)&&!c.values.length?l4(o,t):sy(Mk(d4(c,g),g.values),a):(Cp(!0,`Complex values '${o}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),n0(o,t))};function Rk(o,t,a){return typeof o=="number"&&typeof t=="number"&&typeof a=="number"?Xi(o,t,a):LN(o)(o,t)}const f4=o=>{const t=({timestamp:a})=>o(a);return{start:(a=!0)=>Fi.update(t,a),stop:()=>vh(t),now:()=>ma.isProcessing?ma.timestamp:vo.now()}},Ik=(o,t,a=10)=>{let c="";const g=Math.max(Math.round(t/a),2);for(let S=0;S<g;S++)c+=Math.round(o(S/(g-1))*1e4)/1e4+", ";return`linear(${c.substring(0,c.length-2)})`},r0=2e4;function VN(o){let t=0;const a=50;let c=o.next(t);for(;!c.done&&t<r0;)t+=a,c=o.next(t);return t>=r0?1/0:t}function m4(o,t=100,a){const c=a({...o,keyframes:[0,t]}),g=Math.min(VN(c),r0);return{type:"keyframes",ease:S=>c.next(g*S).value/t,duration:tu(g)}}const p4=5;function Lk(o,t,a){const c=Math.max(t-p4,0);return pk(a-o(c),t-c)}const Yi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rC=.001;function g4({duration:o=Yi.duration,bounce:t=Yi.bounce,velocity:a=Yi.velocity,mass:c=Yi.mass}){let g,S;Cp(o<=mc(Yi.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let b=1-t;b=rd(Yi.minDamping,Yi.maxDamping,b),o=rd(Yi.minDuration,Yi.maxDuration,tu(o)),b<1?(g=A=>{const O=A*b,B=O*o,W=O-a,ie=FC(A,b),pe=Math.exp(-B);return rC-W/ie*pe},S=A=>{const B=A*b*o,W=B*a+a,ie=Math.pow(b,2)*Math.pow(A,2)*o,pe=Math.exp(-B),Ve=FC(Math.pow(A,2),b);return(-g(A)+rC>0?-1:1)*((W-ie)*pe)/Ve}):(g=A=>{const O=Math.exp(-A*o),B=(A-a)*o+1;return-rC+O*B},S=A=>{const O=Math.exp(-A*o),B=(a-A)*(o*o);return O*B});const u=5/o,k=y4(g,S,u);if(o=mc(o),isNaN(k))return{stiffness:Yi.stiffness,damping:Yi.damping,duration:o};{const A=Math.pow(k,2)*c;return{stiffness:A,damping:b*2*Math.sqrt(c*A),duration:o}}}const v4=12;function y4(o,t,a){let c=a;for(let g=1;g<v4;g++)c=c-o(c)/t(c);return c}function FC(o,t){return o*Math.sqrt(1-t*t)}const b4=["duration","bounce"],x4=["stiffness","damping","mass"];function eP(o,t){return t.some(a=>o[a]!==void 0)}function _4(o){let t={velocity:Yi.velocity,stiffness:Yi.stiffness,damping:Yi.damping,mass:Yi.mass,isResolvedFromDuration:!1,...o};if(!eP(o,x4)&&eP(o,b4))if(o.visualDuration){const a=o.visualDuration,c=2*Math.PI/(a*1.2),g=c*c,S=2*rd(.05,1,1-(o.bounce||0))*Math.sqrt(g);t={...t,mass:Yi.mass,stiffness:g,damping:S}}else{const a=g4(o);t={...t,...a,mass:Yi.mass},t.isResolvedFromDuration=!0}return t}function i0(o=Yi.visualDuration,t=Yi.bounce){const a=typeof o!="object"?{visualDuration:o,keyframes:[0,1],bounce:t}:o;let{restSpeed:c,restDelta:g}=a;const S=a.keyframes[0],b=a.keyframes[a.keyframes.length-1],u={done:!1,value:S},{stiffness:k,damping:A,mass:O,duration:B,velocity:W,isResolvedFromDuration:ie}=_4({...a,velocity:-tu(a.velocity||0)}),pe=W||0,Ve=A/(2*Math.sqrt(k*O)),Pe=b-S,Se=tu(Math.sqrt(k/O)),Ce=Math.abs(Pe)<5;c||(c=Ce?Yi.restSpeed.granular:Yi.restSpeed.default),g||(g=Ce?Yi.restDelta.granular:Yi.restDelta.default);let _e;if(Ve<1){const Oe=FC(Se,Ve);_e=Je=>{const tt=Math.exp(-Ve*Se*Je);return b-tt*((pe+Ve*Se*Pe)/Oe*Math.sin(Oe*Je)+Pe*Math.cos(Oe*Je))}}else if(Ve===1)_e=Oe=>b-Math.exp(-Se*Oe)*(Pe+(pe+Se*Pe)*Oe);else{const Oe=Se*Math.sqrt(Ve*Ve-1);_e=Je=>{const tt=Math.exp(-Ve*Se*Je),ut=Math.min(Oe*Je,300);return b-tt*((pe+Ve*Se*Pe)*Math.sinh(ut)+Oe*Pe*Math.cosh(ut))/Oe}}const Ue={calculatedDuration:ie&&B||null,next:Oe=>{const Je=_e(Oe);if(ie)u.done=Oe>=B;else{let tt=Oe===0?pe:0;Ve<1&&(tt=Oe===0?mc(pe):Lk(_e,Oe,Je));const ut=Math.abs(tt)<=c,Tt=Math.abs(b-Je)<=g;u.done=ut&&Tt}return u.value=u.done?b:Je,u},toString:()=>{const Oe=Math.min(VN(Ue),r0),Je=Ik(tt=>Ue.next(Oe*tt).value,Oe,30);return Oe+"ms "+Je},toTransition:()=>{}};return Ue}i0.applyToOptions=o=>{const t=m4(o,100,i0);return o.ease=t.ease,o.duration=mc(t.duration),o.type="keyframes",o};function UC({keyframes:o,velocity:t=0,power:a=.8,timeConstant:c=325,bounceDamping:g=10,bounceStiffness:S=500,modifyTarget:b,min:u,max:k,restDelta:A=.5,restSpeed:O}){const B=o[0],W={done:!1,value:B},ie=ut=>u!==void 0&&ut<u||k!==void 0&&ut>k,pe=ut=>u===void 0?k:k===void 0||Math.abs(u-ut)<Math.abs(k-ut)?u:k;let Ve=a*t;const Pe=B+Ve,Se=b===void 0?Pe:b(Pe);Se!==Pe&&(Ve=Se-B);const Ce=ut=>-Ve*Math.exp(-ut/c),_e=ut=>Se+Ce(ut),Ue=ut=>{const Tt=Ce(ut),pt=_e(ut);W.done=Math.abs(Tt)<=A,W.value=W.done?Se:pt};let Oe,Je;const tt=ut=>{ie(W.value)&&(Oe=ut,Je=i0({keyframes:[W.value,pe(W.value)],velocity:Lk(_e,ut,W.value),damping:g,stiffness:S,restDelta:A,restSpeed:O}))};return tt(0),{calculatedDuration:null,next:ut=>{let Tt=!1;return!Je&&Oe===void 0&&(Tt=!0,Ue(ut),tt(ut)),Oe!==void 0&&ut>=Oe?Je.next(ut-Oe):(!Tt&&Ue(ut),W)}}}function w4(o,t,a){const c=[],g=a||sd.mix||Rk,S=o.length-1;for(let b=0;b<S;b++){let u=g(o[b],o[b+1]);if(t){const k=Array.isArray(t)?t[b]||xl:t;u=sy(k,u)}c.push(u)}return c}function C4(o,t,{clamp:a=!0,ease:c,mixer:g}={}){const S=o.length;if(id(S===t.length,"Both input and output ranges must be the same length","range-length"),S===1)return()=>t[0];if(S===2&&t[0]===t[1])return()=>t[1];const b=o[0]===o[1];o[0]>o[S-1]&&(o=[...o].reverse(),t=[...t].reverse());const u=w4(t,c,g),k=u.length,A=O=>{if(b&&O<o[0])return t[0];let B=0;if(k>1)for(;B<o.length-2&&!(O<o[B+1]);B++);const W=Hv(o[B],o[B+1],O);return u[B](W)};return a?O=>A(rd(o[0],o[S-1],O)):A}function N4(o,t){const a=o[o.length-1];for(let c=1;c<=t;c++){const g=Hv(0,t,c);o.push(Xi(a,1,g))}}function S4(o){const t=[0];return N4(t,o.length-1),t}function E4(o,t){return o.map(a=>a*t)}function D4(o,t){return o.map(()=>t||Nk).splice(0,o.length-1)}function op({duration:o=300,keyframes:t,times:a,ease:c="easeInOut"}){const g=zz(c)?c.map(KT):KT(c),S={done:!1,value:t[0]},b=E4(a&&a.length===t.length?a:S4(t),o),u=C4(b,t,{ease:Array.isArray(g)?g:D4(t,g)});return{calculatedDuration:o,next:k=>(S.value=u(k),S.done=k>=o,S)}}const T4=o=>o!==null;function ON(o,{repeat:t,repeatType:a="loop"},c,g=1){const S=o.filter(T4),u=g<0||t&&a!=="loop"&&t%2===1?0:S.length-1;return!u||c===void 0?S[u]:c}const P4={decay:UC,inertia:UC,tween:op,keyframes:op,spring:i0};function Vk(o){typeof o.type=="string"&&(o.type=P4[o.type])}class zN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,a){return this.finished.then(t,a)}}const j4=o=>o/100;class BN extends zN{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var c,g;const{motionValue:a}=this.options;a&&a.updatedAt!==vo.now()&&this.tick(vo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(g=(c=this.options).onStop)==null||g.call(c))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Vk(t);const{type:a=op,repeat:c=0,repeatDelay:g=0,repeatType:S,velocity:b=0}=t;let{keyframes:u}=t;const k=a||op;k!==op&&id(u.length<=2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${u}`,"spring-two-frames"),k!==op&&typeof u[0]!="number"&&(this.mixKeyframes=sy(j4,Rk(u[0],u[1])),u=[0,100]);const A=k({...t,keyframes:u});S==="mirror"&&(this.mirroredGenerator=k({...t,keyframes:[...u].reverse(),velocity:-b})),A.calculatedDuration===null&&(A.calculatedDuration=VN(A));const{calculatedDuration:O}=A;this.calculatedDuration=O,this.resolvedDuration=O+g,this.totalDuration=this.resolvedDuration*(c+1)-g,this.generator=A}updateTime(t){const a=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(t,a=!1){const{generator:c,totalDuration:g,mixKeyframes:S,mirroredGenerator:b,resolvedDuration:u,calculatedDuration:k}=this;if(this.startTime===null)return c.next(0);const{delay:A=0,keyframes:O,repeat:B,repeatType:W,repeatDelay:ie,type:pe,onUpdate:Ve,finalKeyframe:Pe}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-g/this.speed,this.startTime)),a?this.currentTime=t:this.updateTime(t);const Se=this.currentTime-A*(this.playbackSpeed>=0?1:-1),Ce=this.playbackSpeed>=0?Se<0:Se>g;this.currentTime=Math.max(Se,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let _e=this.currentTime,Ue=c;if(B){const ut=Math.min(this.currentTime,g)/u;let Tt=Math.floor(ut),pt=ut%1;!pt&&ut>=1&&(pt=1),pt===1&&Tt--,Tt=Math.min(Tt,B+1),!!(Tt%2)&&(W==="reverse"?(pt=1-pt,ie&&(pt-=ie/u)):W==="mirror"&&(Ue=b)),_e=rd(0,1,pt)*u}const Oe=Ce?{done:!1,value:O[0]}:Ue.next(_e);S&&(Oe.value=S(Oe.value));let{done:Je}=Oe;!Ce&&k!==null&&(Je=this.playbackSpeed>=0?this.currentTime>=g:this.currentTime<=0);const tt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Je);return tt&&pe!==UC&&(Oe.value=ON(O,this.options,Pe,this.speed)),Ve&&Ve(Oe.value),tt&&this.finish(),Oe}then(t,a){return this.finished.then(t,a)}get duration(){return tu(this.calculatedDuration)}get time(){return tu(this.currentTime)}set time(t){var a;t=mc(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(vo.now());const a=this.playbackSpeed!==t;this.playbackSpeed=t,a&&(this.time=tu(this.currentTime))}play(){var g,S;if(this.isStopped)return;const{driver:t=f4,startTime:a}=this.options;this.driver||(this.driver=t(b=>this.tick(b))),(S=(g=this.options).onPlay)==null||S.call(g);const c=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=c):this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime||(this.startTime=a??c),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(t=this.options).onComplete)==null||a.call(t)}cancel(){var t,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(t=this.options).onCancel)==null||a.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),t.observe(this)}}function k4(o){for(let t=1;t<o.length;t++)o[t]??(o[t]=o[t-1])}const Df=o=>o*180/Math.PI,$C=o=>{const t=Df(Math.atan2(o[1],o[0]));return qC(t)},A4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:o=>(Math.abs(o[0])+Math.abs(o[3]))/2,rotate:$C,rotateZ:$C,skewX:o=>Df(Math.atan(o[1])),skewY:o=>Df(Math.atan(o[2])),skew:o=>(Math.abs(o[1])+Math.abs(o[2]))/2},qC=o=>(o=o%360,o<0&&(o+=360),o),tP=$C,nP=o=>Math.sqrt(o[0]*o[0]+o[1]*o[1]),rP=o=>Math.sqrt(o[4]*o[4]+o[5]*o[5]),M4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nP,scaleY:rP,scale:o=>(nP(o)+rP(o))/2,rotateX:o=>qC(Df(Math.atan2(o[6],o[5]))),rotateY:o=>qC(Df(Math.atan2(-o[2],o[0]))),rotateZ:tP,rotate:tP,skewX:o=>Df(Math.atan(o[4])),skewY:o=>Df(Math.atan(o[1])),skew:o=>(Math.abs(o[1])+Math.abs(o[4]))/2};function HC(o){return o.includes("scale")?1:0}function GC(o,t){if(!o||o==="none")return HC(t);const a=o.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let c,g;if(a)c=M4,g=a;else{const u=o.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=A4,g=u}if(!g)return HC(t);const S=c[t],b=g[1].split(",").map(I4);return typeof S=="function"?S(b):b[S]}const R4=(o,t)=>{const{transform:a="none"}=getComputedStyle(o);return GC(a,t)};function I4(o){return parseFloat(o.trim())}const Sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ep=new Set(Sp),iP=o=>o===Np||o===$n,L4=new Set(["x","y","z"]),V4=Sp.filter(o=>!L4.has(o));function O4(o){const t=[];return V4.forEach(a=>{const c=o.getValue(a);c!==void 0&&(t.push([a,c.get()]),c.set(a.startsWith("scale")?1:0))}),t}const Tf={width:({x:o},{paddingLeft:t="0",paddingRight:a="0"})=>o.max-o.min-parseFloat(t)-parseFloat(a),height:({y:o},{paddingTop:t="0",paddingBottom:a="0"})=>o.max-o.min-parseFloat(t)-parseFloat(a),top:(o,{top:t})=>parseFloat(t),left:(o,{left:t})=>parseFloat(t),bottom:({y:o},{top:t})=>parseFloat(t)+(o.max-o.min),right:({x:o},{left:t})=>parseFloat(t)+(o.max-o.min),x:(o,{transform:t})=>GC(t,"x"),y:(o,{transform:t})=>GC(t,"y")};Tf.translateX=Tf.x;Tf.translateY=Tf.y;const Pf=new Set;let WC=!1,ZC=!1,KC=!1;function Ok(){if(ZC){const o=Array.from(Pf).filter(c=>c.needsMeasurement),t=new Set(o.map(c=>c.element)),a=new Map;t.forEach(c=>{const g=O4(c);g.length&&(a.set(c,g),c.render())}),o.forEach(c=>c.measureInitialState()),t.forEach(c=>{c.render();const g=a.get(c);g&&g.forEach(([S,b])=>{var u;(u=c.getValue(S))==null||u.set(b)})}),o.forEach(c=>c.measureEndState()),o.forEach(c=>{c.suspendedScrollY!==void 0&&window.scrollTo(0,c.suspendedScrollY)})}ZC=!1,WC=!1,Pf.forEach(o=>o.complete(KC)),Pf.clear()}function zk(){Pf.forEach(o=>{o.readKeyframes(),o.needsMeasurement&&(ZC=!0)})}function z4(){KC=!0,zk(),Ok(),KC=!1}class FN{constructor(t,a,c,g,S,b=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=a,this.name=c,this.motionValue=g,this.element=S,this.isAsync=b}scheduleResolve(){this.state="scheduled",this.isAsync?(Pf.add(this),WC||(WC=!0,Fi.read(zk),Fi.resolveKeyframes(Ok))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:a,element:c,motionValue:g}=this;if(t[0]===null){const S=g==null?void 0:g.get(),b=t[t.length-1];if(S!==void 0)t[0]=S;else if(c&&a){const u=c.readValue(a,b);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=b),g&&S===void 0&&g.set(t[0])}k4(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Pf.delete(this)}cancel(){this.state==="scheduled"&&(Pf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const B4=o=>o.startsWith("--");function F4(o,t,a){B4(t)?o.style.setProperty(t,a):o.style[t]=a}const U4=DN(()=>window.ScrollTimeline!==void 0),$4={};function q4(o,t){const a=DN(o);return()=>$4[t]??a()}const Bk=q4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jv=([o,t,a,c])=>`cubic-bezier(${o}, ${t}, ${a}, ${c})`,sP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jv([0,.65,.55,1]),circOut:jv([.55,0,1,.45]),backIn:jv([.31,.01,.66,-.59]),backOut:jv([.33,1.53,.69,.99])};function Fk(o,t){if(o)return typeof o=="function"?Bk()?Ik(o,t):"ease-out":Sk(o)?jv(o):Array.isArray(o)?o.map(a=>Fk(a,t)||sP.easeOut):sP[o]}function H4(o,t,a,{delay:c=0,duration:g=300,repeat:S=0,repeatType:b="loop",ease:u="easeOut",times:k}={},A=void 0){const O={[t]:a};k&&(O.offset=k);const B=Fk(u,g);Array.isArray(B)&&(O.easing=B);const W={delay:c,duration:g,easing:Array.isArray(B)?"linear":B,fill:"both",iterations:S+1,direction:b==="reverse"?"alternate":"normal"};return A&&(W.pseudoElement=A),o.animate(O,W)}function Uk(o){return typeof o=="function"&&"applyToOptions"in o}function G4({type:o,...t}){return Uk(o)&&Bk()?o.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class W4 extends zN{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:a,name:c,keyframes:g,pseudoElement:S,allowFlatten:b=!1,finalKeyframe:u,onComplete:k}=t;this.isPseudoElement=!!S,this.allowFlatten=b,this.options=t,id(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const A=G4(t);this.animation=H4(a,c,g,A,S),A.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const O=ON(g,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(O):F4(a,c,O),this.animation.cancel()}k==null||k(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,a;(a=(t=this.animation).finish)==null||a.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,a;this.isPseudoElement||(a=(t=this.animation).commitStyles)==null||a.call(t)}get duration(){var a,c;const t=((c=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:c.call(a).duration)||0;return tu(Number(t))}get time(){return tu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=mc(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:a}){var c;return this.allowFlatten&&((c=this.animation.effect)==null||c.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&U4()?(this.animation.timeline=t,xl):a(this)}}const $k={anticipate:_k,backInOut:xk,circInOut:Ck};function Z4(o){return o in $k}function K4(o){typeof o.ease=="string"&&Z4(o.ease)&&(o.ease=$k[o.ease])}const aP=10;class Y4 extends W4{constructor(t){K4(t),Vk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:a,onUpdate:c,onComplete:g,element:S,...b}=this.options;if(!a)return;if(t!==void 0){a.set(t);return}const u=new BN({...b,autoplay:!1}),k=mc(this.finishedTime??this.time);a.setWithVelocity(u.sample(k-aP).value,u.sample(k).value,aP),u.stop()}}const oP=(o,t)=>t==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(yh.test(o)||o==="0")&&!o.startsWith("url("));function X4(o){const t=o[0];if(o.length===1)return!0;for(let a=0;a<o.length;a++)if(o[a]!==t)return!0}function J4(o,t,a,c){const g=o[0];if(g===null)return!1;if(t==="display"||t==="visibility")return!0;const S=o[o.length-1],b=oP(g,t),u=oP(S,t);return Cp(b===u,`You are trying to animate ${t} from "${g}" to "${S}". "${b?S:g}" is not an animatable value.`,"value-not-animatable"),!b||!u?!1:X4(o)||(a==="spring"||Uk(a))&&c}function YC(o){o.duration=0,o.type}const Q4=new Set(["opacity","clipPath","filter","transform"]),eB=DN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tB(o){var O;const{motionValue:t,name:a,repeatDelay:c,repeatType:g,damping:S,type:b}=o;if(!(((O=t==null?void 0:t.owner)==null?void 0:O.current)instanceof HTMLElement))return!1;const{onUpdate:k,transformTemplate:A}=t.owner.getProps();return eB()&&a&&Q4.has(a)&&(a!=="transform"||!A)&&!k&&!c&&g!=="mirror"&&S!==0&&b!=="inertia"}const nB=40;class rB extends zN{constructor({autoplay:t=!0,delay:a=0,type:c="keyframes",repeat:g=0,repeatDelay:S=0,repeatType:b="loop",keyframes:u,name:k,motionValue:A,element:O,...B}){var pe;super(),this.stop=()=>{var Ve,Pe;this._animation&&(this._animation.stop(),(Ve=this.stopTimeline)==null||Ve.call(this)),(Pe=this.keyframeResolver)==null||Pe.cancel()},this.createdAt=vo.now();const W={autoplay:t,delay:a,type:c,repeat:g,repeatDelay:S,repeatType:b,name:k,motionValue:A,element:O,...B},ie=(O==null?void 0:O.KeyframeResolver)||FN;this.keyframeResolver=new ie(u,(Ve,Pe,Se)=>this.onKeyframesResolved(Ve,Pe,W,!Se),k,A,O),(pe=this.keyframeResolver)==null||pe.scheduleResolve()}onKeyframesResolved(t,a,c,g){this.keyframeResolver=void 0;const{name:S,type:b,velocity:u,delay:k,isHandoff:A,onUpdate:O}=c;this.resolvedAt=vo.now(),J4(t,S,b,u)||((sd.instantAnimations||!k)&&(O==null||O(ON(t,c,a))),t[0]=t[t.length-1],YC(c),c.repeat=0);const W={startTime:g?this.resolvedAt?this.resolvedAt-this.createdAt>nB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...c,keyframes:t},ie=!A&&tB(W)?new Y4({...W,element:W.motionValue.owner.current}):new BN(W);ie.finished.then(()=>this.notifyFinished()).catch(xl),this.pendingTimeline&&(this.stopTimeline=ie.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=ie}get finished(){return this._animation?this.animation.finished:this._finished}then(t,a){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),z4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const iB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sB(o){const t=iB.exec(o);if(!t)return[,];const[,a,c,g]=t;return[`--${a??c}`,g]}const aB=4;function qk(o,t,a=1){id(a<=aB,`Max CSS variable fallback depth detected in property "${o}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[c,g]=sB(o);if(!c)return;const S=window.getComputedStyle(t).getPropertyValue(c);if(S){const b=S.trim();return hk(b)?parseFloat(b):b}return MN(g)?qk(g,t,a+1):g}function UN(o,t){return(o==null?void 0:o[t])??(o==null?void 0:o.default)??o}const Hk=new Set(["width","height","top","left","right","bottom",...Sp]),oB={test:o=>o==="auto",parse:o=>o},Gk=o=>t=>t.test(o),Wk=[Np,$n,nu,hh,Xz,Yz,oB],lP=o=>Wk.find(Gk(o));function lB(o){return typeof o=="number"?o===0:o!==null?o==="none"||o==="0"||mk(o):!0}const cB=new Set(["brightness","contrast","saturate","opacity"]);function uB(o){const[t,a]=o.slice(0,-1).split("(");if(t==="drop-shadow")return o;const[c]=a.match(RN)||[];if(!c)return o;const g=a.replace(c,"");let S=cB.has(t)?1:0;return c!==a&&(S*=100),t+"("+S+g+")"}const dB=/\b([a-z-]*)\(.*?\)/gu,XC={...yh,getAnimatableNone:o=>{const t=o.match(dB);return t?t.map(uB).join(" "):o}},cP={...Np,transform:Math.round},hB={rotate:hh,rotateX:hh,rotateY:hh,rotateZ:hh,scale:Ix,scaleX:Ix,scaleY:Ix,scaleZ:Ix,skew:hh,skewX:hh,skewY:hh,distance:$n,translateX:$n,translateY:$n,translateZ:$n,x:$n,y:$n,z:$n,perspective:$n,transformPerspective:$n,opacity:Gv,originX:YT,originY:YT,originZ:$n},$N={borderWidth:$n,borderTopWidth:$n,borderRightWidth:$n,borderBottomWidth:$n,borderLeftWidth:$n,borderRadius:$n,radius:$n,borderTopLeftRadius:$n,borderTopRightRadius:$n,borderBottomRightRadius:$n,borderBottomLeftRadius:$n,width:$n,maxWidth:$n,height:$n,maxHeight:$n,top:$n,right:$n,bottom:$n,left:$n,padding:$n,paddingTop:$n,paddingRight:$n,paddingBottom:$n,paddingLeft:$n,margin:$n,marginTop:$n,marginRight:$n,marginBottom:$n,marginLeft:$n,backgroundPositionX:$n,backgroundPositionY:$n,...hB,zIndex:cP,fillOpacity:Gv,strokeOpacity:Gv,numOctaves:cP},fB={...$N,color:Ss,backgroundColor:Ss,outlineColor:Ss,fill:Ss,stroke:Ss,borderColor:Ss,borderTopColor:Ss,borderRightColor:Ss,borderBottomColor:Ss,borderLeftColor:Ss,filter:XC,WebkitFilter:XC},Zk=o=>fB[o];function Kk(o,t){let a=Zk(o);return a!==XC&&(a=yh),a.getAnimatableNone?a.getAnimatableNone(t):void 0}const mB=new Set(["auto","none","0"]);function pB(o,t,a){let c=0,g;for(;c<o.length&&!g;){const S=o[c];typeof S=="string"&&!mB.has(S)&&Wv(S).values.length&&(g=o[c]),c++}if(g&&a)for(const S of t)o[S]=Kk(a,g)}class gB extends FN{constructor(t,a,c,g,S){super(t,a,c,g,S,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:a,name:c}=this;if(!a||!a.current)return;super.readKeyframes();for(let k=0;k<t.length;k++){let A=t[k];if(typeof A=="string"&&(A=A.trim(),MN(A))){const O=qk(A,a.current);O!==void 0&&(t[k]=O),k===t.length-1&&(this.finalKeyframe=A)}}if(this.resolveNoneKeyframes(),!Hk.has(c)||t.length!==2)return;const[g,S]=t,b=lP(g),u=lP(S);if(b!==u)if(iP(b)&&iP(u))for(let k=0;k<t.length;k++){const A=t[k];typeof A=="string"&&(t[k]=parseFloat(A))}else Tf[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:a}=this,c=[];for(let g=0;g<t.length;g++)(t[g]===null||lB(t[g]))&&c.push(g);c.length&&pB(t,c,a)}measureInitialState(){const{element:t,unresolvedKeyframes:a,name:c}=this;if(!t||!t.current)return;c==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tf[c](t.measureViewportBox(),window.getComputedStyle(t.current)),a[0]=this.measuredOrigin;const g=a[a.length-1];g!==void 0&&t.getValue(c,g).jump(g,!1)}measureEndState(){var u;const{element:t,name:a,unresolvedKeyframes:c}=this;if(!t||!t.current)return;const g=t.getValue(a);g&&g.jump(this.measuredOrigin,!1);const S=c.length-1,b=c[S];c[S]=Tf[a](t.measureViewportBox(),window.getComputedStyle(t.current)),b!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=b),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([k,A])=>{t.getValue(k).set(A)}),this.resolveNoneKeyframes()}}function vB(o,t,a){if(o instanceof EventTarget)return[o];if(typeof o=="string"){let c=document;const g=(a==null?void 0:a[o])??c.querySelectorAll(o);return g?Array.from(g):[]}return Array.from(o)}const Yk=(o,t)=>t&&typeof o=="number"?t.transform(o):o;function Xk(o){return fk(o)&&"offsetHeight"in o}const uP=30,yB=o=>!isNaN(parseFloat(o));class bB{constructor(t,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=c=>{var S;const g=vo.now();if(this.updatedAt!==g&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(c),this.current!==this.prev&&((S=this.events.change)==null||S.notify(this.current),this.dependents))for(const b of this.dependents)b.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=a.owner}setCurrent(t){this.current=t,this.updatedAt=vo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=yB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return PN(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",t)}on(t,a){this.events[t]||(this.events[t]=new TN);const c=this.events[t].add(a);return t==="change"?()=>{c(),Fi.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,a){this.passiveEffect=t,this.stopPassiveEffect=a}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,a,c){this.set(a),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-c}jump(t,a=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=vo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>uP)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,uP);return pk(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(t){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=t(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,a;(t=this.dependents)==null||t.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vp(o,t){return new bB(o,t)}const{schedule:qN}=Ek(queueMicrotask,!1),dc={x:!1,y:!1};function Jk(){return dc.x||dc.y}function xB(o){return o==="x"||o==="y"?dc[o]?null:(dc[o]=!0,()=>{dc[o]=!1}):dc.x||dc.y?null:(dc.x=dc.y=!0,()=>{dc.x=dc.y=!1})}function Qk(o,t){const a=vB(o),c=new AbortController,g={passive:!0,...t,signal:c.signal};return[a,g,()=>c.abort()]}function dP(o){return!(o.pointerType==="touch"||Jk())}function _B(o,t,a={}){const[c,g,S]=Qk(o,a),b=u=>{if(!dP(u))return;const{target:k}=u,A=t(k,u);if(typeof A!="function"||!k)return;const O=B=>{dP(B)&&(A(B),k.removeEventListener("pointerleave",O))};k.addEventListener("pointerleave",O,g)};return c.forEach(u=>{u.addEventListener("pointerenter",b,g)}),S}const eA=(o,t)=>t?o===t?!0:eA(o,t.parentElement):!1,HN=o=>o.pointerType==="mouse"?typeof o.button!="number"||o.button<=0:o.isPrimary!==!1,wB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CB(o){return wB.has(o.tagName)||o.tabIndex!==-1}const Kx=new WeakSet;function hP(o){return t=>{t.key==="Enter"&&o(t)}}function iC(o,t){o.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const NB=(o,t)=>{const a=o.currentTarget;if(!a)return;const c=hP(()=>{if(Kx.has(a))return;iC(a,"down");const g=hP(()=>{iC(a,"up")}),S=()=>iC(a,"cancel");a.addEventListener("keyup",g,t),a.addEventListener("blur",S,t)});a.addEventListener("keydown",c,t),a.addEventListener("blur",()=>a.removeEventListener("keydown",c),t)};function fP(o){return HN(o)&&!Jk()}function SB(o,t,a={}){const[c,g,S]=Qk(o,a),b=u=>{const k=u.currentTarget;if(!fP(u))return;Kx.add(k);const A=t(k,u),O=(ie,pe)=>{window.removeEventListener("pointerup",B),window.removeEventListener("pointercancel",W),Kx.has(k)&&Kx.delete(k),fP(ie)&&typeof A=="function"&&A(ie,{success:pe})},B=ie=>{O(ie,k===window||k===document||a.useGlobalTarget||eA(k,ie.target))},W=ie=>{O(ie,!1)};window.addEventListener("pointerup",B,g),window.addEventListener("pointercancel",W,g)};return c.forEach(u=>{(a.useGlobalTarget?window:u).addEventListener("pointerdown",b,g),Xk(u)&&(u.addEventListener("focus",A=>NB(A,g)),!CB(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),S}function tA(o){return fk(o)&&"ownerSVGElement"in o}function EB(o){return tA(o)&&o.tagName==="svg"}const La=o=>!!(o&&o.getVelocity),DB=[...Wk,Ss,yh],TB=o=>DB.find(Gk(o)),GN=de.createContext({transformPagePoint:o=>o,isStatic:!1,reducedMotion:"never"});class PB extends de.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const c=a.offsetParent,g=Xk(c)&&c.offsetWidth||0,S=this.props.sizeRef.current;S.height=a.offsetHeight||0,S.width=a.offsetWidth||0,S.top=a.offsetTop,S.left=a.offsetLeft,S.right=g-S.width-S.left}return null}componentDidUpdate(){}render(){return this.props.children}}function jB({children:o,isPresent:t,anchorX:a,root:c}){const g=de.useId(),S=de.useRef(null),b=de.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=de.useContext(GN);return de.useInsertionEffect(()=>{const{width:k,height:A,top:O,left:B,right:W}=b.current;if(t||!S.current||!k||!A)return;const ie=a==="left"?`left: ${B}`:`right: ${W}`;S.current.dataset.motionPopId=g;const pe=document.createElement("style");u&&(pe.nonce=u);const Ve=c??document.head;return Ve.appendChild(pe),pe.sheet&&pe.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${k}px !important;
            height: ${A}px !important;
            ${ie}px !important;
            top: ${O}px !important;
          }
        `),()=>{Ve.contains(pe)&&Ve.removeChild(pe)}},[t]),nd.jsx(PB,{isPresent:t,childRef:S,sizeRef:b,children:de.cloneElement(o,{ref:S})})}const kB=({children:o,initial:t,isPresent:a,onExitComplete:c,custom:g,presenceAffectsLayout:S,mode:b,anchorX:u,root:k})=>{const A=CN(AB),O=de.useId();let B=!0,W=de.useMemo(()=>(B=!1,{id:O,initial:t,isPresent:a,custom:g,onExitComplete:ie=>{A.set(ie,!0);for(const pe of A.values())if(!pe)return;c&&c()},register:ie=>(A.set(ie,!1),()=>A.delete(ie))}),[a,A,c]);return S&&B&&(W={...W}),de.useMemo(()=>{A.forEach((ie,pe)=>A.set(pe,!1))},[a]),de.useEffect(()=>{!a&&!A.size&&c&&c()},[a]),b==="popLayout"&&(o=nd.jsx(jB,{isPresent:a,anchorX:u,root:k,children:o})),nd.jsx(p0.Provider,{value:W,children:o})};function AB(){return new Map}function nA(o=!0){const t=de.useContext(p0);if(t===null)return[!0,null];const{isPresent:a,onExitComplete:c,register:g}=t,S=de.useId();de.useEffect(()=>{if(o)return g(S)},[o]);const b=de.useCallback(()=>o&&c&&c(S),[S,c,o]);return!a&&c?[!1,b]:[!0]}const Lx=o=>o.key||"";function mP(o){const t=[];return de.Children.forEach(o,a=>{de.isValidElement(a)&&t.push(a)}),t}const fp=({children:o,custom:t,initial:a=!0,onExitComplete:c,presenceAffectsLayout:g=!0,mode:S="sync",propagate:b=!1,anchorX:u="left",root:k})=>{const[A,O]=nA(b),B=de.useMemo(()=>mP(o),[o]),W=b&&!A?[]:B.map(Lx),ie=de.useRef(!0),pe=de.useRef(B),Ve=CN(()=>new Map),[Pe,Se]=de.useState(B),[Ce,_e]=de.useState(B);dk(()=>{ie.current=!1,pe.current=B;for(let Je=0;Je<Ce.length;Je++){const tt=Lx(Ce[Je]);W.includes(tt)?Ve.delete(tt):Ve.get(tt)!==!0&&Ve.set(tt,!1)}},[Ce,W.length,W.join("-")]);const Ue=[];if(B!==Pe){let Je=[...B];for(let tt=0;tt<Ce.length;tt++){const ut=Ce[tt],Tt=Lx(ut);W.includes(Tt)||(Je.splice(tt,0,ut),Ue.push(ut))}return S==="wait"&&Ue.length&&(Je=Ue),_e(mP(Je)),Se(B),null}S==="wait"&&Ce.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:Oe}=de.useContext(wN);return nd.jsx(nd.Fragment,{children:Ce.map(Je=>{const tt=Lx(Je),ut=b&&!A?!1:B===Ce||W.includes(tt),Tt=()=>{if(Ve.has(tt))Ve.set(tt,!0);else return;let pt=!0;Ve.forEach(Yt=>{Yt||(pt=!1)}),pt&&(Oe==null||Oe(),_e(pe.current),b&&(O==null||O()),c&&c())};return nd.jsx(kB,{isPresent:ut,initial:!ie.current||a?void 0:!1,custom:t,presenceAffectsLayout:g,mode:S,root:k,onExitComplete:ut?void 0:Tt,anchorX:u,children:Je},tt)})})},rA=de.createContext({strict:!1}),pP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yp={};for(const o in pP)yp[o]={isEnabled:t=>pP[o].some(a=>!!t[a])};function MB(o){for(const t in o)yp[t]={...yp[t],...o[t]}}const RB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function s0(o){return o.startsWith("while")||o.startsWith("drag")&&o!=="draggable"||o.startsWith("layout")||o.startsWith("onTap")||o.startsWith("onPan")||o.startsWith("onLayout")||RB.has(o)}let iA=o=>!s0(o);function IB(o){typeof o=="function"&&(iA=t=>t.startsWith("on")?!s0(t):o(t))}try{IB(require("@emotion/is-prop-valid").default)}catch{}function LB(o,t,a){const c={};for(const g in o)g==="values"&&typeof o.values=="object"||(iA(g)||a===!0&&s0(g)||!t&&!s0(g)||o.draggable&&g.startsWith("onDrag"))&&(c[g]=o[g]);return c}const g0=de.createContext({});function v0(o){return o!==null&&typeof o=="object"&&typeof o.start=="function"}function Zv(o){return typeof o=="string"||Array.isArray(o)}const WN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZN=["initial",...WN];function y0(o){return v0(o.animate)||ZN.some(t=>Zv(o[t]))}function sA(o){return!!(y0(o)||o.variants)}function VB(o,t){if(y0(o)){const{initial:a,animate:c}=o;return{initial:a===!1||Zv(a)?a:void 0,animate:Zv(c)?c:void 0}}return o.inherit!==!1?t:{}}function OB(o){const{initial:t,animate:a}=VB(o,de.useContext(g0));return de.useMemo(()=>({initial:t,animate:a}),[gP(t),gP(a)])}function gP(o){return Array.isArray(o)?o.join(" "):o}const Kv={};function zB(o){for(const t in o)Kv[t]=o[t],AN(t)&&(Kv[t].isCSSVariable=!0)}function aA(o,{layout:t,layoutId:a}){return Ep.has(o)||o.startsWith("origin")||(t||a!==void 0)&&(!!Kv[o]||o==="opacity")}const BB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FB=Sp.length;function UB(o,t,a){let c="",g=!0;for(let S=0;S<FB;S++){const b=Sp[S],u=o[b];if(u===void 0)continue;let k=!0;if(typeof u=="number"?k=u===(b.startsWith("scale")?1:0):k=parseFloat(u)===0,!k||a){const A=Yk(u,$N[b]);if(!k){g=!1;const O=BB[b]||b;c+=`${O}(${A}) `}a&&(t[b]=A)}}return c=c.trim(),a?c=a(t,g?"":c):g&&(c="none"),c}function KN(o,t,a){const{style:c,vars:g,transformOrigin:S}=o;let b=!1,u=!1;for(const k in t){const A=t[k];if(Ep.has(k)){b=!0;continue}else if(AN(k)){g[k]=A;continue}else{const O=Yk(A,$N[k]);k.startsWith("origin")?(u=!0,S[k]=O):c[k]=O}}if(t.transform||(b||a?c.transform=UB(t,o.transform,a):c.transform&&(c.transform="none")),u){const{originX:k="50%",originY:A="50%",originZ:O=0}=S;c.transformOrigin=`${k} ${A} ${O}`}}const YN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oA(o,t,a){for(const c in t)!La(t[c])&&!aA(c,a)&&(o[c]=t[c])}function $B({transformTemplate:o},t){return de.useMemo(()=>{const a=YN();return KN(a,t,o),Object.assign({},a.vars,a.style)},[t])}function qB(o,t){const a=o.style||{},c={};return oA(c,a,o),Object.assign(c,$B(o,t)),c}function HB(o,t){const a={},c=qB(o,t);return o.drag&&o.dragListener!==!1&&(a.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=o.drag===!0?"none":`pan-${o.drag==="x"?"y":"x"}`),o.tabIndex===void 0&&(o.onTap||o.onTapStart||o.whileTap)&&(a.tabIndex=0),a.style=c,a}const GB={offset:"stroke-dashoffset",array:"stroke-dasharray"},WB={offset:"strokeDashoffset",array:"strokeDasharray"};function ZB(o,t,a=1,c=0,g=!0){o.pathLength=1;const S=g?GB:WB;o[S.offset]=$n.transform(-c);const b=$n.transform(t),u=$n.transform(a);o[S.array]=`${b} ${u}`}function lA(o,{attrX:t,attrY:a,attrScale:c,pathLength:g,pathSpacing:S=1,pathOffset:b=0,...u},k,A,O){if(KN(o,u,A),k){o.style.viewBox&&(o.attrs.viewBox=o.style.viewBox);return}o.attrs=o.style,o.style={};const{attrs:B,style:W}=o;B.transform&&(W.transform=B.transform,delete B.transform),(W.transform||B.transformOrigin)&&(W.transformOrigin=B.transformOrigin??"50% 50%",delete B.transformOrigin),W.transform&&(W.transformBox=(O==null?void 0:O.transformBox)??"fill-box",delete B.transformBox),t!==void 0&&(B.x=t),a!==void 0&&(B.y=a),c!==void 0&&(B.scale=c),g!==void 0&&ZB(B,g,S,b,!1)}const cA=()=>({...YN(),attrs:{}}),uA=o=>typeof o=="string"&&o.toLowerCase()==="svg";function KB(o,t,a,c){const g=de.useMemo(()=>{const S=cA();return lA(S,t,uA(c),o.transformTemplate,o.style),{...S.attrs,style:{...S.style}}},[t]);if(o.style){const S={};oA(S,o.style,o),g.style={...S,...g.style}}return g}const YB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function XN(o){return typeof o!="string"||o.includes("-")?!1:!!(YB.indexOf(o)>-1||/[A-Z]/u.test(o))}function XB(o,t,a,{latestValues:c},g,S=!1){const u=(XN(o)?KB:HB)(t,c,g,o),k=LB(t,typeof o=="string",S),A=o!==de.Fragment?{...k,...u,ref:a}:{},{children:O}=t,B=de.useMemo(()=>La(O)?O.get():O,[O]);return de.createElement(o,{...A,children:B})}function vP(o){const t=[{},{}];return o==null||o.values.forEach((a,c)=>{t[0][c]=a.get(),t[1][c]=a.getVelocity()}),t}function JN(o,t,a,c){if(typeof t=="function"){const[g,S]=vP(c);t=t(a!==void 0?a:o.custom,g,S)}if(typeof t=="string"&&(t=o.variants&&o.variants[t]),typeof t=="function"){const[g,S]=vP(c);t=t(a!==void 0?a:o.custom,g,S)}return t}function Yx(o){return La(o)?o.get():o}function JB({scrapeMotionValuesFromProps:o,createRenderState:t},a,c,g){return{latestValues:QB(a,c,g,o),renderState:t()}}function QB(o,t,a,c){const g={},S=c(o,{});for(const W in S)g[W]=Yx(S[W]);let{initial:b,animate:u}=o;const k=y0(o),A=sA(o);t&&A&&!k&&o.inherit!==!1&&(b===void 0&&(b=t.initial),u===void 0&&(u=t.animate));let O=a?a.initial===!1:!1;O=O||b===!1;const B=O?u:b;if(B&&typeof B!="boolean"&&!v0(B)){const W=Array.isArray(B)?B:[B];for(let ie=0;ie<W.length;ie++){const pe=JN(o,W[ie]);if(pe){const{transitionEnd:Ve,transition:Pe,...Se}=pe;for(const Ce in Se){let _e=Se[Ce];if(Array.isArray(_e)){const Ue=O?_e.length-1:0;_e=_e[Ue]}_e!==null&&(g[Ce]=_e)}for(const Ce in Ve)g[Ce]=Ve[Ce]}}}return g}const dA=o=>(t,a)=>{const c=de.useContext(g0),g=de.useContext(p0),S=()=>JB(o,t,c,g);return a?S():CN(S)};function QN(o,t,a){var S;const{style:c}=o,g={};for(const b in c)(La(c[b])||t.style&&La(t.style[b])||aA(b,o)||((S=a==null?void 0:a.getValue(b))==null?void 0:S.liveStyle)!==void 0)&&(g[b]=c[b]);return g}const eF=dA({scrapeMotionValuesFromProps:QN,createRenderState:YN});function hA(o,t,a){const c=QN(o,t,a);for(const g in o)if(La(o[g])||La(t[g])){const S=Sp.indexOf(g)!==-1?"attr"+g.charAt(0).toUpperCase()+g.substring(1):g;c[S]=o[g]}return c}const tF=dA({scrapeMotionValuesFromProps:hA,createRenderState:cA}),nF=Symbol.for("motionComponentSymbol");function lp(o){return o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}function rF(o,t,a){return de.useCallback(c=>{c&&o.onMount&&o.onMount(c),t&&(c?t.mount(c):t.unmount()),a&&(typeof a=="function"?a(c):lp(a)&&(a.current=c))},[t])}const eS=o=>o.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iF="framerAppearId",fA="data-"+eS(iF),mA=de.createContext({});function sF(o,t,a,c,g){var Ve,Pe;const{visualElement:S}=de.useContext(g0),b=de.useContext(rA),u=de.useContext(p0),k=de.useContext(GN).reducedMotion,A=de.useRef(null);c=c||b.renderer,!A.current&&c&&(A.current=c(o,{visualState:t,parent:S,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:k}));const O=A.current,B=de.useContext(mA);O&&!O.projection&&g&&(O.type==="html"||O.type==="svg")&&aF(A.current,a,g,B);const W=de.useRef(!1);de.useInsertionEffect(()=>{O&&W.current&&O.update(a,u)});const ie=a[fA],pe=de.useRef(!!ie&&!((Ve=window.MotionHandoffIsComplete)!=null&&Ve.call(window,ie))&&((Pe=window.MotionHasOptimisedAnimation)==null?void 0:Pe.call(window,ie)));return dk(()=>{O&&(W.current=!0,window.MotionIsMounted=!0,O.updateFeatures(),O.scheduleRenderMicrotask(),pe.current&&O.animationState&&O.animationState.animateChanges())}),de.useEffect(()=>{O&&(!pe.current&&O.animationState&&O.animationState.animateChanges(),pe.current&&(queueMicrotask(()=>{var Se;(Se=window.MotionHandoffMarkAsComplete)==null||Se.call(window,ie)}),pe.current=!1),O.enteringChildren=void 0)}),O}function aF(o,t,a,c){const{layoutId:g,layout:S,drag:b,dragConstraints:u,layoutScroll:k,layoutRoot:A,layoutCrossfade:O}=t;o.projection=new a(o.latestValues,t["data-framer-portal-id"]?void 0:pA(o.parent)),o.projection.setOptions({layoutId:g,layout:S,alwaysMeasureLayout:!!b||u&&lp(u),visualElement:o,animationType:typeof S=="string"?S:"both",initialPromotionConfig:c,crossfade:O,layoutScroll:k,layoutRoot:A})}function pA(o){if(o)return o.options.allowProjection!==!1?o.projection:pA(o.parent)}function sC(o,{forwardMotionProps:t=!1}={},a,c){a&&MB(a);const g=XN(o)?tF:eF;function S(u,k){let A;const O={...de.useContext(GN),...u,layoutId:oF(u)},{isStatic:B}=O,W=OB(u),ie=g(u,B);if(!B&&NN){lF(O,a);const pe=cF(O);A=pe.MeasureLayout,W.visualElement=sF(o,ie,O,c,pe.ProjectionNode)}return nd.jsxs(g0.Provider,{value:W,children:[A&&W.visualElement?nd.jsx(A,{visualElement:W.visualElement,...O}):null,XB(o,u,rF(ie,W.visualElement,k),ie,B,t)]})}S.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const b=de.forwardRef(S);return b[nF]=o,b}function oF({layoutId:o}){const t=de.useContext(wN).id;return t&&o!==void 0?t+"-"+o:o}function lF(o,t){const a=de.useContext(rA).strict;if(t&&a){const c="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";o.ignoreStrict?Cp(!1,c,"lazy-strict-mode"):id(!1,c,"lazy-strict-mode")}}function cF(o){const{drag:t,layout:a}=yp;if(!t&&!a)return{};const c={...t,...a};return{MeasureLayout:t!=null&&t.isEnabled(o)||a!=null&&a.isEnabled(o)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}function uF(o,t){if(typeof Proxy>"u")return sC;const a=new Map,c=(S,b)=>sC(S,b,o,t),g=(S,b)=>(PN(!1,"motion() is deprecated. Use motion.create() instead."),c(S,b));return new Proxy(g,{get:(S,b)=>b==="create"?c:(a.has(b)||a.set(b,sC(b,void 0,o,t)),a.get(b))})}function gA({top:o,left:t,right:a,bottom:c}){return{x:{min:t,max:a},y:{min:o,max:c}}}function dF({x:o,y:t}){return{top:t.min,right:o.max,bottom:t.max,left:o.min}}function hF(o,t){if(!t)return o;const a=t({x:o.left,y:o.top}),c=t({x:o.right,y:o.bottom});return{top:a.y,left:a.x,bottom:c.y,right:c.x}}function aC(o){return o===void 0||o===1}function JC({scale:o,scaleX:t,scaleY:a}){return!aC(o)||!aC(t)||!aC(a)}function Cf(o){return JC(o)||vA(o)||o.z||o.rotate||o.rotateX||o.rotateY||o.skewX||o.skewY}function vA(o){return yP(o.x)||yP(o.y)}function yP(o){return o&&o!=="0%"}function a0(o,t,a){const c=o-a,g=t*c;return a+g}function bP(o,t,a,c,g){return g!==void 0&&(o=a0(o,g,c)),a0(o,a,c)+t}function QC(o,t=0,a=1,c,g){o.min=bP(o.min,t,a,c,g),o.max=bP(o.max,t,a,c,g)}function yA(o,{x:t,y:a}){QC(o.x,t.translate,t.scale,t.originPoint),QC(o.y,a.translate,a.scale,a.originPoint)}const xP=.999999999999,_P=1.0000000000001;function fF(o,t,a,c=!1){const g=a.length;if(!g)return;t.x=t.y=1;let S,b;for(let u=0;u<g;u++){S=a[u],b=S.projectionDelta;const{visualElement:k}=S.options;k&&k.props.style&&k.props.style.display==="contents"||(c&&S.options.layoutScroll&&S.scroll&&S!==S.root&&up(o,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),b&&(t.x*=b.x.scale,t.y*=b.y.scale,yA(o,b)),c&&Cf(S.latestValues)&&up(o,S.latestValues))}t.x<_P&&t.x>xP&&(t.x=1),t.y<_P&&t.y>xP&&(t.y=1)}function cp(o,t){o.min=o.min+t,o.max=o.max+t}function wP(o,t,a,c,g=.5){const S=Xi(o.min,o.max,g);QC(o,t,a,S,c)}function up(o,t){wP(o.x,t.x,t.scaleX,t.scale,t.originX),wP(o.y,t.y,t.scaleY,t.scale,t.originY)}function bA(o,t){return gA(hF(o.getBoundingClientRect(),t))}function mF(o,t,a){const c=bA(o,a),{scroll:g}=t;return g&&(cp(c.x,g.offset.x),cp(c.y,g.offset.y)),c}const CP=()=>({translate:0,scale:1,origin:0,originPoint:0}),dp=()=>({x:CP(),y:CP()}),NP=()=>({min:0,max:0}),fs=()=>({x:NP(),y:NP()}),eN={current:null},xA={current:!1};function pF(){if(xA.current=!0,!!NN)if(window.matchMedia){const o=window.matchMedia("(prefers-reduced-motion)"),t=()=>eN.current=o.matches;o.addEventListener("change",t),t()}else eN.current=!1}const gF=new WeakMap;function vF(o,t,a){for(const c in t){const g=t[c],S=a[c];if(La(g))o.addValue(c,g);else if(La(S))o.addValue(c,vp(g,{owner:o}));else if(S!==g)if(o.hasValue(c)){const b=o.getValue(c);b.liveStyle===!0?b.jump(g):b.hasAnimated||b.set(g)}else{const b=o.getStaticValue(c);o.addValue(c,vp(b!==void 0?b:g,{owner:o}))}}for(const c in a)t[c]===void 0&&o.removeValue(c);return t}const SP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yF{scrapeMotionValuesFromProps(t,a,c){return{}}constructor({parent:t,props:a,presenceContext:c,reducedMotionConfig:g,blockInitialAnimation:S,visualState:b},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const W=vo.now();this.renderScheduledAt<W&&(this.renderScheduledAt=W,Fi.render(this.render,!1,!0))};const{latestValues:k,renderState:A}=b;this.latestValues=k,this.baseTarget={...k},this.initialValues=a.initial?{...k}:{},this.renderState=A,this.parent=t,this.props=a,this.presenceContext=c,this.depth=t?t.depth+1:0,this.reducedMotionConfig=g,this.options=u,this.blockInitialAnimation=!!S,this.isControllingVariants=y0(a),this.isVariantNode=sA(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:O,...B}=this.scrapeMotionValuesFromProps(a,{},this);for(const W in B){const ie=B[W];k[W]!==void 0&&La(ie)&&ie.set(k[W])}}mount(t){var a;this.current=t,gF.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((c,g)=>this.bindToMotionValue(g,c)),xA.current||pF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eN.current,PN(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected.","reduced-motion-disabled"),(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),vh(this.notifyUpdate),vh(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const c=this.features[a];c&&(c.unmount(),c.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,a){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const c=Ep.has(t);c&&this.onBindTransform&&this.onBindTransform();const g=a.on("change",b=>{this.latestValues[t]=b,this.props.onUpdate&&Fi.preRender(this.notifyUpdate),c&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,t,a)),this.valueSubscriptions.set(t,()=>{g(),S&&S(),a.owner&&a.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yp){const a=yp[t];if(!a)continue;const{isEnabled:c,Feature:g}=a;if(!this.features[t]&&g&&c(this.props)&&(this.features[t]=new g(this)),this.features[t]){const S=this.features[t];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,a){this.latestValues[t]=a}update(t,a){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let c=0;c<SP.length;c++){const g=SP[c];this.propEventSubscriptions[g]&&(this.propEventSubscriptions[g](),delete this.propEventSubscriptions[g]);const S="on"+g,b=t[S];b&&(this.propEventSubscriptions[g]=this.on(g,b))}this.prevMotionValues=vF(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(t),()=>a.variantChildren.delete(t)}addValue(t,a){const c=this.values.get(t);a!==c&&(c&&this.removeValue(t),this.bindToMotionValue(t,a),this.values.set(t,a),this.latestValues[t]=a.get())}removeValue(t){this.values.delete(t);const a=this.valueSubscriptions.get(t);a&&(a(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,a){if(this.props.values&&this.props.values[t])return this.props.values[t];let c=this.values.get(t);return c===void 0&&a!==void 0&&(c=vp(a===null?void 0:a,{owner:this}),this.addValue(t,c)),c}readValue(t,a){let c=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return c!=null&&(typeof c=="string"&&(hk(c)||mk(c))?c=parseFloat(c):!TB(c)&&yh.test(a)&&(c=Kk(t,a)),this.setBaseTarget(t,La(c)?c.get():c)),La(c)?c.get():c}setBaseTarget(t,a){this.baseTarget[t]=a}getBaseTarget(t){var S;const{initial:a}=this.props;let c;if(typeof a=="string"||typeof a=="object"){const b=JN(this.props,a,(S=this.presenceContext)==null?void 0:S.custom);b&&(c=b[t])}if(a&&c!==void 0)return c;const g=this.getBaseTargetFromProps(this.props,t);return g!==void 0&&!La(g)?g:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,a){return this.events[t]||(this.events[t]=new TN),this.events[t].add(a)}notify(t,...a){this.events[t]&&this.events[t].notify(...a)}scheduleRenderMicrotask(){qN.render(this.render)}}class _A extends yF{constructor(){super(...arguments),this.KeyframeResolver=gB}sortInstanceNodePosition(t,a){return t.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(t,a){return t.style?t.style[a]:void 0}removeValueFromRenderState(t,{vars:a,style:c}){delete a[t],delete c[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;La(t)&&(this.childSubscription=t.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function wA(o,{style:t,vars:a},c,g){const S=o.style;let b;for(b in t)S[b]=t[b];g==null||g.applyProjectionStyles(S,c);for(b in a)S.setProperty(b,a[b])}function bF(o){return window.getComputedStyle(o)}class xF extends _A{constructor(){super(...arguments),this.type="html",this.renderInstance=wA}readValueFromInstance(t,a){var c;if(Ep.has(a))return(c=this.projection)!=null&&c.isProjecting?HC(a):R4(t,a);{const g=bF(t),S=(AN(a)?g.getPropertyValue(a):g[a])||0;return typeof S=="string"?S.trim():S}}measureInstanceViewportBox(t,{transformPagePoint:a}){return bA(t,a)}build(t,a,c){KN(t,a,c.transformTemplate)}scrapeMotionValuesFromProps(t,a,c){return QN(t,a,c)}}const CA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _F(o,t,a,c){wA(o,t,void 0,c);for(const g in t.attrs)o.setAttribute(CA.has(g)?g:eS(g),t.attrs[g])}class wF extends _A{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fs}getBaseTargetFromProps(t,a){return t[a]}readValueFromInstance(t,a){if(Ep.has(a)){const c=Zk(a);return c&&c.default||0}return a=CA.has(a)?a:eS(a),t.getAttribute(a)}scrapeMotionValuesFromProps(t,a,c){return hA(t,a,c)}build(t,a,c){lA(t,a,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(t,a,c,g){_F(t,a,c,g)}mount(t){this.isSVGTag=uA(t.tagName),super.mount(t)}}const CF=(o,t)=>XN(o)?new wF(t):new xF(t,{allowProjection:o!==de.Fragment});function mp(o,t,a){const c=o.getProps();return JN(c,t,a!==void 0?a:c.custom,o)}const tN=o=>Array.isArray(o);function NF(o,t,a){o.hasValue(t)?o.getValue(t).set(a):o.addValue(t,vp(a))}function SF(o){return tN(o)?o[o.length-1]||0:o}function EF(o,t){const a=mp(o,t);let{transitionEnd:c={},transition:g={},...S}=a||{};S={...S,...c};for(const b in S){const u=SF(S[b]);NF(o,b,u)}}function DF(o){return!!(La(o)&&o.add)}function nN(o,t){const a=o.getValue("willChange");if(DF(a))return a.add(t);if(!a&&sd.WillChange){const c=new sd.WillChange("auto");o.addValue("willChange",c),c.add(t)}}function NA(o){return o.props[fA]}const TF=o=>o!==null;function PF(o,{repeat:t,repeatType:a="loop"},c){const g=o.filter(TF),S=t&&a!=="loop"&&t%2===1?0:g.length-1;return g[S]}const jF={type:"spring",stiffness:500,damping:25,restSpeed:10},kF=o=>({type:"spring",stiffness:550,damping:o===0?2*Math.sqrt(550):30,restSpeed:10}),AF={type:"keyframes",duration:.8},MF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RF=(o,{keyframes:t})=>t.length>2?AF:Ep.has(o)?o.startsWith("scale")?kF(t[1]):jF:MF;function IF({when:o,delay:t,delayChildren:a,staggerChildren:c,staggerDirection:g,repeat:S,repeatType:b,repeatDelay:u,from:k,elapsed:A,...O}){return!!Object.keys(O).length}const tS=(o,t,a,c={},g,S)=>b=>{const u=UN(c,o)||{},k=u.delay||c.delay||0;let{elapsed:A=0}=c;A=A-mc(k);const O={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-A,onUpdate:W=>{t.set(W),u.onUpdate&&u.onUpdate(W)},onComplete:()=>{b(),u.onComplete&&u.onComplete()},name:o,motionValue:t,element:S?void 0:g};IF(u)||Object.assign(O,RF(o,O)),O.duration&&(O.duration=mc(O.duration)),O.repeatDelay&&(O.repeatDelay=mc(O.repeatDelay)),O.from!==void 0&&(O.keyframes[0]=O.from);let B=!1;if((O.type===!1||O.duration===0&&!O.repeatDelay)&&(YC(O),O.delay===0&&(B=!0)),(sd.instantAnimations||sd.skipAnimations)&&(B=!0,YC(O),O.delay=0),O.allowFlatten=!u.type&&!u.ease,B&&!S&&t.get()!==void 0){const W=PF(O.keyframes,u);if(W!==void 0){Fi.update(()=>{O.onUpdate(W),O.onComplete()});return}}return u.isSync?new BN(O):new rB(O)};function LF({protectedKeys:o,needsAnimating:t},a){const c=o.hasOwnProperty(a)&&t[a]!==!0;return t[a]=!1,c}function SA(o,t,{delay:a=0,transitionOverride:c,type:g}={}){let{transition:S=o.getDefaultTransition(),transitionEnd:b,...u}=t;c&&(S=c);const k=[],A=g&&o.animationState&&o.animationState.getState()[g];for(const O in u){const B=o.getValue(O,o.latestValues[O]??null),W=u[O];if(W===void 0||A&&LF(A,O))continue;const ie={delay:a,...UN(S||{},O)},pe=B.get();if(pe!==void 0&&!B.isAnimating&&!Array.isArray(W)&&W===pe&&!ie.velocity)continue;let Ve=!1;if(window.MotionHandoffAnimation){const Se=NA(o);if(Se){const Ce=window.MotionHandoffAnimation(Se,O,Fi);Ce!==null&&(ie.startTime=Ce,Ve=!0)}}nN(o,O),B.start(tS(O,B,W,o.shouldReduceMotion&&Hk.has(O)?{type:!1}:ie,o,Ve));const Pe=B.animation;Pe&&k.push(Pe)}return b&&Promise.all(k).then(()=>{Fi.update(()=>{b&&EF(o,b)})}),k}function EA(o,t,a,c=0,g=1){const S=Array.from(o).sort((A,O)=>A.sortNodePosition(O)).indexOf(t),b=o.size,u=(b-1)*c;return typeof a=="function"?a(S,b):g===1?S*c:u-S*c}function rN(o,t,a={}){var k;const c=mp(o,t,a.type==="exit"?(k=o.presenceContext)==null?void 0:k.custom:void 0);let{transition:g=o.getDefaultTransition()||{}}=c||{};a.transitionOverride&&(g=a.transitionOverride);const S=c?()=>Promise.all(SA(o,c,a)):()=>Promise.resolve(),b=o.variantChildren&&o.variantChildren.size?(A=0)=>{const{delayChildren:O=0,staggerChildren:B,staggerDirection:W}=g;return VF(o,t,A,O,B,W,a)}:()=>Promise.resolve(),{when:u}=g;if(u){const[A,O]=u==="beforeChildren"?[S,b]:[b,S];return A().then(()=>O())}else return Promise.all([S(),b(a.delay)])}function VF(o,t,a=0,c=0,g=0,S=1,b){const u=[];for(const k of o.variantChildren)k.notify("AnimationStart",t),u.push(rN(k,t,{...b,delay:a+(typeof c=="function"?0:c)+EA(o.variantChildren,k,c,g,S)}).then(()=>k.notify("AnimationComplete",t)));return Promise.all(u)}function OF(o,t,a={}){o.notify("AnimationStart",t);let c;if(Array.isArray(t)){const g=t.map(S=>rN(o,S,a));c=Promise.all(g)}else if(typeof t=="string")c=rN(o,t,a);else{const g=typeof t=="function"?mp(o,t,a.custom):t;c=Promise.all(SA(o,g,a))}return c.then(()=>{o.notify("AnimationComplete",t)})}function DA(o,t){if(!Array.isArray(t))return!1;const a=t.length;if(a!==o.length)return!1;for(let c=0;c<a;c++)if(t[c]!==o[c])return!1;return!0}const zF=ZN.length;function TA(o){if(!o)return;if(!o.isControllingVariants){const a=o.parent?TA(o.parent)||{}:{};return o.props.initial!==void 0&&(a.initial=o.props.initial),a}const t={};for(let a=0;a<zF;a++){const c=ZN[a],g=o.props[c];(Zv(g)||g===!1)&&(t[c]=g)}return t}const BF=[...WN].reverse(),FF=WN.length;function UF(o){return t=>Promise.all(t.map(({animation:a,options:c})=>OF(o,a,c)))}function $F(o){let t=UF(o),a=EP(),c=!0;const g=k=>(A,O)=>{var W;const B=mp(o,O,k==="exit"?(W=o.presenceContext)==null?void 0:W.custom:void 0);if(B){const{transition:ie,transitionEnd:pe,...Ve}=B;A={...A,...Ve,...pe}}return A};function S(k){t=k(o)}function b(k){const{props:A}=o,O=TA(o.parent)||{},B=[],W=new Set;let ie={},pe=1/0;for(let Pe=0;Pe<FF;Pe++){const Se=BF[Pe],Ce=a[Se],_e=A[Se]!==void 0?A[Se]:O[Se],Ue=Zv(_e),Oe=Se===k?Ce.isActive:null;Oe===!1&&(pe=Pe);let Je=_e===O[Se]&&_e!==A[Se]&&Ue;if(Je&&c&&o.manuallyAnimateOnMount&&(Je=!1),Ce.protectedKeys={...ie},!Ce.isActive&&Oe===null||!_e&&!Ce.prevProp||v0(_e)||typeof _e=="boolean")continue;const tt=qF(Ce.prevProp,_e);let ut=tt||Se===k&&Ce.isActive&&!Je&&Ue||Pe>pe&&Ue,Tt=!1;const pt=Array.isArray(_e)?_e:[_e];let Yt=pt.reduce(g(Se),{});Oe===!1&&(Yt={});const{prevResolvedValues:ft={}}=Ce,bt={...ft,...Yt},It=at=>{ut=!0,W.has(at)&&(Tt=!0,W.delete(at)),Ce.needsAnimating[at]=!0;const Zt=o.getValue(at);Zt&&(Zt.liveStyle=!1)};for(const at in bt){const Zt=Yt[at],bn=ft[at];if(ie.hasOwnProperty(at))continue;let ln=!1;tN(Zt)&&tN(bn)?ln=!DA(Zt,bn):ln=Zt!==bn,ln?Zt!=null?It(at):W.add(at):Zt!==void 0&&W.has(at)?It(at):Ce.protectedKeys[at]=!0}Ce.prevProp=_e,Ce.prevResolvedValues=Yt,Ce.isActive&&(ie={...ie,...Yt}),c&&o.blockInitialAnimation&&(ut=!1);const Lt=Je&&tt;ut&&(!Lt||Tt)&&B.push(...pt.map(at=>{const Zt={type:Se};if(typeof at=="string"&&c&&!Lt&&o.manuallyAnimateOnMount&&o.parent){const{parent:bn}=o,ln=mp(bn,at);if(bn.enteringChildren&&ln){const{delayChildren:Bn}=ln.transition||{};Zt.delay=EA(bn.enteringChildren,o,Bn)}}return{animation:at,options:Zt}}))}if(W.size){const Pe={};if(typeof A.initial!="boolean"){const Se=mp(o,Array.isArray(A.initial)?A.initial[0]:A.initial);Se&&Se.transition&&(Pe.transition=Se.transition)}W.forEach(Se=>{const Ce=o.getBaseTarget(Se),_e=o.getValue(Se);_e&&(_e.liveStyle=!0),Pe[Se]=Ce??null}),B.push({animation:Pe})}let Ve=!!B.length;return c&&(A.initial===!1||A.initial===A.animate)&&!o.manuallyAnimateOnMount&&(Ve=!1),c=!1,Ve?t(B):Promise.resolve()}function u(k,A){var B;if(a[k].isActive===A)return Promise.resolve();(B=o.variantChildren)==null||B.forEach(W=>{var ie;return(ie=W.animationState)==null?void 0:ie.setActive(k,A)}),a[k].isActive=A;const O=b(k);for(const W in a)a[W].protectedKeys={};return O}return{animateChanges:b,setActive:u,setAnimateFunction:S,getState:()=>a,reset:()=>{a=EP(),c=!0}}}function qF(o,t){return typeof t=="string"?t!==o:Array.isArray(t)?!DA(t,o):!1}function _f(o=!1){return{isActive:o,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EP(){return{animate:_f(!0),whileInView:_f(),whileHover:_f(),whileTap:_f(),whileDrag:_f(),whileFocus:_f(),exit:_f()}}class xh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class HF extends xh{constructor(t){super(t),t.animationState||(t.animationState=$F(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();v0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:a}=this.node.prevProps||{};t!==a&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let GF=0;class WF extends xh{constructor(){super(...arguments),this.id=GF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:a}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const g=this.node.animationState.setActive("exit",!t);a&&!t&&g.then(()=>{a(this.id)})}mount(){const{register:t,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ZF={animation:{Feature:HF},exit:{Feature:WF}};function Yv(o,t,a,c={passive:!0}){return o.addEventListener(t,a,c),()=>o.removeEventListener(t,a)}function ly(o){return{point:{x:o.pageX,y:o.pageY}}}const KF=o=>t=>HN(t)&&o(t,ly(t));function Iv(o,t,a,c){return Yv(o,t,KF(a),c)}const PA=1e-4,YF=1-PA,XF=1+PA,jA=.01,JF=0-jA,QF=0+jA;function Qa(o){return o.max-o.min}function e6(o,t,a){return Math.abs(o-t)<=a}function DP(o,t,a,c=.5){o.origin=c,o.originPoint=Xi(t.min,t.max,o.origin),o.scale=Qa(a)/Qa(t),o.translate=Xi(a.min,a.max,o.origin)-o.originPoint,(o.scale>=YF&&o.scale<=XF||isNaN(o.scale))&&(o.scale=1),(o.translate>=JF&&o.translate<=QF||isNaN(o.translate))&&(o.translate=0)}function Lv(o,t,a,c){DP(o.x,t.x,a.x,c?c.originX:void 0),DP(o.y,t.y,a.y,c?c.originY:void 0)}function TP(o,t,a){o.min=a.min+t.min,o.max=o.min+Qa(t)}function t6(o,t,a){TP(o.x,t.x,a.x),TP(o.y,t.y,a.y)}function PP(o,t,a){o.min=t.min-a.min,o.max=o.min+Qa(t)}function Vv(o,t,a){PP(o.x,t.x,a.x),PP(o.y,t.y,a.y)}function yl(o){return[o("x"),o("y")]}const kA=({current:o})=>o?o.ownerDocument.defaultView:null,jP=(o,t)=>Math.abs(o-t);function n6(o,t){const a=jP(o.x,t.x),c=jP(o.y,t.y);return Math.sqrt(a**2+c**2)}class AA{constructor(t,a,{transformPagePoint:c,contextWindow:g=window,dragSnapToOrigin:S=!1,distanceThreshold:b=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=lC(this.lastMoveEventInfo,this.history),ie=this.startEvent!==null,pe=n6(W.offset,{x:0,y:0})>=this.distanceThreshold;if(!ie&&!pe)return;const{point:Ve}=W,{timestamp:Pe}=ma;this.history.push({...Ve,timestamp:Pe});const{onStart:Se,onMove:Ce}=this.handlers;ie||(Se&&Se(this.lastMoveEvent,W),this.startEvent=this.lastMoveEvent),Ce&&Ce(this.lastMoveEvent,W)},this.handlePointerMove=(W,ie)=>{this.lastMoveEvent=W,this.lastMoveEventInfo=oC(ie,this.transformPagePoint),Fi.update(this.updatePoint,!0)},this.handlePointerUp=(W,ie)=>{this.end();const{onEnd:pe,onSessionEnd:Ve,resumeAnimation:Pe}=this.handlers;if(this.dragSnapToOrigin&&Pe&&Pe(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Se=lC(W.type==="pointercancel"?this.lastMoveEventInfo:oC(ie,this.transformPagePoint),this.history);this.startEvent&&pe&&pe(W,Se),Ve&&Ve(W,Se)},!HN(t))return;this.dragSnapToOrigin=S,this.handlers=a,this.transformPagePoint=c,this.distanceThreshold=b,this.contextWindow=g||window;const u=ly(t),k=oC(u,this.transformPagePoint),{point:A}=k,{timestamp:O}=ma;this.history=[{...A,timestamp:O}];const{onSessionStart:B}=a;B&&B(t,lC(k,this.history)),this.removeListeners=sy(Iv(this.contextWindow,"pointermove",this.handlePointerMove),Iv(this.contextWindow,"pointerup",this.handlePointerUp),Iv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vh(this.updatePoint)}}function oC(o,t){return t?{point:t(o.point)}:o}function kP(o,t){return{x:o.x-t.x,y:o.y-t.y}}function lC({point:o},t){return{point:o,delta:kP(o,MA(t)),offset:kP(o,r6(t)),velocity:i6(t,.1)}}function r6(o){return o[0]}function MA(o){return o[o.length-1]}function i6(o,t){if(o.length<2)return{x:0,y:0};let a=o.length-1,c=null;const g=MA(o);for(;a>=0&&(c=o[a],!(g.timestamp-c.timestamp>mc(t)));)a--;if(!c)return{x:0,y:0};const S=tu(g.timestamp-c.timestamp);if(S===0)return{x:0,y:0};const b={x:(g.x-c.x)/S,y:(g.y-c.y)/S};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function s6(o,{min:t,max:a},c){return t!==void 0&&o<t?o=c?Xi(t,o,c.min):Math.max(o,t):a!==void 0&&o>a&&(o=c?Xi(a,o,c.max):Math.min(o,a)),o}function AP(o,t,a){return{min:t!==void 0?o.min+t:void 0,max:a!==void 0?o.max+a-(o.max-o.min):void 0}}function a6(o,{top:t,left:a,bottom:c,right:g}){return{x:AP(o.x,a,g),y:AP(o.y,t,c)}}function MP(o,t){let a=t.min-o.min,c=t.max-o.max;return t.max-t.min<o.max-o.min&&([a,c]=[c,a]),{min:a,max:c}}function o6(o,t){return{x:MP(o.x,t.x),y:MP(o.y,t.y)}}function l6(o,t){let a=.5;const c=Qa(o),g=Qa(t);return g>c?a=Hv(t.min,t.max-c,o.min):c>g&&(a=Hv(o.min,o.max-g,t.min)),rd(0,1,a)}function c6(o,t){const a={};return t.min!==void 0&&(a.min=t.min-o.min),t.max!==void 0&&(a.max=t.max-o.min),a}const iN=.35;function u6(o=iN){return o===!1?o=0:o===!0&&(o=iN),{x:RP(o,"left","right"),y:RP(o,"top","bottom")}}function RP(o,t,a){return{min:IP(o,t),max:IP(o,a)}}function IP(o,t){return typeof o=="number"?o:o[t]||0}const d6=new WeakMap;class h6{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:a=!1,distanceThreshold:c}={}){const{presenceContext:g}=this.visualElement;if(g&&g.isPresent===!1)return;const S=B=>{const{dragSnapToOrigin:W}=this.getProps();W?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(ly(B).point)},b=(B,W)=>{const{drag:ie,dragPropagation:pe,onDragStart:Ve}=this.getProps();if(ie&&!pe&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xB(ie),!this.openDragLock))return;this.latestPointerEvent=B,this.latestPanInfo=W,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yl(Se=>{let Ce=this.getAxisMotionValue(Se).get()||0;if(nu.test(Ce)){const{projection:_e}=this.visualElement;if(_e&&_e.layout){const Ue=_e.layout.layoutBox[Se];Ue&&(Ce=Qa(Ue)*(parseFloat(Ce)/100))}}this.originPoint[Se]=Ce}),Ve&&Fi.postRender(()=>Ve(B,W)),nN(this.visualElement,"transform");const{animationState:Pe}=this.visualElement;Pe&&Pe.setActive("whileDrag",!0)},u=(B,W)=>{this.latestPointerEvent=B,this.latestPanInfo=W;const{dragPropagation:ie,dragDirectionLock:pe,onDirectionLock:Ve,onDrag:Pe}=this.getProps();if(!ie&&!this.openDragLock)return;const{offset:Se}=W;if(pe&&this.currentDirection===null){this.currentDirection=f6(Se),this.currentDirection!==null&&Ve&&Ve(this.currentDirection);return}this.updateAxis("x",W.point,Se),this.updateAxis("y",W.point,Se),this.visualElement.render(),Pe&&Pe(B,W)},k=(B,W)=>{this.latestPointerEvent=B,this.latestPanInfo=W,this.stop(B,W),this.latestPointerEvent=null,this.latestPanInfo=null},A=()=>yl(B=>{var W;return this.getAnimationState(B)==="paused"&&((W=this.getAxisMotionValue(B).animation)==null?void 0:W.play())}),{dragSnapToOrigin:O}=this.getProps();this.panSession=new AA(t,{onSessionStart:S,onStart:b,onMove:u,onSessionEnd:k,resumeAnimation:A},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:O,distanceThreshold:c,contextWindow:kA(this.visualElement)})}stop(t,a){const c=t||this.latestPointerEvent,g=a||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!g||!c)return;const{velocity:b}=g;this.startAnimation(b);const{onDragEnd:u}=this.getProps();u&&Fi.postRender(()=>u(c,g))}cancel(){this.isDragging=!1;const{projection:t,animationState:a}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(t,a,c){const{drag:g}=this.getProps();if(!c||!Vx(t,g,this.currentDirection))return;const S=this.getAxisMotionValue(t);let b=this.originPoint[t]+c[t];this.constraints&&this.constraints[t]&&(b=s6(b,this.constraints[t],this.elastic[t])),S.set(b)}resolveConstraints(){var S;const{dragConstraints:t,dragElastic:a}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(S=this.visualElement.projection)==null?void 0:S.layout,g=this.constraints;t&&lp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&c?this.constraints=a6(c.layoutBox,t):this.constraints=!1,this.elastic=u6(a),g!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&yl(b=>{this.constraints!==!1&&this.getAxisMotionValue(b)&&(this.constraints[b]=c6(c.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:a}=this.getProps();if(!t||!lp(t))return!1;const c=t.current;id(c!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:g}=this.visualElement;if(!g||!g.layout)return!1;const S=mF(c,g.root,this.visualElement.getTransformPagePoint());let b=o6(g.layout.layoutBox,S);if(a){const u=a(dF(b));this.hasMutatedConstraints=!!u,u&&(b=gA(u))}return b}startAnimation(t){const{drag:a,dragMomentum:c,dragElastic:g,dragTransition:S,dragSnapToOrigin:b,onDragTransitionEnd:u}=this.getProps(),k=this.constraints||{},A=yl(O=>{if(!Vx(O,a,this.currentDirection))return;let B=k&&k[O]||{};b&&(B={min:0,max:0});const W=g?200:1e6,ie=g?40:1e7,pe={type:"inertia",velocity:c?t[O]:0,bounceStiffness:W,bounceDamping:ie,timeConstant:750,restDelta:1,restSpeed:10,...S,...B};return this.startAxisValueAnimation(O,pe)});return Promise.all(A).then(u)}startAxisValueAnimation(t,a){const c=this.getAxisMotionValue(t);return nN(this.visualElement,t),c.start(tS(t,c,0,a,this.visualElement,!1))}stopAnimation(){yl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){yl(t=>{var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.pause()})}getAnimationState(t){var a;return(a=this.getAxisMotionValue(t).animation)==null?void 0:a.state}getAxisMotionValue(t){const a=`_drag${t.toUpperCase()}`,c=this.visualElement.getProps(),g=c[a];return g||this.visualElement.getValue(t,(c.initial?c.initial[t]:void 0)||0)}snapToCursor(t){yl(a=>{const{drag:c}=this.getProps();if(!Vx(a,c,this.currentDirection))return;const{projection:g}=this.visualElement,S=this.getAxisMotionValue(a);if(g&&g.layout){const{min:b,max:u}=g.layout.layoutBox[a];S.set(t[a]-Xi(b,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:a}=this.getProps(),{projection:c}=this.visualElement;if(!lp(a)||!c||!this.constraints)return;this.stopAnimation();const g={x:0,y:0};yl(b=>{const u=this.getAxisMotionValue(b);if(u&&this.constraints!==!1){const k=u.get();g[b]=l6({min:k,max:k},this.constraints[b])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),yl(b=>{if(!Vx(b,t,null))return;const u=this.getAxisMotionValue(b),{min:k,max:A}=this.constraints[b];u.set(Xi(k,A,g[b]))})}addListeners(){if(!this.visualElement.current)return;d6.set(this.visualElement,this);const t=this.visualElement.current,a=Iv(t,"pointerdown",k=>{const{drag:A,dragListener:O=!0}=this.getProps();A&&O&&this.start(k)}),c=()=>{const{dragConstraints:k}=this.getProps();lp(k)&&k.current&&(this.constraints=this.resolveRefConstraints())},{projection:g}=this.visualElement,S=g.addEventListener("measure",c);g&&!g.layout&&(g.root&&g.root.updateScroll(),g.updateLayout()),Fi.read(c);const b=Yv(window,"resize",()=>this.scalePositionWithinConstraints()),u=g.addEventListener("didUpdate",({delta:k,hasLayoutChanged:A})=>{this.isDragging&&A&&(yl(O=>{const B=this.getAxisMotionValue(O);B&&(this.originPoint[O]+=k[O].translate,B.set(B.get()+k[O].translate))}),this.visualElement.render())});return()=>{b(),a(),S(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:c=!1,dragPropagation:g=!1,dragConstraints:S=!1,dragElastic:b=iN,dragMomentum:u=!0}=t;return{...t,drag:a,dragDirectionLock:c,dragPropagation:g,dragConstraints:S,dragElastic:b,dragMomentum:u}}}function Vx(o,t,a){return(t===!0||t===o)&&(a===null||a===o)}function f6(o,t=10){let a=null;return Math.abs(o.y)>t?a="y":Math.abs(o.x)>t&&(a="x"),a}class m6 extends xh{constructor(t){super(t),this.removeGroupControls=xl,this.removeListeners=xl,this.controls=new h6(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xl}unmount(){this.removeGroupControls(),this.removeListeners()}}const LP=o=>(t,a)=>{o&&Fi.postRender(()=>o(t,a))};class p6 extends xh{constructor(){super(...arguments),this.removePointerDownListener=xl}onPointerDown(t){this.session=new AA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:a,onPan:c,onPanEnd:g}=this.node.getProps();return{onSessionStart:LP(t),onStart:LP(a),onMove:c,onEnd:(S,b)=>{delete this.session,g&&Fi.postRender(()=>g(S,b))}}}mount(){this.removePointerDownListener=Iv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VP(o,t){return t.max===t.min?0:o/(t.max-t.min)*100}const Dv={correct:(o,t)=>{if(!t.target)return o;if(typeof o=="string")if($n.test(o))o=parseFloat(o);else return o;const a=VP(o,t.target.x),c=VP(o,t.target.y);return`${a}% ${c}%`}},g6={correct:(o,{treeScale:t,projectionDelta:a})=>{const c=o,g=yh.parse(o);if(g.length>5)return c;const S=yh.createTransformer(o),b=typeof g[0]!="number"?1:0,u=a.x.scale*t.x,k=a.y.scale*t.y;g[0+b]/=u,g[1+b]/=k;const A=Xi(u,k,.5);return typeof g[2+b]=="number"&&(g[2+b]/=A),typeof g[3+b]=="number"&&(g[3+b]/=A),S(g)}};let cC=!1;class v6 extends de.Component{componentDidMount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:c,layoutId:g}=this.props,{projection:S}=t;zB(y6),S&&(a.group&&a.group.add(S),c&&c.register&&g&&c.register(S),cC&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,onExitComplete:()=>this.safeToRemove()})),Xx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:a,visualElement:c,drag:g,isPresent:S}=this.props,{projection:b}=c;return b&&(b.isPresent=S,cC=!0,g||t.layoutDependency!==a||a===void 0||t.isPresent!==S?b.willUpdate():this.safeToRemove(),t.isPresent!==S&&(S?b.promote():b.relegate()||Fi.postRender(()=>{const u=b.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qN.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:a,switchLayoutGroup:c}=this.props,{projection:g}=t;cC=!0,g&&(g.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(g),c&&c.deregister&&c.deregister(g))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function RA(o){const[t,a]=nA(),c=de.useContext(wN);return nd.jsx(v6,{...o,layoutGroup:c,switchLayoutGroup:de.useContext(mA),isPresent:t,safeToRemove:a})}const y6={borderRadius:{...Dv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dv,borderTopRightRadius:Dv,borderBottomLeftRadius:Dv,borderBottomRightRadius:Dv,boxShadow:g6};function b6(o,t,a){const c=La(o)?o:vp(o);return c.start(tS("",c,t,a)),c.animation}const x6=(o,t)=>o.depth-t.depth;class _6{constructor(){this.children=[],this.isDirty=!1}add(t){SN(this.children,t),this.isDirty=!0}remove(t){EN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(x6),this.isDirty=!1,this.children.forEach(t)}}function w6(o,t){const a=vo.now(),c=({timestamp:g})=>{const S=g-a;S>=t&&(vh(c),o(S-t))};return Fi.setup(c,!0),()=>vh(c)}const IA=["TopLeft","TopRight","BottomLeft","BottomRight"],C6=IA.length,OP=o=>typeof o=="string"?parseFloat(o):o,zP=o=>typeof o=="number"||$n.test(o);function N6(o,t,a,c,g,S){g?(o.opacity=Xi(0,a.opacity??1,S6(c)),o.opacityExit=Xi(t.opacity??1,0,E6(c))):S&&(o.opacity=Xi(t.opacity??1,a.opacity??1,c));for(let b=0;b<C6;b++){const u=`border${IA[b]}Radius`;let k=BP(t,u),A=BP(a,u);if(k===void 0&&A===void 0)continue;k||(k=0),A||(A=0),k===0||A===0||zP(k)===zP(A)?(o[u]=Math.max(Xi(OP(k),OP(A),c),0),(nu.test(A)||nu.test(k))&&(o[u]+="%")):o[u]=A}(t.rotate||a.rotate)&&(o.rotate=Xi(t.rotate||0,a.rotate||0,c))}function BP(o,t){return o[t]!==void 0?o[t]:o.borderRadius}const S6=LA(0,.5,wk),E6=LA(.5,.95,xl);function LA(o,t,a){return c=>c<o?0:c>t?1:a(Hv(o,t,c))}function FP(o,t){o.min=t.min,o.max=t.max}function gl(o,t){FP(o.x,t.x),FP(o.y,t.y)}function UP(o,t){o.translate=t.translate,o.scale=t.scale,o.originPoint=t.originPoint,o.origin=t.origin}function $P(o,t,a,c,g){return o-=t,o=a0(o,1/a,c),g!==void 0&&(o=a0(o,1/g,c)),o}function D6(o,t=0,a=1,c=.5,g,S=o,b=o){if(nu.test(t)&&(t=parseFloat(t),t=Xi(b.min,b.max,t/100)-b.min),typeof t!="number")return;let u=Xi(S.min,S.max,c);o===S&&(u-=t),o.min=$P(o.min,t,a,u,g),o.max=$P(o.max,t,a,u,g)}function qP(o,t,[a,c,g],S,b){D6(o,t[a],t[c],t[g],t.scale,S,b)}const T6=["x","scaleX","originX"],P6=["y","scaleY","originY"];function HP(o,t,a,c){qP(o.x,t,T6,a?a.x:void 0,c?c.x:void 0),qP(o.y,t,P6,a?a.y:void 0,c?c.y:void 0)}function GP(o){return o.translate===0&&o.scale===1}function VA(o){return GP(o.x)&&GP(o.y)}function WP(o,t){return o.min===t.min&&o.max===t.max}function j6(o,t){return WP(o.x,t.x)&&WP(o.y,t.y)}function ZP(o,t){return Math.round(o.min)===Math.round(t.min)&&Math.round(o.max)===Math.round(t.max)}function OA(o,t){return ZP(o.x,t.x)&&ZP(o.y,t.y)}function KP(o){return Qa(o.x)/Qa(o.y)}function YP(o,t){return o.translate===t.translate&&o.scale===t.scale&&o.originPoint===t.originPoint}class k6{constructor(){this.members=[]}add(t){SN(this.members,t),t.scheduleRender()}remove(t){if(EN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(t){const a=this.members.findIndex(g=>t===g);if(a===0)return!1;let c;for(let g=a;g>=0;g--){const S=this.members[g];if(S.isPresent!==!1){c=S;break}}return c?(this.promote(c),!0):!1}promote(t,a){const c=this.lead;if(t!==c&&(this.prevLead=c,this.lead=t,t.show(),c)){c.instance&&c.scheduleRender(),t.scheduleRender(),t.resumeFrom=c,a&&(t.resumeFrom.preserveOpacity=!0),c.snapshot&&(t.snapshot=c.snapshot,t.snapshot.latestValues=c.animationValues||c.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:g}=t.options;g===!1&&c.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:a,resumingFrom:c}=t;a.onExitComplete&&a.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function A6(o,t,a){let c="";const g=o.x.translate/t.x,S=o.y.translate/t.y,b=(a==null?void 0:a.z)||0;if((g||S||b)&&(c=`translate3d(${g}px, ${S}px, ${b}px) `),(t.x!==1||t.y!==1)&&(c+=`scale(${1/t.x}, ${1/t.y}) `),a){const{transformPerspective:A,rotate:O,rotateX:B,rotateY:W,skewX:ie,skewY:pe}=a;A&&(c=`perspective(${A}px) ${c}`),O&&(c+=`rotate(${O}deg) `),B&&(c+=`rotateX(${B}deg) `),W&&(c+=`rotateY(${W}deg) `),ie&&(c+=`skewX(${ie}deg) `),pe&&(c+=`skewY(${pe}deg) `)}const u=o.x.scale*t.x,k=o.y.scale*t.y;return(u!==1||k!==1)&&(c+=`scale(${u}, ${k})`),c||"none"}const uC=["","X","Y","Z"],M6=1e3;let R6=0;function dC(o,t,a,c){const{latestValues:g}=t;g[o]&&(a[o]=g[o],t.setStaticValue(o,0),c&&(c[o]=0))}function zA(o){if(o.hasCheckedOptimisedAppear=!0,o.root===o)return;const{visualElement:t}=o.options;if(!t)return;const a=NA(t);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:g,layoutId:S}=o.options;window.MotionCancelOptimisedAnimation(a,"transform",Fi,!(g||S))}const{parent:c}=o;c&&!c.hasCheckedOptimisedAppear&&zA(c)}function BA({attachResizeListener:o,defaultParent:t,measureScroll:a,checkIsScrollRoot:c,resetTransform:g}){return class{constructor(b={},u=t==null?void 0:t()){this.id=R6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(V6),this.nodes.forEach(F6),this.nodes.forEach(U6),this.nodes.forEach(O6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let k=0;k<this.path.length;k++)this.path[k].shouldResetTransform=!0;this.root===this&&(this.nodes=new _6)}addEventListener(b,u){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new TN),this.eventHandlers.get(b).add(u)}notifyListeners(b,...u){const k=this.eventHandlers.get(b);k&&k.notify(...u)}hasListeners(b){return this.eventHandlers.has(b)}mount(b){if(this.instance)return;this.isSVG=tA(b)&&!EB(b),this.instance=b;const{layoutId:u,layout:k,visualElement:A}=this.options;if(A&&!A.current&&A.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(k||u)&&(this.isLayoutDirty=!0),o){let O,B=0;const W=()=>this.root.updateBlockedByResize=!1;Fi.read(()=>{B=window.innerWidth}),o(b,()=>{const ie=window.innerWidth;ie!==B&&(B=ie,this.root.updateBlockedByResize=!0,O&&O(),O=w6(W,250),Xx.hasAnimatedSinceResize&&(Xx.hasAnimatedSinceResize=!1,this.nodes.forEach(QP)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&A&&(u||k)&&this.addEventListener("didUpdate",({delta:O,hasLayoutChanged:B,hasRelativeLayoutChanged:W,layout:ie})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const pe=this.options.transition||A.getDefaultTransition()||W6,{onLayoutAnimationStart:Ve,onLayoutAnimationComplete:Pe}=A.getProps(),Se=!this.targetLayout||!OA(this.targetLayout,ie),Ce=!B&&W;if(this.options.layoutRoot||this.resumeFrom||Ce||B&&(Se||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _e={...UN(pe,"layout"),onPlay:Ve,onComplete:Pe};(A.shouldReduceMotion||this.options.layoutRoot)&&(_e.delay=0,_e.type=!1),this.startAnimation(_e),this.setAnimationOrigin(O,Ce)}else B||QP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=ie})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($6),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let O=0;O<this.path.length;O++){const B=this.path[O];B.shouldResetTransform=!0,B.updateScroll("snapshot"),B.options.layoutRoot&&B.willUpdate(!1)}const{layoutId:u,layout:k}=this.options;if(u===void 0&&!k)return;const A=this.getTransformTemplate();this.prevTransformTemplateValue=A?A(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(B6),this.nodes.forEach(I6),this.nodes.forEach(L6)):this.nodes.forEach(JP),this.clearAllSnapshots();const u=vo.now();ma.delta=rd(0,1e3/60,u-ma.timestamp),ma.timestamp=u,ma.isProcessing=!0,Q1.update.process(ma),Q1.preRender.process(ma),Q1.render.process(ma),ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(z6),this.sharedNodes.forEach(q6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qa(this.snapshot.measuredBox.x)&&!Qa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let k=0;k<this.path.length;k++)this.path[k].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(u=!1),u&&this.instance){const k=c(this.instance);this.scroll={animationId:this.root.animationId,phase:b,isRoot:k,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:k}}}resetTransform(){if(!g)return;const b=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!VA(this.projectionDelta),k=this.getTransformTemplate(),A=k?k(this.latestValues,""):void 0,O=A!==this.prevTransformTemplateValue;b&&this.instance&&(u||Cf(this.latestValues)||O)&&(g(this.instance,A),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const u=this.measurePageBox();let k=this.removeElementScroll(u);return b&&(k=this.removeTransform(k)),Z6(k),{animationId:this.root.animationId,measuredBox:u,layoutBox:k,latestValues:{},source:this.id}}measurePageBox(){var A;const{visualElement:b}=this.options;if(!b)return fs();const u=b.measureViewportBox();if(!(((A=this.scroll)==null?void 0:A.wasRoot)||this.path.some(K6))){const{scroll:O}=this.root;O&&(cp(u.x,O.offset.x),cp(u.y,O.offset.y))}return u}removeElementScroll(b){var k;const u=fs();if(gl(u,b),(k=this.scroll)!=null&&k.wasRoot)return u;for(let A=0;A<this.path.length;A++){const O=this.path[A],{scroll:B,options:W}=O;O!==this.root&&B&&W.layoutScroll&&(B.wasRoot&&gl(u,b),cp(u.x,B.offset.x),cp(u.y,B.offset.y))}return u}applyTransform(b,u=!1){const k=fs();gl(k,b);for(let A=0;A<this.path.length;A++){const O=this.path[A];!u&&O.options.layoutScroll&&O.scroll&&O!==O.root&&up(k,{x:-O.scroll.offset.x,y:-O.scroll.offset.y}),Cf(O.latestValues)&&up(k,O.latestValues)}return Cf(this.latestValues)&&up(k,this.latestValues),k}removeTransform(b){const u=fs();gl(u,b);for(let k=0;k<this.path.length;k++){const A=this.path[k];if(!A.instance||!Cf(A.latestValues))continue;JC(A.latestValues)&&A.updateSnapshot();const O=fs(),B=A.measurePageBox();gl(O,B),HP(u,A.latestValues,A.snapshot?A.snapshot.layoutBox:void 0,O)}return Cf(this.latestValues)&&HP(u,this.latestValues),u}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var W;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const k=!!this.resumingFrom||this!==u;if(!(b||k&&this.isSharedProjectionDirty||this.isProjectionDirty||(W=this.parent)!=null&&W.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:O,layoutId:B}=this.options;if(!(!this.layout||!(O||B))){if(this.resolvedRelativeTargetAt=ma.timestamp,!this.targetDelta&&!this.relativeTarget){const ie=this.getClosestProjectingParent();ie&&ie.layout&&this.animationProgress!==1?(this.relativeParent=ie,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),Vv(this.relativeTargetOrigin,this.layout.layoutBox,ie.layout.layoutBox),gl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fs(),this.targetWithTransforms=fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gl(this.target,this.layout.layoutBox),yA(this.target,this.targetDelta)):gl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const ie=this.getClosestProjectingParent();ie&&!!ie.resumingFrom==!!this.resumingFrom&&!ie.options.layoutScroll&&ie.target&&this.animationProgress!==1?(this.relativeParent=ie,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),Vv(this.relativeTargetOrigin,this.target,ie.target),gl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||JC(this.parent.latestValues)||vA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var pe;const b=this.getLead(),u=!!this.resumingFrom||this!==b;let k=!0;if((this.isProjectionDirty||(pe=this.parent)!=null&&pe.isProjectionDirty)&&(k=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(k=!1),this.resolvedRelativeTargetAt===ma.timestamp&&(k=!1),k)return;const{layout:A,layoutId:O}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||O))return;gl(this.layoutCorrected,this.layout.layoutBox);const B=this.treeScale.x,W=this.treeScale.y;fF(this.layoutCorrected,this.treeScale,this.path,u),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox,b.targetWithTransforms=fs());const{target:ie}=b;if(!ie){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UP(this.prevProjectionDelta.x,this.projectionDelta.x),UP(this.prevProjectionDelta.y,this.projectionDelta.y)),Lv(this.projectionDelta,this.layoutCorrected,ie,this.latestValues),(this.treeScale.x!==B||this.treeScale.y!==W||!YP(this.projectionDelta.x,this.prevProjectionDelta.x)||!YP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",ie))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),b){const k=this.getStack();k&&k.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dp(),this.projectionDelta=dp(),this.projectionDeltaWithTransform=dp()}setAnimationOrigin(b,u=!1){const k=this.snapshot,A=k?k.latestValues:{},O={...this.latestValues},B=dp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const W=fs(),ie=k?k.source:void 0,pe=this.layout?this.layout.source:void 0,Ve=ie!==pe,Pe=this.getStack(),Se=!Pe||Pe.members.length<=1,Ce=!!(Ve&&!Se&&this.options.crossfade===!0&&!this.path.some(G6));this.animationProgress=0;let _e;this.mixTargetDelta=Ue=>{const Oe=Ue/1e3;ej(B.x,b.x,Oe),ej(B.y,b.y,Oe),this.setTargetDelta(B),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vv(W,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H6(this.relativeTarget,this.relativeTargetOrigin,W,Oe),_e&&j6(this.relativeTarget,_e)&&(this.isProjectionDirty=!1),_e||(_e=fs()),gl(_e,this.relativeTarget)),Ve&&(this.animationValues=O,N6(O,A,this.latestValues,Oe,Ce,Se)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Oe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){var u,k,A;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(A=(k=this.resumingFrom)==null?void 0:k.currentAnimation)==null||A.stop(),this.pendingAnimation&&(vh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fi.update(()=>{Xx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vp(0)),this.currentAnimation=b6(this.motionValue,[0,1e3],{...b,velocity:0,isSync:!0,onUpdate:O=>{this.mixTargetDelta(O),b.onUpdate&&b.onUpdate(O)},onStop:()=>{},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:u,target:k,layout:A,latestValues:O}=b;if(!(!u||!k||!A)){if(this!==b&&this.layout&&A&&FA(this.options.animationType,this.layout.layoutBox,A.layoutBox)){k=this.target||fs();const B=Qa(this.layout.layoutBox.x);k.x.min=b.target.x.min,k.x.max=k.x.min+B;const W=Qa(this.layout.layoutBox.y);k.y.min=b.target.y.min,k.y.max=k.y.min+W}gl(u,k),up(u,O),Lv(this.projectionDeltaWithTransform,this.layoutCorrected,u,O)}}registerSharedNode(b,u){this.sharedNodes.has(b)||this.sharedNodes.set(b,new k6),this.sharedNodes.get(b).add(u);const A=u.options.initialPromotionConfig;u.promote({transition:A?A.transition:void 0,preserveFollowOpacity:A&&A.shouldPreserveFollowOpacity?A.shouldPreserveFollowOpacity(u):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var u;const{layoutId:b}=this.options;return b?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:b}=this.options;return b?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:u,preserveFollowOpacity:k}={}){const A=this.getStack();A&&A.promote(this,k),b&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetSkewAndRotation(){const{visualElement:b}=this.options;if(!b)return;let u=!1;const{latestValues:k}=b;if((k.z||k.rotate||k.rotateX||k.rotateY||k.rotateZ||k.skewX||k.skewY)&&(u=!0),!u)return;const A={};k.z&&dC("z",b,A,this.animationValues);for(let O=0;O<uC.length;O++)dC(`rotate${uC[O]}`,b,A,this.animationValues),dC(`skew${uC[O]}`,b,A,this.animationValues);b.render();for(const O in A)b.setStaticValue(O,A[O]),this.animationValues&&(this.animationValues[O]=A[O]);b.scheduleRender()}applyProjectionStyles(b,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){b.visibility="hidden";return}const k=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,b.visibility="",b.opacity="",b.pointerEvents=Yx(u==null?void 0:u.pointerEvents)||"",b.transform=k?k(this.latestValues,""):"none";return}const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Yx(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Cf(this.latestValues)&&(b.transform=k?k({},""):"none",this.hasProjected=!1);return}b.visibility="";const O=A.animationValues||A.latestValues;this.applyTransformsToTarget();let B=A6(this.projectionDeltaWithTransform,this.treeScale,O);k&&(B=k(O,B)),b.transform=B;const{x:W,y:ie}=this.projectionDelta;b.transformOrigin=`${W.origin*100}% ${ie.origin*100}% 0`,A.animationValues?b.opacity=A===this?O.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:O.opacityExit:b.opacity=A===this?O.opacity!==void 0?O.opacity:"":O.opacityExit!==void 0?O.opacityExit:0;for(const pe in Kv){if(O[pe]===void 0)continue;const{correct:Ve,applyTo:Pe,isCSSVariable:Se}=Kv[pe],Ce=B==="none"?O[pe]:Ve(O[pe],A);if(Pe){const _e=Pe.length;for(let Ue=0;Ue<_e;Ue++)b[Pe[Ue]]=Ce}else Se?this.options.visualElement.renderState.vars[pe]=Ce:b[pe]=Ce}this.options.layoutId&&(b.pointerEvents=A===this?Yx(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var u;return(u=b.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(XP),this.root.sharedNodes.clear()}}}function I6(o){o.updateLayout()}function L6(o){var a;const t=((a=o.resumeFrom)==null?void 0:a.snapshot)||o.snapshot;if(o.isLead()&&o.layout&&t&&o.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:g}=o.layout,{animationType:S}=o.options,b=t.source!==o.layout.source;S==="size"?yl(B=>{const W=b?t.measuredBox[B]:t.layoutBox[B],ie=Qa(W);W.min=c[B].min,W.max=W.min+ie}):FA(S,t.layoutBox,c)&&yl(B=>{const W=b?t.measuredBox[B]:t.layoutBox[B],ie=Qa(c[B]);W.max=W.min+ie,o.relativeTarget&&!o.currentAnimation&&(o.isProjectionDirty=!0,o.relativeTarget[B].max=o.relativeTarget[B].min+ie)});const u=dp();Lv(u,c,t.layoutBox);const k=dp();b?Lv(k,o.applyTransform(g,!0),t.measuredBox):Lv(k,c,t.layoutBox);const A=!VA(u);let O=!1;if(!o.resumeFrom){const B=o.getClosestProjectingParent();if(B&&!B.resumeFrom){const{snapshot:W,layout:ie}=B;if(W&&ie){const pe=fs();Vv(pe,t.layoutBox,W.layoutBox);const Ve=fs();Vv(Ve,c,ie.layoutBox),OA(pe,Ve)||(O=!0),B.options.layoutRoot&&(o.relativeTarget=Ve,o.relativeTargetOrigin=pe,o.relativeParent=B)}}}o.notifyListeners("didUpdate",{layout:c,snapshot:t,delta:k,layoutDelta:u,hasLayoutChanged:A,hasRelativeLayoutChanged:O})}else if(o.isLead()){const{onExitComplete:c}=o.options;c&&c()}o.options.transition=void 0}function V6(o){o.parent&&(o.isProjecting()||(o.isProjectionDirty=o.parent.isProjectionDirty),o.isSharedProjectionDirty||(o.isSharedProjectionDirty=!!(o.isProjectionDirty||o.parent.isProjectionDirty||o.parent.isSharedProjectionDirty)),o.isTransformDirty||(o.isTransformDirty=o.parent.isTransformDirty))}function O6(o){o.isProjectionDirty=o.isSharedProjectionDirty=o.isTransformDirty=!1}function z6(o){o.clearSnapshot()}function XP(o){o.clearMeasurements()}function JP(o){o.isLayoutDirty=!1}function B6(o){const{visualElement:t}=o.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),o.resetTransform()}function QP(o){o.finishAnimation(),o.targetDelta=o.relativeTarget=o.target=void 0,o.isProjectionDirty=!0}function F6(o){o.resolveTargetDelta()}function U6(o){o.calcProjection()}function $6(o){o.resetSkewAndRotation()}function q6(o){o.removeLeadSnapshot()}function ej(o,t,a){o.translate=Xi(t.translate,0,a),o.scale=Xi(t.scale,1,a),o.origin=t.origin,o.originPoint=t.originPoint}function tj(o,t,a,c){o.min=Xi(t.min,a.min,c),o.max=Xi(t.max,a.max,c)}function H6(o,t,a,c){tj(o.x,t.x,a.x,c),tj(o.y,t.y,a.y,c)}function G6(o){return o.animationValues&&o.animationValues.opacityExit!==void 0}const W6={duration:.45,ease:[.4,0,.1,1]},nj=o=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(o),rj=nj("applewebkit/")&&!nj("chrome/")?Math.round:xl;function ij(o){o.min=rj(o.min),o.max=rj(o.max)}function Z6(o){ij(o.x),ij(o.y)}function FA(o,t,a){return o==="position"||o==="preserve-aspect"&&!e6(KP(t),KP(a),.2)}function K6(o){var t;return o!==o.root&&((t=o.scroll)==null?void 0:t.wasRoot)}const Y6=BA({attachResizeListener:(o,t)=>Yv(o,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hC={current:void 0},UA=BA({measureScroll:o=>({x:o.scrollLeft,y:o.scrollTop}),defaultParent:()=>{if(!hC.current){const o=new Y6({});o.mount(window),o.setOptions({layoutScroll:!0}),hC.current=o}return hC.current},resetTransform:(o,t)=>{o.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:o=>window.getComputedStyle(o).position==="fixed"}),X6={pan:{Feature:p6},drag:{Feature:m6,ProjectionNode:UA,MeasureLayout:RA}};function sj(o,t,a){const{props:c}=o;o.animationState&&c.whileHover&&o.animationState.setActive("whileHover",a==="Start");const g="onHover"+a,S=c[g];S&&Fi.postRender(()=>S(t,ly(t)))}class J6 extends xh{mount(){const{current:t}=this.node;t&&(this.unmount=_B(t,(a,c)=>(sj(this.node,c,"Start"),g=>sj(this.node,g,"End"))))}unmount(){}}class Q6 extends xh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sy(Yv(this.node.current,"focus",()=>this.onFocus()),Yv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aj(o,t,a){const{props:c}=o;if(o.current instanceof HTMLButtonElement&&o.current.disabled)return;o.animationState&&c.whileTap&&o.animationState.setActive("whileTap",a==="Start");const g="onTap"+(a==="End"?"":a),S=c[g];S&&Fi.postRender(()=>S(t,ly(t)))}class eU extends xh{mount(){const{current:t}=this.node;t&&(this.unmount=SB(t,(a,c)=>(aj(this.node,c,"Start"),(g,{success:S})=>aj(this.node,g,S?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sN=new WeakMap,fC=new WeakMap,tU=o=>{const t=sN.get(o.target);t&&t(o)},nU=o=>{o.forEach(tU)};function rU({root:o,...t}){const a=o||document;fC.has(a)||fC.set(a,{});const c=fC.get(a),g=JSON.stringify(t);return c[g]||(c[g]=new IntersectionObserver(nU,{root:o,...t})),c[g]}function iU(o,t,a){const c=rU(t);return sN.set(o,a),c.observe(o),()=>{sN.delete(o),c.unobserve(o)}}const sU={some:0,all:1};class aU extends xh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:a,margin:c,amount:g="some",once:S}=t,b={root:a?a.current:void 0,rootMargin:c,threshold:typeof g=="number"?g:sU[g]},u=k=>{const{isIntersecting:A}=k;if(this.isInView===A||(this.isInView=A,S&&!A&&this.hasEnteredView))return;A&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",A);const{onViewportEnter:O,onViewportLeave:B}=this.node.getProps(),W=A?O:B;W&&W(k)};return iU(this.node.current,b,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:a}=this.node;["amount","margin","root"].some(oU(t,a))&&this.startObserver()}unmount(){}}function oU({viewport:o={}},{viewport:t={}}={}){return a=>o[a]!==t[a]}const lU={inView:{Feature:aU},tap:{Feature:eU},focus:{Feature:Q6},hover:{Feature:J6}},cU={layout:{ProjectionNode:UA,MeasureLayout:RA}},uU={...ZF,...lU,...X6,...cU},nr=uF(uU,CF),$A=de.createContext(void 0),b0=()=>{const o=de.useContext($A);if(!o)throw new Error("useTransition must be used within a TransitionProvider");return o},dU=({children:o})=>{const[t,a]=de.useState("default"),{pathname:c}=jf();de.useEffect(()=>{c==="/"&&(c.includes("login")||c.includes("admin-login")||c.includes("driver-login"))?a("homepage-to-login"):c==="/"&&(c.includes("student")||c.includes("student-map"))?a("homepage-to-map"):(c.includes("login")||c.includes("admin-login")||c.includes("driver-login"))&&(c.includes("dashboard")||c.includes("admin")||c.includes("driver-dashboard"))?a("login-to-dashboard"):a("default")},[c]);const g=S=>{a(S)};return _.jsxDEV($A.Provider,{value:{currentTransition:t,setTransition:g},children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:71,columnNumber:5},void 0)},hU=({children:o,isVisible:t})=>_.jsxDEV(nr.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),fU=({children:o,isVisible:t})=>_.jsxDEV(nr.div,{initial:{opacity:0,scale:.8},animate:{opacity:t?1:0,scale:t?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:_.jsxDEV(nr.div,{initial:{opacity:0,y:100},animate:{opacity:t?1:0,y:t?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),mU=({children:o,isVisible:t})=>_.jsxDEV(nr.div,{initial:{opacity:0,scale:.9},animate:{opacity:t?1:0,scale:t?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:_.jsxDEV(nr.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),pU=({children:o})=>{const{currentTransition:t}=b0(),a=()=>{switch(t){case"homepage-to-login":return _.jsxDEV(hU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return _.jsxDEV(fU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return _.jsxDEV(mU,{isVisible:!0,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return o}};return _.jsxDEV(_.Fragment,{children:a()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},gU=({className:o=""})=>_.jsxDEV("svg",{className:`w-12 h-12 sm:w-16 sm:h-16 ${o}`,viewBox:"0 0 48 48",fill:"none","aria-label":"Bus Icon",style:{width:"100%",height:"100%",flexShrink:0},children:[_.jsxDEV("rect",{x:"4",y:"12",width:"40",height:"20",rx:"2",fill:"#3B82F6",stroke:"#1E40AF",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:13,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:25,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:35,columnNumber:5},void 0),_.jsxDEV("rect",{x:"26",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:45,columnNumber:5},void 0),_.jsxDEV("rect",{x:"36",y:"14",width:"6",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:55,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"22",width:"12",height:"8",rx:"1",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:67,columnNumber:5},void 0),_.jsxDEV("line",{x1:"24",y1:"22",x2:"24",y2:"30",stroke:"#F59E0B",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:77,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:80,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:88,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:89,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:97,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"8",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:100,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:101,columnNumber:5},void 0),_.jsxDEV("rect",{x:"2",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:104,columnNumber:5},void 0),_.jsxDEV("rect",{x:"44",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:105,columnNumber:5},void 0),_.jsxDEV("rect",{x:"28",y:"16",width:"8",height:"3",rx:"0.5",fill:"#FEF3C7",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:108,columnNumber:5},void 0),_.jsxDEV("text",{x:"32",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"GU"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:117,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:5,columnNumber:3},void 0),vU=({className:o=""})=>_.jsxDEV("svg",{className:`w-12 h-12 sm:w-16 sm:h-16 ${o}`,viewBox:"0 0 48 48",fill:"none","aria-label":"Map Icon",style:{width:"100%",height:"100%",flexShrink:0},children:[_.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"2",fill:"#F0FDF4",stroke:"#16A34A",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:140,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"16",x2:"40",y2:"16",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:152,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"24",x2:"40",y2:"24",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:153,columnNumber:5},void 0),_.jsxDEV("line",{x1:"8",y1:"32",x2:"40",y2:"32",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:154,columnNumber:5},void 0),_.jsxDEV("line",{x1:"16",y1:"12",x2:"16",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:155,columnNumber:5},void 0),_.jsxDEV("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:156,columnNumber:5},void 0),_.jsxDEV("line",{x1:"32",y1:"12",x2:"32",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:157,columnNumber:5},void 0),_.jsxDEV("rect",{x:"12",y:"20",width:"16",height:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:160,columnNumber:5},void 0),_.jsxDEV("rect",{x:"20",y:"12",width:"2",height:"16",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:169,columnNumber:5},void 0),_.jsxDEV("rect",{x:"10",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:180,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:189,columnNumber:5},void 0),_.jsxDEV("rect",{x:"22",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:198,columnNumber:5},void 0),_.jsxDEV("rect",{x:"28",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:207,columnNumber:5},void 0),_.jsxDEV("rect",{x:"34",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:216,columnNumber:5},void 0),_.jsxDEV("rect",{x:"11",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:227,columnNumber:5},void 0),_.jsxDEV("rect",{x:"13",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:228,columnNumber:5},void 0),_.jsxDEV("rect",{x:"17",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:229,columnNumber:5},void 0),_.jsxDEV("rect",{x:"19",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:230,columnNumber:5},void 0),_.jsxDEV("rect",{x:"23",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:231,columnNumber:5},void 0),_.jsxDEV("rect",{x:"25",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:232,columnNumber:5},void 0),_.jsxDEV("rect",{x:"29",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:233,columnNumber:5},void 0),_.jsxDEV("rect",{x:"31",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:234,columnNumber:5},void 0),_.jsxDEV("rect",{x:"35",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:235,columnNumber:5},void 0),_.jsxDEV("rect",{x:"37",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:236,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"22",r:"2",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:239,columnNumber:5},void 0),_.jsxDEV("path",{d:"M24 24 L26 28 L22 28 Z",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:247,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"22",r:"0.5",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:253,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"16",r:"3",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:256,columnNumber:5},void 0),_.jsxDEV("text",{x:"36",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"N"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:264,columnNumber:5},void 0),_.jsxDEV("text",{x:"36",y:"22",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"S"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:274,columnNumber:5},void 0),_.jsxDEV("text",{x:"33",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"W"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:284,columnNumber:5},void 0),_.jsxDEV("text",{x:"39",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"E"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:294,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:132,columnNumber:3},void 0),yU=({className:o=""})=>_.jsxDEV("svg",{className:`w-12 h-12 sm:w-16 sm:h-16 ${o}`,viewBox:"0 0 48 48",fill:"none","aria-label":"Admin Icon",style:{width:"100%",height:"100%",flexShrink:0},children:[_.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"3",fill:"#F8FAFC",stroke:"#8B5CF6",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:317,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"10",width:"36",height:"4",rx:"1",fill:"#8B5CF6",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:329,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"8",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:338,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"10",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:339,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"12",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:340,columnNumber:5},void 0),_.jsxDEV("rect",{x:"6",y:"16",width:"8",height:"20",rx:"1",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:343,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"18",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:355,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"22",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:356,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"26",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:357,columnNumber:5},void 0),_.jsxDEV("rect",{x:"8",y:"30",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:358,columnNumber:5},void 0),_.jsxDEV("rect",{x:"16",y:"16",width:"26",height:"20",rx:"1",fill:"#FFFFFF",stroke:"#DDD6FE",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:361,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:373,columnNumber:5},void 0),_.jsxDEV("rect",{x:"30",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:383,columnNumber:5},void 0),_.jsxDEV("rect",{x:"18",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:393,columnNumber:5},void 0),_.jsxDEV("rect",{x:"30",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:403,columnNumber:5},void 0),_.jsxDEV("path",{d:"M20 22 L22 21 L24 23 L26 20 L28 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:415,columnNumber:5},void 0),_.jsxDEV("path",{d:"M32 22 L34 21 L36 23 L38 20 L40 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:421,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"20",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:429,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"22",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:430,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"24",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:431,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"26",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:432,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"28",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:433,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"32",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:434,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"34",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:435,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"36",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:436,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"38",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:437,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:438,columnNumber:5},void 0),_.jsxDEV("rect",{x:"20",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:441,columnNumber:5},void 0),_.jsxDEV("rect",{x:"23",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:442,columnNumber:5},void 0),_.jsxDEV("rect",{x:"26",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:443,columnNumber:5},void 0),_.jsxDEV("rect",{x:"29",y:"31",width:"2",height:"1",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:444,columnNumber:5},void 0),_.jsxDEV("rect",{x:"32",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:445,columnNumber:5},void 0),_.jsxDEV("rect",{x:"35",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:446,columnNumber:5},void 0),_.jsxDEV("rect",{x:"38",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:447,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"12",r:"2",fill:"#8B5CF6",stroke:"#7C3AED",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:450,columnNumber:5},void 0),_.jsxDEV("circle",{cx:"40",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:458,columnNumber:5},void 0),_.jsxDEV("path",{d:"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12",stroke:"#7C3AED",strokeWidth:"0.5",strokeLinecap:"round"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:459,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:309,columnNumber:3},void 0),bU=({emoji:o,className:t="",size:a="2xl"})=>{const c={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl","2xl":"text-4xl","3xl":"text-5xl","4xl":"text-6xl"};return _.jsxDEV("div",{className:`icon-container ${c[a]} ${t}`,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/icons/index.tsx",lineNumber:485,columnNumber:5},void 0)},xU=()=>{const o=ey(),{setTransition:t}=b0(),[a,c]=de.useState(!1),[g,S]=de.useState(null),[b,u]=de.useState({email:"",password:""}),[k,A]=de.useState(null),[O,B]=de.useState(!1),[W,ie]=de.useState(!1);de.useEffect(()=>{const Se=()=>{ie(window.innerWidth<768)};return Se(),window.addEventListener("resize",Se),()=>window.removeEventListener("resize",Se)},[]),de.useEffect(()=>{const{data:{subscription:Se}}=hi.auth.onAuthStateChange(async(Ce,_e)=>{Ce==="SIGNED_IN"&&_e?await Ve(_e.access_token):Ce==="SIGNED_OUT"&&(c(!1),S(null),Pe())});return()=>Se.unsubscribe()},[]);const pe=async Se=>{Se.preventDefault(),B(!0),A(null);try{const{data:Ce,error:_e}=await hi.auth.signInWithPassword({email:b.email,password:b.password});if(_e){console.error("❌ Login error:",_e),A(_e.message);return}Ce.user&&Ce.session?(console.log("✅ Login successful:",Ce.user.email),await Ve(Ce.session.access_token),u({email:"",password:""})):A("Login failed - no user data received")}catch(Ce){console.error("❌ Login error:",Ce),A("An unexpected error occurred during login")}finally{B(!1)}},Ve=async Se=>{var Ce,_e,Ue;try{console.log("🔌 Driver: Connecting to WebSocket..."),await jn.connect();let Oe=0;const Je=10;for(;!jn.isConnected()&&Oe<Je;)console.log(`⏳ Waiting for WebSocket connection... (attempt ${Oe+1}/${Je})`),await new Promise(pt=>setTimeout(pt,1500)),Oe++;if(!jn.isConnected())throw console.error("❌ WebSocket connection failed after all attempts"),new Error("Failed to establish WebSocket connection. Please check your internet connection and try again.");if(console.log("✅ WebSocket connection established"),(Ce=jn.socket)==null||Ce.on("connect",()=>{console.log("🔌 Driver: Connected to WebSocket server")}),(_e=jn.socket)==null||_e.on("disconnect",()=>{console.log("🔌 Driver: Disconnected from WebSocket server")}),(Ue=jn.socket)==null||Ue.on("error",pt=>{console.error("❌ Driver: Socket error:",pt),A(pt.message||"Socket error occurred")}),await new Promise(pt=>setTimeout(pt,500)),!jn.isConnected())throw new Error("WebSocket connection failed to establish");const tt=async pt=>{console.log("✅ Driver: Authentication successful:",pt);try{const Yt={driver_id:pt.driverId,bus_id:pt.busId,bus_number:pt.busInfo.bus_number,route_id:pt.busInfo.route_id,route_name:pt.busInfo.route_name,driver_name:pt.busInfo.driver_name};console.log("💾 Storing driver assignment:",Yt);const ft=await Ur.storeDriverBusAssignment(Yt);if(console.log("💾 Assignment stored result:",ft),!ft){console.error("❌ Failed to store driver assignment in database"),A("Failed to store authentication data");return}console.log("✅ Setting authentication state..."),c(!0),S(pt.busInfo),t("login-to-dashboard"),console.log("🚀 Driver: Navigating to dashboard immediately..."),o("/driver-dashboard"),console.log("✅ Navigation initiated successfully")}catch(Yt){console.error("❌ Error storing authentication data:",Yt),A("Failed to complete authentication")}},ut=pt=>{console.error("❌ Driver: Authentication failed:",pt),A("Authentication failed: "+(pt.message||"Unknown error"))},Tt=setTimeout(()=>{var pt,Yt;console.error("❌ Driver: Authentication timeout"),A("Authentication timeout - please try again"),(pt=jn.socket)==null||pt.off("driver:authenticated",tt),(Yt=jn.socket)==null||Yt.off("driver:authentication_failed",ut)},3e4);if(console.log("🔐 Driver: Sending authentication request..."),!Se)throw new Error("No authentication token available");jn.authenticateAsDriver(Se,{onSuccess:pt=>{clearTimeout(Tt),tt(pt)},onFailure:pt=>{clearTimeout(Tt),ut(pt)},onError:pt=>{clearTimeout(Tt),console.error("❌ Driver: Authentication error:",pt),A("Authentication error: "+(pt.message||"Unknown error"))}}),console.log("📤 Authentication request sent, waiting for response...")}catch(Oe){console.error("❌ Driver: Authentication error:",Oe),A("Failed to authenticate with server")}},Pe=()=>{jn.disconnect()};return a&&g?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV(nr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:263,columnNumber:11},void 0),_.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:264,columnNumber:11},void 0),_.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:267,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:258,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:257,columnNumber:7},void 0):_.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[_.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:_.jsxDEV(nr.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:_.jsxDEV(nr.div,{whileHover:W?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:290,columnNumber:13},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:293,columnNumber:13},void 0),_.jsxDEV("div",{className:"relative z-10 p-8",children:[_.jsxDEV(nr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[_.jsxDEV("div",{className:"mb-4 animate-pulse",children:_.jsxDEV(bU,{emoji:"🚌",size:"4xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:305,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:304,columnNumber:17},void 0),_.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:307,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:310,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:298,columnNumber:15},void 0),_.jsxDEV(fp,{children:k&&_.jsxDEV(nr.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:_.jsxDEV("p",{className:"text-red-200 text-sm",children:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:324,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:318,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:316,columnNumber:15},void 0),_.jsxDEV(nr.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:pe,className:"space-y-6",children:[_.jsxDEV(nr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:343,columnNumber:19},void 0),_.jsxDEV("input",{id:"email",type:"email",required:!0,value:b.email,onChange:Se=>u(Ce=>({...Ce,email:Se.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:349,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:338,columnNumber:17},void 0),_.jsxDEV(nr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:371,columnNumber:19},void 0),_.jsxDEV("input",{id:"password",type:"password",required:!0,value:b.password,onChange:Se=>u(Ce=>({...Ce,password:Se.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:377,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:366,columnNumber:17},void 0),_.jsxDEV(nr.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:W?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:O,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:O?_.jsxDEV("div",{className:"flex items-center justify-center",children:[_.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:406,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:405,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:394,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:330,columnNumber:15},void 0),_.jsxDEV(nr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:_.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:422,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:416,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:296,columnNumber:13},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:429,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:284,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:277,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:276,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(W?8:15)].map((Se,Ce)=>_.jsxDEV(nr.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2}},Ce,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:437,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:435,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:274,columnNumber:5},void 0)},_U=()=>{var It;const o=ey(),[t,a]=de.useState(!1),[c,g]=de.useState(null),[S,b]=de.useState(null),[u,k]=de.useState(null),[A,O]=de.useState(null),[B,W]=de.useState(0),[ie,pe]=de.useState(!1),[Ve,Pe]=de.useState("disconnected");de.useEffect(()=>{console.log("🚌 BusInfo state changed:",c)},[c]);const Se=de.useRef(null),Ce=de.useRef(null),_e=de.useRef(null),Ue=de.useRef(null),Oe=de.useRef(null);de.useEffect(()=>{const Lt=()=>{jn.isConnected()?Pe("connected"):jn.getConnectionState()==="connecting"||jn.getConnectionState()==="reconnecting"?Pe("connecting"):Pe("disconnected")};Lt();const hn=setInterval(Lt,2e3);return(async()=>{var Zt,bn,ln,Bn,An,wt,ze,Pt;try{console.log("🚀 Driver Dashboard: Component mounted, starting initialization...");const{data:{session:nn}}=await hi.auth.getSession();if(console.log("🔑 Session check:",nn?"Found":"Not found",(Zt=nn==null?void 0:nn.user)==null?void 0:Zt.email),nn!=null&&nn.user){console.log("🔌 Driver Dashboard: Initializing...");const yn=Ur.getCurrentDriverAssignment();if(console.log("🔍 Checking for existing assignment:",yn?"Found":"Not found"),yn)console.log("✅ Driver Dashboard: Using existing assignment from DriverLogin:",yn),g({bus_id:yn.bus_id,bus_number:yn.bus_number,route_id:yn.route_id,route_name:yn.route_name,driver_id:yn.driver_id,driver_name:yn.driver_name}),pe(!0),console.log("✅ Bus info and authentication state set from existing assignment");else{console.log("🔍 No existing assignment, validating driver session...");const{isValid:zt,assignment:mn}=await Ur.validateDriverSession();if(console.log("🔍 Validation result:",{isValid:zt,assignment:mn?"Found":"Not found"}),zt&&mn)console.log("✅ Driver Dashboard: Valid session found with assignment:",mn),g({bus_id:mn.bus_id,bus_number:mn.bus_number,route_id:mn.route_id,route_name:mn.route_name,driver_id:mn.driver_id,driver_name:mn.driver_name}),pe(!0),console.log("✅ Bus info and authentication state set from validation");else{console.log("❌ Driver Dashboard: Invalid session or no assignment found");return}}jn.isConnected()?console.log("✅ WebSocket already connected"):(console.log("🔌 Driver Dashboard: Connecting to WebSocket..."),await jn.connect()),(bn=jn.socket)==null||bn.on("connect",()=>{console.log("🔌 Driver Dashboard: Connected to WebSocket server")}),(ln=jn.socket)==null||ln.on("disconnect",()=>{console.log("🔌 Driver Dashboard: Disconnected from WebSocket server")}),(Bn=jn.socket)==null||Bn.on("error",zt=>{console.error("❌ Driver Dashboard: Socket error:",zt)}),(An=jn.socket)==null||An.on("driver:authenticated",zt=>{console.log("✅ Driver Dashboard: Authentication successful:",zt),console.log("🚌 Bus Info received:",zt.busInfo),g(zt.busInfo),pe(!0)}),(wt=jn.socket)==null||wt.on("driver:authentication_failed",zt=>{console.error("❌ Driver Dashboard: Authentication failed:",zt)}),(ze=jn.socket)==null||ze.on("driver:locationConfirmed",()=>{console.log("📍 Driver Dashboard: Location confirmed"),O(new Date().toLocaleTimeString()),W(zt=>zt+1)}),Se.current=jn.socket;const Ft=Ur.getCurrentDriverAssignment();Ft&&((Pt=jn.socket)==null||Pt.emit("driver:connected",{driverId:Ft.driver_id,busId:Ft.bus_id,timestamp:new Date().toISOString()})),setTimeout(()=>{!c&&!ie&&(console.log("🔄 Fallback: Fetching bus info from API..."),Yt(nn.user.id))},5e3),setTimeout(()=>{!c&&!ie&&(console.log("🔄 Second fallback: Fetching bus info from API..."),Yt(nn.user.id))},1e4)}else console.log("❌ Driver Dashboard: No session found, redirecting to login"),o("/driver-login")}catch(nn){console.error("❌ Driver Dashboard: Initialization error:",nn),console.error("Failed to initialize driver data")}})(),()=>{clearInterval(hn),jn.socket&&(jn.socket.off("connect"),jn.socket.off("disconnect"),jn.socket.off("error"),jn.socket.off("driver:authenticated"),jn.socket.off("driver:authentication_failed"),jn.socket.off("driver:locationConfirmed"))}},[c,ie,o]),de.useEffect(()=>(Ue.current&&!_e.current&&Je(),()=>{pt()}),[]);const Je=()=>{if(!Ue.current)return;const Lt=23.0225,hn=72.5714;_e.current=new Ja.Map({container:Ue.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[hn,Lt],zoom:15,attributionControl:!1});const at=document.createElement("div");at.className="driver-marker",at.innerHTML=`
      <div class="driver-marker-content">
        <div style="font-size: 16px;">🚌</div>
      </div>
    `,Oe.current=new Ja.Marker({element:at,anchor:"center"}).setLngLat([hn,Lt]).addTo(_e.current)},tt=(Lt,hn)=>{if(!_e.current||!Oe.current)return;const at=[hn,Lt];Oe.current.setLngLat(at),_e.current.flyTo({center:at,duration:1e3})},ut=async()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser");return}const hn={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{Ce.current=navigator.geolocation.watchPosition(at=>{if(b(at),k(null),_e.current&&Oe.current&&tt(at.coords.latitude,at.coords.longitude),jn.socket&&jn.isConnected()){const Zt={driverId:(c==null?void 0:c.driver_id)||"",latitude:at.coords.latitude,longitude:at.coords.longitude,timestamp:new Date().toISOString(),speed:at.coords.speed||void 0,heading:at.coords.heading||void 0};jn.socket.emit("driver:locationUpdate",Zt),O(new Date().toLocaleTimeString()),W(bn=>bn+1)}},at=>{console.error("❌ Location error:",at);let Zt="";switch(at.code){case at.PERMISSION_DENIED:Zt="Location permission denied. Please enable location access.";break;case at.POSITION_UNAVAILABLE:Zt="Location information is unavailable.";break;case at.TIMEOUT:Zt="Location request timed out.";break;default:Zt="An unknown error occurred."}k(Zt),a(!1)},hn),a(!0)}catch(at){console.error("❌ Error starting location tracking:",at),k("Failed to start location tracking")}},Tt=()=>{Ce.current&&(navigator.geolocation.clearWatch(Ce.current),Ce.current=null),a(!1)},pt=()=>{_e.current&&(_e.current.remove(),_e.current=null),Oe.current=null},Yt=async Lt=>{var hn;try{console.log("🔄 Fetching bus info for user:",Lt);const{data:{session:at}}=await hi.auth.getSession(),Zt=await fetch(`${pa.api.url}/api/admin/drivers/${Lt}/bus`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(at==null?void 0:at.access_token)||""}`}});if(Zt.ok){const bn=await Zt.json();console.log("✅ Bus info from API:",bn),(hn=bn.data)!=null&&hn.busInfo?g(bn.data.busInfo):bn.busInfo?g(bn.busInfo):console.error("❌ No bus info in response:",bn)}else{const bn=await Zt.text();console.error("❌ Failed to fetch bus info from API:",Zt.status,bn),console.error(`API Error: ${Zt.status} - ${bn}`)}}catch(at){console.error("❌ Error fetching bus info from API:",at)}},ft=()=>{jn.disconnect(),Se.current=null},bt=async()=>{try{Tt(),ft(),pt(),await hi.auth.signOut()}catch(Lt){console.error("❌ Sign out error:",Lt)}};return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[_.jsxDEV("div",{className:"card-glass p-6 mb-6",children:_.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[_.jsxDEV("div",{className:"flex-1",children:[_.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:502,columnNumber:15},void 0),_.jsxDEV("div",{className:"space-y-1",children:[_.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:c==null?void 0:c.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:508,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:506,columnNumber:17},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[_.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:c==null?void 0:c.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:515,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:513,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",_.jsxDEV("span",{className:"font-semibold text-white",children:c==null?void 0:c.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:521,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:519,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:512,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:505,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:501,columnNumber:13},void 0),_.jsxDEV("div",{className:"flex gap-2",children:[_.jsxDEV("button",{onClick:async()=>{var hn;const{data:{session:Lt}}=await hi.auth.getSession();(hn=Lt==null?void 0:Lt.user)!=null&&hn.id&&(console.log("🔄 Manual refresh: Fetching bus info..."),Yt(Lt.user.id))},className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:529,columnNumber:15},void 0),_.jsxDEV("button",{onClick:bt,className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:543,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:528,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:500,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:499,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${Ve==="connected"?"bg-green-500":Ve==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:558,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:568,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:Ve==="connected"?"Connected":Ve==="connecting"?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:569,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:567,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:557,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:556,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${t?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:583,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:587,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:t?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:590,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:586,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:582,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:581,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:600,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:B},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:601,columnNumber:15},void 0),A&&_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",A]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:603,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:599,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:598,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-4",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:`w-3 h-3 rounded-full mr-3 ${u?"bg-red-500":S?"bg-green-500":"bg-gray-400"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:613,columnNumber:15},void 0),_.jsxDEV("div",{className:"min-w-0 flex-1",children:[_.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:617,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:u?"Error":S?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:618,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:616,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:612,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:611,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:554,columnNumber:9},void 0),_.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:632,columnNumber:11},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:t?_.jsxDEV("button",{onClick:Tt,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:658,columnNumber:15},void 0):_.jsxDEV(_.Fragment,{children:[_.jsxDEV("button",{onClick:ut,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:638,columnNumber:17},void 0),u&&_.jsxDEV("button",{onClick:()=>{k(null),ut()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:646,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:637,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:635,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:631,columnNumber:9},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:672,columnNumber:13},void 0),_.jsxDEV("div",{ref:Ue,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:675,columnNumber:13},void 0),u&&_.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[_.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:683,columnNumber:17},void 0),_.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[_.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:687,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[_.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:693,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:698,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:697,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:702,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:701,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:706,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:705,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:710,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:709,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:714,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:713,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:718,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:717,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:696,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:692,columnNumber:19},void 0),_.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[_.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:726,columnNumber:21},void 0),_.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:731,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:730,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:735,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:734,columnNumber:23},void 0),_.jsxDEV("li",{children:["• ",_.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:739,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:738,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:729,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:725,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[_.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:745,columnNumber:21},void 0),_.jsxDEV("button",{onClick:()=>{const Lt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(hn=>{const at=`✅ Location Test Successful!

Latitude: ${hn.coords.latitude}
Longitude: ${hn.coords.longitude}
Accuracy: ${hn.coords.accuracy}m
Device: ${Lt?"Mobile":"Desktop"}

Location is working! You can now start tracking.`;alert(at),k(null)},hn=>{const at=`❌ Location Test Failed

Error Code: ${hn.code}
Error Message: ${hn.message}
Device: ${Lt?"Mobile":"Desktop"}

Please check your location permissions.`;alert(at)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:752,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:744,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:686,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:682,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:671,columnNumber:11},void 0),_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:806,columnNumber:13},void 0),S?_.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[_.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[_.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:813,columnNumber:19},void 0),_.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:814,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:812,columnNumber:17},void 0),_.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:820,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:S.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:821,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:819,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:826,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:S.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:827,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:825,columnNumber:19},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:832,columnNumber:21},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(It=S.coords.accuracy)==null?void 0:It.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:833,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:831,columnNumber:19},void 0),S.coords.speed&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:839,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(S.coords.speed*3.6).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:840,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:838,columnNumber:21},void 0),S.coords.heading&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:847,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[S.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:848,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:846,columnNumber:21},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:854,columnNumber:21},void 0),_.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:B},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:855,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:853,columnNumber:19},void 0),A&&_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:861,columnNumber:23},void 0),_.jsxDEV("span",{className:"text-white font-medium text-sm",children:A},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:864,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:860,columnNumber:21},void 0),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:870,columnNumber:21},void 0),_.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(S.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:871,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:869,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:810,columnNumber:15},void 0):_.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[_.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:879,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:880,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:883,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:878,columnNumber:15},void 0),_.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[_.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:890,columnNumber:15},void 0),_.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[_.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:894,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:897,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:898,columnNumber:17},void 0),_.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:901,columnNumber:17},void 0),_.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:902,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:893,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:889,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:805,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:669,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:497,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:496,columnNumber:5},void 0)};class wU{constructor(){_i(this,"buses",{});_i(this,"previousLocations",{})}calculateSpeed(t,a,c,g,S){const u=this.toRadians(c-t),k=this.toRadians(g-a),A=Math.sin(u/2)*Math.sin(u/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(c))*Math.sin(k/2)*Math.sin(k/2),B=6371*(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A))),W=S/(1e3*60*60),ie=B/W;return Math.round(ie*10)/10}toRadians(t){return t*(Math.PI/180)}updateBusLocation(t){var k,A;const{busId:a,latitude:c,longitude:g,timestamp:S}=t,b=this.previousLocations[a];let u;if(b){const O=new Date(S).getTime()-new Date(b.timestamp).getTime();O>0&&(u=this.calculateSpeed(b.latitude,b.longitude,c,g,O))}this.buses[a]?(this.buses[a].currentLocation={...t,speed:u||t.speed},this.buses[a].eta=(A=t.eta)==null?void 0:A.estimated_arrival_minutes):this.buses[a]={busId:a,busNumber:`Bus ${a}`,routeName:"Route TBD",driverName:"Driver TBD",currentLocation:{...t,speed:u||t.speed},eta:(k=t.eta)==null?void 0:k.estimated_arrival_minutes},this.previousLocations[a]={latitude:c,longitude:g,timestamp:S}}getBus(t){return this.buses[t]||null}getAllBuses(){return Object.values(this.buses)}getBusesByRoute(t){return Object.values(this.buses).filter(a=>a.routeName===t)}async syncBusFromAPI(t,a){try{if(!a){const c=await qv.getBusInfo(t);if(c.success&&c.data)a=c.data;else{console.error("❌ Failed to fetch bus data from API for bus:",t);return}}this.buses[t]?this.buses[t]={...this.buses[t],busNumber:a.number_plate||a.code||`Bus ${t}`,routeName:a.route_name||"Route TBD",driverName:a.driver_full_name||"Driver TBD"}:this.buses[t]={busId:t,busNumber:a.number_plate||a.code||`Bus ${t}`,routeName:a.route_name||"Route TBD",driverName:a.driver_full_name||"Driver TBD",currentLocation:{busId:t,driverId:a.assigned_driver_id||"",latitude:0,longitude:0,timestamp:new Date().toISOString()}}}catch(c){console.error("❌ Error syncing bus data from API:",c)}}async syncAllBusesFromAPI(){try{const t=await qv.getAllBuses();t.success&&t.data&&t.data.forEach(a=>{this.syncBusFromAPI(a.id,a)})}catch(t){console.error("❌ Error syncing all buses from API:",t)}}clearBuses(){this.buses={},this.previousLocations={}}getBusStats(){const t=Object.values(this.buses),a={};return t.forEach(c=>{const g=c.routeName;a[g]=(a[g]||0)+1}),{totalBuses:t.length,activeBuses:t.filter(c=>c.currentLocation).length,busesByRoute:a}}getActiveBuses(){const t=new Date(Date.now()-3e5);return Object.values(this.buses).filter(a=>new Date(a.currentLocation.timestamp)>t)}getBusLocationHistory(t){const a=this.buses[t];return a?[a.currentLocation]:[]}updateBusETA(t,a){this.buses[t]&&(this.buses[t].eta=a)}getBusesNearLocation(t,a,c=5){return Object.values(this.buses).filter(g=>{const S=g.currentLocation.latitude,b=g.currentLocation.longitude,u=6371,k=this.toRadians(S-t),A=this.toRadians(b-a),O=Math.sin(k/2)*Math.sin(k/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(S))*Math.sin(A/2)*Math.sin(A/2),B=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return u*B<=c})}}const mC=new wU,Ov=({children:o,className:t="",variant:a="default",hover:c=!0,glow:g=!1,onClick:S,delay:b=0})=>{const u="relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable",k={default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"},A=c?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",O=g?"hover:shadow-blue-500/20 hover:shadow-2xl":"",B=S?"cursor-pointer":"";return _.jsxDEV(nr.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:b,ease:[.4,0,.2,1]},whileHover:c?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:S?{scale:.98}:{},onClick:S,className:`
        ${u}
        ${k[a]}
        ${A}
        ${O}
        ${B}
        ${t}
      `,children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),g&&_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),_.jsxDEV("div",{className:"relative z-10 p-6 space-stable",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)},oj=({className:o=""})=>{const t=de.useRef(null),a=de.useRef(null),c=de.useRef({}),g=de.useRef(!1),S=de.useRef(new Set),[b,u]=de.useState(!1),[k,A]=de.useState(null),[O,B]=de.useState("disconnected"),[W,ie]=de.useState([]),[pe,Ve]=de.useState([]),[Pe,Se]=de.useState("all"),[Ce,_e]=de.useState(!0),[Ue,Oe]=de.useState({}),[Je,tt]=de.useState(!1),[ut,Tt]=de.useState(!0),[pt,Yt]=de.useState(!0),ft=de.useCallback(async()=>{try{console.log("🔄 Loading routes from backend API...");const ze=await qv.getRoutes();ze.success&&ze.data?(console.log("✅ Routes loaded from backend:",ze.data.length,"routes"),Ve(ze.data),ze.data.forEach(Pt=>{console.log(`📍 Route: ${Pt.name} (ID: ${Pt.id}) - Active: ${Pt.is_active}`)})):console.error("❌ Failed to load routes:",ze)}catch(ze){console.error("❌ Error loading routes:",ze)}},[]),bt=de.useCallback(()=>{a.current&&pe.forEach(ze=>{const Pt=`route-${ze.id}`;try{a.current.getLayer(Pt)&&a.current.removeLayer(Pt),a.current.getSource(Pt)&&a.current.removeSource(Pt),S.current.delete(Pt)}catch(nn){console.warn(`⚠️ Error removing route ${ze.name}:`,nn)}})},[pe]),It=de.useCallback(()=>{!a.current||pe.length===0||(console.log("🗺️ Adding routes to map:",pe.length,"routes"),pe.forEach((ze,Pt)=>{const nn=`route-${ze.id}`;if(S.current.has(nn)||a.current.getSource(nn)){console.log(`🗺️ Route ${nn} already exists, skipping...`);return}try{a.current.addSource(nn,{type:"geojson",data:{type:"Feature",properties:{name:ze.name,description:ze.description,distance:ze.distance_km,duration:ze.estimated_duration_minutes},geometry:ze.stops}}),a.current.addLayer({id:nn,type:"line",source:nn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":`hsl(${Pt*137.5%360}, 70%, 50%)`,"line-width":4,"line-opacity":.8}}),console.log(`🗺️ Added route ${ze.name} to map`),S.current.add(nn)}catch(yn){console.warn(`⚠️ Error adding route ${ze.name}:`,yn)}}))},[pe]),Lt=de.useCallback(ze=>{if(!a.current)return;const{busId:Pt,latitude:nn,longitude:yn,speed:Ft}=ze,zt=mC.getBus(Pt);if(zt)if(c.current[Pt])c.current[Pt].setLngLat([yn,nn]),c.current[Pt].getPopup().setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${zt.busNumber}</h3>
            <div class="bus-status ${b?"online":"offline"}">
              ${b?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${zt.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${zt.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${Ft?`${Ft} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(ze.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);else{const mn=document.createElement("div");mn.className="bus-marker",mn.innerHTML=`
        <div class="bus-marker-pin">
          <div class="bus-marker-icon">🚌</div>
          <div class="bus-marker-pulse"></div>
        </div>
        <div class="bus-marker-content">
          <div class="bus-number">${zt.busNumber}</div>
          <div class="bus-speed">${Ft?`${Ft} km/h`:"N/A"}</div>
          <div class="bus-eta">${ze.eta?`ETA: ${ze.eta.estimated_arrival_minutes} min`:"ETA: N/A"}</div>
        </div>
      `;const vr=new Ja.Marker({element:mn,anchor:"center"}).setLngLat([yn,nn]).addTo(a.current),fn=new Ja.Popup({offset:25,className:"bus-popup-container"}).setHTML(`
        <div class="bus-popup">
          <div class="bus-popup-header">
            <h3>🚌 Bus ${zt.busNumber}</h3>
            <div class="bus-status ${b?"online":"offline"}">
              ${b?"🟢 Online":"🔴 Offline"}
            </div>
          </div>
          <div class="bus-popup-content">
            <div class="bus-info">
              <p><strong>Driver:</strong> ${zt.driverName||"N/A"}</p>
              <p><strong>Route:</strong> ${zt.routeName||"N/A"}</p>
              <p><strong>Speed:</strong> ${Ft?`${Ft} km/h`:"N/A"}</p>
              <p><strong>Last Update:</strong> ${new Date(ze.timestamp).toLocaleTimeString()}</p>
            </div>
          </div>
        </div>
      `);vr.setPopup(fn),c.current[Pt]=vr}},[b]),hn=de.useCallback(ze=>{c.current[ze]&&(c.current[ze].remove(),delete c.current[ze])},[]),at=de.useCallback(()=>{if(!a.current||Object.keys(Ue).length===0)return;const ze=Object.values(Ue).map(Pt=>[Pt.longitude,Pt.latitude]);if(ze.length===1)a.current.flyTo({center:ze[0],zoom:16,duration:2e3});else if(ze.length>1){const Pt=new Ja.LngLatBounds;ze.forEach(nn=>Pt.extend(nn)),a.current.fitBounds(Pt,{padding:50,duration:2e3})}},[Ue]),Zt=de.useCallback(ze=>{console.log("📍 Bus location update:",ze),Oe(Pt=>({...Pt,[ze.busId]:ze})),Lt(ze)},[Lt]),bn=de.useCallback(ze=>{console.log("🚌 Driver connected:",ze)},[]),ln=de.useCallback(ze=>{console.log("🚌 Driver disconnected:",ze),hn(ze.busId)},[hn]),Bn=de.useCallback(ze=>{console.log("🚌 Bus arriving:",ze)},[]);de.useEffect(()=>{if(!(g.current||!t.current))return console.log("🗺️ Initializing map..."),g.current=!0,a.current=new Ja.Map({container:t.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[72.571,23.025],zoom:12,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),a.current.addControl(new Ja.NavigationControl,"top-right"),a.current.once("load",()=>{console.log("🗺️ Map loaded successfully"),_e(!1),ft()}),a.current.on("error",ze=>{console.error("❌ Map error:",ze)}),()=>{a.current&&(a.current.remove(),a.current=null,g.current=!1,S.current.clear(),c.current={})}},[ft]),de.useEffect(()=>{let ze,Pt;const nn=async()=>{var yn;try{A(null),B("connecting"),jn.reset(),await jn.connect(),u(!0),B("connected"),jn.onBusLocationUpdate(Zt),jn.onDriverConnected(bn),jn.onDriverDisconnected(ln),(yn=jn.socket)==null||yn.emit("student:connect"),jn.onStudentConnected(()=>{console.log("✅ Student connected to WebSocket")}),jn.onBusArriving(Bn),Pt=setInterval(()=>{!jn.getConnectionStatus()&&O==="connected"&&(B("disconnected"),u(!1))},1e4),(async()=>{try{for(;!Ur.isInitialized();)await new Promise(vr=>setTimeout(vr,100));const mn=await qv.getAllBuses();if(mn.success&&mn.data){console.log("📊 Initial bus data from API:",mn.data.length,"buses"),mn.data.forEach(fn=>{const Wn=fn.bus_id||fn.id;Wn&&mC.syncBusFromAPI(Wn,fn)});const vr=mC.getAllBuses();ie(vr),console.log("✅ Initial buses loaded and synced:",mn.data.length)}}catch(mn){console.error("❌ Error loading initial buses:",mn)}})()}catch(Ft){console.error("❌ WebSocket connection failed:",Ft),A("Failed to connect to real-time updates"),u(!1),B("disconnected"),ze=setTimeout(()=>{console.log("🔄 Retrying WebSocket connection..."),B("reconnecting"),nn()},5e3)}};return nn(),()=>{ze&&clearTimeout(ze),Pt&&clearInterval(Pt),jn.disconnect()}},[Bn,Zt,bn,ln]);const An=de.useMemo(()=>Pe==="all"?W:W.filter(ze=>{const Pt=pe.find(nn=>nn.name===ze.routeName);return Pt&&Pt.id===Pe}),[W,Pe,pe]),wt=de.useMemo(()=>pe.map(ze=>({id:ze.id,name:ze.name,description:ze.description})),[pe]);return de.useEffect(()=>(pe.length>0&&a.current&&a.current.isStyleLoaded()&&(bt(),It()),()=>{a.current&&bt()}),[pe,It,bt]),_.jsxDEV("div",{className:`relative h-screen ${o}`,children:[Ce&&_.jsxDEV("div",{className:"loading-overlay",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:525,columnNumber:13},void 0),_.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:526,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:524,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:523,columnNumber:9},void 0),k&&_.jsxDEV("div",{className:"error-overlay",children:_.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:542,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:537,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:536,columnNumber:15},void 0),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:550,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-red-700 mt-1",children:k},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:553,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:549,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:535,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:534,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:533,columnNumber:9},void 0),_.jsxDEV("div",{ref:t,className:"map-container rounded-lg"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:561,columnNumber:7},void 0),_.jsxDEV(nr.div,{initial:{x:-400},animate:{x:Je?-350:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-4 left-4 z-30",children:[_.jsxDEV("button",{onClick:()=>tt(!Je),className:"absolute -right-12 top-0 p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-200 z-40",children:_.jsxDEV("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${Je?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:583,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:575,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:571,columnNumber:9},void 0),_.jsxDEV(Ov,{variant:"premium",glow:!0,className:"w-80 max-h-[calc(100vh-2rem)] overflow-hidden",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[_.jsxDEV("div",{className:"flex items-center space-x-3",children:[_.jsxDEV("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:599,columnNumber:15},void 0),_.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"Student Live Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:600,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:598,columnNumber:13},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded",children:"Live Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:604,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:597,columnNumber:11},void 0),_.jsxDEV("div",{className:"p-4 space-y-4 max-h-[calc(100vh-8rem)] overflow-y-auto",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-blue-50/80 rounded-lg border border-blue-200/50",children:[_.jsxDEV("div",{className:"flex items-center space-x-2",children:[_.jsxDEV("div",{className:`w-2 h-2 rounded-full ${b?"bg-green-500 animate-pulse":"bg-red-500"}`},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:614,columnNumber:17},void 0),_.jsxDEV("span",{className:"text-sm text-gray-800 font-medium",children:b?"Live Connected":"Offline"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:619,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:613,columnNumber:15},void 0),_.jsxDEV("span",{className:"text-xs text-gray-600 bg-white/70 px-2 py-1 rounded",children:[An.length," buses"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:623,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:612,columnNumber:13},void 0),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Route Filter"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:631,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>Tt(!ut),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:_.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${ut?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:646,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:638,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:634,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:630,columnNumber:15},void 0),_.jsxDEV(fp,{children:ut&&_.jsxDEV(nr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-3",children:[_.jsxDEV("select",{value:Pe,onChange:ze=>Se(ze.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200",children:[_.jsxDEV("option",{value:"all",children:["All Routes (",pe.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:670,columnNumber:23},void 0),wt.map(ze=>_.jsxDEV("option",{value:ze.id,children:ze.name},ze.id,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:672,columnNumber:25},void 0))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:665,columnNumber:21},void 0),_.jsxDEV("button",{onClick:at,disabled:An.length===0,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 border border-blue-600 rounded-lg text-white font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["📍 Center on Buses (",An.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:678,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:658,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:656,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:629,columnNumber:13},void 0),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:693,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>Yt(!pt),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:_.jsxDEV("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${pt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:708,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:700,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:696,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:692,columnNumber:15},void 0),_.jsxDEV(fp,{children:pt&&_.jsxDEV(nr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-2 max-h-64 overflow-y-auto",children:An.length===0?_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("div",{className:"text-gray-400 text-2xl mb-2",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:729,columnNumber:25},void 0),_.jsxDEV("p",{className:"text-gray-600 text-sm",children:"No buses tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:730,columnNumber:25},void 0),_.jsxDEV("p",{className:"text-gray-500 text-xs mt-1",children:"Check connection status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:733,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:728,columnNumber:23},void 0):An.map(ze=>{const Pt=Ue[ze.busId];return _.jsxDEV(nr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 cursor-pointer transition-all duration-200 shadow-sm",onClick:()=>{const nn=Ue[ze.busId];if(nn&&a.current){a.current.flyTo({center:[nn.longitude,nn.latitude],zoom:16,duration:1e3});const yn=c.current[ze.busId];yn&&yn.getPopup().addTo(a.current)}},children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[_.jsxDEV("div",{className:"flex items-center space-x-2",children:[_.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:767,columnNumber:33},void 0),_.jsxDEV("span",{className:"font-medium text-sm text-gray-800",children:ze.busNumber},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:768,columnNumber:33},void 0),_.jsxDEV("span",{className:"text-xs text-blue-600 opacity-75",children:"👆"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:771,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:766,columnNumber:31},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:ze.eta?`${ze.eta} min`:"ETA: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:775,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:765,columnNumber:29},void 0),_.jsxDEV("div",{className:"space-y-1",children:[_.jsxDEV("div",{className:"text-xs text-gray-600",children:["📍 Route: ",ze.routeName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:782,columnNumber:31},void 0),_.jsxDEV("div",{className:"text-xs text-gray-600",children:["👨‍💼 Driver: ",ze.driverName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:785,columnNumber:31},void 0),Pt&&_.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[_.jsxDEV("span",{className:"text-green-600",children:["🕐"," ",new Date(Pt.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:790,columnNumber:35},void 0),_.jsxDEV("span",{className:"text-blue-600",children:Pt.speed?`${Pt.speed} km/h`:"Speed: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:799,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:789,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:781,columnNumber:29},void 0)]},ze.busId,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:741,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:720,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:718,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:691,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:610,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:591,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:564,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:520,columnNumber:5},void 0)},CU=pa.api.url;class NU{async makeRequest(t,a={}){let c;try{const g=Ur.getAccessToken();if(console.log("🔑 Token check for",t,":",g?"Token exists":"No token"),!g)throw console.error("❌ No access token available for",t),new Error("No access token available");const S=new AbortController;c=setTimeout(()=>S.abort(),15e3);const b=CU||pa.api.url,u=await fetch(`${b}/admin${t}`,{...a,signal:S.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`,...a.headers}}),k=await u.json();if(c&&clearTimeout(c),!u.ok)throw u.status===429?new Error("Rate limit exceeded. Please wait a moment and try again."):u.status===401?new Error("Authentication required. Please log in again."):u.status===403?new Error("Access denied. You do not have permission for this action."):u.status===404?new Error("Resource not found."):u.status===409?new Error(k.message||"Resource already exists"):u.status>=500?new Error("Server error. Please try again later."):new Error(k.message||k.error||"Request failed");return k}catch(g){return c&&clearTimeout(c),console.error(`❌ API request failed for ${t}:`,g),{success:!1,error:g instanceof Error?g.message:"Request failed"}}}async getAnalytics(){return this.makeRequest("/analytics")}async getSystemHealth(){return this.makeRequest("/health")}async getAllBuses(){var a;console.log("🚌 Fetching all buses...");const t=await this.makeRequest("/buses");return console.log("🚌 Buses result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} buses`:t.error),t}async getBusById(t){return this.makeRequest(`/buses/${t}`)}async createBus(t){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(t)})}async updateBus(t,a){return this.makeRequest(`/buses/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteBus(t){return this.makeRequest(`/buses/${t}`,{method:"DELETE"})}async getAllDrivers(){var a;console.log("👨‍💼 Fetching all drivers...");const t=await this.makeRequest("/drivers");return console.log("👨‍💼 Drivers result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} drivers`:t.error),t}async getAssignedDrivers(){var a;console.log("🚌 Fetching assigned drivers...");const t=await this.makeRequest("/assigned-drivers");return console.log("🚌 Assigned drivers result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} assigned drivers`:t.error),t}async getDriverById(t){return this.makeRequest(`/drivers/${t}`)}async assignDriverToBus(t,a){return this.makeRequest(`/drivers/${t}/assign-bus`,{method:"POST",body:JSON.stringify({busId:a})})}async unassignDriverFromBus(t){return this.makeRequest(`/drivers/${t}/unassign-bus`,{method:"POST"})}async createDriver(t){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(t)})}async updateDriver(t,a){return this.makeRequest(`/drivers/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteDriver(t){return this.makeRequest(`/drivers/${t}`,{method:"DELETE"})}async getAllRoutes(){var a;console.log("🛣️ Fetching all routes...");const t=await this.makeRequest("/routes");return console.log("🛣️ Routes result:",t.success?`${((a=t.data)==null?void 0:a.length)||0} routes`:t.error),t}async getRouteById(t){return this.makeRequest(`/routes/${t}`)}async createRoute(t){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(t)})}async updateRoute(t,a){return this.makeRequest(`/routes/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteRoute(t){return this.makeRequest(`/routes/${t}`,{method:"DELETE"})}}const ss=new NU,Ox=pa.api.url;class zx{static async makeRequest(t,a={}){let c=Ur.getAccessToken();if(!c&&Ur.isAuthenticated()){console.log("🔄 No token found but user is authenticated, attempting to refresh session...");const b=await Ur.refreshSession();if(b.success)c=Ur.getAccessToken(),console.log("✅ Session refreshed, new token obtained");else throw console.error("❌ Failed to refresh session:",b.error),new Error("Authentication required")}const g={"Content-Type":"application/json",...c&&{Authorization:`Bearer ${c}`}},S=Ox||pa.api.url;return fetch(`${S}/storage${t}`,{...a,headers:{...g,...a.headers}})}static async uploadBusImage(t,a){try{console.log("🔐 Getting access token...");const c=Ur.getAccessToken();if(!c)return console.error("❌ No access token available"),{success:!1,error:"Authentication required"};console.log("✅ Access token obtained");const g=new FormData;g.append("image",a),g.append("busId",t);const S=Ox||pa.api.url;console.log("📤 Sending request to:",`${S}/storage/upload/bus-image`),console.log("📋 FormData contents:",{busId:t,fileName:a.name,fileSize:a.size,fileType:a.type});const b=await fetch(`${S}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(console.log("📥 Response status:",b.status),console.log("📥 Response headers:",Object.fromEntries(b.headers.entries())),!b.ok){const k=await b.json();return console.error("❌ Upload failed:",k),{success:!1,error:k.error||"Upload failed"}}const u=await b.json();return console.log("✅ Upload successful:",u),{success:!0,url:u.url,fileName:u.fileName}}catch(c){return console.error("❌ Upload bus image error:",c),{success:!1,error:"Network error during upload"}}}static async uploadDriverPhoto(t,a){try{const c=Ur.getAccessToken();if(!c)return{success:!1,error:"Authentication required"};const g=new FormData;g.append("photo",a),g.append("driverId",t);const S=Ox||pa.api.url,b=await fetch(`${S}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(!b.ok)return{success:!1,error:(await b.json()).error||"Upload failed"};const u=await b.json();return{success:!0,url:u.url,fileName:u.fileName}}catch(c){return console.error("Upload driver photo error:",c),{success:!1,error:"Network error during upload"}}}static async uploadRouteMap(t,a){try{const c=Ur.getAccessToken();if(!c)return{success:!1,error:"Authentication required"};const g=new FormData;g.append("map",a),g.append("routeId",t);const S=Ox||pa.api.url,b=await fetch(`${S}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${c}`},body:g});if(!b.ok)return{success:!1,error:(await b.json()).error||"Upload failed"};const u=await b.json();return{success:!0,url:u.url,fileName:u.fileName}}catch(c){return console.error("Upload route map error:",c),{success:!1,error:"Network error during upload"}}}static async getSignedUrl(t,a){try{const c=await this.makeRequest(`/signed-url/${t}/${a}`);if(!c.ok)return{success:!1,error:(await c.json()).error||"Failed to get signed URL"};const g=await c.json();return{success:!0,signedUrl:g.signedUrl,expiresIn:g.expiresIn}}catch(c){return console.error("Get signed URL error:",c),{success:!1,error:"Network error"}}}static async deleteFile(t,a,c){try{const g=await this.makeRequest(`/delete/${t}/${a}`,{method:"DELETE",body:JSON.stringify({fileUrl:c})});return g.ok?{success:!0}:{success:!1,error:(await g.json()).error||"Delete failed"}}catch(g){return console.error("Delete file error:",g),{success:!1,error:"Network error during deletion"}}}static async getFileInfo(t,a){try{const c=await this.makeRequest(`/info/${t}/${a}`);if(!c.ok)return{success:!1,hasFile:!1,error:(await c.json()).error||"Failed to get file info"};const g=await c.json();return{success:!0,hasFile:g.hasFile,url:g.url,info:g.info}}catch(c){return console.error("Get file info error:",c),{success:!1,hasFile:!1,error:"Network error"}}}static async listFiles(t){try{const a=await this.makeRequest(`/list/${t}`);return a.ok?{success:!0,files:(await a.json()).files}:{success:!1,error:(await a.json()).error||"Failed to list files"}}catch(a){return console.error("List files error:",a),{success:!1,error:"Network error"}}}static validateFile(t,a,c){return t?a.includes(t.type)?t.size>c?{isValid:!1,error:`File too large. Maximum size: ${c/(1024*1024)}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${a.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(t){const a=["image/jpeg","image/jpg","image/png","image/webp"];return this.validateFile(t,a,5242880)}static validateDocument(t){const a=["application/pdf","image/jpeg","image/jpg","image/png"];return this.validateFile(t,a,10485760)}}function SU(){const[o,t]=de.useState("bus"),[a,c]=de.useState([]),[g,S]=de.useState([]),[b,u]=de.useState([]),[k,A]=de.useState(!0),[O,B]=de.useState(!1),[W,ie]=de.useState(null),[pe,Ve]=de.useState(""),[Pe,Se]=de.useState(null),[Ce,_e]=de.useState(null);de.useEffect(()=>{Ue()},[]);const Ue=async()=>{A(!0),Se(null);try{const[ft,bt,It]=await Promise.all([ss.getAllBuses(),ss.getAllDrivers(),ss.getAllRoutes()]);if(ft.success&&ft.data&&c(ft.data),bt.success&&bt.data){const Lt=new Map;bt.data.forEach(at=>{const Zt=at.id;if(!Lt.has(Zt))Lt.set(Zt,at);else{const bn=Lt.get(Zt);(!bn.email&&at.email||bn.email&&at.email&&!bn.first_name&&at.first_name)&&Lt.set(Zt,at)}});const hn=Array.from(Lt.values());S(hn)}It.success&&It.data&&u(It.data)}catch(ft){Se("Failed to load data"),console.error("❌ Data loading error:",ft)}finally{A(!1)}},Oe=ft=>{var It;const bt=(It=ft.target.files)==null?void 0:It[0];bt&&(ie(bt),Se(null))},Je=async()=>{if(!W||!pe){Se("Please select a file and an item");return}console.log("🚀 Starting upload...",{activeTab:o,selectedItem:pe,fileName:W.name,fileSize:W.size,fileType:W.type}),B(!0),Se(null),_e(null);try{let ft;switch(o){case"bus":console.log("📤 Uploading bus image..."),ft=await zx.uploadBusImage(pe,W);break;case"driver":console.log("📤 Uploading driver photo..."),ft=await zx.uploadDriverPhoto(pe,W);break;case"route":console.log("📤 Uploading route map..."),ft=await zx.uploadRouteMap(pe,W);break}console.log("📥 Upload result:",ft),ft.success?(_e("File uploaded successfully!"),ie(null),Ve(""),Ue()):(Se(ft.error||"Upload failed"),console.error("❌ Upload failed:",ft.error))}catch(ft){Se("Upload failed. Please try again."),console.error("❌ Upload error:",ft)}finally{B(!1)}},tt=async(ft,bt)=>{if(confirm("Are you sure you want to delete this file?"))try{const It=await zx.deleteFile(o,ft,bt);It.success?(_e("File deleted successfully!"),Ue()):Se(It.error||"Delete failed")}catch(It){Se("Delete failed. Please try again."),console.error("❌ Delete error:",It)}},ut=()=>{switch(o){case"bus":return a;case"driver":return g;case"route":return b;default:return[]}},Tt=ft=>{switch(o){case"bus":return ft.number_plate;case"driver":{const bt=ft;return`${bt.first_name} ${bt.last_name}`}case"route":return ft.name;default:return"Unknown"}},pt=ft=>{let bt=null;switch(o){case"bus":bt=ft.bus_image_url||null;break;case"driver":bt=ft.profile_photo_url||null;break;case"route":bt=ft.route_map_url||null;break;default:return null}return bt?bt.startsWith("http")?bt:bt.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${bt}`:bt:null},Yt=()=>{switch(o){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return k?_.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),_.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):_.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[_.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),Pe&&_.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:_.jsxDEV("p",{className:"text-red-700",children:Pe},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),Ce&&_.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:_.jsxDEV("p",{className:"text-green-700",children:Ce},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),_.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(ft=>_.jsxDEV("button",{onClick:()=>t(ft.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${o===ft.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:ft.name},ft.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),_.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",Yt()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),_.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),_.jsxDEV("input",{type:"file",onChange:Oe,accept:o==="route"?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),W&&_.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",W.name," (",(W.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ",o==="bus"?"Bus":o==="driver"?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),_.jsxDEV("select",{value:pe,onChange:ft=>Ve(ft.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[_.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),ut().map(ft=>_.jsxDEV("option",{value:ft.id||"",children:Tt(ft)},ft.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),_.jsxDEV("div",{className:"flex items-end",children:_.jsxDEV("button",{onClick:Je,disabled:!W||!pe||O,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:O?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),_.jsxDEV("div",{children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",Yt()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),ut().length===0?_.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):_.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ut().map(ft=>{const bt=pt(ft),It=Tt(ft);return _.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[_.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:It},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),bt?_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"mb-3",children:o!=="route"?_.jsxDEV("img",{src:bt,alt:It,className:"w-full h-32 object-cover rounded-md",onError:Lt=>{Lt.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):_.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>window.open(bt,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),_.jsxDEV("button",{onClick:()=>ft.id&&tt(ft.id,bt),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!ft.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),_.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:_.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},ft.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const po={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},EU=({onLocationSelect:o,onClose:t,title:a,defaultCenter:c=po.coordinates,searchPlaceholder:g="Search for a location..."})=>{const S=aN.useRef(Math.random().toString(36).substr(2,9)),b=de.useRef(null),u=de.useRef(null),k=de.useRef(null),[A,O]=de.useState(""),[B,W]=de.useState(null),[ie,pe]=de.useState(!0),[Ve,Pe]=de.useState(null);de.useEffect(()=>{if(!(!b.current||u.current))return console.log(`🗺️ [${S.current}] Initializing map with center:`,c),console.log(`🗺️ [${S.current}] Ganpat University coordinates:`,po.coordinates),u.current=new Ja.Map({container:b.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:po.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),u.current.on("load",()=>{var Oe;console.log("🗺️ Map loaded, adding controls and marker");try{(Oe=u.current)==null||Oe.addControl(new Ja.NavigationControl),k.current=new Ja.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(c).addTo(u.current),u.current.flyTo({center:po.coordinates,zoom:12,duration:1e3}),W({name:po.name,coordinates:po.coordinates,address:po.address}),k.current.on("dragend",()=>{var tt;const Je=(tt=k.current)==null?void 0:tt.getLngLat();Je&&Se([Je.lng,Je.lat])}),console.log(`🗺️ [${S.current}] Map centered on ${po.name}`),pe(!1)}catch(Je){console.error("❌ Error setting up map:",Je),Pe("Failed to initialize map"),pe(!1)}}),u.current.on("error",Oe=>{console.error("❌ Map error:",Oe),Pe("Map failed to load"),pe(!1)}),u.current.on("click",Oe=>{var tt;const Je=[Oe.lngLat.lng,Oe.lngLat.lat];(tt=k.current)==null||tt.setLngLat(Je),Se(Je)}),u.current.on("webglcontextlost",()=>{console.warn("⚠️ WebGL context lost, attempting to restore...")}),u.current.on("webglcontextrestored",()=>{console.log("✅ WebGL context restored")}),()=>{if(u.current){console.log("🗺️ Cleaning up map instance");try{u.current.off("load",()=>{}),u.current.off("click",()=>{}),u.current.off("error",()=>{}),u.current.off("webglcontextlost",()=>{}),u.current.off("webglcontextrestored",()=>{}),k.current&&k.current.remove(),u.current.remove()}catch(Oe){console.warn("⚠️ Error during map cleanup:",Oe)}finally{u.current=null,k.current=null}}}},[c]);const Se=async Oe=>{try{const tt=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Oe[1]}&lon=${Oe[0]}&zoom=18&addressdetails=1`)).json(),ut={name:tt.display_name.split(",")[0]||"Selected Location",coordinates:Oe,address:tt.display_name};W(ut)}catch(Je){console.error("Error reverse geocoding:",Je),W({name:"Selected Location",coordinates:Oe,address:`${Oe[1]}, ${Oe[0]}`})}},Ce=async()=>{var Oe;if(!(!A.trim()||!u.current))try{console.log("🔍 Searching for:",A);const tt=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(A)}&limit=5&countrycodes=in`)).json();if(console.log("🔍 Search results:",tt),tt.length>0){const ut=tt[0],Tt=[parseFloat(ut.lon),parseFloat(ut.lat)];console.log("🗺️ Flying to coordinates:",Tt),u.current.flyTo({center:Tt,zoom:15}),(Oe=k.current)==null||Oe.setLngLat(Tt);const pt={name:ut.display_name.split(",")[0]||A,coordinates:Tt,address:ut.display_name};W(pt)}else console.log("🔍 No search results found")}catch(Je){console.error("❌ Error searching location:",Je)}},_e=()=>{B&&(o(B),t())},Ue=Oe=>{Oe.key==="Enter"&&Ce()};return _.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[_.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[_.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),_.jsxDEV("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:_.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),_.jsxDEV("div",{className:"p-4 border-b",children:[_.jsxDEV("div",{className:"flex gap-2 mb-2",children:[_.jsxDEV("input",{type:"text",value:A,onChange:Oe=>O(Oe.target.value),onKeyPress:Ue,placeholder:g,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),_.jsxDEV("button",{onClick:Ce,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),_.jsxDEV("div",{className:"flex gap-2",children:_.jsxDEV("button",{onClick:()=>{var Oe;u.current&&(console.log("🏫 Resetting to Ganpat University at coordinates:",po.coordinates),u.current.flyTo({center:po.coordinates,zoom:12}),(Oe=k.current)==null||Oe.setLngLat(po.coordinates),W({name:po.name,coordinates:po.coordinates,address:po.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),_.jsxDEV("div",{className:"flex-1 relative",children:[ie&&_.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),Ve&&_.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",Ve]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),_.jsxDEV("button",{onClick:()=>{Pe(null),pe(!0),u.current&&(u.current.remove(),u.current=null,k.current=null);const Oe=b.current;Oe&&(Oe.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),_.jsxDEV("div",{ref:b,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),B&&_.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),_.jsxDEV("p",{className:"text-gray-700 font-medium",children:B.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),B.address&&_.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:B.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",B.coordinates[1].toFixed(6),","," ",B.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),_.jsxDEV("div",{className:"flex gap-2",children:[_.jsxDEV("button",{onClick:_e,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),_.jsxDEV("button",{onClick:t,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function DU(){const[o,t]=de.useState("buses"),[a,c]=de.useState(!1),[g,S]=de.useState(null),[b,u]=de.useState(null),[k,A]=de.useState([]),[O,B]=de.useState([]),[W,ie]=de.useState([]),[pe,Ve]=de.useState([]),[Pe,Se]=de.useState(!1),[Ce,_e]=de.useState(!1),[Ue,Oe]=de.useState(!1),[Je,tt]=de.useState(!1),[ut,Tt]=de.useState(!1),[pt,Yt]=de.useState(!1),[ft,bt]=de.useState(null),[It,Lt]=de.useState(null),[hn,at]=de.useState(!1),[Zt,bn]=de.useState(!1),[ln,Bn]=de.useState({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),[An,wt]=de.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[ze,Pt]=de.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[nn,yn]=de.useState(!1),[Ft,zt]=de.useState(!1),[mn,vr]=de.useState(""),[fn,Wn]=de.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[$r,Sr]=de.useState(!1),[ur,fi]=de.useState("destination"),[Rr,ii]=de.useState(null),[We,mr]=de.useState(null),ir=de.useCallback(async()=>{c(!0),S(null);try{const[I,G,J]=await Promise.all([ss.getAllBuses(),ss.getAllDrivers(),ss.getAllRoutes()]);if(I.success&&I.data&&A(I.data),G.success&&G.data){const se=new Map;G.data.forEach(Ne=>{const xe=Ne.id;if(!se.has(xe))se.set(xe,Ne);else{const ge=se.get(xe);(!ge.email&&Ne.email||ge.email&&Ne.email&&!ge.first_name&&Ne.first_name)&&se.set(xe,Ne)}});const he=Array.from(se.values());B(he)}J.success&&J.data&&Ve(J.data),await Vn(),(!I.success||!G.success||!J.success)&&S("Failed to load some data")}catch(I){S("An error occurred while loading data"),console.error("❌ Data loading error:",I)}finally{c(!1)}},[]);de.useEffect(()=>{ir()},[ir]);const Vn=async()=>{try{const I=await ss.getAssignedDrivers();if(I.success&&I.data){const G=new Map;I.data.forEach(se=>{const he=se.driver_id;if(!G.has(he))G.set(he,se);else{const Ne=G.get(he);(!Ne.driver_email&&se.driver_email||Ne.driver_email&&se.driver_email&&!Ne.driver_name&&se.driver_name)&&G.set(he,se)}});const J=Array.from(G.values());ie(J)}else console.warn("⚠️ Failed to load assigned drivers:",I.error),ie([])}catch(I){console.warn("⚠️ Failed to load assigned drivers:",I),ie([])}},Rn=async I=>{if(I.preventDefault(),c(!0),S(null),k.find(J=>J.code===ln.code||J.number_plate===ln.number_plate)){S(`Bus with code '${ln.code}' or number plate '${ln.number_plate}' already exists`),c(!1);return}try{const J=await ss.createBus(ln);J.success&&J.data?(A([...k,J.data]),Bn({code:"",number_plate:"",capacity:50,model:"",year:new Date().getFullYear(),is_active:!0}),Se(!1),u("Bus created successfully!"),setTimeout(()=>u(null),3e3)):S(J.error||"Failed to create bus")}catch{S("An error occurred while creating bus")}finally{c(!1)}},yr=async I=>{if(confirm("Are you sure you want to delete this bus?")){c(!0),S(null);try{const G=await ss.deleteBus(I);G.success?(A(k.filter(J=>J.id!==I)),u("Bus deleted successfully!"),setTimeout(()=>u(null),3e3)):S(G.error||"Failed to delete bus")}catch{S("An error occurred while deleting bus")}finally{c(!1)}}},si=async(I,G)=>{c(!0),S(null);try{const J=await ss.updateBus(I,{route_id:G});J.success&&J.data?(A(k.map(se=>se.id===I?{...se,route_id:G}:se)),u("Route assigned to bus successfully!"),setTimeout(()=>u(null),3e3)):S(J.error||"Failed to assign route to bus")}catch{S("An error occurred while assigning route to bus")}finally{c(!1)}},qr=async I=>{if(I.preventDefault(),c(!0),S(null),!ze.email||!ze.first_name||!ze.last_name||!ze.password){S("All fields are required: Email, First Name, Last Name, and Password"),c(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ze.email)){S("Please enter a valid email address"),c(!1);return}if(ze.password!==ze.confirm_password){S("Passwords do not match"),c(!1);return}if(ze.password.length<6){S("Password must be at least 6 characters long"),c(!1);return}if(O.find(se=>se.email===ze.email)){S("Driver with this email already exists"),c(!1);return}if(!a)try{const se={email:ze.email,first_name:ze.first_name,last_name:ze.last_name,phone:ze.phone,role:"driver",password:ze.password},he=await ss.createDriver(se);if(he.success&&he.data){const Ne=await ss.getAllDrivers();if(Ne.success&&Ne.data){const xe=new Map;Ne.data.forEach(Te=>{const Qe=Te.id;if(!xe.has(Qe))xe.set(Qe,Te);else{const ne=xe.get(Qe);(!ne.email&&Te.email||ne.email&&Te.email&&!ne.first_name&&Te.first_name)&&xe.set(Qe,Te)}});const ge=Array.from(xe.values());B(ge)}Pt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),yn(!1),zt(!1),Oe(!1),u(`Driver ${he.data.first_name} ${he.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>u(null),5e3)}else S(he.error||"Failed to create driver")}catch(se){S("An error occurred while creating driver"),console.error("❌ Error creating driver:",se)}finally{c(!1)}},ms=async(I,G)=>{c(!0),S(null);try{const J=await ss.assignDriverToBus(I,G);J.success&&J.data?(await ir(),u("Bus assigned to driver successfully!"),setTimeout(()=>u(null),3e3)):S(J.error||"Failed to assign bus to driver")}catch{S("An error occurred while assigning bus to driver")}finally{c(!1)}},Ui=async I=>{if(confirm("Are you sure you want to unassign this driver?")){c(!0),S(null);try{const G=await ss.unassignDriverFromBus(I);G.success?(await ir(),u("Driver unassigned successfully!"),setTimeout(()=>u(null),3e3)):S(G.error||"Failed to unassign driver")}catch{S("An error occurred while unassigning driver")}finally{c(!1)}}},jt=async(I,G,J)=>{const se=`${G} ${J}`,he=`Are you sure you want to delete driver "${se}"?

This action will:
• Remove the driver from all database tables
• Delete their Supabase Auth account
• Unassign them from any buses
• This action cannot be undone!`;if(confirm(he)){c(!0),S(null);try{const Ne=await ss.deleteDriver(I);Ne.success&&Ne.data?(B(O.filter(xe=>xe.id!==I)),ie(W.filter(xe=>xe.driver_id!==I)),u(`Driver "${se}" deleted successfully from all systems!`),setTimeout(()=>u(null),5e3)):S(Ne.error||`Failed to delete driver "${se}"`)}catch(Ne){S(`An error occurred while deleting driver "${se}"`),console.error("❌ Error deleting driver:",Ne)}finally{c(!1)}}},an=async I=>{if(I.preventDefault(),c(!0),S(null),!fn.name.trim()){S("Route name is required"),c(!1);return}if(!fn.city.trim()){S("City is required"),c(!1);return}if(!fn.description.trim()){S("Route description is required"),c(!1);return}try{const G={...fn,distance_km:parseFloat(fn.distance_km)||0,estimated_duration_minutes:parseInt(fn.estimated_duration_minutes)||0,custom_destination:Rr==null?void 0:Rr.name,custom_destination_coordinates:Rr==null?void 0:Rr.coordinates,custom_origin:We==null?void 0:We.name,custom_origin_coordinates:We==null?void 0:We.coordinates,bus_stops:[]},J=await ss.createRoute(G);J.success&&J.data?(Ve([...pe,J.data]),Wn({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),ii(null),mr(null),tt(!1),u("Route created successfully!"),setTimeout(()=>u(null),3e3)):S(J.error||"Failed to create route")}catch{S("An error occurred while creating route")}finally{c(!1)}},nt=async I=>{if(confirm("Are you sure you want to delete this route?")){c(!0),S(null);try{const G=await ss.deleteRoute(I);G.success?(Ve(pe.filter(J=>J.id!==I)),u("Route deleted successfully!"),setTimeout(()=>u(null),3e3)):S(G.error||"Failed to delete route")}catch{S("An error occurred while deleting route")}finally{c(!1)}}},Fn=I=>{if(!I)return"Not Assigned";const G=pe.find(he=>he.id===I);if(!G)return"Unknown Route";const J=G.city||"Unknown City",se=G.destination||"Ganpat University";return`${J} → ${se}`},Dn=I=>{fi(I),Sr(!0)},br=I=>{ur==="destination"?ii(I):mr(I)},dr=I=>{if(!I)return"Not Assigned";const G=O.find(J=>J.id===I);return G?`${G.first_name} ${G.last_name}`:"Unknown Driver"},gt=I=>I.driver_full_name?I.driver_full_name:I.driver_first_name&&I.driver_last_name?`${I.driver_first_name} ${I.driver_last_name}`:I.assigned_driver_id?dr(I.assigned_driver_id):"Not Assigned",Kt=I=>{if(!I)return"Not Assigned";const G=k.find(J=>J.id===I);return G?G.number_plate:"Unknown Bus"},$t=I=>{bt(I),at(!1),Tt(!0)},zn=I=>{bt(I),Bn({code:I.code,number_plate:I.number_plate,capacity:I.capacity,model:I.model||"",year:I.year||new Date().getFullYear(),is_active:I.is_active}),at(!0),Tt(!0)},Kr=I=>{Lt(I),bn(!1),Yt(!0)},pn=I=>{Lt(I),Wn({name:I.name,description:I.description,distance_km:I.distance_km.toString(),estimated_duration_minutes:I.estimated_duration_minutes.toString(),is_active:I.is_active,city:I.city||""}),bn(!0),Yt(!0)},ai=async I=>{if(I.preventDefault(),!!(ft!=null&&ft.id)){c(!0),S(null);try{const G=await ss.updateBus(ft.id,ln);G.success&&G.data?(A(k.map(J=>J.id===ft.id?G.data:J)),Tt(!1),at(!1),bt(null),u("Bus updated successfully!"),setTimeout(()=>u(null),3e3)):S(G.error||"Failed to update bus")}catch{S("An error occurred while updating bus")}finally{c(!1)}}},fe=async I=>{if(I.preventDefault(),!!(It!=null&&It.id)){c(!0),S(null);try{const G={...fn,distance_km:parseFloat(fn.distance_km)||0,estimated_duration_minutes:parseInt(fn.estimated_duration_minutes)||0},J=await ss.updateRoute(It.id,G);J.success&&J.data?(Ve(pe.map(se=>se.id===It.id?J.data:se)),Yt(!1),bn(!1),Lt(null),u("Route updated successfully!"),setTimeout(()=>u(null),3e3)):S(J.error||"Failed to update route")}catch{S("An error occurred while updating route")}finally{c(!1)}}};return a?_.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[_.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),_.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):_.jsxDEV("div",{className:"space-y-6",children:[_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),_.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),_.jsxDEV("button",{onClick:ir,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),b&&_.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:_.jsxDEV("p",{className:"text-green-800",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),g&&_.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:_.jsxDEV("p",{className:"text-red-800",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),_.jsxDEV("div",{className:"border-b border-gray-200",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[_.jsxDEV("button",{onClick:()=>t("buses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="buses"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🚌 Buses (",k.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>t("drivers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="drivers"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["👨‍💼 Drivers (",O.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>t("routes"),className:`py-2 px-1 border-b-2 font-medium text-sm ${o==="routes"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["🗺️ Routes (",pe.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),o==="buses"&&_.jsxDEV("div",{className:"space-y-6",children:_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:_.jsxDEV("button",{onClick:()=>Se(!Pe),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Pe?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),Pe&&_.jsxDEV("form",{onSubmit:Rn,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:ln.code,onChange:I=>Bn({...ln,code:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:ln.number_plate,onChange:I=>Bn({...ln,number_plate:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:ln.capacity,onChange:I=>Bn({...ln,capacity:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),_.jsxDEV("input",{type:"text",value:ln.model,onChange:I=>Bn({...ln,model:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),_.jsxDEV("input",{type:"number",value:ln.year,onChange:I=>Bn({...ln,year:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:ln.is_active,onChange:I=>Bn({...ln,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end",children:_.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",I.capacity," | ",I.model," (",I.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:gt(I)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_name||Fn(I.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_id?(()=>{const G=pe.find(J=>J.id===I.route_id);return(G==null?void 0:G.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:_.jsxDEV("div",{className:"flex flex-col space-y-2",children:[_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>$t(I),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),_.jsxDEV("button",{onClick:()=>zn(I),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),_.jsxDEV("button",{onClick:()=>yr(I.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),_.jsxDEV("select",{onChange:G=>si(I.id,G.target.value),value:I.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),pe.map(G=>_.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.name},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),o==="drivers"&&_.jsxDEV("div",{className:"space-y-6",children:[_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>Oe(!Ue),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:Ue?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),_.jsxDEV("button",{onClick:()=>_e(!Ce),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Ce?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),Ce&&_.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),_.jsxDEV("select",{required:!0,value:mn,onChange:I=>vr(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),O.map(I=>_.jsxDEV("option",{value:I.id,className:"text-gray-900",children:[I.first_name," ",I.last_name," (",I.email,")"]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),O.length===0&&_.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),_.jsxDEV("select",{required:!0,value:An.assigned_bus_id||"",onChange:I=>wt({...An,assigned_bus_id:I.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),k.map(I=>_.jsxDEV("option",{value:I.id,className:"text-gray-900",children:[I.number_plate," (",I.model||"Unknown Model",")"]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[_.jsxDEV("button",{type:"button",onClick:()=>{_e(!1),vr(""),wt({...An,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),_.jsxDEV("button",{onClick:()=>ms(mn,An.assigned_bus_id),disabled:a||!mn||!An.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),Ue&&_.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[_.jsxDEV("div",{className:"mb-4",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),_.jsxDEV("form",{onSubmit:qr,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),_.jsxDEV("input",{type:"email",required:!0,value:ze.email,onChange:I=>Pt({...ze,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),_.jsxDEV("input",{type:"text",required:!0,value:ze.first_name,onChange:I=>Pt({...ze,first_name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),_.jsxDEV("input",{type:"text",required:!0,value:ze.last_name,onChange:I=>Pt({...ze,last_name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),_.jsxDEV("input",{type:"tel",value:ze.phone,onChange:I=>Pt({...ze,phone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{type:nn?"text":"password",required:!0,value:ze.password,onChange:I=>{console.log("Password input changed:",I.target.value),Pt({...ze,password:I.target.value})},onFocus:I=>{console.log("Password field focused"),I.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>yn(!nn),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:nn?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",ze.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{type:Ft?"text":"password",required:!0,value:ze.confirm_password,onChange:I=>{console.log("Confirm password input changed:",I.target.value),Pt({...ze,confirm_password:I.target.value})},onFocus:I=>{console.log("Confirm password field focused"),I.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>zt(!Ft),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:Ft?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[ze.password!==ze.confirm_password&&ze.confirm_password.length>0&&_.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),ze.password===ze.confirm_password&&ze.confirm_password.length>0&&_.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),_.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[_.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),_.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[_.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),_.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),_.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),_.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),_.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-end space-x-2",children:[_.jsxDEV("button",{type:"button",onClick:()=>{Oe(!1),Pt({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),yn(!1),zt(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),_.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),_.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[_.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),_.jsxDEV("button",{onClick:async()=>{try{const I=await ss.getAllDrivers();if(I.success&&I.data){const G=new Map;I.data.forEach(se=>{const he=se.id;if(!G.has(he))G.set(he,se);else{const Ne=G.get(he);(!Ne.email&&se.email||Ne.email&&se.email&&!Ne.first_name&&se.first_name)&&G.set(he,se)}});const J=Array.from(G.values());B(J)}else console.warn("⚠️ Manual refresh failed:",I.error)}catch(I){console.warn("⚠️ Manual refresh failed:",I)}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),O.length>0?_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:O.map(I=>_.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[_.jsxDEV("div",{className:"font-medium text-gray-900",children:[I.first_name," ",I.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),_.jsxDEV("div",{className:"text-sm text-gray-600",children:I.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),_.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",I.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):_.jsxDEV("div",{className:"text-center py-4",children:[_.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),_.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),_.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[I.first_name," ",I.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",I.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:Kt(I.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[_.jsxDEV("select",{onChange:G=>ms(I.id,G.target.value),value:I.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[_.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),k.map(G=>_.jsxDEV("option",{value:G.id,className:"text-gray-900",children:G.number_plate},G.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),_.jsxDEV("button",{onClick:()=>jt(I.id,I.first_name,I.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:[W.length," driver",W.length!==1?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),W.length===0?_.jsxDEV("div",{className:"text-center py-8",children:[_.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),_.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),_.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[_.jsxDEV("button",{onClick:()=>Ui(I.driver_id),disabled:a,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>{const G=O.find(J=>J.id===I.driver_id);G&&jt(G.id,G.first_name,G.last_name)},disabled:a,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},I.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),o==="routes"&&_.jsxDEV("div",{className:"space-y-6",children:_.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),_.jsxDEV("div",{className:"flex space-x-2",children:_.jsxDEV("button",{onClick:()=>tt(!Je),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:Je?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),Je&&_.jsxDEV("form",{onSubmit:an,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:fn.name,onChange:I=>Wn({...fn,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:fn.city,onChange:I=>Wn({...fn,city:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:fn.distance_km,onChange:I=>Wn({...fn,distance_km:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:fn.estimated_duration_minutes,onChange:I=>Wn({...fn,estimated_duration_minutes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:fn.is_active,onChange:I=>Wn({...fn,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),_.jsxDEV("textarea",{value:fn.description,onChange:I=>Wn({...fn,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-2",children:[_.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),Rr&&_.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[_.jsxDEV("div",{className:"font-medium text-green-800",children:Rr.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-green-600",children:Rr.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Dn("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-2",children:[_.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),We&&_.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[_.jsxDEV("div",{className:"font-medium text-blue-800",children:We.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-blue-600",children:We.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),_.jsxDEV("button",{type:"button",onClick:()=>Dn("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),_.jsxDEV("div",{className:"mt-4 flex justify-end",children:_.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),_.jsxDEV("div",{className:"overflow-x-auto",children:_.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsxDEV("thead",{className:"bg-gray-50",children:_.jsxDEV("tr",{children:[_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),_.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),_.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(I=>_.jsxDEV("tr",{className:"hover:bg-gray-50",children:[_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{children:[_.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:I.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("div",{className:"text-sm text-gray-900",children:I.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[_.jsxDEV("div",{className:"text-sm text-gray-900",children:[I.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),_.jsxDEV("div",{className:"text-sm text-gray-900",children:[I.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),_.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:_.jsxDEV("div",{className:"flex space-x-2",children:[_.jsxDEV("button",{onClick:()=>Kr(I),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>pn(I),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),_.jsxDEV("button",{onClick:()=>nt(I.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},I.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),$r&&_.jsxDEV(EU,{onLocationSelect:br,onClose:()=>Sr(!1),title:ur==="destination"?"Select Destination":"Select Origin",searchPlaceholder:ur==="destination"?"Search for destination...":"Search for origin..."},`map-selector-${ur}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),ut&&ft&&_.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:_.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:hn?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),_.jsxDEV("button",{onClick:()=>{Tt(!1),at(!1),bt(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),hn?_.jsxDEV("form",{onSubmit:ai,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:ln.code,onChange:I=>Bn({...ln,code:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:ln.number_plate,onChange:I=>Bn({...ln,number_plate:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:ln.capacity,onChange:I=>Bn({...ln,capacity:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),_.jsxDEV("input",{type:"text",value:ln.model,onChange:I=>Bn({...ln,model:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),_.jsxDEV("input",{type:"number",value:ln.year,onChange:I=>Bn({...ln,year:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:new Date().getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:ln.is_active,onChange:I=>Bn({...ln,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[_.jsxDEV("button",{type:"button",onClick:()=>at(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),_.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:ft.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:ft.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[ft.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:ft.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:ft.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ft.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ft.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:gt(ft)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:ft.route_name||Fn(ft.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:_.jsxDEV("button",{onClick:()=>at(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),pt&&It&&_.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:_.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[_.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:Zt?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),_.jsxDEV("button",{onClick:()=>{Yt(!1),bn(!1),Lt(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),Zt?_.jsxDEV("form",{onSubmit:fe,className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:fn.name,onChange:I=>Wn({...fn,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),_.jsxDEV("input",{type:"text",required:!0,value:fn.city,onChange:I=>Wn({...fn,city:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:fn.distance_km,onChange:I=>Wn({...fn,distance_km:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),_.jsxDEV("input",{type:"number",required:!0,value:fn.estimated_duration_minutes,onChange:I=>Wn({...fn,estimated_duration_minutes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("input",{type:"checkbox",checked:fn.is_active,onChange:I=>Wn({...fn,is_active:I.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),_.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),_.jsxDEV("div",{children:[_.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),_.jsxDEV("textarea",{value:fn.description,onChange:I=>Wn({...fn,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[_.jsxDEV("button",{type:"button",onClick:()=>bn(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),_.jsxDEV("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:It.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:It.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[It.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:[It.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),_.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${It.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:It.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:It.created_at?new Date(It.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),It.description&&_.jsxDEV("div",{children:[_.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-gray-900",children:It.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:_.jsxDEV("button",{onClick:()=>bn(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function lj(){const[o,t]=de.useState(null),[a,c]=de.useState(null),[g,S]=de.useState(!0),[b,u]=de.useState(null),[k,A]=de.useState("overview");de.useEffect(()=>{O()},[]);const O=async()=>{S(!0),u(null);try{const[ie,pe]=await Promise.all([ss.getAnalytics(),ss.getSystemHealth()]);ie.success&&ie.data&&t(ie.data),pe.success&&pe.data&&c(pe.data),(!ie.success||!pe.success)&&u("Failed to load dashboard data")}catch(ie){u("An error occurred while loading dashboard data"),console.error("❌ Dashboard data loading error:",ie)}finally{S(!1)}},B=async()=>{try{await Ur.signOut(),window.location.href="/"}catch(ie){console.error("❌ Sign out error:",ie)}},W=Ur.getCurrentProfile();return g?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),_.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):b?_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:_.jsxDEV("div",{className:"text-center",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),_.jsxDEV("p",{className:"text-red-200 mb-4",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),_.jsxDEV("button",{onClick:O,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[_.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:_.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[_.jsxDEV("div",{className:"flex items-center",children:_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),_.jsxDEV("div",{className:"flex items-center space-x-4",children:[_.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(W==null?void 0:W.first_name)||(W==null?void 0:W.full_name)||(W==null?void 0:W.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),_.jsxDEV("button",{onClick:O,className:"btn-primary text-sm",disabled:g,children:g?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),_.jsxDEV("button",{onClick:B,className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),_.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxDEV("div",{className:"border-b border-white/20",children:_.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[_.jsxDEV("button",{onClick:()=>A("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${k==="overview"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>A("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${k==="analytics"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:164,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>A("management"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${k==="management"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:174,columnNumber:13},this),_.jsxDEV("button",{onClick:()=>A("media"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${k==="media"?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"}`,children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:151,columnNumber:7},this),_.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[k==="overview"&&_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[_.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:214,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:220,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:219,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:218,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:206,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:242,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:252,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:251,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:234,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:232,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:274,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:280,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:265,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:264,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:_.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:302,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:21},this),_.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:_.jsxDEV("dl",{children:[_.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:312,columnNumber:25},this),_.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(a==null?void 0:a.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:311,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:310,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:292,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:13},this),o&&_.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:335,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeBuses,"/",o.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:334,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:343,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeRoutes,"/",o.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:342,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:351,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.activeDrivers,"/",o.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:350,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:329,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:328,columnNumber:17},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:364,columnNumber:21},this),_.jsxDEV("div",{className:"space-y-3",children:[_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:369,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-white",children:[o.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:368,columnNumber:23},this),_.jsxDEV("div",{className:"flex justify-between",children:[_.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:377,columnNumber:25},this),_.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:376,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:363,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:362,columnNumber:17},this),_.jsxDEV("div",{className:"card-glass overflow-hidden",children:_.jsxDEV("div",{className:"p-5",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:390,columnNumber:21},this),_.jsxDEV("div",{className:"text-sm text-white/70",children:a!=null&&a.timestamp?new Date(a.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:389,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:201,columnNumber:11},this),k==="analytics"&&o&&_.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:_.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:17},this),_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[_.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:o.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:414,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[_.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:423,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:o.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:422,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[_.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:431,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:o.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:430,columnNumber:19},this),_.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[_.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:439,columnNumber:21},this),_.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[o.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:438,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:15},this),_.jsxDEV("div",{className:"card-glass p-6",children:[_.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:451,columnNumber:17},this),_.jsxDEV("div",{className:"space-y-4",children:[_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:456,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${o.activeBuses/o.totalBuses*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:461,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:460,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeBuses,"/",o.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:455,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:474,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${o.activeRoutes/o.totalRoutes*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:478,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeRoutes,"/",o.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:473,columnNumber:19},this),_.jsxDEV("div",{className:"flex items-center justify-between",children:[_.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:492,columnNumber:21},this),_.jsxDEV("div",{className:"flex items-center",children:[_.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:_.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${o.activeDrivers/o.totalDrivers*100}%`}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:497,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:496,columnNumber:23},this),_.jsxDEV("span",{className:"text-sm text-white/70",children:[o.activeDrivers,"/",o.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:406,columnNumber:11},this),k==="management"&&_.jsxDEV(DU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:516,columnNumber:40},this),k==="media"&&_.jsxDEV(SU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:199,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}const TU=({children:o,variant:t="primary",size:a="md",className:c="",onClick:g,disabled:S=!1,loading:b=!1,icon:u,iconPosition:k="left"})=>{const A="relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",O={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},B={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"};return _.jsxDEV(nr.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:S||b,className:`
        ${A}
        ${O[a]}
        ${B[t]}
        hover:-translate-y-0.5 active:translate-y-0
        ${c}
      `,children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),_.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[b&&_.jsxDEV(nr.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),u&&k==="left"&&!b&&_.jsxDEV("span",{className:"flex-shrink-0",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),_.jsxDEV("span",{children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),u&&k==="right"&&!b&&_.jsxDEV("span",{className:"flex-shrink-0",children:u},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0)};function PU({onLoginSuccess:o}){const t=ey(),{setTransition:a}=b0(),[c,g]=de.useState(!1),[S,b]=de.useState(null),[u,k]=de.useState(""),[A,O]=de.useState(""),[B,W]=de.useState(""),[ie,pe]=de.useState(null);de.useEffect(()=>{setTimeout(async()=>{try{for(console.log("🔄 Attempting automatic session recovery...");!Ur.isInitialized();)await new Promise(Oe=>setTimeout(Oe,100));const Ue=await Ur.recoverSession();Ue.success&&Ur.isAdmin()?(console.log("✅ Session recovered, redirecting to admin panel"),Pe()):console.log("📝 Session recovery failed or user is not admin:",Ue.error)}catch(Ue){console.log("📝 No valid session to recover:",Ue)}},2e3)},[]);const Ve=async _e=>{_e.preventDefault(),g(!0),b(null),pe(null);try{const Ue=new Promise((tt,ut)=>{setTimeout(()=>ut(new Error("Login timeout")),5e3)}),Oe=Ur.signIn(u,A),Je=await Promise.race([Oe,Ue]);Je.success&&Je.user?Je.user.role==="admin"?(pe("Login successful! Loading admin dashboard..."),setTimeout(()=>{Pe()},500)):(b("Access denied. Admin privileges required."),await Ur.signOut()):b(Je.error||"Login failed. Please check your credentials.")}catch(Ue){console.error("❌ Login error:",Ue),Ue instanceof Error&&Ue.message==="Login timeout"?b("Login timed out. This might be due to slow network or profile loading. Please try again."):Ue instanceof Error&&Ue.message.includes("environment variables")?b("Configuration error. Please check your environment setup."):Ue instanceof Error&&Ue.message.includes("Profile loading timeout")?b("Profile loading is taking longer than expected. Please try again."):b("Network error. Please check your connection and try again.")}finally{g(!1)}},Pe=()=>{a("login-to-dashboard"),setTimeout(()=>{o?o():t("/admin-dashboard",{replace:!0})},500)},Se=async()=>{g(!0),b(null);try{(await Ur.recoverSession()).success&&Ur.isAdmin()?(pe("Session recovered! Redirecting..."),setTimeout(()=>{Pe()},1e3)):b("No valid session found. Please log in again.")}catch{b("Session recovery failed. Please log in again.")}finally{g(!1)}},Ce=async()=>{g(!0),b(null);try{await Ur.forceFreshLogin(),pe("Session cleared. Please log in again with your credentials.")}catch{b("Failed to clear session.")}finally{g(!1)}};return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[_.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[_.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:166,columnNumber:9},this),_.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:167,columnNumber:9},this),_.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:165,columnNumber:7},this),_.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((_e,Ue)=>_.jsxDEV(nr.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,delay:Math.random()*5},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},Ue,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:174,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:172,columnNumber:7},this),_.jsxDEV(nr.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:_.jsxDEV(Ov,{variant:"ultra",glow:!0,className:"p-8 relative",children:[_.jsxDEV(nr.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[_.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:210,columnNumber:15},this),_.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:217,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:209,columnNumber:13},this),_.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:225,columnNumber:13},this),_.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:11},this),_.jsxDEV(nr.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:Ve,className:"space-y-6",children:[_.jsxDEV(nr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[_.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:247,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:u,onChange:_e=>k(_e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:254,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:242,columnNumber:13},this),_.jsxDEV(nr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[_.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:276,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:A,onChange:_e=>O(_e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:295,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:13},this),_.jsxDEV(nr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[_.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",_.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:309,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:305,columnNumber:15},this),_.jsxDEV("div",{className:"relative",children:[_.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:B,onChange:_e=>W(_e.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:c},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:312,columnNumber:17},this),_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:323,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:300,columnNumber:13},this),_.jsxDEV(fp,{children:c&&_.jsxDEV(nr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:_.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[_.jsxDEV(nr.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:337,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:328,columnNumber:13},this),_.jsxDEV(fp,{children:S&&_.jsxDEV(nr.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:363,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:362,columnNumber:21},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:23},this),_.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:S},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:361,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:355,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:353,columnNumber:13},this),_.jsxDEV(fp,{children:ie&&_.jsxDEV(nr.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:396,columnNumber:21},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:410,columnNumber:23},this),_.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:ie},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:413,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:387,columnNumber:13},this),_.jsxDEV(nr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:_.jsxDEV(TU,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:c,loading:c,icon:_.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:439,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:433,columnNumber:19},this),children:c?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:426,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:421,columnNumber:13},this),_.jsxDEV(nr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[_.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[_.jsxDEV("button",{type:"button",onClick:Se,disabled:c,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:17},this),_.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:468,columnNumber:17},this),_.jsxDEV("button",{type:"button",onClick:Ce,disabled:c,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:459,columnNumber:15},this),_.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[_.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:480,columnNumber:17},this),_.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:163,columnNumber:5},this)}const jU=({children:o,className:t=""})=>_.jsxDEV(nr.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:t,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),pC=({children:o,className:t=""})=>_.jsxDEV(nr.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:t,children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),kU=()=>{const o=ey(),[t,a]=de.useState(!1);de.useEffect(()=>{const b=()=>{a(window.innerWidth<768)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const{setTransition:c}=b0(),g=b=>{b.includes("login")?c("homepage-to-login"):b.includes("student")||b.includes("student-map")?c("homepage-to-map"):c("default"),setTimeout(()=>{o(b)},200)},S=t?8:20;return _.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:_.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[_.jsxDEV(nr.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[_.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:_.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:58,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:57,columnNumber:11},void 0),_.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:62,columnNumber:11},void 0),_.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:51,columnNumber:9},void 0),_.jsxDEV(jU,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[_.jsxDEV(pC,{children:_.jsxDEV(nr.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:80,columnNumber:15},void 0),_.jsxDEV(Ov,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>g("/driver-login"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",children:_.jsxDEV(gU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:90,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:89,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:92,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:95,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:88,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:102,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:101,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:82,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:72,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:71,columnNumber:11},void 0),_.jsxDEV(pC,{children:_.jsxDEV(nr.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:118,columnNumber:15},void 0),_.jsxDEV(Ov,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>g("/student-map"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",children:_.jsxDEV(vU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:127,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:130,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:133,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:126,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:140,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:139,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:120,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:110,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:109,columnNumber:11},void 0),_.jsxDEV(pC,{children:_.jsxDEV(nr.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[_.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:156,columnNumber:15},void 0),_.jsxDEV(Ov,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>g("/admin-login"),children:[_.jsxDEV("div",{className:"text-center px-2",children:[_.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",children:_.jsxDEV(yU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:166,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:19},void 0),_.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:168,columnNumber:19},void 0),_.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:171,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:164,columnNumber:17},void 0),_.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:_.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:178,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:177,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:158,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:148,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:147,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:69,columnNumber:9},void 0),_.jsxDEV(nr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:_.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:192,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:186,columnNumber:9},void 0),_.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(S)].map((b,u)=>_.jsxDEV(nr.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},u,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:201,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:199,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:49,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:47,columnNumber:5},void 0)};function AU(){console.log("🚀 App component is rendering...");const[o,t]=de.useState(null),[a,c]=de.useState(!0),[g,S]=de.useState(null),[b,u]=de.useState({isAuthenticated:!1,user:null,loading:!0});de.useEffect(()=>{(async()=>{try{for(c(!0);!Ur.isInitialized();)await new Promise(W=>setTimeout(W,100));const B=await qv.getHealth();t(B),S(null)}catch(B){S(B instanceof Error?B.message:"Failed to connect to backend"),t(null)}finally{c(!1)}})()},[]),de.useEffect(()=>{const O=()=>{const B=Ur.getCurrentUser();u({isAuthenticated:!!B,user:B?{id:B.id,email:B.email||"",role:"student",created_at:B.created_at,updated_at:B.updated_at}:null,loading:!1})};return Ur.onAuthStateChange(O),O(),()=>{Ur.removeAuthStateChangeListener()}},[]);const k=()=>{var O,B,W,ie,pe,Ve,Pe,Se,Ce,_e;return _.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:_.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:97,columnNumber:11},this),_.jsxDEV("div",{className:"space-y-6",children:[a&&_.jsxDEV("div",{className:"text-center",children:[_.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:104,columnNumber:17},this),_.jsxDEV("p",{className:"text-white/70 mt-4",children:"Checking backend connection..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:103,columnNumber:15},this),g&&_.jsxDEV("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:120,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:115,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:114,columnNumber:19},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:128,columnNumber:21},this),_.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:131,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:113,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:112,columnNumber:15},this),o&&_.jsxDEV("div",{className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:_.jsxDEV("div",{className:"flex",children:[_.jsxDEV("div",{className:"flex-shrink-0",children:_.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:146,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:141,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:140,columnNumber:19},this),_.jsxDEV("div",{className:"ml-3",children:[_.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Backend Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:21},this),_.jsxDEV("div",{className:"text-sm text-green-200 mt-1 space-y-1",children:[_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:25},this)," ",o.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Database:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:25},this)," ",((B=(O=o.services)==null?void 0:O.database)==null?void 0:B.status)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:161,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Environment:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:25},this)," ",o.environment]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:165,columnNumber:23},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:169,columnNumber:25},this)," ",new Date(o.timestamp).toLocaleString()]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:168,columnNumber:23},this),((ie=(W=o.services)==null?void 0:W.database)==null?void 0:ie.details)&&_.jsxDEV("div",{className:"mt-2 text-xs",children:[_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"PostgreSQL:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:175,columnNumber:29},this)," ",((pe=o.services.database.details.details)==null?void 0:pe.postgresVersion)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:174,columnNumber:27},this),_.jsxDEV("p",{children:[_.jsxDEV("strong",{children:"Pool Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:29},this)," ",`Total: ${((Ve=o.services.database.details.details)==null?void 0:Ve.poolSize)||0}, Idle: ${((Pe=o.services.database.details.details)==null?void 0:Pe.idleCount)||0}, Waiting: ${((Se=o.services.database.details.details)==null?void 0:Se.waitingCount)||0}`]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:179,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:173,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:157,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:153,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:139,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:138,columnNumber:15},this),_.jsxDEV("div",{className:"text-center text-sm text-white/60 mt-6",children:[_.jsxDEV("p",{children:"Phase 5: Admin Panel & Analytics Dashboard ✅"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:192,columnNumber:15},this),_.jsxDEV("p",{className:"mt-1",children:"Role-based access control, analytics charts, and system management"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:193,columnNumber:15},this),b.isAuthenticated&&_.jsxDEV("p",{className:"mt-2 text-green-400",children:["✅ Authenticated as:"," ",((Ce=b.user)==null?void 0:Ce.full_name)||((_e=b.user)==null?void 0:_e.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:198,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:191,columnNumber:13},this),_.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[_.jsxDEV(Nf,{to:"/driver",className:"btn-primary text-center block",children:"🚌 Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:207,columnNumber:15},this),_.jsxDEV(Nf,{to:"/student",className:"btn-primary text-center block",children:"👨‍🎓 Student Map (Live Tracking)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:211,columnNumber:15},this),_.jsxDEV(Nf,{to:"/admin",className:"btn-primary text-center block",children:"👨‍💼 Admin Panel (Phase 5)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:215,columnNumber:15},this),_.jsxDEV(Nf,{to:"/premium-demo",className:"btn-secondary text-center block",children:"✨ Premium UI Demo"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:96,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:95,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:94,columnNumber:5},this)},A=()=>_.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:_.jsxDEV("div",{className:"max-w-md w-full mx-auto text-center",children:_.jsxDEV("div",{className:"card-glass p-8",children:[_.jsxDEV("h1",{className:"text-6xl font-bold gradient-text mb-4",children:"404"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:237,columnNumber:11},this),_.jsxDEV("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Page Not Found"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:238,columnNumber:11},this),_.jsxDEV("p",{className:"text-white/70 mb-6",children:"The page you're looking for doesn't exist."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:241,columnNumber:11},this),_.jsxDEV(Nf,{to:"/",className:"btn-primary inline-block",children:"Go Back Home"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:236,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:235,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:234,columnNumber:5},this);return _.jsxDEV(i3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:_.jsxDEV(dU,{children:_.jsxDEV(pU,{children:_.jsxDEV($V,{children:[_.jsxDEV(vl,{path:"/",element:_.jsxDEV(kU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:13},this),_.jsxDEV(vl,{path:"/legacy",element:_.jsxDEV(k,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:13},this),_.jsxDEV(vl,{path:"/driver",element:_.jsxDEV(Az,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:13},this),_.jsxDEV(vl,{path:"/student",element:_.jsxDEV(oj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:45},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:13},this),_.jsxDEV(vl,{path:"/admin",element:_.jsxDEV(lj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:43},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:13},this),_.jsxDEV(vl,{path:"/driver-login",element:_.jsxDEV(xU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:50},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:13},this),_.jsxDEV(vl,{path:"/driver-dashboard",element:_.jsxDEV(_U,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:13},this),_.jsxDEV(vl,{path:"/student-map",element:_.jsxDEV(oj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:13},this),_.jsxDEV(vl,{path:"/admin-login",element:_.jsxDEV(PU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:13},this),_.jsxDEV(vl,{path:"/admin-dashboard",element:_.jsxDEV(lj,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:53},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:13},this),_.jsxDEV(vl,{path:"*",element:_.jsxDEV(A,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:256,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:254,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:253,columnNumber:5},this)}const MU=()=>{{const o=console.warn;console.warn=(...t)=>{const a=t[0];typeof a=="string"&&(a.includes("React Router Future Flag Warning")||a.includes("v7_startTransition")||a.includes("v7_relativeSplatPath"))||typeof a=="string"&&a.includes("WebGL context was lost")||typeof a=="string"&&(a.includes("Firefox can't establish a connection")||a.includes("connection was interrupted while the page was loading"))||o.apply(console,t)}}},RU=window.fetch;window.fetch=async function(o,t){if(typeof o=="string"&&(o.includes(pa.api.url)||o.includes("localhost")))try{let a=Ur.getAccessToken();!a&&Ur.isAuthenticated()&&(console.log("🔄 No token found but user is authenticated, attempting to refresh session..."),(await Ur.refreshSession()).success&&(a=Ur.getAccessToken(),console.log("✅ Session refreshed, new token obtained"))),a&&(t=t||{},t.headers={...t.headers,Authorization:`Bearer ${a}`})}catch{console.log("🔓 Public access - authentication not available")}return RU(o,t)};MU();const cy=document.createElement("link");cy.rel="preload";cy.as="font";cy.href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap";cy.crossOrigin="anonymous";document.head.appendChild(cy);vC.createRoot(document.getElementById("root")).render(_.jsxDEV(aN.StrictMode,{children:_.jsxDEV(AU,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:23,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:22,columnNumber:3},void 0));
//# sourceMappingURL=index-Ce2mRPuc.js.map
