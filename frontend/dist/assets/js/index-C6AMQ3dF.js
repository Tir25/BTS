var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))s.call(t,n)&&l(e,n,t[n]);return e},c=(e,r)=>t(e,n(r)),d=(e,t,n)=>l(e,"symbol"!=typeof t?t+"":t,n),m=(e,t,n)=>new Promise((r,o)=>{var i=e=>{try{l(n.next(e))}catch(t){o(t)}},s=e=>{try{l(n.throw(e))}catch(t){o(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);l((n=n.apply(e,t)).next())});import{r as u,a as h,b as f,c as b,u as g,d as p,R as N,B as v,e as x,f as C,L as j}from"./react-vendor-CFdVWrG1.js";import{l as y}from"./socket-vendor-CUkmNz_4.js";import{m as D}from"./map-vendor-z8efZ2K0.js";import{m as E,A as w}from"./ui-vendor-CX-gmi1L.js";var P,S,_=(P={"assets/js/index-C6AMQ3dF.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={exports:{}},n={};!function(){var e,t=u,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),p=Symbol.iterator,N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];!function(e,t,n){var r=N.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var o=n.map(function(e){return String(e)});o.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,o)}("error",e,n)}function x(e){return e.displayName||"Context"}function C(e){if(null==e)return null;if("number"==typeof e.tag&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case o:return"Portal";case l:return"Profiler";case s:return"StrictMode";case m:return"Suspense";case h:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case c:return x(e)+".Consumer";case a:return x(e._context)+".Provider";case d:return function(e,t,n){var r=e.displayName;if(r)return r;var o=t.displayName||t.name||"";return""!==o?n+"("+o+")":n}(e,e.render,"ForwardRef");case f:var t=e.displayName||null;return null!==t?t:C(e.type)||"Memo";case b:var n=e,r=n._payload,u=n._init;try{return C(u(r))}catch(g){return null}}return null}e=Symbol.for("react.module.reference");var j,y,D,E,w,P,S,_=Object.assign,V=0;function k(){}k.__reactDisabledLog=!0;var A,M=N.ReactCurrentDispatcher;function T(e,t,n){if(void 0===A)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);A=r&&r[1]||""}return"\n"+A+e}var I,R=!1,L="function"==typeof WeakMap?WeakMap:Map;function O(e,t){if(!e||R)return"";var n,r=I.get(e);if(void 0!==r)return r;R=!0;var o,i=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=M.current,M.current=null,function(){if(0===V){j=console.log,y=console.info,D=console.warn,E=console.error,w=console.group,P=console.groupCollapsed,S=console.groupEnd;var e={configurable:!0,enumerable:!0,value:k,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}V++}();try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(f){n=f}Reflect.construct(e,[],s)}else{try{s.call()}catch(f){n=f}e.call(s.prototype)}}else{try{throw Error()}catch(f){n=f}e()}}catch(b){if(b&&n&&"string"==typeof b.stack){for(var l=b.stack.split("\n"),a=n.stack.split("\n"),c=l.length-1,d=a.length-1;c>=1&&d>=0&&l[c]!==a[d];)d--;for(;c>=1&&d>=0;c--,d--)if(l[c]!==a[d]){if(1!==c||1!==d)do{if(c--,--d<0||l[c]!==a[d]){var m="\n"+l[c].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),"function"==typeof e&&I.set(e,m),m}}while(c>=1&&d>=0);break}}}finally{R=!1,M.current=o,function(){if(0===--V){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:_({},e,{value:j}),info:_({},e,{value:y}),warn:_({},e,{value:D}),error:_({},e,{value:E}),group:_({},e,{value:w}),groupCollapsed:_({},e,{value:P}),groupEnd:_({},e,{value:S})})}V<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=i}var u=e?e.displayName||e.name:"",h=u?T(u):"";return"function"==typeof e&&I.set(e,h),h}function $(e,t,n){if(null==e)return"";if("function"==typeof e)return O(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return T(e);switch(e){case m:return T("Suspense");case h:return T("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case d:return O(e.render,!1);case f:return $(e.type,t,n);case b:var o=e,i=o._payload,s=o._init;try{return $(s(i),t,n)}catch(l){}}return""}I=new L;var F=Object.prototype.hasOwnProperty,B={},U=N.ReactDebugCurrentFrame;function H(e){if(e){var t=e._owner,n=$(e.type,e._source,t?t.type:null);U.setExtraStackFrame(n)}else U.setExtraStackFrame(null)}var q=Array.isArray;function W(e){return q(e)}function z(e){return""+e}function G(e){if(function(e){try{return z(e),!1}catch(t){return!0}}(e))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),z(e)}var K,J,Y,Z=N.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,t,n,o,i){var s,l={},a=null,c=null;for(s in void 0!==n&&(G(n),a=""+n),function(e){if(F.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(G(t.key),a=""+t.key),function(e){if(F.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(c=t.ref,function(e,t){if("string"==typeof e.ref&&Z.current&&t&&Z.current.stateNode!==t){var n=C(Z.current.type);Y[n]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',C(Z.current.type),e.ref),Y[n]=!0)}}(t,i)),t)F.call(t,s)&&!X.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps){var d=e.defaultProps;for(s in d)void 0===l[s]&&(l[s]=d[s])}if(a||c){var m="function"==typeof e?e.displayName||e.name||"Unknown":e;a&&function(e,t){var n=function(){K||(K=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(l,m),c&&function(e,t){var n=function(){J||(J=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(l,m)}return function(e,t,n,o,i,s,l){var a={$$typeof:r,type:e,key:t,ref:n,props:l,_owner:s,_store:{}};return Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(a,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(a,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a}(e,a,c,i,o,Z.current,l)}Y={};var ee,te=N.ReactCurrentOwner,ne=N.ReactDebugCurrentFrame;function re(e){if(e){var t=e._owner,n=$(e.type,e._source,t?t.type:null);ne.setExtraStackFrame(n)}else ne.setExtraStackFrame(null)}function oe(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function ie(){if(te.current){var e=C(te.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ee=!1;var se={};function le(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ie();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!se[n]){se[n]=!0;var r="";e&&e._owner&&e._owner!==te.current&&(r=" It was passed a child from "+C(e._owner.type)+"."),re(e),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),re(null)}}}function ae(e,t){if("object"==typeof e)if(W(e))for(var n=0;n<e.length;n++){var r=e[n];oe(r)&&le(r,t)}else if(oe(e))e._store&&(e._store.validated=!0);else if(e){var o=function(e){if(null===e||"object"!=typeof e)return null;var t=p&&e[p]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof o&&o!==e.entries)for(var i,s=o.call(e);!(i=s.next()).done;)oe(i.value)&&le(i.value,t)}}function ce(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==d&&n.$$typeof!==f)return;t=n.propTypes}if(t){var r=C(n);!function(e,t,n,r,o){var i=Function.call.bind(F);for(var s in e)if(i(e,s)){var l=void 0;try{if("function"!=typeof e[s]){var a=Error((r||"React class")+": "+n+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}l=e[s](t,s,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(c){l=c}!l||l instanceof Error||(H(o),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,s,typeof l),H(null)),l instanceof Error&&!(l.message in B)&&(B[l.message]=!0,H(o),v("Failed %s type: %s",n,l.message),H(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||ee||(ee=!0,v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",C(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var de={},me=function(t,n,o,u,p,N){var x=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===l||t===s||t===m||t===h||t===g||"object"==typeof t&&null!==t&&(t.$$typeof===b||t.$$typeof===f||t.$$typeof===a||t.$$typeof===c||t.$$typeof===d||t.$$typeof===e||void 0!==t.getModuleId)}(t);if(!x){var j="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(j+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var y,D=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(p);j+=D||ie(),null===t?y="null":W(t)?y="array":void 0!==t&&t.$$typeof===r?(y="<"+(C(t.type)||"Unknown")+" />",j=" Did you accidentally export a JSX literal instead of a component?"):y=typeof t,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",y,j)}var E=Q(t,n,o,p,N);if(null==E)return E;if(x){var w=n.children;if(void 0!==w)if(u)if(W(w)){for(var P=0;P<w.length;P++)ae(w[P],t);Object.freeze&&Object.freeze(w)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ae(w,t)}if(F.call(n,"key")){var S=C(t),_=Object.keys(n).filter(function(e){return"key"!==e}),V=_.length>0?"{key: someKey, "+_.join(": ..., ")+": ...}":"{key: someKey}";de[S+V]||(v('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',V,S,_.length>0?"{"+_.join(": ..., ")+": ...}":"{}",S),de[S+V]=!0)}return t===i?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){re(e),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),re(null);break}}null!==e.ref&&(re(e),v("Invalid attribute `ref` supplied to `React.Fragment`."),re(null))}(E):ce(E),E};n.Fragment=i,n.jsxDEV=me}(),t.exports=n;var r=t.exports,o={},i=h,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;o.createRoot=function(e,t){s.usingClientEntryPoint=!0;try{return i.createRoot(e,t)}finally{s.usingClientEntryPoint=!1}},o.hydrateRoot=function(e,t,n){s.usingClientEntryPoint=!0;try{return i.hydrateRoot(e,t,n)}finally{s.usingClientEntryPoint=!1}};const l={},P=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,n&&o.setAttribute("nonce",n),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})};class S extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class _ extends S{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class V extends S{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class k extends S{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var A,M;(M=A||(A={})).Any="any",M.ApNortheast1="ap-northeast-1",M.ApNortheast2="ap-northeast-2",M.ApSouth1="ap-south-1",M.ApSoutheast1="ap-southeast-1",M.ApSoutheast2="ap-southeast-2",M.CaCentral1="ca-central-1",M.EuCentral1="eu-central-1",M.EuWest1="eu-west-1",M.EuWest2="eu-west-2",M.EuWest3="eu-west-3",M.SaEast1="sa-east-1",M.UsEast1="us-east-1",M.UsWest1="us-west-1",M.UsWest2="us-west-2";var T=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};class I{constructor(t,{headers:n={},customFetch:r,region:o=A.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=(t=>{let n;return n=t||("undefined"==typeof fetch?(...t)=>P(()=>m(e,null,function*(){const{default:e}=yield Promise.resolve().then(()=>K);return{default:e}}),void 0).then(({default:e})=>e(...t)):fetch),(...e)=>n(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return T(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:i}=t;let s={},{region:l}=t;l||(l=this.region);const a=new URL(`${this.url}/${e}`);let c;l&&"any"!==l&&(s["x-region"]=l,a.searchParams.set("forceFunctionRegion",l)),i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=i):"string"==typeof i?(s["Content-Type"]="text/plain",c=i):"undefined"!=typeof FormData&&i instanceof FormData?c=i:(s["Content-Type"]="application/json",c=JSON.stringify(i)));const d=yield this.fetch(a.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:c}).catch(e=>{throw new _(e)}),m=d.headers.get("x-relay-error");if(m&&"true"===m)throw new V(d);if(!d.ok)throw new k(d);let u,h=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield d.json():"application/octet-stream"===h?yield d.blob():"text/event-stream"===h?d:"multipart/form-data"===h?yield d.formData():yield d.text(),{data:u,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof k||r instanceof V?r.context:void 0}}})}}var R={},L={},O={},$={},F={},B={},U=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const H=U.fetch,q=U.fetch.bind(U),W=U.Headers,z=U.Request,G=U.Response,K=Object.freeze(Object.defineProperty({__proto__:null,Headers:W,Request:z,Response:G,default:q,fetch:H},Symbol.toStringTag,{value:"Module"})),J=f(K);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});let Z=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Y.default=Z;var X=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(B,"__esModule",{value:!0});const Q=X(J),ee=X(Y);B.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Q.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(e=>m(this,null,function*(){var t,n,r,o;let i=null,s=null,l=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=yield e.text();""===n||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const o=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),d=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");o&&d&&d.length>1&&(l=parseInt(d[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,a=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=yield e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,a=200,c="OK")}catch(d){404===e.status&&""===t?(a=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(o=null==i?void 0:i.details)||void 0===o?void 0:o.includes("0 rows"))&&(i=null,a=200,c="OK"),i&&this.shouldThrowOnError)throw new ee.default(i)}return{error:i,data:s,count:l,status:a,statusText:c}}));return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var te=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});const ne=te(B);let re=class extends ne.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}={}){const i=o?`${o}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const o=void 0===r?"offset":`${r}.offset`,i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}={}){var s;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),a=null!==(s=this.headers.get("Accept"))&&void 0!==s?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${a}"; options=${l};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};F.default=re;var oe=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($,"__esModule",{value:!0});const ie=oe(F);let se=class extends ie.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let o="";"plain"===r?o="pl":"phrase"===r?o="ph":"websearch"===r&&(o="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};$.default=se;var le=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});const ae=le($);O.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let o=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer",`count=${n}`),new ae.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ae.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ae.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new ae.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new ae.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var ce=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(L,"__esModule",{value:!0});const de=ce(O),me=ce($);L.default=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new de.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:o}={}){var i;let s;const l=new URL(`${this.url}/rpc/${e}`);let a;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(s="POST",a=t);const c=new Headers(this.headers);return o&&c.set("Prefer",`count=${o}`),new me.default({method:s,url:l,headers:c,schema:this.schemaName,body:a,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}};var ue=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R,"__esModule",{value:!0}),R.PostgrestError=R.PostgrestBuilder=R.PostgrestTransformBuilder=R.PostgrestFilterBuilder=R.PostgrestQueryBuilder=R.PostgrestClient=void 0;const he=ue(L);R.PostgrestClient=he.default;const fe=ue(O);R.PostgrestQueryBuilder=fe.default;const be=ue($);R.PostgrestFilterBuilder=be.default;const ge=ue(F);R.PostgrestTransformBuilder=ge.default;const pe=ue(B);R.PostgrestBuilder=pe.default;const Ne=ue(Y);R.PostgrestError=Ne.default;var ve=R.default={PostgrestClient:he.default,PostgrestQueryBuilder:fe.default,PostgrestFilterBuilder:be.default,PostgrestTransformBuilder:ge.default,PostgrestBuilder:pe.default,PostgrestError:Ne.default};const{PostgrestClient:xe,PostgrestQueryBuilder:Ce,PostgrestFilterBuilder:je,PostgrestTransformBuilder:ye,PostgrestBuilder:De,PostgrestError:Ee}=ve;class we{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Pe=1e4;var Se,_e,Ve,ke,Ae,Me,Te,Ie,Re,Le,Oe;(_e=Se||(Se={}))[_e.connecting=0]="connecting",_e[_e.open=1]="open",_e[_e.closing=2]="closing",_e[_e.closed=3]="closed",(ke=Ve||(Ve={})).closed="closed",ke.errored="errored",ke.joined="joined",ke.joining="joining",ke.leaving="leaving",(Me=Ae||(Ae={})).close="phx_close",Me.error="phx_error",Me.join="phx_join",Me.reply="phx_reply",Me.leave="phx_leave",Me.access_token="access_token",(Te||(Te={})).websocket="websocket",(Re=Ie||(Ie={})).Connecting="connecting",Re.Open="open",Re.Closing="closing",Re.Closed="closed";class $e{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const s=n.decode(e.slice(i,i+r));i+=r;const l=n.decode(e.slice(i,i+o));return i+=o,{ref:null,topic:s,event:l,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Fe{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Oe=Le||(Le={})).abstime="abstime",Oe.bool="bool",Oe.date="date",Oe.daterange="daterange",Oe.float4="float4",Oe.float8="float8",Oe.int2="int2",Oe.int4="int4",Oe.int4range="int4range",Oe.int8="int8",Oe.int8range="int8range",Oe.json="json",Oe.jsonb="jsonb",Oe.money="money",Oe.numeric="numeric",Oe.oid="oid",Oe.reltime="reltime",Oe.text="text",Oe.time="time",Oe.timestamp="timestamp",Oe.timestamptz="timestamptz",Oe.timetz="timetz",Oe.tsrange="tsrange",Oe.tstzrange="tstzrange";const Be=(e,t,n={})=>{var r;const o=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((n,r)=>(n[r]=Ue(r,e,t,o),n),{})},Ue=(e,t,n,r)=>{const o=t.find(t=>t.name===e),i=null==o?void 0:o.type,s=n[e];return i&&!r.includes(i)?He(i,s):qe(s)},He=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Ke(t,n)}switch(e){case Le.bool:return We(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return ze(t);case Le.json:case Le.jsonb:return Ge(t);case Le.timestamp:return Je(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:default:return qe(t)}},qe=e=>e,We=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ze=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ge=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Ke=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(o){r=i?i.split(","):[]}return r.map(e=>He(t,e))}return e},Je=e=>"string"==typeof e?e.replace(" ","T"):e,Ye=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ze{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xe,Qe,et,tt,nt,rt,ot,it;(Qe=Xe||(Xe={})).SYNC="sync",Qe.JOIN="join",Qe.LEAVE="leave";class st{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=st.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=st.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=st.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const o=this.cloneDeep(e),i=this.transformState(t),s={},l={};return this.map(o,(e,t)=>{i[e]||(l[e]=t)}),this.map(i,(e,t)=>{const n=o[e];if(n){const r=t.map(e=>e.presence_ref),o=n.map(e=>e.presence_ref),i=t.filter(e=>o.indexOf(e.presence_ref)<0),a=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(s[e]=i),a.length>0&&(l[e]=a)}else s[e]=t}),this.syncDiff(o,{joins:s,leaves:l},n,r)}static syncDiff(e,t,n,r){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(t,r)=>{var o;const i=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let o=e[t];if(!o)return;const i=n.map(e=>e.presence_ref);o=o.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=o,r(t,o,n),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(tt=et||(et={})).ALL="*",tt.INSERT="INSERT",tt.UPDATE="UPDATE",tt.DELETE="DELETE",(rt=nt||(nt={})).BROADCAST="broadcast",rt.PRESENCE="presence",rt.POSTGRES_CHANGES="postgres_changes",rt.SYSTEM="system",(it=ot||(ot={})).SUBSCRIBED="SUBSCRIBED",it.TIMED_OUT="TIMED_OUT",it.CLOSED="CLOSED",it.CHANNEL_ERROR="CHANNEL_ERROR";class lt{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ze(this,Ae.join,this.params,this.timeout),this.rejoinTimer=new Fe(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ae.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new st(this),this.broadcastEndpointURL=Ye(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:o,presence:i,private:s}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],a=!!this.bindings[nt.PRESENCE]&&this.bindings[nt.PRESENCE].length>0,c={},d={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:a}),postgres_changes:l,private:s};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(ot.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(ot.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",t=>m(this,[t],function*({postgres_changes:t}){var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,o=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<o;n++){const o=r[n],{filter:{event:s,schema:l,table:a,filter:c}}=o,d=t&&t[n];if(!d||d.event!==s||d.schema!==l||d.table!==a||d.filter!==c)return this.unsubscribe(),this.state=Ve.errored,void(null==e||e(ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(ot.SUBSCRIBED))}null==e||e(ot.SUBSCRIBED)})).receive("error",t=>{this.state=Ve.errored,null==e||e(ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){return m(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return m(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this.state===Ve.joined&&e===nt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}send(e){return m(this,arguments,function*(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,o,i;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(o=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===o?void 0:o.broadcast)||void 0===i?void 0:i.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:i,payload:s}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const e=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return yield null===(r=e.body)||void 0===r?void 0:r.cancel(),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ve.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ae.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Ze(this,Ae.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}_fetchWithTimeout(e,t,n){return m(this,null,function*(){const r=new AbortController,o=setTimeout(()=>r.abort(),n),i=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),i})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ze(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,o;const i=e.toLocaleLowerCase(),{close:s,error:l,leave:a,join:c}=Ae;if(n&&[s,l,a,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(d,n)):null===(o=this.bindings[i])||void 0===o||o.filter(e=>{var n,r,o,s,l,a;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===s||(null==s?void 0:s.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const n=null===(l=null===(s=null==e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===l?void 0:l.toLocaleLowerCase();return"*"===n||n===(null===(a=null==t?void 0:t.event)||void 0===a?void 0:a.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:o,errors:i}=e,s={schema:t,table:n,commit_timestamp:r,eventType:o,new:{},old:{},errors:i};d=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&lt.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ae.close,{},e)}_onError(e){this._on(Ae.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Be(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Be(e.columns,e.old_record)),t}}const at=()=>{},ct=25e3,dt=10,mt=100,ut=[1e3,2e3,5e3,1e4];class ht{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pe,this.transport=null,this.heartbeatIntervalMs=ct,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=at,this.ref=0,this.reconnectTimer=null,this.logger=at,this.conn=null,this.sendBuffer=[],this.serializer=new $e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>P(()=>m(this,null,function*(){const{default:e}=yield Promise.resolve().then(()=>K);return{default:e}}),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Te.websocket}`,this.httpEndpoint=Ye(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=we.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return m(this,null,function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t})}removeAllChannels(){return m(this,null,function*(){const e=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Se.connecting:return Ie.Connecting;case Se.open:return Ie.Open;case Se.closing:return Ie.Closing;default:return Ie.Closed}}isConnected(){return this.connectionState()===Ie.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new lt(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:o}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${o})`,r),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e=null){return m(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return m(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},mt);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:o}=e,i=o?`(${o})`:"",s=r.status||"";this.log("receive",`${s} ${t} ${n} ${i}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ae.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(e=null){return m(this,null,function*(){let t;t=e||(this.accessToken?yield this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(Ae.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return m(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Fe(()=>m(this,null,function*(){setTimeout(()=>m(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),dt)}),this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,o,i,s,l,a;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:Pe,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:ct,this.worker=null!==(o=null==e?void 0:e.worker)&&void 0!==o&&o,this.accessToken=null!==(i=null==e?void 0:e.accessToken)&&void 0!==i?i:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(s=null==e?void 0:e.reconnectAfterMs)&&void 0!==s?s:e=>ut[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(a=null==e?void 0:e.decode)&&void 0!==a?a:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class ft extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bt(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class gt extends ft{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pt extends ft{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Nt=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};const vt=t=>{let n;return n=t||("undefined"==typeof fetch?(...t)=>P(()=>m(e,null,function*(){const{default:e}=yield Promise.resolve().then(()=>K);return{default:e}}),void 0).then(({default:e})=>e(...t)):fetch),(...e)=>n(...e)},xt=e=>{if(Array.isArray(e))return e.map(e=>xt(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=xt(n)}),t};var Ct=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};const jt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yt=(e,t,n)=>Ct(void 0,void 0,void 0,function*(){const r=yield Nt(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield P(()=>Promise.resolve().then(()=>K),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,o=(null==n?void 0:n.statusCode)||r+"";t(new gt(jt(n),r,o))}).catch(e=>{t(new pt(jt(e),e))}):t(new pt(jt(e),e))}),Dt=(e,t,n,r)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),o.body=JSON.stringify(r)):o.body=r,(null==t?void 0:t.duplex)&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n)):o};function Et(e,t,n,r,o,i){return Ct(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,Dt(t,r,o,i)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>yt(e,l,r))})})}function wt(e,t,n,r){return Ct(this,void 0,void 0,function*(){return Et(e,"GET",t,n,r)})}function Pt(e,t,n,r,o){return Ct(this,void 0,void 0,function*(){return Et(e,"POST",t,r,o,n)})}function St(e,t,n,r,o){return Ct(this,void 0,void 0,function*(){return Et(e,"PUT",t,r,o,n)})}function _t(e,t,n,r,o){return Ct(this,void 0,void 0,function*(){return Et(e,"DELETE",t,r,o,n)})}var Vt=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};const kt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},At={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mt{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=vt(r)}uploadOrUpdate(e,t,n,r){return Vt(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},At),r);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const l=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${i.cacheControl}`,s["content-type"]=i.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),(null==r?void 0:r.headers)&&(s=Object.assign(Object.assign({},s),r.headers));const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),d=yield("PUT"==e?St:Pt)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:s},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:a,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(bt(o))return{data:null,error:o};throw o}})}upload(e,t,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Vt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${i}`);s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:At.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType),{data:{path:o,fullPath:(yield St(this.fetch,s.toString(),e,{headers:i})).Key},error:null}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const o=yield Pt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+o.url),s=i.searchParams.get("token");if(!s)throw new ft("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield Pt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Vt(this,void 0,void 0,function*(){try{const r=yield Pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}download(e,t){return Vt(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield wt(this.fetch,`${this.url}/${n}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}info(e){return Vt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield wt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xt(e),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}exists(e){return Vt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Ct(this,void 0,void 0,function*(){return Et(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(bt(n)&&n instanceof pt){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],o=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&r.push(o);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==s&&r.push(s);let l=r.join("&");return""!==l&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}remove(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Vt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},kt),t),{prefix:e||""});return{data:yield Pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}listV2(e,t){return Vt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Pt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Tt={"X-Client-Info":"storage-js/2.11.0"};var It=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};class Rt{constructor(e,t={},n,r){const o=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Tt),t),this.fetch=vt(n)}listBuckets(){return It(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bt(e))return{data:null,error:e};throw e}})}getBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return It(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return It(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield Pt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}}class Lt extends Rt{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Mt(this.url,this.headers,e,this.fetch)}}let Ot="";Ot="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const $t={headers:{"X-Client-Info":`supabase-js-${Ot}/2.56.0`}},Ft={schema:"public"},Bt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ut={};var Ht=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};const qt=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?q:fetch),(...e)=>t(...e)})(n),o="undefined"==typeof Headers?W:Headers;return(n,i)=>Ht(void 0,void 0,void 0,function*(){var s;const l=null!==(s=yield t())&&void 0!==s?s:e;let a=new o(null==i?void 0:i.headers);return a.has("apikey")||a.set("apikey",e),a.has("Authorization")||a.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},i),{headers:a}))})};var Wt=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};const zt="2.71.1",Gt=3e4,Kt=9e4,Jt={"X-Client-Info":`gotrue-js/${zt}`},Yt="X-Supabase-Api-Version",Zt={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Xt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Qt extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function en(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class tn extends Qt{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class nn extends Qt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rn extends Qt{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class on extends rn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class sn extends rn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ln extends rn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class an extends rn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cn extends rn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dn extends rn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function mn(e){return en(e)&&"AuthRetryableFetchError"===e.name}class un extends rn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class hn extends rn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bn=" \t\n\r=".split(""),gn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<bn.length;t+=1)e[bn[t].charCodeAt(0)]=-2;for(let t=0;t<fn.length;t+=1)e[fn[t].charCodeAt(0)]=t;return e})();function pn(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(fn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(fn[e]),t.queuedBits-=6}}function Nn(e,t,n){const r=gn[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function vn(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)Nn(e.charCodeAt(s),o,i);return t.join("")}function xn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Cn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)Nn(e.charCodeAt(o),n,r);return new Uint8Array(t)}function jn(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}xn(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function yn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>pn(e,n,r)),pn(null,n,r),t.join("")}const Dn=()=>"undefined"!=typeof window&&"undefined"!=typeof document,En={tested:!1,writable:!1},wn=()=>{if(!Dn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(En.tested)return En.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),En.tested=!0,En.writable=!0}catch(t){En.tested=!0,En.writable=!1}return En.writable},Pn=t=>{let n;return n=t||("undefined"==typeof fetch?(...t)=>P(()=>m(e,null,function*(){const{default:e}=yield Promise.resolve().then(()=>K);return{default:e}}),void 0).then(({default:e})=>e(...t)):fetch),(...e)=>n(...e)},Sn=(t,n,r)=>m(e,null,function*(){yield t.setItem(n,JSON.stringify(r))}),_n=(t,n)=>m(e,null,function*(){const e=yield t.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(r){return e}}),Vn=(t,n)=>m(e,null,function*(){yield t.removeItem(n)});class kn{constructor(){this.promise=new kn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function An(e){const t=e.split(".");if(3!==t.length)throw new hn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Xt.test(t[n]))throw new hn("JWT not in base64url format");return{header:JSON.parse(vn(t[0])),payload:JSON.parse(vn(t[1])),signature:Cn(t[2]),raw:{header:t[0],payload:t[1]}}}function Mn(e){return("0"+e.toString(16)).substr(-2)}function Tn(e){return m(this,null,function*(){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return e;const t=yield function(e){return m(this,null,function*(){const t=(new TextEncoder).encode(e),n=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")})}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function In(e,t,n=!1){return m(this,null,function*(){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Mn).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),yield Sn(e,`${t}-code-verifier`,o);const i=yield Tn(r);return[i,r===i?"plain":"s256"]})}kn.promiseConstructor=Promise;const Rn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Ln=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function On(e){if(!Ln.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $n(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fn(e){return JSON.parse(JSON.stringify(e))}const Bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Un=[502,503,504];function Hn(e){return m(this,null,function*(){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new dn(Bn(e),0);if(Un.includes(e.status))throw new dn(Bn(e),e.status);let r,o;try{r=yield e.json()}catch(s){throw new nn(Bn(s),s)}const i=function(e){const t=e.headers.get(Yt);if(!t)return null;if(!t.match(Rn))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(s){return null}}(e);if(i&&i.getTime()>=Zt.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?o=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(o=r.error_code),o){if("weak_password"===o)throw new un(Bn(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new on}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new un(Bn(r),e.status,r.weak_password.reasons);throw new tn(Bn(r),e.status||500,o)})}function qn(e,t,n,r){return m(this,null,function*(){var o;const i=Object.assign({},null==r?void 0:r.headers);i[Yt]||(i[Yt]=Zt.name),(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=null==r?void 0:r.query)&&void 0!==o?o:{};(null==r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",a=yield function(e,t,n,r,o,i){return m(this,null,function*(){const s=((e,t,n,r)=>{const o={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))})(t,r,o,i);let l;try{l=yield e(n,Object.assign({},s))}catch(a){throw new dn(Bn(a),0)}if(l.ok||(yield Hn(l)),null==r?void 0:r.noResolveJson)return l;try{return yield l.json()}catch(a){yield Hn(a)}})}(e,t,n+l,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(a):{data:Object.assign({},a),error:null}})}function Wn(e){var t;let n=null;var r;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r))),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function zn(e){const t=Wn(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Gn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Kn(e){return{data:e,error:null}}function Jn(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function Yn(e){return e}const Zn=["global","local","others"];class Xn{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Pn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return m(this,arguments,function*(e,t=Zn[0]){if(Zn.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zn.join(", ")}`);try{return yield qn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}inviteUserByEmail(e){return m(this,arguments,function*(e,t={}){try{return yield qn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Gn})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return m(this,null,function*(){try{const{options:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),yield qn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Jn,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(en(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return m(this,null,function*(){try{return yield qn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Gn})}catch(t){if(en(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return m(this,null,function*(){var t,n,r,o,i,s,l;try{const a={nextPage:null,lastPage:0,total:0},c=yield qn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:Yn});if(c.error)throw c.error;const d=yield c.json(),m=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,u=null!==(l=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==l?l:[];return u.length>0&&(u.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);a[`${n}Page`]=t}),a.total=parseInt(m)),{data:Object.assign(Object.assign({},d),a),error:null}}catch(a){if(en(a))return{data:{users:[]},error:a};throw a}})}getUserById(e){return m(this,null,function*(){On(e);try{return yield qn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Gn})}catch(t){if(en(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return m(this,null,function*(){On(e);try{return yield qn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Gn})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}})}deleteUser(e,t=!1){return m(this,null,function*(){On(e);try{return yield qn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Gn})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}})}_listFactors(e){return m(this,null,function*(){On(e.userId);try{const{data:t,error:n}=yield qn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(en(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return m(this,null,function*(){On(e.userId),On(e.id);try{return{data:yield qn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}}function Qn(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const er=!!(globalThis&&wn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class tr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nr extends tr{}function rr(e,t,n){return m(this,null,function*(){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},r=>m(this,null,function*(){if(!r){if(0===t)throw new nr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(er)try{yield globalThis.navigator.locks.query()}catch(o){}return yield n()}try{return yield n()}finally{}})))})}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const or={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function ir(e,t,n){return m(this,null,function*(){return yield n()})}const sr={};class lr{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lr.nextInstanceID,lr.nextInstanceID+=1,this.instanceID>0&&Dn();const r=Object.assign(Object.assign({},or),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Xn({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Pn(r.fetch),this.lock=r.lock||ir,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Dn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=rr:this.lock=ir,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:wn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qn(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Qn(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",e=>m(this,null,function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=sr[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=sr[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zt}) ${(new Date).toISOString()}`,...e),this}initialize(){return m(this,null,function*(){return this.initializePromise||(this.initializePromise=(()=>m(this,null,function*(){return yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._initialize()}))}))()),yield this.initializePromise})}_initialize(){return m(this,null,function*(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":(yield this._isPKCECallback(t))&&(n="pkce"),Dn()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:o}=yield this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return en(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return yield this._removeSession(),{error:o}}const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),yield this._saveSession(i),setTimeout(()=>m(this,null,function*(){"recovery"===s?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return en(t)?{error:t}:{error:new nn("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return m(this,null,function*(){var t,n,r;try{const o=yield qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Wn}),{data:i,error:s}=o;if(s||!i)return{data:{user:null,session:null},error:s};const l=i.session,a=i.user;return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:a,session:l},error:null}}catch(o){if(en(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return m(this,null,function*(){var t,n,r;try{let o;if("email"in e){const{email:n,password:r,options:i}=e;let s=null,l=null;"pkce"===this.flowType&&([s,l]=yield In(this.storage,this.storageKey)),o=yield qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:l},xform:Wn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;o=yield qn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null==s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Wn})}}const{data:i,error:s}=o;if(s||!i)return{data:{user:null,session:null},error:s};const l=i.session,a=i.user;return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:a,session:l},error:null}}catch(o){if(en(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return m(this,null,function*(){try{let t;if("email"in e){const{email:n,password:r,options:o}=e;t=yield qn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:zn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:o}=e;t=yield qn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:zn})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new sn}}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return m(this,null,function*(){var t,n,r,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return m(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>m(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return m(this,null,function*(){const{chain:t}=e;if("solana"===t)return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)})}signInWithSolana(e){return m(this,null,function*(){var t,n,r,o,i,s,l,a,c,d,m,u;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:m,wallet:u,statement:b,options:g}=e;let p;if(Dn())if("object"==typeof u)p=u;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");p=e.solana}else{if("object"!=typeof u||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=u}const N=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in p&&p.signIn){const e=yield p.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in p&&"function"==typeof p.signMessage&&"publicKey"in p&&"object"==typeof p&&p.publicKey&&"toBase58"in p.publicKey&&"function"==typeof p.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${N.host} wants you to sign in with your Solana account:`,p.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=yield p.signMessage((new TextEncoder).encode(h),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=yield qn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:yn(f)},(null===(m=e.options)||void 0===m?void 0:m.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:Wn});if(n)throw n;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new sn}}catch(b){if(en(b))return{data:{user:null,session:null},error:b};throw b}})}_exchangeCodeForSession(e){return m(this,null,function*(){const t=yield _n(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:o}=yield qn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Wn});if(yield Vn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new sn}}catch(o){if(en(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return m(this,null,function*(){try{const{options:t,provider:n,token:r,access_token:o,nonce:i}=e,s=yield qn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Wn}),{data:l,error:a}=s;return a?{data:{user:null,session:null},error:a}:l&&l.session&&l.user?(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:a}):{data:{user:null,session:null},error:new sn}}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return m(this,null,function*(){var t,n,r,o,i;try{if("email"in e){const{email:r,options:o}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=yield In(this.storage,this.storageKey));const{error:l}=yield qn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(n=null==o?void 0:o.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:i,code_challenge_method:s},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:l}=yield qn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(o=null==n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:l}}throw new ln("You must provide either an email or phone number.")}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}})}verifyOtp(e){return m(this,null,function*(){var t,n;try{let r,o;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:s}=yield qn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Wn});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,a=i.user;return(null==l?void 0:l.access_token)&&(yield this._saveSession(l),yield this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:a,session:l},error:null}}catch(r){if(en(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithSSO(e){return m(this,null,function*(){var t,n,r;try{let o=null,i=null;return"pkce"===this.flowType&&([o,i]=yield In(this.storage,this.storageKey)),yield qn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Kn})}catch(o){if(en(o))return{data:null,error:o};throw o}})}reauthenticate(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return m(this,null,function*(){try{return yield this._useSession(e=>m(this,null,function*(){const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new on;const{error:r}=yield qn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(en(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return m(this,null,function*(){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:o}=e,{error:i}=yield qn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:o}=e,{data:i,error:s}=yield qn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:s}}throw new ln("You must provide either an email or phone number and a type")}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return this._useSession(e=>m(this,null,function*(){return e}))}))})}_acquireLock(e,t){return m(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(()=>m(this,null,function*(){return yield e,yield t()}))();return this.pendingInLock.push((()=>m(this,null,function*(){try{yield n}catch(e){}}))()),n}return yield this.lock(`lock:${this.storageKey}`,e,()=>m(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((()=>m(this,null,function*(){try{yield e}catch(t){}}))()),yield e;this.pendingInLock.length;){const e=[...this.pendingInLock];yield Promise.all(e),this.pendingInLock.splice(0,e.length)}return yield e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return m(this,null,function*(){this._debug("#_useSession","begin");try{const t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return m(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=yield _n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Kt;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=yield _n(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=$n()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return m(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return m(this,null,function*(){try{return e?yield qn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Gn}):yield this._useSession(e=>m(this,null,function*(){var t,n,r;const{data:o,error:i}=e;if(i)throw i;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?yield qn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Gn}):{data:{user:null},error:new on}}))}catch(t){if(en(t))return function(e){return en(e)&&"AuthSessionMissingError"===e.name}(t)&&(yield this._removeSession(),yield Vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(e){return m(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(e){return m(this,arguments,function*(e,t={}){try{return yield this._useSession(n=>m(this,null,function*(){const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new on;const i=r.session;let s=null,l=null;"pkce"===this.flowType&&null!=e.email&&([s,l]=yield In(this.storage,this.storageKey));const{data:a,error:c}=yield qn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:i.access_token,xform:Gn});if(c)throw c;return i.user=a.user,yield this._saveSession(i),yield this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(n){if(en(n))return{data:{user:null},error:n};throw n}})}setSession(e){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return m(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new on;const t=Date.now()/1e3;let n=t,r=!0,o=null;const{payload:i}=An(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=yield this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:r,error:i}=yield this._getUser(e.access_token);if(i)throw i;o={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(en(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return m(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n;if(!e){const{data:r,error:o}=t;if(o)throw o;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new on;const{session:r,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return m(this,null,function*(){try{if(!Dn())throw new an("No browser detected.");if(e.error||e.error_description||e.error_code)throw new an(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new cn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new an("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cn("No code detected.");const{data:t,error:n}=yield this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:i,expires_in:s,expires_at:l,token_type:a}=e;if(!(o&&s&&i&&a))throw new an("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let m=c+d;l&&(m=parseInt(l));const{data:u,error:h}=yield this._getUser(o);if(h)throw h;const f={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:m,refresh_token:i,token_type:a,user:u.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(en(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){return m(this,null,function*(){const t=yield _n(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)})}signOut(){return m(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return m(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>m(this,null,function*(){var n;const{data:r,error:o}=t;if(o)return{error:o};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=yield this.admin.signOut(i,e);if(t&&(!function(e){return en(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(yield this._removeSession(),yield Vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(()=>{m(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){this._emitInitialSession(t)}))})})(),{data:{subscription:n}}}_emitInitialSession(e){return m(this,null,function*(){return yield this._useSession(t=>m(this,null,function*(){var n,r;try{const{data:{session:r},error:o}=t;if(o)throw o;yield null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(o){yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o)}}))})}resetPasswordForEmail(e){return m(this,arguments,function*(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=yield In(this.storage,this.storageKey,!0));try{return yield qn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(en(o))return{data:null,error:o};throw o}})}getUserIdentities(){return m(this,null,function*(){var e;try{const{data:t,error:n}=yield this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(en(t))return{data:null,error:t};throw t}})}linkIdentity(e){return m(this,null,function*(){var t;try{const{data:n,error:r}=yield this._useSession(t=>m(this,null,function*(){var n,r,o,i,s;const{data:l,error:a}=t;if(a)throw a;const c=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return yield qn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(i=l.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})}));if(r)throw r;return Dn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(en(n))return{data:{provider:e.provider,url:null},error:n};throw n}})}unlinkIdentity(e){return m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n,r;const{data:o,error:i}=t;if(i)throw i;return yield qn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(en(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return m(this,null,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return yield function(e,t){return new Promise((n,r)=>{(()=>{m(this,null,function*(){for(let i=0;i<1/0;i++)try{const r=yield e(i);if(!t(i,null,r))return void n(r)}catch(o){if(!t(i,o))return void r(o)}})})()})}(n=>m(this,null,function*(){return n>0&&(yield function(e){return m(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}(200*Math.pow(2,n-1))),this._debug(t,"refreshing attempt",n),yield qn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wn})}),(e,t)=>{const r=200*Math.pow(2,e);return t&&mn(t)&&Date.now()+r-n<Gt})}catch(n){if(this._debug(t,"error",n),en(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}})}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return m(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Dn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){return m(this,null,function*(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=yield _n(this.storage,this.storageKey);if(o&&this.userStorage){let t=yield _n(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:o.user},yield Sn(this.userStorage,this.storageKey+"-user",t)),o.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:$n()}else if(o&&!o.user&&!o.user){const e=yield _n(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(o.user=e.user,yield Vn(this.storage,this.storageKey+"-user"),yield Sn(this.storage,this.storageKey,o)):o.user=$n()}if(this._debug(n,"session from storage",o),!this._isValidSession(o))return this._debug(n,"session is not valid"),void(null!==o&&(yield this._removeSession()));const i=1e3*(null!==(t=o.expires_at)&&void 0!==t?t:1/0)-Date.now()<Kt;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&o.refresh_token){const{error:e}=yield this._callRefreshToken(o.refresh_token);e&&(mn(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()))}}else if(o.user&&!0===o.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=yield this._getUser(o.access_token);!t&&(null==e?void 0:e.user)?(o.user=e.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){return void this._debug(n,"error",o)}finally{this._debug(n,"end")}})}_callRefreshToken(e){return m(this,null,function*(){var t,n;if(!e)throw new on;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new kn;const{data:t,error:n}=yield this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new on;yield this._saveSession(t.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(o){if(this._debug(r,"error",o),en(o)){const e={session:null,error:o};return mn(o)||(yield this._removeSession()),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}})}_notifyAllSubscribers(e,t,n=!0){return m(this,null,function*(){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(n=>m(this,null,function*(){try{yield n.callback(e,t)}catch(o){r.push(o)}}));if(yield Promise.all(o),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}})}_saveSession(e){return m(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&(yield Sn(this.userStorage,this.storageKey+"-user",{user:t.user}));const e=Object.assign({},t);delete e.user;const r=Fn(e);yield Sn(this.storage,this.storageKey,r)}else{const e=Fn(t);yield Sn(this.storage,this.storageKey,e)}})}_removeSession(){return m(this,null,function*(){this._debug("#_removeSession()"),yield Vn(this.storage,this.storageKey),yield Vn(this.storage,this.storageKey+"-code-verifier"),yield Vn(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Vn(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}_startAutoRefresh(){return m(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gt);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(()=>m(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return m(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return m(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return m(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>m(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(e=>m(this,null,function*(){const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Gt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&(yield this._callRefreshToken(n.refresh_token))}))}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof tr))throw e;this._debug("auto refresh token tick lock not available")}})}_handleVisibilityChange(){return m(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>m(this,null,function*(){return yield this._onVisibilityChanged(!1)}),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){}})}_onVisibilityChanged(e){return m(this,null,function*(){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>m(this,null,function*(){"visible"===document.visibilityState?yield this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,n){return m(this,null,function*(){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=yield In(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`})}_unenroll(e){return m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n;const{data:r,error:o}=t;return o?{data:null,error:o}:yield qn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(en(t))return{data:null,error:t};throw t}})}_enroll(e){return m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n,r;const{data:o,error:i}=t;if(i)return{data:null,error:i};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:a}=yield qn(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(n=null==o?void 0:o.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:("totp"===e.factorType&&(null===(r=null==l?void 0:l.totp)||void 0===r?void 0:r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(t){if(en(t))return{data:null,error:t};throw t}})}_verify(e){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n;const{data:r,error:o}=t;if(o)return{data:null,error:o};const{data:i,error:s}=yield qn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:s})}))}catch(t){if(en(t))return{data:null,error:t};throw t}}))})}_challenge(e){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){try{return yield this._useSession(t=>m(this,null,function*(){var n;const{data:r,error:o}=t;return o?{data:null,error:o}:yield qn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(t){if(en(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return m(this,null,function*(){const{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return m(this,null,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return m(this,null,function*(){return this._acquireLock(-1,()=>m(this,null,function*(){return yield this._useSession(e=>m(this,null,function*(){var t,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=An(r.access_token);let s=null;i.aal&&(s=i.aal);let l=s;return(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(l="aal2"),{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:i.amr||[]},error:null}}))}))})}fetchJwk(e){return m(this,arguments,function*(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:o,error:i}=yield qn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return o.keys&&0!==o.keys.length?(this.jwks=o,this.jwks_cached_at=r,n=o.keys.find(t=>t.kid===e),n||null):null})}getClaims(e){return m(this,arguments,function*(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=yield this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:o,signature:i,raw:{header:s,payload:l}}=An(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp);const a=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!a){const{error:e}=yield this.getUser(n);if(e)throw e;return{data:{claims:o,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=yield crypto.subtle.importKey("jwk",a,c,!0,["verify"]);if(!(yield crypto.subtle.verify(c,d,i,jn(`${s}.${l}`))))throw new hn("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}})}}lr.nextInstanceID=0;const ar=lr;class cr extends ar{constructor(e){super(e)}}var dr=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function l(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((r=r.apply(e,t||[])).next())})};class mr{constructor(e,t,n){var r,o,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=(l=e).endsWith("/")?l:l+"/";var l;const a=new URL(s);this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,d=function(e,t){var n,r;const{db:o,auth:i,realtime:s,global:l}=e,{db:a,auth:c,realtime:d,global:m}=t,u={db:Object.assign(Object.assign({},a),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},null!==(n=null==m?void 0:m.headers)&&void 0!==n?n:{}),null!==(r=null==l?void 0:l.headers)&&void 0!==r?r:{})}),accessToken:()=>Wt(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=n?n:{},{db:Ft,realtime:Ut,auth:Object.assign(Object.assign({},Bt),{storageKey:c}),global:$t});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=d.global.headers)&&void 0!==o?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=d.auth)&&void 0!==i?i:{},this.headers,d.global.fetch),this.fetch=qt(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new xe(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Lt(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new I(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return dr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:o,flowType:i,lock:s,debug:l},a,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),a),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:i,lock:s,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ht(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const ur=(e,t,n)=>new mr(e,t,n);!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);t&&parseInt(t[1],10)}();const hr={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:"http://localhost:3000",websocketUrl:"ws://localhost:3000"}},isDevelopment:!0,isProduction:!1},fr=(()=>{try{const e=(()=>{const{url:e,anonKey:t}=hr.supabase;if(!e||"your_supabase_project_url"===e||""===e)throw new Error("Invalid Supabase URL. Please check your environment variables.");if(!t||"your_supabase_anon_key_here"===t||""===t)throw new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(e)}catch(n){throw new Error(`Invalid Supabase URL format: ${e}`)}return{url:e,anonKey:t}})();return ur(e.url,e.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}})}catch(e){return ur("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}})}})(),br=new class{constructor(){d(this,"currentUser",null),d(this,"currentSession",null),d(this,"currentProfile",null),d(this,"currentDriverAssignment",null),d(this,"authStateChangeListener",null),d(this,"_isInitialized",!1),this.initializeAuth()}initializeAuth(){return m(this,null,function*(){try{const{data:{session:e},error:t}=yield fr.auth.getSession();if(t)return void(this._isInitialized=!0);e&&(this.currentSession=e,this.currentUser=e.user,yield this.loadUserProfile(e.user.id));const{data:{subscription:n}}=fr.auth.onAuthStateChange((e,t)=>m(this,null,function*(){this.currentSession=t,this.currentUser=(null==t?void 0:t.user)||null,(null==t?void 0:t.user)?yield this.loadUserProfile(t.user.id):this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener()}));return this._isInitialized=!0,()=>n.unsubscribe()}catch(e){this._isInitialized=!0}})}loadUserProfile(e){return m(this,null,function*(){var t,n,r,o,i,s,l,a,c,d,m,u;try{const h=null==(n=null==(t=this.currentUser)?void 0:t.user_metadata)?void 0:n.roles;if(h&&Array.isArray(h)&&h.length>1){const t=window.location.pathname;let n="admin";n=t.includes("/driver")?"driver":t.includes("/admin")||["siddharthmali.211@gmail.com"].includes((null==(o=null==(r=this.currentUser)?void 0:r.email)?void 0:o.toLowerCase())||"")?"admin":"driver";const{data:a,error:c}=yield fr.from("profiles").select("*").eq("id",e).single();return c?void this.setTemporaryProfileWithRoleCheck(e,this.currentUser):void(this.currentProfile={id:a.id,email:(null==(i=this.currentUser)?void 0:i.email)||"",role:n,full_name:a.full_name,first_name:(null==(s=a.full_name)?void 0:s.split(" ")[0])||"",last_name:(null==(l=a.full_name)?void 0:l.split(" ").slice(1).join(" "))||"",created_at:a.created_at,updated_at:a.updated_at})}const{data:f,error:b}=yield fr.from("profiles").select("*").eq("id",e).single();if(b)return void this.setTemporaryProfileWithRoleCheck(e,this.currentUser);const g=["siddharthmali.211@gmail.com"].includes((null==(c=null==(a=this.currentUser)?void 0:a.email)?void 0:c.toLowerCase())||"")?"admin":f.role;this.currentProfile={id:f.id,email:(null==(d=this.currentUser)?void 0:d.email)||"",role:g,full_name:f.full_name,first_name:(null==(m=f.full_name)?void 0:m.split(" ")[0])||"",last_name:(null==(u=f.full_name)?void 0:u.split(" ").slice(1).join(" "))||"",created_at:f.created_at,updated_at:f.updated_at}}catch(h){this.setTemporaryProfileWithRoleCheck(e,this.currentUser)}})}setTemporaryProfileWithRoleCheck(e,t){var n,r,o,i,s,l,a,c;const d=["siddharthmali.211@gmail.com"].includes((null==(n=t.email)?void 0:n.toLowerCase())||"")?"admin":"student";this.currentProfile={id:e,email:t.email||"",role:d,full_name:(null==(r=t.user_metadata)?void 0:r.full_name)||(null==(o=t.email)?void 0:o.split("@")[0])||"User",first_name:(null==(s=null==(i=t.user_metadata)?void 0:i.full_name)?void 0:s.split(" ")[0])||(null==(l=t.email)?void 0:l.split("@")[0])||"User",last_name:(null==(c=null==(a=t.user_metadata)?void 0:a.full_name)?void 0:c.split(" ").slice(1).join(" "))||"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}}signIn(e,t){return m(this,null,function*(){try{const r=fr.auth.signInWithPassword({email:e,password:t}),o=new Promise((e,t)=>{setTimeout(()=>t(new Error("Authentication timeout")),5e3)}),{data:i,error:s}=yield Promise.race([r,o]);if(s)return{success:!1,error:s.message};if(i.user&&i.session){this.currentUser=i.user,this.currentSession=i.session;try{const e=this.loadUserProfile(i.user.id),t=new Promise((e,t)=>{setTimeout(()=>t(new Error("Profile loading timeout")),3e3)});yield Promise.race([e,t])}catch(n){this.setTemporaryProfileWithRoleCheck(i.user.id,i.user)}return this.authStateChangeListener&&this.authStateChangeListener(),{success:!0,user:this.currentProfile||void 0}}return{success:!1,error:"Authentication failed"}}catch(r){return r instanceof Error&&r.message.includes("NetworkError")?{success:!1,error:"Network connection error. Please check your internet connection and try again."}:r instanceof Error&&r.message.includes("timeout")?{success:!1,error:"Login timed out. Please try again."}:{success:!1,error:"Network error during sign in"}}})}signUp(e,t,n){return m(this,null,function*(){try{const{data:r,error:o}=yield fr.auth.signUp({email:e,password:t,options:{data:{full_name:n.full_name,role:n.role||"student"}}});if(o)return{success:!1,error:o.message};if(r.user){const{error:e}=yield fr.from("profiles").insert({id:r.user.id,full_name:n.full_name||"Unknown User",role:n.role||"student"});return e?{success:!1,error:"Profile creation failed"}:{success:!0}}return{success:!1,error:"Registration failed"}}catch(r){return{success:!1,error:"Network error during sign up"}}})}signOut(){return m(this,null,function*(){try{const{error:e}=yield fr.auth.signOut();return e?{success:!1,error:e.message}:(this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.authStateChangeListener&&this.authStateChangeListener(),{success:!0})}catch(e){return{success:!1,error:"Network error during sign out"}}})}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}getCurrentProfile(){return this.currentProfile}isInitialized(){return this._isInitialized}isAuthenticated(){return!!this.currentUser&&!!this.currentSession}hasRole(e){var t;return(null==(t=this.currentProfile)?void 0:t.role)===e}isAdmin(){return this.hasRole("admin")}isDriver(){return this.hasRole("driver")}isStudent(){return this.hasRole("student")}getAccessToken(){var e,t,n;let r=(null==(e=this.currentSession)?void 0:e.access_token)||null;if(!r)try{const e=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];for(const o of e){const e=localStorage.getItem(o);if(e){const o=JSON.parse(e);if(r=(null==(t=null==o?void 0:o.currentSession)?void 0:t.access_token)||(null==o?void 0:o.access_token)||(null==(n=null==o?void 0:o.session)?void 0:n.access_token)||null,r)break}}}catch(o){}return r}validateTokenForAPI(){return m(this,null,function*(){let e=this.getAccessToken(),t=!1;if(!e)return{valid:!1,token:null,refreshed:!1};try{const{data:{user:n},error:r}=yield fr.auth.getUser(e);if(r||!n){if(!(yield this.refreshSession()).success)return{valid:!1,token:null,refreshed:!1};e=this.getAccessToken(),t=!0}if(e){const{data:{user:n},error:r}=yield fr.auth.getUser(e);return r||!n?{valid:!1,token:null,refreshed:t}:{valid:!0,token:e,refreshed:t}}return{valid:!1,token:null,refreshed:t}}catch(n){return{valid:!1,token:null,refreshed:!1}}})}refreshSession(){return m(this,null,function*(){try{if(!this.currentSession)return{success:!1,error:"No session to refresh"};const{data:e,error:t}=yield fr.auth.refreshSession();return t?t.message.includes("Auth session missing")?{success:!1,error:"No session to refresh"}:{success:!1,error:t.message}:e.session?(this.currentSession=e.session,this.currentUser=e.user,{success:!0}):{success:!1,error:"Session refresh failed"}}catch(e){return{success:!1,error:"Network error during session refresh"}}})}updateProfile(e){return m(this,null,function*(){if(!this.currentUser)return{success:!1,error:"No authenticated user"};try{const{error:t}=yield fr.from("profiles").update(e).eq("id",this.currentUser.id);return t?{success:!1,error:t.message}:(yield this.loadUserProfile(this.currentUser.id),{success:!0})}catch(t){return{success:!1,error:"Network error during profile update"}}})}onAuthStateChange(e){this.authStateChangeListener=e}removeAuthStateChangeListener(){this.authStateChangeListener=null}getAuthState(){return{initialized:this._isInitialized,user:this.currentUser,session:this.currentSession,profile:this.currentProfile,isAuthenticated:this.isAuthenticated(),isAdmin:this.isAdmin()}}forceFreshLogin(){return m(this,null,function*(){try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.includes("supabase")||n.includes("auth")||n.includes("sb-"))&&e.push(n)}return e.forEach(e=>{localStorage.removeItem(e)}),this.currentSession=null,this.currentUser=null,this.currentProfile=null,{success:!0}}catch(e){return{success:!1,error:"Failed to force fresh login"}}})}recoverSession(){return m(this,null,function*(){var e,t,n,r;try{const i=["supabase.auth.token","sb-gthwmwfwvhyriygpcdlr-auth-token","supabase.auth.session"];let s,l=null,a=null;for(const e of i){const t=localStorage.getItem(e);if(t){l=t,a=e;break}}if(!l)return{success:!1,error:"No stored session"};try{s=JSON.parse(l)}catch(o){return{success:!1,error:"Invalid session format"}}const c=(null==(e=null==s?void 0:s.currentSession)?void 0:e.access_token)||(null==s?void 0:s.access_token)||(null==(t=null==s?void 0:s.session)?void 0:t.access_token);if(!c)return{success:!1,error:"No access token in stored session"};const{data:{user:d},error:m}=yield fr.auth.getUser(c);return m||!d?(a&&localStorage.removeItem(a),{success:!1,error:"Stored token is invalid"}):(this.currentSession={access_token:c,refresh_token:(null==(n=null==s?void 0:s.currentSession)?void 0:n.refresh_token)||(null==s?void 0:s.refresh_token),expires_in:(null==(r=null==s?void 0:s.currentSession)?void 0:r.expires_in)||(null==s?void 0:s.expires_in),token_type:"bearer",user:d},this.currentUser=d,yield this.loadUserProfile(d.id),{success:!0})}catch(i){return{success:!1,error:"Failed to recover session"}}})}getDriverBusAssignment(e){return m(this,null,function*(){try{const{data:t,error:n}=yield fr.from("buses").select("id, number_plate, route_id").eq("assigned_driver_id",e).eq("is_active",!0).single();if(n||!t)return null;let r="";if(t.route_id){const{data:e,error:n}=yield fr.from("routes").select("name").eq("id",t.route_id).single();!n&&e&&(r=e.name)}let o="Unknown Driver";const{data:i,error:s}=yield fr.from("profiles").select("full_name").eq("id",e).single();if(!s&&(null==i?void 0:i.full_name))o=i.full_name;else{const{data:t,error:n}=yield fr.from("users").select("first_name, last_name").eq("id",e).single();!n&&t&&(o=`${t.first_name||""} ${t.last_name||""}`.trim()||"Unknown Driver")}return{driver_id:e,bus_id:t.id,bus_number:t.number_plate,route_id:t.route_id||"",route_name:r,driver_name:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}}catch(t){return null}})}storeDriverBusAssignment(e){return m(this,null,function*(){try{return this.currentDriverAssignment=c(a({},e),{created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}),!0}catch(t){return!1}})}clearDriverBusAssignment(){return m(this,null,function*(){try{return this.currentDriverAssignment=null,!0}catch(e){return!1}})}getCurrentDriverAssignment(){return this.currentDriverAssignment}validateSession(){return m(this,null,function*(){try{const{data:{session:e},error:t}=yield fr.auth.getSession();if(t)return!1;if(!e)return!1;const n=new Date(1e3*e.expires_at),r=new Date;if(n.getTime()-r.getTime()<3e5){const{data:{session:e},error:t}=yield fr.auth.refreshSession();if(t)return!1;e&&(this.currentSession=e,this.currentUser=e.user)}return!0}catch(e){return!1}})}validateDriverSession(){return m(this,null,function*(){var e;try{if(!(yield this.validateSession()))return{isValid:!1,assignment:null};if("driver"!==(null==(e=this.currentProfile)?void 0:e.role))return{isValid:!1,assignment:null};const t=yield this.getDriverBusAssignment(this.currentUser.id);return t?(this.currentDriverAssignment=t,{isValid:!0,assignment:t}):{isValid:!1,assignment:null}}catch(t){return{isValid:!1,assignment:null}}})}logout(){return m(this,null,function*(){var e;try{this.currentUser&&"driver"===(null==(e=this.currentProfile)?void 0:e.role)&&(yield this.clearDriverBusAssignment()),this.currentUser=null,this.currentSession=null,this.currentProfile=null,this.currentDriverAssignment=null;const{error:t}=yield fr.auth.signOut()}catch(t){}})}};var gr=(e=>(e.NETWORK="NETWORK",e.AUTHENTICATION="AUTHENTICATION",e.AUTHORIZATION="AUTHORIZATION",e.VALIDATION="VALIDATION",e.SERVER="SERVER",e.NOT_FOUND="NOT_FOUND",e.TIMEOUT="TIMEOUT",e.UNKNOWN="UNKNOWN",e))(gr||{}),pr=(e=>(e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.CRITICAL="CRITICAL",e))(pr||{});function Nr(e,t,n="ERROR",r,o,i){return{type:e,message:t,severity:n,originalError:r,context:o,code:i,timestamp:(new Date).toISOString()}}function vr(e,t="An unexpected error occurred"){if(e instanceof Error)return Nr("UNKNOWN",e.message||t,"ERROR",e);if("object"==typeof e&&null!==e){const n=e;if(n.error||n.message){let r="UNKNOWN",o="ERROR";return n.status&&(401===n.status?r="AUTHENTICATION":403===n.status?r="AUTHORIZATION":404===n.status?(r="NOT_FOUND",o="WARNING"):400===n.status||422===n.status?r="VALIDATION":n.status>=500&&(r="SERVER",o="CRITICAL")),Nr(r,n.message||n.error||t,o,e,{response:n},n.code)}}return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&(e.message.includes("network")||e.message.includes("fetch"))?Nr("NETWORK","Network error. Please check your connection.","WARNING",e):"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&e.message.includes("timeout")?Nr("TIMEOUT","Request timed out. Please try again.","WARNING",e):Nr("UNKNOWN",t,"ERROR",e)}function xr(e){const{type:t,message:n,severity:r,originalError:o,context:i,code:s,timestamp:l}=e}const Cr={createError:Nr,handleApiError:vr,logError:xr,getUserFriendlyMessage:function(e){switch(e.type){case"NETWORK":return"Network connection issue. Please check your internet connection and try again.";case"AUTHENTICATION":return"Authentication failed. Please log in again.";case"AUTHORIZATION":return"You do not have permission to perform this action.";case"VALIDATION":return e.message||"Please check your input and try again.";case"SERVER":return"Server error. Our team has been notified and is working on it.";case"NOT_FOUND":return"The requested resource was not found.";case"TIMEOUT":return"The request timed out. Please try again later.";default:return e.message||"An unexpected error occurred. Please try again."}},handleError:function(e,t="An unexpected error occurred"){const n=vr(e,t);return xr(n),{success:!1,error:n,data:null}},ErrorType:gr,ErrorSeverity:pr};function jr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function yr(e){return Array.isArray(e)}function Dr(e){return"string"==typeof e}function Er(e){return"number"==typeof e&&!isNaN(e)}function wr(e){return"boolean"==typeof e}function Pr(e){return!!jr(e)&&Dr(e.id)&&Dr(e.code)&&Dr(e.number_plate)&&Er(e.capacity)&&wr(e.is_active)}function Sr(e){return!!jr(e)&&Dr(e.id)&&Dr(e.name)&&wr(e.is_active)}function _r(e){return!!jr(e)&&Dr(e.id)&&(Dr(e.driver_name)||Dr(e.driver_id))}function Vr(e){return!!jr(e)&&Dr(e.busId)&&Er(e.latitude)&&Er(e.longitude)&&Dr(e.timestamp)}function kr(e,t){if(!yr(e))return null;const n=[],r=[];if(e.forEach(e=>{t(e)?n.push(e):r.push(e)}),r.length>0){const e=Cr.createError(gr.VALIDATION,`Found ${r.length} invalid items in array`,pr.WARNING,r,{validCount:n.length,invalidCount:r.length});Cr.logError(e)}return n}const Ar={isObject:jr,isArray:yr,isString:Dr,isNumber:Er,isBoolean:wr,isDate:function(e){return e instanceof Date&&!isNaN(e.getTime())},isISODateString:function(e){return!!Dr(e)&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?Z$/.test(e)},isUUID:function(e){return!!Dr(e)&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)},isBus:Pr,isRoute:Sr,isDriver:_r,isBusLocation:Vr,validateArray:kr,validateBusArray:function(e){return kr(e,Pr)||[]},validateRouteArray:function(e){return kr(e,Sr)||[]},validateDriverArray:function(e){return kr(e,_r)||[]},validateBusLocationArray:function(e){return kr(e,Vr)||[]}},Mr={handleApiResponse:function(e,t,n,r,o){if(e.success&&e.data){if(t(e.data))return{success:!0,data:e.data,timestamp:e.timestamp||(new Date).toISOString()};{const t=Cr.createError(gr.VALIDATION,`Received invalid ${n} data${o?` for ID ${o}`:""}`,pr.ERROR,e.data,{endpoint:r,entityId:o});return Cr.logError(t),{success:!1,data:null,timestamp:(new Date).toISOString(),error:`Invalid ${n} data received${o?` for ID ${o}`:""}`,message:`The ${n} information received from the server was invalid`}}}{const t=Cr.createError(gr.SERVER,e.message||e.error||`Failed to fetch ${n}${o?` with ID ${o}`:"s"}`,pr.ERROR,e,{endpoint:r,entityId:o});return Cr.logError(t),{success:!1,data:null,timestamp:(new Date).toISOString(),error:e.error||`Failed to fetch ${n}${o?` with ID ${o}`:"s"}`,message:e.message||`An error occurred while fetching ${n} information`}}},handleApiArrayResponse:function(e,t,n,r){if(e.success&&e.data){const o=Ar.validateArray(e.data,t)||[];if(o.length!==e.data.length){const t=Cr.createError(gr.VALIDATION,`Received ${e.data.length} ${n}, but only ${o.length} were valid`,pr.WARNING,{totalCount:e.data.length,validCount:o.length,invalidCount:e.data.length-o.length},{endpoint:r});Cr.logError(t)}return{success:!0,data:o,timestamp:e.timestamp||(new Date).toISOString()}}{const t=Cr.createError(gr.SERVER,e.message||e.error||`Failed to fetch ${n}`,pr.ERROR,e,{endpoint:r});return Cr.logError(t),{success:!1,data:[],timestamp:(new Date).toISOString(),error:e.error||`Failed to fetch ${n}`,message:e.message||`An error occurred while fetching ${n}`}}},handleApiError:function(e,t,n,r){const o=Cr.handleApiError(e,t);return{success:!1,data:null,timestamp:(new Date).toISOString(),error:o.message,message:Cr.getUserFriendlyMessage(o)}},handleParamValidationError:function(e,t,n){const r=Cr.createError(gr.VALIDATION,`${e} is required`,pr.WARNING,null,{function:n});return Cr.logError(r),{success:!1,data:null,timestamp:(new Date).toISOString(),error:`${e} is required`,message:`Please provide a valid ${e.toLowerCase()} to fetch ${t} information`}}},Tr=hr.api.url,Ir=new class{constructor(e){d(this,"baseUrl"),this.baseUrl=e}backendRequest(e,t){return m(this,null,function*(){const n=`${this.baseUrl||hr.api.url}${e}`,r={"Content-Type":"application/json"};try{const e=br.getAccessToken();e&&(r.Authorization=`Bearer ${e}`)}catch(o){}(null==t?void 0:t.headers)&&Object.assign(r,t.headers);try{const o=new AbortController,i=setTimeout(()=>o.abort(),3e4),s=yield fetch(n,c(a({headers:r},t),{signal:o.signal}));if(clearTimeout(i),!s.ok){const t=yield s.json().catch(()=>({}));let r=gr.UNKNOWN,o=pr.ERROR;switch(s.status){case 400:r=gr.VALIDATION;break;case 401:r=gr.AUTHENTICATION;break;case 403:r=gr.AUTHORIZATION;break;case 404:r=gr.NOT_FOUND,o=pr.WARNING;break;case 408:r=gr.TIMEOUT;break;case 500:case 502:case 503:case 504:r=gr.SERVER,o=pr.CRITICAL}const i=Cr.createError(r,t.message||t.error||`API request failed: ${s.status} ${s.statusText}`,o,t,{url:n,status:s.status,statusText:s.statusText,endpoint:e},t.code);throw Cr.logError(i),i}return s.json()}catch(o){if(o instanceof DOMException&&"AbortError"===o.name){const t=Cr.createError(gr.TIMEOUT,`Request to ${e} timed out after 30 seconds`,pr.WARNING,o,{url:n,endpoint:e});throw Cr.logError(t),t}if(o instanceof Error&&o.message.includes("fetch")){const t=Cr.createError(gr.NETWORK,`Network error while connecting to ${e}`,pr.WARNING,o,{url:n,endpoint:e});throw Cr.logError(t),t}if(o&&"object"==typeof o&&"type"in o&&"severity"in o)throw o;const t=Cr.createError(gr.UNKNOWN,`Unknown error occurred while fetching ${e}`,pr.ERROR,o,{url:n,endpoint:e});throw Cr.logError(t),t}})}getHealth(){return m(this,null,function*(){return this.backendRequest("/health")})}getAllBuses(){return m(this,null,function*(){try{const e=yield this.backendRequest("/buses");return Mr.handleApiArrayResponse(e,Ar.isBus,"buses","/buses")}catch(e){return Mr.handleApiError(e,"Failed to fetch buses","buses")}})}getBusInfo(e){return m(this,null,function*(){try{if(!e)return Mr.handleParamValidationError("Bus ID","bus","getBusInfo");const t=yield this.backendRequest(`/buses/${e}`);return Mr.handleApiResponse(t,Ar.isBus,"bus",`/buses/${e}`,e)}catch(t){return Mr.handleApiError(t,`Failed to fetch bus information for ID ${e}`,"bus",e)}})}getRoutes(){return m(this,null,function*(){try{const e=yield this.backendRequest("/routes");return Mr.handleApiArrayResponse(e,Ar.isRoute,"routes","/routes")}catch(e){return Mr.handleApiError(e,"Failed to fetch routes","routes")}})}getRouteInfo(e){return m(this,null,function*(){try{if(!e)return Mr.handleParamValidationError("Route ID","route","getRouteInfo");const t=yield this.backendRequest(`/routes/${e}`);return Mr.handleApiResponse(t,Ar.isRoute,"route",`/routes/${e}`,e)}catch(t){return Mr.handleApiError(t,`Failed to fetch route information for ID ${e}`,"route",e)}})}getAllDrivers(){return m(this,null,function*(){try{const e=yield this.backendRequest("/admin/drivers");return e.success&&e.data?{success:!0,data:e.data,timestamp:e.timestamp||(new Date).toISOString()}:{success:!1,data:[],timestamp:(new Date).toISOString(),error:e.error||"Failed to fetch drivers",message:e.message||"An error occurred while fetching drivers"}}catch(e){return{success:!1,data:[],timestamp:(new Date).toISOString(),error:e instanceof Error?e.message:"Unknown error",message:"Failed to fetch drivers due to a network or server error"}}})}getDriverInfo(e){return m(this,null,function*(){try{if(!e)throw new Error("Driver ID is required");const t=yield this.backendRequest(`/admin/drivers/${e}`);return t.success&&t.data?{success:!0,data:t.data,timestamp:t.timestamp||(new Date).toISOString()}:{success:!1,data:null,timestamp:(new Date).toISOString(),error:t.error||`Failed to fetch driver with ID ${e}`,message:t.message||"An error occurred while fetching driver information"}}catch(t){return{success:!1,data:null,timestamp:(new Date).toISOString(),error:t instanceof Error?t.message:"Unknown error",message:"Failed to fetch driver information due to a network or server error"}}})}getLiveLocations(){return m(this,null,function*(){try{const e=yield this.backendRequest("/locations/current");return e.success&&e.data?{success:!0,data:e.data,timestamp:e.timestamp||(new Date).toISOString()}:{success:!1,data:[],timestamp:(new Date).toISOString(),error:e.error||"Failed to fetch live locations",message:e.message||"An error occurred while fetching live locations"}}catch(e){return{success:!1,data:[],timestamp:(new Date).toISOString(),error:e instanceof Error?e.message:"Unknown error",message:"Failed to fetch live locations due to a network or server error"}}})}updateLiveLocation(e,t,n){return m(this,null,function*(){try{if(!e||!t)throw new Error("Bus ID and Driver ID are required");if(!n||"number"!=typeof n.latitude||"number"!=typeof n.longitude)throw new Error("Valid location coordinates are required");const r=yield this.backendRequest("/locations/update",{method:"POST",body:JSON.stringify({busId:e,driverId:t,latitude:n.latitude,longitude:n.longitude,speed:n.speed,heading:n.heading,timestamp:(new Date).toISOString()})});return r.success&&r.data?{success:!0,data:r.data,timestamp:r.timestamp||(new Date).toISOString()}:{success:!1,data:null,timestamp:(new Date).toISOString(),error:r.error||"Failed to update location",message:r.message||"An error occurred while updating location"}}catch(r){return{success:!1,data:null,timestamp:(new Date).toISOString(),error:r instanceof Error?r.message:"Unknown error",message:"Failed to update location due to a network or server error"}}})}}(Tr),Rr=new class{constructor(){d(this,"socket",null),d(this,"_isConnected",!1),d(this,"connectionState","disconnected"),d(this,"reconnectAttempts",0),d(this,"maxReconnectAttempts",10),d(this,"reconnectDelay",1e3),d(this,"maxReconnectDelay",3e4),d(this,"heartbeatInterval",null),d(this,"connectionTimeout",null),d(this,"lastHeartbeat",0),d(this,"isShuttingDown",!1),d(this,"connectionMonitorInterval",null),d(this,"busLocationListeners",[]),d(this,"driverConnectedListeners",[]),d(this,"driverDisconnectedListeners",[]),d(this,"studentConnectedListeners",[]),d(this,"busArrivingListeners",[]),this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleError=this.handleError.bind(this),this.handleReconnect=this.handleReconnect.bind(this),this.startHeartbeat=this.startHeartbeat.bind(this),this.stopHeartbeat=this.stopHeartbeat.bind(this),this.monitorConnection=this.monitorConnection.bind(this)}connect(){return m(this,null,function*(){var e;if(!(null==(e=this.socket)?void 0:e.connected)&&"connecting"!==this.connectionState){this.isShuttingDown=!1;try{this.connectionState="connecting";const e=hr.api.websocketUrl;if(!e||"string"!=typeof e||!e.startsWith("ws"))throw new Error(`Invalid WebSocket URL: ${e}`);if(!navigator.onLine)throw new Error("No network connection available");this.socket=y(e,{transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!0,reconnection:!1,autoConnect:!1,query:{clientType:"student",version:"1.0.0",timestamp:Date.now().toString(),deviceInfo:`${navigator.platform}|${navigator.userAgent.substring(0,100)}`}});const t=e=>{"connecting"===this.connectionState&&(e>=15e3?this.handleError(new Error("Connection timeout")):this.connectionTimeout=setTimeout(()=>t(e+5e3),5e3))};this.connectionTimeout=setTimeout(()=>t(5e3),5e3),this.socket.on("connect",this.handleConnect),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("connect_error",e=>{this.handleError(e)}),this.socket.on("error",this.handleError),this.socket.on("reconnect",this.handleReconnect),this.socket.on("reconnect_attempt",e=>{}),this.socket.on("reconnect_error",e=>{}),this.socket.on("reconnect_failed",()=>{}),this.socket.io.on("packet",e=>{e&&e.type&&e.type.toString()}),this.socket.connect()}catch(t){this.handleError(t)}}})}handleConnect(){var e;this._isConnected=!0,this.connectionState="connected",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.startHeartbeat(),this.startConnectionMonitoring(),null==(e=this.socket)||e.emit("driver:connected",{timestamp:(new Date).toISOString(),clientInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}})}handleDisconnect(e){this._isConnected=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.isShuttingDown||"io client disconnect"===e||this.handleReconnect()}handleError(e){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.isShuttingDown||"TransportError"!==e.type&&"TransportOpenError"!==e.type||this.handleReconnect()}handleReconnect(){if(this.isShuttingDown||"reconnecting"===this.connectionState)return;if(this.reconnectAttempts>=this.maxReconnectAttempts)return void(this.connectionState="disconnected");this.connectionState="reconnecting",this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),t=Math.random()*e*.5,n=Math.min(e+t,this.maxReconnectDelay),r=navigator.connection;r&&["slow-2g","2g","3g"].includes(r.effectiveType)&&this.reconnectAttempts>3?setTimeout(()=>{this.isShuttingDown||this.connect()},1.5*n):setTimeout(()=>{this.isShuttingDown||this.connect()},n)}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{var e;(null==(e=this.socket)?void 0:e.connected)&&(this.socket.emit("ping"),this.lastHeartbeat=Date.now())},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}startConnectionMonitoring(){this.connectionMonitorInterval&&clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=setInterval(()=>{this.monitorConnection()},1e4)}stopConnectionMonitoring(){this.connectionMonitorInterval&&(clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}monitorConnection(){if(!this.socket)return;const e=this.socket.connected,t=Date.now()-this.lastHeartbeat;e&&t>6e4&&this.lastHeartbeat>0&&(this.socket.disconnect(),this.handleReconnect()),this._isConnected!==e&&(this._isConnected=e,this.connectionState=e?"connected":"disconnected")}disconnect(){this.isShuttingDown=!0,this.connectionState="disconnected",this._isConnected=!1,this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.reconnectAttempts=0,this.reconnectDelay=1e3}reset(){this.isShuttingDown=!1,this.connectionState="disconnected",this._isConnected=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.socket&&(this.socket.disconnect(),this.socket=null),this.stopHeartbeat(),this.stopConnectionMonitoring(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}isConnected(){var e;return this._isConnected&&!0===(null==(e=this.socket)?void 0:e.connected)}getConnectionState(){return this.connectionState}getConnectionStatus(){return this._isConnected}authenticateAsDriver(e,t){this.socket&&this.isConnected()?(this.socket.off("driver:authenticated"),this.socket.off("driver:authentication_failed"),this.socket.off("error"),this.socket.once("driver:authenticated",e=>{(null==t?void 0:t.onSuccess)&&t.onSuccess(e)}),this.socket.once("driver:authentication_failed",e=>{(null==t?void 0:t.onFailure)&&t.onFailure(e)}),this.socket.once("error",e=>{(null==t?void 0:t.onError)&&t.onError(e)}),this.socket.emit("driver:authenticate",{token:e})):(null==t?void 0:t.onError)&&t.onError(new Error("Socket not connected"))}sendLocationUpdate(e){this.socket&&this.isConnected()&&this.socket.emit("driver:locationUpdate",e)}onBusLocationUpdate(e){var t;this.busLocationListeners.push(e),null==(t=this.socket)||t.on("bus:locationUpdate",e)}onDriverConnected(e){var t;this.driverConnectedListeners.push(e),null==(t=this.socket)||t.on("driver:connected",e)}onDriverDisconnected(e){var t;this.driverDisconnectedListeners.push(e),null==(t=this.socket)||t.on("driver:disconnected",e)}onStudentConnected(e){var t;this.studentConnectedListeners.push(e),null==(t=this.socket)||t.on("student:connected",e)}onBusArriving(e){var t;this.busArrivingListeners.push(e),null==(t=this.socket)||t.on("bus:arriving",e)}off(e){var t;null==(t=this.socket)||t.off(e)}getConnectionStats(){return{isConnected:this._isConnected,connectionState:this.connectionState,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHeartbeat:this.lastHeartbeat,uptime:this.lastHeartbeat>0?Date.now()-this.lastHeartbeat:0}}healthCheck(){return m(this,null,function*(){var e;const t=this.getConnectionStats();return{healthy:this.isConnected()&&"connected"===this.connectionState&&t.lastHeartbeat>0&&Date.now()-t.lastHeartbeat<6e4,details:c(a({},t),{socketExists:!!this.socket,socketConnected:null==(e=this.socket)?void 0:e.connected,isShuttingDown:this.isShuttingDown})}})}},Lr=()=>{var t;const[n,o]=u.useState(!1),[i,s]=u.useState(!1),[l,d]=u.useState(null),[h,f]=u.useState(null),[b,g]=u.useState(null),[p,N]=u.useState(null),[v,x]=u.useState(null),[C,j]=u.useState(0),[y,E]=u.useState({email:"",password:""}),[w,P]=u.useState(null),[S,_]=u.useState(!1),V=u.useRef(null),k=u.useRef(null),A=u.useRef(null),M=u.useRef(null),T=u.useRef(null),I=u.useRef(null);u.useEffect(()=>{const{data:{subscription:t}}=fr.auth.onAuthStateChange((t,n)=>m(e,null,function*(){"SIGNED_IN"===t&&n?yield O(n.access_token):"SIGNED_OUT"===t&&(o(!1),d(null),$(),R())}));return()=>t.unsubscribe()},[]),u.useEffect(()=>{n&&navigator.geolocation&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(e=>{"granted"===e.state||"prompt"===e.state||"denied"===e.state&&g("Location permission is denied. Please enable it in your browser settings.")})},[n]),u.useEffect(()=>{m(e,null,function*(){if(navigator.geolocation)try{"permissions"in navigator&&"denied"===(yield navigator.permissions.query({name:"geolocation"})).state&&g("Location permission denied. Please enable location access in your browser settings.")}catch(e){}else g("Geolocation is not supported by this browser")})},[]);const R=()=>{I.current&&(I.current.remove(),I.current=null),M.current&&(M.current.remove(),M.current=null)},L=t=>m(e,null,function*(){t.preventDefault(),_(!0),P(null);try{const{data:e,error:t}=yield fr.auth.signInWithPassword({email:y.email,password:y.password});if(t)return void P(t.message);e.user&&e.session?(yield O(e.session.access_token),E({email:"",password:""})):P("Login failed - no user data received")}catch(e){P("An unexpected error occurred during login")}finally{_(!1)}}),O=t=>m(e,null,function*(){var e,n,r,i,s;try{yield Rr.connect(),null==(e=Rr.socket)||e.on("connect",()=>{N(null)}),null==(n=Rr.socket)||n.on("disconnect",()=>{N("Disconnected from server")}),null==(r=Rr.socket)||r.on("error",e=>{N(e.message||"Socket error occurred")}),null==(i=Rr.socket)||i.on("driver:authenticated",e=>{o(!0),d(e.busInfo),N(null)}),null==(s=Rr.socket)||s.on("driver:locationConfirmed",e=>{x((new Date).toLocaleTimeString()),j(e=>e+1)}),V.current=Rr.socket,Rr.authenticateAsDriver(t)}catch(l){N("Failed to authenticate with server")}}),$=()=>{Rr.disconnect(),V.current=null},F=()=>m(e,null,function*(){if(!navigator.geolocation)return void g("Geolocation is not supported by this browser");const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=navigator.userAgent.includes("Firefox"),n=(navigator.userAgent.includes("Chrome"),navigator.userAgent.includes("Safari")&&navigator.userAgent.includes("Chrome"),{enableHighAccuracy:!0,timeout:e?3e4:6e4,maximumAge:0});try{if("permissions"in navigator&&"denied"===(yield navigator.permissions.query({name:"geolocation"})).state)return void g(e?"Location permission denied on mobile. Please:\n1. Go to your phone Settings\n2. Find this browser app\n3. Enable Location permission\n4. Refresh this page":"Location permission denied. Please reset location permissions and try again.")}catch(r){}g(e?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(e=>{f(e),g(null),((e,t)=>{if(!T.current||M.current)return;M.current=new D.Map({container:T.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[t,e],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),M.current.addControl(new D.NavigationControl,"top-right"),M.current.once("load",()=>{M.current&&(M.current.dragRotate.disable(),M.current.touchZoomRotate.disableRotation())}),M.current.on("error",e=>{});const n=document.createElement("div");n.className="driver-marker",n.innerHTML='\n      <div class="driver-marker-content">\n        <div style="font-size: 16px;">🚌</div>\n      </div>\n    ',I.current=new D.Marker({element:n,anchor:"center"}).setLngLat([t,e]).addTo(M.current);const r=new D.Popup({offset:25,className:"driver-popup"}).setHTML(`\n        <div class="driver-popup">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${(null==l?void 0:l.bus_number)||"Unknown"}</p>\n          <p><strong>Route:</strong> ${(null==l?void 0:l.route_name)||"Unknown"}</p>\n          <p><strong>Driver:</strong> ${(null==l?void 0:l.driver_name)||"Unknown"}</p>\n          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>\n        </div>\n      `);I.current.setPopup(r)})(e.coords.latitude,e.coords.longitude),U(e)},n=>{let r="Location error: ";switch(n.code){case n.PERMISSION_DENIED:e?r='Mobile location permission denied. Please:\n\n1. Go to your phone Settings\n2. Find this browser app (Chrome/Firefox/Safari)\n3. Tap "Permissions" or "Privacy"\n4. Enable "Location" permission\n5. Return to this page and refresh\n\nAlternative: Try opening this page in a different browser app.':r+=t?'Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':"Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case n.POSITION_UNAVAILABLE:r=e?"Location unavailable on mobile. Please:\n1. Go outdoors or near a window\n2. Wait 10-15 seconds\n3. Make sure GPS is enabled in phone settings\n4. Try again":"Location information unavailable.";break;case n.TIMEOUT:r=e?"Location request timed out on mobile. Please:\n1. Go outdoors for better GPS signal\n2. Wait 30 seconds and try again\n3. Check if GPS is enabled in phone settings":"Location request timed out. Please try again.";break;default:r+=n.message}g(r)},n),A.current=navigator.geolocation.watchPosition(e=>{f(e),g(null),((e,t)=>{if(!M.current||!I.current)return;const n=[t,e];I.current.setLngLat(n),M.current.flyTo({center:n,duration:1e3});const r=new D.Popup({offset:25,className:"driver-popup"}).setHTML(`\n        <div class="driver-popup">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${(null==l?void 0:l.bus_number)||"Unknown"}</p>\n          <p><strong>Route:</strong> ${(null==l?void 0:l.route_name)||"Unknown"}</p>\n          <p><strong>Driver:</strong> ${(null==l?void 0:l.driver_name)||"Unknown"}</p>\n          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>\n          <p><strong>Updated:</strong> ${(new Date).toLocaleTimeString()}</p>\n          <p><strong>Coordinates:</strong> ${e.toFixed(6)}, ${t.toFixed(6)}</p>\n        </div>\n      `);I.current.setPopup(r)})(e.coords.latitude,e.coords.longitude),U(e)},t=>{let n="Location tracking error: ";switch(t.code){case t.PERMISSION_DENIED:n=e?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case t.POSITION_UNAVAILABLE:n=e?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case t.TIMEOUT:n=e?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:n+=t.message}g(n)},n),s(!0)}),B=()=>{A.current&&(navigator.geolocation.clearWatch(A.current),A.current=null),k.current&&(clearInterval(k.current),k.current=null),s(!1)},U=e=>{if(!V.current||!l)return;const t={driverId:l.driver_id,latitude:e.coords.latitude,longitude:e.coords.longitude,timestamp:(new Date).toISOString(),speed:e.coords.speed||void 0,heading:e.coords.heading||void 0};V.current.emit("driver:locationUpdate",t)};return n?r.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:692,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",null==l?void 0:l.driver_name," | Bus: ",null==l?void 0:l.bus_number," | Route: ",null==l?void 0:l.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:695,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:13},void 0),r.jsxDEV("button",{onClick:()=>m(e,null,function*(){try{i&&B(),$();const{error:e}=yield fr.auth.signOut();e||(o(!1),d(null),f(null),g(null),N(null),x(null),j(0),R())}catch(e){}}),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:690,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:689,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(p?"bg-red-500":"bg-green-500")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:714,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-gray-600",children:p?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:719,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(i?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:729,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:733,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-gray-600",children:i?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:734,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:732,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:728,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:727,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:C},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:15},void 0),v&&r.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",v]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:747,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:742,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"space-y-3",children:i?r.jsxDEV("button",{onClick:B,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:813,columnNumber:17},void 0):r.jsxDEV(r.Fragment,{children:[r.jsxDEV("button",{onClick:F,disabled:!!p,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:757,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{g(null),F()},e=>{g("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:765,columnNumber:19},void 0),b&&b.includes("Permission denied")&&r.jsxDEV("button",{onClick:()=>{g(null),F()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:801,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:756,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:710,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:828,columnNumber:13},void 0),r.jsxDEV("div",{ref:T,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:832,columnNumber:13},void 0),b&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[r.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:840,columnNumber:17},void 0),r.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[r.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:844,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[r.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:850,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:855,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:859,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:863,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:862,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:867,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:871,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:874,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:849,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[r.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:883,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:887,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:891,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:895,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:886,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:882,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const n=`✅ Location Test Successful!\n\nLatitude: ${t.coords.latitude}\nLongitude: ${t.coords.longitude}\nAccuracy: ${t.coords.accuracy}m\nDevice: ${e?"Mobile":"Desktop"}\n\nLocation is working! You can now start tracking.`;alert(n),g(null)},t=>{const n=`❌ Location Test Failed\n\nError Code: ${t.code}\nError Message: ${t.message}\nDevice: ${e?"Mobile":"Desktop"}\n\nPlease check your location permissions.`;alert(n)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:843,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:959,columnNumber:13},void 0),h?r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:966,columnNumber:19},void 0),r.jsxDEV("span",{className:"font-mono",children:h.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:967,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:965,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:972,columnNumber:19},void 0),r.jsxDEV("span",{className:"font-mono",children:h.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:973,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:971,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:978,columnNumber:19},void 0),r.jsxDEV("span",{children:[null==(t=h.coords.accuracy)?void 0:t.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:977,columnNumber:17},void 0),h.coords.speed&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:983,columnNumber:21},void 0),r.jsxDEV("span",{children:[(3.6*h.coords.speed).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:982,columnNumber:19},void 0),h.coords.heading&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:21},void 0),r.jsxDEV("span",{children:[h.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:996,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-sm",children:new Date(h.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:995,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:964,columnNumber:15},void 0):r.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:15},void 0),r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[r.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1007,columnNumber:15},void 0),r.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1011,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1014,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1015,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:17},void 0),r.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1006,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:958,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:687,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:686,columnNumber:5},void 0):r.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxDEV("div",{className:"max-w-md w-full",children:r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("div",{className:"text-center mb-6",children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:607,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:610,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:606,columnNumber:13},void 0),w&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsxDEV("p",{className:"text-red-700 text-sm",children:w},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:617,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:616,columnNumber:15},void 0),r.jsxDEV("form",{onSubmit:L,className:"space-y-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:623,columnNumber:17},void 0),r.jsxDEV("input",{id:"email",type:"email",required:!0,value:y.email,onChange:e=>E(t=>c(a({},t),{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:622,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0),r.jsxDEV("input",{id:"password",type:"password",required:!0,value:y.password,onChange:e=>E(t=>c(a({},t),{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),r.jsxDEV("button",{type:"submit",disabled:S,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:S?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:621,columnNumber:13},void 0),r.jsxDEV("div",{className:"mt-4 text-center",children:r.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:674,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:605,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:604,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:603,columnNumber:7},void 0)},Or=u.createContext(void 0),$r=()=>{const e=u.useContext(Or);if(!e)throw new Error("useTransition must be used within a TransitionProvider");return e},Fr=({children:e})=>{const[t,n]=u.useState("default"),{pathname:o}=g();return u.useEffect(()=>{"/"===o&&(o.includes("login")||o.includes("admin-login")||o.includes("driver-login"))?n("homepage-to-login"):"/"===o&&(o.includes("student")||o.includes("student-map"))?n("homepage-to-map"):(o.includes("login")||o.includes("admin-login")||o.includes("driver-login"))&&(o.includes("dashboard")||o.includes("admin")||o.includes("driver-dashboard"))?n("login-to-dashboard"):n("default")},[o]),r.jsxDEV(Or.Provider,{value:{currentTransition:t,setTransition:e=>{n(e)}},children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/TransitionContext.tsx",lineNumber:71,columnNumber:5},void 0)},Br=({children:e,isVisible:t})=>r.jsxDEV(E.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,ease:"easeInOut"},className:"w-full h-full",children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToLoginTransition.tsx",lineNumber:13,columnNumber:5},void 0),Ur=({children:e,isVisible:t})=>r.jsxDEV(E.div,{initial:{opacity:0,scale:.8},animate:{opacity:t?1:0,scale:t?1:.8},transition:{duration:1.2,ease:"easeInOut"},className:"w-full h-full",children:r.jsxDEV(E.div,{initial:{opacity:0,y:100},animate:{opacity:t?1:0,y:t?0:100},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"w-full h-full",children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/HomepageToMapTransition.tsx",lineNumber:13,columnNumber:5},void 0),Hr=({children:e,isVisible:t})=>r.jsxDEV(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:t?1:0,scale:t?1:.9},transition:{duration:1,ease:"easeInOut"},className:"w-full h-full",children:r.jsxDEV(E.div,{initial:{opacity:0,y:50},animate:{opacity:t?1:0,y:t?0:50},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"w-full h-full",children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/LoginToDashboardTransition.tsx",lineNumber:13,columnNumber:5},void 0),qr=({children:e})=>{const{currentTransition:t}=$r();return r.jsxDEV(r.Fragment,{children:(()=>{switch(t){case"homepage-to-login":return r.jsxDEV(Br,{isVisible:!0,children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:21,columnNumber:11},void 0);case"homepage-to-map":return r.jsxDEV(Ur,{isVisible:!0,children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:27,columnNumber:11},void 0);case"login-to-dashboard":return r.jsxDEV(Hr,{isVisible:!0,children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:33,columnNumber:11},void 0);default:return e}})()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/transitions/GlobalTransitionWrapper.tsx",lineNumber:42,columnNumber:10},void 0)},Wr=()=>{const t=p(),{setTransition:n}=$r(),[o,i]=u.useState(!1),[s,l]=u.useState(null),[d,h]=u.useState({email:"",password:""}),[f,b]=u.useState(null),[g,N]=u.useState(!1),[v,x]=u.useState(!1);u.useEffect(()=>{const e=()=>{x(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),u.useEffect(()=>{const{data:{subscription:t}}=fr.auth.onAuthStateChange((t,n)=>m(e,null,function*(){"SIGNED_IN"===t&&n?yield C(n.access_token):"SIGNED_OUT"===t&&(i(!1),l(null),j())}));return()=>t.unsubscribe()},[]);const C=r=>m(e,null,function*(){var o,s,a;try{yield Rr.connect();let c=0;const d=10;for(;!Rr.isConnected()&&c<d;)yield new Promise(e=>setTimeout(e,1500)),c++;if(!Rr.isConnected())throw new Error("Failed to establish WebSocket connection. Please check your internet connection and try again.");if(null==(o=Rr.socket)||o.on("connect",()=>{}),null==(s=Rr.socket)||s.on("disconnect",()=>{}),null==(a=Rr.socket)||a.on("error",e=>{b(e.message||"Socket error occurred")}),yield new Promise(e=>setTimeout(e,500)),!Rr.isConnected())throw new Error("WebSocket connection failed to establish");const u=r=>m(e,null,function*(){try{const e={driver_id:r.driverId,bus_id:r.busId,bus_number:r.busInfo.bus_number,route_id:r.busInfo.route_id,route_name:r.busInfo.route_name,driver_name:r.busInfo.driver_name};if(!(yield br.storeDriverBusAssignment(e)))return void b("Failed to store authentication data");i(!0),l(r.busInfo),n("login-to-dashboard"),t("/driver-dashboard")}catch(e){b("Failed to complete authentication")}}),h=e=>{b("Authentication failed: "+(e.message||"Unknown error"))},f=setTimeout(()=>{var e,t;b("Authentication timeout - please try again"),null==(e=Rr.socket)||e.off("driver:authenticated",u),null==(t=Rr.socket)||t.off("driver:authentication_failed",h)},6e4);if(!r)throw new Error("No authentication token available");Rr.authenticateAsDriver(r,{onSuccess:e=>{clearTimeout(f),u(e)},onFailure:e=>{clearTimeout(f),h(e)},onError:e=>{clearTimeout(f),b("Authentication error: "+(e.message||"Unknown error"))}})}catch(c){b("Failed to authenticate with server")}}),j=()=>{Rr.disconnect()};return o&&s?r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:r.jsxDEV(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[r.jsxDEV("div",{className:"loading-spinner mx-auto mb-4"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:262,columnNumber:11},void 0),r.jsxDEV("h2",{className:"text-2xl font-bold text-white mb-2",children:"Authentication Successful!"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:263,columnNumber:11},void 0),r.jsxDEV("p",{className:"text-white/70",children:"Redirecting to dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:257,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:256,columnNumber:7},void 0):r.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[r.jsxDEV("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:r.jsxDEV(E.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md",children:r.jsxDEV(E.div,{whileHover:v?{}:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden rounded-3xl bg-white/10 backdrop-blur-2xl border border-white/20 shadow-2xl",children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 hover:bg-opacity-100 transition-all duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:289,columnNumber:13},void 0),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 hover:bg-opacity-100 transition-all duration-500 rounded-3xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:292,columnNumber:13},void 0),r.jsxDEV("div",{className:"relative z-10 p-8",children:[r.jsxDEV(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-8",children:[r.jsxDEV("div",{className:"text-6xl mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"1"},children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:303,columnNumber:17},void 0),r.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:304,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-white/70",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:307,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:297,columnNumber:15},void 0),r.jsxDEV(w,{children:f&&r.jsxDEV(E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4 mb-6",children:r.jsxDEV("p",{className:"text-red-200 text-sm",children:f},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:321,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:315,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:313,columnNumber:15},void 0),r.jsxDEV(E.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},onSubmit:t=>m(e,null,function*(){t.preventDefault(),N(!0),b(null);try{const{data:e,error:t}=yield fr.auth.signInWithPassword({email:d.email,password:d.password});if(t)return void b(t.message);e.user&&e.session?(yield C(e.session.access_token),h({email:"",password:""})):b("Login failed - no user data received")}catch(e){b("An unexpected error occurred during login")}finally{N(!1)}}),className:"space-y-6",children:[r.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[r.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:340,columnNumber:19},void 0),r.jsxDEV("input",{id:"email",type:"email",required:!0,value:d.email,onChange:e=>h(t=>c(a({},t),{email:e.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:335,columnNumber:17},void 0),r.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[r.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:368,columnNumber:19},void 0),r.jsxDEV("input",{id:"password",type:"password",required:!0,value:d.password,onChange:e=>h(t=>c(a({},t),{password:e.target.value})),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:374,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:363,columnNumber:17},void 0),r.jsxDEV(E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},whileHover:v?{}:{scale:1.02,y:-2},whileTap:{scale:.98},type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/25 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none",children:g?r.jsxDEV("div",{className:"flex items-center justify-center",children:[r.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:403,columnNumber:23},void 0),"Signing In..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:402,columnNumber:21},void 0):"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:391,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:327,columnNumber:15},void 0),r.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"mt-6 text-center",children:r.jsxDEV("p",{className:"text-sm text-white/60",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:419,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:413,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:295,columnNumber:13},void 0),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:426,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:283,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:276,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:275,columnNumber:7},void 0),r.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(v?8:15)].map((e,t)=>r.jsxDEV(E.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:100*Math.random()+"%",top:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,1,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:434,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:432,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverLogin.tsx",lineNumber:273,columnNumber:5},void 0)},zr=()=>{var t;const n=p(),[o,i]=u.useState(!1),[s,l]=u.useState(null),[a,c]=u.useState(null),[d,h]=u.useState(null),[f,b]=u.useState(null),[g,N]=u.useState(0),[v,x]=u.useState(!1),[C,j]=u.useState("disconnected");u.useEffect(()=>{},[s]);const y=u.useRef(null),E=u.useRef(null),w=u.useRef(null),P=u.useRef(null),S=u.useRef(null),_=u.useRef(!1),V=u.useRef(null),k=u.useRef({});u.useEffect(()=>{if(_.current)return;_.current=!0;const t=()=>{Rr.isConnected()?j("connected"):"connecting"===Rr.getConnectionState()||"reconnecting"===Rr.getConnectionState()?j("connecting"):j("disconnected")};t();const r=setInterval(t,2e3);return m(e,null,function*(){var e,t,r,o,i,a,c;try{const{data:{session:m}}=yield fr.auth.getSession();if(null==m?void 0:m.user){const n=br.getCurrentDriverAssignment();if(n)l({bus_id:n.bus_id,bus_number:n.bus_number,route_id:n.route_id,route_name:n.route_name,driver_id:n.driver_id,driver_name:n.driver_name}),x(!0);else{const{isValid:e,assignment:t}=yield br.validateDriverSession();if(!e||!t)return;l({bus_id:t.bus_id,bus_number:t.bus_number,route_id:t.route_id,route_name:t.route_name,driver_id:t.driver_id,driver_name:t.driver_name}),x(!0)}if(!Rr.isConnected())try{yield Rr.connect()}catch(d){}null==(e=Rr.socket)||e.on("connect",()=>{}),null==(t=Rr.socket)||t.on("disconnect",()=>{}),null==(r=Rr.socket)||r.on("error",e=>{}),null==(o=Rr.socket)||o.on("driver:authenticated",e=>{l(e.busInfo),x(!0)}),null==(i=Rr.socket)||i.on("driver:authentication_failed",e=>{}),null==(a=Rr.socket)||a.on("driver:locationConfirmed",()=>{b((new Date).toLocaleTimeString()),N(e=>e+1)}),y.current=Rr.socket;const u=br.getCurrentDriverAssignment();u&&(null==(c=Rr.socket)||c.emit("driver:connected",{driverId:u.driver_id,busId:u.bus_id,timestamp:(new Date).toISOString()}));let h=0;const f=3,g=5e3;V.current=setInterval(()=>{h++,s||v?V.current&&(clearInterval(V.current),V.current=null):R(m.user.id).then(e=>{e?V.current&&(clearInterval(V.current),V.current=null):h>=f&&V.current&&(clearInterval(V.current),V.current=null)})},g)}else n("/driver-login")}catch(d){}}),()=>{clearInterval(r),V.current&&(clearInterval(V.current),V.current=null),_.current=!1,Rr.socket&&(Rr.socket.off("connect"),Rr.socket.off("disconnect"),Rr.socket.off("error"),Rr.socket.off("driver:authenticated"),Rr.socket.off("driver:authentication_failed"),Rr.socket.off("driver:locationConfirmed"))}},[n]),u.useEffect(()=>(P.current&&!w.current&&A(),()=>{I()}),[]);const A=()=>{if(!P.current)return;const e=23.0225,t=72.5714;w.current&&(w.current.remove(),w.current=null);try{w.current=new D.Map({container:P.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[t,e],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,antialias:!0,failIfMajorPerformanceCaveat:!1,maxPitch:60,localIdeographFontFamily:"sans-serif",renderWorldCopies:!0});const n=e=>{e instanceof WebGLContextEvent&&e.preventDefault(),setTimeout(()=>{try{w.current&&w.current.resize()}catch(e){}},1e3)};k.current.webglcontextlost=n,w.current.on("webglcontextlost",n);const r=()=>{if(w.current&&S.current){w.current.resize();const e=S.current.getLngLat();S.current.setLngLat(e)}};k.current.webglcontextrestored=r,w.current.on("webglcontextrestored",r);const o=document.createElement("div");o.className="driver-marker",o.innerHTML='\n        <div class="driver-marker-content">\n          <div style="font-size: 16px;">🚌</div>\n        </div>\n      ',S.current=new D.Marker({element:o,anchor:"center"}).setLngLat([t,e]).addTo(w.current);const i=e=>{};k.current.error=i,w.current.on("error",i);const s=()=>{};k.current.load=s,w.current.on("load",s)}catch(n){try{if(P.current&&!w.current){w.current=new D.Map({container:P.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[t,e],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0});const n=document.createElement("div");n.className="driver-marker",n.innerHTML="<div>🚌</div>",S.current=new D.Marker({element:n}).setLngLat([t,e]).addTo(w.current)}}catch(r){}}},M=()=>m(e,null,function*(){if(!navigator.geolocation)return void h("Geolocation is not supported by this browser");const e={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{E.current=navigator.geolocation.watchPosition(e=>{if(c(e),h(null),w.current&&S.current&&((e,t)=>{if(!w.current||!S.current)return;const n=[t,e];S.current.setLngLat(n),w.current.flyTo({center:n,duration:1e3})})(e.coords.latitude,e.coords.longitude),Rr.socket&&Rr.isConnected()){const t={driverId:(null==s?void 0:s.driver_id)||"",latitude:e.coords.latitude,longitude:e.coords.longitude,timestamp:(new Date).toISOString(),speed:e.coords.speed||void 0,heading:e.coords.heading||void 0};Rr.socket.emit("driver:locationUpdate",t),b((new Date).toLocaleTimeString()),N(e=>e+1)}},e=>{let t="";switch(e.code){case e.PERMISSION_DENIED:t="Location permission denied. Please enable location access.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="Location request timed out.";break;default:t="An unknown error occurred."}h(t),i(!1)},e),i(!0)}catch(t){h("Failed to start location tracking")}}),T=()=>{E.current&&(navigator.geolocation.clearWatch(E.current),E.current=null),i(!1)},I=()=>{try{w.current&&(k.current.webglcontextlost&&w.current.off("webglcontextlost",k.current.webglcontextlost),k.current.webglcontextrestored&&w.current.off("webglcontextrestored",k.current.webglcontextrestored),k.current.error&&w.current.off("error",k.current.error),k.current.load&&w.current.off("load",k.current.load),k.current={},w.current.remove(),w.current=null),S.current=null}catch(e){}},R=t=>m(e,null,function*(){var e;try{const{data:{session:n}}=yield fr.auth.getSession();if(!(null==n?void 0:n.access_token))return!1;const r=yield fetch(`${hr.api.url}/buses?driver_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`},signal:AbortSignal.timeout(1e4)});if(r.ok){const t=yield r.json();if(t.success&&t.data&&Array.isArray(t.data)&&t.data.length>0){const e=t.data[0];return l({bus_id:e.bus_id||e.id,bus_number:e.bus_number||e.number_plate||e.code,route_id:e.route_id||"",route_name:e.route_name||"Route TBD",driver_id:e.driver_id||e.assigned_driver_id,driver_name:e.driver_name||e.driver_full_name||"Driver TBD"}),x(!0),!0}return(null==(e=t.data)?void 0:e.busInfo)?(l(t.data.busInfo),x(!0),!0):!!t.busInfo&&(l(t.busInfo),x(!0),!0)}return yield r.text(),!1}catch(n){return!1}});return r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[r.jsxDEV("div",{className:"card-glass p-6 mb-6",children:r.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxDEV("div",{className:"flex-1",children:[r.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:738,columnNumber:15},void 0),r.jsxDEV("div",{className:"space-y-1",children:[r.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:null==s?void 0:s.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:744,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:742,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[r.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:null==s?void 0:s.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:751,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:749,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:null==s?void 0:s.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:757,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:755,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:748,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:741,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:737,columnNumber:13},void 0),r.jsxDEV("div",{className:"flex gap-2",children:[r.jsxDEV("button",{onClick:()=>m(e,null,function*(){var e;const{data:{session:t}}=yield fr.auth.getSession();(null==(e=null==t?void 0:t.user)?void 0:e.id)&&R(t.user.id)}),className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:765,columnNumber:15},void 0),r.jsxDEV("button",{onClick:()=>m(e,null,function*(){try{T(),Rr.disconnect(),y.current=null,I(),yield fr.auth.signOut()}catch(e){}}),className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:779,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:764,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:736,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:735,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+("connected"===C?"bg-green-500":"connecting"===C?"bg-yellow-500 animate-pulse":"bg-red-500")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:794,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:804,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:"connected"===C?"Connected":"connecting"===C?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:805,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:803,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:793,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:792,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(o?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:819,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:823,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:o?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:826,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:822,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:817,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:836,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:837,columnNumber:15},void 0),f&&r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",f]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:839,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:835,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:834,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(d?"bg-red-500":a?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:849,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:853,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:d?"Error":a?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:854,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:852,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:848,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:847,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:790,columnNumber:9},void 0),r.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:868,columnNumber:11},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:o?r.jsxDEV("button",{onClick:T,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:894,columnNumber:15},void 0):r.jsxDEV(r.Fragment,{children:[r.jsxDEV("button",{onClick:M,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:874,columnNumber:17},void 0),d&&r.jsxDEV("button",{onClick:()=>{h(null),M()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:882,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:873,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:871,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:867,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:908,columnNumber:13},void 0),r.jsxDEV("div",{ref:P,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:911,columnNumber:13},void 0),d&&r.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[r.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:919,columnNumber:17},void 0),r.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[r.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:923,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[r.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:929,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:934,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:933,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:938,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:937,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:942,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:941,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:946,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:945,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:950,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:949,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:954,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:953,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:932,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:928,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[r.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:962,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:967,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:966,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:971,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:970,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:975,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:974,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:965,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:961,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[r.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:981,columnNumber:21},void 0),r.jsxDEV("button",{onClick:()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const n=`✅ Location Test Successful!\n\nLatitude: ${t.coords.latitude}\nLongitude: ${t.coords.longitude}\nAccuracy: ${t.coords.accuracy}m\nDevice: ${e?"Mobile":"Desktop"}\n\nLocation is working! You can now start tracking.`;alert(n),h(null)},t=>{const n=`❌ Location Test Failed\n\nError Code: ${t.code}\nError Message: ${t.message}\nDevice: ${e?"Mobile":"Desktop"}\n\nPlease check your location permissions.`;alert(n)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:988,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:922,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:918,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:907,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1042,columnNumber:13},void 0),a?r.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[r.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[r.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1049,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1050,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1048,columnNumber:17},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1056,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:a.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1057,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1055,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1062,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:a.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1063,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1061,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1068,columnNumber:21},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[null==(t=a.coords.accuracy)?void 0:t.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1069,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1067,columnNumber:19},void 0),a.coords.speed&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1075,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(3.6*a.coords.speed).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1076,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1074,columnNumber:21},void 0),a.coords.heading&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1083,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[a.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1084,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1082,columnNumber:21},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1090,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1091,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1089,columnNumber:19},void 0),f&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1097,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-medium text-sm",children:f},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1096,columnNumber:21},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1106,columnNumber:21},void 0),r.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(a.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1107,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1105,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1054,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1046,columnNumber:15},void 0):r.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[r.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1115,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1116,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1119,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1114,columnNumber:15},void 0),r.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[r.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1126,columnNumber:15},void 0),r.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[r.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1130,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1133,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1134,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1137,columnNumber:17},void 0),r.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1129,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1125,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1041,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:905,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:733,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:732,columnNumber:5},void 0)},Gr=new class{constructor(){d(this,"buses",{}),d(this,"previousLocations",{})}calculateSpeed(e,t,n,r,o){const i=this.toRadians(n-e),s=this.toRadians(r-t),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(n))*Math.sin(s/2)*Math.sin(s/2),a=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371/(o/36e5);return Math.round(10*a)/10}toRadians(e){return e*(Math.PI/180)}updateBusLocation(e){var t,n;const{busId:r,latitude:o,longitude:i,timestamp:s}=e,l=this.previousLocations[r];let d;if(l){const e=new Date(s).getTime()-new Date(l.timestamp).getTime();e>0&&(d=this.calculateSpeed(l.latitude,l.longitude,o,i,e))}this.buses[r]?(this.buses[r].currentLocation=c(a({},e),{speed:d||e.speed}),this.buses[r].eta=null==(n=e.eta)?void 0:n.estimated_arrival_minutes):this.buses[r]={busId:r,busNumber:`Bus ${r}`,routeName:"Route TBD",driverName:"Driver TBD",currentLocation:c(a({},e),{speed:d||e.speed}),eta:null==(t=e.eta)?void 0:t.estimated_arrival_minutes},this.previousLocations[r]={latitude:o,longitude:i,timestamp:s}}getBus(e){return this.buses[e]||null}getAllBuses(){return Object.values(this.buses)}getBusesByRoute(e){return Object.values(this.buses).filter(t=>t.routeName===e)}syncBusFromAPI(e,t){return m(this,null,function*(){try{if(!t){const n=yield Ir.getBusInfo(e);if(!n.success||!n.data)return;t=n.data}this.buses[e]?this.buses[e]=c(a({},this.buses[e]),{busNumber:t.number_plate||t.code||`Bus ${e}`,routeName:t.route_name||"Route TBD",driverName:t.driver_full_name||"Driver TBD"}):this.buses[e]={busId:e,busNumber:t.number_plate||t.code||`Bus ${e}`,routeName:t.route_name||"Route TBD",driverName:t.driver_full_name||"Driver TBD",currentLocation:{busId:e,driverId:t.assigned_driver_id||"",latitude:0,longitude:0,timestamp:(new Date).toISOString()}}}catch(n){}})}syncAllBusesFromAPI(){return m(this,null,function*(){try{const e=yield Ir.getAllBuses();e.success&&e.data&&e.data.forEach(e=>{this.syncBusFromAPI(e.id,e)})}catch(e){}})}clearBuses(){this.buses={},this.previousLocations={}}getBusStats(){const e=Object.values(this.buses),t={};return e.forEach(e=>{const n=e.routeName;t[n]=(t[n]||0)+1}),{totalBuses:e.length,activeBuses:e.filter(e=>e.currentLocation).length,busesByRoute:t}}getActiveBuses(){const e=new Date(Date.now()-3e5);return Object.values(this.buses).filter(t=>new Date(t.currentLocation.timestamp)>e)}getBusLocationHistory(e){const t=this.buses[e];return t?[t.currentLocation]:[]}updateBusETA(e,t){this.buses[e]&&(this.buses[e].eta=t)}getBusesNearLocation(e,t,n=5){return Object.values(this.buses).filter(r=>{const o=r.currentLocation.latitude,i=r.currentLocation.longitude,s=this.toRadians(o-e),l=this.toRadians(i-t),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(o))*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371<=n})}},Kr=({children:e,className:t="",variant:n="default",hover:o=!0,glow:i=!1,onClick:s,delay:l=0})=>{const a=o?"hover:bg-white/15 hover:border-white/30 hover:-translate-y-1 hover:shadow-2xl":"",c=i?"hover:shadow-blue-500/20 hover:shadow-2xl":"",d=s?"cursor-pointer":"";return r.jsxDEV(E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:l,ease:[.4,0,.2,1]},whileHover:o?{y:-8,scale:1.02,transition:{duration:.3}}:{},whileTap:s?{scale:.98}:{},onClick:s,className:`\n        relative overflow-hidden rounded-2xl transition-all duration-500 layout-stable\n        ${{default:"bg-white/10 backdrop-blur-md border border-white/20 shadow-xl",premium:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",ultra:"bg-white/5 backdrop-blur-2xl border border-white/10 shadow-2xl"}[n]}\n        ${a}\n        ${c}\n        ${d}\n        ${t}\n      `,children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 hover:opacity-100 transition-opacity duration-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:68,columnNumber:7},void 0),i&&r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-2xl"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:72,columnNumber:9},void 0),r.jsxDEV("div",{className:"relative z-10 p-6 space-stable",children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:76,columnNumber:7},void 0),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/GlassyCard.tsx",lineNumber:39,columnNumber:5},void 0)};let Jr=c(a({},{enabled:!0,level:"info",enableDebugInProduction:!1,prefix:"🚌"}),{level:"debug",enableDebugInProduction:!1});function Yr(e){if(!Jr.enabled)return!1;const t=["debug","info","warn","error"],n=t.indexOf(Jr.level);return t.indexOf(e)>=n}const Zr={useDebounce:function(e,t){const n=u.useRef(null),r=u.useCallback((...r)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...r)},t)},[e,t]);return u.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),r},useThrottle:function(e,t){const n=u.useRef(0),r=u.useRef(null),o=u.useRef(null),i=u.useCallback((...i)=>{const s=Date.now(),l=s-n.current;o.current=i,l>=t?(n.current=s,e(...i)):(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n.current=Date.now(),o.current&&e(...o.current),r.current=null},t-l))},[e,t]);return u.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),i},useConstant:function(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e},[e]),t},useMemoDeep:function(e,t){const n=u.useMemo(()=>JSON.stringify(t),t);return u.useMemo(()=>e(),[n])},measurePerformance:function(e,t="Function"){return(...t)=>{performance.now();const n=e(...t);return performance.now(),n}}},Xr={debug:(e,...t)=>{Yr("debug")&&t.length},info:(e,...t)=>{Yr("info")&&t.length},warn:(e,...t)=>{Yr("warn")&&t.length},error:(e,...t)=>{Yr("error")&&t.length}},Qr=({className:t=""})=>{const n=u.useRef(null),o=u.useRef(null),i=u.useRef({}),s=u.useRef(!1),l=u.useRef(new Set),[d,h]=u.useState(!1),[f,b]=u.useState(null),[g,p]=u.useState("disconnected"),[N,v]=u.useState([]),[x,C]=u.useState([]),[j,y]=u.useState("all"),[P,S]=u.useState(!0),[_,V]=u.useState({}),[k,A]=u.useState(!1),[M,T]=u.useState(!0),[I,R]=u.useState(!0),L=u.useCallback(()=>m(e,null,function*(){try{Xr.info("Loading routes from backend API...");const e=yield Ir.getRoutes();e.success&&e.data?(Xr.info(`Routes loaded from backend: ${e.data.length} routes`),C(e.data),e.data.forEach(e=>{Xr.debug(`Route: ${e.name} (ID: ${e.id}) - Active: ${e.is_active}`)})):Xr.error("Failed to load routes:",e)}catch(e){Xr.error("Error loading routes:",e)}}),[]),O=u.useCallback(()=>{o.current&&x.forEach(e=>{const t=`route-${e.id}`;try{o.current.getLayer(t)&&o.current.removeLayer(t),o.current.getSource(t)&&o.current.removeSource(t),l.current.delete(t)}catch(n){Xr.warn(`Error removing route ${e.name}:`,n)}})},[x]),$=u.useCallback(()=>{o.current&&0!==x.length&&(Xr.info(`Adding routes to map: ${x.length} routes`),x.forEach((e,t)=>{const n=`route-${e.id}`;if(l.current.has(n)||o.current.getSource(n))Xr.debug(`Route ${n} already exists, skipping...`);else try{o.current.addSource(n,{type:"geojson",data:{type:"Feature",properties:{name:e.name,description:e.description,distance:e.distance_km,duration:e.estimated_duration_minutes},geometry:e.stops}}),o.current.addLayer({id:n,type:"line",source:n,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":`hsl(${137.5*t%360}, 70%, 50%)`,"line-width":4,"line-opacity":.8}}),Xr.debug(`Added route ${e.name} to map`),l.current.add(n)}catch(r){Xr.warn(`Error adding route ${e.name}:`,r)}}))},[x]),F=u.useCallback(Zr.useThrottle(e=>{if(!o.current)return;const{busId:t,latitude:n,longitude:r,speed:s}=e,l=Gr.getBus(t);if(l)if(i.current[t]){i.current[t].setLngLat([r,n]);const o=i.current[t].getPopup();o.isOpen()&&o.setHTML(`\n            <div class="bus-popup">\n              <div class="bus-popup-header">\n                <h3>🚌 Bus ${l.busNumber}</h3>\n                <div class="bus-status ${d?"online":"offline"}">\n                  ${d?"🟢 Online":"🔴 Offline"}\n                </div>\n              </div>\n              <div class="bus-popup-content">\n                <div class="bus-info">\n                  <p><strong>Driver:</strong> ${l.driverName||"N/A"}</p>\n                  <p><strong>Route:</strong> ${l.routeName||"N/A"}</p>\n                  <p><strong>Speed:</strong> ${s?`${s} km/h`:"N/A"}</p>\n                  <p><strong>Last Update:</strong> ${new Date(e.timestamp).toLocaleTimeString()}</p>\n                </div>\n              </div>\n            </div>\n          `);try{const n=i.current[t].getElement(),r=n.querySelector(".bus-speed");r&&(r.textContent=s?`${s} km/h`:"N/A");const o=n.querySelector(".bus-eta");o&&e.eta&&(o.textContent=`ETA: ${e.eta.estimated_arrival_minutes} min`)}catch(a){}}else{const a=document.createElement("div");a.className="bus-marker",a.innerHTML=`\n          <div class="bus-marker-pin">\n            <div class="bus-marker-icon">🚌</div>\n            <div class="bus-marker-pulse"></div>\n          </div>\n          <div class="bus-marker-content">\n            <div class="bus-number">${l.busNumber}</div>\n            <div class="bus-speed">${s?`${s} km/h`:"N/A"}</div>\n            <div class="bus-eta">${e.eta?`ETA: ${e.eta.estimated_arrival_minutes} min`:"ETA: N/A"}</div>\n          </div>\n        `;const c=new D.Marker({element:a,anchor:"center"}).setLngLat([r,n]).addTo(o.current),m=`\n          <div class="bus-popup">\n            <div class="bus-popup-header">\n              <h3>🚌 Bus ${l.busNumber}</h3>\n              <div class="bus-status ${d?"online":"offline"}">\n                ${d?"🟢 Online":"🔴 Offline"}\n              </div>\n            </div>\n            <div class="bus-popup-content">\n              <div class="bus-info">\n                <p><strong>Driver:</strong> ${l.driverName||"N/A"}</p>\n                <p><strong>Route:</strong> ${l.routeName||"N/A"}</p>\n                <p><strong>Speed:</strong> ${s?`${s} km/h`:"N/A"}</p>\n                <p><strong>Last Update:</strong> ${new Date(e.timestamp).toLocaleTimeString()}</p>\n              </div>\n            </div>\n          </div>\n        `,u=new D.Popup({offset:25,className:"bus-popup-container",maxWidth:"300px",closeButton:!1}).setHTML(m);c.setPopup(u),i.current[t]=c}},500),[d]),B=u.useCallback(e=>{i.current[e]&&(i.current[e].remove(),delete i.current[e])},[]),U=u.useCallback(()=>{if(!o.current||0===Object.keys(_).length)return;const e=Object.values(_).map(e=>[e.longitude,e.latitude]);if(1===e.length)o.current.flyTo({center:e[0],zoom:16,duration:2e3});else if(e.length>1){const t=new D.LngLatBounds;e.forEach(e=>t.extend(e)),o.current.fitBounds(t,{padding:50,duration:2e3})}},[_]),H=u.useCallback(e=>{Xr.debug("Bus location update received",{busId:e.busId,lat:e.latitude,lng:e.longitude,speed:e.speed}),V(t=>c(a({},t),{[e.busId]:e})),F(e)},[F]),q=u.useCallback(e=>{Xr.info(`Driver connected: ${e.driverId} with bus ${e.busId}`)},[]),W=u.useCallback(e=>{Xr.info(`Driver disconnected: ${e.driverId} with bus ${e.busId}`),B(e.busId)},[B]),z=u.useCallback(e=>{Xr.info(`Bus ${e.busId} arriving at route ${e.routeId}`)},[]);u.useEffect(()=>{if(!s.current&&n.current)return Xr.info("Initializing map..."),s.current=!0,o.current=new D.Map({container:n.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[72.571,23.025],zoom:12,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),o.current.addControl(new D.NavigationControl,"top-right"),o.current.once("load",()=>{Xr.info("Map loaded successfully"),S(!1),L()}),o.current.on("error",e=>{Xr.error("Map error:",e)}),()=>{i.current&&(Object.values(i.current).forEach(e=>{if(e){const t=e.getPopup();t&&t.remove(),e.remove()}}),i.current={}),o.current&&(l.current.forEach(e=>{var t,n;try{(null==(t=o.current)?void 0:t.getLayer(e))&&o.current.removeLayer(e),(null==(n=o.current)?void 0:n.getSource(e))&&o.current.removeSource(e)}catch(r){}}),l.current.clear(),o.current.remove(),o.current=null,s.current=!1)}},[L]),u.useEffect(()=>{let t,n,r;const o=new Map,i=()=>m(e,null,function*(){try{b(null),p("connecting"),Rr.reset(),Xr.info("Connecting to WebSocket server..."),yield Rr.connect(),h(!0),p("connected"),Xr.info("WebSocket connected successfully");const t=(e,t)=>(o.set(e,t),t);Rr.onBusLocationUpdate(t("bus:locationUpdate",H)),Rr.onDriverConnected(t("driver:connected",q)),Rr.onDriverDisconnected(t("driver:disconnected",W)),Rr.socket&&(Rr.socket.emit("student:connect"),Xr.debug("Emitted student:connect event")),Rr.onStudentConnected(t("student:connected",()=>{Xr.info("Student connected to WebSocket")})),Rr.onBusArriving(t("bus:arriving",z)),n=setInterval(()=>{Rr.getConnectionStatus()||"connected"!==g||(Xr.warn("WebSocket connection lost, updating UI state"),p("disconnected"),h(!1))},1e4);const i=()=>m(e,null,function*(){try{let e=0;const t=50;for(;!br.isInitialized()&&e<t;)yield new Promise(e=>setTimeout(e,100)),e++;Xr.info("Loading initial bus data from API");const n=yield Ir.getAllBuses();if(n.success&&n.data){Xr.info(`Initial bus data from API: ${n.data.length} buses`),Gr.clearBuses(),n.data.forEach(e=>{const t=e.id;t&&Gr.syncBusFromAPI(t,e)});const e=Gr.getAllBuses();v(e),Xr.info(`Initial buses loaded and synced: ${n.data.length}`)}}catch(e){Xr.error("Error loading initial buses:",e)}});r=setTimeout(()=>i(),0)}catch(s){Xr.error("WebSocket connection failed:",s),b("Failed to connect to real-time updates"),h(!1),p("disconnected"),t=setTimeout(()=>{Xr.info("Retrying WebSocket connection..."),p("reconnecting"),i()},5e3)}});return i(),()=>{t&&clearTimeout(t),n&&clearInterval(n),r&&clearTimeout(r),Rr.socket&&(o.forEach((e,t)=>{Rr.off(t)}),o.clear()),Rr.disconnect()}},[z,H,q,W]);const G=Zr.useMemoDeep(()=>{if("all"===j)return N;const e=new Map;return x.forEach(t=>{e.set(t.name,t)}),N.filter(t=>{const n=e.get(t.routeName);return n&&n.id===j})},[N,j,x]),K=u.useMemo(()=>x.map(e=>({id:e.id,name:e.name,description:e.description})),[x]);return u.useEffect(()=>{if(x.length>0&&o.current)if(o.current.isStyleLoaded())O(),$();else{const e=()=>{var t;O(),$(),null==(t=o.current)||t.off("styledata",e)};o.current.on("styledata",e)}return()=>{o.current&&(O(),o.current.off("styledata",()=>{}))}},[x,$,O]),r.jsxDEV("div",{className:`relative h-screen ${t}`,children:[P&&r.jsxDEV("div",{className:"loading-overlay",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:677,columnNumber:13},void 0),r.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:678,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:676,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:675,columnNumber:9},void 0),f&&r.jsxDEV("div",{className:"error-overlay",children:r.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxDEV("div",{className:"flex",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:694,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:689,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:688,columnNumber:15},void 0),r.jsxDEV("div",{className:"ml-3",children:[r.jsxDEV("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:702,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-red-700 mt-1",children:f},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:705,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:701,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:687,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:686,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:685,columnNumber:9},void 0),r.jsxDEV("div",{ref:n,className:"map-container rounded-lg"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:713,columnNumber:7},void 0),r.jsxDEV(E.div,{initial:{x:-400},animate:{x:k?-350:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-4 left-4 z-30",children:[r.jsxDEV("button",{onClick:()=>A(!k),className:"absolute -right-12 top-0 p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/20 transition-all duration-200 z-40",children:r.jsxDEV("svg",{className:"w-5 h-5 text-white transition-transform duration-200 "+(k?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:735,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:727,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:723,columnNumber:9},void 0),r.jsxDEV(Kr,{variant:"premium",glow:!0,className:"w-80 max-h-[calc(100vh-2rem)] overflow-hidden",children:[r.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[r.jsxDEV("div",{className:"flex items-center space-x-3",children:[r.jsxDEV("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:751,columnNumber:15},void 0),r.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"Student Live Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:752,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:750,columnNumber:13},void 0),r.jsxDEV("div",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded",children:"Live Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:756,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:749,columnNumber:11},void 0),r.jsxDEV("div",{className:"p-4 space-y-4 max-h-[calc(100vh-8rem)] overflow-y-auto",children:[r.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-blue-50/80 rounded-lg border border-blue-200/50",children:[r.jsxDEV("div",{className:"flex items-center space-x-2",children:[r.jsxDEV("div",{className:"w-2 h-2 rounded-full "+(d?"bg-green-500 animate-pulse":"bg-red-500")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:766,columnNumber:17},void 0),r.jsxDEV("span",{className:"text-sm text-gray-800 font-medium",children:d?"Live Connected":"Offline"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:771,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:765,columnNumber:15},void 0),r.jsxDEV("span",{className:"text-xs text-gray-600 bg-white/70 px-2 py-1 rounded",children:[G.length," buses"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:775,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:764,columnNumber:13},void 0),r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Route Filter"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:783,columnNumber:17},void 0),r.jsxDEV("button",{onClick:()=>T(!M),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:r.jsxDEV("svg",{className:"w-4 h-4 text-gray-600 transition-transform duration-200 "+(M?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:798,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:790,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:786,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:782,columnNumber:15},void 0),r.jsxDEV(w,{children:M&&r.jsxDEV(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-3",children:[r.jsxDEV("select",{value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200",children:[r.jsxDEV("option",{value:"all",children:["All Routes (",x.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:822,columnNumber:23},void 0),K.map(e=>r.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:824,columnNumber:25},void 0))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:817,columnNumber:21},void 0),r.jsxDEV("button",{onClick:U,disabled:0===G.length,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 border border-blue-600 rounded-lg text-white font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["📍 Center on Buses (",G.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:830,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:810,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:808,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:781,columnNumber:13},void 0),r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("h3",{className:"text-sm font-semibold text-gray-800",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:845,columnNumber:17},void 0),r.jsxDEV("button",{onClick:()=>R(!I),className:"p-1 hover:bg-gray-100 rounded transition-colors duration-200",children:r.jsxDEV("svg",{className:"w-4 h-4 text-gray-600 transition-transform duration-200 "+(I?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:860,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:852,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:848,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:844,columnNumber:15},void 0),r.jsxDEV(w,{children:I&&r.jsxDEV(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-2 max-h-64 overflow-y-auto",children:0===G.length?r.jsxDEV("div",{className:"text-center py-4",children:[r.jsxDEV("div",{className:"text-gray-400 text-2xl mb-2",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:881,columnNumber:25},void 0),r.jsxDEV("p",{className:"text-gray-600 text-sm",children:"No buses tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:882,columnNumber:25},void 0),r.jsxDEV("p",{className:"text-gray-500 text-xs mt-1",children:"Check connection status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:885,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:880,columnNumber:23},void 0):G.map(e=>{const t=_[e.busId];return r.jsxDEV(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 cursor-pointer transition-all duration-200 shadow-sm",onClick:()=>{const t=_[e.busId];if(t&&o.current){o.current.flyTo({center:[t.longitude,t.latitude],zoom:16,duration:1e3});const n=i.current[e.busId];n&&n.getPopup().addTo(o.current)}},children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[r.jsxDEV("div",{className:"flex items-center space-x-2",children:[r.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:919,columnNumber:33},void 0),r.jsxDEV("span",{className:"font-medium text-sm text-gray-800",children:e.busNumber},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:920,columnNumber:33},void 0),r.jsxDEV("span",{className:"text-xs text-blue-600 opacity-75",children:"👆"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:923,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:918,columnNumber:31},void 0),r.jsxDEV("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:e.eta?`${e.eta} min`:"ETA: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:927,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:917,columnNumber:29},void 0),r.jsxDEV("div",{className:"space-y-1",children:[r.jsxDEV("div",{className:"text-xs text-gray-600",children:["📍 Route: ",e.routeName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:934,columnNumber:31},void 0),r.jsxDEV("div",{className:"text-xs text-gray-600",children:["👨‍💼 Driver: ",e.driverName]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:937,columnNumber:31},void 0),t&&r.jsxDEV("div",{className:"flex items-center justify-between text-xs",children:[r.jsxDEV("span",{className:"text-green-600",children:["🕐"," ",new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:942,columnNumber:35},void 0),r.jsxDEV("span",{className:"text-blue-600",children:t.speed?`${t.speed} km/h`:"Speed: --"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:951,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:941,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:933,columnNumber:29},void 0)]},e.busId,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:893,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:872,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:870,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:843,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:762,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:743,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:716,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/EnhancedStudentMap.tsx",lineNumber:672,columnNumber:5},void 0)},eo=hr.api.url,to=new class{makeRequest(e){return m(this,arguments,function*(e,t={}){let n;try{const r=br.getAccessToken();if(!r)throw new Error("No access token available");const o=new AbortController;n=setTimeout(()=>o.abort(),15e3);const i=eo||hr.api.url,s=yield fetch(`${i}/admin${e}`,c(a({},t),{signal:o.signal,headers:a({"Content-Type":"application/json",Authorization:`Bearer ${r}`},t.headers)})),l=yield s.json();if(n&&clearTimeout(n),!s.ok)throw 429===s.status?new Error("Rate limit exceeded. Please wait a moment and try again."):401===s.status?new Error("Authentication required. Please log in again."):403===s.status?new Error("Access denied. You do not have permission for this action."):404===s.status?new Error("Resource not found."):409===s.status?new Error(l.message||"Resource already exists"):s.status>=500?new Error("Server error. Please try again later."):new Error(l.message||l.error||"Request failed");return l}catch(r){return n&&clearTimeout(n),{success:!1,error:r instanceof Error?r.message:"Request failed"}}})}getAnalytics(){return m(this,null,function*(){return this.makeRequest("/analytics")})}getSystemHealth(){return m(this,null,function*(){return this.makeRequest("/health")})}getAllBuses(){return m(this,null,function*(){return yield this.makeRequest("/buses")})}getBusById(e){return m(this,null,function*(){return this.makeRequest(`/buses/${e}`)})}createBus(e){return m(this,null,function*(){return this.makeRequest("/buses",{method:"POST",body:JSON.stringify(e)})})}updateBus(e,t){return m(this,null,function*(){return this.makeRequest(`/buses/${e}`,{method:"PUT",body:JSON.stringify(t)})})}deleteBus(e){return m(this,null,function*(){return this.makeRequest(`/buses/${e}`,{method:"DELETE"})})}getAllDrivers(){return m(this,null,function*(){return yield this.makeRequest("/drivers")})}getAssignedDrivers(){return m(this,null,function*(){return yield this.makeRequest("/assigned-drivers")})}getDriverById(e){return m(this,null,function*(){return this.makeRequest(`/drivers/${e}`)})}assignDriverToBus(e,t){return m(this,null,function*(){return this.makeRequest(`/drivers/${e}/assign-bus`,{method:"POST",body:JSON.stringify({busId:t})})})}unassignDriverFromBus(e){return m(this,null,function*(){return this.makeRequest(`/drivers/${e}/unassign-bus`,{method:"POST"})})}createDriver(e){return m(this,null,function*(){return this.makeRequest("/drivers",{method:"POST",body:JSON.stringify(e)})})}updateDriver(e,t){return m(this,null,function*(){return this.makeRequest(`/drivers/${e}`,{method:"PUT",body:JSON.stringify(t)})})}deleteDriver(e){return m(this,null,function*(){return this.makeRequest(`/drivers/${e}`,{method:"DELETE"})})}getAllRoutes(){return m(this,null,function*(){return yield this.makeRequest("/routes")})}getRouteById(e){return m(this,null,function*(){return this.makeRequest(`/routes/${e}`)})}createRoute(e){return m(this,null,function*(){return this.makeRequest("/routes",{method:"POST",body:JSON.stringify(e)})})}updateRoute(e,t){return m(this,null,function*(){return this.makeRequest(`/routes/${e}`,{method:"PUT",body:JSON.stringify(t)})})}deleteRoute(e){return m(this,null,function*(){return this.makeRequest(`/routes/${e}`,{method:"DELETE"})})}},no=hr.api.url;class ro{static makeRequest(e){return m(this,arguments,function*(e,t={}){let n=br.getAccessToken();if(!n&&br.isAuthenticated()){if(!(yield br.refreshSession()).success)throw new Error("Authentication required");n=br.getAccessToken()}const r=a({"Content-Type":"application/json"},n&&{Authorization:`Bearer ${n}`}),o=no||hr.api.url;return fetch(`${o}/storage${e}`,c(a({},t),{headers:a(a({},r),t.headers)}))})}static uploadBusImage(e,t){return m(this,null,function*(){try{const n=br.getAccessToken();if(!n)return{success:!1,error:"Authentication required"};const r=new FormData;r.append("image",t),r.append("busId",e);const o=no||hr.api.url,i=yield fetch(`${o}/storage/upload/bus-image`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!i.ok)return{success:!1,error:(yield i.json()).error||"Upload failed"};const s=yield i.json();return{success:!0,url:s.url,fileName:s.fileName}}catch(n){return{success:!1,error:"Network error during upload"}}})}static uploadDriverPhoto(e,t){return m(this,null,function*(){try{const n=br.getAccessToken();if(!n)return{success:!1,error:"Authentication required"};const r=new FormData;r.append("photo",t),r.append("driverId",e);const o=no||hr.api.url,i=yield fetch(`${o}/storage/upload/driver-photo`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!i.ok)return{success:!1,error:(yield i.json()).error||"Upload failed"};const s=yield i.json();return{success:!0,url:s.url,fileName:s.fileName}}catch(n){return{success:!1,error:"Network error during upload"}}})}static uploadRouteMap(e,t){return m(this,null,function*(){try{const n=br.getAccessToken();if(!n)return{success:!1,error:"Authentication required"};const r=new FormData;r.append("map",t),r.append("routeId",e);const o=no||hr.api.url,i=yield fetch(`${o}/storage/upload/route-map`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!i.ok)return{success:!1,error:(yield i.json()).error||"Upload failed"};const s=yield i.json();return{success:!0,url:s.url,fileName:s.fileName}}catch(n){return{success:!1,error:"Network error during upload"}}})}static getSignedUrl(e,t){return m(this,null,function*(){try{const n=yield this.makeRequest(`/signed-url/${e}/${t}`);if(!n.ok)return{success:!1,error:(yield n.json()).error||"Failed to get signed URL"};const r=yield n.json();return{success:!0,signedUrl:r.signedUrl,expiresIn:r.expiresIn}}catch(n){return{success:!1,error:"Network error"}}})}static deleteFile(e,t,n){return m(this,null,function*(){try{const r=yield this.makeRequest(`/delete/${e}/${t}`,{method:"DELETE",body:JSON.stringify({fileUrl:n})});return r.ok?{success:!0}:{success:!1,error:(yield r.json()).error||"Delete failed"}}catch(r){return{success:!1,error:"Network error during deletion"}}})}static getFileInfo(e,t){return m(this,null,function*(){try{const n=yield this.makeRequest(`/info/${e}/${t}`);if(!n.ok)return{success:!1,hasFile:!1,error:(yield n.json()).error||"Failed to get file info"};const r=yield n.json();return{success:!0,hasFile:r.hasFile,url:r.url,info:r.info}}catch(n){return{success:!1,hasFile:!1,error:"Network error"}}})}static listFiles(e){return m(this,null,function*(){try{const t=yield this.makeRequest(`/list/${e}`);return t.ok?{success:!0,files:(yield t.json()).files}:{success:!1,error:(yield t.json()).error||"Failed to list files"}}catch(t){return{success:!1,error:"Network error"}}})}static validateFile(e,t,n){return e?t.includes(e.type)?e.size>n?{isValid:!1,error:`File too large. Maximum size: ${n/1048576}MB`}:{isValid:!0}:{isValid:!1,error:`Invalid file type. Allowed types: ${t.join(", ")}`}:{isValid:!1,error:"No file selected"}}static validateImage(e){return this.validateFile(e,["image/jpeg","image/jpg","image/png","image/webp"],5242880)}static validateDocument(e){return this.validateFile(e,["application/pdf","image/jpeg","image/jpg","image/png"],10485760)}}function oo(){const[e,t]=u.useState("bus"),[n,o]=u.useState([]),[i,s]=u.useState([]),[l,a]=u.useState([]),[c,d]=u.useState(!0),[h,f]=u.useState(!1),[b,g]=u.useState(null),[p,N]=u.useState(""),[v,x]=u.useState(null),[C,j]=u.useState(null);u.useEffect(()=>{y()},[]);const y=()=>m(this,null,function*(){d(!0),x(null);try{const[e,t,n]=yield Promise.all([to.getAllBuses(),to.getAllDrivers(),to.getAllRoutes()]);if(e.success&&e.data&&o(e.data),t.success&&t.data){const e=new Map;t.data.forEach(t=>{const n=t.id;if(e.has(n)){const r=e.get(n);(!r.email&&t.email||r.email&&t.email&&!r.first_name&&t.first_name)&&e.set(n,t)}else e.set(n,t)});const n=Array.from(e.values());s(n)}n.success&&n.data&&a(n.data)}catch(e){x("Failed to load data")}finally{d(!1)}}),D=(t,n)=>m(this,null,function*(){if(confirm("Are you sure you want to delete this file?"))try{const r=yield ro.deleteFile(e,t,n);r.success?(j("File deleted successfully!"),y()):x(r.error||"Delete failed")}catch(r){x("Delete failed. Please try again.")}}),E=()=>{switch(e){case"bus":return n;case"driver":return i;case"route":return l;default:return[]}},w=t=>{switch(e){case"bus":return t.number_plate;case"driver":{const e=t;return`${e.first_name} ${e.last_name}`}case"route":return t.name;default:return"Unknown"}},P=()=>{switch(e){case"bus":return"Bus Images";case"driver":return"Driver Photos";case"route":return"Route Maps";default:return"Media"}};return c?r.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:272,columnNumber:11},this),r.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading media management..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:273,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:271,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:270,columnNumber:7},this):r.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:r.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:r.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Media Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:285,columnNumber:13},this),v&&r.jsxDEV("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxDEV("p",{className:"text-red-700",children:v},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:291,columnNumber:15},this),C&&r.jsxDEV("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:r.jsxDEV("p",{className:"text-green-700",children:C},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:297,columnNumber:15},this),r.jsxDEV("div",{className:"border-b border-gray-200 mb-6",children:r.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[{id:"bus",name:"Bus Images"},{id:"driver",name:"Driver Photos"},{id:"route",name:"Route Maps"}].map(n=>r.jsxDEV("button",{onClick:()=>t(n.id),className:"py-2 px-1 border-b-2 font-medium text-sm "+(e===n.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:n.name},n.id,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:310,columnNumber:19},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:303,columnNumber:13},this),r.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload ",P()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:329,columnNumber:15},this),r.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:336,columnNumber:19},this),r.jsxDEV("input",{type:"file",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&(g(n),x(null))},accept:"route"===e?".pdf,.jpg,.jpeg,.png":".jpg,.jpeg,.png,.webp",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:339,columnNumber:19},this),b&&r.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:["Selected: ",b.name," (",(b.size/1024/1024).toFixed(2)," MB)"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:335,columnNumber:17},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select"," ","bus"===e?"Bus":"driver"===e?"Driver":"Route"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:359,columnNumber:19},this),r.jsxDEV("select",{value:p,onChange:e=>N(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500",children:[r.jsxDEV("option",{value:"",children:"Choose..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:372,columnNumber:21},this),E().map(e=>r.jsxDEV("option",{value:e.id||"",children:w(e)},e.id||"temp",!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:374,columnNumber:23},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:358,columnNumber:17},this),r.jsxDEV("div",{className:"flex items-end",children:r.jsxDEV("button",{onClick:()=>m(this,null,function*(){if(b&&p){f(!0),x(null),j(null);try{let t;switch(e){case"bus":t=yield ro.uploadBusImage(p,b);break;case"driver":t=yield ro.uploadDriverPhoto(p,b);break;case"route":t=yield ro.uploadRouteMap(p,b)}t.success?(j("File uploaded successfully!"),g(null),N(""),y()):x(t.error||"Upload failed")}catch(t){x("Upload failed. Please try again.")}finally{f(!1)}}else x("Please select a file and an item")}),disabled:!b||!p||h,className:"w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:h?"Uploading...":"Upload"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:328,columnNumber:13},this),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Current ",P()]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:396,columnNumber:15},this),0===E().length?r.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No items found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:401,columnNumber:17},this):r.jsxDEV("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:E().map(t=>{const n=(t=>{let n=null;switch(e){case"bus":n=t.bus_image_url||null;break;case"driver":n=t.profile_photo_url||null;break;case"route":n=t.route_map_url||null;break;default:return null}return n?n.startsWith("http")?n:n.includes("/")?`https://gthwmwfwvhyriygpcdlr.supabase.co/storage/v1/object/public/bus-tracking-media/${n}`:n:null})(t),o=w(t);return r.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxDEV("h4",{className:"font-medium text-gray-900 mb-2",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:414,columnNumber:25},this),n?r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"mb-3",children:"route"!==e?r.jsxDEV("img",{src:n,alt:o,className:"w-full h-32 object-cover rounded-md",onError:e=>{e.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBVbmF2YWlsYWJsZTwvdGV4dD48L3N2Zz4="}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:422,columnNumber:33},this):r.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-md flex items-center justify-center",children:r.jsxDEV("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:439,columnNumber:37},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:433,columnNumber:35},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:432,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:420,columnNumber:29},this),r.jsxDEV("div",{className:"flex space-x-2",children:[r.jsxDEV("button",{onClick:()=>window.open(n,"_blank"),className:"flex-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"View"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:451,columnNumber:31},this),r.jsxDEV("button",{onClick:()=>t.id&&D(t.id,n),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",disabled:!t.id,children:"Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:457,columnNumber:31},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:419,columnNumber:27},this):r.jsxDEV("div",{className:"text-center py-4",children:[r.jsxDEV("p",{className:"text-gray-500 text-sm mb-2",children:"No file uploaded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:470,columnNumber:29},this),r.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsxDEV("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:474,columnNumber:31},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:473,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:469,columnNumber:27},this)]},t.id||"temp",!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:410,columnNumber:23},this)})},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:405,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:281,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MediaManagement.tsx",lineNumber:280,columnNumber:5},this)}const io={name:"Ganpat University",coordinates:[72.4563,23.5295],address:"Ganpat Vidyanagar, Mehsana-Gozaria Highway, Kherva, Gujarat 384012",city:"Mehsana"},so=({onLocationSelect:t,onClose:n,title:o,defaultCenter:i=io.coordinates,searchPlaceholder:s="Search for a location..."})=>{N.useRef(Math.random().toString(36).substr(2,9));const l=u.useRef(null),a=u.useRef(null),c=u.useRef(null),[d,h]=u.useState(""),[f,b]=u.useState(null),[g,p]=u.useState(!0),[v,x]=u.useState(null);u.useEffect(()=>{if(l.current&&!a.current)return a.current=new D.Map({container:l.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:io.coordinates,zoom:12,preserveDrawingBuffer:!0,antialias:!1,maxZoom:18,minZoom:5,maxPitch:0,pitch:0}),a.current.on("load",()=>{var e;try{null==(e=a.current)||e.addControl(new D.NavigationControl),c.current=new D.Marker({draggable:!0,color:"#3B82F6"}).setLngLat(i).addTo(a.current),a.current.flyTo({center:io.coordinates,zoom:12,duration:1e3}),b({name:io.name,coordinates:io.coordinates,address:io.address}),c.current.on("dragend",()=>{var e;const t=null==(e=c.current)?void 0:e.getLngLat();t&&C([t.lng,t.lat])}),p(!1)}catch(t){x("Failed to initialize map"),p(!1)}}),a.current.on("error",e=>{x("Map failed to load"),p(!1)}),a.current.on("click",e=>{var t;const n=[e.lngLat.lng,e.lngLat.lat];null==(t=c.current)||t.setLngLat(n),C(n)}),a.current.on("webglcontextlost",()=>{}),a.current.on("webglcontextrestored",()=>{}),()=>{if(a.current)try{a.current.off("load",()=>{}),a.current.off("click",()=>{}),a.current.off("error",()=>{}),a.current.off("webglcontextlost",()=>{}),a.current.off("webglcontextrestored",()=>{}),c.current&&c.current.remove(),a.current.remove()}catch(e){}finally{a.current=null,c.current=null}}},[i]);const C=t=>m(e,null,function*(){try{const e=yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t[1]}&lon=${t[0]}&zoom=18&addressdetails=1`),n=yield e.json(),r={name:n.display_name.split(",")[0]||"Selected Location",coordinates:t,address:n.display_name};b(r)}catch(e){b({name:"Selected Location",coordinates:t,address:`${t[1]}, ${t[0]}`})}}),j=()=>m(e,null,function*(){var e;if(d.trim()&&a.current)try{const t=yield fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(d)}&limit=5&countrycodes=in`),n=yield t.json();if(n.length>0){const t=n[0],r=[parseFloat(t.lon),parseFloat(t.lat)];a.current.flyTo({center:r,zoom:15}),null==(e=c.current)||e.setLngLat(r);const o={name:t.display_name.split(",")[0]||d,coordinates:r,address:t.display_name};b(o)}}catch(t){}});return r.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[r.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800",children:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:273,columnNumber:11},void 0),r.jsxDEV("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:r.jsxDEV("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:284,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:278,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:274,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:272,columnNumber:9},void 0),r.jsxDEV("div",{className:"p-4 border-b",children:[r.jsxDEV("div",{className:"flex gap-2 mb-2",children:[r.jsxDEV("input",{type:"text",value:d,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&j()},placeholder:s,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:297,columnNumber:13},void 0),r.jsxDEV("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Search"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:305,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:296,columnNumber:11},void 0),r.jsxDEV("div",{className:"flex gap-2",children:r.jsxDEV("button",{onClick:()=>{var e;a.current&&(a.current.flyTo({center:io.coordinates,zoom:12}),null==(e=c.current)||e.setLngLat(io.coordinates),b({name:io.name,coordinates:io.coordinates,address:io.address}))},className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"🏫 Reset to Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:313,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:312,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:295,columnNumber:9},void 0),r.jsxDEV("div",{className:"flex-1 relative",children:[g&&r.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:344,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-gray-600",children:"Loading map..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:345,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:343,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:342,columnNumber:13},void 0),v&&r.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("p",{className:"text-red-600 mb-2",children:["⚠️ ",v]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:353,columnNumber:17},void 0),r.jsxDEV("button",{onClick:()=>{x(null),p(!0),a.current&&(a.current.remove(),a.current=null,c.current=null);const e=l.current;e&&(e.innerHTML="")},className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:354,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:352,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:351,columnNumber:13},void 0),r.jsxDEV("div",{ref:l,className:"w-full h-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:378,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:340,columnNumber:9},void 0),f&&r.jsxDEV("div",{className:"p-4 border-t bg-gray-50",children:[r.jsxDEV("div",{className:"mb-4",children:[r.jsxDEV("h3",{className:"font-semibold text-gray-800 mb-2",children:"Selected Location:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:385,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-gray-700 font-medium",children:f.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:388,columnNumber:15},void 0),f.address&&r.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:f.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:392,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Coordinates: ",f.coordinates[1].toFixed(6),","," ",f.coordinates[0].toFixed(6)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:396,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:384,columnNumber:13},void 0),r.jsxDEV("div",{className:"flex gap-2",children:[r.jsxDEV("button",{onClick:()=>{f&&(t(f),n())},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Confirm Selection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:403,columnNumber:15},void 0),r.jsxDEV("button",{onClick:n,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:409,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:402,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/MapSelector.tsx",lineNumber:269,columnNumber:5},void 0)};function lo(){const[e,t]=u.useState("buses"),[n,o]=u.useState(!1),[i,s]=u.useState(null),[l,d]=u.useState(null),[h,f]=u.useState([]),[b,g]=u.useState([]),[p,N]=u.useState([]),[v,x]=u.useState([]),[C,j]=u.useState(!1),[y,D]=u.useState(!1),[E,w]=u.useState(!1),[P,S]=u.useState(!1),[_,V]=u.useState(!1),[k,A]=u.useState(!1),[M,T]=u.useState(null),[I,R]=u.useState(null),[L,O]=u.useState(!1),[$,F]=u.useState(!1),[B,U]=u.useState({code:"",number_plate:"",capacity:50,model:"",year:(new Date).getFullYear(),is_active:!0}),[H,q]=u.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[W,z]=u.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[G,K]=u.useState(!1),[J,Y]=u.useState(!1),[Z,X]=u.useState(""),[Q,ee]=u.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[te,ne]=u.useState(!1),[re,oe]=u.useState("destination"),[ie,se]=u.useState(null),[le,ae]=u.useState(null),ce=u.useCallback(()=>m(this,null,function*(){o(!0),s(null);try{const[e,t,n]=yield Promise.all([to.getAllBuses(),to.getAllDrivers(),to.getAllRoutes()]);if(e.success&&e.data&&f(e.data),t.success&&t.data){const e=new Map;t.data.forEach(t=>{const n=t.id;if(e.has(n)){const r=e.get(n);(!r.email&&t.email||r.email&&t.email&&!r.first_name&&t.first_name)&&e.set(n,t)}else e.set(n,t)});const n=Array.from(e.values());g(n)}n.success&&n.data&&x(n.data),yield de(),e.success&&t.success&&n.success||s("Failed to load some data")}catch(e){s("An error occurred while loading data")}finally{o(!1)}}),[]);u.useEffect(()=>{ce()},[ce]);const de=()=>m(this,null,function*(){try{const e=yield to.getAssignedDrivers();if(e.success&&e.data){const t=new Map;e.data.forEach(e=>{const n=e.driver_id;if(t.has(n)){const r=t.get(n);(!r.driver_email&&e.driver_email||r.driver_email&&e.driver_email&&!r.driver_name&&e.driver_name)&&t.set(n,e)}else t.set(n,e)});const n=Array.from(t.values());N(n)}else N([])}catch(e){N([])}}),me=e=>m(this,null,function*(){if(confirm("Are you sure you want to delete this bus?")){o(!0),s(null);try{const t=yield to.deleteBus(e);t.success?(f(h.filter(t=>t.id!==e)),d("Bus deleted successfully!"),setTimeout(()=>d(null),3e3)):s(t.error||"Failed to delete bus")}catch(t){s("An error occurred while deleting bus")}finally{o(!1)}}}),ue=(e,t)=>m(this,null,function*(){o(!0),s(null);try{const n=yield to.updateBus(e,{route_id:t});n.success&&n.data?(f(h.map(n=>n.id===e?c(a({},n),{route_id:t}):n)),d("Route assigned to bus successfully!"),setTimeout(()=>d(null),3e3)):s(n.error||"Failed to assign route to bus")}catch(n){s("An error occurred while assigning route to bus")}finally{o(!1)}}),he=(e,t)=>m(this,null,function*(){o(!0),s(null);try{const n=yield to.assignDriverToBus(e,t);n.success&&n.data?(yield ce(),d("Bus assigned to driver successfully!"),setTimeout(()=>d(null),3e3)):s(n.error||"Failed to assign bus to driver")}catch(n){s("An error occurred while assigning bus to driver")}finally{o(!1)}}),fe=e=>m(this,null,function*(){if(confirm("Are you sure you want to unassign this driver?")){o(!0),s(null);try{const t=yield to.unassignDriverFromBus(e);t.success?(yield ce(),d("Driver unassigned successfully!"),setTimeout(()=>d(null),3e3)):s(t.error||"Failed to unassign driver")}catch(t){s("An error occurred while unassigning driver")}finally{o(!1)}}}),be=(e,t,n)=>m(this,null,function*(){const r=`${t} ${n}`;if(confirm(`Are you sure you want to delete driver "${r}"?\n\nThis action will:\n• Remove the driver from all database tables\n• Delete their Supabase Auth account\n• Unassign them from any buses\n• This action cannot be undone!`)){o(!0),s(null);try{const t=yield to.deleteDriver(e);t.success&&t.data?(g(b.filter(t=>t.id!==e)),N(p.filter(t=>t.driver_id!==e)),d(`Driver "${r}" deleted successfully from all systems!`),setTimeout(()=>d(null),5e3)):s(t.error||`Failed to delete driver "${r}"`)}catch(i){s(`An error occurred while deleting driver "${r}"`)}finally{o(!1)}}}),ge=e=>m(this,null,function*(){if(confirm("Are you sure you want to delete this route?")){o(!0),s(null);try{const t=yield to.deleteRoute(e);t.success?(x(v.filter(t=>t.id!==e)),d("Route deleted successfully!"),setTimeout(()=>d(null),3e3)):s(t.error||"Failed to delete route")}catch(t){s("An error occurred while deleting route")}finally{o(!1)}}}),pe=e=>{if(!e)return"Not Assigned";const t=v.find(t=>t.id===e);return t?`${t.city||"Unknown City"} → ${t.destination||"Ganpat University"}`:"Unknown Route"},Ne=e=>{oe(e),ne(!0)},ve=e=>e.driver_full_name?e.driver_full_name:e.driver_first_name&&e.driver_last_name?`${e.driver_first_name} ${e.driver_last_name}`:e.assigned_driver_id?(e=>{if(!e)return"Not Assigned";const t=b.find(t=>t.id===e);return t?`${t.first_name} ${t.last_name}`:"Unknown Driver"})(e.assigned_driver_id):"Not Assigned",xe=e=>{if(!e)return"Not Assigned";const t=h.find(t=>t.id===e);return t?t.number_plate:"Unknown Bus"};return n?r.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:852,columnNumber:9},this),r.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:853,columnNumber:9},this),r.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:854,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:851,columnNumber:7},this):r.jsxDEV("div",{className:"space-y-6",children:[r.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:867,columnNumber:13},this),r.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:870,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:866,columnNumber:11},this),r.jsxDEV("button",{onClick:ce,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:874,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:865,columnNumber:9},this),l&&r.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:r.jsxDEV("p",{className:"text-green-800",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:885,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:884,columnNumber:11},this),i&&r.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsxDEV("p",{className:"text-red-800",children:i},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:890,columnNumber:11},this),r.jsxDEV("div",{className:"border-b border-gray-200",children:r.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[r.jsxDEV("button",{onClick:()=>t("buses"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("buses"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["🚌 Buses (",h.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:898,columnNumber:13},this),r.jsxDEV("button",{onClick:()=>t("drivers"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("drivers"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["👨‍💼 Drivers (",b.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:908,columnNumber:13},this),r.jsxDEV("button",{onClick:()=>t("routes"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("routes"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["🗺️ Routes (",v.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:918,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:897,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:896,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:864,columnNumber:7},this),"buses"===e&&r.jsxDEV("div",{className:"space-y-6",children:r.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:15},this),r.jsxDEV("div",{className:"flex space-x-2",children:r.jsxDEV("button",{onClick:()=>j(!C),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:C?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:950,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:13},this),C&&r.jsxDEV("form",{onSubmit:e=>m(this,null,function*(){if(e.preventDefault(),o(!0),s(null),h.find(e=>e.code===B.code||e.number_plate===B.number_plate))return s(`Bus with code '${B.code}' or number plate '${B.number_plate}' already exists`),void o(!1);try{const e=yield to.createBus(B);e.success&&e.data?(f([...h,e.data]),U({code:"",number_plate:"",capacity:50,model:"",year:(new Date).getFullYear(),is_active:!0}),j(!1),d("Bus created successfully!"),setTimeout(()=>d(null),3e3)):s(e.error||"Failed to create bus")}catch(t){s("An error occurred while creating bus")}finally{o(!1)}}),className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:966,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:B.code,onChange:e=>U(c(a({},B),{code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:969,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:965,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:981,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:B.number_plate,onChange:e=>U(c(a({},B),{number_plate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:984,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:996,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,value:B.capacity,onChange:e=>U(c(a({},B),{capacity:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:995,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1014,columnNumber:21},this),r.jsxDEV("input",{type:"text",value:B.model,onChange:e=>U(c(a({},B),{model:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1017,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1013,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1028,columnNumber:21},this),r.jsxDEV("input",{type:"number",value:B.year,onChange:e=>U(c(a({},B),{year:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:(new Date).getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1031,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1027,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("input",{type:"checkbox",checked:B.is_active,onChange:e=>U(c(a({},B),{is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1046,columnNumber:21},this),r.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1045,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:964,columnNumber:17},this),r.jsxDEV("div",{className:"mt-4 flex justify-end",children:r.jsxDEV("button",{type:"submit",disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1058,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:960,columnNumber:15},this),r.jsxDEV("div",{className:"overflow-x-auto",children:r.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsxDEV("thead",{className:"bg-gray-50",children:r.jsxDEV("tr",{children:[r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1073,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1081,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1084,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1087,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1090,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1093,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1096,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1072,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:17},this),r.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>r.jsxDEV("tr",{className:"hover:bg-gray-50",children:[r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1104,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1114,columnNumber:27},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",e.capacity," | ",e.model," (",e.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1117,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:ve(e)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1123,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1122,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_name||pe(e.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1128,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_id?(()=>{const t=v.find(t=>t.id===e.route_id);return(null==t?void 0:t.city)||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1132,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1145,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxDEV("div",{className:"flex flex-col space-y-2",children:[r.jsxDEV("div",{className:"flex space-x-2",children:[r.jsxDEV("button",{onClick:()=>(e=>{T(e),O(!1),V(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1158,columnNumber:29},this),r.jsxDEV("button",{onClick:()=>(e=>{T(e),U({code:e.code,number_plate:e.number_plate,capacity:e.capacity,model:e.model||"",year:e.year||(new Date).getFullYear(),is_active:e.is_active}),O(!0),V(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1165,columnNumber:29},this),r.jsxDEV("button",{onClick:()=>me(e.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this),r.jsxDEV("select",{onChange:t=>ue(e.id,t.target.value),value:e.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[r.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1187,columnNumber:29},this),v.map(e=>r.jsxDEV("option",{value:e.id,className:"text-gray-900",children:e.name},e.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1191,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1180,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1156,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1155,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1103,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1070,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1069,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:935,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:934,columnNumber:9},this),"drivers"===e&&r.jsxDEV("div",{className:"space-y-6",children:[r.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1216,columnNumber:15},this),r.jsxDEV("div",{className:"flex space-x-2",children:[r.jsxDEV("button",{onClick:()=>w(!E),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:E?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:17},this),r.jsxDEV("button",{onClick:()=>D(!y),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:y?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1215,columnNumber:13},this),y&&r.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxDEV("div",{className:"mb-4",children:[r.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1238,columnNumber:19},this),r.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1237,columnNumber:17},this),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1249,columnNumber:21},this),r.jsxDEV("select",{required:!0,value:Z,onChange:e=>X(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[r.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:23},this),b.map(e=>r.jsxDEV("option",{value:e.id,className:"text-gray-900",children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1264,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1252,columnNumber:21},this),0===b.length&&r.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1275,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1248,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1282,columnNumber:21},this),r.jsxDEV("select",{required:!0,value:H.assigned_bus_id||"",onChange:e=>q(c(a({},H),{assigned_bus_id:e.target.value||""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[r.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1296,columnNumber:23},this),h.map(e=>r.jsxDEV("option",{value:e.id,className:"text-gray-900",children:[e.number_plate," (",e.model||"Unknown Model",")"]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1300,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1247,columnNumber:17},this),r.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[r.jsxDEV("button",{type:"button",onClick:()=>{D(!1),X(""),q(c(a({},H),{assigned_bus_id:""}))},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:19},this),r.jsxDEV("button",{onClick:()=>he(Z,H.assigned_bus_id),disabled:n||!Z||!H.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1324,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1312,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1236,columnNumber:15},this),E&&r.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsxDEV("div",{className:"mb-4",children:[r.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1348,columnNumber:19},this),r.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1347,columnNumber:17},this),r.jsxDEV("form",{onSubmit:e=>m(this,null,function*(){if(e.preventDefault(),o(!0),s(null),!(W.email&&W.first_name&&W.last_name&&W.password))return s("All fields are required: Email, First Name, Last Name, and Password"),void o(!1);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W.email))return s("Please enter a valid email address"),void o(!1);if(W.password!==W.confirm_password)return s("Passwords do not match"),void o(!1);if(W.password.length<6)return s("Password must be at least 6 characters long"),void o(!1);if(b.find(e=>e.email===W.email))return s("Driver with this email already exists"),void o(!1);if(!n)try{const e={email:W.email,first_name:W.first_name,last_name:W.last_name,phone:W.phone,role:"driver",password:W.password},t=yield to.createDriver(e);if(t.success&&t.data){const e=yield to.getAllDrivers();if(e.success&&e.data){const t=new Map;e.data.forEach(e=>{const n=e.id;if(t.has(n)){const r=t.get(n);(!r.email&&e.email||r.email&&e.email&&!r.first_name&&e.first_name)&&t.set(n,e)}else t.set(n,e)});const n=Array.from(t.values());g(n)}z({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),K(!1),Y(!1),w(!1),d(`Driver ${t.data.first_name} ${t.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>d(null),5e3)}else s(t.error||"Failed to create driver")}catch(t){s("An error occurred while creating driver")}finally{o(!1)}}),className:"space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1361,columnNumber:23},this),r.jsxDEV("input",{type:"email",required:!0,value:W.email,onChange:e=>z(c(a({},W),{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1364,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1360,columnNumber:21},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1380,columnNumber:23},this),r.jsxDEV("input",{type:"text",required:!0,value:W.first_name,onChange:e=>z(c(a({},W),{first_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1383,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1379,columnNumber:21},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),r.jsxDEV("input",{type:"text",required:!0,value:W.last_name,onChange:e=>z(c(a({},W),{last_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),r.jsxDEV("input",{type:"tel",value:W.phone,onChange:e=>z(c(a({},W),{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:23},this),r.jsxDEV("div",{className:"relative",children:[r.jsxDEV("input",{type:G?"text":"password",required:!0,value:W.password,onChange:e=>{z(c(a({},W),{password:e.target.value}))},onFocus:e=>{e.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:25},this),r.jsxDEV("button",{type:"button",onClick:()=>K(!G),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:G?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1439,columnNumber:23},this),r.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",W.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1472,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1435,columnNumber:21},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:23},this),r.jsxDEV("div",{className:"relative",children:[r.jsxDEV("input",{type:J?"text":"password",required:!0,value:W.confirm_password,onChange:e=>{z(c(a({},W),{confirm_password:e.target.value}))},onFocus:e=>{e.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1482,columnNumber:25},this),r.jsxDEV("button",{type:"button",onClick:()=>Y(!J),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:J?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1506,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1481,columnNumber:23},this),r.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[W.password!==W.confirm_password&&W.confirm_password.length>0&&r.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:29},this),W.password===W.confirm_password&&W.confirm_password.length>0&&r.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1527,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1359,columnNumber:19},this),r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1536,columnNumber:21},this),r.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1540,columnNumber:23},this),r.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1541,columnNumber:23},this),r.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:23},this),r.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1548,columnNumber:23},this),r.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1552,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1535,columnNumber:19},this),r.jsxDEV("div",{className:"flex justify-end space-x-2",children:[r.jsxDEV("button",{type:"button",onClick:()=>{w(!1),z({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),K(!1),Y(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1557,columnNumber:21},this),r.jsxDEV("button",{type:"submit",disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1576,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1556,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1358,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1346,columnNumber:15},this),r.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[r.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1591,columnNumber:17},this),r.jsxDEV("button",{onClick:()=>m(this,null,function*(){try{const e=yield to.getAllDrivers();if(e.success&&e.data){const t=new Map;e.data.forEach(e=>{const n=e.id;if(t.has(n)){const r=t.get(n);(!r.email&&e.email||r.email&&e.email&&!r.first_name&&e.first_name)&&t.set(n,e)}else t.set(n,e)});const n=Array.from(t.values());g(n)}}catch(e){}}),className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:15},this),b.length>0?r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:b.map(e=>r.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[r.jsxDEV("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1653,columnNumber:23},this),r.jsxDEV("div",{className:"text-sm text-gray-600",children:e.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1656,columnNumber:23},this),r.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",e.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1659,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1649,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1647,columnNumber:17},this):r.jsxDEV("div",{className:"text-center py-4",children:[r.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1667,columnNumber:19},this),r.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1668,columnNumber:19},this),r.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1672,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1666,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1589,columnNumber:13},this),r.jsxDEV("div",{className:"overflow-x-auto",children:r.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsxDEV("thead",{className:"bg-gray-50",children:r.jsxDEV("tr",{children:[r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1684,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1692,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1695,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1698,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1701,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1683,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1682,columnNumber:17},this),r.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>r.jsxDEV("tr",{className:"hover:bg-gray-50",children:[r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1709,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:27},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",e.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1717,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1728,columnNumber:25},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1731,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1727,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:xe(e.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1735,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsxDEV("select",{onChange:t=>he(e.id,t.target.value),value:e.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[r.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1748,columnNumber:27},this),h.map(e=>r.jsxDEV("option",{value:e.id,className:"text-gray-900",children:e.number_plate},e.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1752,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1741,columnNumber:25},this),r.jsxDEV("button",{onClick:()=>be(e.id,e.first_name,e.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1761,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1740,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1708,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1681,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1680,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1214,columnNumber:11},this),r.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1785,columnNumber:15},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:[p.length," driver",1!==p.length?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1788,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1784,columnNumber:13},this),0===p.length?r.jsxDEV("div",{className:"text-center py-8",children:[r.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1796,columnNumber:17},this),r.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1797,columnNumber:17},this),r.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1795,columnNumber:15},this):r.jsxDEV("div",{className:"overflow-x-auto",children:r.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsxDEV("thead",{className:"bg-gray-50",children:r.jsxDEV("tr",{children:[r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1809,columnNumber:23},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1812,columnNumber:23},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1815,columnNumber:23},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1818,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1808,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1807,columnNumber:19},this),r.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>r.jsxDEV("tr",{className:"hover:bg-gray-50",children:[r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1831,columnNumber:29},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1830,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1829,columnNumber:25},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1841,columnNumber:29},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1840,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1839,columnNumber:25},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1849,columnNumber:25},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsxDEV("button",{onClick:()=>fe(e.driver_id),disabled:n,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1855,columnNumber:27},this),r.jsxDEV("button",{onClick:()=>{const t=b.find(t=>t.id===e.driver_id);t&&be(t.id,t.first_name,t.last_name)},disabled:n,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1865,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1854,columnNumber:25},this)]},e.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1825,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1806,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1805,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1783,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1213,columnNumber:9},this),"routes"===e&&r.jsxDEV("div",{className:"space-y-6",children:r.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1900,columnNumber:15},this),r.jsxDEV("div",{className:"flex space-x-2",children:r.jsxDEV("button",{onClick:()=>S(!P),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:P?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1913,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1899,columnNumber:13},this),P&&r.jsxDEV("form",{onSubmit:e=>m(this,null,function*(){if(e.preventDefault(),o(!0),s(null),!Q.name.trim())return s("Route name is required"),void o(!1);if(!Q.city.trim())return s("City is required"),void o(!1);if(!Q.description.trim())return s("Route description is required"),void o(!1);try{const e=c(a({},Q),{distance_km:parseFloat(Q.distance_km)||0,estimated_duration_minutes:parseInt(Q.estimated_duration_minutes)||0,custom_destination:null==ie?void 0:ie.name,custom_destination_coordinates:null==ie?void 0:ie.coordinates,custom_origin:null==le?void 0:le.name,custom_origin_coordinates:null==le?void 0:le.coordinates,bus_stops:[]}),t=yield to.createRoute(e);t.success&&t.data?(x([...v,t.data]),ee({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),se(null),ae(null),S(!1),d("Route created successfully!"),setTimeout(()=>d(null),3e3)):s(t.error||"Failed to create route")}catch(t){s("An error occurred while creating route")}finally{o(!1)}}),className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1929,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:Q.name,onChange:e=>ee(c(a({},Q),{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1932,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1928,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1944,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:Q.city,onChange:e=>ee(c(a({},Q),{city:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1947,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1943,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1959,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Q.distance_km,onChange:e=>ee(c(a({},Q),{distance_km:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1962,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1958,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1978,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,value:Q.estimated_duration_minutes,onChange:e=>ee(c(a({},Q),{estimated_duration_minutes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1977,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("input",{type:"checkbox",checked:Q.is_active,onChange:e=>ee(c(a({},Q),{is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:21},this),r.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2007,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1995,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1927,columnNumber:17},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2011,columnNumber:19},this),r.jsxDEV("textarea",{value:Q.description,onChange:e=>ee(c(a({},Q),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2010,columnNumber:17},this),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2031,columnNumber:21},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2035,columnNumber:23},this),ie&&r.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[r.jsxDEV("div",{className:"font-medium text-green-800",children:ie.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2040,columnNumber:27},this),r.jsxDEV("div",{className:"text-sm text-green-600",children:ie.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2043,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2039,columnNumber:25},this),r.jsxDEV("button",{type:"button",onClick:()=>Ne("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2030,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2059,columnNumber:21},this),r.jsxDEV("div",{className:"space-y-2",children:[r.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2063,columnNumber:23},this),le&&r.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[r.jsxDEV("div",{className:"font-medium text-blue-800",children:le.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:27},this),r.jsxDEV("div",{className:"text-sm text-blue-600",children:le.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2071,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:25},this),r.jsxDEV("button",{type:"button",onClick:()=>Ne("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2076,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2062,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2058,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2029,columnNumber:17},this),r.jsxDEV("div",{className:"mt-4 flex justify-end",children:r.jsxDEV("button",{type:"submit",disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2087,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1923,columnNumber:15},this),r.jsxDEV("div",{className:"overflow-x-auto",children:r.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsxDEV("thead",{className:"bg-gray-50",children:r.jsxDEV("tr",{children:[r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2102,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2110,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2113,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2116,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2119,columnNumber:21},this),r.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2122,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:17},this),r.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>r.jsxDEV("tr",{className:"hover:bg-gray-50",children:[r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2130,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{children:[r.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:27},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2143,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("div",{className:"text-sm text-gray-900",children:e.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2149,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxDEV("div",{className:"text-sm text-gray-900",children:[e.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:25},this),r.jsxDEV("div",{className:"text-sm text-gray-900",children:[e.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2153,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2162,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2161,columnNumber:23},this),r.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxDEV("div",{className:"flex space-x-2",children:[r.jsxDEV("button",{onClick:()=>(e=>{R(e),F(!1),A(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2174,columnNumber:27},this),r.jsxDEV("button",{onClick:()=>(e=>{R(e),ee({name:e.name,description:e.description,distance_km:e.distance_km.toString(),estimated_duration_minutes:e.estimated_duration_minutes.toString(),is_active:e.is_active,city:e.city||""}),F(!0),A(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this),r.jsxDEV("button",{onClick:()=>ge(e.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2188,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2172,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2129,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2127,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2099,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2098,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1898,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1897,columnNumber:9},this),te&&r.jsxDEV(so,{onLocationSelect:e=>{"destination"===re?se(e):ae(e)},onClose:()=>ne(!1),title:"destination"===re?"Select Destination":"Select Origin",searchPlaceholder:"destination"===re?"Search for destination...":"Search for origin..."},`map-selector-${re}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2208,columnNumber:9},this),_&&M&&r.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:L?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2230,columnNumber:15},this),r.jsxDEV("button",{onClick:()=>{V(!1),O(!1),T(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2233,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2229,columnNumber:13},this),L?r.jsxDEV("form",{onSubmit:e=>m(this,null,function*(){if(e.preventDefault(),null==M?void 0:M.id){o(!0),s(null);try{const e=yield to.updateBus(M.id,B);e.success&&e.data?(f(h.map(t=>t.id===M.id?e.data:t)),V(!1),O(!1),T(null),d("Bus updated successfully!"),setTimeout(()=>d(null),3e3)):s(e.error||"Failed to update bus")}catch(t){s("An error occurred while updating bus")}finally{o(!1)}}}),className:"space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2249,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:B.code,onChange:e=>U(c(a({},B),{code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2252,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2248,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2263,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:B.number_plate,onChange:e=>U(c(a({},B),{number_plate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2262,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2277,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,value:B.capacity,onChange:e=>U(c(a({},B),{capacity:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2280,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2276,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2295,columnNumber:21},this),r.jsxDEV("input",{type:"text",value:B.model,onChange:e=>U(c(a({},B),{model:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2298,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2294,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2308,columnNumber:21},this),r.jsxDEV("input",{type:"number",value:B.year,onChange:e=>U(c(a({},B),{year:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:(new Date).getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2311,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2307,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("input",{type:"checkbox",checked:B.is_active,onChange:e=>U(c(a({},B),{is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2326,columnNumber:21},this),r.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2334,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2325,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2247,columnNumber:17},this),r.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsxDEV("button",{type:"button",onClick:()=>O(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2338,columnNumber:19},this),r.jsxDEV("button",{type:"submit",disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2337,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:15},this):r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2358,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:M.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2361,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2357,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:M.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:[M.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2371,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2380,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:M.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2379,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2388,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:M.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2391,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2387,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),r.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(M.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:M.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:ve(M)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:M.route_name||pe(M.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2356,columnNumber:17},this),r.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:r.jsxDEV("button",{onClick:()=>O(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2428,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2427,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2355,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2228,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2227,columnNumber:9},this),k&&I&&r.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[r.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:$?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2446,columnNumber:15},this),r.jsxDEV("button",{onClick:()=>{A(!1),F(!1),R(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2449,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2445,columnNumber:13},this),$?r.jsxDEV("form",{onSubmit:e=>m(this,null,function*(){if(e.preventDefault(),null==I?void 0:I.id){o(!0),s(null);try{const e=c(a({},Q),{distance_km:parseFloat(Q.distance_km)||0,estimated_duration_minutes:parseInt(Q.estimated_duration_minutes)||0}),t=yield to.updateRoute(I.id,e);t.success&&t.data?(x(v.map(e=>e.id===I.id?t.data:e)),A(!1),F(!1),R(null),d("Route updated successfully!"),setTimeout(()=>d(null),3e3)):s(t.error||"Failed to update route")}catch(t){s("An error occurred while updating route")}finally{o(!1)}}}),className:"space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:Q.name,onChange:e=>ee(c(a({},Q),{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2468,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2464,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2479,columnNumber:21},this),r.jsxDEV("input",{type:"text",required:!0,value:Q.city,onChange:e=>ee(c(a({},Q),{city:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2478,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2493,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Q.distance_km,onChange:e=>ee(c(a({},Q),{distance_km:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2496,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2492,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2512,columnNumber:21},this),r.jsxDEV("input",{type:"number",required:!0,value:Q.estimated_duration_minutes,onChange:e=>ee(c(a({},Q),{estimated_duration_minutes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2511,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("input",{type:"checkbox",checked:Q.is_active,onChange:e=>ee(c(a({},Q),{is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:21},this),r.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2541,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2529,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2463,columnNumber:17},this),r.jsxDEV("div",{children:[r.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2545,columnNumber:19},this),r.jsxDEV("textarea",{value:Q.description,onChange:e=>ee(c(a({},Q),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2548,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2544,columnNumber:17},this),r.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsxDEV("button",{type:"button",onClick:()=>F(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2561,columnNumber:19},this),r.jsxDEV("button",{type:"submit",disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2560,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2462,columnNumber:15},this):r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2581,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:I.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2584,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2580,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2589,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:I.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2592,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2588,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2597,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:[I.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2600,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2596,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2605,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:[I.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2608,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2604,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2613,columnNumber:21},this),r.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:I.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2612,columnNumber:19},this),r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:I.created_at?new Date(I.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:17},this),I.description&&r.jsxDEV("div",{children:[r.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2641,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-gray-900",children:I.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2644,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2640,columnNumber:19},this),r.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:r.jsxDEV("button",{onClick:()=>F(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2649,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2578,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2444,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2443,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:862,columnNumber:5},this)}function ao(){const[e,t]=u.useState(null),[n,o]=u.useState(null),[i,s]=u.useState(!0),[l,a]=u.useState(null),[c,d]=u.useState("overview");u.useEffect(()=>{h()},[]);const h=()=>m(this,null,function*(){s(!0),a(null);try{const[e,n]=yield Promise.all([to.getAnalytics(),to.getSystemHealth()]);e.success&&e.data&&t(e.data),n.success&&n.data&&o(n.data),e.success&&n.success||a("Failed to load dashboard data")}catch(e){a("An error occurred while loading dashboard data")}finally{s(!1)}}),f=br.getCurrentProfile();return i?r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:87,columnNumber:11},this),r.jsxDEV("p",{className:"mt-4 text-white/70",children:"Loading admin dashboard..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:86,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:85,columnNumber:7},this):l?r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:r.jsxDEV("div",{className:"text-center",children:r.jsxDEV("div",{className:"card-glass p-8",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error Loading Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:99,columnNumber:13},this),r.jsxDEV("p",{className:"text-red-200 mb-4",children:l},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:102,columnNumber:13},this),r.jsxDEV("button",{onClick:h,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:103,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:97,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:96,columnNumber:7},this):r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[r.jsxDEV("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxDEV("div",{className:"flex justify-between items-center py-6",children:[r.jsxDEV("div",{className:"flex items-center",children:r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"🚍 Admin Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:122,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:121,columnNumber:13},this),r.jsxDEV("div",{className:"flex items-center space-x-4",children:[r.jsxDEV("span",{className:"text-sm text-white/80",children:["Welcome,"," ",(null==f?void 0:f.first_name)||(null==f?void 0:f.full_name)||(null==f?void 0:f.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:129,columnNumber:15},this),r.jsxDEV("button",{onClick:h,className:"btn-primary text-sm",disabled:i,children:i?"Refreshing...":"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:135,columnNumber:15},this),r.jsxDEV("button",{onClick:()=>m(this,null,function*(){try{yield br.signOut(),window.location.href="/"}catch(e){}}),className:"btn-secondary text-sm",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:118,columnNumber:7},this),r.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxDEV("div",{className:"border-b border-white/20",children:r.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[r.jsxDEV("button",{onClick:()=>d("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("overview"===c?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"),children:"Overview"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:154,columnNumber:13},this),r.jsxDEV("button",{onClick:()=>d("analytics"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("analytics"===c?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"),children:"Analytics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:164,columnNumber:13},this),r.jsxDEV("button",{onClick:()=>d("management"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("management"===c?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"),children:"Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:174,columnNumber:13},this),r.jsxDEV("button",{onClick:()=>d("media"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 "+("media"===c?"border-blue-400 text-blue-300":"border-transparent text-white/60 hover:text-white/80 hover:border-white/40"),children:"Media"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:151,columnNumber:7},this),r.jsxDEV("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:["overview"===c&&r.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:[r.jsxDEV("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:r.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsxDEV("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:214,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:209,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:208,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:207,columnNumber:21},this),r.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:r.jsxDEV("dl",{children:[r.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:220,columnNumber:25},this),r.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(null==n?void 0:n.buses)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:223,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:219,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:218,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:206,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:204,columnNumber:15},this),r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:r.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:242,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:235,columnNumber:21},this),r.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:r.jsxDEV("dl",{children:[r.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:252,columnNumber:25},this),r.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(null==n?void 0:n.routes)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:255,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:251,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:234,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:232,columnNumber:15},this),r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:r.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsxDEV("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:274,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:269,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:268,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:267,columnNumber:21},this),r.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:r.jsxDEV("dl",{children:[r.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Total Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:280,columnNumber:25},this),r.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(null==n?void 0:n.drivers)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:283,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:265,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:264,columnNumber:15},this),r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:r.jsxDEV("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:302,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:297,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:296,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:295,columnNumber:21},this),r.jsxDEV("div",{className:"ml-5 w-0 flex-1",children:r.jsxDEV("dl",{children:[r.jsxDEV("dt",{className:"text-sm font-medium text-white/70 truncate",children:"Recent Locations"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:312,columnNumber:25},this),r.jsxDEV("dd",{className:"text-lg font-medium text-white",children:(null==n?void 0:n.recentLocations)||0},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:315,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:311,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:310,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:292,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:202,columnNumber:13},this),e&&r.jsxDEV("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:330,columnNumber:21},this),r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:335,columnNumber:25},this),r.jsxDEV("span",{className:"text-sm font-medium text-white",children:[e.activeBuses,"/",e.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:334,columnNumber:23},this),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:343,columnNumber:25},this),r.jsxDEV("span",{className:"text-sm font-medium text-white",children:[e.activeRoutes,"/",e.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:346,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:342,columnNumber:23},this),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-sm text-white/70",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:351,columnNumber:25},this),r.jsxDEV("span",{className:"text-sm font-medium text-white",children:[e.activeDrivers,"/",e.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:354,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:350,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:333,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:329,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:328,columnNumber:17},this),r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Performance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:364,columnNumber:21},this),r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-sm text-white/70",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:369,columnNumber:25},this),r.jsxDEV("span",{className:"text-sm font-medium text-white",children:[e.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:372,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:368,columnNumber:23},this),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-sm text-white/70",children:"System Health"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:377,columnNumber:25},this),r.jsxDEV("span",{className:"text-sm font-medium text-green-400",children:"Good"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:380,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:376,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:363,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:362,columnNumber:17},this),r.jsxDEV("div",{className:"card-glass overflow-hidden",children:r.jsxDEV("div",{className:"p-5",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"Last Updated"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:390,columnNumber:21},this),r.jsxDEV("div",{className:"text-sm text-white/70",children:(null==n?void 0:n.timestamp)?new Date(n.timestamp).toLocaleString():"N/A"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:393,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:389,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:388,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:201,columnNumber:11},this),"analytics"===c&&e&&r.jsxDEV("div",{className:"px-4 py-6 sm:px-0",children:r.jsxDEV("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Statistics"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:410,columnNumber:17},this),r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[r.jsxDEV("span",{className:"text-blue-300 font-medium",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),r.jsxDEV("span",{className:"text-2xl font-bold text-blue-200",children:e.activeBuses},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:414,columnNumber:19},this),r.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-green-500/20 rounded-lg border border-green-400/30",children:[r.jsxDEV("span",{className:"text-green-300 font-medium",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:423,columnNumber:21},this),r.jsxDEV("span",{className:"text-2xl font-bold text-green-200",children:e.activeRoutes},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:426,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:422,columnNumber:19},this),r.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[r.jsxDEV("span",{className:"text-yellow-300 font-medium",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:431,columnNumber:21},this),r.jsxDEV("span",{className:"text-2xl font-bold text-yellow-200",children:e.activeDrivers},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:434,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:430,columnNumber:19},this),r.jsxDEV("div",{className:"flex justify-between items-center p-3 bg-purple-500/20 rounded-lg border border-purple-400/30",children:[r.jsxDEV("span",{className:"text-purple-300 font-medium",children:"Average Delay"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:439,columnNumber:21},this),r.jsxDEV("span",{className:"text-2xl font-bold text-purple-200",children:[e.averageDelay.toFixed(1)," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:438,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:409,columnNumber:15},this),r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h3",{className:"text-lg font-medium text-white mb-4",children:"System Distribution"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:451,columnNumber:17},this),r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Buses"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:456,columnNumber:21},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:r.jsxDEV("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:e.activeBuses/e.totalBuses*100+"%"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:461,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:460,columnNumber:23},this),r.jsxDEV("span",{className:"text-sm text-white/70",children:[e.activeBuses,"/",e.totalBuses]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:455,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Routes"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:474,columnNumber:21},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:r.jsxDEV("div",{className:"bg-green-400 h-2 rounded-full",style:{width:e.activeRoutes/e.totalRoutes*100+"%"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:478,columnNumber:23},this),r.jsxDEV("span",{className:"text-sm text-white/70",children:[e.activeRoutes,"/",e.totalRoutes]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:477,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:473,columnNumber:19},this),r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("span",{className:"text-sm font-medium text-white/80",children:"Active Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:492,columnNumber:21},this),r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-32 bg-white/20 rounded-full h-2 mr-2",children:r.jsxDEV("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:e.activeDrivers/e.totalDrivers*100+"%"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:497,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:496,columnNumber:23},this),r.jsxDEV("span",{className:"text-sm text-white/70",children:[e.activeDrivers,"/",e.totalDrivers]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:504,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:454,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:406,columnNumber:11},this),"management"===c&&r.jsxDEV(lo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:516,columnNumber:40},this),"media"===c&&r.jsxDEV(oo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:519,columnNumber:35},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:199,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminDashboard.tsx",lineNumber:116,columnNumber:5},this)}const co=({children:e,variant:t="primary",size:n="md",className:o="",onClick:i,disabled:s=!1,loading:l=!1,icon:a,iconPosition:c="left"})=>r.jsxDEV(E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,disabled:s||l,className:`\n        relative inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden\n        ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[n]}\n        ${{primary:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white shadow-lg hover:shadow-xl hover:shadow-blue-500/25 focus:ring-blue-400",secondary:"bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg hover:shadow-xl focus:ring-white/20",danger:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 focus:ring-red-400",ghost:"bg-transparent text-white hover:bg-white/10 border border-transparent hover:border-white/20 focus:ring-white/20",gradient:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 focus:ring-purple-400"}[t]}\n        hover:-translate-y-0.5 active:translate-y-0\n        ${o}\n      `,children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:67,columnNumber:7},void 0),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:70,columnNumber:7},void 0),r.jsxDEV("div",{className:"relative z-10 flex items-center gap-2",children:[l&&r.jsxDEV(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:75,columnNumber:11},void 0),a&&"left"===c&&!l&&r.jsxDEV("span",{className:"flex-shrink-0",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:83,columnNumber:11},void 0),r.jsxDEV("span",{children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:86,columnNumber:9},void 0),a&&"right"===c&&!l&&r.jsxDEV("span",{className:"flex-shrink-0",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/ui/PremiumButton.tsx",lineNumber:53,columnNumber:5},void 0);function mo({onLoginSuccess:e}){const t=p(),{setTransition:n}=$r(),[o,i]=u.useState(!1),[s,l]=u.useState(null),[a,c]=u.useState(""),[d,h]=u.useState(""),[f,b]=u.useState(""),[g,N]=u.useState(null);u.useEffect(()=>{setTimeout(()=>m(this,null,function*(){try{for(;!br.isInitialized();)yield new Promise(e=>setTimeout(e,100));(yield br.recoverSession()).success&&br.isAdmin()&&v()}catch(e){}}),2e3)},[]);const v=()=>{n("login-to-dashboard"),setTimeout(()=>{e?e():t("/admin-dashboard",{replace:!0})},500)};return r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[r.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsxDEV("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:166,columnNumber:9},this),r.jsxDEV("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:167,columnNumber:9},this),r.jsxDEV("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:165,columnNumber:7},this),r.jsxDEV("div",{className:"absolute inset-0",children:[...Array(20)].map((e,t)=>r.jsxDEV(E.div,{className:"absolute w-1 h-1 bg-white/30 rounded-full",animate:{x:[0,100,0],y:[0,-100,0],opacity:[0,1,0]},transition:{duration:10*Math.random()+10,repeat:1/0,delay:5*Math.random()},style:{left:100*Math.random()+"%",top:100*Math.random()+"%"}},t,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:174,columnNumber:11},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:172,columnNumber:7},this),r.jsxDEV(E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.4,0,.2,1]},className:"w-full max-w-md relative z-10",children:r.jsxDEV(Kr,{variant:"ultra",glow:!0,className:"p-8 relative",children:[r.jsxDEV(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-center mb-8",children:[r.jsxDEV("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-blue-500 mb-4 relative",children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-lg opacity-50"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:210,columnNumber:15},this),r.jsxDEV("svg",{className:"h-8 w-8 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:217,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:209,columnNumber:13},this),r.jsxDEV("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent",children:"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:225,columnNumber:13},this),r.jsxDEV("p",{className:"text-blue-200/80 mt-2 text-sm",children:"Access the administrative dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:203,columnNumber:11},this),r.jsxDEV(E.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},onSubmit:e=>m(this,null,function*(){e.preventDefault(),i(!0),l(null),N(null);try{const e=new Promise((e,t)=>{setTimeout(()=>t(new Error("Login timeout")),5e3)}),t=br.signIn(a,d),n=yield Promise.race([t,e]);n.success&&n.user?"admin"===n.user.role?(N("Login successful! Loading admin dashboard..."),setTimeout(()=>{v()},500)):(l("Access denied. Admin privileges required."),yield br.signOut()):l(n.error||"Login failed. Please check your credentials.")}catch(t){t instanceof Error&&"Login timeout"===t.message?l("Login timed out. This might be due to slow network or profile loading. Please try again."):t instanceof Error&&t.message.includes("environment variables")?l("Configuration error. Please check your environment setup."):t instanceof Error&&t.message.includes("Profile loading timeout")?l("Profile loading is taking longer than expected. Please try again."):l("Network error. Please check your connection and try again.")}finally{i(!1)}}),className:"space-y-6",children:[r.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5,duration:.6},children:[r.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-200 mb-2",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:247,columnNumber:15},this),r.jsxDEV("div",{className:"relative",children:[r.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"admin@university.edu",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:254,columnNumber:17},this),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:242,columnNumber:13},this),r.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[r.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-200 mb-2",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:276,columnNumber:15},this),r.jsxDEV("div",{className:"relative",children:[r.jsxDEV("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:d,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300",placeholder:"••••••••",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:283,columnNumber:17},this),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:295,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:271,columnNumber:13},this),r.jsxDEV(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[r.jsxDEV("label",{htmlFor:"twoFactorCode",className:"block text-sm font-medium text-blue-200/80 mb-2",children:["2FA Code ",r.jsxDEV("span",{className:"text-blue-200/50",children:"(Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:309,columnNumber:26},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:305,columnNumber:15},this),r.jsxDEV("div",{className:"relative",children:[r.jsxDEV("input",{id:"twoFactorCode",name:"twoFactorCode",type:"text",autoComplete:"one-time-code",value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl text-white placeholder-blue-200/30 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-transparent transition-all duration-300",placeholder:"Enter 2FA code if enabled",disabled:o},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:312,columnNumber:17},this),r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-xl opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:323,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:300,columnNumber:13},this),r.jsxDEV(w,{children:o&&r.jsxDEV(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-center",children:r.jsxDEV("div",{className:"inline-flex items-center px-4 py-2 text-sm text-blue-200 bg-blue-500/20 backdrop-blur-sm border border-blue-400/30 rounded-xl",children:[r.jsxDEV(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-300/30 border-t-blue-300 rounded-full mr-3"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:337,columnNumber:21},this),"Signing in and loading profile..."]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:336,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:328,columnNumber:13},this),r.jsxDEV(w,{children:s&&r.jsxDEV(E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:r.jsxDEV("div",{className:"flex",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:368,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:363,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:362,columnNumber:21},this),r.jsxDEV("div",{className:"ml-3",children:[r.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Login Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:376,columnNumber:23},this),r.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:s},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:361,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:355,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:353,columnNumber:13},this),r.jsxDEV(w,{children:g&&r.jsxDEV(E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:r.jsxDEV("div",{className:"flex",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:402,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:396,columnNumber:21},this),r.jsxDEV("div",{className:"ml-3",children:[r.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Success"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:410,columnNumber:23},this),r.jsxDEV("p",{className:"text-sm text-green-200 mt-1",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:413,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:409,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:395,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:387,columnNumber:13},this),r.jsxDEV(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:r.jsxDEV(co,{variant:"gradient",size:"lg",className:"w-full relative group",disabled:o,loading:o,icon:r.jsxDEV("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:439,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:433,columnNumber:19},this),children:o?"Signing In...":"Admin Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:426,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:421,columnNumber:13},this),r.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.6},className:"text-center space-y-3",children:[r.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-xs",children:[r.jsxDEV("button",{type:"button",onClick:()=>m(this,null,function*(){i(!0),l(null);try{(yield br.recoverSession()).success&&br.isAdmin()?(N("Session recovered! Redirecting..."),setTimeout(()=>{v()},1e3)):l("No valid session found. Please log in again.")}catch(e){l("Session recovery failed. Please log in again.")}finally{i(!1)}}),disabled:o,className:"text-blue-300 hover:text-blue-200 underline transition-colors duration-200",children:"Recover Session"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:460,columnNumber:17},this),r.jsxDEV("span",{className:"hidden sm:inline text-blue-200/50",children:"•"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:468,columnNumber:17},this),r.jsxDEV("button",{type:"button",onClick:()=>m(this,null,function*(){i(!0),l(null);try{yield br.forceFreshLogin(),N("Session cleared. Please log in again with your credentials.")}catch(e){l("Failed to clear session.")}finally{i(!1)}}),disabled:o,className:"text-red-300 hover:text-red-200 underline transition-colors duration-200",children:"Force Fresh Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:459,columnNumber:15},this),r.jsxDEV("div",{className:"text-xs text-blue-200/50 space-y-1",children:[r.jsxDEV("p",{children:"Enter your admin credentials to access the system"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:480,columnNumber:17},this),r.jsxDEV("p",{children:"Using Supabase Authentication"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:201,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/AdminLogin.tsx",lineNumber:163,columnNumber:5},this)}const uo=({children:e,className:t=""})=>r.jsxDEV(E.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},className:t,children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:100,columnNumber:5},void 0),ho=({children:e,className:t=""})=>r.jsxDEV(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.4,ease:[.4,0,.2,1]},className:t,children:e},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PageTransition.tsx",lineNumber:124,columnNumber:5},void 0),fo=()=>r.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Bus Icon",style:{display:"block",margin:"0 auto"},children:[r.jsxDEV("rect",{x:"4",y:"12",width:"40",height:"20",rx:"2",fill:"#3B82F6",stroke:"#1E40AF",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:20,columnNumber:5},void 0),r.jsxDEV("rect",{x:"6",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:32,columnNumber:5},void 0),r.jsxDEV("rect",{x:"16",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:42,columnNumber:5},void 0),r.jsxDEV("rect",{x:"26",y:"14",width:"8",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:52,columnNumber:5},void 0),r.jsxDEV("rect",{x:"36",y:"14",width:"6",height:"6",rx:"1",fill:"#E0F2FE",stroke:"#0EA5E9",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:62,columnNumber:5},void 0),r.jsxDEV("rect",{x:"18",y:"22",width:"12",height:"8",rx:"1",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:74,columnNumber:5},void 0),r.jsxDEV("line",{x1:"24",y1:"22",x2:"24",y2:"30",stroke:"#F59E0B",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:84,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"12",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:87,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"12",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:95,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"36",cy:"34",r:"3",fill:"#374151",stroke:"#1F2937",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:96,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"36",cy:"34",r:"1.5",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:104,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"8",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:107,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"40",cy:"16",r:"1",fill:"#FEF3C7"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:108,columnNumber:5},void 0),r.jsxDEV("rect",{x:"2",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:111,columnNumber:5},void 0),r.jsxDEV("rect",{x:"44",y:"16",width:"2",height:"4",rx:"1",fill:"#6B7280"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:112,columnNumber:5},void 0),r.jsxDEV("rect",{x:"28",y:"16",width:"8",height:"3",rx:"0.5",fill:"#FEF3C7",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:115,columnNumber:5},void 0),r.jsxDEV("text",{x:"32",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"GU"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:124,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:10,columnNumber:3},void 0),bo=()=>r.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Map Icon",style:{display:"block",margin:"0 auto"},children:[r.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"2",fill:"#F0FDF4",stroke:"#16A34A",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:148,columnNumber:5},void 0),r.jsxDEV("line",{x1:"8",y1:"16",x2:"40",y2:"16",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:160,columnNumber:5},void 0),r.jsxDEV("line",{x1:"8",y1:"24",x2:"40",y2:"24",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:161,columnNumber:5},void 0),r.jsxDEV("line",{x1:"8",y1:"32",x2:"40",y2:"32",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:162,columnNumber:5},void 0),r.jsxDEV("line",{x1:"16",y1:"12",x2:"16",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:163,columnNumber:5},void 0),r.jsxDEV("line",{x1:"24",y1:"12",x2:"24",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:164,columnNumber:5},void 0),r.jsxDEV("line",{x1:"32",y1:"12",x2:"32",y2:"36",stroke:"#BBF7D0",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:165,columnNumber:5},void 0),r.jsxDEV("rect",{x:"12",y:"20",width:"16",height:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:168,columnNumber:5},void 0),r.jsxDEV("rect",{x:"20",y:"12",width:"2",height:"16",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:177,columnNumber:5},void 0),r.jsxDEV("rect",{x:"10",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:188,columnNumber:5},void 0),r.jsxDEV("rect",{x:"16",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:197,columnNumber:5},void 0),r.jsxDEV("rect",{x:"22",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:206,columnNumber:5},void 0),r.jsxDEV("rect",{x:"28",y:"28",width:"4",height:"6",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:215,columnNumber:5},void 0),r.jsxDEV("rect",{x:"34",y:"26",width:"4",height:"8",fill:"#E5E7EB",stroke:"#6B7280",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:224,columnNumber:5},void 0),r.jsxDEV("rect",{x:"11",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:235,columnNumber:5},void 0),r.jsxDEV("rect",{x:"13",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:236,columnNumber:5},void 0),r.jsxDEV("rect",{x:"17",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:237,columnNumber:5},void 0),r.jsxDEV("rect",{x:"19",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:238,columnNumber:5},void 0),r.jsxDEV("rect",{x:"23",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:239,columnNumber:5},void 0),r.jsxDEV("rect",{x:"25",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:240,columnNumber:5},void 0),r.jsxDEV("rect",{x:"29",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:241,columnNumber:5},void 0),r.jsxDEV("rect",{x:"31",y:"30",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:242,columnNumber:5},void 0),r.jsxDEV("rect",{x:"35",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:243,columnNumber:5},void 0),r.jsxDEV("rect",{x:"37",y:"28",width:"1",height:"1",fill:"#3B82F6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:244,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"24",cy:"22",r:"2",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:247,columnNumber:5},void 0),r.jsxDEV("path",{d:"M24 24 L26 28 L22 28 Z",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:255,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"24",cy:"22",r:"0.5",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:261,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"36",cy:"16",r:"3",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:264,columnNumber:5},void 0),r.jsxDEV("text",{x:"36",y:"18",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"N"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:272,columnNumber:5},void 0),r.jsxDEV("text",{x:"36",y:"22",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"S"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:282,columnNumber:5},void 0),r.jsxDEV("text",{x:"33",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"W"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:292,columnNumber:5},void 0),r.jsxDEV("text",{x:"39",y:"20",textAnchor:"middle",fontSize:"2",fill:"#1F2937",fontFamily:"Arial, sans-serif",children:"E"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:302,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:138,columnNumber:3},void 0),go=()=>r.jsxDEV("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 custom-icon",viewBox:"0 0 48 48",width:"48",height:"48",fill:"none","aria-label":"Admin Icon",style:{display:"block",margin:"0 auto"},children:[r.jsxDEV("rect",{x:"4",y:"8",width:"40",height:"32",rx:"3",fill:"#F8FAFC",stroke:"#8B5CF6",strokeWidth:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:326,columnNumber:5},void 0),r.jsxDEV("rect",{x:"6",y:"10",width:"36",height:"4",rx:"1",fill:"#8B5CF6",opacity:"0.8"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:338,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"8",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:347,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"10",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:348,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"12",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:349,columnNumber:5},void 0),r.jsxDEV("rect",{x:"6",y:"16",width:"8",height:"20",rx:"1",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:352,columnNumber:5},void 0),r.jsxDEV("rect",{x:"8",y:"18",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:364,columnNumber:5},void 0),r.jsxDEV("rect",{x:"8",y:"22",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:365,columnNumber:5},void 0),r.jsxDEV("rect",{x:"8",y:"26",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:366,columnNumber:5},void 0),r.jsxDEV("rect",{x:"8",y:"30",width:"4",height:"2",rx:"0.5",fill:"#7C3AED"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:367,columnNumber:5},void 0),r.jsxDEV("rect",{x:"16",y:"16",width:"26",height:"20",rx:"1",fill:"#FFFFFF",stroke:"#DDD6FE",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:370,columnNumber:5},void 0),r.jsxDEV("rect",{x:"18",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:382,columnNumber:5},void 0),r.jsxDEV("rect",{x:"30",y:"18",width:"10",height:"6",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:392,columnNumber:5},void 0),r.jsxDEV("rect",{x:"18",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:402,columnNumber:5},void 0),r.jsxDEV("rect",{x:"30",y:"26",width:"10",height:"8",rx:"1",fill:"#F3E8FF",stroke:"#C084FC",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:412,columnNumber:5},void 0),r.jsxDEV("path",{d:"M20 22 L22 21 L24 23 L26 20 L28 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:424,columnNumber:5},void 0),r.jsxDEV("path",{d:"M32 22 L34 21 L36 23 L38 20 L40 22",stroke:"#8B5CF6",strokeWidth:"1",fill:"none"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:430,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"20",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:438,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"22",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:439,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"24",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:440,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"26",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:441,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"28",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:442,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"32",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:443,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"34",cy:"21",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:444,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"36",cy:"23",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:445,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"38",cy:"20",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:446,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"40",cy:"22",r:"0.5",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:447,columnNumber:5},void 0),r.jsxDEV("rect",{x:"20",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:450,columnNumber:5},void 0),r.jsxDEV("rect",{x:"23",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:451,columnNumber:5},void 0),r.jsxDEV("rect",{x:"26",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:452,columnNumber:5},void 0),r.jsxDEV("rect",{x:"29",y:"31",width:"2",height:"1",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:453,columnNumber:5},void 0),r.jsxDEV("rect",{x:"32",y:"30",width:"2",height:"2",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:454,columnNumber:5},void 0),r.jsxDEV("rect",{x:"35",y:"29",width:"2",height:"3",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:455,columnNumber:5},void 0),r.jsxDEV("rect",{x:"38",y:"28",width:"2",height:"4",fill:"#8B5CF6"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:456,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"40",cy:"12",r:"2",fill:"#8B5CF6",stroke:"#7C3AED",strokeWidth:"0.5"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:459,columnNumber:5},void 0),r.jsxDEV("circle",{cx:"40",cy:"12",r:"1",fill:"#FFFFFF"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:467,columnNumber:5},void 0),r.jsxDEV("path",{d:"M40 10 L40 8 M40 16 L40 14 M46 12 L44 12 M36 12 L34 12",stroke:"#7C3AED",strokeWidth:"0.5",strokeLinecap:"round"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:468,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:316,columnNumber:3},void 0),po=()=>{const e=p(),[t,n]=u.useState(!1);u.useEffect(()=>{const e=()=>{n(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{setTransition:o}=$r(),i=t=>{t.includes("login")?o("homepage-to-login"):t.includes("student")||t.includes("student-map")?o("homepage-to-map"):o("default"),setTimeout(()=>{e(t)},200)},s=t?8:20;return r.jsxDEV("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:r.jsxDEV("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6",children:[r.jsxDEV(E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 sm:mb-16 px-4",children:[r.jsxDEV("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold mb-2 sm:mb-4 leading-tight",children:r.jsxDEV("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:528,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:527,columnNumber:11},void 0),r.jsxDEV("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:"Bus Tracker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:532,columnNumber:11},void 0),r.jsxDEV("div",{className:"w-20 sm:w-32 h-1 bg-gradient-to-r from-blue-400 to-purple-400 mx-auto rounded-full"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:535,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:521,columnNumber:9},void 0),r.jsxDEV(uo,{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-12 items-center justify-center w-full max-w-6xl px-4",children:[r.jsxDEV(ho,{children:r.jsxDEV(E.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:550,columnNumber:15},void 0),r.jsxDEV(Kr,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>i("/driver-login"),children:[r.jsxDEV("div",{className:"text-center px-2",children:[r.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxDEV(fo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:560,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:559,columnNumber:19},void 0),r.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:562,columnNumber:19},void 0),r.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Real-time location sharing & navigation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:565,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:558,columnNumber:17},void 0),r.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:r.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:572,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:571,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:552,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:542,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:541,columnNumber:11},void 0),r.jsxDEV(ho,{children:r.jsxDEV(E.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-blue-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:588,columnNumber:15},void 0),r.jsxDEV(Kr,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>i("/student-map"),children:[r.jsxDEV("div",{className:"text-center px-2",children:[r.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxDEV(bo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:598,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:597,columnNumber:19},void 0),r.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Student Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:600,columnNumber:19},void 0),r.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Live bus tracking & route information"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:603,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:596,columnNumber:17},void 0),r.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:r.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:610,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:609,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:590,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:580,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:579,columnNumber:11},void 0),r.jsxDEV(ho,{children:r.jsxDEV(E.div,{whileHover:t?{}:{scale:1.05,rotateY:5,rotateX:2},whileTap:{scale:.95},className:"relative group w-full sm:w-auto",children:[r.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-pink-500/30 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:626,columnNumber:15},void 0),r.jsxDEV(Kr,{variant:"ultra",glow:!0,className:"w-full sm:w-72 md:w-80 h-40 sm:h-48 flex flex-col items-center justify-center cursor-pointer relative z-10",onClick:()=>i("/admin-login"),children:[r.jsxDEV("div",{className:"text-center px-2",children:[r.jsxDEV("div",{className:"mb-2 sm:mb-4 animate-pulse icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsxDEV(go,{},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:636,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:635,columnNumber:19},void 0),r.jsxDEV("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 sm:mb-2",children:"Admin Panel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:638,columnNumber:19},void 0),r.jsxDEV("p",{className:"text-white/70 text-xs sm:text-sm",children:"Fleet management & analytics dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:641,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:634,columnNumber:17},void 0),r.jsxDEV("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:r.jsxDEV("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:648,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:647,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:628,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:618,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:617,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:539,columnNumber:9},void 0),r.jsxDEV(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1.2},className:"absolute bottom-4 sm:bottom-8 left-1/2 transform -translate-x-1/2 text-center px-4",children:r.jsxDEV("p",{className:"text-white/60 text-xs sm:text-sm",children:"Powered by cutting-edge technology • Real-time tracking • Premium experience"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:662,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:656,columnNumber:9},void 0),r.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(s)].map((e,t)=>r.jsxDEV(E.div,{className:"absolute w-1 h-1 sm:w-2 sm:h-2 bg-white/20 rounded-full",style:{left:100*Math.random()+"%",top:100*Math.random()+"%"},animate:{y:[0,-50,0],opacity:[0,1,0]},transition:{duration:2+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:671,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:669,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:519,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/PremiumHomepage.tsx",lineNumber:517,columnNumber:5},void 0)};function No(){const[e,t]=u.useState(null),[n,o]=u.useState(!0),[i,s]=u.useState(null),[l,a]=u.useState({isAuthenticated:!1,user:null,loading:!0});u.useEffect(()=>{(()=>{m(this,null,function*(){try{for(o(!0);!br.isInitialized();)yield new Promise(e=>setTimeout(e,100));const e=yield Ir.getHealth();t(e),s(null)}catch(e){s(e instanceof Error?e.message:"Failed to connect to backend"),t(null)}finally{o(!1)}})})()},[]),u.useEffect(()=>{const e=()=>{const e=br.getCurrentUser();a({isAuthenticated:!!e,user:e?{id:e.id,email:e.email||"",role:"student",created_at:e.created_at,updated_at:e.updated_at}:null,loading:!1})};return br.onAuthStateChange(e),e(),()=>{br.removeAuthStateChangeListener()}},[]);const c=()=>{var t,o,s,a,c,d,m,u,h,f;return r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:r.jsxDEV("div",{className:"max-w-4xl w-full mx-auto",children:r.jsxDEV("div",{className:"card-glass p-8",children:[r.jsxDEV("h1",{className:"text-4xl font-bold gradient-text mb-6 text-center",children:"🚍 University Bus Tracking System"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:97,columnNumber:11},this),r.jsxDEV("div",{className:"space-y-6",children:[n&&r.jsxDEV("div",{className:"text-center",children:[r.jsxDEV("div",{className:"loading-spinner mx-auto"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:104,columnNumber:17},this),r.jsxDEV("p",{className:"text-white/70 mt-4",children:"Checking backend connection..."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:103,columnNumber:15},this),i&&r.jsxDEV("div",{className:"bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-xl p-4",children:r.jsxDEV("div",{className:"flex",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:120,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:115,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:114,columnNumber:19},this),r.jsxDEV("div",{className:"ml-3",children:[r.jsxDEV("h3",{className:"text-sm font-medium text-red-300",children:"Connection Error"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:128,columnNumber:21},this),r.jsxDEV("p",{className:"text-sm text-red-200 mt-1",children:i},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:131,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:113,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:112,columnNumber:15},this),e&&r.jsxDEV("div",{className:"bg-green-500/20 backdrop-blur-sm border border-green-400/30 rounded-xl p-4",children:r.jsxDEV("div",{className:"flex",children:[r.jsxDEV("div",{className:"flex-shrink-0",children:r.jsxDEV("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:146,columnNumber:23},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:141,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:140,columnNumber:19},this),r.jsxDEV("div",{className:"ml-3",children:[r.jsxDEV("h3",{className:"text-sm font-medium text-green-300",children:"Backend Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:154,columnNumber:21},this),r.jsxDEV("div",{className:"text-sm text-green-200 mt-1 space-y-1",children:[r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:159,columnNumber:25},this)," ",e.status]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:158,columnNumber:23},this),r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Database:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:162,columnNumber:25},this)," ",(null==(o=null==(t=e.services)?void 0:t.database)?void 0:o.status)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:161,columnNumber:23},this),r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Environment:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:166,columnNumber:25},this)," ",e.environment]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:165,columnNumber:23},this),r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:169,columnNumber:25},this)," ",new Date(e.timestamp).toLocaleString()]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:168,columnNumber:23},this),(null==(a=null==(s=e.services)?void 0:s.database)?void 0:a.details)&&r.jsxDEV("div",{className:"mt-2 text-xs",children:[r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"PostgreSQL:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:175,columnNumber:29},this)," ",(null==(c=e.services.database.details.details)?void 0:c.postgresVersion)||"Unknown"]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:174,columnNumber:27},this),r.jsxDEV("p",{children:[r.jsxDEV("strong",{children:"Pool Status:"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:180,columnNumber:29},this)," ",`Total: ${(null==(d=e.services.database.details.details)?void 0:d.poolSize)||0}, Idle: ${(null==(m=e.services.database.details.details)?void 0:m.idleCount)||0}, Waiting: ${(null==(u=e.services.database.details.details)?void 0:u.waitingCount)||0}`]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:179,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:173,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:157,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:153,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:139,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:138,columnNumber:15},this),r.jsxDEV("div",{className:"text-center text-sm text-white/60 mt-6",children:[r.jsxDEV("p",{children:"Phase 5: Admin Panel & Analytics Dashboard ✅"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:192,columnNumber:15},this),r.jsxDEV("p",{className:"mt-1",children:"Role-based access control, analytics charts, and system management"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:193,columnNumber:15},this),l.isAuthenticated&&r.jsxDEV("p",{className:"mt-2 text-green-400",children:["✅ Authenticated as:"," ",(null==(h=l.user)?void 0:h.full_name)||(null==(f=l.user)?void 0:f.email)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:198,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:191,columnNumber:13},this),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[r.jsxDEV(j,{to:"/driver",className:"btn-primary text-center block",children:"🚌 Driver Interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:207,columnNumber:15},this),r.jsxDEV(j,{to:"/student",className:"btn-primary text-center block",children:"👨‍🎓 Student Map (Live Tracking)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:211,columnNumber:15},this),r.jsxDEV(j,{to:"/admin",className:"btn-primary text-center block",children:"👨‍💼 Admin Panel (Phase 5)"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:215,columnNumber:15},this),r.jsxDEV(j,{to:"/premium-demo",className:"btn-secondary text-center block",children:"✨ Premium UI Demo"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:96,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:95,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:94,columnNumber:5},this)},d=()=>r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:r.jsxDEV("div",{className:"max-w-md w-full mx-auto text-center",children:r.jsxDEV("div",{className:"card-glass p-8",children:[r.jsxDEV("h1",{className:"text-6xl font-bold gradient-text mb-4",children:"404"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:237,columnNumber:11},this),r.jsxDEV("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Page Not Found"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:238,columnNumber:11},this),r.jsxDEV("p",{className:"text-white/70 mb-6",children:"The page you're looking for doesn't exist."},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:241,columnNumber:11},this),r.jsxDEV(j,{to:"/",className:"btn-primary inline-block",children:"Go Back Home"},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:236,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:235,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:234,columnNumber:5},this);return r.jsxDEV(v,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxDEV(Fr,{children:r.jsxDEV(qr,{children:r.jsxDEV(x,{children:[r.jsxDEV(C,{path:"/",element:r.jsxDEV(po,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:258,columnNumber:13},this),r.jsxDEV(C,{path:"/legacy",element:r.jsxDEV(c,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:261,columnNumber:13},this),r.jsxDEV(C,{path:"/driver",element:r.jsxDEV(Lr,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:44},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:262,columnNumber:13},this),r.jsxDEV(C,{path:"/student",element:r.jsxDEV(Qr,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:45},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:263,columnNumber:13},this),r.jsxDEV(C,{path:"/admin",element:r.jsxDEV(ao,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:43},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:264,columnNumber:13},this),r.jsxDEV(C,{path:"/driver-login",element:r.jsxDEV(Wr,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:50},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:267,columnNumber:13},this),r.jsxDEV(C,{path:"/driver-dashboard",element:r.jsxDEV(zr,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:54},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:268,columnNumber:13},this),r.jsxDEV(C,{path:"/student-map",element:r.jsxDEV(Qr,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:269,columnNumber:13},this),r.jsxDEV(C,{path:"/admin-login",element:r.jsxDEV(mo,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:49},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:270,columnNumber:13},this),r.jsxDEV(C,{path:"/admin-dashboard",element:r.jsxDEV(ao,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:53},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:271,columnNumber:13},this),r.jsxDEV(C,{path:"*",element:r.jsxDEV(d,{},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:38},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:256,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:254,columnNumber:7},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/App.tsx",lineNumber:253,columnNumber:5},this)}const vo=window.fetch;window.fetch=function(e,t){return m(this,null,function*(){if("string"==typeof e&&(e.includes(hr.api.url)||e.includes("localhost")))try{let e=br.getAccessToken();!e&&br.isAuthenticated()&&(yield br.refreshSession()).success&&(e=br.getAccessToken()),e&&((t=t||{}).headers=c(a({},t.headers),{Authorization:`Bearer ${e}`}))}catch(n){}return vo(e,t)})},(()=>{{const e=console.warn;console.warn=(...t)=>{const n=t[0];"string"==typeof n&&(n.includes("React Router Future Flag Warning")||n.includes("v7_startTransition")||n.includes("v7_relativeSplatPath"))||"string"==typeof n&&n.includes("WebGL context was lost")||"string"==typeof n&&(n.includes("Firefox can't establish a connection")||n.includes("connection was interrupted while the page was loading"))||e.apply(console,t)}}})();const xo=document.createElement("link");xo.rel="preconnect",xo.href="https://fonts.gstatic.com",xo.crossOrigin="anonymous",document.head.appendChild(xo);const Co=document.createElement("link");Co.rel="stylesheet",Co.href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap&font-display=swap",document.head.appendChild(Co),o.createRoot(document.getElementById("root")).render(r.jsxDEV(N.StrictMode,{children:r.jsxDEV(No,{},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:29,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/main.tsx",lineNumber:28,columnNumber:3},void 0))}},function(){return S||(0,P[r(P)[0]])((S={exports:{}}).exports,S),S.exports});export default _();
