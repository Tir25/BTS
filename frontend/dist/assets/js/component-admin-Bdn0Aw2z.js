import{r as e,j as n}from"./vendor-react-BEY4Bh4-.js";import{a as t}from"./service-misc-DhOikwKZ.js";import{M as r}from"./component-misc-MNRysRoQ.js";const l=e=>({id:e.id,name:e.name,description:e.description||"",distance_km:e.distance_km||0,estimated_duration_minutes:e.estimated_duration_minutes||0,is_active:e.is_active,city:e.city,origin:e.custom_origin,destination:e.custom_destination,custom_destination:e.custom_destination,custom_origin:e.custom_origin,destination_coordinates:e.destination_coordinates,origin_coordinates:e.origin_coordinates,bus_stops:e.bus_stops?.map(e=>({name:e.name,coordinates:[0,0],address:e.location})),current_eta_minutes:e.current_eta_minutes,last_eta_calculation:e.last_eta_calculation,created_at:e.created_at,updated_at:e.updated_at});function o(){const[o,m]=e.useState("buses"),[i,s]=e.useState(!1),[a,c]=e.useState(null),[d,u]=e.useState(null),[N,g]=e.useState([]),[x,b]=e.useState([]),[f,h]=e.useState([]),[p,C]=e.useState([]),[v,j]=e.useState(!1),[y,D]=e.useState(!1),[S,E]=e.useState(!1),[M,P]=e.useState(!1),[V,w]=e.useState(!1),[_,k]=e.useState(!1),[A,B]=e.useState(null),[R,q]=e.useState(null),[F,$]=e.useState(!1),[T,U]=e.useState(!1),[I,Y]=e.useState({code:"",number_plate:"",capacity:50,model:"",year:(new Date).getFullYear(),is_active:!0}),[L,O]=e.useState({email:"",first_name:"",last_name:"",phone:"",role:"driver",assigned_bus_id:""}),[z,G]=e.useState({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),[J,H]=e.useState(!1),[K,Q]=e.useState(!1),[W,X]=e.useState(""),[Z,ee]=e.useState({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),[ne,te]=e.useState(!1),[re,le]=e.useState("destination"),[oe,me]=e.useState(null),[ie,se]=e.useState(null),ae=e.useCallback(async()=>{s(!0),c(null);try{const[e,n,r]=await Promise.all([t.getAllBuses(),t.getAllDrivers(),t.getAllRoutes()]);if(e.success&&e.data&&g(e.data),n.success&&n.data){const e=new Map;n.data.forEach(n=>{const t=n.id;if(e.has(t)){const r=e.get(t);(!r.email&&n.email||r.email&&n.email&&!r.first_name&&n.first_name)&&e.set(t,n)}else e.set(t,n)});const t=Array.from(e.values());b(t)}r.success&&r.data&&C(r.data.map(l)),await ce(),e.success&&n.success&&r.success||c("Failed to load some data")}catch(e){c("An error occurred while loading data")}finally{s(!1)}},[]);e.useEffect(()=>{ae()},[ae]);const ce=async()=>{try{const e=await t.getAssignedDrivers();if(e.success&&e.data){const n=new Map;e.data.forEach(e=>{const t=e.driver_id;if(n.has(t)){const r=n.get(t);(!r.driver_email&&e.driver_email||r.driver_email&&e.driver_email&&!r.driver_name&&e.driver_name)&&n.set(t,e)}else n.set(t,e)});const t=Array.from(n.values());h(t)}else h([])}catch(e){h([])}},de=async(e,n)=>{s(!0),c(null);try{const r=await t.assignDriverToBus(e,n);r.success&&r.data?(await ae(),u("Bus assigned to driver successfully!"),setTimeout(()=>u(null),3e3)):c(r.error||"Failed to assign bus to driver")}catch(r){c("An error occurred while assigning bus to driver")}finally{s(!1)}},ue=async(e,n,r)=>{const l=`${n} ${r}`;if(confirm(`Are you sure you want to delete driver "${l}"?\n\nThis action will:\n• Remove the driver from all database tables\n• Delete their Supabase Auth account\n• Unassign them from any buses\n• This action cannot be undone!`)){s(!0),c(null);try{const n=await t.deleteDriver(e);n.success&&n.data?(b(x.filter(n=>n.id!==e)),h(f.filter(n=>n.driver_id!==e)),u(`Driver "${l}" deleted successfully from all systems!`),setTimeout(()=>u(null),5e3)):c(n.error||`Failed to delete driver "${l}"`)}catch(o){c(`An error occurred while deleting driver "${l}"`)}finally{s(!1)}}},Ne=e=>{if(!e)return"Not Assigned";const n=p.find(n=>n.id===e);if(!n)return"Unknown Route";return`${n.city||"Unknown City"} → ${n.destination||"Ganpat University"}`},ge=e=>{le(e),te(!0)},xe=e=>e.driver_full_name?e.driver_full_name:e.driver_first_name&&e.driver_last_name?`${e.driver_first_name} ${e.driver_last_name}`:e.assigned_driver_id?(e=>{if(!e)return"Not Assigned";const n=x.find(n=>n.id===e);return n?`${n.first_name} ${n.last_name}`:"Unknown Driver"})(e.assigned_driver_id):"Not Assigned",be=e=>{if(!e)return"Not Assigned";const n=N.find(n=>n.id===e);return n?n.number_plate:"Unknown Bus"};return i?n.jsxDEV("div",{className:"flex items-center justify-center p-8",children:[n.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:892,columnNumber:9},this),n.jsxDEV("span",{className:"ml-2 text-gray-600",children:"Loading management data..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:893,columnNumber:9},this),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:894,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:891,columnNumber:7},this):n.jsxDEV("div",{className:"space-y-6",children:[n.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"🚍 Streamlined System Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:907,columnNumber:13},this),n.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage buses, drivers, and routes in one unified interface"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:910,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:906,columnNumber:11},this),n.jsxDEV("button",{onClick:ae,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors",children:"🔄 Refresh Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:914,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:905,columnNumber:9},this),d&&n.jsxDEV("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:n.jsxDEV("p",{className:"text-green-800",children:d},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:925,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:924,columnNumber:11},this),a&&n.jsxDEV("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsxDEV("p",{className:"text-red-800",children:a},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:931,columnNumber:13},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:930,columnNumber:11},this),n.jsxDEV("div",{className:"border-b border-gray-200",children:n.jsxDEV("nav",{className:"-mb-px flex space-x-8",children:[n.jsxDEV("button",{onClick:()=>m("buses"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("buses"===o?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["🚌 Buses (",N.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:938,columnNumber:13},this),n.jsxDEV("button",{onClick:()=>m("drivers"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("drivers"===o?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["👨‍💼 Drivers (",x.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:948,columnNumber:13},this),n.jsxDEV("button",{onClick:()=>m("routes"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("routes"===o?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["🗺️ Routes (",p.length,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:958,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:937,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:936,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:904,columnNumber:7},this),"buses"===o&&n.jsxDEV("div",{className:"space-y-6",children:n.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Bus Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:977,columnNumber:15},this),n.jsxDEV("div",{className:"flex space-x-2",children:n.jsxDEV("button",{onClick:()=>j(!v),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:v?"❌ Cancel":"➕ Add New Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:990,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:980,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:976,columnNumber:13},this),v&&n.jsxDEV("form",{onSubmit:async e=>{e.preventDefault(),s(!0),c(null);if(N.find(e=>e.code===I.code||e.number_plate===I.number_plate))return c(`Bus with code '${I.code}' or number plate '${I.number_plate}' already exists`),void s(!1);try{const e=await t.createBus(I);e.success&&e.data?(g([...N,e.data]),Y({code:"",number_plate:"",capacity:50,model:"",year:(new Date).getFullYear(),is_active:!0}),j(!1),u("Bus created successfully!"),setTimeout(()=>u(null),3e3)):c(e.error||"Failed to create bus")}catch(n){c("An error occurred while creating bus")}finally{s(!1)}},className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1006,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:I.code,onChange:e=>Y({...I,code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BUS-2024-001"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1009,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1005,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1021,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:I.number_plate,onChange:e=>Y({...I,number_plate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., GJ-01-AB-1234"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1024,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1020,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1036,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,value:I.capacity,onChange:e=>Y({...I,capacity:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1039,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1035,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1054,columnNumber:21},this),n.jsxDEV("input",{type:"text",value:I.model,onChange:e=>Y({...I,model:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mercedes-Benz"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1057,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1053,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1068,columnNumber:21},this),n.jsxDEV("input",{type:"number",value:I.year,onChange:e=>Y({...I,year:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:(new Date).getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1071,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1067,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",checked:I.is_active,onChange:e=>Y({...I,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1086,columnNumber:21},this),n.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1094,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1085,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1004,columnNumber:17},this),n.jsxDEV("div",{className:"mt-4 flex justify-end",children:n.jsxDEV("button",{type:"submit",disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Creating...":"Create Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1098,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1097,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1e3,columnNumber:15},this),n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1113,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1121,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1124,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1127,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1130,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1133,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1136,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1112,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1111,columnNumber:17},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1144,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1154,columnNumber:27},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:["Capacity: ",e.capacity," | ",e.model," (",e.year,")"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1157,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1153,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1152,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:xe(e)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1163,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1162,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_name||Ne(e.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1168,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1167,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_id?(()=>{const n=p.find(n=>n.id===e.route_id);return n?.city||"Not specified"})():"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1173,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1172,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1185,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1184,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxDEV("div",{className:"flex flex-col space-y-2",children:[n.jsxDEV("div",{className:"flex space-x-2",children:[n.jsxDEV("button",{onClick:()=>(e=>{B(e),$(!1),w(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1198,columnNumber:29},this),n.jsxDEV("button",{onClick:()=>(e=>{B(e),Y({code:e.code,number_plate:e.number_plate,capacity:e.capacity,model:e.model||"",year:e.year||(new Date).getFullYear(),is_active:e.is_active}),$(!0),w(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit bus",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1205,columnNumber:29},this),n.jsxDEV("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this bus?")){s(!0),c(null);try{const n=await t.deleteBus(e);n.success?(g(N.filter(n=>n.id!==e)),u("Bus deleted successfully!"),setTimeout(()=>u(null),3e3)):c(n.error||"Failed to delete bus")}catch(n){c("An error occurred while deleting bus")}finally{s(!1)}}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete bus",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1212,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1197,columnNumber:27},this),n.jsxDEV("select",{onChange:n=>(async(e,n)=>{s(!0),c(null);try{const r=await t.updateBus(e,{route_id:n});r.success&&r.data?(g(N.map(t=>t.id===e?{...t,route_id:n}:t)),u("Route assigned to bus successfully!"),setTimeout(()=>u(null),3e3)):c(r.error||"Failed to assign route to bus")}catch(r){c("An error occurred while assigning route to bus")}finally{s(!1)}})(e.id,n.target.value),value:e.route_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[n.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1227,columnNumber:29},this),p.map(e=>n.jsxDEV("option",{value:e.id,className:"text-gray-900",children:e.name},e.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1231,columnNumber:31},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1220,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1196,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1195,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1143,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1141,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1110,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1109,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:975,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:974,columnNumber:9},this),"drivers"===o&&n.jsxDEV("div",{className:"space-y-6",children:[n.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Driver & Bus Assignment Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1256,columnNumber:15},this),n.jsxDEV("div",{className:"flex space-x-2",children:[n.jsxDEV("button",{onClick:()=>E(!S),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:S?"❌ Cancel":"➕ Create New Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1260,columnNumber:17},this),n.jsxDEV("button",{onClick:()=>D(!y),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:y?"❌ Cancel":"🚗 Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1259,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1255,columnNumber:13},this),y&&n.jsxDEV("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Assign Bus to Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1278,columnNumber:19},this),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Select a driver from Supabase authentication and assign them to a bus."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1277,columnNumber:17},this),n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Driver *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1289,columnNumber:21},this),n.jsxDEV("select",{required:!0,value:W,onChange:e=>X(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[n.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a driver..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1298,columnNumber:23},this),x.map(e=>n.jsxDEV("option",{value:e.id,className:"text-gray-900",children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1302,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1292,columnNumber:21},this),0===x.length&&n.jsxDEV("p",{className:"text-sm text-orange-600 mt-1",children:"No drivers found. Please create driver accounts first."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1313,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1288,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Bus *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1320,columnNumber:21},this),n.jsxDEV("select",{required:!0,value:L.assigned_bus_id||"",onChange:e=>O({...L,assigned_bus_id:e.target.value||""}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",children:[n.jsxDEV("option",{value:"",className:"text-gray-900",children:"Choose a bus..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1334,columnNumber:23},this),N.map(e=>n.jsxDEV("option",{value:e.id,className:"text-gray-900",children:[e.number_plate," (",e.model||"Unknown Model",")"]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1338,columnNumber:25},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1323,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1319,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1287,columnNumber:17},this),n.jsxDEV("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsxDEV("button",{type:"button",onClick:()=>{D(!1),X(""),O({...L,assigned_bus_id:""})},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1351,columnNumber:19},this),n.jsxDEV("button",{onClick:()=>de(W,L.assigned_bus_id),disabled:i||!W||!L.assigned_bus_id,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Assigning...":"Assign Driver to Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1362,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1350,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1276,columnNumber:15},this),S&&n.jsxDEV("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("h4",{className:"text-lg font-medium text-green-900 mb-2",children:"🆕 Create New Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1386,columnNumber:19},this),n.jsxDEV("p",{className:"text-sm text-green-700 mb-4",children:"Create a new driver account with Supabase authentication. The driver will receive login credentials and can immediately access the driver interface."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1389,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1385,columnNumber:17},this),n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),s(!0),c(null),!(z.email&&z.first_name&&z.last_name&&z.password))return c("All fields are required: Email, First Name, Last Name, and Password"),void s(!1);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z.email))return c("Please enter a valid email address"),void s(!1);if(z.password!==z.confirm_password)return c("Passwords do not match"),void s(!1);if(z.password.length<6)return c("Password must be at least 6 characters long"),void s(!1);if(x.find(e=>e.email===z.email))return c("Driver with this email already exists"),void s(!1);if(!i)try{const e={email:z.email,first_name:z.first_name,last_name:z.last_name,phone:z.phone,role:"driver",password:z.password},n=await t.createDriver(e);if(n.success&&n.data){const e=await t.getAllDrivers();if(e.success&&e.data){const n=new Map;e.data.forEach(e=>{const t=e.id;if(n.has(t)){const r=n.get(t);(!r.email&&e.email||r.email&&e.email&&!r.first_name&&e.first_name)&&n.set(t,e)}else n.set(t,e)});const t=Array.from(n.values());b(t)}G({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),H(!1),Q(!1),E(!1),u(`Driver ${n.data.first_name} ${n.data.last_name} created successfully! They can now login with their credentials.`),setTimeout(()=>u(null),5e3)}else c(n.error||"Failed to create driver")}catch(n){c("An error occurred while creating driver")}finally{s(!1)}},className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1399,columnNumber:23},this),n.jsxDEV("input",{type:"email",required:!0,value:z.email,onChange:e=>G({...z,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"driver@university.com"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1402,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1398,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1418,columnNumber:23},this),n.jsxDEV("input",{type:"text",required:!0,value:z.first_name,onChange:e=>G({...z,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"John"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1421,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1417,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1437,columnNumber:23},this),n.jsxDEV("input",{type:"text",required:!0,value:z.last_name,onChange:e=>G({...z,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Smith"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1440,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1436,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1456,columnNumber:23},this),n.jsxDEV("input",{type:"tel",value:z.phone,onChange:e=>G({...z,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-900 bg-white",placeholder:"+91-9876543210"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1459,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1455,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1474,columnNumber:23},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("input",{type:J?"text":"password",required:!0,value:z.password,onChange:e=>{G({...z,password:e.target.value})},onFocus:e=>{e.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Minimum 6 characters",minLength:6,autoComplete:"new-password",id:"driver-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1478,columnNumber:25},this),n.jsxDEV("button",{type:"button",onClick:()=>H(!J),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:J?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1502,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1477,columnNumber:23},this),n.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Current length: ",z.password.length,"/6"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1510,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1473,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1516,columnNumber:23},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("input",{type:K?"text":"password",required:!0,value:z.confirm_password,onChange:e=>{G({...z,confirm_password:e.target.value})},onFocus:e=>{e.target.select()},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900 bg-white",placeholder:"Confirm password",minLength:6,autoComplete:"new-password",id:"driver-confirm-password-input"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1520,columnNumber:25},this),n.jsxDEV("button",{type:"button",onClick:()=>Q(!K),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:K?"🙈":"👁️"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1544,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1519,columnNumber:23},this),n.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:[z.password!==z.confirm_password&&z.confirm_password.length>0&&n.jsxDEV("span",{className:"text-red-500",children:"Passwords do not match"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1558,columnNumber:29},this),z.password===z.confirm_password&&z.confirm_password.length>0&&n.jsxDEV("span",{className:"text-green-500",children:"Passwords match ✓"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1565,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1554,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1515,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1397,columnNumber:19},this),n.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxDEV("h5",{className:"font-medium text-blue-900 mb-2",children:"ℹ️ Important Information:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1574,columnNumber:21},this),n.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxDEV("li",{children:"• Driver account will be created in Supabase Auth"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1578,columnNumber:23},this),n.jsxDEV("li",{children:"• Driver can immediately login with these credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1579,columnNumber:23},this),n.jsxDEV("li",{children:"• Email will be auto-confirmed (no email verification required)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1582,columnNumber:23},this),n.jsxDEV("li",{children:"• Driver will have access to the driver interface at /driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1586,columnNumber:23},this),n.jsxDEV("li",{children:"• You can assign them to a bus after creation"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1590,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1577,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1573,columnNumber:19},this),n.jsxDEV("div",{className:"flex justify-end space-x-2",children:[n.jsxDEV("button",{type:"button",onClick:()=>{E(!1),G({email:"",first_name:"",last_name:"",phone:"",password:"",confirm_password:""}),H(!1),Q(!1)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1595,columnNumber:21},this),n.jsxDEV("button",{type:"submit",disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Creating...":"Create Driver Account"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1614,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1594,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1396,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1384,columnNumber:15},this),n.jsxDEV("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[n.jsxDEV("h4",{className:"text-lg font-medium text-blue-900",children:"🚗 Available Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1629,columnNumber:17},this),n.jsxDEV("button",{onClick:async()=>{try{const e=await t.getAllDrivers();if(e.success&&e.data){const n=new Map;e.data.forEach(e=>{const t=e.id;if(n.has(t)){const r=n.get(t);(!r.email&&e.email||r.email&&e.email&&!r.first_name&&e.first_name)&&n.set(t,e)}else n.set(t,e)});const t=Array.from(n.values());b(t)}}catch(e){}},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1632,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1628,columnNumber:15},this),x.length>0?n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(e=>n.jsxDEV("div",{className:"bg-white p-3 rounded border",children:[n.jsxDEV("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1691,columnNumber:23},this),n.jsxDEV("div",{className:"text-sm text-gray-600",children:e.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1694,columnNumber:23},this),n.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",e.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1697,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1687,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1685,columnNumber:17},this):n.jsxDEV("div",{className:"text-center py-4",children:[n.jsxDEV("p",{className:"text-gray-600",children:"No available drivers found."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1705,columnNumber:19},this),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:'Create new driver accounts using the "Create New Driver" button above, or check if drivers exist in the system.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1706,columnNumber:19},this),n.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:'💡 Use the "Create New Driver" button to add drivers with full Supabase Auth integration.'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1710,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1704,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1627,columnNumber:13},this),n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1722,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1730,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1733,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1736,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1739,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1721,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1720,columnNumber:17},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1747,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1757,columnNumber:27},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:["Role: ",e.role]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1760,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1756,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1755,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1766,columnNumber:25},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.phone||"No phone"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1769,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1765,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:be(e.assigned_bus_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1774,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1773,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[n.jsxDEV("select",{onChange:n=>de(e.id,n.target.value),value:e.assigned_bus_id||"",className:"text-sm border border-gray-300 rounded px-2 py-1 text-gray-900 bg-white",children:[n.jsxDEV("option",{value:"",className:"text-gray-900",children:"Select Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1786,columnNumber:27},this),N.map(e=>n.jsxDEV("option",{value:e.id,className:"text-gray-900",children:e.number_plate},e.id,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1790,columnNumber:29},this))]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1779,columnNumber:25},this),n.jsxDEV("button",{onClick:()=>ue(e.id,e.first_name,e.last_name),className:"ml-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1799,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1778,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1746,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1744,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1719,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1718,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1254,columnNumber:11},this),n.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Currently Assigned Drivers"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1823,columnNumber:15},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:[f.length," driver",1!==f.length?"s":""," assigned"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1826,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1822,columnNumber:13},this),0===f.length?n.jsxDEV("div",{className:"text-center py-8",children:[n.jsxDEV("div",{className:"text-gray-400 text-6xl mb-4",children:"🚌"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1834,columnNumber:17},this),n.jsxDEV("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Drivers Assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1835,columnNumber:17},this),n.jsxDEV("p",{className:"text-gray-600",children:"No drivers are currently assigned to buses."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1838,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1833,columnNumber:15},this):n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1847,columnNumber:23},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1850,columnNumber:23},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1853,columnNumber:23},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1856,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1846,columnNumber:21},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1845,columnNumber:19},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1869,columnNumber:29},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.driver_email},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1872,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1868,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1867,columnNumber:25},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.bus_code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1879,columnNumber:29},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1882,columnNumber:29},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1878,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1877,columnNumber:25},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.route_name||"No route assigned"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1888,columnNumber:27},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1887,columnNumber:25},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[n.jsxDEV("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to unassign this driver?")){s(!0),c(null);try{const n=await t.unassignDriverFromBus(e);n.success?(await ae(),u("Driver unassigned successfully!"),setTimeout(()=>u(null),3e3)):c(n.error||"Failed to unassign driver")}catch(n){c("An error occurred while unassigning driver")}finally{s(!1)}}})(e.driver_id),disabled:i,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Unassign driver from bus",children:"🚫 Unassign"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1893,columnNumber:27},this),n.jsxDEV("button",{onClick:()=>{const n=x.find(n=>n.id===e.driver_id);n&&ue(n.id,n.first_name,n.last_name)},disabled:i,className:"text-red-800 hover:text-red-900 disabled:opacity-50 font-bold",title:"Delete driver from all systems",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1903,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1892,columnNumber:25},this)]},e.driver_id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1863,columnNumber:23},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1861,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1844,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1843,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1821,columnNumber:11},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1253,columnNumber:9},this),"routes"===o&&n.jsxDEV("div",{className:"space-y-6",children:n.jsxDEV("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Route Management"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1938,columnNumber:15},this),n.jsxDEV("div",{className:"flex space-x-2",children:n.jsxDEV("button",{onClick:()=>P(!M),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:M?"❌ Cancel":"➕ Add New Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1951,columnNumber:17},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1941,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1937,columnNumber:13},this),M&&n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),s(!0),c(null),!Z.name.trim())return c("Route name is required"),void s(!1);if(!Z.city.trim())return c("City is required"),void s(!1);if(!Z.description.trim())return c("Route description is required"),void s(!1);try{const e={...Z,distance_km:parseFloat(Z.distance_km)||0,estimated_duration_minutes:parseInt(Z.estimated_duration_minutes)||0,custom_destination:oe?.name,custom_destination_coordinates:oe?.coordinates,custom_origin:ie?.name,custom_origin_coordinates:ie?.coordinates,bus_stops:[]},n=await t.createRoute(e);n.success&&n.data?(C([...p,l(n.data)]),ee({name:"",description:"",distance_km:"",estimated_duration_minutes:"",is_active:!0,city:""}),me(null),se(null),P(!1),u("Route created successfully!"),setTimeout(()=>u(null),3e3)):c(n.error||"Failed to create route")}catch(n){c("An error occurred while creating route")}finally{s(!1)}},className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1967,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:Z.name,onChange:e=>ee({...Z,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Downtown Express"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1970,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1966,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1982,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:Z.city,onChange:e=>ee({...Z,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Ahmedabad"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1985,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1981,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1997,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Z.distance_km,onChange:e=>ee({...Z,distance_km:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2e3,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1996,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2016,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,value:Z.estimated_duration_minutes,onChange:e=>ee({...Z,estimated_duration_minutes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2019,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2015,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",checked:Z.is_active,onChange:e=>ee({...Z,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2034,columnNumber:21},this),n.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2045,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2033,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1965,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2049,columnNumber:19},this),n.jsxDEV("textarea",{value:Z.description,onChange:e=>ee({...Z,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3,placeholder:"Route description..."},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2052,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2048,columnNumber:17},this),n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2069,columnNumber:21},this),n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("div",{className:"text-sm text-gray-600",children:"Default: Ganpat University"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2073,columnNumber:23},this),oe&&n.jsxDEV("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:[n.jsxDEV("div",{className:"font-medium text-green-800",children:oe.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2078,columnNumber:27},this),n.jsxDEV("div",{className:"text-sm text-green-600",children:oe.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2081,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2077,columnNumber:25},this),n.jsxDEV("button",{type:"button",onClick:()=>ge("destination"),className:"w-full px-3 py-2 border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"🗺️ Set Custom Destination"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2086,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2072,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2068,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin (Starting Point)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2097,columnNumber:21},this),n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("div",{className:"text-sm text-gray-600",children:"Auto: Driver's live location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2101,columnNumber:23},this),ie&&n.jsxDEV("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:[n.jsxDEV("div",{className:"font-medium text-blue-800",children:ie.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2106,columnNumber:27},this),n.jsxDEV("div",{className:"text-sm text-blue-600",children:ie.address},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2109,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2105,columnNumber:25},this),n.jsxDEV("button",{type:"button",onClick:()=>ge("origin"),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"🗺️ Set Custom Origin (Optional)"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2114,columnNumber:23},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2100,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2096,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2067,columnNumber:17},this),n.jsxDEV("div",{className:"mt-4 flex justify-end",children:n.jsxDEV("button",{type:"submit",disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Creating...":"Create Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2125,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2124,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1961,columnNumber:15},this),n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2140,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2148,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2151,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance & Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2154,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2157,columnNumber:21},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2160,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2139,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2138,columnNumber:17},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2168,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"text-sm font-medium text-gray-900",children:e.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2178,columnNumber:27},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2181,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2177,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2176,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:e.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2187,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2186,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsxDEV("div",{className:"text-sm text-gray-900",children:[e.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2192,columnNumber:25},this),n.jsxDEV("div",{className:"text-sm text-gray-900",children:[e.estimated_duration_minutes," min"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2195,columnNumber:25},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2191,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2200,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2199,columnNumber:23},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxDEV("div",{className:"flex space-x-2",children:[n.jsxDEV("button",{onClick:()=>(e=>{q(e),U(!1),k(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"View details",children:"👁️ Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2212,columnNumber:27},this),n.jsxDEV("button",{onClick:()=>(e=>{q(e),ee({name:e.name,description:e.description,distance_km:e.distance_km.toString(),estimated_duration_minutes:e.estimated_duration_minutes.toString(),is_active:e.is_active,city:e.city||""}),U(!0),k(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit route",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2219,columnNumber:27},this),n.jsxDEV("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this route?")){s(!0),c(null);try{const n=await t.deleteRoute(e);n.success?(C(p.filter(n=>n.id!==e)),u("Route deleted successfully!"),setTimeout(()=>u(null),3e3)):c(n.error||"Failed to delete route")}catch(n){c("An error occurred while deleting route")}finally{s(!1)}}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete route",children:"🗑️ Delete"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2226,columnNumber:27},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2211,columnNumber:25},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2210,columnNumber:23},this)]},e.id,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2167,columnNumber:21},this))},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2165,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2137,columnNumber:15},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2136,columnNumber:13},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1936,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:1935,columnNumber:9},this),ne&&n.jsxDEV(r,{onLocationSelect:e=>{"destination"===re?me(e):se(e)},onClose:()=>te(!1),title:"destination"===re?"Select Destination":"Select Origin",searchPlaceholder:"destination"===re?"Search for destination...":"Search for origin..."},`map-selector-${re}`,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2246,columnNumber:9},this),V&&A&&n.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:F?"Edit Bus Details":"Bus Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2268,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{w(!1),$(!1),B(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2271,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2267,columnNumber:13},this),F?n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),A?.id){s(!0),c(null);try{const e=await t.updateBus(A.id,I);e.success&&e.data?(g(N.map(n=>n.id===A.id?e.data:n)),w(!1),$(!1),B(null),u("Bus updated successfully!"),setTimeout(()=>u(null),3e3)):c(e.error||"Failed to update bus")}catch(n){c("An error occurred while updating bus")}finally{s(!1)}}},className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Code *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2287,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:I.code,onChange:e=>Y({...I,code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2290,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2286,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Plate *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2301,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:I.number_plate,onChange:e=>Y({...I,number_plate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2304,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2300,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2315,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,value:I.capacity,onChange:e=>Y({...I,capacity:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2318,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2314,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2333,columnNumber:21},this),n.jsxDEV("input",{type:"text",value:I.model,onChange:e=>Y({...I,model:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2336,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2332,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2346,columnNumber:21},this),n.jsxDEV("input",{type:"number",value:I.year,onChange:e=>Y({...I,year:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2000",max:(new Date).getFullYear()+1},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2349,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2345,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",checked:I.is_active,onChange:e=>Y({...I,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2364,columnNumber:21},this),n.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2372,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2363,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2285,columnNumber:17},this),n.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsxDEV("button",{type:"button",onClick:()=>$(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2376,columnNumber:19},this),n.jsxDEV("button",{type:"submit",disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Updating...":"Update Bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2383,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2375,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2284,columnNumber:15},this):n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bus Code"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2396,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:A.code},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2399,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2395,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Number Plate"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2402,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:A.number_plate},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2405,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2401,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Capacity"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2410,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:[A.capacity," passengers"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2413,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2409,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Model"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2418,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:A.model||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2421,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2417,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Year"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2426,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:A.year||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2429,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2425,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2434,columnNumber:21},this),n.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(A.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:A.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2437,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2433,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Driver"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2448,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:xe(A)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2451,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2447,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Assigned Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2456,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:A.route_name||Ne(A.route_id)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2455,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2394,columnNumber:17},this),n.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:n.jsxDEV("button",{onClick:()=>$(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2466,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2465,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2393,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2266,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2265,columnNumber:9},this),_&&R&&n.jsxDEV("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsxDEV("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:T?"Edit Route Details":"Route Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2484,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{k(!1),U(!1),q(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2487,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2483,columnNumber:13},this),T?n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),R?.id){s(!0),c(null);try{const e={...Z,distance_km:parseFloat(Z.distance_km)||0,estimated_duration_minutes:parseInt(Z.estimated_duration_minutes)||0},n=await t.updateRoute(R.id,e);n.success&&n.data?(C(p.map(e=>e.id===R.id?l(n.data):e)),k(!1),U(!1),q(null),u("Route updated successfully!"),setTimeout(()=>u(null),3e3)):c(n.error||"Failed to update route")}catch(n){c("An error occurred while updating route")}finally{s(!1)}}},className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Name *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2503,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:Z.name,onChange:e=>ee({...Z,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2506,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2502,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2517,columnNumber:21},this),n.jsxDEV("input",{type:"text",required:!0,value:Z.city,onChange:e=>ee({...Z,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2520,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2516,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2531,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,step:"0.1",value:Z.distance_km,onChange:e=>ee({...Z,distance_km:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2534,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2530,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2550,columnNumber:21},this),n.jsxDEV("input",{type:"number",required:!0,value:Z.estimated_duration_minutes,onChange:e=>ee({...Z,estimated_duration_minutes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2553,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2549,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",checked:Z.is_active,onChange:e=>ee({...Z,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2568,columnNumber:21},this),n.jsxDEV("label",{className:"ml-2 text-sm text-gray-700",children:"Active"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2579,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2567,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2501,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2583,columnNumber:19},this),n.jsxDEV("textarea",{value:Z.description,onChange:e=>ee({...Z,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white",rows:3},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2586,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2582,columnNumber:17},this),n.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsxDEV("button",{type:"button",onClick:()=>U(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Cancel"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2599,columnNumber:19},this),n.jsxDEV("button",{type:"submit",disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Updating...":"Update Route"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2606,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2598,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2500,columnNumber:15},this):n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Route Name"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2619,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:R.name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2622,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2618,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"City"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2627,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:R.city||"Not specified"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2630,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2626,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Distance"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2635,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:[R.distance_km," km"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2638,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2634,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Duration"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2643,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:[R.estimated_duration_minutes," minutes"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2646,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2642,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2651,columnNumber:21},this),n.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:R.is_active?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2654,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2650,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Created"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2665,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:R.created_at?new Date(R.created_at).toLocaleDateString():"Not available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2668,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2664,columnNumber:19},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2617,columnNumber:17},this),R.description&&n.jsxDEV("div",{children:[n.jsxDEV("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2679,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:R.description},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2682,columnNumber:21},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2678,columnNumber:19},this),n.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4",children:n.jsxDEV("button",{onClick:()=>U(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"✏️ Edit"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2688,columnNumber:19},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2687,columnNumber:17},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2616,columnNumber:15},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2482,columnNumber:11},this)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:2481,columnNumber:9},this)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/StreamlinedManagement.tsx",lineNumber:902,columnNumber:5},this)}export{o as S};
