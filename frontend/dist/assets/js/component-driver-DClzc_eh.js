import{r as e,j as r,u as o}from"./vendor-react-BEY4Bh4-.js";import{w as n}from"./service-realtime-hdO4xqQG.js";import{m as t}from"./vendor-maps-DZo29UBg.js";import{c as i}from"./vendor-supabase-plo4d_Ze.js";import{a as s}from"./service-auth-DEUayG_-.js";import{a as l}from"./component-misc-MNRysRoQ.js";const c={supabase:{url:"https://gthwmwfwvhyriygpcdlr.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHdtd2Z3dmh5cml5Z3BjZGxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NzE0NTUsImV4cCI6MjA3MDU0NzQ1NX0.gY0ghDtKZ9b8XlgE7XtbQsT3efXYOBizGQKPJABGvAI"},get api(){return{url:"http://localhost:3000",websocketUrl:"ws://localhost:3000"}},isDevelopment:!0,isProduction:!1},a=(()=>{try{const e=(()=>{const{url:e,anonKey:r}=c.supabase;if(!e||"your_supabase_project_url"===e||""===e)throw new Error("Invalid Supabase URL. Please check your environment variables.");if(!r||"your_supabase_anon_key_here"===r||""===r)throw new Error("Invalid Supabase anon key. Please check your environment variables.");try{new URL(e)}catch(o){throw new Error(`Invalid Supabase URL format: ${e}`)}return{url:e,anonKey:r}})();return i(e.url,e.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}})}catch(e){return i("https://gthwmwfwvhyriygpcdlr.supabase.co","",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"bus-tracking-admin"}},realtime:{params:{eventsPerSecond:10}}})}})();const d=new class{errorLog=[];maxLogSize=100;logError(e,r,o="medium"){let n;n=e instanceof Error?e.message:"string"==typeof e?e:e instanceof Event?`Event error: ${e.type}`:"Unknown error";let t={};if("undefined"!=typeof navigator&&"connection"in navigator){const e=navigator.connection;e&&(t={effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData})}const i={message:n,context:{service:r.service||"api",operation:r.operation||"unknown",timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,networkInfo:t,...r},severity:o,retryable:this.isRetryableError(e),suggestions:this.getSuggestions(e)};return this.errorLog.push(i),this.errorLog.length>this.maxLogSize&&this.errorLog.shift(),this.logToConsole(i),i}isRetryableError(e){let r;r=e instanceof Error?e.message:"string"==typeof e?e:e instanceof Event?e.type:"Unknown error";return[/network/i,/timeout/i,/connection/i,/temporary/i,/rate.?limit/i,/server.?error/i,/gateway/i,/service.?unavailable/i].some(e=>e.test(r))}getSuggestions(e){let r;r=e instanceof Error?e.message:"string"==typeof e?e:e instanceof Event?e.type:"Unknown error";const o=[];return r.includes("CORS")&&(o.push("Check CORS configuration on the server"),o.push("Verify the API endpoint is accessible")),r.includes("timeout")&&(o.push("Increase connection timeout settings"),o.push("Check network connectivity")),r.includes("websocket")&&(o.push("Verify WebSocket server is running"),o.push("Check WebSocket URL configuration")),r.includes("sse")&&(o.push("Verify SSE endpoint is implemented on server"),o.push("Check SSE URL configuration")),r.includes("supabase")&&(o.push("Verify Supabase configuration"),o.push("Check Supabase service status")),0===o.length&&(o.push("Check network connectivity"),o.push("Verify server is running"),o.push("Check browser console for more details")),o}logToConsole(e){const{message:r,context:o,severity:n,retryable:t,suggestions:i}=e;i.length>0&&i.forEach(e=>{})}getErrorStats(){const e={},r={};return this.errorLog.forEach(o=>{e[o.context.service]=(e[o.context.service]||0)+1,r[o.severity]=(r[o.severity]||0)+1}),{total:this.errorLog.length,byService:e,bySeverity:r,recentErrors:[...this.errorLog].reverse().slice(0,10)}}getErrorsByService(e){return this.errorLog.filter(r=>r.context.service===e)}getErrorsBySeverity(e){return this.errorLog.filter(r=>r.severity===e)}getCriticalErrors(){return this.errorLog.filter(e=>"critical"===e.severity)}getRetryableErrors(){return this.errorLog.filter(e=>e.retryable)}clearLog(){this.errorLog=[]}exportLog(){return[...this.errorLog]}getAllErrors(){return[...this.errorLog]}setMaxLogSize(e){this.maxLogSize=e}},m=(e,r,o="medium")=>d.logError(e,r,o),u={LATITUDE:{min:-90,max:90},LONGITUDE:{min:-180,max:180},GUJARAT_BOUNDS:{lat:{min:20,max:25},lng:{min:68,max:75}}},b=0,v=200;class f{static instance;validationCache=new Map;cacheTimeout=5e3;static getInstance(){return f.instance||(f.instance=new f),f.instance}validateLocationData(e){const r=this.generateCacheKey(e),o=this.validationCache.get(r);if(o&&this.isCacheValid(o))return o;const n=[];let t=!1;try{if(e.busId||n.push("Missing required field: busId"),e.driverId||n.push("Missing required field: driverId"),void 0!==e.latitude&&null!==e.latitude||n.push("Missing required field: latitude"),void 0!==e.longitude&&null!==e.longitude||n.push("Missing required field: longitude"),n.length>0){const e={success:!1,errors:n};return this.cacheResult(r,e),e}const o=this.sanitizeCoordinate(e.latitude,"latitude"),i=this.sanitizeCoordinate(e.longitude,"longitude");o.success||n.push(...o.errors||[]),i.success||n.push(...i.errors||[]);const s=this.sanitizeTimestamp(e.timestamp);s.success||n.push(...s.errors||[]);const l=this.sanitizeSpeed(e.speed),c=this.sanitizeHeading(e.heading);if(l.success||void 0===e.speed||n.push(...l.errors||[]),c.success||void 0===e.heading||n.push(...c.errors||[]),o.success&&i.success){const r=this.checkCoordinateAnomalies(o.data,i.data,e.busId);r.success||n.push(...r.errors||[])}if(n.length>0){const e={success:!1,errors:n};return this.cacheResult(r,e),e}const a={busId:String(e.busId).trim(),driverId:String(e.driverId).trim(),latitude:o.data,longitude:i.data,timestamp:s.data,speed:l.success?l.data:void 0,heading:c.success?c.data:void 0,eta:e.eta,nearStop:e.nearStop};t=!!(o.sanitized||i.sanitized||s.sanitized||l.sanitized||c.sanitized);const d={success:!0,data:a,sanitized:t};return this.cacheResult(r,d),d}catch(i){const e=i instanceof Error?i.message:"Unknown validation error";n.push(`Validation error: ${e}`);const o={success:!1,errors:n};return this.cacheResult(r,o),d.logError(new Error(`Data validation failed: ${e}`),{service:"map",operation:"data_validation"},"medium"),o}}sanitizeCoordinate(e,r){let o,n=!1;if(null==e)return{success:!1,errors:[`${r} is required`]};if("string"==typeof e?(o=parseFloat(e),n=!0):o=e,isNaN(o))return{success:!1,errors:[`${r} must be a valid number`]};const t="latitude"===r?u.LATITUDE:u.LONGITUDE;if(o<t.min||o>t.max)return{success:!1,errors:[`${r} must be between ${t.min} and ${t.max}`]};const i=Math.round(1e6*o)/1e6;return i!==o&&(n=!0),{success:!0,data:i,sanitized:n}}sanitizeTimestamp(e){const r=[];let o,n=!1;if(null==e)return{success:!1,errors:["timestamp is required"]};if("number"==typeof e)o=new Date(e>1e12?e:1e3*e),n=!0;else{if("string"!=typeof e)return{success:!1,errors:["timestamp must be a string or number"]};o=new Date(e),n=!0}if(isNaN(o.getTime()))return{success:!1,errors:["timestamp must be a valid date"]};const t=new Date,i=new Date(t.getTime()-36e5),s=new Date(t.getTime()+36e5);return o<i&&r.push("timestamp is too old (more than 1 hour ago)"),o>s&&r.push("timestamp is in the future (more than 1 hour ahead)"),r.length>0?{success:!1,errors:r}:{success:!0,data:o.toISOString(),sanitized:n}}sanitizeSpeed(e){if(null==e)return{success:!0};let r,o=!1;if("string"==typeof e?(r=parseFloat(e),o=!0):r=e,isNaN(r))return{success:!1,errors:["speed must be a valid number"]};if(r<b||r>v)return{success:!1,errors:[`speed must be between ${b} and ${v} km/h`]};const n=Math.round(10*r)/10;return n!==r&&(o=!0),{success:!0,data:n,sanitized:o}}sanitizeHeading(e){if(null==e)return{success:!0};let r,o=!1;if("string"==typeof e?(r=parseFloat(e),o=!0):r=e,isNaN(r))return{success:!1,errors:["heading must be a valid number"]};let n=r%360;return n<0&&(n+=360),n!==r&&(o=!0),{success:!0,data:n,sanitized:o}}checkCoordinateAnomalies(e,r,o){return e<u.GUJARAT_BOUNDS.lat.min||e>u.GUJARAT_BOUNDS.lat.max||r<u.GUJARAT_BOUNDS.lng.min||u.GUJARAT_BOUNDS.lng.max,{success:!0}}generateCacheKey(e){return`${e.busId}-${e.latitude}-${e.longitude}-${e.timestamp}`}isCacheValid(e){return!!e.timestamp&&Date.now()-e.timestamp<this.cacheTimeout}cacheResult(e,r){r.timestamp=Date.now(),this.validationCache.set(e,r),this.validationCache.size>100&&this.cleanupCache()}cleanupCache(){const e=Date.now();for(const[r,o]of this.validationCache.entries())o.timestamp&&e-o.timestamp>this.cacheTimeout&&this.validationCache.delete(r)}clearCache(){this.validationCache.clear()}getCacheStats(){return{size:this.validationCache.size,maxAge:this.cacheTimeout}}}const N=f.getInstance(),g=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[o,i]=e.useState(!1),[s,l]=e.useState(!1),[c,d]=e.useState(null),[m,u]=e.useState(null),[b,v]=e.useState(null),[f,N]=e.useState(null),[g,x]=e.useState(null),[h,p]=e.useState(0),[D,C]=e.useState({email:"",password:""}),[j,P]=e.useState(null),[E,w]=e.useState(!1),y=e.useRef(null),V=e.useRef(null),I=e.useRef(null),S=e.useRef(null),k=e.useRef(null),L=e.useRef(null);e.useEffect(()=>{const{data:{subscription:e}}=a.auth.onAuthStateChange(async(e,r)=>{"SIGNED_IN"===e&&r?await _(r.access_token):"SIGNED_OUT"===e&&(i(!1),d(null),T(),A())});return()=>e.unsubscribe()});const A=e.useCallback(()=>{L.current&&(L.current.remove(),L.current=null),S.current&&(S.current.remove(),S.current=null)},[]),_=e.useCallback(async e=>{try{await n.connect(),n.socket?.on("connect",()=>{N(null)}),n.socket?.on("disconnect",()=>{N("Disconnected from server")}),n.socket?.on("error",e=>{N(e.message||"Socket error occurred")}),n.socket?.on("driver:authenticated",e=>{i(!0),d(e.busInfo),N(null)}),n.socket?.on("driver:locationConfirmed",e=>{x((new Date).toLocaleTimeString()),p(e=>e+1)}),y.current=n.socket,n.authenticateAsDriver(e)}catch(r){N("Failed to authenticate with server")}},[]),T=e.useCallback(()=>{n.disconnect(),y.current=null},[]);e.useEffect(()=>{const{data:{subscription:e}}=a.auth.onAuthStateChange(async(e,r)=>{"SIGNED_IN"===e&&r?await _(r.access_token):"SIGNED_OUT"===e&&(i(!1),d(null),T(),A())});return()=>e.unsubscribe()},[_,T,A]),e.useEffect(()=>{o&&navigator.geolocation&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(e=>{"granted"===e.state||"prompt"===e.state||"denied"===e.state&&v("Location permission is denied. Please enable it in your browser settings.")})},[o]),e.useEffect(()=>{(async()=>{if(navigator.geolocation)try{if("permissions"in navigator){"denied"===(await navigator.permissions.query({name:"geolocation"})).state&&v("Location permission denied. Please enable location access in your browser settings.")}}catch(e){}else v("Geolocation is not supported by this browser")})()},[]);const R=async e=>{e.preventDefault(),w(!0),P(null);try{const{data:e,error:r}=await a.auth.signInWithPassword({email:D.email,password:D.password});if(r)return void P(r.message);e.user&&e.session?(await _(e.session.access_token),C({email:"",password:""})):P("Login failed - no user data received")}catch(r){P("An unexpected error occurred during login")}finally{w(!1)}},M=async()=>{if(!navigator.geolocation)return void v("Geolocation is not supported by this browser");const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=navigator.userAgent.includes("Firefox"),o=(navigator.userAgent.includes("Chrome"),navigator.userAgent.includes("Safari")&&navigator.userAgent.includes("Chrome"),{enableHighAccuracy:!0,timeout:e?3e4:6e4,maximumAge:0});try{if("permissions"in navigator){if("denied"===(await navigator.permissions.query({name:"geolocation"})).state){return void v(e?"Location permission denied on mobile. Please:\n1. Go to your phone Settings\n2. Find this browser app\n3. Enable Location permission\n4. Refresh this page":"Location permission denied. Please reset location permissions and try again.")}}}catch(n){}v(e?"Requesting location permission on mobile... Please allow when prompted. If no prompt appears, check your phone settings.":"Requesting location permission... Please allow when prompted."),navigator.geolocation.getCurrentPosition(async e=>{u(e),v(null),((e,r)=>{if(!k.current||S.current)return;S.current=new t.Map({container:k.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors",maxzoom:19}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:19}]},center:[r,e],zoom:15,bearing:0,pitch:0,attributionControl:!0,maxZoom:19,minZoom:1,preserveDrawingBuffer:!1,antialias:!0,dragRotate:!1}),S.current.addControl(new t.NavigationControl,"top-right"),S.current.once("load",()=>{S.current&&(S.current.dragRotate.disable(),S.current.touchZoomRotate.disableRotation())}),S.current.on("error",e=>{});const o=document.createElement("div");o.className="driver-marker",o.innerHTML='\n      <div class="driver-marker-content">\n        <div style="font-size: 16px;">🚌</div>\n      </div>\n    ',L.current=new t.Marker({element:o,anchor:"center"}).setLngLat([r,e]).addTo(S.current);const n=new t.Popup({offset:25,className:"driver-popup"}).setHTML(`\n        <div class="driver-popup">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${c?.bus_number||"Unknown"}</p>\n          <p><strong>Route:</strong> ${c?.route_name||"Unknown"}</p>\n          <p><strong>Driver:</strong> ${c?.driver_name||"Unknown"}</p>\n          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>\n        </div>\n      `);L.current.setPopup(n)})(e.coords.latitude,e.coords.longitude),await O(e)},o=>{let n="Location error: ";switch(o.code){case o.PERMISSION_DENIED:e?n='Mobile location permission denied. Please:\n\n1. Go to your phone Settings\n2. Find this browser app (Chrome/Firefox/Safari)\n3. Tap "Permissions" or "Privacy"\n4. Enable "Location" permission\n5. Return to this page and refresh\n\nAlternative: Try opening this page in a different browser app.':n+=r?'Firefox location permission issue. Please: 1) Click the lock icon in address bar 2) Set location to "Allow" 3) Refresh the page 4) Try again':"Permission denied. Please enable location access in your browser settings. On mobile, check your browser permissions and try refreshing the page.";break;case o.POSITION_UNAVAILABLE:n=e?"Location unavailable on mobile. Please:\n1. Go outdoors or near a window\n2. Wait 10-15 seconds\n3. Make sure GPS is enabled in phone settings\n4. Try again":"Location information unavailable.";break;case o.TIMEOUT:n=e?"Location request timed out on mobile. Please:\n1. Go outdoors for better GPS signal\n2. Wait 30 seconds and try again\n3. Check if GPS is enabled in phone settings":"Location request timed out. Please try again.";break;default:n+=o.message}v(n)},o),I.current=navigator.geolocation.watchPosition(async e=>{u(e),v(null),((e,r)=>{if(!S.current||!L.current)return;const o=[r,e];L.current.setLngLat(o),S.current.flyTo({center:o,duration:1e3});const n=new t.Popup({offset:25,className:"driver-popup"}).setHTML(`\n        <div class="driver-popup">\n          <h3>🚌 Driver Location</h3>\n          <p><strong>Bus:</strong> ${c?.bus_number||"Unknown"}</p>\n          <p><strong>Route:</strong> ${c?.route_name||"Unknown"}</p>\n          <p><strong>Driver:</strong> ${c?.driver_name||"Unknown"}</p>\n          <p><strong>Status:</strong> <span style="color: #059669;">Active</span></p>\n          <p><strong>Updated:</strong> ${(new Date).toLocaleTimeString()}</p>\n          <p><strong>Coordinates:</strong> ${e.toFixed(6)}, ${r.toFixed(6)}</p>\n        </div>\n      `);L.current.setPopup(n)})(e.coords.latitude,e.coords.longitude),await O(e)},r=>{let o="Location tracking error: ";switch(r.code){case r.PERMISSION_DENIED:o=e?"Location permission lost on mobile. Please refresh the page and allow location access again.":"Permission denied. Please enable location access in your browser settings.";break;case r.POSITION_UNAVAILABLE:o=e?"GPS signal lost on mobile. Please go outdoors or near a window.":"Location information unavailable.";break;case r.TIMEOUT:o=e?"GPS timeout on mobile. Please check your location and try again.":"Location request timed out. Please try again.";break;default:o+=r.message}v(o)},o),l(!0)},z=()=>{I.current&&(navigator.geolocation.clearWatch(I.current),I.current=null),V.current&&(clearInterval(V.current),V.current=null),l(!1)},O=async e=>{if(!y.current||!c)return;const{data:{user:r}}=await a.auth.getUser();if(!r)return;const o={driverId:r.id,latitude:e.coords.latitude,longitude:e.coords.longitude,timestamp:(new Date).toISOString(),speed:e.coords.speed||void 0,heading:e.coords.heading||void 0};y.current.emit("driver:locationUpdate",o)};return o?r.jsxDEV("div",{className:"min-h-screen bg-gray-50 p-4",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:r.jsxDEV("div",{className:"flex items-center justify-between",children:[r.jsxDEV("div",{children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:718,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-gray-600 mt-1",children:["Welcome, ",c?.driver_name," | Bus: ",c?.bus_number," | Route: ",c?.route_name]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:721,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:717,columnNumber:13},void 0),r.jsxDEV("button",{onClick:async()=>{try{s&&z(),T();const{error:e}=await a.auth.signOut();e||(i(!1),d(null),u(null),v(null),N(null),x(null),p(0),A())}catch(e){}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:726,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:716,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:715,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(f?"bg-red-500":"bg-green-500")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:740,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:744,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-gray-600",children:f?"Disconnected":"Connected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:745,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:743,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:739,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:738,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(s?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:755,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:759,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-sm text-gray-600",children:s?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:760,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:758,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:754,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:753,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:770,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:h},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:771,columnNumber:15},void 0),g&&r.jsxDEV("p",{className:"text-sm text-gray-600",children:["Last: ",g]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:773,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:769,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:768,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:r.jsxDEV("div",{className:"space-y-3",children:s?r.jsxDEV("button",{onClick:z,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:839,columnNumber:17},void 0):r.jsxDEV(r.Fragment,{children:[r.jsxDEV("button",{onClick:M,disabled:!!f,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:783,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{v(null),M()},e=>{v("Location permission denied. Please check your browser settings.")},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})},className:"w-full mt-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:"🔐 Request Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:791,columnNumber:19},void 0),b&&b.includes("Permission denied")&&r.jsxDEV("button",{onClick:()=>{v(null),M()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mt-2",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:827,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:782,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:780,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:779,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:736,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:854,columnNumber:13},void 0),r.jsxDEV("div",{ref:k,className:"w-full h-96 rounded-lg border border-gray-200",style:{minHeight:"400px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:858,columnNumber:13},void 0),b&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:[r.jsxDEV("p",{className:"text-red-700 text-sm mb-3",children:b},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:866,columnNumber:17},void 0),r.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[r.jsxDEV("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:870,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:[r.jsxDEV("h5",{className:"font-semibold text-blue-800 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:876,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-blue-700 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:881,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:880,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:885,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:884,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:889,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:888,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:893,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:892,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:897,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:896,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:901,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:900,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:879,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:875,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:[r.jsxDEV("h5",{className:"font-semibold text-green-800 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:909,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-green-700 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:914,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:913,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:918,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:917,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:922,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:921,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:912,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:908,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:927,columnNumber:19},void 0),r.jsxDEV("button",{onClick:()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{const o=`✅ Location Test Successful!\n\nLatitude: ${r.coords.latitude}\nLongitude: ${r.coords.longitude}\nAccuracy: ${r.coords.accuracy}m\nDevice: ${e?"Mobile":"Desktop"}\n\nLocation is working! You can now start tracking.`;alert(o),v(null)},r=>{const o=`❌ Location Test Failed\n\nError Code: ${r.code}\nError Message: ${r.message}\nDevice: ${e?"Mobile":"Desktop"}\n\nPlease check your location permissions.`;alert(o)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"mt-2 bg-green-500 text-white px-3 py-1 rounded text-xs hover:bg-green-600 ml-2",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:934,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:869,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:865,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:853,columnNumber:11},void 0),r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:985,columnNumber:13},void 0),m?r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:992,columnNumber:19},void 0),r.jsxDEV("span",{className:"font-mono",children:m.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:993,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:991,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:998,columnNumber:19},void 0),r.jsxDEV("span",{className:"font-mono",children:m.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:999,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:997,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1004,columnNumber:19},void 0),r.jsxDEV("span",{children:[m.coords.accuracy?.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1005,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1003,columnNumber:17},void 0),m.coords.speed&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1009,columnNumber:21},void 0),r.jsxDEV("span",{children:[(3.6*m.coords.speed).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1010,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1008,columnNumber:19},void 0),m.coords.heading&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1017,columnNumber:21},void 0),r.jsxDEV("span",{children:[m.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1018,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1016,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-gray-600",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1022,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-sm",children:new Date(m.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1023,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1021,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:990,columnNumber:15},void 0):r.jsxDEV("p",{className:"text-gray-500",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1029,columnNumber:15},void 0),r.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[r.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1033,columnNumber:15},void 0),r.jsxDEV("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1037,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1040,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1041,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1044,columnNumber:17},void 0),r.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1045,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1036,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:1032,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:984,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:851,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:713,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:712,columnNumber:5},void 0):r.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxDEV("div",{className:"max-w-md w-full",children:r.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxDEV("div",{className:"text-center mb-6",children:[r.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"🚌 Driver Login"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:633,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Sign in to start tracking your bus"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:636,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:632,columnNumber:13},void 0),j&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsxDEV("p",{className:"text-red-700 text-sm",children:j},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:643,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:642,columnNumber:15},void 0),r.jsxDEV("form",{onSubmit:R,className:"space-y-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:649,columnNumber:17},void 0),r.jsxDEV("input",{id:"email",type:"email",required:!0,value:D.email,onChange:e=>C(r=>({...r,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:655,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:648,columnNumber:15},void 0),r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:669,columnNumber:17},void 0),r.jsxDEV("input",{id:"password",type:"password",required:!0,value:D.password,onChange:e=>C(r=>({...r,password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:675,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:668,columnNumber:15},void 0),r.jsxDEV("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:E?"Signing In...":"Sign In"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:691,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:647,columnNumber:13},void 0),r.jsxDEV("div",{className:"mt-4 text-center",children:r.jsxDEV("p",{className:"text-sm text-gray-600",children:"Please contact your administrator for login credentials"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:701,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:700,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:631,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:630,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverInterface.tsx",lineNumber:629,columnNumber:7},void 0)}},Symbol.toStringTag,{value:"Module"})),x=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const i=o(),[d,m]=e.useState(!1),[u,b]=e.useState(null),[v,f]=e.useState(null),[g,x]=e.useState(null),[h,p]=e.useState(null),[D,C]=e.useState(0),[j,P]=e.useState("disconnected"),E=e.useRef(null),w=e.useRef(null),y=e.useRef(null),V=e.useRef(null),I=e.useRef(null),S=e.useRef(!1),k=e.useRef(null),[L,A]=e.useState(!1),_=e.useRef({});e.useEffect(()=>{if(S.current||L)return;const e=1===performance.navigation?.type||"reload"===performance.getEntriesByType("navigation")[0]?.type;S.current=!0,A(!0);const r=()=>{n.isConnected()?P("connected"):"connecting"===n.getConnectionState()||"reconnecting"===n.getConnectionState()?P("connecting"):P("disconnected")};r();const o=setInterval(r,2e3),t=setInterval(()=>{const e=n.getConnectionState();n.isConnected()||"connecting"===e||"reconnecting"===e?"connecting"===e&&setTimeout(()=>{"connecting"!==n.getConnectionState()||n.isConnected()||n.forceFreshConnection().catch(e=>{})},3e4):n.connectAs("driver").catch(e=>{})},5e3);return(async()=>{try{const{data:{session:o}}=await a.auth.getSession();if(o?.user){const t=s.getCurrentDriverAssignment();if(t)b({bus_id:t.bus_id,bus_number:t.bus_number,route_id:t.route_id,route_name:t.route_name,driver_id:t.driver_id,driver_name:t.driver_name});else{const{isValid:e,assignment:r}=await s.validateDriverSession();if(e&&r)b({bus_id:r.bus_id,bus_number:r.bus_number,route_id:r.route_id,route_name:r.route_name,driver_id:r.driver_id,driver_name:r.driver_name});else{if(!(await O(o.user.id)))return}}if(!n.isConnected())try{await n.connectAs("driver")}catch(r){setTimeout(async()=>{if(!n.isConnected())try{await n.connectAs("driver")}catch(r){if(e)try{await n.forceReconnect()}catch(o){}}},2e3)}n.socket?.on("connect",()=>{}),n.socket?.on("disconnect",()=>{}),n.socket?.on("error",e=>{}),n.socket?.on("driver:authenticated",e=>{b(e.busInfo)}),n.socket?.on("driver:authentication_failed",e=>{}),n.socket?.on("driver:locationConfirmed",()=>{p((new Date).toLocaleTimeString()),C(e=>e+1)}),E.current=n.socket;const i=s.getCurrentDriverAssignment();i&&n.socket?.emit("driver:connected",{driverId:i.driver_id,busId:i.bus_id,timestamp:(new Date).toISOString()})}else i("/driver-login")}catch(r){}})(),()=>{clearInterval(o),clearInterval(t),k.current&&(clearInterval(k.current),k.current=null),n.socket&&(n.socket.off("connect"),n.socket.off("disconnect"),n.socket.off("error"),n.socket.off("driver:authenticated"),n.socket.off("driver:authentication_failed"),n.socket.off("driver:locationConfirmed"))}},[i]);const T=e.useCallback(()=>{if(!V.current)return;const e=23.0225,r=72.5714;y.current&&(y.current.remove(),y.current=null);try{y.current=new t.Map({container:V.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[r,e],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,antialias:!0,failIfMajorPerformanceCaveat:!1,maxPitch:60,localIdeographFontFamily:"sans-serif",renderWorldCopies:!0});const o=e=>{e instanceof WebGLContextEvent&&e.preventDefault(),setTimeout(()=>{try{y.current&&y.current.resize()}catch(e){}},1e3)};_.current.webglcontextlost=o,y.current.on("webglcontextlost",o);const n=()=>{if(y.current&&I.current){y.current.resize();const e=I.current.getLngLat();I.current.setLngLat(e)}};_.current.webglcontextrestored=n,y.current.on("webglcontextrestored",n);const i=document.createElement("div");i.className="driver-marker",i.innerHTML='\n        <div class="driver-marker-content">\n          <div style="font-size: 16px;">🚌</div>\n        </div>\n      ',I.current=new t.Marker({element:i,anchor:"center"}).setLngLat([r,e]).addTo(y.current);const s=e=>{};_.current.error=s,y.current.on("error",s);const l=()=>{};_.current.load=l,y.current.on("load",l)}catch(o){try{if(V.current&&!y.current){y.current=new t.Map({container:V.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"osm-tiles",type:"raster",source:"osm",minzoom:0,maxzoom:22}]},center:[r,e],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0});const o=document.createElement("div");o.className="driver-marker",o.innerHTML="<div>🚌</div>",I.current=new t.Marker({element:o}).setLngLat([r,e]).addTo(y.current)}}catch(n){}}},[]),R=async()=>{if(!navigator.geolocation)return void x("Geolocation is not supported by this browser");const e={enableHighAccuracy:!0,timeout:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?3e4:6e4,maximumAge:0};try{w.current=navigator.geolocation.watchPosition(e=>{if(f(e),x(null),y.current&&I.current&&((e,r)=>{if(!y.current||!I.current)return;const o=[r,e];I.current.setLngLat(o),y.current.flyTo({center:o,duration:1e3})})(e.coords.latitude,e.coords.longitude),n.socket&&n.isConnected()){const r={driverId:u?.driver_id||"",busId:u?.bus_id||"",latitude:e.coords.latitude,longitude:e.coords.longitude,timestamp:(new Date).toISOString(),speed:e.coords.speed||void 0,heading:e.coords.heading||void 0},o=N.validateLocationData(r);if(o.success&&o.data){const e={driverId:o.data.driverId,busId:o.data.busId,latitude:o.data.latitude,longitude:o.data.longitude,timestamp:o.data.timestamp,speed:o.data.speed,heading:o.data.heading};n.socket.emit("driver:locationUpdate",e),p((new Date).toLocaleTimeString()),C(e=>e+1),o.sanitized}else x(`Location validation failed: ${o.errors?.join(", ")}`)}},e=>{let r="";switch(e.code){case e.PERMISSION_DENIED:r="Location permission denied. Please enable location access.";break;case e.POSITION_UNAVAILABLE:r="Location information is unavailable.";break;case e.TIMEOUT:r="Location request timed out.";break;default:r="An unknown error occurred."}x(r),m(!1)},e),m(!0)}catch(r){x("Failed to start location tracking")}},M=()=>{w.current&&(navigator.geolocation.clearWatch(w.current),w.current=null),m(!1)},z=e.useCallback(()=>{try{y.current&&(_.current.webglcontextlost&&y.current.off("webglcontextlost",_.current.webglcontextlost),_.current.webglcontextrestored&&y.current.off("webglcontextrestored",_.current.webglcontextrestored),_.current.error&&y.current.off("error",_.current.error),_.current.load&&y.current.off("load",_.current.load),_.current={},y.current.remove(),y.current=null),I.current=null}catch(e){}},[]);e.useEffect(()=>(V.current&&!y.current&&T(),()=>{z()}),[]);const O=async e=>{try{const{data:{session:r}}=await a.auth.getSession();if(!r?.access_token)return!1;const o=await fetch(`${c.api.url}/buses?driver_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`},signal:AbortSignal.timeout(1e4)});if(o.ok){const e=await o.json();if(e.success&&e.data&&Array.isArray(e.data)&&e.data.length>0){const r=e.data[0];return b({bus_id:r.bus_id||r.id,bus_number:r.bus_number||r.number_plate||r.code,route_id:r.route_id||"",route_name:r.route_name||"Route TBD",driver_id:r.driver_id||r.assigned_driver_id,driver_name:r.driver_name||r.driver_full_name||"Driver TBD"}),!0}return e.data?.busInfo?(b(e.data.busInfo),!0):!!e.busInfo&&(b(e.busInfo),!0)}await o.text();return!1}catch(r){return!1}};return r.jsxDEV(l,{mapType:"driver",onMapError:(e,r)=>{},children:r.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4 driver-dashboard-container",children:r.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[r.jsxDEV("div",{className:"card-glass p-6 mb-6",children:r.jsxDEV("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxDEV("div",{className:"flex-1",children:[r.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"🚌 Driver Dashboard"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:818,columnNumber:15},void 0),r.jsxDEV("div",{className:"space-y-1",children:[r.jsxDEV("p",{className:"text-white/80 text-sm sm:text-base",children:["Welcome,"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:u?.driver_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:824,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:822,columnNumber:17},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[r.jsxDEV("span",{className:"text-blue-300",children:["🚌 Bus:"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:u?.bus_number},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:831,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:829,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-green-300",children:["🛣️ Route:"," ",r.jsxDEV("span",{className:"font-semibold text-white",children:u?.route_name},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:837,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:835,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:828,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:821,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:817,columnNumber:13},void 0),r.jsxDEV("div",{className:"flex gap-2",children:[r.jsxDEV("button",{onClick:async()=>{const{data:{session:e}}=await a.auth.getSession();e?.user?.id&&O(e.user.id)},className:"btn-primary w-full sm:w-auto",children:"🔄 Refresh"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:845,columnNumber:15},void 0),r.jsxDEV("button",{onClick:async()=>{try{await n.forceFreshConnection()}catch(e){}},className:"bg-yellow-500 text-white px-3 py-2 rounded-lg hover:bg-yellow-600 transition-colors duration-200 text-sm",title:"Force WebSocket reconnection (Debug)",children:"🔧 Reconnect"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:861,columnNumber:15},void 0),r.jsxDEV("button",{onClick:async()=>{try{M(),n.disconnect(),E.current=null,z(),await a.auth.signOut()}catch(e){}},className:"btn-secondary w-full sm:w-auto",children:"Sign Out"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:876,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:844,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:816,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:815,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+("connected"===j?"bg-green-500":"connecting"===j?"bg-yellow-500 animate-pulse":"bg-red-500")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:891,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Connection"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:901,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:"connected"===j?"Connected":"connecting"===j?"Connecting...":"Disconnected"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:902,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:900,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:890,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:889,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(d?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:916,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"GPS Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:920,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:d?"Active":"Inactive"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:923,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:919,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:915,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:914,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Updates Sent"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:933,columnNumber:15},void 0),r.jsxDEV("p",{className:"text-xl font-bold text-blue-300",children:D},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:934,columnNumber:15},void 0),h&&r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:["Last: ",h]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:936,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:932,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:931,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-4",children:r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"w-3 h-3 rounded-full mr-3 "+(g?"bg-red-500":v?"bg-green-500":"bg-gray-400")},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:946,columnNumber:15},void 0),r.jsxDEV("div",{className:"min-w-0 flex-1",children:[r.jsxDEV("h3",{className:"font-semibold text-white text-sm",children:"Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:950,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-xs text-white/70 truncate",children:g?"Error":v?"Available":"Waiting"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:951,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:949,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:945,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:944,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:887,columnNumber:9},void 0),r.jsxDEV("div",{className:"card-glass p-6 mb-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Location Tracking Controls"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:965,columnNumber:11},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:d?r.jsxDEV("button",{onClick:M,className:"btn-primary bg-red-600 hover:bg-red-700 w-full py-3 px-6 text-lg font-semibold",children:"⏹️ Stop Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:991,columnNumber:15},void 0):r.jsxDEV(r.Fragment,{children:[r.jsxDEV("button",{onClick:R,className:"btn-primary flex-1 py-3 px-6 text-lg font-semibold",children:"🚀 Start Tracking"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:971,columnNumber:17},void 0),g&&r.jsxDEV("button",{onClick:()=>{x(null),R()},className:"btn-secondary w-full py-2 px-4 text-sm",children:"🔄 Retry Location Permission"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:979,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:970,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:968,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:964,columnNumber:9},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"🗺️ Live Location Map"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1005,columnNumber:13},void 0),r.jsxDEV("div",{ref:V,className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg border border-white/20 bg-white/5 driver-map-container",style:{minHeight:"300px"}},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1008,columnNumber:13},void 0),g&&r.jsxDEV("div",{className:"bg-red-500/20 border border-red-400/30 rounded-lg p-4 mt-4",children:[r.jsxDEV("p",{className:"text-red-200 text-sm mb-3",children:g},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1016,columnNumber:17},void 0),r.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-3",children:[r.jsxDEV("h4",{className:"font-semibold text-yellow-200 mb-2",children:"📱 Mobile Location Troubleshooting:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1020,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded p-2 mb-2",children:[r.jsxDEV("h5",{className:"font-semibold text-blue-200 text-xs mb-1",children:"📱 For Mobile Devices:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1026,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-blue-100 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1031,columnNumber:27},void 0)," Settings → Apps → Chrome → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1030,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Android Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1035,columnNumber:27},void 0)," Settings → Apps → Firefox → Permissions → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1034,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1039,columnNumber:27},void 0)," Settings → Safari → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1038,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"iPhone Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1043,columnNumber:27},void 0)," Settings → Chrome → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1042,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Make sure:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1047,columnNumber:27},void 0)," GPS/Location Services are ON in phone settings"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1046,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Try:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1051,columnNumber:27},void 0)," Going outdoors or near a window for better GPS signal"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1050,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1029,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1025,columnNumber:19},void 0),r.jsxDEV("div",{className:"bg-green-500/20 border border-green-400/30 rounded p-2",children:[r.jsxDEV("h5",{className:"font-semibold text-green-200 text-xs mb-1",children:"💻 For Desktop Browsers:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1059,columnNumber:21},void 0),r.jsxDEV("ul",{className:"text-xs text-green-100 space-y-1",children:[r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Chrome:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1064,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1063,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Firefox:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1068,columnNumber:27},void 0)," Click lock icon → Location → Allow → Refresh"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1067,columnNumber:23},void 0),r.jsxDEV("li",{children:["• ",r.jsxDEV("strong",{children:"Safari:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1072,columnNumber:27},void 0)," Safari → Preferences → Websites → Location → Allow"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1071,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1062,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1058,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:[r.jsxDEV("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs px-3 py-1",children:"🔄 Refresh Page & Retry"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1078,columnNumber:21},void 0),r.jsxDEV("button",{onClick:()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{const o=`✅ Location Test Successful!\n\nLatitude: ${r.coords.latitude}\nLongitude: ${r.coords.longitude}\nAccuracy: ${r.coords.accuracy}m\nDevice: ${e?"Mobile":"Desktop"}\n\nLocation is working! You can now start tracking.`;alert(o),x(null)},r=>{const o=`❌ Location Test Failed\n\nError Code: ${r.code}\nError Message: ${r.message}\nDevice: ${e?"Mobile":"Desktop"}\n\nPlease check your location permissions.`;alert(o)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")},className:"btn-primary text-xs px-3 py-1",children:"🧪 Test Location"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1085,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1077,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1019,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1015,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1004,columnNumber:11},void 0),r.jsxDEV("div",{className:"card-glass p-6",children:[r.jsxDEV("h2",{className:"text-xl font-semibold text-white mb-4",children:"📍 Current Location Details"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1139,columnNumber:13},void 0),v?r.jsxDEV("div",{className:"space-y-4 bg-white/10 rounded-lg p-4 border border-white/20",children:[r.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[r.jsxDEV("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse mr-2"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1146,columnNumber:19},void 0),r.jsxDEV("span",{className:"text-sm text-green-300 font-medium",children:"📍 Live Location Data"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1147,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1145,columnNumber:17},void 0),r.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Latitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1153,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:v.coords.latitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1154,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1152,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Longitude:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1159,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-mono text-white font-semibold text-sm",children:v.coords.longitude.toFixed(6)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1160,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1158,columnNumber:19},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Accuracy:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1165,columnNumber:21},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[v.coords.accuracy?.toFixed(1),"m"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1166,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1164,columnNumber:19},void 0),v.coords.speed&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Speed:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1172,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[(3.6*v.coords.speed).toFixed(1)," km/h"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1173,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1171,columnNumber:21},void 0),v.coords.heading&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Heading:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1180,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-semibold text-sm",children:[v.coords.heading.toFixed(1),"°"]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1181,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1179,columnNumber:21},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Updates Sent:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1187,columnNumber:21},void 0),r.jsxDEV("span",{className:"font-bold text-blue-300 text-sm",children:D},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1188,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1186,columnNumber:19},void 0),h&&r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Last Update:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1194,columnNumber:23},void 0),r.jsxDEV("span",{className:"text-white font-medium text-sm",children:h},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1197,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1193,columnNumber:21},void 0),r.jsxDEV("div",{className:"flex justify-between",children:[r.jsxDEV("span",{className:"text-white/70 text-sm",children:"Timestamp:"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1203,columnNumber:21},void 0),r.jsxDEV("span",{className:"text-white font-medium text-sm",children:new Date(v.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1204,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1202,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1151,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1143,columnNumber:15},void 0):r.jsxDEV("div",{className:"bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4 text-center",children:[r.jsxDEV("div",{className:"text-yellow-300 mb-2 text-2xl",children:"📍"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1212,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-yellow-200 font-medium",children:"No location data available"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1213,columnNumber:17},void 0),r.jsxDEV("p",{className:"text-yellow-100 text-sm mt-1",children:'Click "Start Tracking" to begin location sharing'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1216,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1211,columnNumber:15},void 0),r.jsxDEV("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mt-6",children:[r.jsxDEV("h3",{className:"font-semibold text-blue-200 mb-2",children:"ℹ️ Instructions"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1223,columnNumber:15},void 0),r.jsxDEV("ul",{className:"text-sm text-blue-100 space-y-1",children:[r.jsxDEV("li",{children:'• Click "Start Tracking" to begin sending location updates'},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1227,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Your location will be sent every few seconds"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1230,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Students and admin can see your bus location in real-time"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1231,columnNumber:17},void 0),r.jsxDEV("li",{children:"• Make sure to allow location access when prompted"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1234,columnNumber:17},void 0),r.jsxDEV("li",{children:"• The map shows your current position with a blue marker"},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1235,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1226,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1222,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1138,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:1002,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:813,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:812,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/College Project/frontend/src/components/DriverDashboard.tsx",lineNumber:806,columnNumber:5},void 0)}},Symbol.toStringTag,{value:"Module"}));export{g as D,c as a,x as b,N as d,d as e,m as l,a as s};
